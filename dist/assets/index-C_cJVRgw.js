var GJ=Object.defineProperty;var WJ=(t,e,r)=>e in t?GJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var RI=(t,e,r)=>WJ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as KJ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var b1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r3={exports:{}},Yp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI;function QJ(){if(MI)return Yp;MI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Yp.Fragment=e,Yp.jsx=r,Yp.jsxs=r,Yp}var DI;function XJ(){return DI||(DI=1,r3.exports=QJ()),r3.exports}var s=XJ(),n3={exports:{}},or={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI;function YJ(){if(PI)return or;PI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),x=Symbol.iterator;function y(Z){return Z===null||typeof Z!="object"?null:(Z=x&&Z[x]||Z["@@iterator"],typeof Z=="function"?Z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,w={};function T(Z,ne,Y){this.props=Z,this.context=ne,this.refs=w,this.updater=Y||S}T.prototype.isReactComponent={},T.prototype.setState=function(Z,ne){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ne,"setState")},T.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function C(){}C.prototype=T.prototype;function O(Z,ne,Y){this.props=Z,this.context=ne,this.refs=w,this.updater=Y||S}var L=O.prototype=new C;L.constructor=O,N(L,T.prototype),L.isPureReactComponent=!0;var I=Array.isArray;function R(){}var A={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function k(Z,ne,Y){var de=Y.ref;return{$$typeof:t,type:Z,key:ne,ref:de!==void 0?de:null,props:Y}}function U(Z,ne){return k(Z.type,ne,Z.props)}function P(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function $(Z){var ne={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Y){return ne[Y]})}var B=/\/+/g;function G(Z,ne){return typeof Z=="object"&&Z!==null&&Z.key!=null?$(""+Z.key):ne.toString(36)}function K(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(R,R):(Z.status="pending",Z.then(function(ne){Z.status==="pending"&&(Z.status="fulfilled",Z.value=ne)},function(ne){Z.status==="pending"&&(Z.status="rejected",Z.reason=ne)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function H(Z,ne,Y,de,ye){var Ue=typeof Z;(Ue==="undefined"||Ue==="boolean")&&(Z=null);var Xe=!1;if(Z===null)Xe=!0;else switch(Ue){case"bigint":case"string":case"number":Xe=!0;break;case"object":switch(Z.$$typeof){case t:case e:Xe=!0;break;case p:return Xe=Z._init,H(Xe(Z._payload),ne,Y,de,ye)}}if(Xe)return ye=ye(Z),Xe=de===""?"."+G(Z,0):de,I(ye)?(Y="",Xe!=null&&(Y=Xe.replace(B,"$&/")+"/"),H(ye,ne,Y,"",function(he){return he})):ye!=null&&(P(ye)&&(ye=U(ye,Y+(ye.key==null||Z&&Z.key===ye.key?"":(""+ye.key).replace(B,"$&/")+"/")+Xe)),ne.push(ye)),1;Xe=0;var Ye=de===""?".":de+":";if(I(Z))for(var _e=0;_e<Z.length;_e++)de=Z[_e],Ue=Ye+G(de,_e),Xe+=H(de,ne,Y,Ue,ye);else if(_e=y(Z),typeof _e=="function")for(Z=_e.call(Z),_e=0;!(de=Z.next()).done;)de=de.value,Ue=Ye+G(de,_e++),Xe+=H(de,ne,Y,Ue,ye);else if(Ue==="object"){if(typeof Z.then=="function")return H(K(Z),ne,Y,de,ye);throw ne=String(Z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Xe}function ee(Z,ne,Y){if(Z==null)return Z;var de=[],ye=0;return H(Z,de,"","",function(Ue){return ne.call(Y,Ue,ye++)}),de}function ae(Z){if(Z._status===-1){var ne=Z._result;ne=ne(),ne.then(function(Y){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Y)},function(Y){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Y)}),Z._status===-1&&(Z._status=0,Z._result=ne)}if(Z._status===1)return Z._result.default;throw Z._result}var ce=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},fe={map:ee,forEach:function(Z,ne,Y){ee(Z,function(){ne.apply(this,arguments)},Y)},count:function(Z){var ne=0;return ee(Z,function(){ne++}),ne},toArray:function(Z){return ee(Z,function(ne){return ne})||[]},only:function(Z){if(!P(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return or.Activity=m,or.Children=fe,or.Component=T,or.Fragment=r,or.Profiler=a,or.PureComponent=O,or.StrictMode=n,or.Suspense=d,or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,or.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return A.H.useMemoCache(Z)}},or.cache=function(Z){return function(){return Z.apply(null,arguments)}},or.cacheSignal=function(){return null},or.cloneElement=function(Z,ne,Y){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var de=N({},Z.props),ye=Z.key;if(ne!=null)for(Ue in ne.key!==void 0&&(ye=""+ne.key),ne)!E.call(ne,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&ne.ref===void 0||(de[Ue]=ne[Ue]);var Ue=arguments.length-2;if(Ue===1)de.children=Y;else if(1<Ue){for(var Xe=Array(Ue),Ye=0;Ye<Ue;Ye++)Xe[Ye]=arguments[Ye+2];de.children=Xe}return k(Z.type,ye,de)},or.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:i,_context:Z},Z},or.createElement=function(Z,ne,Y){var de,ye={},Ue=null;if(ne!=null)for(de in ne.key!==void 0&&(Ue=""+ne.key),ne)E.call(ne,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ye[de]=ne[de]);var Xe=arguments.length-2;if(Xe===1)ye.children=Y;else if(1<Xe){for(var Ye=Array(Xe),_e=0;_e<Xe;_e++)Ye[_e]=arguments[_e+2];ye.children=Ye}if(Z&&Z.defaultProps)for(de in Xe=Z.defaultProps,Xe)ye[de]===void 0&&(ye[de]=Xe[de]);return k(Z,Ue,ye)},or.createRef=function(){return{current:null}},or.forwardRef=function(Z){return{$$typeof:c,render:Z}},or.isValidElement=P,or.lazy=function(Z){return{$$typeof:p,_payload:{_status:-1,_result:Z},_init:ae}},or.memo=function(Z,ne){return{$$typeof:h,type:Z,compare:ne===void 0?null:ne}},or.startTransition=function(Z){var ne=A.T,Y={};A.T=Y;try{var de=Z(),ye=A.S;ye!==null&&ye(Y,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(R,ce)}catch(Ue){ce(Ue)}finally{ne!==null&&Y.types!==null&&(ne.types=Y.types),A.T=ne}},or.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},or.use=function(Z){return A.H.use(Z)},or.useActionState=function(Z,ne,Y){return A.H.useActionState(Z,ne,Y)},or.useCallback=function(Z,ne){return A.H.useCallback(Z,ne)},or.useContext=function(Z){return A.H.useContext(Z)},or.useDebugValue=function(){},or.useDeferredValue=function(Z,ne){return A.H.useDeferredValue(Z,ne)},or.useEffect=function(Z,ne){return A.H.useEffect(Z,ne)},or.useEffectEvent=function(Z){return A.H.useEffectEvent(Z)},or.useId=function(){return A.H.useId()},or.useImperativeHandle=function(Z,ne,Y){return A.H.useImperativeHandle(Z,ne,Y)},or.useInsertionEffect=function(Z,ne){return A.H.useInsertionEffect(Z,ne)},or.useLayoutEffect=function(Z,ne){return A.H.useLayoutEffect(Z,ne)},or.useMemo=function(Z,ne){return A.H.useMemo(Z,ne)},or.useOptimistic=function(Z,ne){return A.H.useOptimistic(Z,ne)},or.useReducer=function(Z,ne,Y){return A.H.useReducer(Z,ne,Y)},or.useRef=function(Z){return A.H.useRef(Z)},or.useState=function(Z){return A.H.useState(Z)},or.useSyncExternalStore=function(Z,ne,Y){return A.H.useSyncExternalStore(Z,ne,Y)},or.useTransition=function(){return A.H.useTransition()},or.version="19.2.4",or}var LI;function KA(){return LI||(LI=1,n3.exports=YJ()),n3.exports}var _=KA();const se=nn(_);var a3={exports:{}},Jp={},s3={exports:{}},i3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI;function JJ(){return BI||(BI=1,(function(t){function e(H,ee){var ae=H.length;H.push(ee);e:for(;0<ae;){var ce=ae-1>>>1,fe=H[ce];if(0<a(fe,ee))H[ce]=ee,H[ae]=fe,ae=ce;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var ee=H[0],ae=H.pop();if(ae!==ee){H[0]=ae;e:for(var ce=0,fe=H.length,Z=fe>>>1;ce<Z;){var ne=2*(ce+1)-1,Y=H[ne],de=ne+1,ye=H[de];if(0>a(Y,ae))de<fe&&0>a(ye,Y)?(H[ce]=ye,H[de]=ae,ce=de):(H[ce]=Y,H[ne]=ae,ce=ne);else if(de<fe&&0>a(ye,ae))H[ce]=ye,H[de]=ae,ce=de;else break e}}return ee}function a(H,ee){var ae=H.sortIndex-ee.sortIndex;return ae!==0?ae:H.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],p=1,m=null,x=3,y=!1,S=!1,N=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var ee=r(h);ee!==null;){if(ee.callback===null)n(h);else if(ee.startTime<=H)n(h),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=r(h)}}function I(H){if(N=!1,L(H),!S)if(r(d)!==null)S=!0,R||(R=!0,$());else{var ee=r(h);ee!==null&&K(I,ee.startTime-H)}}var R=!1,A=-1,E=5,k=-1;function U(){return w?!0:!(t.unstable_now()-k<E)}function P(){if(w=!1,R){var H=t.unstable_now();k=H;var ee=!0;try{e:{S=!1,N&&(N=!1,C(A),A=-1),y=!0;var ae=x;try{t:{for(L(H),m=r(d);m!==null&&!(m.expirationTime>H&&U());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,x=m.priorityLevel;var fe=ce(m.expirationTime<=H);if(H=t.unstable_now(),typeof fe=="function"){m.callback=fe,L(H),ee=!0;break t}m===r(d)&&n(d),L(H)}else n(d);m=r(d)}if(m!==null)ee=!0;else{var Z=r(h);Z!==null&&K(I,Z.startTime-H),ee=!1}}break e}finally{m=null,x=ae,y=!1}ee=void 0}}finally{ee?$():R=!1}}}var $;if(typeof O=="function")$=function(){O(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=P,$=function(){G.postMessage(null)}}else $=function(){T(P,0)};function K(H,ee){A=T(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(H){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var ae=x;x=ee;try{return H()}finally{x=ae}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ae=x;x=H;try{return ee()}finally{x=ae}},t.unstable_scheduleCallback=function(H,ee,ae){var ce=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ce+ae:ce):ae=ce,H){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ae+fe,H={id:p++,callback:ee,priorityLevel:H,startTime:ae,expirationTime:fe,sortIndex:-1},ae>ce?(H.sortIndex=ae,e(h,H),r(d)===null&&H===r(h)&&(N?(C(A),A=-1):N=!0,K(I,ae-ce))):(H.sortIndex=fe,e(d,H),S||y||(S=!0,R||(R=!0,$()))),H},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(H){var ee=x;return function(){var ae=x;x=ee;try{return H.apply(this,arguments)}finally{x=ae}}}})(i3)),i3}var $I;function ZJ(){return $I||($I=1,s3.exports=JJ()),s3.exports}var o3={exports:{}},_s={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI;function eZ(){if(zI)return _s;zI=1;var t=KA();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,_s.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},_s.flushSync=function(d){var h=o.T,p=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=h,n.p=p,n.d.f()}},_s.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},_s.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},_s.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:y}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:x,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_s.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},_s.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_s.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},_s.requestFormReset=function(d){n.d.r(d)},_s.unstable_batchedUpdates=function(d,h){return d(h)},_s.useFormState=function(d,h,p){return o.H.useFormState(d,h,p)},_s.useFormStatus=function(){return o.H.useHostTransitionStatus()},_s.version="19.2.4",_s}var UI;function kV(){if(UI)return o3.exports;UI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),o3.exports=eZ(),o3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VI;function tZ(){if(VI)return Jp;VI=1;var t=ZJ(),e=KA(),r=kV();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var j=b.alternate;if(j===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===j.child){for(j=b.child;j;){if(j===f)return d(b),l;if(j===g)return d(b),u;j=j.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=j;else{for(var V=!1,J=b.child;J;){if(J===f){V=!0,f=b,g=j;break}if(J===g){V=!0,g=b,f=j;break}J=J.sibling}if(!V){for(J=j.child;J;){if(J===f){V=!0,f=j,g=b;break}if(J===g){V=!0,g=j,f=b;break}J=J.sibling}if(!V)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=P&&l[P]||l["@@iterator"],typeof l=="function"?l:null)}var B=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===B?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case N:return"Fragment";case T:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList";case k:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case S:return"Portal";case O:return l.displayName||"Context";case C:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case A:return u=l.displayName||null,u!==null?u:G(l.type)||"Memo";case E:u=l._payload,l=l._init;try{return G(l(u))}catch{}}return null}var K=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},ce=[],fe=-1;function Z(l){return{current:l}}function ne(l){0>fe||(l.current=ce[fe],ce[fe]=null,fe--)}function Y(l,u){fe++,ce[fe]=l.current,l.current=u}var de=Z(null),ye=Z(null),Ue=Z(null),Xe=Z(null);function Ye(l,u){switch(Y(Ue,u),Y(ye,l),Y(de,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?rI(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=rI(u),l=nI(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(de),Y(de,l)}function _e(){ne(de),ne(ye),ne(Ue)}function he(l){l.memoizedState!==null&&Y(Xe,l);var u=de.current,f=nI(u,l.type);u!==f&&(Y(ye,l),Y(de,f))}function Q(l){ye.current===l&&(ne(de),ne(ye)),Xe.current===l&&(ne(Xe),Wp._currentValue=ae)}var X,Se;function Ne(l){if(X===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);X=u&&u[1]||"",Se=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+X+l+Se}var Ke=!1;function at(l,u){if(!l||Ke)return"";Ke=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(Be){var Le=Be}Reflect.construct(l,[],Je)}else{try{Je.call()}catch(Be){Le=Be}l.call(Je.prototype)}}else{try{throw Error()}catch(Be){Le=Be}(Je=l())&&typeof Je.catch=="function"&&Je.catch(function(){})}}catch(Be){if(Be&&Le&&typeof Be.stack=="string")return[Be.stack,Le.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=g.DetermineComponentFrameRoot(),V=j[0],J=j[1];if(V&&J){var ue=V.split(`
`),Ie=J.split(`
`);for(b=g=0;g<ue.length&&!ue[g].includes("DetermineComponentFrameRoot");)g++;for(;b<Ie.length&&!Ie[b].includes("DetermineComponentFrameRoot");)b++;if(g===ue.length||b===Ie.length)for(g=ue.length-1,b=Ie.length-1;1<=g&&0<=b&&ue[g]!==Ie[b];)b--;for(;1<=g&&0<=b;g--,b--)if(ue[g]!==Ie[b]){if(g!==1||b!==1)do if(g--,b--,0>b||ue[g]!==Ie[b]){var He=`
`+ue[g].replace(" at new "," at ");return l.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",l.displayName)),He}while(1<=g&&0<=b);break}}}finally{Ke=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Ne(f):""}function Rt(l,u){switch(l.tag){case 26:case 27:case 5:return Ne(l.type);case 16:return Ne("Lazy");case 13:return l.child!==u&&u!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return at(l.type,!1);case 11:return at(l.type.render,!1);case 1:return at(l.type,!0);case 31:return Ne("Activity");default:return""}}function Pe(l){try{var u="",f=null;do u+=Rt(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var lt=Object.prototype.hasOwnProperty,Nt=t.unstable_scheduleCallback,vt=t.unstable_cancelCallback,yt=t.unstable_shouldYield,me=t.unstable_requestPaint,We=t.unstable_now,mt=t.unstable_getCurrentPriorityLevel,Ze=t.unstable_ImmediatePriority,et=t.unstable_UserBlockingPriority,Et=t.unstable_NormalPriority,wt=t.unstable_LowPriority,pr=t.unstable_IdlePriority,be=t.log,nt=t.unstable_setDisableYieldValue,jt=null,Pt=null;function Bt(l){if(typeof be=="function"&&nt(l),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(jt,l)}catch{}}var tt=Math.clz32?Math.clz32:Hr,ar=Math.log,Ar=Math.LN2;function Hr(l){return l>>>=0,l===0?32:31-(ar(l)/Ar|0)|0}var xn=256,_r=262144,Wt=4194304;function Vt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function _t(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,j=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var J=g&134217727;return J!==0?(g=J&~j,g!==0?b=Vt(g):(V&=J,V!==0?b=Vt(V):f||(f=J&~l,f!==0&&(b=Vt(f))))):(J=g&~j,J!==0?b=Vt(J):V!==0?b=Vt(V):f||(f=g&~l,f!==0&&(b=Vt(f)))),b===0?0:u!==0&&u!==b&&(u&j)===0&&(j=b&-b,f=u&-u,j>=f||j===32&&(f&4194048)!==0)?u:b}function Gr(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function dn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function en(){var l=Wt;return Wt<<=1,(Wt&62914560)===0&&(Wt=4194304),l}function Wr(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function yn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function hr(l,u,f,g,b,j){var V=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var J=l.entanglements,ue=l.expirationTimes,Ie=l.hiddenUpdates;for(f=V&~f;0<f;){var He=31-tt(f),Je=1<<He;J[He]=0,ue[He]=-1;var Le=Ie[He];if(Le!==null)for(Ie[He]=null,He=0;He<Le.length;He++){var Be=Le[He];Be!==null&&(Be.lane&=-536870913)}f&=~Je}g!==0&&Sa(l,g,0),j!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=j&~(V&~u))}function Sa(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-tt(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function vn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-tt(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function Dn(l,u){var f=u&-u;return f=(f&42)!==0?1:cs(f),(f&(l.suspendedLanes|u))!==0?0:f}function cs(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Or(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function bn(){var l=ee.p;return l!==0?l:(l=window.event,l===void 0?32:TI(l.type))}function us(l,u){var f=ee.p;try{return ee.p=l,u()}finally{ee.p=f}}var Zn=Math.random().toString(36).slice(2),on="__reactFiber$"+Zn,wn="__reactProps$"+Zn,kn="__reactContainer$"+Zn,ds="__reactEvents$"+Zn,Ja="__reactListeners$"+Zn,Rs="__reactHandles$"+Zn,pi="__reactResources$"+Zn,Ns="__reactMarker$"+Zn;function Tt(l){delete l[on],delete l[wn],delete l[ds],delete l[Ja],delete l[Rs]}function pe(l){var u=l[on];if(u)return u;for(var f=l.parentNode;f;){if(u=f[kn]||f[on]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=uI(l);l!==null;){if(f=l[on])return f;l=uI(l)}return u}l=f,f=l.parentNode}return null}function rt(l){if(l=l[on]||l[kn]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function dt(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Yt(l){var u=l[pi];return u||(u=l[pi]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function xr(l){l[Ns]=!0}var hn=new Set,tn={};function Sn(l,u){Br(l,u),Br(l+"Capture",u)}function Br(l,u){for(tn[l]=u,l=0;l<u.length;l++)hn.add(u[l])}var $i=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mi={},go={};function wl(l){return lt.call(go,l)?!0:lt.call(mi,l)?!1:$i.test(l)?go[l]=!0:(mi[l]=!0,!1)}function gi(l,u,f){if(wl(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function xi(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function Ba(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function Na(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function we(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,j=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(V){f=""+V,j.call(this,V)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(V){f=""+V},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Ae(l){if(!l._valueTracker){var u=q(l)?"checked":"value";l._valueTracker=we(l,u,""+l[u])}}function Ee(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=q(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function ft(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Mt=/[\n"\\]/g;function Ct(l){return l.replace(Mt,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Jt(l,u,f,g,b,j,V,J){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),u!=null?V==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Na(u)):l.value!==""+Na(u)&&(l.value=""+Na(u)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),u!=null?le(l,V,Na(u)):f!=null?le(l,V,Na(f)):g!=null&&l.removeAttribute("value"),b==null&&j!=null&&(l.defaultChecked=!!j),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?l.name=""+Na(J):l.removeAttribute("name")}function Er(l,u,f,g,b,j,V,J){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(l.type=j),u!=null||f!=null){if(!(j!=="submit"&&j!=="reset"||u!=null)){Ae(l);return}f=f!=null?""+Na(f):"",u=u!=null?""+Na(u):f,J||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=J?l.checked:!!g,l.defaultChecked=!!g,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Ae(l)}function le(l,u,f){u==="number"&&ft(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function ve(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+Na(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function Re(l,u,f){if(u!=null&&(u=""+Na(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+Na(f):""}function Ve(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(K(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=Na(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Ae(l)}function Fe(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var ir=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qt(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||ir.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function Pn(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&Qt(l,b,g)}else for(var j in u)u.hasOwnProperty(j)&&Qt(l,j,u[j])}function ha(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ja=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _a(l){return ja.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Ln(){}var wr=null;function $o(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ui=null,yi=null;function ty(l){var u=rt(l);if(u&&(l=u.stateNode)){var f=l[wn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Jt(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ct(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[wn]||null;if(!b)throw Error(n(90));Jt(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&Ee(g)}break e;case"textarea":Re(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&ve(l,!!f.multiple,u,!1)}}}var cp=!1;function ry(l,u,f){if(cp)return l(u,f);cp=!0;try{var g=l(u);return g}finally{if(cp=!1,(Ui!==null||yi!==null)&&(Jy(),Ui&&(u=Ui,l=yi,yi=Ui=null,ty(u),l)))for(u=0;u<l.length;u++)ty(l[u])}}function Ws(l,u){var f=l.stateNode;if(f===null)return null;var g=f[wn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),up=!1;if(xo)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){up=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{up=!1}var vi=null,B0=null,Uo=null;function Cc(){if(Uo)return Uo;var l,u=B0,f=u.length,g,b="value"in vi?vi.value:vi.textContent,j=b.length;for(l=0;l<f&&u[l]===b[l];l++);var V=f-l;for(g=1;g<=V&&u[f-g]===b[j-g];g++);return Uo=b.slice(l,1<g?1-g:void 0)}function rd(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function kc(){return!0}function Vn(){return!1}function js(l){function u(f,g,b,j,V){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=j,this.target=V,this.currentTarget=null;for(var J in l)l.hasOwnProperty(J)&&(f=l[J],this[J]=f?f(j):j[J]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?kc:Vn,this.isPropagationStopped=Vn,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),u}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nd=js(Sl),Ic=m({},Sl,{view:0,detail:0}),ny=js(Ic),Oc,$0,Ms,ad=m({},Ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ms&&(Ms&&l.type==="mousemove"?(Oc=l.screenX-Ms.screenX,$0=l.screenY-Ms.screenY):$0=Oc=0,Ms=l),Oc)},movementY:function(l){return"movementY"in l?l.movementY:$0}}),ay=js(ad),sd=m({},ad,{dataTransfer:0}),sy=js(sd),dp=m({},Ic,{relatedTarget:0}),Rc=js(dp),iy=m({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),z0=js(iy),l4=m({},Sl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),oy=js(l4),id=m({},Sl,{data:0}),hp=js(id),ly={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cy(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=pp[l])?!!u[l]:!1}function Mc(){return cy}var uy=m({},Ic,{key:function(l){if(l.key){var u=ly[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=rd(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?fp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(l){return l.type==="keypress"?rd(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?rd(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),dy=js(uy),Nl=m({},ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=js(Nl),hy=m({},Ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),fy=js(hy),py=m({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),U0=js(py),Ds=m({},ad,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),my=js(Ds),gy=m({},Sl,{newState:0,oldState:0}),Dc=js(gy),v=[9,13,27,32],D=xo&&"CompositionEvent"in window,F=null;xo&&"documentMode"in document&&(F=document.documentMode);var re=xo&&"TextEvent"in window&&!F,Te=xo&&(!D||F&&8<F&&11>=F),ze=" ",pt=!1;function ln(l,u){switch(l){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ta(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Nr=!1;function Za(l,u){switch(l){case"compositionend":return Ta(u);case"keypress":return u.which!==32?null:(pt=!0,ze);case"textInput":return l=u.data,l===ze&&pt?null:l;default:return null}}function es(l,u){if(Nr)return l==="compositionend"||!D&&ln(l,u)?(l=Cc(),Uo=B0=vi=null,Nr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Te&&u.locale!=="ko"?null:u.data;default:return null}}var Pc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ks(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Pc[l.type]:u==="textarea"}function od(l,u,f,g){Ui?yi?yi.push(g):yi=[g]:Ui=g,u=s1(u,"onChange"),0<u.length&&(f=new nd("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var jl=null,gp=null;function vY(l){X9(l,0)}function xy(l){var u=dt(l);if(Ee(u))return l}function mC(l,u){if(l==="change")return u}var gC=!1;if(xo){var c4;if(xo){var u4="oninput"in document;if(!u4){var xC=document.createElement("div");xC.setAttribute("oninput","return;"),u4=typeof xC.oninput=="function"}c4=u4}else c4=!1;gC=c4&&(!document.documentMode||9<document.documentMode)}function yC(){jl&&(jl.detachEvent("onpropertychange",vC),gp=jl=null)}function vC(l){if(l.propertyName==="value"&&xy(gp)){var u=[];od(u,gp,l,$o(l)),ry(vY,u)}}function bY(l,u,f){l==="focusin"?(yC(),jl=u,gp=f,jl.attachEvent("onpropertychange",vC)):l==="focusout"&&yC()}function wY(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return xy(gp)}function SY(l,u){if(l==="click")return xy(u)}function NY(l,u){if(l==="input"||l==="change")return xy(u)}function jY(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var bi=typeof Object.is=="function"?Object.is:jY;function xp(l,u){if(bi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!lt.call(u,b)||!bi(l[b],u[b]))return!1}return!0}function bC(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function wC(l,u){var f=bC(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=bC(f)}}function SC(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?SC(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function NC(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=ft(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=ft(l.document)}return u}function d4(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var _Y=xo&&"documentMode"in document&&11>=document.documentMode,V0=null,h4=null,yp=null,f4=!1;function jC(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;f4||V0==null||V0!==ft(g)||(g=V0,"selectionStart"in g&&d4(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),yp&&xp(yp,g)||(yp=g,g=s1(h4,"onSelect"),0<g.length&&(u=new nd("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=V0)))}function ld(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var F0={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionrun:ld("Transition","TransitionRun"),transitionstart:ld("Transition","TransitionStart"),transitioncancel:ld("Transition","TransitionCancel"),transitionend:ld("Transition","TransitionEnd")},p4={},_C={};xo&&(_C=document.createElement("div").style,"AnimationEvent"in window||(delete F0.animationend.animation,delete F0.animationiteration.animation,delete F0.animationstart.animation),"TransitionEvent"in window||delete F0.transitionend.transition);function cd(l){if(p4[l])return p4[l];if(!F0[l])return l;var u=F0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in _C)return p4[l]=u[f];return l}var TC=cd("animationend"),AC=cd("animationiteration"),EC=cd("animationstart"),TY=cd("transitionrun"),AY=cd("transitionstart"),EY=cd("transitioncancel"),CC=cd("transitionend"),kC=new Map,m4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");m4.push("scrollEnd");function yo(l,u){kC.set(l,u),Sn(u,[l])}var yy=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Vi=[],q0=0,g4=0;function vy(){for(var l=q0,u=g4=q0=0;u<l;){var f=Vi[u];Vi[u++]=null;var g=Vi[u];Vi[u++]=null;var b=Vi[u];Vi[u++]=null;var j=Vi[u];if(Vi[u++]=null,g!==null&&b!==null){var V=g.pending;V===null?b.next=b:(b.next=V.next,V.next=b),g.pending=b}j!==0&&IC(f,b,j)}}function by(l,u,f,g){Vi[q0++]=l,Vi[q0++]=u,Vi[q0++]=f,Vi[q0++]=g,g4|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function x4(l,u,f,g){return by(l,u,f,g),wy(l)}function ud(l,u){return by(l,null,null,u),wy(l)}function IC(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,j=l.return;j!==null;)j.childLanes|=f,g=j.alternate,g!==null&&(g.childLanes|=f),j.tag===22&&(l=j.stateNode,l===null||l._visibility&1||(b=!0)),l=j,j=j.return;return l.tag===3?(j=l.stateNode,b&&u!==null&&(b=31-tt(f),l=j.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),j):null}function wy(l){if(50<zp)throw zp=0,T5=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var H0={};function CY(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(l,u,f,g){return new CY(l,u,f,g)}function y4(l){return l=l.prototype,!(!l||!l.isReactComponent)}function _l(l,u){var f=l.alternate;return f===null?(f=wi(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function OC(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Sy(l,u,f,g,b,j){var V=0;if(g=l,typeof l=="function")y4(l)&&(V=1);else if(typeof l=="string")V=MJ(l,f,de.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case k:return l=wi(31,f,u,b),l.elementType=k,l.lanes=j,l;case N:return dd(f.children,b,j,u);case w:V=8,b|=24;break;case T:return l=wi(12,f,u,b|2),l.elementType=T,l.lanes=j,l;case I:return l=wi(13,f,u,b),l.elementType=I,l.lanes=j,l;case R:return l=wi(19,f,u,b),l.elementType=R,l.lanes=j,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case O:V=10;break e;case C:V=9;break e;case L:V=11;break e;case A:V=14;break e;case E:V=16,g=null;break e}V=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=wi(V,f,u,b),u.elementType=l,u.type=g,u.lanes=j,u}function dd(l,u,f,g){return l=wi(7,l,g,u),l.lanes=f,l}function v4(l,u,f){return l=wi(6,l,null,u),l.lanes=f,l}function RC(l){var u=wi(18,null,null,0);return u.stateNode=l,u}function b4(l,u,f){return u=wi(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var MC=new WeakMap;function Fi(l,u){if(typeof l=="object"&&l!==null){var f=MC.get(l);return f!==void 0?f:(u={value:l,source:u,stack:Pe(u)},MC.set(l,u),u)}return{value:l,source:u,stack:Pe(u)}}var G0=[],W0=0,Ny=null,vp=0,qi=[],Hi=0,Lc=null,Vo=1,Fo="";function Tl(l,u){G0[W0++]=vp,G0[W0++]=Ny,Ny=l,vp=u}function DC(l,u,f){qi[Hi++]=Vo,qi[Hi++]=Fo,qi[Hi++]=Lc,Lc=l;var g=Vo;l=Fo;var b=32-tt(g)-1;g&=~(1<<b),f+=1;var j=32-tt(u)+b;if(30<j){var V=b-b%5;j=(g&(1<<V)-1).toString(32),g>>=V,b-=V,Vo=1<<32-tt(u)+b|f<<b|g,Fo=j+l}else Vo=1<<j|f<<b|g,Fo=l}function w4(l){l.return!==null&&(Tl(l,1),DC(l,1,0))}function S4(l){for(;l===Ny;)Ny=G0[--W0],G0[W0]=null,vp=G0[--W0],G0[W0]=null;for(;l===Lc;)Lc=qi[--Hi],qi[Hi]=null,Fo=qi[--Hi],qi[Hi]=null,Vo=qi[--Hi],qi[Hi]=null}function PC(l,u){qi[Hi++]=Vo,qi[Hi++]=Fo,qi[Hi++]=Lc,Vo=u.id,Fo=u.overflow,Lc=l}var hs=null,Fn=null,$r=!1,Bc=null,Gi=!1,N4=Error(n(519));function $c(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bp(Fi(u,l)),N4}function LC(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[on]=l,u[wn]=g,f){case"dialog":kr("cancel",u),kr("close",u);break;case"iframe":case"object":case"embed":kr("load",u);break;case"video":case"audio":for(f=0;f<Vp.length;f++)kr(Vp[f],u);break;case"source":kr("error",u);break;case"img":case"image":case"link":kr("error",u),kr("load",u);break;case"details":kr("toggle",u);break;case"input":kr("invalid",u),Er(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":kr("invalid",u);break;case"textarea":kr("invalid",u),Ve(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||eI(u.textContent,f)?(g.popover!=null&&(kr("beforetoggle",u),kr("toggle",u)),g.onScroll!=null&&kr("scroll",u),g.onScrollEnd!=null&&kr("scrollend",u),g.onClick!=null&&(u.onclick=Ln),u=!0):u=!1,u||$c(l,!0)}function BC(l){for(hs=l.return;hs;)switch(hs.tag){case 5:case 31:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:hs=hs.return}}function K0(l){if(l!==hs)return!1;if(!$r)return BC(l),$r=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||U5(l.type,l.memoizedProps)),f=!f),f&&Fn&&$c(l),BC(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Fn=cI(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Fn=cI(l)}else u===27?(u=Fn,Zc(l.type)?(l=G5,G5=null,Fn=l):Fn=u):Fn=hs?Ki(l.stateNode.nextSibling):null;return!0}function hd(){Fn=hs=null,$r=!1}function j4(){var l=Bc;return l!==null&&(Js===null?Js=l:Js.push.apply(Js,l),Bc=null),l}function bp(l){Bc===null?Bc=[l]:Bc.push(l)}var _4=Z(null),fd=null,Al=null;function zc(l,u,f){Y(_4,u._currentValue),u._currentValue=f}function El(l){l._currentValue=_4.current,ne(_4)}function T4(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function A4(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var j=b.dependencies;if(j!==null){var V=b.child;j=j.firstContext;e:for(;j!==null;){var J=j;j=b;for(var ue=0;ue<u.length;ue++)if(J.context===u[ue]){j.lanes|=f,J=j.alternate,J!==null&&(J.lanes|=f),T4(j.return,f,l),g||(V=null);break e}j=J.next}}else if(b.tag===18){if(V=b.return,V===null)throw Error(n(341));V.lanes|=f,j=V.alternate,j!==null&&(j.lanes|=f),T4(V,f,l),V=null}else V=b.child;if(V!==null)V.return=b;else for(V=b;V!==null;){if(V===l){V=null;break}if(b=V.sibling,b!==null){b.return=V.return,V=b;break}V=V.return}b=V}}function Q0(l,u,f,g){l=null;for(var b=u,j=!1;b!==null;){if(!j){if((b.flags&524288)!==0)j=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var V=b.alternate;if(V===null)throw Error(n(387));if(V=V.memoizedProps,V!==null){var J=b.type;bi(b.pendingProps.value,V.value)||(l!==null?l.push(J):l=[J])}}else if(b===Xe.current){if(V=b.alternate,V===null)throw Error(n(387));V.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Wp):l=[Wp])}b=b.return}l!==null&&A4(u,l,f,g),u.flags|=262144}function jy(l){for(l=l.firstContext;l!==null;){if(!bi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function pd(l){fd=l,Al=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function fs(l){return $C(fd,l)}function _y(l,u){return fd===null&&pd(l),$C(l,u)}function $C(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},Al===null){if(l===null)throw Error(n(308));Al=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Al=Al.next=u;return f}var kY=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},IY=t.unstable_scheduleCallback,OY=t.unstable_NormalPriority,Aa={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E4(){return{controller:new kY,data:new Map,refCount:0}}function wp(l){l.refCount--,l.refCount===0&&IY(OY,function(){l.controller.abort()})}var Sp=null,C4=0,X0=0,Y0=null;function RY(l,u){if(Sp===null){var f=Sp=[];C4=0,X0=O5(),Y0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return C4++,u.then(zC,zC),u}function zC(){if(--C4===0&&Sp!==null){Y0!==null&&(Y0.status="fulfilled");var l=Sp;Sp=null,X0=0,Y0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function MY(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var UC=H.S;H.S=function(l,u){j9=We(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&RY(l,u),UC!==null&&UC(l,u)};var md=Z(null);function k4(){var l=md.current;return l!==null?l:In.pooledCache}function Ty(l,u){u===null?Y(md,md.current):Y(md,u.pool)}function VC(){var l=k4();return l===null?null:{parent:Aa._currentValue,pool:l}}var J0=Error(n(460)),I4=Error(n(474)),Ay=Error(n(542)),Ey={then:function(){}};function FC(l){return l=l.status,l==="fulfilled"||l==="rejected"}function qC(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(Ln,Ln),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,GC(l),l;default:if(typeof u.status=="string")u.then(Ln,Ln);else{if(l=In,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,GC(l),l}throw xd=u,J0}}function gd(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(xd=f,J0):f}}var xd=null;function HC(){if(xd===null)throw Error(n(459));var l=xd;return xd=null,l}function GC(l){if(l===J0||l===Ay)throw Error(n(483))}var Z0=null,Np=0;function Cy(l){var u=Np;return Np+=1,Z0===null&&(Z0=[]),qC(Z0,l,u)}function jp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function ky(l,u){throw u.$$typeof===x?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function WC(l){function u(je,ge){if(l){var Ce=je.deletions;Ce===null?(je.deletions=[ge],je.flags|=16):Ce.push(ge)}}function f(je,ge){if(!l)return null;for(;ge!==null;)u(je,ge),ge=ge.sibling;return null}function g(je){for(var ge=new Map;je!==null;)je.key!==null?ge.set(je.key,je):ge.set(je.index,je),je=je.sibling;return ge}function b(je,ge){return je=_l(je,ge),je.index=0,je.sibling=null,je}function j(je,ge,Ce){return je.index=Ce,l?(Ce=je.alternate,Ce!==null?(Ce=Ce.index,Ce<ge?(je.flags|=67108866,ge):Ce):(je.flags|=67108866,ge)):(je.flags|=1048576,ge)}function V(je){return l&&je.alternate===null&&(je.flags|=67108866),je}function J(je,ge,Ce,Qe){return ge===null||ge.tag!==6?(ge=v4(Ce,je.mode,Qe),ge.return=je,ge):(ge=b(ge,Ce),ge.return=je,ge)}function ue(je,ge,Ce,Qe){var Ft=Ce.type;return Ft===N?He(je,ge,Ce.props.children,Qe,Ce.key):ge!==null&&(ge.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===E&&gd(Ft)===ge.type)?(ge=b(ge,Ce.props),jp(ge,Ce),ge.return=je,ge):(ge=Sy(Ce.type,Ce.key,Ce.props,null,je.mode,Qe),jp(ge,Ce),ge.return=je,ge)}function Ie(je,ge,Ce,Qe){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Ce.containerInfo||ge.stateNode.implementation!==Ce.implementation?(ge=b4(Ce,je.mode,Qe),ge.return=je,ge):(ge=b(ge,Ce.children||[]),ge.return=je,ge)}function He(je,ge,Ce,Qe,Ft){return ge===null||ge.tag!==7?(ge=dd(Ce,je.mode,Qe,Ft),ge.return=je,ge):(ge=b(ge,Ce),ge.return=je,ge)}function Je(je,ge,Ce){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=v4(""+ge,je.mode,Ce),ge.return=je,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return Ce=Sy(ge.type,ge.key,ge.props,null,je.mode,Ce),jp(Ce,ge),Ce.return=je,Ce;case S:return ge=b4(ge,je.mode,Ce),ge.return=je,ge;case E:return ge=gd(ge),Je(je,ge,Ce)}if(K(ge)||$(ge))return ge=dd(ge,je.mode,Ce,null),ge.return=je,ge;if(typeof ge.then=="function")return Je(je,Cy(ge),Ce);if(ge.$$typeof===O)return Je(je,_y(je,ge),Ce);ky(je,ge)}return null}function Le(je,ge,Ce,Qe){var Ft=ge!==null?ge.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ft!==null?null:J(je,ge,""+Ce,Qe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return Ce.key===Ft?ue(je,ge,Ce,Qe):null;case S:return Ce.key===Ft?Ie(je,ge,Ce,Qe):null;case E:return Ce=gd(Ce),Le(je,ge,Ce,Qe)}if(K(Ce)||$(Ce))return Ft!==null?null:He(je,ge,Ce,Qe,null);if(typeof Ce.then=="function")return Le(je,ge,Cy(Ce),Qe);if(Ce.$$typeof===O)return Le(je,ge,_y(je,Ce),Qe);ky(je,Ce)}return null}function Be(je,ge,Ce,Qe,Ft){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return je=je.get(Ce)||null,J(ge,je,""+Qe,Ft);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case y:return je=je.get(Qe.key===null?Ce:Qe.key)||null,ue(ge,je,Qe,Ft);case S:return je=je.get(Qe.key===null?Ce:Qe.key)||null,Ie(ge,je,Qe,Ft);case E:return Qe=gd(Qe),Be(je,ge,Ce,Qe,Ft)}if(K(Qe)||$(Qe))return je=je.get(Ce)||null,He(ge,je,Qe,Ft,null);if(typeof Qe.then=="function")return Be(je,ge,Ce,Cy(Qe),Ft);if(Qe.$$typeof===O)return Be(je,ge,Ce,_y(ge,Qe),Ft);ky(ge,Qe)}return null}function Ot(je,ge,Ce,Qe){for(var Ft=null,Kr=null,$t=ge,yr=ge=0,Mr=null;$t!==null&&yr<Ce.length;yr++){$t.index>yr?(Mr=$t,$t=null):Mr=$t.sibling;var Qr=Le(je,$t,Ce[yr],Qe);if(Qr===null){$t===null&&($t=Mr);break}l&&$t&&Qr.alternate===null&&u(je,$t),ge=j(Qr,ge,yr),Kr===null?Ft=Qr:Kr.sibling=Qr,Kr=Qr,$t=Mr}if(yr===Ce.length)return f(je,$t),$r&&Tl(je,yr),Ft;if($t===null){for(;yr<Ce.length;yr++)$t=Je(je,Ce[yr],Qe),$t!==null&&(ge=j($t,ge,yr),Kr===null?Ft=$t:Kr.sibling=$t,Kr=$t);return $r&&Tl(je,yr),Ft}for($t=g($t);yr<Ce.length;yr++)Mr=Be($t,je,yr,Ce[yr],Qe),Mr!==null&&(l&&Mr.alternate!==null&&$t.delete(Mr.key===null?yr:Mr.key),ge=j(Mr,ge,yr),Kr===null?Ft=Mr:Kr.sibling=Mr,Kr=Mr);return l&&$t.forEach(function(au){return u(je,au)}),$r&&Tl(je,yr),Ft}function Kt(je,ge,Ce,Qe){if(Ce==null)throw Error(n(151));for(var Ft=null,Kr=null,$t=ge,yr=ge=0,Mr=null,Qr=Ce.next();$t!==null&&!Qr.done;yr++,Qr=Ce.next()){$t.index>yr?(Mr=$t,$t=null):Mr=$t.sibling;var au=Le(je,$t,Qr.value,Qe);if(au===null){$t===null&&($t=Mr);break}l&&$t&&au.alternate===null&&u(je,$t),ge=j(au,ge,yr),Kr===null?Ft=au:Kr.sibling=au,Kr=au,$t=Mr}if(Qr.done)return f(je,$t),$r&&Tl(je,yr),Ft;if($t===null){for(;!Qr.done;yr++,Qr=Ce.next())Qr=Je(je,Qr.value,Qe),Qr!==null&&(ge=j(Qr,ge,yr),Kr===null?Ft=Qr:Kr.sibling=Qr,Kr=Qr);return $r&&Tl(je,yr),Ft}for($t=g($t);!Qr.done;yr++,Qr=Ce.next())Qr=Be($t,je,yr,Qr.value,Qe),Qr!==null&&(l&&Qr.alternate!==null&&$t.delete(Qr.key===null?yr:Qr.key),ge=j(Qr,ge,yr),Kr===null?Ft=Qr:Kr.sibling=Qr,Kr=Qr);return l&&$t.forEach(function(HJ){return u(je,HJ)}),$r&&Tl(je,yr),Ft}function _n(je,ge,Ce,Qe){if(typeof Ce=="object"&&Ce!==null&&Ce.type===N&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:e:{for(var Ft=Ce.key;ge!==null;){if(ge.key===Ft){if(Ft=Ce.type,Ft===N){if(ge.tag===7){f(je,ge.sibling),Qe=b(ge,Ce.props.children),Qe.return=je,je=Qe;break e}}else if(ge.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===E&&gd(Ft)===ge.type){f(je,ge.sibling),Qe=b(ge,Ce.props),jp(Qe,Ce),Qe.return=je,je=Qe;break e}f(je,ge);break}else u(je,ge);ge=ge.sibling}Ce.type===N?(Qe=dd(Ce.props.children,je.mode,Qe,Ce.key),Qe.return=je,je=Qe):(Qe=Sy(Ce.type,Ce.key,Ce.props,null,je.mode,Qe),jp(Qe,Ce),Qe.return=je,je=Qe)}return V(je);case S:e:{for(Ft=Ce.key;ge!==null;){if(ge.key===Ft)if(ge.tag===4&&ge.stateNode.containerInfo===Ce.containerInfo&&ge.stateNode.implementation===Ce.implementation){f(je,ge.sibling),Qe=b(ge,Ce.children||[]),Qe.return=je,je=Qe;break e}else{f(je,ge);break}else u(je,ge);ge=ge.sibling}Qe=b4(Ce,je.mode,Qe),Qe.return=je,je=Qe}return V(je);case E:return Ce=gd(Ce),_n(je,ge,Ce,Qe)}if(K(Ce))return Ot(je,ge,Ce,Qe);if($(Ce)){if(Ft=$(Ce),typeof Ft!="function")throw Error(n(150));return Ce=Ft.call(Ce),Kt(je,ge,Ce,Qe)}if(typeof Ce.then=="function")return _n(je,ge,Cy(Ce),Qe);if(Ce.$$typeof===O)return _n(je,ge,_y(je,Ce),Qe);ky(je,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,ge!==null&&ge.tag===6?(f(je,ge.sibling),Qe=b(ge,Ce),Qe.return=je,je=Qe):(f(je,ge),Qe=v4(Ce,je.mode,Qe),Qe.return=je,je=Qe),V(je)):f(je,ge)}return function(je,ge,Ce,Qe){try{Np=0;var Ft=_n(je,ge,Ce,Qe);return Z0=null,Ft}catch($t){if($t===J0||$t===Ay)throw $t;var Kr=wi(29,$t,null,je.mode);return Kr.lanes=Qe,Kr.return=je,Kr}finally{}}}var yd=WC(!0),KC=WC(!1),Uc=!1;function O4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Vc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Fc(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(rn&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=wy(l),IC(l,null,f),u}return by(l,g,u,f),wy(l)}function _p(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,vn(l,f)}}function M4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,j=null;if(f=f.firstBaseUpdate,f!==null){do{var V={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};j===null?b=j=V:j=j.next=V,f=f.next}while(f!==null);j===null?b=j=u:j=j.next=u}else b=j=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:j,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var D4=!1;function Tp(){if(D4){var l=Y0;if(l!==null)throw l}}function Ap(l,u,f,g){D4=!1;var b=l.updateQueue;Uc=!1;var j=b.firstBaseUpdate,V=b.lastBaseUpdate,J=b.shared.pending;if(J!==null){b.shared.pending=null;var ue=J,Ie=ue.next;ue.next=null,V===null?j=Ie:V.next=Ie,V=ue;var He=l.alternate;He!==null&&(He=He.updateQueue,J=He.lastBaseUpdate,J!==V&&(J===null?He.firstBaseUpdate=Ie:J.next=Ie,He.lastBaseUpdate=ue))}if(j!==null){var Je=b.baseState;V=0,He=Ie=ue=null,J=j;do{var Le=J.lane&-536870913,Be=Le!==J.lane;if(Be?(Rr&Le)===Le:(g&Le)===Le){Le!==0&&Le===X0&&(D4=!0),He!==null&&(He=He.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var Ot=l,Kt=J;Le=u;var _n=f;switch(Kt.tag){case 1:if(Ot=Kt.payload,typeof Ot=="function"){Je=Ot.call(_n,Je,Le);break e}Je=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Kt.payload,Le=typeof Ot=="function"?Ot.call(_n,Je,Le):Ot,Le==null)break e;Je=m({},Je,Le);break e;case 2:Uc=!0}}Le=J.callback,Le!==null&&(l.flags|=64,Be&&(l.flags|=8192),Be=b.callbacks,Be===null?b.callbacks=[Le]:Be.push(Le))}else Be={lane:Le,tag:J.tag,payload:J.payload,callback:J.callback,next:null},He===null?(Ie=He=Be,ue=Je):He=He.next=Be,V|=Le;if(J=J.next,J===null){if(J=b.shared.pending,J===null)break;Be=J,J=Be.next,Be.next=null,b.lastBaseUpdate=Be,b.shared.pending=null}}while(!0);He===null&&(ue=Je),b.baseState=ue,b.firstBaseUpdate=Ie,b.lastBaseUpdate=He,j===null&&(b.shared.lanes=0),Kc|=V,l.lanes=V,l.memoizedState=Je}}function QC(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function XC(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)QC(f[l],u)}var eh=Z(null),Iy=Z(0);function YC(l,u){l=Ll,Y(Iy,l),Y(eh,u),Ll=l|u.baseLanes}function P4(){Y(Iy,Ll),Y(eh,eh.current)}function L4(){Ll=Iy.current,ne(eh),ne(Iy)}var Si=Z(null),Wi=null;function qc(l){var u=l.alternate;Y(fa,fa.current&1),Y(Si,l),Wi===null&&(u===null||eh.current!==null||u.memoizedState!==null)&&(Wi=l)}function B4(l){Y(fa,fa.current),Y(Si,l),Wi===null&&(Wi=l)}function JC(l){l.tag===22?(Y(fa,fa.current),Y(Si,l),Wi===null&&(Wi=l)):Hc()}function Hc(){Y(fa,fa.current),Y(Si,Si.current)}function Ni(l){ne(Si),Wi===l&&(Wi=null),ne(fa)}var fa=Z(0);function Oy(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||q5(f)||H5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Cl=0,mr=null,Nn=null,Ea=null,Ry=!1,th=!1,vd=!1,My=0,Ep=0,rh=null,DY=0;function sa(){throw Error(n(321))}function $4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!bi(l[f],u[f]))return!1;return!0}function z4(l,u,f,g,b,j){return Cl=j,mr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?Dk:t5,vd=!1,j=f(g,b),vd=!1,th&&(j=ek(u,f,g,b)),ZC(l),j}function ZC(l){H.H=Ip;var u=Nn!==null&&Nn.next!==null;if(Cl=0,Ea=Nn=mr=null,Ry=!1,Ep=0,rh=null,u)throw Error(n(300));l===null||Ca||(l=l.dependencies,l!==null&&jy(l)&&(Ca=!0))}function ek(l,u,f,g){mr=l;var b=0;do{if(th&&(rh=null),Ep=0,th=!1,25<=b)throw Error(n(301));if(b+=1,Ea=Nn=null,l.updateQueue!=null){var j=l.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}H.H=Pk,j=u(f,g)}while(th);return j}function PY(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?Cp(u):u,l=l.useState()[0],(Nn!==null?Nn.memoizedState:null)!==l&&(mr.flags|=1024),u}function U4(){var l=My!==0;return My=0,l}function V4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function F4(l){if(Ry){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Ry=!1}Cl=0,Ea=Nn=mr=null,th=!1,Ep=My=0,rh=null}function Ps(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ea===null?mr.memoizedState=Ea=l:Ea=Ea.next=l,Ea}function pa(){if(Nn===null){var l=mr.alternate;l=l!==null?l.memoizedState:null}else l=Nn.next;var u=Ea===null?mr.memoizedState:Ea.next;if(u!==null)Ea=u,Nn=l;else{if(l===null)throw mr.alternate===null?Error(n(467)):Error(n(310));Nn=l,l={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},Ea===null?mr.memoizedState=Ea=l:Ea=Ea.next=l}return Ea}function Dy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cp(l){var u=Ep;return Ep+=1,rh===null&&(rh=[]),l=qC(rh,l,u),u=mr,(Ea===null?u.memoizedState:Ea.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?Dk:t5),l}function Py(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Cp(l);if(l.$$typeof===O)return fs(l)}throw Error(n(438,String(l)))}function q4(l){var u=null,f=mr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=mr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=Dy(),mr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=U;return u.index++,f}function kl(l,u){return typeof u=="function"?u(l):u}function Ly(l){var u=pa();return H4(u,Nn,l)}function H4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,j=g.pending;if(j!==null){if(b!==null){var V=b.next;b.next=j.next,j.next=V}u.baseQueue=b=j,g.pending=null}if(j=l.baseState,b===null)l.memoizedState=j;else{u=b.next;var J=V=null,ue=null,Ie=u,He=!1;do{var Je=Ie.lane&-536870913;if(Je!==Ie.lane?(Rr&Je)===Je:(Cl&Je)===Je){var Le=Ie.revertLane;if(Le===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),Je===X0&&(He=!0);else if((Cl&Le)===Le){Ie=Ie.next,Le===X0&&(He=!0);continue}else Je={lane:0,revertLane:Ie.revertLane,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},ue===null?(J=ue=Je,V=j):ue=ue.next=Je,mr.lanes|=Le,Kc|=Le;Je=Ie.action,vd&&f(j,Je),j=Ie.hasEagerState?Ie.eagerState:f(j,Je)}else Le={lane:Je,revertLane:Ie.revertLane,gesture:Ie.gesture,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},ue===null?(J=ue=Le,V=j):ue=ue.next=Le,mr.lanes|=Je,Kc|=Je;Ie=Ie.next}while(Ie!==null&&Ie!==u);if(ue===null?V=j:ue.next=J,!bi(j,l.memoizedState)&&(Ca=!0,He&&(f=Y0,f!==null)))throw f;l.memoizedState=j,l.baseState=V,l.baseQueue=ue,g.lastRenderedState=j}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function G4(l){var u=pa(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,j=u.memoizedState;if(b!==null){f.pending=null;var V=b=b.next;do j=l(j,V.action),V=V.next;while(V!==b);bi(j,u.memoizedState)||(Ca=!0),u.memoizedState=j,u.baseQueue===null&&(u.baseState=j),f.lastRenderedState=j}return[j,g]}function tk(l,u,f){var g=mr,b=pa(),j=$r;if(j){if(f===void 0)throw Error(n(407));f=f()}else f=u();var V=!bi((Nn||b).memoizedState,f);if(V&&(b.memoizedState=f,Ca=!0),b=b.queue,Q4(ak.bind(null,g,b,l),[l]),b.getSnapshot!==u||V||Ea!==null&&Ea.memoizedState.tag&1){if(g.flags|=2048,nh(9,{destroy:void 0},nk.bind(null,g,b,f,u),null),In===null)throw Error(n(349));j||(Cl&127)!==0||rk(g,u,f)}return f}function rk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=mr.updateQueue,u===null?(u=Dy(),mr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function nk(l,u,f,g){u.value=f,u.getSnapshot=g,sk(u)&&ik(l)}function ak(l,u,f){return f(function(){sk(u)&&ik(l)})}function sk(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!bi(l,f)}catch{return!0}}function ik(l){var u=ud(l,2);u!==null&&Zs(u,l,2)}function W4(l){var u=Ps();if(typeof l=="function"){var f=l;if(l=f(),vd){Bt(!0);try{f()}finally{Bt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:l},u}function ok(l,u,f,g){return l.baseState=f,H4(l,Nn,typeof g=="function"?g:kl)}function LY(l,u,f,g,b){if(zy(l))throw Error(n(485));if(l=u.action,l!==null){var j={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){j.listeners.push(V)}};H.T!==null?f(!0):j.isTransition=!1,g(j),f=u.pending,f===null?(j.next=u.pending=j,lk(u,j)):(j.next=f.next,u.pending=f.next=j)}}function lk(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var j=H.T,V={};H.T=V;try{var J=f(b,g),ue=H.S;ue!==null&&ue(V,J),ck(l,u,J)}catch(Ie){K4(l,u,Ie)}finally{j!==null&&V.types!==null&&(j.types=V.types),H.T=j}}else try{j=f(b,g),ck(l,u,j)}catch(Ie){K4(l,u,Ie)}}function ck(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){uk(l,u,g)},function(g){return K4(l,u,g)}):uk(l,u,f)}function uk(l,u,f){u.status="fulfilled",u.value=f,dk(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,lk(l,f)))}function K4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,dk(u),u=u.next;while(u!==g)}l.action=null}function dk(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function hk(l,u){return u}function fk(l,u){if($r){var f=In.formState;if(f!==null){e:{var g=mr;if($r){if(Fn){t:{for(var b=Fn,j=Gi;b.nodeType!==8;){if(!j){b=null;break t}if(b=Ki(b.nextSibling),b===null){b=null;break t}}j=b.data,b=j==="F!"||j==="F"?b:null}if(b){Fn=Ki(b.nextSibling),g=b.data==="F!";break e}}$c(g)}g=!1}g&&(u=f[0])}}return f=Ps(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hk,lastRenderedState:u},f.queue=g,f=Ok.bind(null,mr,g),g.dispatch=f,g=W4(!1),j=e5.bind(null,mr,!1,g.queue),g=Ps(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=LY.bind(null,mr,b,j,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function pk(l){var u=pa();return mk(u,Nn,l)}function mk(l,u,f){if(u=H4(l,u,hk)[0],l=Ly(kl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Cp(u)}catch(V){throw V===J0?Ay:V}else g=u;u=pa();var b=u.queue,j=b.dispatch;return f!==u.memoizedState&&(mr.flags|=2048,nh(9,{destroy:void 0},BY.bind(null,b,f),null)),[g,j,l]}function BY(l,u){l.action=u}function gk(l){var u=pa(),f=Nn;if(f!==null)return mk(u,f,l);pa(),u=u.memoizedState,f=pa();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function nh(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=mr.updateQueue,u===null&&(u=Dy(),mr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function xk(){return pa().memoizedState}function By(l,u,f,g){var b=Ps();mr.flags|=l,b.memoizedState=nh(1|u,{destroy:void 0},f,g===void 0?null:g)}function $y(l,u,f,g){var b=pa();g=g===void 0?null:g;var j=b.memoizedState.inst;Nn!==null&&g!==null&&$4(g,Nn.memoizedState.deps)?b.memoizedState=nh(u,j,f,g):(mr.flags|=l,b.memoizedState=nh(1|u,j,f,g))}function yk(l,u){By(8390656,8,l,u)}function Q4(l,u){$y(2048,8,l,u)}function $Y(l){mr.flags|=4;var u=mr.updateQueue;if(u===null)u=Dy(),mr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function vk(l){var u=pa().memoizedState;return $Y({ref:u,nextImpl:l}),function(){if((rn&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function bk(l,u){return $y(4,2,l,u)}function wk(l,u){return $y(4,4,l,u)}function Sk(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Nk(l,u,f){f=f!=null?f.concat([l]):null,$y(4,4,Sk.bind(null,u,l),f)}function X4(){}function jk(l,u){var f=pa();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&$4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function _k(l,u){var f=pa();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&$4(u,g[1]))return g[0];if(g=l(),vd){Bt(!0);try{l()}finally{Bt(!1)}}return f.memoizedState=[g,u],g}function Y4(l,u,f){return f===void 0||(Cl&1073741824)!==0&&(Rr&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=T9(),mr.lanes|=l,Kc|=l,f)}function Tk(l,u,f,g){return bi(f,u)?f:eh.current!==null?(l=Y4(l,f,g),bi(l,u)||(Ca=!0),l):(Cl&42)===0||(Cl&1073741824)!==0&&(Rr&261930)===0?(Ca=!0,l.memoizedState=f):(l=T9(),mr.lanes|=l,Kc|=l,u)}function Ak(l,u,f,g,b){var j=ee.p;ee.p=j!==0&&8>j?j:8;var V=H.T,J={};H.T=J,e5(l,!1,u,f);try{var ue=b(),Ie=H.S;if(Ie!==null&&Ie(J,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var He=MY(ue,g);kp(l,u,He,Ti(l))}else kp(l,u,g,Ti(l))}catch(Je){kp(l,u,{then:function(){},status:"rejected",reason:Je},Ti())}finally{ee.p=j,V!==null&&J.types!==null&&(V.types=J.types),H.T=V}}function zY(){}function J4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=Ek(l).queue;Ak(l,b,u,ae,f===null?zY:function(){return Ck(l),f(g)})}function Ek(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:ae},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Ck(l){var u=Ek(l);u.next===null&&(u=l.alternate.memoizedState),kp(l,u.next.queue,{},Ti())}function Z4(){return fs(Wp)}function kk(){return pa().memoizedState}function Ik(){return pa().memoizedState}function UY(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=Ti();l=Vc(f);var g=Fc(u,l,f);g!==null&&(Zs(g,u,f),_p(g,u,f)),u={cache:E4()},l.payload=u;return}u=u.return}}function VY(l,u,f){var g=Ti();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},zy(l)?Rk(u,f):(f=x4(l,u,f,g),f!==null&&(Zs(f,l,g),Mk(f,u,g)))}function Ok(l,u,f){var g=Ti();kp(l,u,f,g)}function kp(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(zy(l))Rk(u,b);else{var j=l.alternate;if(l.lanes===0&&(j===null||j.lanes===0)&&(j=u.lastRenderedReducer,j!==null))try{var V=u.lastRenderedState,J=j(V,f);if(b.hasEagerState=!0,b.eagerState=J,bi(J,V))return by(l,u,b,0),In===null&&vy(),!1}catch{}finally{}if(f=x4(l,u,b,g),f!==null)return Zs(f,l,g),Mk(f,u,g),!0}return!1}function e5(l,u,f,g){if(g={lane:2,revertLane:O5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},zy(l)){if(u)throw Error(n(479))}else u=x4(l,f,g,2),u!==null&&Zs(u,l,2)}function zy(l){var u=l.alternate;return l===mr||u!==null&&u===mr}function Rk(l,u){th=Ry=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function Mk(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,vn(l,f)}}var Ip={readContext:fs,use:Py,useCallback:sa,useContext:sa,useEffect:sa,useImperativeHandle:sa,useLayoutEffect:sa,useInsertionEffect:sa,useMemo:sa,useReducer:sa,useRef:sa,useState:sa,useDebugValue:sa,useDeferredValue:sa,useTransition:sa,useSyncExternalStore:sa,useId:sa,useHostTransitionStatus:sa,useFormState:sa,useActionState:sa,useOptimistic:sa,useMemoCache:sa,useCacheRefresh:sa};Ip.useEffectEvent=sa;var Dk={readContext:fs,use:Py,useCallback:function(l,u){return Ps().memoizedState=[l,u===void 0?null:u],l},useContext:fs,useEffect:yk,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,By(4194308,4,Sk.bind(null,u,l),f)},useLayoutEffect:function(l,u){return By(4194308,4,l,u)},useInsertionEffect:function(l,u){By(4,2,l,u)},useMemo:function(l,u){var f=Ps();u=u===void 0?null:u;var g=l();if(vd){Bt(!0);try{l()}finally{Bt(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Ps();if(f!==void 0){var b=f(u);if(vd){Bt(!0);try{f(u)}finally{Bt(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=VY.bind(null,mr,l),[g.memoizedState,l]},useRef:function(l){var u=Ps();return l={current:l},u.memoizedState=l},useState:function(l){l=W4(l);var u=l.queue,f=Ok.bind(null,mr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:X4,useDeferredValue:function(l,u){var f=Ps();return Y4(f,l,u)},useTransition:function(){var l=W4(!1);return l=Ak.bind(null,mr,l.queue,!0,!1),Ps().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=mr,b=Ps();if($r){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),In===null)throw Error(n(349));(Rr&127)!==0||rk(g,u,f)}b.memoizedState=f;var j={value:f,getSnapshot:u};return b.queue=j,yk(ak.bind(null,g,j,l),[l]),g.flags|=2048,nh(9,{destroy:void 0},nk.bind(null,g,j,f,u),null),f},useId:function(){var l=Ps(),u=In.identifierPrefix;if($r){var f=Fo,g=Vo;f=(g&~(1<<32-tt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=My++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=DY++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:Z4,useFormState:fk,useActionState:fk,useOptimistic:function(l){var u=Ps();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=e5.bind(null,mr,!0,f),f.dispatch=u,[l,u]},useMemoCache:q4,useCacheRefresh:function(){return Ps().memoizedState=UY.bind(null,mr)},useEffectEvent:function(l){var u=Ps(),f={impl:l};return u.memoizedState=f,function(){if((rn&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},t5={readContext:fs,use:Py,useCallback:jk,useContext:fs,useEffect:Q4,useImperativeHandle:Nk,useInsertionEffect:bk,useLayoutEffect:wk,useMemo:_k,useReducer:Ly,useRef:xk,useState:function(){return Ly(kl)},useDebugValue:X4,useDeferredValue:function(l,u){var f=pa();return Tk(f,Nn.memoizedState,l,u)},useTransition:function(){var l=Ly(kl)[0],u=pa().memoizedState;return[typeof l=="boolean"?l:Cp(l),u]},useSyncExternalStore:tk,useId:kk,useHostTransitionStatus:Z4,useFormState:pk,useActionState:pk,useOptimistic:function(l,u){var f=pa();return ok(f,Nn,l,u)},useMemoCache:q4,useCacheRefresh:Ik};t5.useEffectEvent=vk;var Pk={readContext:fs,use:Py,useCallback:jk,useContext:fs,useEffect:Q4,useImperativeHandle:Nk,useInsertionEffect:bk,useLayoutEffect:wk,useMemo:_k,useReducer:G4,useRef:xk,useState:function(){return G4(kl)},useDebugValue:X4,useDeferredValue:function(l,u){var f=pa();return Nn===null?Y4(f,l,u):Tk(f,Nn.memoizedState,l,u)},useTransition:function(){var l=G4(kl)[0],u=pa().memoizedState;return[typeof l=="boolean"?l:Cp(l),u]},useSyncExternalStore:tk,useId:kk,useHostTransitionStatus:Z4,useFormState:gk,useActionState:gk,useOptimistic:function(l,u){var f=pa();return Nn!==null?ok(f,Nn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:q4,useCacheRefresh:Ik};Pk.useEffectEvent=vk;function r5(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var n5={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=Ti(),b=Vc(g);b.payload=u,f!=null&&(b.callback=f),u=Fc(l,b,g),u!==null&&(Zs(u,l,g),_p(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=Ti(),b=Vc(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=Fc(l,b,g),u!==null&&(Zs(u,l,g),_p(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=Ti(),g=Vc(f);g.tag=2,u!=null&&(g.callback=u),u=Fc(l,g,f),u!==null&&(Zs(u,l,f),_p(u,l,f))}};function Lk(l,u,f,g,b,j,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,j,V):u.prototype&&u.prototype.isPureReactComponent?!xp(f,g)||!xp(b,j):!0}function Bk(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&n5.enqueueReplaceState(u,u.state,null)}function bd(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function $k(l){yy(l)}function zk(l){console.error(l)}function Uk(l){yy(l)}function Uy(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function Vk(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function a5(l,u,f){return f=Vc(f),f.tag=3,f.payload={element:null},f.callback=function(){Uy(l,u)},f}function Fk(l){return l=Vc(l),l.tag=3,l}function qk(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var j=g.value;l.payload=function(){return b(j)},l.callback=function(){Vk(u,f,g)}}var V=f.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){Vk(u,f,g),typeof b!="function"&&(Qc===null?Qc=new Set([this]):Qc.add(this));var J=g.stack;this.componentDidCatch(g.value,{componentStack:J!==null?J:""})})}function FY(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&Q0(u,f,b,!0),f=Si.current,f!==null){switch(f.tag){case 31:case 13:return Wi===null?Zy():f.alternate===null&&ia===0&&(ia=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===Ey?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),C5(l,g,b)),!1;case 22:return f.flags|=65536,g===Ey?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),C5(l,g,b)),!1}throw Error(n(435,f.tag))}return C5(l,g,b),Zy(),!1}if($r)return u=Si.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==N4&&(l=Error(n(422),{cause:g}),bp(Fi(l,f)))):(g!==N4&&(u=Error(n(423),{cause:g}),bp(Fi(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Fi(g,f),b=a5(l.stateNode,g,b),M4(l,b),ia!==4&&(ia=2)),!1;var j=Error(n(520),{cause:g});if(j=Fi(j,f),$p===null?$p=[j]:$p.push(j),ia!==4&&(ia=2),u===null)return!0;g=Fi(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=a5(f.stateNode,g,l),M4(f,l),!1;case 1:if(u=f.type,j=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Qc===null||!Qc.has(j))))return f.flags|=65536,b&=-b,f.lanes|=b,b=Fk(b),qk(b,l,f,g),M4(f,b),!1}f=f.return}while(f!==null);return!1}var s5=Error(n(461)),Ca=!1;function ps(l,u,f,g){u.child=l===null?KC(u,null,f,g):yd(u,l.child,f,g)}function Hk(l,u,f,g,b){f=f.render;var j=u.ref;if("ref"in g){var V={};for(var J in g)J!=="ref"&&(V[J]=g[J])}else V=g;return pd(u),g=z4(l,u,f,V,j,b),J=U4(),l!==null&&!Ca?(V4(l,u,b),Il(l,u,b)):($r&&J&&w4(u),u.flags|=1,ps(l,u,g,b),u.child)}function Gk(l,u,f,g,b){if(l===null){var j=f.type;return typeof j=="function"&&!y4(j)&&j.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=j,Wk(l,u,j,g,b)):(l=Sy(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(j=l.child,!f5(l,b)){var V=j.memoizedProps;if(f=f.compare,f=f!==null?f:xp,f(V,g)&&l.ref===u.ref)return Il(l,u,b)}return u.flags|=1,l=_l(j,g),l.ref=u.ref,l.return=u,u.child=l}function Wk(l,u,f,g,b){if(l!==null){var j=l.memoizedProps;if(xp(j,g)&&l.ref===u.ref)if(Ca=!1,u.pendingProps=g=j,f5(l,b))(l.flags&131072)!==0&&(Ca=!0);else return u.lanes=l.lanes,Il(l,u,b)}return i5(l,u,f,g,b)}function Kk(l,u,f,g){var b=g.children,j=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(j=j!==null?j.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~j}else g=0,u.child=null;return Qk(l,u,j,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Ty(u,j!==null?j.cachePool:null),j!==null?YC(u,j):P4(),JC(u);else return g=u.lanes=536870912,Qk(l,u,j!==null?j.baseLanes|f:f,f,g)}else j!==null?(Ty(u,j.cachePool),YC(u,j),Hc(),u.memoizedState=null):(l!==null&&Ty(u,null),P4(),Hc());return ps(l,u,b,f),u.child}function Op(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Qk(l,u,f,g,b){var j=k4();return j=j===null?null:{parent:Aa._currentValue,pool:j},u.memoizedState={baseLanes:f,cachePool:j},l!==null&&Ty(u,null),P4(),JC(u),l!==null&&Q0(l,u,g,!0),u.childLanes=b,null}function Vy(l,u){return u=qy({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function Xk(l,u,f){return yd(u,l.child,null,f),l=Vy(u,u.pendingProps),l.flags|=2,Ni(u),u.memoizedState=null,l}function qY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if($r){if(g.mode==="hidden")return l=Vy(u,g),u.lanes=536870912,Op(null,l);if(B4(u),(l=Fn)?(l=lI(l,Gi),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Lc!==null?{id:Vo,overflow:Fo}:null,retryLane:536870912,hydrationErrors:null},f=RC(l),f.return=u,u.child=f,hs=u,Fn=null)):l=null,l===null)throw $c(u);return u.lanes=536870912,null}return Vy(u,g)}var j=l.memoizedState;if(j!==null){var V=j.dehydrated;if(B4(u),b)if(u.flags&256)u.flags&=-257,u=Xk(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(Ca||Q0(l,u,f,!1),b=(f&l.childLanes)!==0,Ca||b){if(g=In,g!==null&&(V=Dn(g,f),V!==0&&V!==j.retryLane))throw j.retryLane=V,ud(l,V),Zs(g,l,V),s5;Zy(),u=Xk(l,u,f)}else l=j.treeContext,Fn=Ki(V.nextSibling),hs=u,$r=!0,Bc=null,Gi=!1,l!==null&&PC(u,l),u=Vy(u,g),u.flags|=4096;return u}return l=_l(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function Fy(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function i5(l,u,f,g,b){return pd(u),f=z4(l,u,f,g,void 0,b),g=U4(),l!==null&&!Ca?(V4(l,u,b),Il(l,u,b)):($r&&g&&w4(u),u.flags|=1,ps(l,u,f,b),u.child)}function Yk(l,u,f,g,b,j){return pd(u),u.updateQueue=null,f=ek(u,g,f,b),ZC(l),g=U4(),l!==null&&!Ca?(V4(l,u,j),Il(l,u,j)):($r&&g&&w4(u),u.flags|=1,ps(l,u,f,j),u.child)}function Jk(l,u,f,g,b){if(pd(u),u.stateNode===null){var j=H0,V=f.contextType;typeof V=="object"&&V!==null&&(j=fs(V)),j=new f(g,j),u.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=n5,u.stateNode=j,j._reactInternals=u,j=u.stateNode,j.props=g,j.state=u.memoizedState,j.refs={},O4(u),V=f.contextType,j.context=typeof V=="object"&&V!==null?fs(V):H0,j.state=u.memoizedState,V=f.getDerivedStateFromProps,typeof V=="function"&&(r5(u,f,V,g),j.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(V=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),V!==j.state&&n5.enqueueReplaceState(j,j.state,null),Ap(u,g,j,b),Tp(),j.state=u.memoizedState),typeof j.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){j=u.stateNode;var J=u.memoizedProps,ue=bd(f,J);j.props=ue;var Ie=j.context,He=f.contextType;V=H0,typeof He=="object"&&He!==null&&(V=fs(He));var Je=f.getDerivedStateFromProps;He=typeof Je=="function"||typeof j.getSnapshotBeforeUpdate=="function",J=u.pendingProps!==J,He||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(J||Ie!==V)&&Bk(u,j,g,V),Uc=!1;var Le=u.memoizedState;j.state=Le,Ap(u,g,j,b),Tp(),Ie=u.memoizedState,J||Le!==Ie||Uc?(typeof Je=="function"&&(r5(u,f,Je,g),Ie=u.memoizedState),(ue=Uc||Lk(u,f,ue,g,Le,Ie,V))?(He||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(u.flags|=4194308)):(typeof j.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Ie),j.props=g,j.state=Ie,j.context=V,g=ue):(typeof j.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{j=u.stateNode,R4(l,u),V=u.memoizedProps,He=bd(f,V),j.props=He,Je=u.pendingProps,Le=j.context,Ie=f.contextType,ue=H0,typeof Ie=="object"&&Ie!==null&&(ue=fs(Ie)),J=f.getDerivedStateFromProps,(Ie=typeof J=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(V!==Je||Le!==ue)&&Bk(u,j,g,ue),Uc=!1,Le=u.memoizedState,j.state=Le,Ap(u,g,j,b),Tp();var Be=u.memoizedState;V!==Je||Le!==Be||Uc||l!==null&&l.dependencies!==null&&jy(l.dependencies)?(typeof J=="function"&&(r5(u,f,J,g),Be=u.memoizedState),(He=Uc||Lk(u,f,He,g,Le,Be,ue)||l!==null&&l.dependencies!==null&&jy(l.dependencies))?(Ie||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(g,Be,ue),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(g,Be,ue)),typeof j.componentDidUpdate=="function"&&(u.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof j.componentDidUpdate!="function"||V===l.memoizedProps&&Le===l.memoizedState||(u.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Le===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Be),j.props=g,j.state=Be,j.context=ue,g=He):(typeof j.componentDidUpdate!="function"||V===l.memoizedProps&&Le===l.memoizedState||(u.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Le===l.memoizedState||(u.flags|=1024),g=!1)}return j=g,Fy(l,u),g=(u.flags&128)!==0,j||g?(j=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:j.render(),u.flags|=1,l!==null&&g?(u.child=yd(u,l.child,null,b),u.child=yd(u,null,f,b)):ps(l,u,f,b),u.memoizedState=j.state,l=u.child):l=Il(l,u,b),l}function Zk(l,u,f,g){return hd(),u.flags|=256,ps(l,u,f,g),u.child}var o5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function l5(l){return{baseLanes:l,cachePool:VC()}}function c5(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=_i),l}function e9(l,u,f){var g=u.pendingProps,b=!1,j=(u.flags&128)!==0,V;if((V=j)||(V=l!==null&&l.memoizedState===null?!1:(fa.current&2)!==0),V&&(b=!0,u.flags&=-129),V=(u.flags&32)!==0,u.flags&=-33,l===null){if($r){if(b?qc(u):Hc(),(l=Fn)?(l=lI(l,Gi),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Lc!==null?{id:Vo,overflow:Fo}:null,retryLane:536870912,hydrationErrors:null},f=RC(l),f.return=u,u.child=f,hs=u,Fn=null)):l=null,l===null)throw $c(u);return H5(l)?u.lanes=32:u.lanes=536870912,null}var J=g.children;return g=g.fallback,b?(Hc(),b=u.mode,J=qy({mode:"hidden",children:J},b),g=dd(g,b,f,null),J.return=u,g.return=u,J.sibling=g,u.child=J,g=u.child,g.memoizedState=l5(f),g.childLanes=c5(l,V,f),u.memoizedState=o5,Op(null,g)):(qc(u),u5(u,J))}var ue=l.memoizedState;if(ue!==null&&(J=ue.dehydrated,J!==null)){if(j)u.flags&256?(qc(u),u.flags&=-257,u=d5(l,u,f)):u.memoizedState!==null?(Hc(),u.child=l.child,u.flags|=128,u=null):(Hc(),J=g.fallback,b=u.mode,g=qy({mode:"visible",children:g.children},b),J=dd(J,b,f,null),J.flags|=2,g.return=u,J.return=u,g.sibling=J,u.child=g,yd(u,l.child,null,f),g=u.child,g.memoizedState=l5(f),g.childLanes=c5(l,V,f),u.memoizedState=o5,u=Op(null,g));else if(qc(u),H5(J)){if(V=J.nextSibling&&J.nextSibling.dataset,V)var Ie=V.dgst;V=Ie,g=Error(n(419)),g.stack="",g.digest=V,bp({value:g,source:null,stack:null}),u=d5(l,u,f)}else if(Ca||Q0(l,u,f,!1),V=(f&l.childLanes)!==0,Ca||V){if(V=In,V!==null&&(g=Dn(V,f),g!==0&&g!==ue.retryLane))throw ue.retryLane=g,ud(l,g),Zs(V,l,g),s5;q5(J)||Zy(),u=d5(l,u,f)}else q5(J)?(u.flags|=192,u.child=l.child,u=null):(l=ue.treeContext,Fn=Ki(J.nextSibling),hs=u,$r=!0,Bc=null,Gi=!1,l!==null&&PC(u,l),u=u5(u,g.children),u.flags|=4096);return u}return b?(Hc(),J=g.fallback,b=u.mode,ue=l.child,Ie=ue.sibling,g=_l(ue,{mode:"hidden",children:g.children}),g.subtreeFlags=ue.subtreeFlags&65011712,Ie!==null?J=_l(Ie,J):(J=dd(J,b,f,null),J.flags|=2),J.return=u,g.return=u,g.sibling=J,u.child=g,Op(null,g),g=u.child,J=l.child.memoizedState,J===null?J=l5(f):(b=J.cachePool,b!==null?(ue=Aa._currentValue,b=b.parent!==ue?{parent:ue,pool:ue}:b):b=VC(),J={baseLanes:J.baseLanes|f,cachePool:b}),g.memoizedState=J,g.childLanes=c5(l,V,f),u.memoizedState=o5,Op(l.child,g)):(qc(u),f=l.child,l=f.sibling,f=_l(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(V=u.deletions,V===null?(u.deletions=[l],u.flags|=16):V.push(l)),u.child=f,u.memoizedState=null,f)}function u5(l,u){return u=qy({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function qy(l,u){return l=wi(22,l,null,u),l.lanes=0,l}function d5(l,u,f){return yd(u,l.child,null,f),l=u5(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function t9(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),T4(l.return,u,f)}function h5(l,u,f,g,b,j){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:j}:(V.isBackwards=u,V.rendering=null,V.renderingStartTime=0,V.last=g,V.tail=f,V.tailMode=b,V.treeForkCount=j)}function r9(l,u,f){var g=u.pendingProps,b=g.revealOrder,j=g.tail;g=g.children;var V=fa.current,J=(V&2)!==0;if(J?(V=V&1|2,u.flags|=128):V&=1,Y(fa,V),ps(l,u,g,f),g=$r?vp:0,!J&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&t9(l,f,u);else if(l.tag===19)t9(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&Oy(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),h5(u,!1,b,f,j,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&Oy(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}h5(u,!0,f,null,j,g);break;case"together":h5(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function Il(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Kc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(Q0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=_l(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=_l(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function f5(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&jy(l)))}function HY(l,u,f){switch(u.tag){case 3:Ye(u,u.stateNode.containerInfo),zc(u,Aa,l.memoizedState.cache),hd();break;case 27:case 5:he(u);break;case 4:Ye(u,u.stateNode.containerInfo);break;case 10:zc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,B4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(qc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?e9(l,u,f):(qc(u),l=Il(l,u,f),l!==null?l.sibling:null);qc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(Q0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return r9(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Y(fa,fa.current),g)break;return null;case 22:return u.lanes=0,Kk(l,u,f,u.pendingProps);case 24:zc(u,Aa,l.memoizedState.cache)}return Il(l,u,f)}function n9(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)Ca=!0;else{if(!f5(l,f)&&(u.flags&128)===0)return Ca=!1,HY(l,u,f);Ca=(l.flags&131072)!==0}else Ca=!1,$r&&(u.flags&1048576)!==0&&DC(u,vp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=gd(u.elementType),u.type=l,typeof l=="function")y4(l)?(g=bd(l,g),u.tag=1,u=Jk(null,u,l,g,f)):(u.tag=0,u=i5(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=Hk(null,u,l,g,f);break e}else if(b===A){u.tag=14,u=Gk(null,u,l,g,f);break e}}throw u=G(l)||l,Error(n(306,u,""))}}return u;case 0:return i5(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=bd(g,u.pendingProps),Jk(l,u,g,b,f);case 3:e:{if(Ye(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var j=u.memoizedState;b=j.element,R4(l,u),Ap(u,g,null,f);var V=u.memoizedState;if(g=V.cache,zc(u,Aa,g),g!==j.cache&&A4(u,[Aa],f,!0),Tp(),g=V.element,j.isDehydrated)if(j={element:g,isDehydrated:!1,cache:V.cache},u.updateQueue.baseState=j,u.memoizedState=j,u.flags&256){u=Zk(l,u,g,f);break e}else if(g!==b){b=Fi(Error(n(424)),u),bp(b),u=Zk(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Fn=Ki(l.firstChild),hs=u,$r=!0,Bc=null,Gi=!0,f=KC(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(hd(),g===b){u=Il(l,u,f);break e}ps(l,u,g,f)}u=u.child}return u;case 26:return Fy(l,u),l===null?(f=pI(u.type,null,u.pendingProps,null))?u.memoizedState=f:$r||(f=u.type,l=u.pendingProps,g=i1(Ue.current).createElement(f),g[on]=u,g[wn]=l,ms(g,f,l),xr(g),u.stateNode=g):u.memoizedState=pI(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return he(u),l===null&&$r&&(g=u.stateNode=dI(u.type,u.pendingProps,Ue.current),hs=u,Gi=!0,b=Fn,Zc(u.type)?(G5=b,Fn=Ki(g.firstChild)):Fn=b),ps(l,u,u.pendingProps.children,f),Fy(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&$r&&((b=g=Fn)&&(g=wJ(g,u.type,u.pendingProps,Gi),g!==null?(u.stateNode=g,hs=u,Fn=Ki(g.firstChild),Gi=!1,b=!0):b=!1),b||$c(u)),he(u),b=u.type,j=u.pendingProps,V=l!==null?l.memoizedProps:null,g=j.children,U5(b,j)?g=null:V!==null&&U5(b,V)&&(u.flags|=32),u.memoizedState!==null&&(b=z4(l,u,PY,null,null,f),Wp._currentValue=b),Fy(l,u),ps(l,u,g,f),u.child;case 6:return l===null&&$r&&((l=f=Fn)&&(f=SJ(f,u.pendingProps,Gi),f!==null?(u.stateNode=f,hs=u,Fn=null,l=!0):l=!1),l||$c(u)),null;case 13:return e9(l,u,f);case 4:return Ye(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=yd(u,null,g,f):ps(l,u,g,f),u.child;case 11:return Hk(l,u,u.type,u.pendingProps,f);case 7:return ps(l,u,u.pendingProps,f),u.child;case 8:return ps(l,u,u.pendingProps.children,f),u.child;case 12:return ps(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,zc(u,u.type,g.value),ps(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,pd(u),b=fs(b),g=g(b),u.flags|=1,ps(l,u,g,f),u.child;case 14:return Gk(l,u,u.type,u.pendingProps,f);case 15:return Wk(l,u,u.type,u.pendingProps,f);case 19:return r9(l,u,f);case 31:return qY(l,u,f);case 22:return Kk(l,u,f,u.pendingProps);case 24:return pd(u),g=fs(Aa),l===null?(b=k4(),b===null&&(b=In,j=E4(),b.pooledCache=j,j.refCount++,j!==null&&(b.pooledCacheLanes|=f),b=j),u.memoizedState={parent:g,cache:b},O4(u),zc(u,Aa,b)):((l.lanes&f)!==0&&(R4(l,u),Ap(u,null,null,f),Tp()),b=l.memoizedState,j=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),zc(u,Aa,g)):(g=j.cache,zc(u,Aa,g),g!==b.cache&&A4(u,[Aa],f,!0))),ps(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function Ol(l){l.flags|=4}function p5(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(k9())l.flags|=8192;else throw xd=Ey,I4}else l.flags&=-16777217}function a9(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!vI(u))if(k9())l.flags|=8192;else throw xd=Ey,I4}function Hy(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?en():536870912,l.lanes|=u,oh|=u)}function Rp(l,u){if(!$r)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function qn(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function GY(l,u,f){var g=u.pendingProps;switch(S4(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(u),null;case 1:return qn(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),El(Aa),_e(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(K0(u)?Ol(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,j4())),qn(u),null;case 26:var b=u.type,j=u.memoizedState;return l===null?(Ol(u),j!==null?(qn(u),a9(u,j)):(qn(u),p5(u,b,null,g,f))):j?j!==l.memoizedState?(Ol(u),qn(u),a9(u,j)):(qn(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&Ol(u),qn(u),p5(u,b,l,g,f)),null;case 27:if(Q(u),f=Ue.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Ol(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return qn(u),null}l=de.current,K0(u)?LC(u):(l=dI(b,g,f),u.stateNode=l,Ol(u))}return qn(u),null;case 5:if(Q(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Ol(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return qn(u),null}if(j=de.current,K0(u))LC(u);else{var V=i1(Ue.current);switch(j){case 1:j=V.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:j=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":j=V.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":j=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":j=V.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof g.is=="string"?V.createElement("select",{is:g.is}):V.createElement("select"),g.multiple?j.multiple=!0:g.size&&(j.size=g.size);break;default:j=typeof g.is=="string"?V.createElement(b,{is:g.is}):V.createElement(b)}}j[on]=u,j[wn]=g;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)j.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=j;e:switch(ms(j,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Ol(u)}}return qn(u),p5(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&Ol(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=Ue.current,K0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=hs,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[on]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||eI(l.nodeValue,f)),l||$c(u,!0)}else l=i1(l).createTextNode(g),l[on]=u,u.stateNode=l}return qn(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=K0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[on]=u}else hd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;qn(u),l=!1}else f=j4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(Ni(u),u):(Ni(u),null);if((u.flags&128)!==0)throw Error(n(558))}return qn(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=K0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[on]=u}else hd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;qn(u),b=!1}else b=j4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(Ni(u),u):(Ni(u),null)}return Ni(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),j=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(j=g.memoizedState.cachePool.pool),j!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),Hy(u,u.updateQueue),qn(u),null);case 4:return _e(),l===null&&P5(u.stateNode.containerInfo),qn(u),null;case 10:return El(u.type),qn(u),null;case 19:if(ne(fa),g=u.memoizedState,g===null)return qn(u),null;if(b=(u.flags&128)!==0,j=g.rendering,j===null)if(b)Rp(g,!1);else{if(ia!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(j=Oy(l),j!==null){for(u.flags|=128,Rp(g,!1),l=j.updateQueue,u.updateQueue=l,Hy(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)OC(f,l),f=f.sibling;return Y(fa,fa.current&1|2),$r&&Tl(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&We()>Xy&&(u.flags|=128,b=!0,Rp(g,!1),u.lanes=4194304)}else{if(!b)if(l=Oy(j),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,Hy(u,l),Rp(g,!0),g.tail===null&&g.tailMode==="hidden"&&!j.alternate&&!$r)return qn(u),null}else 2*We()-g.renderingStartTime>Xy&&f!==536870912&&(u.flags|=128,b=!0,Rp(g,!1),u.lanes=4194304);g.isBackwards?(j.sibling=u.child,u.child=j):(l=g.last,l!==null?l.sibling=j:u.child=j,g.last=j)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=We(),l.sibling=null,f=fa.current,Y(fa,b?f&1|2:f&1),$r&&Tl(u,g.treeForkCount),l):(qn(u),null);case 22:case 23:return Ni(u),L4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(qn(u),u.subtreeFlags&6&&(u.flags|=8192)):qn(u),f=u.updateQueue,f!==null&&Hy(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ne(md),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),El(Aa),qn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function WY(l,u){switch(S4(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return El(Aa),_e(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Q(u),null;case 31:if(u.memoizedState!==null){if(Ni(u),u.alternate===null)throw Error(n(340));hd()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Ni(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));hd()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ne(fa),null;case 4:return _e(),null;case 10:return El(u.type),null;case 22:case 23:return Ni(u),L4(),l!==null&&ne(md),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return El(Aa),null;case 25:return null;default:return null}}function s9(l,u){switch(S4(u),u.tag){case 3:El(Aa),_e();break;case 26:case 27:case 5:Q(u);break;case 4:_e();break;case 31:u.memoizedState!==null&&Ni(u);break;case 13:Ni(u);break;case 19:ne(fa);break;case 10:El(u.type);break;case 22:case 23:Ni(u),L4(),l!==null&&ne(md);break;case 24:El(Aa)}}function Mp(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var j=f.create,V=f.inst;g=j(),V.destroy=g}f=f.next}while(f!==b)}}catch(J){pn(u,u.return,J)}}function Gc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var j=b.next;g=j;do{if((g.tag&l)===l){var V=g.inst,J=V.destroy;if(J!==void 0){V.destroy=void 0,b=u;var ue=f,Ie=J;try{Ie()}catch(He){pn(b,ue,He)}}}g=g.next}while(g!==j)}}catch(He){pn(u,u.return,He)}}function i9(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{XC(u,f)}catch(g){pn(l,l.return,g)}}}function o9(l,u,f){f.props=bd(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){pn(l,u,g)}}function Dp(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){pn(l,u,b)}}function qo(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){pn(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){pn(l,u,b)}else f.current=null}function l9(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){pn(l,l.return,b)}}function m5(l,u,f){try{var g=l.stateNode;mJ(g,l.type,f,u),g[wn]=u}catch(b){pn(l,l.return,b)}}function c9(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Zc(l.type)||l.tag===4}function g5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||c9(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Zc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function x5(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Ln));else if(g!==4&&(g===27&&Zc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(x5(l,u,f),l=l.sibling;l!==null;)x5(l,u,f),l=l.sibling}function Gy(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Zc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(Gy(l,u,f),l=l.sibling;l!==null;)Gy(l,u,f),l=l.sibling}function u9(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);ms(u,g,f),u[on]=l,u[wn]=f}catch(j){pn(l,l.return,j)}}var Rl=!1,ka=!1,y5=!1,d9=typeof WeakSet=="function"?WeakSet:Set,ts=null;function KY(l,u){if(l=l.containerInfo,$5=f1,l=NC(l),d4(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,j=g.focusNode;g=g.focusOffset;try{f.nodeType,j.nodeType}catch{f=null;break e}var V=0,J=-1,ue=-1,Ie=0,He=0,Je=l,Le=null;t:for(;;){for(var Be;Je!==f||b!==0&&Je.nodeType!==3||(J=V+b),Je!==j||g!==0&&Je.nodeType!==3||(ue=V+g),Je.nodeType===3&&(V+=Je.nodeValue.length),(Be=Je.firstChild)!==null;)Le=Je,Je=Be;for(;;){if(Je===l)break t;if(Le===f&&++Ie===b&&(J=V),Le===j&&++He===g&&(ue=V),(Be=Je.nextSibling)!==null)break;Je=Le,Le=Je.parentNode}Je=Be}f=J===-1||ue===-1?null:{start:J,end:ue}}else f=null}f=f||{start:0,end:0}}else f=null;for(z5={focusedElem:l,selectionRange:f},f1=!1,ts=u;ts!==null;)if(u=ts,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,ts=l;else for(;ts!==null;){switch(u=ts,j=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&j!==null){l=void 0,f=u,b=j.memoizedProps,j=j.memoizedState,g=f.stateNode;try{var Ot=bd(f.type,b);l=g.getSnapshotBeforeUpdate(Ot,j),g.__reactInternalSnapshotBeforeUpdate=l}catch(Kt){pn(f,f.return,Kt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)F5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":F5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,ts=l;break}ts=u.return}}function h9(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Dl(l,f),g&4&&Mp(5,f);break;case 1:if(Dl(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(V){pn(f,f.return,V)}else{var b=bd(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(V){pn(f,f.return,V)}}g&64&&i9(f),g&512&&Dp(f,f.return);break;case 3:if(Dl(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{XC(l,u)}catch(V){pn(f,f.return,V)}}break;case 27:u===null&&g&4&&u9(f);case 26:case 5:Dl(l,f),u===null&&g&4&&l9(f),g&512&&Dp(f,f.return);break;case 12:Dl(l,f);break;case 31:Dl(l,f),g&4&&m9(l,f);break;case 13:Dl(l,f),g&4&&g9(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=nJ.bind(null,f),NJ(l,f))));break;case 22:if(g=f.memoizedState!==null||Rl,!g){u=u!==null&&u.memoizedState!==null||ka,b=Rl;var j=ka;Rl=g,(ka=u)&&!j?Pl(l,f,(f.subtreeFlags&8772)!==0):Dl(l,f),Rl=b,ka=j}break;case 30:break;default:Dl(l,f)}}function f9(l){var u=l.alternate;u!==null&&(l.alternate=null,f9(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Tt(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Wn=null,Qs=!1;function Ml(l,u,f){for(f=f.child;f!==null;)p9(l,u,f),f=f.sibling}function p9(l,u,f){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(jt,f)}catch{}switch(f.tag){case 26:ka||qo(f,u),Ml(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:ka||qo(f,u);var g=Wn,b=Qs;Zc(f.type)&&(Wn=f.stateNode,Qs=!1),Ml(l,u,f),qp(f.stateNode),Wn=g,Qs=b;break;case 5:ka||qo(f,u);case 6:if(g=Wn,b=Qs,Wn=null,Ml(l,u,f),Wn=g,Qs=b,Wn!==null)if(Qs)try{(Wn.nodeType===9?Wn.body:Wn.nodeName==="HTML"?Wn.ownerDocument.body:Wn).removeChild(f.stateNode)}catch(j){pn(f,u,j)}else try{Wn.removeChild(f.stateNode)}catch(j){pn(f,u,j)}break;case 18:Wn!==null&&(Qs?(l=Wn,iI(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),mh(l)):iI(Wn,f.stateNode));break;case 4:g=Wn,b=Qs,Wn=f.stateNode.containerInfo,Qs=!0,Ml(l,u,f),Wn=g,Qs=b;break;case 0:case 11:case 14:case 15:Gc(2,f,u),ka||Gc(4,f,u),Ml(l,u,f);break;case 1:ka||(qo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&o9(f,u,g)),Ml(l,u,f);break;case 21:Ml(l,u,f);break;case 22:ka=(g=ka)||f.memoizedState!==null,Ml(l,u,f),ka=g;break;default:Ml(l,u,f)}}function m9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{mh(l)}catch(f){pn(u,u.return,f)}}}function g9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{mh(l)}catch(f){pn(u,u.return,f)}}function QY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new d9),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new d9),u;default:throw Error(n(435,l.tag))}}function Wy(l,u){var f=QY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=aJ.bind(null,l,g);g.then(b,b)}})}function Xs(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],j=l,V=u,J=V;e:for(;J!==null;){switch(J.tag){case 27:if(Zc(J.type)){Wn=J.stateNode,Qs=!1;break e}break;case 5:Wn=J.stateNode,Qs=!1;break e;case 3:case 4:Wn=J.stateNode.containerInfo,Qs=!0;break e}J=J.return}if(Wn===null)throw Error(n(160));p9(j,V,b),Wn=null,Qs=!1,j=b.alternate,j!==null&&(j.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)x9(u,l),u=u.sibling}var vo=null;function x9(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Xs(u,l),Ys(l),g&4&&(Gc(3,l,l.return),Mp(3,l),Gc(5,l,l.return));break;case 1:Xs(u,l),Ys(l),g&512&&(ka||f===null||qo(f,f.return)),g&64&&Rl&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=vo;if(Xs(u,l),Ys(l),g&512&&(ka||f===null||qo(f,f.return)),g&4){var j=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":j=b.getElementsByTagName("title")[0],(!j||j[Ns]||j[on]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=b.createElement(g),b.head.insertBefore(j,b.querySelector("head > title"))),ms(j,g,f),j[on]=l,xr(j),g=j;break e;case"link":var V=xI("link","href",b).get(g+(f.href||""));if(V){for(var J=0;J<V.length;J++)if(j=V[J],j.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&j.getAttribute("rel")===(f.rel==null?null:f.rel)&&j.getAttribute("title")===(f.title==null?null:f.title)&&j.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){V.splice(J,1);break t}}j=b.createElement(g),ms(j,g,f),b.head.appendChild(j);break;case"meta":if(V=xI("meta","content",b).get(g+(f.content||""))){for(J=0;J<V.length;J++)if(j=V[J],j.getAttribute("content")===(f.content==null?null:""+f.content)&&j.getAttribute("name")===(f.name==null?null:f.name)&&j.getAttribute("property")===(f.property==null?null:f.property)&&j.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&j.getAttribute("charset")===(f.charSet==null?null:f.charSet)){V.splice(J,1);break t}}j=b.createElement(g),ms(j,g,f),b.head.appendChild(j);break;default:throw Error(n(468,g))}j[on]=l,xr(j),g=j}l.stateNode=g}else yI(b,l.type,l.stateNode);else l.stateNode=gI(b,g,l.memoizedProps);else j!==g?(j===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):j.count--,g===null?yI(b,l.type,l.stateNode):gI(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&m5(l,l.memoizedProps,f.memoizedProps)}break;case 27:Xs(u,l),Ys(l),g&512&&(ka||f===null||qo(f,f.return)),f!==null&&g&4&&m5(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Xs(u,l),Ys(l),g&512&&(ka||f===null||qo(f,f.return)),l.flags&32){b=l.stateNode;try{Fe(b,"")}catch(Ot){pn(l,l.return,Ot)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,m5(l,b,f!==null?f.memoizedProps:b)),g&1024&&(y5=!0);break;case 6:if(Xs(u,l),Ys(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Ot){pn(l,l.return,Ot)}}break;case 3:if(c1=null,b=vo,vo=o1(u.containerInfo),Xs(u,l),vo=b,Ys(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{mh(u.containerInfo)}catch(Ot){pn(l,l.return,Ot)}y5&&(y5=!1,y9(l));break;case 4:g=vo,vo=o1(l.stateNode.containerInfo),Xs(u,l),Ys(l),vo=g;break;case 12:Xs(u,l),Ys(l);break;case 31:Xs(u,l),Ys(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Wy(l,g)));break;case 13:Xs(u,l),Ys(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Qy=We()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Wy(l,g)));break;case 22:b=l.memoizedState!==null;var ue=f!==null&&f.memoizedState!==null,Ie=Rl,He=ka;if(Rl=Ie||b,ka=He||ue,Xs(u,l),ka=He,Rl=Ie,Ys(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||ue||Rl||ka||wd(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){ue=f=u;try{if(j=ue.stateNode,b)V=j.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{J=ue.stateNode;var Je=ue.memoizedProps.style,Le=Je!=null&&Je.hasOwnProperty("display")?Je.display:null;J.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(Ot){pn(ue,ue.return,Ot)}}}else if(u.tag===6){if(f===null){ue=u;try{ue.stateNode.nodeValue=b?"":ue.memoizedProps}catch(Ot){pn(ue,ue.return,Ot)}}}else if(u.tag===18){if(f===null){ue=u;try{var Be=ue.stateNode;b?oI(Be,!0):oI(ue.stateNode,!1)}catch(Ot){pn(ue,ue.return,Ot)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Wy(l,f))));break;case 19:Xs(u,l),Ys(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Wy(l,g)));break;case 30:break;case 21:break;default:Xs(u,l),Ys(l)}}function Ys(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(c9(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,j=g5(l);Gy(l,j,b);break;case 5:var V=f.stateNode;f.flags&32&&(Fe(V,""),f.flags&=-33);var J=g5(l);Gy(l,J,V);break;case 3:case 4:var ue=f.stateNode.containerInfo,Ie=g5(l);x5(l,Ie,ue);break;default:throw Error(n(161))}}catch(He){pn(l,l.return,He)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function y9(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;y9(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Dl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)h9(l,u.alternate,u),u=u.sibling}function wd(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Gc(4,u,u.return),wd(u);break;case 1:qo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&o9(u,u.return,f),wd(u);break;case 27:qp(u.stateNode);case 26:case 5:qo(u,u.return),wd(u);break;case 22:u.memoizedState===null&&wd(u);break;case 30:wd(u);break;default:wd(u)}l=l.sibling}}function Pl(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,j=u,V=j.flags;switch(j.tag){case 0:case 11:case 15:Pl(b,j,f),Mp(4,j);break;case 1:if(Pl(b,j,f),g=j,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ie){pn(g,g.return,Ie)}if(g=j,b=g.updateQueue,b!==null){var J=g.stateNode;try{var ue=b.shared.hiddenCallbacks;if(ue!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ue.length;b++)QC(ue[b],J)}catch(Ie){pn(g,g.return,Ie)}}f&&V&64&&i9(j),Dp(j,j.return);break;case 27:u9(j);case 26:case 5:Pl(b,j,f),f&&g===null&&V&4&&l9(j),Dp(j,j.return);break;case 12:Pl(b,j,f);break;case 31:Pl(b,j,f),f&&V&4&&m9(b,j);break;case 13:Pl(b,j,f),f&&V&4&&g9(b,j);break;case 22:j.memoizedState===null&&Pl(b,j,f),Dp(j,j.return);break;case 30:break;default:Pl(b,j,f)}u=u.sibling}}function v5(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&wp(f))}function b5(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&wp(l))}function bo(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)v9(l,u,f,g),u=u.sibling}function v9(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:bo(l,u,f,g),b&2048&&Mp(9,u);break;case 1:bo(l,u,f,g);break;case 3:bo(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&wp(l)));break;case 12:if(b&2048){bo(l,u,f,g),l=u.stateNode;try{var j=u.memoizedProps,V=j.id,J=j.onPostCommit;typeof J=="function"&&J(V,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ue){pn(u,u.return,ue)}}else bo(l,u,f,g);break;case 31:bo(l,u,f,g);break;case 13:bo(l,u,f,g);break;case 23:break;case 22:j=u.stateNode,V=u.alternate,u.memoizedState!==null?j._visibility&2?bo(l,u,f,g):Pp(l,u):j._visibility&2?bo(l,u,f,g):(j._visibility|=2,ah(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&v5(V,u);break;case 24:bo(l,u,f,g),b&2048&&b5(u.alternate,u);break;default:bo(l,u,f,g)}}function ah(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var j=l,V=u,J=f,ue=g,Ie=V.flags;switch(V.tag){case 0:case 11:case 15:ah(j,V,J,ue,b),Mp(8,V);break;case 23:break;case 22:var He=V.stateNode;V.memoizedState!==null?He._visibility&2?ah(j,V,J,ue,b):Pp(j,V):(He._visibility|=2,ah(j,V,J,ue,b)),b&&Ie&2048&&v5(V.alternate,V);break;case 24:ah(j,V,J,ue,b),b&&Ie&2048&&b5(V.alternate,V);break;default:ah(j,V,J,ue,b)}u=u.sibling}}function Pp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:Pp(f,g),b&2048&&v5(g.alternate,g);break;case 24:Pp(f,g),b&2048&&b5(g.alternate,g);break;default:Pp(f,g)}u=u.sibling}}var Lp=8192;function sh(l,u,f){if(l.subtreeFlags&Lp)for(l=l.child;l!==null;)b9(l,u,f),l=l.sibling}function b9(l,u,f){switch(l.tag){case 26:sh(l,u,f),l.flags&Lp&&l.memoizedState!==null&&DJ(f,vo,l.memoizedState,l.memoizedProps);break;case 5:sh(l,u,f);break;case 3:case 4:var g=vo;vo=o1(l.stateNode.containerInfo),sh(l,u,f),vo=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=Lp,Lp=16777216,sh(l,u,f),Lp=g):sh(l,u,f));break;default:sh(l,u,f)}}function w9(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Bp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];ts=g,N9(g,l)}w9(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)S9(l),l=l.sibling}function S9(l){switch(l.tag){case 0:case 11:case 15:Bp(l),l.flags&2048&&Gc(9,l,l.return);break;case 3:Bp(l);break;case 12:Bp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Ky(l)):Bp(l);break;default:Bp(l)}}function Ky(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];ts=g,N9(g,l)}w9(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Gc(8,u,u.return),Ky(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,Ky(u));break;default:Ky(u)}l=l.sibling}}function N9(l,u){for(;ts!==null;){var f=ts;switch(f.tag){case 0:case 11:case 15:Gc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:wp(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,ts=g;else e:for(f=l;ts!==null;){g=ts;var b=g.sibling,j=g.return;if(f9(g),g===f){ts=null;break e}if(b!==null){b.return=j,ts=b;break e}ts=j}}}var XY={getCacheForType:function(l){var u=fs(Aa),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return fs(Aa).controller.signal}},YY=typeof WeakMap=="function"?WeakMap:Map,rn=0,In=null,Cr=null,Rr=0,fn=0,ji=null,Wc=!1,ih=!1,w5=!1,Ll=0,ia=0,Kc=0,Sd=0,S5=0,_i=0,oh=0,$p=null,Js=null,N5=!1,Qy=0,j9=0,Xy=1/0,Yy=null,Qc=null,$a=0,Xc=null,lh=null,Bl=0,j5=0,_5=null,_9=null,zp=0,T5=null;function Ti(){return(rn&2)!==0&&Rr!==0?Rr&-Rr:H.T!==null?O5():bn()}function T9(){if(_i===0)if((Rr&536870912)===0||$r){var l=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),_i=l}else _i=536870912;return l=Si.current,l!==null&&(l.flags|=32),_i}function Zs(l,u,f){(l===In&&(fn===2||fn===9)||l.cancelPendingCommit!==null)&&(ch(l,0),Yc(l,Rr,_i,!1)),yn(l,f),((rn&2)===0||l!==In)&&(l===In&&((rn&2)===0&&(Sd|=f),ia===4&&Yc(l,Rr,_i,!1)),Ho(l))}function A9(l,u,f){if((rn&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||Gr(l,u),b=g?eJ(l,u):E5(l,u,!0),j=g;do{if(b===0){ih&&!g&&Yc(l,u,0,!1);break}else{if(f=l.current.alternate,j&&!JY(f)){b=E5(l,u,!1),j=!1;continue}if(b===2){if(j=u,l.errorRecoveryDisabledLanes&j)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){u=V;e:{var J=l;b=$p;var ue=J.current.memoizedState.isDehydrated;if(ue&&(ch(J,V).flags|=256),V=E5(J,V,!1),V!==2){if(w5&&!ue){J.errorRecoveryDisabledLanes|=j,Sd|=j,b=4;break e}j=Js,Js=b,j!==null&&(Js===null?Js=j:Js.push.apply(Js,j))}b=V}if(j=!1,b!==2)continue}}if(b===1){ch(l,0),Yc(l,u,0,!0);break}e:{switch(g=l,j=b,j){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Yc(g,u,_i,!Wc);break e;case 2:Js=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=Qy+300-We(),10<b)){if(Yc(g,u,_i,!Wc),_t(g,0,!0)!==0)break e;Bl=u,g.timeoutHandle=aI(E9.bind(null,g,f,Js,Yy,N5,u,_i,Sd,oh,Wc,j,"Throttled",-0,0),b);break e}E9(g,f,Js,Yy,N5,u,_i,Sd,oh,Wc,j,null,-0,0)}}break}while(!0);Ho(l)}function E9(l,u,f,g,b,j,V,J,ue,Ie,He,Je,Le,Be){if(l.timeoutHandle=-1,Je=u.subtreeFlags,Je&8192||(Je&16785408)===16785408){Je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},b9(u,j,Je);var Ot=(j&62914560)===j?Qy-We():(j&4194048)===j?j9-We():0;if(Ot=PJ(Je,Ot),Ot!==null){Bl=j,l.cancelPendingCommit=Ot(P9.bind(null,l,u,j,f,g,b,V,J,ue,He,Je,null,Le,Be)),Yc(l,j,V,!Ie);return}}P9(l,u,j,f,g,b,V,J,ue)}function JY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],j=b.getSnapshot;b=b.value;try{if(!bi(j(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Yc(l,u,f,g){u&=~S5,u&=~Sd,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var j=31-tt(b),V=1<<j;g[j]=-1,b&=~V}f!==0&&Sa(l,f,u)}function Jy(){return(rn&6)===0?(Up(0),!1):!0}function A5(){if(Cr!==null){if(fn===0)var l=Cr.return;else l=Cr,Al=fd=null,F4(l),Z0=null,Np=0,l=Cr;for(;l!==null;)s9(l.alternate,l),l=l.return;Cr=null}}function ch(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,yJ(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Bl=0,A5(),In=l,Cr=f=_l(l.current,null),Rr=u,fn=0,ji=null,Wc=!1,ih=Gr(l,u),w5=!1,oh=_i=S5=Sd=Kc=ia=0,Js=$p=null,N5=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-tt(g),j=1<<b;u|=l[b],g&=~j}return Ll=u,vy(),f}function C9(l,u){mr=null,H.H=Ip,u===J0||u===Ay?(u=HC(),fn=3):u===I4?(u=HC(),fn=4):fn=u===s5?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ji=u,Cr===null&&(ia=1,Uy(l,Fi(u,l.current)))}function k9(){var l=Si.current;return l===null?!0:(Rr&4194048)===Rr?Wi===null:(Rr&62914560)===Rr||(Rr&536870912)!==0?l===Wi:!1}function I9(){var l=H.H;return H.H=Ip,l===null?Ip:l}function O9(){var l=H.A;return H.A=XY,l}function Zy(){ia=4,Wc||(Rr&4194048)!==Rr&&Si.current!==null||(ih=!0),(Kc&134217727)===0&&(Sd&134217727)===0||In===null||Yc(In,Rr,_i,!1)}function E5(l,u,f){var g=rn;rn|=2;var b=I9(),j=O9();(In!==l||Rr!==u)&&(Yy=null,ch(l,u)),u=!1;var V=ia;e:do try{if(fn!==0&&Cr!==null){var J=Cr,ue=ji;switch(fn){case 8:A5(),V=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(u=!0);var Ie=fn;if(fn=0,ji=null,uh(l,J,ue,Ie),f&&ih){V=0;break e}break;default:Ie=fn,fn=0,ji=null,uh(l,J,ue,Ie)}}ZY(),V=ia;break}catch(He){C9(l,He)}while(!0);return u&&l.shellSuspendCounter++,Al=fd=null,rn=g,H.H=b,H.A=j,Cr===null&&(In=null,Rr=0,vy()),V}function ZY(){for(;Cr!==null;)R9(Cr)}function eJ(l,u){var f=rn;rn|=2;var g=I9(),b=O9();In!==l||Rr!==u?(Yy=null,Xy=We()+500,ch(l,u)):ih=Gr(l,u);e:do try{if(fn!==0&&Cr!==null){u=Cr;var j=ji;t:switch(fn){case 1:fn=0,ji=null,uh(l,u,j,1);break;case 2:case 9:if(FC(j)){fn=0,ji=null,M9(u);break}u=function(){fn!==2&&fn!==9||In!==l||(fn=7),Ho(l)},j.then(u,u);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:FC(j)?(fn=0,ji=null,M9(u)):(fn=0,ji=null,uh(l,u,j,7));break;case 5:var V=null;switch(Cr.tag){case 26:V=Cr.memoizedState;case 5:case 27:var J=Cr;if(V?vI(V):J.stateNode.complete){fn=0,ji=null;var ue=J.sibling;if(ue!==null)Cr=ue;else{var Ie=J.return;Ie!==null?(Cr=Ie,e1(Ie)):Cr=null}break t}}fn=0,ji=null,uh(l,u,j,5);break;case 6:fn=0,ji=null,uh(l,u,j,6);break;case 8:A5(),ia=6;break e;default:throw Error(n(462))}}tJ();break}catch(He){C9(l,He)}while(!0);return Al=fd=null,H.H=g,H.A=b,rn=f,Cr!==null?0:(In=null,Rr=0,vy(),ia)}function tJ(){for(;Cr!==null&&!yt();)R9(Cr)}function R9(l){var u=n9(l.alternate,l,Ll);l.memoizedProps=l.pendingProps,u===null?e1(l):Cr=u}function M9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=Yk(f,u,u.pendingProps,u.type,void 0,Rr);break;case 11:u=Yk(f,u,u.pendingProps,u.type.render,u.ref,Rr);break;case 5:F4(u);default:s9(f,u),u=Cr=OC(u,Ll),u=n9(f,u,Ll)}l.memoizedProps=l.pendingProps,u===null?e1(l):Cr=u}function uh(l,u,f,g){Al=fd=null,F4(u),Z0=null,Np=0;var b=u.return;try{if(FY(l,b,u,f,Rr)){ia=1,Uy(l,Fi(f,l.current)),Cr=null;return}}catch(j){if(b!==null)throw Cr=b,j;ia=1,Uy(l,Fi(f,l.current)),Cr=null;return}u.flags&32768?($r||g===1?l=!0:ih||(Rr&536870912)!==0?l=!1:(Wc=l=!0,(g===2||g===9||g===3||g===6)&&(g=Si.current,g!==null&&g.tag===13&&(g.flags|=16384))),D9(u,l)):e1(u)}function e1(l){var u=l;do{if((u.flags&32768)!==0){D9(u,Wc);return}l=u.return;var f=GY(u.alternate,u,Ll);if(f!==null){Cr=f;return}if(u=u.sibling,u!==null){Cr=u;return}Cr=u=l}while(u!==null);ia===0&&(ia=5)}function D9(l,u){do{var f=WY(l.alternate,l);if(f!==null){f.flags&=32767,Cr=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){Cr=l;return}Cr=l=f}while(l!==null);ia=6,Cr=null}function P9(l,u,f,g,b,j,V,J,ue){l.cancelPendingCommit=null;do t1();while($a!==0);if((rn&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(j=u.lanes|u.childLanes,j|=g4,hr(l,f,j,V,J,ue),l===In&&(Cr=In=null,Rr=0),lh=u,Xc=l,Bl=f,j5=j,_5=b,_9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,sJ(Et,function(){return U9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=ee.p,ee.p=2,V=rn,rn|=4;try{KY(l,u,f)}finally{rn=V,ee.p=b,H.T=g}}$a=1,L9(),B9(),$9()}}function L9(){if($a===1){$a=0;var l=Xc,u=lh,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=ee.p;ee.p=2;var b=rn;rn|=4;try{x9(u,l);var j=z5,V=NC(l.containerInfo),J=j.focusedElem,ue=j.selectionRange;if(V!==J&&J&&J.ownerDocument&&SC(J.ownerDocument.documentElement,J)){if(ue!==null&&d4(J)){var Ie=ue.start,He=ue.end;if(He===void 0&&(He=Ie),"selectionStart"in J)J.selectionStart=Ie,J.selectionEnd=Math.min(He,J.value.length);else{var Je=J.ownerDocument||document,Le=Je&&Je.defaultView||window;if(Le.getSelection){var Be=Le.getSelection(),Ot=J.textContent.length,Kt=Math.min(ue.start,Ot),_n=ue.end===void 0?Kt:Math.min(ue.end,Ot);!Be.extend&&Kt>_n&&(V=_n,_n=Kt,Kt=V);var je=wC(J,Kt),ge=wC(J,_n);if(je&&ge&&(Be.rangeCount!==1||Be.anchorNode!==je.node||Be.anchorOffset!==je.offset||Be.focusNode!==ge.node||Be.focusOffset!==ge.offset)){var Ce=Je.createRange();Ce.setStart(je.node,je.offset),Be.removeAllRanges(),Kt>_n?(Be.addRange(Ce),Be.extend(ge.node,ge.offset)):(Ce.setEnd(ge.node,ge.offset),Be.addRange(Ce))}}}}for(Je=[],Be=J;Be=Be.parentNode;)Be.nodeType===1&&Je.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<Je.length;J++){var Qe=Je[J];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}f1=!!$5,z5=$5=null}finally{rn=b,ee.p=g,H.T=f}}l.current=u,$a=2}}function B9(){if($a===2){$a=0;var l=Xc,u=lh,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=ee.p;ee.p=2;var b=rn;rn|=4;try{h9(l,u.alternate,u)}finally{rn=b,ee.p=g,H.T=f}}$a=3}}function $9(){if($a===4||$a===3){$a=0,me();var l=Xc,u=lh,f=Bl,g=_9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?$a=5:($a=0,lh=Xc=null,z9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Qc=null),Or(f),u=u.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(jt,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=H.T,b=ee.p,ee.p=2,H.T=null;try{for(var j=l.onRecoverableError,V=0;V<g.length;V++){var J=g[V];j(J.value,{componentStack:J.stack})}}finally{H.T=u,ee.p=b}}(Bl&3)!==0&&t1(),Ho(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===T5?zp++:(zp=0,T5=l):zp=0,Up(0)}}function z9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,wp(u)))}function t1(){return L9(),B9(),$9(),U9()}function U9(){if($a!==5)return!1;var l=Xc,u=j5;j5=0;var f=Or(Bl),g=H.T,b=ee.p;try{ee.p=32>f?32:f,H.T=null,f=_5,_5=null;var j=Xc,V=Bl;if($a=0,lh=Xc=null,Bl=0,(rn&6)!==0)throw Error(n(331));var J=rn;if(rn|=4,S9(j.current),v9(j,j.current,V,f),rn=J,Up(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(jt,j)}catch{}return!0}finally{ee.p=b,H.T=g,z9(l,u)}}function V9(l,u,f){u=Fi(f,u),u=a5(l.stateNode,u,2),l=Fc(l,u,2),l!==null&&(yn(l,2),Ho(l))}function pn(l,u,f){if(l.tag===3)V9(l,l,f);else for(;u!==null;){if(u.tag===3){V9(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Qc===null||!Qc.has(g))){l=Fi(f,l),f=Fk(2),g=Fc(u,f,2),g!==null&&(qk(f,g,u,l),yn(g,2),Ho(g));break}}u=u.return}}function C5(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new YY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(w5=!0,b.add(f),l=rJ.bind(null,l,u,f),u.then(l,l))}function rJ(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,In===l&&(Rr&f)===f&&(ia===4||ia===3&&(Rr&62914560)===Rr&&300>We()-Qy?(rn&2)===0&&ch(l,0):S5|=f,oh===Rr&&(oh=0)),Ho(l)}function F9(l,u){u===0&&(u=en()),l=ud(l,u),l!==null&&(yn(l,u),Ho(l))}function nJ(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),F9(l,f)}function aJ(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),F9(l,f)}function sJ(l,u){return Nt(l,u)}var r1=null,dh=null,k5=!1,n1=!1,I5=!1,Jc=0;function Ho(l){l!==dh&&l.next===null&&(dh===null?r1=dh=l:dh=dh.next=l),n1=!0,k5||(k5=!0,oJ())}function Up(l,u){if(!I5&&n1){I5=!0;do for(var f=!1,g=r1;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var j=0;else{var V=g.suspendedLanes,J=g.pingedLanes;j=(1<<31-tt(42|l)+1)-1,j&=b&~(V&~J),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(f=!0,W9(g,j))}else j=Rr,j=_t(g,g===In?j:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(j&3)===0||Gr(g,j)||(f=!0,W9(g,j));g=g.next}while(f);I5=!1}}function iJ(){q9()}function q9(){n1=k5=!1;var l=0;Jc!==0&&xJ()&&(l=Jc);for(var u=We(),f=null,g=r1;g!==null;){var b=g.next,j=H9(g,u);j===0?(g.next=null,f===null?r1=b:f.next=b,b===null&&(dh=f)):(f=g,(l!==0||(j&3)!==0)&&(n1=!0)),g=b}$a!==0&&$a!==5||Up(l),Jc!==0&&(Jc=0)}function H9(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,j=l.pendingLanes&-62914561;0<j;){var V=31-tt(j),J=1<<V,ue=b[V];ue===-1?((J&f)===0||(J&g)!==0)&&(b[V]=dn(J,u)):ue<=u&&(l.expiredLanes|=J),j&=~J}if(u=In,f=Rr,f=_t(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(fn===2||fn===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&vt(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Gr(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&vt(g),Or(f)){case 2:case 8:f=et;break;case 32:f=Et;break;case 268435456:f=pr;break;default:f=Et}return g=G9.bind(null,l),f=Nt(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&vt(g),l.callbackPriority=2,l.callbackNode=null,2}function G9(l,u){if($a!==0&&$a!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(t1()&&l.callbackNode!==f)return null;var g=Rr;return g=_t(l,l===In?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(A9(l,g,u),H9(l,We()),l.callbackNode!=null&&l.callbackNode===f?G9.bind(null,l):null)}function W9(l,u){if(t1())return null;A9(l,u,!0)}function oJ(){vJ(function(){(rn&6)!==0?Nt(Ze,iJ):q9()})}function O5(){if(Jc===0){var l=X0;l===0&&(l=xn,xn<<=1,(xn&261888)===0&&(xn=256)),Jc=l}return Jc}function K9(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:_a(""+l)}function Q9(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function lJ(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var j=K9((b[wn]||null).action),V=g.submitter;V&&(u=(u=V[wn]||null)?K9(u.formAction):V.getAttribute("formAction"),u!==null&&(j=u,V=null));var J=new nd("action","action",null,g,b);l.push({event:J,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Jc!==0){var ue=V?Q9(b,V):new FormData(b);J4(f,{pending:!0,data:ue,method:b.method,action:j},null,ue)}}else typeof j=="function"&&(J.preventDefault(),ue=V?Q9(b,V):new FormData(b),J4(f,{pending:!0,data:ue,method:b.method,action:j},j,ue))},currentTarget:b}]})}}for(var R5=0;R5<m4.length;R5++){var M5=m4[R5],cJ=M5.toLowerCase(),uJ=M5[0].toUpperCase()+M5.slice(1);yo(cJ,"on"+uJ)}yo(TC,"onAnimationEnd"),yo(AC,"onAnimationIteration"),yo(EC,"onAnimationStart"),yo("dblclick","onDoubleClick"),yo("focusin","onFocus"),yo("focusout","onBlur"),yo(TY,"onTransitionRun"),yo(AY,"onTransitionStart"),yo(EY,"onTransitionCancel"),yo(CC,"onTransitionEnd"),Br("onMouseEnter",["mouseout","mouseover"]),Br("onMouseLeave",["mouseout","mouseover"]),Br("onPointerEnter",["pointerout","pointerover"]),Br("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vp));function X9(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var j=void 0;if(u)for(var V=g.length-1;0<=V;V--){var J=g[V],ue=J.instance,Ie=J.currentTarget;if(J=J.listener,ue!==j&&b.isPropagationStopped())break e;j=J,b.currentTarget=Ie;try{j(b)}catch(He){yy(He)}b.currentTarget=null,j=ue}else for(V=0;V<g.length;V++){if(J=g[V],ue=J.instance,Ie=J.currentTarget,J=J.listener,ue!==j&&b.isPropagationStopped())break e;j=J,b.currentTarget=Ie;try{j(b)}catch(He){yy(He)}b.currentTarget=null,j=ue}}}}function kr(l,u){var f=u[ds];f===void 0&&(f=u[ds]=new Set);var g=l+"__bubble";f.has(g)||(Y9(u,l,2,!1),f.add(g))}function D5(l,u,f){var g=0;u&&(g|=4),Y9(f,l,g,u)}var a1="_reactListening"+Math.random().toString(36).slice(2);function P5(l){if(!l[a1]){l[a1]=!0,hn.forEach(function(f){f!=="selectionchange"&&(dJ.has(f)||D5(f,!1,l),D5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[a1]||(u[a1]=!0,D5("selectionchange",!1,u))}}function Y9(l,u,f,g){switch(TI(u)){case 2:var b=$J;break;case 8:b=zJ;break;default:b=Y5}f=b.bind(null,u,f,l),b=void 0,!up||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function L5(l,u,f,g,b){var j=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var J=g.stateNode.containerInfo;if(J===b)break;if(V===4)for(V=g.return;V!==null;){var ue=V.tag;if((ue===3||ue===4)&&V.stateNode.containerInfo===b)return;V=V.return}for(;J!==null;){if(V=pe(J),V===null)return;if(ue=V.tag,ue===5||ue===6||ue===26||ue===27){g=j=V;continue e}J=J.parentNode}}g=g.return}ry(function(){var Ie=j,He=$o(f),Je=[];e:{var Le=kC.get(l);if(Le!==void 0){var Be=nd,Ot=l;switch(l){case"keypress":if(rd(f)===0)break e;case"keydown":case"keyup":Be=dy;break;case"focusin":Ot="focus",Be=Rc;break;case"focusout":Ot="blur",Be=Rc;break;case"beforeblur":case"afterblur":Be=Rc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=sy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=fy;break;case TC:case AC:case EC:Be=z0;break;case CC:Be=U0;break;case"scroll":case"scrollend":Be=ny;break;case"wheel":Be=my;break;case"copy":case"cut":case"paste":Be=oy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=mp;break;case"toggle":case"beforetoggle":Be=Dc}var Kt=(u&4)!==0,_n=!Kt&&(l==="scroll"||l==="scrollend"),je=Kt?Le!==null?Le+"Capture":null:Le;Kt=[];for(var ge=Ie,Ce;ge!==null;){var Qe=ge;if(Ce=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||Ce===null||je===null||(Qe=Ws(ge,je),Qe!=null&&Kt.push(Fp(ge,Qe,Ce))),_n)break;ge=ge.return}0<Kt.length&&(Le=new Be(Le,Ot,null,f,He),Je.push({event:Le,listeners:Kt}))}}if((u&7)===0){e:{if(Le=l==="mouseover"||l==="pointerover",Be=l==="mouseout"||l==="pointerout",Le&&f!==wr&&(Ot=f.relatedTarget||f.fromElement)&&(pe(Ot)||Ot[kn]))break e;if((Be||Le)&&(Le=He.window===He?He:(Le=He.ownerDocument)?Le.defaultView||Le.parentWindow:window,Be?(Ot=f.relatedTarget||f.toElement,Be=Ie,Ot=Ot?pe(Ot):null,Ot!==null&&(_n=i(Ot),Kt=Ot.tag,Ot!==_n||Kt!==5&&Kt!==27&&Kt!==6)&&(Ot=null)):(Be=null,Ot=Ie),Be!==Ot)){if(Kt=ay,Qe="onMouseLeave",je="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(Kt=mp,Qe="onPointerLeave",je="onPointerEnter",ge="pointer"),_n=Be==null?Le:dt(Be),Ce=Ot==null?Le:dt(Ot),Le=new Kt(Qe,ge+"leave",Be,f,He),Le.target=_n,Le.relatedTarget=Ce,Qe=null,pe(He)===Ie&&(Kt=new Kt(je,ge+"enter",Ot,f,He),Kt.target=Ce,Kt.relatedTarget=_n,Qe=Kt),_n=Qe,Be&&Ot)t:{for(Kt=hJ,je=Be,ge=Ot,Ce=0,Qe=je;Qe;Qe=Kt(Qe))Ce++;Qe=0;for(var Ft=ge;Ft;Ft=Kt(Ft))Qe++;for(;0<Ce-Qe;)je=Kt(je),Ce--;for(;0<Qe-Ce;)ge=Kt(ge),Qe--;for(;Ce--;){if(je===ge||ge!==null&&je===ge.alternate){Kt=je;break t}je=Kt(je),ge=Kt(ge)}Kt=null}else Kt=null;Be!==null&&J9(Je,Le,Be,Kt,!1),Ot!==null&&_n!==null&&J9(Je,_n,Ot,Kt,!0)}}e:{if(Le=Ie?dt(Ie):window,Be=Le.nodeName&&Le.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Le.type==="file")var Kr=mC;else if(Ks(Le))if(gC)Kr=NY;else{Kr=wY;var $t=bY}else Be=Le.nodeName,!Be||Be.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?Ie&&ha(Ie.elementType)&&(Kr=mC):Kr=SY;if(Kr&&(Kr=Kr(l,Ie))){od(Je,Kr,f,He);break e}$t&&$t(l,Le,Ie),l==="focusout"&&Ie&&Le.type==="number"&&Ie.memoizedProps.value!=null&&le(Le,"number",Le.value)}switch($t=Ie?dt(Ie):window,l){case"focusin":(Ks($t)||$t.contentEditable==="true")&&(V0=$t,h4=Ie,yp=null);break;case"focusout":yp=h4=V0=null;break;case"mousedown":f4=!0;break;case"contextmenu":case"mouseup":case"dragend":f4=!1,jC(Je,f,He);break;case"selectionchange":if(_Y)break;case"keydown":case"keyup":jC(Je,f,He)}var yr;if(D)e:{switch(l){case"compositionstart":var Mr="onCompositionStart";break e;case"compositionend":Mr="onCompositionEnd";break e;case"compositionupdate":Mr="onCompositionUpdate";break e}Mr=void 0}else Nr?ln(l,f)&&(Mr="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Mr="onCompositionStart");Mr&&(Te&&f.locale!=="ko"&&(Nr||Mr!=="onCompositionStart"?Mr==="onCompositionEnd"&&Nr&&(yr=Cc()):(vi=He,B0="value"in vi?vi.value:vi.textContent,Nr=!0)),$t=s1(Ie,Mr),0<$t.length&&(Mr=new hp(Mr,l,null,f,He),Je.push({event:Mr,listeners:$t}),yr?Mr.data=yr:(yr=Ta(f),yr!==null&&(Mr.data=yr)))),(yr=re?Za(l,f):es(l,f))&&(Mr=s1(Ie,"onBeforeInput"),0<Mr.length&&($t=new hp("onBeforeInput","beforeinput",null,f,He),Je.push({event:$t,listeners:Mr}),$t.data=yr)),lJ(Je,l,Ie,f,He)}X9(Je,u)})}function Fp(l,u,f){return{instance:l,listener:u,currentTarget:f}}function s1(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,j=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||j===null||(b=Ws(l,f),b!=null&&g.unshift(Fp(l,b,j)),b=Ws(l,u),b!=null&&g.push(Fp(l,b,j))),l.tag===3)return g;l=l.return}return[]}function hJ(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function J9(l,u,f,g,b){for(var j=u._reactName,V=[];f!==null&&f!==g;){var J=f,ue=J.alternate,Ie=J.stateNode;if(J=J.tag,ue!==null&&ue===g)break;J!==5&&J!==26&&J!==27||Ie===null||(ue=Ie,b?(Ie=Ws(f,j),Ie!=null&&V.unshift(Fp(f,Ie,ue))):b||(Ie=Ws(f,j),Ie!=null&&V.push(Fp(f,Ie,ue)))),f=f.return}V.length!==0&&l.push({event:u,listeners:V})}var fJ=/\r\n?/g,pJ=/\u0000|\uFFFD/g;function Z9(l){return(typeof l=="string"?l:""+l).replace(fJ,`
`).replace(pJ,"")}function eI(l,u){return u=Z9(u),Z9(l)===u}function jn(l,u,f,g,b,j){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Fe(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Fe(l,""+g);break;case"className":xi(l,"class",g);break;case"tabIndex":xi(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":xi(l,f,g);break;case"style":Pn(l,g,j);break;case"data":if(u!=="object"){xi(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=_a(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(f==="formAction"?(u!=="input"&&jn(l,u,"name",b.name,b,null),jn(l,u,"formEncType",b.formEncType,b,null),jn(l,u,"formMethod",b.formMethod,b,null),jn(l,u,"formTarget",b.formTarget,b,null)):(jn(l,u,"encType",b.encType,b,null),jn(l,u,"method",b.method,b,null),jn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=_a(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=Ln);break;case"onScroll":g!=null&&kr("scroll",l);break;case"onScrollEnd":g!=null&&kr("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=_a(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":kr("beforetoggle",l),kr("toggle",l),gi(l,"popover",g);break;case"xlinkActuate":Ba(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ba(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ba(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ba(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ba(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ba(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ba(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ba(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ba(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":gi(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=zi.get(f)||f,gi(l,f,g))}}function B5(l,u,f,g,b,j){switch(f){case"style":Pn(l,g,j);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?Fe(l,g):(typeof g=="number"||typeof g=="bigint")&&Fe(l,""+g);break;case"onScroll":g!=null&&kr("scroll",l);break;case"onScrollEnd":g!=null&&kr("scrollend",l);break;case"onClick":g!=null&&(l.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tn.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),j=l[wn]||null,j=j!=null?j[f]:null,typeof j=="function"&&l.removeEventListener(u,j,b),typeof g=="function")){typeof j!="function"&&j!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):gi(l,f,g)}}}function ms(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kr("error",l),kr("load",l);var g=!1,b=!1,j;for(j in f)if(f.hasOwnProperty(j)){var V=f[j];if(V!=null)switch(j){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:jn(l,u,j,V,f,null)}}b&&jn(l,u,"srcSet",f.srcSet,f,null),g&&jn(l,u,"src",f.src,f,null);return;case"input":kr("invalid",l);var J=j=V=b=null,ue=null,Ie=null;for(g in f)if(f.hasOwnProperty(g)){var He=f[g];if(He!=null)switch(g){case"name":b=He;break;case"type":V=He;break;case"checked":ue=He;break;case"defaultChecked":Ie=He;break;case"value":j=He;break;case"defaultValue":J=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(n(137,u));break;default:jn(l,u,g,He,f,null)}}Er(l,j,J,ue,Ie,V,b,!1);return;case"select":kr("invalid",l),g=V=j=null;for(b in f)if(f.hasOwnProperty(b)&&(J=f[b],J!=null))switch(b){case"value":j=J;break;case"defaultValue":V=J;break;case"multiple":g=J;default:jn(l,u,b,J,f,null)}u=j,f=V,l.multiple=!!g,u!=null?ve(l,!!g,u,!1):f!=null&&ve(l,!!g,f,!0);return;case"textarea":kr("invalid",l),j=b=g=null;for(V in f)if(f.hasOwnProperty(V)&&(J=f[V],J!=null))switch(V){case"value":g=J;break;case"defaultValue":b=J;break;case"children":j=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(91));break;default:jn(l,u,V,J,f,null)}Ve(l,g,b,j);return;case"option":for(ue in f)if(f.hasOwnProperty(ue)&&(g=f[ue],g!=null))switch(ue){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:jn(l,u,ue,g,f,null)}return;case"dialog":kr("beforetoggle",l),kr("toggle",l),kr("cancel",l),kr("close",l);break;case"iframe":case"object":kr("load",l);break;case"video":case"audio":for(g=0;g<Vp.length;g++)kr(Vp[g],l);break;case"image":kr("error",l),kr("load",l);break;case"details":kr("toggle",l);break;case"embed":case"source":case"link":kr("error",l),kr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ie in f)if(f.hasOwnProperty(Ie)&&(g=f[Ie],g!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:jn(l,u,Ie,g,f,null)}return;default:if(ha(u)){for(He in f)f.hasOwnProperty(He)&&(g=f[He],g!==void 0&&B5(l,u,He,g,f,void 0));return}}for(J in f)f.hasOwnProperty(J)&&(g=f[J],g!=null&&jn(l,u,J,g,f,null))}function mJ(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,j=null,V=null,J=null,ue=null,Ie=null,He=null;for(Be in f){var Je=f[Be];if(f.hasOwnProperty(Be)&&Je!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":ue=Je;default:g.hasOwnProperty(Be)||jn(l,u,Be,null,g,Je)}}for(var Le in g){var Be=g[Le];if(Je=f[Le],g.hasOwnProperty(Le)&&(Be!=null||Je!=null))switch(Le){case"type":j=Be;break;case"name":b=Be;break;case"checked":Ie=Be;break;case"defaultChecked":He=Be;break;case"value":V=Be;break;case"defaultValue":J=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(n(137,u));break;default:Be!==Je&&jn(l,u,Le,Be,g,Je)}}Jt(l,V,J,ue,Ie,He,j,b);return;case"select":Be=V=J=Le=null;for(j in f)if(ue=f[j],f.hasOwnProperty(j)&&ue!=null)switch(j){case"value":break;case"multiple":Be=ue;default:g.hasOwnProperty(j)||jn(l,u,j,null,g,ue)}for(b in g)if(j=g[b],ue=f[b],g.hasOwnProperty(b)&&(j!=null||ue!=null))switch(b){case"value":Le=j;break;case"defaultValue":J=j;break;case"multiple":V=j;default:j!==ue&&jn(l,u,b,j,g,ue)}u=J,f=V,g=Be,Le!=null?ve(l,!!f,Le,!1):!!g!=!!f&&(u!=null?ve(l,!!f,u,!0):ve(l,!!f,f?[]:"",!1));return;case"textarea":Be=Le=null;for(J in f)if(b=f[J],f.hasOwnProperty(J)&&b!=null&&!g.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:jn(l,u,J,null,g,b)}for(V in g)if(b=g[V],j=f[V],g.hasOwnProperty(V)&&(b!=null||j!=null))switch(V){case"value":Le=b;break;case"defaultValue":Be=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==j&&jn(l,u,V,b,g,j)}Re(l,Le,Be);return;case"option":for(var Ot in f)if(Le=f[Ot],f.hasOwnProperty(Ot)&&Le!=null&&!g.hasOwnProperty(Ot))switch(Ot){case"selected":l.selected=!1;break;default:jn(l,u,Ot,null,g,Le)}for(ue in g)if(Le=g[ue],Be=f[ue],g.hasOwnProperty(ue)&&Le!==Be&&(Le!=null||Be!=null))switch(ue){case"selected":l.selected=Le&&typeof Le!="function"&&typeof Le!="symbol";break;default:jn(l,u,ue,Le,g,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in f)Le=f[Kt],f.hasOwnProperty(Kt)&&Le!=null&&!g.hasOwnProperty(Kt)&&jn(l,u,Kt,null,g,Le);for(Ie in g)if(Le=g[Ie],Be=f[Ie],g.hasOwnProperty(Ie)&&Le!==Be&&(Le!=null||Be!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,u));break;default:jn(l,u,Ie,Le,g,Be)}return;default:if(ha(u)){for(var _n in f)Le=f[_n],f.hasOwnProperty(_n)&&Le!==void 0&&!g.hasOwnProperty(_n)&&B5(l,u,_n,void 0,g,Le);for(He in g)Le=g[He],Be=f[He],!g.hasOwnProperty(He)||Le===Be||Le===void 0&&Be===void 0||B5(l,u,He,Le,g,Be);return}}for(var je in f)Le=f[je],f.hasOwnProperty(je)&&Le!=null&&!g.hasOwnProperty(je)&&jn(l,u,je,null,g,Le);for(Je in g)Le=g[Je],Be=f[Je],!g.hasOwnProperty(Je)||Le===Be||Le==null&&Be==null||jn(l,u,Je,Le,g,Be)}function tI(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gJ(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],j=b.transferSize,V=b.initiatorType,J=b.duration;if(j&&J&&tI(V)){for(V=0,J=b.responseEnd,g+=1;g<f.length;g++){var ue=f[g],Ie=ue.startTime;if(Ie>J)break;var He=ue.transferSize,Je=ue.initiatorType;He&&tI(Je)&&(ue=ue.responseEnd,V+=He*(ue<J?1:(J-Ie)/(ue-Ie)))}if(--g,u+=8*(j+V)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var $5=null,z5=null;function i1(l){return l.nodeType===9?l:l.ownerDocument}function rI(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nI(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function U5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var V5=null;function xJ(){var l=window.event;return l&&l.type==="popstate"?l===V5?!1:(V5=l,!0):(V5=null,!1)}var aI=typeof setTimeout=="function"?setTimeout:void 0,yJ=typeof clearTimeout=="function"?clearTimeout:void 0,sI=typeof Promise=="function"?Promise:void 0,vJ=typeof queueMicrotask=="function"?queueMicrotask:typeof sI<"u"?function(l){return sI.resolve(null).then(l).catch(bJ)}:aI;function bJ(l){setTimeout(function(){throw l})}function Zc(l){return l==="head"}function iI(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),mh(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")qp(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,qp(f);for(var j=f.firstChild;j;){var V=j.nextSibling,J=j.nodeName;j[Ns]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&j.rel.toLowerCase()==="stylesheet"||f.removeChild(j),j=V}}else f==="body"&&qp(l.ownerDocument.body);f=b}while(f);mh(u)}function oI(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function F5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":F5(f),Tt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function wJ(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[Ns])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(j=l.getAttribute("rel"),j==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(j!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(j=l.getAttribute("src"),(j!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&j&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var j=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===j)return l}else return l;if(l=Ki(l.nextSibling),l===null)break}return null}function SJ(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Ki(l.nextSibling),l===null))return null;return l}function lI(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Ki(l.nextSibling),l===null))return null;return l}function q5(l){return l.data==="$?"||l.data==="$~"}function H5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function NJ(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Ki(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var G5=null;function cI(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return Ki(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function uI(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function dI(l,u,f){switch(u=i1(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function qp(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Tt(l)}var Qi=new Map,hI=new Set;function o1(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var $l=ee.d;ee.d={f:jJ,r:_J,D:TJ,C:AJ,L:EJ,m:CJ,X:IJ,S:kJ,M:OJ};function jJ(){var l=$l.f(),u=Jy();return l||u}function _J(l){var u=rt(l);u!==null&&u.tag===5&&u.type==="form"?Ck(u):$l.r(l)}var hh=typeof document>"u"?null:document;function fI(l,u,f){var g=hh;if(g&&typeof u=="string"&&u){var b=Ct(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),hI.has(b)||(hI.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),ms(u,"link",l),xr(u),g.head.appendChild(u)))}}function TJ(l){$l.D(l),fI("dns-prefetch",l,null)}function AJ(l,u){$l.C(l,u),fI("preconnect",l,u)}function EJ(l,u,f){$l.L(l,u,f);var g=hh;if(g&&l&&u){var b='link[rel="preload"][as="'+Ct(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Ct(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Ct(f.imageSizes)+'"]')):b+='[href="'+Ct(l)+'"]';var j=b;switch(u){case"style":j=fh(l);break;case"script":j=ph(l)}Qi.has(j)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Qi.set(j,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(Hp(j))||u==="script"&&g.querySelector(Gp(j))||(u=g.createElement("link"),ms(u,"link",l),xr(u),g.head.appendChild(u)))}}function CJ(l,u){$l.m(l,u);var f=hh;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+Ct(g)+'"][href="'+Ct(l)+'"]',j=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=ph(l)}if(!Qi.has(j)&&(l=m({rel:"modulepreload",href:l},u),Qi.set(j,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Gp(j)))return}g=f.createElement("link"),ms(g,"link",l),xr(g),f.head.appendChild(g)}}}function kJ(l,u,f){$l.S(l,u,f);var g=hh;if(g&&l){var b=Yt(g).hoistableStyles,j=fh(l);u=u||"default";var V=b.get(j);if(!V){var J={loading:0,preload:null};if(V=g.querySelector(Hp(j)))J.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Qi.get(j))&&W5(l,f);var ue=V=g.createElement("link");xr(ue),ms(ue,"link",l),ue._p=new Promise(function(Ie,He){ue.onload=Ie,ue.onerror=He}),ue.addEventListener("load",function(){J.loading|=1}),ue.addEventListener("error",function(){J.loading|=2}),J.loading|=4,l1(V,u,g)}V={type:"stylesheet",instance:V,count:1,state:J},b.set(j,V)}}}function IJ(l,u){$l.X(l,u);var f=hh;if(f&&l){var g=Yt(f).hoistableScripts,b=ph(l),j=g.get(b);j||(j=f.querySelector(Gp(b)),j||(l=m({src:l,async:!0},u),(u=Qi.get(b))&&K5(l,u),j=f.createElement("script"),xr(j),ms(j,"link",l),f.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},g.set(b,j))}}function OJ(l,u){$l.M(l,u);var f=hh;if(f&&l){var g=Yt(f).hoistableScripts,b=ph(l),j=g.get(b);j||(j=f.querySelector(Gp(b)),j||(l=m({src:l,async:!0,type:"module"},u),(u=Qi.get(b))&&K5(l,u),j=f.createElement("script"),xr(j),ms(j,"link",l),f.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},g.set(b,j))}}function pI(l,u,f,g){var b=(b=Ue.current)?o1(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=fh(f.href),f=Yt(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=fh(f.href);var j=Yt(b).hoistableStyles,V=j.get(l);if(V||(b=b.ownerDocument||b,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(l,V),(j=b.querySelector(Hp(l)))&&!j._p&&(V.instance=j,V.state.loading=5),Qi.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Qi.set(l,f),j||RJ(b,l,f,V.state))),u&&g===null)throw Error(n(528,""));return V}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ph(f),f=Yt(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function fh(l){return'href="'+Ct(l)+'"'}function Hp(l){return'link[rel="stylesheet"]['+l+"]"}function mI(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function RJ(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),ms(u,"link",f),xr(u),l.head.appendChild(u))}function ph(l){return'[src="'+Ct(l)+'"]'}function Gp(l){return"script[async]"+l}function gI(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+Ct(f.href)+'"]');if(g)return u.instance=g,xr(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),xr(g),ms(g,"style",b),l1(g,f.precedence,l),u.instance=g;case"stylesheet":b=fh(f.href);var j=l.querySelector(Hp(b));if(j)return u.state.loading|=4,u.instance=j,xr(j),j;g=mI(f),(b=Qi.get(b))&&W5(g,b),j=(l.ownerDocument||l).createElement("link"),xr(j);var V=j;return V._p=new Promise(function(J,ue){V.onload=J,V.onerror=ue}),ms(j,"link",g),u.state.loading|=4,l1(j,f.precedence,l),u.instance=j;case"script":return j=ph(f.src),(b=l.querySelector(Gp(j)))?(u.instance=b,xr(b),b):(g=f,(b=Qi.get(j))&&(g=m({},f),K5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),xr(b),ms(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,l1(g,f.precedence,l));return u.instance}function l1(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,j=b,V=0;V<g.length;V++){var J=g[V];if(J.dataset.precedence===u)j=J;else if(j!==b)break}j?j.parentNode.insertBefore(l,j.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function W5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function K5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var c1=null;function xI(l,u,f){if(c1===null){var g=new Map,b=c1=new Map;b.set(f,g)}else b=c1,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var j=f[b];if(!(j[Ns]||j[on]||l==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var V=j.getAttribute(u)||"";V=l+V;var J=g.get(V);J?J.push(j):g.set(V,[j])}}return g}function yI(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function MJ(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function vI(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function DJ(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=fh(g.href),j=u.querySelector(Hp(b));if(j){u=j._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=u1.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=j,xr(j);return}j=u.ownerDocument||u,g=mI(g),(b=Qi.get(b))&&W5(g,b),j=j.createElement("link"),xr(j);var V=j;V._p=new Promise(function(J,ue){V.onload=J,V.onerror=ue}),ms(j,"link",g),f.instance=j}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=u1.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var Q5=0;function PJ(l,u){return l.stylesheets&&l.count===0&&h1(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&h1(l,l.stylesheets),l.unsuspend){var j=l.unsuspend;l.unsuspend=null,j()}},6e4+u);0<l.imgBytes&&Q5===0&&(Q5=62500*gJ());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&h1(l,l.stylesheets),l.unsuspend)){var j=l.unsuspend;l.unsuspend=null,j()}},(l.imgBytes>Q5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function u1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)h1(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var d1=null;function h1(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,d1=new Map,u.forEach(LJ,l),d1=null,u1.call(l))}function LJ(l,u){if(!(u.state.loading&4)){var f=d1.get(l);if(f)var g=f.get(null);else{f=new Map,d1.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<b.length;j++){var V=b[j];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(f.set(V.dataset.precedence,V),g=V)}g&&f.set(null,g)}b=u.instance,V=b.getAttribute("data-precedence"),j=f.get(V)||g,j===g&&f.set(null,b),f.set(V,b),this.count++,g=u1.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),j?j.parentNode.insertBefore(b,j.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var Wp={$$typeof:O,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function BJ(l,u,f,g,b,j,V,J,ue){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.hiddenUpdates=Wr(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=j,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function bI(l,u,f,g,b,j,V,J,ue,Ie,He,Je){return l=new BJ(l,u,f,V,ue,Ie,He,Je,J),u=1,j===!0&&(u|=24),j=wi(3,null,null,u),l.current=j,j.stateNode=l,u=E4(),u.refCount++,l.pooledCache=u,u.refCount++,j.memoizedState={element:g,isDehydrated:f,cache:u},O4(j),l}function wI(l){return l?(l=H0,l):H0}function SI(l,u,f,g,b,j){b=wI(b),g.context===null?g.context=b:g.pendingContext=b,g=Vc(u),g.payload={element:f},j=j===void 0?null:j,j!==null&&(g.callback=j),f=Fc(l,g,u),f!==null&&(Zs(f,l,u),_p(f,l,u))}function NI(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function X5(l,u){NI(l,u),(l=l.alternate)&&NI(l,u)}function jI(l){if(l.tag===13||l.tag===31){var u=ud(l,67108864);u!==null&&Zs(u,l,67108864),X5(l,67108864)}}function _I(l){if(l.tag===13||l.tag===31){var u=Ti();u=cs(u);var f=ud(l,u);f!==null&&Zs(f,l,u),X5(l,u)}}var f1=!0;function $J(l,u,f,g){var b=H.T;H.T=null;var j=ee.p;try{ee.p=2,Y5(l,u,f,g)}finally{ee.p=j,H.T=b}}function zJ(l,u,f,g){var b=H.T;H.T=null;var j=ee.p;try{ee.p=8,Y5(l,u,f,g)}finally{ee.p=j,H.T=b}}function Y5(l,u,f,g){if(f1){var b=J5(g);if(b===null)L5(l,u,g,p1,f),AI(l,g);else if(VJ(b,l,u,f,g))g.stopPropagation();else if(AI(l,g),u&4&&-1<UJ.indexOf(l)){for(;b!==null;){var j=rt(b);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var V=Vt(j.pendingLanes);if(V!==0){var J=j;for(J.pendingLanes|=2,J.entangledLanes|=2;V;){var ue=1<<31-tt(V);J.entanglements[1]|=ue,V&=~ue}Ho(j),(rn&6)===0&&(Xy=We()+500,Up(0))}}break;case 31:case 13:J=ud(j,2),J!==null&&Zs(J,j,2),Jy(),X5(j,2)}if(j=J5(g),j===null&&L5(l,u,g,p1,f),j===b)break;b=j}b!==null&&g.stopPropagation()}else L5(l,u,g,null,f)}}function J5(l){return l=$o(l),Z5(l)}var p1=null;function Z5(l){if(p1=null,l=pe(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return p1=l,null}function TI(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case Ze:return 2;case et:return 8;case Et:case wt:return 32;case pr:return 268435456;default:return 32}default:return 32}}var e3=!1,eu=null,tu=null,ru=null,Kp=new Map,Qp=new Map,nu=[],UJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AI(l,u){switch(l){case"focusin":case"focusout":eu=null;break;case"dragenter":case"dragleave":tu=null;break;case"mouseover":case"mouseout":ru=null;break;case"pointerover":case"pointerout":Kp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qp.delete(u.pointerId)}}function Xp(l,u,f,g,b,j){return l===null||l.nativeEvent!==j?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:j,targetContainers:[b]},u!==null&&(u=rt(u),u!==null&&jI(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function VJ(l,u,f,g,b){switch(u){case"focusin":return eu=Xp(eu,l,u,f,g,b),!0;case"dragenter":return tu=Xp(tu,l,u,f,g,b),!0;case"mouseover":return ru=Xp(ru,l,u,f,g,b),!0;case"pointerover":var j=b.pointerId;return Kp.set(j,Xp(Kp.get(j)||null,l,u,f,g,b)),!0;case"gotpointercapture":return j=b.pointerId,Qp.set(j,Xp(Qp.get(j)||null,l,u,f,g,b)),!0}return!1}function EI(l){var u=pe(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,us(l.priority,function(){_I(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,us(l.priority,function(){_I(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function m1(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=J5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);wr=g,f.target.dispatchEvent(g),wr=null}else return u=rt(f),u!==null&&jI(u),l.blockedOn=f,!1;u.shift()}return!0}function CI(l,u,f){m1(l)&&f.delete(u)}function FJ(){e3=!1,eu!==null&&m1(eu)&&(eu=null),tu!==null&&m1(tu)&&(tu=null),ru!==null&&m1(ru)&&(ru=null),Kp.forEach(CI),Qp.forEach(CI)}function g1(l,u){l.blockedOn===u&&(l.blockedOn=null,e3||(e3=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,FJ)))}var x1=null;function kI(l){x1!==l&&(x1=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){x1===l&&(x1=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(Z5(g||f)===null)continue;break}var j=rt(f);j!==null&&(l.splice(u,3),u-=3,J4(j,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function mh(l){function u(ue){return g1(ue,l)}eu!==null&&g1(eu,l),tu!==null&&g1(tu,l),ru!==null&&g1(ru,l),Kp.forEach(u),Qp.forEach(u);for(var f=0;f<nu.length;f++){var g=nu[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<nu.length&&(f=nu[0],f.blockedOn===null);)EI(f),f.blockedOn===null&&nu.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],j=f[g+1],V=b[wn]||null;if(typeof j=="function")V||kI(f);else if(V){var J=null;if(j&&j.hasAttribute("formAction")){if(b=j,V=j[wn]||null)J=V.formAction;else if(Z5(b)!==null)continue}else J=V.action;typeof J=="function"?f[g+1]=J:(f.splice(g,3),g-=3),kI(f)}}}function II(){function l(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(V){return b=V})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function t3(l){this._internalRoot=l}y1.prototype.render=t3.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=Ti();SI(f,g,l,u,null,null)},y1.prototype.unmount=t3.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;SI(l.current,2,null,l,null,null),Jy(),u[kn]=null}};function y1(l){this._internalRoot=l}y1.prototype.unstable_scheduleHydration=function(l){if(l){var u=bn();l={blockedOn:null,target:l,priority:u};for(var f=0;f<nu.length&&u!==0&&u<nu[f].priority;f++);nu.splice(f,0,l),f===0&&EI(l)}};var OI=e.version;if(OI!=="19.2.4")throw Error(n(527,OI,"19.2.4"));ee.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var qJ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var v1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!v1.isDisabled&&v1.supportsFiber)try{jt=v1.inject(qJ),Pt=v1}catch{}}return Jp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=$k,j=zk,V=Uk;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(j=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError)),u=bI(l,1,!1,null,null,f,g,null,b,j,V,II),l[kn]=u.current,P5(l),new t3(u)},Jp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",j=$k,V=zk,J=Uk,ue=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(j=f.onUncaughtError),f.onCaughtError!==void 0&&(V=f.onCaughtError),f.onRecoverableError!==void 0&&(J=f.onRecoverableError),f.formState!==void 0&&(ue=f.formState)),u=bI(l,1,!0,u,f??null,g,b,ue,j,V,J,II),u.context=wI(null),f=u.current,g=Ti(),g=cs(g),b=Vc(g),b.callback=null,Fc(f,b,g),f=g,u.current.lanes=f,yn(u,f),Ho(u),l[kn]=u.current,P5(l),new y1(u)},Jp.version="19.2.4",Jp}var FI;function rZ(){if(FI)return a3.exports;FI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),a3.exports=tZ(),a3.exports}var nZ=rZ();const aZ=nn(nZ);var Fa=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Fa||{});const Dr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Ua=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(Ua||{});const x_={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},qI=[1.5,1.4,1.3,1.2,1.1],Ym=5,Jm=1;function sZ(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function cv(t,e){const r=new Set;return t.forEach(n=>{const a=sZ(n,e);a&&r.add(a)}),Array.from(r).sort()}const iZ=[{id:"participation",name:"Participation",icon:"",xpAmount:25,fluxAmount:5,color:"blue"},{id:"helping",name:"Helping Others",icon:"",xpAmount:30,fluxAmount:10,color:"green"},{id:"leadership",name:"Leadership",icon:"",xpAmount:35,fluxAmount:10,color:"amber"},{id:"focus",name:"Great Focus",icon:"",xpAmount:20,fluxAmount:5,color:"purple"},{id:"creativity",name:"Creativity",icon:"",xpAmount:30,fluxAmount:8,color:"pink"},{id:"perseverance",name:"Perseverance",icon:"",xpAmount:25,fluxAmount:5,color:"orange"}];var HI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},oZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},OV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let x=(c&15)<<2|h>>6,y=h&63;d||(y=64,o||(x=64)),n.push(r[p],r[m],r[x],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new lZ;const x=i<<2|c>>4;if(n.push(x),h!==64){const y=c<<4&240|h>>2;if(n.push(y),m!==64){const S=h<<6&192|m;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cZ=function(t){const e=IV(t);return OV.encodeByteArray(e,!0)},kv=function(t){return cZ(t).replace(/\./g,"")},RV=function(t){try{return OV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dZ=()=>uZ().__FIREBASE_DEFAULTS__,hZ=()=>{if(typeof process>"u"||typeof HI>"u")return;const t=HI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RV(t[1]);return e&&JSON.parse(e)},A2=()=>{try{return dZ()||hZ()||fZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MV=t=>{var e,r;return(r=(e=A2())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},DV=t=>{const e=MV(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},PV=()=>{var t;return(t=A2())===null||t===void 0?void 0:t.config},LV=t=>{var e;return(e=A2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kv(JSON.stringify(r)),kv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ka())}function xZ(){var t;const e=(t=A2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wZ(){const t=Ka();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BV(){return!xZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $V(){try{return typeof indexedDB=="object"}catch{return!1}}function SZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NZ="FirebaseError";class Do extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=NZ,Object.setPrototypeOf(this,Do.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ux.prototype.create)}}class ux{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?jZ(i,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new Do(a,c,n)}}function jZ(t,e){return t.replace(_Z,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const _Z=/\{\$([^}]+)}/g;function TZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=e[a];if(GI(i)&&GI(o)){if(!Yh(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function GI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function AZ(t,e){const r=new EZ(t,e);return r.subscribe.bind(r)}class EZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");CZ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=l3),a.error===void 0&&(a.error=l3),a.complete===void 0&&(a.complete=l3);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function l3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t){return t&&t._delegate?t._delegate:t}class dc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new pZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OZ(e))try{this.getOrInitializeService({instanceIdentifier:Id})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Id){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Id){return this.instances.has(e)}getOptions(e=Id){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:IZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Id){return this.component?this.component.multipleInstances?e:Id:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IZ(t){return t===Id?void 0:t}function OZ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new kZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pr||(Pr={}));const MZ={debug:Pr.DEBUG,verbose:Pr.VERBOSE,info:Pr.INFO,warn:Pr.WARN,error:Pr.ERROR,silent:Pr.SILENT},DZ=Pr.INFO,PZ={[Pr.DEBUG]:"log",[Pr.VERBOSE]:"log",[Pr.INFO]:"info",[Pr.WARN]:"warn",[Pr.ERROR]:"error"},LZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=PZ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class QA{constructor(e){this.name=e,this._logLevel=DZ,this._logHandler=LZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pr.DEBUG,...e),this._logHandler(this,Pr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pr.VERBOSE,...e),this._logHandler(this,Pr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pr.INFO,...e),this._logHandler(this,Pr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pr.WARN,...e),this._logHandler(this,Pr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pr.ERROR,...e),this._logHandler(this,Pr.ERROR,...e)}}const BZ=(t,e)=>e.some(r=>t instanceof r);let WI,KI;function $Z(){return WI||(WI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zZ(){return KI||(KI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zV=new WeakMap,y_=new WeakMap,UV=new WeakMap,c3=new WeakMap,XA=new WeakMap;function UZ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(Cu(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&zV.set(r,t)}).catch(()=>{}),XA.set(e,t),e}function VZ(t){if(y_.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});y_.set(t,e)}let v_={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return y_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UV.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Cu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FZ(t){v_=t(v_)}function qZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(u3(this),e,...r);return UV.set(n,e.sort?e.sort():[e]),Cu(n)}:zZ().includes(t)?function(...e){return t.apply(u3(this),e),Cu(zV.get(this))}:function(...e){return Cu(t.apply(u3(this),e))}}function HZ(t){return typeof t=="function"?qZ(t):(t instanceof IDBTransaction&&VZ(t),BZ(t,$Z())?new Proxy(t,v_):t)}function Cu(t){if(t instanceof IDBRequest)return UZ(t);if(c3.has(t))return c3.get(t);const e=HZ(t);return e!==t&&(c3.set(t,e),XA.set(e,t)),e}const u3=t=>XA.get(t);function GZ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),c=Cu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Cu(o.result),d.oldVersion,d.newVersion,Cu(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const WZ=["get","getKey","getAll","getAllKeys","count"],KZ=["put","add","delete","clear"],d3=new Map;function QI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(d3.get(e))return d3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=KZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||WZ.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return d3.set(e,i),i}FZ(t=>({...t,get:(e,r,n)=>QI(e,r)||t.get(e,r,n),has:(e,r)=>!!QI(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(XZ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function XZ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const b_="@firebase/app",XI="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new QA("@firebase/app"),YZ="@firebase/app-compat",JZ="@firebase/analytics-compat",ZZ="@firebase/analytics",eee="@firebase/app-check-compat",tee="@firebase/app-check",ree="@firebase/auth",nee="@firebase/auth-compat",aee="@firebase/database",see="@firebase/data-connect",iee="@firebase/database-compat",oee="@firebase/functions",lee="@firebase/functions-compat",cee="@firebase/installations",uee="@firebase/installations-compat",dee="@firebase/messaging",hee="@firebase/messaging-compat",fee="@firebase/performance",pee="@firebase/performance-compat",mee="@firebase/remote-config",gee="@firebase/remote-config-compat",xee="@firebase/storage",yee="@firebase/storage-compat",vee="@firebase/firestore",bee="@firebase/vertexai-preview",wee="@firebase/firestore-compat",See="firebase",Nee="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="[DEFAULT]",jee={[b_]:"fire-core",[YZ]:"fire-core-compat",[ZZ]:"fire-analytics",[JZ]:"fire-analytics-compat",[tee]:"fire-app-check",[eee]:"fire-app-check-compat",[ree]:"fire-auth",[nee]:"fire-auth-compat",[aee]:"fire-rtdb",[see]:"fire-data-connect",[iee]:"fire-rtdb-compat",[oee]:"fire-fn",[lee]:"fire-fn-compat",[cee]:"fire-iid",[uee]:"fire-iid-compat",[dee]:"fire-fcm",[hee]:"fire-fcm-compat",[fee]:"fire-perf",[pee]:"fire-perf-compat",[mee]:"fire-rc",[gee]:"fire-rc-compat",[xee]:"fire-gcs",[yee]:"fire-gcs-compat",[vee]:"fire-fst",[wee]:"fire-fst-compat",[bee]:"fire-vertex","fire-js":"fire-js",[See]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map,_ee=new Map,S_=new Map;function YI(t,e){try{t.container.addComponent(e)}catch(r){hc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Lu(t){const e=t.name;if(S_.has(e))return hc.debug(`There were multiple attempts to register component ${e}.`),!1;S_.set(e,t);for(const r of Iv.values())YI(r,t);for(const r of _ee.values())YI(r,t);return!0}function hx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ql(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ku=new ux("app","Firebase",Tee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aee{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new dc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ku.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=Nee;function VV(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:w_,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw ku.create("bad-app-name",{appName:String(a)});if(r||(r=PV()),!r)throw ku.create("no-options");const i=Iv.get(a);if(i){if(Yh(r,i.options)&&Yh(n,i.config))return i;throw ku.create("duplicate-app",{appName:a})}const o=new RZ(a);for(const d of S_.values())o.addComponent(d);const c=new Aee(r,n,o);return Iv.set(a,c),c}function YA(t=w_){const e=Iv.get(t);if(!e&&t===w_&&PV())return VV();if(!e)throw ku.create("no-app",{appName:t});return e}function ao(t,e,r){var n;let a=(n=jee[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hc.warn(c.join(" "));return}Lu(new dc(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eee="firebase-heartbeat-database",Cee=1,Zm="firebase-heartbeat-store";let h3=null;function FV(){return h3||(h3=GZ(Eee,Cee,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zm)}catch(r){console.warn(r)}}}}).catch(t=>{throw ku.create("idb-open",{originalErrorMessage:t.message})})),h3}async function kee(t){try{const r=(await FV()).transaction(Zm),n=await r.objectStore(Zm).get(qV(t));return await r.done,n}catch(e){if(e instanceof Do)hc.warn(e.message);else{const r=ku.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hc.warn(r.message)}}}async function JI(t,e){try{const n=(await FV()).transaction(Zm,"readwrite");await n.objectStore(Zm).put(e,qV(t)),await n.done}catch(r){if(r instanceof Do)hc.warn(r.message);else{const n=ku.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});hc.warn(n.message)}}}function qV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iee=1024,Oee=720*60*60*1e3;class Ree{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Dee(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ZI();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=Oee}),this._storage.overwrite(this._heartbeatsCache))}catch(n){hc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=ZI(),{heartbeatsToSend:n,unsentEntries:a}=Mee(this._heartbeatsCache.heartbeats),i=kv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return hc.warn(r),""}}}function ZI(){return new Date().toISOString().substring(0,10)}function Mee(t,e=Iee){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),eO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),eO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Dee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $V()?SZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await kee(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return JI(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return JI(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function eO(t){return kv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pee(t){Lu(new dc("platform-logger",e=>new QZ(e),"PRIVATE")),Lu(new dc("heartbeat",e=>new Ree(e),"PRIVATE")),ao(b_,XI,t),ao(b_,XI,"esm2017"),ao("fire-js","")}Pee("");var Lee="firebase",Bee="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao(Lee,Bee,"app");function JA(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function HV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $ee=HV,GV=new ux("auth","Firebase",HV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new QA("@firebase/auth");function zee(t,...e){Ov.logLevel<=Pr.WARN&&Ov.warn(`Auth (${T0}): ${t}`,...e)}function uv(t,...e){Ov.logLevel<=Pr.ERROR&&Ov.error(`Auth (${T0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,...e){throw eE(t,...e)}function Io(t,...e){return eE(t,...e)}function ZA(t,e,r){const n=Object.assign(Object.assign({},$ee()),{[e]:r});return new ux("auth","Firebase",n).create(e,{appName:t.name})}function Kd(t){return ZA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uee(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&sl(t,"argument-error"),ZA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function eE(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return GV.create(t,...e)}function nr(t,e,...r){if(!t)throw eE(e,...r)}function Xl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uv(e),new Error(e)}function fc(t,e){t||Xl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Vee(){return tO()==="http:"||tO()==="https:"}function tO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vee()||vZ()||"connection"in navigator)?navigator.onLine:!0}function qee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,r){this.shortDelay=e,this.longDelay=r,fc(r>e,"Short delay should be less than long delay!"),this.isMobile=gZ()||bZ()}get(){return Fee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e){fc(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gee=new fx(3e4,6e4);function rE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zf(t,e,r,n,a={}){return KV(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=dx(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return yZ()||(h.referrerPolicy="no-referrer"),WV.fetch()(QV(t,t.config.apiHost,r,c),h)})}async function KV(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Hee),e);try{const a=new Kee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw w1(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw w1(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw w1(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw w1(t,"user-disabled",o);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ZA(t,p,h);sl(t,p)}}catch(a){if(a instanceof Do)throw a;sl(t,"network-request-failed",{message:String(a)})}}async function Wee(t,e,r,n,a={}){const i=await zf(t,e,r,n,a);return"mfaPendingCredential"in i&&sl(t,"multi-factor-auth-required",{_serverResponse:i}),i}function QV(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?tE(t.config,a):`${t.config.apiScheme}://${a}`}class Kee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Io(this.auth,"network-request-failed")),Gee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function w1(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Io(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qee(t,e){return zf(t,"POST","/v1/accounts:delete",e)}async function XV(t,e){return zf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Xee(t,e=!1){const r=Cn(t),n=await r.getIdToken(e),a=nE(n);nr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:Em(f3(a.auth_time)),issuedAtTime:Em(f3(a.iat)),expirationTime:Em(f3(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function f3(t){return Number(t)*1e3}function nE(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return uv("JWT malformed, contained fewer than 3 sections"),null;try{const a=RV(r);return a?JSON.parse(a):(uv("Failed to decode base64 JWT payload"),null)}catch(a){return uv("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function rO(t){const e=nE(t);return nr(e,"internal-error"),nr(typeof e.exp<"u","internal-error"),nr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Do&&Yee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Yee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Em(this.lastLoginAt),this.creationTime=Em(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rv(t){var e;const r=t.auth,n=await t.getIdToken(),a=await eg(t,XV(r,{idToken:n}));nr(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?YV(i.providerUserInfo):[],c=ete(t.providerData,o),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new j_(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Zee(t){const e=Cn(t);await Rv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ete(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function YV(t){return t.map(e=>{var{providerId:r}=e,n=JA(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tte(t,e){const r=await KV(t,{},async()=>{const n=dx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=QV(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",WV.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function rte(t,e){return zf(t,"POST","/v2/accounts:revokeToken",rE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nr(e.idToken,"internal-error"),nr(typeof e.idToken<"u","internal-error"),nr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){nr(e.length!==0,"internal-error");const r=rO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(nr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await tte(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,o=new Ph;return n&&(nr(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(nr(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(nr(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ph,this.toJSON())}_performRefresh(){return Xl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e){nr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=JA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new j_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await eg(this,this.stsTokenManager.getToken(this.auth,e));return nr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Xee(this,e)}reload(){return Zee(this)}_assign(e){this!==e&&(nr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Yl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Rv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ql(this.auth.app))return Promise.reject(Kd(this.auth));const e=await this.getIdToken();return await eg(this,Qee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,o,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,x=(a=r.email)!==null&&a!==void 0?a:void 0,y=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=r.photoURL)!==null&&o!==void 0?o:void 0,N=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,T=(h=r.createdAt)!==null&&h!==void 0?h:void 0,C=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:O,emailVerified:L,isAnonymous:I,providerData:R,stsTokenManager:A}=r;nr(O&&A,e,"internal-error");const E=Ph.fromJSON(this.name,A);nr(typeof O=="string",e,"internal-error"),su(m,e.name),su(x,e.name),nr(typeof L=="boolean",e,"internal-error"),nr(typeof I=="boolean",e,"internal-error"),su(y,e.name),su(S,e.name),su(N,e.name),su(w,e.name),su(T,e.name),su(C,e.name);const k=new Yl({uid:O,auth:e,email:x,emailVerified:L,displayName:m,isAnonymous:I,photoURL:S,phoneNumber:y,tenantId:N,stsTokenManager:E,createdAt:T,lastLoginAt:C});return R&&Array.isArray(R)&&(k.providerData=R.map(U=>Object.assign({},U))),w&&(k._redirectEventId=w),k}static async _fromIdTokenResponse(e,r,n=!1){const a=new Ph;a.updateFromServerResponse(r);const i=new Yl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Rv(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];nr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?YV(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new Ph;c.updateFromIdToken(n);const d=new Yl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new j_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new Map;function Jl(t){fc(t instanceof Function,"Expected a class definition");let e=nO.get(t);return e?(fc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}JV.type="NONE";const aO=JV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,e,r){return`firebase:${t}:${e}:${r}`}class Lh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=dv(this.userKey,a.apiKey,i),this.fullPersistenceKey=dv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Lh(Jl(aO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Jl(aO);const o=dv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(o);if(p){const m=Yl._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Lh(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Lh(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aF(e))return"Blackberry";if(sF(e))return"Webos";if(eF(e))return"Safari";if((e.includes("chrome/")||tF(e))&&!e.includes("edge/"))return"Chrome";if(nF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function ZV(t=Ka()){return/firefox\//i.test(t)}function eF(t=Ka()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tF(t=Ka()){return/crios\//i.test(t)}function rF(t=Ka()){return/iemobile/i.test(t)}function nF(t=Ka()){return/android/i.test(t)}function aF(t=Ka()){return/blackberry/i.test(t)}function sF(t=Ka()){return/webos/i.test(t)}function aE(t=Ka()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nte(t=Ka()){var e;return aE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ate(){return wZ()&&document.documentMode===10}function iF(t=Ka()){return aE(t)||nF(t)||sF(t)||aF(t)||/windows phone/i.test(t)||rF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e=[]){let r;switch(t){case"Browser":r=sO(Ka());break;case"Worker":r=`${sO(Ka())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${T0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ste{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ite(t,e={}){return zf(t,"GET","/v2/passwordPolicy",rE(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote=6;class lte{constructor(e){var r,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:ote,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cte{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iO(this),this.idTokenSubscription=new iO(this),this.beforeStateQueue=new ste(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Jl(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Lh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await XV(this,{idToken:e}),n=await Yl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ql(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return nr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Rv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ql(this.app))return Promise.reject(Kd(this));const r=e?Cn(e):null;return r&&nr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&nr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ql(this.app)?Promise.reject(Kd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ql(this.app)?Promise.reject(Kd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ite(this),r=new lte(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ux("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await rte(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Jl(e)||this._popupRedirectResolver;nr(r,this,"argument-error"),this.redirectPersistenceManager=await Lh.create(this,[Jl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(nr(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&zee(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function E2(t){return Cn(t)}class iO{constructor(e){this.auth=e,this.observer=null,this.addObserver=AZ(r=>this.observer=r)}get next(){return nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ute(t){sE=t}function dte(t){return sE.loadJS(t)}function hte(){return sE.gapiScript}function fte(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pte(t,e){const r=hx(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(Yh(i,e??{}))return a;sl(a,"already-initialized")}return r.initialize({options:e})}function mte(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Jl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function gte(t,e,r){const n=E2(t);nr(n._canInitEmulator,n,"emulator-config-failed"),nr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=lF(e),{host:o,port:c}=xte(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),yte()}function lF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xte(t){const e=lF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:oO(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:oO(o)}}}function oO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yte(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Xl("not implemented")}_getIdTokenResponse(e){return Xl("not implemented")}_linkToIdToken(e,r){return Xl("not implemented")}_getReauthenticationResolver(e){return Xl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t,e){return Wee(t,"POST","/v1/accounts:signInWithIdp",rE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte="http://localhost";class Zd extends cF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Zd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):sl("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=JA(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Zd(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Bh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Bh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Bh(e,r)}buildRequest(){const e={requestUri:vte,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=dx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px extends iE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends px{constructor(){super("facebook.com")}static credential(e){return Zd._fromParams({providerId:fu.PROVIDER_ID,signInMethod:fu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fu.credentialFromTaggedObject(e)}static credentialFromError(e){return fu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fu.credential(e.oauthAccessToken)}catch{return null}}}fu.FACEBOOK_SIGN_IN_METHOD="facebook.com";fu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends px{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Zd._fromParams({providerId:Wl.PROVIDER_ID,signInMethod:Wl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Wl.credentialFromTaggedObject(e)}static credentialFromError(e){return Wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Wl.credential(r,n)}catch{return null}}}Wl.GOOGLE_SIGN_IN_METHOD="google.com";Wl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends px{constructor(){super("github.com")}static credential(e){return Zd._fromParams({providerId:pu.PROVIDER_ID,signInMethod:pu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pu.credentialFromTaggedObject(e)}static credentialFromError(e){return pu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pu.credential(e.oauthAccessToken)}catch{return null}}}pu.GITHUB_SIGN_IN_METHOD="github.com";pu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends px{constructor(){super("twitter.com")}static credential(e,r){return Zd._fromParams({providerId:mu.PROVIDER_ID,signInMethod:mu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return mu.credentialFromTaggedObject(e)}static credentialFromError(e){return mu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return mu.credential(r,n)}catch{return null}}}mu.TWITTER_SIGN_IN_METHOD="twitter.com";mu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await Yl._fromIdTokenResponse(e,n,a),o=lO(n);return new Jh({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=lO(n);return new Jh({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function lO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends Do{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Mv.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new Mv(e,r,n,a)}}function uF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Mv._fromErrorAndOperation(t,i,e,n):i})}async function bte(t,e,r=!1){const n=await eg(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Jh._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wte(t,e,r=!1){const{auth:n}=t;if(Ql(n.app))return Promise.reject(Kd(n));const a="reauthenticate";try{const i=await eg(t,uF(n,a,e,t),r);nr(i.idToken,n,"internal-error");const o=nE(i.idToken);nr(o,n,"internal-error");const{sub:c}=o;return nr(t.uid===c,n,"user-mismatch"),Jh._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sl(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ste(t,e,r=!1){if(Ql(t.app))return Promise.reject(Kd(t));const n="signIn",a=await uF(t,n,e),i=await Jh._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function Nte(t,e,r,n){return Cn(t).onIdTokenChanged(e,r,n)}function jte(t,e,r){return Cn(t).beforeAuthStateChanged(e,r)}function _te(t,e,r,n){return Cn(t).onAuthStateChanged(e,r,n)}function Tte(t){return Cn(t).signOut()}const Dv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Dv,"1"),this.storage.removeItem(Dv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ate=1e3,Ete=10;class hF extends dF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);ate()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Ete):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Ate)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}hF.type="LOCAL";const Cte=hF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF extends dF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}fF.type="SESSION";const pF=fF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kte(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new C2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,i)),d=await kte(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}C2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ite{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=oE("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(m){const x=m;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(){return window}function Ote(t){rl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(){return typeof rl().WorkerGlobalScope<"u"&&typeof rl().importScripts=="function"}async function Rte(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mte(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Dte(){return mF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF="firebaseLocalStorageDb",Pte=1,Pv="firebaseLocalStorage",xF="fbase_key";class mx{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function k2(t,e){return t.transaction([Pv],e?"readwrite":"readonly").objectStore(Pv)}function Lte(){const t=indexedDB.deleteDatabase(gF);return new mx(t).toPromise()}function __(){const t=indexedDB.open(gF,Pte);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Pv,{keyPath:xF})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Pv)?e(n):(n.close(),await Lte(),e(await __()))})})}async function cO(t,e,r){const n=k2(t,!0).put({[xF]:e,value:r});return new mx(n).toPromise()}async function Bte(t,e){const r=k2(t,!1).get(e),n=await new mx(r).toPromise();return n===void 0?null:n.value}function uO(t,e){const r=k2(t,!0).delete(e);return new mx(r).toPromise()}const $te=800,zte=3;class yF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await __(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>zte)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=C2._getInstance(Dte()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Rte(),!this.activeServiceWorker)return;this.sender=new Ite(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mte()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await __();return await cO(e,Dv,"1"),await uO(e,Dv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>cO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Bte(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>uO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=k2(a,!1).getAll();return new mx(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$te)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yF.type="LOCAL";const Ute=yF;new fx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t,e){return e?Jl(e):(nr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends cF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Bh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Bh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Vte(t){return Ste(t.auth,new lE(t),t.bypassAuthState)}function Fte(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),wte(r,new lE(t),t.bypassAuthState)}async function qte(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),bte(r,new lE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vte;case"linkViaPopup":case"linkViaRedirect":return qte;case"reauthViaPopup":case"reauthViaRedirect":return Fte;default:sl(this.auth,"internal-error")}}resolve(e){fc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hte=new fx(2e3,1e4);async function Gte(t,e,r){if(Ql(t.app))return Promise.reject(Io(t,"operation-not-supported-in-this-environment"));const n=E2(t);Uee(t,e,iE);const a=vF(n,r);return new zd(n,"signInViaPopup",e,a).executeNotNull()}class zd extends bF{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,zd.currentPopupAction&&zd.currentPopupAction.cancel(),zd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nr(e,this.auth,"internal-error"),e}async onExecution(){fc(this.filter.length===1,"Popup operations only handle one event");const e=oE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Io(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Io(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Io(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Hte.get())};e()}}zd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wte="pendingRedirect",hv=new Map;class Kte extends bF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=hv.get(this.auth._key());if(!e){try{const n=await Qte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}hv.set(this.auth._key(),e)}return this.bypassAuthState||hv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Qte(t,e){const r=Jte(e),n=Yte(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Xte(t,e){hv.set(t._key(),e)}function Yte(t){return Jl(t._redirectPersistence)}function Jte(t){return dv(Wte,t.config.apiKey,t.name)}async function Zte(t,e,r=!1){if(Ql(t.app))return Promise.reject(Kd(t));const n=E2(t),a=vF(n,e),o=await new Kte(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ere=600*1e3;class tre{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rre(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!wF(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Io(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ere&&this.cachedEventUids.clear(),this.cachedEventUids.has(dO(e))}saveEventToCache(e){this.cachedEventUids.add(dO(e)),this.lastProcessedEventTime=Date.now()}}function dO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rre(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nre(t,e={}){return zf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const are=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sre=/^https?/;async function ire(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nre(t);for(const r of e)try{if(ore(r))return}catch{}sl(t,"unauthorized-domain")}function ore(t){const e=N_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!sre.test(r))return!1;if(are.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lre=new fx(3e4,6e4);function hO(){const t=rl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function cre(t){return new Promise((e,r)=>{var n,a,i;function o(){hO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hO(),r(Io(t,"network-request-failed"))},timeout:lre.get()})}if(!((a=(n=rl().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=rl().gapi)===null||i===void 0)&&i.load)o();else{const c=fte("iframefcb");return rl()[c]=()=>{gapi.load?o():r(Io(t,"network-request-failed"))},dte(`${hte()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw fv=null,e})}let fv=null;function ure(t){return fv=fv||cre(t),fv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dre=new fx(5e3,15e3),hre="__/auth/iframe",fre="emulator/auth/iframe",pre={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mre=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gre(t){const e=t.config;nr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?tE(e,fre):`https://${t.config.authDomain}/${hre}`,n={apiKey:e.apiKey,appName:t.name,v:T0},a=mre.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${dx(n).slice(1)}`}async function xre(t){const e=await ure(t),r=rl().gapi;return nr(r,t,"internal-error"),e.open({where:document.body,url:gre(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pre,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=Io(t,"network-request-failed"),c=rl().setTimeout(()=>{i(o)},dre.get());function d(){rl().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yre={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vre=500,bre=600,wre="_blank",Sre="http://localhost";class fO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nre(t,e,r,n=vre,a=bre){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},yre),{width:n.toString(),height:a.toString(),top:i,left:o}),h=Ka().toLowerCase();r&&(c=tF(h)?wre:r),ZV(h)&&(e=e||Sre,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[y,S])=>`${x}${y}=${S},`,"");if(nte(h)&&c!=="_self")return jre(e||"",c),new fO(null);const m=window.open(e||"",c,p);nr(m,t,"popup-blocked");try{m.focus()}catch{}return new fO(m)}function jre(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _re="__/auth/handler",Tre="emulator/auth/handler",Are=encodeURIComponent("fac");async function pO(t,e,r,n,a,i){nr(t.config.authDomain,t,"auth-domain-config-required"),nr(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:T0,eventId:a};if(e instanceof iE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",TZ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof px){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${Are}=${encodeURIComponent(d)}`:"";return`${Ere(t)}?${dx(c).slice(1)}${h}`}function Ere({config:t}){return t.emulator?tE(t,Tre):`https://${t.authDomain}/${_re}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="webStorageSupport";class Cre{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pF,this._completeRedirectFn=Zte,this._overrideRedirectResult=Xte}async _openPopup(e,r,n,a){var i;fc((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await pO(e,r,n,N_(),a);return Nre(e,o,oE())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await pO(e,r,n,N_(),a);return Ote(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(fc(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await xre(e),n=new tre(e);return r.register("authEvent",a=>(nr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(p3,{type:p3},a=>{var i;const o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[p3];o!==void 0&&r(!!o),sl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=ire(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return iF()||eF()||aE()}}const kre=Cre;var mO="@firebase/auth",gO="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ire{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ore(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rre(t){Lu(new dc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;nr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oF(t)},h=new cte(n,a,i,d);return mte(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Lu(new dc("auth-internal",e=>{const r=E2(e.getProvider("auth").getImmediate());return(n=>new Ire(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(mO,gO,Ore(t)),ao(mO,gO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mre=300,Dre=LV("authIdTokenMaxAge")||Mre;let xO=null;const Pre=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Dre)return;const a=r==null?void 0:r.token;xO!==a&&(xO=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function T_(t=YA()){const e=hx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=pte(t,{popupRedirectResolver:kre,persistence:[Ute,Cte,pF]}),n=LV("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=Pre(i.toString());jte(r,o,()=>o(r.currentUser)),Nte(r,c=>o(c))}}const a=MV("auth");return a&&gte(r,`http://${a}`),r}function Lre(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ute({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=Io("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",Lre().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rre("Browser");var yO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qd,SF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function k(){}k.prototype=E.prototype,A.D=E.prototype,A.prototype=new k,A.prototype.constructor=A,A.C=function(U,P,$){for(var B=Array(arguments.length-2),G=2;G<arguments.length;G++)B[G-2]=arguments[G];return E.prototype[P].apply(U,B)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,E,k){k||(k=0);var U=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)U[P]=E.charCodeAt(k++)|E.charCodeAt(k++)<<8|E.charCodeAt(k++)<<16|E.charCodeAt(k++)<<24;else for(P=0;16>P;++P)U[P]=E[k++]|E[k++]<<8|E[k++]<<16|E[k++]<<24;E=A.g[0],k=A.g[1],P=A.g[2];var $=A.g[3],B=E+($^k&(P^$))+U[0]+3614090360&4294967295;E=k+(B<<7&4294967295|B>>>25),B=$+(P^E&(k^P))+U[1]+3905402710&4294967295,$=E+(B<<12&4294967295|B>>>20),B=P+(k^$&(E^k))+U[2]+606105819&4294967295,P=$+(B<<17&4294967295|B>>>15),B=k+(E^P&($^E))+U[3]+3250441966&4294967295,k=P+(B<<22&4294967295|B>>>10),B=E+($^k&(P^$))+U[4]+4118548399&4294967295,E=k+(B<<7&4294967295|B>>>25),B=$+(P^E&(k^P))+U[5]+1200080426&4294967295,$=E+(B<<12&4294967295|B>>>20),B=P+(k^$&(E^k))+U[6]+2821735955&4294967295,P=$+(B<<17&4294967295|B>>>15),B=k+(E^P&($^E))+U[7]+4249261313&4294967295,k=P+(B<<22&4294967295|B>>>10),B=E+($^k&(P^$))+U[8]+1770035416&4294967295,E=k+(B<<7&4294967295|B>>>25),B=$+(P^E&(k^P))+U[9]+2336552879&4294967295,$=E+(B<<12&4294967295|B>>>20),B=P+(k^$&(E^k))+U[10]+4294925233&4294967295,P=$+(B<<17&4294967295|B>>>15),B=k+(E^P&($^E))+U[11]+2304563134&4294967295,k=P+(B<<22&4294967295|B>>>10),B=E+($^k&(P^$))+U[12]+1804603682&4294967295,E=k+(B<<7&4294967295|B>>>25),B=$+(P^E&(k^P))+U[13]+4254626195&4294967295,$=E+(B<<12&4294967295|B>>>20),B=P+(k^$&(E^k))+U[14]+2792965006&4294967295,P=$+(B<<17&4294967295|B>>>15),B=k+(E^P&($^E))+U[15]+1236535329&4294967295,k=P+(B<<22&4294967295|B>>>10),B=E+(P^$&(k^P))+U[1]+4129170786&4294967295,E=k+(B<<5&4294967295|B>>>27),B=$+(k^P&(E^k))+U[6]+3225465664&4294967295,$=E+(B<<9&4294967295|B>>>23),B=P+(E^k&($^E))+U[11]+643717713&4294967295,P=$+(B<<14&4294967295|B>>>18),B=k+($^E&(P^$))+U[0]+3921069994&4294967295,k=P+(B<<20&4294967295|B>>>12),B=E+(P^$&(k^P))+U[5]+3593408605&4294967295,E=k+(B<<5&4294967295|B>>>27),B=$+(k^P&(E^k))+U[10]+38016083&4294967295,$=E+(B<<9&4294967295|B>>>23),B=P+(E^k&($^E))+U[15]+3634488961&4294967295,P=$+(B<<14&4294967295|B>>>18),B=k+($^E&(P^$))+U[4]+3889429448&4294967295,k=P+(B<<20&4294967295|B>>>12),B=E+(P^$&(k^P))+U[9]+568446438&4294967295,E=k+(B<<5&4294967295|B>>>27),B=$+(k^P&(E^k))+U[14]+3275163606&4294967295,$=E+(B<<9&4294967295|B>>>23),B=P+(E^k&($^E))+U[3]+4107603335&4294967295,P=$+(B<<14&4294967295|B>>>18),B=k+($^E&(P^$))+U[8]+1163531501&4294967295,k=P+(B<<20&4294967295|B>>>12),B=E+(P^$&(k^P))+U[13]+2850285829&4294967295,E=k+(B<<5&4294967295|B>>>27),B=$+(k^P&(E^k))+U[2]+4243563512&4294967295,$=E+(B<<9&4294967295|B>>>23),B=P+(E^k&($^E))+U[7]+1735328473&4294967295,P=$+(B<<14&4294967295|B>>>18),B=k+($^E&(P^$))+U[12]+2368359562&4294967295,k=P+(B<<20&4294967295|B>>>12),B=E+(k^P^$)+U[5]+4294588738&4294967295,E=k+(B<<4&4294967295|B>>>28),B=$+(E^k^P)+U[8]+2272392833&4294967295,$=E+(B<<11&4294967295|B>>>21),B=P+($^E^k)+U[11]+1839030562&4294967295,P=$+(B<<16&4294967295|B>>>16),B=k+(P^$^E)+U[14]+4259657740&4294967295,k=P+(B<<23&4294967295|B>>>9),B=E+(k^P^$)+U[1]+2763975236&4294967295,E=k+(B<<4&4294967295|B>>>28),B=$+(E^k^P)+U[4]+1272893353&4294967295,$=E+(B<<11&4294967295|B>>>21),B=P+($^E^k)+U[7]+4139469664&4294967295,P=$+(B<<16&4294967295|B>>>16),B=k+(P^$^E)+U[10]+3200236656&4294967295,k=P+(B<<23&4294967295|B>>>9),B=E+(k^P^$)+U[13]+681279174&4294967295,E=k+(B<<4&4294967295|B>>>28),B=$+(E^k^P)+U[0]+3936430074&4294967295,$=E+(B<<11&4294967295|B>>>21),B=P+($^E^k)+U[3]+3572445317&4294967295,P=$+(B<<16&4294967295|B>>>16),B=k+(P^$^E)+U[6]+76029189&4294967295,k=P+(B<<23&4294967295|B>>>9),B=E+(k^P^$)+U[9]+3654602809&4294967295,E=k+(B<<4&4294967295|B>>>28),B=$+(E^k^P)+U[12]+3873151461&4294967295,$=E+(B<<11&4294967295|B>>>21),B=P+($^E^k)+U[15]+530742520&4294967295,P=$+(B<<16&4294967295|B>>>16),B=k+(P^$^E)+U[2]+3299628645&4294967295,k=P+(B<<23&4294967295|B>>>9),B=E+(P^(k|~$))+U[0]+4096336452&4294967295,E=k+(B<<6&4294967295|B>>>26),B=$+(k^(E|~P))+U[7]+1126891415&4294967295,$=E+(B<<10&4294967295|B>>>22),B=P+(E^($|~k))+U[14]+2878612391&4294967295,P=$+(B<<15&4294967295|B>>>17),B=k+($^(P|~E))+U[5]+4237533241&4294967295,k=P+(B<<21&4294967295|B>>>11),B=E+(P^(k|~$))+U[12]+1700485571&4294967295,E=k+(B<<6&4294967295|B>>>26),B=$+(k^(E|~P))+U[3]+2399980690&4294967295,$=E+(B<<10&4294967295|B>>>22),B=P+(E^($|~k))+U[10]+4293915773&4294967295,P=$+(B<<15&4294967295|B>>>17),B=k+($^(P|~E))+U[1]+2240044497&4294967295,k=P+(B<<21&4294967295|B>>>11),B=E+(P^(k|~$))+U[8]+1873313359&4294967295,E=k+(B<<6&4294967295|B>>>26),B=$+(k^(E|~P))+U[15]+4264355552&4294967295,$=E+(B<<10&4294967295|B>>>22),B=P+(E^($|~k))+U[6]+2734768916&4294967295,P=$+(B<<15&4294967295|B>>>17),B=k+($^(P|~E))+U[13]+1309151649&4294967295,k=P+(B<<21&4294967295|B>>>11),B=E+(P^(k|~$))+U[4]+4149444226&4294967295,E=k+(B<<6&4294967295|B>>>26),B=$+(k^(E|~P))+U[11]+3174756917&4294967295,$=E+(B<<10&4294967295|B>>>22),B=P+(E^($|~k))+U[2]+718787259&4294967295,P=$+(B<<15&4294967295|B>>>17),B=k+($^(P|~E))+U[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(P+(B<<21&4294967295|B>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+$&4294967295}n.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var k=E-this.blockSize,U=this.B,P=this.h,$=0;$<E;){if(P==0)for(;$<=k;)a(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<E;)if(U[P++]=A.charCodeAt($++),P==this.blockSize){a(this,U),P=0;break}}else for(;$<E;)if(U[P++]=A[$++],P==this.blockSize){a(this,U),P=0;break}}this.h=P,this.o+=E},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var k=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=k&255,k/=256;for(this.u(A),A=Array(16),E=k=0;4>E;++E)for(var U=0;32>U;U+=8)A[k++]=this.g[E]>>>U&255;return A};function i(A,E){var k=c;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=E(A)}function o(A,E){this.h=E;for(var k=[],U=!0,P=A.length-1;0<=P;P--){var $=A[P]|0;U&&$==E||(k[P]=$,U=!1)}this.g=k}var c={};function d(A){return-128<=A&&128>A?i(A,function(E){return new o([E|0],0>E?-1:0)}):new o([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return w(h(-A));for(var E=[],k=1,U=0;A>=k;U++)E[U]=A/k|0,k*=4294967296;return new o(E,0)}function p(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return w(p(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=h(Math.pow(E,8)),U=m,P=0;P<A.length;P+=8){var $=Math.min(8,A.length-P),B=parseInt(A.substring(P,P+$),E);8>$?($=h(Math.pow(E,$)),U=U.j($).add(h(B))):(U=U.j(k),U=U.add(h(B)))}return U}var m=d(0),x=d(1),y=d(16777216);t=o.prototype,t.m=function(){if(N(this))return-w(this).m();for(var A=0,E=1,k=0;k<this.g.length;k++){var U=this.i(k);A+=(0<=U?U:4294967296+U)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(N(this))return"-"+w(this).toString(A);for(var E=h(Math.pow(A,6)),k=this,U="";;){var P=L(k,E).g;k=T(k,P.j(E));var $=((0<k.g.length?k.g[0]:k.h)>>>0).toString(A);if(k=P,S(k))return $+U;for(;6>$.length;)$="0"+$;U=$+U}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function N(A){return A.h==-1}t.l=function(A){return A=T(this,A),N(A)?-1:S(A)?0:1};function w(A){for(var E=A.g.length,k=[],U=0;U<E;U++)k[U]=~A.g[U];return new o(k,~A.h).add(x)}t.abs=function(){return N(this)?w(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),k=[],U=0,P=0;P<=E;P++){var $=U+(this.i(P)&65535)+(A.i(P)&65535),B=($>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);U=B>>>16,$&=65535,B&=65535,k[P]=B<<16|$}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(A,E){return A.add(w(E))}t.j=function(A){if(S(this)||S(A))return m;if(N(this))return N(A)?w(this).j(w(A)):w(w(this).j(A));if(N(A))return w(this.j(w(A)));if(0>this.l(y)&&0>A.l(y))return h(this.m()*A.m());for(var E=this.g.length+A.g.length,k=[],U=0;U<2*E;U++)k[U]=0;for(U=0;U<this.g.length;U++)for(var P=0;P<A.g.length;P++){var $=this.i(U)>>>16,B=this.i(U)&65535,G=A.i(P)>>>16,K=A.i(P)&65535;k[2*U+2*P]+=B*K,C(k,2*U+2*P),k[2*U+2*P+1]+=$*K,C(k,2*U+2*P+1),k[2*U+2*P+1]+=B*G,C(k,2*U+2*P+1),k[2*U+2*P+2]+=$*G,C(k,2*U+2*P+2)}for(U=0;U<E;U++)k[U]=k[2*U+1]<<16|k[2*U];for(U=E;U<2*E;U++)k[U]=0;return new o(k,0)};function C(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function O(A,E){this.g=A,this.h=E}function L(A,E){if(S(E))throw Error("division by zero");if(S(A))return new O(m,m);if(N(A))return E=L(w(A),E),new O(w(E.g),w(E.h));if(N(E))return E=L(A,w(E)),new O(w(E.g),E.h);if(30<A.g.length){if(N(A)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var k=x,U=E;0>=U.l(A);)k=I(k),U=I(U);var P=R(k,1),$=R(U,1);for(U=R(U,2),k=R(k,2);!S(U);){var B=$.add(U);0>=B.l(A)&&(P=P.add(k),$=B),U=R(U,1),k=R(k,1)}return E=T(A,P.j(E)),new O(P,E)}for(P=m;0<=A.l(E);){for(k=Math.max(1,Math.floor(A.m()/E.m())),U=Math.ceil(Math.log(k)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),$=h(k),B=$.j(E);N(B)||0<B.l(A);)k-=U,$=h(k),B=$.j(E);S($)&&($=x),P=P.add($),A=T(A,B)}return new O(P,A)}t.A=function(A){return L(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),k=[],U=0;U<E;U++)k[U]=this.i(U)&A.i(U);return new o(k,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),k=[],U=0;U<E;U++)k[U]=this.i(U)|A.i(U);return new o(k,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),k=[],U=0;U<E;U++)k[U]=this.i(U)^A.i(U);return new o(k,this.h^A.h)};function I(A){for(var E=A.g.length+1,k=[],U=0;U<E;U++)k[U]=A.i(U)<<1|A.i(U-1)>>>31;return new o(k,A.h)}function R(A,E){var k=E>>5;E%=32;for(var U=A.g.length-k,P=[],$=0;$<U;$++)P[$]=0<E?A.i($+k)>>>E|A.i($+k+1)<<32-E:A.i($+k);return new o(P,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,SF=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Qd=o}).apply(typeof yO<"u"?yO:typeof self<"u"?self:typeof window<"u"?window:{});var S1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NF,bm,jF,pv,A_,_F,TF,AF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,D,F){return v==Array.prototype||v==Object.prototype||(v[D]=F.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof S1=="object"&&S1];for(var D=0;D<v.length;++D){var F=v[D];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var n=r(this);function a(v,D){if(D)e:{var F=n;v=v.split(".");for(var re=0;re<v.length-1;re++){var Te=v[re];if(!(Te in F))break e;F=F[Te]}v=v[v.length-1],re=F[v],D=D(re),D!=re&&D!=null&&e(F,v,{configurable:!0,writable:!0,value:D})}}function i(v,D){v instanceof String&&(v+="");var F=0,re=!1,Te={next:function(){if(!re&&F<v.length){var ze=F++;return{value:D(ze,v[ze]),done:!1}}return re=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te}a("Array.prototype.values",function(v){return v||function(){return i(this,function(D,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(v){var D=typeof v;return D=D!="object"?D:v?Array.isArray(v)?"array":D:"null",D=="array"||D=="object"&&typeof v.length=="number"}function h(v){var D=typeof v;return D=="object"&&v!=null||D=="function"}function p(v,D,F){return v.call.apply(v.bind,arguments)}function m(v,D,F){if(!v)throw Error();if(2<arguments.length){var re=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,re),v.apply(D,Te)}}return function(){return v.apply(D,arguments)}}function x(v,D,F){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,x.apply(null,arguments)}function y(v,D){var F=Array.prototype.slice.call(arguments,1);return function(){var re=F.slice();return re.push.apply(re,arguments),v.apply(this,re)}}function S(v,D){function F(){}F.prototype=D.prototype,v.aa=D.prototype,v.prototype=new F,v.prototype.constructor=v,v.Qb=function(re,Te,ze){for(var pt=Array(arguments.length-2),ln=2;ln<arguments.length;ln++)pt[ln-2]=arguments[ln];return D.prototype[Te].apply(re,pt)}}function N(v){const D=v.length;if(0<D){const F=Array(D);for(let re=0;re<D;re++)F[re]=v[re];return F}return[]}function w(v,D){for(let F=1;F<arguments.length;F++){const re=arguments[F];if(d(re)){const Te=v.length||0,ze=re.length||0;v.length=Te+ze;for(let pt=0;pt<ze;pt++)v[Te+pt]=re[pt]}else v.push(re)}}class T{constructor(D,F){this.i=D,this.j=F,this.h=0,this.g=null}get(){let D;return 0<this.h?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function C(v){return/^[\s\xa0]*$/.test(v)}function O(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function L(v){return L[" "](v),v}L[" "]=function(){};var I=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function R(v,D,F){for(const re in v)D.call(F,v[re],re,v)}function A(v,D){for(const F in v)D.call(void 0,v[F],F,v)}function E(v){const D={};for(const F in v)D[F]=v[F];return D}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(v,D){let F,re;for(let Te=1;Te<arguments.length;Te++){re=arguments[Te];for(F in re)v[F]=re[F];for(let ze=0;ze<k.length;ze++)F=k[ze],Object.prototype.hasOwnProperty.call(re,F)&&(v[F]=re[F])}}function P(v){var D=1;v=v.split(":");const F=[];for(;0<D&&v.length;)F.push(v.shift()),D--;return v.length&&F.push(v.join(":")),F}function $(v){c.setTimeout(()=>{throw v},0)}function B(){var v=ce;let D=null;return v.g&&(D=v.g,v.g=v.g.next,v.g||(v.h=null),D.next=null),D}class G{constructor(){this.h=this.g=null}add(D,F){const re=K.get();re.set(D,F),this.h?this.h.next=re:this.g=re,this.h=re}}var K=new T(()=>new H,v=>v.reset());class H{constructor(){this.next=this.g=this.h=null}set(D,F){this.h=D,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ae=!1,ce=new G,fe=()=>{const v=c.Promise.resolve(void 0);ee=()=>{v.then(Z)}};var Z=()=>{for(var v;v=B();){try{v.h.call(v.g)}catch(F){$(F)}var D=K;D.j(v),100>D.h&&(D.h++,v.next=D.g,D.g=v)}ae=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(v,D){this.type=v,this.g=this.target=D,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,D=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const F=()=>{};c.addEventListener("test",F,D),c.removeEventListener("test",F,D)}catch{}return v})();function ye(v,D){if(Y.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var F=this.type=v.type,re=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=D,D=v.relatedTarget){if(I){e:{try{L(D.nodeName);var Te=!0;break e}catch{}Te=!1}Te||(D=null)}}else F=="mouseover"?D=v.fromElement:F=="mouseout"&&(D=v.toElement);this.relatedTarget=D,re?(this.clientX=re.clientX!==void 0?re.clientX:re.pageX,this.clientY=re.clientY!==void 0?re.clientY:re.pageY,this.screenX=re.screenX||0,this.screenY=re.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Ue[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&ye.aa.h.call(this)}}S(ye,Y);var Ue={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function _e(v,D,F,re,Te){this.listener=v,this.proxy=null,this.src=D,this.type=F,this.capture=!!re,this.ha=Te,this.key=++Ye,this.da=this.fa=!1}function he(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Q(v){this.src=v,this.g={},this.h=0}Q.prototype.add=function(v,D,F,re,Te){var ze=v.toString();v=this.g[ze],v||(v=this.g[ze]=[],this.h++);var pt=Se(v,D,re,Te);return-1<pt?(D=v[pt],F||(D.fa=!1)):(D=new _e(D,this.src,ze,!!re,Te),D.fa=F,v.push(D)),D};function X(v,D){var F=D.type;if(F in v.g){var re=v.g[F],Te=Array.prototype.indexOf.call(re,D,void 0),ze;(ze=0<=Te)&&Array.prototype.splice.call(re,Te,1),ze&&(he(D),v.g[F].length==0&&(delete v.g[F],v.h--))}}function Se(v,D,F,re){for(var Te=0;Te<v.length;++Te){var ze=v[Te];if(!ze.da&&ze.listener==D&&ze.capture==!!F&&ze.ha==re)return Te}return-1}var Ne="closure_lm_"+(1e6*Math.random()|0),Ke={};function at(v,D,F,re,Te){if(Array.isArray(D)){for(var ze=0;ze<D.length;ze++)at(v,D[ze],F,re,Te);return null}return F=mt(F),v&&v[Xe]?v.K(D,F,h(re)?!!re.capture:!1,Te):Rt(v,D,F,!1,re,Te)}function Rt(v,D,F,re,Te,ze){if(!D)throw Error("Invalid event type");var pt=h(Te)?!!Te.capture:!!Te,ln=me(v);if(ln||(v[Ne]=ln=new Q(v)),F=ln.add(D,F,re,pt,ze),F.proxy)return F;if(re=Pe(),F.proxy=re,re.src=v,re.listener=F,v.addEventListener)de||(Te=pt),Te===void 0&&(Te=!1),v.addEventListener(D.toString(),re,Te);else if(v.attachEvent)v.attachEvent(vt(D.toString()),re);else if(v.addListener&&v.removeListener)v.addListener(re);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Pe(){function v(F){return D.call(v.src,v.listener,F)}const D=yt;return v}function lt(v,D,F,re,Te){if(Array.isArray(D))for(var ze=0;ze<D.length;ze++)lt(v,D[ze],F,re,Te);else re=h(re)?!!re.capture:!!re,F=mt(F),v&&v[Xe]?(v=v.i,D=String(D).toString(),D in v.g&&(ze=v.g[D],F=Se(ze,F,re,Te),-1<F&&(he(ze[F]),Array.prototype.splice.call(ze,F,1),ze.length==0&&(delete v.g[D],v.h--)))):v&&(v=me(v))&&(D=v.g[D.toString()],v=-1,D&&(v=Se(D,F,re,Te)),(F=-1<v?D[v]:null)&&Nt(F))}function Nt(v){if(typeof v!="number"&&v&&!v.da){var D=v.src;if(D&&D[Xe])X(D.i,v);else{var F=v.type,re=v.proxy;D.removeEventListener?D.removeEventListener(F,re,v.capture):D.detachEvent?D.detachEvent(vt(F),re):D.addListener&&D.removeListener&&D.removeListener(re),(F=me(D))?(X(F,v),F.h==0&&(F.src=null,D[Ne]=null)):he(v)}}}function vt(v){return v in Ke?Ke[v]:Ke[v]="on"+v}function yt(v,D){if(v.da)v=!0;else{D=new ye(D,this);var F=v.listener,re=v.ha||v.src;v.fa&&Nt(v),v=F.call(re,D)}return v}function me(v){return v=v[Ne],v instanceof Q?v:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(v){return typeof v=="function"?v:(v[We]||(v[We]=function(D){return v.handleEvent(D)}),v[We])}function Ze(){ne.call(this),this.i=new Q(this),this.M=this,this.F=null}S(Ze,ne),Ze.prototype[Xe]=!0,Ze.prototype.removeEventListener=function(v,D,F,re){lt(this,v,D,F,re)};function et(v,D){var F,re=v.F;if(re)for(F=[];re;re=re.F)F.push(re);if(v=v.M,re=D.type||D,typeof D=="string")D=new Y(D,v);else if(D instanceof Y)D.target=D.target||v;else{var Te=D;D=new Y(re,v),U(D,Te)}if(Te=!0,F)for(var ze=F.length-1;0<=ze;ze--){var pt=D.g=F[ze];Te=Et(pt,re,!0,D)&&Te}if(pt=D.g=v,Te=Et(pt,re,!0,D)&&Te,Te=Et(pt,re,!1,D)&&Te,F)for(ze=0;ze<F.length;ze++)pt=D.g=F[ze],Te=Et(pt,re,!1,D)&&Te}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var v=this.i,D;for(D in v.g){for(var F=v.g[D],re=0;re<F.length;re++)he(F[re]);delete v.g[D],v.h--}}this.F=null},Ze.prototype.K=function(v,D,F,re){return this.i.add(String(v),D,!1,F,re)},Ze.prototype.L=function(v,D,F,re){return this.i.add(String(v),D,!0,F,re)};function Et(v,D,F,re){if(D=v.i.g[String(D)],!D)return!0;D=D.concat();for(var Te=!0,ze=0;ze<D.length;++ze){var pt=D[ze];if(pt&&!pt.da&&pt.capture==F){var ln=pt.listener,Ta=pt.ha||pt.src;pt.fa&&X(v.i,pt),Te=ln.call(Ta,re)!==!1&&Te}}return Te&&!re.defaultPrevented}function wt(v,D,F){if(typeof v=="function")F&&(v=x(v,F));else if(v&&typeof v.handleEvent=="function")v=x(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(D)?-1:c.setTimeout(v,D||0)}function pr(v){v.g=wt(()=>{v.g=null,v.i&&(v.i=!1,pr(v))},v.l);const D=v.h;v.h=null,v.m.apply(null,D)}class be extends ne{constructor(D,F){super(),this.m=D,this.l=F,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:pr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(v){ne.call(this),this.h=v,this.g={}}S(nt,ne);var jt=[];function Pt(v){R(v.g,function(D,F){this.g.hasOwnProperty(F)&&Nt(D)},v),v.g={}}nt.prototype.N=function(){nt.aa.N.call(this),Pt(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=c.JSON.stringify,tt=c.JSON.parse,ar=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Ar(){}Ar.prototype.h=null;function Hr(v){return v.h||(v.h=v.i())}function xn(){}var _r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){Y.call(this,"d")}S(Wt,Y);function Vt(){Y.call(this,"c")}S(Vt,Y);var _t={},Gr=null;function dn(){return Gr=Gr||new Ze}_t.La="serverreachability";function en(v){Y.call(this,_t.La,v)}S(en,Y);function Wr(v){const D=dn();et(D,new en(D))}_t.STAT_EVENT="statevent";function yn(v,D){Y.call(this,_t.STAT_EVENT,v),this.stat=D}S(yn,Y);function hr(v){const D=dn();et(D,new yn(D,v))}_t.Ma="timingevent";function Sa(v,D){Y.call(this,_t.Ma,v),this.size=D}S(Sa,Y);function vn(v,D){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},D)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function cs(v,D,F,re,Te,ze){v.info(function(){if(v.g)if(ze)for(var pt="",ln=ze.split("&"),Ta=0;Ta<ln.length;Ta++){var Nr=ln[Ta].split("=");if(1<Nr.length){var Za=Nr[0];Nr=Nr[1];var es=Za.split("_");pt=2<=es.length&&es[1]=="type"?pt+(Za+"="+Nr+"&"):pt+(Za+"=redacted&")}}else pt=null;else pt=ze;return"XMLHTTP REQ ("+re+") [attempt "+Te+"]: "+D+`
`+F+`
`+pt})}function Or(v,D,F,re,Te,ze,pt){v.info(function(){return"XMLHTTP RESP ("+re+") [ attempt "+Te+"]: "+D+`
`+F+`
`+ze+" "+pt})}function bn(v,D,F,re){v.info(function(){return"XMLHTTP TEXT ("+D+"): "+Zn(v,F)+(re?" "+re:"")})}function us(v,D){v.info(function(){return"TIMEOUT: "+D})}Dn.prototype.info=function(){};function Zn(v,D){if(!v.g)return D;if(!D)return null;try{var F=JSON.parse(D);if(F){for(v=0;v<F.length;v++)if(Array.isArray(F[v])){var re=F[v];if(!(2>re.length)){var Te=re[1];if(Array.isArray(Te)&&!(1>Te.length)){var ze=Te[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(var pt=1;pt<Te.length;pt++)Te[pt]=""}}}}return Bt(F)}catch{return D}}var on={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kn;function ds(){}S(ds,Ar),ds.prototype.g=function(){return new XMLHttpRequest},ds.prototype.i=function(){return{}},kn=new ds;function Ja(v,D,F,re){this.j=v,this.i=D,this.l=F,this.R=re||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rs}function Rs(){this.i=null,this.g="",this.h=!1}var pi={},Ns={};function Tt(v,D,F){v.L=1,v.v=Re(Ct(D)),v.m=F,v.P=!0,pe(v,null)}function pe(v,D){v.F=Date.now(),Yt(v),v.A=Ct(v.v);var F=v.A,re=v.R;Array.isArray(re)||(re=[String(re)]),Ui(F.i,"t",re),v.C=0,F=v.j.J,v.h=new Rs,v.g=fy(v.j,F?D:null,!v.m),0<v.O&&(v.M=new be(x(v.Y,v,v.g),v.O)),D=v.U,F=v.g,re=v.ca;var Te="readystatechange";Array.isArray(Te)||(Te&&(jt[0]=Te.toString()),Te=jt);for(var ze=0;ze<Te.length;ze++){var pt=at(F,Te[ze],re||D.handleEvent,!1,D.h||D);if(!pt)break;D.g[pt.key]=pt}D=v.H?E(v.H):{},v.m?(v.u||(v.u="POST"),D["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,D)):(v.u="GET",v.g.ea(v.A,v.u,null,D)),Wr(),cs(v.i,v.u,v.A,v.l,v.R,v.m)}Ja.prototype.ca=function(v){v=v.target;const D=this.M;D&&Ms(v)==3?D.j():this.Y(v)},Ja.prototype.Y=function(v){try{if(v==this.g)e:{const es=Ms(this.g);var D=this.g.Ba();const Pc=this.g.Z();if(!(3>es)&&(es!=3||this.g&&(this.h.h||this.g.oa()||ad(this.g)))){this.J||es!=4||D==7||(D==8||0>=Pc?Wr(3):Wr(2)),hn(this);var F=this.g.Z();this.X=F;t:if(rt(this)){var re=ad(this.g);v="";var Te=re.length,ze=Ms(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),tn(this);var pt="";break t}this.h.i=new c.TextDecoder}for(D=0;D<Te;D++)this.h.h=!0,v+=this.h.i.decode(re[D],{stream:!(ze&&D==Te-1)});re.length=0,this.h.g+=v,this.C=0,pt=this.h.g}else pt=this.g.oa();if(this.o=F==200,Or(this.i,this.u,this.A,this.l,this.R,es,F),this.o){if(this.T&&!this.K){t:{if(this.g){var ln,Ta=this.g;if((ln=Ta.g?Ta.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(ln)){var Nr=ln;break t}}Nr=null}if(F=Nr)bn(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Br(this,F);else{this.o=!1,this.s=3,hr(12),Sn(this),tn(this);break e}}if(this.P){F=!0;let Ks;for(;!this.J&&this.C<pt.length;)if(Ks=dt(this,pt),Ks==Ns){es==4&&(this.s=4,hr(14),F=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ks==pi){this.s=4,hr(15),bn(this.i,this.l,pt,"[Invalid Chunk]"),F=!1;break}else bn(this.i,this.l,Ks,null),Br(this,Ks);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),es!=4||pt.length!=0||this.h.h||(this.s=1,hr(16),F=!1),this.o=this.o&&F,!F)bn(this.i,this.l,pt,"[Invalid Chunked Response]"),Sn(this),tn(this);else if(0<pt.length&&!this.W){this.W=!0;var Za=this.j;Za.g==this&&Za.ba&&!Za.M&&(Za.j.info("Great, no buffering proxy detected. Bytes received: "+pt.length),pp(Za),Za.M=!0,hr(11))}}else bn(this.i,this.l,pt,null),Br(this,pt);es==4&&Sn(this),this.o&&!this.J&&(es==4?uy(this.j,this):(this.o=!1,Yt(this)))}else ay(this.g),F==400&&0<pt.indexOf("Unknown SID")?(this.s=3,hr(12)):(this.s=0,hr(13)),Sn(this),tn(this)}}}catch{}finally{}};function rt(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function dt(v,D){var F=v.C,re=D.indexOf(`
`,F);return re==-1?Ns:(F=Number(D.substring(F,re)),isNaN(F)?pi:(re+=1,re+F>D.length?Ns:(D=D.slice(re,re+F),v.C=re+F,D)))}Ja.prototype.cancel=function(){this.J=!0,Sn(this)};function Yt(v){v.S=Date.now()+v.I,xr(v,v.I)}function xr(v,D){if(v.B!=null)throw Error("WatchDog timer not null");v.B=vn(x(v.ba,v),D)}function hn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Ja.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(us(this.i,this.A),this.L!=2&&(Wr(),hr(17)),Sn(this),this.s=2,tn(this)):xr(this,this.S-v)};function tn(v){v.j.G==0||v.J||uy(v.j,v)}function Sn(v){hn(v);var D=v.M;D&&typeof D.ma=="function"&&D.ma(),v.M=null,Pt(v.U),v.g&&(D=v.g,v.g=null,D.abort(),D.ma())}function Br(v,D){try{var F=v.j;if(F.G!=0&&(F.g==v||gi(F.h,v))){if(!v.K&&gi(F.h,v)&&F.G==3){try{var re=F.Da.g.parse(D)}catch{re=null}if(Array.isArray(re)&&re.length==3){var Te=re;if(Te[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<v.F)Mc(F),Rc(F);else break e;fp(F),hr(18)}}else F.za=Te[1],0<F.za-F.T&&37500>Te[2]&&F.F&&F.v==0&&!F.C&&(F.C=vn(x(F.Za,F),6e3));if(1>=wl(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else Nl(F,11)}else if((v.K||F.g==v)&&Mc(F),!C(D))for(Te=F.Da.g.parse(D),D=0;D<Te.length;D++){let Nr=Te[D];if(F.T=Nr[0],Nr=Nr[1],F.G==2)if(Nr[0]=="c"){F.K=Nr[1],F.ia=Nr[2];const Za=Nr[3];Za!=null&&(F.la=Za,F.j.info("VER="+F.la));const es=Nr[4];es!=null&&(F.Aa=es,F.j.info("SVER="+F.Aa));const Pc=Nr[5];Pc!=null&&typeof Pc=="number"&&0<Pc&&(re=1.5*Pc,F.L=re,F.j.info("backChannelRequestTimeoutMs_="+re)),re=F;const Ks=v.g;if(Ks){const od=Ks.g?Ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(od){var ze=re.h;ze.g||od.indexOf("spdy")==-1&&od.indexOf("quic")==-1&&od.indexOf("h2")==-1||(ze.j=ze.l,ze.g=new Set,ze.h&&(xi(ze,ze.h),ze.h=null))}if(re.D){const jl=Ks.g?Ks.g.getResponseHeader("X-HTTP-Session-Id"):null;jl&&(re.ya=jl,ve(re.I,re.D,jl))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-v.F,F.j.info("Handshake RTT: "+F.R+"ms")),re=F;var pt=v;if(re.qa=hy(re,re.J?re.ia:null,re.W),pt.K){Ba(re.h,pt);var ln=pt,Ta=re.L;Ta&&(ln.I=Ta),ln.B&&(hn(ln),Yt(ln)),re.g=pt}else ly(re);0<F.i.length&&z0(F)}else Nr[0]!="stop"&&Nr[0]!="close"||Nl(F,7);else F.G==3&&(Nr[0]=="stop"||Nr[0]=="close"?Nr[0]=="stop"?Nl(F,7):dp(F):Nr[0]!="noop"&&F.l&&F.l.ta(Nr),F.v=0)}}Wr(4)}catch{}}var $i=class{constructor(v,D){this.g=v,this.map=D}};function mi(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function go(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function wl(v){return v.h?1:v.g?v.g.size:0}function gi(v,D){return v.h?v.h==D:v.g?v.g.has(D):!1}function xi(v,D){v.g?v.g.add(D):v.h=D}function Ba(v,D){v.h&&v.h==D?v.h=null:v.g&&v.g.has(D)&&v.g.delete(D)}mi.prototype.cancel=function(){if(this.i=Na(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Na(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let D=v.i;for(const F of v.g.values())D=D.concat(F.D);return D}return N(v.i)}function q(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var D=[],F=v.length,re=0;re<F;re++)D.push(v[re]);return D}D=[],F=0;for(re in v)D[F++]=v[re];return D}function we(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var D=[];v=v.length;for(var F=0;F<v;F++)D.push(F);return D}D=[],F=0;for(const re in v)D[F++]=re;return D}}}function Ae(v,D){if(v.forEach&&typeof v.forEach=="function")v.forEach(D,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,D,void 0);else for(var F=we(v),re=q(v),Te=re.length,ze=0;ze<Te;ze++)D.call(void 0,re[ze],F&&F[ze],v)}var Ee=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft(v,D){if(v){v=v.split("&");for(var F=0;F<v.length;F++){var re=v[F].indexOf("="),Te=null;if(0<=re){var ze=v[F].substring(0,re);Te=v[F].substring(re+1)}else ze=v[F];D(ze,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function Mt(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Mt){this.h=v.h,Jt(this,v.j),this.o=v.o,this.g=v.g,Er(this,v.s),this.l=v.l;var D=v.i,F=new _a;F.i=D.i,D.g&&(F.g=new Map(D.g),F.h=D.h),le(this,F),this.m=v.m}else v&&(D=String(v).match(Ee))?(this.h=!1,Jt(this,D[1]||"",!0),this.o=Ve(D[2]||""),this.g=Ve(D[3]||"",!0),Er(this,D[4]),this.l=Ve(D[5]||"",!0),le(this,D[6]||"",!0),this.m=Ve(D[7]||"")):(this.h=!1,this.i=new _a(null,this.h))}Mt.prototype.toString=function(){var v=[],D=this.j;D&&v.push(Fe(D,Qt,!0),":");var F=this.g;return(F||D=="file")&&(v.push("//"),(D=this.o)&&v.push(Fe(D,Qt,!0),"@"),v.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&v.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&v.push("/"),v.push(Fe(F,F.charAt(0)=="/"?ha:Pn,!0))),(F=this.i.toString())&&v.push("?",F),(F=this.m)&&v.push("#",Fe(F,ja)),v.join("")};function Ct(v){return new Mt(v)}function Jt(v,D,F){v.j=F?Ve(D,!0):D,v.j&&(v.j=v.j.replace(/:$/,""))}function Er(v,D){if(D){if(D=Number(D),isNaN(D)||0>D)throw Error("Bad port number "+D);v.s=D}else v.s=null}function le(v,D,F){D instanceof _a?(v.i=D,ty(v.i,v.h)):(F||(D=Fe(D,zi)),v.i=new _a(D,v.h))}function ve(v,D,F){v.i.set(D,F)}function Re(v){return ve(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Ve(v,D){return v?D?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Fe(v,D,F){return typeof v=="string"?(v=encodeURI(v).replace(D,ir),F&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function ir(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Qt=/[#\/\?@]/g,Pn=/[#\?:]/g,ha=/[#\?]/g,zi=/[#\?@]/g,ja=/#/g;function _a(v,D){this.h=this.g=null,this.i=v||null,this.j=!!D}function Ln(v){v.g||(v.g=new Map,v.h=0,v.i&&ft(v.i,function(D,F){v.add(decodeURIComponent(D.replace(/\+/g," ")),F)}))}t=_a.prototype,t.add=function(v,D){Ln(this),this.i=null,v=yi(this,v);var F=this.g.get(v);return F||this.g.set(v,F=[]),F.push(D),this.h+=1,this};function wr(v,D){Ln(v),D=yi(v,D),v.g.has(D)&&(v.i=null,v.h-=v.g.get(D).length,v.g.delete(D))}function $o(v,D){return Ln(v),D=yi(v,D),v.g.has(D)}t.forEach=function(v,D){Ln(this),this.g.forEach(function(F,re){F.forEach(function(Te){v.call(D,Te,re,this)},this)},this)},t.na=function(){Ln(this);const v=Array.from(this.g.values()),D=Array.from(this.g.keys()),F=[];for(let re=0;re<D.length;re++){const Te=v[re];for(let ze=0;ze<Te.length;ze++)F.push(D[re])}return F},t.V=function(v){Ln(this);let D=[];if(typeof v=="string")$o(this,v)&&(D=D.concat(this.g.get(yi(this,v))));else{v=Array.from(this.g.values());for(let F=0;F<v.length;F++)D=D.concat(v[F])}return D},t.set=function(v,D){return Ln(this),this.i=null,v=yi(this,v),$o(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[D]),this.h+=1,this},t.get=function(v,D){return v?(v=this.V(v),0<v.length?String(v[0]):D):D};function Ui(v,D,F){wr(v,D),0<F.length&&(v.i=null,v.g.set(yi(v,D),N(F)),v.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],D=Array.from(this.g.keys());for(var F=0;F<D.length;F++){var re=D[F];const ze=encodeURIComponent(String(re)),pt=this.V(re);for(re=0;re<pt.length;re++){var Te=ze;pt[re]!==""&&(Te+="="+encodeURIComponent(String(pt[re]))),v.push(Te)}}return this.i=v.join("&")};function yi(v,D){return D=String(D),v.j&&(D=D.toLowerCase()),D}function ty(v,D){D&&!v.j&&(Ln(v),v.i=null,v.g.forEach(function(F,re){var Te=re.toLowerCase();re!=Te&&(wr(this,re),Ui(this,Te,F))},v)),v.j=D}function cp(v,D){const F=new Dn;if(c.Image){const re=new Image;re.onload=y(Ws,F,"TestLoadImage: loaded",!0,D,re),re.onerror=y(Ws,F,"TestLoadImage: error",!1,D,re),re.onabort=y(Ws,F,"TestLoadImage: abort",!1,D,re),re.ontimeout=y(Ws,F,"TestLoadImage: timeout",!1,D,re),c.setTimeout(function(){re.ontimeout&&re.ontimeout()},1e4),re.src=v}else D(!1)}function ry(v,D){const F=new Dn,re=new AbortController,Te=setTimeout(()=>{re.abort(),Ws(F,"TestPingServer: timeout",!1,D)},1e4);fetch(v,{signal:re.signal}).then(ze=>{clearTimeout(Te),ze.ok?Ws(F,"TestPingServer: ok",!0,D):Ws(F,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(Te),Ws(F,"TestPingServer: error",!1,D)})}function Ws(v,D,F,re,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),re(F)}catch{}}function xo(){this.g=new ar}function up(v,D,F){const re=F||"";try{Ae(v,function(Te,ze){let pt=Te;h(Te)&&(pt=Bt(Te)),D.push(re+ze+"="+encodeURIComponent(pt))})}catch(Te){throw D.push(re+"type="+encodeURIComponent("_badmap")),Te}}function zo(v){this.l=v.Ub||null,this.j=v.eb||!1}S(zo,Ar),zo.prototype.g=function(){return new vi(this.l,this.j)},zo.prototype.i=(function(v){return function(){return v}})({});function vi(v,D){Ze.call(this),this.D=v,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(vi,Ze),t=vi.prototype,t.open=function(v,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=D,this.readyState=1,Cc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const D={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(D.body=v),(this.D||c).fetch(new Request(this.A,D)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Cc(this)),this.g&&(this.readyState=3,Cc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;B0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function B0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var D=v.value?v.value:new Uint8Array(0);(D=this.v.decode(D,{stream:!v.done}))&&(this.response=this.responseText+=D)}v.done?Uo(this):Cc(this),this.readyState==3&&B0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Uo(this))},t.Qa=function(v){this.g&&(this.response=v,Uo(this))},t.ga=function(){this.g&&Uo(this)};function Uo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Cc(v)}t.setRequestHeader=function(v,D){this.u.append(v,D)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],D=this.h.entries();for(var F=D.next();!F.done;)F=F.value,v.push(F[0]+": "+F[1]),F=D.next();return v.join(`\r
`)};function Cc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function rd(v){let D="";return R(v,function(F,re){D+=re,D+=":",D+=F,D+=`\r
`}),D}function kc(v,D,F){e:{for(re in F){var re=!1;break e}re=!0}re||(F=rd(F),typeof v=="string"?F!=null&&encodeURIComponent(String(F)):ve(v,D,F))}function Vn(v){Ze.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Vn,Ze);var js=/^https?$/i,Sl=["POST","PUT"];t=Vn.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,D,F,re){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);D=D?D.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kn.g(),this.v=this.o?Hr(this.o):Hr(kn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(D,String(v),!0),this.B=!1}catch(ze){nd(this,ze);return}if(v=F||"",F=new Map(this.headers),re)if(Object.getPrototypeOf(re)===Object.prototype)for(var Te in re)F.set(Te,re[Te]);else if(typeof re.keys=="function"&&typeof re.get=="function")for(const ze of re.keys())F.set(ze,re.get(ze));else throw Error("Unknown input type for opt_headers: "+String(re));re=Array.from(F.keys()).find(ze=>ze.toLowerCase()=="content-type"),Te=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Sl,D,void 0))||re||Te||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,pt]of F)this.g.setRequestHeader(ze,pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$0(this),this.u=!0,this.g.send(v),this.u=!1}catch(ze){nd(this,ze)}};function nd(v,D){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=D,v.m=5,Ic(v),Oc(v)}function Ic(v){v.A||(v.A=!0,et(v,"complete"),et(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,et(this,"complete"),et(this,"abort"),Oc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oc(this,!0)),Vn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ny(this):this.bb())},t.bb=function(){ny(this)};function ny(v){if(v.h&&typeof o<"u"&&(!v.v[1]||Ms(v)!=4||v.Z()!=2)){if(v.u&&Ms(v)==4)wt(v.Ea,0,v);else if(et(v,"readystatechange"),Ms(v)==4){v.h=!1;try{const pt=v.Z();e:switch(pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var F;if(!(F=D)){var re;if(re=pt===0){var Te=String(v.D).match(Ee)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),re=!js.test(Te?Te.toLowerCase():"")}F=re}if(F)et(v,"complete"),et(v,"success");else{v.m=6;try{var ze=2<Ms(v)?v.g.statusText:""}catch{ze=""}v.l=ze+" ["+v.Z()+"]",Ic(v)}}finally{Oc(v)}}}}function Oc(v,D){if(v.g){$0(v);const F=v.g,re=v.v[0]?()=>{}:null;v.g=null,v.v=null,D||et(v,"ready");try{F.onreadystatechange=re}catch{}}}function $0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Ms(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Ms(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var D=this.g.responseText;return v&&D.indexOf(v)==0&&(D=D.substring(v.length)),tt(D)}};function ad(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function ay(v){const D={};v=(v.g&&2<=Ms(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let re=0;re<v.length;re++){if(C(v[re]))continue;var F=P(v[re]);const Te=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const ze=D[Te]||[];D[Te]=ze,ze.push(F)}A(D,function(re){return re.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sd(v,D,F){return F&&F.internalChannelParams&&F.internalChannelParams[v]||D}function sy(v){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sd("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sd("baseRetryDelayMs",5e3,v),this.cb=sd("retryDelaySeedMs",1e4,v),this.Wa=sd("forwardChannelMaxRetries",2,v),this.wa=sd("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(v&&v.concurrentRequestLimit),this.Da=new xo,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sy.prototype,t.la=8,t.G=1,t.connect=function(v,D,F,re){hr(0),this.W=v,this.H=D||{},F&&re!==void 0&&(this.H.OSID=F,this.H.OAID=re),this.F=this.X,this.I=hy(this,null,this.W),z0(this)};function dp(v){if(iy(v),v.G==3){var D=v.U++,F=Ct(v.I);if(ve(F,"SID",v.K),ve(F,"RID",D),ve(F,"TYPE","terminate"),id(v,F),D=new Ja(v,v.j,D),D.L=2,D.v=Re(Ct(F)),F=!1,c.navigator&&c.navigator.sendBeacon)try{F=c.navigator.sendBeacon(D.v.toString(),"")}catch{}!F&&c.Image&&(new Image().src=D.v,F=!0),F||(D.g=fy(D.j,null),D.g.ea(D.v)),D.F=Date.now(),Yt(D)}mp(v)}function Rc(v){v.g&&(pp(v),v.g.cancel(),v.g=null)}function iy(v){Rc(v),v.u&&(c.clearTimeout(v.u),v.u=null),Mc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function z0(v){if(!go(v.h)&&!v.s){v.s=!0;var D=v.Ga;ee||fe(),ae||(ee(),ae=!0),ce.add(D,v),v.B=0}}function l4(v,D){return wl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=D.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=vn(x(v.Ga,v,D),dy(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const Te=new Ja(this,this.j,v);let ze=this.o;if(this.S&&(ze?(ze=E(ze),U(ze,this.S)):ze=this.S),this.m!==null||this.O||(Te.H=ze,ze=null),this.P)e:{for(var D=0,F=0;F<this.i.length;F++){t:{var re=this.i[F];if("__data__"in re.map&&(re=re.map.__data__,typeof re=="string")){re=re.length;break t}re=void 0}if(re===void 0)break;if(D+=re,4096<D){D=F;break e}if(D===4096||F===this.i.length-1){D=F+1;break e}}D=1e3}else D=1e3;D=hp(this,Te,D),F=Ct(this.I),ve(F,"RID",v),ve(F,"CVER",22),this.D&&ve(F,"X-HTTP-Session-Id",this.D),id(this,F),ze&&(this.O?D="headers="+encodeURIComponent(String(rd(ze)))+"&"+D:this.m&&kc(F,this.m,ze)),xi(this.h,Te),this.Ua&&ve(F,"TYPE","init"),this.P?(ve(F,"$req",D),ve(F,"SID","null"),Te.T=!0,Tt(Te,F,null)):Tt(Te,F,D),this.G=2}}else this.G==3&&(v?oy(this,v):this.i.length==0||go(this.h)||oy(this))};function oy(v,D){var F;D?F=D.l:F=v.U++;const re=Ct(v.I);ve(re,"SID",v.K),ve(re,"RID",F),ve(re,"AID",v.T),id(v,re),v.m&&v.o&&kc(re,v.m,v.o),F=new Ja(v,v.j,F,v.B+1),v.m===null&&(F.H=v.o),D&&(v.i=D.D.concat(v.i)),D=hp(v,F,1e3),F.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),xi(v.h,F),Tt(F,re,D)}function id(v,D){v.H&&R(v.H,function(F,re){ve(D,re,F)}),v.l&&Ae({},function(F,re){ve(D,re,F)})}function hp(v,D,F){F=Math.min(v.i.length,F);var re=v.l?x(v.l.Na,v.l,v):null;e:{var Te=v.i;let ze=-1;for(;;){const pt=["count="+F];ze==-1?0<F?(ze=Te[0].g,pt.push("ofs="+ze)):ze=0:pt.push("ofs="+ze);let ln=!0;for(let Ta=0;Ta<F;Ta++){let Nr=Te[Ta].g;const Za=Te[Ta].map;if(Nr-=ze,0>Nr)ze=Math.max(0,Te[Ta].g-100),ln=!1;else try{up(Za,pt,"req"+Nr+"_")}catch{re&&re(Za)}}if(ln){re=pt.join("&");break e}}}return v=v.i.splice(0,F),D.D=v,re}function ly(v){if(!v.g&&!v.u){v.Y=1;var D=v.Fa;ee||fe(),ae||(ee(),ae=!0),ce.add(D,v),v.v=0}}function fp(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=vn(x(v.Fa,v),dy(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,cy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=vn(x(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hr(10),Rc(this),cy(this))};function pp(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function cy(v){v.g=new Ja(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var D=Ct(v.qa);ve(D,"RID","rpc"),ve(D,"SID",v.K),ve(D,"AID",v.T),ve(D,"CI",v.F?"0":"1"),!v.F&&v.ja&&ve(D,"TO",v.ja),ve(D,"TYPE","xmlhttp"),id(v,D),v.m&&v.o&&kc(D,v.m,v.o),v.L&&(v.g.I=v.L);var F=v.g;v=v.ia,F.L=1,F.v=Re(Ct(D)),F.m=null,F.P=!0,pe(F,v)}t.Za=function(){this.C!=null&&(this.C=null,Rc(this),fp(this),hr(19))};function Mc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function uy(v,D){var F=null;if(v.g==D){Mc(v),pp(v),v.g=null;var re=2}else if(gi(v.h,D))F=D.D,Ba(v.h,D),re=1;else return;if(v.G!=0){if(D.o)if(re==1){F=D.m?D.m.length:0,D=Date.now()-D.F;var Te=v.B;re=dn(),et(re,new Sa(re,F)),z0(v)}else ly(v);else if(Te=D.s,Te==3||Te==0&&0<D.X||!(re==1&&l4(v,D)||re==2&&fp(v)))switch(F&&0<F.length&&(D=v.h,D.i=D.i.concat(F)),Te){case 1:Nl(v,5);break;case 4:Nl(v,10);break;case 3:Nl(v,6);break;default:Nl(v,2)}}}function dy(v,D){let F=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(F*=2),F*D}function Nl(v,D){if(v.j.info("Error code "+D),D==2){var F=x(v.fb,v),re=v.Xa;const Te=!re;re=new Mt(re||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jt(re,"https"),Re(re),Te?cp(re.toString(),F):ry(re.toString(),F)}else hr(2);v.G=0,v.l&&v.l.sa(D),mp(v),iy(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),hr(2)):(this.j.info("Failed to ping google.com"),hr(1))};function mp(v){if(v.G=0,v.ka=[],v.l){const D=Na(v.h);(D.length!=0||v.i.length!=0)&&(w(v.ka,D),w(v.ka,v.i),v.h.i.length=0,N(v.i),v.i.length=0),v.l.ra()}}function hy(v,D,F){var re=F instanceof Mt?Ct(F):new Mt(F);if(re.g!="")D&&(re.g=D+"."+re.g),Er(re,re.s);else{var Te=c.location;re=Te.protocol,D=D?D+"."+Te.hostname:Te.hostname,Te=+Te.port;var ze=new Mt(null);re&&Jt(ze,re),D&&(ze.g=D),Te&&Er(ze,Te),F&&(ze.l=F),re=ze}return F=v.D,D=v.ya,F&&D&&ve(re,F,D),ve(re,"VER",v.la),id(v,re),re}function fy(v,D,F){if(D&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return D=v.Ca&&!v.pa?new Vn(new zo({eb:F})):new Vn(v.pa),D.Ha(v.J),D}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function py(){}t=py.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function U0(){}U0.prototype.g=function(v,D){return new Ds(v,D)};function Ds(v,D){Ze.call(this),this.g=new sy(D),this.l=v,this.h=D&&D.messageUrlParams||null,v=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(v?v["X-WebChannel-Content-Type"]=D.messageContentType:v={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.va&&(v?v["X-WebChannel-Client-Profile"]=D.va:v={"X-WebChannel-Client-Profile":D.va}),this.g.S=v,(v=D&&D.Sb)&&!C(v)&&(this.g.m=v),this.v=D&&D.supportsCrossDomainXhr||!1,this.u=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!C(D)&&(this.g.D=D,v=this.h,v!==null&&D in v&&(v=this.h,D in v&&delete v[D])),this.j=new Dc(this)}S(Ds,Ze),Ds.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ds.prototype.close=function(){dp(this.g)},Ds.prototype.o=function(v){var D=this.g;if(typeof v=="string"){var F={};F.__data__=v,v=F}else this.u&&(F={},F.__data__=Bt(v),v=F);D.i.push(new $i(D.Ya++,v)),D.G==3&&z0(D)},Ds.prototype.N=function(){this.g.l=null,delete this.j,dp(this.g),delete this.g,Ds.aa.N.call(this)};function my(v){Wt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var D=v.__sm__;if(D){e:{for(const F in D){v=F;break e}v=void 0}(this.i=v)&&(v=this.i,D=D!==null&&v in D?D[v]:void 0),this.data=D}else this.data=v}S(my,Wt);function gy(){Vt.call(this),this.status=1}S(gy,Vt);function Dc(v){this.g=v}S(Dc,py),Dc.prototype.ua=function(){et(this.g,"a")},Dc.prototype.ta=function(v){et(this.g,new my(v))},Dc.prototype.sa=function(v){et(this.g,new gy)},Dc.prototype.ra=function(){et(this.g,"b")},U0.prototype.createWebChannel=U0.prototype.g,Ds.prototype.send=Ds.prototype.o,Ds.prototype.open=Ds.prototype.m,Ds.prototype.close=Ds.prototype.close,AF=function(){return new U0},TF=function(){return dn()},_F=_t,A_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,pv=on,wn.COMPLETE="complete",jF=wn,xn.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,bm=xn,Vn.prototype.listenOnce=Vn.prototype.L,Vn.prototype.getLastError=Vn.prototype.Ka,Vn.prototype.getLastErrorCode=Vn.prototype.Ba,Vn.prototype.getStatus=Vn.prototype.Z,Vn.prototype.getResponseJson=Vn.prototype.Oa,Vn.prototype.getResponseText=Vn.prototype.oa,Vn.prototype.send=Vn.prototype.ea,Vn.prototype.setWithCredentials=Vn.prototype.Ha,NF=Vn}).apply(typeof S1<"u"?S1:typeof self<"u"?self:typeof window<"u"?window:{});const vO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Es=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Es.UNAUTHENTICATED=new Es(null),Es.GOOGLE_CREDENTIALS=new Es("google-credentials-uid"),Es.FIRST_PARTY=new Es("first-party-uid"),Es.MOCK_USER=new Es("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new QA("@firebase/firestore");function Th(){return e0.logLevel}function it(t,...e){if(e0.logLevel<=Pr.DEBUG){const r=e.map(cE);e0.debug(`Firestore (${Uf}): ${t}`,...r)}}function xa(t,...e){if(e0.logLevel<=Pr.ERROR){const r=e.map(cE);e0.error(`Firestore (${Uf}): ${t}`,...r)}}function tg(t,...e){if(e0.logLevel<=Pr.WARN){const r=e.map(cE);e0.warn(`Firestore (${Uf}): ${t}`,...r)}}function cE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t="Unexpected state"){const e=`FIRESTORE (${Uf}) INTERNAL ASSERTION FAILED: `+t;throw xa(e),new Error(e)}function Lt(t,e){t||kt()}function Dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Do{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $re{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Es.UNAUTHENTICATED)))}shutdown(){}}class zre{constructor(e){this.t=e,this.currentUser=Es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Lt(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new Oo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Oo,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Oo)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Lt(typeof n.accessToken=="string"),new Bre(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(e===null||typeof e=="string"),new Es(e)}}class Ure{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Es.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Vre{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Ure(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Es.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fre{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Lt(this.o===void 0);const n=i=>{i.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,it("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Lt(typeof r.token=="string"),this.R=r.token,new Fre(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Hre(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function cr(t,e){return t<e?-1:t>e?1:0}function Zh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function CF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ht(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ht(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ht(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ht(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return aa.fromMillis(Date.now())}static fromDate(e){return aa.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new aa(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cr(this.nanoseconds,e.nanoseconds):cr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new aa(0,0))}static max(){return new Ut(new aa(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,r,n){r===void 0?r=0:r>e.length&&kt(),n===void 0?n=e.length-r:n>e.length-r&&kt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return rg.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof rg?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),o=r.get(a);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Xr extends rg{construct(e,r,n){return new Xr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ht(qe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Xr(r)}static emptyPath(){return new Xr([])}}const Gre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class na extends rg{construct(e,r,n){return new na(e,r,n)}static isValidIdentifier(e){return Gre.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),na.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new na(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new ht(qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new ht(qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ht(qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(i(),a++)}if(i(),o)throw new ht(qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new na(r)}static emptyPath(){return new na([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.path=e}static fromPath(e){return new bt(Xr.fromString(e))}static fromName(e){return new bt(Xr.fromString(e).popFirst(5))}static empty(){return new bt(Xr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Xr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new Xr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function E_(t){return t.fields.find((e=>e.kind===2))}function Od(t){return t.fields.filter((e=>e.kind!==2))}Lv.UNKNOWN_ID=-1;class mv{constructor(e,r){this.fieldPath=e,this.kind=r}}class ng{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new ng(0,Pi.min())}}function kF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Ut.fromTimestamp(n===1e9?new aa(r+1,0):new aa(r,n));return new Pi(a,bt.empty(),e)}function IF(t){return new Pi(t.readTime,t.key,-1)}class Pi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Pi(Ut.min(),bt.empty(),-1)}static max(){return new Pi(Ut.max(),bt.empty(),-1)}}function uE(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=bt.comparator(t.documentKey,e.documentKey),r!==0?r:cr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t){if(t.code!==qe.FAILED_PRECONDITION||t.message!==OF)throw t;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Oe(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Oe?r:Oe.resolve(r)}catch(r){return Oe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Oe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Oe.reject(r)}static resolve(e){return new Oe(((r,n)=>{r(e)}))}static reject(e){return new Oe(((r,n)=>{n(e)}))}static waitFor(e){return new Oe(((r,n)=>{let a=0,i=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++i,o&&i===a&&r()}),(d=>n(d)))})),o=!0,i===a&&r()}))}static or(e){let r=Oe.resolve(!1);for(const n of e)r=r.next((a=>a?Oe.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new Oe(((n,a)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{o[h]=p,++c,c===i&&n(o)}),(p=>a(p)))}}))}static doWhile(e,r){return new Oe(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Oo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Cm(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=dE(n.target.error);this.V.reject(new Cm(e,a))}}static open(e,r,n,a){try{return new I2(r,e.transaction(a,n))}catch(i){throw new Cm(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(it("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Kre(r)}}class Iu{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Iu.S(Ka())===12.2&&xa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return it("SimpleDb","Removing database:",e),Dd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!$V())return!1;if(Iu.v())return!0;const e=Ka(),r=Iu.S(e),n=0<r&&r<10,a=MF(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(it("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const o=i.target.result;r(o)},a.onblocked=()=>{n(new Cm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const o=i.target.error;o.name==="VersionError"?n(new ht(qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new ht(qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new Cm(e,o))},a.onupgradeneeded=i=>{it("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,a.transaction,i.oldVersion,this.version).next((()=>{it("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const c=I2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Oe.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&o<3;if(it("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function MF(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Wre{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Dd(this.B.delete())}}class Cm extends ht{constructor(e,r){super(qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Wu(t){return t.name==="IndexedDbTransactionError"}class Kre{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(it("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(it("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Dd(n)}add(e){return it("SimpleDb","ADD",this.store.name,e,e),Dd(this.store.add(e))}get(e){return Dd(this.store.get(e)).next((r=>(r===void 0&&(r=null),it("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return it("SimpleDb","DELETE",this.store.name,e),Dd(this.store.delete(e))}count(){return it("SimpleDb","COUNT",this.store.name),Dd(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new Oe(((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}}))}{const i=this.cursor(n),o=[];return this.W(i,((c,d)=>{o.push(d)})).next((()=>o))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Oe(((a,i)=>{n.onerror=o=>{i(o.target.error)},n.onsuccess=o=>{a(o.target.result)}}))}j(e,r){it("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,o,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Oe(((n,a)=>{r.onerror=i=>{const o=dE(i.target.error);a(o)},r.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():n()})):n()}}))}W(e,r){const n=[];return new Oe(((a,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void a();const d=new Wre(c),h=r(c.primaryKey,c.value,d);if(h instanceof Oe){const p=h.catch((m=>(d.done(),Oe.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Oe.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Dd(t){return new Oe(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=dE(n.target.error);r(a)}}))}let bO=!1;function dE(t){const e=Iu.S(Ka());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ht("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bO||(bO=!0,setTimeout((()=>{throw n}),0)),n}}return t}class Qre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){it("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{it("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Wu(r)?it("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Gu(r)}await this.X(6e4)}))}}class Xre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return Oe.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!n.has(o))return it("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next((c=>{a-=c,n.add(o)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(a,i))).next((c=>(it("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>o.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const o=IF(i);uE(o,n)>0&&(n=o)})),new Pi(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ii.oe=-1;function gx(t){return t==null}function ag(t){return t===0&&1/t==-1/0}function DF(t){return typeof t=="number"&&Number.isInteger(t)&&!ag(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=wO(e)),e=Yre(t.get(r),e);return wO(e)}function Yre(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function wO(t){return t+""}function Xo(t){const e=t.length;if(Lt(e>=2),e===2)return Lt(t.charAt(0)===""&&t.charAt(1)===""),Xr.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>r)&&kt(),t.charAt(o+1)){case"":const c=t.substring(i,o);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,o),a+="\0";break;case"":a+=t.substring(i,o+1);break;default:kt()}i=o+2}return new Xr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t,e){return[t,Fs(e)]}function PF(t,e,r){return[t,Fs(e),r]}const Jre={},Zre=["prefixPath","collectionGroup","readTime","documentId"],ene=["prefixPath","collectionGroup","documentId"],tne=["collectionGroup","readTime","prefixPath","documentId"],rne=["canonicalId","targetId"],nne=["targetId","path"],ane=["path","targetId"],sne=["collectionId","parent"],ine=["indexId","uid"],one=["uid","sequenceNumber"],lne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cne=["indexId","uid","orderedDocumentKey"],une=["userId","collectionPath","documentId"],dne=["userId","collectionPath","largestBatchId"],hne=["userId","collectionGroup","largestBatchId"],LF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fne=[...LF,"documentOverlays"],BF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$F=BF,hE=[...$F,"indexConfiguration","indexState","indexEntries"],pne=hE,mne=[...hE,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends RF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Xa(t,e){const r=Dt(t);return Iu.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function A0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function zF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,r){this.comparator=e,this.root=r||ys.EMPTY}insert(e,r){return new Un(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ys.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ys.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new N1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new N1(this.root,e,this.comparator,!1)}getReverseIterator(){return new N1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new N1(this.root,e,this.comparator,!0)}}class N1{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ys{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??ys.RED,this.left=a??ys.EMPTY,this.right=i??ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new ys(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ys.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ys.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kt();const e=this.left.check();if(e!==this.right.check())throw kt();return e+(this.isRed()?0:1)}}ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1;ys.EMPTY=new class{constructor(){this.size=0}get key(){throw kt()}get value(){throw kt()}get color(){throw kt()}get left(){throw kt()}get right(){throw kt()}copy(e,r,n,a,i){return this}insert(e,r,n){return new ys(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new jO(this.data.getIterator())}getIteratorFrom(e){return new jO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new En(this.comparator);return r.data=e,r}}class jO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gh(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(na.comparator)}static empty(){return new oi([])}unionWith(e){let r=new En(na.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new oi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Zh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new UF("Invalid base64 string: "+i):i}})(e);return new wa(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i})(e);return new wa(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wa.EMPTY_BYTE_STRING=new wa("");const gne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pc(t){if(Lt(!!t),typeof t=="string"){let e=0;const r=gne.exec(t);if(Lt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Kn(t.seconds),nanos:Kn(t.nanos)}}function Kn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bu(t){return typeof t=="string"?wa.fromBase64String(t):wa.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function pE(t){const e=t.mapValue.fields.__previous_value__;return fE(e)?pE(e):e}function sg(t){const e=pc(t.mapValue.fields.__local_write_time__.timestampValue);return new aa(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{constructor(e,r,n,a,i,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class t0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new t0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xv={nullValue:"NULL_VALUE"};function r0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fE(t)?4:VF(t)?9007199254740991:O2(t)?10:11:kt()}function il(t,e){if(t===e)return!0;const r=r0(t);if(r!==r0(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sg(t).isEqual(sg(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=pc(a.timestampValue),c=pc(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return Bu(a.bytesValue).isEqual(Bu(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return Kn(a.geoPointValue.latitude)===Kn(i.geoPointValue.latitude)&&Kn(a.geoPointValue.longitude)===Kn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return Kn(a.integerValue)===Kn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=Kn(a.doubleValue),c=Kn(i.doubleValue);return o===c?ag(o)===ag(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Zh(t.arrayValue.values||[],e.arrayValue.values||[],il);case 10:case 11:return(function(a,i){const o=a.mapValue.fields||{},c=i.mapValue.fields||{};if(NO(o)!==NO(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!il(o[d],c[d])))return!1;return!0})(t,e);default:return kt()}}function ig(t,e){return(t.values||[]).find((r=>il(r,e)))!==void 0}function $u(t,e){if(t===e)return 0;const r=r0(t),n=r0(e);if(r!==n)return cr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return cr(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Kn(i.integerValue||i.doubleValue),d=Kn(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return _O(t.timestampValue,e.timestampValue);case 4:return _O(sg(t),sg(e));case 5:return cr(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Bu(i),d=Bu(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=cr(c[h],d[h]);if(p!==0)return p}return cr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=cr(Kn(i.latitude),Kn(o.latitude));return c!==0?c:cr(Kn(i.longitude),Kn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return TO(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var c,d,h,p;const m=i.fields||{},x=o.fields||{},y=(c=m.value)===null||c===void 0?void 0:c.arrayValue,S=(d=x.value)===null||d===void 0?void 0:d.arrayValue,N=cr(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:TO(y,S)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===bu.mapValue&&o===bu.mapValue)return 0;if(i===bu.mapValue)return 1;if(o===bu.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const x=cr(d[m],p[m]);if(x!==0)return x;const y=$u(c[d[m]],h[p[m]]);if(y!==0)return y}return cr(d.length,p.length)})(t.mapValue,e.mapValue);default:throw kt()}}function _O(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return cr(t,e);const r=pc(t),n=pc(e),a=cr(r.seconds,n.seconds);return a!==0?a:cr(r.nanos,n.nanos)}function TO(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=$u(r[a],n[a]);if(i)return i}return cr(r.length,n.length)}function ef(t){return k_(t)}function k_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=pc(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Bu(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return bt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=k_(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const o of n)i?i=!1:a+=",",a+=`${o}:${k_(r.fields[o])}`;return a+"}"})(t.mapValue):kt()}function og(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function I_(t){return!!t&&"integerValue"in t}function lg(t){return!!t&&"arrayValue"in t}function AO(t){return!!t&&"nullValue"in t}function EO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yv(t){return!!t&&"mapValue"in t}function O2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function km(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return A0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=km(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=km(t.arrayValue.values[r]);return e}return Object.assign({},t)}function VF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const FF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function yne(t){return"nullValue"in t?xv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?og(t0.empty(),bt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?O2(t)?FF:{mapValue:{}}:kt()}function vne(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?og(t0.empty(),bt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?FF:"mapValue"in t?O2(t)?{mapValue:{}}:bu:kt()}function CO(t,e){const r=$u(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function kO(t,e){const r=$u(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.value=e}static empty(){return new bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!yv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=km(r)}setAll(e){let r=na.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=km(o):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());yv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return il(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];yv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){A0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new bs(km(this.value))}}function qF(t){const e=[];return A0(t.fields,((r,n)=>{const a=new na([r]);if(yv(n)){const i=qF(n.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)})),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,r,n,a,i,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Qn(e,0,Ut.min(),Ut.min(),Ut.min(),bs.empty(),0)}static newFoundDocument(e,r,n,a){return new Qn(e,1,r,Ut.min(),n,a,0)}static newNoDocument(e,r){return new Qn(e,2,r,Ut.min(),Ut.min(),bs.empty(),0)}static newUnknownDocument(e,r){return new Qn(e,3,r,Ut.min(),Ut.min(),bs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,r){this.position=e,this.inclusive=r}}function IO(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?n=bt.comparator(bt.fromName(o.referenceValue),r.key):n=$u(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function OO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!il(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,r="asc"){this.field=e,this.dir=r}}function bne(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HF=class{};class Lr extends HF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new wne(e,r,n):r==="array-contains"?new jne(e,n):r==="in"?new YF(e,n):r==="not-in"?new _ne(e,n):r==="array-contains-any"?new Tne(e,n):new Lr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Sne(e,n):new Nne(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison($u(r,this.value)):r!==null&&r0(this.value)===r0(r)&&this.matchesComparison($u(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends HF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new gn(e,r)}matches(e){return rf(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rf(t){return t.op==="and"}function O_(t){return t.op==="or"}function mE(t){return GF(t)&&rf(t)}function GF(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function R_(t){if(t instanceof Lr)return t.field.canonicalString()+t.op.toString()+ef(t.value);if(mE(t))return t.filters.map((e=>R_(e))).join(",");{const e=t.filters.map((r=>R_(r))).join(",");return`${t.op}(${e})`}}function WF(t,e){return t instanceof Lr?(function(n,a){return a instanceof Lr&&n.op===a.op&&n.field.isEqual(a.field)&&il(n.value,a.value)})(t,e):t instanceof gn?(function(n,a){return a instanceof gn&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,o,c)=>i&&WF(o,a.filters[c])),!0):!1})(t,e):void kt()}function KF(t,e){const r=t.filters.concat(e);return gn.create(r,t.op)}function QF(t){return t instanceof Lr?(function(r){return`${r.field.canonicalString()} ${r.op} ${ef(r.value)}`})(t):t instanceof gn?(function(r){return r.op.toString()+" {"+r.getFilters().map(QF).join(" ,")+"}"})(t):"Filter"}class wne extends Lr{constructor(e,r,n){super(e,r,n),this.key=bt.fromName(n.referenceValue)}matches(e){const r=bt.comparator(e.key,this.key);return this.matchesComparison(r)}}class Sne extends Lr{constructor(e,r){super(e,"in",r),this.keys=XF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class Nne extends Lr{constructor(e,r){super(e,"not-in",r),this.keys=XF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function XF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>bt.fromName(n.referenceValue)))}class jne extends Lr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return lg(r)&&ig(r.arrayValue,this.value)}}class YF extends Lr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ig(this.value.arrayValue,r)}}class _ne extends Lr{constructor(e,r){super(e,"not-in",r)}matches(e){if(ig(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ig(this.value.arrayValue,r)}}class Tne extends Lr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!lg(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>ig(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ane{constructor(e,r=null,n=[],a=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function M_(t,e=null,r=[],n=[],a=null,i=null,o=null){return new Ane(t,e,r,n,a,i,o)}function n0(t){const e=Dt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>R_(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),gx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>ef(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>ef(n))).join(",")),e.ue=r}return e.ue}function xx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!bne(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!WF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!OO(t.startAt,e.startAt)&&OO(t.endAt,e.endAt)}function Bv(t){return bt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function $v(t,e){return t.filters.filter((r=>r instanceof Lr&&r.field.isEqual(e)))}function RO(t,e,r){let n=xv,a=!0;for(const i of $v(t,e)){let o=xv,c=!0;switch(i.op){case"<":case"<=":o=yne(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,c=!1;break;case"!=":case"not-in":o=xv}CO({value:n,inclusive:a},{value:o,inclusive:c})<0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];CO({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function MO(t,e,r){let n=bu,a=!0;for(const i of $v(t,e)){let o=bu,c=!0;switch(i.op){case">=":case">":o=vne(i.value),c=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,c=!1;break;case"!=":case"not-in":o=bu}kO({value:n,inclusive:a},{value:o,inclusive:c})>0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];kO({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,r=null,n=[],a=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function JF(t,e,r,n,a,i,o,c){return new Vf(t,e,r,n,a,i,o,c)}function yx(t){return new Vf(t)}function DO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZF(t){return t.collectionGroup!==null}function Im(t){const e=Dt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new En(na.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new cg(i,n))})),r.has(na.keyField().canonicalString())||e.ce.push(new cg(na.keyField(),n))}return e.ce}function Ri(t){const e=Dt(t);return e.le||(e.le=Ene(e,Im(t))),e.le}function Ene(t,e){if(t.limitType==="F")return M_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new cg(a.field,i)}));const r=t.endAt?new tf(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new tf(t.startAt.position,t.startAt.inclusive):null;return M_(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function D_(t,e){const r=t.filters.concat([e]);return new Vf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function zv(t,e,r){return new Vf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function R2(t,e){return xx(Ri(t),Ri(e))&&t.limitType===e.limitType}function eq(t){return`${n0(Ri(t))}|lt:${t.limitType}`}function Ah(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>QF(a))).join(", ")}]`),gx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>ef(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>ef(a))).join(",")),`Target(${n})`})(Ri(t))}; limitType=${t.limitType})`}function vx(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):bt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of Im(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=IO(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,Im(n),a)||n.endAt&&!(function(o,c,d){const h=IO(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,Im(n),a))})(t,e)}function tq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rq(t){return(e,r)=>{let n=!1;for(const a of Im(t)){const i=Cne(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function Cne(t,e,r){const n=t.field.isKeyField()?bt.comparator(e.key,r.key):(function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?$u(d,h):kt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return kt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){A0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return zF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kne=new Un(bt.comparator);function Ii(){return kne}const nq=new Un(bt.comparator);function wm(...t){let e=nq;for(const r of t)e=e.insert(r.key,r);return e}function aq(t){let e=nq;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Yo(){return Om()}function sq(){return Om()}function Om(){return new Ku((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ine=new Un(bt.comparator),One=new En(bt.comparator);function jr(...t){let e=One;for(const r of t)e=e.add(r);return e}const Rne=new En(cr);function gE(){return Rne}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ag(e)?"-0":e}}function iq(t){return{integerValue:""+t}}function oq(t,e){return DF(e)?iq(e):xE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this._=void 0}}function Mne(t,e,r){return t instanceof ug?(function(a,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&fE(i)&&(i=pE(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(r,e):t instanceof a0?cq(t,e):t instanceof nf?uq(t,e):(function(a,i){const o=lq(a,i),c=PO(o)+PO(a.Pe);return I_(o)&&I_(a.Pe)?iq(c):xE(a.serializer,c)})(t,e)}function Dne(t,e,r){return t instanceof a0?cq(t,e):t instanceof nf?uq(t,e):r}function lq(t,e){return t instanceof af?(function(n){return I_(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class ug extends M2{}class a0 extends M2{constructor(e){super(),this.elements=e}}function cq(t,e){const r=dq(e);for(const n of t.elements)r.some((a=>il(a,n)))||r.push(n);return{arrayValue:{values:r}}}class nf extends M2{constructor(e){super(),this.elements=e}}function uq(t,e){let r=dq(e);for(const n of t.elements)r=r.filter((a=>!il(a,n)));return{arrayValue:{values:r}}}class af extends M2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function PO(t){return Kn(t.integerValue||t.doubleValue)}function dq(t){return lg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,r){this.field=e,this.transform=r}}function Pne(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof a0&&a instanceof a0||n instanceof nf&&a instanceof nf?Zh(n.elements,a.elements,il):n instanceof af&&a instanceof af?il(n.Pe,a.Pe):n instanceof ug&&a instanceof ug})(t.transform,e.transform)}class Lne{constructor(e,r){this.version=e,this.transformResults=r}}class ya{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ya}static exists(e){return new ya(void 0,e)}static updateTime(e){return new ya(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class D2{}function hq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bx(t.key,ya.none()):new Ff(t.key,t.data,ya.none());{const r=t.data,n=bs.empty();let a=new En(na.comparator);for(let i of e.fields)if(!a.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),a=a.add(i)}return new Nc(t.key,n,new oi(a.toArray()),ya.none())}}function Bne(t,e,r){t instanceof Ff?(function(a,i,o){const c=a.value.clone(),d=BO(a.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof Nc?(function(a,i,o){if(!vv(a.precondition,i))return void i.convertToUnknownDocument(o.version);const c=BO(a.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(fq(a)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Rm(t,e,r,n){return t instanceof Ff?(function(i,o,c,d){if(!vv(i.precondition,o))return c;const h=i.value.clone(),p=$O(i.fieldTransforms,d,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof Nc?(function(i,o,c,d){if(!vv(i.precondition,o))return c;const h=$O(i.fieldTransforms,d,o),p=o.data;return p.setAll(fq(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,o,c){return vv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function $ne(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=lq(n.transform,a||null);i!=null&&(r===null&&(r=bs.empty()),r.set(n.field,i))}return r||null}function LO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Zh(n,a,((i,o)=>Pne(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ff extends D2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Nc extends D2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fq(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function BO(t,e,r){const n=new Map;Lt(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],o=i.transform,c=e.data.field(i.field);n.set(i.field,Dne(o,c,r[a]))}return n}function $O(t,e,r){const n=new Map;for(const a of t){const i=a.transform,o=r.data.field(a.field);n.set(a.field,Mne(i,o,e))}return n}class bx extends D2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vE extends D2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Bne(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Rm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Rm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=sq();return this.mutations.forEach((a=>{const i=e.get(a.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=r.has(a.key)?null:c;const d=hq(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Ut.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),jr())}isEqual(e){return this.batchId===e.batchId&&Zh(this.mutations,e.mutations,((r,n)=>LO(r,n)))&&Zh(this.baseMutations,e.baseMutations,((r,n)=>LO(r,n)))}}class wE{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Lt(e.mutations.length===n.length);let a=(function(){return Ine})();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,n[o].version);return new wE(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zne{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ia,Ur;function pq(t){switch(t){default:return kt();case qe.CANCELLED:case qe.UNKNOWN:case qe.DEADLINE_EXCEEDED:case qe.RESOURCE_EXHAUSTED:case qe.INTERNAL:case qe.UNAVAILABLE:case qe.UNAUTHENTICATED:return!1;case qe.INVALID_ARGUMENT:case qe.NOT_FOUND:case qe.ALREADY_EXISTS:case qe.PERMISSION_DENIED:case qe.FAILED_PRECONDITION:case qe.ABORTED:case qe.OUT_OF_RANGE:case qe.UNIMPLEMENTED:case qe.DATA_LOSS:return!0}}function mq(t){if(t===void 0)return xa("GRPC error has no .code"),qe.UNKNOWN;switch(t){case Ia.OK:return qe.OK;case Ia.CANCELLED:return qe.CANCELLED;case Ia.UNKNOWN:return qe.UNKNOWN;case Ia.DEADLINE_EXCEEDED:return qe.DEADLINE_EXCEEDED;case Ia.RESOURCE_EXHAUSTED:return qe.RESOURCE_EXHAUSTED;case Ia.INTERNAL:return qe.INTERNAL;case Ia.UNAVAILABLE:return qe.UNAVAILABLE;case Ia.UNAUTHENTICATED:return qe.UNAUTHENTICATED;case Ia.INVALID_ARGUMENT:return qe.INVALID_ARGUMENT;case Ia.NOT_FOUND:return qe.NOT_FOUND;case Ia.ALREADY_EXISTS:return qe.ALREADY_EXISTS;case Ia.PERMISSION_DENIED:return qe.PERMISSION_DENIED;case Ia.FAILED_PRECONDITION:return qe.FAILED_PRECONDITION;case Ia.ABORTED:return qe.ABORTED;case Ia.OUT_OF_RANGE:return qe.OUT_OF_RANGE;case Ia.UNIMPLEMENTED:return qe.UNIMPLEMENTED;case Ia.DATA_LOSS:return qe.DATA_LOSS;default:return kt()}}(Ur=Ia||(Ia={}))[Ur.OK=0]="OK",Ur[Ur.CANCELLED=1]="CANCELLED",Ur[Ur.UNKNOWN=2]="UNKNOWN",Ur[Ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ur[Ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ur[Ur.NOT_FOUND=5]="NOT_FOUND",Ur[Ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ur[Ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ur[Ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ur[Ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ur[Ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ur[Ur.ABORTED=10]="ABORTED",Ur[Ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ur[Ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ur[Ur.INTERNAL=13]="INTERNAL",Ur[Ur.UNAVAILABLE=14]="UNAVAILABLE",Ur[Ur.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Une(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vne=new Qd([4294967295,4294967295],0);function zO(t){const e=Une().encode(t),r=new SF;return r.update(e),new Uint8Array(r.digest())}function UO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qd([r,n],0),new Qd([a,i],0)]}class NE{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Sm(`Invalid padding: ${r}`);if(n<0)throw new Sm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Sm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Sm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Qd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Qd.fromNumber(n)));return a.compare(Vne)===1&&(a=new Qd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=zO(e),[n,a]=UO(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new NE(i,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=zO(e),[n,a]=UO(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Sm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Sx.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new wx(Ut.min(),a,new Un(cr),Ii(),jr())}}class Sx{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Sx(n,r,jr(),jr(),jr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class gq{constructor(e,r){this.targetId=e,this.me=r}}class xq{constructor(e,r,n=wa.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class VO{constructor(){this.fe=0,this.ge=qO(),this.pe=wa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=jr(),r=jr(),n=jr();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:kt()}})),new Sx(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=qO()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Fne{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ii(),this.qe=FO(),this.Qe=new Un(cr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:kt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(Bv(i))if(n===0){const o=new bt(i.path);this.Ue(r,o,Qn.newNoDocument(o,Ut.min()))}else Lt(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let o,c;try{o=Bu(n).toUint8Array()}catch(d){if(d instanceof UF)return tg("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new NE(o,a,i)}catch(d){return tg(d instanceof Sm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Bv(c.target)){const d=new bt(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Qn.newNoDocument(d,e))}i.be&&(r.set(o,i.ve()),i.Ce())}}));let n=jr();this.qe.forEach(((i,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const a=new wx(e,r,this.Qe,this.ke,n);return this.ke=Ii(),this.qe=FO(),this.Qe=new Un(cr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new VO,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new En(cr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||it("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new VO),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function FO(){return new Un(bt.comparator)}function qO(){return new Un(bt.comparator)}const qne={asc:"ASCENDING",desc:"DESCENDING"},Hne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gne={and:"AND",or:"OR"};class Wne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function P_(t,e){return t.useProto3Json||gx(e)?e:{value:e}}function sf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Kne(t,e){return sf(t,e.toTimestamp())}function is(t){return Lt(!!t),Ut.fromTimestamp((function(r){const n=pc(r);return new aa(n.seconds,n.nanos)})(t))}function jE(t,e){return L_(t,e).canonicalString()}function L_(t,e){const r=(function(a){return new Xr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function vq(t){const e=Xr.fromString(t);return Lt(Eq(e)),e}function dg(t,e){return jE(t.databaseId,e.path)}function ac(t,e){const r=vq(e);if(r.get(1)!==t.databaseId.projectId)throw new ht(qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ht(qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new bt(Sq(r))}function bq(t,e){return jE(t.databaseId,e)}function wq(t){const e=vq(t);return e.length===4?Xr.emptyPath():Sq(e)}function B_(t){return new Xr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Sq(t){return Lt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HO(t,e,r){return{name:dg(t,e),fields:r.value.mapValue.fields}}function Qne(t,e,r){const n=ac(t,e.name),a=is(e.updateTime),i=e.createTime?is(e.createTime):Ut.min(),o=new bs({mapValue:{fields:e.fields}}),c=Qn.newFoundDocument(n,a,i,o);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Xne(t,e){return"found"in e?(function(n,a){Lt(!!a.found),a.found.name,a.found.updateTime;const i=ac(n,a.found.name),o=is(a.found.updateTime),c=a.found.createTime?is(a.found.createTime):Ut.min(),d=new bs({mapValue:{fields:a.found.fields}});return Qn.newFoundDocument(i,o,c,d)})(t,e):"missing"in e?(function(n,a){Lt(!!a.missing),Lt(!!a.readTime);const i=ac(n,a.missing),o=is(a.readTime);return Qn.newNoDocument(i,o)})(t,e):kt()}function Yne(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:kt()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Lt(p===void 0||typeof p=="string"),wa.fromBase64String(p||"")):(Lt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),wa.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?qe.UNKNOWN:mq(h.code);return new ht(p,h.message||"")})(o);r=new xq(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=ac(t,n.document.name),i=is(n.document.updateTime),o=n.document.createTime?is(n.document.createTime):Ut.min(),c=new bs({mapValue:{fields:n.document.fields}}),d=Qn.newFoundDocument(a,i,o,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new bv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=ac(t,n.document),i=n.readTime?is(n.readTime):Ut.min(),o=Qn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new bv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=ac(t,n.document),i=n.removedTargetIds||[];r=new bv([],i,a,null)}else{if(!("filter"in e))return kt();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,o=new zne(a,i),c=n.targetId;r=new gq(c,o)}}return r}function hg(t,e){let r;if(e instanceof Ff)r={update:HO(t,e.key,e.value)};else if(e instanceof bx)r={delete:dg(t,e.key)};else if(e instanceof Nc)r={update:HO(t,e.key,e.data),updateMask:nae(e.fieldMask)};else{if(!(e instanceof vE))return kt();r={verify:dg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const c=o.transform;if(c instanceof ug)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof a0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof nf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof af)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw kt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:Kne(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:kt()})(t,e.precondition)),r}function $_(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?ya.updateTime(is(i.updateTime)):i.exists!==void 0?ya.exists(i.exists):ya.none()})(e.currentDocument):ya.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(o,c){let d=null;if("setToServerValue"in c)Lt(c.setToServerValue==="REQUEST_TIME"),d=new ug;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new a0(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new nf(p)}else"increment"in c?d=new af(o,c.increment):kt();const h=na.fromServerFormat(c.fieldPath);return new yE(h,d)})(t,a))):[];if(e.update){e.update.name;const a=ac(t,e.update.name),i=new bs({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(d){const h=d.fieldPaths||[];return new oi(h.map((p=>na.fromServerFormat(p))))})(e.updateMask);return new Nc(a,i,o,r,n)}return new Ff(a,i,r,n)}if(e.delete){const a=ac(t,e.delete);return new bx(a,r)}if(e.verify){const a=ac(t,e.verify);return new vE(a,r)}return kt()}function Jne(t,e){return t&&t.length>0?(Lt(e!==void 0),t.map((r=>(function(a,i){let o=a.updateTime?is(a.updateTime):is(i);return o.isEqual(Ut.min())&&(o=is(i)),new Lne(o,a.transformResults||[])})(r,e)))):[]}function Nq(t,e){return{documents:[bq(t,e.path)]}}function jq(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=bq(t,a);const i=(function(h){if(h.length!==0)return Aq(gn.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((p=>(function(x){return{field:Eh(x.field),direction:eae(x.dir)}})(p)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=P_(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function _q(t){let e=wq(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Lt(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const x=Tq(m);return x instanceof gn&&mE(x)?x.getFilters():[x]})(r.where));let o=[];r.orderBy&&(o=(function(m){return m.map((x=>(function(S){return new cg(Ch(S.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(x)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let x;return x=typeof m=="object"?m.value:m,gx(x)?null:x})(r.limit));let d=null;r.startAt&&(d=(function(m){const x=!!m.before,y=m.values||[];return new tf(y,x)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const x=!m.before,y=m.values||[];return new tf(y,x)})(r.endAt)),JF(e,a,o,i,c,"F",d,h)}function Zne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Tq(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ch(r.unaryFilter.field);return Lr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Ch(r.unaryFilter.field);return Lr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ch(r.unaryFilter.field);return Lr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ch(r.unaryFilter.field);return Lr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return kt()}})(t):t.fieldFilter!==void 0?(function(r){return Lr.create(Ch(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return gn.create(r.compositeFilter.filters.map((n=>Tq(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return kt()}})(r.compositeFilter.op))})(t):kt()}function eae(t){return qne[t]}function tae(t){return Hne[t]}function rae(t){return Gne[t]}function Eh(t){return{fieldPath:t.canonicalString()}}function Ch(t){return na.fromServerFormat(t.fieldPath)}function Aq(t){return t instanceof Lr?(function(r){if(r.op==="=="){if(EO(r.value))return{unaryFilter:{field:Eh(r.field),op:"IS_NAN"}};if(AO(r.value))return{unaryFilter:{field:Eh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(EO(r.value))return{unaryFilter:{field:Eh(r.field),op:"IS_NOT_NAN"}};if(AO(r.value))return{unaryFilter:{field:Eh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eh(r.field),op:tae(r.op),value:r.value}}})(t):t instanceof gn?(function(r){const n=r.getFilters().map((a=>Aq(a)));return n.length===1?n[0]:{compositeFilter:{op:rae(r.op),filters:n}}})(t):kt()}function nae(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function Eq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,r,n,a,i=Ut.min(),o=Ut.min(),c=wa.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Zl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Zl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(e){this.ct=e}}function aae(t,e){let r;if(e.document)r=Qne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=bt.fromSegments(e.noDocument.path),a=i0(e.noDocument.readTime);r=Qn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return kt();{const n=bt.fromSegments(e.unknownDocument.path),a=i0(e.unknownDocument.version);r=Qn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new aa(a[0],a[1]);return Ut.fromTimestamp(i)})(e.readTime)),r}function GO(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Uv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,o){return{name:dg(i,o.key),fields:o.data.value.mapValue.fields,updateTime:sf(i,o.version.toTimestamp()),createTime:sf(i,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:s0(e.version)};else{if(!e.isUnknownDocument())return kt();n.unknownDocument={path:r.path.toArray(),version:s0(e.version)}}return n}function Uv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function s0(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function i0(t){const e=new aa(t.seconds,t.nanoseconds);return Ut.fromTimestamp(e)}function Pd(t,e){const r=(e.baseMutations||[]).map((i=>$_(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>$_(t.ct,i))),a=aa.fromMillis(e.localWriteTimeMs);return new bE(e.batchId,a,r,n)}function Nm(t){const e=i0(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?i0(t.lastLimboFreeSnapshotVersion):Ut.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Lt(i.documents.length===1),Ri(yx(wq(i.documents[0])))})(t.query):(function(i){return Ri(_q(i))})(t.query),new Zl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,wa.fromBase64String(t.resumeToken))}function kq(t,e){const r=s0(e.snapshotVersion),n=s0(e.lastLimboFreeSnapshotVersion);let a;a=Bv(e.target)?Nq(t.ct,e.target):jq(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:n0(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function Iq(t){const e=_q({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zv(e,e.limit,"L"):e}function m3(t,e){return new SE(e.largestBatchId,$_(t.ct,e.overlayMutation))}function WO(t,e){const r=e.path.lastSegment();return[t,Fs(e.path.popLast()),r]}function KO(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:s0(n.readTime),documentKey:Fs(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sae{getBundleMetadata(e,r){return QO(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:i0(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return QO(e).put((function(a){return{bundleId:a.id,createTime:s0(is(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return XO(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:Iq(i.bundledQuery),readTime:i0(i.readTime)}})(n)}))}saveNamedQuery(e,r){return XO(e).put((function(a){return{name:a.name,readTime:s0(is(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function QO(t){return Xa(t,"bundles")}function XO(t){return Xa(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new P2(e,n)}getOverlay(e,r){return Zp(e).get(WO(this.userId,r)).next((n=>n?m3(this.serializer,n):null))}getOverlays(e,r){const n=Yo();return Oe.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,o)=>{const c=new SE(r,o);a.push(this.ht(e,c))})),Oe.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((o=>a.add(Fs(o.getCollectionPath()))));const i=[];return a.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);i.push(Zp(e).j("collectionPathOverlayIndex",c))})),Oe.waitFor(i)}getOverlaysForCollection(e,r,n){const a=Yo(),i=Fs(r),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Zp(e).U("collectionPathOverlayIndex",o).next((c=>{for(const d of c){const h=m3(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=Yo();let o;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Zp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=m3(this.serializer,h);i.size()<a||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Zp(e).put((function(a,i,o){const[c,d,h]=WO(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:hg(a.ct,o.mutation)}})(this.serializer,this.userId,r))}}function Zp(t){return Xa(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iae{Pt(e){return Xa(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?wa.fromUint8Array(n):wa.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Kn(e.integerValue));else if("doubleValue"in e){const n=Kn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),ag(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=pc(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Bu(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?VF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):O2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):kt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const o="value",c=((a=(n=i[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Kn(c)),this.Vt(o,r),this.Tt(i[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),bt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}Ld.vt=new Ld;function oae(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function YO(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const o=oae(255&n[i]);if(a+=o,o!==8)break}return a})(t);return Math.ceil(e/8)}class lae{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=YO(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=YO(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class cae{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class uae{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class em{constructor(){this.jt=new lae,this.Ht=new cae(this.jt),this.Jt=new uae(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Bd(this.indexId,this.documentKey,this.arrayValue,n)}}function iu(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=JO(t.arrayValue,e.arrayValue),r!==0?r:(r=JO(t.directionalValue,e.directionalValue),r!==0?r:bt.comparator(t.documentKey,e.documentKey)))}function JO(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.Xt=new En(((r,n)=>na.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Lt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=E_(e);if(r!==void 0&&!this.sn(r))return!1;const n=Od(e);let a=new Set,i=0,o=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[o++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(o>=this.en.length||!this._n(this.en[o++],c))return!1}return!0}an(){if(this.nn)return null;let e=new En(na.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new mv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new mv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new mv(n.field,n.dir==="asc"?0:1)));return new Lv(Lv.UNKNOWN_ID,this.collectionId,r,ng.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(t){var e,r;if(Lt(t instanceof Lr||t instanceof gn),t instanceof Lr){if(t instanceof YF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>Lr.create(t.field,"==",i))))||[];return gn.create(a,"or")}return t}const n=t.filters.map((a=>Oq(a)));return gn.create(n,t.op)}function dae(t){if(t.getFilters().length===0)return[];const e=V_(Oq(t));return Lt(Rq(e)),z_(e)||U_(e)?[e]:e.getFilters()}function z_(t){return t instanceof Lr}function U_(t){return t instanceof gn&&mE(t)}function Rq(t){return z_(t)||U_(t)||(function(r){if(r instanceof gn&&O_(r)){for(const n of r.getFilters())if(!z_(n)&&!U_(n))return!1;return!0}return!1})(t)}function V_(t){if(Lt(t instanceof Lr||t instanceof gn),t instanceof Lr)return t;if(t.filters.length===1)return V_(t.filters[0]);const e=t.filters.map((n=>V_(n)));let r=gn.create(e,t.op);return r=Vv(r),Rq(r)?r:(Lt(r instanceof gn),Lt(rf(r)),Lt(r.filters.length>1),r.filters.reduce(((n,a)=>_E(n,a))))}function _E(t,e){let r;return Lt(t instanceof Lr||t instanceof gn),Lt(e instanceof Lr||e instanceof gn),r=t instanceof Lr?e instanceof Lr?(function(a,i){return gn.create([a,i],"and")})(t,e):eR(t,e):e instanceof Lr?eR(e,t):(function(a,i){if(Lt(a.filters.length>0&&i.filters.length>0),rf(a)&&rf(i))return KF(a,i.getFilters());const o=O_(a)?a:i,c=O_(a)?i:a,d=o.filters.map((h=>_E(h,c)));return gn.create(d,"or")})(t,e),Vv(r)}function eR(t,e){if(rf(e))return KF(e,t.getFilters());{const r=e.filters.map((n=>_E(t,n)));return gn.create(r,"or")}}function Vv(t){if(Lt(t instanceof Lr||t instanceof gn),t instanceof Lr)return t;const e=t.getFilters();if(e.length===1)return Vv(e[0]);if(GF(t))return t;const r=e.map((a=>Vv(a))),n=[];return r.forEach((a=>{a instanceof Lr?n.push(a):a instanceof gn&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:gn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(){this.un=new TE}addToCollectionParentIndex(e,r){return this.un.add(r),Oe.resolve()}getCollectionParents(e,r){return Oe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Oe.resolve()}deleteFieldIndex(e,r){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,r){return Oe.resolve()}getDocumentsMatchingTarget(e,r){return Oe.resolve(null)}getIndexType(e,r){return Oe.resolve(0)}getFieldIndexes(e,r){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,r){return Oe.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,r){return Oe.resolve(Pi.min())}updateCollectionGroup(e,r,n){return Oe.resolve()}updateIndexEntries(e,r){return Oe.resolve()}}class TE{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new En(Xr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new En(Xr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Uint8Array(0);class fae{constructor(e,r){this.databaseId=r,this.cn=new TE,this.ln=new Ku((n=>n0(n)),((n,a)=>xx(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:Fs(a)};return tR(e).put(i)}return Oe.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[CF(r),""],!1,!0);return tR(e).U(a).next((i=>{for(const o of i){if(o.collectionId!==r)break;n.push(Xo(o.parent))}return n}))}addFieldIndex(e,r){const n=tm(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const o=yh(e);return i.next((c=>{o.put(KO(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=tm(e),a=yh(e),i=xh(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=tm(e),n=xh(e),a=yh(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return Oe.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new ZO(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=xh(e);let a=!0;const i=new Map;return Oe.forEach(this.hn(r),(o=>this.Pn(e,o).next((c=>{a&&(a=!!c),i.set(o,c)})))).next((()=>{if(a){let o=jr();const c=[];return Oe.forEach(i,((d,h)=>{it("IndexedDbIndexManager",`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${n0(r)}`);const p=(function(O,L){const I=E_(L);if(I===void 0)return null;for(const R of $v(O,I.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null})(h,d),m=(function(O,L){const I=new Map;for(const R of Od(L))for(const A of $v(O,R.fieldPath))switch(A.op){case"==":case"in":I.set(R.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return I.set(R.fieldPath.canonicalString(),A.value),Array.from(I.values())}return null})(h,d),x=(function(O,L){const I=[];let R=!0;for(const A of Od(L)){const E=A.kind===0?RO(O,A.fieldPath,O.startAt):MO(O,A.fieldPath,O.startAt);I.push(E.value),R&&(R=E.inclusive)}return new tf(I,R)})(h,d),y=(function(O,L){const I=[];let R=!0;for(const A of Od(L)){const E=A.kind===0?MO(O,A.fieldPath,O.endAt):RO(O,A.fieldPath,O.endAt);I.push(E.value),R&&(R=E.inclusive)}return new tf(I,R)})(h,d),S=this.In(d,h,x),N=this.In(d,h,y),w=this.Tn(d,h,m),T=this.En(d.indexId,p,S,x.inclusive,N,y.inclusive,w);return Oe.forEach(T,(C=>n.G(C,r.limit).next((O=>{O.forEach((L=>{const I=bt.fromSegments(L.documentKey);o.has(I)||(o=o.add(I),c.push(I))}))}))))})).next((()=>c))}return Oe.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=dae(gn.create(e.filters,"and")).map((n=>M_(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,o,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const x=r?this.dn(r[m/h]):j1,y=this.An(e,x,n[m%h],a),S=this.Rn(e,x,i[m%h],o),N=c.map((w=>this.An(e,x,w,!0)));p.push(...this.createRange(y,S,N))}return p}An(e,r,n,a){const i=new Bd(e,bt.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Bd(e,bt.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new ZO(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let o=null;for(const c of i)n.rn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,r){let n=2;const a=this.hn(r);return Oe.forEach(a,(i=>this.Pn(e,i).next((o=>{o?n!==0&&o.fields.length<(function(d){let h=new En(na.comparator),p=!1;for(const m of d.filters)for(const x of m.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?p=!0:h=h.add(x.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(o){return o.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new em;for(const a of Od(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const o=n.Yt(a.kind);Ld.vt.It(i,o)}return n.zt()}dn(e){const r=new em;return Ld.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new em;return Ld.vt.It(og(this.databaseId,r),n.Yt((function(i){const o=Od(i);return o.length===0?0:o[o.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new em);let i=0;for(const o of Od(e)){const c=n[i++];for(const d of a)if(this.fn(r,o.fieldPath)&&lg(c))a=this.gn(a,o,c);else{const h=d.Yt(o.kind);Ld.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const o of n.arrayValue.values||[])for(const c of a){const d=new em;d.seed(c.zt()),Ld.vt.It(o,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof Lr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=tm(e),a=yh(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const o=[];return Oe.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{o.push((function(p,m){const x=m?new ng(m.sequenceNumber,new Pi(i0(m.readTime),new bt(Xo(m.documentKey)),m.largestBatchId)):ng.empty(),y=p.fields.map((([S,N])=>new mv(na.fromServerFormat(S),N)));return new Lv(p.indexId,p.collectionGroup,y,x)})(c,d))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:cr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=tm(e),i=yh(e);return this.yn(e).next((o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Oe.forEach(c,(d=>i.put(KO(d.indexId,this.uid,o,n))))))))}updateIndexEntries(e,r){const n=new Map;return Oe.forEach(r,((a,i)=>{const o=n.get(a.collectionGroup);return(o?Oe.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),Oe.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?Oe.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return xh(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return xh(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=xh(e);let i=new En(iu);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((o,c)=>{i=i.add(new Bd(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new En(iu);const a=this.Vn(r,e);if(a==null)return n;const i=E_(r);if(i!=null){const o=e.data.field(i.fieldPath);if(lg(o))for(const c of o.arrayValue.values||[])n=n.add(new Bd(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Bd(r.indexId,e.key,j1,a));return n}bn(e,r,n,a,i){it("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return(function(d,h,p,m,x){const y=d.getIterator(),S=h.getIterator();let N=gh(y),w=gh(S);for(;N||w;){let T=!1,C=!1;if(N&&w){const O=p(N,w);O<0?C=!0:O>0&&(T=!0)}else N!=null?C=!0:T=!0;T?(m(w),w=gh(S)):C?(x(N),N=gh(y)):(N=gh(y),w=gh(S))}})(a,i,iu,(c=>{o.push(this.Dn(e,r,n,c))}),(c=>{o.push(this.vn(e,r,n,c))})),Oe.waitFor(o)}yn(e){let r=1;return yh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((o,c)=>iu(o,c))).filter(((o,c,d)=>!c||iu(o,d[c-1])!==0));const a=[];a.push(e);for(const o of n){const c=iu(o,e),d=iu(o,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(o),a.push(o.Zt());else if(d>0)break}a.push(r);const i=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const c=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,j1,[]],d=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,j1,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return iu(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(rR)}getMinOffset(e,r){return Oe.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||kt())))).next(rR)}}function tR(t){return Xa(t,"collectionParents")}function xh(t){return Xa(t,"indexEntries")}function tm(t){return Xa(t,"indexConfiguration")}function yh(t){return Xa(t,"indexState")}function rR(t){Lt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;uE(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Pi(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ri{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mq(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],o=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:o},((p,m,x)=>(c++,x.delete())));i.push(d.next((()=>{Lt(c===1)})));const h=[];for(const p of r.mutations){const m=PF(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return Oe.waitFor(i).next((()=>h))}function Fv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw kt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(41943040,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class L2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Lt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new L2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ou(e).J({index:"userMutationsIndex",range:n},((a,i,o)=>{r=!1,o.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=kh(e),o=ou(e);return o.add({}).next((c=>{Lt(typeof c=="number");const d=new bE(c,r,n,a),h=(function(y,S,N){const w=N.baseMutations.map((C=>hg(y.ct,C))),T=N.mutations.map((C=>hg(y.ct,C)));return{userId:S,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:w,mutations:T}})(this.serializer,this.userId,d),p=[];let m=new En(((x,y)=>cr(x.canonicalString(),y.canonicalString())));for(const x of a){const y=PF(this.userId,x.key.path,c);m=m.add(x.key.path.popLast()),p.push(o.put(h)),p.push(i.put(y,Jre))}return m.forEach((x=>{p.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Oe.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return ou(e).get(r).next((n=>n?(Lt(n.userId===this.userId),Pd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Oe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ou(e).J({index:"userMutationsIndex",range:a},((o,c,d)=>{c.userId===this.userId&&(Lt(c.batchId>=n),i=Pd(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ou(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,o)=>{n=i.batchId,o.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ou(e).U("userMutationsIndex",r).next((n=>n.map((a=>Pd(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=gv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return kh(e).J({range:a},((o,c,d)=>{const[h,p,m]=o,x=Xo(p);if(h===this.userId&&r.path.isEqual(x))return ou(e).get(m).next((y=>{if(!y)throw kt();Lt(y.userId===this.userId),i.push(Pd(this.serializer,y))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new En(cr);const a=[];return r.forEach((i=>{const o=gv(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=kh(e).J({range:c},((h,p,m)=>{const[x,y,S]=h,N=Xo(y);x===this.userId&&i.path.isEqual(N)?n=n.add(S):m.done()}));a.push(d)})),Oe.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=gv(this.userId,n),o=IDBKeyRange.lowerBound(i);let c=new En(cr);return kh(e).J({range:o},((d,h,p)=>{const[m,x,y]=d,S=Xo(x);m===this.userId&&n.isPrefixOf(S)?S.length===a&&(c=c.add(y)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(ou(e).get(i).next((o=>{if(o===null)throw kt();Lt(o.userId===this.userId),n.push(Pd(this.serializer,o))})))})),Oe.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return Mq(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Oe.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Oe.resolve();const n=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),a=[];return kh(e).J({range:n},((i,o,c)=>{if(i[0]===this.userId){const d=Xo(i[1]);a.push(d)}else c.done()})).next((()=>{Lt(a.length===0)}))}))}containsKey(e,r){return Dq(e,this.userId,r)}Nn(e){return Pq(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Dq(t,e,r){const n=gv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let o=!1;return kh(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,x]=c;p===e&&m===a&&(o=!0),h.done()})).next((()=>o))}function ou(t){return Xa(t,"mutations")}function kh(t){return Xa(t,"documentMutations")}function Pq(t){return Xa(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new o0(0)}static kn(){return new o0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pae{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new o0(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Ut.fromTimestamp(new aa(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>vh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Lt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return vh(e).J(((o,c)=>{const d=Nm(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>Oe.waitFor(i))).next((()=>a))}forEachTarget(e,r){return vh(e).J(((n,a)=>{const i=Nm(a);r(i)}))}qn(e){return aR(e).get("targetGlobalKey").next((r=>(Lt(r!==null),r)))}Qn(e,r){return aR(e).put("targetGlobalKey",r)}Kn(e,r){return vh(e).put(kq(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=n0(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return vh(e).J({range:a,index:"queryTargetsIndex"},((o,c,d)=>{const h=Nm(c);xx(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=gu(e);return r.forEach((o=>{const c=Fs(o.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,o))})),Oe.waitFor(a)}removeMatchingKeys(e,r,n){const a=gu(e);return Oe.forEach(r,(i=>{const o=Fs(i.path);return Oe.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=gu(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=gu(e);let i=jr();return a.J({range:n,H:!0},((o,c,d)=>{const h=Xo(o[1]),p=new bt(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=Fs(r.path),a=IDBKeyRange.bound([n],[CF(n)],!1,!0);let i=0;return gu(e).J({index:"documentTargetsIndex",H:!0,range:a},(([o,c],d,h)=>{o!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return vh(e).get(r).next((n=>n?Nm(n):null))}}function vh(t){return Xa(t,"targets")}function aR(t){return Xa(t,"targetGlobal")}function gu(t){return Xa(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR([t,e],[r,n]){const a=cr(t,r);return a===0?cr(e,n):a}class mae{constructor(e){this.Un=e,this.buffer=new En(sR),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();sR(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class gae{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){it("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Wu(r)?it("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Gu(r)}await this.Hn(3e5)}))}}class xae{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Oe.resolve(ii.oe);const n=new mae(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(nR)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nR):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,o,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,o=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),Th()<=Pr.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${a} in `+(c-o)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function yae(t,e){return new xae(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(e,r){this.db=e,this.garbageCollector=yae(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return _1(e,n)}removeReference(e,r,n){return _1(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return _1(e,r)}nr(e,r){return(function(a,i){let o=!1;return Pq(a).Y((c=>Dq(a,c,i).next((d=>(d&&(o=!0),Oe.resolve(!d)))))).next((()=>o))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((o,c)=>{if(c<=r){const d=this.nr(e,o).next((h=>{if(!h)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Ut.min()),gu(e).delete((function(m){return[0,Fs(m.path)]})(o)))))}));a.push(d)}})).next((()=>Oe.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return _1(e,r)}tr(e,r){const n=gu(e);let a,i=ii.oe;return n.J({index:"documentTargetsIndex"},(([o,c],{path:d,sequenceNumber:h})=>{o===0?(i!==ii.oe&&r(new bt(Xo(a)),i),i=h,a=d):i=ii.oe})).next((()=>{i!==ii.oe&&r(new bt(Xo(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _1(t,e){return gu(t).put((function(n,a){return{targetId:0,path:Fs(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(){this.changes=new Ku((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Oe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Nd(e).put(n)}removeEntry(e,r,n){return Nd(e).delete((function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Uv(o),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Qn.newInvalidDocument(r);return Nd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rm(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Qn.newInvalidDocument(r)};return Nd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rm(r))},((a,i)=>{n={document:this.ir(r,i),size:Fv(i)}})).next((()=>n))}getEntries(e,r){let n=Ii();return this._r(e,r,((a,i)=>{const o=this.ir(a,i);n=n.insert(a,o)})).next((()=>n))}ar(e,r){let n=Ii(),a=new Un(bt.comparator);return this._r(e,r,((i,o)=>{const c=this.ir(i,o);n=n.insert(i,c),a=a.insert(i,Fv(o))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return Oe.resolve();let a=new En(lR);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(rm(a.first()),rm(a.last())),o=a.getIterator();let c=o.getNext();return Nd(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=bt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&lR(c,m)<0;)n(c,null),c=o.getNext();c&&c.isEqual(m)&&(n(c,h),c=o.hasNext()?o.getNext():null),c?p.$(rm(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const o=r.path,c=[o.popLast().toArray(),o.lastSegment(),Uv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nd(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=Ii();for(const m of h){const x=this.ir(bt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);x.isFoundDocument()&&(vx(r,x)||a.has(x.key))&&(p=p.insert(x.key,x))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=Ii();const o=oR(r,n),c=oR(r,Pi.max());return Nd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},((d,h,p)=>{const m=this.ir(bt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new wae(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return iR(e).get("remoteDocumentGlobalKey").next((r=>(Lt(!!r),r)))}rr(e,r){return iR(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=aae(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Ut.min())))return n}return Qn.newInvalidDocument(e)}}function Bq(t){return new bae(t)}class wae extends Lq{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Ku((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new En(((i,o)=>cr(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),o.isValidDocument()){const d=GO(this.cr.serializer,o);a=a.add(i.path.popLast());const h=Fv(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=GO(this.cr.serializer,o.convertToNoDocument(Ut.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),Oe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,o)=>{this.lr.set(i,{size:o,readTime:n.get(i).readTime})})),n)))}}function iR(t){return Xa(t,"remoteDocumentGlobal")}function Nd(t){return Xa(t,"remoteDocumentsV14")}function rm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oR(t,e){const r=e.documentKey.path.toArray();return[t,Uv(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function lR(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=cr(r[i],n[i]),a)return a;return a=cr(r.length,n.length),a||(a=cr(r[r.length-2],n[n.length-2]),a||cr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sae{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&Rm(n.mutation,a,oi.empty(),aa.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,jr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=jr()){const a=Yo();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let o=wm();return i.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=Yo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,jr())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let i=Ii();const o=Om(),c=(function(){return Om()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof Nc)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Rm(p.mutation,h,p.mutation.getFieldMask(),aa.now())):o.set(h.key,oi.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>o.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new Sae(p,(m=o.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=Om();let a=new Un(((o,c)=>o-c)),i=jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||oi.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||jr()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=sq();p.forEach((x=>{if(!i.has(x)){const y=hq(r.get(x),n.get(x));y!==null&&m.set(x,y),i=i.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Oe.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):ZF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Oe.resolve(Yo());let c=-1,d=i;return o.next((h=>Oe.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Oe.resolve():this.remoteDocumentCache.getEntry(e,p).next((x=>{d=d.insert(p,x)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,jr()))).next((p=>({batchId:c,changes:aq(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new bt(r)).next((n=>{let a=wm();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let o=wm();return this.indexManager.getCollectionParents(e,i).next((c=>Oe.forEach(c,(d=>{const h=(function(m,x){return new Vf(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,x)=>{o=o.insert(m,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((o=>{i.forEach(((d,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Qn.newInvalidDocument(p)))}));let c=wm();return o.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&Rm(p.mutation,h,oi.empty(),aa.now()),vx(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Oe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:is(a.createTime)}})(r)),Oe.resolve()}getNamedQuery(e,r){return Oe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:Iq(a.bundledQuery),readTime:is(a.readTime)}})(r)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jae{constructor(){this.overlays=new Un(bt.comparator),this.Ir=new Map}getOverlay(e,r){return Oe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Yo();return Oe.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),Oe.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Oe.resolve()}getOverlaysForCollection(e,r,n){const a=Yo(),i=r.length+1,o=new bt(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return Oe.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new Un(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=Yo(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Yo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return Oe.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new SE(r,n));let i=this.Ir.get(r);i===void 0&&(i=jr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(){this.sessionToken=wa.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.Tr=new En(ns.Er),this.dr=new En(ns.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ns(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new ns(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new bt(new Xr([])),n=new ns(r,e),a=new ns(r,e+1),i=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new bt(new Xr([])),n=new ns(r,e),a=new ns(r,e+1);let i=jr();return this.dr.forEachInRange([n,a],(o=>{i=i.add(o.key)})),i}containsKey(e){const r=new ns(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ns{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return bt.comparator(e.key,r.key)||cr(e.wr,r.wr)}static Ar(e,r){return cr(e.wr,r.wr)||bt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tae{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new En(ns.Er)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bE(i,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new ns(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Oe.resolve(o)}lookupMutationBatch(e,r){return Oe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return Oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ns(r,0),a=new ns(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);i.push(c)})),Oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new En(cr);return r.forEach((a=>{const i=new ns(a,0),o=new ns(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(c=>{n=n.add(c.wr)}))})),Oe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;bt.isDocumentKey(i)||(i=i.child(""));const o=new ns(new bt(i),0);let c=new En(cr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),Oe.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Lt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Oe.forEach(r.mutations,(a=>{const i=new ns(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new ns(r,0),a=this.br.firstAfterOrEqual(n);return Oe.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aae{constructor(e){this.Mr=e,this.docs=(function(){return new Un(bt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Oe.resolve(n?n.document.mutableCopy():Qn.newInvalidDocument(r))}getEntries(e,r){let n=Ii();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Qn.newInvalidDocument(a))})),Oe.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=Ii();const o=r.path,c=new bt(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||uE(IF(p),n)<=0||(a.has(p.key)||vx(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Oe.resolve(i)}getAllFromCollectionGroup(e,r,n,a){kt()}Or(e,r){return Oe.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new Eae(this)}getSize(e){return Oe.resolve(this.size)}}class Eae extends Lq{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),Oe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cae{constructor(e){this.persistence=e,this.Nr=new Ku((r=>n0(r)),xx),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.Lr=0,this.Br=new AE,this.targetCount=0,this.kr=o0.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Oe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new o0(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Oe.resolve()}updateTargetData(e,r){return this.Kn(r),Oe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),Oe.waitFor(i).next((()=>a))}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Oe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Oe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((o=>{i.push(a.markPotentiallyOrphaned(e,o))})),Oe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Oe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Oe.resolve(n)}containsKey(e,r){return Oe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ii(0),this.Kr=!1,this.Kr=!0,this.$r=new _ae,this.referenceDelegate=e(this),this.Ur=new Cae(this),this.indexManager=new hae,this.remoteDocumentCache=(function(a){return new Aae(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new Cq(r),this.Gr=new Nae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new jae,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Tae(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){it("MemoryPersistence","Starting transaction:",e);const a=new kae(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return Oe.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class kae extends RF{constructor(e){super(),this.currentSequenceNumber=e}}class B2{constructor(e){this.persistence=e,this.Jr=new AE,this.Yr=null}static Zr(e){return new B2(e)}get Xr(){if(this.Yr)return this.Yr;throw kt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Oe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Oe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Oe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Xr,(n=>{const a=bt.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Ut.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Oe.or([()=>Oe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iae{constructor(e){this.serializer=e}O(e,r,n,a){const i=new I2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SO,{unique:!0}),d.createObjectStore("documentMutations")})(e),cR(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let o=Oe.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),cR(e)),o=o.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(o=o.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SO,{unique:!0});const m=h.store("mutations"),x=p.map((y=>m.put(y)));return Oe.waitFor(x)}))})(e,i)))),o=o.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(o=o.next((()=>this.ni(i)))),n<6&&a>=6&&(o=o.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(o=o.next((()=>this.ii(i)))),n<8&&a>=8&&(o=o.next((()=>this.si(e,i)))),n<9&&a>=9&&(o=o.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(o=o.next((()=>this.oi(i)))),n<11&&a>=11&&(o=o.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(o=o.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:une});h.createIndex("collectionPathOverlayIndex",dne,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",hne,{unique:!1})})(e)}))),n<13&&a>=13&&(o=o.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Zre});h.createIndex("documentKeyIndex",ene),h.createIndex("collectionGroupIndex",tne)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(o=o.next((()=>this.ai(e,i)))),n<15&&a>=15&&(o=o.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:ine}).createIndex("sequenceNumberIndex",one,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:lne}).createIndex("documentKeyIndex",cne,{unique:!1})})(e)))),n<16&&a>=16&&(o=o.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(o=o.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=Fv(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>Oe.forEach(a,(i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next((c=>Oe.forEach(c,(d=>{Lt(d.userId===i.userId);const h=Pd(this.serializer,d);return Mq(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((o,c)=>{const d=new Xr(o),h=(function(m){return[0,Fs(m)]})(d);i.push(r.get(h).next((p=>p?Oe.resolve():(m=>r.put({targetId:0,path:Fs(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>Oe.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:sne});const n=r.store("collectionParents"),a=new TE,i=o=>{if(a.add(o)){const c=o.lastSegment(),d=o.popLast();return n.put({collectionId:c,parent:Fs(d)})}};return r.store("remoteDocuments").J({H:!0},((o,c)=>{const d=new Xr(o);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([o,c,d],h)=>{const p=Xo(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=Nm(a),o=kq(this.serializer,i);return r.put(o)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,o)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new bt(Xr.fromString(m.document.name).popFirst(5)):m.noDocument?bt.fromSegments(m.noDocument.path):m.unknownDocument?bt.fromSegments(m.unknownDocument.path):kt()})(o).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(c.put(h))})).next((()=>Oe.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=Bq(this.serializer),i=new zq(B2.Zr,this.serializer.ct);return n.U().next((o=>{const c=new Map;return o.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:jr();Pd(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),Oe.forEach(c,((d,h)=>{const p=new Es(h),m=P2.lt(this.serializer,p),x=i.getIndexManager(p),y=L2.lt(p,this.serializer,x,i.referenceDelegate);return new $q(a,y,m,x).recalculateAndSaveOverlaysForDocumentKeys(new C_(r,ii.oe),d).next()}))}))}}function cR(t){t.createObjectStore("targetDocuments",{keyPath:nne}).createIndex("documentTargetsIndex",ane,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rne,{unique:!0}),t.createObjectStore("targetGlobal")}const g3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class EE{constructor(e,r,n,a,i,o,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=o,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=x=>Promise.resolve(),!EE.D())throw new ht(qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vae(this,a),this.Ai=r+"main",this.serializer=new Cq(d),this.Ri=new Iu(this.Ai,this.hi,new Iae(this.serializer)),this.$r=new iae,this.Ur=new pae(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Bq(this.serializer),this.Gr=new sae,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&xa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ht(qe.FAILED_PRECONDITION,g3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new ii(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>T1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Wu(e))return it("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return it("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return nm(e).get("owner").next((r=>Oe.resolve(this.vi(r))))}Ci(e){return T1(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Xa(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),o=a.filter((c=>i.indexOf(c)===-1));return Oe.forEach(o,(c=>n.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Oe.resolve(!0):nm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ht(qe.FAILED_PRECONDITION,g3);return!1}}return!(!this.networkEnabled||!this.inForeground)||T1(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||o&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&it("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new C_(e,ii.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>T1(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return L2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fae(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return P2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){it("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?mne:d===16?pne:d===15?hE:d===14?$F:d===13?BF:d===12?fne:d===11?LF:void kt()})(this.hi);let o;return this.Ri.runTransaction(e,a,i,(c=>(o=new C_(c,this.Qr?this.Qr.next():ii.oe),r==="readwrite-primary"?this.wi(o).next((d=>!!d||this.Si(o))).next((d=>{if(!d)throw xa(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new ht(qe.FAILED_PRECONDITION,OF);return n(o)})).next((d=>this.Di(o).next((()=>d)))):this.Ki(o).next((()=>n(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Ki(e){return nm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ht(qe.FAILED_PRECONDITION,g3)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nm(e).put("owner",r)}static D(){return Iu.D()}bi(e){const r=nm(e);return r.get("owner").next((n=>this.vi(n)?(it("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Oe.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(xa(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;BV()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return it("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return xa("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){xa("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nm(t){return Xa(t,"owner")}function T1(t){return Xa(t,"clientMetadata")}function Uq(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=jr(),a=jr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new CE(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return BV()?8:MF(Ka())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Oae;return this.Xi(e,r,o).next((c=>{if(i.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(Th()<=Pr.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",Ah(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Oe.resolve()):(Th()<=Pr.DEBUG&&it("QueryEngine","Query:",Ah(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Th()<=Pr.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",Ah(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(r))):Oe.resolve())}Yi(e,r){if(DO(r))return Oe.resolve(null);let n=Ri(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=zv(r,null,"F"),n=Ri(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=jr(...i);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,zv(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return DO(r)||a.isEqual(Ut.min())?Oe.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(r,i);return this.ns(r,o,n,a)?Oe.resolve(null):(Th()<=Pr.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ah(r)),this.rs(e,o,r,kF(a,-1)).next((c=>c)))}))}ts(e,r){let n=new En(rq(e));return r.forEach(((a,i)=>{vx(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return Th()<=Pr.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",Ah(r)),this.Ji.getDocumentsMatchingQuery(e,r,Pi.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rae{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Un(cr),this._s=new Ku((i=>n0(i)),xx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $q(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function Fq(t,e,r,n){return new Rae(t,e,r,n)}async function qq(t,e){const r=Dt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],c=[];let d=jr();for(const h of a){o.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function Mae(t,e){const r=Dt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,x=m.keys();let y=Oe.resolve();return x.forEach((S=>{y=y.next((()=>p.getEntry(d,S))).next((N=>{const w=h.docVersions.get(S);Lt(w!==null),N.version.compareTo(w)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=jr();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function Hq(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Dae(t,e){const r=Dt(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const x=a.get(m);if(!x)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let y=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(wa.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):p.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(p.resumeToken,n)),a=a.insert(m,y),(function(N,w,T){return N.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(x,y,p)&&c.push(r.Ur.updateTargetData(i,y))}));let d=Ii(),h=jr();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(Pae(i,o,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Ut.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return Oe.waitFor(c).next((()=>o.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function Pae(t,e,r){let n=jr(),a=jr();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let o=Ii();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Ut.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):it("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function Lae(t,e){const r=Dt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function qv(t,e){const r=Dt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,Oe.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new Zl(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function of(t,e,r){const n=Dt(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!Wu(o))throw o;it("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function F_(t,e,r){const n=Dt(t);let a=Ut.min(),i=jr();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,p){const m=Dt(d),x=m._s.get(p);return x!==void 0?Oe.resolve(m.os.get(x)):m.Ur.getTargetData(h,p)})(n,o,Ri(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Ut.min(),r?i:jr()))).next((c=>(Kq(n,tq(e),c),{documents:c,Ts:i})))))}function Gq(t,e){const r=Dt(t),n=Dt(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((o=>o?o.target:null))))}function Wq(t,e){const r=Dt(t),n=r.us.get(e)||Ut.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,kF(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(Kq(r,e,a),a)))}function Kq(t,e,r){let n=t.us.get(e)||Ut.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function uR(t,e){return`firestore_clients_${t}_${e}`}function dR(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function x3(t,e){return`firestore_targets_${t}_${e}`}class Hv{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,o=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return o&&a.error&&(o=typeof a.error.message=="string"&&typeof a.error.code=="string",o&&(i=new ht(a.error.code,a.error.message))),o?new Hv(e,r,a.state,i):(xa("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new ht(n.error.code,n.error.message))),i?new Mm(e,n.state,a):(xa("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gv{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=gE();for(let o=0;a&&o<n.activeTargetIds.length;++o)a=DF(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return a?new Gv(e,i):(xa("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class kE{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new kE(r.clientId,r.onlineState):(xa("SharedClientState",`Failed to parse online state: ${e}`),null)}}class q_{constructor(){this.activeTargetIds=gE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y3{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Un(cr),this.started=!1,this.bs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=uR(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new q_),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(uR(this.persistenceKey,n));if(a){const i=Gv.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(x3(this.persistenceKey,e));if(a){const i=Mm.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(x3(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return it("SharedClientState","READ",e,r),r}setItem(e,r){it("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){it("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(it("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void xa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let o=ii.oe;if(i!=null)try{const c=JSON.parse(i);Lt(typeof c=="number"),o=c}catch(c){xa("SharedClientState","Failed to read sequence number from WebStorage",c)}return o})(r.newValue);n!==ii.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new Hv(this.currentUser,e,r,n),i=dR(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=dR(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=x3(this.persistenceKey,e),i=new Mm(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Gv.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return Hv.Rs(new Es(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return Mm.Rs(a,r)}Ls(e){return kE.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);it("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),o=[],c=[];return i.forEach((d=>{a.has(d)||o.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(o,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=gE();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class Qq{constructor(){this.so=new q_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new q_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bae{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A1=null;function v3(){return A1===null?A1=(function(){return 268435456+Math.round(2147483648*Math.random())})():A1++,"0x"+A1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="WebChannelConnection";class Uae extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,o){const c=v3(),d=this.xo(r,n.toUriEncodedString());it("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(r,d,h,a).then((p=>(it("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw tg("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,o,c){return this.Mo(r,n,a,i,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uf})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>r[o]=i)),a&&a.headers.forEach(((i,o)=>r[o]=i))}xo(r,n){const a=$ae[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=v3();return new Promise(((o,c)=>{const d=new NF;d.setWithCredentials(!0),d.listenOnce(jF.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case pv.NO_ERROR:const p=d.getResponseJson();it(Ts,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case pv.TIMEOUT:it(Ts,`RPC '${e}' ${i} timed out`),c(new ht(qe.DEADLINE_EXCEEDED,"Request time out"));break;case pv.HTTP_ERROR:const m=d.getStatus();if(it(Ts,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x==null?void 0:x.error;if(y&&y.status&&y.message){const S=(function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(qe).indexOf(T)>=0?T:qe.UNKNOWN})(y.status);c(new ht(S,y.message))}else c(new ht(qe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ht(qe.UNAVAILABLE,"Connection failed."));break;default:kt()}}finally{it(Ts,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);it(Ts,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=v3(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=AF(),c=TF(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");it(Ts,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=o.createWebChannel(p,d);let x=!1,y=!1;const S=new zae({Io:w=>{y?it(Ts,`Not sending because RPC '${e}' stream ${a} is closed:`,w):(x||(it(Ts,`Opening RPC '${e}' stream ${a} transport.`),m.open(),x=!0),it(Ts,`RPC '${e}' stream ${a} sending:`,w),m.send(w))},To:()=>m.close()}),N=(w,T,C)=>{w.listen(T,(O=>{try{C(O)}catch(L){setTimeout((()=>{throw L}),0)}}))};return N(m,bm.EventType.OPEN,(()=>{y||(it(Ts,`RPC '${e}' stream ${a} transport opened.`),S.yo())})),N(m,bm.EventType.CLOSE,(()=>{y||(y=!0,it(Ts,`RPC '${e}' stream ${a} transport closed`),S.So())})),N(m,bm.EventType.ERROR,(w=>{y||(y=!0,tg(Ts,`RPC '${e}' stream ${a} transport errored:`,w),S.So(new ht(qe.UNAVAILABLE,"The operation could not be completed")))})),N(m,bm.EventType.MESSAGE,(w=>{var T;if(!y){const C=w.data[0];Lt(!!C);const O=C,L=O.error||((T=O[0])===null||T===void 0?void 0:T.error);if(L){it(Ts,`RPC '${e}' stream ${a} received error:`,L);const I=L.status;let R=(function(k){const U=Ia[k];if(U!==void 0)return mq(U)})(I),A=L.message;R===void 0&&(R=qe.INTERNAL,A="Unknown error status: "+I+" with message "+L.message),y=!0,S.So(new ht(R,A)),m.close()}else it(Ts,`RPC '${e}' stream ${a} received:`,C),S.bo(C)}})),N(c,_F.STAT_EVENT,(w=>{w.stat===A_.PROXY?it(Ts,`RPC '${e}' stream ${a} detected buffering proxy`):w.stat===A_.NOPROXY&&it(Ts,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{S.wo()}),0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(){return typeof window<"u"?window:null}function wv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){return new Wne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&it("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e,r,n,a,i,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new IE(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===qe.RESOURCE_EXHAUSTED?(xa(r.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===qe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new ht(qe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return it("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Vae extends Yq{constructor(e,r,n,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Yne(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Ut.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ut.min():o.readTime?is(o.readTime):Ut.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=B_(this.serializer),r.addTarget=(function(i,o){let c;const d=o.target;if(c=Bv(d)?{documents:Nq(i,d)}:{query:jq(i,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=yq(i,o.resumeToken);const h=P_(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ut.min())>0){c.readTime=sf(i,o.snapshotVersion.toTimestamp());const h=P_(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=Zne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=B_(this.serializer),r.removeTarget=e,this.a_(r)}}class Fae extends Yq{constructor(e,r,n,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Jne(e.writeResults,e.commitTime),n=is(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=B_(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>hg(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ht(qe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,L_(r,n),a,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ht(qe.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,L_(r,n),a,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ht(qe.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Hae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xa(r),this.D_=!1):it("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{n.enqueueAndForget((async()=>{E0(this)&&(it("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Dt(d);h.L_.add(4),await Nx(h),h.q_.set("Unknown"),h.L_.delete(4),await z2(h)})(this))}))})),this.q_=new Hae(n,a)}}async function z2(t){if(E0(t))for(const e of t.B_)await e(!0)}async function Nx(t){for(const e of t.B_)await e(!1)}function U2(t,e){const r=Dt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),ME(r)?RE(r):Hf(r).r_()&&OE(r,e))}function lf(t,e){const r=Dt(t),n=Hf(r);r.N_.delete(e),n.r_()&&Jq(r,e),r.N_.size===0&&(n.r_()?n.o_():E0(r)&&r.q_.set("Unknown"))}function OE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ut.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Hf(t).A_(e)}function Jq(t,e){t.Q_.xe(e),Hf(t).R_(e)}function RE(t){t.Q_=new Fne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hf(t).start(),t.q_.v_()}function ME(t){return E0(t)&&!Hf(t).n_()&&t.N_.size>0}function E0(t){return Dt(t).L_.size===0}function Zq(t){t.Q_=void 0}async function Wae(t){t.q_.set("Online")}async function Kae(t){t.N_.forEach(((e,r)=>{OE(t,e)}))}async function Qae(t,e){Zq(t),ME(t)?(t.q_.M_(e),RE(t)):t.q_.set("Unknown")}async function Xae(t,e,r){if(t.q_.set("Online"),e instanceof xq&&e.state===2&&e.cause)try{await(async function(a,i){const o=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){it("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Wv(t,n)}else if(e instanceof bv?t.Q_.Ke(e):e instanceof gq?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ut.min()))try{const n=await Hq(t.localStore);r.compareTo(n)>=0&&await(function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(wa.EMPTY_BYTE_STRING,p.snapshotVersion)),Jq(i,d);const m=new Zl(p.target,d,h,p.sequenceNumber);OE(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){it("RemoteStore","Failed to raise snapshot:",n),await Wv(t,n)}}async function Wv(t,e,r){if(!Wu(e))throw e;t.L_.add(1),await Nx(t),t.q_.set("Offline"),r||(r=()=>Hq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{it("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await z2(t)}))}function eH(t,e){return e().catch((r=>Wv(t,r,e)))}async function qf(t){const e=Dt(t),r=zu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Yae(e);)try{const a=await Lae(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Jae(e,a)}catch(a){await Wv(e,a)}tH(e)&&rH(e)}function Yae(t){return E0(t)&&t.O_.length<10}function Jae(t,e){t.O_.push(e);const r=zu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function tH(t){return E0(t)&&!zu(t).n_()&&t.O_.length>0}function rH(t){zu(t).start()}async function Zae(t){zu(t).p_()}async function ese(t){const e=zu(t);for(const r of t.O_)e.m_(r.mutations)}async function tse(t,e,r){const n=t.O_.shift(),a=wE.from(n,e,r);await eH(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await qf(t)}async function rse(t,e){e&&zu(t).V_&&await(async function(n,a){if((function(o){return pq(o)&&o!==qe.ABORTED})(a.code)){const i=n.O_.shift();zu(n).s_(),await eH(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await qf(n)}})(t,e),tH(t)&&rH(t)}async function fR(t,e){const r=Dt(t);r.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const n=E0(r);r.L_.add(3),await Nx(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await z2(r)}async function H_(t,e){const r=Dt(t);e?(r.L_.delete(2),await z2(r)):e||(r.L_.add(2),await Nx(r),r.q_.set("Unknown"))}function Hf(t){return t.K_||(t.K_=(function(r,n,a){const i=Dt(r);return i.w_(),new Vae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:Wae.bind(null,t),Ro:Kae.bind(null,t),mo:Qae.bind(null,t),d_:Xae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),ME(t)?RE(t):t.q_.set("Unknown")):(await t.K_.stop(),Zq(t))}))),t.K_}function zu(t){return t.U_||(t.U_=(function(r,n,a){const i=Dt(r);return i.w_(),new Fae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zae.bind(null,t),mo:rse.bind(null,t),f_:ese.bind(null,t),g_:tse.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await qf(t)):(await t.U_.stop(),t.O_.length>0&&(it("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new Oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const o=Date.now()+n,c=new DE(e,r,o,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function PE(t,e){if(xa("AsyncQueue",`${e}: ${t}`),Wu(t))return new ht(qe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.comparator=e?(r,n)=>e(r,n)||bt.comparator(r.key,n.key):(r,n)=>bt.comparator(r.key,n.key),this.keyedMap=wm(),this.sortedSet=new Un(this.comparator)}static emptySet(e){return new $h(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof $h)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new $h;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.W_=new Un(bt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):kt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class cf{constructor(e,r,n,a,i,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new cf(e,r,$h.emptySet(r),o,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&R2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nse{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class ase{constructor(){this.queries=mR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Dt(r),i=a.queries;a.queries=mR(),i.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new ht(qe.ABORTED,"Firestore shutting down"))}}function mR(){return new Ku((t=>eq(t)),R2)}async function LE(t,e){const r=Dt(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new nse,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=PE(o,`Initialization of query '${Ah(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&$E(r)}async function BE(t,e){const r=Dt(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function sse(t,e){const r=Dt(t);let n=!1;for(const a of e){const i=a.query,o=r.queries.get(i);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&$E(r)}function ise(t,e,r){const n=Dt(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function $E(t){t.Y_.forEach((e=>{e.next()}))}var G_,gR;(gR=G_||(G_={})).ea="default",gR.Cache="cache";class zE{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new cf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=cf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==G_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e){this.key=e}}class aH{constructor(e){this.key=e}}class ose{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=jr(),this.mutatedKeys=jr(),this.Aa=rq(e),this.Ra=new $h(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new pR,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const x=a.get(p),y=vx(this.query,m)?m:null,S=!!x&&this.mutatedKeys.has(x.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;x&&y?x.data.isEqual(y.data)?S!==N&&(n.track({type:3,doc:y}),w=!0):this.ga(x,y)||(n.track({type:2,doc:y}),w=!0,(d&&this.Aa(y,d)>0||h&&this.Aa(y,h)<0)&&(c=!0)):!x&&y?(n.track({type:0,doc:y}),w=!0):x&&!y&&(n.track({type:1,doc:x}),w=!0,(d||h)&&(c=!0)),w&&(y?(o=o.add(y),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:o,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((p,m)=>(function(y,S){const N=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt()}};return N(y)-N(S)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new cf(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new pR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=jr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new aH(n))})),this.da.forEach((n=>{e.has(n)||r.push(new nH(n))})),r}ba(e){this.Ta=e.Ts,this.da=jr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return cf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class lse{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class cse{constructor(e){this.key=e,this.va=!1}}class use{constructor(e,r,n,a,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ku((c=>eq(c)),R2),this.Ma=new Map,this.xa=new Set,this.Oa=new Un(bt.comparator),this.Na=new Map,this.La=new AE,this.Ba={},this.ka=new Map,this.qa=o0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function dse(t,e,r=!0){const n=V2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await sH(n,e,r,!0),a}async function hse(t,e){const r=V2(t);await sH(r,e,!0,!1)}async function sH(t,e,r,n){const a=await qv(t.localStore,Ri(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await UE(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&U2(t.remoteStore,a),c}async function UE(t,e,r,n,a){t.Ka=(m,x,y)=>(async function(N,w,T,C){let O=w.view.ma(T);O.ns&&(O=await F_(N.localStore,w.query,!1).then((({documents:A})=>w.view.ma(A,O))));const L=C&&C.targetChanges.get(w.targetId),I=C&&C.targetMismatches.get(w.targetId)!=null,R=w.view.applyChanges(O,N.isPrimaryClient,L,I);return W_(N,w.targetId,R.wa),R.snapshot})(t,m,x,y);const i=await F_(t.localStore,e,!0),o=new ose(e,i.Ts),c=o.ma(i.documents),d=Sx.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);W_(t,r,h.wa);const p=new lse(e,r,o);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function fse(t,e,r){const n=Dt(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((o=>!R2(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await of(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&lf(n.remoteStore,a.targetId),uf(n,a.targetId)})).catch(Gu)):(uf(n,a.targetId),await of(n.localStore,a.targetId,!0))}async function pse(t,e){const r=Dt(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),lf(r.remoteStore,n.targetId))}async function mse(t,e,r){const n=HE(t);try{const a=await(function(o,c){const d=Dt(o),h=aa.now(),p=c.reduce(((y,S)=>y.add(S.key)),jr());let m,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let S=Ii(),N=jr();return d.cs.getEntries(y,p).next((w=>{S=w,S.forEach(((T,C)=>{C.isValidDocument()||(N=N.add(T))}))})).next((()=>d.localDocuments.getOverlayedDocuments(y,S))).next((w=>{m=w;const T=[];for(const C of c){const O=$ne(C,m.get(C.key).overlayedDocument);O!=null&&T.push(new Nc(C.key,O,qF(O.value.mapValue),ya.exists(!0)))}return d.mutationQueue.addMutationBatch(y,h,T,c)})).next((w=>{x=w;const T=w.applyToLocalDocumentSet(m,N);return d.documentOverlayCache.saveOverlays(y,w.batchId,T)}))})).then((()=>({batchId:x.batchId,changes:aq(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new Un(cr)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await Qu(n,a.changes),await qf(n.remoteStore)}catch(a){const i=PE(a,"Failed to persist write");r.reject(i)}}async function iH(t,e){const r=Dt(t);try{const n=await Dae(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const o=r.Na.get(i);o&&(Lt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Lt(o.va):a.removedDocuments.size>0&&(Lt(o.va),o.va=!1))})),await Qu(r,n,e)}catch(n){await Gu(n)}}function xR(t,e,r){const n=Dt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=Dt(o);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const x of m.j_)x.Z_(c)&&(h=!0)})),h&&$E(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function gse(t,e,r){const n=Dt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let o=new Un(bt.comparator);o=o.insert(i,Qn.newNoDocument(i,Ut.min()));const c=jr().add(i),d=new wx(Ut.min(),new Map,new Un(cr),o,c);await iH(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),qE(n)}else await of(n.localStore,e,!1).then((()=>uf(n,e,r))).catch(Gu)}async function xse(t,e){const r=Dt(t),n=e.batch.batchId;try{const a=await Mae(r.localStore,e);FE(r,n,null),VE(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Qu(r,a)}catch(a){await Gu(a)}}async function yse(t,e,r){const n=Dt(t);try{const a=await(function(o,c){const d=Dt(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Lt(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);FE(n,e,r),VE(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Qu(n,a)}catch(a){await Gu(a)}}function VE(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function FE(t,e,r){const n=Dt(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function uf(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||oH(t,n)}))}function oH(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(lf(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),qE(t))}function W_(t,e,r){for(const n of r)n instanceof nH?(t.La.addReference(n.key,e),vse(t,n)):n instanceof aH?(it("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||oH(t,n.key)):kt()}function vse(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(it("SyncEngine","New document in limbo: "+r),t.xa.add(n),qE(t))}function qE(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new bt(Xr.fromString(e)),n=t.qa.next();t.Na.set(n,new cse(r)),t.Oa=t.Oa.insert(r,n),U2(t.remoteStore,new Zl(Ri(yx(r.path)),n,"TargetPurposeLimboResolution",ii.oe))}}async function Qu(t,e,r){const n=Dt(t),a=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=CE.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const p=Dt(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Oe.forEach(h,(x=>Oe.forEach(x.$i,(y=>p.persistence.referenceDelegate.addReference(m,x.targetId,y))).next((()=>Oe.forEach(x.Ui,(y=>p.persistence.referenceDelegate.removeReference(m,x.targetId,y)))))))))}catch(m){if(!Wu(m))throw m;it("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const x=m.targetId;if(!m.fromCache){const y=p.os.get(x),S=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(S);p.os=p.os.insert(x,N)}}})(n.localStore,i))}async function bse(t,e){const r=Dt(t);if(!r.currentUser.isEqual(e)){it("SyncEngine","User change. New user:",e.toKey());const n=await qq(r.localStore,e);r.currentUser=e,(function(i,o){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new ht(qe.CANCELLED,o))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Qu(r,n.hs)}}function wse(t,e){const r=Dt(t),n=r.Na.get(e);if(n&&n.va)return jr().add(n.key);{let a=jr();const i=r.Ma.get(e);if(!i)return a;for(const o of i){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}async function Sse(t,e){const r=Dt(t),n=await F_(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&W_(r,e.targetId,a.wa),a}async function Nse(t,e){const r=Dt(t);return Wq(r.localStore,e).then((n=>Qu(r,n)))}async function jse(t,e,r,n){const a=Dt(t),i=await(function(c,d){const h=Dt(c),p=Dt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((x=>x?h.localDocuments.getDocuments(m,x):Oe.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await qf(a.remoteStore):r==="acknowledged"||r==="rejected"?(FE(a,e,n||null),VE(a,e),(function(c,d){Dt(Dt(c).mutationQueue).On(d)})(a.localStore,e)):kt(),await Qu(a,i)):it("SyncEngine","Cannot apply mutation batch with id: "+e)}async function _se(t,e){const r=Dt(t);if(V2(r),HE(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await yR(r,n.toArray());r.Qa=!0,await H_(r.remoteStore,!0);for(const i of a)U2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,o)=>{r.sharedClientState.isLocalQueryTarget(o)?n.push(o):a=a.then((()=>(uf(r,o),of(r.localStore,o,!0)))),lf(r.remoteStore,o)})),await a,await yR(r,n),(function(o){const c=Dt(o);c.Na.forEach(((d,h)=>{lf(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new Un(bt.comparator)})(r),r.Qa=!1,await H_(r.remoteStore,!1)}}async function yR(t,e,r){const n=Dt(t),a=[],i=[];for(const o of e){let c;const d=n.Ma.get(o);if(d&&d.length!==0){c=await qv(n.localStore,Ri(d[0]));for(const h of d){const p=n.Fa.get(h),m=await Sse(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await Gq(n.localStore,o);c=await qv(n.localStore,h),await UE(n,lH(h),o,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function lH(t){return JF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Tse(t){return(function(r){return Dt(Dt(r).persistence).Qi()})(Dt(t).localStore)}async function Ase(t,e,r,n){const a=Dt(t);if(a.Qa)return void it("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const o=await Wq(a.localStore,tq(i[0])),c=wx.createSynthesizedRemoteEventForCurrentChange(e,r==="current",wa.EMPTY_BYTE_STRING);await Qu(a,o,c);break}case"rejected":await of(a.localStore,e,!0),uf(a,e,n);break;default:kt()}}async function Ese(t,e,r){const n=V2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){it("SyncEngine","Adding an already active target "+a);continue}const i=await Gq(n.localStore,a),o=await qv(n.localStore,i);await UE(n,lH(i),o.targetId,!1,o.resumeToken),U2(n.remoteStore,o)}for(const a of r)n.Ma.has(a)&&await of(n.localStore,a,!1).then((()=>{lf(n.remoteStore,a),uf(n,a)})).catch(Gu)}}function V2(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wse.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gse.bind(null,e),e.Ca.d_=sse.bind(null,e.eventManager),e.Ca.$a=ise.bind(null,e.eventManager),e}function HE(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xse.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yse.bind(null,e),e}class fg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return Fq(this.persistence,new Vq,e.initialUser,this.serializer)}Ga(e){return new zq(B2.Zr,this.serializer)}Wa(e){return new Qq}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fg.provider={build:()=>new fg};class cH extends fg{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await HE(this.Ja.syncEngine),await qf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return Fq(this.persistence,new Vq,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new gae(n,e.asyncQueue,r)}Ha(e,r){const n=new Xre(r,this.persistence);return new Qre(e.asyncQueue,n)}Ga(e){const r=Uq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new EE(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Xq(),wv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Qq}}class Cse extends cH{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof y3&&(this.sharedClientState.syncEngine={no:jse.bind(null,r),ro:Ase.bind(null,r),io:Ese.bind(null,r),Qi:Tse.bind(null,r),eo:Nse.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await _se(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=Xq();if(!y3.D(r))throw new ht(qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Uq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new y3(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class pg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>xR(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=bse.bind(null,this.syncEngine),await H_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ase})()}createDatastore(e){const r=$2(e.databaseInfo.databaseId),n=(function(i){return new Uae(i)})(e.databaseInfo);return(function(i,o,c,d){return new qae(i,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,o,c){return new Gae(n,a,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>xR(this.syncEngine,r,0)),(function(){return hR.D()?new hR:new Bae})())}createSyncEngine(e,r){return(function(a,i,o,c,d,h,p){const m=new use(a,i,o,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=Dt(a);it("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Nx(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}pg.provider={build:()=>new pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kse{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ht(qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const o=Dt(a),c={documents:i.map((m=>dg(o.serializer,m)))},d=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Xr.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const x=Xne(o.serializer,m);h.set(x.key.toString(),x)}));const p=[];return i.forEach((m=>{const x=h.get(m.toString());Lt(!!x),p.push(x)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new bx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=bt.fromPath(n);this.mutations.push(new vE(a,this.precondition(a)))})),await(async function(n,a){const i=Dt(n),o={writes:a.map((c=>hg(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,Xr.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw kt();r=Ut.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ht(qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Ut.min())?ya.exists(!1):ya.updateTime(r):ya.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ut.min()))throw new ht(qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ya.updateTime(r)}return ya.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ise{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new IE(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new kse(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!gx(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!pq(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Es.UNAUTHENTICATED,this.clientId=EF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{it("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(it("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=PE(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function b3(t,e){t.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await qq(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function vR(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Rse(t);it("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>fR(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>fR(e.remoteStore,a))),t._onlineComponents=e}async function Rse(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){it("FirestoreClient","Using user provided OfflineComponentProvider");try{await b3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===qe.FAILED_PRECONDITION||a.code===qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;tg("Error using user provided cache. Falling back to memory cache: "+r),await b3(t,new fg)}}else it("FirestoreClient","Using default OfflineComponentProvider"),await b3(t,new fg);return t._offlineComponents}async function WE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(it("FirestoreClient","Using user provided OnlineComponentProvider"),await vR(t,t._uninitializedComponentsProvider._online)):(it("FirestoreClient","Using default OnlineComponentProvider"),await vR(t,new pg))),t._onlineComponents}function Mse(t){return WE(t).then((e=>e.syncEngine))}function Dse(t){return WE(t).then((e=>e.datastore))}async function Kv(t){const e=await WE(t),r=e.eventManager;return r.onListen=dse.bind(null,e.syncEngine),r.onUnlisten=fse.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=hse.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=pse.bind(null,e.syncEngine),r}function Pse(t,e,r={}){const n=new Oo;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new GE({next:x=>{p.Za(),o.enqueueAndForget((()=>BE(i,m)));const y=x.docs.has(c);!y&&x.fromCache?h.reject(new ht(qe.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&x.fromCache&&d&&d.source==="server"?h.reject(new ht(qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new zE(yx(c.path),p,{includeMetadataChanges:!0,_a:!0});return LE(i,m)})(await Kv(t),t.asyncQueue,e,r,n))),n.promise}function Lse(t,e,r={}){const n=new Oo;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new GE({next:x=>{p.Za(),o.enqueueAndForget((()=>BE(i,m))),x.fromCache&&d.source==="server"?h.reject(new ht(qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new zE(c,p,{includeMetadataChanges:!0,_a:!0});return LE(i,m)})(await Kv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(t,e,r){if(!r)throw new ht(qe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Bse(t,e,r,n){if(e===!0&&n===!0)throw new ht(qe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function wR(t){if(!bt.isDocumentKey(t))throw new ht(qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SR(t){if(bt.isDocumentKey(t))throw new ht(qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function F2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":kt()}function ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ht(qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=F2(t);throw new ht(qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function $se(t,e){if(e<=0)throw new ht(qe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ht(qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ht(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bse("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uH((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ht(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ht(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ht(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class KE{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ht(qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NR(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new $re;switch(n.type){case"firstParty":return new Vre(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ht(qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=bR.get(r);n&&(it("ComponentProvider","Removing Datastore"),bR.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jc(this.firestore,e,this._query)}}class ws{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ws(this.firestore,e,this._key)}}class Ou extends jc{constructor(e,r,n){super(e,r,yx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ws(this.firestore,null,new bt(e))}withConverter(e){return new Ou(this.firestore,e,this._path)}}function zt(t,e,...r){if(t=Cn(t),dH("collection","path",e),t instanceof KE){const n=Xr.fromString(e,...r);return SR(n),new Ou(t,null,n)}{if(!(t instanceof ws||t instanceof Ou))throw new ht(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Xr.fromString(e,...r));return SR(n),new Ou(t.firestore,null,n)}}function ot(t,e,...r){if(t=Cn(t),arguments.length===1&&(e=EF.newId()),dH("doc","path",e),t instanceof KE){const n=Xr.fromString(e,...r);return wR(n),new ws(t,null,new bt(n))}{if(!(t instanceof ws||t instanceof Ou))throw new ht(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Xr.fromString(e,...r));return wR(n),new ws(t.firestore,t instanceof Ou?t.converter:null,new bt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new IE(this,"async_queue_retry"),this.Vu=()=>{const n=wv();n&&it("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=wv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=wv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Oo;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wu(e))throw e;it("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw xa("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=DE.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&kt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function _R(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class ol extends KE{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new jR,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jR(e),this._firestoreClient=void 0,await e}}}function zse(t,e,r){r||(r="(default)");const n=hx(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Yh(i,e))return a;throw new ht(qe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ht(qe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ht(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function jx(t){if(t._terminated)throw new ht(qe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Use(t),t._firestoreClient}function Use(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new xne(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,uH(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Ose(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new l0(wa.fromBase64String(e))}catch(r){throw new ht(qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new l0(wa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ht(qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new na(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ht(qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ht(qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cr(this._lat,e._lat)||cr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vse=/^__.*__$/;class Fse{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Nc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ff(e,this.data,r,this.fieldTransforms)}}class hH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Nc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function fH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt()}}class q2{constructor(e,r,n,a,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new q2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fH(this.Cu)&&Vse.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class qse{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||$2(e)}Qu(e,r,n,a=!1){return new q2({Cu:e,methodName:r,qu:n,path:na.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ax(t){const e=t._freezeSettings(),r=$2(t._databaseId);return new qse(t._databaseId,!!e.ignoreUndefinedProperties,r)}function YE(t,e,r,n,a,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);e8("Data must be an object, but it was:",o,n);const c=gH(n,o);let d,h;if(i.merge)d=new oi(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const x=K_(e,m,r);if(!o.contains(x))throw new ht(qe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);yH(p,x)||p.push(x)}d=new oi(p),h=o.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=o.fieldTransforms;return new Fse(new bs(c),d,h)}class H2 extends Tx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof H2}}function Hse(t,e,r){return new q2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class JE extends Tx{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Hse(this,e,!0),n=this.Ku.map((i=>Gf(i,r))),a=new a0(n);return new yE(e.path,a)}isEqual(e){return e instanceof JE&&Yh(this.Ku,e.Ku)}}class ZE extends Tx{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new af(e.serializer,oq(e.serializer,this.$u));return new yE(e.path,r)}isEqual(e){return e instanceof ZE&&this.$u===e.$u}}function pH(t,e,r,n){const a=t.Qu(1,e,r);e8("Data must be an object, but it was:",a,n);const i=[],o=bs.empty();A0(n,((d,h)=>{const p=t8(e,d,r);h=Cn(h);const m=a.Nu(p);if(h instanceof H2)i.push(p);else{const x=Gf(h,m);x!=null&&(i.push(p),o.set(p,x))}}));const c=new oi(i);return new hH(o,c,a.fieldTransforms)}function mH(t,e,r,n,a,i){const o=t.Qu(1,e,r),c=[K_(e,n,r)],d=[a];if(i.length%2!=0)throw new ht(qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)c.push(K_(e,i[x])),d.push(i[x+1]);const h=[],p=bs.empty();for(let x=c.length-1;x>=0;--x)if(!yH(h,c[x])){const y=c[x];let S=d[x];S=Cn(S);const N=o.Nu(y);if(S instanceof H2)h.push(y);else{const w=Gf(S,N);w!=null&&(h.push(y),p.set(y,w))}}const m=new oi(h);return new hH(p,m,o.fieldTransforms)}function Gse(t,e,r,n=!1){return Gf(r,t.Qu(n?4:3,e))}function Gf(t,e){if(xH(t=Cn(t)))return e8("Unsupported field value:",e,t),gH(t,e);if(t instanceof Tx)return(function(n,a){if(!fH(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let o=0;for(const c of n){let d=Gf(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=Cn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return oq(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=aa.fromDate(n);return{timestampValue:sf(a.serializer,i)}}if(n instanceof aa){const i=new aa(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:sf(a.serializer,i)}}if(n instanceof QE)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof l0)return{bytesValue:yq(a.serializer,n._byteString)};if(n instanceof ws){const i=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jE(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof XE)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return xE(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${F2(n)}`)})(t,e)}function gH(t,e){const r={};return zF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):A0(t,((n,a)=>{const i=Gf(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function xH(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof aa||t instanceof QE||t instanceof l0||t instanceof ws||t instanceof Tx||t instanceof XE)}function e8(t,e,r){if(!xH(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=F2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function K_(t,e,r){if((e=Cn(e))instanceof _x)return e._internalPath;if(typeof e=="string")return t8(t,e);throw Qv("Field path arguments must be of type string or ",t,!1,void 0,r)}const Wse=new RegExp("[~\\*/\\[\\]]");function t8(t,e,r){if(e.search(Wse)>=0)throw Qv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new _x(...e.split("."))._internalPath}catch{throw Qv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Qv(t,e,r,n,a){const i=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new ht(qe.INVALID_ARGUMENT,c+t+d)}function yH(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ws(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kse(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(G2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Kse extends Xv{data(){return super.data()}}function G2(t,e){return typeof e=="string"?t8(t,e):e instanceof _x?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ht(qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r8{}class n8 extends r8{}function Vr(t,e,...r){let n=[];e instanceof r8&&n.push(e),n=n.concat(r),(function(i){const o=i.filter((d=>d instanceof a8)).length,c=i.filter((d=>d instanceof W2)).length;if(o>1||o>0&&c>0)throw new ht(qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class W2 extends n8{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new W2(e,r,n)}_apply(e){const r=this._parse(e);return bH(e._query,r),new jc(e.firestore,e.converter,D_(e._query,r))}_parse(e){const r=Ax(e.firestore);return(function(i,o,c,d,h,p,m){let x;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ht(qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){AR(m,p);const y=[];for(const S of m)y.push(TR(d,i,S));x={arrayValue:{values:y}}}else x=TR(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||AR(m,p),x=Gse(c,o,m,p==="in"||p==="not-in");return Lr.create(h,p,x)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function mn(t,e,r){const n=e,a=G2("where",t);return W2._create(a,n,r)}class a8 extends r8{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new a8(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:gn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let o=a;const c=i.getFlattenedFilters();for(const d of c)bH(o,d),o=D_(o,d)})(e._query,r),new jc(e.firestore,e.converter,D_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class s8 extends n8{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new s8(e,r)}_apply(e){const r=(function(a,i,o){if(a.startAt!==null)throw new ht(qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ht(qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cg(i,o)})(e._query,this._field,this._direction);return new jc(e.firestore,e.converter,(function(a,i){const o=a.explicitOrderBy.concat([i]);return new Vf(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function Go(t,e="asc"){const r=e,n=G2("orderBy",t);return s8._create(n,r)}class i8 extends n8{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new i8(e,r,n)}_apply(e){return new jc(e.firestore,e.converter,zv(e._query,this._limit,this._limitType))}}function wo(t){return $se("limit",t),i8._create("limit",t,"F")}function TR(t,e,r){if(typeof(r=Cn(r))=="string"){if(r==="")throw new ht(qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZF(e)&&r.indexOf("/")!==-1)throw new ht(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Xr.fromString(r));if(!bt.isDocumentKey(n))throw new ht(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return og(t,new bt(n))}if(r instanceof ws)return og(t,r._key);throw new ht(qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${F2(r)}.`)}function AR(t,e){if(!Array.isArray(t)||t.length===0)throw new ht(qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bH(t,e){const r=(function(a,i){for(const o of a)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new ht(qe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ht(qe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class wH{convertValue(e,r="none"){switch(r0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Bu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw kt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return A0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>Kn(o.doubleValue)));return new XE(i)}convertGeoPoint(e){return new QE(Kn(e.latitude),Kn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=pE(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(sg(e));default:return null}}convertTimestamp(e){const r=pc(e);return new aa(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Xr.fromString(e);Lt(Eq(n));const a=new t0(n.get(1),n.get(3)),i=new bt(n.popFirst(5));return a.isEqual(r)||xa(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Qse extends wH{constructor(e){super(),this.firestore=e}convertBytes(e){return new l0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ws(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class l8 extends Xv{constructor(e,r,n,a,i,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Sv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(G2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Sv extends l8{data(e={}){return super.data(e)}}class SH{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Ih(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Sv(this._firestore,this._userDataWriter,n.key,n,new Ih(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ht(qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new Sv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new Ih(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new Sv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new Ih(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:Xse(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Xse(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){t=ci(t,ws);const e=ci(t.firestore,ol);return Pse(jx(e),t._key).then((r=>NH(e,t,r)))}class K2 extends wH{constructor(e){super(),this.firestore=e}convertBytes(e){return new l0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ws(this.firestore,null,r)}}function jd(t){t=ci(t,jc);const e=ci(t.firestore,ol),r=jx(e),n=new K2(e);return vH(t._query),Lse(r,t._query).then((a=>new SH(e,n,t,a)))}function ta(t,e,r){t=ci(t,ws);const n=ci(t.firestore,ol),a=o8(t.converter,e,r);return Q2(n,[YE(Ax(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ya.none())])}function sr(t,e,r,...n){t=ci(t,ws);const a=ci(t.firestore,ol),i=Ax(a);let o;return o=typeof(e=Cn(e))=="string"||e instanceof _x?mH(i,"updateDoc",t._key,e,r,n):pH(i,"updateDoc",t._key,e),Q2(a,[o.toMutation(t._key,ya.exists(!0))])}function rs(t){return Q2(ci(t.firestore,ol),[new bx(t._key,ya.none())])}function zl(t,e){const r=ci(t.firestore,ol),n=ot(t),a=o8(t.converter,e);return Q2(r,[YE(Ax(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ya.exists(!1))]).then((()=>n))}function Fr(t,...e){var r,n,a;t=Cn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||_R(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(_R(e[o])){const m=e[o];e[o]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof ws)h=ci(t.firestore,ol),p=yx(t._key.path),d={next:m=>{e[o]&&e[o](NH(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=ci(t,jc);h=ci(m.firestore,ol),p=m._query;const x=new K2(h);d={next:y=>{e[o]&&e[o](new SH(h,x,m,y))},error:e[o+1],complete:e[o+2]},vH(t._query)}return(function(x,y,S,N){const w=new GE(N),T=new zE(y,w,S);return x.asyncQueue.enqueueAndForget((async()=>LE(await Kv(x),T))),()=>{w.Za(),x.asyncQueue.enqueueAndForget((async()=>BE(await Kv(x),T)))}})(jx(h),p,c,d)}function Q2(t,e){return(function(n,a){const i=new Oo;return n.asyncQueue.enqueueAndForget((async()=>mse(await Mse(n),a,i))),i.promise})(jx(t),e)}function NH(t,e,r){const n=r.docs.get(e._key),a=new K2(t);return new l8(t,a,e._key,n,new Ih(r.hasPendingWrites,r.fromCache),e.converter)}class Yse{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=tie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Jse(t){return new Yse(t)}class Zse{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=pg.provider,this._offlineComponentProvider={build:r=>new cH(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class eie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=pg.provider,this._offlineComponentProvider={build:r=>new Cse(r,e==null?void 0:e.cacheSizeBytes)}}}function tie(t){return new Zse(void 0)}function rie(){return new eie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nie={maxAttempts:5};function am(t,e){if((t=Cn(t)).firestore!==e)throw new ht(qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Ax(r)}get(r){const n=am(r,this._firestore),a=new Qse(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return kt();const o=i[0];if(o.isFoundDocument())return new Xv(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new Xv(this._firestore,a,n._key,null,n.converter);throw kt()}))}set(r,n,a){const i=am(r,this._firestore),o=o8(i.converter,n,a),c=YE(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const o=am(r,this._firestore);let c;return c=typeof(n=Cn(n))=="string"||n instanceof _x?mH(this._dataReader,"Transaction.update",o._key,n,a,i):pH(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(r){const n=am(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=am(e,this._firestore),n=new K2(this._firestore);return super.get(e).then((a=>new l8(this._firestore,n,r._key,a._document,new Ih(!1,!1),r.converter)))}}function w3(t,e,r){t=ci(t,ol);const n=Object.assign(Object.assign({},nie),r);return(function(i){if(i.maxAttempts<1)throw new ht(qe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,o,c){const d=new Oo;return i.asyncQueue.enqueueAndForget((async()=>{const h=await Dse(i);new Ise(i.asyncQueue,h,c,o,d).au()})),d.promise})(jx(t),(a=>e(new aie(t,a))),n)}function ER(...t){return new JE("arrayUnion",t)}function sm(t){return new ZE("increment",t)}(function(e,r=!0){(function(a){Uf=a})(T0),Lu(new dc("firestore",((n,{instanceIdentifier:a,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new ol(new zre(n.getProvider("auth-internal")),new qre(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ht(qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new t0(h.options.projectId,p)})(o,a),o);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),ao(vO,"4.7.3",e),ao(vO,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH="firebasestorage.googleapis.com",_H="storageBucket",sie=120*1e3,iie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Do{constructor(e,r,n=0){super(S3(e),`Firebase Storage: ${r} (${S3(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,da.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return S3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ua;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ua||(ua={}));function S3(t){return"storage/"+t}function c8(){const t="An unknown error occurred, please check the error payload for server response.";return new da(ua.UNKNOWN,t)}function oie(t){return new da(ua.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function lie(t){return new da(ua.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cie(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new da(ua.UNAUTHENTICATED,t)}function uie(){return new da(ua.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function die(t){return new da(ua.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hie(){return new da(ua.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fie(){return new da(ua.CANCELED,"User canceled the upload/download.")}function pie(t){return new da(ua.INVALID_URL,"Invalid URL '"+t+"'.")}function mie(t){return new da(ua.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function gie(){return new da(ua.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_H+"' property when initializing the app?")}function xie(){return new da(ua.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yie(){return new da(ua.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vie(t){return new da(ua.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Q_(t){return new da(ua.INVALID_ARGUMENT,t)}function TH(){return new da(ua.APP_DELETED,"The Firebase app was deleted.")}function bie(t){return new da(ua.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dm(t,e){return new da(ua.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function im(t){throw new da(ua.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Oi.makeFromUrl(e,r)}catch{return new Oi(e,"")}if(n.path==="")return n;throw mie(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${p}/b/${a}/o${x}`,"i"),S={bucket:1,path:3},N=r===jH?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",T=new RegExp(`^https?://${N}/${a}/${w}`,"i"),O=[{regex:c,indices:d,postModify:i},{regex:y,indices:S,postModify:h},{regex:T,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<O.length;L++){const I=O[L],R=I.regex.exec(e);if(R){const A=R[I.indices.bucket];let E=R[I.indices.path];E||(E=""),n=new Oi(A,E),I.postModify(n);break}}if(n==null)throw pie(e);return n}}class wie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(t,e,r){let n=1,a=null,i=null,o=!1,c=0;function d(){return c===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){a=setTimeout(()=>{a=null,t(y,d())},w)}function x(){i&&clearTimeout(i)}function y(w,...T){if(h){x();return}if(w){x(),p.call(null,w,...T);return}if(d()||o){x(),p.call(null,w,...T);return}n<64&&(n*=2);let O;c===1?(c=2,O=0):O=(n+Math.random())*1e3,m(O)}let S=!1;function N(w){S||(S=!0,x(),!h&&(a!==null?(w||(c=2),clearTimeout(a),m(0)):w||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,N(!0)},r),N}function Nie(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jie(t){return t!==void 0}function _ie(t){return typeof t=="object"&&!Array.isArray(t)}function u8(t){return typeof t=="string"||t instanceof String}function CR(t){return d8()&&t instanceof Blob}function d8(){return typeof Blob<"u"}function kR(t,e,r,n){if(n<e)throw Q_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Q_(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function AH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Xd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xd||(Xd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tie(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aie{constructor(e,r,n,a,i,o,c,d,h,p,m,x=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,S)=>{this.resolve_=y,this.reject_=S,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new E1(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Xd.NO_ERROR,d=i.getStatus();if(!c||Tie(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Xd.ABORT;n(!1,new E1(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new E1(h,i))})},r=(n,a)=>{const i=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());jie(d)?i(d):i()}catch(d){o(d)}else if(c!==null){const d=c8();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?TH():fie();o(d)}else{const d=hie();o(d)}};this.canceled_?r(!1,new E1(!1,null,!0)):this.backoffId_=Sie(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Nie(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class E1{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Eie(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Cie(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kie(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Iie(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Oie(t,e,r,n,a,i,o=!0){const c=AH(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return kie(h,e),Eie(h,r),Cie(h,i),Iie(h,n),new Aie(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Mie(...t){const e=Rie();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(d8())return new Blob(t);throw new da(ua.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Die(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pie(t){if(typeof atob>"u")throw vie("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class N3{constructor(e,r){this.data=e,this.contentType=r||null}}function Lie(t,e){switch(t){case Jo.RAW:return new N3(EH(e));case Jo.BASE64:case Jo.BASE64URL:return new N3(CH(t,e));case Jo.DATA_URL:return new N3($ie(e),zie(e))}throw c8()}function EH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Bie(t){let e;try{e=decodeURIComponent(t)}catch{throw Dm(Jo.DATA_URL,"Malformed data URL.")}return EH(e)}function CH(t,e){switch(t){case Jo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw Dm(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Jo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw Dm(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Pie(e)}catch(a){throw a.message.includes("polyfill")?a:Dm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class kH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Dm(Jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Uie(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function $ie(t){const e=new kH(t);return e.base64?CH(Jo.BASE64,e.rest):Bie(e.rest)}function zie(t){return new kH(t).contentType}function Uie(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,r){let n=0,a="";CR(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(CR(this.data_)){const n=this.data_,a=Die(n,e,r);return a===null?null:new xu(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new xu(n,!0)}}static getBlob(...e){if(d8()){const r=e.map(n=>n instanceof xu?n.data_:n);return new xu(Mie.apply(null,r))}else{const r=e.map(o=>u8(o)?Lie(Jo.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[i++]=o[c]}),new xu(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(t){let e;try{e=JSON.parse(t)}catch{return null}return _ie(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vie(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Fie(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function OH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qie(t,e){return e}class Ls{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||qie}}let C1=null;function Hie(t){return!u8(t)||t.length<2?t:OH(t)}function RH(){if(C1)return C1;const t=[];t.push(new Ls("bucket")),t.push(new Ls("generation")),t.push(new Ls("metageneration")),t.push(new Ls("name","fullPath",!0));function e(i,o){return Hie(o)}const r=new Ls("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const a=new Ls("size");return a.xform=n,t.push(a),t.push(new Ls("timeCreated")),t.push(new Ls("updated")),t.push(new Ls("md5Hash",null,!0)),t.push(new Ls("cacheControl",null,!0)),t.push(new Ls("contentDisposition",null,!0)),t.push(new Ls("contentEncoding",null,!0)),t.push(new Ls("contentLanguage",null,!0)),t.push(new Ls("contentType",null,!0)),t.push(new Ls("metadata","customMetadata",!0)),C1=t,C1}function Gie(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new Oi(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function Wie(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return Gie(n,t),n}function MH(t,e,r){const n=IH(e);return n===null?null:Wie(t,n,r)}function Kie(t,e,r,n){const a=IH(e);if(a===null||!u8(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,x="/b/"+o(p)+"/o/"+o(m),y=X2(x,r,n),S=AH({alt:"media",token:h});return y+S})[0]}function Qie(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class h8{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(t){if(!t)throw c8()}function Xie(t,e){function r(n,a){const i=MH(t,a,e);return DH(i!==null),i}return r}function Yie(t,e){function r(n,a){const i=MH(t,a,e);return DH(i!==null),Kie(i,a,t.host,t._protocol)}return r}function PH(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=uie():a=cie():r.getStatus()===402?a=lie(t.bucket):r.getStatus()===403?a=die(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function LH(t){const e=PH(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=oie(t.path)),i.serverResponse=a.serverResponse,i}return r}function Jie(t,e,r){const n=e.fullServerUrl(),a=X2(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new h8(a,i,Yie(t,r),o);return c.errorHandler=LH(e),c}function Zie(t,e){const r=e.fullServerUrl(),n=X2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function o(d,h){}const c=new h8(n,a,o,i);return c.successCodes=[200,204],c.errorHandler=LH(e),c}function eoe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function toe(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=eoe(null,e)),n}function roe(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let O="";for(let L=0;L<2;L++)O=O+Math.random().toString().slice(2);return O}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=toe(e,n,a),p=Qie(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+d+"--",y=xu.getBlob(m,n,x);if(y===null)throw xie();const S={name:h.fullPath},N=X2(i,t.host,t._protocol),w="POST",T=t.maxUploadRetryTime,C=new h8(N,w,Xie(t,r),T);return C.urlParams=S,C.headers=o,C.body=y.uploadData(),C.errorHandler=PH(e),C}class noe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw im("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw im("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw im("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw im("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw im("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class aoe extends noe{initXhr(){this.xhr_.responseType="text"}}function f8(){return new aoe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,r){this._service=e,r instanceof Oi?this._location=r:this._location=Oi.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new c0(e,r)}get root(){const e=new Oi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OH(this._location.path)}get storage(){return this._service}get parent(){const e=Vie(this._location.path);if(e===null)return null;const r=new Oi(this._location.bucket,e);return new c0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw bie(e)}}function soe(t,e,r){t._throwIfRoot("uploadBytes");const n=roe(t.storage,t._location,RH(),new xu(e,!0),r);return t.storage.makeRequestWithTokens(n,f8).then(a=>({metadata:a,ref:t}))}function ioe(t){t._throwIfRoot("getDownloadURL");const e=Jie(t.storage,t._location,RH());return t.storage.makeRequestWithTokens(e,f8).then(r=>{if(r===null)throw yie();return r})}function ooe(t){t._throwIfRoot("deleteObject");const e=Zie(t.storage,t._location);return t.storage.makeRequestWithTokens(e,f8)}function loe(t,e){const r=Fie(t._location.path,e),n=new Oi(t._location.bucket,r);return new c0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function coe(t){return/^[A-Za-z]+:\/\//.test(t)}function uoe(t,e){return new c0(t,e)}function BH(t,e){if(t instanceof p8){const r=t;if(r._bucket==null)throw gie();const n=new c0(r,r._bucket);return e!=null?BH(n,e):n}else return e!==void 0?loe(t,e):t}function doe(t,e){if(e&&coe(e)){if(t instanceof p8)return uoe(t,e);throw Q_("To use ref(service, url), the first argument must be a Storage instance.")}else return BH(t,e)}function IR(t,e){const r=e==null?void 0:e[_H];return r==null?null:Oi.makeFromBucketSpec(r,t)}function hoe(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:mZ(a,t.app.options.projectId))}class p8{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=jH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sie,this._maxUploadRetryTime=iie,this._requests=new Set,a!=null?this._bucket=Oi.makeFromBucketSpec(a,this._host):this._bucket=IR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Oi.makeFromBucketSpec(this._url,e):this._bucket=IR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new c0(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new wie(TH());{const o=Oie(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const OR="@firebase/storage",RR="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $H="storage";function X_(t,e,r){return t=Cn(t),soe(t,e,r)}function Yv(t){return t=Cn(t),ioe(t)}function foe(t){return t=Cn(t),ooe(t)}function Pm(t,e){return t=Cn(t),doe(t,e)}function poe(t=YA(),e){t=Cn(t);const n=hx(t,$H).getImmediate({identifier:e}),a=DV("storage");return a&&moe(n,...a),n}function moe(t,e,r,n={}){hoe(t,e,r,n)}function goe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new p8(r,n,a,e,T0)}function xoe(){Lu(new dc($H,goe,"PUBLIC").setMultipleInstances(!0)),ao(OR,RR,""),ao(OR,RR,"esm2017")}xoe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yoe="type.googleapis.com/google.protobuf.Int64Value",voe="type.googleapis.com/google.protobuf.UInt64Value";function zH(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function Y_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Y_(e));if(typeof t=="function"||typeof t=="object")return zH(t,e=>Y_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Jv(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case yoe:case voe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Jv(e)):typeof t=="function"||typeof t=="object"?zH(t,e=>Jv(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zh extends Do{constructor(e,r,n){super(`${m8}/${e}`,r||""),this.details=n}}function boe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function woe(t,e){let r=boe(t),n=r,a;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!MR[o])return new zh("internal","internal");r=MR[o],n=o}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=Jv(a))}}catch{}return r==="ok"?null:new zh(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Soe{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="us-central1";function Noe(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new zh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class joe{constructor(e,r,n,a,i=J_,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Soe(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=J_}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function _oe(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function Toe(t,e,r){return(n=>Eoe(t,e,n,{}))}async function Aoe(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function Eoe(t,e,r,n){const a=t._url(e);return Coe(t,a,r,n)}async function Coe(t,e,r,n){r=Y_(r);const a={data:r},i={},o=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=n.timeout||7e4,d=Noe(c),h=await Promise.race([Aoe(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new zh("cancelled","Firebase Functions instance was deleted.");const p=woe(h.status,h.json);if(p)throw p;if(!h.json)throw new zh("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new zh("internal","Response is missing data field.");return{data:Jv(m)}}const DR="@firebase/functions",PR="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const koe="auth-internal",Ioe="app-check-internal",Ooe="messaging-internal";function Roe(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(koe),c=n.getProvider(Ooe),d=n.getProvider(Ioe);return new joe(i,o,c,d,a,t)};Lu(new dc(m8,r,"PUBLIC").setMultipleInstances(!0)),ao(DR,PR,e),ao(DR,PR,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Moe(t=YA(),e=J_){const n=hx(Cn(t),m8).getImmediate({identifier:e}),a=DV("functions");return a&&Doe(n,...a),n}function Doe(t,e,r){_oe(Cn(t),e,r)}function an(t,e,r){return Toe(Cn(t),e)}Roe(fetch.bind(self));const UH={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Poe=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Poe)if(!UH[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const Y2=VV(UH),Z_=T_(Y2),Loe=new Wl,Me=zse(Y2,{localCache:Jse({tabManager:rie()})}),Lm=poe(Y2),sn=Moe(Y2),Boe=an(sn,"awardXP"),$oe=an(sn,"acceptQuest"),zoe=an(sn,"deployMission"),Uoe=an(sn,"resolveQuest"),Voe=an(sn,"equipItem"),Foe=an(sn,"unequipItem"),qoe=an(sn,"disenchantItem"),Hoe=an(sn,"craftItem"),Goe=an(sn,"adminUpdateInventory"),Woe=an(sn,"adminUpdateEquipped"),Koe=an(sn,"submitEngagement"),Qoe=an(sn,"sendClassMessage");an(sn,"uploadQuestionBank");const eT=an(sn,"awardQuestionXP"),Xoe=an(sn,"penalizeWrongAnswer"),Yoe=an(sn,"updateStreak"),Joe=an(sn,"claimDailyLogin"),Zoe=an(sn,"spinFortuneWheel"),ele=an(sn,"unlockSkill"),tle=an(sn,"addSocket"),rle=an(sn,"socketGem"),nle=an(sn,"unsocketGem"),ale=an(sn,"dealBossDamage"),sle=an(sn,"answerBossQuiz"),ile=an(sn,"createParty"),ole=an(sn,"joinParty"),lle=an(sn,"completeTutoring"),cle=an(sn,"claimKnowledgeLoot"),ule=an(sn,"purchaseCosmetic"),dle=an(sn,"claimDailyChallenge"),hle=an(sn,"dismissAlert"),Zv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()});function fle(t,e,r,n){const{totalTime:a,submissionCount:i,totalPastes:o,totalKeystrokes:c,totalXP:d,activityDays:h}=t,p=(e-r)/n,m=c+o>0?o/(c+o):0;return i===0&&a<60?"INACTIVE":m>.4&&i>=2&&o>8?"COPYING":a>1800&&i>=2&&d<50?"STRUGGLING":p<-.5&&h<=2&&i>=1&&i<=3?"DISENGAGING":a>1800&&h<=2&&i>=3?"SPRINTING":p<-.5&&p>=-1.5?"COASTING":p>.75&&i>=4&&m<.15&&h>=3?"THRIVING":"ON_TRACK"}const Wo={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};function ple(t){switch(t){case"THRIVING":return{categories:["Simulation","Supplemental","Article"],action:"Challenge with advanced or supplemental material. Consider peer-tutoring role.",studentTip:"You're crushing it! Try the simulations and supplemental resources to push further."};case"ON_TRACK":return{categories:["Practice Set","Textbook","Video Lesson"],action:"Continue current approach. Provide enrichment if interest is shown.",studentTip:"Solid work  keep the momentum going with practice sets and readings."};case"COASTING":return{categories:["Practice Set","Simulation","Video Lesson"],action:"Increase engagement with interactive resources. Check in on motivation.",studentTip:"Try a simulation or practice set to boost your skills  small steps add up!"};case"SPRINTING":return{categories:["Textbook","Video Lesson","Practice Set"],action:"Encourage consistent daily engagement instead of cramming. Set micro-goals.",studentTip:"Spreading your study across the week helps retention  try a bit each day."};case"STRUGGLING":return{categories:["Video Lesson","Lab Guide","Practice Set"],action:"Offer direct support. Recommend foundational resources and check understanding.",studentTip:"Your effort shows! Try video lessons for a fresh perspective on tricky topics."};case"DISENGAGING":return{categories:["Video Lesson","Simulation","Article"],action:"Reach out personally. Low-friction resources to re-establish habit.",studentTip:"We miss seeing you active  a quick video or sim is a great way to jump back in."};case"INACTIVE":return{categories:["Video Lesson","Article"],action:"Immediate outreach required. Check for external factors. Lowest-barrier resources.",studentTip:"Start small  even watching one video lesson counts. We're here to help!"};case"COPYING":return{categories:["Practice Set","Textbook","Lab Guide"],action:"Discuss academic integrity. Redirect to original-work resources.",studentTip:"Working through problems yourself builds the strongest understanding  give it a try!"}}}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VH=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gle={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>_.createElement("svg",{ref:d,...gle,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:VH("lucide",a),...c},[...o.map(([h,p])=>_.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(t,e)=>{const r=_.forwardRef(({className:n,...a},i)=>_.createElement(xle,{ref:i,iconNode:e,className:VH(`lucide-${mle(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=$e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=$e("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=$e("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=$e("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=$e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=$e("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=$e("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=$e("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=$e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=$e("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=$e("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=$e("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=$e("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=$e("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=$e("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=$e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=$e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=$e("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=$e("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=$e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=$e("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=$e("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=$e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=$e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=$e("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=$e("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=$e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jle=$e("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=$e("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=$e("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=$e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=$e("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=$e("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ele=$e("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=$e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=$e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=$e("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=$e("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=$e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kle=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=$e("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=$e("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=$e("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ole=$e("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=$e("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=$e("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=$e("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mle=$e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=$e("Heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=$e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=$e("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=$e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=$e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=$e("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=$e("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dle=$e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=$e("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=$e("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=$e("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=$e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=$e("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=$e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=$e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lle=$e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=$e("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=$e("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=$e("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ble=$e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $le=$e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=$e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=$e("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zle=$e("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=$e("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=$e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ule=$e("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vle=$e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=$e("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fle=$e("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=$e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qle=$e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hle=$e("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gle=$e("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=$e("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=$e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=$e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=$e("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=$e("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=$e("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=$e("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wle=$e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=$e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=$e("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=$e("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=$e("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=$e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kle=$e("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qle=$e("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=$e("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=$e("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=$e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xle=$e("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=$e("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=$e("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yle=$e("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=$e("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=$e("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=$e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jle=$e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=$e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=$e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=$e("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=$e("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zle=$e("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=$e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ece=$e("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=$e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tce=$e("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rce=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=$e("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=$e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nce=$e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ace=$e("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sce=$e("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=$e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ice="kellporter2@paps.net",tG="Mr. Porter",GR=[{name:"Dashboard",icon:s.jsx(Dle,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:s.jsx(aw,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Lesson Editor",icon:s.jsx(Ga,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:s.jsx(di,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Student Groups",icon:s.jsx(di,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Enrollment Codes",icon:s.jsx(mg,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:s.jsx(Os,{className:"w-5 h-5"}),role:"ADMIN",children:[{name:"Operatives",icon:s.jsx(ui,{className:"w-4 h-4"})},{name:"XP Protocols",icon:s.jsx($n,{className:"w-4 h-4"})},{name:"Missions",icon:s.jsx(Z2,{className:"w-4 h-4"})},{name:"Mission Control",icon:s.jsx(eb,{className:"w-4 h-4"})},{name:"Boss Ops",icon:s.jsx(Ro,{className:"w-4 h-4"})},{name:"Tutoring",icon:s.jsx(ll,{className:"w-4 h-4"})}]},{name:"Resources",icon:s.jsx(rw,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:s.jsx(eb,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:s.jsx(Os,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:s.jsx(cl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:s.jsx(Ole,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:s.jsx(Tle,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Intel Dossier",icon:s.jsx(C0,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:s.jsx(cl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:s.jsx(ll,{className:"w-5 h-5"}),role:"STUDENT"}],WR=new Set,Xi=(t,e,r)=>WR.has(t)?()=>{}:Fr(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&WR.add(t)}),De={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Xi("xp_events",zt(Me,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await ta(ot(Me,"xp_events",t.id),t)},deleteXPEvent:async t=>{await rs(ot(Me,"xp_events",t))},subscribeToQuests:t=>Xi("quests",zt(Me,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await ta(ot(Me,"quests",t.id),t)},deleteQuest:async t=>{await rs(ot(Me,"quests",t))},acceptQuest:async(t,e)=>{await $oe({questId:e})},deployMission:async(t,e)=>{await zoe({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await Uoe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await De.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Voe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Foe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await qoe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Hoe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await Goe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await Woe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ot(Me,"users",t);r?await sr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await sr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await Qoe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=ot(Me,"class_messages",t);await w3(Me,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ot(Me,"class_messages",t);await w3(Me,async n=>{const a=await n.get(r);if(!a.exists())return;const o=[...a.data().pinnedBy||[]];o.includes(e)?n.update(r,{pinnedBy:o.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...o,e]})})},toggleGlobalPin:async(t,e)=>{const r=ot(Me,"class_messages",t);await sr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await rs(ot(Me,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=Vr(zt(Me,"class_messages"),mn("isFlagged","==",!0),wo(50));return Fr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ot(Me,"class_messages",t);await sr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===De.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await sr(ot(Me,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await zl(zt(Me,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await sr(ot(Me,"student_groups",t),r)},deleteStudentGroup:async t=>{await rs(ot(Me,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=Vr(zt(Me,"student_groups"),mn("classType","==",t));return Fr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>Fr(zt(Me,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=Vr(zt(Me,"student_groups"),mn("memberIds","array-contains",t));return Fr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=Vr(zt(Me,"class_messages"),mn("channelId","==",t),wo(100));return Fr(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(i.timestamp).getTime()-new Date(o.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=Vr(zt(Me,"class_messages"),Go("timestamp","desc"),wo(20));return Xi("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=Vr(zt(Me,"conversations"),Go("lastMessageAt","desc"));return Fr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=Vr(zt(Me,`conversations/${t}/messages`),Go("timestamp","asc"));return Fr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Fa.ADMIN?tG:e.name,content:r,timestamp:new Date().toISOString()};await zl(zt(Me,`conversations/${t}/messages`),n),await sr(ot(Me,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await sr(ot(Me,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=Vr(zt(Me,"chat_flags"),mn("isResolved","==",!1));return Fr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await sr(ot(Me,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=Vr(zt(Me,"chat_flags"),mn("messageId","==",t),mn("isResolved","==",!1)),n=(await jd(e)).docs.map(a=>sr(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=Vr(zt(Me,"evidence"),mn("studentId","==",t),mn("weekId","==",e));return Fr(n,a=>{const i=a.docs.map(o=>({id:o.id,...o.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await ta(ot(Me,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=Pm(Lm,n.imageUrl);return foe(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>rs(ot(Me,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await ta(ot(Me,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ot(Me,"users",t);await sr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await sr(ot(Me,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await sr(ot(Me,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=zt(Me,"users");return Fr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=zt(Me,"assignments");return Fr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0,lessonBlocks:i.lessonBlocks||[]}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=Vr(zt(Me,"submissions"),Go("submittedAt","desc"),wo(200));return Fr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Zv(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=Vr(zt(Me,"submissions"),mn("userId","==",t),wo(50));return Fr(r,n=>{const a=n.docs.map(i=>{const o=i.data();return{id:i.id,userId:o.userId,userName:o.userName,assignmentId:o.assignmentId,assignmentTitle:o.assignmentTitle,metrics:o.metrics||Zv(),submittedAt:o.submittedAt,status:o.status,score:o.score,hasUnreadAdmin:o.hasUnreadAdmin||!1,hasUnreadStudent:o.hasUnreadStudent||!1,isPinned:o.isPinned||!1,isArchived:o.isArchived||!1,privateComments:(o.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,o)=>new Date(o.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=zt(Me,"allowed_emails");return Fr(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=zt(Me,"class_configs");return Fr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null,lessonBlocks:t.lessonBlocks&&t.lessonBlocks.length>0?t.lessonBlocks:[]};t.id?await ta(ot(Me,"assignments",t.id),e,{merge:!0}):await zl(zt(Me,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await sr(ot(Me,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await rs(ot(Me,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ot(Me,"allowed_emails",t),n=await ga(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await ta(r,{classType:e,classTypes:i});const o=Vr(zt(Me,"users"),mn("email","==",t)),c=await jd(o);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await sr(ot(Me,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await sr(ot(Me,"allowed_emails",t),{section:e});const r=Vr(zt(Me,"users"),mn("email","==",t)),n=await jd(r);await Promise.all(n.docs.map(async a=>{await sr(ot(Me,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await sr(ot(Me,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await sr(ot(Me,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await rs(ot(Me,"allowed_emails",t));const e=Vr(zt(Me,"users"),mn("email","==",t)),r=await jd(e);await Promise.all(r.docs.map(async n=>{await sr(ot(Me,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ot(Me,"users",t),n=await ga(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),o=Array.from(new Set([...i,e]));await sr(r,{isWhitelisted:!0,classType:e,enrolledClasses:o});const c=a.email;if(c){const d=await ga(ot(Me,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await ta(ot(Me,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await ga(ot(Me,"users",t));if(e.exists()){const r=e.data().email;await rs(ot(Me,"allowed_emails",r))}await rs(ot(Me,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await ta(ot(Me,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,o=ot(Me,"submissions",i);(await ga(o)).exists()?await sr(o,{"metrics.engagementTime":sm(a),"metrics.lastActive":Date.now()}):await ta(o,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ot(Me,"users",t),n=await ga(r);if(!n.exists())return;const i=n.data().email,o={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(o.isWhitelisted=!1,i&&await rs(ot(Me,"allowed_emails",i))):(o.isWhitelisted=!0,i&&await ta(ot(Me,"allowed_emails",i),{classType:e[0],classTypes:e})),await sr(r,o)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ot(Me,"users",t),n=await ga(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await sr(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const o=n.data().email;o&&await ta(ot(Me,"allowed_emails",o),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await sr(ot(Me,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Boe({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await Koe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=Vr(zt(Me,"users"),mn("role","==","STUDENT"));return Fr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await ta(ot(Me,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await rs(ot(Me,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Pm(Lm,`resources/${e}_${t.name}`);return await X_(r,t),await Yv(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Pm(Lm,`resources/html/${e}_${t.name}`);return await X_(r,t),await Yv(r)},subscribeToAnnouncements:t=>{const e=Vr(zt(Me,"announcements"),Go("createdAt","desc"),wo(20));return Xi("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await zl(zt(Me,"announcements"),t)},deleteAnnouncement:async t=>{await rs(ot(Me,"announcements",t))},dismissAnnouncement:async(t,e)=>{await sr(ot(Me,"users",t),{"gamification.dismissedAnnouncements":ER(e)})},subscribeToNotifications:(t,e)=>{const r=Vr(zt(Me,"notifications"),mn("userId","==",t),Go("timestamp","desc"),wo(50));return Fr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await sr(ot(Me,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=Vr(zt(Me,"notifications"),mn("userId","==",t),mn("isRead","==",!1)),n=(await jd(e)).docs.map(a=>sr(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await zl(zt(Me,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(o=>zl(zt(Me,"notifications"),{userId:o,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await sr(ot(Me,"users",t),n)},toggleCodenameLock:async(t,e)=>{await sr(ot(Me,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await Yoe({})).data,claimDailyLogin:async()=>(await Joe({})).data,spinFortuneWheel:async t=>(await Zoe({classType:t})).data,unlockSkill:async(t,e)=>(await ele({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await tle({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await rle({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await nle({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=Vr(zt(Me,"boss_encounters"),mn("isActive","==",!0));return Xi("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=zt(Me,"boss_encounters");return Fr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ot(Me,"boss_encounters",t.id);await ta(e,t)},toggleBossActive:async(t,e)=>{const r=ot(Me,"boss_encounters",t);await sr(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ot(Me,"boss_encounters",t);await rs(e)},subscribeToBossShards:(t,e)=>{const r=zt(Me,`boss_encounters/${t}/shards`);return Fr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=zt(Me,`boss_encounters/${t}/damage_log`);return Fr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await ale({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=Vr(zt(Me,"boss_quizzes"),mn("isActive","==",!0));return Xi("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=zt(Me,`boss_quizzes/${t}/shards`);return Fr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossQuizDamageLog:(t,e)=>{const r=zt(Me,`boss_quizzes/${t}/damage_log`);return Fr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await sle({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=zt(Me,"boss_quizzes");return Fr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=ot(Me,"boss_quizzes",t.id);await ta(e,t)},toggleBossQuizActive:async(t,e)=>{const r=ot(Me,"boss_quizzes",t);await sr(r,{isActive:e})},deleteBossQuiz:async t=>{const e=ot(Me,"boss_quizzes",t);await rs(e)},subscribeToBossQuestionBanks:t=>Fr(zt(Me,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=ot(Me,"boss_question_banks",t.id);await ta(e,t)},deleteBossQuestionBank:async t=>{await rs(ot(Me,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=Vr(zt(Me,"boss_quiz_progress"),mn("quizId","==",t));return(await jd(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=ot(Me,"boss_quiz_progress",`${t}_${e}`);return Fr(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await ile({questId:t,userName:e})).data,joinParty:async(t,e)=>(await ole({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>Fr(ot(Me,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await zl(zt(Me,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await sr(ot(Me,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await sr(ot(Me,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await sr(ot(Me,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=ot(Me,"tutoring_sessions",t),a=await ga(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),o=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[o]:r};i[c]&&(d.status="COMPLETED"),await sr(n,d)},subscribeToAllTutoringSessions:t=>{const e=Vr(zt(Me,"tutoring_sessions"),Go("createdAt","desc"),wo(100));return Fr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await rs(ot(Me,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=Vr(zt(Me,"tutoring_sessions"),mn("classType","==",t),wo(50));return Xi("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await lle({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=Vr(zt(Me,"knowledge_gates"),mn("isActive","==",!0));return Xi("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await cle({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=Vr(zt(Me,"seasonal_cosmetics"),mn("isAvailable","==",!0));return Xi("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await ule({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await sr(ot(Me,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=Vr(zt(Me,"daily_challenges"),mn("date","==",e));return Xi("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await dle({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=ot(Me,"users",t);await w3(Me,async i=>{var h;const o=await i.get(a);if(!o.exists())return;const c=((h=o.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await ga(ot(Me,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=Vr(zt(Me,"student_alerts"),mn("isDismissed","==",!1));return Xi("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const o={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(o[i.riskLevel]||0)-(o[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await hle({alertId:t})},subscribeToStudentBuckets:t=>Xi("student_buckets",zt(Me,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=Vr(zt(Me,"practice_progress"),mn("userId","==",t));return Fr(r,n=>{const a={};n.forEach(i=>{const o=i.data();o.assignmentId&&o.completed&&(a[o.assignmentId]={completed:o.completed||!1,totalCompletions:o.totalCompletions||0,bestScore:o.bestScore??null,completedAt:o.completedAt??null})}),e(a)},()=>{})},submitBugReport:async t=>{await zl(zt(Me,"bug_reports"),{...t,resolved:!1})},subscribeToBugReports:t=>{const e=Vr(zt(Me,"bug_reports"),Go("timestamp","desc"),wo(100));return Fr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},resolveBugReport:async t=>{await sr(ot(Me,"bug_reports",t),{resolved:!0})},createEnrollmentCode:async(t,e,r)=>{const n=[Math.random().toString(36).substring(2,6),Math.random().toString(36).substring(2,6)].join("-").toUpperCase(),a=ot(zt(Me,"enrollment_codes"));return await ta(a,{code:n,classType:t,section:e||null,createdAt:new Date().toISOString(),createdBy:"admin",usedCount:0,maxUses:r||null,isActive:!0}),n},subscribeToEnrollmentCodes:t=>{const e=Vr(zt(Me,"enrollment_codes"),Go("createdAt","desc"));return Fr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},deactivateEnrollmentCode:async t=>{await sr(ot(Me,"enrollment_codes",t),{isActive:!1})},redeemEnrollmentCode:async(t,e)=>{const r=Vr(zt(Me,"enrollment_codes"),mn("code","==",t.toUpperCase()),mn("isActive","==",!0)),n=await jd(r);if(n.empty)return{success:!1,error:"Invalid or expired code."};const a=n.docs[0],i=a.data();if(i.maxUses&&i.usedCount>=i.maxUses)return{success:!1,error:"This code has reached its usage limit."};const o=ot(Me,"users",e),c=await ga(o);return c.exists()?(c.data().enrolledClasses||[]).includes(i.classType)?{success:!1,error:"Already enrolled in this class."}:(await sr(o,{enrolledClasses:ER(i.classType),isWhitelisted:!0}),i.section&&await sr(o,{[`classSections.${i.classType}`]:i.section}),await sr(a.ref,{usedCount:sm(1)}),{success:!0,classType:i.classType}):{success:!1,error:"User not found."}},awardBehavior:async t=>{await zl(zt(Me,"behavior_awards"),t);const e=ot(Me,"users",t.studentId);await sr(e,{"gamification.xp":sm(t.xpAmount),[`gamification.classXp.${t.classType}`]:sm(t.xpAmount),"gamification.currency":sm(t.fluxAmount)})},subscribeToBehaviorAwards:(t,e)=>{const r=Vr(zt(Me,"behavior_awards"),mn("classType","==",t),Go("timestamp","desc"),wo(50));return Fr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},()=>{})},updateDailyStreak:async t=>{const e=ot(Me,"users",t),r=await ga(e);if(!r.exists())return{currentStreak:0,freezeUsed:!1};const a=r.data().streakData||{currentStreak:0,longestStreak:0,lastActiveDate:"",freezeTokens:0,maxFreezeTokens:3,streakHistory:[],milestones:[]},i=new Date().toISOString().split("T")[0];if(a.lastActiveDate===i)return{currentStreak:a.currentStreak,freezeUsed:!1};const o=new Date(Date.now()-864e5).toISOString().split("T")[0];let c=a.currentStreak,d=!1;a.lastActiveDate===o?c+=1:a.lastActiveDate&&Math.floor((new Date(i).getTime()-new Date(a.lastActiveDate).getTime())/864e5)===2&&a.freezeTokens>0?(c+=1,d=!0):c=1;const h=Math.max(a.longestStreak,c),p=[3,7,14,21,30,50,100],m=a.milestones||[],x=p.find(w=>c>=w&&!m.includes(w)),y=x?[...m,x]:m;let S=d?a.freezeTokens-1:a.freezeTokens;c>0&&c%7===0&&(S=Math.min(S+1,a.maxFreezeTokens));const N=[...a.streakHistory||[],i].slice(-30);return await sr(e,{streakData:{currentStreak:c,longestStreak:h,lastActiveDate:i,freezeTokens:S,maxFreezeTokens:3,streakHistory:N,milestones:y}}),{currentStreak:c,freezeUsed:d,newMilestone:x}}},rG=_.createContext(null),Pa=()=>{const t=_.useContext(rG);if(!t)throw new Error("useToast must be used within ToastProvider");return t},oce={success:s.jsx(zr,{className:"w-5 h-5 text-green-400 shrink-0"}),error:s.jsx(Li,{className:"w-5 h-5 text-red-400 shrink-0"}),info:s.jsx(kx,{className:"w-5 h-5 text-blue-400 shrink-0"})},lce={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},cce=({children:t})=>{const[e,r]=_.useState([]),n=_.useCallback((o,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:o,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=_.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i={success:o=>n(o,"success"),error:o=>n(o,"error"),info:o=>n(o,"info")};return s.jsxs(rG.Provider,{value:i,children:[t,s.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(o=>s.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${lce[o.type]}`,children:[oce[o.type],s.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:o.message}),s.jsx("button",{onClick:()=>a(o.id),className:"text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Xn,{className:"w-4 h-4"})})]},o.id))})]})},uce=()=>{const[t,e]=_.useState(navigator.onLine),[r,n]=_.useState(!1);return _.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:s.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?s.jsxs(s.Fragment,{children:[s.jsx(sce,{className:"w-4 h-4"}),"Connection restored"]}):s.jsxs(s.Fragment,{children:[s.jsx(ace,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var wu=kV();const Is=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(_.useEffect(()=>{const i=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?wu.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[s.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:s.jsx(Xn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),dce="/favicon.svg";function Qf(){return typeof window<"u"&&"Notification"in window}function Nv(){return Qf()?Notification.permission:"unsupported"}async function nG(){return Qf()?await Notification.requestPermission():"unsupported"}function hce(t,e,r){if(!(!Qf()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:dce,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function fce(t,e){const r=_.useRef(new Set),n=_.useRef(!0),a=_.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const o=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of o.slice(0,3))hce(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);_.useEffect(()=>{if(!t||!e||!Qf())return;n.current=!0,r.current=new Set;const i=De.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const pce=({userId:t})=>{const[e,r]=se.useState(""),[n,a]=se.useState(!1),[i,o]=se.useState(null),[c,d]=se.useState(null),h=Pa(),p=x=>{const y=x.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);r(y.length>4?y.slice(0,4)+"-"+y.slice(4):y),o(null),d(null)},m=async()=>{if(e.replace("-","").length<4){o("Enter a valid code.");return}a(!0),o(null);try{const x=await De.redeemEnrollmentCode(e,t);x.success?(d(`Enrolled in ${x.classType}!`),h.success(`Joined ${x.classType}!`),r("")):o(x.error||"Failed to redeem code.")}catch{o("Something went wrong. Please try again.")}finally{a(!1)}};return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Enrollment"}),s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-white mb-2",children:[s.jsx(mg,{className:"w-3.5 h-3.5 text-emerald-400"}),"Join Another Class"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:x=>p(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!n&&m()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm font-mono font-bold text-emerald-400 tracking-widest placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:n}),s.jsx("button",{onClick:m,disabled:n||e.replace("-","").length<4,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl text-xs font-bold transition flex items-center gap-1.5",children:n?s.jsx(ks,{className:"w-3.5 h-3.5 animate-spin"}):"Join"})]}),i&&s.jsx("p",{className:"mt-2 text-xs text-red-400",children:i}),c&&s.jsxs("p",{className:"mt-2 text-xs text-emerald-400 flex items-center gap-1.5",children:[s.jsx(u0,{className:"w-3.5 h-3.5"})," ",c]})]})]})},mce=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var S;const[a,i]=se.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[o,c]=se.useState(((S=r.gamification)==null?void 0:S.codename)||""),[d,h]=se.useState(!1),p=Pa(),m=N=>{i(w=>({...w,[N]:!w[N]}))},x=async()=>{var N;h(!0);try{await n(a),o!==(((N=r.gamification)==null?void 0:N.codename)||"")&&await De.updateCodename(r.id,o.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},y=({icon:N,title:w,description:T,value:C,onToggle:O})=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${C?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(N,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:w}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:T})]})]}),s.jsx("button",{onClick:O,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${C?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${C?"translate-x-5":"translate-x-0"}`})})]});return s.jsx(Is,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Vle,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),s.jsx(y,{icon:jle,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:ui,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),s.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[o.length,"/24 characters"]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Hle,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),s.jsx(y,{icon:eG,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(N=>({...N,soundEffects:N.soundEffects===!1}))})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),s.jsx("div",{className:"space-y-2",children:Qf()?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(FH,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:Nv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),s.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(N=>({...N,pushNotifications:!1}));else{const N=await nG();N==="granted"?(i(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):N==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:Nv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${Nv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):s.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),r.role==="STUDENT"&&s.jsx(pce,{userId:r.id}),s.jsxs("button",{onClick:x,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?s.jsx(ks,{className:"w-5 h-5 animate-spin"}):s.jsx(b8,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let E3=null,aG=!0;function gce(t){aG=t}function xce(){if(!E3){const t=window.AudioContext||window.webkitAudioContext;E3=new t}return E3}function tr(t,e,r="sine",n=.15){if(aG)try{const a=xce(),i=a.createOscillator(),o=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),o.gain.setValueAtTime(n,a.currentTime),o.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(o),o.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const Hn={xpGain:()=>{tr(600,.1,"sine",.1),setTimeout(()=>tr(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>tr(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{tr(1200,.15,"sine",.08),setTimeout(()=>tr(1500,.12,"sine",.06),100),setTimeout(()=>tr(1800,.2,"triangle",.05),180)},questAccept:()=>{tr(440,.15,"square",.06),setTimeout(()=>tr(660,.2,"square",.06),120)},questDeploy:()=>{tr(880,.12,"sawtooth",.05),setTimeout(()=>tr(660,.12,"sawtooth",.05),100),setTimeout(()=>tr(550,.2,"sawtooth",.04),200)},equip:()=>{tr(200,.05,"square",.1),setTimeout(()=>tr(400,.08,"sine",.08),50)},salvage:()=>{tr(300,.15,"sawtooth",.06),setTimeout(()=>tr(200,.2,"sawtooth",.04),100),setTimeout(()=>tr(100,.3,"sawtooth",.03),200)},craft:()=>{tr(150,.08,"square",.1),setTimeout(()=>tr(800,.2,"triangle",.08),60)},error:()=>{tr(200,.15,"square",.08),setTimeout(()=>tr(150,.2,"square",.06),120)},messageSend:()=>{tr(500,.06,"sine",.05)},notification:()=>{tr(800,.1,"sine",.06),setTimeout(()=>tr(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>tr(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{tr(523,.12,"sine",.08),setTimeout(()=>tr(659,.12,"sine",.07),100),setTimeout(()=>tr(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>tr(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{tr(523,.15,"triangle",.1),setTimeout(()=>tr(784,.15,"triangle",.1),120),setTimeout(()=>tr(1047,.3,"sine",.12),240)},skillUnlock:()=>{tr(300,.1,"sawtooth",.06),setTimeout(()=>tr(600,.1,"sawtooth",.06),80),setTimeout(()=>tr(900,.15,"sine",.08),160)},bossHit:()=>{tr(100,.1,"square",.12),setTimeout(()=>tr(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>tr(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{tr(1200,.08,"sine",.08),setTimeout(()=>tr(1600,.1,"sine",.06),60),setTimeout(()=>tr(2e3,.15,"triangle",.04),120)},partyJoin:()=>{tr(440,.1,"sine",.06),setTimeout(()=>tr(554,.1,"sine",.06),80),setTimeout(()=>tr(659,.15,"sine",.05),160)},chestOpen:()=>{tr(200,.15,"square",.06),setTimeout(()=>tr(300,.1,"square",.05),100),setTimeout(()=>tr(500,.1,"triangle",.06),200),setTimeout(()=>tr(800,.2,"sine",.08),350)}},yce={QUEST_APPROVED:s.jsx(Ru,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:s.jsx(Ru,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:s.jsx(nT,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:s.jsx(Ru,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:s.jsx(XH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:s.jsx(ble,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:s.jsx(nb,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:s.jsx($n,{className:"w-4 h-4 text-cyan-400"})},KR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=_.useState([]),[o,c]=_.useState(!1),[d,h]=_.useState(!1),[p,m]=_.useState({}),x=_.useRef(null),y=_.useRef(null),S=_.useRef(0),N=_.useCallback(()=>{if(!x.current)return;const I=x.current.getBoundingClientRect(),R=320;if(n){const A=Math.max(8,I.left),E=A+R>window.innerWidth-8?void 0:A,k=E==null?8:void 0;m({bottom:window.innerHeight-I.top+8,left:E,right:k})}else m({top:I.bottom+8,right:Math.max(8,window.innerWidth-I.right)})},[n]);_.useEffect(()=>{o&&Qf()&&Nv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[o,e==null?void 0:e.pushNotifications]),_.useEffect(()=>{const I=De.subscribeToNotifications(t,R=>{const A=R.filter(E=>!E.isRead).length;A>S.current&&S.current>=0&&Hn.notification(),S.current=A,i(R)});return()=>I()},[t]),_.useEffect(()=>{const I=R=>{var E,k;const A=R.target;(E=x.current)!=null&&E.contains(A)||(k=y.current)!=null&&k.contains(A)||c(!1)};return o&&document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[o]),_.useEffect(()=>{if(o)return N(),window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),()=>{window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0)}},[o,N]);const w=a.filter(I=>!I.isRead).length,T=async()=>{await De.markAllNotificationsRead(t)},C=async I=>{I.isRead||await De.markNotificationRead(I.id)},O=I=>{const R=Date.now()-new Date(I).getTime();return R<6e4?"just now":R<36e5?`${Math.floor(R/6e4)}m ago`:R<864e5?`${Math.floor(R/36e5)}h ago`:`${Math.floor(R/864e5)}d ago`},L=()=>{o||N(),c(!o)};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:x,onClick:L,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[s.jsx(j3,{className:"w-5 h-5"}),w>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:w>9?"9+":w})]}),o&&wu.createPortal(s.jsxs("div",{ref:y,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...p.top!=null?{top:p.top}:{},...p.bottom!=null?{bottom:p.bottom}:{},...p.left!=null?{left:p.left}:{},...p.right!=null?{right:p.right}:{}},children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),w>0&&s.jsxs("button",{onClick:T,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[s.jsx(Sle,{className:"w-3 h-3"})," Mark all read"]})]}),d&&s.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(FH,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:async()=>{await nG()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),s.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),s.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(j3,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(I=>s.jsxs("div",{onClick:()=>C(I),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${I.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[s.jsx("div",{className:"mt-0.5 shrink-0",children:yce[I.type]||s.jsx(j3,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-bold text-white truncate",children:I.title}),s.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:I.message}),s.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:O(I.timestamp)})]}),!I.isRead&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},I.id))})]}),document.body)]})},vce=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var w,T;const[i,o]=_.useState(""),[c,d]=_.useState(!1),[h,p]=_.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};_.useEffect(()=>{if(!m.liveBackground){o("");return}(async()=>{try{const O=Pm(Lm,"public/background.mp4"),L=await Yv(O);o(L)}catch{console.warn("Firebase background not found, using local fallback."),o("/background.mp4")}})()},[m.liveBackground]);const x=async C=>{await De.updateUserSettings(t.id,C)},[y,S]=_.useState(null);_.useEffect(()=>{const C=GR.find(O=>{var L;return(L=O.children)==null?void 0:L.some(I=>r===`${O.name}:${I.name}`)});C&&S(C.name)},[r]);const N=()=>{const C=GR.filter(L=>!(L.role==="ADMIN"&&t.role!==Fa.ADMIN||L.role==="STUDENT"&&t.role!==Fa.STUDENT)),O=L=>{var I;return(I=L.children)==null?void 0:I.some(R=>r===`${L.name}:${R.name}`)};return s.jsx(s.Fragment,{children:C.map(L=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{L.children?y===L.name?S(null):(S(L.name),O(L)||(n(`${L.name}:${L.children[0].name}`),p(!1))):(n(L.name),p(!1))},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===L.name||O(L)?L.children?"bg-purple-500/10 text-white border border-purple-500/20":"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[s.jsx("span",{className:`${r===L.name||O(L)?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:L.icon}),s.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:L.name}),L.children&&s.jsx(Wa,{className:`w-3.5 h-3.5 transition-transform ${y===L.name?"rotate-180":""} ${O(L)?"text-purple-400":"text-gray-600"}`})]}),L.children&&y===L.name&&s.jsx("div",{className:"ml-6 mt-1 space-y-0.5 border-l border-white/10 pl-3",children:L.children.map(I=>{const R=`${L.name}:${I.name}`;return s.jsxs("button",{onClick:()=>{n(R),p(!1)},className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-xs font-medium transition-all ${r===R?"bg-purple-600/60 text-white":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[s.jsx("span",{className:r===R?"text-white":"text-gray-600",children:I.icon}),I.name]},I.name)})})]},L.name))})};return s.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[s.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:s.jsx("source",{src:i,type:"video/mp4"})},i)}),s.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),s.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:s.jsx(ll,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(KR,{userId:t.id,settings:m,onUpdateSettings:x}),s.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:s.jsx(Ble,{className:"w-6 h-6"})})]})]}),h&&s.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),s.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((w=t.gamification)==null?void 0:w.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Xn,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:s.jsx(N,{})}),s.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[s.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[s.jsx(xg,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[s.jsx(UR,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),s.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:s.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[s.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[s.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:s.jsx(ll,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),s.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Fa.ADMIN?"Admin System":"Operative Terminal"})]})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:s.jsx(N,{})}),s.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((T=t.gamification)==null?void 0:T.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(KR,{userId:t.id,settings:m,onUpdateSettings:x,dropUp:!0}),s.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:s.jsx(xg,{className:"w-4 h-4"})})]})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[s.jsx(UR,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),s.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),s.jsx(mce,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:x})]})},bce=[.75,1,1.25,1.5,2],QR=({textContent:t,compact:e})=>{const[r,n]=_.useState(!1),[a,i]=_.useState(1),[o,c]=_.useState(0),[d,h]=_.useState(!1),p=_.useRef(null),m=_.useRef([]);_.useEffect(()=>{if(!t){m.current=[];return}const L=t.replace(/\n+/g,". ").split(new RegExp("(?<=[.!?])\\s+")).map(I=>I.trim()).filter(I=>I.length>2);m.current=L,c(0)},[t]);const x=_.useCallback(()=>{window.speechSynthesis.cancel(),n(!1)},[]),y=_.useCallback(L=>{const I=m.current;if(L<0||L>=I.length){n(!1);return}window.speechSynthesis.cancel();const R=new SpeechSynthesisUtterance(I[L]);R.rate=a,R.onend=()=>{const A=L+1;A<I.length?(c(A),y(A)):n(!1)},R.onerror=()=>{n(!1)},p.current=R,c(L),window.speechSynthesis.speak(R)},[a]),S=_.useCallback(()=>{r?x():(n(!0),y(o))},[r,o,y,x]),N=_.useCallback(()=>{const L=Math.max(0,o-1);c(L),r&&y(L)},[o,r,y]),w=_.useCallback(()=>{const L=Math.min(m.current.length-1,o+1);c(L),r&&y(L)},[o,r,y]),T=_.useCallback(L=>{if(i(L),h(!1),r){window.speechSynthesis.cancel();const I=new SpeechSynthesisUtterance(m.current[o]);I.rate=L,I.onend=()=>{const R=o+1;R<m.current.length?(c(R),y(R)):n(!1)},p.current=I,window.speechSynthesis.speak(I)}},[r,o,y]);if(_.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),!t||m.current.length===0)return null;if(e)return s.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${r?"text-amber-300 bg-amber-500/20 border-amber-500/30 hover:bg-amber-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:r?"Stop Reading":"Read Aloud",children:[r?s.jsx(nce,{className:"w-3 h-3"}):s.jsx(eG,{className:"w-3 h-3"}),r?"Stop Reading":"Read Aloud"]});const C=m.current.length,O=C>0?(o+1)/C*100:0;return s.jsxs("div",{className:"flex items-center gap-2 bg-black/40 rounded-xl px-3 py-2 border border-white/10",children:[s.jsx("button",{onClick:S,className:`p-1.5 rounded-lg transition ${r?"bg-amber-500/20 text-amber-400":"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20"}`,children:r?s.jsx(Gle,{className:"w-4 h-4"}):s.jsx(k0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:N,disabled:o===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Kle,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:w,disabled:o>=C-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Qle,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-300",style:{width:`${O}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-500 font-mono min-w-[3rem] text-center",children:[o+1,"/",C]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-1 text-[10px] text-gray-400 hover:text-white bg-white/5 px-2 py-1 rounded-lg border border-white/10 transition",children:[s.jsx(Ile,{className:"w-3 h-3"}),a,"x"]}),d&&s.jsx("div",{className:"absolute bottom-full right-0 mb-1 bg-[#1a1b26] border border-white/10 rounded-lg shadow-lg overflow-hidden z-50",children:bce.map(L=>s.jsxs("button",{onClick:()=>T(L),className:`block w-full text-left px-3 py-1.5 text-xs transition ${a===L?"bg-purple-600/30 text-purple-300":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[L,"x"]},L))})]})]})},wce=["#ef4444","#f59e0b","#22c55e","#3b82f6","#a855f7","#ffffff"],Sce=[2,4,6,8],Nce=({containerRef:t,onAnnotationsChange:e})=>{const r=_.useRef(null),[n,a]=_.useState(!1),[i,o]=_.useState("pen"),[c,d]=_.useState("#ef4444"),[h,p]=_.useState(4),[m,x]=_.useState(!1),[y,S]=_.useState(!1),N=_.useRef([]),w=_.useRef(!1),T=_.useRef([]),C=_.useCallback(()=>{const P=r.current,$=t.current;if(!P||!$)return;const B=$.getBoundingClientRect();P.width=B.width,P.height=B.height,P.style.width=`${B.width}px`,P.style.height=`${B.height}px`,O()},[t]);_.useEffect(()=>{if(!n)return;C();const P=new ResizeObserver(C);return t.current&&P.observe(t.current),()=>P.disconnect()},[n,C,t]);const O=_.useCallback(()=>{const P=r.current;if(!P)return;const $=P.getContext("2d");if($){$.clearRect(0,0,P.width,P.height);for(const B of N.current)if(!(B.points.length<2)){$.beginPath(),$.strokeStyle=B.tool==="eraser"?"rgba(0,0,0,0)":B.color,$.lineWidth=B.width,$.lineCap="round",$.lineJoin="round",B.tool==="eraser"?$.globalCompositeOperation="destination-out":$.globalCompositeOperation="source-over",$.moveTo(B.points[0].x,B.points[0].y);for(let G=1;G<B.points.length;G++)$.lineTo(B.points[G].x,B.points[G].y);$.stroke()}$.globalCompositeOperation="source-over"}},[]),L=_.useCallback(P=>{const $=r.current;if(!$)return null;const B=$.getBoundingClientRect();if("touches"in P){const G=P.touches[0];return{x:G.clientX-B.left,y:G.clientY-B.top}}return{x:P.clientX-B.left,y:P.clientY-B.top}},[]),I=_.useCallback(P=>{if(!n)return;P.preventDefault();const $=L(P);$&&(w.current=!0,T.current=[$])},[n,L]),R=_.useCallback(P=>{if(!w.current||!n)return;P.preventDefault();const $=L(P);if(!$)return;T.current.push($);const B=r.current;if(!B)return;const G=B.getContext("2d");if(!G)return;const K=T.current;if(K.length<2)return;G.beginPath(),i==="eraser"?(G.globalCompositeOperation="destination-out",G.strokeStyle="rgba(0,0,0,1)"):(G.globalCompositeOperation="source-over",G.strokeStyle=c),G.lineWidth=i==="eraser"?h*4:h,G.lineCap="round",G.lineJoin="round";const H=K[K.length-2],ee=K[K.length-1];G.moveTo(H.x,H.y),G.lineTo(ee.x,ee.y),G.stroke(),G.globalCompositeOperation="source-over"},[n,L,i,c,h]),A=_.useCallback(()=>{w.current&&(w.current=!1,T.current.length>1&&(N.current.push({points:[...T.current],color:c,width:i==="eraser"?h*4:h,tool:i}),e==null||e(N.current.length>0)),T.current=[])},[c,h,i,e]),E=_.useCallback(()=>{N.current.pop(),O(),e==null||e(N.current.length>0)},[O,e]),k=_.useCallback(()=>{N.current=[],O(),e==null||e(!1)},[O,e]),U=_.useCallback(()=>{a(P=>!P),x(!1),S(!1)},[]);return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:U,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${n?"text-red-300 bg-red-500/20 border-red-500/30 hover:bg-red-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:"Annotate",children:[s.jsx(sb,{className:"w-3 h-3"}),n?"Clear Annotations":"Annotate"]}),n&&s.jsx("canvas",{ref:r,className:"absolute inset-0 z-30",style:{cursor:"crosshair",touchAction:"none"},onMouseDown:I,onMouseMove:R,onMouseUp:A,onMouseLeave:A,onTouchStart:I,onTouchMove:R,onTouchEnd:A}),n&&s.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-[#1a1b26]/95 backdrop-blur-md px-4 py-2 rounded-xl border border-white/10 shadow-2xl",children:[s.jsx("button",{onClick:()=>o("pen"),className:`p-2 rounded-lg transition ${i==="pen"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Pen",children:s.jsx(sb,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>o("eraser"),className:`p-2 rounded-lg transition ${i==="eraser"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Eraser",children:s.jsx(Ele,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{x(!m),S(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Color",children:[s.jsx(qle,{className:"w-4 h-4"}),s.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-2 h-2 rounded-full",style:{backgroundColor:c}})]}),m&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-1.5 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:wce.map(P=>s.jsx("button",{onClick:()=>{d(P),x(!1)},className:`w-6 h-6 rounded-full border-2 transition ${c===P?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:P}},P))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>{S(!y),x(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Line width",children:s.jsx(Ix,{className:"w-4 h-4"})}),y&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-2 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:Sce.map(P=>s.jsx("button",{onClick:()=>{p(P),S(!1)},className:`flex items-center justify-center w-8 h-8 rounded-lg transition ${h===P?"bg-purple-600/30 border border-purple-500/30":"hover:bg-white/5"}`,children:s.jsx("div",{className:"rounded-full bg-white",style:{width:P*2,height:P*2}})},P))})]}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsx("button",{onClick:E,disabled:N.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 disabled:opacity-30 transition",title:"Undo",children:s.jsx(Zle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:k,disabled:N.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-red-400 hover:bg-red-500/10 disabled:opacity-30 transition",title:"Clear all",children:s.jsx(gr,{className:"w-4 h-4"})})]})]})},jce={TEXT:s.jsx(h0,{className:"w-3.5 h-3.5"}),MC:s.jsx(Ex,{className:"w-3.5 h-3.5"}),SHORT_ANSWER:s.jsx(p0,{className:"w-3.5 h-3.5"}),CHECKLIST:s.jsx(nw,{className:"w-3.5 h-3.5"}),VOCABULARY:s.jsx(Ga,{className:"w-3.5 h-3.5"}),INFO_BOX:s.jsx(kx,{className:"w-3.5 h-3.5"}),SECTION_HEADER:s.jsx(y8,{className:"w-3.5 h-3.5"}),IMAGE:s.jsx(tw,{className:"w-3.5 h-3.5"}),VIDEO:s.jsx(k0,{className:"w-3.5 h-3.5"}),OBJECTIVES:s.jsx(Os,{className:"w-3.5 h-3.5"}),DIVIDER:s.jsx(Ix,{className:"w-3.5 h-3.5"}),EXTERNAL_LINK:s.jsx(Cx,{className:"w-3.5 h-3.5"}),EMBED:s.jsx(x8,{className:"w-3.5 h-3.5"}),VOCAB_LIST:s.jsx(v8,{className:"w-3.5 h-3.5"}),ACTIVITY:s.jsx($n,{className:"w-3.5 h-3.5"}),SORTING:s.jsx(J2,{className:"w-3.5 h-3.5"}),DATA_TABLE:s.jsx(S8,{className:"w-3.5 h-3.5"}),BAR_CHART:s.jsx(C0,{className:"w-3.5 h-3.5"}),RANKING:s.jsx(f0,{className:"w-3.5 h-3.5"}),LINKED:s.jsx(gg,{className:"w-3.5 h-3.5"})},_ce={TEXT:"Reading",MC:"Question",SHORT_ANSWER:"Response",CHECKLIST:"Checklist",VOCABULARY:"Vocabulary",INFO_BOX:"Info",SECTION_HEADER:"Section",IMAGE:"Image",VIDEO:"Video",OBJECTIVES:"Objectives",DIVIDER:"Divider",EXTERNAL_LINK:"Link",EMBED:"Embed",VOCAB_LIST:"Vocab List",ACTIVITY:"Activity",SORTING:"Sorting",DATA_TABLE:"Data Table",BAR_CHART:"Bar Chart",RANKING:"Ranking",LINKED:"Follow-up"},Tce=({blocks:t,currentBlockIndex:e,completedBlocks:r,onNavigateToBlock:n,engagementTime:a=0,xpEarned:i=0})=>{const o=t.filter(T=>["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(T.type)),c=o.filter(T=>r.has(T.id)).length,d=o.length,h=d>0?Math.round(c/d*100):e>=t.length-1?100:Math.round((e+1)/t.length*100),p=100,m=8,x=(p-m)/2,y=2*Math.PI*x,S=y-h/100*y,N=Math.floor(a/60),w=a%60;return s.jsxs("div",{className:"w-56 flex-shrink-0 flex flex-col gap-4 overflow-y-auto custom-scrollbar pr-1",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 bg-black/30 rounded-2xl p-4 border border-white/5",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{width:p,height:p,className:"transform -rotate-90",children:[s.jsx("circle",{cx:p/2,cy:p/2,r:x,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:m}),s.jsx("circle",{cx:p/2,cy:p/2,r:x,fill:"none",stroke:h===100?"#34d399":"#a855f7",strokeWidth:m,strokeLinecap:"round",strokeDasharray:y,strokeDashoffset:S,className:"transition-all duration-700 ease-out"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("span",{className:`text-xl font-black ${h===100?"text-emerald-400":"text-white"}`,children:[h,"%"]})})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[c,"/",d," questions"]}),s.jsxs("div",{className:"flex gap-3 text-[10px] text-gray-500 font-mono",children:[s.jsxs("span",{children:[N,":",String(w).padStart(2,"0")]}),i>0&&s.jsxs("span",{className:"text-amber-400",children:["+",i," XP"]})]})]}),s.jsxs("div",{className:"bg-black/30 rounded-2xl p-3 border border-white/5 flex flex-col gap-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:"Sections"}),t.map((T,C)=>{const O=C===e,L=r.has(T.id),I=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(T.type);return s.jsxs("button",{onClick:()=>n(C),className:`flex items-center gap-2 px-2 py-1.5 rounded-lg text-left transition-all text-[11px] ${O?"bg-purple-500/20 text-purple-300 border border-purple-500/30":L?"text-emerald-400/80 hover:bg-emerald-500/10":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx("span",{className:"shrink-0 w-4 h-4 flex items-center justify-center",children:L?s.jsx(zr,{className:"w-3.5 h-3.5 text-emerald-400"}):s.jsx("span",{className:O?"text-purple-400":"text-gray-600",children:jce[T.type]||s.jsx(h0,{className:"w-3.5 h-3.5"})})}),s.jsxs("span",{className:"truncate flex-1 font-medium",children:[_ce[T.type]||T.type,I&&!L&&s.jsx("span",{className:"ml-1 text-[9px] text-amber-400/60",children:"*"})]}),s.jsx("span",{className:`text-[9px] font-mono ${O?"text-purple-400":"text-gray-600"}`,children:C+1})]},T.id)})]})]})},XR=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"],Ace=({block:t})=>s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:t.content}),Ece=({block:t})=>{const r={tip:"border-green-500/30 bg-green-500/5 text-green-400",warning:"border-amber-500/30 bg-amber-500/5 text-amber-400",note:"border-blue-500/30 bg-blue-500/5 text-blue-400"}[t.variant||"note"];return s.jsxs("div",{className:`border rounded-xl p-4 text-sm ${r}`,children:[s.jsx("div",{className:"font-bold text-xs uppercase tracking-widest mb-1",children:t.variant==="tip"?"Tip":t.variant==="warning"?"Warning":"Note"}),s.jsx("div",{className:"text-gray-300",children:t.content})]})},Cce=({block:t,onComplete:e})=>{const[r,n]=_.useState(null),[a,i]=_.useState(!1),o=r===t.correctAnswer,c=()=>{r!==null&&(i(!0),e(r===t.correctAnswer))};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(Ex,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.options||[]).map((d,h)=>s.jsx("button",{onClick:()=>!a&&n(h),disabled:a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a&&h===t.correctAnswer?"border-green-500/50 bg-green-500/10 text-green-400":a&&h===r&&!o?"border-red-500/50 bg-red-500/10 text-red-400":r===h?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+h),"."]}),s.jsx("span",{children:d}),a&&h===t.correctAnswer&&s.jsx(zr,{className:"w-4 h-4 text-green-400 ml-auto"}),a&&h===r&&!o&&s.jsx(oo,{className:"w-4 h-4 text-red-400 ml-auto"})]})},h))}),!a&&s.jsx("button",{onClick:c,disabled:r===null,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Check Answer"}),a&&s.jsx("div",{className:`text-xs font-bold ${o?"text-green-400":"text-red-400"}`,children:o?"Correct!":"Incorrect  review the material above."})]})},kce=({block:t,onComplete:e})=>{const[r,n]=_.useState(""),[a,i]=_.useState(!1),[o,c]=_.useState(!1),d=()=>{if(!r.trim())return;const p=(t.acceptedAnswers||[]).map(m=>m.toLowerCase().trim()).includes(r.toLowerCase().trim());c(p),i(!0),e(p)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(p0,{className:"w-4 h-4 text-cyan-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),disabled:a,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:h=>h.key==="Enter"&&d()}),!a&&s.jsx("button",{onClick:d,disabled:!r.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),a&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${o?"text-green-400":"text-amber-400"}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx(zr,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(oo,{className:"w-3 h-3"})," Accepted answers: ",(t.acceptedAnswers||[]).join(", ")]})})]})},Ice=({block:t})=>{const[e,r]=_.useState(!1);return s.jsx("button",{onClick:()=>r(!e),className:"w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ga,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:t.term}),e?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:t.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal definition"})]})]})})},Oce=({block:t,onComplete:e})=>{const[r,n]=_.useState(new Set),a=(t.items||[]).length>0&&r.size===(t.items||[]).length,i=o=>{const c=new Set(r);c.has(o)?c.delete(o):c.add(o),n(c),c.size===(t.items||[]).length&&e(!0)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(nw,{className:"w-4 h-4 text-green-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.items||[]).map((o,c)=>s.jsxs("button",{onClick:()=>i(c),className:`w-full text-left flex items-center gap-3 p-3 rounded-xl border text-sm transition ${r.has(c)?"border-green-500/30 bg-green-500/5 text-green-400 line-through":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition ${r.has(c)?"border-green-500 bg-green-500":"border-gray-600"}`,children:r.has(c)&&s.jsx(zr,{className:"w-3 h-3 text-white"})}),o]},c))}),a&&s.jsxs("div",{className:"text-xs font-bold text-green-400 flex items-center gap-1",children:[s.jsx(zr,{className:"w-3 h-3"})," All items completed!"]})]})},Rce=({block:t})=>s.jsxs("div",{className:"text-center py-2",children:[t.icon&&s.jsx("div",{className:"text-3xl mb-2",children:t.icon}),s.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:t.title}),t.subtitle&&s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.subtitle})]}),Mce=({block:t})=>{const e=(t.url||"").replace(/\/file\/d\/([^/]+)\/.*/,"/uc?export=view&id=$1");return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",children:s.jsx("img",{src:e!==t.url?e:t.url,alt:t.alt||t.caption||"",className:"w-full max-h-[500px] object-contain",loading:"lazy"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]})},Dce=({block:t})=>{const r=(n=>{const a=n.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return a?`https://www.youtube.com/embed/${a[1]}`:""})(t.url||"");return r?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 aspect-video bg-black",children:s.jsx("iframe",{src:r,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",title:t.caption||"Video"})}),t.caption&&s.jsxs("p",{className:"text-xs text-gray-500 text-center italic flex items-center justify-center gap-1",children:[s.jsx(k0,{className:"w-3 h-3"})," ",t.caption]})]}):s.jsx("div",{className:"text-sm text-gray-500 italic",children:"Invalid video URL"})},Pce=({block:t})=>s.jsxs("div",{className:"border border-emerald-500/20 bg-emerald-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-bold text-sm",children:[s.jsx(Os,{className:"w-4 h-4"}),t.title||"Learning Objectives"]}),s.jsx("ul",{className:"space-y-1",children:(t.items||[]).map((e,r)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[s.jsx("span",{className:"text-emerald-400 mt-0.5 shrink-0",children:""}),e]},r))})]}),Lce=()=>s.jsx("div",{className:"py-2",children:s.jsx("hr",{className:"border-white/10"})}),Bce=({block:t})=>s.jsx("a",{href:t.url,target:t.openInNewTab!==!1?"_blank":"_self",rel:"noopener noreferrer",className:"block p-4 rounded-xl border border-purple-500/20 bg-purple-500/5 hover:bg-purple-500/10 transition group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-purple-300 group-hover:text-purple-200 transition",children:t.title||t.url}),t.content&&s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:t.content})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-400 bg-purple-500/10 px-3 py-1.5 rounded-lg shrink-0 ml-3",children:[t.buttonLabel||"Open"," ",s.jsx(Cx,{className:"w-3 h-3"})]})]})}),$ce=({block:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",style:{height:t.height||500},children:s.jsx("iframe",{src:t.url,className:"w-full h-full border-0",title:t.caption||"Embedded content",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]}),zce=({block:t})=>{const[e,r]=_.useState(new Set);return s.jsx("div",{className:"space-y-2",children:(t.terms||[]).map((n,a)=>s.jsx("button",{onClick:()=>r(i=>{const o=new Set(i);return o.has(a)?o.delete(a):o.add(a),o}),className:"w-full text-left p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ga,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:n.term}),e.has(a)?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:n.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal"})]})]})},a))})},Uce=({block:t})=>s.jsxs("div",{className:"border border-amber-500/20 bg-amber-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-400 font-bold text-sm",children:[t.icon&&s.jsx("span",{className:"text-lg",children:t.icon}),t.title||"Activity"]}),s.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-line",children:t.instructions})]}),Vce=({block:t,onComplete:e})=>{const r=t.sortItems||[],[n,a]=_.useState({}),[i,o]=_.useState(!1),c=r.map((S,N)=>N).filter(S=>!(S in n)),d=Object.entries(n).filter(([,S])=>S==="left").map(([S])=>parseInt(S)),h=Object.entries(n).filter(([,S])=>S==="right").map(([S])=>parseInt(S)),p=(S,N)=>{i||a(w=>({...w,[S]:N}))},m=S=>{i||a(N=>{const w={...N};return delete w[S],w})},x=()=>{if(c.length>0)return;o(!0);const S=r.every((N,w)=>n[w]===N.correct);e(S)},y=r.filter((S,N)=>n[N]===S.correct).length;return s.jsxs("div",{className:"space-y-3",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),t.instructions&&s.jsx("p",{className:"text-xs text-gray-400",children:t.instructions}),c.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Sort these items"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(S=>s.jsxs("div",{className:"flex items-center gap-1 bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm text-gray-300",children:[s.jsx("span",{children:r[S].text}),s.jsx("button",{onClick:()=>p(S,"left"),className:"ml-1 text-[10px] bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded hover:bg-blue-500/30 transition",children:t.leftLabel||"L"}),s.jsx("button",{onClick:()=>p(S,"right"),className:"text-[10px] bg-orange-500/20 text-orange-300 px-1.5 py-0.5 rounded hover:bg-orange-500/30 transition",children:t.rightLabel||"R"})]},S))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"rounded-xl border border-blue-500/20 bg-blue-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest mb-2",children:t.leftLabel||"Category A"}),s.jsx("div",{className:"space-y-1",children:d.map(S=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[S].correct==="left"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[S].text}),!i&&s.jsx("button",{onClick:()=>m(S),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[S].correct==="left"&&s.jsx(zr,{className:"w-3 h-3 text-green-400"}),i&&r[S].correct!=="left"&&s.jsx(oo,{className:"w-3 h-3 text-red-400"})]},S))})]}),s.jsxs("div",{className:"rounded-xl border border-orange-500/20 bg-orange-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-2",children:t.rightLabel||"Category B"}),s.jsx("div",{className:"space-y-1",children:h.map(S=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[S].correct==="right"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[S].text}),!i&&s.jsx("button",{onClick:()=>m(S),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[S].correct==="right"&&s.jsx(zr,{className:"w-3 h-3 text-green-400"}),i&&r[S].correct!=="right"&&s.jsx(oo,{className:"w-3 h-3 text-red-400"})]},S))})]})]}),!i&&c.length===0&&r.length>0&&s.jsx("button",{onClick:x,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Sorting"}),i&&s.jsx("div",{className:`text-xs font-bold ${y===r.length?"text-green-400":"text-amber-400"}`,children:y===r.length?"All correct!":`${y}/${r.length} correct`})]})},Fce=({block:t})=>{const e=t.columns||[],r=t.trials||3,[n,a]=_.useState(()=>Array.from({length:r},()=>Object.fromEntries(e.map(o=>[o.key,""])))),i=(o,c,d)=>{a(h=>{const p=[...h];return p[o]={...p[o],[c]:d},p})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-white/10",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/30",children:[s.jsx("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left w-12",children:"#"}),e.map(o=>s.jsxs("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left",children:[o.label,o.unit?` (${o.unit})`:""]},o.key))]})}),s.jsx("tbody",{children:n.map((o,c)=>s.jsxs("tr",{className:"border-t border-white/5",children:[s.jsx("td",{className:"px-3 py-1 text-xs text-gray-600 font-mono",children:c+1}),e.map(d=>s.jsx("td",{className:"px-1 py-1",children:d.editable!==!1?s.jsx("input",{type:"text",value:o[d.key]||"",onChange:h=>i(c,d.key,h.target.value),className:"w-full bg-black/20 border border-white/5 rounded px-2 py-1 text-sm text-white placeholder-gray-700 focus:outline-none focus:border-purple-500/50 transition"}):s.jsx("span",{className:"px-2 py-1 text-gray-400",children:o[d.key]})},d.key))]},c))})]})})]})},qce=({block:t})=>{const e=t.barCount||3,r=t.height||300,[n,a]=_.useState(()=>Array(e).fill(0)),i=Math.max(...n.map(Math.abs),1),o=["#a855f7","#3b82f6","#ef4444","#22c55e","#f59e0b","#06b6d4","#ec4899","#8b5cf6","#14b8a6","#f97316"],c=(d,h)=>{const p=h.currentTarget.getBoundingClientRect(),m=h.clientY-p.top,x=Math.round((p.height/2-m)/(p.height/2)*10);a(y=>{const S=[...y];return S[d]=x,S})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium text-center",children:t.title}),s.jsx("div",{className:"flex items-end justify-center gap-4 px-4",style:{height:r},children:n.map((d,h)=>{const p=Math.abs(d)/Math.max(i,10)*(r/2-20);return s.jsxs("div",{className:"flex flex-col items-center gap-1 flex-1 h-full justify-center cursor-pointer",onClick:m=>c(h,m),children:[s.jsxs("div",{className:"relative w-full max-w-[60px] h-full flex items-center",children:[s.jsx("div",{className:"absolute inset-0 border-b border-white/10",style:{top:"50%"}}),s.jsx("div",{className:"absolute left-0 right-0 rounded-t-lg transition-all duration-200",style:{height:p,bottom:d>=0?"50%":void 0,top:d<0?"50%":void 0,backgroundColor:o[h%o.length],opacity:.8}})]}),s.jsx("div",{className:"text-[10px] text-gray-400 font-mono",children:d}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Bar ",h+1]})]},h)})}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 px-4",children:[s.jsx("span",{children:t.initialLabel}),s.jsx("span",{children:t.deltaLabel}),s.jsx("span",{children:t.finalLabel})]})]})},Hce=({block:t,onComplete:e})=>{const r=t.items||[],n=_.useMemo(()=>{const y=r.map((N,w)=>({item:N,origIdx:w}));let S=t.id.split("").reduce((N,w)=>N+w.charCodeAt(0),0);for(let N=y.length-1;N>0;N--){S=(S*16807+0)%2147483647;const w=S%(N+1);[y[N],y[w]]=[y[w],y[N]]}return y},[t.id,r]),[a,i]=_.useState(n),[o,c]=_.useState(!1),[d,h]=_.useState(null),p=(y,S)=>{o||i(N=>{const w=[...N],[T]=w.splice(y,1);return w.splice(S,0,T),w})},m=()=>{c(!0);const y=a.every((S,N)=>S.origIdx===N);e(y)},x=a.filter((y,S)=>y.origIdx===S).length;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(f0,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-1",children:a.map((y,S)=>s.jsxs("div",{draggable:!o,onDragStart:()=>h(S),onDragOver:N=>N.preventDefault(),onDrop:()=>{d!==null&&p(d,S),h(null)},className:`flex items-center gap-2 p-3 rounded-xl border text-sm transition cursor-grab active:cursor-grabbing ${o?y.origIdx===S?"border-green-500/30 bg-green-500/5 text-green-400":"border-red-500/30 bg-red-500/5 text-red-400":d===S?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx(f0,{className:"w-4 h-4 text-gray-600 shrink-0"}),s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[S+1,"."]}),s.jsx("span",{className:"flex-1",children:y.item}),o&&y.origIdx===S&&s.jsx(zr,{className:"w-4 h-4 text-green-400"}),o&&y.origIdx!==S&&s.jsx(oo,{className:"w-4 h-4 text-red-400"}),!o&&s.jsxs("div",{className:"flex gap-0.5",children:[s.jsx("button",{onClick:()=>S>0&&p(S,S-1),disabled:S===0,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(so,{className:"w-3 h-3 -rotate-90"})}),s.jsx("button",{onClick:()=>S<a.length-1&&p(S,S+1),disabled:S===a.length-1,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(so,{className:"w-3 h-3 rotate-90"})})]})]},y.origIdx))}),!o&&s.jsx("button",{onClick:m,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Order"}),o&&s.jsx("div",{className:`text-xs font-bold ${x===r.length?"text-green-400":"text-amber-400"}`,children:x===r.length?"Perfect order!":`${x}/${r.length} in correct position`})]})},Gce=({block:t,allBlocks:e,onComplete:r})=>{var m;const n=e.find(x=>x.id===t.linkedBlockId),[a,i]=_.useState(""),[o,c]=_.useState(!1),[d,h]=_.useState(!1),p=()=>{if(!a.trim())return;const x=(t.acceptedAnswers||[]).map(S=>S.toLowerCase().trim()),y=x.length===0||x.includes(a.toLowerCase().trim());h(y),c(!0),r(y)};return s.jsxs("div",{className:"space-y-3",children:[n&&s.jsxs("div",{className:"border border-white/10 bg-white/5 rounded-xl p-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[s.jsx(gg,{className:"w-3 h-3"})," Referenced question"]}),s.jsx("p",{className:"text-xs text-gray-400",children:n.content})]}),s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(gg,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),disabled:o,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:x=>x.key==="Enter"&&p()}),!o&&s.jsx("button",{onClick:p,disabled:!a.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),o&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${d?"text-green-400":"text-amber-400"}`,children:d?s.jsxs(s.Fragment,{children:[s.jsx(zr,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(oo,{className:"w-3 h-3"})," ",(t.acceptedAnswers||[]).length>0?`Accepted: ${(m=t.acceptedAnswers)==null?void 0:m.join(", ")}`:"Response recorded"]})})]})},lb=({blocks:t,onBlockComplete:e,onAllComplete:r,showSidebar:n=!1,engagementTime:a,xpEarned:i})=>{const[o,c]=_.useState(new Set),[d,h]=_.useState(0),p=_.useCallback((C,O)=>{e==null||e(C,O),c(L=>{const I=new Set(L);return I.add(C),t.filter(A=>XR.includes(A.type)).every(A=>I.has(A.id))&&(r==null||r()),I})},[t,e,r]),m=()=>{d<t.length-1&&h(C=>C+1)},x=()=>{d>0&&h(C=>C-1)};if(t.length===0)return null;const y=t[d],S=XR.includes(y.type),N=o.has(y.id),w=C=>{const O=L=>p(C.id,L);switch(C.type){case"TEXT":return s.jsx(Ace,{block:C});case"INFO_BOX":return s.jsx(Ece,{block:C});case"MC":return s.jsx(Cce,{block:C,onComplete:O});case"SHORT_ANSWER":return s.jsx(kce,{block:C,onComplete:O});case"VOCABULARY":return s.jsx(Ice,{block:C});case"CHECKLIST":return s.jsx(Oce,{block:C,onComplete:O});case"SECTION_HEADER":return s.jsx(Rce,{block:C});case"IMAGE":return s.jsx(Mce,{block:C});case"VIDEO":return s.jsx(Dce,{block:C});case"OBJECTIVES":return s.jsx(Pce,{block:C});case"DIVIDER":return s.jsx(Lce,{});case"EXTERNAL_LINK":return s.jsx(Bce,{block:C});case"EMBED":return s.jsx($ce,{block:C});case"VOCAB_LIST":return s.jsx(zce,{block:C});case"ACTIVITY":return s.jsx(Uce,{block:C});case"SORTING":return s.jsx(Vce,{block:C,onComplete:O});case"DATA_TABLE":return s.jsx(Fce,{block:C});case"BAR_CHART":return s.jsx(qce,{block:C});case"RANKING":return s.jsx(Hce,{block:C,onComplete:O});case"LINKED":return s.jsx(Gce,{block:C,allBlocks:t,onComplete:O});default:return s.jsxs("div",{className:"text-sm text-gray-500 italic",children:["Unknown block type: ",C.type]})}},T=s.jsxs("div",{className:"space-y-4 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-500",style:{width:`${(d+1)/t.length*100}%`}})}),s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[d+1,"/",t.length]})]}),s.jsx("div",{className:"animate-in fade-in slide-in-from-right-2 duration-200",children:w(y)},y.id),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/5",children:[s.jsx("button",{onClick:x,disabled:d===0,className:"text-xs text-gray-500 hover:text-white disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-white/5",children:"Previous"}),s.jsx("div",{className:"flex gap-1",children:t.map((C,O)=>s.jsx("button",{onClick:()=>h(O),className:`w-2 h-2 rounded-full transition ${O===d?"bg-purple-500 scale-125":o.has(C.id)?"bg-green-500":"bg-white/10 hover:bg-white/20"}`},C.id))}),s.jsxs("button",{onClick:m,disabled:d>=t.length-1||S&&!N,className:"flex items-center gap-1 text-xs text-purple-400 hover:text-purple-300 disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-purple-500/10",children:["Next ",s.jsx(so,{className:"w-3 h-3"})]})]})]});return n&&t.length>=3?s.jsxs("div",{className:"flex gap-4",children:[T,s.jsx(Tce,{blocks:t,currentBlockIndex:d,completedBlocks:o,onNavigateToBlock:h,engagementTime:a,xpEarned:i})]}):T};class ni{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new ni(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Mi{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Mi(r,ni.range(this,e))}}class ut{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,o=r&&r.loc;if(o&&o.start<=o.end){var c=o.lexer.input;a=o.start,i=o.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=ut.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}ut.prototype.__proto__=Error.prototype;var Wce=function(e,r){return e===void 0?r:e},Kce=/([A-Z])/g,Qce=function(e){return e.replace(Kce,"-$1").toLowerCase()},Xce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Yce=/[&><"']/g;function Jce(t){return String(t).replace(Yce,e=>Xce[e])}var sG=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Zce=function(e){var r=sG(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},eue=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},tue=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Jr={deflt:Wce,escape:Jce,hyphenate:Qce,getBaseElem:sG,isCharacterBox:Zce,protocolFromUrl:tue},jv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function rue(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class N8{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in jv)if(jv.hasOwnProperty(r)){var n=jv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:rue(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ut("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Jr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class lu{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Qo[nue[this.id]]}sub(){return Qo[aue[this.id]]}fracNum(){return Qo[sue[this.id]]}fracDen(){return Qo[iue[this.id]]}cramp(){return Qo[oue[this.id]]}text(){return Qo[lue[this.id]]}isTight(){return this.size>=2}}var j8=0,cb=1,qh=2,sc=3,yg=4,ro=5,hf=6,Us=7,Qo=[new lu(j8,0,!1),new lu(cb,0,!0),new lu(qh,1,!1),new lu(sc,1,!0),new lu(yg,2,!1),new lu(ro,2,!0),new lu(hf,3,!1),new lu(Us,3,!0)],nue=[yg,ro,yg,ro,hf,Us,hf,Us],aue=[ro,ro,ro,ro,Us,Us,Us,Us],sue=[qh,sc,yg,ro,hf,Us,hf,Us],iue=[sc,sc,ro,ro,Us,Us,Us,Us],oue=[cb,cb,sc,sc,ro,ro,Us,Us],lue=[j8,cb,qh,sc,qh,sc,qh,sc],Gt={DISPLAY:Qo[j8],TEXT:Qo[qh],SCRIPT:Qo[yg],SCRIPTSCRIPT:Qo[hf]},sT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function cue(t){for(var e=0;e<sT.length;e++)for(var r=sT[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var _v=[];sT.forEach(t=>t.blocks.forEach(e=>_v.push(...e)));function iG(t){for(var e=0;e<_v.length;e+=2)if(t>=_v[e]&&t<=_v[e+1])return!0;return!1}var bh=80,uue=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},due=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},hue=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},fue=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},pue=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},mue=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},gue=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},xue=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=uue(r,bh);break;case"sqrtSize1":a=due(r,bh);break;case"sqrtSize2":a=hue(r,bh);break;case"sqrtSize3":a=fue(r,bh);break;case"sqrtSize4":a=pue(r,bh);break;case"sqrtTall":a=gue(r,bh,n)}return a},yue=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},YR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},vue=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Rx{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Zo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},O1={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},JR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function bue(t,e){Zo[t]=e}function _8(t,e,r){if(!Zo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Zo[e][n];if(!a&&t[0]in JR&&(n=JR[t[0]].charCodeAt(0),a=Zo[e][n]),!a&&r==="text"&&iG(n)&&(a=Zo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var C3={};function wue(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!C3[e]){var r=C3[e]={cssEmPerMu:O1.quad[e]/18};for(var n in O1)O1.hasOwnProperty(n)&&(r[n]=O1[n][e])}return C3[e]}var Sue=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],ZR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],eM=function(e,r){return r.size<2?e:Sue[e-1][r.size-1]};class Gl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Gl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=ZR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Gl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:eM(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:ZR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=eM(Gl.BASESIZE,e);return this.size===r&&this.textSize===Gl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Gl.BASESIZE?["sizing","reset-size"+this.size,"size"+Gl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=wue(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Gl.BASESIZE=6;var iT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Nue={ex:!0,em:!0,mu:!0},oG=function(e){return typeof e!="string"&&(e=e.unit),e in iT||e in Nue||e==="ex"},ra=function(e,r){var n;if(e.unit in iT)n=iT[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ut("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},gt=function(e){return+e.toFixed(4)+"em"},Vu=function(e){return e.filter(r=>r).join(" ")},lG=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},cG=function(e){var r=document.createElement(e);r.className=Vu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},jue=/[\s"'>/=\x00-\x1f]/,uG=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Jr.escape(Vu(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Jr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Jr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(jue.test(i))throw new ut("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Jr.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class Mx{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,lG.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return cG.call(this,"span")}toMarkup(){return uG.call(this,"span")}}class T8{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,lG.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return cG.call(this,"a")}toMarkup(){return uG.call(this,"a")}}class _ue{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Jr.escape(this.src)+'"'+(' alt="'+Jr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Jr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Jr.escape(r)+'"'),e+="'/>",e}}var Tue={:"",:"",:"",:""};class co{constructor(e,r,n,a,i,o,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=o||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=cue(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=Tue[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=gt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Vu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Jr.escape(Vu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Jr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Jr.escape(n)+'"');var i=Jr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class mc{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Jr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Fu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",YR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Jr.escape(this.alternate)+'"/>':'<path d="'+Jr.escape(YR[this.pathName])+'"/>'}}class oT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Jr.escape(this.attributes[r])+'"');return e+="/>",e}}function tM(t){if(t instanceof co)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Aue(t){if(t instanceof Mx)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Eue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Cue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},zn={math:{},text:{}};function M(t,e,r,n,a,i){zn[t][a]={font:e,group:r,replace:n},i&&n&&(zn[t][n]=zn[t][a])}var z="math",st="text",W="main",ie="ams",Jn="accent-token",At="bin",Hs="close",Xf="inner",Ht="mathord",La="op-token",Bi="open",iw="punct",oe="rel",_c="spacing",xe="textord";M(z,W,oe,"","\\equiv",!0);M(z,W,oe,"","\\prec",!0);M(z,W,oe,"","\\succ",!0);M(z,W,oe,"","\\sim",!0);M(z,W,oe,"","\\perp");M(z,W,oe,"","\\preceq",!0);M(z,W,oe,"","\\succeq",!0);M(z,W,oe,"","\\simeq",!0);M(z,W,oe,"","\\mid",!0);M(z,W,oe,"","\\ll",!0);M(z,W,oe,"","\\gg",!0);M(z,W,oe,"","\\asymp",!0);M(z,W,oe,"","\\parallel");M(z,W,oe,"","\\bowtie",!0);M(z,W,oe,"","\\smile",!0);M(z,W,oe,"","\\sqsubseteq",!0);M(z,W,oe,"","\\sqsupseteq",!0);M(z,W,oe,"","\\doteq",!0);M(z,W,oe,"","\\frown",!0);M(z,W,oe,"","\\ni",!0);M(z,W,oe,"","\\propto",!0);M(z,W,oe,"","\\vdash",!0);M(z,W,oe,"","\\dashv",!0);M(z,W,oe,"","\\owns");M(z,W,iw,".","\\ldotp");M(z,W,iw,"","\\cdotp");M(z,W,xe,"#","\\#");M(st,W,xe,"#","\\#");M(z,W,xe,"&","\\&");M(st,W,xe,"&","\\&");M(z,W,xe,"","\\aleph",!0);M(z,W,xe,"","\\forall",!0);M(z,W,xe,"","\\hbar",!0);M(z,W,xe,"","\\exists",!0);M(z,W,xe,"","\\nabla",!0);M(z,W,xe,"","\\flat",!0);M(z,W,xe,"","\\ell",!0);M(z,W,xe,"","\\natural",!0);M(z,W,xe,"","\\clubsuit",!0);M(z,W,xe,"","\\wp",!0);M(z,W,xe,"","\\sharp",!0);M(z,W,xe,"","\\diamondsuit",!0);M(z,W,xe,"","\\Re",!0);M(z,W,xe,"","\\heartsuit",!0);M(z,W,xe,"","\\Im",!0);M(z,W,xe,"","\\spadesuit",!0);M(z,W,xe,"","\\S",!0);M(st,W,xe,"","\\S");M(z,W,xe,"","\\P",!0);M(st,W,xe,"","\\P");M(z,W,xe,"","\\dag");M(st,W,xe,"","\\dag");M(st,W,xe,"","\\textdagger");M(z,W,xe,"","\\ddag");M(st,W,xe,"","\\ddag");M(st,W,xe,"","\\textdaggerdbl");M(z,W,Hs,"","\\rmoustache",!0);M(z,W,Bi,"","\\lmoustache",!0);M(z,W,Hs,"","\\rgroup",!0);M(z,W,Bi,"","\\lgroup",!0);M(z,W,At,"","\\mp",!0);M(z,W,At,"","\\ominus",!0);M(z,W,At,"","\\uplus",!0);M(z,W,At,"","\\sqcap",!0);M(z,W,At,"","\\ast");M(z,W,At,"","\\sqcup",!0);M(z,W,At,"","\\bigcirc",!0);M(z,W,At,"","\\bullet",!0);M(z,W,At,"","\\ddagger");M(z,W,At,"","\\wr",!0);M(z,W,At,"","\\amalg");M(z,W,At,"&","\\And");M(z,W,oe,"","\\longleftarrow",!0);M(z,W,oe,"","\\Leftarrow",!0);M(z,W,oe,"","\\Longleftarrow",!0);M(z,W,oe,"","\\longrightarrow",!0);M(z,W,oe,"","\\Rightarrow",!0);M(z,W,oe,"","\\Longrightarrow",!0);M(z,W,oe,"","\\leftrightarrow",!0);M(z,W,oe,"","\\longleftrightarrow",!0);M(z,W,oe,"","\\Leftrightarrow",!0);M(z,W,oe,"","\\Longleftrightarrow",!0);M(z,W,oe,"","\\mapsto",!0);M(z,W,oe,"","\\longmapsto",!0);M(z,W,oe,"","\\nearrow",!0);M(z,W,oe,"","\\hookleftarrow",!0);M(z,W,oe,"","\\hookrightarrow",!0);M(z,W,oe,"","\\searrow",!0);M(z,W,oe,"","\\leftharpoonup",!0);M(z,W,oe,"","\\rightharpoonup",!0);M(z,W,oe,"","\\swarrow",!0);M(z,W,oe,"","\\leftharpoondown",!0);M(z,W,oe,"","\\rightharpoondown",!0);M(z,W,oe,"","\\nwarrow",!0);M(z,W,oe,"","\\rightleftharpoons",!0);M(z,ie,oe,"","\\nless",!0);M(z,ie,oe,"","\\@nleqslant");M(z,ie,oe,"","\\@nleqq");M(z,ie,oe,"","\\lneq",!0);M(z,ie,oe,"","\\lneqq",!0);M(z,ie,oe,"","\\@lvertneqq");M(z,ie,oe,"","\\lnsim",!0);M(z,ie,oe,"","\\lnapprox",!0);M(z,ie,oe,"","\\nprec",!0);M(z,ie,oe,"","\\npreceq",!0);M(z,ie,oe,"","\\precnsim",!0);M(z,ie,oe,"","\\precnapprox",!0);M(z,ie,oe,"","\\nsim",!0);M(z,ie,oe,"","\\@nshortmid");M(z,ie,oe,"","\\nmid",!0);M(z,ie,oe,"","\\nvdash",!0);M(z,ie,oe,"","\\nvDash",!0);M(z,ie,oe,"","\\ntriangleleft");M(z,ie,oe,"","\\ntrianglelefteq",!0);M(z,ie,oe,"","\\subsetneq",!0);M(z,ie,oe,"","\\@varsubsetneq");M(z,ie,oe,"","\\subsetneqq",!0);M(z,ie,oe,"","\\@varsubsetneqq");M(z,ie,oe,"","\\ngtr",!0);M(z,ie,oe,"","\\@ngeqslant");M(z,ie,oe,"","\\@ngeqq");M(z,ie,oe,"","\\gneq",!0);M(z,ie,oe,"","\\gneqq",!0);M(z,ie,oe,"","\\@gvertneqq");M(z,ie,oe,"","\\gnsim",!0);M(z,ie,oe,"","\\gnapprox",!0);M(z,ie,oe,"","\\nsucc",!0);M(z,ie,oe,"","\\nsucceq",!0);M(z,ie,oe,"","\\succnsim",!0);M(z,ie,oe,"","\\succnapprox",!0);M(z,ie,oe,"","\\ncong",!0);M(z,ie,oe,"","\\@nshortparallel");M(z,ie,oe,"","\\nparallel",!0);M(z,ie,oe,"","\\nVDash",!0);M(z,ie,oe,"","\\ntriangleright");M(z,ie,oe,"","\\ntrianglerighteq",!0);M(z,ie,oe,"","\\@nsupseteqq");M(z,ie,oe,"","\\supsetneq",!0);M(z,ie,oe,"","\\@varsupsetneq");M(z,ie,oe,"","\\supsetneqq",!0);M(z,ie,oe,"","\\@varsupsetneqq");M(z,ie,oe,"","\\nVdash",!0);M(z,ie,oe,"","\\precneqq",!0);M(z,ie,oe,"","\\succneqq",!0);M(z,ie,oe,"","\\@nsubseteqq");M(z,ie,At,"","\\unlhd");M(z,ie,At,"","\\unrhd");M(z,ie,oe,"","\\nleftarrow",!0);M(z,ie,oe,"","\\nrightarrow",!0);M(z,ie,oe,"","\\nLeftarrow",!0);M(z,ie,oe,"","\\nRightarrow",!0);M(z,ie,oe,"","\\nleftrightarrow",!0);M(z,ie,oe,"","\\nLeftrightarrow",!0);M(z,ie,oe,"","\\vartriangle");M(z,ie,xe,"","\\hslash");M(z,ie,xe,"","\\triangledown");M(z,ie,xe,"","\\lozenge");M(z,ie,xe,"","\\circledS");M(z,ie,xe,"","\\circledR");M(st,ie,xe,"","\\circledR");M(z,ie,xe,"","\\measuredangle",!0);M(z,ie,xe,"","\\nexists");M(z,ie,xe,"","\\mho");M(z,ie,xe,"","\\Finv",!0);M(z,ie,xe,"","\\Game",!0);M(z,ie,xe,"","\\backprime");M(z,ie,xe,"","\\blacktriangle");M(z,ie,xe,"","\\blacktriangledown");M(z,ie,xe,"","\\blacksquare");M(z,ie,xe,"","\\blacklozenge");M(z,ie,xe,"","\\bigstar");M(z,ie,xe,"","\\sphericalangle",!0);M(z,ie,xe,"","\\complement",!0);M(z,ie,xe,"","\\eth",!0);M(st,W,xe,"","");M(z,ie,xe,"","\\diagup");M(z,ie,xe,"","\\diagdown");M(z,ie,xe,"","\\square");M(z,ie,xe,"","\\Box");M(z,ie,xe,"","\\Diamond");M(z,ie,xe,"","\\yen",!0);M(st,ie,xe,"","\\yen",!0);M(z,ie,xe,"","\\checkmark",!0);M(st,ie,xe,"","\\checkmark");M(z,ie,xe,"","\\beth",!0);M(z,ie,xe,"","\\daleth",!0);M(z,ie,xe,"","\\gimel",!0);M(z,ie,xe,"","\\digamma",!0);M(z,ie,xe,"","\\varkappa");M(z,ie,Bi,"","\\@ulcorner",!0);M(z,ie,Hs,"","\\@urcorner",!0);M(z,ie,Bi,"","\\@llcorner",!0);M(z,ie,Hs,"","\\@lrcorner",!0);M(z,ie,oe,"","\\leqq",!0);M(z,ie,oe,"","\\leqslant",!0);M(z,ie,oe,"","\\eqslantless",!0);M(z,ie,oe,"","\\lesssim",!0);M(z,ie,oe,"","\\lessapprox",!0);M(z,ie,oe,"","\\approxeq",!0);M(z,ie,At,"","\\lessdot");M(z,ie,oe,"","\\lll",!0);M(z,ie,oe,"","\\lessgtr",!0);M(z,ie,oe,"","\\lesseqgtr",!0);M(z,ie,oe,"","\\lesseqqgtr",!0);M(z,ie,oe,"","\\doteqdot");M(z,ie,oe,"","\\risingdotseq",!0);M(z,ie,oe,"","\\fallingdotseq",!0);M(z,ie,oe,"","\\backsim",!0);M(z,ie,oe,"","\\backsimeq",!0);M(z,ie,oe,"","\\subseteqq",!0);M(z,ie,oe,"","\\Subset",!0);M(z,ie,oe,"","\\sqsubset",!0);M(z,ie,oe,"","\\preccurlyeq",!0);M(z,ie,oe,"","\\curlyeqprec",!0);M(z,ie,oe,"","\\precsim",!0);M(z,ie,oe,"","\\precapprox",!0);M(z,ie,oe,"","\\vartriangleleft");M(z,ie,oe,"","\\trianglelefteq");M(z,ie,oe,"","\\vDash",!0);M(z,ie,oe,"","\\Vvdash",!0);M(z,ie,oe,"","\\smallsmile");M(z,ie,oe,"","\\smallfrown");M(z,ie,oe,"","\\bumpeq",!0);M(z,ie,oe,"","\\Bumpeq",!0);M(z,ie,oe,"","\\geqq",!0);M(z,ie,oe,"","\\geqslant",!0);M(z,ie,oe,"","\\eqslantgtr",!0);M(z,ie,oe,"","\\gtrsim",!0);M(z,ie,oe,"","\\gtrapprox",!0);M(z,ie,At,"","\\gtrdot");M(z,ie,oe,"","\\ggg",!0);M(z,ie,oe,"","\\gtrless",!0);M(z,ie,oe,"","\\gtreqless",!0);M(z,ie,oe,"","\\gtreqqless",!0);M(z,ie,oe,"","\\eqcirc",!0);M(z,ie,oe,"","\\circeq",!0);M(z,ie,oe,"","\\triangleq",!0);M(z,ie,oe,"","\\thicksim");M(z,ie,oe,"","\\thickapprox");M(z,ie,oe,"","\\supseteqq",!0);M(z,ie,oe,"","\\Supset",!0);M(z,ie,oe,"","\\sqsupset",!0);M(z,ie,oe,"","\\succcurlyeq",!0);M(z,ie,oe,"","\\curlyeqsucc",!0);M(z,ie,oe,"","\\succsim",!0);M(z,ie,oe,"","\\succapprox",!0);M(z,ie,oe,"","\\vartriangleright");M(z,ie,oe,"","\\trianglerighteq");M(z,ie,oe,"","\\Vdash",!0);M(z,ie,oe,"","\\shortmid");M(z,ie,oe,"","\\shortparallel");M(z,ie,oe,"","\\between",!0);M(z,ie,oe,"","\\pitchfork",!0);M(z,ie,oe,"","\\varpropto");M(z,ie,oe,"","\\blacktriangleleft");M(z,ie,oe,"","\\therefore",!0);M(z,ie,oe,"","\\backepsilon");M(z,ie,oe,"","\\blacktriangleright");M(z,ie,oe,"","\\because",!0);M(z,ie,oe,"","\\llless");M(z,ie,oe,"","\\gggtr");M(z,ie,At,"","\\lhd");M(z,ie,At,"","\\rhd");M(z,ie,oe,"","\\eqsim",!0);M(z,W,oe,"","\\Join");M(z,ie,oe,"","\\Doteq",!0);M(z,ie,At,"","\\dotplus",!0);M(z,ie,At,"","\\smallsetminus");M(z,ie,At,"","\\Cap",!0);M(z,ie,At,"","\\Cup",!0);M(z,ie,At,"","\\doublebarwedge",!0);M(z,ie,At,"","\\boxminus",!0);M(z,ie,At,"","\\boxplus",!0);M(z,ie,At,"","\\divideontimes",!0);M(z,ie,At,"","\\ltimes",!0);M(z,ie,At,"","\\rtimes",!0);M(z,ie,At,"","\\leftthreetimes",!0);M(z,ie,At,"","\\rightthreetimes",!0);M(z,ie,At,"","\\curlywedge",!0);M(z,ie,At,"","\\curlyvee",!0);M(z,ie,At,"","\\circleddash",!0);M(z,ie,At,"","\\circledast",!0);M(z,ie,At,"","\\centerdot");M(z,ie,At,"","\\intercal",!0);M(z,ie,At,"","\\doublecap");M(z,ie,At,"","\\doublecup");M(z,ie,At,"","\\boxtimes",!0);M(z,ie,oe,"","\\dashrightarrow",!0);M(z,ie,oe,"","\\dashleftarrow",!0);M(z,ie,oe,"","\\leftleftarrows",!0);M(z,ie,oe,"","\\leftrightarrows",!0);M(z,ie,oe,"","\\Lleftarrow",!0);M(z,ie,oe,"","\\twoheadleftarrow",!0);M(z,ie,oe,"","\\leftarrowtail",!0);M(z,ie,oe,"","\\looparrowleft",!0);M(z,ie,oe,"","\\leftrightharpoons",!0);M(z,ie,oe,"","\\curvearrowleft",!0);M(z,ie,oe,"","\\circlearrowleft",!0);M(z,ie,oe,"","\\Lsh",!0);M(z,ie,oe,"","\\upuparrows",!0);M(z,ie,oe,"","\\upharpoonleft",!0);M(z,ie,oe,"","\\downharpoonleft",!0);M(z,W,oe,"","\\origof",!0);M(z,W,oe,"","\\imageof",!0);M(z,ie,oe,"","\\multimap",!0);M(z,ie,oe,"","\\leftrightsquigarrow",!0);M(z,ie,oe,"","\\rightrightarrows",!0);M(z,ie,oe,"","\\rightleftarrows",!0);M(z,ie,oe,"","\\twoheadrightarrow",!0);M(z,ie,oe,"","\\rightarrowtail",!0);M(z,ie,oe,"","\\looparrowright",!0);M(z,ie,oe,"","\\curvearrowright",!0);M(z,ie,oe,"","\\circlearrowright",!0);M(z,ie,oe,"","\\Rsh",!0);M(z,ie,oe,"","\\downdownarrows",!0);M(z,ie,oe,"","\\upharpoonright",!0);M(z,ie,oe,"","\\downharpoonright",!0);M(z,ie,oe,"","\\rightsquigarrow",!0);M(z,ie,oe,"","\\leadsto");M(z,ie,oe,"","\\Rrightarrow",!0);M(z,ie,oe,"","\\restriction");M(z,W,xe,"","`");M(z,W,xe,"$","\\$");M(st,W,xe,"$","\\$");M(st,W,xe,"$","\\textdollar");M(z,W,xe,"%","\\%");M(st,W,xe,"%","\\%");M(z,W,xe,"_","\\_");M(st,W,xe,"_","\\_");M(st,W,xe,"_","\\textunderscore");M(z,W,xe,"","\\angle",!0);M(z,W,xe,"","\\infty",!0);M(z,W,xe,"","\\prime");M(z,W,xe,"","\\triangle");M(z,W,xe,"","\\Gamma",!0);M(z,W,xe,"","\\Delta",!0);M(z,W,xe,"","\\Theta",!0);M(z,W,xe,"","\\Lambda",!0);M(z,W,xe,"","\\Xi",!0);M(z,W,xe,"","\\Pi",!0);M(z,W,xe,"","\\Sigma",!0);M(z,W,xe,"","\\Upsilon",!0);M(z,W,xe,"","\\Phi",!0);M(z,W,xe,"","\\Psi",!0);M(z,W,xe,"","\\Omega",!0);M(z,W,xe,"A","");M(z,W,xe,"B","");M(z,W,xe,"E","");M(z,W,xe,"Z","");M(z,W,xe,"H","");M(z,W,xe,"I","");M(z,W,xe,"K","");M(z,W,xe,"M","");M(z,W,xe,"N","");M(z,W,xe,"O","");M(z,W,xe,"P","");M(z,W,xe,"T","");M(z,W,xe,"X","");M(z,W,xe,"","\\neg",!0);M(z,W,xe,"","\\lnot");M(z,W,xe,"","\\top");M(z,W,xe,"","\\bot");M(z,W,xe,"","\\emptyset");M(z,ie,xe,"","\\varnothing");M(z,W,Ht,"","\\alpha",!0);M(z,W,Ht,"","\\beta",!0);M(z,W,Ht,"","\\gamma",!0);M(z,W,Ht,"","\\delta",!0);M(z,W,Ht,"","\\epsilon",!0);M(z,W,Ht,"","\\zeta",!0);M(z,W,Ht,"","\\eta",!0);M(z,W,Ht,"","\\theta",!0);M(z,W,Ht,"","\\iota",!0);M(z,W,Ht,"","\\kappa",!0);M(z,W,Ht,"","\\lambda",!0);M(z,W,Ht,"","\\mu",!0);M(z,W,Ht,"","\\nu",!0);M(z,W,Ht,"","\\xi",!0);M(z,W,Ht,"","\\omicron",!0);M(z,W,Ht,"","\\pi",!0);M(z,W,Ht,"","\\rho",!0);M(z,W,Ht,"","\\sigma",!0);M(z,W,Ht,"","\\tau",!0);M(z,W,Ht,"","\\upsilon",!0);M(z,W,Ht,"","\\phi",!0);M(z,W,Ht,"","\\chi",!0);M(z,W,Ht,"","\\psi",!0);M(z,W,Ht,"","\\omega",!0);M(z,W,Ht,"","\\varepsilon",!0);M(z,W,Ht,"","\\vartheta",!0);M(z,W,Ht,"","\\varpi",!0);M(z,W,Ht,"","\\varrho",!0);M(z,W,Ht,"","\\varsigma",!0);M(z,W,Ht,"","\\varphi",!0);M(z,W,At,"","*",!0);M(z,W,At,"+","+");M(z,W,At,"","-",!0);M(z,W,At,"","\\cdot",!0);M(z,W,At,"","\\circ",!0);M(z,W,At,"","\\div",!0);M(z,W,At,"","\\pm",!0);M(z,W,At,"","\\times",!0);M(z,W,At,"","\\cap",!0);M(z,W,At,"","\\cup",!0);M(z,W,At,"","\\setminus",!0);M(z,W,At,"","\\land");M(z,W,At,"","\\lor");M(z,W,At,"","\\wedge",!0);M(z,W,At,"","\\vee",!0);M(z,W,xe,"","\\surd");M(z,W,Bi,"","\\langle",!0);M(z,W,Bi,"","\\lvert");M(z,W,Bi,"","\\lVert");M(z,W,Hs,"?","?");M(z,W,Hs,"!","!");M(z,W,Hs,"","\\rangle",!0);M(z,W,Hs,"","\\rvert");M(z,W,Hs,"","\\rVert");M(z,W,oe,"=","=");M(z,W,oe,":",":");M(z,W,oe,"","\\approx",!0);M(z,W,oe,"","\\cong",!0);M(z,W,oe,"","\\ge");M(z,W,oe,"","\\geq",!0);M(z,W,oe,"","\\gets");M(z,W,oe,">","\\gt",!0);M(z,W,oe,"","\\in",!0);M(z,W,oe,"","\\@not");M(z,W,oe,"","\\subset",!0);M(z,W,oe,"","\\supset",!0);M(z,W,oe,"","\\subseteq",!0);M(z,W,oe,"","\\supseteq",!0);M(z,ie,oe,"","\\nsubseteq",!0);M(z,ie,oe,"","\\nsupseteq",!0);M(z,W,oe,"","\\models");M(z,W,oe,"","\\leftarrow",!0);M(z,W,oe,"","\\le");M(z,W,oe,"","\\leq",!0);M(z,W,oe,"<","\\lt",!0);M(z,W,oe,"","\\rightarrow",!0);M(z,W,oe,"","\\to");M(z,ie,oe,"","\\ngeq",!0);M(z,ie,oe,"","\\nleq",!0);M(z,W,_c,"","\\ ");M(z,W,_c,"","\\space");M(z,W,_c,"","\\nobreakspace");M(st,W,_c,"","\\ ");M(st,W,_c,""," ");M(st,W,_c,"","\\space");M(st,W,_c,"","\\nobreakspace");M(z,W,_c,null,"\\nobreak");M(z,W,_c,null,"\\allowbreak");M(z,W,iw,",",",");M(z,W,iw,";",";");M(z,ie,At,"","\\barwedge",!0);M(z,ie,At,"","\\veebar",!0);M(z,W,At,"","\\odot",!0);M(z,W,At,"","\\oplus",!0);M(z,W,At,"","\\otimes",!0);M(z,W,xe,"","\\partial",!0);M(z,W,At,"","\\oslash",!0);M(z,ie,At,"","\\circledcirc",!0);M(z,ie,At,"","\\boxdot",!0);M(z,W,At,"","\\bigtriangleup");M(z,W,At,"","\\bigtriangledown");M(z,W,At,"","\\dagger");M(z,W,At,"","\\diamond");M(z,W,At,"","\\star");M(z,W,At,"","\\triangleleft");M(z,W,At,"","\\triangleright");M(z,W,Bi,"{","\\{");M(st,W,xe,"{","\\{");M(st,W,xe,"{","\\textbraceleft");M(z,W,Hs,"}","\\}");M(st,W,xe,"}","\\}");M(st,W,xe,"}","\\textbraceright");M(z,W,Bi,"{","\\lbrace");M(z,W,Hs,"}","\\rbrace");M(z,W,Bi,"[","\\lbrack",!0);M(st,W,xe,"[","\\lbrack",!0);M(z,W,Hs,"]","\\rbrack",!0);M(st,W,xe,"]","\\rbrack",!0);M(z,W,Bi,"(","\\lparen",!0);M(z,W,Hs,")","\\rparen",!0);M(st,W,xe,"<","\\textless",!0);M(st,W,xe,">","\\textgreater",!0);M(z,W,Bi,"","\\lfloor",!0);M(z,W,Hs,"","\\rfloor",!0);M(z,W,Bi,"","\\lceil",!0);M(z,W,Hs,"","\\rceil",!0);M(z,W,xe,"\\","\\backslash");M(z,W,xe,"","|");M(z,W,xe,"","\\vert");M(st,W,xe,"|","\\textbar",!0);M(z,W,xe,"","\\|");M(z,W,xe,"","\\Vert");M(st,W,xe,"","\\textbardbl");M(st,W,xe,"~","\\textasciitilde");M(st,W,xe,"\\","\\textbackslash");M(st,W,xe,"^","\\textasciicircum");M(z,W,oe,"","\\uparrow",!0);M(z,W,oe,"","\\Uparrow",!0);M(z,W,oe,"","\\downarrow",!0);M(z,W,oe,"","\\Downarrow",!0);M(z,W,oe,"","\\updownarrow",!0);M(z,W,oe,"","\\Updownarrow",!0);M(z,W,La,"","\\coprod");M(z,W,La,"","\\bigvee");M(z,W,La,"","\\bigwedge");M(z,W,La,"","\\biguplus");M(z,W,La,"","\\bigcap");M(z,W,La,"","\\bigcup");M(z,W,La,"","\\int");M(z,W,La,"","\\intop");M(z,W,La,"","\\iint");M(z,W,La,"","\\iiint");M(z,W,La,"","\\prod");M(z,W,La,"","\\sum");M(z,W,La,"","\\bigotimes");M(z,W,La,"","\\bigoplus");M(z,W,La,"","\\bigodot");M(z,W,La,"","\\oint");M(z,W,La,"","\\oiint");M(z,W,La,"","\\oiiint");M(z,W,La,"","\\bigsqcup");M(z,W,La,"","\\smallint");M(st,W,Xf,"","\\textellipsis");M(z,W,Xf,"","\\mathellipsis");M(st,W,Xf,"","\\ldots",!0);M(z,W,Xf,"","\\ldots",!0);M(z,W,Xf,"","\\@cdots",!0);M(z,W,Xf,"","\\ddots",!0);M(z,W,xe,"","\\varvdots");M(st,W,xe,"","\\varvdots");M(z,W,Jn,"","\\acute");M(z,W,Jn,"","\\grave");M(z,W,Jn,"","\\ddot");M(z,W,Jn,"~","\\tilde");M(z,W,Jn,"","\\bar");M(z,W,Jn,"","\\breve");M(z,W,Jn,"","\\check");M(z,W,Jn,"^","\\hat");M(z,W,Jn,"","\\vec");M(z,W,Jn,"","\\dot");M(z,W,Jn,"","\\mathring");M(z,W,Ht,"","\\@imath");M(z,W,Ht,"","\\@jmath");M(z,W,xe,"","");M(z,W,xe,"","");M(st,W,xe,"","\\i",!0);M(st,W,xe,"","\\j",!0);M(st,W,xe,"","\\ss",!0);M(st,W,xe,"","\\ae",!0);M(st,W,xe,"","\\oe",!0);M(st,W,xe,"","\\o",!0);M(st,W,xe,"","\\AE",!0);M(st,W,xe,"","\\OE",!0);M(st,W,xe,"","\\O",!0);M(st,W,Jn,"","\\'");M(st,W,Jn,"","\\`");M(st,W,Jn,"","\\^");M(st,W,Jn,"","\\~");M(st,W,Jn,"","\\=");M(st,W,Jn,"","\\u");M(st,W,Jn,"","\\.");M(st,W,Jn,"","\\c");M(st,W,Jn,"","\\r");M(st,W,Jn,"","\\v");M(st,W,Jn,"",'\\"');M(st,W,Jn,"","\\H");M(st,W,Jn,"","\\textcircled");var dG={"--":!0,"---":!0,"``":!0,"''":!0};M(st,W,xe,"","--",!0);M(st,W,xe,"","\\textendash");M(st,W,xe,"","---",!0);M(st,W,xe,"","\\textemdash");M(st,W,xe,"","`",!0);M(st,W,xe,"","\\textquoteleft");M(st,W,xe,"","'",!0);M(st,W,xe,"","\\textquoteright");M(st,W,xe,"","``",!0);M(st,W,xe,"","\\textquotedblleft");M(st,W,xe,"","''",!0);M(st,W,xe,"","\\textquotedblright");M(z,W,xe,"","\\degree",!0);M(st,W,xe,"","\\degree");M(st,W,xe,"","\\textdegree",!0);M(z,W,xe,"","\\pounds");M(z,W,xe,"","\\mathsterling",!0);M(st,W,xe,"","\\pounds");M(st,W,xe,"","\\textsterling",!0);M(z,ie,xe,"","\\maltese");M(st,ie,xe,"","\\maltese");var rM='0123456789/@."';for(var k3=0;k3<rM.length;k3++){var nM=rM.charAt(k3);M(z,W,xe,nM,nM)}var aM='0123456789!@*()-=+";:?/.,';for(var I3=0;I3<aM.length;I3++){var sM=aM.charAt(I3);M(st,W,xe,sM,sM)}var ub="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var O3=0;O3<ub.length;O3++){var R1=ub.charAt(O3);M(z,W,Ht,R1,R1),M(st,W,xe,R1,R1)}M(z,ie,xe,"C","");M(st,ie,xe,"C","");M(z,ie,xe,"H","");M(st,ie,xe,"H","");M(z,ie,xe,"N","");M(st,ie,xe,"N","");M(z,ie,xe,"P","");M(st,ie,xe,"P","");M(z,ie,xe,"Q","");M(st,ie,xe,"Q","");M(z,ie,xe,"R","");M(st,ie,xe,"R","");M(z,ie,xe,"Z","");M(st,ie,xe,"Z","");M(z,W,Ht,"h","");M(st,W,Ht,"h","");var Zt="";for(var Bs=0;Bs<ub.length;Bs++){var oa=ub.charAt(Bs);Zt=String.fromCharCode(55349,56320+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56372+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56424+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56580+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56684+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56736+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56788+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56840+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56944+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Bs<26&&(Zt=String.fromCharCode(55349,56632+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt),Zt=String.fromCharCode(55349,56476+Bs),M(z,W,Ht,oa,Zt),M(st,W,xe,oa,Zt))}Zt="";M(z,W,Ht,"k",Zt);M(st,W,xe,"k",Zt);for(var _d=0;_d<10;_d++){var cu=_d.toString();Zt=String.fromCharCode(55349,57294+_d),M(z,W,Ht,cu,Zt),M(st,W,xe,cu,Zt),Zt=String.fromCharCode(55349,57314+_d),M(z,W,Ht,cu,Zt),M(st,W,xe,cu,Zt),Zt=String.fromCharCode(55349,57324+_d),M(z,W,Ht,cu,Zt),M(st,W,xe,cu,Zt),Zt=String.fromCharCode(55349,57334+_d),M(z,W,Ht,cu,Zt),M(st,W,xe,cu,Zt)}var lT="";for(var R3=0;R3<lT.length;R3++){var M1=lT.charAt(R3);M(z,W,Ht,M1,M1),M(st,W,xe,M1,M1)}var D1=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],iM=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],kue=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[D1[c][2],D1[c][o]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[iM[d][2],iM[d][o]]}else{if(i===120485||i===120486)return[D1[0][2],D1[0][o]];if(120486<i&&i<120782)return["",""];throw new ut("Unsupported character: "+e)}},ow=function(e,r,n){return zn[n][e]&&zn[n][e].replace&&(e=zn[n][e].replace),{value:e,metrics:_8(e,r,n)}},_o=function(e,r,n,a,i){var o=ow(e,r,n),c=o.metrics;e=o.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new co(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new co(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},Iue=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&ow(e,"Main-Bold",r).metrics?_o(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||zn[r][e].font==="main"?_o(e,"Main-Regular",r,n,a):_o(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},Oue=function(e,r,n,a,i){return i!=="textord"&&ow(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Rue=function(e,r,n){var a=e.mode,i=e.text,o=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=kue(i,a)),h.length>0)return _o(i,h,a,r,o.concat(p));if(d){var m,x;if(d==="boldsymbol"){var y=Oue(i,a,r,o,n);m=y.fontName,x=[y.fontClass]}else c?(m=pG[d].fontName,x=[d]):(m=P1(d,r.fontWeight,r.fontShape),x=[d,r.fontWeight,r.fontShape]);if(ow(i,m,a).metrics)return _o(i,m,a,r,o.concat(x));if(dG.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var S=[],N=0;N<i.length;N++)S.push(_o(i[N],m,a,r,o.concat(x)));return fG(S)}}if(n==="mathord")return _o(i,"Math-Italic",a,r,o.concat(["mathnormal"]));if(n==="textord"){var w=zn[a][i]&&zn[a][i].font;if(w==="ams"){var T=P1("amsrm",r.fontWeight,r.fontShape);return _o(i,T,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var C=P1("textrm",r.fontWeight,r.fontShape);return _o(i,C,a,r,o.concat(r.fontWeight,r.fontShape))}else{var O=P1(w,r.fontWeight,r.fontShape);return _o(i,O,a,r,o.concat(O,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Mue=(t,e)=>{if(Vu(t.classes)!==Vu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},Due=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof co&&n instanceof co&&Mue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},A8=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},ti=function(e,r,n,a){var i=new Mx(e,r,n,a);return A8(i),i},hG=(t,e,r,n)=>new Mx(t,e,r,n),Pue=function(e,r,n){var a=ti([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=gt(a.height),a.maxFontSize=1,a},Lue=function(e,r,n,a){var i=new T8(e,r,n,a);return A8(i),i},fG=function(e){var r=new Rx(e);return A8(r),r},Bue=function(e,r){return e instanceof Rx?ti([],[e],r):e},$ue=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,o=1;o<r.length;o++){var c=-r[o].shift-i-r[o].elem.depth,d=c-(r[o-1].elem.height+r[o-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[o])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var x=e.children[m];p-=x.type==="kern"?x.size:x.elem.height+x.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var y=e.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-y.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-y.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},zue=function(e,r){for(var{children:n,depth:a}=$ue(e),i=0,o=0;o<n.length;o++){var c=n[o];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=ti(["pstrut"],[]);h.style.height=gt(i);for(var p=[],m=a,x=a,y=a,S=0;S<n.length;S++){var N=n[S];if(N.type==="kern")y+=N.size;else{var w=N.elem,T=N.wrapperClasses||[],C=N.wrapperStyle||{},O=ti(T,[h,w],void 0,C);O.style.top=gt(-i-y-w.depth),N.marginLeft&&(O.style.marginLeft=N.marginLeft),N.marginRight&&(O.style.marginRight=N.marginRight),p.push(O),y+=w.height+w.depth}m=Math.min(m,y),x=Math.max(x,y)}var L=ti(["vlist"],p);L.style.height=gt(x);var I;if(m<0){var R=ti([],[]),A=ti(["vlist"],[R]);A.style.height=gt(-m);var E=ti(["vlist-s"],[new co("")]);I=[ti(["vlist-r"],[L,E]),ti(["vlist-r"],[A])]}else I=[ti(["vlist-r"],[L])];var k=ti(["vlist-t"],I);return I.length===2&&k.classes.push("vlist-t2"),k.height=x,k.depth=-m,k},Uue=(t,e)=>{var r=ti(["mspace"],[],e),n=ra(t,e);return r.style.marginRight=gt(n),r},P1=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},pG={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},mG={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Vue=function(e,r){var[n,a,i]=mG[e],o=new Fu(n),c=new mc([o],{width:gt(a),height:gt(i),style:"width:"+gt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=hG(["overlay"],[c],r);return d.height=i,d.style.height=gt(i),d.style.width=gt(a),d},ke={fontMap:pG,makeSymbol:_o,mathsym:Iue,makeSpan:ti,makeSvgSpan:hG,makeLineSpan:Pue,makeAnchor:Lue,makeFragment:fG,wrapFragment:Bue,makeVList:zue,makeOrd:Rue,makeGlue:Uue,staticSvg:Vue,svgData:mG,tryCombineChars:Due},ea={number:3,unit:"mu"},Td={number:4,unit:"mu"},Ul={number:5,unit:"mu"},Fue={mord:{mop:ea,mbin:Td,mrel:Ul,minner:ea},mop:{mord:ea,mop:ea,mrel:Ul,minner:ea},mbin:{mord:Td,mop:Td,mopen:Td,minner:Td},mrel:{mord:Ul,mop:Ul,mopen:Ul,minner:Ul},mopen:{},mclose:{mop:ea,mbin:Td,mrel:Ul,minner:ea},mpunct:{mord:ea,mop:ea,mrel:Ul,mopen:ea,mclose:ea,mpunct:ea,minner:ea},minner:{mord:ea,mop:ea,mbin:Td,mrel:Ul,mopen:ea,mpunct:ea,minner:ea}},que={mord:{mop:ea},mop:{mord:ea,mop:ea},mbin:{},mrel:{},mopen:{},mclose:{mop:ea},mpunct:{},minner:{mop:ea}},gG={},db={},hb={};function St(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)gG[r[d]]=c;e&&(i&&(db[e]=i),o&&(hb[e]=o))}function I0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;St({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var fb=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},va=function(e){return e.type==="ordgroup"?e.body:[e]},gc=ke.makeSpan,Hue=["leftmost","mbin","mopen","mrel","mop","mpunct"],Gue=["rightmost","mrel","mclose","mpunct"],Wue={display:Gt.DISPLAY,text:Gt.TEXT,script:Gt.SCRIPT,scriptscript:Gt.SCRIPTSCRIPT},Kue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Qa=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],o=0;o<e.length;o++){var c=qr(e[o],r);if(c instanceof Rx){var d=c.children;i.push(...d)}else i.push(c)}if(ke.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Wue[p.style]))}var m=gc([a[0]||"leftmost"],[],r),x=gc([a[1]||"rightmost"],[],r),y=n==="root";return oM(i,(S,N)=>{var w=N.classes[0],T=S.classes[0];w==="mbin"&&Gue.includes(T)?N.classes[0]="mord":T==="mbin"&&Hue.includes(w)&&(S.classes[0]="mord")},{node:m},x,y),oM(i,(S,N)=>{var w=cT(N),T=cT(S),C=w&&T?S.hasClass("mtight")?que[w][T]:Fue[w][T]:null;if(C)return ke.makeGlue(C,h)},{node:m},x,y),i},oM=function t(e,r,n,a,i){a&&e.push(a);for(var o=0;o<e.length;o++){var c=e[o],d=xG(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),o++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=gc(["leftmost"])),n.insertAfter=(m=>x=>{e.splice(m+1,0,x),o++})(o)}a&&e.pop()},xG=function(e){return e instanceof Rx||e instanceof T8||e instanceof Mx&&e.hasClass("enclosing")?e:null},Que=function t(e,r){var n=xG(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},cT=function(e,r){return e?(r&&(e=Que(e,r)),Kue[e.classes[0]]||null):null},vg=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return gc(r.concat(n))},qr=function(e,r,n){if(!e)return gc();if(db[e.type]){var a=db[e.type](e,r);if(n&&r.size!==n.size){a=gc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new ut("Got group of unknown type: '"+e.type+"'")};function L1(t,e){var r=gc(["base"],t,e),n=gc(["strut"]);return n.style.height=gt(r.height+r.depth),r.depth&&(n.style.verticalAlign=gt(-r.depth)),r.children.unshift(n),r}function uT(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Qa(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],o=[],c=0;c<n.length;c++)if(o.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,o.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(L1(o,e)),o=[])}else n[c].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(L1(o,e)),o=[]),i.push(n[c]));o.length>0&&i.push(L1(o,e));var h;r?(h=L1(Qa(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=gc(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=gt(p.height+p.depth),p.depth&&(m.style.verticalAlign=gt(-p.depth))}return p}function yG(t){return new Rx(t)}class Ci{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Vu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof el&&this.children[n+1]instanceof el){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof el;)a+=this.children[++n].toText();e.appendChild(new el(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Jr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Jr.escape(Vu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class el{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Jr.escape(this.toText())}toText(){return this.text}}class Xue{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",gt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+gt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var ct={MathNode:Ci,TextNode:el,SpaceNode:Xue,newDocumentFragment:yG},uo=function(e,r,n){return zn[r][e]&&zn[r][e].replace&&e.charCodeAt(0)!==55349&&!(dG.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=zn[r][e].replace),new ct.TextNode(e)},E8=function(e){return e.length===1?e[0]:new ct.MathNode("mrow",e)},C8=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;zn[a][i]&&zn[a][i].replace&&(i=zn[a][i].replace);var o=ke.fontMap[n].fontName;return _8(i,o,a)?ke.fontMap[n].variant:null};function M3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof el&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof el&&r.text===","}else return!1}var hi=function(e,r,n){if(e.length===1){var a=Mn(e[0],r);return n&&a instanceof Ci&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],o,c=0;c<e.length;c++){var d=Mn(e[c],r);if(d instanceof Ci&&o instanceof Ci){if(d.type==="mtext"&&o.type==="mtext"&&d.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...d.children);continue}else if(d.type==="mn"&&o.type==="mn"){o.children.push(...d.children);continue}else if(M3(d)&&o.type==="mn"){o.children.push(...d.children);continue}else if(d.type==="mn"&&M3(o))d.children=[...o.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(o.type==="mn"||M3(o))){var h=d.children[0];h instanceof Ci&&h.type==="mn"&&(h.children=[...o.children,...h.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var p=o.children[0];if(p instanceof el&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof el&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),o=d}return i},qu=function(e,r,n){return E8(hi(e,r,n))},Mn=function(e,r){if(!e)return new ct.MathNode("mrow");if(hb[e.type]){var n=hb[e.type](e,r);return n}else throw new ut("Got group of unknown type: '"+e.type+"'")};function lM(t,e,r,n,a){var i=hi(t,r),o;i.length===1&&i[0]instanceof Ci&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new ct.MathNode("mrow",i);var c=new ct.MathNode("annotation",[new ct.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new ct.MathNode("semantics",[o,c]),h=new ct.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return ke.makeSpan([p],[h])}var vG=function(e){return new Gl({style:e.displayMode?Gt.DISPLAY:Gt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},bG=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=ke.makeSpan(n,[e])}return e},Yue=function(e,r,n){var a=vG(n),i;if(n.output==="mathml")return lM(e,r,a,n.displayMode,!0);if(n.output==="html"){var o=uT(e,a);i=ke.makeSpan(["katex"],[o])}else{var c=lM(e,r,a,n.displayMode,!1),d=uT(e,a);i=ke.makeSpan(["katex"],[c,d])}return bG(i,n)},Jue=function(e,r,n){var a=vG(n),i=uT(e,a),o=ke.makeSpan(["katex"],[i]);return bG(o,n)},Zue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},ede=function(e){var r=new ct.MathNode("mo",[new ct.TextNode(Zue[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},tde={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},rde=function(e){return e.type==="ordgroup"?e.body.length:1},nde=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=rde(h.base),m,x,y;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,y=.42,x=d+"4"):(m=312,c=2340,y=.34,x="tilde4");else{var S=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][S],m=[0,239,300,360,420][S],y=[0,.24,.3,.3,.36,.42][S],x=d+S):(c=[0,600,1033,2339,2340][S],m=[0,260,286,306,312][S],y=[0,.26,.286,.3,.306,.34][S],x="tilde"+S)}var N=new Fu(x),w=new mc([N],{width:"100%",height:gt(y),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:ke.makeSvgSpan([],[w],r),minWidth:0,height:y}}else{var T=[],C=tde[d],[O,L,I]=C,R=I/1e3,A=O.length,E,k;if(A===1){var U=C[3];E=["hide-tail"],k=[U]}else if(A===2)E=["halfarrow-left","halfarrow-right"],k=["xMinYMin","xMaxYMin"];else if(A===3)E=["brace-left","brace-center","brace-right"],k=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+A+" children.");for(var P=0;P<A;P++){var $=new Fu(O[P]),B=new mc([$],{width:"400em",height:gt(R),viewBox:"0 0 "+c+" "+I,preserveAspectRatio:k[P]+" slice"}),G=ke.makeSvgSpan([E[P]],[B],r);if(A===1)return{span:G,minWidth:L,height:R};G.style.height=gt(R),T.push(G)}return{span:ke.makeSpan(["stretchy"],T,r),minWidth:L,height:R}}}var{span:a,minWidth:i,height:o}=n();return a.height=o,a.style.height=gt(o),i>0&&(a.style.minWidth=gt(i)),a},ade=function(e,r,n,a,i){var o,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(o=ke.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(o.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new oT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new oT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new mc(h,{width:"100%",height:gt(c)});o=ke.makeSvgSpan([],[p],i)}return o.height=c,o.style.height=gt(c),o},xc={encloseSpan:ade,mathMLnode:ede,svgSpan:nde};function br(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function k8(t){var e=lw(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function lw(t){return t&&(t.type==="atom"||Cue.hasOwnProperty(t.type))?t:null}var I8=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=br(t.base,"accent"),r=n.base,t.base=r,a=Aue(qr(t,e)),t.base=n):(n=br(t,"accent"),r=n.base);var i=qr(r,e.havingCrampedStyle()),o=n.isShifty&&Jr.isCharacterBox(r),c=0;if(o){var d=Jr.getBaseElem(r),h=qr(d,e.havingCrampedStyle());c=tM(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),x;if(n.isStretchy)x=xc.svgSpan(n,e),x=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:x,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+gt(2*c)+")",marginLeft:gt(2*c)}:void 0}]},e);else{var y,S;n.label==="\\vec"?(y=ke.staticSvg("vec",e),S=ke.svgData.vec[1]):(y=ke.makeOrd({mode:n.mode,text:n.label},e,"textord"),y=tM(y),y.italic=0,S=y.width,p&&(m+=y.depth)),x=ke.makeSpan(["accent-body"],[y]);var N=n.label==="\\textcircled";N&&(x.classes.push("accent-full"),m=i.height);var w=c;N||(w-=S/2),x.style.left=gt(w),n.label==="\\textcircled"&&(x.style.top=".2em"),x=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:x}]},e)}var T=ke.makeSpan(["mord","accent"],[x],e);return a?(a.children[0]=T,a.height=Math.max(T.height,a.height),a.classes[0]="mord",a):T},wG=(t,e)=>{var r=t.isStretchy?xc.mathMLnode(t.label):new ct.MathNode("mo",[uo(t.label,t.mode)]),n=new ct.MathNode("mover",[Mn(t.base,e),r]);return n.setAttribute("accent","true"),n},sde=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));St({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=fb(e[0]),n=!sde.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:I8,mathmlBuilder:wG});St({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:I8,mathmlBuilder:wG});St({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=qr(t.base,e),n=xc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=ke.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return ke.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=xc.mathMLnode(t.label),n=new ct.MathNode("munder",[Mn(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var B1=t=>{var e=new ct.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};St({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=ke.wrapFragment(qr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=ke.wrapFragment(qr(t.below,n,e),e),o.classes.push(i+"-arrow-pad"));var c=xc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(o){var m=-e.fontMetrics().axisHeight+o.height+.5*c.height+.111;p=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:o,shift:m}]},e)}else p=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),ke.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=xc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=B1(Mn(t.body,e));if(t.below){var i=B1(Mn(t.below,e));n=new ct.MathNode("munderover",[r,i,a])}else n=new ct.MathNode("mover",[r,a])}else if(t.below){var o=B1(Mn(t.below,e));n=new ct.MathNode("munder",[r,o])}else n=B1(),n=new ct.MathNode("mover",[r,n]);return n}});var ide=ke.makeSpan;function SG(t,e){var r=Qa(t.body,e,!0);return ide([t.mclass],r,e)}function NG(t,e){var r,n=hi(t.body,e);return t.mclass==="minner"?r=new ct.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new ct.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new ct.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}St({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:va(a),isCharacterBox:Jr.isCharacterBox(a)}},htmlBuilder:SG,mathmlBuilder:NG});var cw=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};St({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:cw(e[0]),body:va(e[1]),isCharacterBox:Jr.isCharacterBox(e[1])}}});St({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],o;n!=="\\stackrel"?o=cw(a):o="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:va(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[d],isCharacterBox:Jr.isCharacterBox(d)}},htmlBuilder:SG,mathmlBuilder:NG});St({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:cw(e[0]),body:va(e[0])}},htmlBuilder(t,e){var r=Qa(t.body,e,!0),n=ke.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=hi(t.body,e),n=new ct.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var ode={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},cM=()=>({type:"styling",body:[],mode:"math",style:"display"}),uM=t=>t.type==="textord"&&t.text==="@",lde=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function cde(t,e,r){var n=ode[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,o,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function ude(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ut("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var o=e[i],c=cM(),d=0;d<o.length;d++)if(!uM(o[d]))c.body.push(o[d]);else{n.push(c),d+=1;var h=k8(o[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var x=!0,y=d+1;y<o.length;y++){if(lde(o[y],h)){x=!1,d=y;break}if(uM(o[y]))throw new ut("Missing a "+h+" character to complete a CD arrow.",o[y]);p[m].body.push(o[y])}if(x)throw new ut("Missing a "+h+" character to complete a CD arrow.",o[d])}else throw new ut('Expected one of "<>AV=|." after @',o[d]);var S=cde(h,p,t),N={type:"styling",body:[S],mode:"math",style:"display"};n.push(N),c=cM()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}St({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=ke.wrapFragment(qr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=gt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new ct.MathNode("mrow",[Mn(t.label,e)]);return r=new ct.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new ct.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});St({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=ke.wrapFragment(qr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new ct.MathNode("mrow",[Mn(t.fragment,e)])}});St({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=br(e[0],"ordgroup"),a=n.body,i="",o=0;o<a.length;o++){var c=br(a[o],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new ut("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new ut("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var jG=(t,e)=>{var r=Qa(t.body,e.withColor(t.color),!1);return ke.makeFragment(r)},_G=(t,e)=>{var r=hi(t.body,e.withColor(t.color)),n=new ct.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};St({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=br(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:va(a)}},htmlBuilder:jG,mathmlBuilder:_G});St({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=br(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:jG,mathmlBuilder:_G});St({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&br(a,"size").value}},htmlBuilder(t,e){var r=ke.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=gt(ra(t.size,e)))),r},mathmlBuilder(t,e){var r=new ct.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",gt(ra(t.size,e)))),r}});var dT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},TG=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ut("Expected a control sequence",t);return e},dde=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},AG=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};St({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(dT[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=dT[n.text]),br(e.parseFunction(),"internal");throw new ut("Invalid token after macro prefix",n)}});St({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ut("Expected a control sequence",n);for(var i=0,o,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ut('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new ut('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new ut("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return o&&d.unshift(o),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===dT[r]),{type:"internal",mode:e.mode}}});St({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=TG(e.gullet.popToken());e.gullet.consumeSpaces();var a=dde(e);return AG(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});St({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=TG(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return AG(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var jm=function(e,r,n){var a=zn.math[e]&&zn.math[e].replace,i=_8(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},O8=function(e,r,n,a){var i=n.havingBaseStyle(r),o=ke.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return o.height*=c,o.depth*=c,o.maxFontSize=i.sizeMultiplier,o},EG=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=gt(i),e.height-=i,e.depth+=i},hde=function(e,r,n,a,i,o){var c=ke.makeSymbol(e,"Main-Regular",i,a),d=O8(c,r,a,o);return n&&EG(d,a,r),d},fde=function(e,r,n,a){return ke.makeSymbol(e,"Size"+r+"-Regular",n,a)},CG=function(e,r,n,a,i,o){var c=fde(e,r,i,a),d=O8(ke.makeSpan(["delimsizing","size"+r],[c],a),Gt.TEXT,a,o);return n&&EG(d,a,Gt.TEXT),d},D3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=ke.makeSpan(["delimsizinginner",a],[ke.makeSpan([],[ke.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},P3=function(e,r,n){var a=Zo["Size4-Regular"][e.charCodeAt(0)]?Zo["Size4-Regular"][e.charCodeAt(0)][4]:Zo["Size1-Regular"][e.charCodeAt(0)][4],i=new Fu("inner",yue(e,Math.round(1e3*r))),o=new mc([i],{width:gt(a),height:gt(r),style:"width:"+gt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=ke.makeSvgSpan([],[o],n);return c.height=r,c.style.height=gt(r),c.style.width=gt(a),{type:"elem",elem:c}},hT=.008,$1={type:"kern",size:-1*hT},pde=["|","\\lvert","\\rvert","\\vert"],mde=["\\|","\\lVert","\\rVert","\\Vert"],kG=function(e,r,n,a,i,o){var c,d,h,p,m="",x=0;c=h=p=e,d=null;var y="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):pde.includes(e)?(h="",m="vert",x=333):mde.includes(e)?(h="",m="doublevert",x=556):e==="["||e==="\\lbrack"?(c="",h="",p="",y="Size4-Regular",m="lbrack",x=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",y="Size4-Regular",m="rbrack",x=667):e==="\\lfloor"||e===""?(h=c="",p="",y="Size4-Regular",m="lfloor",x=667):e==="\\lceil"||e===""?(c="",h=p="",y="Size4-Regular",m="lceil",x=667):e==="\\rfloor"||e===""?(h=c="",p="",y="Size4-Regular",m="rfloor",x=667):e==="\\rceil"||e===""?(c="",h=p="",y="Size4-Regular",m="rceil",x=667):e==="("||e==="\\lparen"?(c="",h="",p="",y="Size4-Regular",m="lparen",x=875):e===")"||e==="\\rparen"?(c="",h="",p="",y="Size4-Regular",m="rparen",x=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",y="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",y="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",y="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",y="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",y="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",y="Size4-Regular");var S=jm(c,y,i),N=S.height+S.depth,w=jm(h,y,i),T=w.height+w.depth,C=jm(p,y,i),O=C.height+C.depth,L=0,I=1;if(d!==null){var R=jm(d,y,i);L=R.height+R.depth,I=2}var A=N+O+L,E=Math.max(0,Math.ceil((r-A)/(I*T))),k=A+E*I*T,U=a.fontMetrics().axisHeight;n&&(U*=a.sizeMultiplier);var P=k/2-U,$=[];if(m.length>0){var B=k-N-O,G=Math.round(k*1e3),K=vue(m,Math.round(B*1e3)),H=new Fu(m,K),ee=(x/1e3).toFixed(3)+"em",ae=(G/1e3).toFixed(3)+"em",ce=new mc([H],{width:ee,height:ae,viewBox:"0 0 "+x+" "+G}),fe=ke.makeSvgSpan([],[ce],a);fe.height=G/1e3,fe.style.width=ee,fe.style.height=ae,$.push({type:"elem",elem:fe})}else{if($.push(D3(p,y,i)),$.push($1),d===null){var Z=k-N-O+2*hT;$.push(P3(h,Z,a))}else{var ne=(k-N-O-L)/2+2*hT;$.push(P3(h,ne,a)),$.push($1),$.push(D3(d,y,i)),$.push($1),$.push(P3(h,ne,a))}$.push($1),$.push(D3(c,y,i))}var Y=a.havingBaseStyle(Gt.TEXT),de=ke.makeVList({positionType:"bottom",positionData:P,children:$},Y);return O8(ke.makeSpan(["delimsizing","mult"],[de],Y),Gt.TEXT,a,o)},L3=80,B3=.08,$3=function(e,r,n,a,i){var o=xue(e,a,n),c=new Fu(e,o),d=new mc([c],{width:"400em",height:gt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return ke.makeSvgSpan(["hide-tail"],[d],i)},gde=function(e,r){var n=r.havingBaseSizing(),a=MG("\\surd",e*n.sizeMultiplier,RG,n),i=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*o+L3,e<1?i=1:e<1.4&&(i=.7),d=(1+o+B3)/i,h=(1+o)/i,c=$3("sqrtMain",d,p,o,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+L3)*Bm[a.size],h=(Bm[a.size]+o)/i,d=(Bm[a.size]+o+B3)/i,c=$3("sqrtSize"+a.size,d,p,o,r),c.style.minWidth="1.02em",m=1/i):(d=e+o+B3,h=e+o,p=Math.floor(1e3*e+o)+L3,c=$3("sqrtTall",d,p,o,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=gt(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},IG=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],xde=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],OG=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Bm=[0,1.2,1.8,2.4,3],yde=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),IG.includes(e)||OG.includes(e))return CG(e,r,!1,n,a,i);if(xde.includes(e))return kG(e,Bm[r],!1,n,a,i);throw new ut("Illegal delimiter: '"+e+"'")},vde=[{type:"small",style:Gt.SCRIPTSCRIPT},{type:"small",style:Gt.SCRIPT},{type:"small",style:Gt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],bde=[{type:"small",style:Gt.SCRIPTSCRIPT},{type:"small",style:Gt.SCRIPT},{type:"small",style:Gt.TEXT},{type:"stack"}],RG=[{type:"small",style:Gt.SCRIPTSCRIPT},{type:"small",style:Gt.SCRIPT},{type:"small",style:Gt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],wde=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},MG=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),o=i;o<n.length&&n[o].type!=="stack";o++){var c=jm(e,wde(n[o]),"math"),d=c.height+c.depth;if(n[o].type==="small"){var h=a.havingBaseStyle(n[o].style);d*=h.sizeMultiplier}if(d>r)return n[o]}return n[n.length-1]},DG=function(e,r,n,a,i,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;OG.includes(e)?c=vde:IG.includes(e)?c=RG:c=bde;var d=MG(e,r,c,a);return d.type==="small"?hde(e,d.style,n,a,i,o):d.type==="large"?CG(e,d.size,n,a,i,o):kG(e,r,n,a,i,o)},Sde=function(e,r,n,a,i,o){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return DG(e,m,!0,a,i,o)},ic={sqrtImage:gde,sizedDelim:yde,sizeToMaxHeight:Bm,customSizedDelim:DG,leftRightDelim:Sde},dM={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Nde=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function uw(t,e){var r=lw(t);if(r&&Nde.includes(r.text))return r;throw r?new ut("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ut("Invalid delimiter type '"+t.type+"'",t)}St({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=uw(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:dM[t.funcName].size,mclass:dM[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?ke.makeSpan([t.mclass]):ic.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(uo(t.delim,t.mode));var r=new ct.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=gt(ic.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function hM(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}St({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ut("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:uw(e[0],t).text,color:r}}});St({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=uw(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=br(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{hM(t);for(var r=Qa(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(n=Math.max(r[o].height,n),a=Math.max(r[o].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=vg(e,["mopen"]):c=ic.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=ic.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=vg(e,["mclose"]);else{var x=t.rightColor?e.withColor(t.rightColor):e;m=ic.leftRightDelim(t.right,n,a,x,t.mode,["mclose"])}return r.push(m),ke.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{hM(t);var r=hi(t.body,e);if(t.left!=="."){var n=new ct.MathNode("mo",[uo(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new ct.MathNode("mo",[uo(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return E8(r)}});St({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=uw(e[0],t);if(!t.parser.leftrightDepth)throw new ut("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=vg(e,[]);else{r=ic.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?uo("|","text"):uo(t.delim,t.mode),n=new ct.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var R8=(t,e)=>{var r=ke.wrapFragment(qr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,o=0,c=Jr.isCharacterBox(t.body);if(n==="sout")i=ke.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=ra({number:.6,unit:"pt"},e),h=ra({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=gt(m/2+d);var x=Math.floor(1e3*m*a),y=mue(x),S=new mc([new Fu("phase",y)],{width:"400em",height:gt(x/1e3),viewBox:"0 0 400000 "+x,preserveAspectRatio:"xMinYMin slice"});i=ke.makeSvgSpan(["hide-tail"],[S],e),i.style.height=gt(m),o=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var N=0,w=0,T=0;/box/.test(n)?(T=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),N=e.fontMetrics().fboxsep+(n==="colorbox"?0:T),w=N):n==="angl"?(T=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),N=4*T,w=Math.max(0,.25-r.depth)):(N=c?.2:0,w=N),i=xc.encloseSpan(r,n,N,w,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=gt(T)):n==="angl"&&T!==.049&&(i.style.borderTopWidth=gt(T),i.style.borderRightWidth=gt(T)),o=r.depth+w,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var C;if(t.backgroundColor)C=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var O=/cancel|phase/.test(n)?["svg-align"]:[];C=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:O}]},e)}return/cancel/.test(n)&&(C.height=r.height,C.depth=r.depth),/cancel/.test(n)&&!c?ke.makeSpan(["mord","cancel-lap"],[C],e):ke.makeSpan(["mord"],[C],e)},M8=(t,e)=>{var r=0,n=new ct.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Mn(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};St({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=br(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:R8,mathmlBuilder:M8});St({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=br(e[0],"color-token").color,o=br(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:c}},htmlBuilder:R8,mathmlBuilder:M8});St({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});St({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:R8,mathmlBuilder:M8});St({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var PG={};function pl(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)PG[r[d]]=c;i&&(db[e]=i),o&&(hb[e]=o)}var LG={};function te(t,e){LG[t]=e}function fM(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var dw=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ut("{"+t.envName+"} can be used only in display mode.")};function D8(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Xu(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:o,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:x}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var y=t.gullet.expandMacroAsText("\\arraystretch");if(y==null)o=1;else if(o=parseFloat(y),!o||o<0)throw new ut("Invalid \\arraystretch: "+y)}t.gullet.beginGroup();var S=[],N=[S],w=[],T=[],C=d!=null?[]:void 0;function O(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){C&&(t.gullet.macros.get("\\df@tag")?(C.push(t.subparse([new Mi("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):C.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(O(),T.push(fM(t));;){var I=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),I={type:"ordgroup",mode:t.mode,body:I},r&&(I={type:"styling",mode:t.mode,style:r,body:[I]}),S.push(I);var R=t.fetch().text;if(R==="&"){if(m&&S.length===m){if(h||c)throw new ut("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(R==="\\end"){L(),S.length===1&&I.type==="styling"&&I.body[0].body.length===0&&(N.length>1||!p)&&N.pop(),T.length<N.length+1&&T.push([]);break}else if(R==="\\\\"){t.consume();var A=void 0;t.gullet.future().text!==" "&&(A=t.parseSizeGroup(!0)),w.push(A?A.value:null),L(),T.push(fM(t)),S=[],N.push(S),O()}else throw new ut("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:o,body:N,cols:i,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:T,colSeparationType:c,tags:C,leqno:x}}function P8(t){return t.slice(0,1)==="d"?"display":"text"}var ml=function(e,r){var n,a,i=e.body.length,o=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,x=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var y=r.havingStyle(Gt.SCRIPT).sizeMultiplier;x=.2778*(y/r.sizeMultiplier)}var S=e.colSeparationType==="CD"?ra({number:3,unit:"ex"},r):12*m,N=3*m,w=e.arraystretch*S,T=.7*w,C=.3*w,O=0;function L(Pe){for(var lt=0;lt<Pe.length;++lt)lt>0&&(O+=.25),h.push({pos:O,isDashed:Pe[lt]})}for(L(o[0]),n=0;n<e.body.length;++n){var I=e.body[n],R=T,A=C;c<I.length&&(c=I.length);var E=new Array(I.length);for(a=0;a<I.length;++a){var k=qr(I[a],r);A<k.depth&&(A=k.depth),R<k.height&&(R=k.height),E[a]=k}var U=e.rowGaps[n],P=0;U&&(P=ra(U,r),P>0&&(P+=C,A<P&&(A=P),P=0)),e.addJot&&(A+=N),E.height=R,E.depth=A,O+=R,E.pos=O,O+=A+P,d[n]=E,L(o[n+1])}var $=O/2+r.fontMetrics().axisHeight,B=e.cols||[],G=[],K,H,ee=[];if(e.tags&&e.tags.some(Pe=>Pe))for(n=0;n<i;++n){var ae=d[n],ce=ae.pos-$,fe=e.tags[n],Z=void 0;fe===!0?Z=ke.makeSpan(["eqn-num"],[],r):fe===!1?Z=ke.makeSpan([],[],r):Z=ke.makeSpan([],Qa(fe,r,!0),r),Z.depth=ae.depth,Z.height=ae.height,ee.push({type:"elem",elem:Z,shift:ce})}for(a=0,H=0;a<c||H<B.length;++a,++H){for(var ne=B[H]||{},Y=!0;ne.type==="separator";){if(Y||(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=gt(r.fontMetrics().doubleRuleSep),G.push(K)),ne.separator==="|"||ne.separator===":"){var de=ne.separator==="|"?"solid":"dashed",ye=ke.makeSpan(["vertical-separator"],[],r);ye.style.height=gt(O),ye.style.borderRightWidth=gt(p),ye.style.borderRightStyle=de,ye.style.margin="0 "+gt(-p/2);var Ue=O-$;Ue&&(ye.style.verticalAlign=gt(-Ue)),G.push(ye)}else throw new ut("Invalid separator type: "+ne.separator);H++,ne=B[H]||{},Y=!1}if(!(a>=c)){var Xe=void 0;(a>0||e.hskipBeforeAndAfter)&&(Xe=Jr.deflt(ne.pregap,x),Xe!==0&&(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=gt(Xe),G.push(K)));var Ye=[];for(n=0;n<i;++n){var _e=d[n],he=_e[a];if(he){var Q=_e.pos-$;he.depth=_e.depth,he.height=_e.height,Ye.push({type:"elem",elem:he,shift:Q})}}Ye=ke.makeVList({positionType:"individualShift",children:Ye},r),Ye=ke.makeSpan(["col-align-"+(ne.align||"c")],[Ye]),G.push(Ye),(a<c-1||e.hskipBeforeAndAfter)&&(Xe=Jr.deflt(ne.postgap,x),Xe!==0&&(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=gt(Xe),G.push(K)))}}if(d=ke.makeSpan(["mtable"],G),h.length>0){for(var X=ke.makeLineSpan("hline",r,p),Se=ke.makeLineSpan("hdashline",r,p),Ne=[{type:"elem",elem:d,shift:0}];h.length>0;){var Ke=h.pop(),at=Ke.pos-$;Ke.isDashed?Ne.push({type:"elem",elem:Se,shift:at}):Ne.push({type:"elem",elem:X,shift:at})}d=ke.makeVList({positionType:"individualShift",children:Ne},r)}if(ee.length===0)return ke.makeSpan(["mord"],[d],r);var Rt=ke.makeVList({positionType:"individualShift",children:ee},r);return Rt=ke.makeSpan(["tag"],[Rt],r),ke.makeFragment([d,Rt])},jde={c:"center ",l:"left ",r:"right "},gl=function(e,r){for(var n=[],a=new ct.MathNode("mtd",[],["mtr-glue"]),i=new ct.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var c=e.body[o],d=[],h=0;h<c.length;h++)d.push(new ct.MathNode("mtd",[Mn(c[h],r)]));e.tags&&e.tags[o]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new ct.MathNode("mtr",d))}var p=new ct.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",gt(m));var x="",y="";if(e.cols&&e.cols.length>0){var S=e.cols,N="",w=!1,T=0,C=S.length;S[0].type==="separator"&&(x+="top ",T=1),S[S.length-1].type==="separator"&&(x+="bottom ",C-=1);for(var O=T;O<C;O++)S[O].type==="align"?(y+=jde[S[O].align],w&&(N+="none "),w=!0):S[O].type==="separator"&&w&&(N+=S[O].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",y.trim()),/[sd]/.test(N)&&p.setAttribute("columnlines",N.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],I="",R=1;R<L.length;R++)I+=R%2?"0em ":"1em ";p.setAttribute("columnspacing",I.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var A="",E=e.hLinesBeforeRow;x+=E[0].length>0?"left ":"",x+=E[E.length-1].length>0?"right ":"";for(var k=1;k<E.length-1;k++)A+=E[k].length===0?"none ":E[k][0]?"dashed ":"solid ";return/[sd]/.test(A)&&p.setAttribute("rowlines",A.trim()),x!==""&&(p=new ct.MathNode("menclose",[p]),p.setAttribute("notation",x.trim())),e.arraystretch&&e.arraystretch<1&&(p=new ct.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},BG=function(e,r){e.envName.indexOf("ed")===-1&&dw(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",o=Xu(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:D8(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var x=br(r[0].body[m],"textord");p+=x.text}c=Number(p),d=c*2}var y=!d;o.body.forEach(function(T){for(var C=1;C<T.length;C+=2){var O=br(T[C],"styling"),L=br(O.body[0],"ordgroup");L.body.unshift(h)}if(y)d<T.length&&(d=T.length);else{var I=T.length/2;if(c<I)throw new ut("Too many math in a row: "+("expected "+c+", but got "+I),T[0])}});for(var S=0;S<d;++S){var N="r",w=0;S%2===1?N="l":S>0&&y&&(w=1),n[S]={type:"align",align:N,pregap:w,postgap:0}}return o.colSeparationType=y?"align":"alignat",o};pl({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=lw(e[0]),n=r?[e[0]]:br(e[0],"ordgroup").body,a=n.map(function(o){var c=k8(o),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ut("Unknown column alignment: "+d,o)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Xu(t.parser,i,P8(t.envName))},htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ut("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Xu(t.parser,n,P8(t.envName)),o=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Xu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=lw(e[0]),n=r?[e[0]]:br(e[0],"ordgroup").body,a=n.map(function(o){var c=k8(o),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ut("Unknown column alignment: "+d,o)});if(a.length>1)throw new ut("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Xu(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new ut("{subarray} can contain only one column");return i},htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Xu(t.parser,e,P8(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:BG,htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&dw(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:D8(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Xu(t.parser,e,"display")},htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:BG,htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){dw(t);var e={autoTag:D8(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Xu(t.parser,e,"display")},htmlBuilder:ml,mathmlBuilder:gl});pl({type:"array",names:["CD"],props:{numArgs:0},handler(t){return dw(t),ude(t.parser)},htmlBuilder:ml,mathmlBuilder:gl});te("\\nonumber","\\gdef\\@eqnsw{0}");te("\\notag","\\nonumber");St({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ut(t.funcName+" valid only within array environment")}});var pM=PG;St({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ut("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=br(a.body[o],"textord").text;if(n==="\\begin"){if(!pM.hasOwnProperty(i))throw new ut("No such environment: "+i,a);var c=pM[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var x=r.nextToken,y=br(r.parseFunction(),"environment");if(y.name!==i)throw new ut("Mismatch: \\begin{"+i+"} matched by \\end{"+y.name+"}",x);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var $G=(t,e)=>{var r=t.font,n=e.withFont(r);return qr(t.body,n)},zG=(t,e)=>{var r=t.font,n=e.withFont(r);return Mn(t.body,n)},mM={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};St({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=fb(e[0]),i=n;return i in mM&&(i=mM[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:$G,mathmlBuilder:zG});St({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Jr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:cw(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});St({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,o=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:$G,mathmlBuilder:zG});var UG=(t,e)=>{var r=e;return t==="display"?r=r.id>=Gt.SCRIPT.id?r.text():Gt.DISPLAY:t==="text"&&r.size===Gt.DISPLAY.size?r=Gt.TEXT:t==="script"?r=Gt.SCRIPT:t==="scriptscript"&&(r=Gt.SCRIPTSCRIPT),r},L8=(t,e)=>{var r=UG(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var o=qr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;o.height=o.height<c?c:o.height,o.depth=o.depth<d?d:o.depth}i=e.havingStyle(a);var h=qr(t.denom,i,e),p,m,x;t.hasBarLine?(t.barSize?(m=ra(t.barSize,e),p=ke.makeLineSpan("frac-line",e,m)):p=ke.makeLineSpan("frac-line",e),m=p.height,x=p.height):(p=null,m=0,x=e.fontMetrics().defaultRuleThickness);var y,S,N;r.size===Gt.DISPLAY.size||t.size==="display"?(y=e.fontMetrics().num1,m>0?S=3*x:S=7*x,N=e.fontMetrics().denom1):(m>0?(y=e.fontMetrics().num2,S=x):(y=e.fontMetrics().num3,S=3*x),N=e.fontMetrics().denom2);var w;if(p){var C=e.fontMetrics().axisHeight;y-o.depth-(C+.5*m)<S&&(y+=S-(y-o.depth-(C+.5*m))),C-.5*m-(h.height-N)<S&&(N+=S-(C-.5*m-(h.height-N)));var O=-(C-.5*m);w=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:N},{type:"elem",elem:p,shift:O},{type:"elem",elem:o,shift:-y}]},e)}else{var T=y-o.depth-(h.height-N);T<S&&(y+=.5*(S-T),N+=.5*(S-T)),w=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:N},{type:"elem",elem:o,shift:-y}]},e)}i=e.havingStyle(r),w.height*=i.sizeMultiplier/e.sizeMultiplier,w.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===Gt.DISPLAY.size?L=e.fontMetrics().delim1:r.size===Gt.SCRIPTSCRIPT.size?L=e.havingStyle(Gt.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var I,R;return t.leftDelim==null?I=vg(e,["mopen"]):I=ic.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?R=ke.makeSpan([]):t.rightDelim==null?R=vg(e,["mclose"]):R=ic.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),ke.makeSpan(["mord"].concat(i.sizingClasses(e)),[I,ke.makeSpan(["mfrac"],[w]),R],e)},B8=(t,e)=>{var r=new ct.MathNode("mfrac",[Mn(t.numer,e),Mn(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=ra(t.barSize,e);r.setAttribute("linethickness",gt(n))}var a=UG(t.size,e.style);if(a.size!==e.style.size){r=new ct.MathNode("mstyle",[r]);var i=a.size===Gt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var c=new ct.MathNode("mo",[new ct.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}if(o.push(r),t.rightDelim!=null){var d=new ct.MathNode("mo",[new ct.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),o.push(d)}return E8(o)}return r};St({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],o,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,c="(",d=")";break;case"\\\\bracefrac":o=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":o=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:o,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:L8,mathmlBuilder:B8});St({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});St({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var gM=["display","text","script","scriptscript"],xM=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};St({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=fb(e[0]),o=i.type==="atom"&&i.family==="open"?xM(i.text):null,c=fb(e[1]),d=c.type==="atom"&&c.family==="close"?xM(c.text):null,h=br(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var x="auto",y=e[3];if(y.type==="ordgroup"){if(y.body.length>0){var S=br(y.body[0],"textord");x=gM[Number(S.text)]}}else y=br(y,"textord"),x=gM[Number(y.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:o,rightDelim:d,size:x}},htmlBuilder:L8,mathmlBuilder:B8});St({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:br(e[0],"size").value,token:a}}});St({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=eue(br(e[1],"infix").size),o=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:L8,mathmlBuilder:B8});var VG=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?qr(t.sup,e.havingStyle(r.sup()),e):qr(t.sub,e.havingStyle(r.sub()),e),a=br(t.base,"horizBrace")):a=br(t,"horizBrace");var i=qr(a.base,e.havingBaseStyle(Gt.DISPLAY)),o=xc.svgSpan(a,e),c;if(a.isOver?(c=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=ke.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=ke.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=ke.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return ke.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},_de=(t,e)=>{var r=xc.mathMLnode(t.label);return new ct.MathNode(t.isOver?"mover":"munder",[Mn(t.base,e),r])};St({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:VG,mathmlBuilder:_de});St({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=br(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:va(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Qa(t.body,e,!1);return ke.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=qu(t.body,e);return r instanceof Ci||(r=new Ci("mrow",[r])),r.setAttribute("href",t.href),r}});St({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=br(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var o=n[i];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:va(c)}}});St({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:va(e[0])}},htmlBuilder(t,e){var r=Qa(t.body,e,!1);return ke.makeFragment(r)},mathmlBuilder(t,e){return new ct.MathNode("mrow",hi(t.body,e))}});St({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=br(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],x=m.indexOf("=");if(x<0)throw new ut("\\htmlData key/value '"+m+"' missing equals sign");var y=m.slice(0,x),S=m.slice(x+1);d["data-"+y.trim()]=S}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:va(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Qa(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=ke.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>qu(t.body,e)});St({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:va(e[0]),mathml:va(e[1])}},htmlBuilder:(t,e)=>{var r=Qa(t.html,e,!1);return ke.makeFragment(r)},mathmlBuilder:(t,e)=>qu(t.mathml,e)});var z3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ut("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!oG(n))throw new ut("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};St({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},c="";if(r[0])for(var d=br(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var x=m[1].trim();switch(m[0].trim()){case"alt":c=x;break;case"width":a=z3(x);break;case"height":i=z3(x);break;case"totalheight":o=z3(x);break;default:throw new ut("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var y=br(e[0],"url").url;return c===""&&(c=y,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:y})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:o,src:y}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=ra(t.height,e),n=0;t.totalheight.number>0&&(n=ra(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=ra(t.width,e));var i={height:gt(r+n)};a>0&&(i.width=gt(a)),n>0&&(i.verticalAlign=gt(-n));var o=new _ue(t.src,t.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=ra(t.height,e),a=0;if(t.totalheight.number>0&&(a=ra(t.totalheight,e)-n,r.setAttribute("valign",gt(-a))),r.setAttribute("height",gt(n+a)),t.width.number>0){var i=ra(t.width,e);r.setAttribute("width",gt(i))}return r.setAttribute("src",t.src),r}});St({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=br(e[0],"size");if(r.settings.strict){var i=n[1]==="m",o=a.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return ke.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=ra(t.dimension,e);return new ct.SpaceNode(r)}});St({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=ke.makeSpan([],[qr(t.body,e)]),r=ke.makeSpan(["inner"],[r],e)):r=ke.makeSpan(["inner"],[qr(t.body,e)]);var n=ke.makeSpan(["fix"],[]),a=ke.makeSpan([t.alignment],[r,n],e),i=ke.makeSpan(["strut"]);return i.style.height=gt(a.height+a.depth),a.depth&&(i.style.verticalAlign=gt(-a.depth)),a.children.unshift(i),a=ke.makeSpan(["thinbox"],[a],e),ke.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mpadded",[Mn(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});St({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}});St({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ut("Mismatched "+t.funcName)}});var yM=(t,e)=>{switch(e.style.size){case Gt.DISPLAY.size:return t.display;case Gt.TEXT.size:return t.text;case Gt.SCRIPT.size:return t.script;case Gt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};St({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:va(e[0]),text:va(e[1]),script:va(e[2]),scriptscript:va(e[3])}},htmlBuilder:(t,e)=>{var r=yM(t,e),n=Qa(r,e,!1);return ke.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=yM(t,e);return qu(r,e)}});var FG=(t,e,r,n,a,i,o)=>{t=ke.makeSpan([],[t]);var c=r&&Jr.isCharacterBox(r),d,h;if(e){var p=qr(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=qr(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var x;if(h&&d){var y=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+o;x=ke.makeVList({positionType:"bottom",positionData:y,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:gt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:gt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var S=t.height-o;x=ke.makeVList({positionType:"top",positionData:S,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:gt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var N=t.depth+o;x=ke.makeVList({positionType:"bottom",positionData:N,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:gt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[x];if(d&&i!==0&&!c){var T=ke.makeSpan(["mspace"],[],n);T.style.marginRight=gt(i),w.unshift(T)}return ke.makeSpan(["mop","op-limits"],w,n)},qG=["\\smallint"],Yf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=br(t.base,"op"),a=!0):i=br(t,"op");var o=e.style,c=!1;o.size===Gt.DISPLAY.size&&i.symbol&&!qG.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=ke.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,x=ke.staticSvg(p+"Size"+(c?"2":"1"),e);d=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:x,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var y=Qa(i.body,e,!0);y.length===1&&y[0]instanceof co?(d=y[0],d.classes[0]="mop"):d=ke.makeSpan(["mop"],y,e)}else{for(var S=[],N=1;N<i.name.length;N++)S.push(ke.mathsym(i.name[N],i.mode,e));d=ke.makeSpan(["mop"],S,e)}var w=0,T=0;return(d instanceof co||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,T=d.italic),a?FG(d,r,n,e,o,T,w):(w&&(d.style.position="relative",d.style.top=gt(w)),d)},Dx=(t,e)=>{var r;if(t.symbol)r=new Ci("mo",[uo(t.name,t.mode)]),qG.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new Ci("mo",hi(t.body,e));else{r=new Ci("mi",[new el(t.name.slice(1))]);var n=new Ci("mo",[uo("","text")]);t.parentIsSupSub?r=new Ci("mrow",[r,n]):r=yG([r,n])}return r},Tde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};St({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=Tde[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Yf,mathmlBuilder:Dx});St({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:va(n)}},htmlBuilder:Yf,mathmlBuilder:Dx});var Ade={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};St({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Yf,mathmlBuilder:Dx});St({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Yf,mathmlBuilder:Dx});St({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Ade[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Yf,mathmlBuilder:Dx});var HG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=br(t.base,"operatorname"),a=!0):i=br(t,"operatorname");var o;if(i.body.length>0){for(var c=i.body.map(m=>{var x=m.text;return typeof x=="string"?{type:"textord",mode:m.mode,text:x}:m}),d=Qa(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof co&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=ke.makeSpan(["mop"],d,e)}else o=ke.makeSpan(["mop"],[],e);return a?FG(o,r,n,e,e.style,0,0):o},Ede=(t,e)=>{for(var r=hi(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof ct.SpaceNode))if(i instanceof ct.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof ct.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new ct.TextNode(c)]}var d=new ct.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new ct.MathNode("mo",[uo("","text")]);return t.parentIsSupSub?new ct.MathNode("mrow",[d,h]):ct.newDocumentFragment([d,h])};St({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:va(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:HG,mathmlBuilder:Ede});te("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");I0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?ke.makeFragment(Qa(t.body,e,!1)):ke.makeSpan(["mord"],Qa(t.body,e,!0),e)},mathmlBuilder(t,e){return qu(t.body,e,!0)}});St({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=qr(t.body,e.havingCrampedStyle()),n=ke.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return ke.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[new ct.TextNode("")]);r.setAttribute("stretchy","true");var n=new ct.MathNode("mover",[Mn(t.body,e),r]);return n.setAttribute("accent","true"),n}});St({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:va(n)}},htmlBuilder:(t,e)=>{var r=Qa(t.body,e.withPhantom(),!1);return ke.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=hi(t.body,e);return new ct.MathNode("mphantom",r)}});St({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=ke.makeSpan([],[qr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),ke.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=hi(va(t.body),e),n=new ct.MathNode("mphantom",r),a=new ct.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});St({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=ke.makeSpan(["inner"],[qr(t.body,e.withPhantom())]),n=ke.makeSpan(["fix"],[]);return ke.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=hi(va(t.body),e),n=new ct.MathNode("mphantom",r),a=new ct.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});St({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=br(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=qr(t.body,e),n=ra(t.dy,e);return ke.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new ct.MathNode("mpadded",[Mn(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});St({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});St({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=br(e[0],"size"),o=br(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&br(a,"size").value,width:i.value,height:o.value}},htmlBuilder(t,e){var r=ke.makeSpan(["mord","rule"],[],e),n=ra(t.width,e),a=ra(t.height,e),i=t.shift?ra(t.shift,e):0;return r.style.borderRightWidth=gt(n),r.style.borderTopWidth=gt(a),r.style.bottom=gt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=ra(t.width,e),n=ra(t.height,e),a=t.shift?ra(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new ct.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",gt(r)),o.setAttribute("height",gt(n));var c=new ct.MathNode("mpadded",[o]);return a>=0?c.setAttribute("height",gt(a)):(c.setAttribute("height",gt(a)),c.setAttribute("depth",gt(-a))),c.setAttribute("voffset",gt(a)),c}});function GG(t,e,r){for(var n=Qa(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return ke.makeFragment(n)}var vM=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Cde=(t,e)=>{var r=e.havingSize(t.size);return GG(t.body,r,e)};St({type:"sizing",names:vM,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:vM.indexOf(n)+1,body:i}},htmlBuilder:Cde,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=hi(t.body,r),a=new ct.MathNode("mstyle",n);return a.setAttribute("mathsize",gt(r.sizeMultiplier)),a}});St({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,o=r[0]&&br(r[0],"ordgroup");if(o)for(var c="",d=0;d<o.body.length;++d){var h=o.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=ke.makeSpan([],[qr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return ke.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mpadded",[Mn(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});St({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=qr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=ke.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Gt.TEXT.id&&(i=e.fontMetrics().xHeight);var o=a+i/4,c=r.height+r.depth+o+a,{span:d,ruleWidth:h,advanceWidth:p}=ic.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+o&&(o=(o+m-r.height-r.depth)/2);var x=d.height-r.height-o-h;r.style.paddingLeft=gt(p);var y=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+x)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var S=e.havingStyle(Gt.SCRIPTSCRIPT),N=qr(t.index,S,e),w=.6*(y.height-y.depth),T=ke.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:N}]},e),C=ke.makeSpan(["root"],[T]);return ke.makeSpan(["mord","sqrt"],[C,y],e)}else return ke.makeSpan(["mord","sqrt"],[y],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new ct.MathNode("mroot",[Mn(r,e),Mn(n,e)]):new ct.MathNode("msqrt",[Mn(r,e)])}});var bM={display:Gt.DISPLAY,text:Gt.TEXT,script:Gt.SCRIPT,scriptscript:Gt.SCRIPTSCRIPT};St({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(t,e){var r=bM[t.style],n=e.havingStyle(r).withFont("");return GG(t.body,n,e)},mathmlBuilder(t,e){var r=bM[t.style],n=e.havingStyle(r),a=hi(t.body,n),i=new ct.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=o[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var kde=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Gt.DISPLAY.size||n.alwaysHandleSupSub);return a?Yf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Gt.DISPLAY.size||n.limits);return i?HG:null}else{if(n.type==="accent")return Jr.isCharacterBox(n.base)?I8:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?VG:null}else return null}else return null};I0({type:"supsub",htmlBuilder(t,e){var r=kde(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,o=qr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,x=n&&Jr.isCharacterBox(n);if(a){var y=e.havingStyle(e.style.sup());c=qr(a,y,e),x||(p=o.height-y.fontMetrics().supDrop*y.sizeMultiplier/e.sizeMultiplier)}if(i){var S=e.havingStyle(e.style.sub());d=qr(i,S,e),x||(m=o.depth+S.fontMetrics().subDrop*S.sizeMultiplier/e.sizeMultiplier)}var N;e.style===Gt.DISPLAY?N=h.sup1:e.style.cramped?N=h.sup3:N=h.sup2;var w=e.sizeMultiplier,T=gt(.5/h.ptPerEm/w),C=null;if(d){var O=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof co||O)&&(C=gt(-o.italic))}var L;if(c&&d){p=Math.max(p,N,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var I=h.defaultRuleThickness,R=4*I;if(p-c.depth-(d.height-m)<R){m=R-(p-c.depth)+d.height;var A=.8*h.xHeight-(p-c.depth);A>0&&(p+=A,m-=A)}var E=[{type:"elem",elem:d,shift:m,marginRight:T,marginLeft:C},{type:"elem",elem:c,shift:-p,marginRight:T}];L=ke.makeVList({positionType:"individualShift",children:E},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var k=[{type:"elem",elem:d,marginLeft:C,marginRight:T}];L=ke.makeVList({positionType:"shift",positionData:m,children:k},e)}else if(c)p=Math.max(p,N,c.depth+.25*h.xHeight),L=ke.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:T}]},e);else throw new Error("supsub must have either sup or sub.");var U=cT(o,"right")||"mord";return ke.makeSpan([U],[o,ke.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[Mn(t.base,e)];t.sub&&i.push(Mn(t.sub,e)),t.sup&&i.push(Mn(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Gt.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Gt.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Gt.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Gt.DISPLAY)?o="munder":o="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Gt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Gt.DISPLAY)?o="mover":o="msup"}return new ct.MathNode(o,i)}});I0({type:"atom",htmlBuilder(t,e){return ke.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[uo(t.text,t.mode)]);if(t.family==="bin"){var n=C8(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var WG={mi:"italic",mn:"normal",mtext:"normal"};I0({type:"mathord",htmlBuilder(t,e){return ke.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new ct.MathNode("mi",[uo(t.text,t.mode,e)]),n=C8(t,e)||"italic";return n!==WG[r.type]&&r.setAttribute("mathvariant",n),r}});I0({type:"textord",htmlBuilder(t,e){return ke.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=uo(t.text,t.mode,e),n=C8(t,e)||"normal",a;return t.mode==="text"?a=new ct.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new ct.MathNode("mn",[r]):t.text==="\\prime"?a=new ct.MathNode("mo",[r]):a=new ct.MathNode("mi",[r]),n!==WG[a.type]&&a.setAttribute("mathvariant",n),a}});var U3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},V3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};I0({type:"spacing",htmlBuilder(t,e){if(V3.hasOwnProperty(t.text)){var r=V3[t.text].className||"";if(t.mode==="text"){var n=ke.makeOrd(t,e,"textord");return n.classes.push(r),n}else return ke.makeSpan(["mspace",r],[ke.mathsym(t.text,t.mode,e)],e)}else{if(U3.hasOwnProperty(t.text))return ke.makeSpan(["mspace",U3[t.text]],[],e);throw new ut('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(V3.hasOwnProperty(t.text))r=new ct.MathNode("mtext",[new ct.TextNode("")]);else{if(U3.hasOwnProperty(t.text))return new ct.MathNode("mspace");throw new ut('Unknown type of space "'+t.text+'"')}return r}});var wM=()=>{var t=new ct.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};I0({type:"tag",mathmlBuilder(t,e){var r=new ct.MathNode("mtable",[new ct.MathNode("mtr",[wM(),new ct.MathNode("mtd",[qu(t.body,e)]),wM(),new ct.MathNode("mtd",[qu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var SM={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},NM={"\\textbf":"textbf","\\textmd":"textmd"},Ide={"\\textit":"textit","\\textup":"textup"},jM=(t,e)=>{var r=t.font;if(r){if(SM[r])return e.withTextFontFamily(SM[r]);if(NM[r])return e.withTextFontWeight(NM[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Ide[r])};St({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:va(a),font:n}},htmlBuilder(t,e){var r=jM(t,e),n=Qa(t.body,r,!0);return ke.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=jM(t,e);return qu(t.body,r)}});St({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=qr(t.body,e),n=ke.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=ke.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return ke.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[new ct.TextNode("")]);r.setAttribute("stretchy","true");var n=new ct.MathNode("munder",[Mn(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});St({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=qr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return ke.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new ct.MathNode("mpadded",[Mn(t.body,e)],["vcenter"])}});St({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ut("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=_M(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),n.push(ke.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return ke.makeSpan(["mord","text"].concat(a.sizingClasses(e)),ke.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new ct.TextNode(_M(t)),n=new ct.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var _M=t=>t.body.replace(/ /g,t.star?"":""),Su=gG,KG=`[ \r
	]`,Ode="\\\\[a-zA-Z@]+",Rde="\\\\[^\uD800-\uDFFF]",Mde="("+Ode+")"+KG+"*",Dde=`\\\\(
|[ \r	]+
?)[ \r	]*`,fT="[-]",Pde=new RegExp(fT+"+$"),Lde="("+KG+"+)|"+(Dde+"|")+"([!-\\[\\]---]"+(fT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(fT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Mde)+("|"+Rde+")");class TM{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Lde,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Mi("EOF",new ni(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ut("Unexpected character: '"+e[r]+"'",new Mi(e[r],new ni(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Mi(a,new ni(this,r,this.tokenRegex.lastIndex))}}class Bde{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ut("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var $de=LG;te("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});te("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});te("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});te("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});te("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});te("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");te("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var AM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};te("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ut("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=AM[e.text],n==null||n>=r)throw new ut("Invalid base-"+r+" digit "+e.text);for(var a;(a=AM[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var $8=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ut("\\newcommand's first argument must be a macro name");var i=a[0].text,o=t.isDefined(i);if(o&&!e)throw new ut("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new ut("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ut("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return o&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};te("\\newcommand",t=>$8(t,!1,!0,!1));te("\\renewcommand",t=>$8(t,!0,!1,!1));te("\\providecommand",t=>$8(t,!0,!0,!0));te("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});te("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});te("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),Su[r],zn.math[r],zn.text[r]),""});te("\\bgroup","{");te("\\egroup","}");te("~","\\nobreakspace");te("\\lq","`");te("\\rq","'");te("\\aa","\\r a");te("\\AA","\\r A");te("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");te("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");te("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");te("","\\mathscr{B}");te("","\\mathscr{E}");te("","\\mathscr{F}");te("","\\mathscr{H}");te("","\\mathscr{I}");te("","\\mathscr{L}");te("","\\mathscr{M}");te("","\\mathscr{R}");te("","\\mathfrak{C}");te("","\\mathfrak{H}");te("","\\mathfrak{Z}");te("\\Bbbk","\\Bbb{k}");te("","\\cdotp");te("\\llap","\\mathllap{\\textrm{#1}}");te("\\rlap","\\mathrlap{\\textrm{#1}}");te("\\clap","\\mathclap{\\textrm{#1}}");te("\\mathstrut","\\vphantom{(}");te("\\underbar","\\underline{\\text{#1}}");te("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');te("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");te("\\ne","\\neq");te("","\\neq");te("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");te("","\\notin");te("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");te("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");te("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");te("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");te("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");te("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");te("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");te("","\\perp");te("","\\mathclose{!\\mkern-0.8mu!}");te("","\\notni");te("","\\ulcorner");te("","\\urcorner");te("","\\llcorner");te("","\\lrcorner");te("","\\copyright");te("","\\textregistered");te("","\\textregistered");te("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');te("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');te("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');te("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');te("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");te("","\\vdots");te("\\varGamma","\\mathit{\\Gamma}");te("\\varDelta","\\mathit{\\Delta}");te("\\varTheta","\\mathit{\\Theta}");te("\\varLambda","\\mathit{\\Lambda}");te("\\varXi","\\mathit{\\Xi}");te("\\varPi","\\mathit{\\Pi}");te("\\varSigma","\\mathit{\\Sigma}");te("\\varUpsilon","\\mathit{\\Upsilon}");te("\\varPhi","\\mathit{\\Phi}");te("\\varPsi","\\mathit{\\Psi}");te("\\varOmega","\\mathit{\\Omega}");te("\\substack","\\begin{subarray}{c}#1\\end{subarray}");te("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");te("\\boxed","\\fbox{$\\displaystyle{#1}$}");te("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");te("\\implies","\\DOTSB\\;\\Longrightarrow\\;");te("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");te("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");te("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var EM={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};te("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in EM?e=EM[r]:(r.slice(0,4)==="\\not"||r in zn.math&&["bin","rel"].includes(zn.math[r].group))&&(e="\\dotsb"),e});var z8={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};te("\\dotso",function(t){var e=t.future().text;return e in z8?"\\ldots\\,":"\\ldots"});te("\\dotsc",function(t){var e=t.future().text;return e in z8&&e!==","?"\\ldots\\,":"\\ldots"});te("\\cdots",function(t){var e=t.future().text;return e in z8?"\\@cdots\\,":"\\@cdots"});te("\\dotsb","\\cdots");te("\\dotsm","\\cdots");te("\\dotsi","\\!\\cdots");te("\\dotsx","\\ldots\\,");te("\\DOTSI","\\relax");te("\\DOTSB","\\relax");te("\\DOTSX","\\relax");te("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");te("\\,","\\tmspace+{3mu}{.1667em}");te("\\thinspace","\\,");te("\\>","\\mskip{4mu}");te("\\:","\\tmspace+{4mu}{.2222em}");te("\\medspace","\\:");te("\\;","\\tmspace+{5mu}{.2777em}");te("\\thickspace","\\;");te("\\!","\\tmspace-{3mu}{.1667em}");te("\\negthinspace","\\!");te("\\negmedspace","\\tmspace-{4mu}{.2222em}");te("\\negthickspace","\\tmspace-{5mu}{.277em}");te("\\enspace","\\kern.5em ");te("\\enskip","\\hskip.5em\\relax");te("\\quad","\\hskip1em\\relax");te("\\qquad","\\hskip2em\\relax");te("\\tag","\\@ifstar\\tag@literal\\tag@paren");te("\\tag@paren","\\tag@literal{({#1})}");te("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ut("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});te("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");te("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");te("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");te("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");te("\\newline","\\\\\\relax");te("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var QG=gt(Zo["Main-Regular"][84][1]-.7*Zo["Main-Regular"][65][1]);te("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+QG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");te("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+QG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");te("\\hspace","\\@ifstar\\@hspacer\\@hspace");te("\\@hspace","\\hskip #1\\relax");te("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");te("\\ordinarycolon",":");te("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");te("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');te("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');te("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');te("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');te("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');te("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');te("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');te("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');te("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');te("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');te("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');te("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');te("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');te("","\\dblcolon");te("","\\eqcolon");te("","\\coloneqq");te("","\\eqqcolon");te("","\\Coloneqq");te("\\ratio","\\vcentcolon");te("\\coloncolon","\\dblcolon");te("\\colonequals","\\coloneqq");te("\\coloncolonequals","\\Coloneqq");te("\\equalscolon","\\eqqcolon");te("\\equalscoloncolon","\\Eqqcolon");te("\\colonminus","\\coloneq");te("\\coloncolonminus","\\Coloneq");te("\\minuscolon","\\eqcolon");te("\\minuscoloncolon","\\Eqcolon");te("\\coloncolonapprox","\\Colonapprox");te("\\coloncolonsim","\\Colonsim");te("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");te("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");te("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");te("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");te("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");te("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");te("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");te("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");te("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");te("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");te("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");te("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");te("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");te("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");te("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");te("\\ngeqq","\\html@mathml{\\@ngeqq}{}");te("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");te("\\nleqq","\\html@mathml{\\@nleqq}{}");te("\\nleqslant","\\html@mathml{\\@nleqslant}{}");te("\\nshortmid","\\html@mathml{\\@nshortmid}{}");te("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");te("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");te("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");te("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");te("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");te("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");te("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");te("\\imath","\\html@mathml{\\@imath}{}");te("\\jmath","\\html@mathml{\\@jmath}{}");te("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");te("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");te("","\\llbracket");te("","\\rrbracket");te("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");te("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");te("","\\lBrace");te("","\\rBrace");te("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");te("","\\minuso");te("\\darr","\\downarrow");te("\\dArr","\\Downarrow");te("\\Darr","\\Downarrow");te("\\lang","\\langle");te("\\rang","\\rangle");te("\\uarr","\\uparrow");te("\\uArr","\\Uparrow");te("\\Uarr","\\Uparrow");te("\\N","\\mathbb{N}");te("\\R","\\mathbb{R}");te("\\Z","\\mathbb{Z}");te("\\alef","\\aleph");te("\\alefsym","\\aleph");te("\\Alpha","\\mathrm{A}");te("\\Beta","\\mathrm{B}");te("\\bull","\\bullet");te("\\Chi","\\mathrm{X}");te("\\clubs","\\clubsuit");te("\\cnums","\\mathbb{C}");te("\\Complex","\\mathbb{C}");te("\\Dagger","\\ddagger");te("\\diamonds","\\diamondsuit");te("\\empty","\\emptyset");te("\\Epsilon","\\mathrm{E}");te("\\Eta","\\mathrm{H}");te("\\exist","\\exists");te("\\harr","\\leftrightarrow");te("\\hArr","\\Leftrightarrow");te("\\Harr","\\Leftrightarrow");te("\\hearts","\\heartsuit");te("\\image","\\Im");te("\\infin","\\infty");te("\\Iota","\\mathrm{I}");te("\\isin","\\in");te("\\Kappa","\\mathrm{K}");te("\\larr","\\leftarrow");te("\\lArr","\\Leftarrow");te("\\Larr","\\Leftarrow");te("\\lrarr","\\leftrightarrow");te("\\lrArr","\\Leftrightarrow");te("\\Lrarr","\\Leftrightarrow");te("\\Mu","\\mathrm{M}");te("\\natnums","\\mathbb{N}");te("\\Nu","\\mathrm{N}");te("\\Omicron","\\mathrm{O}");te("\\plusmn","\\pm");te("\\rarr","\\rightarrow");te("\\rArr","\\Rightarrow");te("\\Rarr","\\Rightarrow");te("\\real","\\Re");te("\\reals","\\mathbb{R}");te("\\Reals","\\mathbb{R}");te("\\Rho","\\mathrm{P}");te("\\sdot","\\cdot");te("\\sect","\\S");te("\\spades","\\spadesuit");te("\\sub","\\subset");te("\\sube","\\subseteq");te("\\supe","\\supseteq");te("\\Tau","\\mathrm{T}");te("\\thetasym","\\vartheta");te("\\weierp","\\wp");te("\\Zeta","\\mathrm{Z}");te("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");te("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");te("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");te("\\bra","\\mathinner{\\langle{#1}|}");te("\\ket","\\mathinner{|{#1}\\rangle}");te("\\braket","\\mathinner{\\langle{#1}\\rangle}");te("\\Bra","\\left\\langle#1\\right|");te("\\Ket","\\left|#1\\right\\rangle");var XG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>x=>{t&&(x.macros.set("|",o),a.length&&x.macros.set("\\|",c));var y=m;if(!m&&a.length){var S=x.future();S.text==="|"&&(x.popToken(),y=!0)}return{tokens:y?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};te("\\bra@ket",XG(!1));te("\\bra@set",XG(!0));te("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");te("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");te("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");te("\\angln","{\\angl n}");te("\\blue","\\textcolor{##6495ed}{#1}");te("\\orange","\\textcolor{##ffa500}{#1}");te("\\pink","\\textcolor{##ff00af}{#1}");te("\\red","\\textcolor{##df0030}{#1}");te("\\green","\\textcolor{##28ae7b}{#1}");te("\\gray","\\textcolor{gray}{#1}");te("\\purple","\\textcolor{##9d38bd}{#1}");te("\\blueA","\\textcolor{##ccfaff}{#1}");te("\\blueB","\\textcolor{##80f6ff}{#1}");te("\\blueC","\\textcolor{##63d9ea}{#1}");te("\\blueD","\\textcolor{##11accd}{#1}");te("\\blueE","\\textcolor{##0c7f99}{#1}");te("\\tealA","\\textcolor{##94fff5}{#1}");te("\\tealB","\\textcolor{##26edd5}{#1}");te("\\tealC","\\textcolor{##01d1c1}{#1}");te("\\tealD","\\textcolor{##01a995}{#1}");te("\\tealE","\\textcolor{##208170}{#1}");te("\\greenA","\\textcolor{##b6ffb0}{#1}");te("\\greenB","\\textcolor{##8af281}{#1}");te("\\greenC","\\textcolor{##74cf70}{#1}");te("\\greenD","\\textcolor{##1fab54}{#1}");te("\\greenE","\\textcolor{##0d923f}{#1}");te("\\goldA","\\textcolor{##ffd0a9}{#1}");te("\\goldB","\\textcolor{##ffbb71}{#1}");te("\\goldC","\\textcolor{##ff9c39}{#1}");te("\\goldD","\\textcolor{##e07d10}{#1}");te("\\goldE","\\textcolor{##a75a05}{#1}");te("\\redA","\\textcolor{##fca9a9}{#1}");te("\\redB","\\textcolor{##ff8482}{#1}");te("\\redC","\\textcolor{##f9685d}{#1}");te("\\redD","\\textcolor{##e84d39}{#1}");te("\\redE","\\textcolor{##bc2612}{#1}");te("\\maroonA","\\textcolor{##ffbde0}{#1}");te("\\maroonB","\\textcolor{##ff92c6}{#1}");te("\\maroonC","\\textcolor{##ed5fa6}{#1}");te("\\maroonD","\\textcolor{##ca337c}{#1}");te("\\maroonE","\\textcolor{##9e034e}{#1}");te("\\purpleA","\\textcolor{##ddd7ff}{#1}");te("\\purpleB","\\textcolor{##c6b9fc}{#1}");te("\\purpleC","\\textcolor{##aa87ff}{#1}");te("\\purpleD","\\textcolor{##7854ab}{#1}");te("\\purpleE","\\textcolor{##543b78}{#1}");te("\\mintA","\\textcolor{##f5f9e8}{#1}");te("\\mintB","\\textcolor{##edf2df}{#1}");te("\\mintC","\\textcolor{##e0e5cc}{#1}");te("\\grayA","\\textcolor{##f6f7f7}{#1}");te("\\grayB","\\textcolor{##f0f1f2}{#1}");te("\\grayC","\\textcolor{##e3e5e6}{#1}");te("\\grayD","\\textcolor{##d6d8da}{#1}");te("\\grayE","\\textcolor{##babec2}{#1}");te("\\grayF","\\textcolor{##888d93}{#1}");te("\\grayG","\\textcolor{##626569}{#1}");te("\\grayH","\\textcolor{##3b3e40}{#1}");te("\\grayI","\\textcolor{##21242c}{#1}");te("\\kaBlue","\\textcolor{##314453}{#1}");te("\\kaGreen","\\textcolor{##71B307}{#1}");var YG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class zde{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Bde($de,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new TM(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new Mi("EOF",n.loc)),this.pushTokens(a),new Mi("",ni.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,o=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new ut("Extra }",i)}else if(i.text==="EOF")throw new ut("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((o===0||o===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(o!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ut("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new ut("Use of the macro doesn't match its definition",i)}}for(var o=[],c=0;c<e;c++)o.push(this.consumeArg(r&&r[c+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ut("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ut("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new ut("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...o[+d.text-1]);else throw new ut("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Mi(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var c=new TM(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||Su.hasOwnProperty(e)||zn.math.hasOwnProperty(e)||zn.text.hasOwnProperty(e)||YG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Su.hasOwnProperty(e)&&!Su[e].primitive}}var CM=/^[]/,z1=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),F3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},kM={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class hw{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new zde(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ut("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Mi("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(hw.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&Su[a.text]&&Su[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ut("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,o,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?o=d[0]:o={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],o],[]):h=this.callFunction(n,[i,o],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new ut("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new ut("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new ut("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new ut("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new ut("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(z1[i.text]){var h=CM.test(i.text),p=[];for(p.push(new Mi(z1[i.text])),this.consume();;){var m=this.fetch().text;if(!z1[m]||CM.test(m)!==h)break;p.unshift(new Mi(z1[m])),this.consume()}var x=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:x}:n={type:"ordgroup",mode:"math",body:x}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=Su[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new ut("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new ut("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new ut("Can't use function '"+a+"' in math mode",n);var{args:o,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,o,c,n,e)}callFunction(e,r,n,a,i){var o={funcName:e,parser:this,token:a,breakOnTokenText:i},c=Su[e];if(c&&c.handler)return c.handler(o,r,n);throw new ut("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],o=0;o<n;o++){var c=r.argTypes&&r.argTypes[o],d=o<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new ut("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new ut("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ut("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ut("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",o;(o=this.fetch()).text!=="EOF"&&e.test(i+o.text);)a=o,i+=a.text,this.consume();if(i==="")throw new ut("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ut("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ut("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!oG(i))throw new ut("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),o}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,o),d=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:ni.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!YG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ut("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:ni.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:ni.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:ni.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ut(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}kM.hasOwnProperty(r[0])&&!zn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=kM[r[0]]+r.slice(1));var i=Pde.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if(zn[this.mode][r]){this.settings.strict&&this.mode==="math"&&lT.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=zn[this.mode][r].group,d=ni.range(e),h;if(Eue.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};o=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(iG(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:ni.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var x=i[0][m];if(!F3[x])throw new ut("Unknown accent ' "+x+"'",e);var y=F3[x][this.mode]||F3[x].text;if(!y)throw new ut("Accent "+x+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:ni.range(e),label:y,isStretchy:!1,isShifty:!0,base:o}}return o}}hw.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var U8=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new hw(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ut("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new Mi("\\df@tag")])}]}return a},JG=function(e,r,n){r.textContent="";var a=V8(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),JG=function(){throw new ut("KaTeX doesn't work in quirks mode.")});var Ude=function(e,r){var n=V8(e,r).toMarkup();return n},Vde=function(e,r){var n=new N8(r);return U8(e,n)},ZG=function(e,r,n){if(n.throwOnError||!(e instanceof ut))throw e;var a=ke.makeSpan(["katex-error"],[new co(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},V8=function(e,r){var n=new N8(r);try{var a=U8(e,n);return Yue(a,e,n)}catch(i){return ZG(i,e,n)}},Fde=function(e,r){var n=new N8(r);try{var a=U8(e,n);return Jue(a,e,n)}catch(i){return ZG(i,e,n)}},qde="0.16.28",Hde={Span:Mx,Anchor:T8,SymbolNode:co,SvgNode:mc,PathNode:Fu,LineNode:oT},pb={version:qde,render:JG,renderToString:Ude,ParseError:ut,SETTINGS_SCHEMA:jv,__parse:Vde,__renderToDomTree:V8,__renderToHTMLTree:Fde,__setFontMetrics:bue,__defineSymbol:M,__defineFunction:St,__defineMacro:te,__domTree:Hde};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function yu(t){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(t)}function pT(t,e){return pT=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},pT(t,e)}function Gde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Tv(t,e,r){return Gde()?Tv=Reflect.construct:Tv=function(a,i,o){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return o&&pT(h,o.prototype),h},Tv.apply(null,arguments)}function jo(t){return Wde(t)||Kde(t)||Qde(t)||Xde()}function Wde(t){if(Array.isArray(t))return mT(t)}function Kde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qde(t,e){if(t){if(typeof t=="string")return mT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mT(t,e)}}function mT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yde=Object.hasOwnProperty,IM=Object.setPrototypeOf,Jde=Object.isFrozen,Zde=Object.getPrototypeOf,e0e=Object.getOwnPropertyDescriptor,qs=Object.freeze,ho=Object.seal,t0e=Object.create,eW=typeof Reflect<"u"&&Reflect,mb=eW.apply,gT=eW.construct;mb||(mb=function(e,r,n){return e.apply(r,n)});qs||(qs=function(e){return e});ho||(ho=function(e){return e});gT||(gT=function(e,r){return Tv(e,jo(r))});var r0e=fo(Array.prototype.forEach),OM=fo(Array.prototype.pop),om=fo(Array.prototype.push),Av=fo(String.prototype.toLowerCase),q3=fo(String.prototype.toString),RM=fo(String.prototype.match),So=fo(String.prototype.replace),n0e=fo(String.prototype.indexOf),a0e=fo(String.prototype.trim),gs=fo(RegExp.prototype.test),H3=s0e(TypeError);function fo(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return mb(t,e,n)}}function s0e(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return gT(t,r)}}function Sr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:Av,IM&&IM(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var o=r(i);o!==i&&(Jde(e)||(e[a]=o),i=o)}t[i]=!0}return t}function Ad(t){var e=t0e(null),r;for(r in t)mb(Yde,t,[r])===!0&&(e[r]=t[r]);return e}function U1(t,e){for(;t!==null;){var r=e0e(t,e);if(r){if(r.get)return fo(r.get);if(typeof r.value=="function")return fo(r.value)}t=Zde(t)}function n(a){return console.warn("fallback value for",a),null}return n}var MM=qs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),G3=qs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),W3=qs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),i0e=qs(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),K3=qs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),o0e=qs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),DM=qs(["#text"]),PM=qs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Q3=qs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),LM=qs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V1=qs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),l0e=ho(/\{\{[\w\W]*|[\w\W]*\}\}/gm),c0e=ho(/<%[\w\W]*|[\w\W]*%>/gm),u0e=ho(/\${[\w\W]*}/gm),d0e=ho(/^data-[\-\w.\u00B7-\uFFFF]+$/),h0e=ho(/^aria-[\-\w]+$/),f0e=ho(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),p0e=ho(/^(?:\w+script|data):/i),m0e=ho(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),g0e=ho(/^html$/i),x0e=ho(/^[a-z][.\w]*(-[.\w]+)+$/i),y0e=function(){return typeof window>"u"?null:window},v0e=function(e,r){if(yu(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function tW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y0e(),e=function(pe){return tW(pe)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,o=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,x=t.DOMParser,y=t.trustedTypes,S=c.prototype,N=U1(S,"cloneNode"),w=U1(S,"nextSibling"),T=U1(S,"childNodes"),C=U1(S,"parentNode");if(typeof i=="function"){var O=n.createElement("template");O.content&&O.content.ownerDocument&&(n=O.content.ownerDocument)}var L=v0e(y,r),I=L?L.createHTML(""):"",R=n,A=R.implementation,E=R.createNodeIterator,k=R.createDocumentFragment,U=R.getElementsByTagName,P=r.importNode,$={};try{$=Ad(n).documentMode?n.documentMode:{}}catch{}var B={};e.isSupported=typeof C=="function"&&A&&A.createHTMLDocument!==void 0&&$!==9;var G=l0e,K=c0e,H=u0e,ee=d0e,ae=h0e,ce=p0e,fe=m0e,Z=x0e,ne=f0e,Y=null,de=Sr({},[].concat(jo(MM),jo(G3),jo(W3),jo(K3),jo(DM))),ye=null,Ue=Sr({},[].concat(jo(PM),jo(Q3),jo(LM),jo(V1))),Xe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ye=null,_e=null,he=!0,Q=!0,X=!1,Se=!0,Ne=!1,Ke=!0,at=!1,Rt=!1,Pe=!1,lt=!1,Nt=!1,vt=!1,yt=!0,me=!1,We="user-content-",mt=!0,Ze=!1,et={},Et=null,wt=Sr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),pr=null,be=Sr({},["audio","video","img","source","image","track"]),nt=null,jt=Sr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pt="http://www.w3.org/1998/Math/MathML",Bt="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml",ar=tt,Ar=!1,Hr=null,xn=Sr({},[Pt,Bt,tt],q3),_r,Wt=["application/xhtml+xml","text/html"],Vt="text/html",_t,Gr=null,dn=n.createElement("form"),en=function(pe){return pe instanceof RegExp||pe instanceof Function},Wr=function(pe){Gr&&Gr===pe||((!pe||yu(pe)!=="object")&&(pe={}),pe=Ad(pe),_r=Wt.indexOf(pe.PARSER_MEDIA_TYPE)===-1?_r=Vt:_r=pe.PARSER_MEDIA_TYPE,_t=_r==="application/xhtml+xml"?q3:Av,Y="ALLOWED_TAGS"in pe?Sr({},pe.ALLOWED_TAGS,_t):de,ye="ALLOWED_ATTR"in pe?Sr({},pe.ALLOWED_ATTR,_t):Ue,Hr="ALLOWED_NAMESPACES"in pe?Sr({},pe.ALLOWED_NAMESPACES,q3):xn,nt="ADD_URI_SAFE_ATTR"in pe?Sr(Ad(jt),pe.ADD_URI_SAFE_ATTR,_t):jt,pr="ADD_DATA_URI_TAGS"in pe?Sr(Ad(be),pe.ADD_DATA_URI_TAGS,_t):be,Et="FORBID_CONTENTS"in pe?Sr({},pe.FORBID_CONTENTS,_t):wt,Ye="FORBID_TAGS"in pe?Sr({},pe.FORBID_TAGS,_t):{},_e="FORBID_ATTR"in pe?Sr({},pe.FORBID_ATTR,_t):{},et="USE_PROFILES"in pe?pe.USE_PROFILES:!1,he=pe.ALLOW_ARIA_ATTR!==!1,Q=pe.ALLOW_DATA_ATTR!==!1,X=pe.ALLOW_UNKNOWN_PROTOCOLS||!1,Se=pe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ne=pe.SAFE_FOR_TEMPLATES||!1,Ke=pe.SAFE_FOR_XML!==!1,at=pe.WHOLE_DOCUMENT||!1,lt=pe.RETURN_DOM||!1,Nt=pe.RETURN_DOM_FRAGMENT||!1,vt=pe.RETURN_TRUSTED_TYPE||!1,Pe=pe.FORCE_BODY||!1,yt=pe.SANITIZE_DOM!==!1,me=pe.SANITIZE_NAMED_PROPS||!1,mt=pe.KEEP_CONTENT!==!1,Ze=pe.IN_PLACE||!1,ne=pe.ALLOWED_URI_REGEXP||ne,ar=pe.NAMESPACE||tt,Xe=pe.CUSTOM_ELEMENT_HANDLING||{},pe.CUSTOM_ELEMENT_HANDLING&&en(pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Xe.tagNameCheck=pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&en(pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Xe.attributeNameCheck=pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&typeof pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Xe.allowCustomizedBuiltInElements=pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(Q=!1),Nt&&(lt=!0),et&&(Y=Sr({},jo(DM)),ye=[],et.html===!0&&(Sr(Y,MM),Sr(ye,PM)),et.svg===!0&&(Sr(Y,G3),Sr(ye,Q3),Sr(ye,V1)),et.svgFilters===!0&&(Sr(Y,W3),Sr(ye,Q3),Sr(ye,V1)),et.mathMl===!0&&(Sr(Y,K3),Sr(ye,LM),Sr(ye,V1))),pe.ADD_TAGS&&(Y===de&&(Y=Ad(Y)),Sr(Y,pe.ADD_TAGS,_t)),pe.ADD_ATTR&&(ye===Ue&&(ye=Ad(ye)),Sr(ye,pe.ADD_ATTR,_t)),pe.ADD_URI_SAFE_ATTR&&Sr(nt,pe.ADD_URI_SAFE_ATTR,_t),pe.FORBID_CONTENTS&&(Et===wt&&(Et=Ad(Et)),Sr(Et,pe.FORBID_CONTENTS,_t)),mt&&(Y["#text"]=!0),at&&Sr(Y,["html","head","body"]),Y.table&&(Sr(Y,["tbody"]),delete Ye.tbody),qs&&qs(pe),Gr=pe)},yn=Sr({},["mi","mo","mn","ms","mtext"]),hr=Sr({},["annotation-xml"]),Sa=Sr({},["title","style","font","a","script"]),vn=Sr({},G3);Sr(vn,W3),Sr(vn,i0e);var Dn=Sr({},K3);Sr(Dn,o0e);var cs=function(pe){var rt=C(pe);(!rt||!rt.tagName)&&(rt={namespaceURI:ar,tagName:"template"});var dt=Av(pe.tagName),Yt=Av(rt.tagName);return Hr[pe.namespaceURI]?pe.namespaceURI===Bt?rt.namespaceURI===tt?dt==="svg":rt.namespaceURI===Pt?dt==="svg"&&(Yt==="annotation-xml"||yn[Yt]):!!vn[dt]:pe.namespaceURI===Pt?rt.namespaceURI===tt?dt==="math":rt.namespaceURI===Bt?dt==="math"&&hr[Yt]:!!Dn[dt]:pe.namespaceURI===tt?rt.namespaceURI===Bt&&!hr[Yt]||rt.namespaceURI===Pt&&!yn[Yt]?!1:!Dn[dt]&&(Sa[dt]||!vn[dt]):!!(_r==="application/xhtml+xml"&&Hr[pe.namespaceURI]):!1},Or=function(pe){om(e.removed,{element:pe});try{pe.parentNode.removeChild(pe)}catch{try{pe.outerHTML=I}catch{pe.remove()}}},bn=function(pe,rt){try{om(e.removed,{attribute:rt.getAttributeNode(pe),from:rt})}catch{om(e.removed,{attribute:null,from:rt})}if(rt.removeAttribute(pe),pe==="is"&&!ye[pe])if(lt||Nt)try{Or(rt)}catch{}else try{rt.setAttribute(pe,"")}catch{}},us=function(pe){var rt,dt;if(Pe)pe="<remove></remove>"+pe;else{var Yt=RM(pe,/^[\r\n\t ]+/);dt=Yt&&Yt[0]}_r==="application/xhtml+xml"&&ar===tt&&(pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+pe+"</body></html>");var xr=L?L.createHTML(pe):pe;if(ar===tt)try{rt=new x().parseFromString(xr,_r)}catch{}if(!rt||!rt.documentElement){rt=A.createDocument(ar,"template",null);try{rt.documentElement.innerHTML=Ar?I:xr}catch{}}var hn=rt.body||rt.documentElement;return pe&&dt&&hn.insertBefore(n.createTextNode(dt),hn.childNodes[0]||null),ar===tt?U.call(rt,at?"html":"body")[0]:at?rt.documentElement:hn},Zn=function(pe){return E.call(pe.ownerDocument||pe,pe,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},on=function(pe){return pe instanceof m&&(typeof pe.nodeName!="string"||typeof pe.textContent!="string"||typeof pe.removeChild!="function"||!(pe.attributes instanceof p)||typeof pe.removeAttribute!="function"||typeof pe.setAttribute!="function"||typeof pe.namespaceURI!="string"||typeof pe.insertBefore!="function"||typeof pe.hasChildNodes!="function")},wn=function(pe){return yu(o)==="object"?pe instanceof o:pe&&yu(pe)==="object"&&typeof pe.nodeType=="number"&&typeof pe.nodeName=="string"},kn=function(pe,rt,dt){B[pe]&&r0e(B[pe],function(Yt){Yt.call(e,rt,dt,Gr)})},ds=function(pe){var rt;if(kn("beforeSanitizeElements",pe,null),on(pe)||gs(/[\u0080-\uFFFF]/,pe.nodeName))return Or(pe),!0;var dt=_t(pe.nodeName);if(kn("uponSanitizeElement",pe,{tagName:dt,allowedTags:Y}),pe.hasChildNodes()&&!wn(pe.firstElementChild)&&(!wn(pe.content)||!wn(pe.content.firstElementChild))&&gs(/<[/\w]/g,pe.innerHTML)&&gs(/<[/\w]/g,pe.textContent)||dt==="select"&&gs(/<template/i,pe.innerHTML)||pe.nodeType===7||Ke&&pe.nodeType===8&&gs(/<[/\w]/g,pe.data))return Or(pe),!0;if(!Y[dt]||Ye[dt]){if(!Ye[dt]&&Rs(dt)&&(Xe.tagNameCheck instanceof RegExp&&gs(Xe.tagNameCheck,dt)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(dt)))return!1;if(mt&&!Et[dt]){var Yt=C(pe)||pe.parentNode,xr=T(pe)||pe.childNodes;if(xr&&Yt)for(var hn=xr.length,tn=hn-1;tn>=0;--tn){var Sn=N(xr[tn],!0);Sn.__removalCount=(pe.__removalCount||0)+1,Yt.insertBefore(Sn,w(pe))}}return Or(pe),!0}return pe instanceof c&&!cs(pe)||(dt==="noscript"||dt==="noembed"||dt==="noframes")&&gs(/<\/no(script|embed|frames)/i,pe.innerHTML)?(Or(pe),!0):(Ne&&pe.nodeType===3&&(rt=pe.textContent,rt=So(rt,G," "),rt=So(rt,K," "),rt=So(rt,H," "),pe.textContent!==rt&&(om(e.removed,{element:pe.cloneNode()}),pe.textContent=rt)),kn("afterSanitizeElements",pe,null),!1)},Ja=function(pe,rt,dt){if(yt&&(rt==="id"||rt==="name")&&(dt in n||dt in dn))return!1;if(!(Q&&!_e[rt]&&gs(ee,rt))){if(!(he&&gs(ae,rt))){if(!ye[rt]||_e[rt]){if(!(Rs(pe)&&(Xe.tagNameCheck instanceof RegExp&&gs(Xe.tagNameCheck,pe)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(pe))&&(Xe.attributeNameCheck instanceof RegExp&&gs(Xe.attributeNameCheck,rt)||Xe.attributeNameCheck instanceof Function&&Xe.attributeNameCheck(rt))||rt==="is"&&Xe.allowCustomizedBuiltInElements&&(Xe.tagNameCheck instanceof RegExp&&gs(Xe.tagNameCheck,dt)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(dt))))return!1}else if(!nt[rt]){if(!gs(ne,So(dt,fe,""))){if(!((rt==="src"||rt==="xlink:href"||rt==="href")&&pe!=="script"&&n0e(dt,"data:")===0&&pr[pe])){if(!(X&&!gs(ce,So(dt,fe,"")))){if(dt)return!1}}}}}}return!0},Rs=function(pe){return pe!=="annotation-xml"&&RM(pe,Z)},pi=function(pe){var rt,dt,Yt,xr;kn("beforeSanitizeAttributes",pe,null);var hn=pe.attributes;if(!(!hn||on(pe))){var tn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye};for(xr=hn.length;xr--;){rt=hn[xr];var Sn=rt,Br=Sn.name,$i=Sn.namespaceURI;if(dt=Br==="value"?rt.value:a0e(rt.value),Yt=_t(Br),tn.attrName=Yt,tn.attrValue=dt,tn.keepAttr=!0,tn.forceKeepAttr=void 0,kn("uponSanitizeAttribute",pe,tn),dt=tn.attrValue,!tn.forceKeepAttr&&(bn(Br,pe),!!tn.keepAttr)){if(!Se&&gs(/\/>/i,dt)){bn(Br,pe);continue}Ne&&(dt=So(dt,G," "),dt=So(dt,K," "),dt=So(dt,H," "));var mi=_t(pe.nodeName);if(Ja(mi,Yt,dt)){if(me&&(Yt==="id"||Yt==="name")&&(bn(Br,pe),dt=We+dt),Ke&&gs(/((--!?|])>)|<\/(style|title)/i,dt)){bn(Br,pe);continue}if(L&&yu(y)==="object"&&typeof y.getAttributeType=="function"&&!$i)switch(y.getAttributeType(mi,Yt)){case"TrustedHTML":{dt=L.createHTML(dt);break}case"TrustedScriptURL":{dt=L.createScriptURL(dt);break}}try{$i?pe.setAttributeNS($i,Br,dt):pe.setAttribute(Br,dt),on(pe)?Or(pe):OM(e.removed)}catch{}}}}kn("afterSanitizeAttributes",pe,null)}},Ns=function Tt(pe){var rt,dt=Zn(pe);for(kn("beforeSanitizeShadowDOM",pe,null);rt=dt.nextNode();)kn("uponSanitizeShadowNode",rt,null),ds(rt),pi(rt),rt.content instanceof a&&Tt(rt.content);kn("afterSanitizeShadowDOM",pe,null)};return e.sanitize=function(Tt){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt,dt,Yt,xr,hn;if(Ar=!Tt,Ar&&(Tt="<!-->"),typeof Tt!="string"&&!wn(Tt))if(typeof Tt.toString=="function"){if(Tt=Tt.toString(),typeof Tt!="string")throw H3("dirty is not a string, aborting")}else throw H3("toString is not a function");if(!e.isSupported){if(yu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Tt=="string")return t.toStaticHTML(Tt);if(wn(Tt))return t.toStaticHTML(Tt.outerHTML)}return Tt}if(Rt||Wr(pe),e.removed=[],typeof Tt=="string"&&(Ze=!1),Ze){if(Tt.nodeName){var tn=_t(Tt.nodeName);if(!Y[tn]||Ye[tn])throw H3("root node is forbidden and cannot be sanitized in-place")}}else if(Tt instanceof o)rt=us("<!---->"),dt=rt.ownerDocument.importNode(Tt,!0),dt.nodeType===1&&dt.nodeName==="BODY"||dt.nodeName==="HTML"?rt=dt:rt.appendChild(dt);else{if(!lt&&!Ne&&!at&&Tt.indexOf("<")===-1)return L&&vt?L.createHTML(Tt):Tt;if(rt=us(Tt),!rt)return lt?null:vt?I:""}rt&&Pe&&Or(rt.firstChild);for(var Sn=Zn(Ze?Tt:rt);Yt=Sn.nextNode();)Yt.nodeType===3&&Yt===xr||(ds(Yt),pi(Yt),Yt.content instanceof a&&Ns(Yt.content),xr=Yt);if(xr=null,Ze)return Tt;if(lt){if(Nt)for(hn=k.call(rt.ownerDocument);rt.firstChild;)hn.appendChild(rt.firstChild);else hn=rt;return(ye.shadowroot||ye.shadowrootmod)&&(hn=P.call(r,hn,!0)),hn}var Br=at?rt.outerHTML:rt.innerHTML;return at&&Y["!doctype"]&&rt.ownerDocument&&rt.ownerDocument.doctype&&rt.ownerDocument.doctype.name&&gs(g0e,rt.ownerDocument.doctype.name)&&(Br="<!DOCTYPE "+rt.ownerDocument.doctype.name+`>
`+Br),Ne&&(Br=So(Br,G," "),Br=So(Br,K," "),Br=So(Br,H," ")),L&&vt?L.createHTML(Br):Br},e.setConfig=function(Tt){Wr(Tt),Rt=!0},e.clearConfig=function(){Gr=null,Rt=!1},e.isValidAttribute=function(Tt,pe,rt){Gr||Wr({});var dt=_t(Tt),Yt=_t(pe);return Ja(dt,Yt,rt)},e.addHook=function(Tt,pe){typeof pe=="function"&&(B[Tt]=B[Tt]||[],om(B[Tt],pe))},e.removeHook=function(Tt){if(B[Tt])return OM(B[Tt])},e.removeHooks=function(Tt){B[Tt]&&(B[Tt]=[])},e.removeAllHooks=function(){B={}},e}var rW=tW();const b0e=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i,lessonBlocks:o})=>{const c=_.useRef(Zv()),d=_.useRef(Date.now()),h=_.useRef(t),[p,m]=_.useState(!0),[x,y]=_.useState(0),[S,N]=_.useState(!1),[w,T]=_.useState(null),[C,O]=_.useState(0),[L,I]=_.useState(0),[R,A]=_.useState(!1),[E,k]=_.useState(0),[U,P]=_.useState(!1),$=_.useRef(null),B=_.useRef(null),G=_.useRef(null),K=_.useRef(new Set),H=_.useRef(null),[ee,ae]=_.useState(!1),[ce,fe]=_.useState(""),[Z,ne]=_.useState(0),Y=_.useRef(new Set);_.useEffect(()=>{h.current=t},[t]);const de=_.useCallback(()=>{d.current=Date.now(),p||m(!0)},[p]),ye=_.useCallback(async(Ye,_e)=>{if(!_e||!n||!a||Y.current.has(Ye))return;Y.current.add(Ye),ne(Q=>Q+1),de();const he=15;try{const X=(await eT({assignmentId:a,questionId:`block_${Ye}`,xpAmount:he,classType:i||"Uncategorized"})).data;if(X.awarded){const Se=X.serverXP||he;I(Ne=>Ne+Se),T({text:`+${Se} XP`,type:"success"}),Hn.xpGain(),setTimeout(()=>T(null),2e3)}}catch(Q){console.error("Lesson block XP award failed",Q)}},[n,a,i,de]);_.useEffect(()=>{const Ye=setInterval(()=>{Date.now()-d.current<6e4?(c.current.engagementTime+=1,y(c.current.engagementTime),p||m(!0)):p&&m(!1)},1e3);return()=>clearInterval(Ye)},[p]),_.useEffect(()=>{const Ye=["mousemove","keydown","scroll","click"];return Ye.forEach(_e=>window.addEventListener(_e,de)),()=>Ye.forEach(_e=>window.removeEventListener(_e,de))},[de]),_.useEffect(()=>()=>{h.current(c.current)},[]),_.useEffect(()=>{if(!n||!a)return;const Ye=async _e=>{var Ne,Ke,at,Rt,Pe,lt,Nt,vt,yt,me,We,mt;const he=$.current;if(!he)return;const Q=he.src?new URL(he.src).origin:"";if(_e.origin!==window.location.origin&&_e.origin!==Q)return;const X=_e.origin,Se=_e.data;if(!(!Se||typeof Se!="object"||!((Ne=Se.type)!=null&&Ne.startsWith("portal-"))))switch(de(),Se.type){case"portal-ready":{N(!0);try{const Ze=await ga(ot(Me,"practice_progress",`${n}_${a}`)),et=Ze.exists()?Ze.data():null,Et=(et==null?void 0:et.answeredQuestions)||[];Et.forEach(be=>K.current.add(be)),O(Et.length),et&&(H.current=et,et.completed&&(A(!0),k(et.totalCompletions||1)));const wt=et?{state:et.state||null,currentQuestion:et.currentQuestion??0}:null,pr=et!=null&&et.completed?{completed:!0,completedAt:et.completedAt,bestScore:et.bestScore,totalCompletions:et.totalCompletions||0,lastCompletion:((Ke=et.completionHistory)==null?void 0:Ke.length)>0?et.completionHistory[et.completionHistory.length-1]:null}:null;(at=he.contentWindow)==null||at.postMessage({type:"portal-init",payload:{userId:n,savedState:wt,completionInfo:pr}},X)}catch(Ze){console.error("Bridge: Failed to load saved state",Ze),(Rt=he.contentWindow)==null||Rt.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},X)}break}case"portal-save":{const{state:Ze,currentQuestion:et}=Se.payload||{};if(!Ze)break;try{const Et=H.current,wt={userId:n,assignmentId:a,state:Ze,currentQuestion:et??0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString()};Et!=null&&Et.completed&&(wt.completed=Et.completed,wt.completedAt=Et.completedAt,wt.bestScore=Et.bestScore,wt.totalCompletions=Et.totalCompletions,wt.completionHistory=Et.completionHistory),await ta(ot(Me,"practice_progress",`${n}_${a}`),wt,{merge:!0}),H.current={...H.current,...wt},(Pe=he.contentWindow)==null||Pe.postMessage({type:"portal-save-ok"},X)}catch(Et){console.error("Bridge: Save failed",Et),(lt=he.contentWindow)==null||lt.postMessage({type:"portal-save-error"},X)}break}case"portal-complete":{const{score:Ze,totalQuestions:et,correctAnswers:Et}=Se.payload||{};try{const wt=H.current,pr=new Date().toISOString(),be={completedAt:pr,score:Ze??0,totalQuestions:et??0,correctAnswers:Et??0,answeredQuestions:Array.from(K.current)},nt=[...(wt==null?void 0:wt.completionHistory)||[],be],jt=Math.max((wt==null?void 0:wt.bestScore)||0,Ze||0),Pt=((wt==null?void 0:wt.totalCompletions)||0)+1,Bt={userId:n,assignmentId:a,completed:!0,completedAt:(wt==null?void 0:wt.completedAt)||pr,bestScore:jt,totalCompletions:Pt,completionHistory:nt,answeredQuestions:Array.from(K.current),lastUpdated:pr};wt!=null&&wt.state&&(Bt.state=wt.state,Bt.currentQuestion=wt.currentQuestion),await ta(ot(Me,"practice_progress",`${n}_${a}`),Bt,{merge:!0}),H.current={...H.current,...Bt},A(!0),k(Pt),Hn.xpGain(),T({text:"Module Complete!",type:"success"}),setTimeout(()=>T(null),3e3),(Nt=he.contentWindow)==null||Nt.postMessage({type:"portal-complete-ok",payload:{totalCompletions:Pt,bestScore:jt}},X)}catch(wt){console.error("Bridge: Completion save failed",wt),(vt=he.contentWindow)==null||vt.postMessage({type:"portal-complete-error"},X)}break}case"portal-replay":{try{const Ze=H.current,et={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(Ze==null?void 0:Ze.completed)||!1,completedAt:(Ze==null?void 0:Ze.completedAt)||null,bestScore:(Ze==null?void 0:Ze.bestScore)||null,totalCompletions:(Ze==null?void 0:Ze.totalCompletions)||0,completionHistory:(Ze==null?void 0:Ze.completionHistory)||[]};await ta(ot(Me,"practice_progress",`${n}_${a}`),et,{merge:!0}),H.current=et,P(!1),(yt=he.contentWindow)==null||yt.postMessage({type:"portal-reset-ok"},X)}catch(Ze){console.error("Bridge: Replay reset failed",Ze)}break}case"portal-answer":{const{questionId:Ze,correct:et,attempts:Et}=Se.payload||{};if(!Ze)break;if(et&&!K.current.has(Ze)){K.current.add(Ze),O(pr=>pr+1);const wt=Et===1?15:10;try{const be=(await eT({assignmentId:a,questionId:Ze,xpAmount:wt,classType:i||"Uncategorized"})).data;if(be.awarded){const nt=be.serverXP||wt;I(jt=>jt+nt),T({text:`+${nt} XP`,type:"success"}),Hn.xpGain(),setTimeout(()=>T(null),2e3)}(me=he.contentWindow)==null||me.postMessage({type:"portal-xp-result",payload:{questionId:Ze,awarded:be.awarded,xp:be.serverXP||wt}},X)}catch(pr){console.error("Bridge: XP award failed",pr),(We=he.contentWindow)==null||We.postMessage({type:"portal-xp-result",payload:{questionId:Ze,awarded:!1,xp:0}},X)}}else et&&((mt=he.contentWindow)==null||mt.postMessage({type:"portal-xp-result",payload:{questionId:Ze,awarded:!1,xp:0}},X));break}}};return window.addEventListener("message",Ye),()=>window.removeEventListener("message",Ye)},[n,a,i,de]);const Ue=_.useCallback(()=>{const Ye=$.current;if(!Ye||!n||!a)return;const he=(Ye.src?new URL(Ye.src).origin:"")||window.location.origin;(async()=>{var Q;try{const X=H.current,Se={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(X==null?void 0:X.completed)||!1,completedAt:(X==null?void 0:X.completedAt)||null,bestScore:(X==null?void 0:X.bestScore)||null,totalCompletions:(X==null?void 0:X.totalCompletions)||0,completionHistory:(X==null?void 0:X.completionHistory)||[]};await ta(ot(Me,"practice_progress",`${n}_${a}`),Se,{merge:!0}),H.current=Se,P(!1),(Q=Ye.contentWindow)==null||Q.postMessage({type:"portal-reset-ok"},he)}catch(X){console.error("Replay reset failed",X)}})()},[n,a]),Xe=_.useCallback(()=>{const Ye=G.current;Ye&&(document.fullscreenElement?document.exitFullscreen():Ye.requestFullscreen().catch(()=>{ae(_e=>!_e)}))},[]);return _.useEffect(()=>{const Ye=()=>ae(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",Ye),()=>document.removeEventListener("fullscreenchange",Ye)},[]),_.useEffect(()=>{if(B.current&&r){const Ye=r.replace(/\$(.*?)\$/g,(_e,he)=>{try{return pb.renderToString(he,{throwOnError:!1})}catch{return he}});B.current.innerHTML=rW.sanitize(Ye,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]}),fe(B.current.textContent||"")}},[r]),s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?s.jsx(g8,{className:"w-4 h-4"}):s.jsx(lo,{className:"w-4 h-4 animate-pulse"}),p?"Active Session":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(x/60),"m ",x%60,"s"]}),S&&C>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[s.jsx(zr,{className:"w-3 h-3"})," ",C," answered"]}),!S&&Z>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-indigo-300 bg-indigo-500/10 px-3 py-1 rounded-full border border-indigo-500/20",children:[s.jsx(zr,{className:"w-3 h-3"})," ",Z," blocks completed"]}),S&&L>0&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[s.jsx($n,{className:"w-3 h-3"})," ",L," XP"]}),R&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[s.jsx(cl,{className:"w-3 h-3"}),"Completed",E>1?` (${E}x)`:""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(r||ce)&&s.jsx(QR,{textContent:ce,compact:!0}),R&&S&&(U?s.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[s.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),s.jsx("button",{onClick:Ue,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),s.jsx("button",{onClick:()=>P(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[s.jsx(Wle,{className:"w-3 h-3"})," Replay"]})),e&&s.jsxs("button",{onClick:Xe,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:ee?"Exit full screen (Esc)":"Full screen",children:[ee?s.jsx(WH,{className:"w-3 h-3"}):s.jsx(rT,{className:"w-3 h-3"}),ee?"Exit Full Screen":"Full Screen"]}),S&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[s.jsx($n,{className:"w-3 h-3"})," XP Linked"]}),!p&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Li,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),w&&s.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${w.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[w.type==="success"?s.jsx(zr,{className:"w-4 h-4"}):s.jsx(oo,{className:"w-4 h-4"}),w.text]})}),s.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{ref:G,className:`flex flex-col bg-white relative ${o&&o.length>0?"flex-[3]":"flex-1"}`,children:[s.jsx("iframe",{ref:$,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:de}),s.jsx(Nce,{containerRef:G})]}),o&&o.length>0&&s.jsx("div",{className:"flex-[2] bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:s.jsx(lb,{blocks:o,onBlockComplete:ye,showSidebar:!0,engagementTime:x,xpEarned:L})})]}):o&&o.length>0?s.jsx("div",{className:"flex-1 bg-[#0f0720]/95 overflow-y-auto p-6 text-gray-300 custom-scrollbar",children:s.jsx(lb,{blocks:o,onBlockComplete:ye,showSidebar:!0,engagementTime:x,xpEarned:L})}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Uu,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),s.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&s.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-white font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(rT,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),ce&&s.jsx(QR,{textContent:ce})]}),s.jsx("div",{ref:B,className:"proctor-content text-sm leading-relaxed"})]})]})]})},w0e=()=>{const[t,e]=_.useState(!1),[r,n]=_.useState(null),a=async()=>{e(!0),n(null);try{await Gte(Z_,Loe)}catch(o){console.error("Login Error:",o),n(o instanceof Error?o.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Li,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"break-words",children:[s.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[s.jsx(Cle,{className:"w-4 h-4"}),"Action Required:"]}),s.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",s.jsx("code",{children:"lib/firebase.ts"})," and replace",s.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),s.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),s.jsx("span",{children:"Sign in with Google"})]})}),s.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),s.jsx("span",{children:""}),s.jsx("span",{children:"Firebase Auth"})]})]})})]})},nW=_.createContext(null),Po=()=>{const t=_.useContext(nW);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},S0e=({children:t})=>{const[e,r]=_.useState({isOpen:!1,options:{message:""}}),n=_.useRef(null),a=_.useRef(null),i=_.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),o=_.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=_.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);_.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),_.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&o()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,o]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return s.jsxs(nW.Provider,{value:{confirm:i},children:[t,e.isOpen&&s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),s.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:s.jsx(Li,{className:"w-5 h-5"})}),s.jsxs("div",{children:[e.options.title&&s.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),s.jsx("button",{ref:a,onClick:o,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),s.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},bg=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=o=>{e.includes(o)?r(e.filter(c=>c!==o)):r([...e,o])};return s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(o=>s.jsx("button",{type:"button",onClick:()=>i(o),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(o)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:o},o))]})]})},BM={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:s.jsx(kx,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:s.jsx(Li,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:s.jsx(Fle,{className:"w-4 h-4"})}},N0e=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=Po(),a=Pa(),[i,o]=_.useState(!1),[c,d]=_.useState(""),[h,p]=_.useState(""),[m,x]=_.useState("INFO"),[y,S]=_.useState("GLOBAL"),[N,w]=_.useState([]),T=async()=>{if(!(!c.trim()||!h.trim()))try{await De.createAnnouncement({title:c.trim(),content:h.trim(),classType:y,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...N.length>0?{targetSections:N}:{}}),await De.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),w([]),o(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},C=async O=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await De.deleteAnnouncement(O)};return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(nb,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Tr,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(nb,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):s.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(O=>{var I;const L=BM[O.priority]||BM.INFO;return s.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:O.title}),s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:O.content}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[O.classType==="GLOBAL"?"All Classes":O.classType,(I=O.targetSections)!=null&&I.length?`  ${O.targetSections.join(", ")}`:"","  ",new Date(O.createdAt).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>C(O.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},O.id)})}),s.jsx(Is,{isOpen:i,onClose:()=>o(!1),title:"New Announcement",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:O=>d(O.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),s.jsx("textarea",{value:h,onChange:O=>p(O.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),s.jsxs("select",{value:m,onChange:O=>x(O.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"INFO",children:"Info"}),s.jsx("option",{value:"WARNING",children:"Warning"}),s.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),s.jsxs("select",{value:y,onChange:O=>S(O.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Dr).filter(O=>O!=="Uncategorized").map(O=>s.jsx("option",{value:O,children:O},O))]})]})]}),s.jsx(bg,{availableSections:r,selectedSections:N,onChange:w}),s.jsx("button",{onClick:T,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},F8=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],q8=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],j0e=t=>q8.filter(e=>!e.isSecret||t.includes(e.id)),F1={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},aW=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],$M=(t,e)=>{const r=aW.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},_0e=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],H8=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of _0e){const a=n.itemIds.filter(o=>r.includes(o)).length,i=n.bonuses.filter(o=>a>=o.count).sort((o,c)=>c.count-o.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},T0e=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],zM=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],sW=t=>[...zM].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||zM[0],iW=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,UM=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],A0e=["I","II","III","IV","V"],E0e=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},m0=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,UM.length-1),a=UM[n]||"Unknownium",i=A0e[r],o=n+1,c=E0e(o);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},ei={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},C0e={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},VM=(t,e,r)=>{const n=ei.UNSOCKET_BASE,a=C0e[t],i=Math.max(1,e),o=1+r;return Math.ceil(n*a*i*o)},FM=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},G8=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},W8=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([o,c])=>{e[o]+=c})}),e},g0=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let o=0;switch(n.rarity){case"COMMON":o=0;break;case"UNCOMMON":o=10;break;case"RARE":o=30;break;case"UNIQUE":o=60;break}e+=i*10+o}),Math.floor(e))},k0e=t=>{if(!t)return{};const e=Object.values(t).filter(Boolean),r=H8(e),n={};return r.forEach(({activeBonus:a})=>{a.effects.forEach(i=>{n[i.stat]=(n[i.stat]||0)+i.value})}),n},I0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{(n.gems||[]).forEach(a=>{e[a.stat]=(e[a.stat]||0)+a.value})}),e},O0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{if(!n.runewordActive)return;const a=F8.find(i=>i.id===n.runewordActive);if(a)for(const[i,o]of Object.entries(a.bonusStats))e[i]=(e[i]||0)+o}),e},qM=t=>t.runewordActive&&F8.find(e=>e.id===t.runewordActive)||null,ma=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Hu(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const R0e=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var I,R,A,E,k,U,P,$,B,G;const[i,o]=_.useState(!1),c=((I=t.gamification)==null?void 0:I.level)||1,d=((R=t.gamification)==null?void 0:R.xp)||0,h=((A=t.gamification)==null?void 0:A.currency)||0,p=m0(c),m=W8(t),x=t.enrolledClasses||(t.classType?[t.classType]:[]),y=((k=(E=t.gamification)==null?void 0:E.completedQuests)==null?void 0:k.length)||0,S=((P=(U=t.gamification)==null?void 0:U.activeQuests)==null?void 0:P.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").length)||0,N=_.useMemo(()=>x.map(K=>{var ne,Y;const H=((Y=(ne=t.gamification)==null?void 0:ne.classXp)==null?void 0:Y[K])||0,ee=Hu(t,K),ae=g0(ee.equipped),ce=ee.inventory.length,fe=e.filter(de=>{const ye=r.find(Ue=>Ue.id===de.assignmentId);return(ye==null?void 0:ye.classType)===K}),Z=Math.round(fe.reduce((de,ye)=>{var Ue;return de+(((Ue=ye.metrics)==null?void 0:Ue.engagementTime)||0)},0)/60);return{cls:K,classXp:H,gearScore:ae,inventoryCount:ce,resourcesViewed:fe.length,totalTime:Z}}),[t,e,r,x]),w=_.useMemo(()=>{const K=new Map;return e.forEach(H=>{var Z,ne,Y,de,ye,Ue,Xe;const ee=r.find(Ye=>Ye.id===H.assignmentId),ae=H.assignmentId,ce=K.get(ae),fe=((Z=H.metrics)==null?void 0:Z.engagementTime)||0;ce?(ce.visits++,ce.totalTime+=fe,ce.totalKeystrokes+=((ne=H.metrics)==null?void 0:ne.keystrokes)||0,ce.totalClicks+=((Y=H.metrics)==null?void 0:Y.clickCount)||0,ce.totalPastes+=((de=H.metrics)==null?void 0:de.pasteCount)||0,ce.statuses.push(H.status),H.submittedAt&&(!ce.lastVisit||H.submittedAt>ce.lastVisit)&&(ce.lastVisit=H.submittedAt)):K.set(ae,{title:(ee==null?void 0:ee.title)||H.assignmentTitle,classType:(ee==null?void 0:ee.classType)||"Unknown",category:(ee==null?void 0:ee.category)||"Supplemental",visits:1,totalTime:fe,totalKeystrokes:((ye=H.metrics)==null?void 0:ye.keystrokes)||0,totalClicks:((Ue=H.metrics)==null?void 0:Ue.clickCount)||0,totalPastes:((Xe=H.metrics)==null?void 0:Xe.pasteCount)||0,lastVisit:H.submittedAt||null,statuses:[H.status]})}),Array.from(K.values()).sort((H,ee)=>ee.totalTime-H.totalTime)},[e,r]),T=_.useMemo(()=>e.filter(K=>K.submittedAt).sort((K,H)=>new Date(H.submittedAt).getTime()-new Date(K.submittedAt).getTime()).slice(0,10).map(K=>{var H,ee;return{...K,assignmentTitle:((H=r.find(ae=>ae.id===K.assignmentId))==null?void 0:H.title)||K.assignmentTitle,classType:((ee=r.find(ae=>ae.id===K.assignmentId))==null?void 0:ee.classType)||"Unknown"}}),[e,r]),C=Math.round(e.reduce((K,H)=>{var ee;return K+(((ee=H.metrics)==null?void 0:ee.engagementTime)||0)},0)/60),O=_.useMemo(()=>{const K=new Set;e.forEach(Z=>{if(Z.submittedAt){const ne=new Date(Z.submittedAt),Y=ne.getFullYear(),de=new Date(Y,0,1),ye=Math.ceil(((ne.getTime()-de.getTime())/864e5+de.getDay()+1)/7);K.add(`${Y}-W${ye}`)}});const H=new Date,ee=H.getFullYear(),ae=new Date(ee,0,1),ce=Math.ceil(((H.getTime()-ae.getTime())/864e5+ae.getDay()+1)/7);let fe=0;for(let Z=ce;Z>0&&K.has(`${ee}-W${Z}`);Z--)fe++;return fe},[e]),L=_.useMemo(()=>{const K=[],H=new Date;for(let Y=6;Y>=0;Y--){const de=new Date(H);de.setDate(de.getDate()-Y);const ye=de.toISOString().split("T")[0],Ue=e.filter(Ye=>{var _e;return(_e=Ye.submittedAt)==null?void 0:_e.startsWith(ye)}),Xe=Ue.reduce((Ye,_e)=>{var he;return Ye+(((he=_e.metrics)==null?void 0:he.engagementTime)||0)},0);K.push({label:de.toLocaleDateString([],{weekday:"short"}),time:Math.round(Xe/60),subs:Ue.length})}const ee=K.slice(4).reduce((Y,de)=>Y+de.time,0),ae=K.slice(0,4).reduce((Y,de)=>Y+de.time,0),ce=ee/3,fe=ae/4,Z=ce>fe*1.2?"up":ce<fe*.6?"down":"flat",ne=Math.max(1,...K.map(Y=>Y.time));return{days:K,trend:Z,maxTime:ne}},[e]);return wu.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),s.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:s.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?s.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):s.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),(($=t.gamification)==null?void 0:$.codename)&&s.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),s.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:s.jsx(Xn,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx($n,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(lo,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[C,"m"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Ga,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Ru,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:y}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(nT,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:h}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Mu,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[O,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),s.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([K,H])=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:K}),s.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,H)}%`}})}),s.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:H})]},K))})]}),n.length>0&&(()=>{const K=n[0],H=Wo[K.bucket];return H?s.jsxs("div",{className:`border rounded-2xl p-4 ${H.borderColor} ${H.bgColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${H.color} border ${H.borderColor}`,children:H.label})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-3",children:H.description}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[s.jsxs("span",{children:["ES: ",K.engagementScore]}),s.jsxs("span",{children:["Subs: ",K.metrics.submissionCount]}),s.jsxs("span",{children:["Days Active: ",K.metrics.activityDays,"/7"]}),s.jsxs("span",{children:["Paste Ratio: ",Math.round(K.metrics.avgPasteRatio*100),"%"]}),s.jsxs("span",{children:["Time: ",Math.round(K.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[s.jsx(GH,{className:"w-3.5 h-3.5 text-amber-400"}),s.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:K.recommendation.action}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:K.recommendation.categories.map(ee=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:ee},ee))})]}),(()=>{const ee=r.filter(ae=>ae.classType===K.classType&&ae.status==="ACTIVE"&&K.recommendation.categories.includes(ae.category||"Supplemental")).slice(0,3);return ee.length===0?null:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),s.jsx("div",{className:"space-y-1",children:ee.map(ae=>s.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:ae.category}),s.jsx("span",{className:"text-white truncate",children:ae.title})]},ae.id))})]})})()]}):null})(),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),s.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&s.jsx(sw,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&s.jsx(Jle,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&s.jsx(Ix,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((K,H)=>{const ee=L.maxTime>0?Math.max(2,K.time/L.maxTime*100):2,ae=H===L.days.length-1;return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[s.jsx("div",{className:`w-full rounded-t transition-all ${K.time>0?ae?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${ee}%`}}),s.jsx("span",{className:"text-[8px] text-gray-500",children:K.label}),s.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[K.time,"m  ",K.subs," sub",K.subs!==1?"s":""]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),s.jsx("div",{className:"space-y-3",children:N.map(K=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:K.cls}),s.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[K.classXp.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[s.jsxs("span",{children:[s.jsx(ui,{className:"w-3 h-3 inline mr-0.5"}),K.gearScore," GS"]}),s.jsxs("span",{children:[s.jsx(nT,{className:"w-3 h-3 inline mr-0.5"}),K.inventoryCount," items"]}),s.jsxs("span",{children:[s.jsx(Ga,{className:"w-3 h-3 inline mr-0.5"}),K.resourcesViewed," viewed"]}),s.jsxs("span",{children:[s.jsx(lo,{className:"w-3 h-3 inline mr-0.5"}),K.totalTime,"m"]})]})]},K.cls))})]}),w.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center justify-between w-full mb-1",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[s.jsx(C0,{className:"w-3.5 h-3.5"})," Resource Performance",s.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",w.length,")"]})]}),i?s.jsx(Wf,{className:"w-4 h-4 text-gray-500"}):s.jsx(Wa,{className:"w-4 h-4 text-gray-500"})]}),i&&s.jsx("div",{className:"space-y-2 mt-3",children:w.map((K,H)=>{const ee=Math.round(K.totalTime/60),ae=K.totalKeystrokes>20&&K.totalClicks>5?"high":K.totalClicks>2?"medium":"low",ce=ae==="high"?"text-green-400":ae==="medium"?"text-yellow-400":"text-red-400",fe=ae==="high"?"bg-green-500":ae==="medium"?"bg-yellow-500":"bg-red-500";return s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.title}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[K.classType,"  ",K.category]})]}),s.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${fe}`,title:`${ae} engagement`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Time"}),s.jsxs("div",{className:"text-white font-bold",children:[ee,"m"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Visits"}),s.jsx("div",{className:"text-white font-bold",children:K.visits})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Keys"}),s.jsx("div",{className:"text-white font-bold",children:K.totalKeystrokes})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Quality"}),s.jsx("div",{className:`font-bold capitalize ${ce}`,children:ae})]})]}),K.lastVisit&&s.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(K.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),T.length===0?s.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):s.jsx("div",{className:"space-y-2",children:T.map(K=>{var ee;const H=Math.round((((ee=K.metrics)==null?void 0:ee.engagementTime)||0)/60);return s.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H>=5?"bg-green-500":H>=1?"bg-yellow-500":"bg-gray-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.assignmentTitle}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[K.classType,"  ",H,"m engaged"]})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:K.submittedAt?new Date(K.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},K.id)})})]}),S>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),s.jsx("div",{className:"space-y-2",children:(G=(B=t.gamification)==null?void 0:B.activeQuests)==null?void 0:G.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").map(K=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ru,{className:`w-3.5 h-3.5 ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),s.jsx("span",{className:"text-xs text-white",children:K.questId})]}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:K.status})]},K.questId))})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[s.jsxs("div",{children:["Email: ",t.email]}),s.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),s.jsxs("div",{children:["Enrolled: ",x.join(", ")||"None"]}),s.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),s.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&s.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},M0e=({students:t,isOpen:e,onClose:r})=>{const n=Pa(),[a,i]=_.useState(""),[o,c]=_.useState(null),[d,h]=_.useState(!1),p=iZ,m=_.useMemo(()=>a?t.filter(y=>y.name.toLowerCase().includes(a.toLowerCase())).slice(0,20):t.slice(0,20),[t,a]),x=async y=>{if(o){h(!0);try{await De.awardBehavior({studentId:o.id,studentName:o.name,categoryId:y.id,categoryName:y.name,xpAmount:y.xpAmount,fluxAmount:y.fluxAmount,classType:o.classType||"AP Physics",awardedBy:"admin",timestamp:new Date().toISOString()}),n.success(`${y.icon} +${y.xpAmount} XP awarded to ${o.name} for ${y.name}!`),c(null),i("")}catch{n.error("Failed to award.")}finally{h(!1)}}};return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:r,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl animate-in fade-in zoom-in-95 duration-300",onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Z2,{className:"w-5 h-5 text-amber-400"})," Quick Award"]}),s.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Xn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-5",children:o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-5 p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.avatarUrl?s.jsx("img",{src:o.avatarUrl,alt:"",className:"w-10 h-10 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-sm font-bold text-purple-400",children:o.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:o.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:o.classType})]}),s.jsx("button",{onClick:()=>c(null),className:"text-xs text-gray-500 hover:text-white transition",children:"Change"})]}),s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-3",children:"Select Behavior"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(y=>s.jsxs("button",{onClick:()=>x(y),disabled:d,className:`p-4 rounded-xl border text-left transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-40 bg-${y.color}-500/5 border-${y.color}-500/20 hover:border-${y.color}-500/40 hover:bg-${y.color}-500/10`,children:[s.jsx("div",{className:"text-2xl mb-1",children:y.icon}),s.jsx("div",{className:"text-sm font-bold text-white",children:y.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] text-purple-400 font-bold flex items-center gap-0.5",children:[s.jsx($n,{className:"w-2.5 h-2.5"}),y.xpAmount," XP"]}),s.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxAmount," Flux"]})]})]},y.id))})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Kf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search for a student...",value:a,onChange:y=>i(y.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 transition",autoFocus:!0})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar space-y-1",children:m.map(y=>s.jsxs("button",{onClick:()=>c(y),className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-left hover:bg-white/5 transition group",children:[y.avatarUrl?s.jsx("img",{src:y.avatarUrl,alt:"",className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs font-bold text-purple-400",children:y.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-white group-hover:text-amber-300 transition",children:y.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:y.classType})]})]},y.id))})]})})]})]}):null},D0e=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=Po(),[a,i]=_.useState(null),[o,c]=_.useState([]),[d,h]=_.useState([]),[p,m]=_.useState([]),[x,y]=_.useState([]),[S,N]=_.useState(Date.now()),[w,T]=_.useState(null),[C,O]=_.useState("xp"),[L,I]=_.useState("desc"),[R,A]=_.useState(""),[E,k]=_.useState(""),[U,P]=_.useState(!1),$=Q=>{C===Q?I(X=>X==="asc"?"desc":"asc"):(O(Q),I("asc"))},B=({label:Q,col:X,className:Se})=>s.jsx("th",{className:`cursor-pointer select-none group p-3 ${Se??""}`,onClick:()=>$(X),children:s.jsxs("div",{className:`flex items-center gap-1 ${Se!=null&&Se.includes("text-center")?"justify-center":Se!=null&&Se.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:Q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Wf,{className:`w-2.5 h-2.5 -mb-0.5 ${C===X&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Wa,{className:`w-2.5 h-2.5 -mt-0.5 ${C===X&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});_.useEffect(()=>{const Q=De.subscribeToChatFlags(c),X=De.subscribeToAnnouncements(h),Se=De.subscribeToStudentAlerts(m),Ne=De.subscribeToStudentBuckets(y),Ke=setInterval(()=>N(Date.now()),6e4);return()=>{Q(),X(),Se(),Ne(),clearInterval(Ke)}},[]);const G=t.filter(Q=>Q.role==="STUDENT"),K=_.useMemo(()=>{const Q=new Set;return G.forEach(X=>{X.section&&Q.add(X.section)}),Array.from(Q).sort()},[G]),H=_.useMemo(()=>{const Q=new Map;for(const X of p){const Se=Q.get(X.studentId),Ne={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!Se||(Ne[X.riskLevel]||0)>(Ne[Se.riskLevel]||0))&&Q.set(X.studentId,X)}return Q},[p]),ee=_.useMemo(()=>{const Q=new Map;for(const X of x)Q.has(X.studentId)||Q.set(X.studentId,X);return Q},[x]),ae=_.useMemo(()=>{const Q={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},X=new Set;for(const Se of x)X.has(Se.studentId)||(X.add(Se.studentId),Q[Se.bucket]!==void 0&&Q[Se.bucket]++);return Q},[x]),ce=G.length,fe=Math.round(G.reduce((Q,X)=>{var Se;return Q+(((Se=X.stats)==null?void 0:Se.totalTime)||0)},0)/(ce||1)),Z=G.reduce((Q,X)=>{var Se;return Q+(((Se=X.stats)==null?void 0:Se.problemsCompleted)||0)},0),ne=G.reduce((Q,X)=>{var Se;return Q+(((Se=X.gamification)==null?void 0:Se.xp)||0)},0),Y=G.filter(Q=>Q.mutedUntil&&new Date(Q.mutedUntil).getTime()>S),de=async Q=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await De.muteUser(Q,0)},ye=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:De.INDEFINITE_MUTE}],Ue=async(Q,X)=>{await De.muteUser(Q,X),T(null)},Xe=async(Q,X)=>{const Se=new Date(X).getTime(),Ne=new Date(Math.max(Se,Date.now())+3600*1e3),Ke=Math.ceil((Ne.getTime()-Date.now())/6e4);await De.muteUser(Q,Ke)},Ye=({label:Q,value:X,icon:Se,color:Ne})=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[s.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${Ne}`,children:Se}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:X}),s.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:Q})]}),s.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${Ne}`})]}),_e=Q=>{const Se=new Date(Q).getTime()-S;if(Se<=0)return"Expired";const Ne=Math.ceil(Se/6e4);return Ne>60?`${Math.ceil(Ne/60)} hrs`:`${Ne} mins`},he=Q=>{if(!Q)return"Never";const X=new Date(Q),Se=Date.now()-X.getTime(),Ne=Math.floor(Se/6e4);if(Ne<1)return"Just now";if(Ne<60)return`${Ne}m ago`;const Ke=Math.floor(Ne/60);return Ke<24?`${Ke}h ago`:X.toLocaleDateString()};return s.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),s.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Ye,{label:"Total Students",value:ce,icon:s.jsx(di,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),s.jsx(Ye,{label:"Total XP Awarded",value:ne.toLocaleString(),icon:s.jsx($n,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),s.jsx(Ye,{label:"Resources Viewed",value:Z,icon:s.jsx(h0,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),s.jsx(Ye,{label:"Avg Active Time",value:`${fe}m`,icon:s.jsx(lo,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${o.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${o.length>0?"text-red-400":"text-white"}`,children:[o.length>0?s.jsx(Li,{className:"w-5 h-5"}):s.jsx(aw,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${o.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:o.length>0?`${o.length} Issues`:"Secure"})]}),o.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(u0,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:o.map(Q=>s.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-white",children:[Q.senderName," ",s.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",Q.classType]})]}),s.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',Q.content,'"']})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(Q.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:async()=>{await De.resolveFlag(Q.id),Q.messageId&&await De.unflagMessage(Q.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(ec,{className:"w-3 h-3"})," Dismiss"]}),s.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await De.resolveFlag(Q.id),Q.messageId&&await De.deleteMessage(Q.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(gr,{className:"w-3 h-3"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>T(w===Q.id?null:Q.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:s.jsx(ab,{className:"w-3 h-3"})}),w===Q.id&&s.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",Q.senderName]}),ye.map(X=>s.jsx("button",{onClick:()=>Ue(Q.senderId,X.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:X.label},X.minutes))]})]})]})]},Q.id))})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(ab,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),Y.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(di,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[s.jsx("th",{className:"pb-2",children:"Operative"}),s.jsx("th",{className:"pb-2",children:"Remaining"}),s.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Y.map(Q=>s.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[s.jsxs("td",{className:"py-3",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:Q.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:Q.classType})]}),s.jsx("td",{className:"py-3",children:s.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:_e(Q.mutedUntil)})}),s.jsx("td",{className:"py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Xe(Q.id,Q.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:s.jsx(ib,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>de(Q.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:s.jsx(u0,{className:"w-3.5 h-3.5"})})]})})]},Q.id))})]})})]})]}),p.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(tT,{className:"w-5 h-5"}),"Early Warning System"]}),s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(Q=>{const X={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},Se={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},Ne=Q.bucket?Wo[Q.bucket]:null;return s.jsx("div",{className:`border p-4 rounded-xl ${X[Q.riskLevel]||X.LOW}`,children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${Se[Q.riskLevel]||Se.LOW}`,children:Q.riskLevel}),Ne&&s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${Ne.bgColor} ${Ne.color} ${Ne.borderColor} border`,children:Ne.label}),s.jsx("span",{className:"text-sm font-bold text-white truncate",children:Q.studentName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:Q.classType})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:Q.message}),Ne&&s.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:Ne.description}),s.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["ES: ",Q.engagementScore]}),s.jsxs("span",{children:["Class Avg: ",Q.classMean]}),s.jsx("span",{children:new Date(Q.createdAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{onClick:()=>i(Q.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),s.jsx("button",{onClick:async()=>{await De.dismissAlert(Q.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},Q.id)})})]}),x.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(tT,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),s.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[x.length," profile",x.length!==1?"s":""," across classes"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(Wo).map(Q=>{const X=Wo[Q],Se=ae[Q];return s.jsxs("div",{className:`border rounded-xl p-3 ${X.borderColor} ${X.bgColor} transition hover:scale-[1.02]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:`text-xs font-bold ${X.color}`,children:X.label}),s.jsx("span",{className:"text-lg font-bold text-white",children:Se})]}),s.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:X.description})]},Q)})}),(()=>{const Q=Object.values(ae).reduce((X,Se)=>X+Se,0);return Q===0?null:s.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(Wo).map(X=>{const Se=ae[X]/Q*100;if(Se===0)return null;const Ne={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return s.jsx("div",{className:`${Ne[X]||"bg-gray-500"} transition-all`,style:{width:`${Se}%`},title:`${Wo[X].label}: ${ae[X]} (${Math.round(Se)}%)`},X)})})})()]}),s.jsx("div",{className:"mt-8",children:s.jsx(N0e,{announcements:d,studentIds:G.map(Q=>Q.id),availableSections:K})}),s.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Student Engagement Ranking"}),s.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Z2,{className:"w-3.5 h-3.5"})," Quick Award"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Kf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:R,onChange:Q=>A(Q.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("select",{value:E,onChange:Q=>k(Q.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{value:"",children:"All Buckets"}),Object.keys(Wo).map(Q=>s.jsx("option",{value:Q,children:Wo[Q].label},Q))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[s.jsx(B,{label:"Student",col:"name"}),s.jsx(B,{label:"Class",col:"class"}),s.jsx(B,{label:"Last Seen",col:"lastSeen",className:"text-center"}),s.jsx(B,{label:"Total Time",col:"time",className:"text-center"}),s.jsx(B,{label:"Resources",col:"resources",className:"text-center"}),s.jsx(B,{label:"XP",col:"xp",className:"text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const X=[...G.filter(Ne=>{var Rt;const Ke=!R||Ne.name.toLowerCase().includes(R.toLowerCase())||Ne.email.toLowerCase().includes(R.toLowerCase()),at=!E||((Rt=ee.get(Ne.id))==null?void 0:Rt.bucket)===E;return Ke&&at})].sort((Ne,Ke)=>{var at,Rt,Pe,lt,Nt,vt,yt,me;switch(C){case"name":return L==="asc"?Ne.name.localeCompare(Ke.name):Ke.name.localeCompare(Ne.name);case"class":return L==="asc"?(Ne.classType||"").localeCompare(Ke.classType||""):(Ke.classType||"").localeCompare(Ne.classType||"");case"lastSeen":{const We=Ne.lastLoginAt?new Date(Ne.lastLoginAt).getTime():0,mt=Ke.lastLoginAt?new Date(Ke.lastLoginAt).getTime():0;return L==="asc"?We-mt:mt-We}case"time":{const We=((at=Ne.stats)==null?void 0:at.totalTime)||0,mt=((Rt=Ke.stats)==null?void 0:Rt.totalTime)||0;return L==="asc"?We-mt:mt-We}case"resources":{const We=((Pe=Ne.stats)==null?void 0:Pe.problemsCompleted)||0,mt=((lt=Ke.stats)==null?void 0:lt.problemsCompleted)||0;return L==="asc"?We-mt:mt-We}case"xp":default:{const We=((vt=(Nt=Ne.gamification)==null?void 0:Nt.classXp)==null?void 0:vt[Ne.classType||""])||0,mt=((me=(yt=Ke.gamification)==null?void 0:yt.classXp)==null?void 0:me[Ke.classType||""])||0;return L==="asc"?We-mt:mt-We}}}),Se=Math.max(1,...G.map(Ne=>{var Ke,at;return((at=(Ke=Ne.gamification)==null?void 0:Ke.classXp)==null?void 0:at[Ne.classType||""])||0}));return X.map(Ne=>{var mt,Ze,et,Et;const Ke=((Ze=(mt=Ne.gamification)==null?void 0:mt.classXp)==null?void 0:Ze[Ne.classType||""])||0,at=Math.round(Ke/Se*100),Rt=Ne.lastLoginAt,Pe=Rt?Date.now()-new Date(Rt).getTime():1/0,lt=Pe<36e5?"text-green-400":Pe<864e5?"text-yellow-400":Pe<1/0?"text-red-400":"text-gray-600",Nt=Pe<36e5?"bg-green-500":Pe<864e5?"bg-yellow-500":Pe<1/0?"bg-red-500":"bg-gray-600",vt=H.get(Ne.id),yt={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},me=ee.get(Ne.id),We=me?Wo[me.bucket]:null;return s.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(vt==null?void 0:vt.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(Ne.id),children:[s.jsx("td",{className:"p-3 font-bold text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[Ne.avatarUrl?s.jsx("img",{src:Ne.avatarUrl,alt:Ne.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:Ne.name.charAt(0)}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Nt}`})]}),s.jsx("span",{className:"truncate max-w-[120px]",children:Ne.name}),vt&&yt[vt.riskLevel]&&s.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${yt[vt.riskLevel]}`,title:`${vt.riskLevel} risk: ${vt.reason}`}),We&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${We.bgColor} ${We.color} border ${We.borderColor}`,title:We.description,children:We.label})]})}),s.jsx("td",{className:"p-3 text-sm text-gray-400",children:Ne.classType}),s.jsx("td",{className:`p-3 text-center text-xs font-mono ${lt}`,children:he(Ne.lastLoginAt)}),s.jsxs("td",{className:"p-3 text-center text-white",children:[((et=Ne.stats)==null?void 0:et.totalTime)||0,"m"]}),s.jsx("td",{className:"p-3 text-center text-white",children:((Et=Ne.stats)==null?void 0:Et.problemsCompleted)||0}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${at}%`}})}),s.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Ke})]})})]},Ne.id)})})()})]})})]}),a&&(()=>{const Q=G.find(X=>X.id===a);return Q?s.jsx(R0e,{student:Q,submissions:r.filter(X=>X.userId===a),assignments:e,bucketProfiles:x.filter(X=>X.studentId===a),onClose:()=>i(null)}):null})(),s.jsx(M0e,{students:G,isOpen:U,onClose:()=>P(!1)})]})},P0e=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=Pa(),{confirm:i}=Po(),[o,c]=_.useState(new Set),[d,h]=_.useState(Dr.AP_PHYSICS),[p,m]=_.useState(!1),[x,y]=_.useState(!1),[S,N]=_.useState({}),w=(be,nt)=>{N(jt=>{const Pt=jt[be]||{col:"name",dir:"asc"};return{...jt,[be]:{col:nt,dir:Pt.col===nt&&Pt.dir==="asc"?"desc":"asc"}}})},T=({label:be,col:nt,type:jt,className:Pt})=>{const Bt=S[jt]||{col:"name",dir:"asc"},tt=Bt.col===nt;return s.jsx("th",{className:`cursor-pointer select-none group p-4 ${Pt??""}`,onClick:()=>w(jt,nt),children:s.jsxs("div",{className:`flex items-center gap-1 ${Pt!=null&&Pt.includes("text-center")?"justify-center":"justify-start"}`,children:[s.jsx("span",{children:be}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Wf,{className:`w-2.5 h-2.5 -mb-0.5 ${tt&&Bt.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Wa,{className:`w-2.5 h-2.5 -mt-0.5 ${tt&&Bt.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[C,O]=_.useState(""),[L,I]=_.useState(Dr.AP_PHYSICS),[R,A]=_.useState(""),[E,k]=_.useState(""),[U,P]=_.useState(!1),[$,B]=_.useState(!1),[G,K]=_.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[H,ee]=_.useState(10),[ae,ce]=_.useState("single"),[fe,Z]=_.useState([]),[ne,Y]=_.useState(!1),de=_.useRef(null),[ye,Ue]=_.useState(null),[Xe,Ye]=_.useState(""),[_e,he]=_.useState(""),Q=t.filter(be=>be.role==="STUDENT"),X=_.useMemo(()=>{const be=new Set;return Q.forEach(nt=>{nt.classSections&&Object.values(nt.classSections).forEach(jt=>{jt&&be.add(jt)}),nt.section&&be.add(nt.section)}),Array.from(be).sort()},[Q]),Se=async(be,nt,jt)=>{try{jt?await De.updateUserClassSection(be,jt,nt):await De.updateUserSection(be,nt),Ue(null),Ye(""),he(""),a.success(`Section updated to ${nt||"none"}${jt?` for ${jt}`:""}`)}catch{a.error("Failed to update section")}},Ne=async be=>{if(o.size!==0)try{await Promise.all(Array.from(o).map(nt=>De.updateUserSection(nt,be))),c(new Set),a.success(`Set ${o.size} students to ${be}`)}catch{a.error("Failed to bulk update sections")}},Ke=_.useMemo(()=>e.filter(be=>!t.some(nt=>nt.email.toLowerCase()===be.email.toLowerCase())),[e,t]),at=_.useMemo(()=>[...Array.from(new Set([...Object.values(Dr).filter(nt=>nt!==Dr.UNCATEGORIZED),...r.map(nt=>nt.className)])).sort(),Dr.UNCATEGORIZED],[r]),Rt=be=>{const nt=Q.filter(Bt=>{var tt,ar;return((tt=Bt.enrolledClasses)==null?void 0:tt.includes(be))||be===Dr.UNCATEGORIZED&&(((ar=Bt.enrolledClasses)==null?void 0:ar.length)===0||!Bt.enrolledClasses)}),jt=nt.every(Bt=>o.has(Bt.id)),Pt=new Set(o);nt.forEach(Bt=>{jt?Pt.delete(Bt.id):Pt.add(Bt.id)}),c(Pt)},Pe=be=>{const nt=new Set(o);nt.has(be)?nt.delete(be):nt.add(be),c(nt)},lt=async()=>{if(o.size>0){const be=Array.from(o).map(async nt=>{const jt=t.find(Pt=>Pt.id===nt);if(jt){const Pt=jt.enrolledClasses||[],Bt=Array.from(new Set([...Pt.filter(tt=>tt!==Dr.UNCATEGORIZED),d]));await De.updateUserEnrolledClasses(nt,Bt)}});await Promise.all(be),c(new Set)}},Nt=async be=>{if(o.size>0){if(!await i({message:`Remove ${o.size} students from ${be}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const nt=Array.from(o).map(async jt=>{const Pt=t.find(Bt=>Bt.id===jt);if(Pt){const tt=(Pt.enrolledClasses||[]).filter(ar=>ar!==be);await De.updateUserEnrolledClasses(jt,tt)}});await Promise.all(nt),c(new Set)}},vt=async(be,nt)=>{if(await i({message:`Remove ${be.name} from ${nt}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Pt=(be.enrolledClasses||[]).filter(Bt=>Bt!==nt);await De.updateUserEnrolledClasses(be.id,Pt)}},yt=async(be,nt)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${nt}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await De.removeUser(be)},me=async be=>{be!==Dr.UNCATEGORIZED&&await i({message:`Delete group config ${be}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&De.deleteClassConfig(be)},We=async be=>{await i({message:`Cancel invite for ${be}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await De.removeFromWhitelist(be)},mt=(be,nt)=>{be!==Dr.UNCATEGORIZED&&(k(be),P(!0),nt?(K(nt.features),ee(nt.xpPerMinute||10)):(K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),ee(10)),y(!0))},Ze=be=>{be.preventDefault(),n(C,L),R.trim()&&De.updateWhitelistSection(C,R.trim()),O(""),A(""),m(!1)},et=be=>{var Pt;const nt=(Pt=be.target.files)==null?void 0:Pt[0];if(!nt)return;const jt=new FileReader;jt.onload=Bt=>{var Wt,Vt;const tt=(Wt=Bt.target)==null?void 0:Wt.result;if(!tt)return;const ar=tt.split(/\r?\n/).filter(_t=>_t.trim()),Ar=(Vt=ar[0])!=null&&Vt.toLowerCase().includes("email")?1:0,Hr=new Set(e.map(_t=>_t.email.toLowerCase())),xn=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,_r=ar.slice(Ar).map(_t=>{const Gr=_t.includes("	")?_t.split("	"):_t.split(","),dn=(Gr[0]||"").trim().toLowerCase(),en=(Gr[1]||"").trim()||Dr.AP_PHYSICS,Wr=(Gr[2]||"").trim();let yn="pending";return xn.test(dn)?Hr.has(dn)&&(yn="duplicate"):yn="invalid",{email:dn,classType:en,section:Wr,status:yn}}).filter(_t=>_t.email.length>0);Z(_r)},jt.readAsText(nt),be.target.value=""},Et=async()=>{const be=fe.filter(jt=>jt.status==="pending");if(be.length===0)return;Y(!0);let nt=0;for(const jt of be)try{await De.addToWhitelist(jt.email,jt.classType),jt.section&&await De.updateWhitelistSection(jt.email,jt.section),jt.status="success",nt++}catch{jt.status="invalid"}Z([...fe]),Y(!1),a.success(`${nt} operative${nt!==1?"s":""} imported successfully.`),fe.every(jt=>jt.status==="success"||jt.status==="duplicate")&&setTimeout(()=>{m(!1),Z([]),ce("single")},1500)},wt=async be=>{if(be.preventDefault(),!!E){B(!0);try{await De.saveClassConfig({id:E,className:E,features:G,xpPerMinute:H}),k(""),y(!1),P(!1)}catch(nt){console.error("Failed to save config:",nt),a.error("Failed to save class configuration.")}finally{B(!1)}}},pr=be=>{const nt=be===Dr.UNCATEGORIZED,jt=S[be]||{col:"name",dir:"asc"},Pt=[...Q.filter(tt=>{var ar;return((ar=tt.enrolledClasses)==null?void 0:ar.includes(be))||nt&&(!tt.enrolledClasses||tt.enrolledClasses.length===0)})].sort((tt,ar)=>{var Ar,Hr,xn,_r;switch(jt.col){case"section":{const Wt=tt.section||"",Vt=ar.section||"";return jt.dir==="asc"?Wt.localeCompare(Vt):Vt.localeCompare(Wt)}case"status":{const Wt=tt.isWhitelisted?1:0,Vt=ar.isWhitelisted?1:0;return jt.dir==="asc"?Wt-Vt:Vt-Wt}case"lastSeen":{const Wt=tt.lastLoginAt?new Date(tt.lastLoginAt).getTime():0,Vt=ar.lastLoginAt?new Date(ar.lastLoginAt).getTime():0;return jt.dir==="asc"?Wt-Vt:Vt-Wt}case"xp":{const Wt=((Hr=(Ar=tt.gamification)==null?void 0:Ar.classXp)==null?void 0:Hr[be])||0,Vt=((_r=(xn=ar.gamification)==null?void 0:xn.classXp)==null?void 0:_r[be])||0;return jt.dir==="asc"?Wt-Vt:Vt-Wt}case"name":default:return jt.dir==="asc"?tt.name.localeCompare(ar.name):ar.name.localeCompare(tt.name)}}),Bt=r.find(tt=>tt.className===be);return s.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${nt?"opacity-90":""}`,children:[s.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${nt?"bg-orange-500/10":"bg-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:`font-bold text-lg tracking-wide ${nt?"text-orange-300":"text-white"}`,children:[nt&&s.jsx(Ex,{className:"w-5 h-5 inline mr-2 mb-1"}),be]}),s.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${nt?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Pt.length," Registered"]}),!nt&&s.jsx("button",{onClick:()=>mt(be,Bt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:s.jsx(xg,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[o.size>0&&Array.from(o).some(tt=>Pt.find(ar=>ar.id===tt))&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("select",{onChange:tt=>{tt.target.value&&Ne(tt.target.value),tt.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),s.jsx("option",{value:"",children:"No Section"}),X.map(tt=>s.jsx("option",{value:tt,children:tt},tt))]})}),s.jsxs("button",{onClick:()=>Nt(be),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[s.jsx(tce,{className:"w-3 h-3"})," Remove Selected"]})]}),!nt&&s.jsxs("button",{onClick:()=>me(be),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[s.jsx(gr,{className:"w-3 h-3"}),"Config"]})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[s.jsx("th",{className:"w-12 p-4 text-center",children:Pt.length>0&&s.jsx("button",{onClick:()=>Rt(be),className:"hover:text-purple-400 transition",children:s.jsx(HR,{className:"w-4 h-4"})})}),s.jsx(T,{label:"Operative",col:"name",type:be}),s.jsx(T,{label:"Section",col:"section",type:be,className:"text-center"}),s.jsx(T,{label:"System Status",col:"status",type:be,className:"text-center"}),s.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Pt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 italic text-sm",children:nt?"No restricted operatives found.":"No students registered in this roster yet."})}):Pt.map(tt=>{var ar;return s.jsxs("tr",{className:`hover:bg-white/5 transition group ${o.has(tt.id)?"bg-purple-500/10":""}`,children:[s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>Pe(tt.id),className:"text-gray-500 hover:text-purple-400 transition",children:o.has(tt.id)?s.jsx(Xle,{className:"w-4 h-4 text-purple-500"}):s.jsx(HR,{className:"w-4 h-4 group-hover:text-gray-400"})})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:tt.avatarUrl,alt:tt.name,className:"w-8 h-8 rounded-full border border-white/10"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:tt.name}),s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:tt.email})]})]})}),s.jsx("td",{className:"p-4 text-center",children:ye===tt.id?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((ar=tt.enrolledClasses)!=null&&ar.length?tt.enrolledClasses:[tt.classType].filter(Boolean)).map(Ar=>{var xn;if(!Ar)return null;const Hr=((xn=tt.classSections)==null?void 0:xn[Ar])||(tt.section&&tt.classType===Ar?tt.section:"");return s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:Ar,children:Ar}),s.jsxs("select",{value:Hr,onChange:_r=>{const Wt=_r.target.value;Wt==="__custom__"?(Ye("__custom__"),he("")):Se(tt.id,Wt,Ar)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[s.jsx("option",{value:"",children:"None"}),X.map(_r=>s.jsx("option",{value:_r,children:_r},_r)),s.jsx("option",{value:"__custom__",children:"+ New"})]})]},Ar)}),Xe==="__custom__"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{value:_e,onChange:Ar=>he(Ar.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:Ar=>{var Hr;if(Ar.key==="Enter"&&_e.trim()){const xn=(Hr=tt.enrolledClasses)!=null&&Hr.length?tt.enrolledClasses:[tt.classType].filter(Boolean);xn[0]&&Se(tt.id,_e.trim(),xn[0])}},autoFocus:!0}),s.jsx("button",{onClick:()=>{var Ar;if(_e.trim()){const Hr=(Ar=tt.enrolledClasses)!=null&&Ar.length?tt.enrolledClasses:[tt.classType].filter(Boolean);Hr[0]&&Se(tt.id,_e.trim(),Hr[0])}},className:"text-green-400 hover:text-green-300 p-1",children:s.jsx(Tr,{className:"w-3 h-3"})})]}),s.jsx("button",{onClick:()=>{Ue(null),Ye(""),he("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):s.jsx("button",{onClick:()=>{Ue(tt.id),Ye(""),he("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${tt.classSections&&Object.keys(tt.classSections).length>0||tt.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:tt.classSections&&Object.keys(tt.classSections).length>0?Object.values(tt.classSections).filter(Boolean).join(", ")||"Assign":tt.section||"Assign"})}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${tt.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[tt.isWhitelisted?s.jsx(FR,{className:"w-3 h-3"}):s.jsx(aw,{className:"w-3 h-3"}),tt.isWhitelisted?"Authorized":"Restricted"]})}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx("button",{onClick:()=>nt?yt(tt.id,tt.name):vt(tt,be),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:nt?"Permanently Delete":"Remove from this Class",children:s.jsx(Xn,{className:"w-4 h-4"})})})})]},tt.id)})})]})})]},be)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),s.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{k(""),K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),P(!1),y(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[s.jsx(xg,{className:"w-4 h-4"}),"Class Config"]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[s.jsx(ob,{className:"w-4 h-4"}),"Invite Student"]})]})]}),Ke.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Lle,{className:"w-4 h-4"})," Pending Class Invitations (",Ke.length,")"]}),s.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),s.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Ke.map(be=>s.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:be.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(FR,{className:"w-3 h-3 text-amber-500"}),s.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(be.classTypes||[be.classType]).join(", ")," Access"]})]})]}),s.jsx("button",{onClick:()=>We(be.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},be.email))})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:d,onChange:be=>h(be.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:at.filter(be=>be!==Dr.UNCATEGORIZED).map(be=>s.jsxs("option",{value:be,children:["Apply ",be," Access"]},be))}),s.jsx(Wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),s.jsxs("button",{onClick:lt,disabled:o.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[s.jsx(Tr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),s.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[o.size," SELECTION ACTIVE"]})]}),s.jsx("div",{className:"pb-12",children:at.map(be=>pr(be))}),s.jsxs(Is,{isOpen:p,onClose:()=>{m(!1),Z([]),ce("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[s.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[s.jsxs("button",{onClick:()=>{ce("single"),Z([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ae==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(ob,{className:"w-3.5 h-3.5"})," Single"]}),s.jsxs("button",{onClick:()=>ce("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ae==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(ul,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),ae==="single"?s.jsxs("form",{onSubmit:Ze,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),s.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:C,onChange:be=>O(be.target.value),placeholder:"student@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),s.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:be=>I(be.target.value),children:at.filter(be=>be!==Dr.UNCATEGORIZED).map(be=>s.jsx("option",{value:be,children:be},be))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),s.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:R,onChange:be=>A(be.target.value),placeholder:"e.g. Period 3, Block A"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[s.jsx("input",{type:"file",ref:de,accept:".csv,.tsv,.txt",onChange:et,className:"hidden"}),fe.length===0?s.jsxs(s.Fragment,{children:[s.jsx(ul,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),s.jsx("button",{onClick:()=>{var be;return(be=de.current)==null?void 0:be.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",s.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),s.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:s.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",s.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",s.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",s.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(h0,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm font-bold text-white",children:[fe.length," records parsed"]}),s.jsx("button",{onClick:()=>{Z([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),fe.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[s.jsx("th",{className:"p-2 pl-3",children:"Email"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Section"}),s.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:fe.map((be,nt)=>s.jsxs("tr",{className:be.status==="invalid"?"bg-red-500/5":be.status==="duplicate"?"bg-yellow-500/5":be.status==="success"?"bg-green-500/5":"",children:[s.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:be.email}),s.jsx("td",{className:"p-2 text-gray-400",children:be.classType}),s.jsx("td",{className:"p-2 text-gray-500",children:be.section||""}),s.jsx("td",{className:"p-2 pr-3 text-right",children:s.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${be.status==="pending"?"bg-blue-500/20 text-blue-400":be.status==="success"?"bg-green-500/20 text-green-400":be.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:be.status})})]},nt))})]})}),s.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("span",{className:"text-blue-400",children:[fe.filter(be=>be.status==="pending").length," ready"]}),s.jsxs("span",{className:"text-yellow-400",children:[fe.filter(be=>be.status==="duplicate").length," duplicates"]}),s.jsxs("span",{className:"text-red-400",children:[fe.filter(be=>be.status==="invalid").length," invalid"]}),fe.some(be=>be.status==="success")&&s.jsxs("span",{className:"text-green-400",children:[fe.filter(be=>be.status==="success").length," imported"]})]})}),fe.filter(be=>be.status==="duplicate").length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[s.jsx(Li,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),s.jsx("button",{onClick:Et,disabled:ne||fe.filter(be=>be.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ne?s.jsxs(s.Fragment,{children:[s.jsx(ks,{className:"w-4 h-4 animate-spin"})," Importing..."]}):s.jsxs(s.Fragment,{children:["Import ",fe.filter(be=>be.status==="pending").length," Operatives"]})})]})]})]}),s.jsx(Is,{isOpen:x,onClose:()=>y(!1),title:U?"Edit Class Node Config":"Initialize New Class Node",children:s.jsxs("form",{onSubmit:wt,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:E,onChange:be=>k(be.target.value),placeholder:"e.g. AP Physics Period 4"}),U&&s.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsLab,onChange:be=>K({...G,physicsLab:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.evidenceLocker,onChange:be=>K({...G,evidenceLocker:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.leaderboard,onChange:be=>K({...G,leaderboard:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsTools,onChange:be=>K({...G,physicsTools:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.communications,onChange:be=>K({...G,communications:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"number",min:1,max:100,value:H,onChange:be=>ee(Math.max(1,Math.min(100,parseInt(be.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),s.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),s.jsx("button",{type:"submit",disabled:$,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${$?"opacity-70 cursor-not-allowed":""}`,children:$?s.jsxs(s.Fragment,{children:[s.jsx(ks,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):U?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},uu={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},HM={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},L0e=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,B0e=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,$0e=({assignment:t,isOpen:e,onClose:r})=>{const n=Pa(),a=_.useRef(null),[i,o]=_.useState([]),[c,d]=_.useState(!0),[h,p]=_.useState(!1),[m,x]=_.useState(t.category==="Practice Set"?"reading":"manage"),[y,S]=_.useState(null),[N,w]=_.useState(null),[T,C]=_.useState(""),[O,L]=_.useState(null),[I,R]=_.useState(!1),[A,E]=_.useState(null),[k,U]=_.useState({}),[P,$]=_.useState(null),[B,G]=_.useState(!0),[K,H]=_.useState(null),[ee,ae]=_.useState(null),[ce,fe]=_.useState(null),[Z,ne]=_.useState(!1),Y=_.useRef(null),de=t.category==="Practice Set";_.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const lt=await ga(ot(Me,"question_banks",t.id));lt.exists()?o(lt.data().questions||[]):o([]);const Nt=await ga(ot(Me,"reading_materials",t.id));Nt.exists()?H(Nt.data()):H(null)}catch(lt){console.error("Failed to load bank:",lt),o([])}finally{d(!1)}})()},[e,t.id]);const ye=async Pe=>{p(!0);try{await ta(ot(Me,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Pe,questionCount:Pe.length,updatedAt:new Date().toISOString()}),o(Pe)}catch(lt){n.error("Failed to save: "+(lt instanceof Error?lt.message:"Unknown error"))}finally{p(!1)}},Ue=async Pe=>{const lt=i.filter(Nt=>Nt.id!==Pe);await ye(lt),n.success("Question removed."),O===Pe&&L(null)},Xe=async()=>{try{await rs(ot(Me,"question_banks",t.id)),o([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Ye=()=>{navigator.clipboard.writeText(L0e(t.title,t.classType,t.description)),R(!0),setTimeout(()=>R(!1),2e3),n.success("Prompt copied!")},_e=()=>{navigator.clipboard.writeText(B0e(t.title,t.classType,t.description)),ne(!0),setTimeout(()=>ne(!1),2e3),n.success("Reading prompt copied!")},he=async Pe=>{var Nt;const lt=(Nt=Pe.target.files)==null?void 0:Nt[0];if(lt){fe(null),ae(null);try{let yt=(await lt.text()).replace(/```json\s*|```\s*/g,"").trim();yt=yt.replace(/[\x00-\x1F\x7F]/g,mt=>mt===`
`||mt==="\r"||mt==="	"?" ":"");let me;try{me=JSON.parse(yt)}catch{const mt=yt.match(/\{[\s\S]*\}/);if(mt)me=JSON.parse(mt[0]);else throw new Error("No JSON object found.")}if(!me.title||!me.sections||!Array.isArray(me.sections))throw new Error("Missing required fields: title and sections array.");const We=me.sections.filter(mt=>!mt.title||!mt.content);if(We.length>0)throw new Error(`${We.length} section(s) missing title or content.`);ae(me)}catch(vt){fe(vt instanceof Error?vt.message:"Parse failed.")}Y.current&&(Y.current.value="")}},Q=async()=>{if(ee){p(!0);try{await ta(ot(Me,"reading_materials",t.id),{...ee,assignmentId:t.id,updatedAt:new Date().toISOString()}),H(ee),ae(null),n.success(`Study material uploaded: ${ee.sections.length} sections!`)}catch(Pe){n.error("Failed to save: "+(Pe instanceof Error?Pe.message:"Unknown error"))}finally{p(!1)}}},X=async()=>{p(!0);try{await rs(ot(Me,"reading_materials",t.id)),H(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},Se=async Pe=>{var Nt;const lt=(Nt=Pe.target.files)==null?void 0:Nt[0];if(lt){$(null),E(null);try{let yt=(await lt.text()).replace(/```json\s*|```\s*/g,"").trim();yt=yt.replace(/[\x00-\x1F\x7F]/g,et=>et===`
`||et==="\r"||et==="	"?" ":"");let me;try{me=JSON.parse(yt)}catch{const et=yt.match(/\[[\s\S]*\]/);if(et)try{me=JSON.parse(et[0])}catch{const Et=et[0];let wt=null;for(let pr=Et.length-1;pr>0;pr--)if(Et[pr]==="}")try{wt=JSON.parse(Et.slice(0,pr+1)+"]");break}catch{}if(wt)me=wt;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Et=null;const wt="["+yt;for(let pr=wt.length-1;pr>0;pr--)if(wt[pr]==="}")try{Et=JSON.parse(wt.slice(0,pr+1)+"]");break}catch{}if(Et)me=Et;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(me)||me.length===0)throw new Error("Must be a non-empty JSON array.");const We=me.filter(et=>et.id&&et.tier&&et.type&&et.stem&&et.options&&et.correctAnswer),mt=me.length-We.length;if(We.length===0){$("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const Ze={};We.forEach(et=>{const Et=et.tier;Ze[Et]=(Ze[Et]||0)+1}),E(We),U(Ze),mt>0&&n.success(`Parsed ${We.length} questions (${mt} skipped  missing fields).`)}catch(vt){$(vt instanceof Error?vt.message:"Parse failed.")}a.current&&(a.current.value="")}},Ne=async()=>{if(!A)return;let Pe;if(B&&i.length>0){const lt=new Set(i.map(vt=>vt.id)),Nt=A.map((vt,yt)=>({...vt,id:lt.has(vt.id)?`${vt.id}_${Date.now()}_${yt}`:vt.id}));Pe=[...i,...Nt]}else Pe=A;await ye(Pe),n.success(`${B?"Added":"Replaced with"} ${A.length} questions. Total: ${Pe.length}`),E(null),x("manage")},Ke=_.useMemo(()=>{let Pe=i;if(y&&(Pe=Pe.filter(lt=>lt.tier===y)),N&&(Pe=Pe.filter(lt=>lt.type===N)),T){const lt=T.toLowerCase();Pe=Pe.filter(Nt=>Nt.stem.toLowerCase().includes(lt)||Nt.id.toLowerCase().includes(lt))}return Pe},[i,y,N,T]),at=_.useMemo(()=>{const Pe={1:0,2:0,3:0};return i.forEach(lt=>{Pe[lt.tier]=(Pe[lt.tier]||0)+1}),Pe},[i]),Rt=_.useMemo(()=>{const Pe={};return i.forEach(lt=>{Pe[lt.type]=(Pe[lt.type]||0)+1}),Pe},[i]);return e?s.jsx(Is,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:s.jsxs("div",{className:"text-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[s.jsx(Uh,{className:"w-5 h-5 text-purple-400 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),s.jsx("div",{className:"text-xs mt-1",children:c?s.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?s.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):s.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&s.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Pe=>s.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${uu[Pe].bg} ${uu[Pe].border} border`,children:[s.jsx("div",{className:`text-sm font-bold ${uu[Pe].text}`,children:at[Pe]}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Pe]})]},Pe))})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[!de&&s.jsxs("button",{onClick:()=>x("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Uh,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!de&&s.jsxs("button",{onClick:()=>x("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Tr,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),s.jsxs("button",{onClick:()=>x("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Ga,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",K?`(${K.sections.length})`:""]})]}),m==="manage"&&s.jsx("div",{className:"space-y-3",children:c?s.jsx("div",{className:"py-12 text-center",children:s.jsx(ks,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx(Uh,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[s.jsx(Kf,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{value:T,onChange:Pe=>C(Pe.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>S(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${y?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Pe=>s.jsxs("button",{onClick:()=>S(y===Pe?null:Pe),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${y===Pe?`${uu[Pe].bg} ${uu[Pe].text} ${uu[Pe].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Pe," (",at[Pe],")"]},Pe))]})]}),Object.keys(Rt).length>1&&s.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Rt).sort((Pe,lt)=>lt[1]-Pe[1]).map(([Pe,lt])=>s.jsxs("button",{onClick:()=>w(N===Pe?null:Pe),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${N===Pe?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[HM[Pe]||Pe," (",lt,")"]},Pe))}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:Ke.length===0?s.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):Ke.map(Pe=>{const lt=uu[Pe.tier]||uu[1],Nt=O===Pe.id;return s.jsxs("div",{className:`rounded-xl border transition ${Nt?`${lt.border} ${lt.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>L(Nt?null:Pe.id),children:[s.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${lt.bg} ${lt.text}`,children:["T",Pe.tier]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[s.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Pe.id}),s.jsx("span",{className:"text-[8px] text-gray-600",children:""}),s.jsx("span",{className:"text-[8px] text-gray-500",children:HM[Pe.type]||Pe.type}),s.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx($n,{className:"w-2.5 h-2.5"}),Pe.xp]})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Pe.stem})]}),s.jsx(so,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${Nt?"rotate-90":""}`})]}),Nt&&s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Pe.context&&s.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Pe.context}),s.jsx("div",{className:"space-y-1",children:Pe.options.map(vt=>{const yt=Array.isArray(Pe.correctAnswer)?Pe.correctAnswer.includes(vt.id):Pe.correctAnswer===vt.id;return s.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${yt?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[s.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[vt.id.toUpperCase(),"."]}),s.jsx("span",{children:vt.text}),yt&&s.jsx(zr,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},vt.id)})}),s.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Pe.explanation]}),Pe.linkedFollowUp&&s.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold",children:"Follow-up: "}),Pe.linkedFollowUp.stem]}),s.jsxs("button",{onClick:()=>Ue(Pe.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[s.jsx(gr,{className:"w-3 h-3"})," Delete Question"]})]})]},Pe.id)})}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[s.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",Ke.length," of ",i.length]}),s.jsxs("button",{onClick:Xe,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(gr,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),s.jsx("button",{onClick:Ye,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${I?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:I?s.jsxs(s.Fragment,{children:[s.jsx(zr,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(d0,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",s.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[s.jsx(rb,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:Se,className:"hidden"})]})]}),P&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Li,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:P})]}),A&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zr,{className:"w-4 h-4 text-emerald-400"}),s.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[A.length," questions parsed"]})]}),s.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Pe=>s.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[s.jsx("div",{className:"text-base font-bold text-white",children:k[Pe]||0}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Pe]})]},Pe))}),i.length>0&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>G(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[s.jsx(Tr,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",A.length,")"]}),s.jsxs("button",{onClick:()=>G(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[s.jsx(oo,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Ne,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(ks,{className:"w-4 h-4 animate-spin"}):s.jsx(ul,{className:"w-4 h-4"}),h?"Saving...":`Upload ${A.length} Questions`]}),s.jsx("button",{onClick:()=>E(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(gr,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&s.jsxs("div",{className:"space-y-5",children:[K?s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ga,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:K.title})]}),s.jsxs("button",{onClick:X,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(gr,{className:"w-3 h-3"})," Remove"]})]}),K.description&&s.jsx("p",{className:"text-xs text-gray-400",children:K.description}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:[K.sections.length," sections"]}),K.estimatedMinutes&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["~",K.estimatedMinutes," min read"]})]})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:K.sections.map((Pe,lt)=>s.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:lt+1}),s.jsx("span",{className:"truncate",children:Pe.title})]},lt))})]}):s.jsxs("div",{className:"py-6 text-center",children:[s.jsx(Ga,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),s.jsx("button",{onClick:_e,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${Z?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:Z?s.jsxs(s.Fragment,{children:[s.jsx(zr,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(d0,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[s.jsx(rb,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:Y,type:"file",accept:".json,.txt",onChange:he,className:"hidden"})]})]}),ce&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Li,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:ce})]}),ee&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zr,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:ee.title})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[ee.sections.length," sections  ~",ee.estimatedMinutes||"?"," min read"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Q,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(ks,{className:"w-4 h-4 animate-spin"}):s.jsx(ul,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),s.jsx("button",{onClick:()=>ae(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(gr,{className:"w-4 h-4"})})]})]})]}),h&&s.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[s.jsx(ks,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},GM=[{type:"TEXT",label:"Text",icon:s.jsx(JH,{className:"w-4 h-4"}),description:"Plain text content",category:"Content"},{type:"SECTION_HEADER",label:"Section Header",icon:s.jsx(y8,{className:"w-4 h-4"}),description:"Section with title & subtitle",category:"Content"},{type:"IMAGE",label:"Image",icon:s.jsx(tw,{className:"w-4 h-4"}),description:"Image with caption",category:"Content"},{type:"VIDEO",label:"Video",icon:s.jsx(k0,{className:"w-4 h-4"}),description:"YouTube video embed",category:"Content"},{type:"OBJECTIVES",label:"Objectives",icon:s.jsx(Os,{className:"w-4 h-4"}),description:"Learning objectives list",category:"Content"},{type:"DIVIDER",label:"Divider",icon:s.jsx(Ix,{className:"w-4 h-4"}),description:"Horizontal separator",category:"Content"},{type:"EXTERNAL_LINK",label:"External Link",icon:s.jsx(Cx,{className:"w-4 h-4"}),description:"Styled link card",category:"Content"},{type:"EMBED",label:"Embed",icon:s.jsx(x8,{className:"w-4 h-4"}),description:"iFrame embed (Forms, Docs)",category:"Content"},{type:"INFO_BOX",label:"Info Box",icon:s.jsx(kx,{className:"w-4 h-4"}),description:"Tip, warning, or note",category:"Content"},{type:"VOCABULARY",label:"Vocabulary",icon:s.jsx(Ga,{className:"w-4 h-4"}),description:"Term & definition card",category:"Interactive"},{type:"VOCAB_LIST",label:"Vocab List",icon:s.jsx(v8,{className:"w-4 h-4"}),description:"Multiple term/definition pairs",category:"Interactive"},{type:"ACTIVITY",label:"Activity",icon:s.jsx($n,{className:"w-4 h-4"}),description:"Activity instructions box",category:"Interactive"},{type:"CHECKLIST",label:"Checklist",icon:s.jsx(nw,{className:"w-4 h-4"}),description:"Completable task list",category:"Interactive"},{type:"SORTING",label:"Sorting",icon:s.jsx(J2,{className:"w-4 h-4"}),description:"Sort items into two categories",category:"Interactive"},{type:"DATA_TABLE",label:"Data Table",icon:s.jsx(S8,{className:"w-4 h-4"}),description:"Editable data table",category:"Interactive"},{type:"BAR_CHART",label:"Bar Chart",icon:s.jsx(C0,{className:"w-4 h-4"}),description:"Interactive bar chart",category:"Interactive"},{type:"MC",label:"Multiple Choice",icon:s.jsx(Ex,{className:"w-4 h-4"}),description:"Question with options",category:"Questions"},{type:"SHORT_ANSWER",label:"Short Answer",icon:s.jsx(p0,{className:"w-4 h-4"}),description:"Free-text question",category:"Questions"},{type:"RANKING",label:"Ranking",icon:s.jsx(f0,{className:"w-4 h-4"}),description:"Drag to reorder items",category:"Questions"},{type:"LINKED",label:"Linked Question",icon:s.jsx(gg,{className:"w-4 h-4"}),description:"Follow-up referencing prior block",category:"Questions"}],K8=()=>`block_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,z0e=t=>{const e={id:K8(),type:t,content:""};switch(t){case"MC":return{...e,options:["",""],correctAnswer:0};case"SHORT_ANSWER":return{...e,acceptedAnswers:[""]};case"VOCABULARY":return{...e,term:"",definition:""};case"CHECKLIST":return{...e,items:[""]};case"INFO_BOX":return{...e,variant:"note"};case"SECTION_HEADER":return{...e,icon:"",title:"",subtitle:""};case"IMAGE":return{...e,url:"",caption:"",alt:""};case"VIDEO":return{...e,url:"",caption:""};case"OBJECTIVES":return{...e,title:"Learning Objectives",items:[""]};case"DIVIDER":return e;case"EXTERNAL_LINK":return{...e,title:"",url:"",buttonLabel:"Open",openInNewTab:!0};case"EMBED":return{...e,url:"",caption:"",height:500};case"VOCAB_LIST":return{...e,terms:[{term:"",definition:""}]};case"ACTIVITY":return{...e,icon:"",title:"",instructions:""};case"SORTING":return{...e,title:"",instructions:"",leftLabel:"Category A",rightLabel:"Category B",sortItems:[{text:"",correct:"left"}]};case"DATA_TABLE":return{...e,title:"",columns:[{key:"col1",label:"Column 1",editable:!0}],trials:3};case"BAR_CHART":return{...e,title:"",barCount:3,initialLabel:"Initial",finalLabel:"Final",deltaLabel:"Change",height:300};case"RANKING":return{...e,items:[""]};case"LINKED":return{...e,linkedBlockId:""};default:return e}},ur="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",xl="w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",dr="text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",U0e=({block:t,onUpdate:e})=>s.jsx("textarea",{value:t.content,onChange:r=>e({...t,content:r.target.value}),placeholder:"Enter text content...",className:`${xl} min-h-[80px]`,rows:3}),V0e=({block:t,onUpdate:e})=>{const r=t.options||["",""],n=()=>e({...t,options:[...r,""]}),a=o=>{if(r.length<=2)return;const c=r.filter((h,p)=>p!==o),d=t.correctAnswer===o?0:(t.correctAnswer||0)>o?(t.correctAnswer||0)-1:t.correctAnswer;e({...t,options:c,correctAnswer:d})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,options:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Enter the question...",className:xl,rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:dr,children:"Options (click radio to mark correct)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>e({...t,correctAnswer:c}),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 transition ${t.correctAnswer===c?"border-green-500 bg-green-500":"border-gray-600 hover:border-gray-400"}`,children:t.correctAnswer===c&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Option ${String.fromCharCode(65+c)}`,className:`flex-1 ${ur}`}),r.length>2&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},c)),r.length<6&&s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Option"]})]})]})},F0e=({block:t,onUpdate:e})=>{const r=t.acceptedAnswers||[""],n=()=>e({...t,acceptedAnswers:[...r,""]}),a=o=>{r.length<=1||e({...t,acceptedAnswers:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,acceptedAnswers:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Enter the question...",className:xl,rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:dr,children:"Accepted Answers (case-insensitive)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Accepted answer ${c+1}`,className:`flex-1 ${ur}`}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Accepted Answer"]})]})]})},q0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Term"}),s.jsx("input",{type:"text",value:t.term||"",onChange:r=>e({...t,term:r.target.value}),placeholder:"Term...",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Definition"}),s.jsx("input",{type:"text",value:t.definition||"",onChange:r=>e({...t,definition:r.target.value}),placeholder:"Definition...",className:ur})]})]}),H0e=({block:t,onUpdate:e})=>{const r=t.items||[""],n=()=>e({...t,items:[...r,""]}),a=o=>{r.length<=1||e({...t,items:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,items:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Checklist title/instructions...",className:xl,rows:1}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:dr,children:"Items"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-5 h-5 rounded border-2 border-gray-600 shrink-0"}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Item ${c+1}`,className:`flex-1 ${ur}`}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Item"]})]})]})},G0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Variant"}),s.jsx("div",{className:"flex gap-2",children:["tip","warning","note"].map(r=>s.jsx("button",{type:"button",onClick:()=>e({...t,variant:r}),className:`px-3 py-1.5 rounded-lg border text-xs font-bold capitalize transition ${t.variant===r?r==="tip"?"bg-green-500/20 border-green-500/30 text-green-400":r==="warning"?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-blue-500/20 border-blue-500/30 text-blue-400":"bg-black/30 border-white/10 text-gray-400 hover:text-white"}`,children:r},r))})]}),s.jsx("textarea",{value:t.content,onChange:r=>e({...t,content:r.target.value}),placeholder:"Info box content...",className:xl,rows:2})]}),W0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:r=>e({...t,icon:r.target.value}),placeholder:"",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:r=>e({...t,title:r.target.value}),placeholder:"Section title...",className:ur})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Subtitle"}),s.jsx("input",{type:"text",value:t.subtitle||"",onChange:r=>e({...t,subtitle:r.target.value}),placeholder:"Optional subtitle...",className:ur})]})]}),K0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Image URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:r=>e({...t,url:r.target.value}),placeholder:"https://...",className:ur})]}),t.url&&s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 max-h-48",children:s.jsx("img",{src:t.url,alt:t.alt||"",className:"w-full h-full object-contain bg-black/30",onError:r=>r.currentTarget.style.display="none"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:r=>e({...t,caption:r.target.value}),placeholder:"Image caption...",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Alt Text"}),s.jsx("input",{type:"text",value:t.alt||"",onChange:r=>e({...t,alt:r.target.value}),placeholder:"Describe the image...",className:ur})]})]})]}),Q0e=({block:t,onUpdate:e})=>{const n=(a=>{const i=a.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return i?`https://www.youtube.com/embed/${i[1]}`:""})(t.url||"");return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"YouTube URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:a=>e({...t,url:a.target.value}),placeholder:"https://youtube.com/watch?v=...",className:ur})]}),n&&s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 aspect-video",children:s.jsx("iframe",{src:n,className:"w-full h-full",allowFullScreen:!0,title:"Video preview"})}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:a=>e({...t,caption:a.target.value}),placeholder:"Video caption...",className:ur})]})]})},X0e=({block:t,onUpdate:e})=>{const r=t.items||[""],n=()=>e({...t,items:[...r,""]}),a=o=>{r.length<=1||e({...t,items:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,items:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:o=>e({...t,title:o.target.value}),placeholder:"Learning Objectives",className:ur})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:dr,children:"Objectives"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Os,{className:"w-4 h-4 text-emerald-400 shrink-0"}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Objective ${c+1}`,className:`flex-1 ${ur}`}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Objective"]})]})]})},Y0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:r=>e({...t,title:r.target.value}),placeholder:"Link title...",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:r=>e({...t,url:r.target.value}),placeholder:"https://...",className:ur})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Description"}),s.jsx("input",{type:"text",value:t.content,onChange:r=>e({...t,content:r.target.value}),placeholder:"Brief description...",className:ur})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Button Label"}),s.jsx("input",{type:"text",value:t.buttonLabel||"",onChange:r=>e({...t,buttonLabel:r.target.value}),placeholder:"Open",className:ur})]}),s.jsx("div",{className:"flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:t.openInNewTab??!0,onChange:r=>e({...t,openInNewTab:r.target.checked}),className:"rounded"}),"Open in new tab"]})})]})]}),J0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Embed URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:r=>e({...t,url:r.target.value}),placeholder:"https://docs.google.com/...",className:ur})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:r=>e({...t,caption:r.target.value}),placeholder:"Optional caption...",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||500,onChange:r=>e({...t,height:parseInt(r.target.value)||500}),className:ur})]})]})]}),Z0e=({block:t,onUpdate:e})=>{const r=t.terms||[{term:"",definition:""}],n=()=>e({...t,terms:[...r,{term:"",definition:""}]}),a=o=>{r.length<=1||e({...t,terms:r.filter((c,d)=>d!==o)})},i=(o,c,d)=>{const h=[...r];h[o]={...h[o],[c]:d},e({...t,terms:h})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:dr,children:"Terms & Definitions"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 mt-2.5 w-5 text-right shrink-0",children:[c+1,"."]}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",value:o.term,onChange:d=>i(c,"term",d.target.value),placeholder:"Term",className:ur}),s.jsx("input",{type:"text",value:o.definition,onChange:d=>i(c,"definition",d.target.value),placeholder:"Definition",className:ur})]}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 mt-1.5 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Term"]})]})},ehe=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:r=>e({...t,icon:r.target.value}),placeholder:"",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:r=>e({...t,title:r.target.value}),placeholder:"Activity title...",className:ur})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:r=>e({...t,instructions:r.target.value}),placeholder:"Describe the activity...",className:`${xl} min-h-[80px]`,rows:3})]})]}),the=({block:t,onUpdate:e})=>{const r=t.sortItems||[{text:"",correct:"left"}],n=()=>e({...t,sortItems:[...r,{text:"",correct:"left"}]}),a=o=>{r.length<=1||e({...t,sortItems:r.filter((c,d)=>d!==o)})},i=(o,c,d)=>{const h=[...r];h[o]={...h[o],[c]:d},e({...t,sortItems:h})};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:o=>e({...t,title:o.target.value}),placeholder:"Sorting activity title...",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:o=>e({...t,instructions:o.target.value}),placeholder:"Explain what to sort...",className:xl,rows:2})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Left Category"}),s.jsx("input",{type:"text",value:t.leftLabel||"",onChange:o=>e({...t,leftLabel:o.target.value}),placeholder:"Category A",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Right Category"}),s.jsx("input",{type:"text",value:t.rightLabel||"",onChange:o=>e({...t,rightLabel:o.target.value}),placeholder:"Category B",className:ur})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:dr,children:"Items (select correct category)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:o.text,onChange:d=>i(c,"text",d.target.value),placeholder:`Item ${c+1}`,className:`flex-1 ${ur}`}),s.jsxs("select",{value:o.correct,onChange:d=>i(c,"correct",d.target.value),className:`w-32 ${ur}`,children:[s.jsx("option",{value:"left",children:t.leftLabel||"Left"}),s.jsx("option",{value:"right",children:t.rightLabel||"Right"})]}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Item"]})]})]})},rhe=({block:t,onUpdate:e})=>{const r=t.columns||[{key:"col1",label:"Column 1",editable:!0}],n=()=>{const o=`col${r.length+1}`;e({...t,columns:[...r,{key:o,label:"",editable:!0}]})},a=o=>{r.length<=1||e({...t,columns:r.filter((c,d)=>d!==o)})},i=(o,c,d)=>{const h=[...r];h[o]={...h[o],[c]:d},e({...t,columns:h})};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:o=>e({...t,title:o.target.value}),placeholder:"Table title...",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Number of Rows"}),s.jsx("input",{type:"number",value:t.trials||3,onChange:o=>e({...t,trials:parseInt(o.target.value)||3}),min:1,max:20,className:ur})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:dr,children:"Columns"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:o.label,onChange:d=>i(c,"label",d.target.value),placeholder:"Column label",className:`flex-1 ${ur}`}),s.jsx("input",{type:"text",value:o.unit||"",onChange:d=>i(c,"unit",d.target.value),placeholder:"Unit",className:`w-24 ${ur}`}),s.jsxs("label",{className:"flex items-center gap-1 text-[10px] text-gray-400 whitespace-nowrap",children:[s.jsx("input",{type:"checkbox",checked:o.editable!==!1,onChange:d=>i(c,"editable",d.target.checked)}),"Editable"]}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Column"]})]})]})},nhe=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:r=>e({...t,title:r.target.value}),placeholder:"Chart title...",className:ur})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Number of Bars"}),s.jsx("input",{type:"number",value:t.barCount||3,onChange:r=>e({...t,barCount:parseInt(r.target.value)||3}),min:1,max:10,className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Chart Height (px)"}),s.jsx("input",{type:"number",value:t.height||300,onChange:r=>e({...t,height:parseInt(r.target.value)||300}),className:ur})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Initial Label"}),s.jsx("input",{type:"text",value:t.initialLabel||"",onChange:r=>e({...t,initialLabel:r.target.value}),placeholder:"Initial",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Delta Label"}),s.jsx("input",{type:"text",value:t.deltaLabel||"",onChange:r=>e({...t,deltaLabel:r.target.value}),placeholder:"Change",className:ur})]}),s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Final Label"}),s.jsx("input",{type:"text",value:t.finalLabel||"",onChange:r=>e({...t,finalLabel:r.target.value}),placeholder:"Final",className:ur})]})]})]}),ahe=({block:t,onUpdate:e})=>{const r=t.items||[""],n=()=>e({...t,items:[...r,""]}),a=o=>{r.length<=1||e({...t,items:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,items:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Enter the ranking question...",className:xl,rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:dr,children:"Items (in correct order  students will see them shuffled)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5 text-right shrink-0",children:[c+1,"."]}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Item ${c+1}`,className:`flex-1 ${ur}`}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Item"]})]})]})},she=({block:t,allBlocks:e,onUpdate:r})=>{const n=e.filter(a=>a.id!==t.id&&["MC","SHORT_ANSWER","RANKING"].includes(a.type));return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:dr,children:"Reference Block"}),s.jsxs("select",{value:t.linkedBlockId||"",onChange:a=>r({...t,linkedBlockId:a.target.value}),className:ur,children:[s.jsx("option",{value:"",children:"Select a question block..."}),n.map(a=>s.jsxs("option",{value:a.id,children:[a.type,": ",(a.content||"").slice(0,50),(a.content||"").length>50?"...":""]},a.id))]})]}),s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Follow-up question...",className:xl,rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:dr,children:"Accepted Answers (case-insensitive)"}),(t.acceptedAnswers||[""]).map((a,i)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...t.acceptedAnswers||[""]];c[i]=o.target.value,r({...t,acceptedAnswers:c})},placeholder:`Accepted answer ${i+1}`,className:`flex-1 ${ur}`}),(t.acceptedAnswers||[]).length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:(t.acceptedAnswers||[]).filter((o,c)=>c!==i)}),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...t.acceptedAnswers||[""],""]}),className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Answer"]})]})]})},ihe=({block:t,allBlocks:e,onUpdate:r})=>{switch(t.type){case"TEXT":return s.jsx(U0e,{block:t,onUpdate:r});case"MC":return s.jsx(V0e,{block:t,onUpdate:r});case"SHORT_ANSWER":return s.jsx(F0e,{block:t,onUpdate:r});case"VOCABULARY":return s.jsx(q0e,{block:t,onUpdate:r});case"CHECKLIST":return s.jsx(H0e,{block:t,onUpdate:r});case"INFO_BOX":return s.jsx(G0e,{block:t,onUpdate:r});case"SECTION_HEADER":return s.jsx(W0e,{block:t,onUpdate:r});case"IMAGE":return s.jsx(K0e,{block:t,onUpdate:r});case"VIDEO":return s.jsx(Q0e,{block:t,onUpdate:r});case"OBJECTIVES":return s.jsx(X0e,{block:t,onUpdate:r});case"DIVIDER":return s.jsx("div",{className:"text-xs text-gray-500 italic",children:"Horizontal divider  no configuration needed."});case"EXTERNAL_LINK":return s.jsx(Y0e,{block:t,onUpdate:r});case"EMBED":return s.jsx(J0e,{block:t,onUpdate:r});case"VOCAB_LIST":return s.jsx(Z0e,{block:t,onUpdate:r});case"ACTIVITY":return s.jsx(ehe,{block:t,onUpdate:r});case"SORTING":return s.jsx(the,{block:t,onUpdate:r});case"DATA_TABLE":return s.jsx(rhe,{block:t,onUpdate:r});case"BAR_CHART":return s.jsx(nhe,{block:t,onUpdate:r});case"RANKING":return s.jsx(ahe,{block:t,onUpdate:r});case"LINKED":return s.jsx(she,{block:t,allBlocks:e,onUpdate:r});default:return null}},ohe=({open:t,onClose:e,onImport:r,hasExistingBlocks:n})=>{const[a,i]=_.useState(""),[o,c]=_.useState(""),[d,h]=_.useState("append");if(!t)return null;const p=()=>{c("");try{const m=JSON.parse(a);let x;if(Array.isArray(m))x=m;else if(m&&Array.isArray(m.blocks))x=m.blocks;else{c('JSON must be an array of blocks, or an object with a "blocks" array.');return}x=x.map(y=>{if(!y.type)throw new Error(`Block missing "type" field: ${JSON.stringify(y).slice(0,80)}`);return{...y,id:y.id||K8(),content:y.content??""}}),r(x,d),i(""),c(""),e()}catch(m){c(m instanceof Error?m.message:"Invalid JSON")}};return s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,children:s.jsxs("div",{className:"bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[80vh] flex flex-col",onClick:m=>m.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ul,{className:"w-5 h-5 text-purple-400"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Import Blocks from JSON"})]}),s.jsx("button",{onClick:e,className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Xn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 flex-1 overflow-auto space-y-4",children:[s.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[s.jsxs("p",{children:["Paste a JSON array of blocks, or an object with ",s.jsx("code",{className:"text-purple-300",children:"{ blocks: [...] }"}),"."]}),s.jsxs("p",{children:["Each block needs at minimum a ",s.jsx("code",{className:"text-purple-300",children:"type"})," field. IDs will be auto-generated if missing."]})]}),n&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>h("append"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition border ${d==="append"?"bg-purple-600/20 border-purple-500/30 text-purple-300":"bg-black/30 border-white/10 text-gray-400"}`,children:"Append to existing"}),s.jsx("button",{type:"button",onClick:()=>h("replace"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition border ${d==="replace"?"bg-red-600/20 border-red-500/30 text-red-300":"bg-black/30 border-white/10 text-gray-400"}`,children:"Replace all"})]}),s.jsx("textarea",{value:a,onChange:m=>{i(m.target.value),c("")},placeholder:`[
  { "type": "SECTION_HEADER", "icon": "", "title": "My Section" },
  { "type": "TEXT", "content": "Hello world" }
]`,className:`${xl} min-h-[200px] font-mono text-xs`,rows:10}),o&&s.jsx("div",{className:"text-xs text-red-400 bg-red-500/10 border border-red-500/30 rounded-xl p-3",children:o})]}),s.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-white/10",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition",children:"Cancel"}),s.jsx("button",{type:"button",onClick:p,disabled:!a.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:d==="replace"&&n?"Replace & Import":"Import Blocks"})]})]})})},lhe=({blocks:t,onChange:e})=>{const[r,n]=_.useState(!1),[a,i]=_.useState(!1),[o,c]=_.useState(!1),d=_.useCallback(w=>{e([...t,z0e(w)]),n(!1)},[t,e]),h=_.useCallback((w,T)=>{const C=[...t];C[w]=T,e(C)},[t,e]),p=_.useCallback(w=>{e(t.filter((T,C)=>C!==w))},[t,e]),m=_.useCallback((w,T)=>{const C=w+T;if(C<0||C>=t.length)return;const O=[...t];[O[w],O[C]]=[O[C],O[w]],e(O)},[t,e]),x=_.useCallback(w=>{const T={...t[w],id:K8()},C=[...t];C.splice(w+1,0,T),e(C)},[t,e]),y=_.useCallback((w,T)=>{T==="replace"||t.length===0?e(w):e([...t,...w])},[t,e]),S=w=>GM.find(T=>T.type===w),N=["Content","Interactive","Questions"];return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:["Lesson Blocks (",t.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>c(!0),className:"flex items-center gap-1.5 text-xs font-bold px-3 py-1.5 rounded-lg border bg-white/5 border-white/10 text-gray-400 hover:text-white transition",children:[s.jsx(ul,{className:"w-3.5 h-3.5"}),"Paste JSON"]}),t.length>0&&s.jsxs("button",{type:"button",onClick:()=>i(!a),className:`flex items-center gap-1.5 text-xs font-bold px-3 py-1.5 rounded-lg border transition ${a?"bg-purple-600/20 border-purple-500/30 text-purple-300":"bg-white/5 border-white/10 text-gray-400 hover:text-white"}`,children:[a?s.jsx(sb,{className:"w-3.5 h-3.5"}):s.jsx(Uu,{className:"w-3.5 h-3.5"}),a?"Edit":"Preview"]})]})]}),a&&t.length>0?s.jsx("div",{className:"bg-[#0f0720]/80 border border-white/10 rounded-2xl p-6",children:s.jsx(lb,{blocks:t})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-3",children:t.map((w,T)=>{const C=S(w.type);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden hover:border-white/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-black/20 border-b border-white/5",children:[s.jsx(f0,{className:"w-4 h-4 text-gray-600 shrink-0"}),s.jsx("span",{className:"text-gray-500",children:C==null?void 0:C.icon}),s.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex-1",children:[(C==null?void 0:C.label)||w.type," #",T+1]}),s.jsxs("div",{className:"flex items-center gap-0.5",children:[s.jsx("button",{type:"button",onClick:()=>m(T,-1),disabled:T===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-20 transition",title:"Move up",children:s.jsx(Wf,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>m(T,1),disabled:T===t.length-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-20 transition",title:"Move down",children:s.jsx(Wa,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>x(T),className:"p-1 text-gray-500 hover:text-blue-400 transition",title:"Duplicate",children:s.jsx(d0,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>p(T),className:"p-1 text-gray-500 hover:text-red-400 transition",title:"Delete block",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]})]}),s.jsx("div",{className:"p-4",children:s.jsx(ihe,{block:w,allBlocks:t,onUpdate:O=>h(T,O)})})]},w.id)})}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>n(!r),className:"w-full py-3 border-2 border-dashed border-white/10 rounded-2xl text-gray-500 hover:text-purple-400 hover:border-purple-500/30 transition flex items-center justify-center gap-2 text-sm font-bold",children:[s.jsx(Tr,{className:"w-4 h-4"})," Add Block"]}),r&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl p-3 z-50 max-h-[60vh] overflow-y-auto",children:N.map(w=>{const T=GM.filter(C=>C.category===w);return s.jsxs("div",{className:"mb-3 last:mb-0",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:w}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:T.map(C=>s.jsxs("button",{type:"button",onClick:()=>d(C.type),className:"flex items-center gap-3 p-3 rounded-xl text-left hover:bg-white/5 transition group",children:[s.jsx("span",{className:"text-gray-500 group-hover:text-purple-400 transition",children:C.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-gray-300",children:C.label}),s.jsx("div",{className:"text-[10px] text-gray-600",children:C.description})]})]},C.type))})]},w)})})]})]}),s.jsx(ohe,{open:o,onClose:()=>c(!1),onImport:y,hasExistingBlocks:t.length>0})]})},che=({value:t,onChange:e,existingUnits:r})=>{const[n,a]=_.useState(!1),[i,o]=_.useState(""),c=_.useRef(null);_.useEffect(()=>{const p=m=>{c.current&&!c.current.contains(m.target)&&a(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const d=r.filter(p=>p.toLowerCase().includes(i.toLowerCase())),h=i&&!r.some(p=>p.toLowerCase()===i.toLowerCase());return s.jsxs("div",{ref:c,className:"relative",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),s.jsx("input",{type:"text",value:t,onChange:p=>{e(p.target.value),o(p.target.value)},onFocus:()=>{a(!0),o("")},placeholder:"Select or type a unit...",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition",required:!0}),n&&r.length>0&&s.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-[#1a1b26] border border-white/10 rounded-xl shadow-2xl max-h-48 overflow-y-auto",children:[d.map(p=>s.jsx("button",{type:"button",onClick:()=>{e(p),a(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-purple-500/10 transition ${t===p?"text-purple-300 bg-purple-500/5":"text-gray-300"}`,children:p},p)),d.length===0&&!h&&s.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 italic",children:"No matching units"}),h&&s.jsxs("button",{type:"button",onClick:()=>{e(i),a(!1)},className:"w-full text-left px-4 py-2 text-sm text-emerald-400 hover:bg-emerald-500/10 transition flex items-center gap-2",children:[s.jsx(Tr,{className:"w-3 h-3"}),' Create "',i,'"']})]})]})},uhe=`I need you to create a standalone HTML file for an interactive educational activity that integrates with a Learning Management System called "Porters Portal". The HTML file must communicate with the parent application through the Proctor Bridge Protocol using postMessage.

REQUIRED BRIDGE INTEGRATION:
The HTML must include this bridge snippet at the top of its <script>:

\`\`\`javascript
const PortalBridge = {
  _ready: false, _userId: null, _savedState: null,
  init() {
    window.addEventListener('message', (e) => {
      if (e.data?.type === 'portal-init') { this._userId = e.data.payload.userId; this._savedState = e.data.payload.savedState; this._ready = true; this.onReady(e.data.payload); }
      if (e.data?.type === 'portal-xp-result') this.onXPResult(e.data.payload);
      if (e.data?.type === 'portal-reset-ok') this.onReset();
    });
    window.parent.postMessage({ type: 'portal-ready' }, '*');
  },
  save(state, currentQuestion) { window.parent.postMessage({ type: 'portal-save', payload: { state, currentQuestion } }, '*'); },
  answer(questionId, correct, attempts) { window.parent.postMessage({ type: 'portal-answer', payload: { questionId, correct, attempts } }, '*'); },
  complete(score, totalQuestions, correctAnswers) { window.parent.postMessage({ type: 'portal-complete', payload: { score, totalQuestions, correctAnswers } }, '*'); },
  onReady(payload) {}, onXPResult(payload) {}, onReset() {}
};
PortalBridge.init();
\`\`\`

REQUIREMENTS:
1. Self-contained single HTML file (inline CSS + JS, no external dependencies)
2. Call PortalBridge.save() to auto-save student progress
3. Call PortalBridge.answer(questionId, correct, attempts) when students answer questions (awards XP)
4. Call PortalBridge.complete(score, totalQuestions, correctAnswers) when the activity is finished
5. Implement PortalBridge.onReady() to restore saved state
6. Dark theme styling (background: #0f0720, text: white/gray, accents: purple/green)
7. Mobile-responsive layout

The activity I need is: [DESCRIBE YOUR ACTIVITY HERE]`,dhe=`Convert the following content into a JSON array of lesson blocks for the Porters Portal LMS. Output ONLY valid JSON.

BLOCK TYPES:
Content: SECTION_HEADER (icon, title, subtitle), TEXT (content), IMAGE (url, caption, alt), VIDEO (url, caption), OBJECTIVES (title, items[]), DIVIDER, EXTERNAL_LINK (title, url, content, buttonLabel, openInNewTab), EMBED (url, caption, height), INFO_BOX (variant: tip|warning|note, content)
Interactive: VOCABULARY (term, definition), VOCAB_LIST (terms[{term,definition}]), ACTIVITY (icon, title, instructions), CHECKLIST (content, items[]), SORTING (title, instructions, leftLabel, rightLabel, sortItems[{text,correct:"left"|"right"}]), DATA_TABLE (title, columns[{key,label,unit?,editable?}], trials), BAR_CHART (title, barCount, initialLabel, finalLabel, deltaLabel, height)
Questions: MC (content, options[], correctAnswer), SHORT_ANSWER (content, acceptedAnswers[]), RANKING (content, items[])

RULES: Output a JSON array [{...},...]. Start with SECTION_HEADER. Use OBJECTIVES near top. Add TEXT between interactive elements. Every block needs "type" and "content" (even if "").

The content to convert:
[PASTE YOUR CONTENT HERE  Google Slides, PDF, Google Docs, spreadsheets, Word, PowerPoint, CSV, etc.]`,WM=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],hhe={Textbook:s.jsx(Ga,{className:"w-4 h-4"}),Simulation:s.jsx(g8,{className:"w-4 h-4"}),"Lab Guide":s.jsx(ew,{className:"w-4 h-4"}),"Practice Set":s.jsx(Os,{className:"w-4 h-4"}),Article:s.jsx(KH,{className:"w-4 h-4"}),"Video Lesson":s.jsx(ZH,{className:"w-4 h-4"}),Supplemental:s.jsx(rw,{className:"w-4 h-4"})},fhe=({assignments:t,submissions:e,classConfigs:r,users:n,onCreateAssignment:a,onPreviewAssignment:i,availableSections:o=[]})=>{const c=Pa(),{confirm:d}=Po(),[h,p]=_.useState(!1),[m,x]=_.useState(!1),[y,S]=_.useState(!1),[N,w]=_.useState("All Classes"),[T,C]=_.useState("All Categories"),[O,L]=_.useState(new Set),[I,R]=_.useState(null),[A,E]=_.useState({title:"",description:"",status:Ua.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[],lessonBlocks:[]}),[k,U]=_.useState(new Set([Dr.AP_PHYSICS])),[P,$]=_.useState([]),[B,G]=_.useState(""),[K,H]=_.useState(!1),ee=_.useMemo(()=>n.filter(he=>he.role==="STUDENT"),[n]),ae=_.useMemo(()=>{const he=new Set;return t.forEach(Q=>{k.has(Q.classType)&&Q.unit&&he.add(Q.unit)}),Array.from(he).sort()},[t,k]),ce=_.useMemo(()=>{const he=Object.values(Dr).filter(X=>X!==Dr.UNCATEGORIZED),Q=(r||[]).map(X=>X.className);return Array.from(new Set(["All Classes",...he,...Q]))},[r]),fe=_.useMemo(()=>{const he=Array.from(k)[0];if(!he)return o;const Q=cv(ee,he);return Q.length>0?Q:o},[k,ee,o]),Z=_.useMemo(()=>t.filter(he=>{const Q=N==="All Classes"||he.classType===N,X=T==="All Categories"||he.category===T;return Q&&X}),[t,N,T]),ne=_.useMemo(()=>{const he={};return Z.forEach(Q=>{const X=N==="All Classes"?`${Q.classType.toUpperCase()}  ${Q.unit||"Unassigned"}`:Q.unit||"Unassigned";he[X]||(he[X]=[]),he[X].push(Q)}),Object.keys(he).sort().reduce((Q,X)=>(Q[X]=he[X],Q),{})},[Z,N]),Y=async(he,Q)=>{if(k.size===0){c.error("Select a target class.");return}S(!0);try{const X=P.length>0?{targetSections:P}:{},Se=Q?{scheduledAt:new Date(Q).toISOString()}:{},Ne={...A,status:he,...X,...Se};m&&A.id?await a({...Ne,classType:Array.from(k)[0]}):await Promise.all(Array.from(k).map(Ke=>a({...Ne,classType:Ke}))),p(!1),x(!1),G(""),c.success(he===Ua.DRAFT?"Draft saved.":Q?"Deployment scheduled.":"Resource deployed.")}catch(X){console.error(X)}finally{S(!1)}},de=async he=>{he.preventDefault(),await Y(Ua.ACTIVE)},ye=async he=>{await De.updateAssignmentStatus(he.id,Ua.ACTIVE),c.success(`"${he.title}" deployed.`)},Ue=he=>{E(he),U(new Set([he.classType])),$(he.targetSections||[]),G(he.scheduledAt?he.scheduledAt.slice(0,16):""),x(!0),p(!0)},Xe=async he=>{const Q=he.status===Ua.ACTIVE?Ua.ARCHIVED:Ua.ACTIVE;await De.updateAssignmentStatus(he.id,Q)},Ye=_.useMemo(()=>[...Array.isArray(e)?e:[]].sort((Q,X)=>{const Se=new Date(Q.submittedAt||0).getTime();return new Date(X.submittedAt||0).getTime()-Se}),[e]),_e=he=>he.status===Ua.DRAFT?s.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Draft"}):he.scheduledAt&&new Date(he.scheduledAt)>new Date?s.jsxs("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1",children:[s.jsx($R,{className:"w-3 h-3"}),new Date(he.scheduledAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):null;return s.jsxs("div",{className:"space-y-8 pb-12",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),s.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),s.jsxs("button",{onClick:()=>{E({title:"",description:"",status:Ua.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[],lessonBlocks:[]}),$([]),G(""),x(!1),p(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[s.jsx(Tr,{className:"w-5 h-5"})," Deploy Resource"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[s.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:N,onChange:he=>w(he.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:ce.map(he=>s.jsx("option",{value:he,children:he},he))}),s.jsx(Wa,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:T,onChange:he=>C(he.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),WM.map(he=>s.jsx("option",{value:he,children:he},he))]}),s.jsx(Wa,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(ne).map(([he,Q])=>s.jsxs("div",{className:"mb-6 last:mb-0",children:[s.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[s.jsx("button",{onClick:()=>{const X=new Set(O);X.has(he)?X.delete(he):X.add(he),L(X)},className:"text-gray-400 hover:text-white transition",children:O.has(he)?s.jsx(Wa,{className:"w-4 h-4"}):s.jsx(so,{className:"w-4 h-4"})}),s.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:he}),s.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!O.has(he)&&s.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:Q.map(X=>{const Se=_e(X);return s.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${X.status===Ua.ARCHIVED?"bg-white/2 border-white/5 opacity-60":X.status===Ua.DRAFT?"bg-blue-900/10 border-blue-500/20":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${X.status===Ua.DRAFT?"bg-blue-500/20 text-blue-400":X.status===Ua.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:X.status===Ua.DRAFT?s.jsx(h0,{className:"w-4 h-4"}):hhe[X.category||"Supplemental"]}),s.jsxs("div",{className:"truncate flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:X.title}),Se,s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:X.classType})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:X.description})]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[X.status===Ua.DRAFT&&s.jsx("button",{onClick:()=>ye(X),className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition",title:"Deploy Now",children:s.jsx(YH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>R(X),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:s.jsx(Ro,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>i==null?void 0:i(X.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:s.jsx(Ule,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ue(X),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:s.jsx(sb,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Xe(X),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:X.status===Ua.ACTIVE?s.jsx(yle,{className:"w-4 h-4"}):s.jsx(Uu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:async()=>{await d({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await De.deleteAssignment(X.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:s.jsx(gr,{className:"w-4 h-4"})})]})]},X.id)})})]},he))})]}),s.jsx("div",{className:"lg:col-span-4",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[s.jsx(lo,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),s.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[Ye.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[s.jsx(lo,{className:"w-10 h-10 text-gray-700 mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),Ye.map(he=>s.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:he.userName}),s.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:he.assignmentTitle})]}),s.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(he.score)," XP"]})]}),s.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[s.jsxs("span",{children:[Math.round(he.metrics.engagementTime/60),"m active"]}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(he.submittedAt||"").toLocaleDateString()})]})]},he.id))]})]})})]}),s.jsx(Is,{isOpen:h,onClose:()=>p(!1),title:m?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:s.jsxs("form",{onSubmit:de,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),s.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:A.title,onChange:he=>E({...A,title:he.target.value})})]}),s.jsx(che,{value:A.unit||"",onChange:he=>E({...A,unit:he}),existingUnits:ae}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),s.jsx("select",{value:A.category,onChange:he=>E({...A,category:he.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:WM.map(he=>s.jsx("option",{value:he,children:he},he))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ce.filter(he=>he!=="All Classes").map(he=>s.jsx("button",{type:"button",onClick:()=>{const Q=new Set(k);Q.has(he)?Q.size>1&&Q.delete(he):Q.add(he),U(Q),$([])},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${k.has(he)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:he},he))})]}),s.jsx(bg,{availableSections:fe,selectedSections:P,onChange:$}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[s.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),s.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async he=>{var Q;if((Q=he.target.files)!=null&&Q[0]){H(!0);try{const X=await De.uploadHtmlResource(he.target.files[0]);E({...A,contentUrl:X}),c.success("File uploaded!")}catch(X){c.error("Upload failed: "+(X instanceof Error?X.message:"Unknown error"))}finally{H(!1)}}}}),K&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[s.jsx(ks,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!K&&A.contentUrl&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[s.jsx(u0,{className:"w-4 h-4"})," Resource uploaded"]})]}),s.jsx("div",{className:"bg-indigo-900/20 border border-indigo-500/30 p-5 rounded-2xl",children:s.jsx(lhe,{blocks:A.lessonBlocks||[],onChange:he=>E({...A,lessonBlocks:he})})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(uhe),c.success("HTML Proctor prompt copied!")},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-purple-500/20 bg-purple-500/5 text-purple-300 hover:bg-purple-500/10 text-xs font-bold transition",children:[s.jsx(tb,{className:"w-3.5 h-3.5"})," Copy AI HTML Prompt"]}),s.jsxs("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(dhe),c.success("JSON block prompt copied!")},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-indigo-500/20 bg-indigo-500/5 text-indigo-300 hover:bg-indigo-500/10 text-xs font-bold transition",children:[s.jsx(tb,{className:"w-3.5 h-3.5"})," Copy AI JSON Prompt"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:A.description,onChange:he=>E({...A,description:he.target.value})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Schedule Deployment ",s.jsx("span",{className:"text-gray-600",children:"(optional  leave blank for immediate)"})]}),s.jsx("input",{type:"datetime-local",value:B,onChange:he=>G(he.target.value),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",disabled:y,onClick:()=>Y(Ua.DRAFT),className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:[s.jsx(h0,{className:"w-4 h-4"})," Save Draft"]}),B?s.jsx("button",{type:"button",disabled:y,onClick:()=>Y(Ua.ACTIVE,B),className:"flex-[2] bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:y?s.jsx(ks,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx($R,{className:"w-4 h-4"})," Schedule Deployment"]})}):s.jsx("button",{type:"submit",disabled:y,className:"flex-[2] bg-purple-600 hover:bg-purple-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:y?s.jsx(ks,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})]})}),I&&s.jsx($0e,{assignment:I,isOpen:!!I,onClose:()=>R(null)})]})},oW=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),s.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),s.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),s.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:s.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),s.jsxs("g",{filter:"url(#b-glow)",children:[s.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),s.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),s.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),s.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>s.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),phe=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),s.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:s.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),s.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>s.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[s.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),s.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),s.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),s.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),s.jsxs("g",{filter:"url(#p-glow)",children:[s.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),s.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),s.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),s.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return s.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[s.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),mhe=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),s.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),s.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),s.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),s.jsxs("g",{filter:"url(#s-glow)",children:[s.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),s.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),s.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>s.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),s.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>s.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),ghe={BRUTE:oW,PHANTOM:phe,SERPENT:mhe},lW=({bossType:t,hue:e,size:r})=>{const n=ghe[t]||oW;return s.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:s.jsx(n,{hue:e})})},xhe=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],yhe=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,o]=_.useState(null),c=_.useMemo(()=>{var y;if(!t)return[];const x=Object.keys(((y=t.gamification)==null?void 0:y.classProfiles)||{});return x.length>0?x:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=_.useMemo(()=>{var y,S;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((y=t.gamification)==null?void 0:y.inventory)||[],equipped:((S=t.gamification)==null?void 0:S.equipped)||{}};const x=Hu(t,d);return{inventory:x.inventory,equipped:x.equipped}},[t,d]);return t?s.jsx(Is,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:s.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:s.jsx(Tr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:s.jsx(Xn,{className:"w-4 h-4"})})]})]})]}),c.length>1&&s.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(x=>s.jsx("button",{onClick:()=>o(x),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===x?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:x==="_legacy"?"Global":x},x))}),s.jsxs("div",{className:"border-b border-white/5 pb-6",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&s.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:xhe.map(x=>{var S;const y=(S=h.equipped)==null?void 0:S[x];return s.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${y?ma(y.rarity).border+" "+ma(y.rarity).bg:"border-white/10 bg-black/20"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:y.name}),s.jsx("button",{onClick:()=>n(t,x,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:s.jsx(Xn,{className:"w-3 h-3"})})]}):s.jsx("span",{className:"text-[8px] text-gray-600",children:x})},x)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((x,y)=>s.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${ma(x.rarity).border}`,children:[s.jsx("div",{className:`text-[8px] font-bold ${ma(x.rarity).text} text-center truncate w-full`,children:x.name}),s.jsx("div",{className:"text-[8px] text-gray-500",children:x.slot}),s.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:s.jsx("button",{onClick:()=>r(t,x,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:s.jsx(gr,{className:"w-4 h-4"})})})]},y)),h.inventory.length===0&&s.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},vhe=[10,50,100,-10,-50,-100],bhe=({user:t,onClose:e,onAdjust:r})=>{var o;const[n,a]=_.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return s.jsx(Is,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((o=t.gamification)==null?void 0:o.xp)||0," XP"]})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:vhe.map(c=>s.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),s.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},whe=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&s.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return s.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),s.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[s.jsx(Os,{className:"w-3 h-3"}),n.quest.title]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),s.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),s.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&s.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:s.jsx(_le,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),s.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:s.jsx(ec,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:s.jsx(Xn,{className:"w-5 h-5"})})]})]})]})]},a)})]}),X3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},She=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:o,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return s.jsx(Is,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:s.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),s.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),s.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),s.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),s.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),s.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),s.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),s.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"All Classes"}),Object.values(Dr).filter(h=>h!=="Uncategorized").map(h=>s.jsx("option",{value:h,children:h},h))]})]})]}),s.jsx(bg,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),s.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),s.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),s.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),s.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"COMMON",children:"Common"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&s.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),s.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),s.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),s.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),s.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),s.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),s.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[i&&s.jsx("button",{type:"button",disabled:o,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),s.jsx("button",{type:"submit",disabled:o,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:o?"Transmitting...":"Broadcast Mission"})]})]})})},Nhe={Operatives:"OPERATIVES","XP Protocols":"PROTOCOLS",Missions:"MISSIONS","Mission Control":"MISSION_CONTROL","Boss Ops":"BOSS_OPS",Tutoring:"TUTORING"},jhe=({users:t,initialTab:e})=>{const r=Pa(),{confirm:n}=Po(),a=e&&Nhe[e]||"OPERATIVES",[i,o]=_.useState(""),[c,d]=_.useState("All Classes"),[h,p]=_.useState("All Sections"),[m,x]=_.useState("xp"),[y,S]=_.useState("desc"),N=q=>{m===q?S(we=>we==="asc"?"desc":"asc"):(x(q),S("asc"))},w=({label:q,col:we,className:Ae})=>s.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Ae??""}`,onClick:()=>N(we),children:s.jsxs("div",{className:`flex items-center gap-1 ${Ae!=null&&Ae.includes("text-center")?"justify-center":Ae!=null&&Ae.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Wf,{className:`w-2.5 h-2.5 -mb-0.5 ${m===we&&y==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Wa,{className:`w-2.5 h-2.5 -mt-0.5 ${m===we&&y==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[T,C]=_.useState([]),[O,L]=_.useState([]),[I,R]=_.useState(null),[A,E]=_.useState(null),[k,U]=_.useState(!1),[P,$]=_.useState(!1),[B,G]=_.useState(X3),[K,H]=_.useState(!1),[ee,ae]=_.useState([]),[ce,fe]=_.useState(null),[Z,ne]=_.useState(""),[Y,de]=_.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Dr.AP_PHYSICS,targetSections:[]}),[ye,Ue]=_.useState([]),[Xe,Ye]=_.useState(!1),[_e,he]=_.useState(null),[Q,X]=_.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[Se,Ne]=_.useState(!1),Ke=_.useRef(null),[at,Rt]=_.useState(null),[Pe,lt]=_.useState([]),[Nt,vt]=_.useState("bosses"),[yt,me]=_.useState(!1),[We,mt]=_.useState(null),[Ze,et]=_.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),Et=_.useRef(null),[wt,pr]=_.useState(null),[be,nt]=_.useState([]),[jt,Pt]=_.useState(null),[Bt,tt]=_.useState([]),[ar,Ar]=_.useState(!1),[Hr,xn]=_.useState("pending"),[_r,Wt]=_.useState([]);_.useEffect(()=>{const q=De.subscribeToXPEvents(C),we=De.subscribeToQuests(L),Ae=De.subscribeToAllBossQuizzes(Ue),Ee=De.subscribeToAllTutoringSessions(Wt),ft=De.subscribeToBossQuestionBanks(lt);return()=>{q(),we(),Ae(),Ee(),ft()}},[]),_.useEffect(()=>{const q=[];t.forEach(we=>{var Ae,Ee;(Ee=(Ae=we.gamification)==null?void 0:Ae.activeQuests)==null||Ee.forEach(ft=>{const Mt=O.find(Ct=>Ct.id===ft.questId);Mt&&(ft.status==="DEPLOYED"||ft.status==="ACCEPTED")&&q.push({user:we,quest:Mt,status:ft.status,roll:ft.deploymentRoll,acceptedAt:ft.acceptedAt})})}),ae(q)},[t,O,a]);const Vt=_.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),_t=_.useMemo(()=>{const q=new Set;return Vt.forEach(we=>{we.classSections?Object.values(we.classSections).forEach(Ae=>{Ae&&q.add(Ae)}):we.section&&q.add(we.section)}),Array.from(q).sort()},[Vt]),Gr=_.useMemo(()=>{if(Y.type!=="CLASS_SPECIFIC"||!Y.targetClass)return _t;const q=cv(Vt,Y.targetClass);return q.length>0?q:_t},[Y.type,Y.targetClass,Vt,_t]),dn=_.useMemo(()=>{if(!B.targetClass)return _t;const q=cv(Vt,B.targetClass);return q.length>0?q:_t},[B.targetClass,Vt,_t]),en=_.useMemo(()=>{if(Q.classType==="GLOBAL"||!Q.classType)return _t;const q=cv(Vt,Q.classType);return q.length>0?q:_t},[Q.classType,Vt,_t]),Wr=q=>{var Ae,Ee;const we=(Ae=q.gamification)==null?void 0:Ae.classProfiles;return we&&Object.keys(we).length>0?Object.values(we).reduce((ft,Mt)=>ft+g0(Mt.equipped),0):g0((Ee=q.gamification)==null?void 0:Ee.equipped)},yn=_.useMemo(()=>Vt.filter(q=>{var Mt;const we=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),Ae=c==="All Classes"||q.classType===c||((Mt=q.enrolledClasses)==null?void 0:Mt.includes(c)),Ee=q.classSections?Object.values(q.classSections):[],ft=h==="All Sections"||q.section===h||Ee.includes(h);return we&&Ae&&ft}).sort((q,we)=>{var Ae,Ee,ft,Mt,Ct,Jt,Er,le,ve,Re;switch(m){case"name":return y==="asc"?q.name.localeCompare(we.name):we.name.localeCompare(q.name);case"class":return y==="asc"?(q.classType||"").localeCompare(we.classType||""):(we.classType||"").localeCompare(q.classType||"");case"level":{const Ve=((Ae=q.gamification)==null?void 0:Ae.level)||1,Fe=((Ee=we.gamification)==null?void 0:Ee.level)||1;return y==="asc"?Ve-Fe:Fe-Ve}case"flux":{const Ve=((ft=q.gamification)==null?void 0:ft.currency)||0,Fe=((Mt=we.gamification)==null?void 0:Mt.currency)||0;return y==="asc"?Ve-Fe:Fe-Ve}case"gear":{const Ve=Wr(q),Fe=Wr(we);return y==="asc"?Ve-Fe:Fe-Ve}case"xp":default:{const Ve=c!=="All Classes"?((Jt=(Ct=q.gamification)==null?void 0:Ct.classXp)==null?void 0:Jt[c])||0:((Er=q.gamification)==null?void 0:Er.xp)||0,Fe=c!=="All Classes"?((ve=(le=we.gamification)==null?void 0:le.classXp)==null?void 0:ve[c])||0:((Re=we.gamification)==null?void 0:Re.xp)||0;return y==="asc"?Ve-Fe:Fe-Ve}}}),[Vt,i,c,h,m,y]),hr=async(q,we)=>{try{await De.adjustUserXP(q.id,we,q.classType||Dr.UNCATEGORIZED),r.success(`${we>0?"+":""}${we} XP applied to ${q.name}.`)}catch{r.error("Failed to adjust XP.")}R(null)},Sa=async q=>{q.preventDefault();const we={id:Math.random().toString(36).substring(2,9),title:Y.title,multiplier:Y.multiplier,isActive:!0,type:Y.type};Y.type==="CLASS_SPECIFIC"&&(we.targetClass=Y.targetClass),Y.targetSections.length>0&&(we.targetSections=Y.targetSections),await De.saveXPEvent(we),U(!1),de({title:"",multiplier:2,type:"GLOBAL",targetClass:Dr.AP_PHYSICS,targetSections:[]})},vn=async q=>{q.preventDefault(),H(!0);try{const we={};B.techReq>0&&(we.tech=B.techReq),B.focusReq>0&&(we.focus=B.focusReq),B.analysisReq>0&&(we.analysis=B.analysisReq),B.charismaReq>0&&(we.charisma=B.charismaReq);const Ae=new Date;Ae.setHours(Ae.getHours()+(B.durationHours||0));const Ee={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!0,type:B.type,statRequirements:we,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:B.durationHours>0?Ae.toISOString():null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await De.saveQuest(Ee),r.success(`Mission "${Ee.title}" deployed.`),G(X3),$(!1)}catch(we){console.error("Failed to issue mission:",we),r.error("Failed to issue mission.")}finally{H(!1)}},Dn=async q=>{await De.saveXPEvent({...q,isActive:!q.isActive})},cs=async q=>{const we={...q,isActive:!q.isActive};we.isActive&&(we.expiresAt=null),await De.saveQuest(we)},Or=async(q,we,Ae)=>{var Mt,Ct;if(!await n({message:`Confiscate ${we.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const ft=(Ae?Hu(q,Ae):{inventory:((Mt=q.gamification)==null?void 0:Mt.inventory)||[]}).inventory.filter(Jt=>Jt.id!==we.id);await De.adminUpdateInventory(q.id,ft,((Ct=q.gamification)==null?void 0:Ct.currency)||0,Ae),E(Jt=>{var Er,le;return Jt?Ae&&((le=(Er=Jt.gamification)==null?void 0:Er.classProfiles)!=null&&le[Ae])?{...Jt,gamification:{...Jt.gamification,classProfiles:{...Jt.gamification.classProfiles,[Ae]:{...Jt.gamification.classProfiles[Ae],inventory:ft}}}}:{...Jt,gamification:{...Jt.gamification,inventory:ft}}:null})},bn=async(q,we,Ae)=>{var Mt;if(!await n({message:`Force unequip ${we} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const ft={...(Ae?Hu(q,Ae):{equipped:{...(Mt=q.gamification)==null?void 0:Mt.equipped}}).equipped};delete ft[we],await De.adminUpdateEquipped(q.id,ft,Ae),E(Ct=>{var Jt,Er;return Ct?Ae&&((Er=(Jt=Ct.gamification)==null?void 0:Jt.classProfiles)!=null&&Er[Ae])?{...Ct,gamification:{...Ct.gamification,classProfiles:{...Ct.gamification.classProfiles,[Ae]:{...Ct.gamification.classProfiles[Ae],equipped:ft}}}}:{...Ct,gamification:{...Ct.gamification,equipped:ft}}:null})},us=async(q,we)=>{var Ee,ft;const Ae=Math.max(0,(((Ee=q.gamification)==null?void 0:Ee.currency)||0)+we);await De.adminUpdateInventory(q.id,((ft=q.gamification)==null?void 0:ft.inventory)||[],Ae),E(Mt=>Mt?{...Mt,gamification:{...Mt.gamification,currency:Ae}}:null)},Zn=async(q,we,Ae,Ee)=>{try{await De.resolveQuest(q,we,Ae,Ee),r.success(Ae?`Mission "${we.title}" approved.`:`Mission "${we.title}" rejected.`)}catch{r.error("Failed to resolve mission.")}},on=async q=>{const we=q.quest.rollDieSides||20,Ae=Math.floor(Math.random()*we)+1;r.info(`Rolled a ${Ae} on a D${we}. ${Ae===we?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Zn(q.user.id,q.quest,Ae===we,q.user.classType)},wn=async q=>{try{await De.updateCodename(q,Z.trim().slice(0,24)),r.success("Code name updated.")}catch{r.error("Failed to update code name.")}fe(null)},kn=async(q,we)=>{try{await De.toggleCodenameLock(q,we),r.success(we?"Codename locked.":"Codename unlocked.")}catch{r.error("Failed to update lock.")}},ds=q=>{var we,Ae,Ee,ft,Mt;if(q)he(q),X({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((we=q.rewards)==null?void 0:we.xp)||500,rewardFlux:((Ae=q.rewards)==null?void 0:Ae.flux)||100,rewardItemRarity:((Ee=q.rewards)==null?void 0:Ee.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(Ct=>({...Ct,damageBonus:Ct.damageBonus||0})),targetSections:q.targetSections||[],bossType:((ft=q.bossAppearance)==null?void 0:ft.bossType)||"BRUTE",bossHue:((Mt=q.bossAppearance)==null?void 0:Mt.hue)??0}),nt(q.modifiers||[]);else{he(null);const Ct=new Date;Ct.setDate(Ct.getDate()+7),X({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:Ct.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),nt([])}Ye(!0)},Ja=()=>{X(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},Rs=(q,we,Ae)=>{X(Ee=>{const ft=[...Ee.questions];return ft[q]={...ft[q],[we]:Ae},{...Ee,questions:ft}})},pi=(q,we,Ae)=>{X(Ee=>{const ft=[...Ee.questions],Mt=[...ft[q].options];return Mt[we]=Ae,ft[q]={...ft[q],options:Mt},{...Ee,questions:ft}})},Ns=q=>{X(we=>({...we,questions:we.questions.filter((Ae,Ee)=>Ee!==q)}))},Tt=async q=>{if(q.preventDefault(),Q.questions.length===0){r.error("Add at least one question.");return}try{const we=[...new Set(Q.questions.map(Ee=>Ee.bankId).filter(Boolean))],Ae={id:(_e==null?void 0:_e.id)||Math.random().toString(36).substring(2,12),bossName:Q.bossName,description:Q.description,maxHp:Q.maxHp,currentHp:(_e==null?void 0:_e.currentHp)??Q.maxHp,classType:Q.classType,isActive:(_e==null?void 0:_e.isActive)??!0,deadline:new Date(Q.deadline).toISOString(),damagePerCorrect:Q.damagePerCorrect,questions:Q.questions.map(Ee=>({id:Ee.id,stem:Ee.stem,options:Ee.options.filter(ft=>ft.trim()),correctAnswer:Ee.correctAnswer,difficulty:Ee.difficulty,...Ee.damageBonus>0?{damageBonus:Ee.damageBonus}:{},...Ee.bankId?{bankId:Ee.bankId}:{}})),rewards:{xp:Q.rewardXp,flux:Q.rewardFlux,...Q.rewardItemRarity?{itemRarity:Q.rewardItemRarity}:{}},...Q.targetSections.length>0?{targetSections:Q.targetSections}:{},bossAppearance:{bossType:Q.bossType,hue:Q.bossHue},...be.length>0?{modifiers:be}:{},...we.length>0?{questionBankIds:we}:{}};await De.saveBossQuiz(Ae),r.success(_e?"Quiz boss updated.":"Quiz boss deployed!"),Ye(!1)}catch{r.error("Failed to save quiz boss.")}},pe=async q=>{await De.toggleBossQuizActive(q.id,!q.isActive)},rt=async q=>{await n({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await De.deleteBossQuiz(q.id),r.success("Quiz boss deleted."))},dt=q=>{q?(mt(q),et({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(we=>({...we,damageBonus:we.damageBonus||0}))})):(mt(null),et({name:"",classType:"GLOBAL",description:"",questions:[]})),pr(null),me(!0)},Yt=async q=>{if(q.preventDefault(),Ze.questions.length===0){r.error("Add at least one question.");return}try{const we=new Date().toISOString(),Ae={id:(We==null?void 0:We.id)||Math.random().toString(36).substring(2,12),name:Ze.name,classType:Ze.classType,description:Ze.description,questions:Ze.questions.map(Ee=>({id:Ee.id,stem:Ee.stem,options:Ee.options.filter(ft=>ft.trim()),correctAnswer:Ee.correctAnswer,difficulty:Ee.difficulty,...Ee.damageBonus>0?{damageBonus:Ee.damageBonus}:{}})),createdAt:(We==null?void 0:We.createdAt)||we,updatedAt:we};await De.saveBossQuestionBank(Ae),r.success(We?"Question bank updated.":"Question bank created!"),me(!1)}catch{r.error("Failed to save question bank.")}},xr=async q=>{await n({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await De.deleteBossQuestionBank(q.id),r.success("Question bank deleted."))},hn=async(q,we)=>{var ft;const Ae=(ft=q.target.files)==null?void 0:ft[0];if(!Ae)return;const Ee=we==="bank"?pr:Rt;Ee(null);try{let Ct=(await Ae.text()).replace(/```json\s*|```\s*/g,"").trim();Ct=Ct.replace(/[\x00-\x1F\x7F]/g,Re=>Re===`
`||Re==="\r"||Re==="	"?" ":"");let Jt;try{Jt=JSON.parse(Ct)}catch{const Re=Ct.match(/\[[\s\S]*\]/);if(Re)try{Jt=JSON.parse(Re[0])}catch{let Ve=null;for(let Fe=Re[0].length-1;Fe>0;Fe--)if(Re[0][Fe]==="}")try{Ve=JSON.parse(Re[0].slice(0,Fe+1)+"]");break}catch{}if(Ve)Jt=Ve;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(Jt)||Jt.length===0)throw new Error("Must be a non-empty JSON array.");const Er=Jt.filter(Re=>Re.stem&&Re.options&&Re.correctAnswer!==void 0);if(Er.length===0)throw new Error("No valid questions found.");const le=Er.map(Re=>({id:Re.id||Math.random().toString(36).substring(2,10),stem:Re.stem,options:Re.options.slice(0,4),correctAnswer:typeof Re.correctAnswer=="number"?Re.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(Re.difficulty)?Re.difficulty:"MEDIUM",damageBonus:typeof Re.damageBonus=="number"?Re.damageBonus:0})),ve=Jt.length-Er.length;we==="bank"?et(Re=>({...Re,questions:[...Re.questions,...le]})):X(Re=>({...Re,questions:[...Re.questions,...le]})),r.success(`Imported ${le.length} questions${ve>0?` (${ve} skipped)`:""}`)}catch(Mt){Ee(Mt instanceof Error?Mt.message:"Import failed."),r.error("Failed to import questions.")}we==="bank"&&Et.current&&(Et.current.value=""),we==="boss"&&Ke.current&&(Ke.current.value="")},tn=q=>{const we=q.questions.map(Ae=>({...Ae,damageBonus:Ae.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));X(Ae=>({...Ae,questions:[...Ae.questions,...we]})),r.success(`Imported ${we.length} questions from "${q.name}"`)},Sn=q=>{nt(we=>{if(we.find(ft=>ft.type===q))return we.filter(ft=>ft.type!==q);const Ee=x_[q];return[...we,{type:q,...Ee.hasValue?{value:Ee.defaultValue}:{}}]})},Br=(q,we)=>{nt(Ae=>Ae.map(Ee=>Ee.type===q?{...Ee,value:we}:Ee))},$i=async q=>{Pt(q),Ar(!0);try{const we=await De.getBossQuizAllProgress(q.id);tt(we)}catch{r.error("Failed to load endgame data.")}Ar(!1)},mi=(q,we)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${we||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,go=()=>{const q=mi(Q.bossName,Q.classType);navigator.clipboard.writeText(q),Ne(!0),setTimeout(()=>Ne(!1),2500),r.success("Prompt copied to clipboard!")},wl=q=>hn(q,"boss"),gi=async(q,we)=>{try{const Ae=await De.completeTutoring(q,we);r.success(`Verified! Tutor earned ${Ae.xpAwarded} XP and ${Ae.fluxAwarded} Flux`)}catch{r.error("Failed to verify session")}},xi=async q=>{if(await n({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await De.cancelTutoringSession(q),r.success("Session cancelled.")}catch{r.error("Failed to cancel session")}},Ba=_r.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),Na={OPERATIVES:"Operatives",PROTOCOLS:"XP Protocols",MISSIONS:"Missions",MISSION_CONTROL:"Mission Control",BOSS_OPS:"Boss Ops",TUTORING:"Tutoring"};return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:Na[a]}),s.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="PROTOCOLS"&&s.jsxs("button",{onClick:()=>U(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[s.jsx(YH,{className:"w-4 h-4"})," Deploy Protocol"]}),a==="MISSIONS"&&s.jsxs("button",{onClick:()=>$(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[s.jsx(Z2,{className:"w-4 h-4"})," Issue Mission"]}),a==="BOSS_OPS"&&s.jsxs("button",{onClick:()=>ds(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[s.jsx(Ro,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:s.jsxs("div",{className:"p-6",children:[a==="OPERATIVES"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Kf,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>o(q.target.value)})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[yn.length," operatives"]}),s.jsxs("div",{className:"relative",children:[s.jsx(kle,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Classes"}),Object.values(Dr).map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(Wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),_t.length>0&&s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Sections"}),_t.map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(Wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[s.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),s.jsx(w,{label:"Class",col:"class"}),s.jsx(w,{label:"Level",col:"level",className:"text-center"}),s.jsx(w,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),s.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),s.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),s.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:yn.map(q=>{var ft,Mt,Ct,Jt,Er,le,ve,Re,Ve;const we=((ft=q.gamification)==null?void 0:ft.level)||1,Ae=((Mt=q.gamification)==null?void 0:Mt.currency)||0,Ee=q.enrolledClasses||(q.classType?[q.classType]:[]);return s.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"py-3 pl-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),ce===q.id?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{autoFocus:!0,value:Z,onChange:Fe=>ne(Fe.target.value),maxLength:24,onKeyDown:Fe=>{Fe.key==="Enter"&&wn(q.id),Fe.key==="Escape"&&fe(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),s.jsx("button",{onClick:()=>wn(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:s.jsx(ec,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>fe(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:s.jsx(Xn,{className:"w-3 h-3"})})]}):s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:()=>{var Fe;fe(q.id),ne(((Fe=q.gamification)==null?void 0:Fe.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((Ct=q.gamification)==null?void 0:Ct.codename)||"UNASSIGNED",s.jsx(T3,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),s.jsx("button",{onClick:()=>{var Fe;return kn(q.id,!((Fe=q.gamification)!=null&&Fe.codenameLocked))},className:`transition ${(Jt=q.gamification)!=null&&Jt.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Er=q.gamification)!=null&&Er.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(le=q.gamification)!=null&&le.codenameLocked?s.jsx(df,{className:"w-2.5 h-2.5"}):s.jsx(Ple,{className:"w-2.5 h-2.5"})})]})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Ee.map(Fe=>s.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:Fe},Fe))})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-lg font-black text-white",children:we})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((Re=(ve=q.gamification)==null?void 0:ve.classXp)==null?void 0:Re[c])||0:((Ve=q.gamification)==null?void 0:Ve.xp)||0).toLocaleString()})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Ae})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:Wr(q)})}),s.jsx("td",{className:"py-3 text-right pr-4",children:s.jsxs("div",{className:"flex justify-end gap-1.5",children:[s.jsxs("button",{onClick:()=>E(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(eb,{className:"w-3 h-3"})," Inventory"]}),s.jsxs("button",{onClick:()=>R(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),a==="PROTOCOLS"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[T.map(q=>s.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&s.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx($n,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>De.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(gr,{className:"w-4 h-4"})})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),s.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),s.jsx("button",{onClick:()=>Dn(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),s.jsxs("button",{onClick:()=>U(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx(Tr,{className:"w-6 h-6"})}),s.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),a==="MISSIONS"&&s.jsx("div",{className:"space-y-4",children:O.map(q=>s.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(cl,{className:"w-7 h-7"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),s.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&s.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([we,Ae])=>s.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Ae," ",we]},we))}),s.jsxs("div",{className:"flex gap-3 mt-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("button",{onClick:()=>cs(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),s.jsx("button",{onClick:()=>De.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(gr,{className:"w-4 h-4"})})]})]},q.id))}),a==="MISSION_CONTROL"&&s.jsx(whe,{deployments:ee,onResolveQuest:Zn,onRollForSalvation:on}),a==="BOSS_OPS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>vt("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Nt==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Fh,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",ye.length,")"]}),s.jsxs("button",{onClick:()=>vt("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Nt==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Uh,{className:"w-3 h-3 inline mr-1"})," Question Banks (",Pe.length,")"]})]}),Nt==="bosses"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),ye.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Ro,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),s.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),ye.map(q=>{var ft,Mt;const we=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,Ae=new Date(q.deadline)<new Date,Ee=(q.currentHp??q.maxHp)<=0||!q.isActive;return s.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!Ae?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!Ae?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(Ro,{className:"w-7 h-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),s.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(ft=q.modifiers)!=null&&ft.length?s.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(Mt=q.targetSections)!=null&&Mt.length?s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,Ae&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),Ee&&s.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),s.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:s.jsx("div",{className:`h-full rounded-full transition-all ${we>50?"bg-amber-500":we>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${we}%`}})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ee&&s.jsxs("button",{onClick:()=>$i(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(C0,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),s.jsxs("button",{onClick:()=>ds(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(T3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>pe(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("button",{onClick:()=>rt(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(gr,{className:"w-4 h-4"})})]})]},q.id)})]}),Nt==="banks"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),s.jsxs("button",{onClick:()=>dt(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[s.jsx(Tr,{className:"w-3 h-3"})," New Bank"]})]}),Pe.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Uh,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No question banks yet."}),s.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),Pe.map(q=>s.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:s.jsx(Uh,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&s.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>dt(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[s.jsx(T3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>xr(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(gr,{className:"w-4 h-4"})})]})]},q.id))]})]}),a==="TUTORING"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>xn("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Hr==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",Ba.length,")"]}),s.jsxs("button",{onClick:()=>xn("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Hr==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",_r.length,")"]})]}),(Hr==="pending"?Ba:_r).length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(ll,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:Hr==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(Hr==="pending"?Ba:_r).map(q=>s.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx($le,{className:"w-4 h-4 text-gray-500"}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),s.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["Requester: ",s.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&s.jsxs("span",{children:["Tutor: ",s.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),s.jsxs("span",{children:["Class: ",s.jsx("span",{className:"text-purple-400",children:q.classType})]}),s.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&s.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&s.jsxs("button",{onClick:()=>gi(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(zr,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>xi(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Xn,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&s.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[s.jsx(zr,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})}),s.jsx(yhe,{user:A,onClose:()=>E(null),onDeleteItem:Or,onUnequipItem:bn,onGrantFlux:us}),s.jsx(She,{isOpen:P,onClose:()=>$(!1),form:B,setForm:G,onSubmit:vn,onSaveDraft:async()=>{const q={};B.techReq>0&&(q.tech=B.techReq),B.focusReq>0&&(q.focus=B.focusReq),B.analysisReq>0&&(q.analysis=B.analysisReq),B.charismaReq>0&&(q.charisma=B.charismaReq);const we={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!1,type:B.type,statRequirements:q,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await De.saveQuest(we),r.success("Mission saved as draft (standby)."),G(X3),$(!1)},isSubmitting:K,availableSections:dn}),s.jsx(Is,{isOpen:k,onClose:()=>U(!1),title:"New XP Protocol Deployment",children:s.jsxs("form",{onSubmit:Sa,className:"space-y-4 text-gray-100 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),s.jsx("input",{value:Y.title,onChange:q=>de({...Y,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),s.jsx("input",{type:"number",step:"0.5",value:Y.multiplier,onChange:q=>de({...Y,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),s.jsxs("select",{value:Y.type,onChange:q=>de({...Y,type:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[s.jsx("option",{value:"GLOBAL",children:"Global Node"}),s.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),Y.type==="CLASS_SPECIFIC"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),s.jsx("select",{value:Y.targetClass,onChange:q=>de({...Y,targetClass:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Dr).map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsx(bg,{availableSections:Gr,selectedSections:Y.targetSections,onChange:q=>de({...Y,targetSections:q})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:async()=>{const q={id:Math.random().toString(36).substring(2,9),title:Y.title,multiplier:Y.multiplier,isActive:!1,type:Y.type,...Y.type==="CLASS_SPECIFIC"?{targetClass:Y.targetClass}:{},...Y.targetSections.length>0?{targetSections:Y.targetSections}:{}};await De.saveXPEvent(q),U(!1),de({title:"",multiplier:2,type:"GLOBAL",targetClass:Dr.AP_PHYSICS,targetSections:[]}),r.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),s.jsx(bhe,{user:I,onClose:()=>R(null),onAdjust:hr}),s.jsx(Is,{isOpen:Xe,onClose:()=>Ye(!1),title:_e?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:Tt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),s.jsx("input",{value:Q.bossName,onChange:q=>X({...Q,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("textarea",{value:Q.description,onChange:q=>X({...Q,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:s.jsx(lW,{bossType:Q.bossType,hue:Q.bossHue})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),s.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>s.jsx("button",{type:"button",onClick:()=>X({...Q,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${Q.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",Q.bossHue,""]}),s.jsx("input",{type:"range",min:"0",max:"360",value:Q.bossHue,onChange:q=>X({...Q,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),s.jsx("input",{type:"number",value:Q.maxHp,onChange:q=>X({...Q,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),s.jsx("input",{type:"number",value:Q.damagePerCorrect,onChange:q=>X({...Q,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:Q.classType,onChange:q=>X({...Q,classType:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Dr).map(q=>s.jsx("option",{value:q,children:q},q))]})]})]}),s.jsx(bg,{availableSections:en,selectedSections:Q.targetSections,onChange:q=>X({...Q,targetSections:q})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),s.jsx("input",{type:"datetime-local",value:Q.deadline,onChange:q=>X({...Q,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),s.jsx("input",{type:"number",value:Q.rewardXp,onChange:q=>X({...Q,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),s.jsx("input",{type:"number",value:Q.rewardFlux,onChange:q=>X({...Q,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),s.jsxs("select",{value:Q.rewardItemRarity,onChange:q=>X({...Q,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",be.length," active)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(x_).map(([q,we])=>{const Ae=be.find(Ee=>Ee.type===q);return s.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${Ae?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[s.jsxs("button",{type:"button",onClick:()=>Sn(q),className:"w-full text-left",children:[s.jsx("div",{className:"text-[10px] font-bold text-white",children:we.name}),s.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:we.description})]}),Ae&&we.hasValue&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("input",{type:"number",value:Ae.value??we.defaultValue,onChange:Ee=>Br(q,parseInt(Ee.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),s.jsx("span",{className:"text-[9px] text-gray-500",children:we.unit})]})]},q)})})]}),Pe.length>0&&s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Pe.filter(q=>q.classType===Q.classType||q.classType==="GLOBAL"||Q.classType==="GLOBAL").map(q=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),s.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),s.jsxs("button",{type:"button",onClick:()=>tn(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",Q.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:go,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${Se?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:Se?s.jsxs(s.Fragment,{children:[s.jsx(ec,{className:"w-3 h-3"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(d0,{className:"w-3 h-3"})," Copy AI Prompt"]})}),s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(ul,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Ke,type:"file",accept:".json,.txt",onChange:wl,className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:Ja,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Manual"]})]})]}),at&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[s.jsx(Xn,{className:"w-4 h-4 flex-shrink-0"}),at,s.jsx("button",{type:"button",onClick:()=>Rt(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Xn,{className:"w-3 h-3"})})]}),Q.questions.length===0&&s.jsxs("div",{className:"text-center py-6 space-y-2",children:[s.jsx(rb,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),s.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",s.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",s.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),Q.questions.map((q,we)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",we+1]}),s.jsx("textarea",{value:q.stem,onChange:Ae=>Rs(we,"stem",Ae.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),s.jsx("button",{type:"button",onClick:()=>Ns(we),className:"text-gray-600 hover:text-red-400 mt-4",children:s.jsx(gr,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((Ae,Ee)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>Rs(we,"correctAnswer",Ee),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ee?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:s.jsx(ec,{className:"w-3 h-3"})}),s.jsx("input",{value:Ae,onChange:ft=>pi(we,Ee,ft.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+Ee)}`,required:!0})]},Ee))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:q.difficulty,onChange:Ae=>Rs(we,"difficulty",Ae.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Ae=>Rs(we,"damageBonus",parseInt(Ae.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),s.jsxs("div",{className:"flex gap-3",children:[!_e&&s.jsx("button",{type:"button",onClick:async()=>{if(Q.questions.length===0){r.error("Add at least one question.");return}const q=[...new Set(Q.questions.map(Ae=>Ae.bankId).filter(Boolean))],we={id:Math.random().toString(36).substring(2,12),bossName:Q.bossName,description:Q.description,maxHp:Q.maxHp,currentHp:Q.maxHp,classType:Q.classType,isActive:!1,deadline:Q.deadline?new Date(Q.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:Q.damagePerCorrect,questions:Q.questions.map(Ae=>({id:Ae.id,stem:Ae.stem,options:Ae.options.filter(Ee=>Ee.trim()),correctAnswer:Ae.correctAnswer,difficulty:Ae.difficulty,...Ae.damageBonus>0?{damageBonus:Ae.damageBonus}:{},...Ae.bankId?{bankId:Ae.bankId}:{}})),rewards:{xp:Q.rewardXp,flux:Q.rewardFlux,...Q.rewardItemRarity?{itemRarity:Q.rewardItemRarity}:{}},...Q.targetSections.length>0?{targetSections:Q.targetSections}:{},bossAppearance:{bossType:Q.bossType,hue:Q.bossHue},...be.length>0?{modifiers:be}:{},...q.length>0?{questionBankIds:q}:{}};await De.saveBossQuiz(we),r.success("Quiz boss saved as draft (inactive)."),Ye(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:`${_e?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:_e?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),s.jsx(Is,{isOpen:yt,onClose:()=>me(!1),title:We?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:Yt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),s.jsx("input",{value:Ze.name,onChange:q=>et({...Ze,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),s.jsxs("select",{value:Ze.classType,onChange:q=>et({...Ze,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Dr).map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("input",{value:Ze.description,onChange:q=>et({...Ze,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",Ze.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(ul,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Et,type:"file",accept:".json,.txt",onChange:q=>hn(q,"bank"),className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:()=>et(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Manual"]})]})]}),wt&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[s.jsx(Xn,{className:"w-4 h-4 flex-shrink-0"})," ",wt,s.jsx("button",{type:"button",onClick:()=>pr(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Xn,{className:"w-3 h-3"})})]}),Ze.questions.length===0&&s.jsxs("div",{className:"text-center py-6",children:[s.jsx(rb,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),Ze.questions.map((q,we)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:q.stem,onChange:Ae=>{const Ee=[...Ze.questions];Ee[we]={...Ee[we],stem:Ae.target.value},et({...Ze,questions:Ee})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${we+1}`,required:!0})}),s.jsx("button",{type:"button",onClick:()=>et(Ae=>({...Ae,questions:Ae.questions.filter((Ee,ft)=>ft!==we)})),className:"text-gray-600 hover:text-red-400 mt-2",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((Ae,Ee)=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>{const ft=[...Ze.questions];ft[we]={...ft[we],correctAnswer:Ee},et({...Ze,questions:ft})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ee?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:s.jsx(ec,{className:"w-2.5 h-2.5"})}),s.jsx("input",{value:Ae,onChange:ft=>{const Mt=[...Ze.questions],Ct=[...Mt[we].options];Ct[Ee]=ft.target.value,Mt[we]={...Mt[we],options:Ct},et({...Ze,questions:Mt})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+Ee)}`,required:!0})]},Ee))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:q.difficulty,onChange:Ae=>{const Ee=[...Ze.questions];Ee[we]={...Ee[we],difficulty:Ae.target.value},et({...Ze,questions:Ee})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Ae=>{const Ee=[...Ze.questions];Ee[we]={...Ee[we],damageBonus:parseInt(Ae.target.value)||0},et({...Ze,questions:Ee})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:We?"Update Question Bank":"Create Question Bank"})]})}),s.jsx(Is,{isOpen:!!jt,onClose:()=>{Pt(null),tt([])},title:jt?`Endgame: ${jt.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:ar?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):jt&&s.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-white",children:Bt.length}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-amber-400",children:Bt.reduce((q,we)=>{var Ae;return q+(((Ae=we.combatStats)==null?void 0:Ae.totalDamageDealt)||0)},0).toLocaleString()}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-green-400",children:Bt.reduce((q,we)=>{var Ae;return q+(((Ae=we.combatStats)==null?void 0:Ae.questionsCorrect)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-red-400",children:Bt.reduce((q,we)=>{var Ae;return q+(((Ae=we.combatStats)==null?void 0:Ae.criticalHits)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[s.jsx(HH,{className:"w-4 h-4"})," Top Damage Dealers"]}),s.jsx("div",{className:"space-y-2",children:[...Bt].sort((q,we)=>{var Ae,Ee;return(((Ae=we.combatStats)==null?void 0:Ae.totalDamageDealt)||0)-(((Ee=q.combatStats)==null?void 0:Ee.totalDamageDealt)||0)}).slice(0,5).map((q,we)=>{var Er;const Ae=t.find(le=>le.id===q.userId),Ee=q.combatStats,ft=we,Mt=ft<qI.length?qI[ft]:1,Ct=((Ee==null?void 0:Ee.questionsAttempted)||0)>=Ym&&((Ee==null?void 0:Ee.questionsCorrect)||0)>=Jm,Jt=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${we===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[s.jsxs("div",{className:`text-xl font-black w-8 text-center ${Jt[we]||"text-gray-500"}`,children:["#",we+1]}),(Ae==null?void 0:Ae.avatarUrl)&&s.jsx("img",{src:Ae.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-white truncate",children:(Ae==null?void 0:Ae.name)||q.userId}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{className:"text-amber-400 font-bold",children:[((Er=Ee==null?void 0:Ee.totalDamageDealt)==null?void 0:Er.toLocaleString())||0," dmg"]}),s.jsxs("span",{children:[(Ee==null?void 0:Ee.questionsCorrect)||0,"/",(Ee==null?void 0:Ee.questionsAttempted)||0," correct"]}),s.jsxs("span",{children:[(Ee==null?void 0:Ee.criticalHits)||0," crits"]}),s.jsxs("span",{children:["Streak: ",(Ee==null?void 0:Ee.longestStreak)||0]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:Ct?s.jsxs("span",{className:`text-xs font-bold ${we<5?Jt[we]:"text-gray-400"}`,children:[Mt,"x"]}):s.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[s.jsx(Uu,{className:"w-4 h-4"})," All Participants"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[s.jsx("th",{className:"pb-2 pl-2",children:"#"}),s.jsx("th",{className:"pb-2",children:"Student"}),s.jsx("th",{className:"pb-2 text-center",children:"Damage"}),s.jsx("th",{className:"pb-2 text-center",children:"Correct"}),s.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),s.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),s.jsx("th",{className:"pb-2 text-center",children:"Crits"}),s.jsx("th",{className:"pb-2 text-center",children:"Streak"}),s.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),s.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:[...Bt].sort((q,we)=>{var Ae,Ee;return(((Ae=we.combatStats)==null?void 0:Ae.totalDamageDealt)||0)-(((Ee=q.combatStats)==null?void 0:Ee.totalDamageDealt)||0)}).map((q,we)=>{const Ae=t.find(Er=>Er.id===q.userId),Ee=q.combatStats,ft=(Ee==null?void 0:Ee.questionsAttempted)||0,Mt=(Ee==null?void 0:Ee.questionsCorrect)||0,Ct=ft>0?Math.round(Mt/ft*100):0,Jt=ft>=Ym&&Mt>=Jm;return s.jsxs("tr",{className:"hover:bg-white/5",children:[s.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:we+1}),s.jsx("td",{className:"py-2 font-bold text-white",children:(Ae==null?void 0:Ae.name)||q.userId.slice(0,8)}),s.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((Ee==null?void 0:Ee.totalDamageDealt)||0).toLocaleString()}),s.jsx("td",{className:"py-2 text-center text-green-400",children:Mt}),s.jsx("td",{className:"py-2 text-center text-gray-400",children:ft}),s.jsxs("td",{className:"py-2 text-center text-gray-300",children:[Ct,"%"]}),s.jsx("td",{className:"py-2 text-center text-red-400",children:(Ee==null?void 0:Ee.criticalHits)||0}),s.jsx("td",{className:"py-2 text-center text-purple-400",children:(Ee==null?void 0:Ee.longestStreak)||0}),s.jsx("td",{className:"py-2 text-center text-cyan-400",children:(Ee==null?void 0:Ee.damageReduced)||0}),s.jsx("td",{className:"py-2 text-center",children:Jt?s.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):s.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const we=Bt.reduce((Ct,Jt)=>{var Er,le;return Ct+(((le=(Er=Jt.combatStats)==null?void 0:Er.correctByDifficulty)==null?void 0:le[q])||0)},0),Ae=Bt.reduce((Ct,Jt)=>{var Er,le;return Ct+(((le=(Er=Jt.combatStats)==null?void 0:Er.incorrectByDifficulty)==null?void 0:le[q])||0)},0),Ee=we+Ae,ft=Ee>0?Math.round(we/Ee*100):0,Mt=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return s.jsxs("div",{className:`bg-${Mt}-500/5 border border-${Mt}-500/20 rounded-xl p-3 text-center`,children:[s.jsx("div",{className:`text-[10px] font-bold text-${Mt}-400 uppercase mb-1`,children:q}),s.jsxs("div",{className:"text-lg font-black text-white",children:[ft,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[we,"/",Ee," correct"]})]},q)})})]})]})})]})},_he=({students:t,availableSections:e,fullPage:r})=>{const{confirm:n}=Po(),a=Pa(),[i,o]=_.useState({}),[c,d]=_.useState(Dr.AP_PHYSICS),[h,p]=_.useState(!1),[m,x]=_.useState(""),[y,S]=_.useState(null),[N,w]=_.useState(""),[T,C]=_.useState(""),O=_.useMemo(()=>Object.values(Dr).filter(P=>P!=="Uncategorized"),[]);_.useEffect(()=>{const P=De.subscribeToStudentGroups(c,$=>{o(B=>({...B,[c]:$}))});return()=>P()},[c]);const L=i[c]||[],I=_.useMemo(()=>t.filter(P=>{var $;return P.role==="STUDENT"&&(($=P.enrolledClasses)==null?void 0:$.includes(c))}).filter(P=>!N||P.section===N),[t,c,N]),R=async()=>{if(m.trim())try{await De.createStudentGroup(m.trim(),c,[]),x(""),p(!1),a.success("Group created.")}catch{a.error("Failed to create group.")}},A=async P=>{await n({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await De.deleteStudentGroup(P)},E=async(P,$)=>{if(P.members.some(G=>G.userId===$.id))return;const B=[...P.members,{userId:$.id,userName:$.name}];await De.updateStudentGroup(P.id,{members:B})},k=async(P,$)=>{const B=P.members.filter(G=>G.userId!==$);await De.updateStudentGroup(P.id,{members:B})},U=_.useMemo(()=>{var $;const P={};for(const B of O)P[B]=(($=i[B])==null?void 0:$.length)||0;return P},[O,i]);return r?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Student Groups"}),s.jsx("p",{className:"text-gray-400",children:"Create and manage student groups across all classes."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-cyan-900/20",children:[s.jsx(Tr,{className:"w-4 h-4"})," New Group"]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:O.map(P=>s.jsxs("button",{onClick:()=>d(P),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${c===P?"bg-purple-600/80 text-white border-purple-500/50 shadow-lg":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white"}`,children:[P,U[P]>0&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full ${c===P?"bg-white/20":"bg-white/10"}`,children:U[P]})]},P))}),h&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-white mb-3",children:["Create Group for ",c]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:m,onChange:P=>x(P.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-cyan-500 transition",onKeyDown:P=>P.key==="Enter"&&R(),autoFocus:!0}),s.jsx("button",{onClick:R,disabled:!m.trim(),className:"px-5 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>{p(!1),x("")},className:"p-3 text-gray-400 hover:text-white transition",children:s.jsx(Xn,{className:"w-5 h-5"})})]})]}),L.length===0?s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-12 backdrop-blur-md text-center",children:[s.jsx(di,{className:"w-14 h-14 mx-auto mb-4 text-gray-600"}),s.jsxs("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:["No groups for ",c]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a group to get started with collaborative assignments and group chat."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:L.map(P=>s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md hover:border-white/20 transition-all",children:[s.jsx("div",{className:"p-5 border-b border-white/5",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:P.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[P.members.length," member",P.members.length!==1?"s":"",s.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),c]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>S(y===P.id?null:P.id),className:`p-2 rounded-lg transition ${y===P.id?"bg-cyan-500/20 text-cyan-400":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Add members",children:s.jsx(ob,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>A(P.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition",title:"Delete group",children:s.jsx(gr,{className:"w-4 h-4"})})]})]})}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[P.members.map($=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/10 transition group/member",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[9px] font-bold text-purple-400",children:$.userName.charAt(0)}),$.userName,s.jsx("button",{onClick:()=>k(P,$.userId),className:"text-gray-600 hover:text-red-400 transition opacity-0 group-hover/member:opacity-100",children:s.jsx(ece,{className:"w-3 h-3"})})]},$.userId)),P.members.length===0&&s.jsxs("p",{className:"text-xs text-gray-600 italic py-2",children:["No members yet  click the ",s.jsx(ob,{className:"w-3 h-3 inline"})," button to assign students."]})]}),y===P.id&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Kf,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:T,onChange:$=>C($.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg pl-8 pr-3 py-1.5 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"})]}),e.length>0&&s.jsxs("select",{value:N,onChange:$=>w($.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-white",children:[s.jsx("option",{value:"",children:"All Sections"}),e.map($=>s.jsx("option",{value:$,children:$},$))]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-40 overflow-y-auto custom-scrollbar",children:I.filter($=>!P.members.some(B=>B.userId===$.id)).filter($=>!T||$.name.toLowerCase().includes(T.toLowerCase())).map($=>s.jsxs("button",{onClick:()=>E(P,$),className:"px-3 py-1.5 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-xs text-cyan-300 font-medium transition",children:["+ ",$.name]},$.id))})]})]})]},P.id))})]}):s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx(di,{className:"w-5 h-5 text-cyan-400"})," Student Groups"]}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Groups have moved to the sidebar for a better experience."})]})},The={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:s.jsx(QH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:s.jsx(qH,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:s.jsx(sw,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},Ahe=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=_.useState(null),[a,i]=_.useState(!1),o=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[s.jsxs("button",{onClick:()=>o("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[s.jsx(sw,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),s.jsxs("button",{onClick:()=>o("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[s.jsx(qH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),s.jsxs("button",{onClick:()=>o("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[s.jsx(QH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&s.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[s.jsx(p0,{className:"w-6 h-6"}),e&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=The[r];return s.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[s.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),s.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?s.jsx(rT,{className:"w-4 h-4"}):s.jsx(WH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:s.jsx(Xn,{className:"w-4 h-4"})})]})]}),!a&&s.jsx("div",{className:"flex-1 bg-white relative",children:s.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},Ehe=["","","","","","","",""],Che=["","","","","","","","","","","","","","","","","","","","","","","","","",""],khe=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:o,onOpenResource:c})=>{var vt,yt;const{confirm:d}=Po(),[h,p]=_.useState([]),[m,x]=_.useState(""),[y,S]=_.useState("Main"),[N,w]=_.useState(!1),[T,C]=_.useState(!1),[O,L]=_.useState(null),[I,R]=_.useState(null),[A,E]=_.useState([]),[k,U]=_.useState([]),[P,$]=_.useState(null),[B,G]=_.useState([]),[K,H]=_.useState(null),ee=_.useRef(null),ae=_.useRef(null),ce=_.useRef(null),fe=_.useMemo(()=>Object.values(Dr).filter(me=>{var et;if(me===Dr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const We=a.find(Et=>Et.className===me),mt=(et=t.enrolledClasses)==null?void 0:et.includes(me),Ze=We?We.features.communications:!0;return mt&&Ze}),[a,t.role,t.enrolledClasses]),[Z,ne]=_.useState(fe[0]||"");_.useEffect(()=>{(!Z||!fe.includes(Z))&&fe.length>0&&ne(fe[0])},[fe]);const Y=_.useMemo(()=>y==="Resources"&&I?`res_${I}`:y==="Resources"&&!I?"":y==="Groups"&&P?`group_${P}`:y==="Groups"&&!P||!Z?"":`class_${Z.replace(/\s+/g,"_").toLowerCase()}`,[Z,y,I,P]),de=_.useRef(null),ye=_.useMemo(()=>n.filter(me=>!(me.classType!==Z||me.status==="DRAFT"||me.status==="ARCHIVED"||me.scheduledAt&&new Date(me.scheduledAt)>new Date)),[n,Z]),Ue=_.useMemo(()=>h.filter(me=>{var We;return me.isGlobalPinned||((We=me.pinnedBy)==null?void 0:We.includes(t.id))}),[h,t.id]),Xe=_.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),Ye=_.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(me=>me.startsWith("class_")),[i]),_e=_.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(me=>me.startsWith("res_")),[i]),he=_.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(me=>me.startsWith("group_")),[i]),Q=_.useRef(!1);_.useEffect(()=>{if(!e){Q.current=!1;return}if(Q.current||!i||i.size===0)return;Q.current=!0;const me=Array.from(i)[0];if(me.startsWith("class_")){S("Main");const We=fe.find(mt=>`class_${mt.replace(/\s+/g,"_").toLowerCase()}`===me);We&&ne(We)}else me.startsWith("res_")?(S("Resources"),R(me.replace("res_",""))):me.startsWith("group_")&&(S("Groups"),$(me.replace("group_","")))},[e,i,fe]),_.useEffect(()=>{!e||!Y||o==null||o(Y)},[e,Y,o]),_.useEffect(()=>{if(!e)return;const me=t.role==="ADMIN"?De.subscribeToStudentGroups(Z,E):De.subscribeToMyGroups(t.id,E);return()=>me()},[e,t.id,t.role,Z]),_.useEffect(()=>{if(!e)return;let me="";if(y==="Resources"&&I?me=`res_${I}`:y==="Groups"&&P?me=`group_${P}`:(y==="Main"||y==="Bookmarks")&&(me=`class_${Z.replace(/\s+/g,"_").toLowerCase()}`),!me)return;w(!0);const We=De.subscribeToChannelMessages(me,mt=>{p(mt),w(!1)});return()=>{We()}},[e,Z,y,I,P]),_.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const me=De.subscribeToFlaggedMessages(mt=>{G(mt)}),We=De.subscribeToAllGroups(U);return()=>{me(),We()}},[e,t.role]),_.useEffect(()=>{de.current&&(de.current.scrollTop=de.current.scrollHeight)},[h,N,y,I]),_.useEffect(()=>{const me=We=>{ee.current&&!ee.current.contains(We.target)&&C(!1),ae.current&&!ae.current.contains(We.target)&&L(null)};return document.addEventListener("mousedown",me),()=>document.removeEventListener("mousedown",me)},[]),_.useEffect(()=>{if(!e)return;const me=We=>{We.key==="Escape"&&r()};return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[e,r]);const X=_.useCallback(async me=>{if(me.preventDefault(),!(!m.trim()||!Y)&&!Xe)try{await De.sendMessage(t,m,Y,Z),x(""),C(!1)}catch(We){console.error("Failed to send message:",We)}},[m,Y,Xe,t,Z]),Se=_.useCallback(async(me,We)=>{try{await De.toggleReaction(me,We,t.id),L(null)}catch(mt){console.error(mt)}},[t.id]),Ne=_.useCallback(async me=>{try{await De.togglePersonalPin(me,t.id)}catch(We){console.error(We)}},[t.id]),Ke=_.useCallback(async(me,We)=>{try{await De.toggleGlobalPin(me,!We)}catch(mt){console.error(mt)}},[]),at=async me=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await De.deleteMessage(me)}catch(We){console.error(We)}},Rt=async me=>{try{await De.unflagMessage(me),await De.resolveFlagByMessageId(me)}catch(We){console.error(We)}},Pe=async me=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await De.resolveFlagByMessageId(me),await De.deleteMessage(me)}catch(We){console.error(We)}},lt=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:De.INDEFINITE_MUTE}],Nt=async me=>{if(K){try{await De.muteUser(K.senderId,me)}catch(We){console.error(We)}H(null)}};return _.useEffect(()=>{const me=We=>{ce.current&&!ce.current.contains(We.target)&&H(null)};return K&&document.addEventListener("mousedown",me),()=>document.removeEventListener("mousedown",me)},[K]),e?s.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[y==="Resources"&&I||y==="Groups"&&P?s.jsx("button",{onClick:()=>{R(null),$(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:s.jsx(Nle,{className:"w-5 h-5"})}):s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:s.jsx(p0,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:y==="Moderation"?"Moderation Queue":y==="Groups"?P?(vt=A.find(me=>me.id===P))==null?void 0:vt.name:"My Groups":y==="Resources"?I?(yt=ye.find(me=>me.id===I))==null?void 0:yt.title:"Class Resources":Z}),y!=="Resources"&&y!=="Moderation"&&y!=="Groups"&&fe.length>1&&s.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:Z}),s.jsx(Wa,{className:"w-3 h-3 text-gray-500 ml-1"}),s.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:Z,onChange:me=>ne(me.target.value),children:fe.map(me=>s.jsx("option",{value:me,children:me},me))})]})]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:s.jsx(Xn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[s.jsxs("button",{onClick:()=>S("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${y==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(p0,{className:"w-5 h-5"}),Ye&&y!=="Main"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("button",{onClick:()=>S("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${y==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(Ga,{className:"w-5 h-5"}),_e&&y!=="Resources"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(A.length>0||t.role==="ADMIN")&&s.jsxs("button",{onClick:()=>{S("Groups"),$(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${y==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(di,{className:"w-5 h-5"}),he&&y!=="Groups"?s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):A.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:A.length})]}),s.jsx("button",{onClick:()=>S("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${y==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:s.jsx(LR,{className:"w-5 h-5"})}),t.role==="ADMIN"&&s.jsxs("button",{onClick:()=>S("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${y==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(ui,{className:"w-5 h-5"}),B.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:B.length})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col relative",children:[y==="Resources"&&!I&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:ye.map(me=>s.jsxs("div",{onClick:()=>R(me.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${me.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[s.jsx(Mle,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${me.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:me.title}),s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:me.unit})]})]}),s.jsx("button",{onClick:We=>{We.stopPropagation(),c==null||c(me.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:s.jsx(Cx,{className:"w-4 h-4"})})]},me.id))})}),y==="Groups"&&!P&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:A.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(di,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No groups yet"}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):A.map(me=>s.jsx("div",{onClick:()=>$(me.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${me.id}`)?"border-cyan-500/40":"border-white/5"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[s.jsx(di,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${me.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:me.name}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[me.members.length," member",me.members.length!==1?"s":"","  ",me.classType]})]})]})},me.id))})}),y==="Moderation"&&t.role==="ADMIN"&&s.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Li,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[B.length," item",B.length!==1?"s":""]})]}),B.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(ui,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):s.jsx("div",{className:"space-y-3",children:B.map(me=>{var We,mt,Ze;return s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300",children:me.senderName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(me.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-sm text-gray-200 mb-1",children:me.content}),me.systemNote&&s.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:me.systemNote}),s.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(We=me.channelId)!=null&&We.startsWith("group_")?`Group: ${((mt=k.find(et=>et.id===me.channelId.replace("group_","")))==null?void 0:mt.name)||me.channelId.replace("group_","")}`:((Ze=me.channelId)==null?void 0:Ze.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>Rt(me.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[s.jsx(ec,{className:"w-3.5 h-3.5"})," Approve"]}),s.jsxs("button",{onClick:()=>Pe(me.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[s.jsx(gr,{className:"w-3.5 h-3.5"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===`flag-${me.id}`?null:{id:`flag-${me.id}`,senderId:me.senderId,senderName:me.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:s.jsx(ab,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===`flag-${me.id}`&&s.jsxs("div",{ref:ce,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",me.senderName]}),lt.map(et=>s.jsx("button",{onClick:()=>Nt(et.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:et.label},et.minutes))]})]})]})]},me.id)})})]}),(y==="Main"||y==="Bookmarks"||y==="Resources"&&I||y==="Groups"&&P)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:de,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(y==="Bookmarks"?Ue:h).map((me,We,mt)=>{var Et;const Ze=me.senderId===t.id,et=We>0&&mt[We-1].senderId===me.senderId&&new Date(me.timestamp).getTime()-new Date(mt[We-1].timestamp).getTime()<3e5;return s.jsxs("div",{className:`group flex flex-col ${Ze?"items-end":"items-start"} ${et?"mt-1":"mt-4"}`,children:[!et&&s.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("span",{className:`text-xs font-bold ${Ze?"text-indigo-400":"text-gray-300"}`,children:me.senderName}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(me.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),me.isGlobalPinned&&s.jsx(VR,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),s.jsxs("div",{className:"relative max-w-[85%]",children:[s.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${Ze?"right-0":"left-0"} z-30`,children:[s.jsx("button",{onClick:()=>L(me.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:s.jsx(qR,{className:"w-3.5 h-3.5 text-yellow-400"})}),s.jsx("button",{onClick:()=>Ne(me.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Et=me.pinnedBy)!=null&&Et.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:s.jsx(LR,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Ke(me.id,!!me.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${me.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:s.jsx(VR,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>at(me.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:s.jsx(gr,{className:"w-3.5 h-3.5"})}),me.senderId!==t.id&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===me.id?null:{id:me.id,senderId:me.senderId,senderName:me.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:s.jsx(ab,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===me.id&&s.jsxs("div",{ref:ce,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",me.senderName]}),lt.map(wt=>s.jsx("button",{onClick:()=>Nt(wt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:wt.label},wt.minutes))]})]})]})]}),O===me.id&&s.jsx("div",{ref:ae,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${Ze?"right-0":"left-0"}`,children:Ehe.map(wt=>s.jsx("button",{onClick:()=>Se(me.id,wt),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:wt},wt))}),s.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${Ze?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${me.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${me.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:me.content}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:me.reactions&&Object.entries(me.reactions).map(([wt,pr])=>{const be=pr;return be.length>0&&s.jsxs("button",{onClick:()=>Se(me.id,wt),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${be.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[wt," ",be.length]},wt)})})]})]},me.id)})}),s.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:s.jsxs("form",{onSubmit:X,className:"relative flex items-center gap-2",children:[T&&s.jsx("div",{ref:ee,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:Che.map(me=>s.jsx("button",{type:"button",onClick:()=>x(We=>We+me),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:me},me))}),s.jsx("button",{type:"button",onClick:()=>C(!T),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:s.jsx(qR,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:m,onChange:me=>x(me.target.value),placeholder:Xe?"Transmission Disabled":"Type message...",disabled:!Y||Xe,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),s.jsx("button",{type:"submit",disabled:!Y||Xe||!m.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:s.jsx(w8,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function cW(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=cW(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function vr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=cW(t))&&(n&&(n+=" "),n+=e);return n}var Y3,KM;function fi(){if(KM)return Y3;KM=1;var t=Array.isArray;return Y3=t,Y3}var J3,QM;function uW(){if(QM)return J3;QM=1;var t=typeof b1=="object"&&b1&&b1.Object===Object&&b1;return J3=t,J3}var Z3,XM;function yl(){if(XM)return Z3;XM=1;var t=uW(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Z3=r,Z3}var eS,YM;function Px(){if(YM)return eS;YM=1;var t=yl(),e=t.Symbol;return eS=e,eS}var tS,JM;function Ihe(){if(JM)return tS;JM=1;var t=Px(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var p=n.call(o);return h&&(c?o[a]=d:delete o[a]),p}return tS=i,tS}var rS,ZM;function Ohe(){if(ZM)return rS;ZM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return rS=r,rS}var nS,eD;function Tc(){if(eD)return nS;eD=1;var t=Px(),e=Ihe(),r=Ohe(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return nS=o,nS}var aS,tD;function Ac(){if(tD)return aS;tD=1;function t(e){return e!=null&&typeof e=="object"}return aS=t,aS}var sS,rD;function Jf(){if(rD)return sS;rD=1;var t=Tc(),e=Ac(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return sS=n,sS}var iS,nD;function Q8(){if(nD)return iS;nD=1;var t=fi(),e=Jf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return iS=a,iS}var oS,aD;function Yu(){if(aD)return oS;aD=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return oS=t,oS}var lS,sD;function X8(){if(sD)return lS;sD=1;var t=Tc(),e=Yu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return lS=o,lS}var cS,iD;function Rhe(){if(iD)return cS;iD=1;var t=yl(),e=t["__core-js_shared__"];return cS=e,cS}var uS,oD;function Mhe(){if(oD)return uS;oD=1;var t=Rhe(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return uS=r,uS}var dS,lD;function dW(){if(lD)return dS;lD=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return dS=r,dS}var hS,cD;function Dhe(){if(cD)return hS;cD=1;var t=X8(),e=Mhe(),r=Yu(),n=dW(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(x){if(!r(x)||e(x))return!1;var y=t(x)?p:i;return y.test(n(x))}return hS=m,hS}var fS,uD;function Phe(){if(uD)return fS;uD=1;function t(e,r){return e==null?void 0:e[r]}return fS=t,fS}var pS,dD;function O0(){if(dD)return pS;dD=1;var t=Dhe(),e=Phe();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return pS=r,pS}var mS,hD;function fw(){if(hD)return mS;hD=1;var t=O0(),e=t(Object,"create");return mS=e,mS}var gS,fD;function Lhe(){if(fD)return gS;fD=1;var t=fw();function e(){this.__data__=t?t(null):{},this.size=0}return gS=e,gS}var xS,pD;function Bhe(){if(pD)return xS;pD=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return xS=t,xS}var yS,mD;function $he(){if(mD)return yS;mD=1;var t=fw(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var c=o[i];return c===e?void 0:c}return n.call(o,i)?o[i]:void 0}return yS=a,yS}var vS,gD;function zhe(){if(gD)return vS;gD=1;var t=fw(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return vS=n,vS}var bS,xD;function Uhe(){if(xD)return bS;xD=1;var t=fw(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return bS=r,bS}var wS,yD;function Vhe(){if(yD)return wS;yD=1;var t=Lhe(),e=Bhe(),r=$he(),n=zhe(),a=Uhe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,wS=i,wS}var SS,vD;function Fhe(){if(vD)return SS;vD=1;function t(){this.__data__=[],this.size=0}return SS=t,SS}var NS,bD;function Y8(){if(bD)return NS;bD=1;function t(e,r){return e===r||e!==e&&r!==r}return NS=t,NS}var jS,wD;function pw(){if(wD)return jS;wD=1;var t=Y8();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return jS=e,jS}var _S,SD;function qhe(){if(SD)return _S;SD=1;var t=pw(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():r.call(i,o,1),--this.size,!0}return _S=n,_S}var TS,ND;function Hhe(){if(ND)return TS;ND=1;var t=pw();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return TS=e,TS}var AS,jD;function Ghe(){if(jD)return AS;jD=1;var t=pw();function e(r){return t(this.__data__,r)>-1}return AS=e,AS}var ES,_D;function Whe(){if(_D)return ES;_D=1;var t=pw();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return ES=e,ES}var CS,TD;function mw(){if(TD)return CS;TD=1;var t=Fhe(),e=qhe(),r=Hhe(),n=Ghe(),a=Whe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,CS=i,CS}var kS,AD;function J8(){if(AD)return kS;AD=1;var t=O0(),e=yl(),r=t(e,"Map");return kS=r,kS}var IS,ED;function Khe(){if(ED)return IS;ED=1;var t=Vhe(),e=mw(),r=J8();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return IS=n,IS}var OS,CD;function Qhe(){if(CD)return OS;CD=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return OS=t,OS}var RS,kD;function gw(){if(kD)return RS;kD=1;var t=Qhe();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return RS=e,RS}var MS,ID;function Xhe(){if(ID)return MS;ID=1;var t=gw();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return MS=e,MS}var DS,OD;function Yhe(){if(OD)return DS;OD=1;var t=gw();function e(r){return t(this,r).get(r)}return DS=e,DS}var PS,RD;function Jhe(){if(RD)return PS;RD=1;var t=gw();function e(r){return t(this,r).has(r)}return PS=e,PS}var LS,MD;function Zhe(){if(MD)return LS;MD=1;var t=gw();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return LS=e,LS}var BS,DD;function Z8(){if(DD)return BS;DD=1;var t=Khe(),e=Xhe(),r=Yhe(),n=Jhe(),a=Zhe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,BS=i,BS}var $S,PD;function hW(){if(PD)return $S;PD=1;var t=Z8(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,$S=r,$S}var zS,LD;function efe(){if(LD)return zS;LD=1;var t=hW(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return zS=r,zS}var US,BD;function tfe(){if(BD)return US;BD=1;var t=efe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,c,d,h){i.push(d?h.replace(r,"$1"):c||o)}),i});return US=n,US}var VS,$D;function e7(){if($D)return VS;$D=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return VS=t,VS}var FS,zD;function rfe(){if(zD)return FS;zD=1;var t=Px(),e=e7(),r=fi(),n=Jf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return FS=o,FS}var qS,UD;function fW(){if(UD)return qS;UD=1;var t=rfe();function e(r){return r==null?"":t(r)}return qS=e,qS}var HS,VD;function pW(){if(VD)return HS;VD=1;var t=fi(),e=Q8(),r=tfe(),n=fW();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return HS=a,HS}var GS,FD;function xw(){if(FD)return GS;FD=1;var t=Jf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return GS=e,GS}var WS,qD;function t7(){if(qD)return WS;qD=1;var t=pW(),e=xw();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return WS=r,WS}var KS,HD;function mW(){if(HD)return KS;HD=1;var t=t7();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return KS=e,KS}var nfe=mW();const io=nn(nfe);var QS,GD;function afe(){if(GD)return QS;GD=1;function t(e){return e==null}return QS=t,QS}var sfe=afe();const fr=nn(sfe);var XS,WD;function ife(){if(WD)return XS;WD=1;var t=Tc(),e=fi(),r=Ac(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return XS=a,XS}var ofe=ife();const x0=nn(ofe);var lfe=X8();const rr=nn(lfe);var cfe=Yu();const Zf=nn(cfe);var YS={exports:{}},cn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function ufe(){if(KD)return cn;KD=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),S;S=Symbol.for("react.module.reference");function N(w){if(typeof w=="object"&&w!==null){var T=w.$$typeof;switch(T){case t:switch(w=w.type,w){case r:case a:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case o:case d:case x:case m:case i:return w;default:return T}}case e:return T}}}return cn.ContextConsumer=o,cn.ContextProvider=i,cn.Element=t,cn.ForwardRef=d,cn.Fragment=r,cn.Lazy=x,cn.Memo=m,cn.Portal=e,cn.Profiler=a,cn.StrictMode=n,cn.Suspense=h,cn.SuspenseList=p,cn.isAsyncMode=function(){return!1},cn.isConcurrentMode=function(){return!1},cn.isContextConsumer=function(w){return N(w)===o},cn.isContextProvider=function(w){return N(w)===i},cn.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},cn.isForwardRef=function(w){return N(w)===d},cn.isFragment=function(w){return N(w)===r},cn.isLazy=function(w){return N(w)===x},cn.isMemo=function(w){return N(w)===m},cn.isPortal=function(w){return N(w)===e},cn.isProfiler=function(w){return N(w)===a},cn.isStrictMode=function(w){return N(w)===n},cn.isSuspense=function(w){return N(w)===h},cn.isSuspenseList=function(w){return N(w)===p},cn.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===p||w===y||typeof w=="object"&&w!==null&&(w.$$typeof===x||w.$$typeof===m||w.$$typeof===i||w.$$typeof===o||w.$$typeof===d||w.$$typeof===S||w.getModuleId!==void 0)},cn.typeOf=N,cn}var QD;function dfe(){return QD||(QD=1,YS.exports=ufe()),YS.exports}var hfe=dfe(),JS,XD;function gW(){if(XD)return JS;XD=1;var t=Tc(),e=Ac(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return JS=n,JS}var ZS,YD;function ffe(){if(YD)return ZS;YD=1;var t=gW();function e(r){return t(r)&&r!=+r}return ZS=e,ZS}var pfe=ffe();const Lx=nn(pfe);var mfe=gW();const gfe=nn(mfe);var Eo=function(e){return e===0?0:e>0?1:-1},Ud=function(e){return x0(e)&&e.indexOf("%")===e.length-1},xt=function(e){return gfe(e)&&!Lx(e)},xfe=function(e){return fr(e)},Ha=function(e){return xt(e)||x0(e)},yfe=0,Bx=function(e){var r=++yfe;return"".concat(e||"").concat(r)},Co=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xt(e)&&!x0(e))return n;var i;if(Ud(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return Lx(i)&&(i=n),a&&i>r&&(i=r),i},vu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},vfe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},ai=function(e,r){return xt(e)&&xt(r)?function(n){return e+n*(r-e)}:function(){return r}};function gb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):io(n,e))===r})}var bfe=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,o=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,o+=h*h,c=Math.min(c,h),d=Math.max(d,h);var x=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:c,xmax:d,a:x,b:(a-x*n)/r}},wfe=function(e,r){return xt(e)&&xt(r)?e-r:x0(e)&&x0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Hh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function xT(t){"@babel/helpers - typeof";return xT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xT(t)}var Sfe=["viewBox","children"],Nfe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],JD=["points","pathLength"],eN={svg:Sfe,polygon:JD,polyline:JD},r7=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],xb=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(_.isValidElement(e)&&(n=e.props),!Zf(n))return null;var a={};return Object.keys(n).forEach(function(i){r7.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},jfe=function(e,r,n){return function(a){return e(r,n,a),null}},y0=function(e,r,n){if(!Zf(e)||xT(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];r7.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=jfe(o,r,n))}),a},_fe=["children"],Tfe=["children"];function ZD(t,e){if(t==null)return{};var r=Afe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Afe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var eP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},oc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},tP=null,tN=null,n7=function t(e){if(e===tP&&Array.isArray(tN))return tN;var r=[];return _.Children.forEach(e,function(n){fr(n)||(hfe.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),tN=r,tP=e,r};function Di(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return oc(a)}):n=[oc(e)],n7(t).forEach(function(a){var i=io(a,"type.displayName")||io(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Ei(t,e){var r=Di(t,e);return r&&r[0]}var rP=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!xt(n)||n<=0||!xt(a)||a<=0)},Efe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Cfe=function(e){return e&&e.type&&x0(e.type)&&Efe.indexOf(e.type)>=0},kfe=function(e,r,n,a){var i,o=(i=eN==null?void 0:eN[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!rr(e)&&(a&&o.includes(r)||Nfe.includes(r))||n&&r7.includes(r)},qt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(_.isValidElement(e)&&(a=e.props),!Zf(a))return null;var i={};return Object.keys(a).forEach(function(o){var c;kfe((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(i[o]=a[o])}),i},yT=function t(e,r){if(e===r)return!0;var n=_.Children.count(e);if(n!==_.Children.count(r))return!1;if(n===0)return!0;if(n===1)return nP(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!nP(i,o))return!1}return!0},nP=function(e,r){if(fr(e)&&fr(r))return!0;if(!fr(e)&&!fr(r)){var n=e.props||{},a=n.children,i=ZD(n,_fe),o=r.props||{},c=o.children,d=ZD(o,Tfe);return a&&c?Hh(i,d)&&yT(a,c):!a&&!c?Hh(i,d):!1}return!1},aP=function(e,r){var n=[],a={};return n7(e).forEach(function(i,o){if(Cfe(i))n.push(i);else if(i){var c=oc(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,o);n.push(m),a[c]=!0}}}),n},Ife=function(e){var r=e&&e.type;return r&&eP[r]?eP[r]:null},Ofe=function(e,r){return n7(r).indexOf(e)},Rfe=["children","width","height","viewBox","className","style","title","desc"];function vT(){return vT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vT.apply(this,arguments)}function Mfe(t,e){if(t==null)return{};var r=Dfe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Dfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bT(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,c=t.title,d=t.desc,h=Mfe(t,Rfe),p=a||{width:r,height:n,x:0,y:0},m=vr("recharts-surface",i);return se.createElement("svg",vT({},qt(h,!0,"svg"),{className:m,width:r,height:n,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),se.createElement("title",null,c),se.createElement("desc",null,d),e)}var Pfe=["children","className"];function wT(){return wT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wT.apply(this,arguments)}function Lfe(t,e){if(t==null)return{};var r=Bfe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Yr=se.forwardRef(function(t,e){var r=t.children,n=t.className,a=Lfe(t,Pfe),i=vr("recharts-layer",n);return se.createElement("g",wT({className:i},qt(a,!0),{ref:e}),r)}),lc=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},rN,sP;function $fe(){if(sP)return rN;sP=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return rN=t,rN}var nN,iP;function zfe(){if(iP)return nN;iP=1;var t=$fe();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return nN=e,nN}var aN,oP;function xW(){if(oP)return aN;oP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+i+"]");function d(h){return c.test(h)}return aN=d,aN}var sN,lP;function Ufe(){if(lP)return sN;lP=1;function t(e){return e.split("")}return sN=t,sN}var iN,cP;function Vfe(){if(cP)return iN;cP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",S=h+"?",N="["+i+"]?",w="(?:"+y+"(?:"+[p,m,x].join("|")+")"+N+S+")*",T=N+S+w,C="(?:"+[p+c+"?",c,m,x,o].join("|")+")",O=RegExp(d+"(?="+d+")|"+C+T,"g");function L(I){return I.match(O)||[]}return iN=L,iN}var oN,uP;function Ffe(){if(uP)return oN;uP=1;var t=Ufe(),e=xW(),r=Vfe();function n(a){return e(a)?r(a):t(a)}return oN=n,oN}var lN,dP;function qfe(){if(dP)return lN;dP=1;var t=zfe(),e=xW(),r=Ffe(),n=fW();function a(i){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[i]()+h}}return lN=a,lN}var cN,hP;function Hfe(){if(hP)return cN;hP=1;var t=qfe(),e=t("toUpperCase");return cN=e,cN}var Gfe=Hfe();const yw=nn(Gfe);function Bn(t){return function(){return t}}const yW=Math.cos,yb=Math.sin,Lo=Math.sqrt,vb=Math.PI,vw=2*vb,ST=Math.PI,NT=2*ST,Rd=1e-6,Wfe=NT-Rd;function vW(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Kfe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return vW;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Qfe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?vW:Kfe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,p=o-e,m=c-r,x=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(x>Rd)if(!(Math.abs(m*d-h*p)>Rd)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let y=n-o,S=a-c,N=d*d+h*h,w=y*y+S*S,T=Math.sqrt(N),C=Math.sqrt(x),O=i*Math.tan((ST-Math.acos((N+x-w)/(2*T*C)))/2),L=O/C,I=O/T;Math.abs(L-1)>Rd&&this._append`L${e+L*p},${r+L*m}`,this._append`A${i},${i},0,0,${+(m*y>p*S)},${this._x1=e+I*d},${this._y1=r+I*h}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^o,x=o?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Rd||Math.abs(this._y1-p)>Rd)&&this._append`L${h},${p}`,n&&(x<0&&(x=x%NT+NT),x>Wfe?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:x>Rd&&this._append`A${n},${n},0,${+(x>=ST)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function a7(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Qfe(e)}function s7(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bW(t){this._context=t}bW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function bw(t){return new bW(t)}function wW(t){return t[0]}function SW(t){return t[1]}function NW(t,e){var r=Bn(!0),n=null,a=bw,i=null,o=a7(c);t=typeof t=="function"?t:t===void 0?wW:Bn(t),e=typeof e=="function"?e:e===void 0?SW:Bn(e);function c(d){var h,p=(d=s7(d)).length,m,x=!1,y;for(n==null&&(i=a(y=o())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+t(m,h,d),+e(m,h,d));if(y)return i=null,y+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Bn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Bn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Bn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function q1(t,e,r){var n=null,a=Bn(!0),i=null,o=bw,c=null,d=a7(h);t=typeof t=="function"?t:t===void 0?wW:Bn(+t),e=typeof e=="function"?e:Bn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?SW:Bn(+r);function h(m){var x,y,S,N=(m=s7(m)).length,w,T=!1,C,O=new Array(N),L=new Array(N);for(i==null&&(c=o(C=d())),x=0;x<=N;++x){if(!(x<N&&a(w=m[x],x,m))===T)if(T=!T)y=x,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),S=x-1;S>=y;--S)c.point(O[S],L[S]);c.lineEnd(),c.areaEnd()}T&&(O[x]=+t(w,x,m),L[x]=+e(w,x,m),c.point(n?+n(w,x,m):O[x],r?+r(w,x,m):L[x]))}if(C)return c=null,C+""||null}function p(){return NW().defined(a).curve(o).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:Bn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Bn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Bn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:Bn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Bn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Bn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Bn(!!m),h):a},h.curve=function(m){return arguments.length?(o=m,i!=null&&(c=o(i)),h):o},h.context=function(m){return arguments.length?(m==null?i=c=null:c=o(i=m),h):i},h}class jW{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Xfe(t){return new jW(t,!0)}function Yfe(t){return new jW(t,!1)}const i7={draw(t,e){const r=Lo(e/vb);t.moveTo(r,0),t.arc(0,0,r,0,vw)}},Jfe={draw(t,e){const r=Lo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},_W=Lo(1/3),Zfe=_W*2,epe={draw(t,e){const r=Lo(e/Zfe),n=r*_W;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},tpe={draw(t,e){const r=Lo(e),n=-r/2;t.rect(n,n,r,r)}},rpe=.8908130915292852,TW=yb(vb/10)/yb(7*vb/10),npe=yb(vw/10)*TW,ape=-yW(vw/10)*TW,spe={draw(t,e){const r=Lo(e*rpe),n=npe*r,a=ape*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=vw*i/5,c=yW(o),d=yb(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},uN=Lo(3),ipe={draw(t,e){const r=-Lo(e/(uN*3));t.moveTo(0,r*2),t.lineTo(-uN*r,-r),t.lineTo(uN*r,-r),t.closePath()}},Yi=-.5,Ji=Lo(3)/2,jT=1/Lo(12),ope=(jT/2+1)*3,lpe={draw(t,e){const r=Lo(e/ope),n=r/2,a=r*jT,i=n,o=r*jT+r,c=-i,d=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(c,d),t.lineTo(Yi*n-Ji*a,Ji*n+Yi*a),t.lineTo(Yi*i-Ji*o,Ji*i+Yi*o),t.lineTo(Yi*c-Ji*d,Ji*c+Yi*d),t.lineTo(Yi*n+Ji*a,Yi*a-Ji*n),t.lineTo(Yi*i+Ji*o,Yi*o-Ji*i),t.lineTo(Yi*c+Ji*d,Yi*d-Ji*c),t.closePath()}};function cpe(t,e){let r=null,n=a7(a);t=typeof t=="function"?t:Bn(t||i7),e=typeof e=="function"?e:Bn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Bn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Bn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function bb(){}function wb(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function AW(t){this._context=t}AW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function upe(t){return new AW(t)}function EW(t){this._context=t}EW.prototype={areaStart:bb,areaEnd:bb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:wb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dpe(t){return new EW(t)}function CW(t){this._context=t}CW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:wb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function hpe(t){return new CW(t)}function kW(t){this._context=t}kW.prototype={areaStart:bb,areaEnd:bb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function fpe(t){return new kW(t)}function fP(t){return t<0?-1:1}function pP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(fP(i)+fP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function mP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function dN(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,o-c*r,i,o)}function Sb(t){this._context=t}Sb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dN(this,this._t0,mP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,dN(this,mP(this,r=pP(this,t,e)),r);break;default:dN(this,this._t0,r=pP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function IW(t){this._context=new OW(t)}(IW.prototype=Object.create(Sb.prototype)).point=function(t,e){Sb.prototype.point.call(this,e,t)};function OW(t){this._context=t}OW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function ppe(t){return new Sb(t)}function mpe(t){return new IW(t)}function RW(t){this._context=t}RW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=gP(t),a=gP(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function gP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function gpe(t){return new RW(t)}function ww(t,e){this._context=t,this._t=e}ww.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function xpe(t){return new ww(t,.5)}function ype(t){return new ww(t,0)}function vpe(t){return new ww(t,1)}function ff(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,c=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function _T(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function bpe(t,e){return t[e]}function wpe(t){const e=[];return e.key=t,e}function Spe(){var t=Bn([]),e=_T,r=ff,n=bpe;function a(i){var o=Array.from(t.apply(this,arguments),wpe),c,d=o.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(m,o[c].key,h,i)]).data=m;for(c=0,p=s7(e(o));c<d;++c)o[p[c]].index=c;return r(o,p),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Bn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Bn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?_T:typeof i=="function"?i:Bn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??ff,a):r},a}function Npe(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}ff(t,e)}}function jpe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}ff(t,e)}}function _pe(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,h=0;c<o;++c){for(var p=t[e[c]],m=p[n][1]||0,x=p[n-1][1]||0,y=(m-x)/2,S=0;S<c;++S){var N=t[e[S]],w=N[n][1]||0,T=N[n-1][1]||0;y+=w-T}d+=m,h+=y*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,ff(t,e)}}function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}var Tpe=["type","size","sizeType"];function TT(){return TT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TT.apply(this,arguments)}function xP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xP(Object(r),!0).forEach(function(n){Ape(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ape(t,e,r){return e=Epe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Epe(t){var e=Cpe(t,"string");return wg(e)=="symbol"?e:e+""}function Cpe(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kpe(t,e){if(t==null)return{};var r=Ipe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ipe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var MW={symbolCircle:i7,symbolCross:Jfe,symbolDiamond:epe,symbolSquare:tpe,symbolStar:spe,symbolTriangle:ipe,symbolWye:lpe},Ope=Math.PI/180,Rpe=function(e){var r="symbol".concat(yw(e));return MW[r]||i7},Mpe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Ope;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Dpe=function(e,r){MW["symbol".concat(yw(e))]=r},Sw=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=kpe(e,Tpe),h=yP(yP({},d),{},{type:n,size:i,sizeType:c}),p=function(){var w=Rpe(n),T=cpe().type(w).size(Mpe(i,c,n));return T()},m=h.className,x=h.cx,y=h.cy,S=qt(h,!0);return x===+x&&y===+y&&i===+i?se.createElement("path",TT({},S,{className:vr("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(y,")"),d:p()})):null};Sw.registerSymbol=Dpe;function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function AT(){return AT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AT.apply(this,arguments)}function vP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ppe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vP(Object(r),!0).forEach(function(n){Sg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PW(n.key),n)}}function $pe(t,e,r){return e&&Bpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zpe(t,e,r){return e=Nb(e),Upe(t,DW()?Reflect.construct(e,r||[],Nb(t).constructor):e.apply(t,r))}function Upe(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vpe(t)}function Vpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DW=function(){return!!t})()}function Nb(t){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nb(t)}function Fpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ET(t,e)}function ET(t,e){return ET=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ET(t,e)}function Sg(t,e,r){return e=PW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PW(t){var e=qpe(t,"string");return pf(e)=="symbol"?e:e+""}function qpe(t,e){if(pf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zi=32,o7=(function(t){function e(){return Lpe(this,e),zpe(this,e,arguments)}return Fpe(e,t),$pe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Zi/2,o=Zi/6,c=Zi/3,d=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Zi,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Zi,"M").concat(2*c,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Zi/8,"h").concat(Zi,"v").concat(Zi*3/4,"h").concat(-Zi,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var h=Ppe({},n);return delete h.legendIcon,se.cloneElement(n.legendIcon,h)}return se.createElement(Sw,{fill:d,cx:i,cy:i,size:Zi,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Zi,height:Zi},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(y,S){var N=y.formatter||d,w=vr(Sg(Sg({"recharts-legend-item":!0},"legend-item-".concat(S),!0),"inactive",y.inactive));if(y.type==="none")return null;var T=rr(y.value)?null:y.value;lc(!rr(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var C=y.inactive?h:y.color;return se.createElement("li",AT({className:w,style:m,key:"legend-item-".concat(S)},y0(n.props,y,S)),se.createElement(bT,{width:o,height:o,viewBox:p,style:x},n.renderIcon(y)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:C}},N?N(T,y,S):T))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(_.PureComponent);Sg(o7,"displayName","Legend");Sg(o7,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var hN,bP;function Hpe(){if(bP)return hN;bP=1;var t=mw();function e(){this.__data__=new t,this.size=0}return hN=e,hN}var fN,wP;function Gpe(){if(wP)return fN;wP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return fN=t,fN}var pN,SP;function Wpe(){if(SP)return pN;SP=1;function t(e){return this.__data__.get(e)}return pN=t,pN}var mN,NP;function Kpe(){if(NP)return mN;NP=1;function t(e){return this.__data__.has(e)}return mN=t,mN}var gN,jP;function Qpe(){if(jP)return gN;jP=1;var t=mw(),e=J8(),r=Z8(),n=200;function a(i,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,o),this.size=c.size,this}return gN=a,gN}var xN,_P;function LW(){if(_P)return xN;_P=1;var t=mw(),e=Hpe(),r=Gpe(),n=Wpe(),a=Kpe(),i=Qpe();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,xN=o,xN}var yN,TP;function Xpe(){if(TP)return yN;TP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return yN=e,yN}var vN,AP;function Ype(){if(AP)return vN;AP=1;function t(e){return this.__data__.has(e)}return vN=t,vN}var bN,EP;function BW(){if(EP)return bN;EP=1;var t=Z8(),e=Xpe(),r=Ype();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,bN=n,bN}var wN,CP;function $W(){if(CP)return wN;CP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return wN=t,wN}var SN,kP;function zW(){if(kP)return SN;kP=1;function t(e,r){return e.has(r)}return SN=t,SN}var NN,IP;function UW(){if(IP)return NN;IP=1;var t=BW(),e=$W(),r=zW(),n=1,a=2;function i(o,c,d,h,p,m){var x=d&n,y=o.length,S=c.length;if(y!=S&&!(x&&S>y))return!1;var N=m.get(o),w=m.get(c);if(N&&w)return N==c&&w==o;var T=-1,C=!0,O=d&a?new t:void 0;for(m.set(o,c),m.set(c,o);++T<y;){var L=o[T],I=c[T];if(h)var R=x?h(I,L,T,c,o,m):h(L,I,T,o,c,m);if(R!==void 0){if(R)continue;C=!1;break}if(O){if(!e(c,function(A,E){if(!r(O,E)&&(L===A||p(L,A,d,h,m)))return O.push(E)})){C=!1;break}}else if(!(L===I||p(L,I,d,h,m))){C=!1;break}}return m.delete(o),m.delete(c),C}return NN=i,NN}var jN,OP;function Jpe(){if(OP)return jN;OP=1;var t=yl(),e=t.Uint8Array;return jN=e,jN}var _N,RP;function Zpe(){if(RP)return _N;RP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return _N=t,_N}var TN,MP;function l7(){if(MP)return TN;MP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return TN=t,TN}var AN,DP;function eme(){if(DP)return AN;DP=1;var t=Px(),e=Jpe(),r=Y8(),n=UW(),a=Zpe(),i=l7(),o=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",x="[object Number]",y="[object RegExp]",S="[object Set]",N="[object String]",w="[object Symbol]",T="[object ArrayBuffer]",C="[object DataView]",O=t?t.prototype:void 0,L=O?O.valueOf:void 0;function I(R,A,E,k,U,P,$){switch(E){case C:if(R.byteLength!=A.byteLength||R.byteOffset!=A.byteOffset)return!1;R=R.buffer,A=A.buffer;case T:return!(R.byteLength!=A.byteLength||!P(new e(R),new e(A)));case d:case h:case x:return r(+R,+A);case p:return R.name==A.name&&R.message==A.message;case y:case N:return R==A+"";case m:var B=a;case S:var G=k&o;if(B||(B=i),R.size!=A.size&&!G)return!1;var K=$.get(R);if(K)return K==A;k|=c,$.set(R,A);var H=n(B(R),B(A),k,U,P,$);return $.delete(R),H;case w:if(L)return L.call(R)==L.call(A)}return!1}return AN=I,AN}var EN,PP;function VW(){if(PP)return EN;PP=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return EN=t,EN}var CN,LP;function tme(){if(LP)return CN;LP=1;var t=VW(),e=fi();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return CN=r,CN}var kN,BP;function rme(){if(BP)return kN;BP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[i++]=c)}return o}return kN=t,kN}var IN,$P;function nme(){if($P)return IN;$P=1;function t(){return[]}return IN=t,IN}var ON,zP;function ame(){if(zP)return ON;zP=1;var t=rme(),e=nme(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return ON=i,ON}var RN,UP;function sme(){if(UP)return RN;UP=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return RN=t,RN}var MN,VP;function ime(){if(VP)return MN;VP=1;var t=Tc(),e=Ac(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return MN=n,MN}var DN,FP;function c7(){if(FP)return DN;FP=1;var t=ime(),e=Ac(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return DN=i,DN}var _m={exports:{}},PN,qP;function ome(){if(qP)return PN;qP=1;function t(){return!1}return PN=t,PN}_m.exports;var HP;function FW(){return HP||(HP=1,(function(t,e){var r=yl(),n=ome(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(_m,_m.exports)),_m.exports}var LN,GP;function u7(){if(GP)return LN;GP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return LN=r,LN}var BN,WP;function d7(){if(WP)return BN;WP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return BN=e,BN}var $N,KP;function lme(){if(KP)return $N;KP=1;var t=Tc(),e=d7(),r=Ac(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",x="[object RegExp]",y="[object Set]",S="[object String]",N="[object WeakMap]",w="[object ArrayBuffer]",T="[object DataView]",C="[object Float32Array]",O="[object Float64Array]",L="[object Int8Array]",I="[object Int16Array]",R="[object Int32Array]",A="[object Uint8Array]",E="[object Uint8ClampedArray]",k="[object Uint16Array]",U="[object Uint32Array]",P={};P[C]=P[O]=P[L]=P[I]=P[R]=P[A]=P[E]=P[k]=P[U]=!0,P[n]=P[a]=P[w]=P[i]=P[T]=P[o]=P[c]=P[d]=P[h]=P[p]=P[m]=P[x]=P[y]=P[S]=P[N]=!1;function $(B){return r(B)&&e(B.length)&&!!P[t(B)]}return $N=$,$N}var zN,QP;function qW(){if(QP)return zN;QP=1;function t(e){return function(r){return e(r)}}return zN=t,zN}var Tm={exports:{}};Tm.exports;var XP;function cme(){return XP||(XP=1,(function(t,e){var r=uW(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(Tm,Tm.exports)),Tm.exports}var UN,YP;function HW(){if(YP)return UN;YP=1;var t=lme(),e=qW(),r=cme(),n=r&&r.isTypedArray,a=n?e(n):t;return UN=a,UN}var VN,JP;function ume(){if(JP)return VN;JP=1;var t=sme(),e=c7(),r=fi(),n=FW(),a=u7(),i=HW(),o=Object.prototype,c=o.hasOwnProperty;function d(h,p){var m=r(h),x=!m&&e(h),y=!m&&!x&&n(h),S=!m&&!x&&!y&&i(h),N=m||x||y||S,w=N?t(h.length,String):[],T=w.length;for(var C in h)(p||c.call(h,C))&&!(N&&(C=="length"||y&&(C=="offset"||C=="parent")||S&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||a(C,T)))&&w.push(C);return w}return VN=d,VN}var FN,ZP;function dme(){if(ZP)return FN;ZP=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return FN=e,FN}var qN,eL;function GW(){if(eL)return qN;eL=1;function t(e,r){return function(n){return e(r(n))}}return qN=t,qN}var HN,tL;function hme(){if(tL)return HN;tL=1;var t=GW(),e=t(Object.keys,Object);return HN=e,HN}var GN,rL;function fme(){if(rL)return GN;rL=1;var t=dme(),e=hme(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&o.push(c);return o}return GN=a,GN}var WN,nL;function $x(){if(nL)return WN;nL=1;var t=X8(),e=d7();function r(n){return n!=null&&e(n.length)&&!t(n)}return WN=r,WN}var KN,aL;function Nw(){if(aL)return KN;aL=1;var t=ume(),e=fme(),r=$x();function n(a){return r(a)?t(a):e(a)}return KN=n,KN}var QN,sL;function pme(){if(sL)return QN;sL=1;var t=tme(),e=ame(),r=Nw();function n(a){return t(a,r,e)}return QN=n,QN}var XN,iL;function mme(){if(iL)return XN;iL=1;var t=pme(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,c,d,h,p){var m=c&e,x=t(i),y=x.length,S=t(o),N=S.length;if(y!=N&&!m)return!1;for(var w=y;w--;){var T=x[w];if(!(m?T in o:n.call(o,T)))return!1}var C=p.get(i),O=p.get(o);if(C&&O)return C==o&&O==i;var L=!0;p.set(i,o),p.set(o,i);for(var I=m;++w<y;){T=x[w];var R=i[T],A=o[T];if(d)var E=m?d(A,R,T,o,i,p):d(R,A,T,i,o,p);if(!(E===void 0?R===A||h(R,A,c,d,p):E)){L=!1;break}I||(I=T=="constructor")}if(L&&!I){var k=i.constructor,U=o.constructor;k!=U&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof U=="function"&&U instanceof U)&&(L=!1)}return p.delete(i),p.delete(o),L}return XN=a,XN}var YN,oL;function gme(){if(oL)return YN;oL=1;var t=O0(),e=yl(),r=t(e,"DataView");return YN=r,YN}var JN,lL;function xme(){if(lL)return JN;lL=1;var t=O0(),e=yl(),r=t(e,"Promise");return JN=r,JN}var ZN,cL;function WW(){if(cL)return ZN;cL=1;var t=O0(),e=yl(),r=t(e,"Set");return ZN=r,ZN}var e6,uL;function yme(){if(uL)return e6;uL=1;var t=O0(),e=yl(),r=t(e,"WeakMap");return e6=r,e6}var t6,dL;function vme(){if(dL)return t6;dL=1;var t=gme(),e=J8(),r=xme(),n=WW(),a=yme(),i=Tc(),o=dW(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",x="[object DataView]",y=o(t),S=o(e),N=o(r),w=o(n),T=o(a),C=i;return(t&&C(new t(new ArrayBuffer(1)))!=x||e&&C(new e)!=c||r&&C(r.resolve())!=h||n&&C(new n)!=p||a&&C(new a)!=m)&&(C=function(O){var L=i(O),I=L==d?O.constructor:void 0,R=I?o(I):"";if(R)switch(R){case y:return x;case S:return c;case N:return h;case w:return p;case T:return m}return L}),t6=C,t6}var r6,hL;function bme(){if(hL)return r6;hL=1;var t=LW(),e=UW(),r=eme(),n=mme(),a=vme(),i=fi(),o=FW(),c=HW(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",x=Object.prototype,y=x.hasOwnProperty;function S(N,w,T,C,O,L){var I=i(N),R=i(w),A=I?p:a(N),E=R?p:a(w);A=A==h?m:A,E=E==h?m:E;var k=A==m,U=E==m,P=A==E;if(P&&o(N)){if(!o(w))return!1;I=!0,k=!1}if(P&&!k)return L||(L=new t),I||c(N)?e(N,w,T,C,O,L):r(N,w,A,T,C,O,L);if(!(T&d)){var $=k&&y.call(N,"__wrapped__"),B=U&&y.call(w,"__wrapped__");if($||B){var G=$?N.value():N,K=B?w.value():w;return L||(L=new t),O(G,K,T,C,L)}}return P?(L||(L=new t),n(N,w,T,C,O,L)):!1}return r6=S,r6}var n6,fL;function h7(){if(fL)return n6;fL=1;var t=bme(),e=Ac();function r(n,a,i,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,c)}return n6=r,n6}var a6,pL;function wme(){if(pL)return a6;pL=1;var t=LW(),e=h7(),r=1,n=2;function a(i,o,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var x=c[h];if(m&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++h<p;){x=c[h];var y=x[0],S=i[y],N=x[1];if(m&&x[2]){if(S===void 0&&!(y in i))return!1}else{var w=new t;if(d)var T=d(S,N,y,i,o,w);if(!(T===void 0?e(N,S,r|n,d,w):T))return!1}}return!0}return a6=a,a6}var s6,mL;function KW(){if(mL)return s6;mL=1;var t=Yu();function e(r){return r===r&&!t(r)}return s6=e,s6}var i6,gL;function Sme(){if(gL)return i6;gL=1;var t=KW(),e=Nw();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],c=n[o];a[i]=[o,c,t(c)]}return a}return i6=r,i6}var o6,xL;function QW(){if(xL)return o6;xL=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return o6=t,o6}var l6,yL;function Nme(){if(yL)return l6;yL=1;var t=wme(),e=Sme(),r=QW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return l6=n,l6}var c6,vL;function jme(){if(vL)return c6;vL=1;function t(e,r){return e!=null&&r in Object(e)}return c6=t,c6}var u6,bL;function _me(){if(bL)return u6;bL=1;var t=pW(),e=c7(),r=fi(),n=u7(),a=d7(),i=xw();function o(c,d,h){d=t(d,c);for(var p=-1,m=d.length,x=!1;++p<m;){var y=i(d[p]);if(!(x=c!=null&&h(c,y)))break;c=c[y]}return x||++p!=m?x:(m=c==null?0:c.length,!!m&&a(m)&&n(y,m)&&(r(c)||e(c)))}return u6=o,u6}var d6,wL;function Tme(){if(wL)return d6;wL=1;var t=jme(),e=_me();function r(n,a){return n!=null&&e(n,a,t)}return d6=r,d6}var h6,SL;function Ame(){if(SL)return h6;SL=1;var t=h7(),e=mW(),r=Tme(),n=Q8(),a=KW(),i=QW(),o=xw(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(o(p),m):function(x){var y=e(x,p);return y===void 0&&y===m?r(x,p):t(m,y,c|d)}}return h6=h,h6}var f6,NL;function ep(){if(NL)return f6;NL=1;function t(e){return e}return f6=t,f6}var p6,jL;function Eme(){if(jL)return p6;jL=1;function t(e){return function(r){return r==null?void 0:r[e]}}return p6=t,p6}var m6,_L;function Cme(){if(_L)return m6;_L=1;var t=t7();function e(r){return function(n){return t(n,r)}}return m6=e,m6}var g6,TL;function kme(){if(TL)return g6;TL=1;var t=Eme(),e=Cme(),r=Q8(),n=xw();function a(i){return r(i)?t(n(i)):e(i)}return g6=a,g6}var x6,AL;function vl(){if(AL)return x6;AL=1;var t=Nme(),e=Ame(),r=ep(),n=fi(),a=kme();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return x6=i,x6}var y6,EL;function XW(){if(EL)return y6;EL=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return y6=t,y6}var v6,CL;function Ime(){if(CL)return v6;CL=1;function t(e){return e!==e}return v6=t,v6}var b6,kL;function Ome(){if(kL)return b6;kL=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return b6=t,b6}var w6,IL;function Rme(){if(IL)return w6;IL=1;var t=XW(),e=Ime(),r=Ome();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return w6=n,w6}var S6,OL;function Mme(){if(OL)return S6;OL=1;var t=Rme();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return S6=e,S6}var N6,RL;function Dme(){if(RL)return N6;RL=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return N6=t,N6}var j6,ML;function Pme(){if(ML)return j6;ML=1;function t(){}return j6=t,j6}var _6,DL;function Lme(){if(DL)return _6;DL=1;var t=WW(),e=Pme(),r=l7(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return _6=a,_6}var T6,PL;function Bme(){if(PL)return T6;PL=1;var t=BW(),e=Mme(),r=Dme(),n=zW(),a=Lme(),i=l7(),o=200;function c(d,h,p){var m=-1,x=e,y=d.length,S=!0,N=[],w=N;if(p)S=!1,x=r;else if(y>=o){var T=h?null:a(d);if(T)return i(T);S=!1,x=n,w=new t}else w=h?[]:N;e:for(;++m<y;){var C=d[m],O=h?h(C):C;if(C=p||C!==0?C:0,S&&O===O){for(var L=w.length;L--;)if(w[L]===O)continue e;h&&w.push(O),N.push(C)}else x(w,O,p)||(w!==N&&w.push(O),N.push(C))}return N}return T6=c,T6}var A6,LL;function $me(){if(LL)return A6;LL=1;var t=vl(),e=Bme();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return A6=r,A6}var zme=$me();const BL=nn(zme);function YW(t,e,r){return e===!0?BL(t,r):rr(e)?BL(t,e):t}function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}var Ume=["ref"];function $L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$L(Object(r),!0).forEach(function(n){jw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$L(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZW(n.key),n)}}function Fme(t,e,r){return e&&zL(t.prototype,e),r&&zL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qme(t,e,r){return e=jb(e),Hme(t,JW()?Reflect.construct(e,r||[],jb(t).constructor):e.apply(t,r))}function Hme(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gme(t)}function Gme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JW=function(){return!!t})()}function jb(t){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jb(t)}function Wme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CT(t,e)}function CT(t,e){return CT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},CT(t,e)}function jw(t,e,r){return e=ZW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZW(t){var e=Kme(t,"string");return mf(e)=="symbol"?e:e+""}function Kme(t,e){if(mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Qme(t,e){if(t==null)return{};var r=Xme(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Yme(t){return t.value}function Jme(t,e){if(se.isValidElement(t))return se.cloneElement(t,e);if(typeof t=="function")return se.createElement(t,e);e.ref;var r=Qme(e,Ume);return se.createElement(o7,r)}var UL=1,Gh=(function(t){function e(){var r;Vme(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=qme(this,e,[].concat(a)),jw(r,"lastBoundingBox",{width:-1,height:-1}),r}return Wme(e,t),Fme(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>UL||Math.abs(a.height-this.lastBoundingBox.height)>UL)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Vl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,x;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var y=this.getBBoxSnapshot();m={left:((h||0)-y.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var S=this.getBBoxSnapshot();x={top:((p||0)-S.height)/2}}else x=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Vl(Vl({},m),x)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=Vl(Vl({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return se.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(y){n.wrapperNode=y}},Jme(i,Vl(Vl({},this.props),{},{payload:YW(p,h,Yme)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Vl(Vl({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&xt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(_.PureComponent);jw(Gh,"displayName","Legend");jw(Gh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var E6,VL;function Zme(){if(VL)return E6;VL=1;var t=Px(),e=c7(),r=fi(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return E6=a,E6}var C6,FL;function eK(){if(FL)return C6;FL=1;var t=VW(),e=Zme();function r(n,a,i,o,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,o,c):t(c,p):o||(c[c.length]=p)}return c}return C6=r,C6}var k6,qL;function ege(){if(qL)return k6;qL=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(o[h],h,o)===!1)break}return r}}return k6=t,k6}var I6,HL;function tge(){if(HL)return I6;HL=1;var t=ege(),e=t();return I6=e,I6}var O6,GL;function tK(){if(GL)return O6;GL=1;var t=tge(),e=Nw();function r(n,a){return n&&t(n,a,e)}return O6=r,O6}var R6,WL;function rge(){if(WL)return R6;WL=1;var t=$x();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&i(d[c],c,d)!==!1;);return a}}return R6=e,R6}var M6,KL;function f7(){if(KL)return M6;KL=1;var t=tK(),e=rge(),r=e(t);return M6=r,M6}var D6,QL;function rK(){if(QL)return D6;QL=1;var t=f7(),e=$x();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++i]=a(c,d,h)}),o}return D6=r,D6}var P6,XL;function nge(){if(XL)return P6;XL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return P6=t,P6}var L6,YL;function age(){if(YL)return L6;YL=1;var t=Jf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!o)return 1;if(!i&&!c&&!m&&r<n||m&&a&&o&&!i&&!c||h&&a&&o||!d&&o||!p)return-1}return 0}return L6=e,L6}var B6,JL;function sge(){if(JL)return B6;JL=1;var t=age();function e(r,n,a){for(var i=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++i<d;){var p=t(o[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return B6=e,B6}var $6,ZL;function ige(){if(ZL)return $6;ZL=1;var t=e7(),e=t7(),r=vl(),n=rK(),a=nge(),i=qW(),o=sge(),c=ep(),d=fi();function h(p,m,x){m.length?m=t(m,function(N){return d(N)?function(w){return e(w,N.length===1?N[0]:N)}:N}):m=[c];var y=-1;m=t(m,i(r));var S=n(p,function(N,w,T){var C=t(m,function(O){return O(N)});return{criteria:C,index:++y,value:N}});return a(S,function(N,w){return o(N,w,x)})}return $6=h,$6}var z6,eB;function oge(){if(eB)return z6;eB=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return z6=t,z6}var U6,tB;function lge(){if(tB)return U6;tB=1;var t=oge(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=o[c];return p[a]=i(h),t(n,this,p)}}return U6=r,U6}var V6,rB;function cge(){if(rB)return V6;rB=1;function t(e){return function(){return e}}return V6=t,V6}var F6,nB;function nK(){if(nB)return F6;nB=1;var t=O0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return F6=e,F6}var q6,aB;function uge(){if(aB)return q6;aB=1;var t=cge(),e=nK(),r=ep(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return q6=n,q6}var H6,sB;function dge(){if(sB)return H6;sB=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return H6=n,H6}var G6,iB;function hge(){if(iB)return G6;iB=1;var t=uge(),e=dge(),r=e(t);return G6=r,G6}var W6,oB;function fge(){if(oB)return W6;oB=1;var t=ep(),e=lge(),r=hge();function n(a,i){return r(e(a,i,t),a+"")}return W6=n,W6}var K6,lB;function _w(){if(lB)return K6;lB=1;var t=Y8(),e=$x(),r=u7(),n=Yu();function a(i,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],i):!1}return K6=a,K6}var Q6,cB;function pge(){if(cB)return Q6;cB=1;var t=eK(),e=ige(),r=fge(),n=_w(),a=r(function(i,o){if(i==null)return[];var c=o.length;return c>1&&n(i,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return Q6=a,Q6}var mge=pge();const p7=nn(mge);function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function kT(){return kT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kT.apply(this,arguments)}function gge(t,e){return bge(t)||vge(t,e)||yge(t,e)||xge()}function xge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yge(t,e){if(t){if(typeof t=="string")return uB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uB(t,e)}}function uB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function bge(t){if(Array.isArray(t))return t}function dB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function X6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dB(Object(r),!0).forEach(function(n){wge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wge(t,e,r){return e=Sge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sge(t){var e=Nge(t,"string");return Ng(e)=="symbol"?e:e+""}function Nge(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jge(t){return Array.isArray(t)&&Ha(t[0])&&Ha(t[1])?t.join(" ~ "):t}var _ge=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,x=e.itemSorter,y=e.wrapperClassName,S=e.labelClassName,N=e.label,w=e.labelFormatter,T=e.accessibilityLayer,C=T===void 0?!1:T,O=function(){if(p&&p.length){var $={padding:0,margin:0},B=(x?p7(p,x):p).map(function(G,K){if(G.type==="none")return null;var H=X6({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},c),ee=G.formatter||m||jge,ae=G.value,ce=G.name,fe=ae,Z=ce;if(ee&&fe!=null&&Z!=null){var ne=ee(ae,ce,G,K,p);if(Array.isArray(ne)){var Y=gge(ne,2);fe=Y[0],Z=Y[1]}else fe=ne}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:H},Ha(Z)?se.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,Ha(Z)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},fe),se.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:$},B)}return null},L=X6({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),I=X6({margin:0},h),R=!fr(N),A=R?N:"",E=vr("recharts-default-tooltip",y),k=vr("recharts-tooltip-label",S);R&&w&&p!==void 0&&p!==null&&(A=w(N,p));var U=C?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",kT({className:E,style:L},U),se.createElement("p",{className:k,style:I},se.isValidElement(A)?A:"".concat(A)),O())};function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function H1(t,e,r){return e=Tge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tge(t){var e=Age(t,"string");return jg(e)=="symbol"?e:e+""}function Age(t,e){if(jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lm="recharts-tooltip-wrapper",Ege={visibility:"hidden"};function Cge(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return vr(lm,H1(H1(H1(H1({},"".concat(lm,"-right"),xt(r)&&e&&xt(e.x)&&r>=e.x),"".concat(lm,"-left"),xt(r)&&e&&xt(e.x)&&r<e.x),"".concat(lm,"-bottom"),xt(n)&&e&&xt(e.y)&&n>=e.y),"".concat(lm,"-top"),xt(n)&&e&&xt(e.y)&&n<e.y))}function hB(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&xt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return o[n]?p:m;if(o[n]){var x=p,y=d[n];return x<y?Math.max(m,d[n]):Math.max(p,d[n])}var S=m+c,N=d[n]+h;return S>N?Math.max(p,d[n]):Math.max(m,d[n])}function kge(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Ige(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return o.height>0&&o.width>0&&r?(p=hB({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=hB({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=kge({translateX:p,translateY:m,useTranslate3d:c})):h=Ege,{cssProperties:h,cssClasses:Cge({translateX:p,translateY:m,coordinate:r})}}function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function fB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fB(Object(r),!0).forEach(function(n){OT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Oge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sK(n.key),n)}}function Mge(t,e,r){return e&&Rge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dge(t,e,r){return e=_b(e),Pge(t,aK()?Reflect.construct(e,r||[],_b(t).constructor):e.apply(t,r))}function Pge(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lge(t)}function Lge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aK=function(){return!!t})()}function _b(t){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_b(t)}function Bge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IT(t,e)}function IT(t,e){return IT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},IT(t,e)}function OT(t,e,r){return e=sK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sK(t){var e=$ge(t,"string");return gf(e)=="symbol"?e:e+""}function $ge(t,e){if(gf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mB=1,zge=(function(t){function e(){var r;Oge(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Dge(this,e,[].concat(a)),OT(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),OT(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return Bge(e,t),Mge(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>mB||Math.abs(n.height-this.state.lastBoundingBox.height)>mB)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,x=a.isAnimationActive,y=a.offset,S=a.position,N=a.reverseDirection,w=a.useTranslate3d,T=a.viewBox,C=a.wrapperStyle,O=Ige({allowEscapeViewBox:o,coordinate:p,offsetTopLeft:y,position:S,reverseDirection:N,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:T}),L=O.cssClasses,I=O.cssProperties,R=pB(pB({transition:x&&i?"transform ".concat(c,"ms ").concat(d):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},C);return se.createElement("div",{tabIndex:-1,className:L,style:R,ref:function(E){n.wrapperNode=E}},h)}}])})(_.PureComponent),Uge=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},R0={isSsr:Uge()};function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function gB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(r),!0).forEach(function(n){m7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oK(n.key),n)}}function qge(t,e,r){return e&&Fge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hge(t,e,r){return e=Tb(e),Gge(t,iK()?Reflect.construct(e,r||[],Tb(t).constructor):e.apply(t,r))}function Gge(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wge(t)}function Wge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iK=function(){return!!t})()}function Tb(t){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tb(t)}function Kge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RT(t,e)}function RT(t,e){return RT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},RT(t,e)}function m7(t,e,r){return e=oK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oK(t){var e=Qge(t,"string");return xf(e)=="symbol"?e:e+""}function Qge(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Xge(t){return t.dataKey}function Yge(t,e){return se.isValidElement(t)?se.cloneElement(t,e):typeof t=="function"?se.createElement(t,e):se.createElement(_ge,e)}var Ko=(function(t){function e(){return Vge(this,e),Hge(this,e,arguments)}return Kge(e,t),qge(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,x=a.isAnimationActive,y=a.offset,S=a.payload,N=a.payloadUniqBy,w=a.position,T=a.reverseDirection,C=a.useTranslate3d,O=a.viewBox,L=a.wrapperStyle,I=S??[];m&&I.length&&(I=YW(S.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),N,Xge));var R=I.length>0;return se.createElement(zge,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:x,active:i,coordinate:p,hasPayload:R,offset:y,position:w,reverseDirection:T,useTranslate3d:C,viewBox:O,wrapperStyle:L},Yge(h,xB(xB({},this.props),{},{payload:I})))}}])})(_.PureComponent);m7(Ko,"displayName","Tooltip");m7(Ko,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!R0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Y6,yB;function Jge(){if(yB)return Y6;yB=1;var t=yl(),e=function(){return t.Date.now()};return Y6=e,Y6}var J6,vB;function Zge(){if(vB)return J6;vB=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return J6=e,J6}var Z6,bB;function exe(){if(bB)return Z6;bB=1;var t=Zge(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return Z6=r,Z6}var ej,wB;function lK(){if(wB)return ej;wB=1;var t=exe(),e=Yu(),r=Jf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||o.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return ej=d,ej}var tj,SB;function txe(){if(SB)return tj;SB=1;var t=Yu(),e=Jge(),r=lK(),n="Expected a function",a=Math.max,i=Math.min;function o(c,d,h){var p,m,x,y,S,N,w=0,T=!1,C=!1,O=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(T=!!h.leading,C="maxWait"in h,x=C?a(r(h.maxWait)||0,d):x,O="trailing"in h?!!h.trailing:O);function L(B){var G=p,K=m;return p=m=void 0,w=B,y=c.apply(K,G),y}function I(B){return w=B,S=setTimeout(E,d),T?L(B):y}function R(B){var G=B-N,K=B-w,H=d-G;return C?i(H,x-K):H}function A(B){var G=B-N,K=B-w;return N===void 0||G>=d||G<0||C&&K>=x}function E(){var B=e();if(A(B))return k(B);S=setTimeout(E,R(B))}function k(B){return S=void 0,O&&p?L(B):(p=m=void 0,y)}function U(){S!==void 0&&clearTimeout(S),w=0,p=N=m=S=void 0}function P(){return S===void 0?y:k(e())}function $(){var B=e(),G=A(B);if(p=arguments,m=this,N=B,G){if(S===void 0)return I(N);if(C)return clearTimeout(S),S=setTimeout(E,d),L(N)}return S===void 0&&(S=setTimeout(E,d)),y}return $.cancel=U,$.flush=P,$}return tj=o,tj}var rj,NB;function rxe(){if(NB)return rj;NB=1;var t=txe(),e=Yu(),r="Expected a function";function n(a,i,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return rj=n,rj}var nxe=rxe();const cK=nn(nxe);function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function jB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function G1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jB(Object(r),!0).forEach(function(n){axe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function axe(t,e,r){return e=sxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sxe(t){var e=ixe(t,"string");return _g(e)=="symbol"?e:e+""}function ixe(t,e){if(_g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oxe(t,e){return dxe(t)||uxe(t,e)||cxe(t,e)||lxe()}function lxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cxe(t,e){if(t){if(typeof t=="string")return _B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _B(t,e)}}function _B(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function dxe(t){if(Array.isArray(t))return t}var uK=_.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,x=t.maxHeight,y=t.children,S=t.debounce,N=S===void 0?0:S,w=t.id,T=t.className,C=t.onResize,O=t.style,L=O===void 0?{}:O,I=_.useRef(null),R=_.useRef();R.current=C,_.useImperativeHandle(e,function(){return Object.defineProperty(I.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),I.current},configurable:!0})});var A=_.useState({containerWidth:a.width,containerHeight:a.height}),E=oxe(A,2),k=E[0],U=E[1],P=_.useCallback(function(B,G){U(function(K){var H=Math.round(B),ee=Math.round(G);return K.containerWidth===H&&K.containerHeight===ee?K:{containerWidth:H,containerHeight:ee}})},[]);_.useEffect(function(){var B=function(ce){var fe,Z=ce[0].contentRect,ne=Z.width,Y=Z.height;P(ne,Y),(fe=R.current)===null||fe===void 0||fe.call(R,ne,Y)};N>0&&(B=cK(B,N,{trailing:!0,leading:!1}));var G=new ResizeObserver(B),K=I.current.getBoundingClientRect(),H=K.width,ee=K.height;return P(H,ee),G.observe(I.current),function(){G.disconnect()}},[P,N]);var $=_.useMemo(function(){var B=k.containerWidth,G=k.containerHeight;if(B<0||G<0)return null;lc(Ud(o)||Ud(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),lc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var K=Ud(o)?B:o,H=Ud(d)?G:d;r&&r>0&&(K?H=K/r:H&&(K=H*r),x&&H>x&&(H=x)),lc(K>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,H,o,d,p,m,r);var ee=!Array.isArray(y)&&oc(y.type).endsWith("Chart");return se.Children.map(y,function(ae){return se.isValidElement(ae)?_.cloneElement(ae,G1({width:K,height:H},ee?{style:G1({height:"100%",width:"100%",maxHeight:H,maxWidth:K},ae.props.style)}:{})):ae})},[r,y,d,x,m,p,k,o]);return se.createElement("div",{id:w?"".concat(w):void 0,className:vr("recharts-responsive-container",T),style:G1(G1({},L),{},{width:o,height:d,minWidth:p,minHeight:m,maxHeight:x}),ref:I},$)}),g7=function(e){return null};g7.displayName="Cell";function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function TB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function MT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TB(Object(r),!0).forEach(function(n){hxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hxe(t,e,r){return e=fxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fxe(t){var e=pxe(t,"string");return Tg(e)=="symbol"?e:e+""}function pxe(t,e){if(Tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wh={widthCache:{},cacheCount:0},mxe=2e3,gxe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},AB="recharts_measurement_span";function xxe(t){var e=MT({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var $m=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||R0.isSsr)return{width:0,height:0};var n=xxe(r),a=JSON.stringify({text:e,copyStyle:n});if(wh.widthCache[a])return wh.widthCache[a];try{var i=document.getElementById(AB);i||(i=document.createElement("span"),i.setAttribute("id",AB),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=MT(MT({},gxe),n);Object.assign(i.style,o),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return wh.widthCache[a]=d,++wh.cacheCount>mxe&&(wh.cacheCount=0,wh.widthCache={}),d}catch{return{width:0,height:0}}},yxe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function Ab(t,e){return Sxe(t)||wxe(t,e)||bxe(t,e)||vxe()}function vxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bxe(t,e){if(t){if(typeof t=="string")return EB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EB(t,e)}}function EB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Sxe(t){if(Array.isArray(t))return t}function Nxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_xe(n.key),n)}}function jxe(t,e,r){return e&&CB(t.prototype,e),r&&CB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _xe(t){var e=Txe(t,"string");return Ag(e)=="symbol"?e:e+""}function Txe(t,e){if(Ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Axe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Exe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Cxe=Object.keys(dK),Oh="NaN";function kxe(t,e){return t*dK[e]}var W1=(function(){function t(e,r){Nxe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Axe.test(r)&&(this.num=NaN,this.unit=""),Cxe.includes(r)&&(this.num=kxe(e,r),this.unit="px")}return jxe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Exe.exec(r))!==null&&n!==void 0?n:[],i=Ab(a,3),o=i[1],c=i[2];return new t(parseFloat(o),c??"")}}])})();function hK(t){if(t.includes(Oh))return Oh;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=kB.exec(e))!==null&&r!==void 0?r:[],a=Ab(n,4),i=a[1],o=a[2],c=a[3],d=W1.parse(i??""),h=W1.parse(c??""),p=o==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return Oh;e=e.replace(kB,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,x=(m=IB.exec(e))!==null&&m!==void 0?m:[],y=Ab(x,4),S=y[1],N=y[2],w=y[3],T=W1.parse(S??""),C=W1.parse(w??""),O=N==="+"?T.add(C):T.subtract(C);if(O.isNaN())return Oh;e=e.replace(IB,O.toString())}return e}var OB=/\(([^()]*)\)/;function Ixe(t){for(var e=t;e.includes("(");){var r=OB.exec(e),n=Ab(r,2),a=n[1];e=e.replace(OB,hK(a))}return e}function Oxe(t){var e=t.replace(/\s+/g,"");return e=Ixe(e),e=hK(e),e}function Rxe(t){try{return Oxe(t)}catch{return Oh}}function nj(t){var e=Rxe(t.slice(5,-1));return e===Oh?"":e}var Mxe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Dxe=["dx","dy","angle","className","breakAll"];function DT(){return DT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DT.apply(this,arguments)}function RB(t,e){if(t==null)return{};var r=Pxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function MB(t,e){return zxe(t)||$xe(t,e)||Bxe(t,e)||Lxe()}function Lxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bxe(t,e){if(t){if(typeof t=="string")return DB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DB(t,e)}}function DB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $xe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function zxe(t){if(Array.isArray(t))return t}var fK=/[ \f\n\r\t\v\u2028\u2029]+/,pK=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];fr(r)||(n?i=r.toString().split(""):i=r.toString().split(fK));var o=i.map(function(d){return{word:d,width:$m(d,a).width}}),c=n?0:$m("",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},Uxe=function(e,r,n,a,i){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=xt(o),m=c,x=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(H,ee){var ae=ee.word,ce=ee.width,fe=H[H.length-1];if(fe&&(a==null||i||fe.width+ce+n<Number(a)))fe.words.push(ae),fe.width+=ce+n;else{var Z={words:[ae],width:ce};H.push(Z)}return H},[])},y=x(r),S=function(K){return K.reduce(function(H,ee){return H.width>ee.width?H:ee})};if(!p)return y;for(var N="",w=function(K){var H=m.slice(0,K),ee=pK({breakAll:h,style:d,children:H+N}).wordsWithComputedWidth,ae=x(ee),ce=ae.length>o||S(ae).width>Number(a);return[ce,ae]},T=0,C=m.length-1,O=0,L;T<=C&&O<=m.length-1;){var I=Math.floor((T+C)/2),R=I-1,A=w(R),E=MB(A,2),k=E[0],U=E[1],P=w(I),$=MB(P,1),B=$[0];if(!k&&!B&&(T=I+1),k&&B&&(C=I-1),!k&&B){L=U;break}O++}return L||y},PB=function(e){var r=fr(e)?[]:e.toString().split(fK);return[{words:r}]},Vxe=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!R0.isSsr){var d,h,p=pK({breakAll:o,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,x=p.spaceWidth;d=m,h=x}else return PB(a);return Uxe({breakAll:o,children:a,maxLines:c,style:i},d,h,r,n)}return PB(a)},LB="#808080",yf=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,x=e.textAnchor,y=x===void 0?"start":x,S=e.verticalAnchor,N=S===void 0?"end":S,w=e.fill,T=w===void 0?LB:w,C=RB(e,Mxe),O=_.useMemo(function(){return Vxe({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:m,style:C.style,width:C.width})},[C.breakAll,C.children,C.maxLines,m,C.style,C.width]),L=C.dx,I=C.dy,R=C.angle,A=C.className,E=C.breakAll,k=RB(C,Dxe);if(!Ha(n)||!Ha(i))return null;var U=n+(xt(L)?L:0),P=i+(xt(I)?I:0),$;switch(N){case"start":$=nj("calc(".concat(h,")"));break;case"middle":$=nj("calc(".concat((O.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:$=nj("calc(".concat(O.length-1," * -").concat(c,")"));break}var B=[];if(m){var G=O[0].width,K=C.width;B.push("scale(".concat((xt(K)?K/G:1)/G,")"))}return R&&B.push("rotate(".concat(R,", ").concat(U,", ").concat(P,")")),B.length&&(k.transform=B.join(" ")),se.createElement("text",DT({},qt(k,!0),{x:U,y:P,className:vr("recharts-text",A),textAnchor:y,fill:T.includes("url")?LB:T}),O.map(function(H,ee){var ae=H.words.join(E?"":" ");return se.createElement("tspan",{x:U,dy:ee===0?$:c,key:"".concat(ae,"-").concat(ee)},ae)}))};function Du(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fxe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function x7(t){let e,r,n;t.length!==2?(e=Du,r=(c,d)=>Du(t(c),d),n=(c,d)=>t(c)-d):(e=t===Du||t===Fxe?t:qxe,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function o(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:o,right:i}}function qxe(){return 0}function mK(t){return t===null?NaN:+t}function*Hxe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Gxe=x7(Du),zx=Gxe.right;x7(mK).center;class BB extends Map{constructor(e,r=Qxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get($B(this,e))}has(e){return super.has($B(this,e))}set(e,r){return super.set(Wxe(this,e),r)}delete(e){return super.delete(Kxe(this,e))}}function $B({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Wxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Kxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Qxe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Xxe(t=Du){if(t===Du)return gK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function gK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Yxe=Math.sqrt(50),Jxe=Math.sqrt(10),Zxe=Math.sqrt(2);function Eb(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Yxe?10:i>=Jxe?5:i>=Zxe?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?Eb(t,e,r*2):[c,d,h]}function PT(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?Eb(e,t,r):Eb(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(i-h)/-o;else for(let h=0;h<c;++h)d[h]=(i-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function LT(t,e,r){return e=+e,t=+t,r=+r,Eb(t,e,r)[2]}function BT(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?LT(e,t,r):LT(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function zB(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function UB(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function xK(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?gK:Xxe(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),y=Math.max(r,Math.floor(e-h*m/d+x)),S=Math.min(n,Math.floor(e+(d-h)*m/d+x));xK(t,e,y,S,a)}const i=t[e];let o=r,c=n;for(cm(t,r,e),a(t[n],i)>0&&cm(t,r,n);o<c;){for(cm(t,o,c),++o,--c;a(t[o],i)<0;)++o;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?cm(t,r,c):(++c,cm(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function cm(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function eye(t,e,r){if(t=Float64Array.from(Hxe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return UB(t);if(e>=1)return zB(t);var n,a=(n-1)*e,i=Math.floor(a),o=zB(xK(t,i).subarray(0,i+1)),c=UB(t.subarray(i+1));return o+(c-o)*(a-i)}}function tye(t,e,r=mK){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return o+(c-o)*(a-i)}}function rye(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function mo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ec(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const $T=Symbol("implicit");function y7(){var t=new BB,e=[],r=[],n=$T;function a(i){let o=t.get(i);if(o===void 0){if(n!==$T)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new BB;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return y7(e,r).unknown(n)},mo.apply(a,arguments),a}function Eg(){var t=y7().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var x=e().length,y=a<n,S=y?a:n,N=y?n:a;i=(N-S)/Math.max(1,x-d+h*2),c&&(i=Math.floor(i)),S+=(N-S-i*(x-d))*p,o=i*(1-d),c&&(S=Math.round(S),o=Math.round(o));var w=rye(x).map(function(T){return S+i*T});return r(y?w.reverse():w)}return t.domain=function(x){return arguments.length?(e(x),m()):e()},t.range=function(x){return arguments.length?([n,a]=x,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(x){return[n,a]=x,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(x){return arguments.length?(c=!!x,m()):c},t.padding=function(x){return arguments.length?(d=Math.min(1,h=+x),m()):d},t.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),m()):d},t.paddingOuter=function(x){return arguments.length?(h=+x,m()):h},t.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),m()):p},t.copy=function(){return Eg(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},mo.apply(m(),arguments)}function yK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return yK(e())},t}function zm(){return yK(Eg.apply(null,arguments).paddingInner(1))}function v7(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function vK(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Ux(){}var Cg=.7,Cb=1/Cg,Wh="\\s*([+-]?\\d+)\\s*",kg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nye=/^#([0-9a-f]{3,8})$/,aye=new RegExp(`^rgb\\(${Wh},${Wh},${Wh}\\)$`),sye=new RegExp(`^rgb\\(${nl},${nl},${nl}\\)$`),iye=new RegExp(`^rgba\\(${Wh},${Wh},${Wh},${kg}\\)$`),oye=new RegExp(`^rgba\\(${nl},${nl},${nl},${kg}\\)$`),lye=new RegExp(`^hsl\\(${kg},${nl},${nl}\\)$`),cye=new RegExp(`^hsla\\(${kg},${nl},${nl},${kg}\\)$`),VB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};v7(Ux,Ig,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:FB,formatHex:FB,formatHex8:uye,formatHsl:dye,formatRgb:qB,toString:qB});function FB(){return this.rgb().formatHex()}function uye(){return this.rgb().formatHex8()}function dye(){return bK(this).formatHsl()}function qB(){return this.rgb().formatRgb()}function Ig(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=nye.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?HB(e):r===3?new li(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?K1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?K1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=aye.exec(t))?new li(e[1],e[2],e[3],1):(e=sye.exec(t))?new li(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=iye.exec(t))?K1(e[1],e[2],e[3],e[4]):(e=oye.exec(t))?K1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lye.exec(t))?KB(e[1],e[2]/100,e[3]/100,1):(e=cye.exec(t))?KB(e[1],e[2]/100,e[3]/100,e[4]):VB.hasOwnProperty(t)?HB(VB[t]):t==="transparent"?new li(NaN,NaN,NaN,0):null}function HB(t){return new li(t>>16&255,t>>8&255,t&255,1)}function K1(t,e,r,n){return n<=0&&(t=e=r=NaN),new li(t,e,r,n)}function hye(t){return t instanceof Ux||(t=Ig(t)),t?(t=t.rgb(),new li(t.r,t.g,t.b,t.opacity)):new li}function zT(t,e,r,n){return arguments.length===1?hye(t):new li(t,e,r,n??1)}function li(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}v7(li,zT,vK(Ux,{brighter(t){return t=t==null?Cb:Math.pow(Cb,t),new li(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cg:Math.pow(Cg,t),new li(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new li(Yd(this.r),Yd(this.g),Yd(this.b),kb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GB,formatHex:GB,formatHex8:fye,formatRgb:WB,toString:WB}));function GB(){return`#${Vd(this.r)}${Vd(this.g)}${Vd(this.b)}`}function fye(){return`#${Vd(this.r)}${Vd(this.g)}${Vd(this.b)}${Vd((isNaN(this.opacity)?1:this.opacity)*255)}`}function WB(){const t=kb(this.opacity);return`${t===1?"rgb(":"rgba("}${Yd(this.r)}, ${Yd(this.g)}, ${Yd(this.b)}${t===1?")":`, ${t})`}`}function kb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vd(t){return t=Yd(t),(t<16?"0":"")+t.toString(16)}function KB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ao(t,e,r,n)}function bK(t){if(t instanceof Ao)return new Ao(t.h,t.s,t.l,t.opacity);if(t instanceof Ux||(t=Ig(t)),!t)return new Ao;if(t instanceof Ao)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(e===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new Ao(o,c,d,t.opacity)}function pye(t,e,r,n){return arguments.length===1?bK(t):new Ao(t,e,r,n??1)}function Ao(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}v7(Ao,pye,vK(Ux,{brighter(t){return t=t==null?Cb:Math.pow(Cb,t),new Ao(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cg:Math.pow(Cg,t),new Ao(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new li(aj(t>=240?t-240:t+120,a,n),aj(t,a,n),aj(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ao(QB(this.h),Q1(this.s),Q1(this.l),kb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=kb(this.opacity);return`${t===1?"hsl(":"hsla("}${QB(this.h)}, ${Q1(this.s)*100}%, ${Q1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function QB(t){return t=(t||0)%360,t<0?t+360:t}function Q1(t){return Math.max(0,Math.min(1,t||0))}function aj(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const b7=t=>()=>t;function mye(t,e){return function(r){return t+r*e}}function gye(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function xye(t){return(t=+t)==1?wK:function(e,r){return r-e?gye(e,r,t):b7(isNaN(e)?r:e)}}function wK(t,e){var r=e-t;return r?mye(t,r):b7(isNaN(t)?e:t)}const XB=(function t(e){var r=xye(e);function n(a,i){var o=r((a=zT(a)).r,(i=zT(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=wK(a.opacity,i.opacity);return function(p){return a.r=o(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function yye(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function vye(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bye(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=tp(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function wye(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ib(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Sye(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=tp(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var UT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sj=new RegExp(UT.source,"g");function Nye(t){return function(){return t}}function jye(t){return function(e){return t(e)+""}}function _ye(t,e){var r=UT.lastIndex=sj.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=UT.exec(t))&&(a=sj.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:Ib(n,a)})),r=sj.lastIndex;return r<e.length&&(i=e.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?jye(d[0].x):Nye(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function tp(t,e){var r=typeof e,n;return e==null||r==="boolean"?b7(e):(r==="number"?Ib:r==="string"?(n=Ig(e))?(e=n,XB):_ye:e instanceof Ig?XB:e instanceof Date?wye:vye(e)?yye:Array.isArray(e)?bye:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Sye:Ib)(t,e)}function w7(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Tye(t,e){e===void 0&&(e=t,t=tp);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function Aye(t){return function(){return t}}function Ob(t){return+t}var YB=[0,1];function Vs(t){return t}function VT(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Aye(isNaN(e)?NaN:.5)}function Eye(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Cye(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=VT(a,n),i=r(o,i)):(n=VT(n,a),i=r(i,o)),function(c){return i(n(c))}}function kye(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=VT(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(c){var d=zx(t,c,1,n)-1;return i[d](a[d](c))}}function Vx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Tw(){var t=YB,e=YB,r=tp,n,a,i,o=Vs,c,d,h;function p(){var x=Math.min(t.length,e.length);return o!==Vs&&(o=Eye(t[0],t[x-1])),c=x>2?kye:Cye,d=h=null,m}function m(x){return x==null||isNaN(x=+x)?i:(d||(d=c(t.map(n),e,r)))(n(o(x)))}return m.invert=function(x){return o(a((h||(h=c(e,t.map(n),Ib)))(x)))},m.domain=function(x){return arguments.length?(t=Array.from(x,Ob),p()):t.slice()},m.range=function(x){return arguments.length?(e=Array.from(x),p()):e.slice()},m.rangeRound=function(x){return e=Array.from(x),r=w7,p()},m.clamp=function(x){return arguments.length?(o=x?!0:Vs,p()):o!==Vs},m.interpolate=function(x){return arguments.length?(r=x,p()):r},m.unknown=function(x){return arguments.length?(i=x,m):i},function(x,y){return n=x,a=y,p()}}function S7(){return Tw()(Vs,Vs)}function Iye(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Rb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function vf(t){return t=Rb(Math.abs(t)),t?t[1]:NaN}function Oye(t,e){return function(r,n){for(var a=r.length,i=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return i.reverse().join(e)}}function Rye(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Mye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Og(t){if(!(e=Mye.exec(t)))throw new Error("invalid format: "+t);var e;return new N7({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Og.prototype=N7.prototype;function N7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}N7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dye(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Mb;function Pye(t,e){var r=Rb(t,e);if(!r)return Mb=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(Mb=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Rb(t,Math.max(0,e+i-1))[0]}function JB(t,e){var r=Rb(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const ZB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Iye,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>JB(t*100,e),r:JB,s:Pye,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function e$(t){return t}var t$=Array.prototype.map,r$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Lye(t){var e=t.grouping===void 0||t.thousands===void 0?e$:Oye(t$.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?e$:Rye(t$.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,x){m=Og(m);var y=m.fill,S=m.align,N=m.sign,w=m.symbol,T=m.zero,C=m.width,O=m.comma,L=m.precision,I=m.trim,R=m.type;R==="n"?(O=!0,R="g"):ZB[R]||(L===void 0&&(L=12),I=!0,R="g"),(T||y==="0"&&S==="=")&&(T=!0,y="0",S="=");var A=(x&&x.prefix!==void 0?x.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():""),E=(w==="$"?n:/[%p]/.test(R)?o:"")+(x&&x.suffix!==void 0?x.suffix:""),k=ZB[R],U=/[defgprs%]/.test(R);L=L===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function P($){var B=A,G=E,K,H,ee;if(R==="c")G=k($)+G,$="";else{$=+$;var ae=$<0||1/$<0;if($=isNaN($)?d:k(Math.abs($),L),I&&($=Dye($)),ae&&+$==0&&N!=="+"&&(ae=!1),B=(ae?N==="("?N:c:N==="-"||N==="("?"":N)+B,G=(R==="s"&&!isNaN($)&&Mb!==void 0?r$[8+Mb/3]:"")+G+(ae&&N==="("?")":""),U){for(K=-1,H=$.length;++K<H;)if(ee=$.charCodeAt(K),48>ee||ee>57){G=(ee===46?a+$.slice(K+1):$.slice(K))+G,$=$.slice(0,K);break}}}O&&!T&&($=e($,1/0));var ce=B.length+$.length+G.length,fe=ce<C?new Array(C-ce+1).join(y):"";switch(O&&T&&($=e(fe+$,fe.length?C-G.length:1/0),fe=""),S){case"<":$=B+$+G+fe;break;case"=":$=B+fe+$+G;break;case"^":$=fe.slice(0,ce=fe.length>>1)+B+$+G+fe.slice(ce);break;default:$=fe+B+$+G;break}return i($)}return P.toString=function(){return m+""},P}function p(m,x){var y=Math.max(-8,Math.min(8,Math.floor(vf(x)/3)))*3,S=Math.pow(10,-y),N=h((m=Og(m),m.type="f",m),{suffix:r$[8+y/3]});return function(w){return N(S*w)}}return{format:h,formatPrefix:p}}var X1,j7,SK;Bye({thousands:",",grouping:[3],currency:["$",""]});function Bye(t){return X1=Lye(t),j7=X1.format,SK=X1.formatPrefix,X1}function $ye(t){return Math.max(0,-vf(Math.abs(t)))}function zye(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vf(e)/3)))*3-vf(Math.abs(t)))}function Uye(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vf(e)-vf(t))+1}function NK(t,e,r,n){var a=BT(t,e,r),i;switch(n=Og(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=zye(a,o))&&(n.precision=i),SK(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Uye(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=$ye(a))&&(n.precision=i-(n.type==="%")*2);break}}return j7(n)}function Ju(t){var e=t.domain;return t.ticks=function(r){var n=e();return PT(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return NK(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],c=n[i],d,h,p=10;for(c<o&&(h=o,o=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=LT(o,c,r),h===d)return n[a]=o,n[i]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function Db(){var t=S7();return t.copy=function(){return Vx(t,Db())},mo.apply(t,arguments),Ju(t)}function jK(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Ob),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return jK(t).unknown(e)},t=arguments.length?Array.from(t,Ob):[0,1],Ju(r)}function _K(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function n$(t){return Math.log(t)}function a$(t){return Math.exp(t)}function Vye(t){return-Math.log(-t)}function Fye(t){return-Math.exp(-t)}function qye(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Hye(t){return t===10?qye:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Gye(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function s$(t){return(e,r)=>-t(-e,r)}function _7(t){const e=t(n$,a$),r=e.domain;let n=10,a,i;function o(){return a=Gye(n),i=Hye(n),r()[0]<0?(a=s$(a),i=s$(i),t(Vye,Fye)):t(n$,a$),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let x=a(h),y=a(p),S,N;const w=c==null?10:+c;let T=[];if(!(n%1)&&y-x<w){if(x=Math.floor(x),y=Math.ceil(y),h>0){for(;x<=y;++x)for(S=1;S<n;++S)if(N=x<0?S/i(-x):S*i(x),!(N<h)){if(N>p)break;T.push(N)}}else for(;x<=y;++x)for(S=n-1;S>=1;--S)if(N=x>0?S/i(-x):S*i(x),!(N<h)){if(N>p)break;T.push(N)}T.length*2<w&&(T=PT(h,p,w))}else T=PT(x,y,Math.min(y-x,w)).map(i);return m?T.reverse():T},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Og(d)).precision==null&&(d.trim=!0),d=j7(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(_K(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function TK(){const t=_7(Tw()).domain([1,10]);return t.copy=()=>Vx(t,TK()).base(t.base()),mo.apply(t,arguments),t}function i$(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function o$(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function T7(t){var e=1,r=t(i$(e),o$(e));return r.constant=function(n){return arguments.length?t(i$(e=+n),o$(e)):e},Ju(r)}function AK(){var t=T7(Tw());return t.copy=function(){return Vx(t,AK()).constant(t.constant())},mo.apply(t,arguments)}function l$(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Wye(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Kye(t){return t<0?-t*t:t*t}function A7(t){var e=t(Vs,Vs),r=1;function n(){return r===1?t(Vs,Vs):r===.5?t(Wye,Kye):t(l$(r),l$(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Ju(e)}function E7(){var t=A7(Tw());return t.copy=function(){return Vx(t,E7()).exponent(t.exponent())},mo.apply(t,arguments),t}function Qye(){return E7.apply(null,arguments).exponent(.5)}function c$(t){return Math.sign(t)*t*t}function Xye(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function EK(){var t=S7(),e=[0,1],r=!1,n;function a(i){var o=Xye(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(c$(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,Ob)).map(c$)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return EK(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},mo.apply(a,arguments),Ju(a)}function CK(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=tye(t,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:e[zx(r,o)]}return i.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Du),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return CK().domain(t).range(e).unknown(n)},mo.apply(i,arguments)}function kK(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[zx(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return kK().domain([t,e]).range(a).unknown(i)},mo.apply(Ju(o),arguments)}function IK(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[zx(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return IK().domain(t).range(e).unknown(r)},mo.apply(a,arguments)}const ij=new Date,oj=new Date;function Ya(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<o);return d},a.filter=i=>Ya(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!i(o););else for(;--c>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(ij.setTime(+i),oj.setTime(+o),t(ij),t(oj),Math.floor(r(ij,oj))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Pb=Ya(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Pb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ya(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Pb);Pb.range;const tc=1e3,no=tc*60,rc=no*60,yc=rc*24,C7=yc*7,u$=yc*30,lj=yc*365,Fd=Ya(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*tc)},(t,e)=>(e-t)/tc,t=>t.getUTCSeconds());Fd.range;const k7=Ya(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tc)},(t,e)=>{t.setTime(+t+e*no)},(t,e)=>(e-t)/no,t=>t.getMinutes());k7.range;const I7=Ya(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*no)},(t,e)=>(e-t)/no,t=>t.getUTCMinutes());I7.range;const O7=Ya(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tc-t.getMinutes()*no)},(t,e)=>{t.setTime(+t+e*rc)},(t,e)=>(e-t)/rc,t=>t.getHours());O7.range;const R7=Ya(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*rc)},(t,e)=>(e-t)/rc,t=>t.getUTCHours());R7.range;const Fx=Ya(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*no)/yc,t=>t.getDate()-1);Fx.range;const Aw=Ya(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/yc,t=>t.getUTCDate()-1);Aw.range;const OK=Ya(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/yc,t=>Math.floor(t/yc));OK.range;function M0(t){return Ya(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*no)/C7)}const Ew=M0(0),Lb=M0(1),Yye=M0(2),Jye=M0(3),bf=M0(4),Zye=M0(5),e1e=M0(6);Ew.range;Lb.range;Yye.range;Jye.range;bf.range;Zye.range;e1e.range;function D0(t){return Ya(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/C7)}const Cw=D0(0),Bb=D0(1),t1e=D0(2),r1e=D0(3),wf=D0(4),n1e=D0(5),a1e=D0(6);Cw.range;Bb.range;t1e.range;r1e.range;wf.range;n1e.range;a1e.range;const M7=Ya(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());M7.range;const D7=Ya(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());D7.range;const vc=Ya(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());vc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ya(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});vc.range;const bc=Ya(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());bc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ya(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});bc.range;function RK(t,e,r,n,a,i){const o=[[Fd,1,tc],[Fd,5,5*tc],[Fd,15,15*tc],[Fd,30,30*tc],[i,1,no],[i,5,5*no],[i,15,15*no],[i,30,30*no],[a,1,rc],[a,3,3*rc],[a,6,6*rc],[a,12,12*rc],[n,1,yc],[n,2,2*yc],[r,1,C7],[e,1,u$],[e,3,3*u$],[t,1,lj]];function c(h,p,m){const x=p<h;x&&([h,p]=[p,h]);const y=m&&typeof m.range=="function"?m:d(h,p,m),S=y?y.range(h,+p+1):[];return x?S.reverse():S}function d(h,p,m){const x=Math.abs(p-h)/m,y=x7(([,,w])=>w).right(o,x);if(y===o.length)return t.every(BT(h/lj,p/lj,m));if(y===0)return Pb.every(Math.max(BT(h,p,m),1));const[S,N]=o[x/o[y-1][2]<o[y][2]/x?y-1:y];return S.every(N)}return[c,d]}const[s1e,i1e]=RK(bc,D7,Cw,OK,R7,I7),[o1e,l1e]=RK(vc,M7,Ew,Fx,O7,k7);function cj(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function uj(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function um(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function c1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=dm(a),p=hm(a),m=dm(i),x=hm(i),y=dm(o),S=hm(o),N=dm(c),w=hm(c),T=dm(d),C=hm(d),O={a:ee,A:ae,b:ce,B:fe,c:null,d:g$,e:g$,f:O1e,g:V1e,G:q1e,H:C1e,I:k1e,j:I1e,L:MK,m:R1e,M:M1e,p:Z,q:ne,Q:v$,s:b$,S:D1e,u:P1e,U:L1e,V:B1e,w:$1e,W:z1e,x:null,X:null,y:U1e,Y:F1e,Z:H1e,"%":y$},L={a:Y,A:de,b:ye,B:Ue,c:null,d:x$,e:x$,f:Q1e,g:sve,G:ove,H:G1e,I:W1e,j:K1e,L:PK,m:X1e,M:Y1e,p:Xe,q:Ye,Q:v$,s:b$,S:J1e,u:Z1e,U:eve,V:tve,w:rve,W:nve,x:null,X:null,y:ave,Y:ive,Z:lve,"%":y$},I={a:U,A:P,b:$,B,c:G,d:p$,e:p$,f:_1e,g:f$,G:h$,H:m$,I:m$,j:w1e,L:j1e,m:b1e,M:S1e,p:k,q:v1e,Q:A1e,s:E1e,S:N1e,u:p1e,U:m1e,V:g1e,w:f1e,W:x1e,x:K,X:H,y:f$,Y:h$,Z:y1e,"%":T1e};O.x=R(r,O),O.X=R(n,O),O.c=R(e,O),L.x=R(r,L),L.X=R(n,L),L.c=R(e,L);function R(_e,he){return function(Q){var X=[],Se=-1,Ne=0,Ke=_e.length,at,Rt,Pe;for(Q instanceof Date||(Q=new Date(+Q));++Se<Ke;)_e.charCodeAt(Se)===37&&(X.push(_e.slice(Ne,Se)),(Rt=d$[at=_e.charAt(++Se)])!=null?at=_e.charAt(++Se):Rt=at==="e"?" ":"0",(Pe=he[at])&&(at=Pe(Q,Rt)),X.push(at),Ne=Se+1);return X.push(_e.slice(Ne,Se)),X.join("")}}function A(_e,he){return function(Q){var X=um(1900,void 0,1),Se=E(X,_e,Q+="",0),Ne,Ke;if(Se!=Q.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(he&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(Ne=uj(um(X.y,0,1)),Ke=Ne.getUTCDay(),Ne=Ke>4||Ke===0?Bb.ceil(Ne):Bb(Ne),Ne=Aw.offset(Ne,(X.V-1)*7),X.y=Ne.getUTCFullYear(),X.m=Ne.getUTCMonth(),X.d=Ne.getUTCDate()+(X.w+6)%7):(Ne=cj(um(X.y,0,1)),Ke=Ne.getDay(),Ne=Ke>4||Ke===0?Lb.ceil(Ne):Lb(Ne),Ne=Fx.offset(Ne,(X.V-1)*7),X.y=Ne.getFullYear(),X.m=Ne.getMonth(),X.d=Ne.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),Ke="Z"in X?uj(um(X.y,0,1)).getUTCDay():cj(um(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(Ke+5)%7:X.w+X.U*7-(Ke+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,uj(X)):cj(X)}}function E(_e,he,Q,X){for(var Se=0,Ne=he.length,Ke=Q.length,at,Rt;Se<Ne;){if(X>=Ke)return-1;if(at=he.charCodeAt(Se++),at===37){if(at=he.charAt(Se++),Rt=I[at in d$?he.charAt(Se++):at],!Rt||(X=Rt(_e,Q,X))<0)return-1}else if(at!=Q.charCodeAt(X++))return-1}return X}function k(_e,he,Q){var X=h.exec(he.slice(Q));return X?(_e.p=p.get(X[0].toLowerCase()),Q+X[0].length):-1}function U(_e,he,Q){var X=y.exec(he.slice(Q));return X?(_e.w=S.get(X[0].toLowerCase()),Q+X[0].length):-1}function P(_e,he,Q){var X=m.exec(he.slice(Q));return X?(_e.w=x.get(X[0].toLowerCase()),Q+X[0].length):-1}function $(_e,he,Q){var X=T.exec(he.slice(Q));return X?(_e.m=C.get(X[0].toLowerCase()),Q+X[0].length):-1}function B(_e,he,Q){var X=N.exec(he.slice(Q));return X?(_e.m=w.get(X[0].toLowerCase()),Q+X[0].length):-1}function G(_e,he,Q){return E(_e,e,he,Q)}function K(_e,he,Q){return E(_e,r,he,Q)}function H(_e,he,Q){return E(_e,n,he,Q)}function ee(_e){return o[_e.getDay()]}function ae(_e){return i[_e.getDay()]}function ce(_e){return d[_e.getMonth()]}function fe(_e){return c[_e.getMonth()]}function Z(_e){return a[+(_e.getHours()>=12)]}function ne(_e){return 1+~~(_e.getMonth()/3)}function Y(_e){return o[_e.getUTCDay()]}function de(_e){return i[_e.getUTCDay()]}function ye(_e){return d[_e.getUTCMonth()]}function Ue(_e){return c[_e.getUTCMonth()]}function Xe(_e){return a[+(_e.getUTCHours()>=12)]}function Ye(_e){return 1+~~(_e.getUTCMonth()/3)}return{format:function(_e){var he=R(_e+="",O);return he.toString=function(){return _e},he},parse:function(_e){var he=A(_e+="",!1);return he.toString=function(){return _e},he},utcFormat:function(_e){var he=R(_e+="",L);return he.toString=function(){return _e},he},utcParse:function(_e){var he=A(_e+="",!0);return he.toString=function(){return _e},he}}}var d$={"-":"",_:" ",0:"0"},ls=/^\s*\d+/,u1e=/^%/,d1e=/[\\^$*+?|[\]().{}]/g;function Zr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function h1e(t){return t.replace(d1e,"\\$&")}function dm(t){return new RegExp("^(?:"+t.map(h1e).join("|")+")","i")}function hm(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function f1e(t,e,r){var n=ls.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function p1e(t,e,r){var n=ls.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function m1e(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function g1e(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function x1e(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function h$(t,e,r){var n=ls.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function f$(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function y1e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function v1e(t,e,r){var n=ls.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function b1e(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function p$(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function w1e(t,e,r){var n=ls.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function m$(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function S1e(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function N1e(t,e,r){var n=ls.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function j1e(t,e,r){var n=ls.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function _1e(t,e,r){var n=ls.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function T1e(t,e,r){var n=u1e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function A1e(t,e,r){var n=ls.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function E1e(t,e,r){var n=ls.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function g$(t,e){return Zr(t.getDate(),e,2)}function C1e(t,e){return Zr(t.getHours(),e,2)}function k1e(t,e){return Zr(t.getHours()%12||12,e,2)}function I1e(t,e){return Zr(1+Fx.count(vc(t),t),e,3)}function MK(t,e){return Zr(t.getMilliseconds(),e,3)}function O1e(t,e){return MK(t,e)+"000"}function R1e(t,e){return Zr(t.getMonth()+1,e,2)}function M1e(t,e){return Zr(t.getMinutes(),e,2)}function D1e(t,e){return Zr(t.getSeconds(),e,2)}function P1e(t){var e=t.getDay();return e===0?7:e}function L1e(t,e){return Zr(Ew.count(vc(t)-1,t),e,2)}function DK(t){var e=t.getDay();return e>=4||e===0?bf(t):bf.ceil(t)}function B1e(t,e){return t=DK(t),Zr(bf.count(vc(t),t)+(vc(t).getDay()===4),e,2)}function $1e(t){return t.getDay()}function z1e(t,e){return Zr(Lb.count(vc(t)-1,t),e,2)}function U1e(t,e){return Zr(t.getFullYear()%100,e,2)}function V1e(t,e){return t=DK(t),Zr(t.getFullYear()%100,e,2)}function F1e(t,e){return Zr(t.getFullYear()%1e4,e,4)}function q1e(t,e){var r=t.getDay();return t=r>=4||r===0?bf(t):bf.ceil(t),Zr(t.getFullYear()%1e4,e,4)}function H1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Zr(e/60|0,"0",2)+Zr(e%60,"0",2)}function x$(t,e){return Zr(t.getUTCDate(),e,2)}function G1e(t,e){return Zr(t.getUTCHours(),e,2)}function W1e(t,e){return Zr(t.getUTCHours()%12||12,e,2)}function K1e(t,e){return Zr(1+Aw.count(bc(t),t),e,3)}function PK(t,e){return Zr(t.getUTCMilliseconds(),e,3)}function Q1e(t,e){return PK(t,e)+"000"}function X1e(t,e){return Zr(t.getUTCMonth()+1,e,2)}function Y1e(t,e){return Zr(t.getUTCMinutes(),e,2)}function J1e(t,e){return Zr(t.getUTCSeconds(),e,2)}function Z1e(t){var e=t.getUTCDay();return e===0?7:e}function eve(t,e){return Zr(Cw.count(bc(t)-1,t),e,2)}function LK(t){var e=t.getUTCDay();return e>=4||e===0?wf(t):wf.ceil(t)}function tve(t,e){return t=LK(t),Zr(wf.count(bc(t),t)+(bc(t).getUTCDay()===4),e,2)}function rve(t){return t.getUTCDay()}function nve(t,e){return Zr(Bb.count(bc(t)-1,t),e,2)}function ave(t,e){return Zr(t.getUTCFullYear()%100,e,2)}function sve(t,e){return t=LK(t),Zr(t.getUTCFullYear()%100,e,2)}function ive(t,e){return Zr(t.getUTCFullYear()%1e4,e,4)}function ove(t,e){var r=t.getUTCDay();return t=r>=4||r===0?wf(t):wf.ceil(t),Zr(t.getUTCFullYear()%1e4,e,4)}function lve(){return"+0000"}function y$(){return"%"}function v$(t){return+t}function b$(t){return Math.floor(+t/1e3)}var Sh,BK,$K;cve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cve(t){return Sh=c1e(t),BK=Sh.format,Sh.parse,$K=Sh.utcFormat,Sh.utcParse,Sh}function uve(t){return new Date(t)}function dve(t){return t instanceof Date?+t:+new Date(+t)}function P7(t,e,r,n,a,i,o,c,d,h){var p=S7(),m=p.invert,x=p.domain,y=h(".%L"),S=h(":%S"),N=h("%I:%M"),w=h("%I %p"),T=h("%a %d"),C=h("%b %d"),O=h("%B"),L=h("%Y");function I(R){return(d(R)<R?y:c(R)<R?S:o(R)<R?N:i(R)<R?w:n(R)<R?a(R)<R?T:C:r(R)<R?O:L)(R)}return p.invert=function(R){return new Date(m(R))},p.domain=function(R){return arguments.length?x(Array.from(R,dve)):x().map(uve)},p.ticks=function(R){var A=x();return t(A[0],A[A.length-1],R??10)},p.tickFormat=function(R,A){return A==null?I:h(A)},p.nice=function(R){var A=x();return(!R||typeof R.range!="function")&&(R=e(A[0],A[A.length-1],R??10)),R?x(_K(A,R)):p},p.copy=function(){return Vx(p,P7(t,e,r,n,a,i,o,c,d,h))},p}function hve(){return mo.apply(P7(o1e,l1e,vc,M7,Ew,Fx,O7,k7,Fd,BK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fve(){return mo.apply(P7(s1e,i1e,bc,D7,Cw,Aw,R7,I7,Fd,$K).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kw(){var t=0,e=1,r,n,a,i,o=Vs,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:o(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(o=m,h):o};function p(m){return function(x){var y,S;return arguments.length?([y,S]=x,o=m(y,S),h):[o(0),o(1)]}}return h.range=p(tp),h.rangeRound=p(w7),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Zu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function zK(){var t=Ju(kw()(Vs));return t.copy=function(){return Zu(t,zK())},Ec.apply(t,arguments)}function UK(){var t=_7(kw()).domain([1,10]);return t.copy=function(){return Zu(t,UK()).base(t.base())},Ec.apply(t,arguments)}function VK(){var t=T7(kw());return t.copy=function(){return Zu(t,VK()).constant(t.constant())},Ec.apply(t,arguments)}function L7(){var t=A7(kw());return t.copy=function(){return Zu(t,L7()).exponent(t.exponent())},Ec.apply(t,arguments)}function pve(){return L7.apply(null,arguments).exponent(.5)}function FK(){var t=[],e=Vs;function r(n){if(n!=null&&!isNaN(n=+n))return e((zx(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Du),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>eye(t,i/n))},r.copy=function(){return FK(e).domain(t)},Ec.apply(r,arguments)}function Iw(){var t=0,e=.5,r=1,n=1,a,i,o,c,d,h=Vs,p,m=!1,x;function y(N){return isNaN(N=+N)?x:(N=.5+((N=+p(N))-i)*(n*N<n*i?c:d),h(m?Math.max(0,Math.min(1,N)):N))}y.domain=function(N){return arguments.length?([t,e,r]=N,a=p(t=+t),i=p(e=+e),o=p(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y):[t,e,r]},y.clamp=function(N){return arguments.length?(m=!!N,y):m},y.interpolator=function(N){return arguments.length?(h=N,y):h};function S(N){return function(w){var T,C,O;return arguments.length?([T,C,O]=w,h=Tye(N,[T,C,O]),y):[h(0),h(.5),h(1)]}}return y.range=S(tp),y.rangeRound=S(w7),y.unknown=function(N){return arguments.length?(x=N,y):x},function(N){return p=N,a=N(t),i=N(e),o=N(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y}}function qK(){var t=Ju(Iw()(Vs));return t.copy=function(){return Zu(t,qK())},Ec.apply(t,arguments)}function HK(){var t=_7(Iw()).domain([.1,1,10]);return t.copy=function(){return Zu(t,HK()).base(t.base())},Ec.apply(t,arguments)}function GK(){var t=T7(Iw());return t.copy=function(){return Zu(t,GK()).constant(t.constant())},Ec.apply(t,arguments)}function B7(){var t=A7(Iw());return t.copy=function(){return Zu(t,B7()).exponent(t.exponent())},Ec.apply(t,arguments)}function mve(){return B7.apply(null,arguments).exponent(.5)}const w$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Eg,scaleDiverging:qK,scaleDivergingLog:HK,scaleDivergingPow:B7,scaleDivergingSqrt:mve,scaleDivergingSymlog:GK,scaleIdentity:jK,scaleImplicit:$T,scaleLinear:Db,scaleLog:TK,scaleOrdinal:y7,scalePoint:zm,scalePow:E7,scaleQuantile:CK,scaleQuantize:kK,scaleRadial:EK,scaleSequential:zK,scaleSequentialLog:UK,scaleSequentialPow:L7,scaleSequentialQuantile:FK,scaleSequentialSqrt:pve,scaleSequentialSymlog:VK,scaleSqrt:Qye,scaleSymlog:AK,scaleThreshold:IK,scaleTime:hve,scaleUtc:fve,tickFormat:NK},Symbol.toStringTag,{value:"Module"}));var dj,S$;function Ow(){if(S$)return dj;S$=1;var t=Jf();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return dj=e,dj}var hj,N$;function WK(){if(N$)return hj;N$=1;function t(e,r){return e>r}return hj=t,hj}var fj,j$;function gve(){if(j$)return fj;j$=1;var t=Ow(),e=WK(),r=ep();function n(a){return a&&a.length?t(a,r,e):void 0}return fj=n,fj}var xve=gve();const Rw=nn(xve);var pj,_$;function KK(){if(_$)return pj;_$=1;function t(e,r){return e<r}return pj=t,pj}var mj,T$;function yve(){if(T$)return mj;T$=1;var t=Ow(),e=KK(),r=ep();function n(a){return a&&a.length?t(a,r,e):void 0}return mj=n,mj}var vve=yve();const Mw=nn(vve);var gj,A$;function bve(){if(A$)return gj;A$=1;var t=e7(),e=vl(),r=rK(),n=fi();function a(i,o){var c=n(i)?t:r;return c(i,e(o,3))}return gj=a,gj}var xj,E$;function wve(){if(E$)return xj;E$=1;var t=eK(),e=bve();function r(n,a){return t(e(n,a),1)}return xj=r,xj}var Sve=wve();const Nve=nn(Sve);var yj,C$;function jve(){if(C$)return yj;C$=1;var t=h7();function e(r,n){return t(r,n)}return yj=e,yj}var _ve=jve();const qx=nn(_ve);var rp=1e9,Tve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},z7,Yn=!0,po="[DecimalError] ",Jd=po+"Invalid argument: ",$7=po+"Exponent out of range: ",np=Math.floor,Md=Math.pow,Ave=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ki,as=1e7,Gn=7,QK=9007199254740991,$b=np(QK/Gn),It={};It.absoluteValue=It.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};It.comparedTo=It.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};It.decimalPlaces=It.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Gn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};It.dividedBy=It.div=function(t){return cc(this,new this.constructor(t))};It.dividedToIntegerBy=It.idiv=function(t){var e=this,r=e.constructor;return Rn(cc(e,new r(t),0,1),r.precision)};It.equals=It.eq=function(t){return!this.cmp(t)};It.exponent=function(){return Ma(this)};It.greaterThan=It.gt=function(t){return this.cmp(t)>0};It.greaterThanOrEqualTo=It.gte=function(t){return this.cmp(t)>=0};It.isInteger=It.isint=function(){return this.e>this.d.length-2};It.isNegative=It.isneg=function(){return this.s<0};It.isPositive=It.ispos=function(){return this.s>0};It.isZero=function(){return this.s===0};It.lessThan=It.lt=function(t){return this.cmp(t)<0};It.lessThanOrEqualTo=It.lte=function(t){return this.cmp(t)<1};It.logarithm=It.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(ki))throw Error(po+"NaN");if(r.s<1)throw Error(po+(r.s?"NaN":"-Infinity"));return r.eq(ki)?new n(0):(Yn=!1,e=cc(Rg(r,i),Rg(t,i),i),Yn=!0,Rn(e,a))};It.minus=It.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?JK(e,t):XK(e,(t.s=-t.s,t))};It.modulo=It.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(po+"NaN");return r.s?(Yn=!1,e=cc(r,t,0,1).times(t),Yn=!0,r.minus(e)):Rn(new n(r),a)};It.naturalExponential=It.exp=function(){return YK(this)};It.naturalLogarithm=It.ln=function(){return Rg(this)};It.negated=It.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};It.plus=It.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?XK(e,t):JK(e,(t.s=-t.s,t))};It.precision=It.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Jd+t);if(e=Ma(a)+1,n=a.d.length-1,r=n*Gn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};It.squareRoot=It.sqrt=function(){var t,e,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(po+"NaN")}for(t=Ma(c),Yn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=tl(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=np((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(cc(c,i,o+2)).times(.5),tl(i.d).slice(0,o)===(e=tl(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Rn(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;o+=4}return Yn=!0,Rn(n,r)};It.times=It.mul=function(t){var e,r,n,a,i,o,c,d,h,p=this,m=p.constructor,x=p.d,y=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=x.length,h=y.length,d<h&&(i=x,x=y,y=i,o=d,d=h,h=o),i=[],o=d+h,n=o;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+y[n]*x[a-n-1]+e,i[a--]=c%as|0,e=c/as|0;i[a]=(i[a]+e)%as|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Yn?Rn(t,m.precision):t};It.toDecimalPlaces=It.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(dl(t,0,rp),e===void 0?e=n.rounding:dl(e,0,8),Rn(r,t+Ma(r)+1,e))};It.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=v0(n,!0):(dl(t,0,rp),e===void 0?e=a.rounding:dl(e,0,8),n=Rn(new a(n),t+1,e),r=v0(n,!0,t+1)),r};It.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?v0(a):(dl(t,0,rp),e===void 0?e=i.rounding:dl(e,0,8),n=Rn(new i(a),t+Ma(a)+1,e),r=v0(n.abs(),!1,t+Ma(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};It.toInteger=It.toint=function(){var t=this,e=t.constructor;return Rn(new e(t),Ma(t)+1,e.rounding)};It.toNumber=function(){return+this};It.toPower=It.pow=function(t){var e,r,n,a,i,o,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(ki);if(c=new d(c),!c.s){if(t.s<1)throw Error(po+"Infinity");return c}if(c.eq(ki))return c;if(n=d.precision,t.eq(ki))return Rn(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=c.s,o){if((r=p<0?-p:p)<=QK){for(a=new d(ki),e=Math.ceil(n/Gn+4),Yn=!1;r%2&&(a=a.times(c),I$(a.d,e)),r=np(r/2),r!==0;)c=c.times(c),I$(c.d,e);return Yn=!0,t.s<0?new d(ki).div(a):Rn(a,n)}}else if(i<0)throw Error(po+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Yn=!1,a=t.times(Rg(c,n+h)),Yn=!0,a=YK(a),a.s=i,a};It.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Ma(a),n=v0(a,r<=i.toExpNeg||r>=i.toExpPos)):(dl(t,1,rp),e===void 0?e=i.rounding:dl(e,0,8),a=Rn(new i(a),t,e),r=Ma(a),n=v0(a,t<=r||r<=i.toExpNeg,t)),n};It.toSignificantDigits=It.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(dl(t,1,rp),e===void 0?e=n.rounding:dl(e,0,8)),Rn(new n(r),t,e)};It.toString=It.valueOf=It.val=It.toJSON=It[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ma(t),r=t.constructor;return v0(t,e<=r.toExpNeg||e>=r.toExpPos)};function XK(t,e){var r,n,a,i,o,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Yn?Rn(e,m):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(m/Gn),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/as|0,d[i]%=as;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Yn?Rn(e,m):e}function dl(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Jd+t)}function tl(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=Gn-n.length,r&&(i+=du(r)),i+=n;o=t[e],n=o+"",r=Gn-n.length,r&&(i+=du(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var cc=(function(){function t(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%as|0,o=i/as|0;return o&&n.unshift(o),n}function e(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*as+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,h,p,m,x,y,S,N,w,T,C,O,L,I,R,A,E,k=n.constructor,U=n.s==a.s?1:-1,P=n.d,$=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(po+"Division by zero");for(d=n.e-a.e,A=$.length,I=P.length,y=new k(U),S=y.d=[],h=0;$[h]==(P[h]||0);)++h;if($[h]>(P[h]||0)&&--d,i==null?C=i=k.precision:o?C=i+(Ma(n)-Ma(a))+1:C=i,C<0)return new k(0);if(C=C/Gn+2|0,h=0,A==1)for(p=0,$=$[0],C++;(h<I||p)&&C--;h++)O=p*as+(P[h]||0),S[h]=O/$|0,p=O%$|0;else{for(p=as/($[0]+1)|0,p>1&&($=t($,p),P=t(P,p),A=$.length,I=P.length),L=A,N=P.slice(0,A),w=N.length;w<A;)N[w++]=0;E=$.slice(),E.unshift(0),R=$[0],$[1]>=as/2&&++R;do p=0,c=e($,N,A,w),c<0?(T=N[0],A!=w&&(T=T*as+(N[1]||0)),p=T/R|0,p>1?(p>=as&&(p=as-1),m=t($,p),x=m.length,w=N.length,c=e(m,N,x,w),c==1&&(p--,r(m,A<x?E:$,x))):(p==0&&(c=p=1),m=$.slice()),x=m.length,x<w&&m.unshift(0),r(N,m,w),c==-1&&(w=N.length,c=e($,N,A,w),c<1&&(p++,r(N,A<w?E:$,w))),w=N.length):c===0&&(p++,N=[0]),S[h++]=p,c&&N[0]?N[w++]=P[L]||0:(N=[P[L]],w=1);while((L++<I||N[0]!==void 0)&&C--)}return S[0]||S.shift(),y.e=d,Rn(y,o?i+Ma(y)+1:i)}})();function YK(t,e){var r,n,a,i,o,c,d=0,h=0,p=t.constructor,m=p.precision;if(Ma(t)>16)throw Error($7+Ma(t));if(!t.s)return new p(ki);for(Yn=!1,c=m,o=new p(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(Md(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(ki),p.precision=c;;){if(a=Rn(a.times(t),c),r=r.times(++d),o=i.plus(cc(a,r,c)),tl(o.d).slice(0,c)===tl(i.d).slice(0,c)){for(;h--;)i=Rn(i.times(i),c);return p.precision=m,e==null?(Yn=!0,Rn(i,m)):i}i=o}}function Ma(t){for(var e=t.e*Gn,r=t.d[0];r>=10;r/=10)e++;return e}function vj(t,e,r){if(e>t.LN10.sd())throw Yn=!0,r&&(t.precision=r),Error(po+"LN10 precision limit exceeded");return Rn(new t(t.LN10),e)}function du(t){for(var e="";t--;)e+="0";return e}function Rg(t,e){var r,n,a,i,o,c,d,h,p,m=1,x=10,y=t,S=y.d,N=y.constructor,w=N.precision;if(y.s<1)throw Error(po+(y.s?"NaN":"-Infinity"));if(y.eq(ki))return new N(0);if(e==null?(Yn=!1,h=w):h=e,y.eq(10))return e==null&&(Yn=!0),vj(N,h);if(h+=x,N.precision=h,r=tl(S),n=r.charAt(0),i=Ma(y),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)y=y.times(t),r=tl(y.d),n=r.charAt(0),m++;i=Ma(y),n>1?(y=new N("0."+r),i++):y=new N(n+"."+r.slice(1))}else return d=vj(N,h+2,w).times(i+""),y=Rg(new N(n+"."+r.slice(1)),h-x).plus(d),N.precision=w,e==null?(Yn=!0,Rn(y,w)):y;for(c=o=y=cc(y.minus(ki),y.plus(ki),h),p=Rn(y.times(y),h),a=3;;){if(o=Rn(o.times(p),h),d=c.plus(cc(o,new N(a),h)),tl(d.d).slice(0,h)===tl(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(vj(N,h+2,w).times(i+""))),c=cc(c,new N(m),h),N.precision=w,e==null?(Yn=!0,Rn(c,w)):c;c=d,a+=2}}function k$(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=np(r/Gn),t.d=[],n=(r+1)%Gn,r<0&&(n+=Gn),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Gn;n<a;)t.d.push(+e.slice(n,n+=Gn));e=e.slice(n),n=Gn-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Yn&&(t.e>$b||t.e<-$b))throw Error($7+r)}else t.s=0,t.e=0,t.d=[0];return t}function Rn(t,e,r){var n,a,i,o,c,d,h,p,m=t.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Gn,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/Gn),i=m.length,p>=i)return t;for(h=i=m[p],o=1;i>=10;i/=10)o++;n%=Gn,a=n-Gn+o}if(r!==void 0&&(i=Md(10,o-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/Md(10,o-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Ma(t),m.length=1,e=e-i-1,m[0]=Md(10,(Gn-e%Gn)%Gn),t.e=np(-e/Gn)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=Md(10,Gn-n),m[p]=a>0?(h/Md(10,o-a)%Md(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==as&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=as)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Yn&&(t.e>$b||t.e<-$b))throw Error($7+Ma(t));return t}function JK(t,e){var r,n,a,i,o,c,d,h,p,m,x=t.constructor,y=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),Yn?Rn(e,y):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(p=o<0,p?(r=d,o=-o,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(y/Gn),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}o=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>o;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=as-1;--d[i],d[a]+=as}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Yn?Rn(e,y):e):new x(0)}function v0(t,e,r){var n,a=Ma(t),i=tl(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+du(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+du(-a-1)+i,r&&(n=r-o)>0&&(i+=du(n))):a>=o?(i+=du(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+du(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=du(n))),t.s<0?"-"+i:i}function I$(t,e){if(t.length>e)return t.length=e,!0}function ZK(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Jd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return k$(o,i.toString())}else if(typeof i!="string")throw Error(Jd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Ave.test(i))k$(o,i);else throw Error(Jd+i)}if(a.prototype=It,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=ZK,a.config=a.set=Eve,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Eve(t){if(!t||typeof t!="object")throw Error(po+"Object expected");var e,r,n,a=["precision",1,rp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(np(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Jd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Jd+r+": "+n);return this}var z7=ZK(Tve);ki=new z7(1);const Tn=z7;function Cve(t){return Rve(t)||Ove(t)||Ive(t)||kve()}function kve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ive(t,e){if(t){if(typeof t=="string")return FT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FT(t,e)}}function Ove(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Rve(t){if(Array.isArray(t))return FT(t)}function FT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Mve=function(e){return e},eQ={},tQ=function(e){return e===eQ},O$=function(e){return function r(){return arguments.length===0||arguments.length===1&&tQ(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Dve=function t(e,r){return e===1?r:O$(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(c){return c!==eQ}).length;return o>=e?r.apply(void 0,a):t(e-o,O$(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return tQ(m)?d.shift():m});return r.apply(void 0,Cve(p).concat(d))}))})},Dw=function(e){return Dve(e.length,e)},qT=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},Pve=Dw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Lve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Mve;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},HT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},rQ=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function Bve(t){var e;return t===0?e=1:e=Math.floor(new Tn(t).abs().log(10).toNumber())+1,e}function $ve(t,e,r){for(var n=new Tn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var zve=Dw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),Uve=Dw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Vve=Dw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Pw={rangeStep:$ve,getDigitCount:Bve,interpolateNumber:zve,uninterpolateNumber:Uve,uninterpolateTruncation:Vve};function GT(t){return Hve(t)||qve(t)||nQ(t)||Fve()}function Fve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Hve(t){if(Array.isArray(t))return WT(t)}function Mg(t,e){return Kve(t)||Wve(t,e)||nQ(t,e)||Gve()}function Gve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nQ(t,e){if(t){if(typeof t=="string")return WT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WT(t,e)}}function WT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Kve(t){if(Array.isArray(t))return t}function aQ(t){var e=Mg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function sQ(t,e,r){if(t.lte(0))return new Tn(0);var n=Pw.getDigitCount(t.toNumber()),a=new Tn(10).pow(n),i=t.div(a),o=n!==1?.05:.1,c=new Tn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new Tn(Math.ceil(d))}function Qve(t,e,r){var n=1,a=new Tn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new Tn(10).pow(Pw.getDigitCount(t)-1),a=new Tn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Tn(Math.floor(t)))}else t===0?a=new Tn(Math.floor((e-1)/2)):r||(a=new Tn(Math.floor(t)));var o=Math.floor((e-1)/2),c=Lve(Pve(function(d){return a.add(new Tn(d-o).mul(n)).toNumber()}),qT);return c(0,e)}function iQ(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Tn(0),tickMin:new Tn(0),tickMax:new Tn(0)};var i=sQ(new Tn(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new Tn(0):(o=new Tn(t).add(e).div(2),o=o.sub(new Tn(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),d=Math.ceil(new Tn(e).sub(o).div(i).toNumber()),h=c+d+1;return h>r?iQ(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:o.sub(new Tn(c).mul(i)),tickMax:o.add(new Tn(d).mul(i))})}function Xve(t){var e=Mg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=aQ([r,n]),d=Mg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(GT(qT(0,a-1).map(function(){return 1/0}))):[].concat(GT(qT(0,a-1).map(function(){return-1/0})),[p]);return r>n?HT(m):m}if(h===p)return Qve(h,a,i);var x=iQ(h,p,o,i),y=x.step,S=x.tickMin,N=x.tickMax,w=Pw.rangeStep(S,N.add(new Tn(.1).mul(y)),y);return r>n?HT(w):w}function Yve(t,e){var r=Mg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=aQ([n,a]),c=Mg(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=sQ(new Tn(h).sub(d).div(p-1),i,0),x=[].concat(GT(Pw.rangeStep(new Tn(d),new Tn(h).sub(new Tn(.99).mul(m)),m)),[h]);return n>a?HT(x):x}var Jve=rQ(Xve),Zve=rQ(Yve),ebe="Invariant failed";function b0(t,e){throw new Error(ebe)}var tbe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function zb(){return zb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zb.apply(this,arguments)}function rbe(t,e){return ibe(t)||sbe(t,e)||abe(t,e)||nbe()}function nbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function abe(t,e){if(t){if(typeof t=="string")return R$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R$(t,e)}}function R$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sbe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function ibe(t){if(Array.isArray(t))return t}function obe(t,e){if(t==null)return{};var r=lbe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function cbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ube(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cQ(n.key),n)}}function dbe(t,e,r){return e&&ube(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hbe(t,e,r){return e=Ub(e),fbe(t,oQ()?Reflect.construct(e,r||[],Ub(t).constructor):e.apply(t,r))}function fbe(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pbe(t)}function pbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oQ=function(){return!!t})()}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}function mbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KT(t,e)}function KT(t,e){return KT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},KT(t,e)}function lQ(t,e,r){return e=cQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cQ(t){var e=gbe(t,"string");return Sf(e)=="symbol"?e:e+""}function gbe(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hx=(function(t){function e(){return cbe(this,e),hbe(this,e,arguments)}return mbe(e,t),dbe(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,x=obe(n,tbe),y=qt(x,!1);this.props.direction==="x"&&p.type!=="number"&&b0();var S=d.map(function(N){var w=h(N,c),T=w.x,C=w.y,O=w.value,L=w.errorVal;if(!L)return null;var I=[],R,A;if(Array.isArray(L)){var E=rbe(L,2);R=E[0],A=E[1]}else R=A=L;if(i==="vertical"){var k=p.scale,U=C+a,P=U+o,$=U-o,B=k(O-R),G=k(O+A);I.push({x1:G,y1:P,x2:G,y2:$}),I.push({x1:B,y1:U,x2:G,y2:U}),I.push({x1:B,y1:P,x2:B,y2:$})}else if(i==="horizontal"){var K=m.scale,H=T+a,ee=H-o,ae=H+o,ce=K(O-R),fe=K(O+A);I.push({x1:ee,y1:fe,x2:ae,y2:fe}),I.push({x1:H,y1:ce,x2:H,y2:fe}),I.push({x1:ee,y1:ce,x2:ae,y2:ce})}return se.createElement(Yr,zb({className:"recharts-errorBar",key:"bar-".concat(I.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},y),I.map(function(Z){return se.createElement("line",zb({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return se.createElement(Yr,{className:"recharts-errorBars"},S)}}])})(se.Component);lQ(Hx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});lQ(Hx,"displayName","ErrorBar");function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function M$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ed(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(r),!0).forEach(function(n){xbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xbe(t,e,r){return e=ybe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ybe(t){var e=vbe(t,"string");return Dg(e)=="symbol"?e:e+""}function vbe(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uQ=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=Ei(r,Gh);if(!o)return null;var c=Gh.defaultProps,d=c!==void 0?Ed(Ed({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var x=m.item,y=m.props,S=y.sectors||y.data||[];return p.concat(S.map(function(N){return{type:o.props.iconType||x.props.legendType,value:N.name,color:N.fill,payload:N}}))},[]):h=(n||[]).map(function(p){var m=p.item,x=m.type.defaultProps,y=x!==void 0?Ed(Ed({},x),m.props):{},S=y.dataKey,N=y.name,w=y.legendType,T=y.hide;return{inactive:T,dataKey:S,type:d.iconType||w||"square",color:U7(m),value:N||S,payload:y}}),Ed(Ed(Ed({},d),Gh.getWithHeight(o,a)),{},{payload:h,item:o})};function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function D$(t){return Nbe(t)||Sbe(t)||wbe(t)||bbe()}function bbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wbe(t,e){if(t){if(typeof t=="string")return QT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QT(t,e)}}function Sbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nbe(t){if(Array.isArray(t))return QT(t)}function QT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ca(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){Kh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kh(t,e,r){return e=jbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jbe(t){var e=_be(t,"string");return Pg(e)=="symbol"?e:e+""}function _be(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ss(t,e,r){return fr(t)||fr(e)?r:Ha(e)?io(t,e,r):rr(e)?e(t):r}function Um(t,e,r,n){var a=Nve(t,function(c){return Ss(c,e)});if(r==="number"){var i=a.filter(function(c){return xt(c)||parseFloat(c)});return i.length?[Mw(i),Rw(i)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!fr(c)}):a;return o.map(function(c){return Ha(c)||c instanceof Date?c:""})}var Tbe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,x=h>=c-1?a[0].coordinate:a[h+1].coordinate,y=void 0;if(Eo(m-p)!==Eo(x-m)){var S=[];if(Eo(x-m)===Eo(d[1]-d[0])){y=x;var N=m+d[1]-d[0];S[0]=Math.min(N,(N+p)/2),S[1]=Math.max(N,(N+p)/2)}else{y=p;var w=x+d[1]-d[0];S[0]=Math.min(m,(w+m)/2),S[1]=Math.max(m,(w+m)/2)}var T=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(e>T[0]&&e<=T[1]||e>=S[0]&&e<=S[1]){o=a[h].index;break}}else{var C=Math.min(p,x),O=Math.max(p,x);if(e>(C+m)/2&&e<=(O+m)/2){o=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){o=n[L].index;break}return o},U7=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?ca(ca({},e.type.defaultProps),e.props):e.props,o=i.stroke,c=i.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},Abe=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),x=0,y=m.length;x<y;x++){var S=p[m[x]],N=S.items,w=S.cateAxisId,T=N.filter(function(A){return oc(A.type).indexOf("Bar")>=0});if(T&&T.length){var C=T[0].type.defaultProps,O=C!==void 0?ca(ca({},C),T[0].props):T[0].props,L=O.barSize,I=O[w];o[I]||(o[I]=[]);var R=fr(L)?r:L;o[I].push({item:T[0],stackList:T.slice(1),barSize:fr(R)?void 0:Co(R,n,0)})}}return o},Ebe=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=Co(r,a,0,!0),p,m=[];if(o[0].barSize===+o[0].barSize){var x=!1,y=a/d,S=o.reduce(function(L,I){return L+I.barSize||0},0);S+=(d-1)*h,S>=a&&(S-=(d-1)*h,h=0),S>=a&&y>0&&(x=!0,y*=.9,S=d*y);var N=(a-S)/2>>0,w={offset:N-h,size:0};p=o.reduce(function(L,I){var R={item:I.item,position:{offset:w.offset+w.size+h,size:x?y:I.barSize}},A=[].concat(D$(L),[R]);return w=A[A.length-1].position,I.stackList&&I.stackList.length&&I.stackList.forEach(function(E){A.push({item:E,position:w})}),A},m)}else{var T=Co(n,a,0,!0);a-2*T-(d-1)*h<=0&&(h=0);var C=(a-2*T-(d-1)*h)/d;C>1&&(C>>=0);var O=c===+c?Math.min(C,c):C;p=o.reduce(function(L,I,R){var A=[].concat(D$(L),[{item:I.item,position:{offset:T+(C+h)*R+(C-O)/2,size:O}}]);return I.stackList&&I.stackList.length&&I.stackList.forEach(function(E){A.push({item:E,position:A[A.length-1].position})}),A},m)}return p},Cbe=function(e,r,n,a){var i=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=uQ({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,x=p.height,y=h.align,S=h.verticalAlign,N=h.layout;if((N==="vertical"||N==="horizontal"&&S==="middle")&&y!=="center"&&xt(e[y]))return ca(ca({},e),{},Kh({},y,e[y]+(m||0)));if((N==="horizontal"||N==="vertical"&&y==="center")&&S!=="middle"&&xt(e[S]))return ca(ca({},e),{},Kh({},S,e[S]+(x||0)))}return e},kbe=function(e,r,n){return fr(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},dQ=function(e,r,n,a,i){var o=r.props.children,c=Di(o,Hx).filter(function(h){return kbe(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=Ss(p,n);if(fr(m))return h;var x=Array.isArray(m)?[Mw(m),Rw(m)]:[m,m],y=d.reduce(function(S,N){var w=Ss(p,N,0),T=x[0]-Math.abs(Array.isArray(w)?w[0]:w),C=x[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(T,S[0]),Math.max(C,S[1])]},[1/0,-1/0]);return[Math.min(y[0],h[0]),Math.max(y[1],h[1])]},[1/0,-1/0])}return null},Ibe=function(e,r,n,a,i){var o=r.map(function(c){return dQ(e,c,n,i,a)}).filter(function(c){return!fr(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},hQ=function(e,r,n,a,i){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&dQ(e,d,h,a)||Um(e,h,n,i)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},fQ=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},pQ=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,o,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||c.push(r),o||c.push(n),c},nc=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?Eo(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var x=i?i.indexOf(m):m;return{coordinate:a(x)+h,value:m,offset:h}});return p.filter(function(m){return!Lx(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,x){return{coordinate:a(m)+h,value:m,index:x,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,x){return{coordinate:a(m)+h,value:i?i[m]:m,index:x,offset:h}})},bj=new WeakMap,Y1=function(e,r){if(typeof r!="function")return e;bj.has(e)||bj.set(e,new WeakMap);var n=bj.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},mQ=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:Eg(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:Db(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:zm(),realScaleType:"point"}:i==="category"?{scale:Eg(),realScaleType:"band"}:{scale:Db(),realScaleType:"linear"};if(x0(a)){var d="scale".concat(yw(a));return{scale:(w$[d]||zm)(),realScaleType:w$[d]?d:"point"}}return rr(a)?{scale:a}:{scale:zm(),realScaleType:"point"}},L$=1e-4,gQ=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-L$,o=Math.max(a[0],a[1])+L$,c=e(r[0]),d=e(r[n-1]);(c<i||c>o||d<i||d>o)&&e.domain([r[0],r[n-1]])}},Obe=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},Rbe=function(e,r){if(!r||r.length!==2||!xt(r[0])||!xt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!xt(e[0])||e[0]<n)&&(i[0]=n),(!xt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},Mbe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,c=0;c<r;++c){var d=Lx(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},Dbe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var c=Lx(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=i,e[o][n][1]=i+c,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},Pbe={sign:Mbe,expand:Npe,none:ff,silhouette:jpe,wiggle:_pe,positive:Dbe},Lbe=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=Pbe[n],o=Spe().keys(a).value(function(c,d){return+Ss(c,d,0)}).order(_T).offset(i);return o(e)},Bbe=function(e,r,n,a,i,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(m,x){var y,S=(y=x.type)!==null&&y!==void 0&&y.defaultProps?ca(ca({},x.type.defaultProps),x.props):x.props,N=S.stackId,w=S.hide;if(w)return m;var T=S[n],C=m[T]||{hasStack:!1,stackGroups:{}};if(Ha(N)){var O=C.stackGroups[N]||{numericAxisId:n,cateAxisId:a,items:[]};O.items.push(x),C.hasStack=!0,C.stackGroups[N]=O}else C.stackGroups[Bx("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[x]};return ca(ca({},m),{},Kh({},T,C))},d),p={};return Object.keys(h).reduce(function(m,x){var y=h[x];if(y.hasStack){var S={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(N,w){var T=y.stackGroups[w];return ca(ca({},N),{},Kh({},w,{numericAxisId:n,cateAxisId:a,items:T.items,stackedData:Lbe(e,T.items,i)}))},S)}return ca(ca({},m),{},Kh({},x,y))},p)},xQ=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=Jve(h,i,c);return e.domain([Mw(p),Rw(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),x=Zve(m,i,c);return{niceTicks:x}}return null};function B$(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!fr(a[e.dataKey])){var c=gb(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=Ss(a,fr(o)?e.dataKey:o);return fr(d)?null:e.scale(d)}var $$=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=Ss(o,r.dataKey,r.domain[c]);return fr(d)?null:r.scale(d)-i/2+a},$be=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},zbe=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ca(ca({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(Ha(i)){var o=r[i];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},Ube=function(e){return e.reduce(function(r,n){return[Mw(n.concat([r[0]]).filter(xt)),Rw(n.concat([r[1]]).filter(xt))]},[1/0,-1/0])},yQ=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],c=o.stackedData,d=c.reduce(function(h,p){var m=Ube(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},z$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XT=function(e,r,n){if(rr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(xt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(z$.test(e[0])){var i=+z$.exec(e[0])[1];a[0]=r[0]-i}else rr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(xt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(U$.test(e[1])){var o=+U$.exec(e[1])[1];a[1]=r[1]+o}else rr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Vb=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=p7(r,function(m){return m.coordinate}),o=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];o=Math.min((h.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},V$=function(e,r,n){return!e||!e.length||qx(e,io(n,"type.defaultProps.domain"))?r:e},vQ=function(e,r){var n=e.type.defaultProps?ca(ca({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return ca(ca({},qt(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:i||a,color:U7(e),value:Ss(r,a),type:d,payload:r,chartType:h,hide:p})};function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function F$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(r),!0).forEach(function(n){bQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bQ(t,e,r){return e=Vbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vbe(t){var e=Fbe(t,"string");return Lg(e)=="symbol"?e:e+""}function Fbe(t,e){if(Lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qbe(t,e){return Kbe(t)||Wbe(t,e)||Gbe(t,e)||Hbe()}function Hbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gbe(t,e){if(t){if(typeof t=="string")return q$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q$(t,e)}}function q$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wbe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Kbe(t){if(Array.isArray(t))return t}var Fb=Math.PI/180,Qbe=function(e){return e*180/Math.PI},An=function(e,r,n,a){return{x:e+Math.cos(-Fb*a)*n,y:r+Math.sin(-Fb*a)*n}},Xbe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Ybe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=Co(e.cx,o,o/2),m=Co(e.cy,c,c/2),x=Xbe(o,c,n),y=Co(e.innerRadius,x,0),S=Co(e.outerRadius,x,x*.8),N=Object.keys(r);return N.reduce(function(w,T){var C=r[T],O=C.domain,L=C.reversed,I;if(fr(C.range))a==="angleAxis"?I=[d,h]:a==="radiusAxis"&&(I=[y,S]),L&&(I=[I[1],I[0]]);else{I=C.range;var R=I,A=qbe(R,2);d=A[0],h=A[1]}var E=mQ(C,i),k=E.realScaleType,U=E.scale;U.domain(O).range(I),gQ(U);var P=xQ(U,Hl(Hl({},C),{},{realScaleType:k})),$=Hl(Hl(Hl({},C),P),{},{range:I,radius:S,realScaleType:k,scale:U,cx:p,cy:m,innerRadius:y,outerRadius:S,startAngle:d,endAngle:h});return Hl(Hl({},w),{},bQ({},T,$))},{})},Jbe=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Zbe=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,c=Jbe({x:n,y:a},{x:i,y:o});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:Qbe(h),angleInRadian:h}},e2e=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},t2e=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(i,o);return e+c*360},H$=function(e,r){var n=e.x,a=e.y,i=Zbe({x:n,y:a},r),o=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var p=e2e(r),m=p.startAngle,x=p.endAngle,y=c,S;if(m<=x){for(;y>x;)y-=360;for(;y<m;)y+=360;S=y>=m&&y<=x}else{for(;y>m;)y-=360;for(;y<x;)y+=360;S=y>=x&&y<=m}return S?Hl(Hl({},r),{},{radius:o,angle:t2e(y,r)}):null},wQ=function(e){return!_.isValidElement(e)&&!rr(e)&&typeof e!="boolean"?e.className:""};function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}var r2e=["offset"];function n2e(t){return o2e(t)||i2e(t)||s2e(t)||a2e()}function a2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s2e(t,e){if(t){if(typeof t=="string")return YT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YT(t,e)}}function i2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function o2e(t){if(Array.isArray(t))return YT(t)}function YT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l2e(t,e){if(t==null)return{};var r=c2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function c2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function G$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Va(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(r),!0).forEach(function(n){u2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u2e(t,e,r){return e=d2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d2e(t){var e=h2e(t,"string");return Bg(e)=="symbol"?e:e+""}function h2e(t,e){if(Bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $g(){return $g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$g.apply(this,arguments)}var f2e=function(e){var r=e.value,n=e.formatter,a=fr(e.children)?r:e.children;return rr(n)?n(a):a},p2e=function(e,r){var n=Eo(r-e),a=Math.min(Math.abs(r-e),360);return n*a},m2e=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,x=d.outerRadius,y=d.startAngle,S=d.endAngle,N=d.clockWise,w=(m+x)/2,T=p2e(y,S),C=T>=0?1:-1,O,L;a==="insideStart"?(O=y+C*o,L=N):a==="insideEnd"?(O=S-C*o,L=!N):a==="end"&&(O=S+C*o,L=N),L=T<=0?L:!L;var I=An(h,p,w,O),R=An(h,p,w,O+(L?1:-1)*359),A="M".concat(I.x,",").concat(I.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(L?0:1,`,
    `).concat(R.x,",").concat(R.y),E=fr(e.id)?Bx("recharts-radial-line-"):e.id;return se.createElement("text",$g({},n,{dominantBaseline:"central",className:vr("recharts-radial-bar-label",c)}),se.createElement("defs",null,se.createElement("path",{id:E,d:A})),se.createElement("textPath",{xlinkHref:"#".concat(E)},r))},g2e=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,x=(p+m)/2;if(a==="outside"){var y=An(o,c,h+n,x),S=y.x,N=y.y;return{x:S,y:N,textAnchor:S>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,T=An(o,c,w,x),C=T.x,O=T.y;return{x:C,y:O,textAnchor:"middle",verticalAnchor:"middle"}},x2e=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,c=o.x,d=o.y,h=o.width,p=o.height,m=p>=0?1:-1,x=m*a,y=m>0?"end":"start",S=m>0?"start":"end",N=h>=0?1:-1,w=N*a,T=N>0?"end":"start",C=N>0?"start":"end";if(i==="top"){var O={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:y};return Va(Va({},O),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+p+x,textAnchor:"middle",verticalAnchor:S};return Va(Va({},L),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var I={x:c-w,y:d+p/2,textAnchor:T,verticalAnchor:"middle"};return Va(Va({},I),n?{width:Math.max(I.x-n.x,0),height:p}:{})}if(i==="right"){var R={x:c+h+w,y:d+p/2,textAnchor:C,verticalAnchor:"middle"};return Va(Va({},R),n?{width:Math.max(n.x+n.width-R.x,0),height:p}:{})}var A=n?{width:h,height:p}:{};return i==="insideLeft"?Va({x:c+w,y:d+p/2,textAnchor:C,verticalAnchor:"middle"},A):i==="insideRight"?Va({x:c+h-w,y:d+p/2,textAnchor:T,verticalAnchor:"middle"},A):i==="insideTop"?Va({x:c+h/2,y:d+x,textAnchor:"middle",verticalAnchor:S},A):i==="insideBottom"?Va({x:c+h/2,y:d+p-x,textAnchor:"middle",verticalAnchor:y},A):i==="insideTopLeft"?Va({x:c+w,y:d+x,textAnchor:C,verticalAnchor:S},A):i==="insideTopRight"?Va({x:c+h-w,y:d+x,textAnchor:T,verticalAnchor:S},A):i==="insideBottomLeft"?Va({x:c+w,y:d+p-x,textAnchor:C,verticalAnchor:y},A):i==="insideBottomRight"?Va({x:c+h-w,y:d+p-x,textAnchor:T,verticalAnchor:y},A):Zf(i)&&(xt(i.x)||Ud(i.x))&&(xt(i.y)||Ud(i.y))?Va({x:c+Co(i.x,h),y:d+Co(i.y,p),textAnchor:"end",verticalAnchor:"end"},A):Va({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},A)},y2e=function(e){return"cx"in e&&xt(e.cx)};function vs(t){var e=t.offset,r=e===void 0?5:e,n=l2e(t,r2e),a=Va({offset:r},n),i=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,x=a.textBreakAll;if(!i||fr(c)&&fr(d)&&!_.isValidElement(h)&&!rr(h))return null;if(_.isValidElement(h))return _.cloneElement(h,a);var y;if(rr(h)){if(y=_.createElement(h,a),_.isValidElement(y))return y}else y=f2e(a);var S=y2e(i),N=qt(a,!0);if(S&&(o==="insideStart"||o==="insideEnd"||o==="end"))return m2e(a,y,N);var w=S?g2e(a):x2e(a);return se.createElement(yf,$g({className:vr("recharts-label",m)},N,w,{breakAll:x}),y)}vs.displayName="Label";var SQ=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,x=e.y,y=e.top,S=e.left,N=e.width,w=e.height,T=e.clockWise,C=e.labelViewBox;if(C)return C;if(xt(N)&&xt(w)){if(xt(m)&&xt(x))return{x:m,y:x,width:N,height:w};if(xt(y)&&xt(S))return{x:y,y:S,width:N,height:w}}return xt(m)&&xt(x)?{x:m,y:x,width:0,height:0}:xt(r)&&xt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:T}:e.viewBox?e.viewBox:{}},v2e=function(e,r){return e?e===!0?se.createElement(vs,{key:"label-implicit",viewBox:r}):Ha(e)?se.createElement(vs,{key:"label-implicit",viewBox:r,value:e}):_.isValidElement(e)?e.type===vs?_.cloneElement(e,{key:"label-implicit",viewBox:r}):se.createElement(vs,{key:"label-implicit",content:e,viewBox:r}):rr(e)?se.createElement(vs,{key:"label-implicit",content:e,viewBox:r}):Zf(e)?se.createElement(vs,$g({viewBox:r},e,{key:"label-implicit"})):null:null},b2e=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=SQ(e),o=Di(a,vs).map(function(d,h){return _.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return o;var c=v2e(e.label,r||i);return[c].concat(n2e(o))};vs.parseViewBox=SQ;vs.renderCallByParent=b2e;var wj,W$;function w2e(){if(W$)return wj;W$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return wj=t,wj}var S2e=w2e();const NQ=nn(S2e);function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}var N2e=["valueAccessor"],j2e=["data","dataKey","clockWise","id","textBreakAll"];function _2e(t){return C2e(t)||E2e(t)||A2e(t)||T2e()}function T2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A2e(t,e){if(t){if(typeof t=="string")return JT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JT(t,e)}}function E2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function C2e(t){if(Array.isArray(t))return JT(t)}function JT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qb(){return qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qb.apply(this,arguments)}function K$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Q$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(r),!0).forEach(function(n){k2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k2e(t,e,r){return e=I2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I2e(t){var e=O2e(t,"string");return zg(e)=="symbol"?e:e+""}function O2e(t,e){if(zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X$(t,e){if(t==null)return{};var r=R2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function R2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var M2e=function(e){return Array.isArray(e.value)?NQ(e.value):e.value};function uc(t){var e=t.valueAccessor,r=e===void 0?M2e:e,n=X$(t,N2e),a=n.data,i=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=X$(n,j2e);return!a||!a.length?null:se.createElement(Yr,{className:"recharts-label-list"},a.map(function(p,m){var x=fr(i)?r(p,m):Ss(p&&p.payload,i),y=fr(c)?{}:{id:"".concat(c,"-").concat(m)};return se.createElement(vs,qb({},qt(p,!0),h,y,{parentViewBox:p.parentViewBox,value:x,textBreakAll:d,viewBox:vs.parseViewBox(fr(o)?p:Q$(Q$({},p),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}uc.displayName="LabelList";function D2e(t,e){return t?t===!0?se.createElement(uc,{key:"labelList-implicit",data:e}):se.isValidElement(t)||rr(t)?se.createElement(uc,{key:"labelList-implicit",data:e,content:t}):Zf(t)?se.createElement(uc,qb({data:e},t,{key:"labelList-implicit"})):null:null}function P2e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Di(n,uc).map(function(o,c){return _.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=D2e(t.label,e);return[i].concat(_2e(a))}uc.renderCallByParent=P2e;function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function ZT(){return ZT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZT.apply(this,arguments)}function Y$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function J$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y$(Object(r),!0).forEach(function(n){L2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L2e(t,e,r){return e=B2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B2e(t){var e=$2e(t,"string");return Ug(e)=="symbol"?e:e+""}function $2e(t,e){if(Ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z2e=function(e,r){var n=Eo(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},J1=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/Fb,x=h?i:i+o*m,y=An(r,n,p,x),S=An(r,n,a,x),N=h?i-o*m:i,w=An(r,n,p*Math.cos(m*Fb),N);return{center:y,circleTangency:S,lineTangency:w,theta:m}},jQ=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,c=e.endAngle,d=z2e(o,c),h=o+d,p=An(r,n,i,o),m=An(r,n,i,h),x="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var y=An(r,n,a,o),S=An(r,n,a,h);x+="L ".concat(S.x,",").concat(S.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(y.x,",").concat(y.y," Z")}else x+="L ".concat(r,",").concat(n," Z");return x},U2e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=Eo(p-h),x=J1({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:o,cornerIsExternal:d}),y=x.circleTangency,S=x.lineTangency,N=x.theta,w=J1({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:o,cornerIsExternal:d}),T=w.circleTangency,C=w.lineTangency,O=w.theta,L=d?Math.abs(h-p):Math.abs(h-p)-N-O;if(L<0)return c?"M ".concat(S.x,",").concat(S.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):jQ({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var I="M ".concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(m<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,`
  `);if(a>0){var R=J1({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),A=R.circleTangency,E=R.lineTangency,k=R.theta,U=J1({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),P=U.circleTangency,$=U.lineTangency,B=U.theta,G=d?Math.abs(h-p):Math.abs(h-p)-k-B;if(G<0&&o===0)return"".concat(I,"L").concat(r,",").concat(n,"Z");I+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(G>180),",").concat(+(m>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(E.x,",").concat(E.y,"Z")}else I+="L".concat(r,",").concat(n,"Z");return I},V2e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_Q=function(e){var r=J$(J$({},V2e),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,x=r.className;if(o<i||p===m)return null;var y=vr("recharts-sector",x),S=o-i,N=Co(c,S,0,!0),w;return N>0&&Math.abs(p-m)<360?w=U2e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,S/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=jQ({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:p,endAngle:m}),se.createElement("path",ZT({},qt(r,!0),{className:y,d:w,role:"img"}))};function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function eA(){return eA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eA.apply(this,arguments)}function Z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ez(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(r),!0).forEach(function(n){F2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F2e(t,e,r){return e=q2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q2e(t){var e=H2e(t,"string");return Vg(e)=="symbol"?e:e+""}function H2e(t,e){if(Vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tz={curveBasisClosed:dpe,curveBasisOpen:hpe,curveBasis:upe,curveBumpX:Xfe,curveBumpY:Yfe,curveLinearClosed:fpe,curveLinear:bw,curveMonotoneX:ppe,curveMonotoneY:mpe,curveNatural:gpe,curveStep:xpe,curveStepAfter:vpe,curveStepBefore:ype},Z1=function(e){return e.x===+e.x&&e.y===+e.y},fm=function(e){return e.x},pm=function(e){return e.y},G2e=function(e,r){if(rr(e))return e;var n="curve".concat(yw(e));return(n==="curveMonotone"||n==="curveBump")&&r?tz["".concat(n).concat(r==="vertical"?"Y":"X")]:tz[n]||bw},W2e=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=G2e(n,c),m=h?i.filter(function(N){return Z1(N)}):i,x;if(Array.isArray(o)){var y=h?o.filter(function(N){return Z1(N)}):o,S=m.map(function(N,w){return ez(ez({},N),{},{base:y[w]})});return c==="vertical"?x=q1().y(pm).x1(fm).x0(function(N){return N.base.x}):x=q1().x(fm).y1(pm).y0(function(N){return N.base.y}),x.defined(Z1).curve(p),x(S)}return c==="vertical"&&xt(o)?x=q1().y(pm).x1(fm).x0(o):xt(o)?x=q1().x(fm).y1(pm).y0(o):x=NW().x(fm).y(pm),x.defined(Z1).curve(p),x(m)},tA=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?W2e(e):a;return _.createElement("path",eA({},qt(e,!1),xb(e),{className:vr("recharts-curve",r),d:o,ref:i}))},Sj={exports:{}},Nj,rz;function K2e(){if(rz)return Nj;rz=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Nj=t,Nj}var jj,nz;function Q2e(){if(nz)return jj;nz=1;var t=K2e();function e(){}function r(){}return r.resetWarningCache=e,jj=function(){function n(o,c,d,h,p,m){if(m!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},jj}var az;function X2e(){return az||(az=1,Sj.exports=Q2e()()),Sj.exports}var Y2e=X2e();const un=nn(Y2e),{getOwnPropertyNames:J2e,getOwnPropertySymbols:Z2e}=Object,{hasOwnProperty:ewe}=Object.prototype;function _j(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function ev(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,o=i.get(r),c=i.get(n);if(o&&c)return o===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function twe(t){return t!=null?t[Symbol.toStringTag]:void 0}function sz(t){return J2e(t).concat(Z2e(t))}const rwe=Object.hasOwn||((t,e)=>ewe.call(t,e));function P0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const nwe="__v",awe="__o",swe="_owner",{getOwnPropertyDescriptor:iz,keys:oz}=Object;function iwe(t,e){return t.byteLength===e.byteLength&&Hb(new Uint8Array(t),new Uint8Array(e))}function owe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function lwe(t,e){return t.byteLength===e.byteLength&&Hb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function cwe(t,e){return P0(t.getTime(),e.getTime())}function uwe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function dwe(t,e){return t===e}function lz(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let o,c,d=0;for(;(o=i.next())&&!o.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const x=o.value,y=c.value;if(r.equals(x[0],y[0],d,m,t,e,r)&&r.equals(x[1],y[1],x[0],y[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const hwe=P0;function fwe(t,e,r){const n=oz(t);let a=n.length;if(oz(e).length!==a)return!1;for(;a-- >0;)if(!TQ(t,e,r,n[a]))return!1;return!0}function mm(t,e,r){const n=sz(t);let a=n.length;if(sz(e).length!==a)return!1;let i,o,c;for(;a-- >0;)if(i=n[a],!TQ(t,e,r,i)||(o=iz(t,i),c=iz(e,i),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function pwe(t,e){return P0(t.valueOf(),e.valueOf())}function mwe(t,e){return t.source===e.source&&t.flags===e.flags}function cz(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let o,c;for(;(o=i.next())&&!o.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function Hb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function gwe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function TQ(t,e,r,n){return(n===swe||n===awe||n===nwe)&&(t.$$typeof||e.$$typeof)?!0:rwe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const xwe="[object ArrayBuffer]",ywe="[object Arguments]",vwe="[object Boolean]",bwe="[object DataView]",wwe="[object Date]",Swe="[object Error]",Nwe="[object Map]",jwe="[object Number]",_we="[object Object]",Twe="[object RegExp]",Awe="[object Set]",Ewe="[object String]",Cwe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},kwe="[object URL]",Iwe=Object.prototype.toString;function Owe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:x,areUrlsEqual:y,unknownTagComparators:S}){return function(w,T,C){if(w===T)return!0;if(w==null||T==null)return!1;const O=typeof w;if(O!==typeof T)return!1;if(O!=="object")return O==="number"?c(w,T,C):O==="function"?i(w,T,C):!1;const L=w.constructor;if(L!==T.constructor)return!1;if(L===Object)return d(w,T,C);if(Array.isArray(w))return e(w,T,C);if(L===Date)return n(w,T,C);if(L===RegExp)return p(w,T,C);if(L===Map)return o(w,T,C);if(L===Set)return m(w,T,C);const I=Iwe.call(w);if(I===wwe)return n(w,T,C);if(I===Twe)return p(w,T,C);if(I===Nwe)return o(w,T,C);if(I===Awe)return m(w,T,C);if(I===_we)return typeof w.then!="function"&&typeof T.then!="function"&&d(w,T,C);if(I===kwe)return y(w,T,C);if(I===Swe)return a(w,T,C);if(I===ywe)return d(w,T,C);if(Cwe[I])return x(w,T,C);if(I===xwe)return t(w,T,C);if(I===bwe)return r(w,T,C);if(I===vwe||I===jwe||I===Ewe)return h(w,T,C);if(S){let R=S[I];if(!R){const A=twe(w);A&&(R=S[A])}if(R)return R(w,T,C)}return!1}}function Rwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:iwe,areArraysEqual:r?mm:owe,areDataViewsEqual:lwe,areDatesEqual:cwe,areErrorsEqual:uwe,areFunctionsEqual:dwe,areMapsEqual:r?_j(lz,mm):lz,areNumbersEqual:hwe,areObjectsEqual:r?mm:fwe,arePrimitiveWrappersEqual:pwe,areRegExpsEqual:mwe,areSetsEqual:r?_j(cz,mm):cz,areTypedArraysEqual:r?_j(Hb,mm):Hb,areUrlsEqual:gwe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=ev(n.areArraysEqual),i=ev(n.areMapsEqual),o=ev(n.areObjectsEqual),c=ev(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:c})}return n}function Mwe(t){return function(e,r,n,a,i,o,c){return t(e,r,c)}}function Dwe({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const Pwe=ed();ed({strict:!0});ed({circular:!0});ed({circular:!0,strict:!0});ed({createInternalComparator:()=>P0});ed({strict:!0,createInternalComparator:()=>P0});ed({circular:!0,createInternalComparator:()=>P0});ed({circular:!0,createInternalComparator:()=>P0,strict:!0});function ed(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=Rwe(t),o=Owe(i),c=r?r(o):Mwe(o);return Dwe({circular:e,comparator:o,createState:n,equals:c,strict:a})}function Lwe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function uz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):Lwe(a)};requestAnimationFrame(n)}function rA(t){"@babel/helpers - typeof";return rA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rA(t)}function Bwe(t){return Vwe(t)||Uwe(t)||zwe(t)||$we()}function $we(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zwe(t,e){if(t){if(typeof t=="string")return dz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dz(t,e)}}function dz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Uwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vwe(t){if(Array.isArray(t))return t}function Fwe(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,c=Bwe(o),d=c[0],h=c.slice(1);if(typeof d=="number"){uz(a.bind(null,h),d);return}a(d),uz(a.bind(null,h));return}rA(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function hz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hz(Object(r),!0).forEach(function(n){AQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AQ(t,e,r){return e=qwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qwe(t){var e=Hwe(t,"string");return Fg(e)==="symbol"?e:String(e)}function Hwe(t,e){if(Fg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gwe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Wwe=function(e){return e},Kwe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Vm=function(e,r){return Object.keys(r).reduce(function(n,a){return fz(fz({},n),{},AQ({},a,e(a,r[a])))},{})},pz=function(e,r,n){return e.map(function(a){return"".concat(Kwe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Qwe(t,e){return Jwe(t)||Ywe(t,e)||EQ(t,e)||Xwe()}function Xwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ywe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Jwe(t){if(Array.isArray(t))return t}function Zwe(t){return r4e(t)||t4e(t)||EQ(t)||e4e()}function e4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(t,e){if(t){if(typeof t=="string")return nA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nA(t,e)}}function t4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r4e(t){if(Array.isArray(t))return nA(t)}function nA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Gb=1e-4,CQ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},kQ=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},mz=function(e,r){return function(n){var a=CQ(e,r);return kQ(a,n)}},n4e=function(e,r){return function(n){var a=CQ(e,r),i=[].concat(Zwe(a.map(function(o,c){return o*c}).slice(1)),[0]);return kQ(i,n)}},gz=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,c=1;break;case"ease":a=.25,i=.1,o=.25,c=1;break;case"ease-in":a=.42,i=0,o=1,c=1;break;case"ease-out":a=.42,i=0,o=.58,c=1;break;case"ease-in-out":a=0,i=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=Qwe(h,4);a=p[0],i=p[1],o=p[2],c=p[3]}}}var m=mz(a,o),x=mz(i,c),y=n4e(a,o),S=function(T){return T>1?1:T<0?0:T},N=function(T){for(var C=T>1?1:T,O=C,L=0;L<8;++L){var I=m(O)-C,R=y(O);if(Math.abs(I-C)<Gb||R<Gb)return x(O);O=S(O-I/R)}return x(O)};return N.isStepper=!1,N},a4e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(p,m,x){var y=-(p-m)*n,S=x*i,N=x+(y-S)*c/1e3,w=x*c/1e3+p;return Math.abs(w-m)<Gb&&Math.abs(N)<Gb?[m,0]:[w,N]};return d.isStepper=!0,d.dt=c,d},s4e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gz(a);case"spring":return a4e();default:if(a.split("(")[0]==="cubic-bezier")return gz(a)}return typeof a=="function"?a:null};function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function xz(t){return l4e(t)||o4e(t)||IQ(t)||i4e()}function i4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function l4e(t){if(Array.isArray(t))return sA(t)}function yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yz(Object(r),!0).forEach(function(n){aA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aA(t,e,r){return e=c4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c4e(t){var e=u4e(t,"string");return qg(e)==="symbol"?e:String(e)}function u4e(t,e){if(qg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d4e(t,e){return p4e(t)||f4e(t,e)||IQ(t,e)||h4e()}function h4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IQ(t,e){if(t){if(typeof t=="string")return sA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sA(t,e)}}function sA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function p4e(t){if(Array.isArray(t))return t}var Wb=function(e,r,n){return e+(r-e)*n},iA=function(e){var r=e.from,n=e.to;return r!==n},m4e=function t(e,r,n){var a=Vm(function(i,o){if(iA(o)){var c=e(o.from,o.to,o.velocity),d=d4e(c,2),h=d[0],p=d[1];return xs(xs({},o),{},{from:h,velocity:p})}return o},r);return n<1?Vm(function(i,o){return iA(o)?xs(xs({},o),{},{velocity:Wb(o.velocity,a[i].velocity,n),from:Wb(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const g4e=(function(t,e,r,n,a){var i=Gwe(t,e),o=i.reduce(function(w,T){return xs(xs({},w),{},aA({},T,[t[T],e[T]]))},{}),c=i.reduce(function(w,T){return xs(xs({},w),{},aA({},T,{from:t[T],velocity:0,to:e[T]}))},{}),d=-1,h,p,m=function(){return null},x=function(){return Vm(function(T,C){return C.from},c)},y=function(){return!Object.values(c).filter(iA).length},S=function(T){h||(h=T);var C=T-h,O=C/r.dt;c=m4e(r,c,O),a(xs(xs(xs({},t),e),x())),h=T,y()||(d=requestAnimationFrame(m))},N=function(T){p||(p=T);var C=(T-p)/n,O=Vm(function(I,R){return Wb.apply(void 0,xz(R).concat([r(C)]))},o);if(a(xs(xs(xs({},t),e),O)),C<1)d=requestAnimationFrame(m);else{var L=Vm(function(I,R){return Wb.apply(void 0,xz(R).concat([r(1)]))},o);a(xs(xs(xs({},t),e),L))}};return m=r.isStepper?S:N,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}var x4e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function y4e(t,e){if(t==null)return{};var r=v4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function v4e(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Tj(t){return N4e(t)||S4e(t)||w4e(t)||b4e()}function b4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w4e(t,e){if(t){if(typeof t=="string")return oA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oA(t,e)}}function S4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function N4e(t){if(Array.isArray(t))return oA(t)}function oA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function No(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vz(Object(r),!0).forEach(function(n){Am(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Am(t,e,r){return e=OQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OQ(n.key),n)}}function T4e(t,e,r){return e&&_4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OQ(t){var e=A4e(t,"string");return Nf(e)==="symbol"?e:String(e)}function A4e(t,e){if(Nf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function E4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lA(t,e)}function lA(t,e){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lA(t,e)}function C4e(t){var e=k4e();return function(){var n=Kb(t),a;if(e){var i=Kb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return cA(this,a)}}function cA(t,e){if(e&&(Nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uA(t)}function uA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kb(t){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(t)}var hl=(function(t){E4e(r,t);var e=C4e(r);function r(n,a){var i;j4e(this,r),i=e.call(this,n,a);var o=i.props,c=o.isActive,d=o.attributeName,h=o.from,p=o.to,m=o.steps,x=o.children,y=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(uA(i)),i.changeStyle=i.changeStyle.bind(uA(i)),!c||y<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:p}),cA(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof x=="function")return i.state={style:h},cA(i);i.state={style:d?Am({},d,h):h}}else i.state={style:{}};return i}return T4e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,x=this.state.style;if(c){if(!o){var y={style:d?Am({},d,p):p};this.state&&x&&(d&&x[d]!==p||!d&&x!==p)&&this.setState(y);return}if(!(Pwe(a.to,p)&&a.canBegin&&a.isActive)){var S=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var N=S||h?m:a.to;if(this.state&&x){var w={style:d?Am({},d,N):N};(d&&x[d]!==N||!d&&x!==N)&&this.setState(w)}this.runAnimation(No(No({},this.props),{},{from:N,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,x=a.onAnimationStart,y=g4e(o,c,s4e(h),d,this.changeStyle),S=function(){i.stopJSAnimation=y()};this.manager.start([x,p,S,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],p=h.style,m=h.duration,x=m===void 0?0:m,y=function(N,w,T){if(T===0)return N;var C=w.duration,O=w.easing,L=O===void 0?"ease":O,I=w.style,R=w.properties,A=w.onAnimationEnd,E=T>0?o[T-1]:w,k=R||Object.keys(I);if(typeof L=="function"||L==="spring")return[].concat(Tj(N),[i.runJSAnimation.bind(i,{from:E.style,to:I,duration:C,easing:L}),C]);var U=pz(k,C,L),P=No(No(No({},E.style),I),{},{transition:U});return[].concat(Tj(N),[P,C,A]).filter(Wwe)};return this.manager.start([d].concat(Tj(o.reduce(y,[p,Math.max(x,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Fwe());var i=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,x=a.steps,y=a.children,S=this.manager;if(this.unSubscribe=S.subscribe(this.handleStyleChange),typeof h=="function"||typeof y=="function"||h==="spring"){this.runJSAnimation(a);return}if(x.length>1){this.runStepAnimation(a);return}var N=c?Am({},c,d):d,w=pz(Object.keys(N),o,h);S.start([p,i,No(No({},N),{},{transition:w}),o,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=y4e(a,x4e),h=_.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||o<=0)return i;var m=function(y){var S=y.props,N=S.style,w=N===void 0?{}:N,T=S.className,C=_.cloneElement(y,No(No({},d),{},{style:No(No({},w),p),className:T}));return C};return h===1?m(_.Children.only(i)):se.createElement("div",null,_.Children.map(i,function(x){return m(x)}))}}]),r})(_.PureComponent);hl.displayName="Animate";hl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};hl.propTypes={from:un.oneOfType([un.object,un.string]),to:un.oneOfType([un.object,un.string]),attributeName:un.string,duration:un.number,begin:un.number,easing:un.oneOfType([un.string,un.func]),steps:un.arrayOf(un.shape({duration:un.number.isRequired,style:un.object.isRequired,easing:un.oneOfType([un.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),un.func]),properties:un.arrayOf("string"),onAnimationEnd:un.func})),children:un.oneOfType([un.node,un.func]),isActive:un.bool,canBegin:un.bool,onAnimationEnd:un.func,shouldReAnimate:un.bool,onAnimationStart:un.func,onAnimationReStart:un.func};function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qb.apply(this,arguments)}function I4e(t,e){return D4e(t)||M4e(t,e)||R4e(t,e)||O4e()}function O4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R4e(t,e){if(t){if(typeof t=="string")return bz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bz(t,e)}}function bz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function D4e(t){if(Array.isArray(t))return t}function wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Sz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wz(Object(r),!0).forEach(function(n){P4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function P4e(t,e,r){return e=L4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L4e(t){var e=B4e(t,"string");return Hg(e)=="symbol"?e:e+""}function B4e(t,e){if(Hg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nz=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],x=0,y=4;x<y;x++)m[x]=i[x]>o?o:i[x];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);p="M ".concat(e,",").concat(r+c*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+d*S,",").concat(r,`
            L `).concat(e+n-d*S,",").concat(r,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*S,`
            L `).concat(e+n,",").concat(r+a-c*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+n-d*S,",").concat(r+a,`
            L `).concat(e+d*S,",").concat(r+a,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*S," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},$4e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(o,o+d),x=Math.max(o,o+d);return n>=h&&n<=p&&a>=m&&a<=x}return!1},z4e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},V7=function(e){var r=Sz(Sz({},z4e),e),n=_.useRef(),a=_.useState(-1),i=I4e(a,2),o=i[0],c=i[1];_.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,x=r.radius,y=r.className,S=r.animationEasing,N=r.animationDuration,w=r.animationBegin,T=r.isAnimationActive,C=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var O=vr("recharts-rectangle",y);return C?se.createElement(hl,{canBegin:o>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:N,animationEasing:S,isActive:C},function(L){var I=L.width,R=L.height,A=L.x,E=L.y;return se.createElement(hl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:N,isActive:T,easing:S},se.createElement("path",Qb({},qt(r,!0),{className:O,d:Nz(A,E,I,R,x),ref:n})))}):se.createElement("path",Qb({},qt(r,!0),{className:O,d:Nz(d,h,p,m,x)}))},U4e=["points","className","baseLinePoints","connectNulls"];function Rh(){return Rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rh.apply(this,arguments)}function V4e(t,e){if(t==null)return{};var r=F4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function F4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function jz(t){return W4e(t)||G4e(t)||H4e(t)||q4e()}function q4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H4e(t,e){if(t){if(typeof t=="string")return dA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dA(t,e)}}function G4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function W4e(t){if(Array.isArray(t))return dA(t)}function dA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _z=function(e){return e&&e.x===+e.x&&e.y===+e.y},K4e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){_z(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),_z(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Fm=function(e,r){var n=K4e(e);r&&(n=[n.reduce(function(i,o){return[].concat(jz(i),jz(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Q4e=function(e,r,n){var a=Fm(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Fm(r.reverse(),n).slice(1))},RQ=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=V4e(e,U4e);if(!r||!r.length)return null;var c=vr("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=Q4e(r,a,i);return se.createElement("g",{className:c},se.createElement("path",Rh({},qt(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?se.createElement("path",Rh({},qt(o,!0),{fill:"none",d:Fm(r,i)})):null,d?se.createElement("path",Rh({},qt(o,!0),{fill:"none",d:Fm(a,i)})):null)}var p=Fm(r,i);return se.createElement("path",Rh({},qt(o,!0),{fill:p.slice(-1)==="Z"?o.fill:"none",className:c,d:p}))};function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hA.apply(this,arguments)}var Lw=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=vr("recharts-dot",i);return r===+r&&n===+n&&a===+a?_.createElement("circle",hA({},qt(e,!1),xb(e),{className:o,cx:r,cy:n,r:a})):null};function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}var X4e=["x","y","top","left","width","height","className"];function fA(){return fA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fA.apply(this,arguments)}function Tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Y4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tz(Object(r),!0).forEach(function(n){J4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J4e(t,e,r){return e=Z4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z4e(t){var e=e5e(t,"string");return Gg(e)=="symbol"?e:e+""}function e5e(t,e){if(Gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t5e(t,e){if(t==null)return{};var r=r5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var n5e=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},a5e=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,x=e.height,y=x===void 0?0:x,S=e.className,N=t5e(e,X4e),w=Y4e({x:n,y:i,top:c,left:h,width:m,height:y},N);return!xt(n)||!xt(i)||!xt(m)||!xt(y)||!xt(c)||!xt(h)?null:se.createElement("path",fA({},qt(w,!0),{className:vr("recharts-cross",S),d:n5e(n,i,m,y,c,h)}))},s5e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function i5e(t,e){if(t==null)return{};var r=o5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function o5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wc(){return wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wc.apply(this,arguments)}function Az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(r),!0).forEach(function(n){l5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l5e(t,e,r){return e=c5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c5e(t){var e=u5e(t,"string");return Wg(e)=="symbol"?e:e+""}function u5e(t,e){if(Wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d5e=function(e,r,n,a){var i="";return a.forEach(function(o,c){var d=An(r,n,e,o);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},h5e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.polarAngles,c=e.radialLines;if(!o||!o.length||!c)return null;var d=Kg({stroke:"#ccc"},qt(e,!1));return se.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(h){var p=An(r,n,a,h),m=An(r,n,i,h);return se.createElement("line",wc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},f5e=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,o=Kg(Kg({stroke:"#ccc"},qt(e,!1)),{},{fill:"none"});return se.createElement("circle",wc({},o,{className:vr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},p5e=function(e){var r=e.radius,n=e.index,a=Kg(Kg({stroke:"#ccc"},qt(e,!1)),{},{fill:"none"});return se.createElement("path",wc({},a,{className:vr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:d5e(r,e.cx,e.cy,e.polarAngles)}))},m5e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:se.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?se.createElement(f5e,wc({key:o},e,{radius:a,index:i})):se.createElement(p5e,wc({key:o},e,{radius:a,index:i}))}))},MQ=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,o=e.innerRadius,c=o===void 0?0:o,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,x=e.radialLines,y=x===void 0?!0:x,S=i5e(e,s5e);return h<=0?null:se.createElement("g",{className:"recharts-polar-grid"},se.createElement(h5e,wc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:y},S)),se.createElement(m5e,wc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:y},S)))};MQ.displayName="PolarGrid";var Aj,Ez;function g5e(){if(Ez)return Aj;Ez=1;var t=Ow(),e=WK(),r=vl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return Aj=n,Aj}var x5e=g5e();const y5e=nn(x5e);var Ej,Cz;function v5e(){if(Cz)return Ej;Cz=1;var t=Ow(),e=vl(),r=KK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return Ej=n,Ej}var b5e=v5e();const w5e=nn(b5e);var S5e=["cx","cy","angle","ticks","axisLine"],N5e=["ticks","tick","angle","tickFormatter","stroke"];function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function qm(){return qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qm.apply(this,arguments)}function kz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kz(Object(r),!0).forEach(function(n){Bw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Iz(t,e){if(t==null)return{};var r=j5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function j5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PQ(n.key),n)}}function T5e(t,e,r){return e&&Oz(t.prototype,e),r&&Oz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function A5e(t,e,r){return e=Xb(e),E5e(t,DQ()?Reflect.construct(e,r||[],Xb(t).constructor):e.apply(t,r))}function E5e(t,e){if(e&&(jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C5e(t)}function C5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DQ=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xb(t)}function k5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pA(t,e)}function pA(t,e){return pA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pA(t,e)}function Bw(t,e,r){return e=PQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PQ(t){var e=I5e(t,"string");return jf(e)=="symbol"?e:e+""}function I5e(t,e){if(jf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gx=(function(t){function e(){return _5e(this,e),A5e(this,e,arguments)}return k5e(e,t),T5e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,c=i.cx,d=i.cy;return An(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=y5e(c,function(p){return p.coordinate||0}),h=w5e(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=Iz(n,S5e),p=c.reduce(function(S,N){return[Math.min(S[0],N.coordinate),Math.max(S[1],N.coordinate)]},[1/0,-1/0]),m=An(a,i,p[0],o),x=An(a,i,p[1],o),y=Cd(Cd(Cd({},qt(h,!1)),{},{fill:"none"},qt(d,!1)),{},{x1:m.x,y1:m.y,x2:x.x,y2:x.y});return se.createElement("line",qm({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=Iz(a,N5e),m=this.getTickTextAnchor(),x=qt(p,!1),y=qt(o,!1),S=i.map(function(N,w){var T=n.getTickValueCoord(N),C=Cd(Cd(Cd(Cd({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(T.x,", ").concat(T.y,")")},x),{},{stroke:"none",fill:h},y),{},{index:w},T),{},{payload:N});return se.createElement(Yr,qm({className:vr("recharts-polar-radius-axis-tick",wQ(o)),key:"tick-".concat(N.coordinate)},y0(n.props,N,w)),e.renderTickItem(o,C,d?d(N.value,w):N.value))});return se.createElement(Yr,{className:"recharts-polar-radius-axis-ticks"},S)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:se.createElement(Yr,{className:vr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),vs.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):rr(n)?o=n(a):o=se.createElement(yf,qm({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(_.PureComponent);Bw(Gx,"displayName","PolarRadiusAxis");Bw(Gx,"axisType","radiusAxis");Bw(Gx,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function $d(){return $d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$d.apply(this,arguments)}function Rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(r),!0).forEach(function(n){$w(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BQ(n.key),n)}}function R5e(t,e,r){return e&&Mz(t.prototype,e),r&&Mz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function M5e(t,e,r){return e=Yb(e),D5e(t,LQ()?Reflect.construct(e,r||[],Yb(t).constructor):e.apply(t,r))}function D5e(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P5e(t)}function P5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LQ=function(){return!!t})()}function Yb(t){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yb(t)}function L5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mA(t,e)}function mA(t,e){return mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mA(t,e)}function $w(t,e,r){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BQ(t){var e=B5e(t,"string");return _f(e)=="symbol"?e:e+""}function B5e(t,e){if(_f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $5e=Math.PI/180,Dz=1e-5,Wx=(function(t){function e(){return O5e(this,e),M5e(this,e,arguments)}return L5e(e,t),R5e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=An(i,o,c,n.coordinate),x=An(i,o,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*$5e),o;return i>Dz?o=a==="outer"?"start":"end":i<-Dz?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=kd(kd({},qt(this.props,!1)),{},{fill:"none"},qt(c,!1));if(d==="circle")return se.createElement(Lw,$d({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:o}));var p=this.props.ticks,m=p.map(function(x){return An(a,i,o,x.coordinate)});return se.createElement(RQ,$d({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=qt(this.props,!1),m=qt(o,!1),x=kd(kd({},p),{},{fill:"none"},qt(c,!1)),y=i.map(function(S,N){var w=n.getTickLineCoord(S),T=n.getTickTextAnchor(S),C=kd(kd(kd({textAnchor:T},p),{},{stroke:"none",fill:h},m),{},{index:N,payload:S,x:w.x2,y:w.y2});return se.createElement(Yr,$d({className:vr("recharts-polar-angle-axis-tick",wQ(o)),key:"tick-".concat(S.coordinate)},y0(n.props,S,N)),c&&se.createElement("line",$d({className:"recharts-polar-angle-axis-tick-line"},x,w)),o&&e.renderTickItem(o,C,d?d(S.value,N):S.value))});return se.createElement(Yr,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(Yr,{className:vr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):rr(n)?o=n(a):o=se.createElement(yf,$d({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(_.PureComponent);$w(Wx,"displayName","PolarAngleAxis");$w(Wx,"axisType","angleAxis");$w(Wx,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Cj,Pz;function z5e(){if(Pz)return Cj;Pz=1;var t=GW(),e=t(Object.getPrototypeOf,Object);return Cj=e,Cj}var kj,Lz;function U5e(){if(Lz)return kj;Lz=1;var t=Tc(),e=z5e(),r=Ac(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,c=i.hasOwnProperty,d=o.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var x=c.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&o.call(x)==d}return kj=h,kj}var V5e=U5e();const F5e=nn(V5e);var Ij,Bz;function q5e(){if(Bz)return Ij;Bz=1;var t=Tc(),e=Ac(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return Ij=n,Ij}var H5e=q5e();const G5e=nn(H5e);function Qg(t){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(t)}function Jb(){return Jb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jb.apply(this,arguments)}function W5e(t,e){return Y5e(t)||X5e(t,e)||Q5e(t,e)||K5e()}function K5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q5e(t,e){if(t){if(typeof t=="string")return $z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $z(t,e)}}function $z(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Y5e(t){if(Array.isArray(t))return t}function zz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Uz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zz(Object(r),!0).forEach(function(n){J5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J5e(t,e,r){return e=Z5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z5e(t){var e=e3e(t,"string");return Qg(e)=="symbol"?e:e+""}function e3e(t,e){if(Qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vz=function(e,r,n,a,i){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+i),c+="L ".concat(e+n-o/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},t3e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},r3e=function(e){var r=Uz(Uz({},t3e),e),n=_.useRef(),a=_.useState(-1),i=W5e(a,2),o=i[0],c=i[1];_.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var O=n.current.getTotalLength();O&&c(O)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,x=r.height,y=r.className,S=r.animationEasing,N=r.animationDuration,w=r.animationBegin,T=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||x!==+x||p===0&&m===0||x===0)return null;var C=vr("recharts-trapezoid",y);return T?se.createElement(hl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:x,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:x,x:d,y:h},duration:N,animationEasing:S,isActive:T},function(O){var L=O.upperWidth,I=O.lowerWidth,R=O.height,A=O.x,E=O.y;return se.createElement(hl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:N,easing:S},se.createElement("path",Jb({},qt(r,!0),{className:C,d:Vz(A,E,L,I,R),ref:n})))}):se.createElement("g",null,se.createElement("path",Jb({},qt(r,!0),{className:C,d:Vz(d,h,p,m,x)})))},n3e=["option","shapeType","propTransformer","activeClassName","isActive"];function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function a3e(t,e){if(t==null)return{};var r=s3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function s3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(r),!0).forEach(function(n){i3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i3e(t,e,r){return e=o3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o3e(t){var e=l3e(t,"string");return Xg(e)=="symbol"?e:e+""}function l3e(t,e){if(Xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c3e(t,e){return Zb(Zb({},e),t)}function u3e(t,e){return t==="symbols"}function qz(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return se.createElement(V7,r);case"trapezoid":return se.createElement(r3e,r);case"sector":return se.createElement(_Q,r);case"symbols":if(u3e(e))return se.createElement(Sw,r);break;default:return null}}function d3e(t){return _.isValidElement(t)?t.props:t}function gA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?c3e:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,c=t.isActive,d=a3e(t,n3e),h;if(_.isValidElement(e))h=_.cloneElement(e,Zb(Zb({},d),d3e(e)));else if(rr(e))h=e(d);else if(F5e(e)&&!G5e(e)){var p=a(e,d);h=se.createElement(qz,{shapeType:r,elementProps:p})}else{var m=d;h=se.createElement(qz,{shapeType:r,elementProps:m})}return c?se.createElement(Yr,{className:o},h):h}function zw(t,e){return e!=null&&"trapezoids"in t.props}function Uw(t,e){return e!=null&&"sectors"in t.props}function Yg(t,e){return e!=null&&"points"in t.props}function h3e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function f3e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function p3e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function m3e(t,e){var r;return zw(t,e)?r=h3e:Uw(t,e)?r=f3e:Yg(t,e)&&(r=p3e),r}function g3e(t,e){var r;return zw(t,e)?r="trapezoids":Uw(t,e)?r="sectors":Yg(t,e)&&(r="points"),r}function x3e(t,e){if(zw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Uw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Yg(t,e)?e.payload:{}}function y3e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=g3e(r,e),i=x3e(r,e),o=n.filter(function(d,h){var p=qx(i,d),m=r.props[a].filter(function(S){var N=m3e(r,e);return N(S,e)}),x=r.props[a].indexOf(m[m.length-1]),y=h===x;return p&&y}),c=n.indexOf(o[o.length-1]);return c}var Oj,Hz;function v3e(){if(Hz)return Oj;Hz=1;function t(e){return e&&e.length?e[0]:void 0}return Oj=t,Oj}var Rj,Gz;function b3e(){return Gz||(Gz=1,Rj=v3e()),Rj}var w3e=b3e();const S3e=nn(w3e);var N3e=["key"];function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function j3e(t,e){if(t==null)return{};var r=_3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function e2(){return e2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e2.apply(this,arguments)}function Wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wz(Object(r),!0).forEach(function(n){Kl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zQ(n.key),n)}}function A3e(t,e,r){return e&&Kz(t.prototype,e),r&&Kz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function E3e(t,e,r){return e=t2(e),C3e(t,$Q()?Reflect.construct(e,r||[],t2(t).constructor):e.apply(t,r))}function C3e(t,e){if(e&&(Tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k3e(t)}function k3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $Q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($Q=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t2(t)}function I3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xA(t,e)}function xA(t,e){return xA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xA(t,e)}function Kl(t,e,r){return e=zQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zQ(t){var e=O3e(t,"string");return Tf(e)=="symbol"?e:e+""}function O3e(t,e){if(Tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kx=(function(t){function e(){var r;T3e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=E3e(this,e,[].concat(a)),Kl(r,"state",{isAnimationFinished:!1}),Kl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),rr(o)&&o()}),Kl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),rr(o)&&o()}),Kl(r,"handleMouseEnter",function(o){var c=r.props.onMouseEnter;c&&c(r.props,o)}),Kl(r,"handleMouseLeave",function(o){var c=r.props.onMouseLeave;c&&c(r.props,o)}),r}return I3e(e,t),A3e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,c=qt(this.props,!1),d=qt(i,!0),h=n.map(function(p,m){var x=zs(zs(zs({key:"dot-".concat(m),r:3},c),d),{},{dataKey:o,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,x)});return se.createElement(Yr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return se.isValidElement(i)?p=se.cloneElement(i,zs(zs({},this.props),{},{points:n})):rr(i)?p=i(zs(zs({},this.props),{},{points:n})):p=se.createElement(RQ,e2({},qt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),se.createElement(Yr,{className:"recharts-radar-polygon"},p,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(hl,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,S=m&&m.length/i.length,N=i.map(function(w,T){var C=m&&m[Math.floor(T*S)];if(C){var O=ai(C.x,w.x),L=ai(C.y,w.y);return zs(zs({},w),{},{x:O(y),y:L(y)})}var I=ai(w.cx,w.x),R=ai(w.cy,w.y);return zs(zs({},w),{},{x:I(y),y:R(y)})});return n.renderPolygonStatically(N)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!o&&(!c||!qx(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,c=n.isAnimationActive;if(a||!o||!o.length)return null;var d=this.state.isAnimationFinished,h=vr("recharts-radar",i);return se.createElement(Yr,{className:h},this.renderPolygon(),(!c||d)&&uc.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(rr(n))i=n(a);else{var o=a.key,c=j3e(a,N3e);i=se.createElement(Lw,e2({},c,{key:o,className:vr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(_.PureComponent);Kl(Kx,"displayName","Radar");Kl(Kx,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!R0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Kl(Kx,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,o=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(x,y){var S=Ss(x,r.dataKey,y),N=Ss(x,a),w=r.scale(S)+p,T=Array.isArray(N)?NQ(N):N,C=fr(T)?void 0:e.scale(T);Array.isArray(N)&&N.length>=2&&(d=!0),h.push(zs(zs({},An(o,c,C,w)),{},{name:S,value:N,cx:o,cy:c,radius:C,angle:w,payload:x}))});var m=[];return d&&h.forEach(function(x){if(Array.isArray(x.value)){var y=S3e(x.value),S=fr(y)?void 0:e.scale(y);m.push(zs(zs({},x),{},{radius:S},An(o,c,S,x.angle)))}else m.push(x)}),{points:h,isRange:d,baseLinePoints:m}});var Mj,Qz;function R3e(){if(Qz)return Mj;Qz=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=i;return h}return Mj=r,Mj}var Dj,Xz;function UQ(){if(Xz)return Dj;Xz=1;var t=lK(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return Dj=n,Dj}var Pj,Yz;function M3e(){if(Yz)return Pj;Yz=1;var t=R3e(),e=_w(),r=UQ();function n(a){return function(i,o,c){return c&&typeof c!="number"&&e(i,o,c)&&(o=c=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),c=c===void 0?i<o?1:-1:r(c),t(i,o,c,a)}}return Pj=n,Pj}var Lj,Jz;function D3e(){if(Jz)return Lj;Jz=1;var t=M3e(),e=t();return Lj=e,Lj}var P3e=D3e();const r2=nn(P3e);function Jg(t){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(t)}function Zz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zz(Object(r),!0).forEach(function(n){VQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VQ(t,e,r){return e=L3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L3e(t){var e=B3e(t,"string");return Jg(e)=="symbol"?e:e+""}function B3e(t,e){if(Jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $3e=["Webkit","Moz","O","ms"],z3e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=$3e.reduce(function(i,o){return eU(eU({},i),{},VQ({},o+n,r))},{});return a[e]=r,a};function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function n2(){return n2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n2.apply(this,arguments)}function tU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(r),!0).forEach(function(n){Ai(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qQ(n.key),n)}}function V3e(t,e,r){return e&&rU(t.prototype,e),r&&rU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function F3e(t,e,r){return e=a2(e),q3e(t,FQ()?Reflect.construct(e,r||[],a2(t).constructor):e.apply(t,r))}function q3e(t,e){if(e&&(Af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H3e(t)}function H3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FQ=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a2(t)}function G3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yA(t,e)}function yA(t,e){return yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yA(t,e)}function Ai(t,e,r){return e=qQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qQ(t){var e=W3e(t,"string");return Af(e)=="symbol"?e:e+""}function W3e(t,e){if(Af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var K3e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=zm().domain(r2(0,d)).range([i,i+o-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},nU=function(e){return e.changedTouches&&!!e.changedTouches.length},Ef=(function(t){function e(r){var n;return U3e(this,e),n=F3e(this,e,[r]),Ai(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ai(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ai(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,c=a.startIndex;o==null||o({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),Ai(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ai(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ai(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ai(n,"handleSlideDragStart",function(a){var i=nU(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return G3e(e,t),V3e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),x=Math.max(a,i),y=e.getIndexInRange(o,m),S=e.getIndexInRange(o,x);return{startIndex:y-y%d,endIndex:S===p?p:S-S%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,c=a.dataKey,d=Ss(i[n],c,n);return rr(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,x=d.startIndex,y=d.endIndex,S=d.onChange,N=n.pageX-i;N>0?N=Math.min(N,h+p-m-c,h+p-m-o):N<0&&(N=Math.max(N,h-o,h-c));var w=this.getIndex({startX:o+N,endX:c+N});(w.startIndex!==x||w.endIndex!==y)&&S&&S(w),this.setState({startX:o+N,endX:c+N,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=nU(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],p=this.props,m=p.x,x=p.width,y=p.travellerWidth,S=p.onChange,N=p.gap,w=p.data,T={startX:this.state.startX,endX:this.state.endX},C=n.pageX-i;C>0?C=Math.min(C,m+x-y-h):C<0&&(C=Math.max(C,m-h)),T[o]=h+C;var O=this.getIndex(T),L=O.startIndex,I=O.endIndex,R=function(){var E=w.length-1;return o==="startX"&&(c>d?L%N===0:I%N===0)||c<d&&I===E||o==="endX"&&(c>d?I%N===0:L%N===0)||c>d&&I===E};this.setState(Ai(Ai({},o,h+C),"brushMoveStartX",n.pageX),function(){S&&R()&&S(O)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var x=m+n;if(!(x===-1||x>=c.length)){var y=c[x];a==="startX"&&y>=h||a==="endX"&&y<=d||this.setState(Ai({},a,y),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return se.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=_.Children.only(h);return m?se.cloneElement(m,{x:a,y:i,width:o,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,x=d.traveller,y=d.ariaLabel,S=d.data,N=d.startIndex,w=d.endIndex,T=Math.max(n,this.props.x),C=Bj(Bj({},qt(this.props,!1)),{},{x:T,y:h,width:p,height:m}),O=y||"Min value: ".concat((i=S[N])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=S[w])===null||o===void 0?void 0:o.name);return se.createElement(Yr,{tabIndex:0,role:"slider","aria-label":O,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(I){["ArrowLeft","ArrowRight"].includes(I.key)&&(I.preventDefault(),I.stopPropagation(),c.handleTravellerMoveKeyboard(I.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(x,C))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:o,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,x=p.endX,y=5,S={pointerEvents:"none",fill:h};return se.createElement(Yr,{className:"recharts-brush-texts"},se.createElement(yf,n2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,x)-y,y:o+c/2},S),this.getTextOfTick(a)),se.createElement(yf,n2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,x)+d+y,y:o+c/2},S),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,x=this.state,y=x.startX,S=x.endX,N=x.isTextActive,w=x.isSlideMoving,T=x.isTravellerMoving,C=x.isTravellerFocused;if(!a||!a.length||!xt(c)||!xt(d)||!xt(h)||!xt(p)||h<=0||p<=0)return null;var O=vr("recharts-brush",i),L=se.Children.count(o)===1,I=z3e("userSelect","none");return se.createElement(Yr,{className:O,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:I},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(y,S),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(S,"endX"),(N||w||T||C||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:o,height:c,fill:d,stroke:"none"}),se.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):rr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return Bj({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},i&&i.length?K3e({data:i,width:o,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var x=a.scale.domain().map(function(y){return a.scale(y)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,c=i-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(_.PureComponent);Ai(Ef,"displayName","Brush");Ai(Ef,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var $j,aU;function Q3e(){if(aU)return $j;aU=1;var t=f7();function e(r,n){var a;return t(r,function(i,o,c){return a=n(i,o,c),!a}),!!a}return $j=e,$j}var zj,sU;function X3e(){if(sU)return zj;sU=1;var t=$W(),e=vl(),r=Q3e(),n=fi(),a=_w();function i(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return zj=i,zj}var Y3e=X3e();const J3e=nn(Y3e);var al=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},Uj,iU;function Z3e(){if(iU)return Uj;iU=1;var t=nK();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Uj=e,Uj}var Vj,oU;function eSe(){if(oU)return Vj;oU=1;var t=Z3e(),e=tK(),r=vl();function n(a,i){var o={};return i=r(i,3),e(a,function(c,d,h){t(o,d,i(c,d,h))}),o}return Vj=n,Vj}var tSe=eSe();const rSe=nn(tSe);var Fj,lU;function nSe(){if(lU)return Fj;lU=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return Fj=t,Fj}var qj,cU;function aSe(){if(cU)return qj;cU=1;var t=f7();function e(r,n){var a=!0;return t(r,function(i,o,c){return a=!!n(i,o,c),a}),a}return qj=e,qj}var Hj,uU;function sSe(){if(uU)return Hj;uU=1;var t=nSe(),e=aSe(),r=vl(),n=fi(),a=_w();function i(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return Hj=i,Hj}var iSe=sSe();const HQ=nn(iSe);var oSe=["x","y"];function Zg(t){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(t)}function vA(){return vA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vA.apply(this,arguments)}function dU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(r),!0).forEach(function(n){lSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lSe(t,e,r){return e=cSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cSe(t){var e=uSe(t,"string");return Zg(e)=="symbol"?e:e+""}function uSe(t,e){if(Zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dSe(t,e){if(t==null)return{};var r=hSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fSe(t,e){var r=t.x,n=t.y,a=dSe(t,oSe),i="".concat(r),o=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),x=parseInt(m,10);return gm(gm(gm(gm(gm({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:p,width:x,name:e.name,radius:e.radius})}function hU(t){return se.createElement(gA,vA({shapeType:"rectangle",propTransformer:fSe,activeClassName:"recharts-active-bar"},t))}var pSe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=xt(n)||xfe(n);return i?e(n,a):(i||b0(),r)}},mSe=["value","background"],GQ;function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function gSe(t,e){if(t==null)return{};var r=xSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function s2(){return s2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s2.apply(this,arguments)}function fU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(r),!0).forEach(function(n){Nu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ySe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KQ(n.key),n)}}function vSe(t,e,r){return e&&pU(t.prototype,e),r&&pU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bSe(t,e,r){return e=i2(e),wSe(t,WQ()?Reflect.construct(e,r||[],i2(t).constructor):e.apply(t,r))}function wSe(t,e){if(e&&(Cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SSe(t)}function SSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WQ=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i2(t)}function NSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bA(t,e)}function bA(t,e){return bA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},bA(t,e)}function Nu(t,e,r){return e=KQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KQ(t){var e=jSe(t,"string");return Cf(e)=="symbol"?e:e+""}function jSe(t,e){if(Cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qx=(function(t){function e(){var r;ySe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=bSe(this,e,[].concat(a)),Nu(r,"state",{isAnimationFinished:!1}),Nu(r,"id",Bx("recharts-bar-")),Nu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Nu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return NSe(e,t),vSe(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=qt(this.props,!1);return n&&n.map(function(m,x){var y=x===d,S=y?h:o,N=Oa(Oa(Oa({},p),m),{},{isActive:y,option:S,index:x,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(Yr,s2({className:"recharts-bar-rectangle"},y0(a.props,m,x),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(x)}),se.createElement(hU,N))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,x=this.state.prevData;return se.createElement(hl,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var S=y.t,N=i.map(function(w,T){var C=x&&x[T];if(C){var O=ai(C.x,w.x),L=ai(C.y,w.y),I=ai(C.width,w.width),R=ai(C.height,w.height);return Oa(Oa({},w),{},{x:O(S),y:L(S),width:I(S),height:R(S)})}if(o==="horizontal"){var A=ai(0,w.height),E=A(S);return Oa(Oa({},w),{},{y:w.y+w.height-E,height:E})}var k=ai(0,w.width),U=k(S);return Oa(Oa({},w),{},{width:U})});return se.createElement(Yr,null,n.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!qx(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,c=a.activeIndex,d=qt(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,x=gSe(h,mSe);if(!m)return null;var y=Oa(Oa(Oa(Oa(Oa({},x),{},{fill:"#eee"},m),d),y0(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:p,className:"recharts-bar-background-rectangle"});return se.createElement(hU,s2({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},y))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=Di(p,Hx);if(!m)return null;var x=h==="vertical"?o[0].height/2:o[0].width/2,y=function(w,T){var C=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:C,errorVal:Ss(w,T)}},S={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(Yr,S,m.map(function(N){return se.cloneElement(N,{key:"error-bar-".concat(a,"-").concat(N.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:x,dataPointFormatter:y})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,x=n.height,y=n.isAnimationActive,S=n.background,N=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,T=vr("recharts-bar",o),C=c&&c.allowDataOverflow,O=d&&d.allowDataOverflow,L=C||O,I=fr(N)?this.id:N;return se.createElement(Yr,{className:T},C||O?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(I)},se.createElement("rect",{x:C?h:h-m/2,y:O?p:p-x/2,width:C?m:m*2,height:O?x:x*2}))):null,se.createElement(Yr,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(I,")"):null},S?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,I),(!y||w)&&uc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(_.PureComponent);GQ=Qx;Nu(Qx,"displayName","Bar");Nu(Qx,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!R0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Nu(Qx,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,x=t.offset,y=Obe(n,r);if(!y)return null;var S=e.layout,N=r.type.defaultProps,w=N!==void 0?Oa(Oa({},N),r.props):r.props,T=w.dataKey,C=w.children,O=w.minPointSize,L=S==="horizontal"?o:i,I=h?L.scale.domain():null,R=$be({numericAxis:L}),A=Di(C,g7),E=m.map(function(k,U){var P,$,B,G,K,H;h?P=Rbe(h[p+U],I):(P=Ss(k,T),Array.isArray(P)||(P=[R,P]));var ee=pSe(O,GQ.defaultProps.minPointSize)(P[1],U);if(S==="horizontal"){var ae,ce=[o.scale(P[0]),o.scale(P[1])],fe=ce[0],Z=ce[1];$=$$({axis:i,ticks:c,bandSize:a,offset:y.offset,entry:k,index:U}),B=(ae=Z??fe)!==null&&ae!==void 0?ae:void 0,G=y.size;var ne=fe-Z;if(K=Number.isNaN(ne)?0:ne,H={x:$,y:o.y,width:G,height:o.height},Math.abs(ee)>0&&Math.abs(K)<Math.abs(ee)){var Y=Eo(K||ee)*(Math.abs(ee)-Math.abs(K));B-=Y,K+=Y}}else{var de=[i.scale(P[0]),i.scale(P[1])],ye=de[0],Ue=de[1];if($=ye,B=$$({axis:o,ticks:d,bandSize:a,offset:y.offset,entry:k,index:U}),G=Ue-ye,K=y.size,H={x:i.x,y:B,width:i.width,height:K},Math.abs(ee)>0&&Math.abs(G)<Math.abs(ee)){var Xe=Eo(G||ee)*(Math.abs(ee)-Math.abs(G));G+=Xe}}return Oa(Oa(Oa({},k),{},{x:$,y:B,width:G,height:K,value:h?P:P[1],payload:k,background:H},A&&A[U]&&A[U].props),{},{tooltipPayload:[vQ(r,k)],tooltipPosition:{x:$+G/2,y:B+K/2}})});return Oa({data:E,layout:S},x)});function ex(t){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex(t)}function _Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QQ(n.key),n)}}function TSe(t,e,r){return e&&mU(t.prototype,e),r&&mU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function To(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(r),!0).forEach(function(n){Vw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vw(t,e,r){return e=QQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QQ(t){var e=ASe(t,"string");return ex(e)=="symbol"?e:e+""}function ASe(t,e){if(ex(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ESe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},x=!!Ei(h,Qx);return p.reduce(function(y,S){var N=r[S],w=N.orientation,T=N.domain,C=N.padding,O=C===void 0?{}:C,L=N.mirror,I=N.reversed,R="".concat(w).concat(L?"Mirror":""),A,E,k,U,P;if(N.type==="number"&&(N.padding==="gap"||N.padding==="no-gap")){var $=T[1]-T[0],B=1/0,G=N.categoricalDomain.sort(wfe);if(G.forEach(function(de,ye){ye>0&&(B=Math.min((de||0)-(G[ye-1]||0),B))}),Number.isFinite(B)){var K=B/$,H=N.layout==="vertical"?n.height:n.width;if(N.padding==="gap"&&(A=K*H/2),N.padding==="no-gap"){var ee=Co(e.barCategoryGap,K*H),ae=K*H/2;A=ae-ee-(ae-ee)/H*ee}}}a==="xAxis"?E=[n.left+(O.left||0)+(A||0),n.left+n.width-(O.right||0)-(A||0)]:a==="yAxis"?E=d==="horizontal"?[n.top+n.height-(O.bottom||0),n.top+(O.top||0)]:[n.top+(O.top||0)+(A||0),n.top+n.height-(O.bottom||0)-(A||0)]:E=N.range,I&&(E=[E[1],E[0]]);var ce=mQ(N,i,x),fe=ce.scale,Z=ce.realScaleType;fe.domain(T).range(E),gQ(fe);var ne=xQ(fe,To(To({},N),{},{realScaleType:Z}));a==="xAxis"?(P=w==="top"&&!L||w==="bottom"&&L,k=n.left,U=m[R]-P*N.height):a==="yAxis"&&(P=w==="left"&&!L||w==="right"&&L,k=m[R]-P*N.width,U=n.top);var Y=To(To(To({},N),ne),{},{realScaleType:Z,x:k,y:U,scale:fe,width:a==="xAxis"?n.width:N.width,height:a==="yAxis"?n.height:N.height});return Y.bandSize=Vb(Y,ne),!N.hide&&a==="xAxis"?m[R]+=(P?-1:1)*Y.height:N.hide||(m[R]+=(P?-1:1)*Y.width),To(To({},y),{},Vw({},S,Y))},{})},XQ=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},CSe=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return XQ({x:r,y:n},{x:a,y:i})},YQ=(function(){function t(e){_Se(this,t),this.scale=e}return TSe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();Vw(YQ,"EPS",1e-4);var F7=function(e){var r=Object.keys(e).reduce(function(n,a){return To(To({},n),{},Vw({},a,YQ.create(e[a])))},{});return To(To({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,c=i.position;return rSe(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return HQ(a,function(i,o){return r[o].isInRange(i)})}})};function kSe(t){return(t%180+180)%180}var ISe=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=kSe(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},Gj,xU;function OSe(){if(xU)return Gj;xU=1;var t=vl(),e=$x(),r=Nw();function n(a){return function(i,o,c){var d=Object(i);if(!e(i)){var h=t(o,3);i=r(i),o=function(m){return h(d[m],m,d)}}var p=a(i,o,c);return p>-1?d[h?i[p]:p]:void 0}}return Gj=n,Gj}var Wj,yU;function RSe(){if(yU)return Wj;yU=1;var t=UQ();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return Wj=e,Wj}var Kj,vU;function MSe(){if(vU)return Kj;vU=1;var t=XW(),e=vl(),r=RSe(),n=Math.max;function a(i,o,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(o,3),h)}return Kj=a,Kj}var Qj,bU;function DSe(){if(bU)return Qj;bU=1;var t=OSe(),e=MSe(),r=t(e);return Qj=r,Qj}var PSe=DSe();const LSe=nn(PSe);var BSe=hW();const $Se=nn(BSe);var zSe=$Se(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),q7=_.createContext(void 0),H7=_.createContext(void 0),JQ=_.createContext(void 0),ZQ=_.createContext({}),eX=_.createContext(void 0),tX=_.createContext(0),rX=_.createContext(0),wU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,p=zSe(i);return se.createElement(q7.Provider,{value:n},se.createElement(H7.Provider,{value:a},se.createElement(ZQ.Provider,{value:i},se.createElement(JQ.Provider,{value:p},se.createElement(eX.Provider,{value:o},se.createElement(tX.Provider,{value:h},se.createElement(rX.Provider,{value:d},c)))))))},USe=function(){return _.useContext(eX)},nX=function(e){var r=_.useContext(q7);r==null&&b0();var n=r[e];return n==null&&b0(),n},VSe=function(){var e=_.useContext(q7);return vu(e)},FSe=function(){var e=_.useContext(H7),r=LSe(e,function(n){return HQ(n.domain,Number.isFinite)});return r||vu(e)},aX=function(e){var r=_.useContext(H7);r==null&&b0();var n=r[e];return n==null&&b0(),n},qSe=function(){var e=_.useContext(JQ);return e},HSe=function(){return _.useContext(ZQ)},G7=function(){return _.useContext(rX)},W7=function(){return _.useContext(tX)};function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function GSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iX(n.key),n)}}function KSe(t,e,r){return e&&WSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QSe(t,e,r){return e=o2(e),XSe(t,sX()?Reflect.construct(e,r||[],o2(t).constructor):e.apply(t,r))}function XSe(t,e){if(e&&(kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YSe(t)}function YSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!t})()}function o2(t){return o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o2(t)}function JSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}function wA(t,e){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wA(t,e)}function SU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function NU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SU(Object(r),!0).forEach(function(n){K7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K7(t,e,r){return e=iX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iX(t){var e=ZSe(t,"string");return kf(e)=="symbol"?e:e+""}function ZSe(t,e){if(kf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function eNe(t,e){return aNe(t)||nNe(t,e)||rNe(t,e)||tNe()}function tNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rNe(t,e){if(t){if(typeof t=="string")return jU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jU(t,e)}}function jU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nNe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function aNe(t){if(Array.isArray(t))return t}function SA(){return SA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SA.apply(this,arguments)}var sNe=function(e,r){var n;return se.isValidElement(e)?n=se.cloneElement(e,r):rr(e)?n=e(r):n=se.createElement("line",SA({},r,{className:"recharts-reference-line-line"})),n},iNe=function(e,r,n,a,i,o,c,d,h){var p=i.x,m=i.y,x=i.width,y=i.height;if(n){var S=h.y,N=e.y.apply(S,{position:o});if(al(h,"discard")&&!e.y.isInRange(N))return null;var w=[{x:p+x,y:N},{x:p,y:N}];return d==="left"?w.reverse():w}if(r){var T=h.x,C=e.x.apply(T,{position:o});if(al(h,"discard")&&!e.x.isInRange(C))return null;var O=[{x:C,y:m+y},{x:C,y:m}];return c==="top"?O.reverse():O}if(a){var L=h.segment,I=L.map(function(R){return e.apply(R,{position:o})});return al(h,"discard")&&J3e(I,function(R){return!e.isInRange(R)})?null:I}return null};function oNe(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=USe(),p=nX(a),m=aX(i),x=qSe();if(!h||!x)return null;lc(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=F7({x:p.scale,y:m.scale}),S=Ha(e),N=Ha(r),w=n&&n.length===2,T=iNe(y,S,N,w,x,t.position,p.orientation,m.orientation,t);if(!T)return null;var C=eNe(T,2),O=C[0],L=O.x,I=O.y,R=C[1],A=R.x,E=R.y,k=al(t,"hidden")?"url(#".concat(h,")"):void 0,U=NU(NU({clipPath:k},qt(t,!0)),{},{x1:L,y1:I,x2:A,y2:E});return se.createElement(Yr,{className:vr("recharts-reference-line",c)},sNe(o,U),vs.renderCallByParent(t,CSe({x1:L,y1:I,x2:A,y2:E})))}var Q7=(function(t){function e(){return GSe(this,e),QSe(this,e,arguments)}return JSe(e,t),KSe(e,[{key:"render",value:function(){return se.createElement(oNe,this.props)}}])})(se.Component);K7(Q7,"displayName","ReferenceLine");K7(Q7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NA.apply(this,arguments)}function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function _U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function TU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(r),!0).forEach(function(n){Fw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lX(n.key),n)}}function uNe(t,e,r){return e&&cNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dNe(t,e,r){return e=l2(e),hNe(t,oX()?Reflect.construct(e,r||[],l2(t).constructor):e.apply(t,r))}function hNe(t,e){if(e&&(If(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fNe(t)}function fNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oX=function(){return!!t})()}function l2(t){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l2(t)}function pNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jA(t,e)}function jA(t,e){return jA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jA(t,e)}function Fw(t,e,r){return e=lX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lX(t){var e=mNe(t,"string");return If(e)=="symbol"?e:e+""}function mNe(t,e){if(If(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gNe=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=F7({x:a.scale,y:i.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return al(e,"discard")&&!o.isInRange(c)?null:c},qw=(function(t){function e(){return lNe(this,e),dNe(this,e,arguments)}return pNe(e,t),uNe(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=Ha(a),p=Ha(i);if(lc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=gNe(this.props);if(!m)return null;var x=m.x,y=m.y,S=this.props,N=S.shape,w=S.className,T=al(this.props,"hidden")?"url(#".concat(d,")"):void 0,C=TU(TU({clipPath:T},qt(this.props,!0)),{},{cx:x,cy:y});return se.createElement(Yr,{className:vr("recharts-reference-dot",w)},e.renderDot(N,C),vs.renderCallByParent(this.props,{x:x-o,y:y-o,width:2*o,height:2*o}))}}])})(se.Component);Fw(qw,"displayName","ReferenceDot");Fw(qw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Fw(qw,"renderDot",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):rr(t)?r=t(e):r=se.createElement(Lw,NA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function _A(){return _A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_A.apply(this,arguments)}function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function AU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(r),!0).forEach(function(n){Hw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uX(n.key),n)}}function vNe(t,e,r){return e&&yNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bNe(t,e,r){return e=c2(e),wNe(t,cX()?Reflect.construct(e,r||[],c2(t).constructor):e.apply(t,r))}function wNe(t,e){if(e&&(Of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SNe(t)}function SNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cX=function(){return!!t})()}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c2(t)}function NNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TA(t,e)}function TA(t,e){return TA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TA(t,e)}function Hw(t,e,r){return e=uX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uX(t){var e=jNe(t,"string");return Of(e)=="symbol"?e:e+""}function jNe(t,e){if(Of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _Ne=function(e,r,n,a,i){var o=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var x=F7({x:p.scale,y:m.scale}),y={x:e?x.x.apply(o,{position:"start"}):x.x.rangeMin,y:n?x.y.apply(d,{position:"start"}):x.y.rangeMin},S={x:r?x.x.apply(c,{position:"end"}):x.x.rangeMax,y:a?x.y.apply(h,{position:"end"}):x.y.rangeMax};return al(i,"discard")&&(!x.isInRange(y)||!x.isInRange(S))?null:XQ(y,S)},Gw=(function(t){function e(){return xNe(this,e),bNe(this,e,arguments)}return NNe(e,t),vNe(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;lc(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Ha(a),x=Ha(i),y=Ha(o),S=Ha(c),N=this.props.shape;if(!m&&!x&&!y&&!S&&!N)return null;var w=_Ne(m,x,y,S,this.props);if(!w&&!N)return null;var T=al(this.props,"hidden")?"url(#".concat(p,")"):void 0;return se.createElement(Yr,{className:vr("recharts-reference-area",d)},e.renderRect(N,EU(EU({clipPath:T},qt(this.props,!0)),w)),vs.renderCallByParent(this.props,w))}}])})(se.Component);Hw(Gw,"displayName","ReferenceArea");Hw(Gw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Hw(Gw,"renderRect",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):rr(t)?r=t(e):r=se.createElement(V7,_A({},e,{className:"recharts-reference-area-rect"})),r});function dX(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function TNe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return ISe(n,r)}function ANe(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function u2(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function ENe(t,e){return dX(t,e+1)}function CNe(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,p=o,m=function(){var S=n==null?void 0:n[d];if(S===void 0)return{v:dX(n,h)};var N=d,w,T=function(){return w===void 0&&(w=r(S,N)),w},C=S.coordinate,O=d===0||u2(t,C,T,p,c);O||(d=0,p=o,h+=1),O&&(p=C+t*(T()/2+a),d+=h)},x;h<=i.length;)if(x=m(),x)return x.v;return[]}function tx(t){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tx(t)}function CU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function As(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CU(Object(r),!0).forEach(function(n){kNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kNe(t,e,r){return e=INe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function INe(t){var e=ONe(t,"string");return tx(e)=="symbol"?e:e+""}function ONe(t,e){if(tx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RNe(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,c=e.start,d=e.end,h=function(x){var y=i[x],S,N=function(){return S===void 0&&(S=r(y,x)),S};if(x===o-1){var w=t*(y.coordinate+t*N()/2-d);i[x]=y=As(As({},y),{},{tickCoord:w>0?y.coordinate-w*t:y.coordinate})}else i[x]=y=As(As({},y),{},{tickCoord:y.coordinate});var T=u2(t,y.tickCoord,N,c,d);T&&(d=y.tickCoord-t*(N()/2+a),i[x]=As(As({},y),{},{isShow:!0}))},p=o-1;p>=0;p--)h(p);return i}function MNe(t,e,r,n,a,i){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),x=t*(p.coordinate+t*m/2-h);o[c-1]=p=As(As({},p),{},{tickCoord:x>0?p.coordinate-x*t:p.coordinate});var y=u2(t,p.tickCoord,function(){return m},d,h);y&&(h=p.tickCoord-t*(m/2+a),o[c-1]=As(As({},p),{},{isShow:!0}))}for(var S=i?c-1:c,N=function(C){var O=o[C],L,I=function(){return L===void 0&&(L=r(O,C)),L};if(C===0){var R=t*(O.coordinate-t*I()/2-d);o[C]=O=As(As({},O),{},{tickCoord:R<0?O.coordinate-R*t:O.coordinate})}else o[C]=O=As(As({},O),{},{tickCoord:O.coordinate});var A=u2(t,O.tickCoord,I,d,h);A&&(d=O.tickCoord+t*(I()/2+a),o[C]=As(As({},O),{},{isShow:!0}))},w=0;w<S;w++)N(w);return o}function X7(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(xt(d)||R0.isSsr)return ENe(a,typeof d=="number"&&xt(d)?d:0);var x=[],y=c==="top"||c==="bottom"?"width":"height",S=p&&y==="width"?$m(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},N=function(O,L){var I=rr(h)?h(O.value,L):O.value;return y==="width"?TNe($m(I,{fontSize:e,letterSpacing:r}),S,m):$m(I,{fontSize:e,letterSpacing:r})[y]},w=a.length>=2?Eo(a[1].coordinate-a[0].coordinate):1,T=ANe(i,w,y);return d==="equidistantPreserveStart"?CNe(w,T,N,a,o):(d==="preserveStart"||d==="preserveStartEnd"?x=MNe(w,T,N,a,o,d==="preserveStartEnd"):x=RNe(w,T,N,a,o),x.filter(function(C){return C.isShow}))}var DNe=["viewBox"],PNe=["viewBox"],LNe=["ticks"];function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mh.apply(this,arguments)}function kU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function za(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(r),!0).forEach(function(n){Y7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xj(t,e){if(t==null)return{};var r=BNe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function BNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fX(n.key),n)}}function zNe(t,e,r){return e&&IU(t.prototype,e),r&&IU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function UNe(t,e,r){return e=d2(e),VNe(t,hX()?Reflect.construct(e,r||[],d2(t).constructor):e.apply(t,r))}function VNe(t,e){if(e&&(Rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FNe(t)}function FNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hX=function(){return!!t})()}function d2(t){return d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d2(t)}function qNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AA(t,e)}function AA(t,e){return AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},AA(t,e)}function Y7(t,e,r){return e=fX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fX(t){var e=HNe(t,"string");return Rf(e)=="symbol"?e:e+""}function HNe(t,e){if(Rf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ap=(function(t){function e(r){var n;return $Ne(this,e),n=UNe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return qNe(e,t),zNe(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Xj(n,DNe),c=this.props,d=c.viewBox,h=Xj(c,PNe);return!Hh(i,d)||!Hh(o,h)||!Hh(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,x=a.tickMargin,y,S,N,w,T,C,O=m?-1:1,L=n.tickSize||p,I=xt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":y=S=n.coordinate,w=o+ +!m*d,N=w-O*L,C=N-O*x,T=I;break;case"left":N=w=n.coordinate,S=i+ +!m*c,y=S-O*L,T=y-O*x,C=I;break;case"right":N=w=n.coordinate,S=i+ +m*c,y=S+O*L,T=y+O*x,C=I;break;default:y=S=n.coordinate,w=o+ +m*d,N=w+O*L,C=N+O*x,T=I;break}return{line:{x1:y,y1:N,x2:S,y2:w},tick:{x:T,y:C}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=za(za(za({},qt(this.props,!1)),qt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var x=+(d==="top"&&!h||d==="bottom"&&h);m=za(za({},m),{},{x1:a,y1:i+x*c,x2:a+o,y2:i+x*c})}else{var y=+(d==="left"&&!h||d==="right"&&h);m=za(za({},m),{},{x1:a+y*o,y1:i,x2:a+y*o,y2:i+c})}return se.createElement("line",Mh({},m,{className:vr("recharts-cartesian-axis-line",io(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,x=c.unit,y=X7(za(za({},this.props),{},{ticks:n}),a,i),S=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),w=qt(this.props,!1),T=qt(p,!1),C=za(za({},w),{},{fill:"none"},qt(d,!1)),O=y.map(function(L,I){var R=o.getTickLineCoord(L),A=R.line,E=R.tick,k=za(za(za(za({textAnchor:S,verticalAnchor:N},w),{},{stroke:"none",fill:h},T),E),{},{index:I,payload:L,visibleTicksCount:y.length,tickFormatter:m});return se.createElement(Yr,Mh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},y0(o.props,L,I)),d&&se.createElement("line",Mh({},C,A,{className:vr("recharts-cartesian-axis-tick-line",io(d,"className"))})),p&&e.renderTickItem(p,k,"".concat(rr(m)?m(L.value,I):L.value).concat(x||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},O)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,x=m.ticks,y=Xj(m,LNe),S=x;return rr(d)&&(S=x&&x.length>0?d(this.props):d(y)),o<=0||c<=0||!S||!S.length?null:se.createElement(Yr,{className:vr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(S,this.state.fontSize,this.state.letterSpacing),vs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,c=vr(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?o=se.cloneElement(n,za(za({},a),{},{className:c})):rr(n)?o=n(za(za({},a),{},{className:c})):o=se.createElement(yf,Mh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(_.Component);Y7(ap,"displayName","CartesianAxis");Y7(ap,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var GNe=["x1","y1","x2","y2","key"],WNe=["offset"];function w0(t){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w0(t)}function OU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OU(Object(r),!0).forEach(function(n){KNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KNe(t,e,r){return e=QNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QNe(t){var e=XNe(t,"string");return w0(e)=="symbol"?e:e+""}function XNe(t,e){if(w0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(w0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qd.apply(this,arguments)}function RU(t,e){if(t==null)return{};var r=YNe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function YNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var JNe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,c=e.height,d=e.ry;return se.createElement("rect",{x:a,y:i,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function pX(t,e){var r;if(se.isValidElement(t))r=se.cloneElement(t,e);else if(rr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,c=e.key,d=RU(e,GNe),h=qt(d,!1);h.offset;var p=RU(h,WNe);r=se.createElement("line",qd({},p,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:c}))}return r}function ZNe(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Cs(Cs({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return pX(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function e6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Cs(Cs({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return pX(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function t6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(x){return Math.round(x+a-a)}).sort(function(x,y){return x-y});a!==p[0]&&p.unshift(0);var m=p.map(function(x,y){var S=!p[y+1],N=S?a+o-x:p[y+1]-x;if(N<=0)return null;var w=y%e.length;return se.createElement("rect",{key:"react-".concat(y),y:x,x:n,height:N,width:i,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function r6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(x){return Math.round(x+i-i)}).sort(function(x,y){return x-y});i!==p[0]&&p.unshift(0);var m=p.map(function(x,y){var S=!p[y+1],N=S?i+c-x:p[y+1]-x;if(N<=0)return null;var w=y%n.length;return se.createElement("rect",{key:"react-".concat(y),x,y:o,width:N,height:d,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var n6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return pQ(X7(Cs(Cs(Cs({},ap.defaultProps),n),{},{ticks:nc(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},a6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return pQ(X7(Cs(Cs(Cs({},ap.defaultProps),n),{},{ticks:nc(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Nh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function mX(t){var e,r,n,a,i,o,c=G7(),d=W7(),h=HSe(),p=Cs(Cs({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Nh.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Nh.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Nh.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Nh.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Nh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Nh.verticalFill,x:xt(t.x)?t.x:h.left,y:xt(t.y)?t.y:h.top,width:xt(t.width)?t.width:h.width,height:xt(t.height)?t.height:h.height}),m=p.x,x=p.y,y=p.width,S=p.height,N=p.syncWithTicks,w=p.horizontalValues,T=p.verticalValues,C=VSe(),O=FSe();if(!xt(y)||y<=0||!xt(S)||S<=0||!xt(m)||m!==+m||!xt(x)||x!==+x)return null;var L=p.verticalCoordinatesGenerator||n6e,I=p.horizontalCoordinatesGenerator||a6e,R=p.horizontalPoints,A=p.verticalPoints;if((!R||!R.length)&&rr(I)){var E=w&&w.length,k=I({yAxis:O?Cs(Cs({},O),{},{ticks:E?w:O.ticks}):void 0,width:c,height:d,offset:h},E?!0:N);lc(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(w0(k),"]")),Array.isArray(k)&&(R=k)}if((!A||!A.length)&&rr(L)){var U=T&&T.length,P=L({xAxis:C?Cs(Cs({},C),{},{ticks:U?T:C.ticks}):void 0,width:c,height:d,offset:h},U?!0:N);lc(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(w0(P),"]")),Array.isArray(P)&&(A=P)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(JNe,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),se.createElement(ZNe,qd({},p,{offset:h,horizontalPoints:R,xAxis:C,yAxis:O})),se.createElement(e6e,qd({},p,{offset:h,verticalPoints:A,xAxis:C,yAxis:O})),se.createElement(t6e,qd({},p,{horizontalPoints:R})),se.createElement(r6e,qd({},p,{verticalPoints:A})))}mX.displayName="CartesianGrid";function Mf(t){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(t)}function s6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yX(n.key),n)}}function o6e(t,e,r){return e&&i6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function l6e(t,e,r){return e=h2(e),c6e(t,gX()?Reflect.construct(e,r||[],h2(t).constructor):e.apply(t,r))}function c6e(t,e){if(e&&(Mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u6e(t)}function u6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gX=function(){return!!t})()}function h2(t){return h2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h2(t)}function d6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EA(t,e)}function EA(t,e){return EA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},EA(t,e)}function xX(t,e,r){return e=yX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yX(t){var e=h6e(t,"string");return Mf(e)=="symbol"?e:e+""}function h6e(t,e){if(Mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ww=(function(t){function e(){return s6e(this,e),l6e(this,e,arguments)}return d6e(e,t),o6e(e,[{key:"render",value:function(){return null}}])})(_.Component);xX(Ww,"displayName","ZAxis");xX(Ww,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var f6e=["option","isActive"];function Hm(){return Hm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hm.apply(this,arguments)}function p6e(t,e){if(t==null)return{};var r=m6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function m6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function g6e(t){var e=t.option,r=t.isActive,n=p6e(t,f6e);return typeof e=="string"?_.createElement(gA,Hm({option:_.createElement(Sw,Hm({type:e},n)),isActive:r,shapeType:"symbols"},n)):_.createElement(gA,Hm({option:e,isActive:r,shapeType:"symbols"},n))}function Df(t){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(t)}function Gm(){return Gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gm.apply(this,arguments)}function MU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(r),!0).forEach(function(n){ju(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bX(n.key),n)}}function y6e(t,e,r){return e&&DU(t.prototype,e),r&&DU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function v6e(t,e,r){return e=f2(e),b6e(t,vX()?Reflect.construct(e,r||[],f2(t).constructor):e.apply(t,r))}function b6e(t,e){if(e&&(Df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w6e(t)}function w6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vX=function(){return!!t})()}function f2(t){return f2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f2(t)}function S6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CA(t,e)}function CA(t,e){return CA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},CA(t,e)}function ju(t,e,r){return e=bX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bX(t){var e=N6e(t,"string");return Df(e)=="symbol"?e:e+""}function N6e(t,e){if(Df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xx=(function(t){function e(){var r;x6e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=v6e(this,e,[].concat(a)),ju(r,"state",{isAnimationFinished:!1}),ju(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),ju(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),ju(r,"id",Bx("recharts-scatter-")),r}return S6e(e,t),y6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.activeShape,d=i.activeIndex,h=qt(this.props,!1);return n.map(function(p,m){var x=d===m,y=x?c:o,S=eo(eo({},h),p);return se.createElement(Yr,Gm({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},y0(a.props,p,m),{role:"img"}),se.createElement(g6e,Gm({option:y,isActive:x,key:"symbol-".concat(m)},S)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(hl,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,S=i.map(function(N,w){var T=m&&m[w];if(T){var C=ai(T.cx,N.cx),O=ai(T.cy,N.cy),L=ai(T.size,N.size);return eo(eo({},N),{},{cx:C(y),cy:O(y),size:L(y)})}var I=ai(0,N.size);return eo(eo({},N),{},{size:I(y)})});return se.createElement(Yr,null,n.renderSymbolsStatically(S))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!qx(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,c=a.yAxis,d=a.children,h=Di(d,Hx);return h?h.map(function(p,m){var x=p.props,y=x.direction,S=x.dataKey;return se.cloneElement(p,{key:"".concat(y,"-").concat(S,"-").concat(i[m]),data:i,xAxis:o,yAxis:c,layout:y==="x"?"vertical":"horizontal",dataPointFormatter:function(w,T){return{x:w.cx,y:w.cy,value:y==="x"?+w.node.x:+w.node.y,errorVal:Ss(w,T)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,c=n.lineJointType,d=qt(this.props,!1),h=qt(i,!1),p,m;if(o==="joint")p=a.map(function(O){return{x:O.cx,y:O.cy}});else if(o==="fitting"){var x=bfe(a),y=x.xmin,S=x.xmax,N=x.a,w=x.b,T=function(L){return N*L+w};p=[{x:y,y:T(y)},{x:S,y:T(S)}]}var C=eo(eo(eo({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return se.isValidElement(i)?m=se.cloneElement(i,C):rr(i)?m=i(C):m=se.createElement(tA,Gm({},C,{type:c})),se.createElement(Yr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,x=n.width,y=n.height,S=n.id,N=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,T=vr("recharts-scatter",c),C=d&&d.allowDataOverflow,O=h&&h.allowDataOverflow,L=C||O,I=fr(S)?this.id:S;return se.createElement(Yr,{className:T,clipPath:L?"url(#clipPath-".concat(I,")"):null},C||O?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(I)},se.createElement("rect",{x:C?p:p-x/2,y:O?m:m-y/2,width:C?x:x*2,height:O?y:y*2}))):null,o&&this.renderLine(),this.renderErrorBar(),se.createElement(Yr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!N||w)&&uc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(_.PureComponent);ju(Xx,"displayName","Scatter");ju(Xx,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!R0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});ju(Xx,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,o=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=Di(a.props.children,g7),m=fr(e.dataKey)?a.props.dataKey:e.dataKey,x=fr(r.dataKey)?a.props.dataKey:r.dataKey,y=n&&n.dataKey,S=n?n.range:Ww.defaultProps.range,N=S&&S[0],w=e.scale.bandwidth?e.scale.bandwidth():0,T=r.scale.bandwidth?r.scale.bandwidth():0,C=i.map(function(O,L){var I=Ss(O,m),R=Ss(O,x),A=!fr(y)&&Ss(O,y)||"-",E=[{name:fr(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:I,payload:O,dataKey:m,type:h},{name:fr(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:R,payload:O,dataKey:x,type:h}];A!=="-"&&E.push({name:n.name||n.dataKey,unit:n.unit||"",value:A,payload:O,dataKey:y,type:h});var k=B$({axis:e,ticks:o,bandSize:w,entry:O,index:L,dataKey:m}),U=B$({axis:r,ticks:c,bandSize:T,entry:O,index:L,dataKey:x}),P=A!=="-"?n.scale(A):N,$=Math.sqrt(Math.max(P,0)/Math.PI);return eo(eo({},O),{},{cx:k,cy:U,x:k-$,y:U-$,xAxis:e,yAxis:r,zAxis:n,width:2*$,height:2*$,size:P,node:{x:I,y:R,z:A},tooltipPayload:E,tooltipPosition:{x:k,y:U},payload:O},p&&p[L]&&p[L].props)});return eo({points:C},d)});function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function j6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NX(n.key),n)}}function T6e(t,e,r){return e&&_6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function A6e(t,e,r){return e=p2(e),E6e(t,wX()?Reflect.construct(e,r||[],p2(t).constructor):e.apply(t,r))}function E6e(t,e){if(e&&(Pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C6e(t)}function C6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wX=function(){return!!t})()}function p2(t){return p2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p2(t)}function k6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kA(t,e)}function kA(t,e){return kA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kA(t,e)}function SX(t,e,r){return e=NX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NX(t){var e=I6e(t,"string");return Pf(e)=="symbol"?e:e+""}function I6e(t,e){if(Pf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function IA(){return IA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IA.apply(this,arguments)}function O6e(t){var e=t.xAxisId,r=G7(),n=W7(),a=nX(e);return a==null?null:_.createElement(ap,IA({},a,{className:vr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return nc(o,!0)}}))}var Kw=(function(t){function e(){return j6e(this,e),A6e(this,e,arguments)}return k6e(e,t),T6e(e,[{key:"render",value:function(){return _.createElement(O6e,this.props)}}])})(_.Component);SX(Kw,"displayName","XAxis");SX(Kw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function R6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TX(n.key),n)}}function D6e(t,e,r){return e&&M6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function P6e(t,e,r){return e=m2(e),L6e(t,jX()?Reflect.construct(e,r||[],m2(t).constructor):e.apply(t,r))}function L6e(t,e){if(e&&(Lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B6e(t)}function B6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jX=function(){return!!t})()}function m2(t){return m2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},m2(t)}function $6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OA(t,e)}function OA(t,e){return OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},OA(t,e)}function _X(t,e,r){return e=TX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TX(t){var e=z6e(t,"string");return Lf(e)=="symbol"?e:e+""}function z6e(t,e){if(Lf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RA.apply(this,arguments)}var U6e=function(e){var r=e.yAxisId,n=G7(),a=W7(),i=aX(r);return i==null?null:_.createElement(ap,RA({},i,{className:vr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return nc(c,!0)}}))},Qw=(function(t){function e(){return R6e(this,e),P6e(this,e,arguments)}return $6e(e,t),D6e(e,[{key:"render",value:function(){return _.createElement(U6e,this.props)}}])})(_.Component);_X(Qw,"displayName","YAxis");_X(Qw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function PU(t){return H6e(t)||q6e(t)||F6e(t)||V6e()}function V6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F6e(t,e){if(t){if(typeof t=="string")return MA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MA(t,e)}}function q6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function H6e(t){if(Array.isArray(t))return MA(t)}function MA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var DA=function(e,r,n,a,i){var o=Di(e,Q7),c=Di(e,qw),d=[].concat(PU(o),PU(c)),h=Di(e,Gw),p="".concat(a,"Id"),m=a[0],x=r;if(d.length&&(x=d.reduce(function(N,w){if(w.props[p]===n&&al(w.props,"extendDomain")&&xt(w.props[m])){var T=w.props[m];return[Math.min(N[0],T),Math.max(N[1],T)]}return N},x)),h.length){var y="".concat(m,"1"),S="".concat(m,"2");x=h.reduce(function(N,w){if(w.props[p]===n&&al(w.props,"extendDomain")&&xt(w.props[y])&&xt(w.props[S])){var T=w.props[y],C=w.props[S];return[Math.min(N[0],T,C),Math.max(N[1],T,C)]}return N},x)}return i&&i.length&&(x=i.reduce(function(N,w){return xt(w)?[Math.min(N[0],w),Math.max(N[1],w)]:N},x)),x},Yj={exports:{}},LU;function G6e(){return LU||(LU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var y=new a(p,m||d,x),S=r?r+h:h;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],y]:d._events[S].push(y):(d._events[S]=y,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,y=m.length,S=new Array(y);x<y;x++)S[x]=m[x].fn;return S},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,x,y,S){var N=r?r+h:h;if(!this._events[N])return!1;var w=this._events[N],T=arguments.length,C,O;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),T){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,x),!0;case 5:return w.fn.call(w.context,p,m,x,y),!0;case 6:return w.fn.call(w.context,p,m,x,y,S),!0}for(O=1,C=new Array(T-1);O<T;O++)C[O-1]=arguments[O];w.fn.apply(w.context,C)}else{var L=w.length,I;for(O=0;O<L;O++)switch(w[O].once&&this.removeListener(h,w[O].fn,void 0,!0),T){case 1:w[O].fn.call(w[O].context);break;case 2:w[O].fn.call(w[O].context,p);break;case 3:w[O].fn.call(w[O].context,p,m);break;case 4:w[O].fn.call(w[O].context,p,m,x);break;default:if(!C)for(I=1,C=new Array(T-1);I<T;I++)C[I-1]=arguments[I];w[O].fn.apply(w[O].context,C)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,x){var y=r?r+h:h;if(!this._events[y])return this;if(!p)return o(this,y),this;var S=this._events[y];if(S.fn)S.fn===p&&(!x||S.once)&&(!m||S.context===m)&&o(this,y);else{for(var N=0,w=[],T=S.length;N<T;N++)(S[N].fn!==p||x&&!S[N].once||m&&S[N].context!==m)&&w.push(S[N]);w.length?this._events[y]=w.length===1?w[0]:w:o(this,y)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(Yj)),Yj.exports}var W6e=G6e();const K6e=nn(W6e);var Jj=new K6e,Zj="recharts.syncMouseEvents";function rx(t){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rx(t)}function Q6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AX(n.key),n)}}function Y6e(t,e,r){return e&&X6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function e_(t,e,r){return e=AX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AX(t){var e=J6e(t,"string");return rx(e)=="symbol"?e:e+""}function J6e(t,e){if(rx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Z6e=(function(){function t(){Q6e(this,t),e_(this,"activeIndex",0),e_(this,"coordinateList",[]),e_(this,"layout","horizontal")}return Y6e(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,x=r.mouseHandlerCallback,y=x===void 0?null:x;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,x=o+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:x})}}}])})();function eje(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&xt(n)&&xt(a))return!0}return!1}function tje(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function EX(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=An(e,r,n,a),c=An(e,r,n,i);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function rje(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,x=An(c,d,h,m),y=An(c,d,p,m);n=x.x,a=x.y,i=y.x,o=y.y}else return EX(e);return[{x:n,y:a},{x:i,y:o}]}function nx(t){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nx(t)}function BU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(r),!0).forEach(function(n){nje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nje(t,e,r){return e=aje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aje(t){var e=sje(t,"string");return nx(e)=="symbol"?e:e+""}function sje(t,e){if(nx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ije(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,x=t.chartName,y=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!y||!i||!o||x!=="ScatterChart"&&a!=="axis")return null;var S,N=tA;if(x==="ScatterChart")S=o,N=a5e;else if(x==="BarChart")S=tje(m,o,d,p),N=V7;else if(m==="radial"){var w=EX(o),T=w.cx,C=w.cy,O=w.radius,L=w.startAngle,I=w.endAngle;S={cx:T,cy:C,startAngle:L,endAngle:I,innerRadius:O,outerRadius:O},N=_Q}else S={points:rje(m,o,d)},N=tA;var R=tv(tv(tv(tv({stroke:"#ccc",pointerEvents:"none"},d),S),qt(y,!1)),{},{payload:c,payloadIndex:h,className:vr("recharts-tooltip-cursor",y.className)});return _.isValidElement(y)?_.cloneElement(y,R):_.createElement(N,R)}var oje=["item"],lje=["children","className","width","height","style","compact","title","desc"];function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dh.apply(this,arguments)}function $U(t,e){return dje(t)||uje(t,e)||kX(t,e)||cje()}function cje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uje(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function dje(t){if(Array.isArray(t))return t}function zU(t,e){if(t==null)return{};var r=hje(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hje(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pje(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IX(n.key),n)}}function mje(t,e,r){return e&&pje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gje(t,e,r){return e=g2(e),xje(t,CX()?Reflect.construct(e,r||[],g2(t).constructor):e.apply(t,r))}function xje(t,e){if(e&&(Bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yje(t)}function yje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CX=function(){return!!t})()}function g2(t){return g2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g2(t)}function vje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PA(t,e)}function PA(t,e){return PA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},PA(t,e)}function $f(t){return Sje(t)||wje(t)||kX(t)||bje()}function bje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kX(t,e){if(t){if(typeof t=="string")return LA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LA(t,e)}}function wje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Sje(t){if(Array.isArray(t))return LA(t)}function LA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function UU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(r),!0).forEach(function(n){Xt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xt(t,e,r){return e=IX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IX(t){var e=Nje(t,"string");return Bf(e)=="symbol"?e:e+""}function Nje(t,e){if(Bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jje={xAxis:["bottom","top"],yAxis:["left","right"]},_je={width:"100%",height:"100%"},OX={x:0,y:0};function rv(t){return t}var Tje=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Aje=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,c=a.radius;return Ge(Ge(Ge({},a),An(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=i.coordinate,h=a.angle;return Ge(Ge(Ge({},a),An(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return OX},Xw=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat($f(c),$f(h)):c},[]);return o.length>0?o:e&&e.length&&xt(a)&&xt(i)?e.slice(a,i+1):[]};function RX(t){return t==="number"?[0,"auto"]:void 0}var BA=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,c=Xw(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var x;if(o.dataKey&&!o.allowDuplicatedCategory){var y=m===void 0?c:m;x=gb(y,o.dataKey,a)}else x=m&&m[n]||c[n];return x?[].concat($f(d),[vQ(h,x)]):d},[])},VU=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=Tje(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=Tbe(o,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,x=BA(e,r,p,m),y=Aje(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:x,activeCoordinate:y}}return null},Eje=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,x=e.stackOffset,y=fQ(p,i);return n.reduce(function(S,N){var w,T=N.type.defaultProps!==void 0?Ge(Ge({},N.type.defaultProps),N.props):N.props,C=T.type,O=T.dataKey,L=T.allowDataOverflow,I=T.allowDuplicatedCategory,R=T.scale,A=T.ticks,E=T.includeHidden,k=T[o];if(S[k])return S;var U=Xw(e.data,{graphicalItems:a.filter(function(ne){var Y,de=o in ne.props?ne.props[o]:(Y=ne.type.defaultProps)===null||Y===void 0?void 0:Y[o];return de===k}),dataStartIndex:d,dataEndIndex:h}),P=U.length,$,B,G;eje(T.domain,L,C)&&($=XT(T.domain,null,L),y&&(C==="number"||R!=="auto")&&(G=Um(U,O,"category")));var K=RX(C);if(!$||$.length===0){var H,ee=(H=T.domain)!==null&&H!==void 0?H:K;if(O){if($=Um(U,O,C),C==="category"&&y){var ae=vfe($);I&&ae?(B=$,$=r2(0,P)):I||($=V$(ee,$,N).reduce(function(ne,Y){return ne.indexOf(Y)>=0?ne:[].concat($f(ne),[Y])},[]))}else if(C==="category")I?$=$.filter(function(ne){return ne!==""&&!fr(ne)}):$=V$(ee,$,N).reduce(function(ne,Y){return ne.indexOf(Y)>=0||Y===""||fr(Y)?ne:[].concat($f(ne),[Y])},[]);else if(C==="number"){var ce=Ibe(U,a.filter(function(ne){var Y,de,ye=o in ne.props?ne.props[o]:(Y=ne.type.defaultProps)===null||Y===void 0?void 0:Y[o],Ue="hide"in ne.props?ne.props.hide:(de=ne.type.defaultProps)===null||de===void 0?void 0:de.hide;return ye===k&&(E||!Ue)}),O,i,p);ce&&($=ce)}y&&(C==="number"||R!=="auto")&&(G=Um(U,O,"category"))}else y?$=r2(0,P):c&&c[k]&&c[k].hasStack&&C==="number"?$=x==="expand"?[0,1]:yQ(c[k].stackGroups,d,h):$=hQ(U,a.filter(function(ne){var Y=o in ne.props?ne.props[o]:ne.type.defaultProps[o],de="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return Y===k&&(E||!de)}),C,p,!0);if(C==="number")$=DA(m,$,k,i,A),ee&&($=XT(ee,$,L));else if(C==="category"&&ee){var fe=ee,Z=$.every(function(ne){return fe.indexOf(ne)>=0});Z&&($=fe)}}return Ge(Ge({},S),{},Xt({},k,Ge(Ge({},T),{},{axisType:i,domain:$,categoricalDomain:G,duplicateDomain:B,originalDomain:(w=T.domain)!==null&&w!==void 0?w:K,isCategorical:y,layout:p})))},{})},Cje=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,x=Xw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),y=x.length,S=fQ(p,i),N=-1;return n.reduce(function(w,T){var C=T.type.defaultProps!==void 0?Ge(Ge({},T.type.defaultProps),T.props):T.props,O=C[o],L=RX("number");if(!w[O]){N++;var I;return S?I=r2(0,y):c&&c[O]&&c[O].hasStack?(I=yQ(c[O].stackGroups,d,h),I=DA(m,I,O,i)):(I=XT(L,hQ(x,n.filter(function(R){var A,E,k=o in R.props?R.props[o]:(A=R.type.defaultProps)===null||A===void 0?void 0:A[o],U="hide"in R.props?R.props.hide:(E=R.type.defaultProps)===null||E===void 0?void 0:E.hide;return k===O&&!U}),"number",p),a.defaultProps.allowDataOverflow),I=DA(m,I,O,i)),Ge(Ge({},w),{},Xt({},O,Ge(Ge({axisType:i},a.defaultProps),{},{hide:!0,orientation:io(jje,"".concat(i,".").concat(N%2),null),domain:I,originalDomain:L,isCategorical:S,layout:p})))}return w},{})},kje=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),x=Di(p,i),y={};return x&&x.length?y=Eje(e,{axes:x,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(y=Cje(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),y},Ije=function(e){var r=vu(e),n=nc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:p7(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Vb(r,n)}},FU=function(e){var r=e.children,n=e.defaultShowTooltip,a=Ei(r,Ef),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Oje=function(e){return!e||!e.length?!1:e.some(function(r){var n=oc(r&&r.type);return n&&n.indexOf("Bar")>=0})},qU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Rje=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,x=n.margin||{},y=Ei(m,Ef),S=Ei(m,Gh),N=Object.keys(d).reduce(function(I,R){var A=d[R],E=A.orientation;return!A.mirror&&!A.hide?Ge(Ge({},I),{},Xt({},E,I[E]+A.width)):I},{left:x.left||0,right:x.right||0}),w=Object.keys(o).reduce(function(I,R){var A=o[R],E=A.orientation;return!A.mirror&&!A.hide?Ge(Ge({},I),{},Xt({},E,io(I,"".concat(E))+A.height)):I},{top:x.top||0,bottom:x.bottom||0}),T=Ge(Ge({},w),N),C=T.bottom;y&&(T.bottom+=y.props.height||Ef.defaultProps.height),S&&r&&(T=Cbe(T,a,n,r));var O=h-T.left-T.right,L=p-T.top-T.bottom;return Ge(Ge({brushBottom:C},T),{},{width:Math.max(O,0),height:Math.max(L,0)})},Mje=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},MX=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,x=function(T,C){var O=C.graphicalItems,L=C.stackGroups,I=C.offset,R=C.updateId,A=C.dataStartIndex,E=C.dataEndIndex,k=T.barSize,U=T.layout,P=T.barGap,$=T.barCategoryGap,B=T.maxBarSize,G=qU(U),K=G.numericAxisName,H=G.cateAxisName,ee=Oje(O),ae=[];return O.forEach(function(ce,fe){var Z=Xw(T.data,{graphicalItems:[ce],dataStartIndex:A,dataEndIndex:E}),ne=ce.type.defaultProps!==void 0?Ge(Ge({},ce.type.defaultProps),ce.props):ce.props,Y=ne.dataKey,de=ne.maxBarSize,ye=ne["".concat(K,"Id")],Ue=ne["".concat(H,"Id")],Xe={},Ye=d.reduce(function(vt,yt){var me=C["".concat(yt.axisType,"Map")],We=ne["".concat(yt.axisType,"Id")];me&&me[We]||yt.axisType==="zAxis"||b0();var mt=me[We];return Ge(Ge({},vt),{},Xt(Xt({},yt.axisType,mt),"".concat(yt.axisType,"Ticks"),nc(mt)))},Xe),_e=Ye[H],he=Ye["".concat(H,"Ticks")],Q=L&&L[ye]&&L[ye].hasStack&&zbe(ce,L[ye].stackGroups),X=oc(ce.type).indexOf("Bar")>=0,Se=Vb(_e,he),Ne=[],Ke=ee&&Abe({barSize:k,stackGroups:L,totalSize:Mje(Ye,H)});if(X){var at,Rt,Pe=fr(de)?B:de,lt=(at=(Rt=Vb(_e,he,!0))!==null&&Rt!==void 0?Rt:Pe)!==null&&at!==void 0?at:0;Ne=Ebe({barGap:P,barCategoryGap:$,bandSize:lt!==Se?lt:Se,sizeList:Ke[Ue],maxBarSize:Pe}),lt!==Se&&(Ne=Ne.map(function(vt){return Ge(Ge({},vt),{},{position:Ge(Ge({},vt.position),{},{offset:vt.position.offset-lt/2})})}))}var Nt=ce&&ce.type&&ce.type.getComposedData;Nt&&ae.push({props:Ge(Ge({},Nt(Ge(Ge({},Ye),{},{displayedData:Z,props:T,dataKey:Y,item:ce,bandSize:Se,barPosition:Ne,offset:I,stackedData:Q,layout:U,dataStartIndex:A,dataEndIndex:E}))),{},Xt(Xt(Xt({key:ce.key||"item-".concat(fe)},K,Ye[K]),H,Ye[H]),"animationId",R)),childIndex:Ofe(ce,T.children),item:ce})}),ae},y=function(T,C){var O=T.props,L=T.dataStartIndex,I=T.dataEndIndex,R=T.updateId;if(!rP({props:O}))return null;var A=O.children,E=O.layout,k=O.stackOffset,U=O.data,P=O.reverseStackOrder,$=qU(E),B=$.numericAxisName,G=$.cateAxisName,K=Di(A,n),H=Bbe(U,K,"".concat(B,"Id"),"".concat(G,"Id"),k,P),ee=d.reduce(function(ne,Y){var de="".concat(Y.axisType,"Map");return Ge(Ge({},ne),{},Xt({},de,kje(O,Ge(Ge({},Y),{},{graphicalItems:K,stackGroups:Y.axisType===B&&H,dataStartIndex:L,dataEndIndex:I}))))},{}),ae=Rje(Ge(Ge({},ee),{},{props:O,graphicalItems:K}),C==null?void 0:C.legendBBox);Object.keys(ee).forEach(function(ne){ee[ne]=p(O,ee[ne],ae,ne.replace("Map",""),r)});var ce=ee["".concat(G,"Map")],fe=Ije(ce),Z=x(O,Ge(Ge({},ee),{},{dataStartIndex:L,dataEndIndex:I,updateId:R,graphicalItems:K,stackGroups:H,offset:ae}));return Ge(Ge({formattedGraphicalItems:Z,graphicalItems:K,offset:ae,stackGroups:H},fe),ee)},S=(function(w){function T(C){var O,L,I;return fje(this,T),I=gje(this,T,[C]),Xt(I,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xt(I,"accessibilityManager",new Z6e),Xt(I,"handleLegendBBoxUpdate",function(R){if(R){var A=I.state,E=A.dataStartIndex,k=A.dataEndIndex,U=A.updateId;I.setState(Ge({legendBBox:R},y({props:I.props,dataStartIndex:E,dataEndIndex:k,updateId:U},Ge(Ge({},I.state),{},{legendBBox:R}))))}}),Xt(I,"handleReceiveSyncEvent",function(R,A,E){if(I.props.syncId===R){if(E===I.eventEmitterSymbol&&typeof I.props.syncMethod!="function")return;I.applySyncEvent(A)}}),Xt(I,"handleBrushChange",function(R){var A=R.startIndex,E=R.endIndex;if(A!==I.state.dataStartIndex||E!==I.state.dataEndIndex){var k=I.state.updateId;I.setState(function(){return Ge({dataStartIndex:A,dataEndIndex:E},y({props:I.props,dataStartIndex:A,dataEndIndex:E,updateId:k},I.state))}),I.triggerSyncEvent({dataStartIndex:A,dataEndIndex:E})}}),Xt(I,"handleMouseEnter",function(R){var A=I.getMouseInfo(R);if(A){var E=Ge(Ge({},A),{},{isTooltipActive:!0});I.setState(E),I.triggerSyncEvent(E);var k=I.props.onMouseEnter;rr(k)&&k(E,R)}}),Xt(I,"triggeredAfterMouseMove",function(R){var A=I.getMouseInfo(R),E=A?Ge(Ge({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};I.setState(E),I.triggerSyncEvent(E);var k=I.props.onMouseMove;rr(k)&&k(E,R)}),Xt(I,"handleItemMouseEnter",function(R){I.setState(function(){return{isTooltipActive:!0,activeItem:R,activePayload:R.tooltipPayload,activeCoordinate:R.tooltipPosition||{x:R.cx,y:R.cy}}})}),Xt(I,"handleItemMouseLeave",function(){I.setState(function(){return{isTooltipActive:!1}})}),Xt(I,"handleMouseMove",function(R){R.persist(),I.throttleTriggeredAfterMouseMove(R)}),Xt(I,"handleMouseLeave",function(R){I.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};I.setState(A),I.triggerSyncEvent(A);var E=I.props.onMouseLeave;rr(E)&&E(A,R)}),Xt(I,"handleOuterEvent",function(R){var A=Ife(R),E=io(I.props,"".concat(A));if(A&&rr(E)){var k,U;/.*touch.*/i.test(A)?U=I.getMouseInfo(R.changedTouches[0]):U=I.getMouseInfo(R),E((k=U)!==null&&k!==void 0?k:{},R)}}),Xt(I,"handleClick",function(R){var A=I.getMouseInfo(R);if(A){var E=Ge(Ge({},A),{},{isTooltipActive:!0});I.setState(E),I.triggerSyncEvent(E);var k=I.props.onClick;rr(k)&&k(E,R)}}),Xt(I,"handleMouseDown",function(R){var A=I.props.onMouseDown;if(rr(A)){var E=I.getMouseInfo(R);A(E,R)}}),Xt(I,"handleMouseUp",function(R){var A=I.props.onMouseUp;if(rr(A)){var E=I.getMouseInfo(R);A(E,R)}}),Xt(I,"handleTouchMove",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&I.throttleTriggeredAfterMouseMove(R.changedTouches[0])}),Xt(I,"handleTouchStart",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&I.handleMouseDown(R.changedTouches[0])}),Xt(I,"handleTouchEnd",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&I.handleMouseUp(R.changedTouches[0])}),Xt(I,"handleDoubleClick",function(R){var A=I.props.onDoubleClick;if(rr(A)){var E=I.getMouseInfo(R);A(E,R)}}),Xt(I,"handleContextMenu",function(R){var A=I.props.onContextMenu;if(rr(A)){var E=I.getMouseInfo(R);A(E,R)}}),Xt(I,"triggerSyncEvent",function(R){I.props.syncId!==void 0&&Jj.emit(Zj,I.props.syncId,R,I.eventEmitterSymbol)}),Xt(I,"applySyncEvent",function(R){var A=I.props,E=A.layout,k=A.syncMethod,U=I.state.updateId,P=R.dataStartIndex,$=R.dataEndIndex;if(R.dataStartIndex!==void 0||R.dataEndIndex!==void 0)I.setState(Ge({dataStartIndex:P,dataEndIndex:$},y({props:I.props,dataStartIndex:P,dataEndIndex:$,updateId:U},I.state)));else if(R.activeTooltipIndex!==void 0){var B=R.chartX,G=R.chartY,K=R.activeTooltipIndex,H=I.state,ee=H.offset,ae=H.tooltipTicks;if(!ee)return;if(typeof k=="function")K=k(ae,R);else if(k==="value"){K=-1;for(var ce=0;ce<ae.length;ce++)if(ae[ce].value===R.activeLabel){K=ce;break}}var fe=Ge(Ge({},ee),{},{x:ee.left,y:ee.top}),Z=Math.min(B,fe.x+fe.width),ne=Math.min(G,fe.y+fe.height),Y=ae[K]&&ae[K].value,de=BA(I.state,I.props.data,K),ye=ae[K]?{x:E==="horizontal"?ae[K].coordinate:Z,y:E==="horizontal"?ne:ae[K].coordinate}:OX;I.setState(Ge(Ge({},R),{},{activeLabel:Y,activeCoordinate:ye,activePayload:de,activeTooltipIndex:K}))}else I.setState(R)}),Xt(I,"renderCursor",function(R){var A,E=I.state,k=E.isTooltipActive,U=E.activeCoordinate,P=E.activePayload,$=E.offset,B=E.activeTooltipIndex,G=E.tooltipAxisBandSize,K=I.getTooltipEventType(),H=(A=R.props.active)!==null&&A!==void 0?A:k,ee=I.props.layout,ae=R.key||"_recharts-cursor";return se.createElement(ije,{key:ae,activeCoordinate:U,activePayload:P,activeTooltipIndex:B,chartName:r,element:R,isActive:H,layout:ee,offset:$,tooltipAxisBandSize:G,tooltipEventType:K})}),Xt(I,"renderPolarAxis",function(R,A,E){var k=io(R,"type.axisType"),U=io(I.state,"".concat(k,"Map")),P=R.type.defaultProps,$=P!==void 0?Ge(Ge({},P),R.props):R.props,B=U&&U[$["".concat(k,"Id")]];return _.cloneElement(R,Ge(Ge({},B),{},{className:vr(k,B.className),key:R.key||"".concat(A,"-").concat(E),ticks:nc(B,!0)}))}),Xt(I,"renderPolarGrid",function(R){var A=R.props,E=A.radialLines,k=A.polarAngles,U=A.polarRadius,P=I.state,$=P.radiusAxisMap,B=P.angleAxisMap,G=vu($),K=vu(B),H=K.cx,ee=K.cy,ae=K.innerRadius,ce=K.outerRadius;return _.cloneElement(R,{polarAngles:Array.isArray(k)?k:nc(K,!0).map(function(fe){return fe.coordinate}),polarRadius:Array.isArray(U)?U:nc(G,!0).map(function(fe){return fe.coordinate}),cx:H,cy:ee,innerRadius:ae,outerRadius:ce,key:R.key||"polar-grid",radialLines:E})}),Xt(I,"renderLegend",function(){var R=I.state.formattedGraphicalItems,A=I.props,E=A.children,k=A.width,U=A.height,P=I.props.margin||{},$=k-(P.left||0)-(P.right||0),B=uQ({children:E,formattedGraphicalItems:R,legendWidth:$,legendContent:h});if(!B)return null;var G=B.item,K=zU(B,oje);return _.cloneElement(G,Ge(Ge({},K),{},{chartWidth:k,chartHeight:U,margin:P,onBBoxUpdate:I.handleLegendBBoxUpdate}))}),Xt(I,"renderTooltip",function(){var R,A=I.props,E=A.children,k=A.accessibilityLayer,U=Ei(E,Ko);if(!U)return null;var P=I.state,$=P.isTooltipActive,B=P.activeCoordinate,G=P.activePayload,K=P.activeLabel,H=P.offset,ee=(R=U.props.active)!==null&&R!==void 0?R:$;return _.cloneElement(U,{viewBox:Ge(Ge({},H),{},{x:H.left,y:H.top}),active:ee,label:K,payload:ee?G:[],coordinate:B,accessibilityLayer:k})}),Xt(I,"renderBrush",function(R){var A=I.props,E=A.margin,k=A.data,U=I.state,P=U.offset,$=U.dataStartIndex,B=U.dataEndIndex,G=U.updateId;return _.cloneElement(R,{key:R.key||"_recharts-brush",onChange:Y1(I.handleBrushChange,R.props.onChange),data:k,x:xt(R.props.x)?R.props.x:P.left,y:xt(R.props.y)?R.props.y:P.top+P.height+P.brushBottom-(E.bottom||0),width:xt(R.props.width)?R.props.width:P.width,startIndex:$,endIndex:B,updateId:"brush-".concat(G)})}),Xt(I,"renderReferenceElement",function(R,A,E){if(!R)return null;var k=I,U=k.clipPathId,P=I.state,$=P.xAxisMap,B=P.yAxisMap,G=P.offset,K=R.type.defaultProps||{},H=R.props,ee=H.xAxisId,ae=ee===void 0?K.xAxisId:ee,ce=H.yAxisId,fe=ce===void 0?K.yAxisId:ce;return _.cloneElement(R,{key:R.key||"".concat(A,"-").concat(E),xAxis:$[ae],yAxis:B[fe],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:U})}),Xt(I,"renderActivePoints",function(R){var A=R.item,E=R.activePoint,k=R.basePoint,U=R.childIndex,P=R.isRange,$=[],B=A.props.key,G=A.item.type.defaultProps!==void 0?Ge(Ge({},A.item.type.defaultProps),A.item.props):A.item.props,K=G.activeDot,H=G.dataKey,ee=Ge(Ge({index:U,dataKey:H,cx:E.x,cy:E.y,r:4,fill:U7(A.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},qt(K,!1)),xb(K));return $.push(T.renderActiveDot(K,ee,"".concat(B,"-activePoint-").concat(U))),k?$.push(T.renderActiveDot(K,Ge(Ge({},ee),{},{cx:k.x,cy:k.y}),"".concat(B,"-basePoint-").concat(U))):P&&$.push(null),$}),Xt(I,"renderGraphicChild",function(R,A,E){var k=I.filterFormatItem(R,A,E);if(!k)return null;var U=I.getTooltipEventType(),P=I.state,$=P.isTooltipActive,B=P.tooltipAxis,G=P.activeTooltipIndex,K=P.activeLabel,H=I.props.children,ee=Ei(H,Ko),ae=k.props,ce=ae.points,fe=ae.isRange,Z=ae.baseLine,ne=k.item.type.defaultProps!==void 0?Ge(Ge({},k.item.type.defaultProps),k.item.props):k.item.props,Y=ne.activeDot,de=ne.hide,ye=ne.activeBar,Ue=ne.activeShape,Xe=!!(!de&&$&&ee&&(Y||ye||Ue)),Ye={};U!=="axis"&&ee&&ee.props.trigger==="click"?Ye={onClick:Y1(I.handleItemMouseEnter,R.props.onClick)}:U!=="axis"&&(Ye={onMouseLeave:Y1(I.handleItemMouseLeave,R.props.onMouseLeave),onMouseEnter:Y1(I.handleItemMouseEnter,R.props.onMouseEnter)});var _e=_.cloneElement(R,Ge(Ge({},k.props),Ye));function he(yt){return typeof B.dataKey=="function"?B.dataKey(yt.payload):null}if(Xe)if(G>=0){var Q,X;if(B.dataKey&&!B.allowDuplicatedCategory){var Se=typeof B.dataKey=="function"?he:"payload.".concat(B.dataKey.toString());Q=gb(ce,Se,K),X=fe&&Z&&gb(Z,Se,K)}else Q=ce==null?void 0:ce[G],X=fe&&Z&&Z[G];if(Ue||ye){var Ne=R.props.activeIndex!==void 0?R.props.activeIndex:G;return[_.cloneElement(R,Ge(Ge(Ge({},k.props),Ye),{},{activeIndex:Ne})),null,null]}if(!fr(Q))return[_e].concat($f(I.renderActivePoints({item:k,activePoint:Q,basePoint:X,childIndex:G,isRange:fe})))}else{var Ke,at=(Ke=I.getItemByXY(I.state.activeCoordinate))!==null&&Ke!==void 0?Ke:{graphicalItem:_e},Rt=at.graphicalItem,Pe=Rt.item,lt=Pe===void 0?R:Pe,Nt=Rt.childIndex,vt=Ge(Ge(Ge({},k.props),Ye),{},{activeIndex:Nt});return[_.cloneElement(lt,vt),null,null]}return fe?[_e,null,null]:[_e,null]}),Xt(I,"renderCustomized",function(R,A,E){return _.cloneElement(R,Ge(Ge({key:"recharts-customized-".concat(E)},I.props),I.state))}),Xt(I,"renderMap",{CartesianGrid:{handler:rv,once:!0},ReferenceArea:{handler:I.renderReferenceElement},ReferenceLine:{handler:rv},ReferenceDot:{handler:I.renderReferenceElement},XAxis:{handler:rv},YAxis:{handler:rv},Brush:{handler:I.renderBrush,once:!0},Bar:{handler:I.renderGraphicChild},Line:{handler:I.renderGraphicChild},Area:{handler:I.renderGraphicChild},Radar:{handler:I.renderGraphicChild},RadialBar:{handler:I.renderGraphicChild},Scatter:{handler:I.renderGraphicChild},Pie:{handler:I.renderGraphicChild},Funnel:{handler:I.renderGraphicChild},Tooltip:{handler:I.renderCursor,once:!0},PolarGrid:{handler:I.renderPolarGrid,once:!0},PolarAngleAxis:{handler:I.renderPolarAxis},PolarRadiusAxis:{handler:I.renderPolarAxis},Customized:{handler:I.renderCustomized}}),I.clipPathId="".concat((O=C.id)!==null&&O!==void 0?O:Bx("recharts"),"-clip"),I.throttleTriggeredAfterMouseMove=cK(I.triggeredAfterMouseMove,(L=C.throttleDelay)!==null&&L!==void 0?L:1e3/60),I.state={},I}return vje(T,w),mje(T,[{key:"componentDidMount",value:function(){var O,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var O=this.props,L=O.children,I=O.data,R=O.height,A=O.layout,E=Ei(L,Ko);if(E){var k=E.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,P=BA(this.state,I,k,U),$=this.state.tooltipTicks[k].coordinate,B=(this.state.offset.top+R)/2,G=A==="horizontal",K=G?{x:$,y:B}:{y:$,x:B},H=this.state.formattedGraphicalItems.find(function(ae){var ce=ae.item;return ce.type.name==="Scatter"});H&&(K=Ge(Ge({},K),H.props.points[k].tooltipPosition),P=H.props.points[k].tooltipPayload);var ee={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:U,activePayload:P,activeCoordinate:K};this.setState(ee),this.renderCursor(E),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(O,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==O.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==O.margin){var I,R;this.accessibilityManager.setDetails({offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(R=this.props.margin.top)!==null&&R!==void 0?R:0}})}return null}},{key:"componentDidUpdate",value:function(O){yT([Ei(O.children,Ko)],[Ei(this.props.children,Ko)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var O=Ei(this.props.children,Ko);if(O&&typeof O.props.shared=="boolean"){var L=O.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(O){if(!this.container)return null;var L=this.container,I=L.getBoundingClientRect(),R=yxe(I),A={chartX:Math.round(O.pageX-R.left),chartY:Math.round(O.pageY-R.top)},E=I.width/L.offsetWidth||1,k=this.inRange(A.chartX,A.chartY,E);if(!k)return null;var U=this.state,P=U.xAxisMap,$=U.yAxisMap,B=this.getTooltipEventType(),G=VU(this.state,this.props.data,this.props.layout,k);if(B!=="axis"&&P&&$){var K=vu(P).scale,H=vu($).scale,ee=K&&K.invert?K.invert(A.chartX):null,ae=H&&H.invert?H.invert(A.chartY):null;return Ge(Ge({},A),{},{xValue:ee,yValue:ae},G)}return G?Ge(Ge({},A),G):null}},{key:"inRange",value:function(O,L){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=this.props.layout,A=O/I,E=L/I;if(R==="horizontal"||R==="vertical"){var k=this.state.offset,U=A>=k.left&&A<=k.left+k.width&&E>=k.top&&E<=k.top+k.height;return U?{x:A,y:E}:null}var P=this.state,$=P.angleAxisMap,B=P.radiusAxisMap;if($&&B){var G=vu($);return H$({x:A,y:E},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var O=this.props.children,L=this.getTooltipEventType(),I=Ei(O,Ko),R={};I&&L==="axis"&&(I.props.trigger==="click"?R={onClick:this.handleClick}:R={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=xb(this.props,this.handleOuterEvent);return Ge(Ge({},A),R)}},{key:"addListener",value:function(){Jj.on(Zj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Jj.removeListener(Zj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(O,L,I){for(var R=this.state.formattedGraphicalItems,A=0,E=R.length;A<E;A++){var k=R[A];if(k.item===O||k.props.key===O.key||L===oc(k.item.type)&&I===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var O=this.clipPathId,L=this.state.offset,I=L.left,R=L.top,A=L.height,E=L.width;return se.createElement("defs",null,se.createElement("clipPath",{id:O},se.createElement("rect",{x:I,y:R,height:A,width:E})))}},{key:"getXScales",value:function(){var O=this.state.xAxisMap;return O?Object.entries(O).reduce(function(L,I){var R=$U(I,2),A=R[0],E=R[1];return Ge(Ge({},L),{},Xt({},A,E.scale))},{}):null}},{key:"getYScales",value:function(){var O=this.state.yAxisMap;return O?Object.entries(O).reduce(function(L,I){var R=$U(I,2),A=R[0],E=R[1];return Ge(Ge({},L),{},Xt({},A,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(O){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[O])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(O){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[O])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(O){var L=this.state,I=L.formattedGraphicalItems,R=L.activeItem;if(I&&I.length)for(var A=0,E=I.length;A<E;A++){var k=I[A],U=k.props,P=k.item,$=P.type.defaultProps!==void 0?Ge(Ge({},P.type.defaultProps),P.props):P.props,B=oc(P.type);if(B==="Bar"){var G=(U.data||[]).find(function(ae){return $4e(O,ae)});if(G)return{graphicalItem:k,payload:G}}else if(B==="RadialBar"){var K=(U.data||[]).find(function(ae){return H$(O,ae)});if(K)return{graphicalItem:k,payload:K}}else if(zw(k,R)||Uw(k,R)||Yg(k,R)){var H=y3e({graphicalItem:k,activeTooltipItem:R,itemData:$.data}),ee=$.activeIndex===void 0?H:$.activeIndex;return{graphicalItem:Ge(Ge({},k),{},{childIndex:ee}),payload:Yg(k,R)?$.data[H]:k.props.data[H]}}}return null}},{key:"render",value:function(){var O=this;if(!rP(this))return null;var L=this.props,I=L.children,R=L.className,A=L.width,E=L.height,k=L.style,U=L.compact,P=L.title,$=L.desc,B=zU(L,lje),G=qt(B,!1);if(U)return se.createElement(wU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(bT,Dh({},G,{width:A,height:E,title:P,desc:$}),this.renderClipPath(),aP(I,this.renderMap)));if(this.props.accessibilityLayer){var K,H;G.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,G.role=(H=this.props.role)!==null&&H!==void 0?H:"application",G.onKeyDown=function(ae){O.accessibilityManager.keyboardEvent(ae)},G.onFocus=function(){O.accessibilityManager.focus()}}var ee=this.parseEventsOfWrapper();return se.createElement(wU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",Dh({className:vr("recharts-wrapper",R),style:Ge({position:"relative",cursor:"default",width:A,height:E},k)},ee,{ref:function(ce){O.container=ce}}),se.createElement(bT,Dh({},G,{width:A,height:E,title:P,desc:$,style:_je}),this.renderClipPath(),aP(I,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(_.Component);Xt(S,"displayName",r),Xt(S,"defaultProps",Ge({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Xt(S,"getDerivedStateFromProps",function(w,T){var C=w.dataKey,O=w.data,L=w.children,I=w.width,R=w.height,A=w.layout,E=w.stackOffset,k=w.margin,U=T.dataStartIndex,P=T.dataEndIndex;if(T.updateId===void 0){var $=FU(w);return Ge(Ge(Ge({},$),{},{updateId:0},y(Ge(Ge({props:w},$),{},{updateId:0}),T)),{},{prevDataKey:C,prevData:O,prevWidth:I,prevHeight:R,prevLayout:A,prevStackOffset:E,prevMargin:k,prevChildren:L})}if(C!==T.prevDataKey||O!==T.prevData||I!==T.prevWidth||R!==T.prevHeight||A!==T.prevLayout||E!==T.prevStackOffset||!Hh(k,T.prevMargin)){var B=FU(w),G={chartX:T.chartX,chartY:T.chartY,isTooltipActive:T.isTooltipActive},K=Ge(Ge({},VU(T,O,A)),{},{updateId:T.updateId+1}),H=Ge(Ge(Ge({},B),G),K);return Ge(Ge(Ge({},H),y(Ge({props:w},H),T)),{},{prevDataKey:C,prevData:O,prevWidth:I,prevHeight:R,prevLayout:A,prevStackOffset:E,prevMargin:k,prevChildren:L})}if(!yT(L,T.prevChildren)){var ee,ae,ce,fe,Z=Ei(L,Ef),ne=Z&&(ee=(ae=Z.props)===null||ae===void 0?void 0:ae.startIndex)!==null&&ee!==void 0?ee:U,Y=Z&&(ce=(fe=Z.props)===null||fe===void 0?void 0:fe.endIndex)!==null&&ce!==void 0?ce:P,de=ne!==U||Y!==P,ye=!fr(O),Ue=ye&&!de?T.updateId:T.updateId+1;return Ge(Ge({updateId:Ue},y(Ge(Ge({props:w},T),{},{updateId:Ue,dataStartIndex:ne,dataEndIndex:Y}),T)),{},{prevChildren:L,dataStartIndex:ne,dataEndIndex:Y})}return null}),Xt(S,"renderActiveDot",function(w,T,C){var O;return _.isValidElement(w)?O=_.cloneElement(w,T):rr(w)?O=w(T):O=se.createElement(Lw,T),se.createElement(Yr,{className:"recharts-active-dot",key:C},O)});var N=_.forwardRef(function(T,C){return se.createElement(S,Dh({},T,{ref:C}))});return N.displayName=S.displayName,N},Dje=MX({chartName:"RadarChart",GraphicalChild:Kx,axisComponents:[{axisType:"angleAxis",AxisComp:Wx},{axisType:"radiusAxis",AxisComp:Gx}],formatAxisMap:Ybe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Pje=MX({chartName:"ScatterChart",GraphicalChild:Xx,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Kw},{axisType:"yAxis",AxisComp:Qw},{axisType:"zAxis",AxisComp:Ww}],formatAxisMap:ESe});const Yw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sp(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function J7(t){return"nodeType"in t}function Gs(t){var e,r;return t?sp(t)?t:J7(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function Z7(t){const{Document:e}=Gs(t);return t instanceof e}function Yx(t){return sp(t)?!1:t instanceof Gs(t).HTMLElement}function DX(t){return t instanceof Gs(t).SVGElement}function ip(t){return t?sp(t)?t.document:J7(t)?Z7(t)?t:Yx(t)||DX(t)?t.ownerDocument:document:document:document}const Sc=Yw?_.useLayoutEffect:_.useEffect;function Jw(t){const e=_.useRef(t);return Sc(()=>{e.current=t}),_.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function Lje(){const t=_.useRef(null),e=_.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=_.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function ax(t,e){e===void 0&&(e=[t]);const r=_.useRef(t);return Sc(()=>{r.current!==t&&(r.current=t)},e),r}function Jx(t,e){const r=_.useRef();return _.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function x2(t){const e=Jw(t),r=_.useRef(null),n=_.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function y2(t){const e=_.useRef();return _.useEffect(()=>{e.current=t},[t]),e.current}let t_={};function Zw(t,e){return _.useMemo(()=>{if(e)return e;const r=t_[t]==null?0:t_[t]+1;return t_[t]=r,t+"-"+r},[t,e])}function PX(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const c=Object.entries(o);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const Qh=PX(1),v2=PX(-1);function Bje(t){return"clientX"in t&&"clientY"in t}function eC(t){if(!t)return!1;const{KeyboardEvent:e}=Gs(t.target);return e&&t instanceof e}function $je(t){if(!t)return!1;const{TouchEvent:e}=Gs(t.target);return e&&t instanceof e}function sx(t){if($je(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return Bje(t)?{x:t.clientX,y:t.clientY}:null}const ix=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[ix.Translate.toString(t),ix.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),HU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function zje(t){return t.matches(HU)?t:t.querySelector(HU)}const Uje={display:"none"};function Vje(t){let{id:e,value:r}=t;return se.createElement("div",{id:e,style:Uje},r)}function Fje(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return se.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function qje(){const[t,e]=_.useState("");return{announce:_.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const LX=_.createContext(null);function Hje(t){const e=_.useContext(LX);_.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Gje(){const[t]=_.useState(()=>new Set),e=_.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[_.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[t]),e]}const Wje={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Kje={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Qje(t){let{announcements:e=Kje,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=Wje}=t;const{announce:i,announcement:o}=qje(),c=Zw("DndLiveRegion"),[d,h]=_.useState(!1);if(_.useEffect(()=>{h(!0)},[]),Hje(_.useMemo(()=>({onDragStart(m){let{active:x}=m;i(e.onDragStart({active:x}))},onDragMove(m){let{active:x,over:y}=m;e.onDragMove&&i(e.onDragMove({active:x,over:y}))},onDragOver(m){let{active:x,over:y}=m;i(e.onDragOver({active:x,over:y}))},onDragEnd(m){let{active:x,over:y}=m;i(e.onDragEnd({active:x,over:y}))},onDragCancel(m){let{active:x,over:y}=m;i(e.onDragCancel({active:x,over:y}))}}),[i,e])),!d)return null;const p=se.createElement(se.Fragment,null,se.createElement(Vje,{id:n,value:a.draggable}),se.createElement(Fje,{id:c,announcement:o}));return r?wu.createPortal(p,r):p}var qa;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(qa||(qa={}));function b2(){}function GU(t,e){return _.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Xje(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return _.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Mo=Object.freeze({x:0,y:0});function Yje(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Jje(t,e){const r=sx(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function Zje(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function e_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function t_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function WU(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const r_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=WU(e,e.left,e.top),i=[];for(const o of n){const{id:c}=o,d=r.get(c);if(d){const h=Yje(WU(d),a);i.push({id:c,data:{droppableContainer:o,value:h}})}}return i.sort(Zje)};function n_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=o*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const a_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,c=r.get(o);if(c){const d=n_e(c,e);d>0&&a.push({id:o,data:{droppableContainer:i,value:d}})}}return a.sort(e_e)};function s_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function BX(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Mo}function i_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const o_e=i_e(1);function $X(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function l_e(t,e,r){const n=$X(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:c}=n,d=t.left-o-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const c_e={ignoreTransform:!1};function Zx(t,e){e===void 0&&(e=c_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Gs(t).getComputedStyle(t);h&&(r=l_e(r,h,p))}const{top:n,left:a,width:i,height:o,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:o,bottom:c,right:d}}function KU(t){return Zx(t,{ignoreTransform:!0})}function u_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function d_e(t,e){return e===void 0&&(e=Gs(t).getComputedStyle(t)),e.position==="fixed"}function h_e(t,e){e===void 0&&(e=Gs(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function tC(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(Z7(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Yx(a)||DX(a)||r.includes(a))return r;const i=Gs(t).getComputedStyle(a);return a!==t&&h_e(a,i)&&r.push(a),d_e(a,i)?r:n(a.parentNode)}return t?n(t):r}function zX(t){const[e]=tC(t,1);return e??null}function r_(t){return!Yw||!t?null:sp(t)?t:J7(t)?Z7(t)||t===ip(t).scrollingElement?window:Yx(t)?t:null:null}function UX(t){return sp(t)?t.scrollX:t.scrollLeft}function VX(t){return sp(t)?t.scrollY:t.scrollTop}function $A(t){return{x:UX(t),y:VX(t)}}var ss;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ss||(ss={}));function FX(t){return!Yw||!t?!1:t===document.scrollingElement}function qX(t){const e={x:0,y:0},r=FX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const f_e={x:.2,y:.2};function p_e(t,e,r,n,a){let{top:i,left:o,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=f_e);const{isTop:h,isBottom:p,isLeft:m,isRight:x}=qX(t),y={x:0,y:0},S={x:0,y:0},N={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+N.height?(y.y=ss.Backward,S.y=n*Math.abs((e.top+N.height-i)/N.height)):!p&&d>=e.bottom-N.height&&(y.y=ss.Forward,S.y=n*Math.abs((e.bottom-N.height-d)/N.height)),!x&&c>=e.right-N.width?(y.x=ss.Forward,S.x=n*Math.abs((e.right-N.width-c)/N.width)):!m&&o<=e.left+N.width&&(y.x=ss.Backward,S.x=n*Math.abs((e.left+N.width-o)/N.width)),{direction:y,speed:S}}function m_e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function HX(t){return t.reduce((e,r)=>Qh(e,$A(r)),Mo)}function g_e(t){return t.reduce((e,r)=>e+UX(r),0)}function x_e(t){return t.reduce((e,r)=>e+VX(r),0)}function GX(t,e){if(e===void 0&&(e=Zx),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);zX(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const y_e=[["x",["left","right"],g_e],["y",["top","bottom"],x_e]];class rC{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=tC(r),a=HX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,c]of y_e)for(const d of o)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Wm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function v_e(t){const{EventTarget:e}=Gs(t);return t instanceof e?t:ip(t)}function n_(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var to;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(to||(to={}));function QU(t){t.preventDefault()}function b_e(t){t.stopPropagation()}var On;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(On||(On={}));const WX={start:[On.Space,On.Enter],cancel:[On.Esc],end:[On.Space,On.Enter,On.Tab]},w_e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case On.Right:return{...r,x:r.x+25};case On.Left:return{...r,x:r.x-25};case On.Down:return{...r,y:r.y+25};case On.Up:return{...r,y:r.y-25}}};class KX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Wm(ip(r)),this.windowListeners=new Wm(Gs(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(to.Resize,this.handleCancel),this.windowListeners.add(to.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(to.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&GX(n),r(Mo)}handleKeyDown(e){if(eC(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=WX,coordinateGetter:o=w_e,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:Mo;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:r,context:n.current,currentCoordinates:p});if(m){const x=v2(m,p),y={x:0,y:0},{scrollableAncestors:S}=n.current;for(const N of S){const w=e.code,{isTop:T,isRight:C,isLeft:O,isBottom:L,maxScroll:I,minScroll:R}=qX(N),A=m_e(N),E={x:Math.min(w===On.Right?A.right-A.width/2:A.right,Math.max(w===On.Right?A.left:A.left+A.width/2,m.x)),y:Math.min(w===On.Down?A.bottom-A.height/2:A.bottom,Math.max(w===On.Down?A.top:A.top+A.height/2,m.y))},k=w===On.Right&&!C||w===On.Left&&!O,U=w===On.Down&&!L||w===On.Up&&!T;if(k&&E.x!==m.x){const P=N.scrollLeft+x.x,$=w===On.Right&&P<=I.x||w===On.Left&&P>=R.x;if($&&!x.y){N.scrollTo({left:P,behavior:c});return}$?y.x=N.scrollLeft-P:y.x=w===On.Right?N.scrollLeft-I.x:N.scrollLeft-R.x,y.x&&N.scrollBy({left:-y.x,behavior:c});break}else if(U&&E.y!==m.y){const P=N.scrollTop+x.y,$=w===On.Down&&P<=I.y||w===On.Up&&P>=R.y;if($&&!x.x){N.scrollTo({top:P,behavior:c});return}$?y.y=N.scrollTop-P:y.y=w===On.Down?N.scrollTop-I.y:N.scrollTop-R.y,y.y&&N.scrollBy({top:-y.y,behavior:c});break}}this.handleMove(e,Qh(v2(m,this.referenceCoordinates),y))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=WX,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function XU(t){return!!(t&&"distance"in t)}function YU(t){return!!(t&&"delay"in t)}class nC{constructor(e,r,n){var a;n===void 0&&(n=v_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=ip(o),this.documentListeners=new Wm(this.document),this.listeners=new Wm(n),this.windowListeners=new Wm(Gs(o)),this.initialCoordinates=(a=sx(i))!=null?a:Mo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(to.Resize,this.handleCancel),this.windowListeners.add(to.DragStart,QU),this.windowListeners.add(to.VisibilityChange,this.handleCancel),this.windowListeners.add(to.ContextMenu,QU),this.documentListeners.add(to.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(YU(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(XU(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(to.Click,b_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(to.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=sx(e))!=null?r:Mo,h=v2(a,d);if(!n&&c){if(XU(c)){if(c.tolerance!=null&&n_(h,c.tolerance))return this.handleCancel();if(n_(h,c.distance))return this.handleStart()}if(YU(c)&&n_(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===On.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const S_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class aC extends nC{constructor(e){const{event:r}=e,n=ip(r.target);super(e,S_e,n)}}aC.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const N_e={move:{name:"mousemove"},end:{name:"mouseup"}};var zA;(function(t){t[t.RightClick=2]="RightClick"})(zA||(zA={}));class j_e extends nC{constructor(e){super(e,N_e,ip(e.event.target))}}j_e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===zA.RightClick?!1:(n==null||n({event:r}),!0)}}];const a_={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class QX extends nC{constructor(e){super(e,a_)}static setup(){return window.addEventListener(a_.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(a_.move.name,e)};function e(){}}}QX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Km;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Km||(Km={}));var w2;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(w2||(w2={}));function __e(t){let{acceleration:e,activator:r=Km.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:c=w2.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:x}=t;const y=A_e({delta:m,disabled:!i}),[S,N]=Lje(),w=_.useRef({x:0,y:0}),T=_.useRef({x:0,y:0}),C=_.useMemo(()=>{switch(r){case Km.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Km.DraggableRect:return a}},[r,a,d]),O=_.useRef(null),L=_.useCallback(()=>{const R=O.current;if(!R)return;const A=w.current.x*T.current.x,E=w.current.y*T.current.y;R.scrollBy(A,E)},[]),I=_.useMemo(()=>c===w2.TreeOrder?[...h].reverse():h,[c,h]);_.useEffect(()=>{if(!i||!h.length||!C){N();return}for(const R of I){if((n==null?void 0:n(R))===!1)continue;const A=h.indexOf(R),E=p[A];if(!E)continue;const{direction:k,speed:U}=p_e(R,E,C,e,x);for(const P of["x","y"])y[P][k[P]]||(U[P]=0,k[P]=0);if(U.x>0||U.y>0){N(),O.current=R,S(L,o),w.current=U,T.current=k;return}}w.current={x:0,y:0},T.current={x:0,y:0},N()},[e,L,n,N,i,o,JSON.stringify(C),JSON.stringify(y),S,h,I,p,JSON.stringify(x)])}const T_e={x:{[ss.Backward]:!1,[ss.Forward]:!1},y:{[ss.Backward]:!1,[ss.Forward]:!1}};function A_e(t){let{delta:e,disabled:r}=t;const n=y2(e);return Jx(a=>{if(r||!n||!a)return T_e;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[ss.Backward]:a.x[ss.Backward]||i.x===-1,[ss.Forward]:a.x[ss.Forward]||i.x===1},y:{[ss.Backward]:a.y[ss.Backward]||i.y===-1,[ss.Forward]:a.y[ss.Forward]||i.y===1}}},[r,e,n])}function E_e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return Jx(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function C_e(t,e){return _.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var ox;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ox||(ox={}));var UA;(function(t){t.Optimized="optimized"})(UA||(UA={}));const JU=new Map;function k_e(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=_.useState(null),{frequency:c,measure:d,strategy:h}=a,p=_.useRef(t),m=w(),x=ax(m),y=_.useCallback(function(T){T===void 0&&(T=[]),!x.current&&o(C=>C===null?T:C.concat(T.filter(O=>!C.includes(O))))},[x]),S=_.useRef(null),N=Jx(T=>{if(m&&!r)return JU;if(!T||T===JU||p.current!==t||i!=null){const C=new Map;for(let O of t){if(!O)continue;if(i&&i.length>0&&!i.includes(O.id)&&O.rect.current){C.set(O.id,O.rect.current);continue}const L=O.node.current,I=L?new rC(d(L),L):null;O.rect.current=I,I&&C.set(O.id,I)}return C}return T},[t,i,r,m,d]);return _.useEffect(()=>{p.current=t},[t]),_.useEffect(()=>{m||y()},[r,m]),_.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),_.useEffect(()=>{m||typeof c!="number"||S.current!==null||(S.current=setTimeout(()=>{y(),S.current=null},c))},[c,m,y,...n]),{droppableRects:N,measureDroppableContainers:y,measuringScheduled:i!=null};function w(){switch(h){case ox.Always:return!1;case ox.BeforeDragging:return r;default:return!r}}}function sC(t,e){return Jx(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function I_e(t,e){return sC(t,e)}function O_e(t){let{callback:e,disabled:r}=t;const n=Jw(e),a=_.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return _.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function e4(t){let{callback:e,disabled:r}=t;const n=Jw(e),a=_.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return _.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function R_e(t){return new rC(Zx(t),t)}function ZU(t,e,r){e===void 0&&(e=R_e);const[n,a]=_.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const o=O_e({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=e4({callback:i});return Sc(()=>{i(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),n}function M_e(t){const e=sC(t);return BX(t,e)}const eV=[];function D_e(t){const e=_.useRef(t),r=Jx(n=>t?n&&n!==eV&&t&&e.current&&t.parentNode===e.current.parentNode?n:tC(t):eV,[t]);return _.useEffect(()=>{e.current=t},[t]),r}function P_e(t){const[e,r]=_.useState(null),n=_.useRef(t),a=_.useCallback(i=>{const o=r_(i.target);o&&r(c=>c?(c.set(o,$A(o)),new Map(c)):null)},[]);return _.useEffect(()=>{const i=n.current;if(t!==i){o(i);const c=t.map(d=>{const h=r_(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,$A(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(i)};function o(c){c.forEach(d=>{const h=r_(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),_.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Qh(i,o),Mo):HX(t):Mo,[t,e])}function tV(t,e){e===void 0&&(e=[]);const r=_.useRef(null);return _.useEffect(()=>{r.current=null},e),_.useEffect(()=>{const n=t!==Mo;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?v2(t,r.current):Mo}function L_e(t){_.useEffect(()=>{if(!Yw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function B_e(t,e){return _.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function XX(t){return _.useMemo(()=>t?u_e(t):null,[t])}const rV=[];function $_e(t,e){e===void 0&&(e=Zx);const[r]=t,n=XX(r?Gs(r):null),[a,i]=_.useState(rV);function o(){i(()=>t.length?t.map(d=>FX(d)?n:new rC(e(d),d)):rV)}const c=e4({callback:o});return Sc(()=>{c==null||c.disconnect(),o(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function YX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Yx(e)?e:t}function z_e(t){let{measure:e}=t;const[r,n]=_.useState(null),a=_.useCallback(h=>{for(const{target:p}of h)if(Yx(p)){n(m=>{const x=e(p);return m?{...m,width:x.width,height:x.height}:x});break}},[e]),i=e4({callback:a}),o=_.useCallback(h=>{const p=YX(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=x2(o);return _.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const U_e=[{sensor:aC,options:{}},{sensor:KX,options:{}}],V_e={current:{}},Ev={draggable:{measure:KU},droppable:{measure:KU,strategy:ox.WhileDragging,frequency:UA.Optimized},dragOverlay:{measure:Zx}};class Qm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const F_e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Qm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:b2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ev,measureDroppableContainers:b2,windowRect:null,measuringScheduled:!1},JX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:b2,draggableNodes:new Map,over:null,measureDroppableContainers:b2},ey=_.createContext(JX),ZX=_.createContext(F_e);function q_e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Qm}}}function H_e(t,e){switch(e.type){case qa.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case qa.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case qa.DragEnd:case qa.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case qa.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Qm(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case qa.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new Qm(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case qa.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Qm(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function G_e(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=_.useContext(ey),i=y2(n),o=y2(r==null?void 0:r.id);return _.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!eC(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=zje(p);if(m){m.focus();break}}})}},[n,e,a,o,i]),null}function eY(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function W_e(t){return _.useMemo(()=>({draggable:{...Ev.draggable,...t==null?void 0:t.draggable},droppable:{...Ev.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Ev.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function K_e(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=_.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Sc(()=>{if(!o&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=BX(p,n);if(o||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=zX(h);x&&x.scrollBy({top:m.y,left:m.x})}},[e,o,c,n,r])}const t4=_.createContext({...Mo,scaleX:1,scaleY:1});var hu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(hu||(hu={}));const Q_e=_.memo(function(e){var r,n,a,i;let{id:o,accessibility:c,autoScroll:d=!0,children:h,sensors:p=U_e,collisionDetection:m=a_e,measuring:x,modifiers:y,...S}=e;const N=_.useReducer(H_e,void 0,q_e),[w,T]=N,[C,O]=Gje(),[L,I]=_.useState(hu.Uninitialized),R=L===hu.Initialized,{draggable:{active:A,nodes:E,translate:k},droppable:{containers:U}}=w,P=A!=null?E.get(A):null,$=_.useRef({initial:null,translated:null}),B=_.useMemo(()=>{var Wt;return A!=null?{id:A,data:(Wt=P==null?void 0:P.data)!=null?Wt:V_e,rect:$}:null},[A,P]),G=_.useRef(null),[K,H]=_.useState(null),[ee,ae]=_.useState(null),ce=ax(S,Object.values(S)),fe=Zw("DndDescribedBy",o),Z=_.useMemo(()=>U.getEnabled(),[U]),ne=W_e(x),{droppableRects:Y,measureDroppableContainers:de,measuringScheduled:ye}=k_e(Z,{dragging:R,dependencies:[k.x,k.y],config:ne.droppable}),Ue=E_e(E,A),Xe=_.useMemo(()=>ee?sx(ee):null,[ee]),Ye=_r(),_e=I_e(Ue,ne.draggable.measure);K_e({activeNode:A!=null?E.get(A):null,config:Ye.layoutShiftCompensation,initialRect:_e,measure:ne.draggable.measure});const he=ZU(Ue,ne.draggable.measure,_e),Q=ZU(Ue?Ue.parentElement:null),X=_.useRef({activatorEvent:null,active:null,activeNode:Ue,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=U.getNodeFor((r=X.current.over)==null?void 0:r.id),Ne=z_e({measure:ne.dragOverlay.measure}),Ke=(n=Ne.nodeRef.current)!=null?n:Ue,at=R?(a=Ne.rect)!=null?a:he:null,Rt=!!(Ne.nodeRef.current&&Ne.rect),Pe=M_e(Rt?null:he),lt=XX(Ke?Gs(Ke):null),Nt=D_e(R?Se??Ue:null),vt=$_e(Nt),yt=eY(y,{transform:{x:k.x-Pe.x,y:k.y-Pe.y,scaleX:1,scaleY:1},activatorEvent:ee,active:B,activeNodeRect:he,containerNodeRect:Q,draggingNodeRect:at,over:X.current.over,overlayNodeRect:Ne.rect,scrollableAncestors:Nt,scrollableAncestorRects:vt,windowRect:lt}),me=Xe?Qh(Xe,k):null,We=P_e(Nt),mt=tV(We),Ze=tV(We,[he]),et=Qh(yt,mt),Et=at?o_e(at,yt):null,wt=B&&Et?m({active:B,collisionRect:Et,droppableRects:Y,droppableContainers:Z,pointerCoordinates:me}):null,pr=t_e(wt,"id"),[be,nt]=_.useState(null),jt=Rt?yt:Qh(yt,Ze),Pt=s_e(jt,(i=be==null?void 0:be.rect)!=null?i:null,he),Bt=_.useRef(null),tt=_.useCallback((Wt,Vt)=>{let{sensor:_t,options:Gr}=Vt;if(G.current==null)return;const dn=E.get(G.current);if(!dn)return;const en=Wt.nativeEvent,Wr=new _t({active:G.current,activeNode:dn,event:en,options:Gr,context:X,onAbort(hr){if(!E.get(hr))return;const{onDragAbort:vn}=ce.current,Dn={id:hr};vn==null||vn(Dn),C({type:"onDragAbort",event:Dn})},onPending(hr,Sa,vn,Dn){if(!E.get(hr))return;const{onDragPending:Or}=ce.current,bn={id:hr,constraint:Sa,initialCoordinates:vn,offset:Dn};Or==null||Or(bn),C({type:"onDragPending",event:bn})},onStart(hr){const Sa=G.current;if(Sa==null)return;const vn=E.get(Sa);if(!vn)return;const{onDragStart:Dn}=ce.current,cs={activatorEvent:en,active:{id:Sa,data:vn.data,rect:$}};wu.unstable_batchedUpdates(()=>{Dn==null||Dn(cs),I(hu.Initializing),T({type:qa.DragStart,initialCoordinates:hr,active:Sa}),C({type:"onDragStart",event:cs}),H(Bt.current),ae(en)})},onMove(hr){T({type:qa.DragMove,coordinates:hr})},onEnd:yn(qa.DragEnd),onCancel:yn(qa.DragCancel)});Bt.current=Wr;function yn(hr){return async function(){const{active:vn,collisions:Dn,over:cs,scrollAdjustedTranslate:Or}=X.current;let bn=null;if(vn&&Or){const{cancelDrop:us}=ce.current;bn={activatorEvent:en,active:vn,collisions:Dn,delta:Or,over:cs},hr===qa.DragEnd&&typeof us=="function"&&await Promise.resolve(us(bn))&&(hr=qa.DragCancel)}G.current=null,wu.unstable_batchedUpdates(()=>{T({type:hr}),I(hu.Uninitialized),nt(null),H(null),ae(null),Bt.current=null;const us=hr===qa.DragEnd?"onDragEnd":"onDragCancel";if(bn){const Zn=ce.current[us];Zn==null||Zn(bn),C({type:us,event:bn})}})}}},[E]),ar=_.useCallback((Wt,Vt)=>(_t,Gr)=>{const dn=_t.nativeEvent,en=E.get(Gr);if(G.current!==null||!en||dn.dndKit||dn.defaultPrevented)return;const Wr={active:en};Wt(_t,Vt.options,Wr)===!0&&(dn.dndKit={capturedBy:Vt.sensor},G.current=Gr,tt(_t,Vt))},[E,tt]),Ar=C_e(p,ar);L_e(p),Sc(()=>{he&&L===hu.Initializing&&I(hu.Initialized)},[he,L]),_.useEffect(()=>{const{onDragMove:Wt}=ce.current,{active:Vt,activatorEvent:_t,collisions:Gr,over:dn}=X.current;if(!Vt||!_t)return;const en={active:Vt,activatorEvent:_t,collisions:Gr,delta:{x:et.x,y:et.y},over:dn};wu.unstable_batchedUpdates(()=>{Wt==null||Wt(en),C({type:"onDragMove",event:en})})},[et.x,et.y]),_.useEffect(()=>{const{active:Wt,activatorEvent:Vt,collisions:_t,droppableContainers:Gr,scrollAdjustedTranslate:dn}=X.current;if(!Wt||G.current==null||!Vt||!dn)return;const{onDragOver:en}=ce.current,Wr=Gr.get(pr),yn=Wr&&Wr.rect.current?{id:Wr.id,rect:Wr.rect.current,data:Wr.data,disabled:Wr.disabled}:null,hr={active:Wt,activatorEvent:Vt,collisions:_t,delta:{x:dn.x,y:dn.y},over:yn};wu.unstable_batchedUpdates(()=>{nt(yn),en==null||en(hr),C({type:"onDragOver",event:hr})})},[pr]),Sc(()=>{X.current={activatorEvent:ee,active:B,activeNode:Ue,collisionRect:Et,collisions:wt,droppableRects:Y,draggableNodes:E,draggingNode:Ke,draggingNodeRect:at,droppableContainers:U,over:be,scrollableAncestors:Nt,scrollAdjustedTranslate:et},$.current={initial:at,translated:Et}},[B,Ue,wt,Et,E,Ke,at,Y,U,be,Nt,et]),__e({...Ye,delta:k,draggingRect:Et,pointerCoordinates:me,scrollableAncestors:Nt,scrollableAncestorRects:vt});const Hr=_.useMemo(()=>({active:B,activeNode:Ue,activeNodeRect:he,activatorEvent:ee,collisions:wt,containerNodeRect:Q,dragOverlay:Ne,draggableNodes:E,droppableContainers:U,droppableRects:Y,over:be,measureDroppableContainers:de,scrollableAncestors:Nt,scrollableAncestorRects:vt,measuringConfiguration:ne,measuringScheduled:ye,windowRect:lt}),[B,Ue,he,ee,wt,Q,Ne,E,U,Y,be,de,Nt,vt,ne,ye,lt]),xn=_.useMemo(()=>({activatorEvent:ee,activators:Ar,active:B,activeNodeRect:he,ariaDescribedById:{draggable:fe},dispatch:T,draggableNodes:E,over:be,measureDroppableContainers:de}),[ee,Ar,B,he,T,fe,E,be,de]);return se.createElement(LX.Provider,{value:O},se.createElement(ey.Provider,{value:xn},se.createElement(ZX.Provider,{value:Hr},se.createElement(t4.Provider,{value:Pt},h)),se.createElement(G_e,{disabled:(c==null?void 0:c.restoreFocus)===!1})),se.createElement(Qje,{...c,hiddenTextDescribedById:fe}));function _r(){const Wt=(K==null?void 0:K.autoScrollEnabled)===!1,Vt=typeof d=="object"?d.enabled===!1:d===!1,_t=R&&!Wt&&!Vt;return typeof d=="object"?{...d,enabled:_t}:{enabled:_t}}}),X_e=_.createContext(null),nV="button",Y_e="Draggable";function tY(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Zw(Y_e),{activators:o,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:x}=_.useContext(ey),{role:y=nV,roleDescription:S="draggable",tabIndex:N=0}=a??{},w=(d==null?void 0:d.id)===e,T=_.useContext(w?t4:X_e),[C,O]=x2(),[L,I]=x2(),R=B_e(o,e),A=ax(r);Sc(()=>(m.set(e,{id:e,key:i,node:C,activatorNode:L,data:A}),()=>{const k=m.get(e);k&&k.key===i&&m.delete(e)}),[m,e]);const E=_.useMemo(()=>({role:y,tabIndex:N,"aria-disabled":n,"aria-pressed":w&&y===nV?!0:void 0,"aria-roledescription":S,"aria-describedby":p.draggable}),[n,y,N,w,S,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:E,isDragging:w,listeners:n?void 0:R,node:C,over:x,setNodeRef:O,setActivatorNodeRef:I,transform:T}}function J_e(){return _.useContext(ZX)}const Z_e="Droppable",eTe={timeout:25};function iC(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Zw(Z_e),{active:o,dispatch:c,over:d,measureDroppableContainers:h}=_.useContext(ey),p=_.useRef({disabled:r}),m=_.useRef(!1),x=_.useRef(null),y=_.useRef(null),{disabled:S,updateMeasurementsFor:N,timeout:w}={...eTe,...a},T=ax(N??n),C=_.useCallback(()=>{if(!m.current){m.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{h(Array.isArray(T.current)?T.current:[T.current]),y.current=null},w)},[w]),O=e4({callback:C,disabled:S||!o}),L=_.useCallback((E,k)=>{O&&(k&&(O.unobserve(k),m.current=!1),E&&O.observe(E))},[O]),[I,R]=x2(L),A=ax(e);return _.useEffect(()=>{!O||!I.current||(O.disconnect(),m.current=!1,O.observe(I.current))},[I,O]),_.useEffect(()=>(c({type:qa.RegisterDroppable,element:{id:n,key:i,disabled:r,node:I,rect:x,data:A}}),()=>c({type:qa.UnregisterDroppable,key:i,id:n})),[n]),_.useEffect(()=>{r!==p.current.disabled&&(c({type:qa.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:o,rect:x,isOver:(d==null?void 0:d.id)===n,node:I,over:d,setNodeRef:R}}function tTe(t){let{animation:e,children:r}=t;const[n,a]=_.useState(null),[i,o]=_.useState(null),c=y2(r);return!r&&!n&&c&&a(c),Sc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),se.createElement(se.Fragment,null,r,n?_.cloneElement(n,{ref:o}):null)}const rTe={x:0,y:0,scaleX:1,scaleY:1};function nTe(t){let{children:e}=t;return se.createElement(ey.Provider,{value:JX},se.createElement(t4.Provider,{value:rTe},e))}const aTe={position:"fixed",touchAction:"none"},sTe=t=>eC(t)?"transform 250ms ease":void 0,iTe=_.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:c,style:d,transform:h,transition:p=sTe}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},x={...aTe,width:c.width,height:c.height,top:c.top,left:c.left,transform:ix.Transform.toString(m),transformOrigin:a&&n?Jje(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return se.createElement(r,{className:o,style:x,ref:e},i)}),oTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);o!=null&&o.active&&r.node.classList.remove(o.active)}},lTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:ix.Transform.toString(e)},{transform:ix.Transform.toString(r)}]},cTe={duration:250,easing:"ease",keyframes:lTe,sideEffects:oTe({styles:{active:{opacity:"0"}}})};function uTe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return Jw((i,o)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=YX(o);if(!h)return;const{transform:p}=Gs(o).getComputedStyle(o),m=$X(p);if(!m)return;const x=typeof e=="function"?e:dTe(e);return GX(d,a.draggable.measure),x({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function dTe(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...cTe,...t};return i=>{let{active:o,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},m={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},x={x:d.x-p.x,y:d.y-p.y,...m},y=a({...h,active:o,dragOverlay:c,transform:{initial:d,final:x}}),[S]=y,N=y[y.length-1];if(JSON.stringify(S)===JSON.stringify(N))return;const w=n==null?void 0:n({active:o,dragOverlay:c,...h}),T=c.node.animate(y,{duration:e,easing:r,fill:"forwards"});return new Promise(C=>{T.onfinish=()=>{w==null||w(),C()}})}}let aV=0;function hTe(t){return _.useMemo(()=>{if(t!=null)return aV++,aV},[t])}const fTe=se.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:x,containerNodeRect:y,draggableNodes:S,droppableContainers:N,dragOverlay:w,over:T,measuringConfiguration:C,scrollableAncestors:O,scrollableAncestorRects:L,windowRect:I}=J_e(),R=_.useContext(t4),A=hTe(m==null?void 0:m.id),E=eY(o,{activatorEvent:p,active:m,activeNodeRect:x,containerNodeRect:y,draggingNodeRect:w.rect,over:T,overlayNodeRect:w.rect,scrollableAncestors:O,scrollableAncestorRects:L,transform:R,windowRect:I}),k=sC(x),U=uTe({config:n,draggableNodes:S,droppableContainers:N,measuringConfiguration:C}),P=k?w.setRef:void 0;return se.createElement(nTe,null,se.createElement(tTe,{animation:U},m&&A?se.createElement(iTe,{key:A,id:m.id,ref:P,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:k,style:{zIndex:h,...a},transform:E},r):null))});function sV(t,e=800){const[r,n]=_.useState(t),a=_.useRef(t),i=_.useRef(0);return _.useEffect(()=>{const o=a.current,c=t;if(a.current=t,o===c)return;const d=performance.now(),h=c-o,p=m=>{const x=m-d,y=Math.min(x/e,1),S=1-Math.pow(1-y,3);n(Math.round(o+h*S)),y<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const rY=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],nY=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],pTe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],iV={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},jh=t=>t?iV[t.rarity]||iV.COMMON:null,mTe=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},lx=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,o=(e==null?void 0:e.bodyType)||"A",c=o==="B",d=o==="C",h=rY[(e==null?void 0:e.skinTone)??0],p=nY[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,x=h+"99",y=t==null?void 0:t.HEAD,S=t==null?void 0:t.CHEST,N=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,T=t==null?void 0:t.BELT,C=t==null?void 0:t.AMULET,O=_.useMemo(()=>[y,S,N,w,T,C].filter(Boolean).length,[y,S,N,w,T,C]),L=_.useMemo(()=>[y,S,N,w,T,C].some(E=>(E==null?void 0:E.rarity)==="UNIQUE"),[y,S,N,w,T,C]),I=Math.min(1,.2+O*.13),R=c?23:21,A=_.useMemo(()=>mTe(m,R),[m,R]);return s.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[s.jsxs("defs",{children:[s.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[s.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),s.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),s.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[s.jsx("stop",{offset:"0%",stopColor:h}),s.jsx("stop",{offset:"100%",stopColor:x})]}),s.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:I}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:I*.3}),s.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),s.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:p}),s.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),s.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&s.jsxs("g",{filter:"url(#av-bloom)",children:[s.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),s.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const E=jh(w);return s.jsxs("g",{filter:E.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:E.primary,stroke:E.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:E.primary,stroke:E.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:E.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),s.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:E.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),E.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:E.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:E.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),s.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),s.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),s.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),s.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),s.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),S&&(()=>{const E=jh(S);return s.jsxs("g",{filter:E.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:E.primary,fillOpacity:"0.3",stroke:E.primary,strokeWidth:"1",strokeOpacity:"0.6"}),s.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:E.primary,fillOpacity:"0.5",stroke:E.particle,strokeWidth:"0.5"}),s.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:E.primary,fillOpacity:"0.5",stroke:E.particle,strokeWidth:"0.5"}),s.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:E.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:E.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),s.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:E.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),s.jsx("circle",{cx:"100",cy:"120",r:"2",fill:E.particle,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),E.intensity>=.7&&s.jsxs("g",{children:[s.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:E.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:E.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),T?(()=>{const E=jh(T);return s.jsxs("g",{children:[s.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:E.primary,fillOpacity:"0.55",stroke:E.primary,strokeWidth:"0.8"}),s.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:E.particle,fillOpacity:"0.4"}),s.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:E.primary,fillOpacity:"0.3",stroke:E.particle,strokeWidth:"0.3"}),s.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:E.primary,fillOpacity:"0.3",stroke:E.particle,strokeWidth:"0.3"})]})})():s.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),s.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),N?(()=>{const E=jh(N);return s.jsxs("g",{filter:E.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:E.primary,fillOpacity:"0.5",stroke:E.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:E.primary,fillOpacity:"0.5",stroke:E.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:E.particle,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:E.particle,strokeWidth:"1",strokeOpacity:"0.5"}),E.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"50",cy:"168",r:"2",fill:E.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"150",cy:"168",r:"2",fill:E.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),s.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),O>0&&s.jsxs(s.Fragment,{children:[s.jsx("g",{filter:"url(#av-bloom)",children:s.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:s.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),s.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:I*.7,children:s.jsx("animate",{attributeName:"fillOpacity",values:`${I*.7};${I*.3};${I*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),O>=3&&s.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),s.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),C&&(()=>{const E=jh(C);return s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:E.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),s.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:E.primary,stroke:E.particle,strokeWidth:"0.8",children:s.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"97",r:"2",fill:E.particle,children:s.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),s.jsxs("g",{children:[A.back&&s.jsx("path",{d:A.back,fill:"url(#av-hair)",opacity:"0.8"}),s.jsx("ellipse",{cx:"100",cy:"50",rx:R,ry:"28",fill:"url(#av-face)",stroke:x,strokeWidth:"0.5"}),s.jsx("ellipse",{cx:100-R-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsx("ellipse",{cx:100+R+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsxs("g",{children:[s.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),s.jsx("path",{d:A.main,fill:"url(#av-hair)"}),A.accent&&s.jsx("path",{d:A.accent,fill:"url(#av-hair)",opacity:"0.9"}),y&&(()=>{const E=jh(y),k=y.visualId||"";return s.jsx("g",{filter:E.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:k.includes("helm")?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:`M${100-R-2} 28 Q100 10 ${100+R+2} 28 L${100+R+4} 62 Q100 72 ${100-R-4} 62 Z`,fill:E.primary,fillOpacity:"0.55",stroke:E.primary,strokeWidth:"1.2"}),s.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):k.includes("visor")?s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:E.primary,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:E.primary,strokeWidth:"1.5"}),s.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:E.primary,strokeWidth:"1.5"})]}):s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:E.primary,fillOpacity:"0.7",stroke:E.particle,strokeWidth:"0.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:E.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:E.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:E.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:E.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:E.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&s.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((E,k)=>s.jsx("polygon",{points:`${100+E},16 ${97+E},22 ${103+E},22`,fill:"#fbbf24",fillOpacity:"0.6",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+k*.2}s`,repeatCount:"indefinite"})},k))]}),L&&s.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((E,k)=>{const U=E*Math.PI/180,P=100+Math.cos(U)*50,$=145+Math.sin(U)*75;return s.jsxs("circle",{cx:P,cy:$,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-18};${$}`,dur:`${2+k*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+k*.3}s`,repeatCount:"indefinite"})]},k)})}),r>=5&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),s.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((E,k)=>{const U=k*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),P=100+Math.cos(U)*(38+k*3),$=140+Math.sin(U)*(55+k*2),B=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return s.jsxs("circle",{cx:P,cy:$,r:"1",fill:B,fillOpacity:"0.35",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-12};${$}`,dur:`${2+k*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+k*.4}s`,repeatCount:"indefinite"})]},k)})}),n&&a&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((E,k)=>{const U=60+Math.random()*80,P=20+Math.random()*260;return s.jsxs("circle",{cx:U,cy:P,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[s.jsx("animate",{attributeName:"cy",values:`${P};${P-25};${P}`,dur:`${3+k*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+k*.5}s`,repeatCount:"indefinite"})]},`c-${k}`)})})]})]})},gTe={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},xTe=({unlockedAchievements:t,achievementProgress:e})=>{const r=_.useMemo(()=>j0e(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=q8.filter(o=>!o.isSecret).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(cl,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),s.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(o=>{const c=r.filter(h=>h.category===o);if(c.length===0)return null;const d=gTe[o];return s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[s.jsx("span",{children:d.icon})," ",d.label]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,x=Math.min(100,m/h.condition.target*100);return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[s.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&s.jsx(df,{className:"w-3 h-3 text-gray-600"})]}),s.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&s.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${x}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&s.jsxs("div",{className:"text-right shrink-0",children:[s.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&s.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},o)})]})},yTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},vTe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=_.useState(t||null),[i,o]=_.useState(null),c=Pa(),{confirm:d}=Po(),h=!!t,p=n||"THEORIST",m=aW.filter(S=>S.specialization===p),x=[1,2,3,4],y=async S=>{if(!i){if(!h){const N=F1[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${N} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${N}`,cancelLabel:"Go Back",variant:"warning"}))return}o(S);try{await De.unlockSkill(S,p),Hn.skillUnlock(),c.success("Skill unlocked!")}catch(N){c.error(N instanceof Error?N.message:"Failed to unlock")}o(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[s.jsx($n,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[s.jsx(Li,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),s.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",s.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[s.jsx(zr,{className:"w-4 h-4 text-green-400"}),s.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",s.jsxs("span",{className:"font-bold text-white",children:[F1[t].icon," ",F1[t].name]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(F1).map(([S,N])=>{const w=p===S,T=h&&t!==S;return s.jsxs("button",{onClick:()=>!T&&a(S),disabled:T,className:`p-3 rounded-xl border text-left transition-all ${w?`border-white/30 bg-gradient-to-br ${yTe[S]} bg-opacity-10`:T?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:N.icon}),s.jsx("span",{className:"font-bold text-sm text-white",children:N.name}),T&&s.jsx(df,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:N.description}),!h&&w&&s.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},S)})}),s.jsx("div",{className:"space-y-4",children:x.map(S=>{const N=m.filter(w=>w.tier===S);return s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",S]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(w=>{const T=r.includes(w.id),C=!T&&$M(w.id,r)&&e>=w.cost,O=$M(w.id,r);return s.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${T?"border-green-500/30 bg-green-500/10":C?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>C&&y(w.id),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-sm",children:w.icon}),s.jsx("span",{className:"text-xs font-bold text-white truncate",children:w.name}),T&&s.jsx(zr,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!T&&!O&&s.jsx(df,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400",children:w.description}),!T&&s.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",w.cost," SP"]}),i===w.id&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},w.id)})})]},S)})})]})},s_=25,nv=T0e,bTe=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=_.useState(!1),[i,o]=_.useState(0),[c,d]=_.useState(null),h=_.useRef(null),p=Pa(),m=new Date().toISOString().split("T")[0],x=e===m,y=!x&&t>=s_&&!n,S=async()=>{if(y){a(!0),d(null),Hn.wheelSpin();try{const T=await De.spinFortuneWheel(r),C=nv.findIndex(I=>I.id===T.prizeId),O=360/nv.length,L=360*5+(360-C*O-O/2);o(I=>I+L),setTimeout(()=>{Hn.wheelPrize(),d(T.rewardDescription),a(!1),T.prizeType!=="NOTHING"?p.success(`You won: ${T.rewardDescription}!`):p.info(T.rewardDescription)},4e3)}catch(T){a(!1),p.error(T instanceof Error?T.message:"Spin failed")}}},N=360/nv.length,w=140;return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",s_," Flux for a daily spin"]}),s.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[s.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),s.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:s.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[nv.map((T,C)=>{const O=(C*N-90)*(Math.PI/180),L=((C+1)*N-90)*(Math.PI/180),I=w*Math.cos(O),R=w*Math.sin(O),A=w*Math.cos(L),E=w*Math.sin(L),k=N>180?1:0,U=((C+.5)*N-90)*(Math.PI/180),P=w*.65*Math.cos(U),$=w*.65*Math.sin(U),B=(C+.5)*N;return s.jsxs("g",{children:[s.jsx("path",{d:`M0,0 L${I},${R} A${w},${w} 0 ${k},1 ${A},${E} Z`,fill:T.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),s.jsx("text",{x:P,y:$,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${B}, ${P}, ${$})`,children:T.label})]},T.id)}),s.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),s.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&s.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[s.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),s.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),s.jsx("button",{onClick:S,disabled:!y,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${y?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":x?"Come back tomorrow!":`Spin (${s_} Flux)`})]})};function wTe(t,e){const[r,n]=_.useState(e);return _.useEffect(()=>{const a=De.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function STe(t){const[e,r]=_.useState([]);return _.useEffect(()=>{const n=De.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const NTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var S;const i=wTe(t.id,t.maxHp),o=STe(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=o.reduce((N,w)=>(N[w.userId]||(N[w.userId]={name:w.userName,total:0}),N[w.userId].total+=w.damage,N),{}),m=Object.entries(p).sort(([,N],[,w])=>w.total-N.total).slice(0,5),x=((S=p[e])==null?void 0:S.total)||0,y=(a==null?void 0:a.bossId)===t.id;return s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[y&&s.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(lo,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),y&&a&&s.jsx("div",{className:"text-center animate-bounce",children:s.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),x>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx(ui,{className:"w-3 h-3"}),"Your total damage: ",s.jsx("span",{className:"text-white font-bold",children:x})]}),m.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[s.jsx(di,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([N,w],T)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:`${N===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",T+1," ",w.name]}),s.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},N))]}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx($n,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),s.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[s.jsx(Ru,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),s.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},jTe=({userId:t,userName:e,classType:r})=>{const[n,a]=_.useState([]),[i,o]=_.useState(null),[c,d]=_.useState(null),h=Pa();_.useEffect(()=>{let m;try{m=De.subscribeToBossEncounters(x=>{const y=x.filter(S=>!S.classType||S.classType===r||S.classType==="GLOBAL");a(y)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){o(m);try{const x=await De.dealBossDamage(m,e,r||"");if(Hn.bossHit(),d({bossId:m,damage:x.damageDealt,isCrit:x.isCrit}),setTimeout(()=>d(null),2e3),x.bossDefeated)Hn.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const y=x.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${x.damageDealt} damage!${y} (+${x.xpEarned} XP)`)}}catch(x){h.error(x instanceof Error?x.message:"Attack failed")}o(null)}};return n.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[s.jsx(Yle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>s.jsx(NTe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},_Te=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:o,bossHpPercent:c,isCrit:d,healAmount:h,shieldBlocked:p})=>{const[m,x]=_.useState(!1),[y,S]=_.useState(!1),[N,w]=_.useState(null),[T,C]=_.useState(!1),[O,L]=_.useState(null),[I,R]=_.useState(!1),[A,E]=_.useState([]),[k,U]=_.useState(!1),P=(n==null?void 0:n.bossType)||"BRUTE",$=(n==null?void 0:n.hue)??0,B=(G,K,H)=>{const ee=G==="right"?75:25,ae=Array.from({length:H},(ce,fe)=>({id:Date.now()+fe,x:ee+(Math.random()-.5)*20,y:30+(Math.random()-.5)*15,color:K,px:(Math.random()-.5)*60,py:-(Math.random()*40+10)}));E(ce=>[...ce,...ae]),setTimeout(()=>E(ce=>ce.filter(fe=>!ae.find(Z=>Z.id===fe.id))),1e3)};return _.useEffect(()=>{if(a==="player-attack"&&i){x(!0),w({value:i,side:"right",isCrit:d}),B("right",d?"#fbbf24":"#f59e0b",d?12:6),d&&(C(!0),U(!0),setTimeout(()=>C(!1),400),setTimeout(()=>U(!1),400));const G=setTimeout(()=>x(!1),500),K=setTimeout(()=>w(null),1200);return h&&h>0&&setTimeout(()=>{L(h),setTimeout(()=>L(null),1200)},400),()=>{clearTimeout(G),clearTimeout(K)}}else if(a==="boss-attack"){if(p){R(!0),B("left","#22d3ee",6),setTimeout(()=>R(!1),800);return}if(i&&i>0){S(!0),U(!0),B("left","#ef4444",8),w({value:i,side:"left"}),setTimeout(()=>U(!1),300);const G=setTimeout(()=>S(!1),500),K=setTimeout(()=>w(null),1200);return()=>{clearTimeout(G),clearTimeout(K)}}}},[a,i,d,h,p]),s.jsxs("div",{className:`relative w-full h-48 flex items-end justify-between px-4 overflow-hidden select-none ${k?"animate-[battleShake_0.3s_ease-in-out]":""}`,children:[T&&s.jsx("div",{className:"absolute inset-0 bg-amber-400/20 animate-[critFlash_0.4s_ease-out_forwards] z-10 pointer-events-none"}),I&&s.jsx("div",{className:"absolute left-10 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:s.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-cyan-400/60 bg-cyan-400/10 animate-[shieldPulse_0.8s_ease-out_forwards] flex items-center justify-center",children:s.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-cyan-400 fill-current",children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})})}),A.map(G=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full pointer-events-none animate-[particleBurst_1s_ease-out_forwards]",style:{left:`${G.x}%`,top:`${G.y}%`,backgroundColor:G.color,"--px":`${G.px}px`,"--py":`${G.py}px`}},G.id)),O!==null&&s.jsxs("div",{className:"absolute left-8 bottom-12 text-base font-black text-emerald-400 animate-[floatUp_1.2s_ease-out_forwards] z-10 pointer-events-none",children:["+",O," HP"]}),s.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),s.jsxs("div",{className:`relative w-24 h-36 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-10 scale-110":""} ${y?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2.5rem) scale(1.1)":void 0},children:[s.jsx(lx,{equipped:e,appearance:t,evolutionLevel:r}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o>50?"bg-emerald-500":o>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o}%`}})})]}),s.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),m&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[s.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),s.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),s.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),s.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),y&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[s.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),s.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),N&&s.jsxs("div",{className:`absolute font-black animate-[floatUp_1.2s_ease-out_forwards] ${N.isCrit?"text-2xl":"text-xl"} ${N.side==="right"?`right-4 ${N.isCrit?"text-yellow-300":"text-amber-400"}`:"left-4 text-red-400"}`,style:{top:"10%"},children:[N.isCrit&&s.jsx("span",{className:"text-[10px] block text-center text-yellow-300 font-black tracking-widest animate-pulse",children:"CRIT!"}),"-",N.value]})]}),s.jsxs("div",{className:`relative w-28 h-40 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-10 scale-110":""} ${m?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2.5rem) scale(1.1)":m?void 0:"scaleX(-1)",...m?{}:{filter:void 0}},children:[s.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:s.jsx(lW,{bossType:P,hue:$})}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),s.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes battleShake {
                    0%, 100% { transform: translate(0, 0); }
                    10% { transform: translate(-3px, -2px); }
                    20% { transform: translate(4px, 1px); }
                    30% { transform: translate(-2px, 3px); }
                    40% { transform: translate(3px, -1px); }
                    50% { transform: translate(-4px, 2px); }
                    60% { transform: translate(2px, -3px); }
                    70% { transform: translate(-1px, 2px); }
                    80% { transform: translate(3px, -2px); }
                    90% { transform: translate(-2px, 1px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
                @keyframes critFlash {
                    0% { opacity: 0.3; }
                    50% { opacity: 0.15; }
                    100% { opacity: 0; }
                }
                @keyframes shieldPulse {
                    0% { transform: scale(0.5); opacity: 0.9; }
                    50% { transform: scale(1.2); opacity: 0.6; }
                    100% { transform: scale(1.5); opacity: 0; }
                }
                @keyframes particleBurst {
                    0% { opacity: 1; transform: translate(0, 0) scale(1); }
                    100% { opacity: 0; transform: translate(var(--px, 20px), var(--py, -30px)) scale(0); }
                }
            `})]})},TTe=({bossId:t,maxEntries:e=5})=>{const[r,n]=_.useState([]),a=_.useRef(null);return _.useEffect(()=>{const i=De.subscribeToBossQuizDamageLog(t,o=>{const c=[...o].sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime());n(c.slice(0,e))});return()=>i()},[t,e]),_.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[r.length]),r.length===0?null:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest flex items-center gap-1",children:[s.jsx($n,{className:"w-2.5 h-2.5"})," Live Battle Feed"]}),s.jsx("div",{ref:a,className:"max-h-24 overflow-y-auto custom-scrollbar space-y-0.5",children:r.map((i,o)=>s.jsxs("div",{className:`flex items-center gap-2 text-[10px] py-0.5 px-2 rounded-lg ${o===0?"bg-amber-500/5 animate-in fade-in slide-in-from-top-1 duration-300":"opacity-60"}`,children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-purple-500/20 flex items-center justify-center text-[8px] font-bold text-purple-400 shrink-0",children:i.userName.charAt(0)}),s.jsx("span",{className:"text-gray-400 truncate flex-1",children:i.userName}),s.jsxs("span",{className:`font-bold ${i.isCrit?"text-yellow-300":"text-amber-400"}`,children:["-",i.damage,i.isCrit?"!":""]})]},`${i.userId}-${i.timestamp}`))})]})};function ATe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function ETe(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function CTe(t,e){const r=[...t],n=ATe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function kTe(t,e){const[r,n]=_.useState(e);return _.useEffect(()=>{const a=De.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const ITe=({modifier:t})=>{const e=x_[t.type];return e?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[s.jsx(Mu,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&s.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},OTe=({quiz:t,progress:e})=>{var m,x;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,o=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=o>0?Math.round(c/o*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx(HH,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),s.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&s.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),s.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((x=t.rewards)==null?void 0:x.flux)||0)*(a||1))," Flux"]}),a&&a>1&&s.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[s.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Ym," attempts and ",Jm," correct answer"]})]}):null,r&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Fh,{className:"w-3 h-3"})," Damage Dealt"]}),s.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Os,{className:"w-3 h-3"})," Accuracy"]}),s.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",o]})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx($n,{className:"w-3 h-3"})," Critical Hits"]}),s.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(ui,{className:"w-3 h-3"})," Damage Mitigated"]}),s.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(sw,{className:"w-3 h-3"})," Longest Streak"]}),s.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Vh,{className:"w-3 h-3"})," Healing Received"]}),s.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(y=>{const S=r.correctByDifficulty[y]||0,N=r.incorrectByDifficulty[y]||0,w=S+N,T=w>0?Math.round(S/w*100):0;return s.jsxs("div",{className:`rounded-lg p-2 border text-center ${y==="EASY"?"border-green-500/20 bg-green-500/5":y==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[s.jsx("div",{className:`text-[9px] font-bold uppercase ${y==="EASY"?"text-green-400":y==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:y}),s.jsxs("div",{className:"text-sm font-black text-white",children:[T,"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[S,"/",w]})]},y)})})]})},RTe=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o})=>{var Ye,_e,he,Q;const c=kTe(t.id,t.maxHp),d=c/t.maxHp*100,h=se.useMemo(()=>CTe(t.questions,ETe(e+t.id)),[t.questions,e,t.id]),[p,m]=_.useState(null),[x,y]=_.useState(!1);_.useEffect(()=>{const X=De.subscribeToBossQuizProgress(e,t.id,Se=>{m(Se),y(!0)});return()=>X()},[e,t.id]);const S=se.useMemo(()=>n?G8(n).maxHp:100,[n]),[N,w]=_.useState(-1),[T,C]=_.useState(-1),[O,L]=_.useState(S),[I,R]=_.useState(!1),[A,E]=_.useState(null),[k,U]=_.useState(null),[P,$]=_.useState(!1),[B,G]=_.useState("idle"),[K,H]=_.useState(void 0),[ee,ae]=_.useState(!1),[ce,fe]=_.useState(void 0),[Z,ne]=_.useState(!1);_.useEffect(()=>{if(x&&N===-1)if(p){const X=new Set(p.answeredQuestions||[]),Se=h.findIndex(at=>!X.has(at.id));w(Se===-1?h.length:Se);const Ne=p.currentHp,Ke=p.maxHp>0?p.maxHp:S;L(Ke),Ne>=0?(C(Ne),Ne===0&&R(!0)):C(Ke)}else w(0),C(S),L(S)},[x]),_.useEffect(()=>{L(S)},[S]);const Y=O>0?(T===-1?O:T)/O*100:100,de=N>=0?h[N%h.length]:void 0,ye=N>=h.length,Ue=c<=0,Xe=async(X,Se,Ne)=>{P||I||($(!0),E(Ne),r(X,Se,Ne,{onResult:Ke=>{Ke.playerHp!==void 0&&C(Ke.playerHp),Ke.playerMaxHp!==void 0&&L(Ke.playerMaxHp),Ke.knockedOut&&R(!0),Ke.correct?(H(Ke.damage),ae(!!Ke.isCrit),fe(Ke.healAmount),ne(!1),G("player-attack"),setTimeout(()=>G("idle"),800)):Ke.shieldBlocked?(H(0),ne(!0),ae(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)):Ke.playerDamage&&Ke.playerDamage>0&&(H(Ke.playerDamage),ne(!1),ae(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)),U(Ke),Ke.knockedOut||setTimeout(()=>{w(at=>at+1),E(null),U(null)},2e3),$(!1)}}))};return s.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-amber-400",children:t.bossName}),s.jsx("p",{className:"text-sm text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!Ue&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((X,Se)=>s.jsx(ITe,{modifier:X},Se))}),Ue?s.jsx(OTe,{quiz:t,progress:p}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:s.jsx(_Te,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o,bossAppearance:t.bossAppearance,attackState:B,damage:K,playerHpPercent:Y,bossHpPercent:d,isCrit:ee,healAmount:ce,shieldBlocked:Z})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[s.jsx(Vh,{className:"w-3 h-3"})," Your HP: ",T===-1?O:T]}),s.jsx("span",{className:"text-gray-600",children:O})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${Y>50?"bg-gradient-to-r from-emerald-600 to-green-500":Y>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${Y}%`}})})]}),I?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(oo,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):ye?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(zr,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):de?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Question ",N+1," / ",h.length]}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${de.difficulty==="HARD"?"bg-red-500/20 text-red-400":de.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[de.difficulty,de.damageBonus?` (+${de.damageBonus} dmg)`:""]})]}),s.jsx("p",{className:"text-base text-white font-semibold leading-relaxed",children:de.stem}),s.jsx("div",{className:"space-y-2.5",children:de.options.map((X,Se)=>{const Ne=A===Se,Ke=k&&Ne,at=k==null?void 0:k.correct;return s.jsx("button",{onClick:()=>Xe(t.id,de.id,Se),disabled:P||!!k||I,className:`w-full text-left p-4 rounded-xl border text-base transition-all ${Ke&&at?"border-green-500/50 bg-green-500/10 text-green-400":Ke&&!at?"border-red-500/50 bg-red-500/10 text-red-400":Ne?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm font-mono text-gray-600 w-6",children:[String.fromCharCode(65+Se),"."]}),s.jsx("span",{children:X}),Ke&&at&&s.jsx(zr,{className:"w-5 h-5 text-green-400 ml-auto shrink-0"}),Ke&&!at&&s.jsx(oo,{className:"w-5 h-5 text-red-400 ml-auto shrink-0"})]})},Se)})}),k&&k.correct&&s.jsxs("div",{className:"text-center space-y-1",children:[s.jsxs("div",{className:"text-base text-amber-400 font-bold animate-bounce",children:[s.jsx($n,{className:"w-5 h-5 inline mr-1"}),k.isCrit?"CRITICAL HIT! ":"","-",k.damage," HP to boss!"]}),k.healAmount&&k.healAmount>0&&s.jsxs("div",{className:"text-sm text-emerald-400 font-bold",children:[s.jsx(Vh,{className:"w-4 h-4 inline mr-1"})," +",k.healAmount," HP healed"]})]}),k&&!k.correct&&k.shieldBlocked&&s.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[s.jsx(ui,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),k&&!k.correct&&!k.shieldBlocked&&k.playerDamage&&k.playerDamage>0&&s.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[s.jsx(Vh,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",k.playerDamage," damage!"]})]}):null,p&&!Ue&&!I&&!ye&&s.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((Ye=p.combatStats)==null?void 0:Ye.questionsAttempted)||0)<Ym||(((_e=p.combatStats)==null?void 0:_e.questionsCorrect)||0)<Jm?s.jsxs("span",{children:["Rewards: ",((he=p.combatStats)==null?void 0:he.questionsAttempted)||0,"/",Ym," attempts"," ",""," ",((Q=p.combatStats)==null?void 0:Q.questionsCorrect)||0,"/",Jm," correct needed"]}):s.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),s.jsx(TTe,{bossId:t.id,maxEntries:5}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsx("span",{children:"Defeat rewards:"}),s.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),s.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},MTe=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:o,playerEvolutionLevel:c})=>{const[d,h]=_.useState([]),p=Pa();_.useEffect(()=>{let y;try{y=De.subscribeToBossQuizzes(e,h)}catch{}return()=>y==null?void 0:y()},[e]);const m=d.filter(y=>{var S;if(y.scheduledAt&&new Date(y.scheduledAt)>new Date)return!1;if((S=y.targetSections)!=null&&S.length){const N=y.classType!=="GLOBAL"?y.classType:e,w=(n==null?void 0:n[N])||(n==null?void 0:n[e])||r||"";if(!y.targetSections.includes(w))return!1}return!0}),x=async(y,S,N,w)=>{try{const T=await De.answerBossQuiz(y,S,N);T.alreadyAnswered?p.info("Already answered this question!"):T.correct?(Hn.bossHit(),T.bossDefeated?(Hn.bossDefeated(),p.success("Boss defeated! Completion rewards distributed to all contributors!")):T.isCrit?p.success(`CRITICAL HIT! Dealt ${T.damage} damage!`):p.success(`Correct! Dealt ${T.damage} damage!`)):T.shieldBlocked?p.info("Shield blocked the attack!"):T.playerDamage&&T.playerDamage>0?p.error(`Wrong! The boss hits you for ${T.playerDamage} damage!`):p.error("Incorrect. No damage dealt."),T.knockedOut&&Hn.bossHit(),w.onResult(T)}catch(T){p.error(T instanceof Error?T.message:"Failed to submit answer"),w.onResult({correct:!1,damage:0})}};return m.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(Ro,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),m.map(y=>s.jsx(RTe,{quiz:y,userId:t,onAnswer:x,playerStats:a,playerAppearance:i,playerEquipped:o||{},playerEvolutionLevel:c||1},y.id))]})},i_={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},oV=({value:t,onChange:e,label:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>s.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:s.jsx(Ox,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),DTe=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=_.useState(0),[i,o]=_.useState(0),[c,d]=_.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return s.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[s.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),s.jsx(oV,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),s.jsx(oV,{value:i,onChange:o,label:h?"Tutor communication":"Student engagement"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),s.jsx("textarea",{value:c,onChange:x=>d(x.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),s.jsx("div",{className:"flex justify-between mt-1",children:s.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),s.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[s.jsx(w8,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},PTe=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=_.useState([]),[o,c]=_.useState(!1),[d,h]=_.useState(""),[p,m]=_.useState(!1),[x,y]=_.useState(null),[S,N]=_.useState(!1),w=Pa();_.useEffect(()=>{let k;try{k=De.subscribeToTutoringSessions(r,i)}catch{}return()=>k==null?void 0:k()},[r]);const T=async()=>{if(!(!d.trim()||p)){m(!0);try{await De.createTutoringRequest(t,e,d,r),w.success("Tutoring request posted!"),h(""),c(!1)}catch{w.error("Failed to create request")}m(!1)}},C=async k=>{try{await De.claimTutorRole(k,t,e),w.success("You are now the tutor for this session!")}catch{w.error("Failed to claim tutor role")}},O=async k=>{try{await De.startTutoringSession(k),w.success("Session started!")}catch{w.error("Failed to start session")}},L=async(k,U)=>{N(!0);try{const P=a.find(B=>B.id===k);if(!P)throw new Error("Session not found");const $=P.requesterId===t?"requester":"tutor";await De.submitTutoringFeedback(k,$,U),w.success("Feedback submitted! "+($==="requester"?P.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":P.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),y(null)}catch{w.error("Failed to submit feedback")}N(!1)},I=async(k,U)=>{try{const P=await De.completeTutoring(k,U);w.success(`Verified! Tutor earned ${P.xpAwarded} XP and ${P.fluxAwarded} Flux`)}catch{w.error("Failed to verify session")}},R=a.filter(k=>k.status==="OPEN"),A=a.filter(k=>["MATCHED","IN_PROGRESS"].includes(k.status)),E=a.filter(k=>k.status==="VERIFIED");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(ll,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),s.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Tr,{className:"w-3 h-3"})," Request Help"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),o&&s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[s.jsx("input",{value:d,onChange:k=>h(k.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:T,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),s.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),R.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(Rle,{className:"w-3 h-3"})," Open Requests"]}),R.map(k=>s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",k.requesterName," - ",new Date(k.createdAt).toLocaleDateString()]})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${i_[k.status]}`,children:k.status})]}),k.requesterId!==t&&s.jsxs("button",{onClick:()=>C(k.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[s.jsx(di,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},k.id))]}),A.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(lo,{className:"w-3 h-3"})," Active Sessions"]}),A.map(k=>{const U=k.requesterId===t||k.tutorId===t,P=k.requesterId===t,$=k.tutorId===t,B=P?k.requesterFeedback:k.tutorFeedback,G=P?k.tutorFeedback:k.requesterFeedback;return s.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName||"Finding tutor..."]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${i_[k.status]}`,children:k.status}),k.status==="MATCHED"&&U&&s.jsx("button",{onClick:()=>O(k.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),k.status==="IN_PROGRESS"&&U&&!B&&s.jsxs("button",{onClick:()=>y(k.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(zr,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),k.status==="IN_PROGRESS"&&U&&B&&!G&&s.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",P?"tutor":"student"]}),n&&k.tutorId&&k.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>I(k.id,k.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[s.jsx(zr,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),x===k.id&&k.status==="IN_PROGRESS"&&($||P)&&s.jsx(DTe,{role:P?"requester":"tutor",onSubmit:K=>L(k.id,K),submitting:S})]},k.id)})]}),a.filter(k=>k.status==="COMPLETED").length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[s.jsx(lo,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(k=>k.status==="COMPLETED").map(k=>s.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),k.requesterFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),k.tutorFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&k.tutorId&&s.jsxs("button",{onClick:()=>I(k.id,k.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(zr,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},k.id))]}),E.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(zr,{className:"w-3 h-3 text-green-400"})," Completed (",E.length,")"]}),E.slice(0,3).map(k=>s.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 truncate",children:k.topic}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${i_[k.status]}`,children:k.status})]},k.id))]}),a.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-600",children:[s.jsx(ll,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},LTe=({item:t,onClose:e})=>{const[r,n]=_.useState("chest"),a=ma(t.rarity);_.useEffect(()=>{Hn.chestOpen();const o=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(o),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:s.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&s.jsxs("div",{className:"animate-in zoom-in duration-500",children:[s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),s.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),s.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[s.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),s.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&s.jsx("div",{className:"animate-in zoom-in duration-300",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[s.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((o,c)=>s.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[s.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&s.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[s.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[s.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),s.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),s.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,o])=>o&&o>0).map(([o,c])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:o}),s.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},o))}),t.affixes.length>0&&s.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((o,c)=>s.jsxs("div",{className:"text-[10px] text-gray-400",children:[o.name,": +",o.value," ",o.stat," (T",o.tier,")"]},c))}),t.setId&&s.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&s.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((o,c)=>s.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),s.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},BTe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],$Te=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],zTe=({user:t,classType:e,onClose:r})=>{var R,A,E;const[n,a]=se.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},o=i.level||1,c=m0(o),d=sW(o),{equipped:h,appearance:p}=Hu(t,e),m=W8({gamification:{...i,equipped:h}}),x=g0(h),y=((R=i.classXp)==null?void 0:R[e])||0,S=(A=t.settings)==null?void 0:A.privacyMode,N=S?i.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),T=H8(w),C=i.unlockedAchievements||[],O=_.useMemo(()=>q8.filter(k=>C.includes(k.id)),[C]),L=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),I=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),s.jsxs("div",{className:"relative flex items-center gap-6",children:[s.jsx("div",{className:"w-32 h-44 shrink-0",children:s.jsx(lx,{equipped:h,appearance:p})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h1",{className:`text-2xl font-black ${S?"text-purple-300 italic":"text-white"}`,children:N}),s.jsx("button",{onClick:I,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?s.jsx(ec,{className:"w-4 h-4 text-green-400"}):s.jsx(d0,{className:"w-4 h-4"})})]}),s.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",o]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:y.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-yellow-400",children:x}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-purple-400",children:C.length}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&s.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:s.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(Os,{className:"w-3 h-3"})," Combat Stats"]}),s.jsx("div",{className:"space-y-2",children:BTe.map(({key:k,label:U,color:P,bg:$})=>{const B=m[k]||0,G=B/L*100;return s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-xs text-gray-400",children:U}),s.jsx("span",{className:`text-xs font-bold ${P}`,children:B})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${$} transition-all`,style:{width:`${G}%`}})})]},k)})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(ui,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"space-y-1.5",children:$Te.map(k=>{const U=h[k];if(!U)return s.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[s.jsx("span",{className:"font-mono w-12 text-[10px]",children:k}),s.jsx("span",{className:"italic",children:"Empty"})]},k);const P=ma(U.rarity);return s.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${P.border} ${P.bg}`,children:[s.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:k}),s.jsx("span",{className:`text-xs font-bold truncate ${P.text}`,children:U.name})]},k)})})]}),T.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[s.jsx(Ox,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),T.map(({set:k,activeBonus:U})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[s.jsx("span",{className:"text-purple-400 font-bold",children:k.name}),s.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",U.label]})]},k.id))]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",C.length,")"]}),O.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:O.slice(0,12).map(k=>s.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[s.jsx("div",{className:"text-xl",children:k.icon}),s.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:k.title})]},k.id))}):s.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Mu,{className:"w-3.5 h-3.5 text-orange-400"}),s.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),s.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Fh,{className:"w-3.5 h-3.5 text-red-400"}),s.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),s.jsx("span",{className:"text-red-400 font-bold",children:((E=i.completedQuests)==null?void 0:E.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(ll,{className:"w-3.5 h-3.5 text-green-400"}),s.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),s.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx($n,{className:"w-3.5 h-3.5 text-cyan-400"}),s.jsx("span",{className:"text-gray-400",children:"Total XP:"}),s.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})},av=({label:t,value:e,max:r,color:n,icon:a,description:i})=>{const o=Math.min(e/r*100,100);return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:n,children:a}),s.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider",children:t})]}),s.jsx("span",{className:`text-sm font-black ${n}`,children:e})]}),s.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${n.replace("text-","bg-").replace("400","500/60")}`,style:{width:`${o}%`}})}),s.jsx("div",{className:"absolute -top-10 left-0 hidden group-hover:block z-20 w-56 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:i})]})},sv=({label:t,value:e,sub:r,color:n="text-white",icon:a})=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-gray-600",children:a}),s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:t})]}),s.jsx("div",{className:`text-lg font-black ${n} leading-tight`,children:e}),r&&s.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:r})]}),UTe=({user:t,submissions:e,assignments:r,activeClass:n})=>{var P;const a=t.gamification,i=((P=a==null?void 0:a.classXp)==null?void 0:P[n])||0,o=(a==null?void 0:a.xp)||0,c=(a==null?void 0:a.level)||1,d=(a==null?void 0:a.currency)||0,h=(a==null?void 0:a.engagementStreak)||0,p=(a==null?void 0:a.loginStreak)||0,m=m0(c),y=_.useMemo(()=>Hu(t,n),[t,n]).equipped,S=_.useMemo(()=>{const $={tech:10,focus:10,analysis:10,charisma:10};return Object.values(y).filter(Boolean).forEach(G=>{G.stats&&Object.entries(G.stats).forEach(([K,H])=>{$[K]+=H})}),$},[y]),N=_.useMemo(()=>G8(S),[S]),w=_.useMemo(()=>g0(y),[y]),T=_.useMemo(()=>I0e(y),[y]),C=_.useMemo(()=>O0e(y),[y]),O=_.useMemo(()=>k0e(y),[y]),L=iW(h),I=_.useMemo(()=>{const $=new Set(r.filter(B=>B.classType===n).map(B=>B.id));return e.filter(B=>$.has(B.assignmentId))},[e,r,n]),R=_.useMemo(()=>{var fe;const $=I.reduce((Z,ne)=>{var Y;return Z+(((Y=ne.metrics)==null?void 0:Y.engagementTime)||0)},0),B=Math.round($/60)*10,K=(((fe=a==null?void 0:a.completedQuests)==null?void 0:fe.length)||0)*100,H=(a==null?void 0:a.bossDamageDealt)||{},ee=Object.values(H).reduce((Z,ne)=>Z+ne,0)*2,ae=(a==null?void 0:a.tutoringXpEarned)||0,ce=Math.max(0,i-B-K-ee-ae);return{engagementXp:B,questXp:K,bossXp:ee,tutoringXp:ae,otherXp:ce}},[I,a,i]),A=_.useMemo(()=>{const $=Date.now(),B=10080*60*1e3,G=I.filter(Y=>(Y.submittedAt?new Date(Y.submittedAt).getTime():0)>$-B),K=new Set(G.filter(Y=>Y.submittedAt).map(Y=>new Date(Y.submittedAt).toISOString().split("T")[0])).size,H={totalTime:G.reduce((Y,de)=>{var ye;return Y+(((ye=de.metrics)==null?void 0:ye.engagementTime)||0)},0),submissionCount:G.length,totalClicks:G.reduce((Y,de)=>{var ye;return Y+(((ye=de.metrics)==null?void 0:ye.clickCount)||0)},0),totalPastes:G.reduce((Y,de)=>{var ye;return Y+(((ye=de.metrics)==null?void 0:ye.pasteCount)||0)},0),totalKeystrokes:G.reduce((Y,de)=>{var ye;return Y+(((ye=de.metrics)==null?void 0:ye.keystrokes)||0)},0),totalXP:i,activityDays:K},ee=H.totalTime/60+H.submissionCount*10,fe=fle(H,ee,150,60),Z=ple(fe),ne=Wo[fe];return{bucket:fe,recommendation:Z,meta:ne,metrics:H,engagementScore:ee}},[I,i]),E=_.useMemo(()=>{const $=[];for(let B=6;B>=0;B--){const G=new Date;G.setDate(G.getDate()-B);const K=G.toISOString().split("T")[0],H=G.toLocaleDateString("en",{weekday:"short"}),ee=I.filter(ae=>{var ce;return(ce=ae.submittedAt)==null?void 0:ce.startsWith(K)});$.push({label:H,count:ee.length,minutes:Math.round(ee.reduce((ae,ce)=>{var fe;return ae+(((fe=ce.metrics)==null?void 0:fe.engagementTime)||0)},0)/60)})}return $},[I]),k=Math.max(1,...E.map($=>$.minutes)),U=_.useMemo(()=>{const $={SUCCESS:0,NORMAL:0,SUPPORT_NEEDED:0,FLAGGED:0,STARTED:0};return I.forEach(B=>{B.status in $&&$[B.status]++}),$},[I]);return s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[s.jsx(Ro,{className:"w-5 h-5 text-purple-400"}),"Intel Dossier"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Classified operative analysis  ",n]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-black ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Level ",c]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(sv,{label:"Class XP",value:i.toLocaleString(),sub:`${o.toLocaleString()} total across all classes`,color:"text-amber-400",icon:s.jsx($n,{className:"w-3.5 h-3.5"})}),s.jsx(sv,{label:"Gear Score",value:w,sub:`${Object.values(y).filter(Boolean).length}/8 slots filled`,color:"text-purple-400",icon:s.jsx(ui,{className:"w-3.5 h-3.5"})}),s.jsx(sv,{label:"Resources Accessed",value:I.length,sub:`${U.SUCCESS} excellent`,color:"text-emerald-400",icon:s.jsx(Os,{className:"w-3.5 h-3.5"})}),s.jsx(sv,{label:"Cyber-Flux",value:d,sub:"crafting currency",color:"text-cyan-400",icon:s.jsx(aT,{className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Fh,{className:"w-4 h-4 text-red-400"})," Combat Analysis"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your character stats translate to boss fight performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(av,{label:"Tech",value:S.tech,max:100,color:"text-blue-400",icon:s.jsx($n,{className:"w-3 h-3"}),description:"Attack Power  Increases base damage dealt to bosses in quiz events."}),s.jsx(av,{label:"Focus",value:S.focus,max:100,color:"text-green-400",icon:s.jsx(Ru,{className:"w-3 h-3"}),description:`Critical Strikes  ${(N.critChance*100).toFixed(0)}% crit chance, ${N.critMultiplier.toFixed(2)}x crit multiplier.`}),s.jsx(av,{label:"Analysis",value:S.analysis,max:100,color:"text-yellow-400",icon:s.jsx(ui,{className:"w-3 h-3"}),description:`Armor  Reduces incoming boss damage by ${N.armorPercent.toFixed(0)}%.`}),s.jsx(av,{label:"Charisma",value:S.charisma,max:100,color:"text-purple-400",icon:s.jsx(Vh,{className:"w-3 h-3"}),description:`Health Pool  Gives you ${N.maxHp} HP in boss fights (base 100 + 5 per charisma above 10).`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-3 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Max HP"}),s.jsx("div",{className:"text-sm font-black text-emerald-400",children:N.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Armor"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:[N.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit %"}),s.jsxs("div",{className:"text-sm font-black text-green-400",children:[(N.critChance*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit Dmg"}),s.jsxs("div",{className:"text-sm font-black text-red-400",children:[N.critMultiplier.toFixed(2),"x"]})]})]}),(Object.keys(T).length>0||Object.keys(C).length>0||Object.keys(O).length>0)&&s.jsxs("div",{className:"pt-3 border-t border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest",children:"Stat Sources"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px]",children:[s.jsxs("div",{className:"flex justify-between text-gray-500",children:[s.jsx("span",{children:"Base Stats"}),s.jsx("span",{className:"text-gray-400",children:"10 each"})]}),Object.keys(T).length>0&&s.jsxs("div",{className:"flex justify-between text-cyan-400/70",children:[s.jsx("span",{children:"Gems"}),s.jsxs("span",{children:["+",Object.values(T).reduce(($,B)=>$+B,0)]})]}),Object.keys(C).length>0&&s.jsxs("div",{className:"flex justify-between text-orange-400/70",children:[s.jsx("span",{children:"Runewords"}),s.jsxs("span",{children:["+",Object.values(C).reduce(($,B)=>$+B,0)]})]}),Object.keys(O).length>0&&s.jsxs("div",{className:"flex justify-between text-amber-400/70",children:[s.jsx("span",{children:"Set Bonus"}),s.jsxs("span",{children:["+",Object.values(O).reduce(($,B)=>$+B,0)]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx($n,{className:"w-4 h-4 text-amber-400"})," XP Sources"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 -mt-2",children:["Where your ",i.toLocaleString()," XP in ",n," came from"]}),s.jsx("div",{className:"space-y-2",children:[{label:"Resource Engagement",xp:R.engagementXp,color:"bg-purple-500",textColor:"text-purple-400",desc:"~10 XP per minute of active engagement"},{label:"Mission Rewards",xp:R.questXp,color:"bg-indigo-500",textColor:"text-indigo-400",desc:"XP from completing contracts"},{label:"Boss Encounters",xp:R.bossXp,color:"bg-red-500",textColor:"text-red-400",desc:"XP from boss quiz damage"},{label:"Peer Tutoring",xp:R.tutoringXp,color:"bg-emerald-500",textColor:"text-emerald-400",desc:"XP earned helping other agents"},{label:"Other (Badges, Daily, Behavior)",xp:R.otherXp,color:"bg-amber-500",textColor:"text-amber-400",desc:"Login rewards, behavior awards, badge XP"}].filter($=>$.xp>0).map($=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${$.color}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-300",children:$.label}),s.jsxs("span",{className:`font-bold ${$.textColor}`,children:["~",$.xp.toLocaleString()," XP"]})]}),s.jsx("div",{className:"text-[10px] text-gray-600",children:$.desc})]})]},$.label))}),L>1&&s.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Mu,{className:"w-4 h-4 text-orange-400"}),s.jsx("span",{className:"text-orange-400 font-bold",children:"Streak Bonus Active"}),s.jsxs("span",{className:"ml-auto text-sm font-black text-yellow-400",children:["+",Math.round((L-1)*100),"%"]})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[h,"-week engagement streak  All XP earnings boosted"]})]}),p>1&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 pt-2 border-t border-white/5",children:[s.jsx(Ox,{className:"w-3.5 h-3.5 text-purple-400"}),s.jsxs("span",{children:[p,"-day daily login streak"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-2xl p-5 space-y-4 ${A.meta.bgColor} ${A.meta.borderColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(tT,{className:"w-4 h-4"})," Engagement Status"]}),s.jsx("span",{className:`text-sm font-black ${A.meta.color}`,children:A.meta.label})]}),s.jsx("p",{className:"text-sm text-gray-300",children:A.meta.description}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Why this classification"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active time (7d)"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[Math.round(A.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Resources (7d)"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.submissionCount})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active days"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[A.metrics.activityDays,"/7"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Keystrokes"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.totalKeystrokes})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-1",children:"How to level up your status"}),s.jsx("p",{className:"text-sm text-gray-300",children:A.recommendation.studentTip})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommended for you"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.recommendation.categories.map($=>s.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-2.5 py-1 rounded-full text-gray-300 font-medium",children:$},$))})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(C0,{className:"w-4 h-4 text-cyan-400"})," 7-Day Activity"]}),s.jsx("div",{className:"flex items-end gap-2 h-32",children:E.map(($,B)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 font-mono",children:[$.minutes,"m"]}),s.jsx("div",{className:"w-full bg-white/5 rounded-t-lg relative flex-1 flex items-end",children:s.jsx("div",{className:`w-full rounded-t-lg transition-all duration-500 ${$.minutes>0?"bg-purple-500/50 border border-purple-500/30":"bg-white/5"}`,style:{height:`${Math.max($.minutes>0?8:0,$.minutes/k*100)}%`}})}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold",children:$.label}),$.count>0&&s.jsxs("div",{className:"text-[8px] text-gray-600",children:[$.count," res"]})]},B))}),s.jsxs("div",{className:"pt-3 border-t border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Submission Quality"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[U.SUCCESS>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-gray-400",children:"Excellent"}),s.jsx("span",{className:"text-emerald-400 font-bold ml-auto",children:U.SUCCESS})]}),U.NORMAL>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-400",children:"Normal"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:U.NORMAL})]}),U.SUPPORT_NEEDED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),s.jsx("span",{className:"text-gray-400",children:"Needs Support"}),s.jsx("span",{className:"text-amber-400 font-bold ml-auto",children:U.SUPPORT_NEEDED})]}),U.STARTED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),s.jsx("span",{className:"text-gray-400",children:"Started"}),s.jsx("span",{className:"text-gray-400 font-bold ml-auto",children:U.STARTED})]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Fh,{className:"w-4 h-4 text-red-400"})," Boss Fight Readiness"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your equipment and stats prepare you for boss quiz encounters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-red-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-red-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Fh,{className:"w-3 h-3"})," Offense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:["Your ",s.jsxs("span",{className:"text-blue-400 font-bold",children:[S.tech," Tech"]})," powers your base attack.",S.tech>20&&s.jsx("span",{className:"text-emerald-400",children:" Strong offensive capability."}),S.tech<=20&&S.tech>10&&s.jsx("span",{className:"text-yellow-400",children:" Moderate damage output."}),S.tech<=10&&s.jsx("span",{className:"text-red-400",children:" Low damage  equip Tech gear to improve."})]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Crit chance: ",s.jsxs("span",{className:"text-green-400 font-bold",children:[(N.critChance*100).toFixed(0),"%"]})," (from ",S.focus," Focus)"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-yellow-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-yellow-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(ui,{className:"w-3 h-3"})," Defense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[N.armorPercent.toFixed(0),"% Armor"]})," from ",S.analysis," Analysis reduces boss damage.",N.armorPercent>=30&&s.jsx("span",{className:"text-emerald-400",children:" Excellent damage mitigation."}),N.armorPercent<30&&N.armorPercent>=15&&s.jsx("span",{className:"text-yellow-400",children:" Decent protection."}),N.armorPercent<15&&s.jsx("span",{className:"text-red-400",children:" Vulnerable  equip Analysis gear."})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-emerald-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-emerald-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Vh,{className:"w-3 h-3"})," Survivability"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-emerald-400 font-bold",children:[N.maxHp," HP"]})," from ",S.charisma," Charisma.",N.maxHp>=150&&s.jsx("span",{className:"text-emerald-400",children:" Large health pool  can absorb many hits."}),N.maxHp<150&&N.maxHp>=120&&s.jsx("span",{className:"text-yellow-400",children:" Average survivability."}),N.maxHp<120&&s.jsx("span",{className:"text-red-400",children:" Fragile  Charisma gear increases HP."})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommendations"}),s.jsxs("div",{className:"space-y-1.5",children:[w<100&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(k1,{className:"w-3 h-3 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your Gear Score is ",s.jsx("span",{className:"text-amber-400 font-bold",children:w}),". Complete more missions and level up to earn better equipment drops."]})]}),S.tech<=15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(k1,{className:"w-3 h-3 text-blue-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Equip items with ",s.jsx("span",{className:"text-blue-400 font-bold",children:"Tech"})," stats to increase boss damage output."]})]}),N.critChance<.1&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(k1,{className:"w-3 h-3 text-green-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Socket ",s.jsx("span",{className:"text-green-400 font-bold",children:"Focus"})," gems to boost critical hit chance beyond ",(N.critChance*100).toFixed(0),"%."]})]}),N.armorPercent<10&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(k1,{className:"w-3 h-3 text-yellow-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your armor is low. ",s.jsx("span",{className:"text-yellow-400 font-bold",children:"Analysis"})," items will reduce boss damage significantly."]})]}),w>=100&&N.critChance>=.1&&N.armorPercent>=10&&S.tech>15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-emerald-400",children:[s.jsx(aT,{className:"w-3 h-3 mt-0.5 shrink-0"}),s.jsx("span",{children:"Your loadout is well-balanced. Consider specializing in one stat for even greater effectiveness."})]})]})]})]})]})};function VTe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=sx(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const FTe={Textbook:s.jsx(Ga,{className:"w-5 h-5"}),Simulation:s.jsx(k0,{className:"w-5 h-5 fill-current"}),"Lab Guide":s.jsx(ew,{className:"w-5 h-5"}),"Practice Set":s.jsx(Os,{className:"w-5 h-5"}),Article:s.jsx(KH,{className:"w-5 h-5"}),"Video Lesson":s.jsx(ZH,{className:"w-5 h-5"}),Supplemental:s.jsx(rw,{className:"w-5 h-5"})};let _h=0,o_=!1,l_=!1,lV="";const qTe=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:a,onStartAssignment:i,studentTab:o="RESOURCES"})=>{var Ja,Rs,pi,Ns,Tt,pe,rt,dt,Yt,xr,hn,tn,Sn,Br,$i,mi,go,wl,gi,xi,Ba,Na,q,we,Ae,Ee,ft,Mt,Ct,Jt,Er;const c=Pa(),{confirm:d}=Po(),[h,p]=_.useState(new Set),[m,x]=_.useState(t.classType||((Ja=t.enrolledClasses)==null?void 0:Ja[0])||"Unassigned"),[y,S]=_.useState(null),[N,w]=_.useState([]),[T,C]=_.useState({}),[O,L]=_.useState(!1),[I,R]=_.useState(null);lV!==t.id&&(lV=t.id,_h=((Rs=t.gamification)==null?void 0:Rs.lastLevelSeen)||1,o_=!1,l_=!1),_h===0&&(_h=((pi=t.gamification)==null?void 0:pi.lastLevelSeen)||1);const A=o,[E,k]=_.useState(!1),[U,P]=_.useState(null),[$,B]=_.useState(!1),[G,K]=_.useState(null),[H,ee]=_.useState(null),[ae,ce]=_.useState(null),[fe,Z]=_.useState(null),[ne,Y]=_.useState(null),[de,ye]=_.useState(null),[Ue,Xe]=_.useState(!1),[Ye,_e]=_.useState(null),[he,Q]=_.useState(!1);_.useEffect(()=>{var Re,Ve,Fe;const le=((Re=t.gamification)==null?void 0:Re.level)||1,ve=Math.max(((Ve=t.gamification)==null?void 0:Ve.lastLevelSeen)||1,_h);if(le>ve){_h=le;const ir=((Fe=t.gamification)==null?void 0:Fe.inventory)||[],Qt=ir.length>0?ir[ir.length-1]:null;R(Qt),L(!0),Hn.levelUp()}},[(Ns=t.gamification)==null?void 0:Ns.level,(Tt=t.gamification)==null?void 0:Tt.lastLevelSeen,(pe=t.gamification)==null?void 0:pe.inventory]),_.useEffect(()=>{const le=[];try{le.push(De.subscribeToXPEvents(ve=>{const Re=ve.find(Ve=>{var Fe,ir,Qt;if(!Ve.isActive||Ve.type!=="GLOBAL"&&Ve.targetClass!==m||Ve.scheduledAt&&new Date(Ve.scheduledAt)>new Date)return!1;if((Fe=Ve.targetSections)!=null&&Fe.length){const Pn=Ve.type!=="GLOBAL"&&Ve.targetClass?Ve.targetClass:m,ha=((ir=t.classSections)==null?void 0:ir[Pn])||((Qt=t.classSections)==null?void 0:Qt[m])||t.section||"";if(!Ve.targetSections.includes(ha))return!1}return!0});S(Re||null)}))}catch{}try{le.push(De.subscribeToQuests(ve=>{const Re=t.enrolledClasses||(t.classType?[t.classType]:[]);w(ve.filter(Ve=>{var ir,Qt;if(!Ve.isActive)return!1;const Fe=new Date;if(Ve.startsAt&&new Date(Ve.startsAt)>Fe||Ve.expiresAt&&new Date(Ve.expiresAt)<Fe||Ve.targetClass&&!Re.includes(Ve.targetClass))return!1;if((ir=Ve.targetSections)!=null&&ir.length){const Pn=((Qt=t.classSections)==null?void 0:Qt[Ve.targetClass||m])||t.section||"";if(!Ve.targetSections.includes(Pn))return!1}return!0}))}))}catch{}try{le.push(De.subscribeToStudentPracticeProgress(t.id,C))}catch{}return()=>le.forEach(ve=>ve())},[m]);const X=((dt=(rt=t.gamification)==null?void 0:rt.classXp)==null?void 0:dt[m])||0,Se=se.useRef(X),Ne=se.useRef(m);_.useEffect(()=>{if(Ne.current!==m){Ne.current=m,Se.current=X;return}if(X>Se.current&&Se.current>=0){const le=X-Se.current;if(le>0&&le<500){ye(le),Hn.xpGain();const ve=setTimeout(()=>ye(null),2e3);return()=>clearTimeout(ve)}}Se.current=X},[X]),_.useEffect(()=>{var Re;if(o_)return;o_=!0;const le=new Date().toISOString().split("T")[0];((Re=t.gamification)==null?void 0:Re.lastLoginRewardDate)!==le&&!he&&De.claimDailyLogin().then(Ve=>{Ve.alreadyClaimed||(Q(!0),Hn.dailyReward(),c.success(`Daily login: +${Ve.xpReward} XP, +${Ve.fluxReward} Flux (${Ve.streak}-day streak!)`))}).catch(()=>{})},[]),_.useEffect(()=>{l_||(l_=!0,De.updateEngagementStreak().catch(()=>{}))},[]);const[Ke,at]=_.useState([]);_.useEffect(()=>{let le;try{le=De.subscribeToAnnouncements(at)}catch{}return()=>le==null?void 0:le()},[]);const Rt=_.useMemo(()=>{var ve;const le=((ve=t.gamification)==null?void 0:ve.dismissedAnnouncements)||[];return Ke.filter(Re=>{var Ve,Fe,ir;if(le.includes(Re.id)||Re.classType!=="GLOBAL"&&Re.classType!==m)return!1;if((Ve=Re.targetSections)!=null&&Ve.length){const Qt=Re.classType!=="GLOBAL"?Re.classType:m,Pn=((Fe=t.classSections)==null?void 0:Fe[Qt])||((ir=t.classSections)==null?void 0:ir[m])||t.section||"";if(!Re.targetSections.includes(Pn))return!1}return!0})},[Ke,(Yt=t.gamification)==null?void 0:Yt.dismissedAnnouncements,m,t.classSections,t.section]),Pe=async le=>{await De.dismissAnnouncement(t.id,le)},lt=()=>{var ve;const le=((ve=t.gamification)==null?void 0:ve.level)||1;_h=le,L(!1),R(null),De.updateUserLastLevelSeen(t.id,le).catch(()=>{})},Nt=async le=>{try{await De.updateUserAppearance(t.id,le,m),c.success("Profile updated!"),k(!1),K(null),ee(null),ce(null),Z(null),Y(null)}catch{c.error("Failed to save  try again")}},vt=t.enrolledClasses||(t.classType?[t.classType]:[]),yt=_.useMemo(()=>Hu(t,m),[t,m]),me=yt.equipped,We=yt.inventory,mt=_.useMemo(()=>{const le={tech:10,focus:10,analysis:10,charisma:10};return Object.values(me).filter(Boolean).forEach(Re=>{Re.stats&&Object.entries(Re.stats).forEach(([Ve,Fe])=>{le[Ve]+=Fe})}),le},[me]),Ze=_.useMemo(()=>g0(me),[me]),et=_.useMemo(()=>{const le=t.gamification||{},Re={...le.achievementProgress||{}},Ve=le.xp||0,Fe=le.level||1,ir=le.inventory||[],Qt=le.completedQuests||[],Pn=le.engagementStreak||0,ha=le.loginStreak||0,zi=le.tutoringSessionsCompleted||0,ja=le.bossesDefeated||0,_a=le.challengesCompleted||0,Ln=le.itemsCrafted||0,wr=($o,Ui)=>{(!Re[$o]||Ui>Re[$o])&&(Re[$o]=Ui)};return wr("first_steps",Ve),wr("xp_5k",Ve),wr("xp_25k",Ve),wr("rising_star",Fe),wr("veteran",Fe),wr("elite",Fe),wr("legend",Fe),wr("collector_10",ir.length),wr("collector_50",ir.length),wr("gear_score_100",Ze),wr("gear_score_500",Ze),wr("first_mission",Qt.length),wr("mission_5",Qt.length),wr("mission_20",Qt.length),wr("boss_slayer",ja),wr("streak_3",Pn),wr("streak_8",Pn),wr("streak_16",Pn),wr("login_7",ha),wr("login_30",ha),wr("challenges_10",_a),wr("tutor_1",zi),wr("tutor_10",zi),wr("tech_50",mt.tech),wr("focus_50",mt.focus),wr("analysis_50",mt.analysis),wr("charisma_50",mt.charisma),wr("craft_10",Ln),Re},[t,Ze,mt]),Et=[{subject:"Tech",A:mt.tech,fullMark:100},{subject:"Focus",A:mt.focus,fullMark:100},{subject:"Analysis",A:mt.analysis,fullMark:100},{subject:"Charisma",A:mt.charisma,fullMark:100}],wt=_.useMemo(()=>{const le={};return e.filter(ve=>{var Re,Ve;if(ve.classType!==m||ve.status==="DRAFT"||ve.status==="ARCHIVED"||ve.scheduledAt&&new Date(ve.scheduledAt)>new Date)return!1;if((Re=ve.targetSections)!=null&&Re.length){const Fe=((Ve=t.classSections)==null?void 0:Ve[m])||t.section||"";if(!ve.targetSections.includes(Fe))return!1}return!0}).forEach(ve=>{var Fe;const Re=r.find(ir=>ir.assignmentId===ve.id),Ve=ve.unit||"General Resources";le[Ve]||(le[Ve]=[]),le[Ve].push({...ve,lastEngagement:Re&&Re.submittedAt||null,engagementTime:((Fe=Re==null?void 0:Re.metrics)==null?void 0:Fe.engagementTime)||0})}),le},[e,r,m]),pr=le=>{const ve=new Set(h);ve.has(le)?ve.delete(le):ve.add(le),p(ve)},be=((xr=t.gamification)==null?void 0:xr.level)||1,nt=((hn=t.gamification)==null?void 0:hn.currency)||0,jt=X,Pt=jt%1e3/1e3*100,Bt=sV(jt),tt=sV(nt),ar=m0(be),Ar=async le=>{const ve=le.target.value;x(ve),await De.switchUserView(t.id,ve)},Hr=async le=>{if(!$){B(!0);try{await De.equipItem(t.id,le,m),P(null),Hn.equip(),c.success(`${le.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{B(!1)}}},xn=async le=>{B(!0);try{await De.unequipItem(t.id,le,m),P(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{B(!1)}},_r=async()=>{if(!U)return;if(Object.values(me).some(Re=>Re&&Re.id===U.id)){c.error("Unequip this item before salvaging.");return}const ve=FM(U);if(await d({message:`Salvage ${U.name} for ${ve} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){B(!0);try{await De.disenchantItem(t.id,U,m),P(null),Hn.salvage(),c.success(`Salvaged for ${ve} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{B(!1)}}},Wt=async le=>{if(!U)return;const ve=ei[le];if(nt<ve)return c.error("Insufficient Cyber-Flux.");B(!0);try{await De.craftItem(t.id,U,le,m),P(null),Hn.craft(),c.success(`${le.charAt(0)+le.slice(1).toLowerCase()} complete.`)}catch(Re){const Ve=(Re==null?void 0:Re.message)||(Re==null?void 0:Re.code)||"Unknown error";c.error(`Fabrication failed: ${Ve}`)}finally{B(!1)}},Vt=((tn=t.gamification)==null?void 0:tn.gemsInventory)||[],_t=async()=>{if(!(!U||$)){if(nt<ei.SOCKET)return c.error("Insufficient Cyber-Flux.");if((U.sockets||0)>=3)return c.error("Maximum sockets reached.");B(!0);try{const le=await De.addSocket(U.id,m);P(le.item),Hn.craft(),c.success("Socket added!")}catch(le){c.error((le==null?void 0:le.message)||"Failed to add socket.")}finally{B(!1)}}},Gr=async le=>{if(!(!U||$)){if(nt<ei.ENCHANT)return c.error("Insufficient Cyber-Flux.");B(!0);try{const ve=await De.socketGem(U.id,le,m);P(ve.item),Hn.craft(),ve.runewordActivated?(Hn.levelUp(),c.success(`RUNEWORD ACTIVATED: ${ve.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(ve){c.error((ve==null?void 0:ve.message)||"Failed to socket gem.")}finally{B(!1)}}},dn=async le=>{var Ve;if(!U||$)return;const ve=(Ve=U.gems)==null?void 0:Ve[le];if(!ve)return;const Re=VM(U.rarity,ve.tier,U.unsocketCount||0);if(nt<Re)return c.error(`Insufficient Cyber-Flux. Need ${Re}.`);B(!0);try{const Fe=await De.unsocketGem(U.id,le,m);P(Fe.item),Hn.craft(),c.success(`Gem removed! -${Fe.cost} Flux`)}catch(Fe){c.error((Fe==null?void 0:Fe.message)||"Failed to unsocket gem.")}finally{B(!1)}},en=((Sn=t.gamification)==null?void 0:Sn.activeQuests)||[],Wr=((Br=t.gamification)==null?void 0:Br.completedQuests)||[],yn=N.filter(le=>en.some(ve=>ve.questId===le.id)),hr=N.filter(le=>!en.some(ve=>ve.questId===le.id)&&!Wr.includes(le.id)),Sa=async le=>{try{await De.acceptQuest(t.id,le.id),Hn.questAccept(),c.success(`Contract accepted: ${le.title}`)}catch{c.error("Failed to accept contract.")}},vn=async le=>{const ve=le.type==="CUSTOM";if(await d({message:ve?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:ve?"Submit":"Deploy",variant:"info"}))try{await De.deployMission(t.id,le),Hn.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},Dn=["HEAD","HANDS","RING1","AMULET"],cs=["CHEST","BELT","FEET","RING2"],[Or,bn]=_.useState(null),us=Xje(GU(aC,{activationConstraint:{distance:8}}),GU(QX,{activationConstraint:{delay:150,tolerance:5}})),Zn=le=>le==="RING1"||le==="RING2"?["RING"]:[le],on=le=>{const{active:ve}=le,Re=We.find(Ve=>Ve.id===ve.id)||Object.values(me).find(Ve=>Ve&&Ve.id===ve.id);bn(Re||null)},wn=le=>{const{active:ve,over:Re}=le;if(bn(null),!Re)return;const Ve=ve.id,Fe=Re.id;if(Fe.startsWith("slot-")){const ir=Fe.replace("slot-",""),Qt=We.find(ha=>ha.id===Ve);if(!Qt||!Zn(ir).includes(Qt.slot))return;Hr(Qt)}if(Ve.startsWith("equipped-")&&(Fe==="inventory-zone"||Fe.startsWith("storage-cell-"))){const ir=Ve.replace("equipped-","");xn(ir)}},kn=(le,ve,Re="w-5 h-5")=>{const Ve=`${Re} ${ve}`,Fe={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(le){case"HEAD":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),s.jsx("path",{d:"M5 11v2h14v-2"}),s.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),s.jsx("path",{d:"M6 4h12"}),s.jsx("path",{d:"M12 4v5"}),s.jsx("path",{d:"M9 9h6"})]});case"HANDS":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),s.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),s.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),s.jsx("path",{d:"M4 19h16"}),s.jsx("path",{d:"M11 3v4"})]});case"BELT":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),s.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),s.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),s.jsx("path",{d:"M12 7v3"}),s.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return s.jsxs("svg",{className:Ve,...Fe,children:[s.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),s.jsx("path",{d:"M12 9V6"}),s.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return s.jsx(eb,{className:Ve})}},ds=({slot:le})=>{const ve=me[le],Re=ve?ma(ve.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:Ve,isOver:Fe}=iC({id:`slot-${le}`}),{attributes:ir,listeners:Qt,setNodeRef:Pn,isDragging:ha}=tY({id:ve?`equipped-${le}`:`empty-slot-${le}`,disabled:!ve}),zi=Or&&Zn(le).includes(Or.slot),ja=Fe&&zi?"ring-2 ring-purple-500 scale-110":Or&&zi?"ring-1 ring-purple-500/40 animate-pulse":"";return s.jsx("div",{ref:Ve,className:"relative",children:s.jsx("div",{ref:Pn,...ir,...Qt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${ha?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${Re.border} ${Re.bg} ${Re.shimmer} ${Re.glow} ${ja}`,onClick:()=>!ha&&ve&&P(ve),children:ve?s.jsxs(s.Fragment,{children:[kn(le.replace(/\d/,""),Re.text),s.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${Re.text}`,children:ve.baseName||ve.name.split(" ").slice(-1)[0]}),!ha&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${Re.text}`,children:ve.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[ve.rarity," ",le]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(ve.stats).map(([_a,Ln])=>`+${Ln} ${_a.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):s.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:le.slice(0,4)})})})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[Rt.length>0&&s.jsx("div",{className:"lg:col-span-12 space-y-2",children:Rt.map(le=>{const ve={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return s.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${ve[le.priority]}`,children:[s.jsx(nb,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white",children:le.title}),s.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:le.content})]}),s.jsx("button",{onClick:()=>Pe(le.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Xn,{className:"w-4 h-4"})})]},le.id)})}),y&&s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:s.jsx($n,{className:"w-5 h-5 fill-current"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[y.title," ACTIVE"]}),s.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",y.multiplier,"x XP on all tasks."]})]})]}),s.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[y.multiplier,"x"]})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${ar.tierColor.split(" ")[0]} border-opacity-30`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${ar.tierGlow} shadow-xl`,children:s.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${ar.tierColor.split(" ")[0]}`})}),s.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:(($i=t.gamification)==null?void 0:$i.codename)||t.name}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${ar.tierColor.split(" ")[1]}`,children:[ar.rankName," (Lvl ",be,")"]}),s.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",Ze]})]}),vt.length>1&&s.jsxs("div",{className:"mt-4 relative w-full",children:[s.jsx("select",{value:m,onChange:Ar,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:vt.map(le=>s.jsx("option",{value:le,children:le},le))}),s.jsx(Wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),s.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Pt}%`}})}),s.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[s.jsxs("span",{children:[Bt.toLocaleString()," XP (",m,")"]}),s.jsx("span",{children:"Next Rank"}),de&&s.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",de," XP"]})]})]})]}),s.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:s.jsx(_3,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-white leading-none",children:tt})]})]})}),(((mi=t.gamification)==null?void 0:mi.engagementStreak)||0)>0&&(()=>{var Re;const le=((Re=t.gamification)==null?void 0:Re.engagementStreak)||0,ve=iW(le);return s.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:s.jsx(Mu,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),s.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[le,"w"]})]}),ve>1&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((ve-1)*100),"%"]})]})]})})})(),(((go=t.gamification)==null?void 0:go.loginStreak)||0)>1&&s.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[s.jsx(aT,{className:"w-5 h-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),s.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((wl=t.gamification)==null?void 0:wl.loginStreak)||0," day streak"]})]})]}),s.jsxs("button",{onClick:()=>Xe(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[s.jsx(Uu,{className:"w-4 h-4"})," View Profile"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&s.jsxs("button",{onClick:()=>a("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:s.jsx(ew,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),s.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),s.jsx(so,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&s.jsxs("button",{onClick:()=>a("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:s.jsx(zle,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),s.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),s.jsx(so,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),s.jsx("div",{className:"lg:col-span-9 space-y-6",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[A==="MISSIONS"&&s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[hr.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),hr.map(le=>s.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:le.title}),s.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:le.type.replace("_"," ")})]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:le.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[le.statRequirements&&s.jsx("div",{className:"flex gap-2",children:Object.entries(le.statRequirements).map(([ve,Re])=>s.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[Re," ",ve]},ve))}),le.expiresAt&&s.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[s.jsx(Li,{className:"w-3 h-3"})," Expires: ",new Date(le.expiresAt).toLocaleDateString()]})]}),s.jsxs("button",{onClick:()=>Sa(le),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[s.jsx(Ru,{className:"w-4 h-4"})," Accept Contract"]})]},le.id))]}),s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[yn.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),yn.map(le=>{var Fe,ir;const ve=((Fe=en.find(Qt=>Qt.questId===le.id))==null?void 0:Fe.status)||"ACCEPTED",Re=(ir=en.find(Qt=>Qt.questId===le.id))==null?void 0:ir.deploymentRoll,Ve=le.type==="CUSTOM";return s.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:s.jsx(Os,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:le.title}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[le.type," MISSION"]})]})]}),s.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${ve==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":ve==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":ve==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:ve})]}),ve==="ACCEPTED"?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:le.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>vn(le),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[s.jsx(XH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),Ve?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),le.isGroupQuest&&s.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:s.jsx(di,{className:"w-5 h-5"})})]})]}):ve==="DEPLOYED"?s.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),s.jsx($n,{className:"w-6 h-6 text-purple-400"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),s.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:Ve?"AWAITING_HQ_SIG_VERIFICATION":Re===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),s.jsx("div",{className:"h-10 w-px bg-white/5"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),s.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),s.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),s.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:Ve?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},le.id)})]})]},"missions"),A==="RESOURCES"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(wt).length===0?s.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):s.jsx("div",{className:"space-y-4",children:Object.entries(wt).sort().map(([le,ve])=>s.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[s.jsxs("button",{onClick:()=>pr(le),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h.has(le)?s.jsx(Wa,{className:"w-4 h-4 text-purple-400"}):s.jsx(so,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:le})]}),s.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[ve.length," Files"]})]}),h.has(le)&&s.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:ve.map(Re=>{const Ve=!!Re.dueDate,Fe=Re.dueDate?new Date(Re.dueDate):null,ir=new Date,Qt=Fe?Math.ceil((Fe.getTime()-ir.getTime())/864e5):1/0,Pn=Qt<=0?"text-red-400":Qt<=2?"text-yellow-400":"text-gray-500",ha=Math.floor(Re.engagementTime/60),zi=ha>=5,ja=T[Re.id],_a=ja==null?void 0:ja.completed,Ln=Re.lessonBlocks&&Re.lessonBlocks.length>0,wr=Ln&&!Re.contentUrl;return s.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${_a?"border-green-500/20":Ln?"border-indigo-500/10":"border-white/5"}`,onClick:()=>i&&i(Re.id),children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${_a||zi?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":Re.lastEngagement?"bg-green-500/10 text-green-400":wr?"bg-indigo-500/10 text-indigo-400 group-hover:scale-110 shadow-lg group-hover:shadow-indigo-500/20":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:_a?s.jsx(zr,{className:"w-6 h-6"}):zi?s.jsx(zr,{className:"w-6 h-6"}):Re.lastEngagement?s.jsx(zr,{className:"w-5 h-5 opacity-60"}):wr?s.jsx(ll,{className:"w-6 h-6"}):FTe[Re.category||"Supplemental"]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[8px] font-bold uppercase px-1.5 py-0.5 rounded border ${wr?"bg-indigo-500/10 text-indigo-400 border-indigo-500/20":"bg-black/40 text-gray-500 border-white/5"}`,children:wr?"Lesson":Re.category}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:Re.title}),_a&&s.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[s.jsx(zr,{className:"w-2.5 h-2.5"}),"COMPLETED",((ja==null?void 0:ja.totalCompletions)||0)>1?` (${ja.totalCompletions}x)`:""]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:s.jsx("p",{className:"text-xs text-gray-500 truncate",children:Re.description})}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Re.lastEngagement&&s.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[ha,"m engaged"]}),_a&&(ja==null?void 0:ja.bestScore)!=null&&ja.bestScore>0&&s.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",ja.bestScore,"%"]}),Ln&&s.jsxs("span",{className:"text-[9px] text-indigo-400 font-bold flex items-center gap-0.5",children:[s.jsx(ll,{className:"w-3 h-3"})," ",Re.lessonBlocks.length," blocks"]}),Ve&&s.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Pn}`,children:[s.jsx(lo,{className:"w-3 h-3"}),Qt<=0?"Overdue":Qt===1?"Due tomorrow":`Due in ${Qt}d`]})]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:s.jsx(k0,{className:"w-4 h-4 text-purple-400 fill-current"})})]},Re.id)})})]},le))})},"resources"),A==="LOADOUT"&&s.jsxs(Q_e,{sensors:us,collisionDetection:r_e,modifiers:[VTe],onDragStart:on,onDragEnd:wn,children:[s.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[s.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((gi=yt.appearance)==null?void 0:gi.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),s.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[s.jsx("div",{className:"flex flex-col gap-4",children:Dn.map(le=>s.jsx(ds,{slot:le},le))}),s.jsx("div",{className:"w-40 h-full relative",children:s.jsx(lx,{equipped:me,appearance:yt.appearance,evolutionLevel:be})}),s.jsx("div",{className:"flex flex-col gap-4",children:cs.map(le=>s.jsx(ds,{slot:le},le))})]}),s.jsxs("button",{onClick:le=>{le.preventDefault(),le.stopPropagation(),k(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[s.jsx(rce,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),s.jsx("div",{className:"h-[200px]",children:s.jsx(uK,{width:"100%",height:"100%",children:s.jsxs(Dje,{cx:"50%",cy:"50%",outerRadius:"70%",data:Et,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),s.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),s.jsx(MQ,{stroke:"rgba(255,255,255,0.08)"}),s.jsx(Wx,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),s.jsx(Gx,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),s.jsx(Kx,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const le=G8(mt);return s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),s.jsx("span",{className:"text-gray-500",children:"Tech"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:mt.tech}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),s.jsx("br",{}),"Increases damage dealt to bosses."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),s.jsx("span",{className:"text-gray-500",children:"Focus"}),s.jsx("span",{className:"text-green-400 font-bold ml-auto",children:mt.focus}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),s.jsx("br",{}),"Crit chance: ",(le.critChance*100).toFixed(0),"%  Crit damage: ",le.critMultiplier.toFixed(2),"x"]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),s.jsx("span",{className:"text-gray-500",children:"Analysis"}),s.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:mt.analysis}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),s.jsx("br",{}),"Reduces boss damage by ",le.armorPercent.toFixed(0),"%."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),s.jsx("span",{className:"text-gray-500",children:"Charisma"}),s.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:mt.charisma}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),s.jsx("br",{}),"Max HP: ",le.maxHp]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"HP"}),s.jsx("span",{className:"text-emerald-400 font-bold",children:le.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Armor"}),s.jsxs("span",{className:"text-yellow-400 font-bold",children:[le.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Crit"}),s.jsxs("span",{className:"text-green-400 font-bold",children:[(le.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),s.jsx(HTe,{inventory:We,equipped:me,draggedItem:Or,onInspect:P,getSlotIcon:kn})]},"loadout"),s.jsx(fTe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:Or&&(()=>{const le=ma(Or.rarity);return s.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:s.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${le.bg} ${le.border} ${le.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[kn(Or.slot,le.text,"w-7 h-7"),s.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${le.text} drop-shadow-lg`,children:Or.baseName||Or.name.split(" ").slice(-1)[0]})]})})})()})]}),A==="ACHIEVEMENTS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(xTe,{unlockedAchievements:((xi=t.gamification)==null?void 0:xi.unlockedAchievements)||[],achievementProgress:et})},"achievements"),A==="SKILLS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(vTe,{specialization:(Ba=t.gamification)==null?void 0:Ba.specialization,skillPoints:((Na=t.gamification)==null?void 0:Na.skillPoints)||0,unlockedSkills:((q=t.gamification)==null?void 0:q.unlockedSkills)||[]})},"skills"),A==="FORTUNE"&&s.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(bTe,{currency:nt,lastSpin:(we=t.gamification)==null?void 0:we.lastWheelSpin,classType:m})},"fortune"),A==="TUTORING"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(PTe,{userId:t.id,userName:t.name,classType:m})},"tutoring"),A==="INTEL"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(UTe,{user:t,submissions:r,assignments:e,activeClass:m})},"intel")]})}),s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[s.jsx(jTe,{userId:t.id,userName:t.name,classType:m}),s.jsx(MTe,{userId:t.id,classType:m,userSection:((Ae=t.classSections)==null?void 0:Ae[m])||t.section,userClassSections:t.classSections,playerStats:mt,playerAppearance:yt.appearance,playerEquipped:me,playerEvolutionLevel:be})]})}),s.jsx(Is,{isOpen:E,onClose:()=>{k(!1),K(null),ee(null),ce(null),Z(null),Y(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:s.jsx(lx,{equipped:me,appearance:{...yt.appearance,hue:G??((Ee=yt.appearance)==null?void 0:Ee.hue)??0,bodyType:H??((ft=yt.appearance)==null?void 0:ft.bodyType)??"A",skinTone:ae??((Mt=yt.appearance)==null?void 0:Mt.skinTone)??0,hairStyle:fe??((Ct=yt.appearance)==null?void 0:Ct.hairStyle)??1,hairColor:ne??((Jt=yt.appearance)==null?void 0:Jt.hairColor)??0}})})}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),s.jsx("div",{className:"flex justify-center gap-2",children:rY.map((le,ve)=>{var Ve;const Re=(ae??((Ve=yt.appearance)==null?void 0:Ve.skinTone)??0)===ve;return s.jsx("button",{onClick:()=>ce(ve),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Re?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:le}},ve)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:pTe.map((le,ve)=>{var Ve;const Re=(fe??((Ve=yt.appearance)==null?void 0:Ve.hairStyle)??1)===ve;return s.jsx("button",{onClick:()=>Z(ve),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${Re?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:le},ve)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),s.jsx("div",{className:"flex justify-center gap-2",children:nY.map((le,ve)=>{var Ve;const Re=(ne??((Ve=yt.appearance)==null?void 0:Ve.hairColor)??0)===ve;return s.jsx("button",{onClick:()=>Y(ve),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Re?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:le}},ve)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),s.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(le=>{var Re;const ve=(H??((Re=yt.appearance)==null?void 0:Re.bodyType)??"A")===le;return s.jsx("button",{onClick:()=>ee(le),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${ve?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:le==="A"?"Alpha":le==="B"?"Beta":"Femme"},le)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(le=>{var Re;const ve=(G??((Re=yt.appearance)==null?void 0:Re.hue)??0)===le;return s.jsx("button",{onClick:()=>K(le),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${ve?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${le}, 60%, 45%)`}},le)})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{k(!1),K(null),ee(null),ce(null),Z(null),Y(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:()=>{var le,ve,Re,Ve,Fe;return Nt({hue:G??((le=yt.appearance)==null?void 0:le.hue)??0,bodyType:H??((ve=yt.appearance)==null?void 0:ve.bodyType)??"A",skinTone:ae??((Re=yt.appearance)==null?void 0:Re.skinTone)??0,hairStyle:fe??((Ve=yt.appearance)==null?void 0:Ve.hairStyle)??1,hairColor:ne??((Fe=yt.appearance)==null?void 0:Fe.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),s.jsx(Is,{isOpen:!!U,onClose:()=>P(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:U&&s.jsxs("div",{className:"space-y-6 text-gray-100",children:[s.jsxs("div",{className:`p-5 rounded-xl border ${U.runewordActive?"border-amber-500/40 runeword-active":ma(U.rarity).border} ${ma(U.rarity).bg} ${ma(U.rarity).shimmer} relative overflow-hidden`,children:[s.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${U.runewordActive?"border-amber-500/50":ma(U.rarity).border} ${ma(U.rarity).bg}`,style:{boxShadow:U.runewordActive?"0 0 20px rgba(245,158,11,0.3)":U.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":U.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:kn(U.slot,U.runewordActive?"text-amber-400":ma(U.rarity).text,"w-7 h-7")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`text-lg font-bold ${U.runewordActive?"text-amber-300":ma(U.rarity).text}`,children:U.name}),s.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[U.rarity," ",U.slot]}),U.runewordActive&&s.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(Er=qM(U))==null?void 0:Er.name})]})]}),s.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(U.stats).map(([le,ve])=>s.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[s.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:le}),s.jsxs("span",{className:"font-mono font-bold",children:["+",ve]})]},le))}),s.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:U.affixes.map((le,ve)=>s.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[le.name," (T",le.tier,")"]},ve))})]}),(U.sockets||0)>0&&(()=>{const le=U.sockets||0,ve=U.gems||[],Re=le-ve.length,Ve=qM(U);return s.jsxs("div",{className:`p-4 rounded-xl border ${Ve?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[Ve&&s.jsxs("div",{className:"mb-3 text-center",children:[s.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),s.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:Ve.name}),s.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:Ve.lore}),s.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(Ve.bonusStats).map(([Fe,ir])=>s.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",ir," ",Fe.slice(0,3).toUpperCase()]},Fe))}),Ve.bonusEffects&&Ve.bonusEffects.length>0&&s.jsx("div",{className:"mt-1",children:Ve.bonusEffects.map(Fe=>s.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:Fe.description},Fe.id))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[s.jsx(_3,{className:"w-3 h-3"})," Gem Sockets (",ve.length,"/",le,")"]}),s.jsxs("div",{className:"flex gap-2",children:[ve.map((Fe,ir)=>{const Qt=VM(U.rarity,Fe.tier,U.unsocketCount||0);return s.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:Fe.color,backgroundColor:`${Fe.color}20`,boxShadow:`0 0 8px ${Fe.color}40`},children:s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Fe.color}})}),s.jsx("span",{className:"text-[9px] text-gray-400",children:Fe.name}),s.jsxs("button",{onClick:()=>dn(ir),disabled:$||nt<Qt,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${Qt} Flux`,children:["Remove (",Qt," F)"]})]},ir)}),Array.from({length:Re}).map((Fe,ir)=>s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${ir}`))]}),Re>0&&Vt.length>0&&s.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",ei.ENCHANT," Flux)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Vt.map(Fe=>s.jsxs("button",{onClick:()=>Gr(Fe.id),disabled:$||nt<ei.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Fe.color}}),s.jsx("span",{className:"text-gray-300",children:Fe.name}),s.jsxs("span",{className:"text-gray-600 font-mono",children:["+",Fe.value]})]},Fe.id))}),ve.length>0&&!Ve&&(()=>{const Fe=ve.map(Qt=>Qt.name),ir=F8.filter(Qt=>Qt.requiredSockets===le&&Qt.pattern.slice(0,Fe.length).every((Pn,ha)=>Pn===Fe[ha]));return ir.length===0?null:s.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:ir.map(Qt=>s.jsxs("div",{children:["Possible: ",s.jsx("span",{className:"font-bold text-amber-400/80",children:Qt.name}),"  needs [",Qt.pattern.join("  "),"]"]},Qt.id))})})()]})]})})(),(U.sockets||0)<3&&s.jsxs("button",{onClick:_t,disabled:$||nt<ei.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(_3,{className:"w-4 h-4"}),"Add Socket (",ei.SOCKET," Flux)  ",U.sockets||0,"/3"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const le=U.slot==="RING"?"RING1":U.slot,ve=me[le]||(U.slot==="RING"?me.RING2:null);if(!ve||ve.id===U.id)return null;const Re=ma(ve.rarity),Ve=new Set([...Object.keys(U.stats),...Object.keys(ve.stats)]);return s.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-xs font-bold ${Re.text}`,children:ve.name}),s.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:ve.rarity})]}),s.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(Ve).map(Fe=>{const ir=U.stats[Fe]||0,Qt=ve.stats[Fe]||0,Pn=ir-Qt;return Pn===0?s.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[Fe.slice(0,3).toUpperCase(),": 0"]},Fe):s.jsxs("span",{className:`text-[10px] font-mono font-bold ${Pn>0?"text-green-400":"text-red-400"}`,children:[Fe.slice(0,3).toUpperCase(),": ",Pn>0?"":"",Math.abs(Pn)]},Fe)})})]})})(),(()=>{var ve;const le=(ve=Object.entries(me).find(([,Re])=>Re&&Re.id===U.id))==null?void 0:ve[0];return le?s.jsx("button",{onClick:()=>xn(le),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:$,children:"Unequip Gear"}):s.jsx("button",{onClick:()=>Hr(U),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:$,children:"Equip Gear"})})(),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),s.jsxs("button",{onClick:()=>Wt("RECALIBRATE"),disabled:$||nt<ei.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[ei.RECALIBRATE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),s.jsxs("button",{onClick:()=>Wt("REFORGE"),disabled:$||nt<ei.REFORGE||U.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[ei.REFORGE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),s.jsxs("button",{onClick:()=>Wt("OPTIMIZE"),disabled:$||nt<ei.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[ei.OPTIMIZE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsxs("button",{onClick:_r,disabled:$,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[s.jsx(gr,{className:"w-4 h-4"}),"Salvage for ",FM(U)," Flux"]})]})]})}),Ue&&s.jsx(zTe,{user:t,classType:m,onClose:()=>Xe(!1)}),Ye&&s.jsx(LTe,{item:Ye,onClose:()=>_e(null)}),s.jsx(Is,{isOpen:O,onClose:lt,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:s.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((le,ve)=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][ve%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},ve))}),s.jsxs("div",{className:"relative inline-block mb-6",children:[s.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),s.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),s.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:s.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:be})})]}),s.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:s.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:ar.rankName})}),s.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),I&&s.jsxs("div",{className:`${ma(I.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${ma(I.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),s.jsx("div",{className:`text-xl font-bold ${ma(I.rarity).text}`,children:I.name}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[I.rarity," ",I.slot]}),s.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(I.stats).map(([le,ve])=>s.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",ve," ",le.toUpperCase()]},le))})]})]}),s.jsx("button",{onClick:lt,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},HTe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:o}=iC({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return s.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":o?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[s.jsxs("span",{children:["Gear Storage (",t.length,")"]}),s.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[s.jsx(f0,{className:"w-3 h-3"})," Drag to equip"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>s.jsx(WTe,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>s.jsx(GTe,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},GTe=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=iC({id:`storage-cell-${t}`});return s.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},WTe=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:o,isDragging:c}=tY({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=ma(t.rarity);return s.jsxs("div",{ref:o,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var r4=typeof self<"u"?self:global;const cx=typeof navigator<"u",KTe=cx&&typeof HTMLImageElement>"u",S2=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),n4=r4.Buffer,iv=r4.BigInt,a4=!!n4,QTe=t=>t;function N2(t,e=QTe){if(S2)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let oC=r4.fetch;const XTe=t=>oC=t;if(!r4.fetch){const t=N2("http",(n=>n)),e=N2("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,o)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const x={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(x.port=Number(c));const y=(p==="https:"?await e:await t).request(x,(S=>{if(S.statusCode===301||S.statusCode===302){let N=new URL(S.headers.location,n).toString();return r(N,{headers:a}).then(i).catch(o)}i({status:S.statusCode,arrayBuffer:()=>new Promise((N=>{let w=[];S.on("data",(T=>w.push(T))),S.on("end",(()=>N(Buffer.concat(w))))}))})}));y.on("error",o),y.end()}));XTe(r)}function er(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const j2=t=>aY(t)?void 0:t,YTe=t=>t!==void 0;function aY(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(YTe).length===0)}function Da(t){let e=new Error(t);throw delete e.stack,e}function Hd(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function VA(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const FA=t=>String.fromCharCode.apply(null,t),cV=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function sY(t){return cV?cV.decode(t):a4?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(FA(t)))}class si{static from(e,r){return e instanceof this&&e.le===r?e:new si(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof si){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Da("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Da("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=si){return e instanceof DataView||e instanceof si?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Da("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new si(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return sY(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return FA(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return FA(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function qA(t,e){Da(`${t} '${e}' was not loaded, try using full build of exifr.`)}class lC extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||qA(this.kind,e),r&&(e in r||(function(n,a){Da(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||qA(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var fl=new lC("file parser"),Ra=new lC("segment parser"),bl=new lC("file reader");function JTe(t,e){return typeof t=="string"?uV(t,e):cx&&!KTe&&t instanceof HTMLImageElement?uV(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new si(t):cx&&t instanceof Blob?HA(t,e,"blob",N0):void Da("Invalid input argument")}function uV(t,e){return(r=t).startsWith("data:")||r.length>1e4?GA(t,e,"base64"):S2&&t.includes("://")?HA(t,e,"url",S0):S2?GA(t,e,"fs"):cx?HA(t,e,"url",S0):void Da("Invalid input argument");var r}async function HA(t,e,r,n){return bl.has(r)?GA(t,e,r):n?(async function(a,i){let o=await i(a);return new si(o)})(t,n):void Da(`Parser ${r} is not loaded`)}async function GA(t,e,r){let n=new(bl.get(r))(t,e);return await n.read(),n}const S0=t=>oC(t).then((e=>e.arrayBuffer())),N0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class ZTe extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function ba(t,e,r){let n=new ZTe;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function j0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const os=new Map,Bo=new Map,Pu=new Map,_u=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],op=["jfif","xmp","icc","iptc","ihdr"],_0=["tiff",...op],la=["ifd0","ifd1","exif","gps","interop"],Tu=[..._0,...la],Au=["makerNote","userComment"],lp=["translateKeys","translateValues","reviveValues","multiSegment"],Eu=[...lp,"sanitize","mergeOutput","silentErrors"];class iY{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class xm extends iY{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),er(this,"enabled",!1),er(this,"skip",new Set),er(this,"pick",new Set),er(this,"deps",new Set),er(this,"translateKeys",!1),er(this,"translateValues",!1),er(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=la.includes(e),this.canBeFiltered&&(this.dict=os.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Da(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of lp)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of e)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,_2(this.pick,this.deps)):this.enabled&&this.pick.size>0&&_2(this.pick,this.deps)}}var $s={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},dV=new Map;class L0 extends iY{static useCached(e){let r=dV.get(e);return r!==void 0||(r=new this(e),dV.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Da(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=cx?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of _u)this[e]=$s[e];for(e of Eu)this[e]=$s[e];for(e of Au)this[e]=$s[e];for(e of Tu)this[e]=new xm(e,$s[e],void 0,this)}setupFromTrue(){let e;for(e of _u)this[e]=$s[e];for(e of Eu)this[e]=$s[e];for(e of Au)this[e]=!0;for(e of Tu)this[e]=new xm(e,!0,void 0,this)}setupFromArray(e){let r;for(r of _u)this[r]=$s[r];for(r of Eu)this[r]=$s[r];for(r of Au)this[r]=$s[r];for(r of Tu)this[r]=new xm(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,la)}setupFromObject(e){let r;for(r of(la.ifd0=la.ifd0||la.image,la.ifd1=la.ifd1||la.thumbnail,Object.assign(this,e),_u))this[r]=c_(e[r],$s[r]);for(r of Eu)this[r]=c_(e[r],$s[r]);for(r of Au)this[r]=c_(e[r],$s[r]);for(r of _0)this[r]=new xm(r,$s[r],e[r],this);for(r of la)this[r]=new xm(r,$s[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,la,Tu),e.tiff===!0?this.batchEnableWithBool(la,!0):e.tiff===!1?this.batchEnableWithUserValue(la,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,la):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,la)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let o of a)this[o].enabled=!1;let i=hV(e,n);for(let[o,c]of i)_2(this[o].pick,c),this[o].enabled=!0}else if(r&&r.length){let i=hV(r,n);for(let[o,c]of i)_2(this[o].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=la.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of la)this[i].finalizeFilters()}get onlyTiff(){return!op.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of _0)this[e].enabled&&!Ra.has(e)&&qA("segment parser",e)}}function hV(t,e){let r,n,a,i,o=[];for(a of e){for(i of(r=os.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function c_(t,e){return t!==void 0?t:e!==void 0?e:void 0}function _2(t,e){for(let r of e)t.add(r)}er(L0,"default",$s);class td{constructor(e){er(this,"parsers",{}),er(this,"output",{}),er(this,"errors",[]),er(this,"pushToErrors",(r=>this.errors.push(r))),this.options=L0.useCached(e)}async read(e){this.file=await JTe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of fl)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Da("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),j2(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Ra.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,e,r),c=await o.extractThumbnail();return r.close&&r.close(),c}}async function s4(t,e){let r=new td(e);return await r.read(t),r.parse()}var eAe=Object.freeze({__proto__:null,parse:s4,Exifr:td,fileParsers:fl,segmentParsers:Ra,fileReaders:bl,tagKeys:os,tagValues:Bo,tagRevivers:Pu,createDictionary:ba,extendDictionary:j0,fetchUrlAsArrayBuffer:S0,readBlobAsArrayBuffer:N0,chunkedProps:_u,otherSegments:op,segments:_0,tiffBlocks:la,segmentsAndBlocks:Tu,tiffExtractables:Au,inheritables:lp,allFormatters:Eu,Options:L0});class i4{constructor(e,r,n){er(this,"errors",[]),er(this,"ensureSegmentChunk",(async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(c){Da(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Da("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Ra.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class ko{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(e,r={}){return new this(e,new L0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof si?e:new si(e)}constructor(e,r={},n){er(this,"errors",[]),er(this,"raw",new Map),er(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Pu.get(r),a=Bo.get(r),i=os.get(r),o=this.options[r],c=o.reviveValues&&!!n,d=o.translateValues&&!!a,h=o.translateKeys&&!!i,p={};for(let[m,x]of e)c&&n.has(m)?x=n.get(m)(x):d&&a.has(m)&&(x=this.translateValue(x,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=x;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}er(ko,"headerLength",4),er(ko,"type",void 0),er(ko,"multiSegment",!1),er(ko,"canHandle",(()=>!1));function tAe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function rAe(t){return t>=224&&t<=239}function nAe(t,e,r){for(let[n,a]of Ra)if(a.canHandle(t,e,r))return n}class fV extends i4{constructor(...e){super(...e),er(this,"appSegments",[]),er(this,"jpegSegments",[]),er(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ra.keyList())):(e=e===void 0?Ra.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Ra.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Ra.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;o.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,o,c,d,{file:h,findAll:p,wanted:m,remaining:x,options:y}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),rAe(n)){if(a=h.getUint16(e+2),i=nAe(h,e,a),i&&m.has(i)&&(o=Ra.get(i),c=o.findPosition(h,e),d=y[i],c.type=i,this.appSegments.push(c),!p&&(o.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||x.delete(i)):x.delete(i),x.size===0)))break;y.recordUnknownSegments&&(c=ko.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(tAe(n)){if(a=h.getUint16(e+2),n===218&&y.stopAfterSos!==!1)return;y.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,o,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?o=c.get(i):c.set(i,o=[]),o.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Ra.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}er(fV,"type","jpeg"),fl.set("jpeg",fV);const aAe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class sAe extends ko{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(o){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),o=a.getUint32(e+4),c=aAe[i];if(c*o<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Da(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Da(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,o);if(i===2)return Hd(a.getString(e,o));if(i===7)return a.getUint8Array(e,o);if(o===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(o),h=c;for(let p=0;p<o;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Da(`Invalid tiff type ${e}`)}}}class u_ extends sAe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Da("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Da(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,VA(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,VA(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",pV(...e.get(2),e.get(1))),e.set("longitude",pV(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of la)if(e=this[r],!aY(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function pV(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}er(u_,"type","tiff"),er(u_,"headerLength",10),Ra.set("tiff",u_);var iAe=Object.freeze({__proto__:null,default:eAe,Exifr:td,fileParsers:fl,segmentParsers:Ra,fileReaders:bl,tagKeys:os,tagValues:Bo,tagRevivers:Pu,createDictionary:ba,extendDictionary:j0,fetchUrlAsArrayBuffer:S0,readBlobAsArrayBuffer:N0,chunkedProps:_u,otherSegments:op,segments:_0,tiffBlocks:la,segmentsAndBlocks:Tu,tiffExtractables:Au,inheritables:lp,allFormatters:Eu,Options:L0,parse:s4});const cC={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},uC=Object.assign({},cC,{firstChunkSize:4e4,gps:[1,2,3,4]});async function oY(t){let e=new td(uC);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const dC=Object.assign({},cC,{tiff:!1,ifd1:!0,mergeOutput:!1});async function lY(t){let e=new td(dC);await e.read(t);let r=await e.extractThumbnail();return r&&a4?n4.from(r):r}async function cY(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const hC=Object.assign({},cC,{firstChunkSize:4e4,ifd0:[274]});async function fC(t){let e=new td(hC);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const pC=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Gd=!0,Wd=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Gd=Number(r)+.1*Number(n)<13.4,Wd=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Gd=Wd=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Gd=Wd=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Gd=Wd=Number(e)<77}}async function uY(t){let e=await fC(t);return Object.assign({canvas:Gd,css:Wd},pC[e])}class oAe extends si{constructor(...e){super(...e),er(this,"ranges",new lAe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=a4?n4.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class lAe{constructor(){er(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((o=>mV(e,o.offset,a)||mV(e,o.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let o=i.shift();o.offset=e,o.length=r,o.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function mV(t,e,r){return t<=e&&e<=r}class o4 extends oAe{constructor(e,r){super(0),er(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}bl.set("blob",class extends o4{async readWhole(){this.chunked=!1;let t=await N0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await N0(n);return this.set(a,t,!0)}});var cAe=Object.freeze({__proto__:null,default:iAe,Exifr:td,fileParsers:fl,segmentParsers:Ra,fileReaders:bl,tagKeys:os,tagValues:Bo,tagRevivers:Pu,createDictionary:ba,extendDictionary:j0,fetchUrlAsArrayBuffer:S0,readBlobAsArrayBuffer:N0,chunkedProps:_u,otherSegments:op,segments:_0,tiffBlocks:la,segmentsAndBlocks:Tu,tiffExtractables:Au,inheritables:lp,allFormatters:Eu,Options:L0,parse:s4,gpsOnlyOptions:uC,gps:oY,thumbnailOnlyOptions:dC,thumbnail:lY,thumbnailUrl:cY,orientationOnlyOptions:hC,orientation:fC,rotations:pC,get rotateCanvas(){return Gd},get rotateCss(){return Wd},rotation:uY});bl.set("url",class extends o4{async readWhole(){this.chunked=!1;let t=await S0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await oC(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==e&&(this.size=t+o),this.set(i,t,!0)}});si.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof iv!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),iv(e)<<iv(32)|iv(r)):void Da("Trying to read 64b value but JS can only handle 53b numbers.")};class uAe extends i4{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class dY extends uAe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,c]=i;await this.file.ensureChunk(o,c);let d=4+this.file.getUint32(o);o+=d,c-=d,await this.registerSegment("tiff",o,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,o=e.start,c=this.file.getUint16(o);for(o+=2;c--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[o,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,x=this.file.getUintBytes(n,m);for(n+=m;x--;){let y=this.file.getUintBytes(n,d);n+=d+h+2+o;let S=this.file.getUint16(n);if(n+=2,y===r)return S>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=S*p}}}class hY extends dY{}er(hY,"type","heic");class gV extends dY{}er(gV,"type","avif"),fl.set("heic",hY),fl.set("avif",gV),ba(os,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ba(os,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ba(os,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ba(Bo,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Xm=ba(Bo,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const xV={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Xm.set(37392,xV),Xm.set(41488,xV);const d_={0:"Normal",1:"Low",2:"High"};function yV(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function vV(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function h_(t){if(typeof t=="string"){var[e,r,n,a,i,o]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(c.setHours(a),c.setMinutes(i),c.setSeconds(o)),Number.isNaN(+c)?t:c}}function ym(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(bV(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(bV(t[r],t[r+1]));return Hd(String.fromCodePoint(...e))}function bV(t,e){return t<<8|e}Xm.set(41992,d_),Xm.set(41993,d_),Xm.set(41994,d_),ba(Pu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?sY(t):t}],[306,h_],[40091,ym],[40092,ym],[40093,ym],[40094,ym],[40095,ym]]),ba(Pu,"exif",[[40960,vV],[36864,vV],[36867,h_],[36868,h_],[40962,yV],[40963,yV]]),ba(Pu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class f_ extends ko{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:si.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let o={},c={};for(let d of gY)o[d]=[],c[d]=0;return i.replace(pAe,((d,h,p)=>{if(h==="<"){let m=++c[p];return o[p].push(m),`${d}#${m}`}return`${d}#${o[p].pop()}`}))})(e);let r=Xh.findAll(e,"rdf","Description");r.length===0&&r.push(new Xh("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let o of i.properties)n=fAe(o.ns,a),fY(o,n);return(function(i){let o;for(let c in i)o=i[c]=j2(i[c]),o===void 0&&delete i[c];return j2(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}er(f_,"type","xmp"),er(f_,"multiSegment",!0),Ra.set("xmp",f_);class T2{static findAll(e){return pY(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(T2.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=mY(a),new T2(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Xh{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return pY(e,a).map(Xh.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new Xh(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=T2.findAll(n),this.children=Xh.findAll(a),this.value=this.children.length===0?mY(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return hAe(this.children.map(dAe));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)fY(r,e);return this.value!==void 0&&(e.value=this.value),j2(e)}}function fY(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var dAe=t=>t.serialize(),hAe=t=>t.length===1?t[0]:t,fAe=(t,e)=>e[t]?e[t]:e[t]={};function pY(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function mY(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const gY=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],pAe=new RegExp(`(<|\\/)(${gY.join("|")})`,"g");var mAe=Object.freeze({__proto__:null,default:cAe,Exifr:td,fileParsers:fl,segmentParsers:Ra,fileReaders:bl,tagKeys:os,tagValues:Bo,tagRevivers:Pu,createDictionary:ba,extendDictionary:j0,fetchUrlAsArrayBuffer:S0,readBlobAsArrayBuffer:N0,chunkedProps:_u,otherSegments:op,segments:_0,tiffBlocks:la,segmentsAndBlocks:Tu,tiffExtractables:Au,inheritables:lp,allFormatters:Eu,Options:L0,parse:s4,gpsOnlyOptions:uC,gps:oY,thumbnailOnlyOptions:dC,thumbnail:lY,thumbnailUrl:cY,orientationOnlyOptions:hC,orientation:fC,rotations:pC,get rotateCanvas(){return Gd},get rotateCss(){return Wd},rotation:uY});let wV=N2("fs",(t=>t.promises));bl.set("fs",class extends o4{async readWhole(){this.chunked=!1,this.fs=await wV;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await wV,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});bl.set("base64",class extends o4{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let c=Math.min(e,this.size-t);if(a4){let d=n4.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class SV extends i4{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(VA(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}er(SV,"type","tiff"),fl.set("tiff",SV);let gAe=N2("zlib");const xAe=["ihdr","iccp","text","itxt","exif"];class NV extends i4{constructor(...e){super(...e),er(this,"catchError",(r=>this.errors.push(r))),er(this,"metaChunks",[]),er(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),o=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:o,offset:e,length:c,start:e+4+4,size:a,marker:i};xAe.includes(o)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),S2){let c=await gAe,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}er(NV,"type","png"),fl.set("png",NV),ba(os,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),j0(os,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let jV=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];j0(os,"ifd0",jV),j0(os,"exif",jV),ba(Bo,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class p_ extends ko{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}er(p_,"type","jfif"),er(p_,"headerLength",9),Ra.set("jfif",p_),ba(os,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class _V extends ko{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}er(_V,"type","ihdr"),Ra.set("ihdr",_V),ba(os,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ba(Bo,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Cv extends ko{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,o=0;for(let h of a)o+=h.length;let c=new i(o),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new si(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Da("ICC header is too short");for(let[r,n]of Object.entries(yAe)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:o}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Hd(this.chunk.getString(e+12,r))}parseText(e,r){return Hd(this.chunk.getString(e+8,r-8))}parseSig(e){return Hd(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,o=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,x=Hd(r.getUnicodeString(m,p));o.push({lang:d,country:h,text:x}),i+=a}return n===1?o[0].text:o}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}er(Cv,"type","icc"),er(Cv,"multiSegment",!0),er(Cv,"headerLength",18);const yAe={4:Fl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:Fl,16:Fl,20:Fl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),o=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,o,c))},36:Fl,40:Fl,48:Fl,52:Fl,64:(t,e)=>t.getUint32(e),80:Fl};function Fl(t,e){return Hd(t.getString(e,4))}Ra.set("icc",Cv),ba(os,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const ov={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},TV={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ba(Bo,"icc",[[4,ov],[12,TV],[40,Object.assign({},ov,TV)],[48,ov],[80,ov],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class lv extends ko{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(o,this.pluralizeValue(e.get(o),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}er(lv,"type","iptc"),er(lv,"translateValues",!1),er(lv,"reviveValues",!1),Ra.set("iptc",lv),ba(os,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ba(Bo,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const vm=["Monday","Tuesday","Wednesday","Thursday","Friday"],vAe=({user:t})=>{const e=Pa(),{confirm:r}=Po(),n=_.useMemo(()=>De.getWeekId(),[]),[a,i]=_.useState([]),[o,c]=_.useState("Monday"),[d,h]=_.useState(!1),p=_.useRef(null),[m,x]=_.useState(!1),y=t.enrolledClasses||(t.classType?[t.classType]:[]),[S,N]=_.useState(t.classType||y[0]||"Uncategorized");_.useEffect(()=>{const A=new Date().toLocaleDateString("en-US",{weekday:"long"});vm.includes(A)&&c(A)},[]),_.useEffect(()=>{const A=De.subscribeToEvidence(t.id,n,i);return()=>A()},[t.id,n]);const w=_.useMemo(()=>{const A=y[0]||"Uncategorized";return a.filter(E=>E.classType?E.classType===S:S===A)},[a,S,y]),T=A=>w.find(E=>E.dayOfWeek===A),C=A=>A?new Date(A).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,O=async A=>{var k;const E=(k=A.target.files)==null?void 0:k[0];if(E){h(!0);try{let U=null;if(E.type.startsWith("image/"))try{const ae=await mAe.parse(E,["DateTimeOriginal"])||{};ae.DateTimeOriginal&&(U=ae.DateTimeOriginal.toISOString())}catch(ae){console.warn("EXIF extraction failed",ae)}const P=S.replace(/[^a-zA-Z0-9]/g,"_"),$=Math.random().toString(36).substring(2,9),B=Pm(Lm,`evidence/${t.id}/${n}/${P}_${o}_${$}`);await X_(B,E);const G=await Yv(B),K=T(o),ee={id:`${t.id}_${n}_${o}_${P}`,studentId:t.id,weekId:n,classType:S,dayOfWeek:o,imageUrl:G,timestamp:new Date().toISOString(),exifDate:U,reflection:(K==null?void 0:K.reflection)||""};await De.uploadEvidence(ee)}catch(U){e.error("Upload failed: "+(U instanceof Error?U.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},L=async(A,E)=>{const k=T(A);k&&k.reflection!==E&&await De.uploadEvidence({...k,reflection:E})},I=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${S} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){x(!0);try{const E=new KJ,k=E.internal.pageSize.getWidth(),U=E.internal.pageSize.getHeight(),P=20,$=k-P*2,B=U-P;E.setFillColor(15,7,32),E.rect(0,0,k,40,"F"),E.setTextColor(255,255,255),E.setFontSize(22),E.setFont("helvetica","bold"),E.text("WEEKLY PROGRESS REPORT",P,18),E.setFontSize(10),E.setFont("helvetica","normal"),E.text(`Operative: ${t.name.toUpperCase()}`,P,28),E.text(`Class: ${S}`,P,33),E.text(`Cycle ID: ${n}`,P,38),E.text(`Generated: ${new Date().toLocaleDateString()}`,k-P,33,{align:"right"});let G=55;const K=[...w].sort((H,ee)=>vm.indexOf(H.dayOfWeek)-vm.indexOf(ee.dayOfWeek));for(const H of K){let ee=null,ae="JPEG",ce=0,fe=0,Z=!1;try{const _e=await fetch(H.imageUrl);if(!_e.ok)throw new Error(`Image fetch failed: ${_e.statusText}`);const he=await _e.blob();ee=await new Promise((Ne,Ke)=>{const at=new FileReader;at.onloadend=()=>Ne(at.result),at.onerror=Ke,at.readAsDataURL(he)}),he.type==="image/png"&&(ae="PNG"),he.type==="image/webp"&&(ae="WEBP");const Q=E.getImageProperties(ee),X=Q.width/Q.height,Se=100;ce=$,fe=ce/X,fe>Se&&(fe=Se,ce=fe*X)}catch(_e){console.warn("Image processing error for PDF",_e),Z=!0,fe=15}const de=20+fe+12;G+de>B&&(E.addPage(),G=P),E.setDrawColor(200,200,200),E.setLineWidth(.5),E.line(P,G,k-P,G),G+=6,E.setTextColor(15,7,32),E.setFontSize(16),E.setFont("helvetica","bold"),E.text(H.dayOfWeek.toUpperCase(),P,G);const ye=C(H.exifDate)||C(H.timestamp);if(E.setFontSize(9),E.setFont("helvetica","italic"),E.setTextColor(100,100,100),E.text(`Captured: ${ye}`,k-P,G,{align:"right"}),G+=10,!Z&&ee){const _e=(k-ce)/2;E.addImage(ee,ae,_e,G,ce,fe),G+=fe+12}else E.setTextColor(255,0,0),E.setFontSize(8),E.text("[Image Error]",P,G),G+=15;E.setFont("helvetica","normal"),E.setFontSize(10);const Ue=H.reflection||"No reflection logged for this cycle.",Xe=E.splitTextToSize(Ue,$),Ye=Xe.length*5+15;G+Ye>B&&(E.addPage(),G=P),E.setTextColor(15,7,32),E.setFontSize(11),E.setFont("helvetica","bold"),E.text("DAILY REFLECTION:",P,G),G+=6,E.setFont("helvetica","normal"),E.setFontSize(10),E.setTextColor(60,60,60),E.text(Xe,P,G),G+=Xe.length*5+25}E.save(`Report_${S.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await De.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(E){console.error("PDF generation failed:",E),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{x(!1)}}},R=T(o);return s.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[s.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[s.jsx(zR,{className:"w-7 h-7"})," Weekly Evidence Log"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.length>1?s.jsxs("div",{className:"relative group",children:[s.jsx("select",{value:S,onChange:A=>N(A.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:y.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsx(Wa,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):s.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:S}),s.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),s.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),s.jsxs("button",{onClick:I,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?s.jsx(ks,{className:"w-5 h-5 animate-spin"}):s.jsx(Ale,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),s.jsx("input",{type:"file",ref:p,onChange:O,className:"hidden",accept:"image/*"}),s.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:vm.map(A=>{const E=T(A),k=o===A;return s.jsxs("button",{onClick:()=>c(A),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${k?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${k?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",vm.indexOf(A)+1]}),s.jsx("span",{className:"font-bold text-sm",children:A}),E&&s.jsx("div",{className:`absolute top-2 right-2 ${k?"text-emerald-200":"text-emerald-500"}`,children:s.jsx(u0,{className:"w-3 h-3"})})]},A)})}),s.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(tw,{className:"w-4 h-4"})," Evidence Capture (",S,")"]}),R&&s.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[s.jsx(lo,{className:"w-3 h-3"}),C(R.exifDate)||C(R.timestamp)]})]}),s.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:R?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:R.imageUrl,alt:o,className:"w-full h-full object-contain bg-black/20"}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},children:[s.jsx(ul,{className:"w-8 h-8 text-emerald-400"}),s.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):s.jsxs("button",{onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?s.jsx(ks,{className:"w-10 h-10 animate-spin text-emerald-500"}):s.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:s.jsx(zR,{className:"w-8 h-8"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),s.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),s.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[s.jsx("div",{className:"mb-2",children:s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(h0,{className:"w-4 h-4"})," Daily Reflection"]})}),R?s.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${o} in ${S}...`,defaultValue:R.reflection,onBlur:A=>L(o,A.target.value)},o):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[s.jsx("div",{className:"mb-2 opacity-30",children:s.jsx(so,{className:"w-6 h-6"})}),s.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),s.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},bAe=({user:t})=>{const e=Pa(),[r,n]=_.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=_.useState(""),[o,c]=_.useState(""),[d,h]=_.useState("");_.useEffect(()=>{const x=r.content.replace(/\$(.*?)\$/g,(y,S)=>{try{return pb.renderToString(S,{throwOnError:!1})}catch{return S}}).replace(/\n/g,"<br/>");i(x)},[r.content]);const p=async()=>{await De.saveLabReport(r),await De.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const x=parseFloat(o),y=parseFloat(d);!isNaN(x)&&!isNaN(y)&&(n(S=>({...S,dataPoints:[...S.dataPoints,{x,y}].sort((N,w)=>N.x-w.x)})),c(""),h(""))};return s.jsxs("div",{className:"h-full flex flex-col gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[s.jsx(ew,{className:"w-6 h-6"})," Physics Laboratory"]}),s.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[s.jsx(b8,{className:"w-4 h-4"})," Save Report"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:s.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),s.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[s.jsxs("div",{className:"w-1/3",children:[s.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"number",placeholder:"X",value:o,onChange:x=>c(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),s.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:x=>h(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),s.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(uK,{width:"100%",height:"100%",children:s.jsxs(Pje,{children:[s.jsx(mX,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx(Kw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),s.jsx(Qw,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),s.jsx(Ko,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),s.jsx(Xx,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),s.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:s.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[s.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:x=>n(y=>({...y,content:x.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),s.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:rW.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},wAe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],SAe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],NAe=({userId:t,classType:e,onClose:r})=>{var L,I,R,A,E;const[n,a]=_.useState(null),[i,o]=_.useState(!0);if(_.useEffect(()=>{(async()=>{const U=await De.getPublicProfile(t);a(U),o(!1)})()},[t]),i)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=m0(p),x=sW(p),{equipped:y,appearance:S}=Hu(n,e),N=W8({gamification:{...c,equipped:y}}),w=g0(y),T=((I=c.classXp)==null?void 0:I[e])||0,C=Object.values(y).filter(Boolean),O=H8(C);return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:s.jsx(Xn,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-32 shrink-0",children:s.jsx(lx,{equipped:y,appearance:S})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),s.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[x.name," - Level ",p]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($n,{className:"w-3 h-3 text-cyan-400"}),s.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[T.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ui,{className:"w-3 h-3 text-yellow-400"}),s.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(Os,{className:"w-3 h-3"})," Stats"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:wAe.map(({key:k,label:U,color:P,icon:$})=>{const B=N[k]||0;return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:$}),s.jsx("span",{className:"text-xs text-gray-400",children:U}),s.jsx("span",{className:`text-sm font-bold ${P} ml-auto`,children:B})]},k)})})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(ui,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:SAe.map(k=>{const U=y[k];if(!U)return s.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[s.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:k}),s.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},k);const P=ma(U.rarity);return s.jsxs("div",{className:`p-2 rounded-lg border ${P.border} ${P.bg}`,children:[s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:k}),s.jsx("div",{className:`text-xs font-bold truncate ${P.text}`,children:U.name}),s.jsx("div",{className:"text-[9px] text-gray-500",children:U.rarity})]},k)})})]}),O.length>0&&s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(Ox,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),O.map(({set:k,activeBonus:U})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[s.jsx("div",{className:"text-xs font-bold text-purple-400",children:k.name}),s.jsxs("div",{className:"text-[10px] text-gray-400",children:[U.label,": ",U.effects.map(P=>`+${P.value} ${P.stat}`).join(", ")]})]},k.id))]}),(((R=c.unlockedAchievements)==null?void 0:R.length)||0)>0&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(A=c.unlockedAchievements)==null?void 0:A.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(E=c.unlockedAchievements)==null?void 0:E.slice(0,12).map(k=>s.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:k.replace(/_/g," ")},k))})]})]})})},jAe=()=>s.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>s.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[s.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),s.jsxs("div",{className:"space-y-2 text-right",children:[s.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),_Ae=({user:t})=>{var m;const[e,r]=_.useState([]),[n,a]=_.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||Dr.AP_PHYSICS),[i,o]=_.useState(!0),[c,d]=_.useState(null);_.useEffect(()=>{const x=De.subscribeToLeaderboard(y=>{r(y),o(!1)});return()=>x()},[]);const h=_.useMemo(()=>{const x=t.enrolledClasses||[];if(x.length>0)return x.sort();const y=new Set;return e.forEach(S=>{var N;return(N=S.enrolledClasses)==null?void 0:N.forEach(w=>y.add(w))}),Array.from(y).sort()},[t.enrolledClasses,e]),p=_.useMemo(()=>e.filter(x=>{var y;return(y=x.enrolledClasses)==null?void 0:y.includes(n)}).sort((x,y)=>{var w,T,C,O;const S=((T=(w=x.gamification)==null?void 0:w.classXp)==null?void 0:T[n])||0;return(((O=(C=y.gamification)==null?void 0:C.classXp)==null?void 0:O[n])||0)-S}).slice(0,10),[e,n]);return s.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),s.jsxs("div",{className:"inline-block relative",children:[s.jsxs("select",{value:n,onChange:x=>a(x.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(x=>s.jsx("option",{value:x,children:x},x)),h.length===0&&s.jsx("option",{children:n})]}),s.jsx(Wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?s.jsx(jAe,{}):s.jsxs(s.Fragment,{children:[p.length>=3&&s.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(x=>{var A,E,k,U;const y=p[x];if(!y)return null;const S=(A=y.settings)==null?void 0:A.privacyMode,N=S?((E=y.gamification)==null?void 0:E.codename)||"Unknown Agent":y.name,w=((U=(k=y.gamification)==null?void 0:k.classXp)==null?void 0:U[n])||0,T=Math.floor(w/1e3)+1,C=m0(T),O=x===0,L=["h-28","h-20","h-16"],I=["w-20 h-20","w-14 h-14","w-14 h-14"],R=[{icon:s.jsx(cl,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:s.jsx(I1,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:s.jsx(I1,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return s.jsxs("div",{className:`flex flex-col items-center ${O?"order-2":x===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+x*.15}s both`},children:[s.jsxs("div",{className:`relative mb-2 ${O?"mb-3":""}`,children:[s.jsx("div",{className:`${I[x]} rounded-full p-0.5 bg-white/10 ring-2 ${R[x].ring} relative ${O?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:s.jsx("img",{src:y.avatarUrl,alt:N,className:`w-full h-full rounded-full border-2 ${C.tierColor.split(" ")[0]} object-cover`})}),s.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${R[x].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:R[x].icon})]}),s.jsxs("div",{className:`text-center ${O?"mt-2":"mt-1"}`,children:[s.jsx("div",{className:`font-bold truncate max-w-[100px] ${O?"text-sm text-white":"text-xs text-gray-300"} ${S?"italic":""}`,children:N}),s.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${O?"text-xl":"text-base"}`,children:w.toLocaleString()}),s.jsx("div",{className:`text-[9px] font-mono uppercase ${C.tierColor.split(" ")[1]}`,children:C.rankName}),s.jsxs("button",{onClick:()=>d(y.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[s.jsx(Uu,{className:"w-3 h-3"})," Inspect"]})]}),s.jsx("div",{className:`${L[x]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${x===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":x===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},y.id)})}),s.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((x,y)=>{var L,I,R,A;const S=p.length>=3?y+3:y,N=(L=x.settings)==null?void 0:L.privacyMode,w=N?((I=x.gamification)==null?void 0:I.codename)||"Unknown Agent":x.name,T=((A=(R=x.gamification)==null?void 0:R.classXp)==null?void 0:A[n])||0,C=Math.floor(T/1e3)+1,O=m0(C);return s.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*S}s both`},children:[s.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[S<3&&S===0&&s.jsx(cl,{className:"w-6 h-6 text-yellow-400 mx-auto"}),S<3&&S===1&&s.jsx(I1,{className:"w-6 h-6 text-gray-300 mx-auto"}),S<3&&S===2&&s.jsx(I1,{className:"w-6 h-6 text-amber-600 mx-auto"}),S>=3&&`#${S+1}`]}),s.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[s.jsx("img",{src:x.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${O.tierColor.split(" ")[0]}`}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:C})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:`text-base font-bold truncate ${N?"text-purple-300 italic":"text-white"}`,children:[w,N&&s.jsx(df,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${O.tierColor.split(" ")[1]}`,children:O.rankName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:T.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),s.jsx("button",{onClick:()=>d(x.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:s.jsx(Uu,{className:"w-4 h-4"})})]},x.id)}),p.length===0&&s.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[s.jsx(di,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&s.jsx(NAe,{userId:c,classType:n,onClose:()=>d(null)})]})};class TAe extends se.Component{constructor(r){super(r);RI(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),s.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&s.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),s.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[s.jsx(ib,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const AV={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:s.jsx(Ro,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:s.jsx(GH,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:s.jsx(Ox,{className:"w-4 h-4"})}},AAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},m_=3;function g_(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const EAe=({assignment:t})=>{const e=Pa(),[r,n]=_.useState([]),[a,i]=_.useState([]),[o,c]=_.useState(!0),[d,h]=_.useState(!1),[p,m]=_.useState({}),[x,y]=_.useState(1),[S,N]=_.useState(null),[w,T]=_.useState(new Set),C=_.useRef({engagementTime:0}),O=_.useRef(Date.now());_.useEffect(()=>{const G=setInterval(()=>{Date.now()-O.current<6e4&&(C.current.engagementTime+=1)},1e3);return()=>clearInterval(G)},[]),_.useEffect(()=>{const G=()=>{O.current=Date.now()},K=["mousemove","keydown","scroll","click"];return K.forEach(H=>window.addEventListener(H,G)),()=>K.forEach(H=>window.removeEventListener(H,G))},[]),_.useEffect(()=>()=>{var K;const G=C.current.engagementTime;if(G>=5){const H=(K=T_().currentUser)==null?void 0:K.uid;H&&De.submitReviewEngagement(H,t.id,t.title,t.classType,G).catch(()=>{})}},[t.id,t.title,t.classType]);const L=_.useCallback(G=>{const K=g_(G.filter(ae=>ae.tier===1),m_),H=g_(G.filter(ae=>ae.tier===2),m_),ee=g_(G.filter(ae=>ae.tier===3),m_);i([...K,...H,...ee]),m({}),N(null)},[]);_.useEffect(()=>{(async()=>{var K;c(!0),h(!1);try{const H=await ga(ot(Me,"question_banks",t.id));if(!H.exists()){h(!0);return}const ee=H.data().questions||[];n(ee),L(ee)}catch(H){console.error("Failed to load question bank:",H),h(!0);return}finally{c(!1)}try{const H=(K=T_().currentUser)==null?void 0:K.uid;if(H){const ee=await ga(ot(Me,"review_progress",`${H}_${t.id}`));ee.exists()&&T(new Set(ee.data().answeredQuestions||[]))}}catch(H){console.warn("Could not load review progress:",H)}})()},[t.id,L]);const I=()=>{r.length>0&&L(r)},R=(G,K,H)=>{const ee=p[G];if(!(ee!=null&&ee.submitted))if(H==="multiple_select"||H==="ranking"){const ae=(ee==null?void 0:ee.selected)||[],ce=ae.includes(K)?ae.filter(fe=>fe!==K):[...ae,K];m(fe=>({...fe,[G]:{...fe[G],selected:ce,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(ae=>({...ae,[G]:{selected:K,submitted:!1,correct:!1,xpAwarded:!1}}))},A=(G,K)=>{var H;(H=p[G])!=null&&H.submitted||m(ee=>({...ee,[G]:{...ee[G],linkedSelected:K}}))},E=async G=>{const K=p[G.id];if(!(K!=null&&K.selected))return;let H=!1;if(G.type==="multiple_select"||G.type==="ranking"){const ee=K.selected,ae=G.correctAnswer;H=ee.length===ae.length&&ee.every((ce,fe)=>ce===ae[fe])}else G.type==="linked_mc"?H=K.selected===G.correctAnswer&&(!G.linkedFollowUp||K.linkedSelected===G.linkedFollowUp.correctAnswer):H=K.selected===G.correctAnswer;if(H)if(w.has(G.id))m(ee=>({...ee,[G.id]:{...ee[G.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(ee=>({...ee,[G.id]:{...ee[G.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await eT({assignmentId:t.id,questionId:G.id,xpAmount:G.xp,classType:t.classType})).data.awarded?(e.success(`+${G.xp} XP earned!`),m(ce=>({...ce,[G.id]:{...ce[G.id],submitted:!0,correct:!0,xpAwarded:!0}})),T(ce=>new Set([...ce,G.id]))):e.success("Correct! (XP already claimed)")}catch(ee){console.error("XP award error:",ee)}}else{const ee=Math.ceil(G.xp/2);m(ae=>({...ae,[G.id]:{...ae[G.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:ee}})),e.error(`-${ee} XP penalty`);try{await Xoe({assignmentId:t.id,questionId:G.id,classType:t.classType})}catch(ae){console.error("Penalty error:",ae)}}},k=_.useMemo(()=>a.filter(G=>G.tier===x),[a,x]),U=_.useMemo(()=>Object.entries(p).filter(([,G])=>G.correct&&G.xpAwarded).reduce((G,[K])=>{var H;return G+(((H=a.find(ee=>ee.id===K))==null?void 0:H.xp)||0)},0),[p,a]),P=_.useMemo(()=>Object.values(p).reduce((G,K)=>G+(K.penalty||0),0),[p]),$=_.useMemo(()=>a.reduce((G,K)=>G+K.xp,0),[a]),B=_.useMemo(()=>a.length>0&&a.every(G=>{var K;return(K=p[G.id])==null?void 0:K.submitted}),[a,p]);return o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(ks,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Ro,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ro,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),s.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($n,{className:"w-4 h-4 text-yellow-400"}),s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:U}),P>0&&s.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",P]}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",$," XP"]})]}),s.jsxs("button",{onClick:I,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[s.jsx(ib,{className:"w-3 h-3"})," New Set"]})]})]}),s.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(G=>{const K=AV[G],H=a.filter(ce=>ce.tier===G),ee=H.filter(ce=>{var fe;return(fe=p[ce.id])==null?void 0:fe.submitted}).length,ae=H.filter(ce=>{var fe;return(fe=p[ce.id])==null?void 0:fe.correct}).length;return s.jsxs("button",{onClick:()=>y(G),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${x===G?`${K.bg} ${K.color} ${K.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[K.icon,s.jsx("span",{className:"hidden sm:inline",children:K.name}),s.jsxs("span",{className:"sm:hidden",children:["Tier ",G]}),ee>0&&s.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ae===H.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ae,"/",H.length]})]},G)})}),B&&s.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),s.jsxs("button",{onClick:I,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[s.jsx(ib,{className:"w-3 h-3"})," New Questions"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[k.map((G,K)=>{const H=p[G.id],ee=S===G.id,ae=H==null?void 0:H.submitted,ce=H==null?void 0:H.correct,fe=AV[G.tier];return s.jsxs("div",{className:`rounded-2xl border transition-all ${ae?ce?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":ee?`${fe.border} ${fe.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[s.jsxs("button",{onClick:()=>N(ee?null:G.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ae?ce?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${fe.bg} ${fe.color}`}`,children:ae?ce?s.jsx(zr,{className:"w-4 h-4"}):s.jsx(oo,{className:"w-4 h-4"}):K+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${fe.color}`,children:G.bloomsLevel}),s.jsx("span",{className:"text-[9px] text-gray-600",children:""}),s.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:AAe[G.type]||G.type}),s.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx($n,{className:"w-3 h-3"}),G.xp," XP"]}),s.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(G.xp/2)," if wrong"]})]}),s.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:G.stem})]}),s.jsx(so,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${ee?"rotate-90":""}`})]}),ee&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[G.context&&s.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:G.context}),G.type==="ranking"?s.jsx(IAe,{question:G,answer:H,onSelect:R}):G.type==="multiple_select"?s.jsx(kAe,{question:G,answer:H,onSelect:R}):s.jsx(CAe,{question:G,answer:H,onSelect:R}),G.type==="linked_mc"&&G.linkedFollowUp&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[s.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),s.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:G.linkedFollowUp.stem}),s.jsx("div",{className:"space-y-2",children:G.linkedFollowUp.options.map(Z=>{const ne=(H==null?void 0:H.linkedSelected)===Z.id,Y=ae,de=Z.id===G.linkedFollowUp.correctAnswer;return s.jsxs("button",{onClick:()=>A(G.id,Z.id),disabled:ae,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${Y?de?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ne?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ne?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Z.id.toUpperCase(),"."]})," ",Z.text]},Z.id)})})]}),ae?s.jsxs("div",{className:`p-4 rounded-xl border ${ce?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ce?s.jsx(zr,{className:"w-5 h-5 text-emerald-400"}):s.jsx(oo,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:`font-bold text-sm ${ce?"text-emerald-400":"text-red-400"}`,children:ce?`Correct! +${G.xp} XP`:`Incorrect  ${(H==null?void 0:H.penalty)||Math.ceil(G.xp/2)} XP penalty`})]}),s.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:G.explanation})]}):s.jsx("button",{onClick:()=>E(G),disabled:!(H!=null&&H.selected)||Array.isArray(H==null?void 0:H.selected)&&H.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},G.id)}),k.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[s.jsx(df,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},CAe=({question:t,answer:e,onSelect:r})=>s.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,o=n.id===t.correctAnswer;return s.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?o?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),kAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const o=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return s.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":o?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":o?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${o?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:o&&s.jsx(zr,{className:"w-3 h-3 text-white"})}),s.jsxs("span",{children:[s.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},IAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[s.jsx(J2,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&s.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((o,c)=>{const d=t.options.find(p=>p.id===o),h=a&&i[c]===o;return s.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},o)})}),t.options.map(o=>{const c=n.includes(o.id),d=n.indexOf(o.id);return s.jsxs("button",{onClick:()=>r(t.id,o.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?s.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):s.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),o.text]},o.id)})]})};function OAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${pb.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return pb.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const RAe=({assignment:t,onComplete:e})=>{const[r,n]=_.useState(null),[a,i]=_.useState(!0),[o,c]=_.useState(!1),d=_.useRef(Zv()),h=_.useRef(Date.now()),p=_.useRef(e),[m,x]=_.useState(!0),[y,S]=_.useState(0);_.useEffect(()=>{p.current=e},[e]);const N=_.useCallback(()=>{h.current=Date.now(),m||x(!0)},[m]);_.useEffect(()=>{const T=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,S(d.current.engagementTime),m||x(!0)):m&&x(!1)},1e3);return()=>clearInterval(T)},[m]),_.useEffect(()=>{const T=["mousemove","keydown","scroll","click"];return T.forEach(C=>window.addEventListener(C,N)),()=>{T.forEach(C=>window.removeEventListener(C,N))}},[N]),_.useEffect(()=>()=>{p.current(d.current)},[]),_.useEffect(()=>{(async()=>{i(!0);try{const C=await ga(ot(Me,"reading_materials",t.id));C.exists()?n(C.data()):c(!0)}catch(C){console.error("Failed to load reading material:",C),c(!0)}finally{i(!1)}})()},[t.id]);const w=_.useMemo(()=>r?r.sections.map(T=>({title:T.title,html:OAe(T.content)})):[],[r]);return a?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(ks,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):o||!r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(Ga,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?s.jsx(g8,{className:"w-4 h-4"}):s.jsx(lo,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(y/60),"m ",y%60,"s"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Li,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:N,children:s.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),s.jsx("div",{className:"space-y-10",children:w.map((T,C)=>s.jsxs("div",{className:"group",children:[s.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[s.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:C+1}),T.title]}),s.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:T.html}})]},C))}),s.jsx("div",{className:"mt-12 mb-4 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[s.jsx(Ga,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},MAe=({user:t})=>{const[e,r]=_.useState(!1),[n,a]=_.useState(""),[i,o]=_.useState("bug"),[c,d]=_.useState(!1),[h,p]=_.useState(!1),m=async()=>{if(n.trim()){d(!0);try{await De.submitBugReport({userId:t.id,userName:t.name,userEmail:t.email,category:i,description:n.trim(),page:window.location.pathname,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}),p(!0),setTimeout(()=>{p(!1),r(!1),a("")},2e3)}catch{}finally{d(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 left-4 z-40 p-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-full text-gray-400 hover:text-white transition-all shadow-lg backdrop-blur-md group",title:"Report a bug",children:s.jsx(BR,{className:"w-4 h-4 group-hover:text-amber-400 transition"})}),e&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:()=>r(!1),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsx("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-md shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-300",onClick:x=>x.stopPropagation(),children:h?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(u0,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Report Submitted"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Thanks for helping improve Porter Portal!"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(BR,{className:"w-5 h-5 text-amber-400"})," Report an Issue"]}),s.jsx("button",{onClick:()=>r(!1),className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Xn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:["bug","feature","other"].map(x=>s.jsx("button",{onClick:()=>o(x),className:`flex-1 px-3 py-2 rounded-xl text-xs font-bold transition border ${i===x?"bg-purple-600/60 text-white border-purple-500/50":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10"}`,children:x==="bug"?"Bug":x==="feature"?"Feature Request":"Other"},x))}),s.jsx("textarea",{value:n,onChange:x=>a(x.target.value),placeholder:"Describe what happened or what you'd like to see...",rows:4,maxLength:1e3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("p",{className:"text-[10px] text-gray-600 text-right",children:[n.length,"/1000"]}),s.jsxs("button",{onClick:m,disabled:!n.trim()||c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl font-bold transition",children:[s.jsx(w8,{className:"w-4 h-4"}),c?"Submitting...":"Submit Report"]})]})]})})]})]})},DAe={3:"text-blue-400",7:"text-green-400",14:"text-purple-400",21:"text-amber-400",30:"text-red-400",50:"text-pink-400",100:"text-cyan-400"},PAe=({userId:t,streakData:e,compact:r})=>{var h,p;const[n,a]=_.useState(e||null),[i,o]=_.useState(null);if(_.useEffect(()=>{(async()=>{try{const x=await De.updateDailyStreak(t);x.freezeUsed?(o({message:"Streak Freeze used! Streak saved.",type:"freeze"}),setTimeout(()=>o(null),3e3)):x.newMilestone&&(o({message:`${x.newMilestone}-day streak milestone!`,type:"milestone"}),setTimeout(()=>o(null),3e3))}catch{}})()},[t]),_.useEffect(()=>{e&&a(e)},[e]),!n)return null;const c=n.currentStreak>=30?"text-red-400 animate-pulse":n.currentStreak>=14?"text-orange-400":n.currentStreak>=7?"text-amber-400":n.currentStreak>=3?"text-yellow-400":"text-gray-500";if(r)return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Mu,{className:`w-4 h-4 ${c}`}),s.jsx("span",{className:`text-sm font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-500"}`,children:n.currentStreak}),n.freezeTokens>0&&s.jsx("div",{className:"flex items-center gap-0.5 ml-1",title:`${n.freezeTokens} streak freeze${n.freezeTokens!==1?"s":""}`,children:Array.from({length:n.freezeTokens}).map((m,x)=>s.jsx(A3,{className:"w-3 h-3 text-cyan-400"},x))})]});const d=Array.from({length:7}).map((m,x)=>{var T;const y=new Date(Date.now()-(6-x)*864e5).toISOString().split("T")[0],S=(T=n.streakHistory)==null?void 0:T.includes(y),N=y===new Date().toISOString().split("T")[0],w=new Date(y).toLocaleDateString("en-US",{weekday:"narrow"});return{date:y,isActive:S,isToday:N,dayLabel:w}});return s.jsxs("div",{className:"relative",children:[i&&s.jsxs("div",{className:`absolute -top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-xl text-xs font-bold animate-in slide-in-from-bottom-2 fade-in duration-300 whitespace-nowrap ${i.type==="freeze"?"bg-cyan-600/90 text-white":i.type==="milestone"?"bg-amber-600/90 text-white":"bg-orange-600/90 text-white"}`,children:[i.type==="freeze"&&s.jsx(A3,{className:"w-3 h-3 inline mr-1"}),i.type==="milestone"&&s.jsx(cl,{className:"w-3 h-3 inline mr-1"}),i.message]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Mu,{className:`w-7 h-7 ${c}`}),s.jsxs("div",{children:[s.jsxs("div",{className:`text-2xl font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-400"}`,children:[n.currentStreak," Day",n.currentStreak!==1?"s":""]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold",children:["Current Streak | Best: ",n.longestStreak]})]})]}),s.jsx("div",{className:"flex items-center gap-1",title:`${n.freezeTokens} / ${n.maxFreezeTokens} freeze tokens`,children:Array.from({length:n.maxFreezeTokens}).map((m,x)=>s.jsx(A3,{className:`w-5 h-5 ${x<n.freezeTokens?"text-cyan-400":"text-gray-700"}`},x))})]}),s.jsx("div",{className:"flex gap-1.5",children:d.map(m=>s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-500 mb-1",children:m.dayLabel}),s.jsx("div",{className:`w-full aspect-square rounded-lg flex items-center justify-center text-xs font-bold transition ${m.isActive?"bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-500/20":m.isToday?"border-2 border-dashed border-amber-500/40 text-amber-500/40":"bg-white/5 text-gray-700"}`,children:m.isActive?s.jsx(Mu,{className:"w-3.5 h-3.5"}):""})]},m.date))}),(((h=n.milestones)==null?void 0:h.length)||0)>0&&s.jsx("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/5",children:(p=n.milestones)==null?void 0:p.map(m=>s.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full bg-white/5 border border-white/10 ${DAe[m]||"text-white"}`,children:[m,"d"]},m))})]})]})},LAe=({classConfigs:t,availableSections:e})=>{const r=Pa(),{confirm:n}=Po(),[a,i]=_.useState([]),[o,c]=_.useState(!1),[d,h]=_.useState(Dr.AP_PHYSICS),[p,m]=_.useState(""),[x,y]=_.useState(""),[S,N]=_.useState(null);_.useEffect(()=>{const R=De.subscribeToEnrollmentCodes(i);return()=>R()},[]);const w=async()=>{const R=await De.createEnrollmentCode(d,p||void 0,x?parseInt(x):void 0);r.success(`Code created: ${R}`),c(!1),m(""),y("")},T=(R,A)=>{navigator.clipboard.writeText(R),N(A),setTimeout(()=>N(null),2e3)},C=async R=>{await n({message:"Deactivate this enrollment code?",confirmLabel:"Deactivate"})&&await De.deactivateEnrollmentCode(R)},O=t&&t.length>0?t.map(R=>R.className):Object.values(Dr).filter(R=>R!=="Uncategorized"),L=a.filter(R=>R.isActive),I=a.filter(R=>!R.isActive);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(mg,{className:"w-5 h-5 text-emerald-400"}),"Enrollment Codes"]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Tr,{className:"w-3.5 h-3.5"})," Generate Code"]})]}),o&&s.jsxs("div",{className:"mb-5 p-4 bg-black/20 border border-white/10 rounded-xl space-y-3 animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("select",{value:d,onChange:R=>h(R.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:O.map(R=>s.jsx("option",{value:R,children:R},R))}),s.jsxs("select",{value:p,onChange:R=>m(R.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"",children:"No Section"}),e.map(R=>s.jsx("option",{value:R,children:R},R))]})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("input",{type:"number",min:"1",placeholder:"Max uses (unlimited if empty)",value:x,onChange:R=>y(R.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50"}),s.jsx("button",{onClick:w,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx(Xn,{className:"w-4 h-4"})})]})]}),L.length===0&&!o?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(mg,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active enrollment codes. Generate one to let students self-enroll."]}):s.jsx("div",{className:"space-y-2",children:L.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 border border-white/10 rounded-xl group hover:border-emerald-500/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("code",{className:"text-lg font-mono font-bold text-emerald-400 tracking-widest",children:R.code}),s.jsx("span",{className:"text-xs text-gray-500",children:R.classType}),R.section&&s.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded",children:R.section})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-[10px] text-gray-500",children:[R.usedCount," used",R.maxUses?` / ${R.maxUses}`:""]}),s.jsx("button",{onClick:()=>T(R.code,R.id),className:"p-1.5 text-gray-500 hover:text-white transition",title:"Copy code",children:S===R.id?s.jsx(ec,{className:"w-3.5 h-3.5 text-green-400"}):s.jsx(d0,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>C(R.id),className:"p-1.5 text-gray-500 hover:text-red-400 transition",title:"Deactivate",children:s.jsx(wle,{className:"w-3.5 h-3.5"})})]})]},R.id))}),I.length>0&&s.jsxs("details",{className:"mt-4",children:[s.jsxs("summary",{className:"text-[10px] text-gray-500 cursor-pointer hover:text-gray-300 uppercase tracking-widest font-bold",children:[I.length," expired code",I.length!==1?"s":""]}),s.jsx("div",{className:"mt-2 space-y-1",children:I.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/10 border border-white/5 rounded-lg opacity-50",children:[s.jsx("code",{className:"text-sm font-mono text-gray-500",children:R.code}),s.jsxs("span",{className:"text-[10px] text-gray-600",children:[R.classType," | ",R.usedCount," used"]})]},R.id))})]})]})},xY=[{type:"TEXT",label:"Text",icon:s.jsx(JH,{className:"w-4 h-4"}),description:"Plain text content",category:"Content"},{type:"SECTION_HEADER",label:"Section Header",icon:s.jsx(y8,{className:"w-4 h-4"}),description:"Section title & subtitle",category:"Content"},{type:"IMAGE",label:"Image",icon:s.jsx(tw,{className:"w-4 h-4"}),description:"Image with caption",category:"Content"},{type:"VIDEO",label:"Video",icon:s.jsx(k0,{className:"w-4 h-4"}),description:"YouTube embed",category:"Content"},{type:"OBJECTIVES",label:"Objectives",icon:s.jsx(Os,{className:"w-4 h-4"}),description:"Learning objectives",category:"Content"},{type:"DIVIDER",label:"Divider",icon:s.jsx(Ix,{className:"w-4 h-4"}),description:"Separator line",category:"Content"},{type:"EXTERNAL_LINK",label:"External Link",icon:s.jsx(Cx,{className:"w-4 h-4"}),description:"Styled link card",category:"Content"},{type:"EMBED",label:"Embed",icon:s.jsx(x8,{className:"w-4 h-4"}),description:"iFrame embed",category:"Content"},{type:"INFO_BOX",label:"Info Box",icon:s.jsx(kx,{className:"w-4 h-4"}),description:"Tip, warning, or note",category:"Content"},{type:"VOCABULARY",label:"Vocabulary",icon:s.jsx(Ga,{className:"w-4 h-4"}),description:"Term & definition",category:"Interactive"},{type:"VOCAB_LIST",label:"Vocab List",icon:s.jsx(v8,{className:"w-4 h-4"}),description:"Multiple terms",category:"Interactive"},{type:"ACTIVITY",label:"Activity",icon:s.jsx($n,{className:"w-4 h-4"}),description:"Activity instructions",category:"Interactive"},{type:"CHECKLIST",label:"Checklist",icon:s.jsx(nw,{className:"w-4 h-4"}),description:"Task list",category:"Interactive"},{type:"SORTING",label:"Sorting",icon:s.jsx(J2,{className:"w-4 h-4"}),description:"Categorize items",category:"Interactive"},{type:"DATA_TABLE",label:"Data Table",icon:s.jsx(S8,{className:"w-4 h-4"}),description:"Editable table",category:"Interactive"},{type:"BAR_CHART",label:"Bar Chart",icon:s.jsx(C0,{className:"w-4 h-4"}),description:"Interactive chart",category:"Interactive"},{type:"MC",label:"Multiple Choice",icon:s.jsx(Ex,{className:"w-4 h-4"}),description:"Question with options",category:"Questions"},{type:"SHORT_ANSWER",label:"Short Answer",icon:s.jsx(p0,{className:"w-4 h-4"}),description:"Free-text question",category:"Questions"},{type:"RANKING",label:"Ranking",icon:s.jsx(f0,{className:"w-4 h-4"}),description:"Reorder items",category:"Questions"},{type:"LINKED",label:"Linked Question",icon:s.jsx(gg,{className:"w-4 h-4"}),description:"Follow-up question",category:"Questions"}],WA=()=>`block_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,BAe=t=>{const e={id:WA(),type:t,content:""};switch(t){case"MC":return{...e,options:["",""],correctAnswer:0};case"SHORT_ANSWER":return{...e,acceptedAnswers:[""]};case"VOCABULARY":return{...e,term:"",definition:""};case"CHECKLIST":return{...e,items:[""]};case"INFO_BOX":return{...e,variant:"note"};case"SECTION_HEADER":return{...e,icon:"",title:"",subtitle:""};case"IMAGE":return{...e,url:"",caption:"",alt:""};case"VIDEO":return{...e,url:"",caption:""};case"OBJECTIVES":return{...e,title:"Learning Objectives",items:[""]};case"DIVIDER":return e;case"EXTERNAL_LINK":return{...e,title:"",url:"",buttonLabel:"Open",openInNewTab:!0};case"EMBED":return{...e,url:"",caption:"",height:500};case"VOCAB_LIST":return{...e,terms:[{term:"",definition:""}]};case"ACTIVITY":return{...e,icon:"",title:"",instructions:""};case"SORTING":return{...e,title:"",instructions:"",leftLabel:"Category A",rightLabel:"Category B",sortItems:[{text:"",correct:"left"}]};case"DATA_TABLE":return{...e,title:"",columns:[{key:"col1",label:"Column 1",editable:!0}],trials:3};case"BAR_CHART":return{...e,title:"",barCount:3,initialLabel:"Initial",finalLabel:"Final",deltaLabel:"Change",height:300};case"RANKING":return{...e,items:[""]};case"LINKED":return{...e,linkedBlockId:"",acceptedAnswers:[""]};default:return e}},$Ae=`I need you to create a standalone HTML file for an interactive educational activity that integrates with a Learning Management System called "Porters Portal". The HTML file must communicate with the parent application through the Proctor Bridge Protocol using postMessage.

REQUIRED BRIDGE INTEGRATION:
The HTML must include this bridge snippet at the top of its <script>:

\`\`\`javascript
// Portal Bridge - communicates with parent LMS
const PortalBridge = {
  _ready: false,
  _userId: null,
  _savedState: null,
  init() {
    window.addEventListener('message', (e) => {
      if (e.data?.type === 'portal-init') {
        this._userId = e.data.payload.userId;
        this._savedState = e.data.payload.savedState;
        this._ready = true;
        this.onReady(e.data.payload);
      }
      if (e.data?.type === 'portal-xp-result') this.onXPResult(e.data.payload);
      if (e.data?.type === 'portal-reset-ok') this.onReset();
    });
    window.parent.postMessage({ type: 'portal-ready' }, '*');
  },
  save(state, currentQuestion) {
    window.parent.postMessage({ type: 'portal-save', payload: { state, currentQuestion } }, '*');
  },
  answer(questionId, correct, attempts) {
    window.parent.postMessage({ type: 'portal-answer', payload: { questionId, correct, attempts } }, '*');
  },
  complete(score, totalQuestions, correctAnswers) {
    window.parent.postMessage({ type: 'portal-complete', payload: { score, totalQuestions, correctAnswers } }, '*');
  },
  // Override these in your code:
  onReady(payload) { /* { userId, savedState, completionInfo } */ },
  onXPResult(payload) { /* { questionId, awarded, xp } */ },
  onReset() { /* replay requested */ }
};
PortalBridge.init();
\`\`\`

REQUIREMENTS:
1. Self-contained single HTML file (inline CSS + JS, no external dependencies)
2. Call PortalBridge.save() to auto-save student progress
3. Call PortalBridge.answer(questionId, correct, attempts) when students answer questions (awards XP)
4. Call PortalBridge.complete(score, totalQuestions, correctAnswers) when the activity is finished
5. Implement PortalBridge.onReady() to restore saved state
6. Dark theme styling (background: #0f0720, text: white/gray, accents: purple/green)
7. Mobile-responsive layout
8. Smooth animations and transitions

The activity I need is: [DESCRIBE YOUR ACTIVITY HERE]`,zAe=`I need you to convert the following content into a JSON array of lesson blocks for the Porters Portal LMS. Output ONLY valid JSON (no markdown, no explanation).

AVAILABLE BLOCK TYPES AND THEIR REQUIRED FIELDS:

Content blocks:
- {"type":"SECTION_HEADER", "icon":"", "title":"Section Name", "subtitle":"Optional subtitle"}
- {"type":"TEXT", "content":"Plain text content with line breaks"}
- {"type":"IMAGE", "url":"https://...", "caption":"Caption", "alt":"Description"}
- {"type":"VIDEO", "url":"https://youtube.com/watch?v=...", "caption":"Caption"}
- {"type":"OBJECTIVES", "title":"Learning Objectives", "items":["Obj 1","Obj 2"]}
- {"type":"DIVIDER"}
- {"type":"EXTERNAL_LINK", "title":"Link Title", "url":"https://...", "content":"Description", "buttonLabel":"Open", "openInNewTab":true}
- {"type":"EMBED", "url":"https://docs.google.com/...", "caption":"Caption", "height":500}
- {"type":"INFO_BOX", "variant":"tip|warning|note", "content":"Box content"}

Interactive blocks:
- {"type":"VOCABULARY", "term":"Word", "definition":"Definition"}
- {"type":"VOCAB_LIST", "terms":[{"term":"Word1","definition":"Def1"},{"term":"Word2","definition":"Def2"}]}
- {"type":"ACTIVITY", "icon":"", "title":"Activity Name", "instructions":"Do this..."}
- {"type":"CHECKLIST", "content":"Checklist title", "items":["Step 1","Step 2"]}
- {"type":"SORTING", "title":"Sort Title", "instructions":"Sort these", "leftLabel":"Category A", "rightLabel":"Category B", "sortItems":[{"text":"Item","correct":"left|right"}]}
- {"type":"DATA_TABLE", "title":"Table Title", "columns":[{"key":"col1","label":"Name","editable":true}], "trials":3}
- {"type":"BAR_CHART", "title":"Chart Title", "barCount":3, "initialLabel":"Initial", "finalLabel":"Final", "deltaLabel":"Change", "height":300}

Question blocks:
- {"type":"MC", "content":"Question?", "options":["A","B","C","D"], "correctAnswer":0}
- {"type":"SHORT_ANSWER", "content":"Question?", "acceptedAnswers":["answer1","answer2"]}
- {"type":"RANKING", "content":"Put in order:", "items":["First","Second","Third"]}

RULES:
1. Output a JSON array: [{...}, {...}, ...]
2. Start with a SECTION_HEADER block
3. Use OBJECTIVES near the top
4. Add TEXT blocks between interactive elements for context
5. Use INFO_BOX for important callouts
6. Add DIVIDER between major sections
7. Include at least 2-3 question blocks (MC, SHORT_ANSWER, or RANKING)
8. Every block MUST have a "type" field and a "content" field (even if empty string "")

The content to convert is:
[PASTE YOUR CONTENT HERE  supports: Google Slides text, PDF text, Google Docs, spreadsheets, Word docs, PowerPoint content, etc.]`,UAe=({onSelect:t,onClose:e})=>{const r=["Content","Interactive","Questions"];return s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-1 bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl p-3 z-50 w-[480px] max-h-[50vh] overflow-y-auto",onClick:n=>n.stopPropagation(),children:r.map(n=>s.jsxs("div",{className:"mb-2 last:mb-0",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:n}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:xY.filter(a=>a.category===n).map(a=>s.jsxs("button",{type:"button",onClick:()=>{t(a.type),e()},className:"flex items-center gap-2 p-2 rounded-lg text-left hover:bg-white/5 transition group",children:[s.jsx("span",{className:"text-gray-500 group-hover:text-purple-400 transition",children:a.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] font-bold text-gray-300",children:a.label}),s.jsx("div",{className:"text-[9px] text-gray-600",children:a.description})]})]},a.type))})]},n))})},EV=({onInsert:t})=>{const[e,r]=_.useState(!1);return s.jsxs("div",{className:"relative flex items-center justify-center py-1 group",children:[s.jsx("div",{className:"absolute inset-x-0 top-1/2 h-px bg-white/5 group-hover:bg-purple-500/20 transition"}),s.jsx("button",{type:"button",onClick:()=>r(!e),className:"relative z-10 w-7 h-7 rounded-full bg-[#1a1b26] border border-white/10 hover:border-purple-500/40 hover:bg-purple-500/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(Tr,{className:"w-3.5 h-3.5 text-gray-500 group-hover:text-purple-400"})}),e&&s.jsx(UAe,{onSelect:t,onClose:()=>r(!1)})]})},VAe=t=>{switch(t.type){case"TEXT":return t.content.slice(0,80)||"Empty text";case"MC":return t.content.slice(0,60)||"Multiple choice question";case"SHORT_ANSWER":return t.content.slice(0,60)||"Short answer question";case"VOCABULARY":return t.term||"Vocabulary term";case"CHECKLIST":return t.content||`${(t.items||[]).length} items`;case"INFO_BOX":return`${t.variant}: ${t.content.slice(0,50)}`;case"SECTION_HEADER":return`${t.icon||""} ${t.title||"Section"}`.trim();case"IMAGE":return t.caption||t.alt||"Image";case"VIDEO":return t.caption||"Video";case"OBJECTIVES":return t.title||"Objectives";case"DIVIDER":return"";case"EXTERNAL_LINK":return t.title||"Link";case"EMBED":return t.caption||"Embed";case"VOCAB_LIST":return`${(t.terms||[]).length} terms`;case"ACTIVITY":return t.title||"Activity";case"SORTING":return t.title||"Sorting activity";case"DATA_TABLE":return t.title||"Data table";case"BAR_CHART":return t.title||"Bar chart";case"RANKING":return t.content.slice(0,60)||"Ranking question";case"LINKED":return t.content.slice(0,60)||"Linked question";default:return t.type}},FAe=t=>xY.find(e=>e.type===t),qAe=({assignments:t,onClose:e,initialAssignmentId:r})=>{const n=Pa(),a=_.useMemo(()=>t.filter(Y=>Y.lessonBlocks&&Y.lessonBlocks.length>0).sort((Y,de)=>Y.title.localeCompare(de.title)),[t]),i=_.useMemo(()=>{const Y={};return a.forEach(de=>{const ye=de.unit||"Unassigned";Y[ye]||(Y[ye]=[]),Y[ye].push(de)}),Y},[a]),[o,c]=_.useState(r||null),[d,h]=_.useState([]),[p,m]=_.useState(null),[x,y]=_.useState(!1),[S,N]=_.useState(!1),[w,T]=_.useState(""),[C,O]=_.useState(""),[L,I]=_.useState(!1),[R,A]=_.useState(""),[E,k]=_.useState(new Set(Object.keys(i))),[U,P]=_.useState(!1),$=_.useMemo(()=>t.find(Y=>Y.id===o)||null,[t,o]),B=_.useCallback(Y=>{const de=t.find(ye=>ye.id===Y);de&&(c(Y),h(de.lessonBlocks||[]),m(null),y(!1),P(!1))},[t]);se.useEffect(()=>{r&&B(r)},[r,B]);const G=_.useCallback(Y=>{h(Y),P(!0)},[]),K=_.useCallback((Y,de)=>{const ye=BAe(de),Ue=[...d];Ue.splice(Y,0,ye),G(Ue),m(ye.id)},[d,G]),H=_.useCallback(Y=>{G(d.filter((de,ye)=>ye!==Y))},[d,G]),ee=_.useCallback((Y,de)=>{const ye=Y+de;if(ye<0||ye>=d.length)return;const Ue=[...d];[Ue[Y],Ue[ye]]=[Ue[ye],Ue[Y]],G(Ue)},[d,G]),ae=_.useCallback(Y=>{const de={...d[Y],id:WA()},ye=[...d];ye.splice(Y+1,0,de),G(ye)},[d,G]),ce=_.useCallback(async()=>{if($){I(!0);try{await De.addAssignment({...$,lessonBlocks:d}),n.success("Lesson saved!"),P(!1)}catch(Y){n.error("Failed to save lesson."),console.error(Y)}finally{I(!1)}}},[$,d,n]),fe=_.useCallback(()=>{O("");try{const Y=JSON.parse(w);let de;if(Array.isArray(Y))de=Y;else if(Y!=null&&Y.blocks&&Array.isArray(Y.blocks))de=Y.blocks;else{O("JSON must be an array of blocks or { blocks: [...] }");return}de=de.map(ye=>{if(!ye.type)throw new Error('Block missing "type" field');return{...ye,id:ye.id||WA(),content:ye.content??""}}),G([...d,...de]),N(!1),T(""),n.success(`${de.length} blocks imported!`)}catch(Y){O(Y instanceof Error?Y.message:"Invalid JSON")}},[w,d,G,n]),Z=_.useCallback((Y,de)=>{navigator.clipboard.writeText(Y).then(()=>n.success(`${de} copied to clipboard!`))},[n]),ne=_.useMemo(()=>{if(!R)return i;const Y=R.toLowerCase(),de={};return Object.entries(i).forEach(([ye,Ue])=>{const Xe=Ue.filter(Ye=>Ye.title.toLowerCase().includes(Y)||ye.toLowerCase().includes(Y));Xe.length>0&&(de[ye]=Xe)}),de},[i,R]);return s.jsxs("div",{className:"fixed inset-0 z-[9999] bg-[#0f0720] flex flex-col",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md border-b border-white/10 px-6 py-3 flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h1",{className:"text-lg font-black text-white tracking-tight flex items-center gap-2",children:[s.jsx(Ga,{className:"w-5 h-5 text-purple-400"})," Lesson Editor"]}),$&&s.jsxs("span",{className:"text-xs text-gray-400 bg-white/5 px-3 py-1 rounded-lg border border-white/10",children:[$.title,U&&s.jsx("span",{className:"ml-2 text-amber-400",children:"*unsaved"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>Z($Ae,"HTML Proctor prompt"),className:"flex items-center gap-1.5 text-[10px] text-cyan-300 bg-cyan-500/10 hover:bg-cyan-500/20 px-3 py-1.5 rounded-lg border border-cyan-500/20 uppercase font-bold tracking-wider transition",title:"Copy AI prompt for generating a Proctor-integrated HTML activity",children:[s.jsx(tb,{className:"w-3 h-3"})," HTML Prompt"]}),s.jsxs("button",{type:"button",onClick:()=>Z(zAe,"JSON lesson prompt"),className:"flex items-center gap-1.5 text-[10px] text-amber-300 bg-amber-500/10 hover:bg-amber-500/20 px-3 py-1.5 rounded-lg border border-amber-500/20 uppercase font-bold tracking-wider transition",title:"Copy AI prompt for converting documents to lesson block JSON",children:[s.jsx(tb,{className:"w-3 h-3"})," JSON Prompt"]}),s.jsx("div",{className:"w-px h-6 bg-white/10"}),s.jsxs("button",{type:"button",onClick:()=>N(!S),className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/20 uppercase font-bold tracking-wider transition",children:[s.jsx(ul,{className:"w-3 h-3"})," Paste JSON"]}),$&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",onClick:()=>y(!x),className:`flex items-center gap-1.5 text-[10px] px-3 py-1.5 rounded-lg border uppercase font-bold tracking-wider transition ${x?"text-purple-300 bg-purple-500/20 border-purple-500/30":"text-gray-300 bg-white/5 border-white/10 hover:text-white"}`,children:[s.jsx(Uu,{className:"w-3 h-3"})," ",x?"Edit":"Preview"]}),s.jsxs("button",{type:"button",onClick:ce,disabled:L||!U,className:"flex items-center gap-1.5 text-[10px] text-emerald-300 bg-emerald-500/10 hover:bg-emerald-500/20 disabled:opacity-40 px-3 py-1.5 rounded-lg border border-emerald-500/20 uppercase font-bold tracking-wider transition",children:[s.jsx(b8,{className:"w-3 h-3"})," ",L?"Saving...":"Save"]})]}),s.jsx("div",{className:"w-px h-6 bg-white/10"}),s.jsx("button",{type:"button",onClick:e,className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx(Xn,{className:"w-5 h-5"})})]})]}),S&&s.jsx("div",{className:"bg-black/60 border-b border-white/10 px-6 py-4 shrink-0",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-3",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:["Paste a JSON array of blocks or ",s.jsx("code",{className:"text-purple-300",children:"{ blocks: [...] }"})]}),s.jsx("textarea",{value:w,onChange:Y=>{T(Y.target.value),O("")},placeholder:'[{"type":"TEXT","content":"Hello"}]',className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-xs font-mono text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition min-h-[120px]"}),C&&s.jsx("div",{className:"text-xs text-red-400 bg-red-500/10 border border-red-500/30 rounded-lg p-2",children:C}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:fe,disabled:!w.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Import"}),s.jsx("button",{type:"button",onClick:()=>{N(!1),T(""),O("")},className:"px-4 py-2 text-gray-400 hover:text-white text-xs transition",children:"Cancel"})]})]})}),s.jsxs("div",{className:"flex flex-1 min-h-0",children:[s.jsxs("div",{className:"w-72 border-r border-white/10 bg-black/20 flex flex-col shrink-0",children:[s.jsx("div",{className:"p-3 border-b border-white/5",children:s.jsxs("div",{className:"relative",children:[s.jsx(Kf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",value:R,onChange:Y=>A(Y.target.value),placeholder:"Search lessons...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:[Object.entries(ne).sort().map(([Y,de])=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>k(ye=>{const Ue=new Set(ye);return Ue.has(Y)?Ue.delete(Y):Ue.add(Y),Ue}),className:"w-full flex items-center gap-2 px-2 py-1.5 text-left hover:bg-white/5 rounded-lg transition",children:[E.has(Y)?s.jsx(Wa,{className:"w-3 h-3 text-gray-500"}):s.jsx(so,{className:"w-3 h-3 text-gray-500"}),s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest truncate flex-1",children:Y}),s.jsx("span",{className:"text-[9px] text-gray-600 font-mono",children:de.length})]}),E.has(Y)&&de.map(ye=>s.jsxs("button",{onClick:()=>B(ye.id),className:`w-full flex items-center gap-2 px-3 py-2 ml-2 rounded-lg text-left transition text-[11px] ${o===ye.id?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"text-gray-400 hover:text-gray-200 hover:bg-white/5"}`,children:[s.jsx(rw,{className:"w-3.5 h-3.5 shrink-0"}),s.jsx("span",{className:"truncate flex-1",children:ye.title}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono shrink-0",children:[(ye.lessonBlocks||[]).length,"b"]})]},ye.id))]},Y)),Object.keys(ne).length===0&&s.jsx("div",{className:"text-center py-8 text-gray-600 text-xs",children:"No lessons found"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:$?x?s.jsx("div",{className:"max-w-3xl mx-auto p-8",children:s.jsx(lb,{blocks:d,showSidebar:!0})}):s.jsxs("div",{className:"max-w-3xl mx-auto p-6 pb-32 space-y-0",children:[s.jsx(EV,{onInsert:Y=>K(0,Y)}),d.map((Y,de)=>{const ye=FAe(Y.type),Ue=p===Y.id;return s.jsxs(se.Fragment,{children:[s.jsxs("div",{className:`border rounded-2xl transition-all ${Ue?"bg-white/5 border-purple-500/30 shadow-lg shadow-purple-500/5":"bg-white/[0.02] border-white/5 hover:border-white/15"}`,children:[s.jsxs("button",{type:"button",onClick:()=>m(Ue?null:Y.id),className:"w-full flex items-center gap-3 px-4 py-3 text-left",children:[s.jsx("span",{className:"text-gray-500",children:ye==null?void 0:ye.icon}),s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider w-24 shrink-0",children:ye==null?void 0:ye.label}),s.jsx("span",{className:"text-xs text-gray-400 truncate flex-1",children:VAe(Y)}),s.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",onClick:Xe=>Xe.stopPropagation(),children:[s.jsx("button",{type:"button",onClick:()=>ee(de,-1),disabled:de===0,className:"p-1 text-gray-600 hover:text-white disabled:opacity-20 transition",children:s.jsx(Wf,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>ee(de,1),disabled:de===d.length-1,className:"p-1 text-gray-600 hover:text-white disabled:opacity-20 transition",children:s.jsx(Wa,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>ae(de),className:"p-1 text-gray-600 hover:text-blue-400 transition",children:s.jsx(d0,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>H(de),className:"p-1 text-gray-600 hover:text-red-400 transition",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]}),s.jsx(so,{className:`w-4 h-4 text-gray-600 transition-transform ${Ue?"rotate-90":""}`})]}),Ue&&s.jsx("div",{className:"px-4 pb-4 border-t border-white/5 pt-3 animate-in fade-in slide-in-from-top-1 duration-200",children:s.jsx(HAe,{block:Y,allBlocks:d,onUpdate:Xe=>{const Ye=[...d];Ye[de]=Xe,G(Ye)}})})]}),s.jsx(EV,{onInsert:Xe=>K(de+1,Xe)})]},Y.id)}),d.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-600",children:[s.jsxs("p",{className:"text-sm mb-2",children:["No blocks yet. Click the ",s.jsx(Tr,{className:"w-4 h-4 inline"})," button above to add your first block."]}),s.jsx("p",{className:"text-xs",children:"Or paste JSON to import blocks in bulk."})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-8",children:[s.jsx(Ga,{className:"w-16 h-16 text-gray-700 mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-400 mb-2",children:"Select a Lesson"}),s.jsx("p",{className:"text-sm text-gray-600 max-w-md",children:"Choose a lesson from the sidebar to edit its blocks, or deploy a new resource with lesson blocks from the Admin Panel."})]})})]})]})},lr="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",ql="w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",Ir="text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",HAe=({block:t,allBlocks:e,onUpdate:r})=>{switch(t.type){case"TEXT":return s.jsx("textarea",{value:t.content,onChange:n=>r({...t,content:n.target.value}),placeholder:"Enter text content...",className:`${ql} min-h-[80px]`,rows:3});case"SECTION_HEADER":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:n=>r({...t,icon:n.target.value}),placeholder:"",className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),placeholder:"Section title...",className:lr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Subtitle"}),s.jsx("input",{type:"text",value:t.subtitle||"",onChange:n=>r({...t,subtitle:n.target.value}),placeholder:"Optional subtitle...",className:lr})]})]});case"IMAGE":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Image URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),placeholder:"https://...",className:lr})]}),t.url&&s.jsx("img",{src:t.url,alt:t.alt||"",className:"max-h-32 rounded-lg border border-white/10 object-contain",onError:n=>n.currentTarget.style.display="none"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),placeholder:"Caption...",className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Alt Text"}),s.jsx("input",{type:"text",value:t.alt||"",onChange:n=>r({...t,alt:n.target.value}),placeholder:"Describe...",className:lr})]})]})]});case"VIDEO":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"YouTube URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),placeholder:"https://youtube.com/watch?v=...",className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),placeholder:"Caption...",className:lr})]})]});case"OBJECTIVES":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:lr})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Os,{className:"w-4 h-4 text-emerald-400 mt-2 shrink-0"}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},placeholder:`Objective ${i+1}`,className:`flex-1 ${lr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add"]})]})}case"DIVIDER":return s.jsx("div",{className:"text-xs text-gray-500 italic",children:"Horizontal divider  no configuration needed."});case"EXTERNAL_LINK":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),className:lr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Description"}),s.jsx("input",{type:"text",value:t.content,onChange:n=>r({...t,content:n.target.value}),className:lr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Button Label"}),s.jsx("input",{type:"text",value:t.buttonLabel||"",onChange:n=>r({...t,buttonLabel:n.target.value}),className:lr})]}),s.jsx("div",{className:"flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx("input",{type:"checkbox",checked:t.openInNewTab??!0,onChange:n=>r({...t,openInNewTab:n.target.checked})})," New tab"]})})]})]});case"EMBED":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Embed URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),className:lr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||500,onChange:n=>r({...t,height:parseInt(n.target.value)||500}),className:lr})]})]})]});case"INFO_BOX":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex gap-2",children:["tip","warning","note"].map(n=>s.jsx("button",{type:"button",onClick:()=>r({...t,variant:n}),className:`px-3 py-1 rounded-lg border text-xs font-bold capitalize transition ${t.variant===n?n==="tip"?"bg-green-500/20 border-green-500/30 text-green-400":n==="warning"?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-blue-500/20 border-blue-500/30 text-blue-400":"bg-black/30 border-white/10 text-gray-400"}`,children:n},n))}),s.jsx("textarea",{value:t.content,onChange:n=>r({...t,content:n.target.value}),placeholder:"Content...",className:ql,rows:2})]});case"MC":{const n=t.options||["",""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Question...",className:ql,rows:2}),n.map((a,i)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>r({...t,correctAnswer:i}),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 ${t.correctAnswer===i?"border-green-500 bg-green-500":"border-gray-600"}`,children:t.correctAnswer===i&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,options:c})},placeholder:`Option ${String.fromCharCode(65+i)}`,className:`flex-1 ${lr}`}),n.length>2&&s.jsx("button",{type:"button",onClick:()=>{const o=n.filter((c,d)=>d!==i);r({...t,options:o,correctAnswer:t.correctAnswer===i?0:(t.correctAnswer||0)>i?(t.correctAnswer||0)-1:t.correctAnswer})},className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),n.length<6&&s.jsxs("button",{type:"button",onClick:()=>r({...t,options:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Option"]})]})}case"SHORT_ANSWER":{const n=t.acceptedAnswers||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Question...",className:ql,rows:2}),s.jsx("label",{className:Ir,children:"Accepted Answers"}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,acceptedAnswers:c})},placeholder:`Answer ${i+1}`,className:`flex-1 ${lr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Answer"]})]})}case"VOCABULARY":return s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Term"}),s.jsx("input",{type:"text",value:t.term||"",onChange:n=>r({...t,term:n.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Definition"}),s.jsx("input",{type:"text",value:t.definition||"",onChange:n=>r({...t,definition:n.target.value}),className:lr})]})]});case"VOCAB_LIST":{const n=t.terms||[{term:"",definition:""}];return s.jsxs("div",{className:"space-y-2",children:[n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.term,onChange:o=>{const c=[...n];c[i]={...c[i],term:o.target.value},r({...t,terms:c})},placeholder:"Term",className:`flex-1 ${lr}`}),s.jsx("input",{type:"text",value:a.definition,onChange:o=>{const c=[...n];c[i]={...c[i],definition:o.target.value},r({...t,terms:c})},placeholder:"Definition",className:`flex-1 ${lr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,terms:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,terms:[...n,{term:"",definition:""}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Term"]})]})}case"CHECKLIST":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Checklist title...",className:ql,rows:1}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-5 h-5 rounded border-2 border-gray-600 shrink-0 mt-1.5"}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},placeholder:`Item ${i+1}`,className:`flex-1 ${lr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Item"]})]})}case"ACTIVITY":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:n=>r({...t,icon:n.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:lr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:n=>r({...t,instructions:n.target.value}),className:`${ql} min-h-[60px]`,rows:2})]})]});case"SORTING":{const n=t.sortItems||[{text:"",correct:"left"}];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:a=>r({...t,instructions:a.target.value}),className:ql,rows:1})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Left Category"}),s.jsx("input",{type:"text",value:t.leftLabel||"",onChange:a=>r({...t,leftLabel:a.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Right Category"}),s.jsx("input",{type:"text",value:t.rightLabel||"",onChange:a=>r({...t,rightLabel:a.target.value}),className:lr})]})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.text,onChange:o=>{const c=[...n];c[i]={...c[i],text:o.target.value},r({...t,sortItems:c})},placeholder:`Item ${i+1}`,className:`flex-1 ${lr}`}),s.jsxs("select",{value:a.correct,onChange:o=>{const c=[...n];c[i]={...c[i],correct:o.target.value},r({...t,sortItems:c})},className:`w-28 ${lr}`,children:[s.jsx("option",{value:"left",children:t.leftLabel||"Left"}),s.jsx("option",{value:"right",children:t.rightLabel||"Right"})]}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,sortItems:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,sortItems:[...n,{text:"",correct:"left"}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Item"]})]})}case"DATA_TABLE":{const n=t.columns||[{key:"col1",label:"Column 1",editable:!0}];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Rows"}),s.jsx("input",{type:"number",value:t.trials||3,onChange:a=>r({...t,trials:parseInt(a.target.value)||3}),className:lr})]})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.label,onChange:o=>{const c=[...n];c[i]={...c[i],label:o.target.value},r({...t,columns:c})},placeholder:"Label",className:`flex-1 ${lr}`}),s.jsx("input",{type:"text",value:a.unit||"",onChange:o=>{const c=[...n];c[i]={...c[i],unit:o.target.value},r({...t,columns:c})},placeholder:"Unit",className:`w-20 ${lr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,columns:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,columns:[...n,{key:`col${n.length+1}`,label:"",editable:!0}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Column"]})]})}case"BAR_CHART":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:lr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Bars"}),s.jsx("input",{type:"number",value:t.barCount||3,onChange:n=>r({...t,barCount:parseInt(n.target.value)||3}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||300,onChange:n=>r({...t,height:parseInt(n.target.value)||300}),className:lr})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Initial"}),s.jsx("input",{type:"text",value:t.initialLabel||"",onChange:n=>r({...t,initialLabel:n.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Delta"}),s.jsx("input",{type:"text",value:t.deltaLabel||"",onChange:n=>r({...t,deltaLabel:n.target.value}),className:lr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Final"}),s.jsx("input",{type:"text",value:t.finalLabel||"",onChange:n=>r({...t,finalLabel:n.target.value}),className:lr})]})]})]});case"RANKING":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Ranking question...",className:ql,rows:2}),s.jsx("label",{className:Ir,children:"Items (in correct order)"}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 mt-2 w-5 text-right",children:[i+1,"."]}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},className:`flex-1 ${lr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Item"]})]})}case"LINKED":{const n=e.filter(i=>i.id!==t.id&&["MC","SHORT_ANSWER","RANKING"].includes(i.type)),a=t.acceptedAnswers||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ir,children:"Reference Block"}),s.jsxs("select",{value:t.linkedBlockId||"",onChange:i=>r({...t,linkedBlockId:i.target.value}),className:lr,children:[s.jsx("option",{value:"",children:"Select..."}),n.map(i=>s.jsxs("option",{value:i.id,children:[i.type,": ",(i.content||"").slice(0,40)]},i.id))]})]}),s.jsx("textarea",{value:t.content,onChange:i=>r({...t,content:i.target.value}),placeholder:"Follow-up question...",className:ql,rows:2}),s.jsx("label",{className:Ir,children:"Accepted Answers"}),a.map((i,o)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:i,onChange:c=>{const d=[...a];d[o]=c.target.value,r({...t,acceptedAnswers:d})},className:`flex-1 ${lr}`}),a.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:a.filter((c,d)=>d!==o)}),className:"p-1 text-red-400",children:s.jsx(gr,{className:"w-3.5 h-3.5"})})]},o)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...a,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Tr,{className:"w-3 h-3"})," Add Answer"]})]})}default:return s.jsxs("div",{className:"text-xs text-gray-500 italic",children:["Unknown block type: ",t.type]})}},GAe=({userName:t,userId:e,onLogout:r})=>{const[n,a]=_.useState(""),[i,o]=_.useState(!1),[c,d]=_.useState(null),[h,p]=_.useState(null),m=y=>{const S=y.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);a(S.length>4?S.slice(0,4)+"-"+S.slice(4):S),d(null)},x=async()=>{if(n.replace("-","").length<4){d("Please enter a valid enrollment code.");return}o(!0),d(null);try{const y=await De.redeemEnrollmentCode(n,e);y.success?p(`Enrolled in ${y.classType}! Refreshing...`):d(y.error||"Failed to redeem code.")}catch{d("Something went wrong. Please try again.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[s.jsx(aw,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:["Hi ",t,"! Your account is not yet enrolled in a class."]}),s.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-2xl p-6 mb-6 text-left",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-white mb-3",children:[s.jsx(mg,{className:"w-4 h-4 text-emerald-400"}),"Have an enrollment code?"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:n,onChange:y=>m(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!i&&x()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-center text-lg font-mono font-bold text-emerald-400 tracking-[0.2em] placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:i||!!h}),s.jsx("button",{onClick:x,disabled:i||!!h||n.replace("-","").length<4,className:"px-5 py-3 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl font-bold transition flex items-center gap-2",children:i?s.jsx(ks,{className:"w-4 h-4 animate-spin"}):"Join"})]}),c&&s.jsx("p",{className:"mt-3 text-sm text-red-400 animate-in fade-in slide-in-from-top-1 duration-200",children:c}),h&&s.jsxs("p",{className:"mt-3 text-sm text-emerald-400 flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[s.jsx(u0,{className:"w-4 h-4"})," ",h]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["No code? Ask ",tG," for one, or wait for manual authorization."]}),s.jsx("button",{onClick:r,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})})},CV={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING","Intel Dossier":"INTEL"},WAe=()=>{var _e,he;const[t,e]=_.useState(null),[r,n]=_.useState("Dashboard"),[a,i]=_.useState([]),[o,c]=_.useState([]),[d,h]=_.useState([]),[p,m]=_.useState([]),[x,y]=_.useState([]),[S,N]=_.useState(null),[w,T]=_.useState("STUDENT"),[C,O]=_.useState("WORK"),[L,I]=_.useState(!1),[R,A]=_.useState(!1),[E,k]=_.useState(!0),[U,P]=_.useState(!1),[$,B]=_.useState(new Set),G=_.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),K=_.useRef(new Set);_.useEffect(()=>{if(!(t!=null&&t.id)||t.role===Fa.ADMIN)return;const Q=De.subscribeToMyGroups(t.id,X=>{K.current=new Set(X.map(Se=>Se.id))});return()=>Q()},[t==null?void 0:t.id,t==null?void 0:t.role]);const H=_.useCallback(Q=>{const X=Date.now();G.current[Q]=X,localStorage.setItem("chatChannelLastSeen",JSON.stringify(G.current)),B(Se=>{if(!Se.has(Q))return Se;const Ne=new Set(Se);return Ne.delete(Q),Ne})},[]);_.useEffect(()=>{const Q=De.subscribeToRecentMessages(X=>{const Se=new Set,Ne=G.current,Ke=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(at=>`class_${at.replace(/\s+/g,"_").toLowerCase()}`));for(const at of X){if(!at.channelId||at.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==Fa.ADMIN){if(at.channelId.startsWith("group_")){const lt=at.channelId.slice(6);if(!K.current.has(lt))continue}else if(at.channelId.startsWith("class_")&&!Ke.has(at.channelId))continue}const Rt=new Date(at.timestamp).getTime(),Pe=Ne[at.channelId]||0;Rt>Pe&&Se.add(at.channelId)}B(Se)});return()=>Q()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const ee=_.useMemo(()=>{const Q=new Map;return o.forEach(X=>{const Se=Q.get(X.userId)||[];Se.push(X),Q.set(X.userId,Se)}),d.map(X=>{const Se=Q.get(X.id)||[],Ne=Se.length,Ke=Math.round(Se.reduce((at,Rt)=>{var Pe;return at+(((Pe=Rt.metrics)==null?void 0:Pe.engagementTime)||0)},0)/60);return{...X,stats:{problemsCompleted:Ne,avgScore:0,rawAccuracy:0,totalTime:Ke}}})},[d,o]),ae=_.useMemo(()=>{const Q=new Set;return d.forEach(X=>{X.section&&Q.add(X.section)}),Array.from(Q).sort()},[d]),ce=_.useMemo(()=>a.find(Q=>Q.id===S)||null,[a,S]);_.useEffect(()=>{if(I(!1),A(!1),!S)return;const Q=ga(ot(Me,"question_banks",S)).then(Se=>{Se.exists()&&(Se.data().questions||[]).length>0&&I(!0)}).catch(()=>{}),X=ga(ot(Me,"reading_materials",S)).then(Se=>{Se.exists()&&A(!0)}).catch(()=>{});Promise.all([Q,X]).then(()=>{})},[S]),_.useEffect(()=>{let Q=null;const X=_te(Z_,async Se=>{Se?(await fe(Se),Q=Fr(ot(Me,"users",Se.uid),Ne=>{Ne.exists()&&e(Ke=>({...Ke||{},...Ne.data(),id:Se.uid}))})):(e(null),Q&&Q(),k(!1))});return()=>{X(),Q&&Q()}},[]),_.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Fa.ADMIN)){const Q=De.subscribeToAssignments(i),X=De.subscribeToClassConfigs(y),Se=[Q,X];return t.role===Fa.ADMIN?(Se.push(De.subscribeToSubmissions(c)),Se.push(De.subscribeToUsers(h)),Se.push(De.subscribeToWhitelist(m))):Se.push(De.subscribeToUserSubmissions(t.id,c)),()=>Se.forEach(Ne=>Ne())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),_.useEffect(()=>{(t==null?void 0:t.role)===Fa.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),_.useEffect(()=>{var Q;gce(((Q=t==null?void 0:t.settings)==null?void 0:Q.soundEffects)!==!1)},[(_e=t==null?void 0:t.settings)==null?void 0:_e.soundEffects]),fce((t==null?void 0:t.id)||null,((he=t==null?void 0:t.settings)==null?void 0:he.pushNotifications)===!0);const fe=async Q=>{try{const X=ot(Me,"users",Q.uid),Se=await ga(X),Ne=await ga(ot(Me,"allowed_emails",Q.email||"")),at=(await Q.getIdTokenResult()).claims.admin===!0||Q.email===ice,Rt=Ne.exists()||at,Pe=Ne.exists()?Ne.data():null,lt=(Pe==null?void 0:Pe.classType)||Dr.UNCATEGORIZED,Nt=(Pe==null?void 0:Pe.classTypes)||(lt!==Dr.UNCATEGORIZED?[lt]:[]);if(Se.exists()){const vt=Se.data(),yt={lastLoginAt:new Date().toISOString(),isWhitelisted:Rt};if(at&&(yt.role="ADMIN"),!Rt&&!at&&(yt.enrolledClasses=[]),Rt&&Nt.length>0){const me=vt.enrolledClasses||[],We=Array.from(new Set([...me,...Nt]));We.length!==me.length&&(yt.enrolledClasses=We,(!vt.classType||vt.classType===Dr.UNCATEGORIZED)&&(yt.classType=Nt[0]))}await sr(X,yt)}else{const vt={email:Q.email,name:Q.displayName||"Student",avatarUrl:Q.photoURL||"",role:at?"ADMIN":"STUDENT",classType:lt,enrolledClasses:Rt?Nt:[],isWhitelisted:Rt,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await ta(X,vt)}}catch(X){console.error(X)}finally{k(!1)}},Z=async()=>{await Tte(Z_),e(null),N(null)},ne=Q=>{O("WORK"),N(Q)},Y=_.useRef(ce),de=_.useRef(t);_.useEffect(()=>{Y.current=ce},[ce]),_.useEffect(()=>{de.current=t},[t]);const ye=async Q=>{const X=de.current,Se=Y.current;if(!(!X||!Se||X.role===Fa.ADMIN)&&!(Q.engagementTime<10))try{await De.submitEngagement(X.id,X.name,Se.id,Se.title,Q,Se.classType)}catch(Ne){console.error("Engagement submission failed:",Ne)}},Ue=_.useMemo(()=>{const Q={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const X=x.find(Se=>Se.className===t.classType);if(X)return X.features}return Q},[t==null?void 0:t.role,t==null?void 0:t.classType,x]);if(E)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return s.jsx(w0e,{});if(!t.isWhitelisted&&t.role!==Fa.ADMIN)return s.jsx(GAe,{userName:t.name,userId:t.id,onLogout:Z});const Xe=t.role===Fa.ADMIN||Ue.physicsTools,Ye=t.role===Fa.ADMIN||Ue.communications;return s.jsx(TAe,{children:s.jsx(S0e,{children:s.jsx(cce,{children:s.jsxs(s.Fragment,{children:[s.jsx(uce,{}),Xe&&s.jsx(Ahe,{onToggleChat:Ye?()=>P(!U):void 0,hasUnreadChat:$.size>0}),Ye&&s.jsx(khe,{user:t,isOpen:U,onClose:()=>P(!1),assignments:a,classConfigs:x,unreadChannels:$,onMarkChannelRead:H,onOpenResource:Q=>{ne(Q)}}),s.jsx(vce,{user:t,onLogout:Z,activeTab:r,setActiveTab:n,children:ce?s.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[ce.title,t.role===Fa.ADMIN&&s.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),s.jsxs("div",{className:"flex gap-4 mt-2",children:[s.jsx("button",{onClick:()=>O("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${C==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),L&&s.jsxs("button",{onClick:()=>O("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${C==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Ro,{className:"w-3.5 h-3.5"})," Review"]}),R&&s.jsxs("button",{onClick:()=>O("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${C==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Ga,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&s.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[s.jsx("button",{onClick:()=>T("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),s.jsx("button",{onClick:()=>T("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),s.jsxs("button",{onClick:()=>{N(null),O("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[s.jsx(vle,{className:"w-4 h-4"})," Exit"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[C==="WORK"&&s.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(b0e,{onComplete:ye,contentUrl:ce.contentUrl,htmlContent:ce.htmlContent,userId:t.id,assignmentId:ce.id,classType:ce.classType,lessonBlocks:ce.lessonBlocks})}),w==="ADMIN"&&t.role===Fa.ADMIN&&s.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(xg,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:s.jsx(di,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o.filter(Q=>Q.assignmentId===ce.id&&!Q.isArchived).length}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),s.jsx("button",{onClick:()=>P(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),C==="REVIEW"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(EAe,{assignment:ce})}),C==="STUDY"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(RAe,{assignment:ce,onComplete:ye})})]})]}):s.jsx("div",{className:"h-full",children:s.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Fa.ADMIN&&s.jsxs(s.Fragment,{children:[r==="Dashboard"&&s.jsx(D0e,{users:ee,assignments:a,submissions:o}),r==="User Management"&&s.jsx(P0e,{users:ee,whitelistedEmails:p,classConfigs:x,onWhitelist:async(Q,X)=>De.addToWhitelist(Q,X)}),r==="Admin Panel"&&s.jsx(fhe,{assignments:a,submissions:o,users:d,onCreateAssignment:async Q=>{Q.title&&await De.addAssignment(Q)},classConfigs:x,availableSections:ae,onPreviewAssignment:Q=>{T("STUDENT"),ne(Q)}}),r==="Student Groups"&&s.jsx(_he,{students:ee.filter(Q=>Q.role==="STUDENT"),availableSections:ae,fullPage:!0}),r==="Enrollment Codes"&&s.jsx(LAe,{classConfigs:x,availableSections:ae}),r==="Lesson Editor"&&s.jsx(qAe,{assignments:a,onClose:()=>n("Admin Panel")}),r.startsWith("XP Command:")&&s.jsx(jhe,{users:d,initialTab:r.split(":")[1]})]}),t.role===Fa.STUDENT&&s.jsxs(s.Fragment,{children:[r in CV&&s.jsx(qTe,{user:t,assignments:a,submissions:o,enabledFeatures:Ue,onNavigate:n,onStartAssignment:ne,studentTab:CV[r]}),r==="Forensics"&&Ue.evidenceLocker&&s.jsx(vAe,{user:t}),r==="Physics Lab"&&Ue.physicsLab&&s.jsx(bAe,{user:t}),r==="Leaderboard"&&Ue.leaderboard&&s.jsx(_Ae,{user:t})]})]},r)})}),s.jsx(MAe,{user:t}),t.role===Fa.STUDENT&&s.jsx("div",{className:"fixed top-3 right-48 z-30",children:s.jsx(PAe,{userId:t.id,compact:!0})})]})})})})},yY=document.getElementById("root");if(!yY)throw new Error("Could not find root element to mount to");const KAe=aZ.createRoot(yY);KAe.render(s.jsx(se.StrictMode,{children:s.jsx(WAe,{})}));
