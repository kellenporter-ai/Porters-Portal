var HJ=Object.defineProperty;var GJ=(t,e,r)=>e in t?HJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var EO=(t,e,r)=>GJ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as WJ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e3={exports:{}},Qp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kO;function KJ(){if(kO)return Qp;kO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Qp.Fragment=e,Qp.jsx=r,Qp.jsxs=r,Qp}var CO;function QJ(){return CO||(CO=1,e3.exports=KJ()),e3.exports}var s=QJ(),t3={exports:{}},fr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OO;function XJ(){if(OO)return fr;OO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),x=Symbol.iterator;function y(X){return X===null||typeof X!="object"?null:(X=x&&X[x]||X["@@iterator"],typeof X=="function"?X:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,S={};function E(X,ie,ne){this.props=X,this.context=ie,this.refs=S,this.updater=ne||w}E.prototype.isReactComponent={},E.prototype.setState=function(X,ie){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ie,"setState")},E.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function C(){}C.prototype=E.prototype;function M(X,ie,ne){this.props=X,this.context=ie,this.refs=S,this.updater=ne||w}var L=M.prototype=new C;L.constructor=M,N(L,E.prototype),L.isPureReactComponent=!0;var I=Array.isArray;function R(){}var A={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function k(X,ie,ne){var ve=ne.ref;return{$$typeof:t,type:X,key:ie,ref:ve!==void 0?ve:null,props:ne}}function F(X,ie){return k(X.type,ie,X.props)}function O(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function $(X){var ie={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ne){return ie[ne]})}var B=/\/+/g;function G(X,ie){return typeof X=="object"&&X!==null&&X.key!=null?$(""+X.key):ie.toString(36)}function Q(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(R,R):(X.status="pending",X.then(function(ie){X.status==="pending"&&(X.status="fulfilled",X.value=ie)},function(ie){X.status==="pending"&&(X.status="rejected",X.reason=ie)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function H(X,ie,ne,ve,pe){var Be=typeof X;(Be==="undefined"||Be==="boolean")&&(X=null);var Ge=!1;if(X===null)Ge=!0;else switch(Be){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(X.$$typeof){case t:case e:Ge=!0;break;case p:return Ge=X._init,H(Ge(X._payload),ie,ne,ve,pe)}}if(Ge)return pe=pe(X),Ge=ve===""?"."+G(X,0):ve,I(pe)?(ne="",Ge!=null&&(ne=Ge.replace(B,"$&/")+"/"),H(pe,ie,ne,"",function(We){return We})):pe!=null&&(O(pe)&&(pe=F(pe,ne+(pe.key==null||X&&X.key===pe.key?"":(""+pe.key).replace(B,"$&/")+"/")+Ge)),ie.push(pe)),1;Ge=0;var He=ve===""?".":ve+":";if(I(X))for(var Ne=0;Ne<X.length;Ne++)ve=X[Ne],Be=He+G(ve,Ne),Ge+=H(ve,ie,ne,Be,pe);else if(Ne=y(X),typeof Ne=="function")for(X=Ne.call(X),Ne=0;!(ve=X.next()).done;)ve=ve.value,Be=He+G(ve,Ne++),Ge+=H(ve,ie,ne,Be,pe);else if(Be==="object"){if(typeof X.then=="function")return H(Q(X),ie,ne,ve,pe);throw ie=String(X),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function K(X,ie,ne){if(X==null)return X;var ve=[],pe=0;return H(X,ve,"","",function(Be){return ie.call(ne,Be,pe++)}),ve}function te(X){if(X._status===-1){var ie=X._result;ie=ie(),ie.then(function(ne){(X._status===0||X._status===-1)&&(X._status=1,X._result=ne)},function(ne){(X._status===0||X._status===-1)&&(X._status=2,X._result=ne)}),X._status===-1&&(X._status=0,X._result=ie)}if(X._status===1)return X._result.default;throw X._result}var ae=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},ce={map:K,forEach:function(X,ie,ne){K(X,function(){ie.apply(this,arguments)},ne)},count:function(X){var ie=0;return K(X,function(){ie++}),ie},toArray:function(X){return K(X,function(ie){return ie})||[]},only:function(X){if(!O(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return fr.Activity=m,fr.Children=ce,fr.Component=E,fr.Fragment=r,fr.Profiler=a,fr.PureComponent=M,fr.StrictMode=n,fr.Suspense=d,fr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,fr.__COMPILER_RUNTIME={__proto__:null,c:function(X){return A.H.useMemoCache(X)}},fr.cache=function(X){return function(){return X.apply(null,arguments)}},fr.cacheSignal=function(){return null},fr.cloneElement=function(X,ie,ne){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var ve=N({},X.props),pe=X.key;if(ie!=null)for(Be in ie.key!==void 0&&(pe=""+ie.key),ie)!T.call(ie,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ie.ref===void 0||(ve[Be]=ie[Be]);var Be=arguments.length-2;if(Be===1)ve.children=ne;else if(1<Be){for(var Ge=Array(Be),He=0;He<Be;He++)Ge[He]=arguments[He+2];ve.children=Ge}return k(X.type,pe,ve)},fr.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:i,_context:X},X},fr.createElement=function(X,ie,ne){var ve,pe={},Be=null;if(ie!=null)for(ve in ie.key!==void 0&&(Be=""+ie.key),ie)T.call(ie,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(pe[ve]=ie[ve]);var Ge=arguments.length-2;if(Ge===1)pe.children=ne;else if(1<Ge){for(var He=Array(Ge),Ne=0;Ne<Ge;Ne++)He[Ne]=arguments[Ne+2];pe.children=He}if(X&&X.defaultProps)for(ve in Ge=X.defaultProps,Ge)pe[ve]===void 0&&(pe[ve]=Ge[ve]);return k(X,Be,pe)},fr.createRef=function(){return{current:null}},fr.forwardRef=function(X){return{$$typeof:c,render:X}},fr.isValidElement=O,fr.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:te}},fr.memo=function(X,ie){return{$$typeof:h,type:X,compare:ie===void 0?null:ie}},fr.startTransition=function(X){var ie=A.T,ne={};A.T=ne;try{var ve=X(),pe=A.S;pe!==null&&pe(ne,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(R,ae)}catch(Be){ae(Be)}finally{ie!==null&&ne.types!==null&&(ie.types=ne.types),A.T=ie}},fr.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},fr.use=function(X){return A.H.use(X)},fr.useActionState=function(X,ie,ne){return A.H.useActionState(X,ie,ne)},fr.useCallback=function(X,ie){return A.H.useCallback(X,ie)},fr.useContext=function(X){return A.H.useContext(X)},fr.useDebugValue=function(){},fr.useDeferredValue=function(X,ie){return A.H.useDeferredValue(X,ie)},fr.useEffect=function(X,ie){return A.H.useEffect(X,ie)},fr.useEffectEvent=function(X){return A.H.useEffectEvent(X)},fr.useId=function(){return A.H.useId()},fr.useImperativeHandle=function(X,ie,ne){return A.H.useImperativeHandle(X,ie,ne)},fr.useInsertionEffect=function(X,ie){return A.H.useInsertionEffect(X,ie)},fr.useLayoutEffect=function(X,ie){return A.H.useLayoutEffect(X,ie)},fr.useMemo=function(X,ie){return A.H.useMemo(X,ie)},fr.useOptimistic=function(X,ie){return A.H.useOptimistic(X,ie)},fr.useReducer=function(X,ie,ne){return A.H.useReducer(X,ie,ne)},fr.useRef=function(X){return A.H.useRef(X)},fr.useState=function(X){return A.H.useState(X)},fr.useSyncExternalStore=function(X,ie,ne){return A.H.useSyncExternalStore(X,ie,ne)},fr.useTransition=function(){return A.H.useTransition()},fr.version="19.2.4",fr}var IO;function HA(){return IO||(IO=1,t3.exports=XJ()),t3.exports}var j=HA();const se=tn(j);var r3={exports:{}},Xp={},n3={exports:{}},a3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RO;function YJ(){return RO||(RO=1,(function(t){function e(H,K){var te=H.length;H.push(K);e:for(;0<te;){var ae=te-1>>>1,ce=H[ae];if(0<a(ce,K))H[ae]=K,H[te]=ce,te=ae;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var K=H[0],te=H.pop();if(te!==K){H[0]=te;e:for(var ae=0,ce=H.length,X=ce>>>1;ae<X;){var ie=2*(ae+1)-1,ne=H[ie],ve=ie+1,pe=H[ve];if(0>a(ne,te))ve<ce&&0>a(pe,ne)?(H[ae]=pe,H[ve]=te,ae=ve):(H[ae]=ne,H[ie]=te,ae=ie);else if(ve<ce&&0>a(pe,te))H[ae]=pe,H[ve]=te,ae=ve;else break e}}return K}function a(H,K){var te=H.sortIndex-K.sortIndex;return te!==0?te:H.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],p=1,m=null,x=3,y=!1,w=!1,N=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var K=r(h);K!==null;){if(K.callback===null)n(h);else if(K.startTime<=H)n(h),K.sortIndex=K.expirationTime,e(d,K);else break;K=r(h)}}function I(H){if(N=!1,L(H),!w)if(r(d)!==null)w=!0,R||(R=!0,$());else{var K=r(h);K!==null&&Q(I,K.startTime-H)}}var R=!1,A=-1,T=5,k=-1;function F(){return S?!0:!(t.unstable_now()-k<T)}function O(){if(S=!1,R){var H=t.unstable_now();k=H;var K=!0;try{e:{w=!1,N&&(N=!1,C(A),A=-1),y=!0;var te=x;try{t:{for(L(H),m=r(d);m!==null&&!(m.expirationTime>H&&F());){var ae=m.callback;if(typeof ae=="function"){m.callback=null,x=m.priorityLevel;var ce=ae(m.expirationTime<=H);if(H=t.unstable_now(),typeof ce=="function"){m.callback=ce,L(H),K=!0;break t}m===r(d)&&n(d),L(H)}else n(d);m=r(d)}if(m!==null)K=!0;else{var X=r(h);X!==null&&Q(I,X.startTime-H),K=!1}}break e}finally{m=null,x=te,y=!1}K=void 0}}finally{K?$():R=!1}}}var $;if(typeof M=="function")$=function(){M(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=O,$=function(){G.postMessage(null)}}else $=function(){E(O,0)};function Q(H,K){A=E(function(){H(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(H){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var te=x;x=K;try{return H()}finally{x=te}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=x;x=H;try{return K()}finally{x=te}},t.unstable_scheduleCallback=function(H,K,te){var ae=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ae+te:ae):te=ae,H){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=te+ce,H={id:p++,callback:K,priorityLevel:H,startTime:te,expirationTime:ce,sortIndex:-1},te>ae?(H.sortIndex=te,e(h,H),r(d)===null&&H===r(h)&&(N?(C(A),A=-1):N=!0,Q(I,te-ae))):(H.sortIndex=ce,e(d,H),w||y||(w=!0,R||(R=!0,$()))),H},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(H){var K=x;return function(){var te=x;x=K;try{return H.apply(this,arguments)}finally{x=te}}}})(a3)),a3}var MO;function JJ(){return MO||(MO=1,n3.exports=YJ()),n3.exports}var i3={exports:{}},_i={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DO;function ZJ(){if(DO)return _i;DO=1;var t=HA();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,_i.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},_i.flushSync=function(d){var h=o.T,p=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=h,n.p=p,n.d.f()}},_i.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},_i.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},_i.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:y}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:x,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_i.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},_i.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_i.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},_i.requestFormReset=function(d){n.d.r(d)},_i.unstable_batchedUpdates=function(d,h){return d(h)},_i.useFormState=function(d,h,p){return o.H.useFormState(d,h,p)},_i.useFormStatus=function(){return o.H.useHostTransitionStatus()},_i.version="19.2.4",_i}var PO;function TV(){if(PO)return i3.exports;PO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),i3.exports=ZJ(),i3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO;function eZ(){if(LO)return Xp;LO=1;var t=JJ(),e=HA(),r=TV();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var _=b.alternate;if(_===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===f)return d(b),l;if(_===g)return d(b),u;_=_.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=_;else{for(var U=!1,J=b.child;J;){if(J===f){U=!0,f=b,g=_;break}if(J===g){U=!0,g=b,f=_;break}J=J.sibling}if(!U){for(J=_.child;J;){if(J===f){U=!0,f=_,g=b;break}if(J===g){U=!0,g=_,f=b;break}J=J.sibling}if(!U)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=O&&l[O]||l["@@iterator"],typeof l=="function"?l:null)}var B=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===B?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case N:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList";case k:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case w:return"Portal";case M:return l.displayName||"Context";case C:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case A:return u=l.displayName||null,u!==null?u:G(l.type)||"Memo";case T:u=l._payload,l=l._init;try{return G(l(u))}catch{}}return null}var Q=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ae=[],ce=-1;function X(l){return{current:l}}function ie(l){0>ce||(l.current=ae[ce],ae[ce]=null,ce--)}function ne(l,u){ce++,ae[ce]=l.current,l.current=u}var ve=X(null),pe=X(null),Be=X(null),Ge=X(null);function He(l,u){switch(ne(Be,u),ne(pe,l),ne(ve,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?Y9(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=Y9(u),l=J9(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ie(ve),ne(ve,l)}function Ne(){ie(ve),ie(pe),ie(Be)}function We(l){l.memoizedState!==null&&ne(Ge,l);var u=ve.current,f=J9(u,l.type);u!==f&&(ne(pe,l),ne(ve,f))}function Y(l){pe.current===l&&(ie(ve),ie(pe)),Ge.current===l&&(ie(Ge),Hp._currentValue=te)}var re,be;function we(l){if(re===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);re=u&&u[1]||"",be=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+re+l+be}var Ye=!1;function nt(l,u){if(!l||Ye)return"";Ye=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Ue){var De=Ue}Reflect.construct(l,[],tt)}else{try{tt.call()}catch(Ue){De=Ue}l.call(tt.prototype)}}else{try{throw Error()}catch(Ue){De=Ue}(tt=l())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Ue){if(Ue&&De&&typeof Ue.stack=="string")return[Ue.stack,De.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),U=_[0],J=_[1];if(U&&J){var he=U.split(`
`),Re=J.split(`
`);for(b=g=0;g<he.length&&!he[g].includes("DetermineComponentFrameRoot");)g++;for(;b<Re.length&&!Re[b].includes("DetermineComponentFrameRoot");)b++;if(g===he.length||b===Re.length)for(g=he.length-1,b=Re.length-1;1<=g&&0<=b&&he[g]!==Re[b];)b--;for(;1<=g&&0<=b;g--,b--)if(he[g]!==Re[b]){if(g!==1||b!==1)do if(g--,b--,0>b||he[g]!==Re[b]){var Qe=`
`+he[g].replace(" at new "," at ");return l.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",l.displayName)),Qe}while(1<=g&&0<=b);break}}}finally{Ye=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?we(f):""}function Ot(l,u){switch(l.tag){case 26:case 27:case 5:return we(l.type);case 16:return we("Lazy");case 13:return l.child!==u&&u!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return nt(l.type,!1);case 11:return nt(l.type.render,!1);case 1:return nt(l.type,!0);case 31:return we("Activity");default:return""}}function Ee(l){try{var u="",f=null;do u+=Ot(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var ut=Object.prototype.hasOwnProperty,Nt=t.unstable_scheduleCallback,wt=t.unstable_cancelCallback,zt=t.unstable_shouldYield,de=t.unstable_requestPaint,Fe=t.unstable_now,jt=t.unstable_getCurrentPriorityLevel,qe=t.unstable_ImmediatePriority,Ze=t.unstable_UserBlockingPriority,At=t.unstable_NormalPriority,St=t.unstable_LowPriority,lr=t.unstable_IdlePriority,ye=t.log,it=t.unstable_setDisableYieldValue,xt=null,Dt=null;function Pt(l){if(typeof ye=="function"&&it(l),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(xt,l)}catch{}}var rt=Math.clz32?Math.clz32:lt,Le=Math.log,et=Math.LN2;function lt(l){return l>>>=0,l===0?32:31-(Le(l)/et|0)|0}var Ft=256,Wt=262144,Qt=4194304;function Gt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Et(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,_=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var J=g&134217727;return J!==0?(g=J&~_,g!==0?b=Gt(g):(U&=J,U!==0?b=Gt(U):f||(f=J&~l,f!==0&&(b=Gt(f))))):(J=g&~_,J!==0?b=Gt(J):U!==0?b=Gt(U):f||(f=g&~l,f!==0&&(b=Gt(f)))),b===0?0:u!==0&&u!==b&&(u&_)===0&&(_=b&-b,f=u&-u,_>=f||_===32&&(f&4194048)!==0)?u:b}function Hr(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function un(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gn(){var l=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),l}function Dr(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function kn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function gr(l,u,f,g,b,_){var U=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var J=l.entanglements,he=l.expirationTimes,Re=l.hiddenUpdates;for(f=U&~f;0<f;){var Qe=31-rt(f),tt=1<<Qe;J[Qe]=0,he[Qe]=-1;var De=Re[Qe];if(De!==null)for(Re[Qe]=null,Qe=0;Qe<De.length;Qe++){var Ue=De[Qe];Ue!==null&&(Ue.lane&=-536870913)}f&=~tt}g!==0&&ha(l,g,0),_!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=_&~(U&~u))}function ha(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-rt(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function xn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-rt(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function Ln(l,u){var f=u&-u;return f=(f&42)!==0?1:ci(f),(f&(l.suspendedLanes|u))!==0?0:f}function ci(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function yn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Pr(){var l=K.p;return l!==0?l:(l=window.event,l===void 0?32:wO(l.type))}function Ya(l,u){var f=K.p;try{return K.p=l,u()}finally{K.p=f}}var aa=Math.random().toString(36).slice(2),Jr="__reactFiber$"+aa,vn="__reactProps$"+aa,Wn="__reactContainer$"+aa,Pa="__reactEvents$"+aa,Ja="__reactListeners$"+aa,Ci="__reactHandles$"+aa,ps="__reactResources$"+aa,wi="__reactMarker$"+aa;function kt(l){delete l[Jr],delete l[vn],delete l[Pa],delete l[Ja],delete l[Ci]}function fe(l){var u=l[Jr];if(u)return u;for(var f=l.parentNode;f;){if(u=f[Wn]||f[Jr]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=iO(l);l!==null;){if(f=l[Jr])return f;l=iO(l)}return u}l=f,f=l.parentNode}return null}function at(l){if(l=l[Jr]||l[Wn]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function ft(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function nr(l){var u=l[ps];return u||(u=l[ps]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function vr(l){l[wi]=!0}var dn=new Set,Zr={};function bn(l,u){Lr(l,u),Lr(l+"Capture",u)}function Lr(l,u){for(Zr[l]=u,l=0;l<u.length;l++)dn.add(u[l])}var $s=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ms={},mo={};function vl(l){return ut.call(mo,l)?!0:ut.call(ms,l)?!1:$s.test(l)?mo[l]=!0:(ms[l]=!0,!1)}function gs(l,u,f){if(vl(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function xs(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function La(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function Sa(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Se(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,_=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(U){f=""+U,_.call(this,U)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(U){f=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Te(l){if(!l._valueTracker){var u=q(l)?"checked":"value";l._valueTracker=Se(l,u,""+l[u])}}function ke(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=q(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function gt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Bt=/[\n"\\]/g;function It(l){return l.replace(Bt,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ar(l,u,f,g,b,_,U,J){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Sa(u)):l.value!==""+Sa(u)&&(l.value=""+Sa(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?an(l,U,Sa(u)):f!=null?an(l,U,Sa(f)):g!=null&&l.removeAttribute("value"),b==null&&_!=null&&(l.defaultChecked=!!_),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?l.name=""+Sa(J):l.removeAttribute("name")}function Er(l,u,f,g,b,_,U,J){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(l.type=_),u!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){Te(l);return}f=f!=null?""+Sa(f):"",u=u!=null?""+Sa(u):f,J||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=J?l.checked:!!g,l.defaultChecked=!!g,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U),Te(l)}function an(l,u,f){u==="number"&&gt(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function oe(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+Sa(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function xe(l,u,f){if(u!=null&&(u=""+Sa(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+Sa(f):""}function $e(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(Q(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=Sa(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Te(l)}function Pe(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var pt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cr(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||pt.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function tr(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&cr(l,b,g)}else for(var _ in u)u.hasOwnProperty(_)&&cr(l,_,u[_])}function Cn(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function On(l){return zs.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function wn(){}var Hi=null;function Nr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ys=null,Si=null;function Xx(l){var u=at(l);if(u&&(l=u.stateNode)){var f=l[vn]||null;e:switch(l=u.stateNode,u.type){case"input":if(ar(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+It(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[vn]||null;if(!b)throw Error(n(90));ar(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&ke(g)}break e;case"textarea":xe(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&oe(l,!!f.multiple,u,!1)}}}var op=!1;function Yx(l,u,f){if(op)return l(u,f);op=!0;try{var g=l(u);return g}finally{if(op=!1,(ys!==null||Si!==null)&&(W1(),ys&&(u=ys,l=Si,Si=ys=null,Xx(u),l)))for(u=0;u<l.length;u++)Xx(l[u])}}function Gi(l,u){var f=l.stateNode;if(f===null)return null;var g=f[vn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lp=!1;if(go)try{var $o={};Object.defineProperty($o,"passive",{get:function(){lp=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{lp=!1}var vs=null,O0=null,zo=null;function Tc(){if(zo)return zo;var l,u=O0,f=u.length,g,b="value"in vs?vs.value:vs.textContent,_=b.length;for(l=0;l<f&&u[l]===b[l];l++);var U=f-l;for(g=1;g<=U&&u[f-g]===b[_-g];g++);return zo=b.slice(l,1<g?1-g:void 0)}function Zu(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Ac(){return!0}function Un(){return!1}function Ni(l){function u(f,g,b,_,U){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=_,this.target=U,this.currentTarget=null;for(var J in l)l.hasOwnProperty(J)&&(f=l[J],this[J]=f?f(_):_[J]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ac:Un,this.isPropagationStopped=Un,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),u}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ed=Ni(bl),Ec=m({},bl,{view:0,detail:0}),Jx=Ni(Ec),kc,I0,Oi,td=m({},Ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Oi&&(Oi&&l.type==="mousemove"?(kc=l.screenX-Oi.screenX,I0=l.screenY-Oi.screenY):I0=kc=0,Oi=l),kc)},movementY:function(l){return"movementY"in l?l.movementY:I0}}),Zx=Ni(td),rd=m({},td,{dataTransfer:0}),e1=Ni(rd),cp=m({},Ec,{relatedTarget:0}),Cc=Ni(cp),t1=m({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),R0=Ni(t1),s4=m({},bl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),r1=Ni(s4),nd=m({},bl,{data:0}),up=Ni(nd),n1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=hp[l])?!!u[l]:!1}function Oc(){return a1}var i1=m({},Ec,{key:function(l){if(l.key){var u=n1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Zu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?dp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(l){return l.type==="keypress"?Zu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Zu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),s1=Ni(i1),wl=m({},td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fp=Ni(wl),o1=m({},Ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),l1=Ni(o1),c1=m({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=Ni(c1),Ii=m({},td,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),u1=Ni(Ii),d1=m({},bl,{newState:0,oldState:0}),Ic=Ni(d1),v=[9,13,27,32],P=go&&"CompositionEvent"in window,V=null;go&&"documentMode"in document&&(V=document.documentMode);var ee=go&&"TextEvent"in window&&!V,je=go&&(!P||V&&8<V&&11>=V),Ve=" ",yt=!1;function sn(l,u){switch(l){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Na(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var jr=!1;function Za(l,u){switch(l){case"compositionend":return Na(u);case"keypress":return u.which!==32?null:(yt=!0,Ve);case"textInput":return l=u.data,l===Ve&&yt?null:l;default:return null}}function ei(l,u){if(jr)return l==="compositionend"||!P&&sn(l,u)?(l=Tc(),zo=O0=vs=null,jr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return je&&u.locale!=="ko"?null:u.data;default:return null}}var Rc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Rc[l.type]:u==="textarea"}function ad(l,u,f,g){ys?Si?Si.push(g):Si=[g]:ys=g,u=ey(u,"onChange"),0<u.length&&(f=new ed("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var Sl=null,pp=null;function yY(l){H9(l,0)}function h1(l){var u=ft(l);if(ke(u))return l}function uk(l,u){if(l==="change")return u}var dk=!1;if(go){var o4;if(go){var l4="oninput"in document;if(!l4){var hk=document.createElement("div");hk.setAttribute("oninput","return;"),l4=typeof hk.oninput=="function"}o4=l4}else o4=!1;dk=o4&&(!document.documentMode||9<document.documentMode)}function fk(){Sl&&(Sl.detachEvent("onpropertychange",pk),pp=Sl=null)}function pk(l){if(l.propertyName==="value"&&h1(pp)){var u=[];ad(u,pp,l,Nr(l)),Yx(yY,u)}}function vY(l,u,f){l==="focusin"?(fk(),Sl=u,pp=f,Sl.attachEvent("onpropertychange",pk)):l==="focusout"&&fk()}function bY(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return h1(pp)}function wY(l,u){if(l==="click")return h1(u)}function SY(l,u){if(l==="input"||l==="change")return h1(u)}function NY(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var bs=typeof Object.is=="function"?Object.is:NY;function mp(l,u){if(bs(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!ut.call(u,b)||!bs(l[b],u[b]))return!1}return!0}function mk(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function gk(l,u){var f=mk(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=mk(f)}}function xk(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?xk(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function yk(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=gt(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=gt(l.document)}return u}function c4(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var _Y=go&&"documentMode"in document&&11>=document.documentMode,D0=null,u4=null,gp=null,d4=!1;function vk(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;d4||D0==null||D0!==gt(g)||(g=D0,"selectionStart"in g&&c4(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),gp&&mp(gp,g)||(gp=g,g=ey(u4,"onSelect"),0<g.length&&(u=new ed("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=D0)))}function id(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var P0={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionrun:id("Transition","TransitionRun"),transitionstart:id("Transition","TransitionStart"),transitioncancel:id("Transition","TransitionCancel"),transitionend:id("Transition","TransitionEnd")},h4={},bk={};go&&(bk=document.createElement("div").style,"AnimationEvent"in window||(delete P0.animationend.animation,delete P0.animationiteration.animation,delete P0.animationstart.animation),"TransitionEvent"in window||delete P0.transitionend.transition);function sd(l){if(h4[l])return h4[l];if(!P0[l])return l;var u=P0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in bk)return h4[l]=u[f];return l}var wk=sd("animationend"),Sk=sd("animationiteration"),Nk=sd("animationstart"),jY=sd("transitionrun"),TY=sd("transitionstart"),AY=sd("transitioncancel"),_k=sd("transitionend"),jk=new Map,f4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");f4.push("scrollEnd");function xo(l,u){jk.set(l,u),bn(u,[l])}var f1=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Us=[],L0=0,p4=0;function p1(){for(var l=L0,u=p4=L0=0;u<l;){var f=Us[u];Us[u++]=null;var g=Us[u];Us[u++]=null;var b=Us[u];Us[u++]=null;var _=Us[u];if(Us[u++]=null,g!==null&&b!==null){var U=g.pending;U===null?b.next=b:(b.next=U.next,U.next=b),g.pending=b}_!==0&&Tk(f,b,_)}}function m1(l,u,f,g){Us[L0++]=l,Us[L0++]=u,Us[L0++]=f,Us[L0++]=g,p4|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function m4(l,u,f,g){return m1(l,u,f,g),g1(l)}function od(l,u){return m1(l,null,null,u),g1(l)}function Tk(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,_=l.return;_!==null;)_.childLanes|=f,g=_.alternate,g!==null&&(g.childLanes|=f),_.tag===22&&(l=_.stateNode,l===null||l._visibility&1||(b=!0)),l=_,_=_.return;return l.tag===3?(_=l.stateNode,b&&u!==null&&(b=31-rt(f),l=_.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),_):null}function g1(l){if(50<Bp)throw Bp=0,_5=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var B0={};function EY(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(l,u,f,g){return new EY(l,u,f,g)}function g4(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Nl(l,u){var f=l.alternate;return f===null?(f=ws(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function Ak(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function x1(l,u,f,g,b,_){var U=0;if(g=l,typeof l=="function")g4(l)&&(U=1);else if(typeof l=="string")U=RJ(l,f,ve.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case k:return l=ws(31,f,u,b),l.elementType=k,l.lanes=_,l;case N:return ld(f.children,b,_,u);case S:U=8,b|=24;break;case E:return l=ws(12,f,u,b|2),l.elementType=E,l.lanes=_,l;case I:return l=ws(13,f,u,b),l.elementType=I,l.lanes=_,l;case R:return l=ws(19,f,u,b),l.elementType=R,l.lanes=_,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case M:U=10;break e;case C:U=9;break e;case L:U=11;break e;case A:U=14;break e;case T:U=16,g=null;break e}U=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=ws(U,f,u,b),u.elementType=l,u.type=g,u.lanes=_,u}function ld(l,u,f,g){return l=ws(7,l,g,u),l.lanes=f,l}function x4(l,u,f){return l=ws(6,l,null,u),l.lanes=f,l}function Ek(l){var u=ws(18,null,null,0);return u.stateNode=l,u}function y4(l,u,f){return u=ws(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var kk=new WeakMap;function Vs(l,u){if(typeof l=="object"&&l!==null){var f=kk.get(l);return f!==void 0?f:(u={value:l,source:u,stack:Ee(u)},kk.set(l,u),u)}return{value:l,source:u,stack:Ee(u)}}var $0=[],z0=0,y1=null,xp=0,Fs=[],qs=0,Mc=null,Uo=1,Vo="";function _l(l,u){$0[z0++]=xp,$0[z0++]=y1,y1=l,xp=u}function Ck(l,u,f){Fs[qs++]=Uo,Fs[qs++]=Vo,Fs[qs++]=Mc,Mc=l;var g=Uo;l=Vo;var b=32-rt(g)-1;g&=~(1<<b),f+=1;var _=32-rt(u)+b;if(30<_){var U=b-b%5;_=(g&(1<<U)-1).toString(32),g>>=U,b-=U,Uo=1<<32-rt(u)+b|f<<b|g,Vo=_+l}else Uo=1<<_|f<<b|g,Vo=l}function v4(l){l.return!==null&&(_l(l,1),Ck(l,1,0))}function b4(l){for(;l===y1;)y1=$0[--z0],$0[z0]=null,xp=$0[--z0],$0[z0]=null;for(;l===Mc;)Mc=Fs[--qs],Fs[qs]=null,Vo=Fs[--qs],Fs[qs]=null,Uo=Fs[--qs],Fs[qs]=null}function Ok(l,u){Fs[qs++]=Uo,Fs[qs++]=Vo,Fs[qs++]=Mc,Uo=u.id,Vo=u.overflow,Mc=l}var ui=null,Vn=null,Br=!1,Dc=null,Hs=!1,w4=Error(n(519));function Pc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yp(Vs(u,l)),w4}function Ik(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[Jr]=l,u[vn]=g,f){case"dialog":Cr("cancel",u),Cr("close",u);break;case"iframe":case"object":case"embed":Cr("load",u);break;case"video":case"audio":for(f=0;f<zp.length;f++)Cr(zp[f],u);break;case"source":Cr("error",u);break;case"img":case"image":case"link":Cr("error",u),Cr("load",u);break;case"details":Cr("toggle",u);break;case"input":Cr("invalid",u),Er(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Cr("invalid",u);break;case"textarea":Cr("invalid",u),$e(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||Q9(u.textContent,f)?(g.popover!=null&&(Cr("beforetoggle",u),Cr("toggle",u)),g.onScroll!=null&&Cr("scroll",u),g.onScrollEnd!=null&&Cr("scrollend",u),g.onClick!=null&&(u.onclick=wn),u=!0):u=!1,u||Pc(l,!0)}function Rk(l){for(ui=l.return;ui;)switch(ui.tag){case 5:case 31:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:ui=ui.return}}function U0(l){if(l!==ui)return!1;if(!Br)return Rk(l),Br=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||$5(l.type,l.memoizedProps)),f=!f),f&&Vn&&Pc(l),Rk(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Vn=aO(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Vn=aO(l)}else u===27?(u=Vn,Xc(l.type)?(l=q5,q5=null,Vn=l):Vn=u):Vn=ui?Ws(l.stateNode.nextSibling):null;return!0}function cd(){Vn=ui=null,Br=!1}function S4(){var l=Dc;return l!==null&&(Yi===null?Yi=l:Yi.push.apply(Yi,l),Dc=null),l}function yp(l){Dc===null?Dc=[l]:Dc.push(l)}var N4=X(null),ud=null,jl=null;function Lc(l,u,f){ne(N4,u._currentValue),u._currentValue=f}function Tl(l){l._currentValue=N4.current,ie(N4)}function _4(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function j4(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var _=b.dependencies;if(_!==null){var U=b.child;_=_.firstContext;e:for(;_!==null;){var J=_;_=b;for(var he=0;he<u.length;he++)if(J.context===u[he]){_.lanes|=f,J=_.alternate,J!==null&&(J.lanes|=f),_4(_.return,f,l),g||(U=null);break e}_=J.next}}else if(b.tag===18){if(U=b.return,U===null)throw Error(n(341));U.lanes|=f,_=U.alternate,_!==null&&(_.lanes|=f),_4(U,f,l),U=null}else U=b.child;if(U!==null)U.return=b;else for(U=b;U!==null;){if(U===l){U=null;break}if(b=U.sibling,b!==null){b.return=U.return,U=b;break}U=U.return}b=U}}function V0(l,u,f,g){l=null;for(var b=u,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var U=b.alternate;if(U===null)throw Error(n(387));if(U=U.memoizedProps,U!==null){var J=b.type;bs(b.pendingProps.value,U.value)||(l!==null?l.push(J):l=[J])}}else if(b===Ge.current){if(U=b.alternate,U===null)throw Error(n(387));U.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Hp):l=[Hp])}b=b.return}l!==null&&j4(u,l,f,g),u.flags|=262144}function v1(l){for(l=l.firstContext;l!==null;){if(!bs(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function dd(l){ud=l,jl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function di(l){return Mk(ud,l)}function b1(l,u){return ud===null&&dd(l),Mk(l,u)}function Mk(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},jl===null){if(l===null)throw Error(n(308));jl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else jl=jl.next=u;return f}var kY=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},CY=t.unstable_scheduleCallback,OY=t.unstable_NormalPriority,_a={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function T4(){return{controller:new kY,data:new Map,refCount:0}}function vp(l){l.refCount--,l.refCount===0&&CY(OY,function(){l.controller.abort()})}var bp=null,A4=0,F0=0,q0=null;function IY(l,u){if(bp===null){var f=bp=[];A4=0,F0=C5(),q0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return A4++,u.then(Dk,Dk),u}function Dk(){if(--A4===0&&bp!==null){q0!==null&&(q0.status="fulfilled");var l=bp;bp=null,F0=0,q0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function RY(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var Pk=H.S;H.S=function(l,u){v9=Fe(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&IY(l,u),Pk!==null&&Pk(l,u)};var hd=X(null);function E4(){var l=hd.current;return l!==null?l:In.pooledCache}function w1(l,u){u===null?ne(hd,hd.current):ne(hd,u.pool)}function Lk(){var l=E4();return l===null?null:{parent:_a._currentValue,pool:l}}var H0=Error(n(460)),k4=Error(n(474)),S1=Error(n(542)),N1={then:function(){}};function Bk(l){return l=l.status,l==="fulfilled"||l==="rejected"}function $k(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(wn,wn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Uk(l),l;default:if(typeof u.status=="string")u.then(wn,wn);else{if(l=In,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Uk(l),l}throw pd=u,H0}}function fd(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(pd=f,H0):f}}var pd=null;function zk(){if(pd===null)throw Error(n(459));var l=pd;return pd=null,l}function Uk(l){if(l===H0||l===S1)throw Error(n(483))}var G0=null,wp=0;function _1(l){var u=wp;return wp+=1,G0===null&&(G0=[]),$k(G0,l,u)}function Sp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function j1(l,u){throw u.$$typeof===x?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Vk(l){function u(_e,me){if(l){var Ce=_e.deletions;Ce===null?(_e.deletions=[me],_e.flags|=16):Ce.push(me)}}function f(_e,me){if(!l)return null;for(;me!==null;)u(_e,me),me=me.sibling;return null}function g(_e){for(var me=new Map;_e!==null;)_e.key!==null?me.set(_e.key,_e):me.set(_e.index,_e),_e=_e.sibling;return me}function b(_e,me){return _e=Nl(_e,me),_e.index=0,_e.sibling=null,_e}function _(_e,me,Ce){return _e.index=Ce,l?(Ce=_e.alternate,Ce!==null?(Ce=Ce.index,Ce<me?(_e.flags|=67108866,me):Ce):(_e.flags|=67108866,me)):(_e.flags|=1048576,me)}function U(_e){return l&&_e.alternate===null&&(_e.flags|=67108866),_e}function J(_e,me,Ce,Je){return me===null||me.tag!==6?(me=x4(Ce,_e.mode,Je),me.return=_e,me):(me=b(me,Ce),me.return=_e,me)}function he(_e,me,Ce,Je){var Kt=Ce.type;return Kt===N?Qe(_e,me,Ce.props.children,Je,Ce.key):me!==null&&(me.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===T&&fd(Kt)===me.type)?(me=b(me,Ce.props),Sp(me,Ce),me.return=_e,me):(me=x1(Ce.type,Ce.key,Ce.props,null,_e.mode,Je),Sp(me,Ce),me.return=_e,me)}function Re(_e,me,Ce,Je){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ce.containerInfo||me.stateNode.implementation!==Ce.implementation?(me=y4(Ce,_e.mode,Je),me.return=_e,me):(me=b(me,Ce.children||[]),me.return=_e,me)}function Qe(_e,me,Ce,Je,Kt){return me===null||me.tag!==7?(me=ld(Ce,_e.mode,Je,Kt),me.return=_e,me):(me=b(me,Ce),me.return=_e,me)}function tt(_e,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=x4(""+me,_e.mode,Ce),me.return=_e,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case y:return Ce=x1(me.type,me.key,me.props,null,_e.mode,Ce),Sp(Ce,me),Ce.return=_e,Ce;case w:return me=y4(me,_e.mode,Ce),me.return=_e,me;case T:return me=fd(me),tt(_e,me,Ce)}if(Q(me)||$(me))return me=ld(me,_e.mode,Ce,null),me.return=_e,me;if(typeof me.then=="function")return tt(_e,_1(me),Ce);if(me.$$typeof===M)return tt(_e,b1(_e,me),Ce);j1(_e,me)}return null}function De(_e,me,Ce,Je){var Kt=me!==null?me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Kt!==null?null:J(_e,me,""+Ce,Je);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return Ce.key===Kt?he(_e,me,Ce,Je):null;case w:return Ce.key===Kt?Re(_e,me,Ce,Je):null;case T:return Ce=fd(Ce),De(_e,me,Ce,Je)}if(Q(Ce)||$(Ce))return Kt!==null?null:Qe(_e,me,Ce,Je,null);if(typeof Ce.then=="function")return De(_e,me,_1(Ce),Je);if(Ce.$$typeof===M)return De(_e,me,b1(_e,Ce),Je);j1(_e,Ce)}return null}function Ue(_e,me,Ce,Je,Kt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return _e=_e.get(Ce)||null,J(me,_e,""+Je,Kt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case y:return _e=_e.get(Je.key===null?Ce:Je.key)||null,he(me,_e,Je,Kt);case w:return _e=_e.get(Je.key===null?Ce:Je.key)||null,Re(me,_e,Je,Kt);case T:return Je=fd(Je),Ue(_e,me,Ce,Je,Kt)}if(Q(Je)||$(Je))return _e=_e.get(Ce)||null,Qe(me,_e,Je,Kt,null);if(typeof Je.then=="function")return Ue(_e,me,Ce,_1(Je),Kt);if(Je.$$typeof===M)return Ue(_e,me,Ce,b1(me,Je),Kt);j1(me,Je)}return null}function Lt(_e,me,Ce,Je){for(var Kt=null,Gr=null,Vt=me,br=me=0,Ir=null;Vt!==null&&br<Ce.length;br++){Vt.index>br?(Ir=Vt,Vt=null):Ir=Vt.sibling;var Wr=De(_e,Vt,Ce[br],Je);if(Wr===null){Vt===null&&(Vt=Ir);break}l&&Vt&&Wr.alternate===null&&u(_e,Vt),me=_(Wr,me,br),Gr===null?Kt=Wr:Gr.sibling=Wr,Gr=Wr,Vt=Ir}if(br===Ce.length)return f(_e,Vt),Br&&_l(_e,br),Kt;if(Vt===null){for(;br<Ce.length;br++)Vt=tt(_e,Ce[br],Je),Vt!==null&&(me=_(Vt,me,br),Gr===null?Kt=Vt:Gr.sibling=Vt,Gr=Vt);return Br&&_l(_e,br),Kt}for(Vt=g(Vt);br<Ce.length;br++)Ir=Ue(Vt,_e,br,Ce[br],Je),Ir!==null&&(l&&Ir.alternate!==null&&Vt.delete(Ir.key===null?br:Ir.key),me=_(Ir,me,br),Gr===null?Kt=Ir:Gr.sibling=Ir,Gr=Ir);return l&&Vt.forEach(function(tu){return u(_e,tu)}),Br&&_l(_e,br),Kt}function Zt(_e,me,Ce,Je){if(Ce==null)throw Error(n(151));for(var Kt=null,Gr=null,Vt=me,br=me=0,Ir=null,Wr=Ce.next();Vt!==null&&!Wr.done;br++,Wr=Ce.next()){Vt.index>br?(Ir=Vt,Vt=null):Ir=Vt.sibling;var tu=De(_e,Vt,Wr.value,Je);if(tu===null){Vt===null&&(Vt=Ir);break}l&&Vt&&tu.alternate===null&&u(_e,Vt),me=_(tu,me,br),Gr===null?Kt=tu:Gr.sibling=tu,Gr=tu,Vt=Ir}if(Wr.done)return f(_e,Vt),Br&&_l(_e,br),Kt;if(Vt===null){for(;!Wr.done;br++,Wr=Ce.next())Wr=tt(_e,Wr.value,Je),Wr!==null&&(me=_(Wr,me,br),Gr===null?Kt=Wr:Gr.sibling=Wr,Gr=Wr);return Br&&_l(_e,br),Kt}for(Vt=g(Vt);!Wr.done;br++,Wr=Ce.next())Wr=Ue(Vt,_e,br,Wr.value,Je),Wr!==null&&(l&&Wr.alternate!==null&&Vt.delete(Wr.key===null?br:Wr.key),me=_(Wr,me,br),Gr===null?Kt=Wr:Gr.sibling=Wr,Gr=Wr);return l&&Vt.forEach(function(qJ){return u(_e,qJ)}),Br&&_l(_e,br),Kt}function _n(_e,me,Ce,Je){if(typeof Ce=="object"&&Ce!==null&&Ce.type===N&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:e:{for(var Kt=Ce.key;me!==null;){if(me.key===Kt){if(Kt=Ce.type,Kt===N){if(me.tag===7){f(_e,me.sibling),Je=b(me,Ce.props.children),Je.return=_e,_e=Je;break e}}else if(me.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===T&&fd(Kt)===me.type){f(_e,me.sibling),Je=b(me,Ce.props),Sp(Je,Ce),Je.return=_e,_e=Je;break e}f(_e,me);break}else u(_e,me);me=me.sibling}Ce.type===N?(Je=ld(Ce.props.children,_e.mode,Je,Ce.key),Je.return=_e,_e=Je):(Je=x1(Ce.type,Ce.key,Ce.props,null,_e.mode,Je),Sp(Je,Ce),Je.return=_e,_e=Je)}return U(_e);case w:e:{for(Kt=Ce.key;me!==null;){if(me.key===Kt)if(me.tag===4&&me.stateNode.containerInfo===Ce.containerInfo&&me.stateNode.implementation===Ce.implementation){f(_e,me.sibling),Je=b(me,Ce.children||[]),Je.return=_e,_e=Je;break e}else{f(_e,me);break}else u(_e,me);me=me.sibling}Je=y4(Ce,_e.mode,Je),Je.return=_e,_e=Je}return U(_e);case T:return Ce=fd(Ce),_n(_e,me,Ce,Je)}if(Q(Ce))return Lt(_e,me,Ce,Je);if($(Ce)){if(Kt=$(Ce),typeof Kt!="function")throw Error(n(150));return Ce=Kt.call(Ce),Zt(_e,me,Ce,Je)}if(typeof Ce.then=="function")return _n(_e,me,_1(Ce),Je);if(Ce.$$typeof===M)return _n(_e,me,b1(_e,Ce),Je);j1(_e,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,me!==null&&me.tag===6?(f(_e,me.sibling),Je=b(me,Ce),Je.return=_e,_e=Je):(f(_e,me),Je=x4(Ce,_e.mode,Je),Je.return=_e,_e=Je),U(_e)):f(_e,me)}return function(_e,me,Ce,Je){try{wp=0;var Kt=_n(_e,me,Ce,Je);return G0=null,Kt}catch(Vt){if(Vt===H0||Vt===S1)throw Vt;var Gr=ws(29,Vt,null,_e.mode);return Gr.lanes=Je,Gr.return=_e,Gr}finally{}}}var md=Vk(!0),Fk=Vk(!1),Bc=!1;function C4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function O4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function $c(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function zc(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(en&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=g1(l),Tk(l,null,f),u}return m1(l,g,u,f),g1(l)}function Np(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,xn(l,f)}}function I4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var U={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?b=_=U:_=_.next=U,f=f.next}while(f!==null);_===null?b=_=u:_=_.next=u}else b=_=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var R4=!1;function _p(){if(R4){var l=q0;if(l!==null)throw l}}function jp(l,u,f,g){R4=!1;var b=l.updateQueue;Bc=!1;var _=b.firstBaseUpdate,U=b.lastBaseUpdate,J=b.shared.pending;if(J!==null){b.shared.pending=null;var he=J,Re=he.next;he.next=null,U===null?_=Re:U.next=Re,U=he;var Qe=l.alternate;Qe!==null&&(Qe=Qe.updateQueue,J=Qe.lastBaseUpdate,J!==U&&(J===null?Qe.firstBaseUpdate=Re:J.next=Re,Qe.lastBaseUpdate=he))}if(_!==null){var tt=b.baseState;U=0,Qe=Re=he=null,J=_;do{var De=J.lane&-536870913,Ue=De!==J.lane;if(Ue?(Or&De)===De:(g&De)===De){De!==0&&De===F0&&(R4=!0),Qe!==null&&(Qe=Qe.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var Lt=l,Zt=J;De=u;var _n=f;switch(Zt.tag){case 1:if(Lt=Zt.payload,typeof Lt=="function"){tt=Lt.call(_n,tt,De);break e}tt=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Zt.payload,De=typeof Lt=="function"?Lt.call(_n,tt,De):Lt,De==null)break e;tt=m({},tt,De);break e;case 2:Bc=!0}}De=J.callback,De!==null&&(l.flags|=64,Ue&&(l.flags|=8192),Ue=b.callbacks,Ue===null?b.callbacks=[De]:Ue.push(De))}else Ue={lane:De,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Qe===null?(Re=Qe=Ue,he=tt):Qe=Qe.next=Ue,U|=De;if(J=J.next,J===null){if(J=b.shared.pending,J===null)break;Ue=J,J=Ue.next,Ue.next=null,b.lastBaseUpdate=Ue,b.shared.pending=null}}while(!0);Qe===null&&(he=tt),b.baseState=he,b.firstBaseUpdate=Re,b.lastBaseUpdate=Qe,_===null&&(b.shared.lanes=0),Hc|=U,l.lanes=U,l.memoizedState=tt}}function qk(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function Hk(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)qk(f[l],u)}var W0=X(null),T1=X(0);function Gk(l,u){l=Dl,ne(T1,l),ne(W0,u),Dl=l|u.baseLanes}function M4(){ne(T1,Dl),ne(W0,W0.current)}function D4(){Dl=T1.current,ie(W0),ie(T1)}var Ss=X(null),Gs=null;function Uc(l){var u=l.alternate;ne(fa,fa.current&1),ne(Ss,l),Gs===null&&(u===null||W0.current!==null||u.memoizedState!==null)&&(Gs=l)}function P4(l){ne(fa,fa.current),ne(Ss,l),Gs===null&&(Gs=l)}function Wk(l){l.tag===22?(ne(fa,fa.current),ne(Ss,l),Gs===null&&(Gs=l)):Vc()}function Vc(){ne(fa,fa.current),ne(Ss,Ss.current)}function Ns(l){ie(Ss),Gs===l&&(Gs=null),ie(fa)}var fa=X(0);function A1(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||V5(f)||F5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Al=0,yr=null,Sn=null,ja=null,E1=!1,K0=!1,gd=!1,k1=0,Tp=0,Q0=null,MY=0;function ia(){throw Error(n(321))}function L4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!bs(l[f],u[f]))return!1;return!0}function B4(l,u,f,g,b,_){return Al=_,yr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?CC:Z4,gd=!1,_=f(g,b),gd=!1,K0&&(_=Qk(u,f,g,b)),Kk(l),_}function Kk(l){H.H=kp;var u=Sn!==null&&Sn.next!==null;if(Al=0,ja=Sn=yr=null,E1=!1,Tp=0,Q0=null,u)throw Error(n(300));l===null||Ta||(l=l.dependencies,l!==null&&v1(l)&&(Ta=!0))}function Qk(l,u,f,g){yr=l;var b=0;do{if(K0&&(Q0=null),Tp=0,K0=!1,25<=b)throw Error(n(301));if(b+=1,ja=Sn=null,l.updateQueue!=null){var _=l.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=OC,_=u(f,g)}while(K0);return _}function DY(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?Ap(u):u,l=l.useState()[0],(Sn!==null?Sn.memoizedState:null)!==l&&(yr.flags|=1024),u}function $4(){var l=k1!==0;return k1=0,l}function z4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function U4(l){if(E1){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}E1=!1}Al=0,ja=Sn=yr=null,K0=!1,Tp=k1=0,Q0=null}function Ri(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ja===null?yr.memoizedState=ja=l:ja=ja.next=l,ja}function pa(){if(Sn===null){var l=yr.alternate;l=l!==null?l.memoizedState:null}else l=Sn.next;var u=ja===null?yr.memoizedState:ja.next;if(u!==null)ja=u,Sn=l;else{if(l===null)throw yr.alternate===null?Error(n(467)):Error(n(310));Sn=l,l={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},ja===null?yr.memoizedState=ja=l:ja=ja.next=l}return ja}function C1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ap(l){var u=Tp;return Tp+=1,Q0===null&&(Q0=[]),l=$k(Q0,l,u),u=yr,(ja===null?u.memoizedState:ja.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?CC:Z4),l}function O1(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ap(l);if(l.$$typeof===M)return di(l)}throw Error(n(438,String(l)))}function V4(l){var u=null,f=yr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=yr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=C1(),yr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=F;return u.index++,f}function El(l,u){return typeof u=="function"?u(l):u}function I1(l){var u=pa();return F4(u,Sn,l)}function F4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,_=g.pending;if(_!==null){if(b!==null){var U=b.next;b.next=_.next,_.next=U}u.baseQueue=b=_,g.pending=null}if(_=l.baseState,b===null)l.memoizedState=_;else{u=b.next;var J=U=null,he=null,Re=u,Qe=!1;do{var tt=Re.lane&-536870913;if(tt!==Re.lane?(Or&tt)===tt:(Al&tt)===tt){var De=Re.revertLane;if(De===0)he!==null&&(he=he.next={lane:0,revertLane:0,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),tt===F0&&(Qe=!0);else if((Al&De)===De){Re=Re.next,De===F0&&(Qe=!0);continue}else tt={lane:0,revertLane:Re.revertLane,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},he===null?(J=he=tt,U=_):he=he.next=tt,yr.lanes|=De,Hc|=De;tt=Re.action,gd&&f(_,tt),_=Re.hasEagerState?Re.eagerState:f(_,tt)}else De={lane:tt,revertLane:Re.revertLane,gesture:Re.gesture,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},he===null?(J=he=De,U=_):he=he.next=De,yr.lanes|=tt,Hc|=tt;Re=Re.next}while(Re!==null&&Re!==u);if(he===null?U=_:he.next=J,!bs(_,l.memoizedState)&&(Ta=!0,Qe&&(f=q0,f!==null)))throw f;l.memoizedState=_,l.baseState=U,l.baseQueue=he,g.lastRenderedState=_}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function q4(l){var u=pa(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,_=u.memoizedState;if(b!==null){f.pending=null;var U=b=b.next;do _=l(_,U.action),U=U.next;while(U!==b);bs(_,u.memoizedState)||(Ta=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),f.lastRenderedState=_}return[_,g]}function Xk(l,u,f){var g=yr,b=pa(),_=Br;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=u();var U=!bs((Sn||b).memoizedState,f);if(U&&(b.memoizedState=f,Ta=!0),b=b.queue,W4(Zk.bind(null,g,b,l),[l]),b.getSnapshot!==u||U||ja!==null&&ja.memoizedState.tag&1){if(g.flags|=2048,X0(9,{destroy:void 0},Jk.bind(null,g,b,f,u),null),In===null)throw Error(n(349));_||(Al&127)!==0||Yk(g,u,f)}return f}function Yk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=yr.updateQueue,u===null?(u=C1(),yr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function Jk(l,u,f,g){u.value=f,u.getSnapshot=g,eC(u)&&tC(l)}function Zk(l,u,f){return f(function(){eC(u)&&tC(l)})}function eC(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!bs(l,f)}catch{return!0}}function tC(l){var u=od(l,2);u!==null&&Ji(u,l,2)}function H4(l){var u=Ri();if(typeof l=="function"){var f=l;if(l=f(),gd){Pt(!0);try{f()}finally{Pt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:l},u}function rC(l,u,f,g){return l.baseState=f,F4(l,Sn,typeof g=="function"?g:El)}function PY(l,u,f,g,b){if(D1(l))throw Error(n(485));if(l=u.action,l!==null){var _={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){_.listeners.push(U)}};H.T!==null?f(!0):_.isTransition=!1,g(_),f=u.pending,f===null?(_.next=u.pending=_,nC(u,_)):(_.next=f.next,u.pending=f.next=_)}}function nC(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var _=H.T,U={};H.T=U;try{var J=f(b,g),he=H.S;he!==null&&he(U,J),aC(l,u,J)}catch(Re){G4(l,u,Re)}finally{_!==null&&U.types!==null&&(_.types=U.types),H.T=_}}else try{_=f(b,g),aC(l,u,_)}catch(Re){G4(l,u,Re)}}function aC(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){iC(l,u,g)},function(g){return G4(l,u,g)}):iC(l,u,f)}function iC(l,u,f){u.status="fulfilled",u.value=f,sC(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,nC(l,f)))}function G4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,sC(u),u=u.next;while(u!==g)}l.action=null}function sC(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function oC(l,u){return u}function lC(l,u){if(Br){var f=In.formState;if(f!==null){e:{var g=yr;if(Br){if(Vn){t:{for(var b=Vn,_=Hs;b.nodeType!==8;){if(!_){b=null;break t}if(b=Ws(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){Vn=Ws(b.nextSibling),g=b.data==="F!";break e}}Pc(g)}g=!1}g&&(u=f[0])}}return f=Ri(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oC,lastRenderedState:u},f.queue=g,f=AC.bind(null,yr,g),g.dispatch=f,g=H4(!1),_=J4.bind(null,yr,!1,g.queue),g=Ri(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=PY.bind(null,yr,b,_,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function cC(l){var u=pa();return uC(u,Sn,l)}function uC(l,u,f){if(u=F4(l,u,oC)[0],l=I1(El)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Ap(u)}catch(U){throw U===H0?S1:U}else g=u;u=pa();var b=u.queue,_=b.dispatch;return f!==u.memoizedState&&(yr.flags|=2048,X0(9,{destroy:void 0},LY.bind(null,b,f),null)),[g,_,l]}function LY(l,u){l.action=u}function dC(l){var u=pa(),f=Sn;if(f!==null)return uC(u,f,l);pa(),u=u.memoizedState,f=pa();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function X0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=yr.updateQueue,u===null&&(u=C1(),yr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function hC(){return pa().memoizedState}function R1(l,u,f,g){var b=Ri();yr.flags|=l,b.memoizedState=X0(1|u,{destroy:void 0},f,g===void 0?null:g)}function M1(l,u,f,g){var b=pa();g=g===void 0?null:g;var _=b.memoizedState.inst;Sn!==null&&g!==null&&L4(g,Sn.memoizedState.deps)?b.memoizedState=X0(u,_,f,g):(yr.flags|=l,b.memoizedState=X0(1|u,_,f,g))}function fC(l,u){R1(8390656,8,l,u)}function W4(l,u){M1(2048,8,l,u)}function BY(l){yr.flags|=4;var u=yr.updateQueue;if(u===null)u=C1(),yr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function pC(l){var u=pa().memoizedState;return BY({ref:u,nextImpl:l}),function(){if((en&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function mC(l,u){return M1(4,2,l,u)}function gC(l,u){return M1(4,4,l,u)}function xC(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function yC(l,u,f){f=f!=null?f.concat([l]):null,M1(4,4,xC.bind(null,u,l),f)}function K4(){}function vC(l,u){var f=pa();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&L4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function bC(l,u){var f=pa();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&L4(u,g[1]))return g[0];if(g=l(),gd){Pt(!0);try{l()}finally{Pt(!1)}}return f.memoizedState=[g,u],g}function Q4(l,u,f){return f===void 0||(Al&1073741824)!==0&&(Or&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=w9(),yr.lanes|=l,Hc|=l,f)}function wC(l,u,f,g){return bs(f,u)?f:W0.current!==null?(l=Q4(l,f,g),bs(l,u)||(Ta=!0),l):(Al&42)===0||(Al&1073741824)!==0&&(Or&261930)===0?(Ta=!0,l.memoizedState=f):(l=w9(),yr.lanes|=l,Hc|=l,u)}function SC(l,u,f,g,b){var _=K.p;K.p=_!==0&&8>_?_:8;var U=H.T,J={};H.T=J,J4(l,!1,u,f);try{var he=b(),Re=H.S;if(Re!==null&&Re(J,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var Qe=RY(he,g);Ep(l,u,Qe,Ts(l))}else Ep(l,u,g,Ts(l))}catch(tt){Ep(l,u,{then:function(){},status:"rejected",reason:tt},Ts())}finally{K.p=_,U!==null&&J.types!==null&&(U.types=J.types),H.T=U}}function $Y(){}function X4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=NC(l).queue;SC(l,b,u,te,f===null?$Y:function(){return _C(l),f(g)})}function NC(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:te},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function _C(l){var u=NC(l);u.next===null&&(u=l.alternate.memoizedState),Ep(l,u.next.queue,{},Ts())}function Y4(){return di(Hp)}function jC(){return pa().memoizedState}function TC(){return pa().memoizedState}function zY(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=Ts();l=$c(f);var g=zc(u,l,f);g!==null&&(Ji(g,u,f),Np(g,u,f)),u={cache:T4()},l.payload=u;return}u=u.return}}function UY(l,u,f){var g=Ts();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},D1(l)?EC(u,f):(f=m4(l,u,f,g),f!==null&&(Ji(f,l,g),kC(f,u,g)))}function AC(l,u,f){var g=Ts();Ep(l,u,f,g)}function Ep(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(D1(l))EC(u,b);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var U=u.lastRenderedState,J=_(U,f);if(b.hasEagerState=!0,b.eagerState=J,bs(J,U))return m1(l,u,b,0),In===null&&p1(),!1}catch{}finally{}if(f=m4(l,u,b,g),f!==null)return Ji(f,l,g),kC(f,u,g),!0}return!1}function J4(l,u,f,g){if(g={lane:2,revertLane:C5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},D1(l)){if(u)throw Error(n(479))}else u=m4(l,f,g,2),u!==null&&Ji(u,l,2)}function D1(l){var u=l.alternate;return l===yr||u!==null&&u===yr}function EC(l,u){K0=E1=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function kC(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,xn(l,f)}}var kp={readContext:di,use:O1,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useInsertionEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useSyncExternalStore:ia,useId:ia,useHostTransitionStatus:ia,useFormState:ia,useActionState:ia,useOptimistic:ia,useMemoCache:ia,useCacheRefresh:ia};kp.useEffectEvent=ia;var CC={readContext:di,use:O1,useCallback:function(l,u){return Ri().memoizedState=[l,u===void 0?null:u],l},useContext:di,useEffect:fC,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,R1(4194308,4,xC.bind(null,u,l),f)},useLayoutEffect:function(l,u){return R1(4194308,4,l,u)},useInsertionEffect:function(l,u){R1(4,2,l,u)},useMemo:function(l,u){var f=Ri();u=u===void 0?null:u;var g=l();if(gd){Pt(!0);try{l()}finally{Pt(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Ri();if(f!==void 0){var b=f(u);if(gd){Pt(!0);try{f(u)}finally{Pt(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=UY.bind(null,yr,l),[g.memoizedState,l]},useRef:function(l){var u=Ri();return l={current:l},u.memoizedState=l},useState:function(l){l=H4(l);var u=l.queue,f=AC.bind(null,yr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:K4,useDeferredValue:function(l,u){var f=Ri();return Q4(f,l,u)},useTransition:function(){var l=H4(!1);return l=SC.bind(null,yr,l.queue,!0,!1),Ri().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=yr,b=Ri();if(Br){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),In===null)throw Error(n(349));(Or&127)!==0||Yk(g,u,f)}b.memoizedState=f;var _={value:f,getSnapshot:u};return b.queue=_,fC(Zk.bind(null,g,_,l),[l]),g.flags|=2048,X0(9,{destroy:void 0},Jk.bind(null,g,_,f,u),null),f},useId:function(){var l=Ri(),u=In.identifierPrefix;if(Br){var f=Vo,g=Uo;f=(g&~(1<<32-rt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=k1++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=MY++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:Y4,useFormState:lC,useActionState:lC,useOptimistic:function(l){var u=Ri();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=J4.bind(null,yr,!0,f),f.dispatch=u,[l,u]},useMemoCache:V4,useCacheRefresh:function(){return Ri().memoizedState=zY.bind(null,yr)},useEffectEvent:function(l){var u=Ri(),f={impl:l};return u.memoizedState=f,function(){if((en&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},Z4={readContext:di,use:O1,useCallback:vC,useContext:di,useEffect:W4,useImperativeHandle:yC,useInsertionEffect:mC,useLayoutEffect:gC,useMemo:bC,useReducer:I1,useRef:hC,useState:function(){return I1(El)},useDebugValue:K4,useDeferredValue:function(l,u){var f=pa();return wC(f,Sn.memoizedState,l,u)},useTransition:function(){var l=I1(El)[0],u=pa().memoizedState;return[typeof l=="boolean"?l:Ap(l),u]},useSyncExternalStore:Xk,useId:jC,useHostTransitionStatus:Y4,useFormState:cC,useActionState:cC,useOptimistic:function(l,u){var f=pa();return rC(f,Sn,l,u)},useMemoCache:V4,useCacheRefresh:TC};Z4.useEffectEvent=pC;var OC={readContext:di,use:O1,useCallback:vC,useContext:di,useEffect:W4,useImperativeHandle:yC,useInsertionEffect:mC,useLayoutEffect:gC,useMemo:bC,useReducer:q4,useRef:hC,useState:function(){return q4(El)},useDebugValue:K4,useDeferredValue:function(l,u){var f=pa();return Sn===null?Q4(f,l,u):wC(f,Sn.memoizedState,l,u)},useTransition:function(){var l=q4(El)[0],u=pa().memoizedState;return[typeof l=="boolean"?l:Ap(l),u]},useSyncExternalStore:Xk,useId:jC,useHostTransitionStatus:Y4,useFormState:dC,useActionState:dC,useOptimistic:function(l,u){var f=pa();return Sn!==null?rC(f,Sn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:V4,useCacheRefresh:TC};OC.useEffectEvent=pC;function e5(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var t5={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=Ts(),b=$c(g);b.payload=u,f!=null&&(b.callback=f),u=zc(l,b,g),u!==null&&(Ji(u,l,g),Np(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=Ts(),b=$c(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=zc(l,b,g),u!==null&&(Ji(u,l,g),Np(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=Ts(),g=$c(f);g.tag=2,u!=null&&(g.callback=u),u=zc(l,g,f),u!==null&&(Ji(u,l,f),Np(u,l,f))}};function IC(l,u,f,g,b,_,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,_,U):u.prototype&&u.prototype.isPureReactComponent?!mp(f,g)||!mp(b,_):!0}function RC(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&t5.enqueueReplaceState(u,u.state,null)}function xd(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function MC(l){f1(l)}function DC(l){console.error(l)}function PC(l){f1(l)}function P1(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function LC(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function r5(l,u,f){return f=$c(f),f.tag=3,f.payload={element:null},f.callback=function(){P1(l,u)},f}function BC(l){return l=$c(l),l.tag=3,l}function $C(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var _=g.value;l.payload=function(){return b(_)},l.callback=function(){LC(u,f,g)}}var U=f.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){LC(u,f,g),typeof b!="function"&&(Gc===null?Gc=new Set([this]):Gc.add(this));var J=g.stack;this.componentDidCatch(g.value,{componentStack:J!==null?J:""})})}function VY(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&V0(u,f,b,!0),f=Ss.current,f!==null){switch(f.tag){case 31:case 13:return Gs===null?K1():f.alternate===null&&sa===0&&(sa=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===N1?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),A5(l,g,b)),!1;case 22:return f.flags|=65536,g===N1?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),A5(l,g,b)),!1}throw Error(n(435,f.tag))}return A5(l,g,b),K1(),!1}if(Br)return u=Ss.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==w4&&(l=Error(n(422),{cause:g}),yp(Vs(l,f)))):(g!==w4&&(u=Error(n(423),{cause:g}),yp(Vs(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Vs(g,f),b=r5(l.stateNode,g,b),I4(l,b),sa!==4&&(sa=2)),!1;var _=Error(n(520),{cause:g});if(_=Vs(_,f),Lp===null?Lp=[_]:Lp.push(_),sa!==4&&(sa=2),u===null)return!0;g=Vs(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=r5(f.stateNode,g,l),I4(f,l),!1;case 1:if(u=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gc===null||!Gc.has(_))))return f.flags|=65536,b&=-b,f.lanes|=b,b=BC(b),$C(b,l,f,g),I4(f,b),!1}f=f.return}while(f!==null);return!1}var n5=Error(n(461)),Ta=!1;function hi(l,u,f,g){u.child=l===null?Fk(u,null,f,g):md(u,l.child,f,g)}function zC(l,u,f,g,b){f=f.render;var _=u.ref;if("ref"in g){var U={};for(var J in g)J!=="ref"&&(U[J]=g[J])}else U=g;return dd(u),g=B4(l,u,f,U,_,b),J=$4(),l!==null&&!Ta?(z4(l,u,b),kl(l,u,b)):(Br&&J&&v4(u),u.flags|=1,hi(l,u,g,b),u.child)}function UC(l,u,f,g,b){if(l===null){var _=f.type;return typeof _=="function"&&!g4(_)&&_.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=_,VC(l,u,_,g,b)):(l=x1(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(_=l.child,!d5(l,b)){var U=_.memoizedProps;if(f=f.compare,f=f!==null?f:mp,f(U,g)&&l.ref===u.ref)return kl(l,u,b)}return u.flags|=1,l=Nl(_,g),l.ref=u.ref,l.return=u,u.child=l}function VC(l,u,f,g,b){if(l!==null){var _=l.memoizedProps;if(mp(_,g)&&l.ref===u.ref)if(Ta=!1,u.pendingProps=g=_,d5(l,b))(l.flags&131072)!==0&&(Ta=!0);else return u.lanes=l.lanes,kl(l,u,b)}return a5(l,u,f,g,b)}function FC(l,u,f,g){var b=g.children,_=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~_}else g=0,u.child=null;return qC(l,u,_,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&w1(u,_!==null?_.cachePool:null),_!==null?Gk(u,_):M4(),Wk(u);else return g=u.lanes=536870912,qC(l,u,_!==null?_.baseLanes|f:f,f,g)}else _!==null?(w1(u,_.cachePool),Gk(u,_),Vc(),u.memoizedState=null):(l!==null&&w1(u,null),M4(),Vc());return hi(l,u,b,f),u.child}function Cp(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function qC(l,u,f,g,b){var _=E4();return _=_===null?null:{parent:_a._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},l!==null&&w1(u,null),M4(),Wk(u),l!==null&&V0(l,u,g,!0),u.childLanes=b,null}function L1(l,u){return u=$1({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function HC(l,u,f){return md(u,l.child,null,f),l=L1(u,u.pendingProps),l.flags|=2,Ns(u),u.memoizedState=null,l}function FY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Br){if(g.mode==="hidden")return l=L1(u,g),u.lanes=536870912,Cp(null,l);if(P4(u),(l=Vn)?(l=nO(l,Hs),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Mc!==null?{id:Uo,overflow:Vo}:null,retryLane:536870912,hydrationErrors:null},f=Ek(l),f.return=u,u.child=f,ui=u,Vn=null)):l=null,l===null)throw Pc(u);return u.lanes=536870912,null}return L1(u,g)}var _=l.memoizedState;if(_!==null){var U=_.dehydrated;if(P4(u),b)if(u.flags&256)u.flags&=-257,u=HC(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(Ta||V0(l,u,f,!1),b=(f&l.childLanes)!==0,Ta||b){if(g=In,g!==null&&(U=Ln(g,f),U!==0&&U!==_.retryLane))throw _.retryLane=U,od(l,U),Ji(g,l,U),n5;K1(),u=HC(l,u,f)}else l=_.treeContext,Vn=Ws(U.nextSibling),ui=u,Br=!0,Dc=null,Hs=!1,l!==null&&Ok(u,l),u=L1(u,g),u.flags|=4096;return u}return l=Nl(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function B1(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function a5(l,u,f,g,b){return dd(u),f=B4(l,u,f,g,void 0,b),g=$4(),l!==null&&!Ta?(z4(l,u,b),kl(l,u,b)):(Br&&g&&v4(u),u.flags|=1,hi(l,u,f,b),u.child)}function GC(l,u,f,g,b,_){return dd(u),u.updateQueue=null,f=Qk(u,g,f,b),Kk(l),g=$4(),l!==null&&!Ta?(z4(l,u,_),kl(l,u,_)):(Br&&g&&v4(u),u.flags|=1,hi(l,u,f,_),u.child)}function WC(l,u,f,g,b){if(dd(u),u.stateNode===null){var _=B0,U=f.contextType;typeof U=="object"&&U!==null&&(_=di(U)),_=new f(g,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=t5,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=g,_.state=u.memoizedState,_.refs={},C4(u),U=f.contextType,_.context=typeof U=="object"&&U!==null?di(U):B0,_.state=u.memoizedState,U=f.getDerivedStateFromProps,typeof U=="function"&&(e5(u,f,U,g),_.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(U=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),U!==_.state&&t5.enqueueReplaceState(_,_.state,null),jp(u,g,_,b),_p(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){_=u.stateNode;var J=u.memoizedProps,he=xd(f,J);_.props=he;var Re=_.context,Qe=f.contextType;U=B0,typeof Qe=="object"&&Qe!==null&&(U=di(Qe));var tt=f.getDerivedStateFromProps;Qe=typeof tt=="function"||typeof _.getSnapshotBeforeUpdate=="function",J=u.pendingProps!==J,Qe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(J||Re!==U)&&RC(u,_,g,U),Bc=!1;var De=u.memoizedState;_.state=De,jp(u,g,_,b),_p(),Re=u.memoizedState,J||De!==Re||Bc?(typeof tt=="function"&&(e5(u,f,tt,g),Re=u.memoizedState),(he=Bc||IC(u,f,he,g,De,Re,U))?(Qe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Re),_.props=g,_.state=Re,_.context=U,g=he):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{_=u.stateNode,O4(l,u),U=u.memoizedProps,Qe=xd(f,U),_.props=Qe,tt=u.pendingProps,De=_.context,Re=f.contextType,he=B0,typeof Re=="object"&&Re!==null&&(he=di(Re)),J=f.getDerivedStateFromProps,(Re=typeof J=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(U!==tt||De!==he)&&RC(u,_,g,he),Bc=!1,De=u.memoizedState,_.state=De,jp(u,g,_,b),_p();var Ue=u.memoizedState;U!==tt||De!==Ue||Bc||l!==null&&l.dependencies!==null&&v1(l.dependencies)?(typeof J=="function"&&(e5(u,f,J,g),Ue=u.memoizedState),(Qe=Bc||IC(u,f,Qe,g,De,Ue,he)||l!==null&&l.dependencies!==null&&v1(l.dependencies))?(Re||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Ue,he),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Ue,he)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||U===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Ue),_.props=g,_.state=Ue,_.context=he,g=Qe):(typeof _.componentDidUpdate!="function"||U===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),g=!1)}return _=g,B1(l,u),g=(u.flags&128)!==0,_||g?(_=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,l!==null&&g?(u.child=md(u,l.child,null,b),u.child=md(u,null,f,b)):hi(l,u,f,b),u.memoizedState=_.state,l=u.child):l=kl(l,u,b),l}function KC(l,u,f,g){return cd(),u.flags|=256,hi(l,u,f,g),u.child}var i5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function s5(l){return{baseLanes:l,cachePool:Lk()}}function o5(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=js),l}function QC(l,u,f){var g=u.pendingProps,b=!1,_=(u.flags&128)!==0,U;if((U=_)||(U=l!==null&&l.memoizedState===null?!1:(fa.current&2)!==0),U&&(b=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(Br){if(b?Uc(u):Vc(),(l=Vn)?(l=nO(l,Hs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Mc!==null?{id:Uo,overflow:Vo}:null,retryLane:536870912,hydrationErrors:null},f=Ek(l),f.return=u,u.child=f,ui=u,Vn=null)):l=null,l===null)throw Pc(u);return F5(l)?u.lanes=32:u.lanes=536870912,null}var J=g.children;return g=g.fallback,b?(Vc(),b=u.mode,J=$1({mode:"hidden",children:J},b),g=ld(g,b,f,null),J.return=u,g.return=u,J.sibling=g,u.child=J,g=u.child,g.memoizedState=s5(f),g.childLanes=o5(l,U,f),u.memoizedState=i5,Cp(null,g)):(Uc(u),l5(u,J))}var he=l.memoizedState;if(he!==null&&(J=he.dehydrated,J!==null)){if(_)u.flags&256?(Uc(u),u.flags&=-257,u=c5(l,u,f)):u.memoizedState!==null?(Vc(),u.child=l.child,u.flags|=128,u=null):(Vc(),J=g.fallback,b=u.mode,g=$1({mode:"visible",children:g.children},b),J=ld(J,b,f,null),J.flags|=2,g.return=u,J.return=u,g.sibling=J,u.child=g,md(u,l.child,null,f),g=u.child,g.memoizedState=s5(f),g.childLanes=o5(l,U,f),u.memoizedState=i5,u=Cp(null,g));else if(Uc(u),F5(J)){if(U=J.nextSibling&&J.nextSibling.dataset,U)var Re=U.dgst;U=Re,g=Error(n(419)),g.stack="",g.digest=U,yp({value:g,source:null,stack:null}),u=c5(l,u,f)}else if(Ta||V0(l,u,f,!1),U=(f&l.childLanes)!==0,Ta||U){if(U=In,U!==null&&(g=Ln(U,f),g!==0&&g!==he.retryLane))throw he.retryLane=g,od(l,g),Ji(U,l,g),n5;V5(J)||K1(),u=c5(l,u,f)}else V5(J)?(u.flags|=192,u.child=l.child,u=null):(l=he.treeContext,Vn=Ws(J.nextSibling),ui=u,Br=!0,Dc=null,Hs=!1,l!==null&&Ok(u,l),u=l5(u,g.children),u.flags|=4096);return u}return b?(Vc(),J=g.fallback,b=u.mode,he=l.child,Re=he.sibling,g=Nl(he,{mode:"hidden",children:g.children}),g.subtreeFlags=he.subtreeFlags&65011712,Re!==null?J=Nl(Re,J):(J=ld(J,b,f,null),J.flags|=2),J.return=u,g.return=u,g.sibling=J,u.child=g,Cp(null,g),g=u.child,J=l.child.memoizedState,J===null?J=s5(f):(b=J.cachePool,b!==null?(he=_a._currentValue,b=b.parent!==he?{parent:he,pool:he}:b):b=Lk(),J={baseLanes:J.baseLanes|f,cachePool:b}),g.memoizedState=J,g.childLanes=o5(l,U,f),u.memoizedState=i5,Cp(l.child,g)):(Uc(u),f=l.child,l=f.sibling,f=Nl(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=f,u.memoizedState=null,f)}function l5(l,u){return u=$1({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function $1(l,u){return l=ws(22,l,null,u),l.lanes=0,l}function c5(l,u,f){return md(u,l.child,null,f),l=l5(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function XC(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),_4(l.return,u,f)}function u5(l,u,f,g,b,_){var U=l.memoizedState;U===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:_}:(U.isBackwards=u,U.rendering=null,U.renderingStartTime=0,U.last=g,U.tail=f,U.tailMode=b,U.treeForkCount=_)}function YC(l,u,f){var g=u.pendingProps,b=g.revealOrder,_=g.tail;g=g.children;var U=fa.current,J=(U&2)!==0;if(J?(U=U&1|2,u.flags|=128):U&=1,ne(fa,U),hi(l,u,g,f),g=Br?xp:0,!J&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&XC(l,f,u);else if(l.tag===19)XC(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&A1(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),u5(u,!1,b,f,_,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&A1(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}u5(u,!0,f,null,_,g);break;case"together":u5(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function kl(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Hc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(V0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=Nl(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=Nl(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function d5(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&v1(l)))}function qY(l,u,f){switch(u.tag){case 3:He(u,u.stateNode.containerInfo),Lc(u,_a,l.memoizedState.cache),cd();break;case 27:case 5:We(u);break;case 4:He(u,u.stateNode.containerInfo);break;case 10:Lc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,P4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Uc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?QC(l,u,f):(Uc(u),l=kl(l,u,f),l!==null?l.sibling:null);Uc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(V0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return YC(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ne(fa,fa.current),g)break;return null;case 22:return u.lanes=0,FC(l,u,f,u.pendingProps);case 24:Lc(u,_a,l.memoizedState.cache)}return kl(l,u,f)}function JC(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)Ta=!0;else{if(!d5(l,f)&&(u.flags&128)===0)return Ta=!1,qY(l,u,f);Ta=(l.flags&131072)!==0}else Ta=!1,Br&&(u.flags&1048576)!==0&&Ck(u,xp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=fd(u.elementType),u.type=l,typeof l=="function")g4(l)?(g=xd(l,g),u.tag=1,u=WC(null,u,l,g,f)):(u.tag=0,u=a5(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=zC(null,u,l,g,f);break e}else if(b===A){u.tag=14,u=UC(null,u,l,g,f);break e}}throw u=G(l)||l,Error(n(306,u,""))}}return u;case 0:return a5(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=xd(g,u.pendingProps),WC(l,u,g,b,f);case 3:e:{if(He(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var _=u.memoizedState;b=_.element,O4(l,u),jp(u,g,null,f);var U=u.memoizedState;if(g=U.cache,Lc(u,_a,g),g!==_.cache&&j4(u,[_a],f,!0),_p(),g=U.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=KC(l,u,g,f);break e}else if(g!==b){b=Vs(Error(n(424)),u),yp(b),u=KC(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Vn=Ws(l.firstChild),ui=u,Br=!0,Dc=null,Hs=!0,f=Fk(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(cd(),g===b){u=kl(l,u,f);break e}hi(l,u,g,f)}u=u.child}return u;case 26:return B1(l,u),l===null?(f=cO(u.type,null,u.pendingProps,null))?u.memoizedState=f:Br||(f=u.type,l=u.pendingProps,g=ty(Be.current).createElement(f),g[Jr]=u,g[vn]=l,fi(g,f,l),vr(g),u.stateNode=g):u.memoizedState=cO(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return We(u),l===null&&Br&&(g=u.stateNode=sO(u.type,u.pendingProps,Be.current),ui=u,Hs=!0,b=Vn,Xc(u.type)?(q5=b,Vn=Ws(g.firstChild)):Vn=b),hi(l,u,u.pendingProps.children,f),B1(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Br&&((b=g=Vn)&&(g=bJ(g,u.type,u.pendingProps,Hs),g!==null?(u.stateNode=g,ui=u,Vn=Ws(g.firstChild),Hs=!1,b=!0):b=!1),b||Pc(u)),We(u),b=u.type,_=u.pendingProps,U=l!==null?l.memoizedProps:null,g=_.children,$5(b,_)?g=null:U!==null&&$5(b,U)&&(u.flags|=32),u.memoizedState!==null&&(b=B4(l,u,DY,null,null,f),Hp._currentValue=b),B1(l,u),hi(l,u,g,f),u.child;case 6:return l===null&&Br&&((l=f=Vn)&&(f=wJ(f,u.pendingProps,Hs),f!==null?(u.stateNode=f,ui=u,Vn=null,l=!0):l=!1),l||Pc(u)),null;case 13:return QC(l,u,f);case 4:return He(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=md(u,null,g,f):hi(l,u,g,f),u.child;case 11:return zC(l,u,u.type,u.pendingProps,f);case 7:return hi(l,u,u.pendingProps,f),u.child;case 8:return hi(l,u,u.pendingProps.children,f),u.child;case 12:return hi(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Lc(u,u.type,g.value),hi(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,dd(u),b=di(b),g=g(b),u.flags|=1,hi(l,u,g,f),u.child;case 14:return UC(l,u,u.type,u.pendingProps,f);case 15:return VC(l,u,u.type,u.pendingProps,f);case 19:return YC(l,u,f);case 31:return FY(l,u,f);case 22:return FC(l,u,f,u.pendingProps);case 24:return dd(u),g=di(_a),l===null?(b=E4(),b===null&&(b=In,_=T4(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=f),b=_),u.memoizedState={parent:g,cache:b},C4(u),Lc(u,_a,b)):((l.lanes&f)!==0&&(O4(l,u),jp(u,null,null,f),_p()),b=l.memoizedState,_=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Lc(u,_a,g)):(g=_.cache,Lc(u,_a,g),g!==b.cache&&j4(u,[_a],f,!0))),hi(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function Cl(l){l.flags|=4}function h5(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(j9())l.flags|=8192;else throw pd=N1,k4}else l.flags&=-16777217}function ZC(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!pO(u))if(j9())l.flags|=8192;else throw pd=N1,k4}function z1(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?gn():536870912,l.lanes|=u,eh|=u)}function Op(l,u){if(!Br)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Fn(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function HY(l,u,f){var g=u.pendingProps;switch(b4(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(u),null;case 1:return Fn(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Tl(_a),Ne(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(U0(u)?Cl(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,S4())),Fn(u),null;case 26:var b=u.type,_=u.memoizedState;return l===null?(Cl(u),_!==null?(Fn(u),ZC(u,_)):(Fn(u),h5(u,b,null,g,f))):_?_!==l.memoizedState?(Cl(u),Fn(u),ZC(u,_)):(Fn(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&Cl(u),Fn(u),h5(u,b,l,g,f)),null;case 27:if(Y(u),f=Be.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Cl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Fn(u),null}l=ve.current,U0(u)?Ik(u):(l=sO(b,g,f),u.stateNode=l,Cl(u))}return Fn(u),null;case 5:if(Y(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Cl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Fn(u),null}if(_=ve.current,U0(u))Ik(u);else{var U=ty(Be.current);switch(_){case 1:_=U.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=U.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=U.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?U.createElement("select",{is:g.is}):U.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?U.createElement(b,{is:g.is}):U.createElement(b)}}_[Jr]=u,_[vn]=g;e:for(U=u.child;U!==null;){if(U.tag===5||U.tag===6)_.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===u)break e;for(;U.sibling===null;){if(U.return===null||U.return===u)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}u.stateNode=_;e:switch(fi(_,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Cl(u)}}return Fn(u),h5(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&Cl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=Be.current,U0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=ui,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[Jr]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||Q9(l.nodeValue,f)),l||Pc(u,!0)}else l=ty(l).createTextNode(g),l[Jr]=u,u.stateNode=l}return Fn(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=U0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Jr]=u}else cd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Fn(u),l=!1}else f=S4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(Ns(u),u):(Ns(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Fn(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=U0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Jr]=u}else cd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Fn(u),b=!1}else b=S4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(Ns(u),u):(Ns(u),null)}return Ns(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),z1(u,u.updateQueue),Fn(u),null);case 4:return Ne(),l===null&&M5(u.stateNode.containerInfo),Fn(u),null;case 10:return Tl(u.type),Fn(u),null;case 19:if(ie(fa),g=u.memoizedState,g===null)return Fn(u),null;if(b=(u.flags&128)!==0,_=g.rendering,_===null)if(b)Op(g,!1);else{if(sa!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(_=A1(l),_!==null){for(u.flags|=128,Op(g,!1),l=_.updateQueue,u.updateQueue=l,z1(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)Ak(f,l),f=f.sibling;return ne(fa,fa.current&1|2),Br&&_l(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&Fe()>H1&&(u.flags|=128,b=!0,Op(g,!1),u.lanes=4194304)}else{if(!b)if(l=A1(_),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,z1(u,l),Op(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Br)return Fn(u),null}else 2*Fe()-g.renderingStartTime>H1&&f!==536870912&&(u.flags|=128,b=!0,Op(g,!1),u.lanes=4194304);g.isBackwards?(_.sibling=u.child,u.child=_):(l=g.last,l!==null?l.sibling=_:u.child=_,g.last=_)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Fe(),l.sibling=null,f=fa.current,ne(fa,b?f&1|2:f&1),Br&&_l(u,g.treeForkCount),l):(Fn(u),null);case 22:case 23:return Ns(u),D4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Fn(u),u.subtreeFlags&6&&(u.flags|=8192)):Fn(u),f=u.updateQueue,f!==null&&z1(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ie(hd),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),Tl(_a),Fn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function GY(l,u){switch(b4(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Tl(_a),Ne(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Y(u),null;case 31:if(u.memoizedState!==null){if(Ns(u),u.alternate===null)throw Error(n(340));cd()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Ns(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));cd()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ie(fa),null;case 4:return Ne(),null;case 10:return Tl(u.type),null;case 22:case 23:return Ns(u),D4(),l!==null&&ie(hd),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Tl(_a),null;case 25:return null;default:return null}}function e9(l,u){switch(b4(u),u.tag){case 3:Tl(_a),Ne();break;case 26:case 27:case 5:Y(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&Ns(u);break;case 13:Ns(u);break;case 19:ie(fa);break;case 10:Tl(u.type);break;case 22:case 23:Ns(u),D4(),l!==null&&ie(hd);break;case 24:Tl(_a)}}function Ip(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var _=f.create,U=f.inst;g=_(),U.destroy=g}f=f.next}while(f!==b)}}catch(J){fn(u,u.return,J)}}function Fc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var _=b.next;g=_;do{if((g.tag&l)===l){var U=g.inst,J=U.destroy;if(J!==void 0){U.destroy=void 0,b=u;var he=f,Re=J;try{Re()}catch(Qe){fn(b,he,Qe)}}}g=g.next}while(g!==_)}}catch(Qe){fn(u,u.return,Qe)}}function t9(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{Hk(u,f)}catch(g){fn(l,l.return,g)}}}function r9(l,u,f){f.props=xd(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){fn(l,u,g)}}function Rp(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){fn(l,u,b)}}function Fo(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){fn(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){fn(l,u,b)}else f.current=null}function n9(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){fn(l,l.return,b)}}function f5(l,u,f){try{var g=l.stateNode;pJ(g,l.type,f,u),g[vn]=u}catch(b){fn(l,l.return,b)}}function a9(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Xc(l.type)||l.tag===4}function p5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||a9(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Xc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function m5(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=wn));else if(g!==4&&(g===27&&Xc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(m5(l,u,f),l=l.sibling;l!==null;)m5(l,u,f),l=l.sibling}function U1(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Xc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(U1(l,u,f),l=l.sibling;l!==null;)U1(l,u,f),l=l.sibling}function i9(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);fi(u,g,f),u[Jr]=l,u[vn]=f}catch(_){fn(l,l.return,_)}}var Ol=!1,Aa=!1,g5=!1,s9=typeof WeakSet=="function"?WeakSet:Set,ti=null;function WY(l,u){if(l=l.containerInfo,L5=ly,l=yk(l),c4(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var U=0,J=-1,he=-1,Re=0,Qe=0,tt=l,De=null;t:for(;;){for(var Ue;tt!==f||b!==0&&tt.nodeType!==3||(J=U+b),tt!==_||g!==0&&tt.nodeType!==3||(he=U+g),tt.nodeType===3&&(U+=tt.nodeValue.length),(Ue=tt.firstChild)!==null;)De=tt,tt=Ue;for(;;){if(tt===l)break t;if(De===f&&++Re===b&&(J=U),De===_&&++Qe===g&&(he=U),(Ue=tt.nextSibling)!==null)break;tt=De,De=tt.parentNode}tt=Ue}f=J===-1||he===-1?null:{start:J,end:he}}else f=null}f=f||{start:0,end:0}}else f=null;for(B5={focusedElem:l,selectionRange:f},ly=!1,ti=u;ti!==null;)if(u=ti,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,ti=l;else for(;ti!==null;){switch(u=ti,_=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&_!==null){l=void 0,f=u,b=_.memoizedProps,_=_.memoizedState,g=f.stateNode;try{var Lt=xd(f.type,b);l=g.getSnapshotBeforeUpdate(Lt,_),g.__reactInternalSnapshotBeforeUpdate=l}catch(Zt){fn(f,f.return,Zt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)U5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":U5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,ti=l;break}ti=u.return}}function o9(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Rl(l,f),g&4&&Ip(5,f);break;case 1:if(Rl(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(U){fn(f,f.return,U)}else{var b=xd(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){fn(f,f.return,U)}}g&64&&t9(f),g&512&&Rp(f,f.return);break;case 3:if(Rl(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{Hk(l,u)}catch(U){fn(f,f.return,U)}}break;case 27:u===null&&g&4&&i9(f);case 26:case 5:Rl(l,f),u===null&&g&4&&n9(f),g&512&&Rp(f,f.return);break;case 12:Rl(l,f);break;case 31:Rl(l,f),g&4&&u9(l,f);break;case 13:Rl(l,f),g&4&&d9(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=rJ.bind(null,f),SJ(l,f))));break;case 22:if(g=f.memoizedState!==null||Ol,!g){u=u!==null&&u.memoizedState!==null||Aa,b=Ol;var _=Aa;Ol=g,(Aa=u)&&!_?Ml(l,f,(f.subtreeFlags&8772)!==0):Rl(l,f),Ol=b,Aa=_}break;case 30:break;default:Rl(l,f)}}function l9(l){var u=l.alternate;u!==null&&(l.alternate=null,l9(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&kt(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Kn=null,Ki=!1;function Il(l,u,f){for(f=f.child;f!==null;)c9(l,u,f),f=f.sibling}function c9(l,u,f){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(xt,f)}catch{}switch(f.tag){case 26:Aa||Fo(f,u),Il(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Aa||Fo(f,u);var g=Kn,b=Ki;Xc(f.type)&&(Kn=f.stateNode,Ki=!1),Il(l,u,f),Vp(f.stateNode),Kn=g,Ki=b;break;case 5:Aa||Fo(f,u);case 6:if(g=Kn,b=Ki,Kn=null,Il(l,u,f),Kn=g,Ki=b,Kn!==null)if(Ki)try{(Kn.nodeType===9?Kn.body:Kn.nodeName==="HTML"?Kn.ownerDocument.body:Kn).removeChild(f.stateNode)}catch(_){fn(f,u,_)}else try{Kn.removeChild(f.stateNode)}catch(_){fn(f,u,_)}break;case 18:Kn!==null&&(Ki?(l=Kn,tO(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),lh(l)):tO(Kn,f.stateNode));break;case 4:g=Kn,b=Ki,Kn=f.stateNode.containerInfo,Ki=!0,Il(l,u,f),Kn=g,Ki=b;break;case 0:case 11:case 14:case 15:Fc(2,f,u),Aa||Fc(4,f,u),Il(l,u,f);break;case 1:Aa||(Fo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&r9(f,u,g)),Il(l,u,f);break;case 21:Il(l,u,f);break;case 22:Aa=(g=Aa)||f.memoizedState!==null,Il(l,u,f),Aa=g;break;default:Il(l,u,f)}}function u9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{lh(l)}catch(f){fn(u,u.return,f)}}}function d9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{lh(l)}catch(f){fn(u,u.return,f)}}function KY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new s9),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new s9),u;default:throw Error(n(435,l.tag))}}function V1(l,u){var f=KY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=nJ.bind(null,l,g);g.then(b,b)}})}function Qi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],_=l,U=u,J=U;e:for(;J!==null;){switch(J.tag){case 27:if(Xc(J.type)){Kn=J.stateNode,Ki=!1;break e}break;case 5:Kn=J.stateNode,Ki=!1;break e;case 3:case 4:Kn=J.stateNode.containerInfo,Ki=!0;break e}J=J.return}if(Kn===null)throw Error(n(160));c9(_,U,b),Kn=null,Ki=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)h9(u,l),u=u.sibling}var yo=null;function h9(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Qi(u,l),Xi(l),g&4&&(Fc(3,l,l.return),Ip(3,l),Fc(5,l,l.return));break;case 1:Qi(u,l),Xi(l),g&512&&(Aa||f===null||Fo(f,f.return)),g&64&&Ol&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=yo;if(Qi(u,l),Xi(l),g&512&&(Aa||f===null||Fo(f,f.return)),g&4){var _=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":_=b.getElementsByTagName("title")[0],(!_||_[wi]||_[Jr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(g),b.head.insertBefore(_,b.querySelector("head > title"))),fi(_,g,f),_[Jr]=l,vr(_),g=_;break e;case"link":var U=hO("link","href",b).get(g+(f.href||""));if(U){for(var J=0;J<U.length;J++)if(_=U[J],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){U.splice(J,1);break t}}_=b.createElement(g),fi(_,g,f),b.head.appendChild(_);break;case"meta":if(U=hO("meta","content",b).get(g+(f.content||""))){for(J=0;J<U.length;J++)if(_=U[J],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){U.splice(J,1);break t}}_=b.createElement(g),fi(_,g,f),b.head.appendChild(_);break;default:throw Error(n(468,g))}_[Jr]=l,vr(_),g=_}l.stateNode=g}else fO(b,l.type,l.stateNode);else l.stateNode=dO(b,g,l.memoizedProps);else _!==g?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,g===null?fO(b,l.type,l.stateNode):dO(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&f5(l,l.memoizedProps,f.memoizedProps)}break;case 27:Qi(u,l),Xi(l),g&512&&(Aa||f===null||Fo(f,f.return)),f!==null&&g&4&&f5(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Qi(u,l),Xi(l),g&512&&(Aa||f===null||Fo(f,f.return)),l.flags&32){b=l.stateNode;try{Pe(b,"")}catch(Lt){fn(l,l.return,Lt)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,f5(l,b,f!==null?f.memoizedProps:b)),g&1024&&(g5=!0);break;case 6:if(Qi(u,l),Xi(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Lt){fn(l,l.return,Lt)}}break;case 3:if(ay=null,b=yo,yo=ry(u.containerInfo),Qi(u,l),yo=b,Xi(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{lh(u.containerInfo)}catch(Lt){fn(l,l.return,Lt)}g5&&(g5=!1,f9(l));break;case 4:g=yo,yo=ry(l.stateNode.containerInfo),Qi(u,l),Xi(l),yo=g;break;case 12:Qi(u,l),Xi(l);break;case 31:Qi(u,l),Xi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,V1(l,g)));break;case 13:Qi(u,l),Xi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(q1=Fe()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,V1(l,g)));break;case 22:b=l.memoizedState!==null;var he=f!==null&&f.memoizedState!==null,Re=Ol,Qe=Aa;if(Ol=Re||b,Aa=Qe||he,Qi(u,l),Aa=Qe,Ol=Re,Xi(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||he||Ol||Aa||yd(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){he=f=u;try{if(_=he.stateNode,b)U=_.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{J=he.stateNode;var tt=he.memoizedProps.style,De=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;J.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Lt){fn(he,he.return,Lt)}}}else if(u.tag===6){if(f===null){he=u;try{he.stateNode.nodeValue=b?"":he.memoizedProps}catch(Lt){fn(he,he.return,Lt)}}}else if(u.tag===18){if(f===null){he=u;try{var Ue=he.stateNode;b?rO(Ue,!0):rO(he.stateNode,!1)}catch(Lt){fn(he,he.return,Lt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,V1(l,f))));break;case 19:Qi(u,l),Xi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,V1(l,g)));break;case 30:break;case 21:break;default:Qi(u,l),Xi(l)}}function Xi(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(a9(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,_=p5(l);U1(l,_,b);break;case 5:var U=f.stateNode;f.flags&32&&(Pe(U,""),f.flags&=-33);var J=p5(l);U1(l,J,U);break;case 3:case 4:var he=f.stateNode.containerInfo,Re=p5(l);m5(l,Re,he);break;default:throw Error(n(161))}}catch(Qe){fn(l,l.return,Qe)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function f9(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;f9(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Rl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)o9(l,u.alternate,u),u=u.sibling}function yd(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Fc(4,u,u.return),yd(u);break;case 1:Fo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&r9(u,u.return,f),yd(u);break;case 27:Vp(u.stateNode);case 26:case 5:Fo(u,u.return),yd(u);break;case 22:u.memoizedState===null&&yd(u);break;case 30:yd(u);break;default:yd(u)}l=l.sibling}}function Ml(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,_=u,U=_.flags;switch(_.tag){case 0:case 11:case 15:Ml(b,_,f),Ip(4,_);break;case 1:if(Ml(b,_,f),g=_,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Re){fn(g,g.return,Re)}if(g=_,b=g.updateQueue,b!==null){var J=g.stateNode;try{var he=b.shared.hiddenCallbacks;if(he!==null)for(b.shared.hiddenCallbacks=null,b=0;b<he.length;b++)qk(he[b],J)}catch(Re){fn(g,g.return,Re)}}f&&U&64&&t9(_),Rp(_,_.return);break;case 27:i9(_);case 26:case 5:Ml(b,_,f),f&&g===null&&U&4&&n9(_),Rp(_,_.return);break;case 12:Ml(b,_,f);break;case 31:Ml(b,_,f),f&&U&4&&u9(b,_);break;case 13:Ml(b,_,f),f&&U&4&&d9(b,_);break;case 22:_.memoizedState===null&&Ml(b,_,f),Rp(_,_.return);break;case 30:break;default:Ml(b,_,f)}u=u.sibling}}function x5(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&vp(f))}function y5(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&vp(l))}function vo(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)p9(l,u,f,g),u=u.sibling}function p9(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:vo(l,u,f,g),b&2048&&Ip(9,u);break;case 1:vo(l,u,f,g);break;case 3:vo(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&vp(l)));break;case 12:if(b&2048){vo(l,u,f,g),l=u.stateNode;try{var _=u.memoizedProps,U=_.id,J=_.onPostCommit;typeof J=="function"&&J(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(he){fn(u,u.return,he)}}else vo(l,u,f,g);break;case 31:vo(l,u,f,g);break;case 13:vo(l,u,f,g);break;case 23:break;case 22:_=u.stateNode,U=u.alternate,u.memoizedState!==null?_._visibility&2?vo(l,u,f,g):Mp(l,u):_._visibility&2?vo(l,u,f,g):(_._visibility|=2,Y0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&x5(U,u);break;case 24:vo(l,u,f,g),b&2048&&y5(u.alternate,u);break;default:vo(l,u,f,g)}}function Y0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=l,U=u,J=f,he=g,Re=U.flags;switch(U.tag){case 0:case 11:case 15:Y0(_,U,J,he,b),Ip(8,U);break;case 23:break;case 22:var Qe=U.stateNode;U.memoizedState!==null?Qe._visibility&2?Y0(_,U,J,he,b):Mp(_,U):(Qe._visibility|=2,Y0(_,U,J,he,b)),b&&Re&2048&&x5(U.alternate,U);break;case 24:Y0(_,U,J,he,b),b&&Re&2048&&y5(U.alternate,U);break;default:Y0(_,U,J,he,b)}u=u.sibling}}function Mp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:Mp(f,g),b&2048&&x5(g.alternate,g);break;case 24:Mp(f,g),b&2048&&y5(g.alternate,g);break;default:Mp(f,g)}u=u.sibling}}var Dp=8192;function J0(l,u,f){if(l.subtreeFlags&Dp)for(l=l.child;l!==null;)m9(l,u,f),l=l.sibling}function m9(l,u,f){switch(l.tag){case 26:J0(l,u,f),l.flags&Dp&&l.memoizedState!==null&&MJ(f,yo,l.memoizedState,l.memoizedProps);break;case 5:J0(l,u,f);break;case 3:case 4:var g=yo;yo=ry(l.stateNode.containerInfo),J0(l,u,f),yo=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=Dp,Dp=16777216,J0(l,u,f),Dp=g):J0(l,u,f));break;default:J0(l,u,f)}}function g9(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Pp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];ti=g,y9(g,l)}g9(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)x9(l),l=l.sibling}function x9(l){switch(l.tag){case 0:case 11:case 15:Pp(l),l.flags&2048&&Fc(9,l,l.return);break;case 3:Pp(l);break;case 12:Pp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,F1(l)):Pp(l);break;default:Pp(l)}}function F1(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];ti=g,y9(g,l)}g9(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Fc(8,u,u.return),F1(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,F1(u));break;default:F1(u)}l=l.sibling}}function y9(l,u){for(;ti!==null;){var f=ti;switch(f.tag){case 0:case 11:case 15:Fc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:vp(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,ti=g;else e:for(f=l;ti!==null;){g=ti;var b=g.sibling,_=g.return;if(l9(g),g===f){ti=null;break e}if(b!==null){b.return=_,ti=b;break e}ti=_}}}var QY={getCacheForType:function(l){var u=di(_a),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return di(_a).controller.signal}},XY=typeof WeakMap=="function"?WeakMap:Map,en=0,In=null,kr=null,Or=0,hn=0,_s=null,qc=!1,Z0=!1,v5=!1,Dl=0,sa=0,Hc=0,vd=0,b5=0,js=0,eh=0,Lp=null,Yi=null,w5=!1,q1=0,v9=0,H1=1/0,G1=null,Gc=null,$a=0,Wc=null,th=null,Pl=0,S5=0,N5=null,b9=null,Bp=0,_5=null;function Ts(){return(en&2)!==0&&Or!==0?Or&-Or:H.T!==null?C5():Pr()}function w9(){if(js===0)if((Or&536870912)===0||Br){var l=Wt;Wt<<=1,(Wt&3932160)===0&&(Wt=262144),js=l}else js=536870912;return l=Ss.current,l!==null&&(l.flags|=32),js}function Ji(l,u,f){(l===In&&(hn===2||hn===9)||l.cancelPendingCommit!==null)&&(rh(l,0),Kc(l,Or,js,!1)),kn(l,f),((en&2)===0||l!==In)&&(l===In&&((en&2)===0&&(vd|=f),sa===4&&Kc(l,Or,js,!1)),qo(l))}function S9(l,u,f){if((en&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||Hr(l,u),b=g?ZY(l,u):T5(l,u,!0),_=g;do{if(b===0){Z0&&!g&&Kc(l,u,0,!1);break}else{if(f=l.current.alternate,_&&!YY(f)){b=T5(l,u,!1),_=!1;continue}if(b===2){if(_=u,l.errorRecoveryDisabledLanes&_)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var J=l;b=Lp;var he=J.current.memoizedState.isDehydrated;if(he&&(rh(J,U).flags|=256),U=T5(J,U,!1),U!==2){if(v5&&!he){J.errorRecoveryDisabledLanes|=_,vd|=_,b=4;break e}_=Yi,Yi=b,_!==null&&(Yi===null?Yi=_:Yi.push.apply(Yi,_))}b=U}if(_=!1,b!==2)continue}}if(b===1){rh(l,0),Kc(l,u,0,!0);break}e:{switch(g=l,_=b,_){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Kc(g,u,js,!qc);break e;case 2:Yi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=q1+300-Fe(),10<b)){if(Kc(g,u,js,!qc),Et(g,0,!0)!==0)break e;Pl=u,g.timeoutHandle=Z9(N9.bind(null,g,f,Yi,G1,w5,u,js,vd,eh,qc,_,"Throttled",-0,0),b);break e}N9(g,f,Yi,G1,w5,u,js,vd,eh,qc,_,null,-0,0)}}break}while(!0);qo(l)}function N9(l,u,f,g,b,_,U,J,he,Re,Qe,tt,De,Ue){if(l.timeoutHandle=-1,tt=u.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wn},m9(u,_,tt);var Lt=(_&62914560)===_?q1-Fe():(_&4194048)===_?v9-Fe():0;if(Lt=DJ(tt,Lt),Lt!==null){Pl=_,l.cancelPendingCommit=Lt(O9.bind(null,l,u,_,f,g,b,U,J,he,Qe,tt,null,De,Ue)),Kc(l,_,U,!Re);return}}O9(l,u,_,f,g,b,U,J,he)}function YY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],_=b.getSnapshot;b=b.value;try{if(!bs(_(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Kc(l,u,f,g){u&=~b5,u&=~vd,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var _=31-rt(b),U=1<<_;g[_]=-1,b&=~U}f!==0&&ha(l,f,u)}function W1(){return(en&6)===0?($p(0),!1):!0}function j5(){if(kr!==null){if(hn===0)var l=kr.return;else l=kr,jl=ud=null,U4(l),G0=null,wp=0,l=kr;for(;l!==null;)e9(l.alternate,l),l=l.return;kr=null}}function rh(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,xJ(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Pl=0,j5(),In=l,kr=f=Nl(l.current,null),Or=u,hn=0,_s=null,qc=!1,Z0=Hr(l,u),v5=!1,eh=js=b5=vd=Hc=sa=0,Yi=Lp=null,w5=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-rt(g),_=1<<b;u|=l[b],g&=~_}return Dl=u,p1(),f}function _9(l,u){yr=null,H.H=kp,u===H0||u===S1?(u=zk(),hn=3):u===k4?(u=zk(),hn=4):hn=u===n5?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,_s=u,kr===null&&(sa=1,P1(l,Vs(u,l.current)))}function j9(){var l=Ss.current;return l===null?!0:(Or&4194048)===Or?Gs===null:(Or&62914560)===Or||(Or&536870912)!==0?l===Gs:!1}function T9(){var l=H.H;return H.H=kp,l===null?kp:l}function A9(){var l=H.A;return H.A=QY,l}function K1(){sa=4,qc||(Or&4194048)!==Or&&Ss.current!==null||(Z0=!0),(Hc&134217727)===0&&(vd&134217727)===0||In===null||Kc(In,Or,js,!1)}function T5(l,u,f){var g=en;en|=2;var b=T9(),_=A9();(In!==l||Or!==u)&&(G1=null,rh(l,u)),u=!1;var U=sa;e:do try{if(hn!==0&&kr!==null){var J=kr,he=_s;switch(hn){case 8:j5(),U=6;break e;case 3:case 2:case 9:case 6:Ss.current===null&&(u=!0);var Re=hn;if(hn=0,_s=null,nh(l,J,he,Re),f&&Z0){U=0;break e}break;default:Re=hn,hn=0,_s=null,nh(l,J,he,Re)}}JY(),U=sa;break}catch(Qe){_9(l,Qe)}while(!0);return u&&l.shellSuspendCounter++,jl=ud=null,en=g,H.H=b,H.A=_,kr===null&&(In=null,Or=0,p1()),U}function JY(){for(;kr!==null;)E9(kr)}function ZY(l,u){var f=en;en|=2;var g=T9(),b=A9();In!==l||Or!==u?(G1=null,H1=Fe()+500,rh(l,u)):Z0=Hr(l,u);e:do try{if(hn!==0&&kr!==null){u=kr;var _=_s;t:switch(hn){case 1:hn=0,_s=null,nh(l,u,_,1);break;case 2:case 9:if(Bk(_)){hn=0,_s=null,k9(u);break}u=function(){hn!==2&&hn!==9||In!==l||(hn=7),qo(l)},_.then(u,u);break e;case 3:hn=7;break e;case 4:hn=5;break e;case 7:Bk(_)?(hn=0,_s=null,k9(u)):(hn=0,_s=null,nh(l,u,_,7));break;case 5:var U=null;switch(kr.tag){case 26:U=kr.memoizedState;case 5:case 27:var J=kr;if(U?pO(U):J.stateNode.complete){hn=0,_s=null;var he=J.sibling;if(he!==null)kr=he;else{var Re=J.return;Re!==null?(kr=Re,Q1(Re)):kr=null}break t}}hn=0,_s=null,nh(l,u,_,5);break;case 6:hn=0,_s=null,nh(l,u,_,6);break;case 8:j5(),sa=6;break e;default:throw Error(n(462))}}eJ();break}catch(Qe){_9(l,Qe)}while(!0);return jl=ud=null,H.H=g,H.A=b,en=f,kr!==null?0:(In=null,Or=0,p1(),sa)}function eJ(){for(;kr!==null&&!zt();)E9(kr)}function E9(l){var u=JC(l.alternate,l,Dl);l.memoizedProps=l.pendingProps,u===null?Q1(l):kr=u}function k9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=GC(f,u,u.pendingProps,u.type,void 0,Or);break;case 11:u=GC(f,u,u.pendingProps,u.type.render,u.ref,Or);break;case 5:U4(u);default:e9(f,u),u=kr=Ak(u,Dl),u=JC(f,u,Dl)}l.memoizedProps=l.pendingProps,u===null?Q1(l):kr=u}function nh(l,u,f,g){jl=ud=null,U4(u),G0=null,wp=0;var b=u.return;try{if(VY(l,b,u,f,Or)){sa=1,P1(l,Vs(f,l.current)),kr=null;return}}catch(_){if(b!==null)throw kr=b,_;sa=1,P1(l,Vs(f,l.current)),kr=null;return}u.flags&32768?(Br||g===1?l=!0:Z0||(Or&536870912)!==0?l=!1:(qc=l=!0,(g===2||g===9||g===3||g===6)&&(g=Ss.current,g!==null&&g.tag===13&&(g.flags|=16384))),C9(u,l)):Q1(u)}function Q1(l){var u=l;do{if((u.flags&32768)!==0){C9(u,qc);return}l=u.return;var f=HY(u.alternate,u,Dl);if(f!==null){kr=f;return}if(u=u.sibling,u!==null){kr=u;return}kr=u=l}while(u!==null);sa===0&&(sa=5)}function C9(l,u){do{var f=GY(l.alternate,l);if(f!==null){f.flags&=32767,kr=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){kr=l;return}kr=l=f}while(l!==null);sa=6,kr=null}function O9(l,u,f,g,b,_,U,J,he){l.cancelPendingCommit=null;do X1();while($a!==0);if((en&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(_=u.lanes|u.childLanes,_|=p4,gr(l,f,_,U,J,he),l===In&&(kr=In=null,Or=0),th=u,Wc=l,Pl=f,S5=_,N5=b,b9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,aJ(At,function(){return P9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=K.p,K.p=2,U=en,en|=4;try{WY(l,u,f)}finally{en=U,K.p=b,H.T=g}}$a=1,I9(),R9(),M9()}}function I9(){if($a===1){$a=0;var l=Wc,u=th,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=K.p;K.p=2;var b=en;en|=4;try{h9(u,l);var _=B5,U=yk(l.containerInfo),J=_.focusedElem,he=_.selectionRange;if(U!==J&&J&&J.ownerDocument&&xk(J.ownerDocument.documentElement,J)){if(he!==null&&c4(J)){var Re=he.start,Qe=he.end;if(Qe===void 0&&(Qe=Re),"selectionStart"in J)J.selectionStart=Re,J.selectionEnd=Math.min(Qe,J.value.length);else{var tt=J.ownerDocument||document,De=tt&&tt.defaultView||window;if(De.getSelection){var Ue=De.getSelection(),Lt=J.textContent.length,Zt=Math.min(he.start,Lt),_n=he.end===void 0?Zt:Math.min(he.end,Lt);!Ue.extend&&Zt>_n&&(U=_n,_n=Zt,Zt=U);var _e=gk(J,Zt),me=gk(J,_n);if(_e&&me&&(Ue.rangeCount!==1||Ue.anchorNode!==_e.node||Ue.anchorOffset!==_e.offset||Ue.focusNode!==me.node||Ue.focusOffset!==me.offset)){var Ce=tt.createRange();Ce.setStart(_e.node,_e.offset),Ue.removeAllRanges(),Zt>_n?(Ue.addRange(Ce),Ue.extend(me.node,me.offset)):(Ce.setEnd(me.node,me.offset),Ue.addRange(Ce))}}}}for(tt=[],Ue=J;Ue=Ue.parentNode;)Ue.nodeType===1&&tt.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<tt.length;J++){var Je=tt[J];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}ly=!!L5,B5=L5=null}finally{en=b,K.p=g,H.T=f}}l.current=u,$a=2}}function R9(){if($a===2){$a=0;var l=Wc,u=th,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=K.p;K.p=2;var b=en;en|=4;try{o9(l,u.alternate,u)}finally{en=b,K.p=g,H.T=f}}$a=3}}function M9(){if($a===4||$a===3){$a=0,de();var l=Wc,u=th,f=Pl,g=b9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?$a=5:($a=0,th=Wc=null,D9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Gc=null),yn(f),u=u.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(xt,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=H.T,b=K.p,K.p=2,H.T=null;try{for(var _=l.onRecoverableError,U=0;U<g.length;U++){var J=g[U];_(J.value,{componentStack:J.stack})}}finally{H.T=u,K.p=b}}(Pl&3)!==0&&X1(),qo(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===_5?Bp++:(Bp=0,_5=l):Bp=0,$p(0)}}function D9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,vp(u)))}function X1(){return I9(),R9(),M9(),P9()}function P9(){if($a!==5)return!1;var l=Wc,u=S5;S5=0;var f=yn(Pl),g=H.T,b=K.p;try{K.p=32>f?32:f,H.T=null,f=N5,N5=null;var _=Wc,U=Pl;if($a=0,th=Wc=null,Pl=0,(en&6)!==0)throw Error(n(331));var J=en;if(en|=4,x9(_.current),p9(_,_.current,U,f),en=J,$p(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(xt,_)}catch{}return!0}finally{K.p=b,H.T=g,D9(l,u)}}function L9(l,u,f){u=Vs(f,u),u=r5(l.stateNode,u,2),l=zc(l,u,2),l!==null&&(kn(l,2),qo(l))}function fn(l,u,f){if(l.tag===3)L9(l,l,f);else for(;u!==null;){if(u.tag===3){L9(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Gc===null||!Gc.has(g))){l=Vs(f,l),f=BC(2),g=zc(u,f,2),g!==null&&($C(f,g,u,l),kn(g,2),qo(g));break}}u=u.return}}function A5(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new XY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(v5=!0,b.add(f),l=tJ.bind(null,l,u,f),u.then(l,l))}function tJ(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,In===l&&(Or&f)===f&&(sa===4||sa===3&&(Or&62914560)===Or&&300>Fe()-q1?(en&2)===0&&rh(l,0):b5|=f,eh===Or&&(eh=0)),qo(l)}function B9(l,u){u===0&&(u=gn()),l=od(l,u),l!==null&&(kn(l,u),qo(l))}function rJ(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),B9(l,f)}function nJ(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),B9(l,f)}function aJ(l,u){return Nt(l,u)}var Y1=null,ah=null,E5=!1,J1=!1,k5=!1,Qc=0;function qo(l){l!==ah&&l.next===null&&(ah===null?Y1=ah=l:ah=ah.next=l),J1=!0,E5||(E5=!0,sJ())}function $p(l,u){if(!k5&&J1){k5=!0;do for(var f=!1,g=Y1;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var _=0;else{var U=g.suspendedLanes,J=g.pingedLanes;_=(1<<31-rt(42|l)+1)-1,_&=b&~(U&~J),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,V9(g,_))}else _=Or,_=Et(g,g===In?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Hr(g,_)||(f=!0,V9(g,_));g=g.next}while(f);k5=!1}}function iJ(){$9()}function $9(){J1=E5=!1;var l=0;Qc!==0&&gJ()&&(l=Qc);for(var u=Fe(),f=null,g=Y1;g!==null;){var b=g.next,_=z9(g,u);_===0?(g.next=null,f===null?Y1=b:f.next=b,b===null&&(ah=f)):(f=g,(l!==0||(_&3)!==0)&&(J1=!0)),g=b}$a!==0&&$a!==5||$p(l),Qc!==0&&(Qc=0)}function z9(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,_=l.pendingLanes&-62914561;0<_;){var U=31-rt(_),J=1<<U,he=b[U];he===-1?((J&f)===0||(J&g)!==0)&&(b[U]=un(J,u)):he<=u&&(l.expiredLanes|=J),_&=~J}if(u=In,f=Or,f=Et(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(hn===2||hn===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&wt(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Hr(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&wt(g),yn(f)){case 2:case 8:f=Ze;break;case 32:f=At;break;case 268435456:f=lr;break;default:f=At}return g=U9.bind(null,l),f=Nt(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&wt(g),l.callbackPriority=2,l.callbackNode=null,2}function U9(l,u){if($a!==0&&$a!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(X1()&&l.callbackNode!==f)return null;var g=Or;return g=Et(l,l===In?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(S9(l,g,u),z9(l,Fe()),l.callbackNode!=null&&l.callbackNode===f?U9.bind(null,l):null)}function V9(l,u){if(X1())return null;S9(l,u,!0)}function sJ(){yJ(function(){(en&6)!==0?Nt(qe,iJ):$9()})}function C5(){if(Qc===0){var l=F0;l===0&&(l=Ft,Ft<<=1,(Ft&261888)===0&&(Ft=256)),Qc=l}return Qc}function F9(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:On(""+l)}function q9(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function oJ(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var _=F9((b[vn]||null).action),U=g.submitter;U&&(u=(u=U[vn]||null)?F9(u.formAction):U.getAttribute("formAction"),u!==null&&(_=u,U=null));var J=new ed("action","action",null,g,b);l.push({event:J,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Qc!==0){var he=U?q9(b,U):new FormData(b);X4(f,{pending:!0,data:he,method:b.method,action:_},null,he)}}else typeof _=="function"&&(J.preventDefault(),he=U?q9(b,U):new FormData(b),X4(f,{pending:!0,data:he,method:b.method,action:_},_,he))},currentTarget:b}]})}}for(var O5=0;O5<f4.length;O5++){var I5=f4[O5],lJ=I5.toLowerCase(),cJ=I5[0].toUpperCase()+I5.slice(1);xo(lJ,"on"+cJ)}xo(wk,"onAnimationEnd"),xo(Sk,"onAnimationIteration"),xo(Nk,"onAnimationStart"),xo("dblclick","onDoubleClick"),xo("focusin","onFocus"),xo("focusout","onBlur"),xo(jY,"onTransitionRun"),xo(TY,"onTransitionStart"),xo(AY,"onTransitionCancel"),xo(_k,"onTransitionEnd"),Lr("onMouseEnter",["mouseout","mouseover"]),Lr("onMouseLeave",["mouseout","mouseover"]),Lr("onPointerEnter",["pointerout","pointerover"]),Lr("onPointerLeave",["pointerout","pointerover"]),bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zp));function H9(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var _=void 0;if(u)for(var U=g.length-1;0<=U;U--){var J=g[U],he=J.instance,Re=J.currentTarget;if(J=J.listener,he!==_&&b.isPropagationStopped())break e;_=J,b.currentTarget=Re;try{_(b)}catch(Qe){f1(Qe)}b.currentTarget=null,_=he}else for(U=0;U<g.length;U++){if(J=g[U],he=J.instance,Re=J.currentTarget,J=J.listener,he!==_&&b.isPropagationStopped())break e;_=J,b.currentTarget=Re;try{_(b)}catch(Qe){f1(Qe)}b.currentTarget=null,_=he}}}}function Cr(l,u){var f=u[Pa];f===void 0&&(f=u[Pa]=new Set);var g=l+"__bubble";f.has(g)||(G9(u,l,2,!1),f.add(g))}function R5(l,u,f){var g=0;u&&(g|=4),G9(f,l,g,u)}var Z1="_reactListening"+Math.random().toString(36).slice(2);function M5(l){if(!l[Z1]){l[Z1]=!0,dn.forEach(function(f){f!=="selectionchange"&&(uJ.has(f)||R5(f,!1,l),R5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Z1]||(u[Z1]=!0,R5("selectionchange",!1,u))}}function G9(l,u,f,g){switch(wO(u)){case 2:var b=BJ;break;case 8:b=$J;break;default:b=Q5}f=b.bind(null,u,f,l),b=void 0,!lp||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function D5(l,u,f,g,b){var _=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var U=g.tag;if(U===3||U===4){var J=g.stateNode.containerInfo;if(J===b)break;if(U===4)for(U=g.return;U!==null;){var he=U.tag;if((he===3||he===4)&&U.stateNode.containerInfo===b)return;U=U.return}for(;J!==null;){if(U=fe(J),U===null)return;if(he=U.tag,he===5||he===6||he===26||he===27){g=_=U;continue e}J=J.parentNode}}g=g.return}Yx(function(){var Re=_,Qe=Nr(f),tt=[];e:{var De=jk.get(l);if(De!==void 0){var Ue=ed,Lt=l;switch(l){case"keypress":if(Zu(f)===0)break e;case"keydown":case"keyup":Ue=s1;break;case"focusin":Lt="focus",Ue=Cc;break;case"focusout":Lt="blur",Ue=Cc;break;case"beforeblur":case"afterblur":Ue=Cc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=Zx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=e1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=l1;break;case wk:case Sk:case Nk:Ue=R0;break;case _k:Ue=M0;break;case"scroll":case"scrollend":Ue=Jx;break;case"wheel":Ue=u1;break;case"copy":case"cut":case"paste":Ue=r1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=fp;break;case"toggle":case"beforetoggle":Ue=Ic}var Zt=(u&4)!==0,_n=!Zt&&(l==="scroll"||l==="scrollend"),_e=Zt?De!==null?De+"Capture":null:De;Zt=[];for(var me=Re,Ce;me!==null;){var Je=me;if(Ce=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Ce===null||_e===null||(Je=Gi(me,_e),Je!=null&&Zt.push(Up(me,Je,Ce))),_n)break;me=me.return}0<Zt.length&&(De=new Ue(De,Lt,null,f,Qe),tt.push({event:De,listeners:Zt}))}}if((u&7)===0){e:{if(De=l==="mouseover"||l==="pointerover",Ue=l==="mouseout"||l==="pointerout",De&&f!==Hi&&(Lt=f.relatedTarget||f.fromElement)&&(fe(Lt)||Lt[Wn]))break e;if((Ue||De)&&(De=Qe.window===Qe?Qe:(De=Qe.ownerDocument)?De.defaultView||De.parentWindow:window,Ue?(Lt=f.relatedTarget||f.toElement,Ue=Re,Lt=Lt?fe(Lt):null,Lt!==null&&(_n=i(Lt),Zt=Lt.tag,Lt!==_n||Zt!==5&&Zt!==27&&Zt!==6)&&(Lt=null)):(Ue=null,Lt=Re),Ue!==Lt)){if(Zt=Zx,Je="onMouseLeave",_e="onMouseEnter",me="mouse",(l==="pointerout"||l==="pointerover")&&(Zt=fp,Je="onPointerLeave",_e="onPointerEnter",me="pointer"),_n=Ue==null?De:ft(Ue),Ce=Lt==null?De:ft(Lt),De=new Zt(Je,me+"leave",Ue,f,Qe),De.target=_n,De.relatedTarget=Ce,Je=null,fe(Qe)===Re&&(Zt=new Zt(_e,me+"enter",Lt,f,Qe),Zt.target=Ce,Zt.relatedTarget=_n,Je=Zt),_n=Je,Ue&&Lt)t:{for(Zt=dJ,_e=Ue,me=Lt,Ce=0,Je=_e;Je;Je=Zt(Je))Ce++;Je=0;for(var Kt=me;Kt;Kt=Zt(Kt))Je++;for(;0<Ce-Je;)_e=Zt(_e),Ce--;for(;0<Je-Ce;)me=Zt(me),Je--;for(;Ce--;){if(_e===me||me!==null&&_e===me.alternate){Zt=_e;break t}_e=Zt(_e),me=Zt(me)}Zt=null}else Zt=null;Ue!==null&&W9(tt,De,Ue,Zt,!1),Lt!==null&&_n!==null&&W9(tt,_n,Lt,Zt,!0)}}e:{if(De=Re?ft(Re):window,Ue=De.nodeName&&De.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&De.type==="file")var Gr=uk;else if(Wi(De))if(dk)Gr=SY;else{Gr=bY;var Vt=vY}else Ue=De.nodeName,!Ue||Ue.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Re&&Cn(Re.elementType)&&(Gr=uk):Gr=wY;if(Gr&&(Gr=Gr(l,Re))){ad(tt,Gr,f,Qe);break e}Vt&&Vt(l,De,Re),l==="focusout"&&Re&&De.type==="number"&&Re.memoizedProps.value!=null&&an(De,"number",De.value)}switch(Vt=Re?ft(Re):window,l){case"focusin":(Wi(Vt)||Vt.contentEditable==="true")&&(D0=Vt,u4=Re,gp=null);break;case"focusout":gp=u4=D0=null;break;case"mousedown":d4=!0;break;case"contextmenu":case"mouseup":case"dragend":d4=!1,vk(tt,f,Qe);break;case"selectionchange":if(_Y)break;case"keydown":case"keyup":vk(tt,f,Qe)}var br;if(P)e:{switch(l){case"compositionstart":var Ir="onCompositionStart";break e;case"compositionend":Ir="onCompositionEnd";break e;case"compositionupdate":Ir="onCompositionUpdate";break e}Ir=void 0}else jr?sn(l,f)&&(Ir="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Ir="onCompositionStart");Ir&&(je&&f.locale!=="ko"&&(jr||Ir!=="onCompositionStart"?Ir==="onCompositionEnd"&&jr&&(br=Tc()):(vs=Qe,O0="value"in vs?vs.value:vs.textContent,jr=!0)),Vt=ey(Re,Ir),0<Vt.length&&(Ir=new up(Ir,l,null,f,Qe),tt.push({event:Ir,listeners:Vt}),br?Ir.data=br:(br=Na(f),br!==null&&(Ir.data=br)))),(br=ee?Za(l,f):ei(l,f))&&(Ir=ey(Re,"onBeforeInput"),0<Ir.length&&(Vt=new up("onBeforeInput","beforeinput",null,f,Qe),tt.push({event:Vt,listeners:Ir}),Vt.data=br)),oJ(tt,l,Re,f,Qe)}H9(tt,u)})}function Up(l,u,f){return{instance:l,listener:u,currentTarget:f}}function ey(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=Gi(l,f),b!=null&&g.unshift(Up(l,b,_)),b=Gi(l,u),b!=null&&g.push(Up(l,b,_))),l.tag===3)return g;l=l.return}return[]}function dJ(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function W9(l,u,f,g,b){for(var _=u._reactName,U=[];f!==null&&f!==g;){var J=f,he=J.alternate,Re=J.stateNode;if(J=J.tag,he!==null&&he===g)break;J!==5&&J!==26&&J!==27||Re===null||(he=Re,b?(Re=Gi(f,_),Re!=null&&U.unshift(Up(f,Re,he))):b||(Re=Gi(f,_),Re!=null&&U.push(Up(f,Re,he)))),f=f.return}U.length!==0&&l.push({event:u,listeners:U})}var hJ=/\r\n?/g,fJ=/\u0000|\uFFFD/g;function K9(l){return(typeof l=="string"?l:""+l).replace(hJ,`
`).replace(fJ,"")}function Q9(l,u){return u=K9(u),K9(l)===u}function Nn(l,u,f,g,b,_){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Pe(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Pe(l,""+g);break;case"className":xs(l,"class",g);break;case"tabIndex":xs(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":xs(l,f,g);break;case"style":tr(l,g,_);break;case"data":if(u!=="object"){xs(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=On(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(u!=="input"&&Nn(l,u,"name",b.name,b,null),Nn(l,u,"formEncType",b.formEncType,b,null),Nn(l,u,"formMethod",b.formMethod,b,null),Nn(l,u,"formTarget",b.formTarget,b,null)):(Nn(l,u,"encType",b.encType,b,null),Nn(l,u,"method",b.method,b,null),Nn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=On(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=wn);break;case"onScroll":g!=null&&Cr("scroll",l);break;case"onScrollEnd":g!=null&&Cr("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=On(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":Cr("beforetoggle",l),Cr("toggle",l),gs(l,"popover",g);break;case"xlinkActuate":La(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":La(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":La(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":La(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":La(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":La(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":La(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":La(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":La(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":gs(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ba.get(f)||f,gs(l,f,g))}}function P5(l,u,f,g,b,_){switch(f){case"style":tr(l,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?Pe(l,g):(typeof g=="number"||typeof g=="bigint")&&Pe(l,""+g);break;case"onScroll":g!=null&&Cr("scroll",l);break;case"onScrollEnd":g!=null&&Cr("scrollend",l);break;case"onClick":g!=null&&(l.onclick=wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),_=l[vn]||null,_=_!=null?_[f]:null,typeof _=="function"&&l.removeEventListener(u,_,b),typeof g=="function")){typeof _!="function"&&_!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):gs(l,f,g)}}}function fi(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cr("error",l),Cr("load",l);var g=!1,b=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var U=f[_];if(U!=null)switch(_){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Nn(l,u,_,U,f,null)}}b&&Nn(l,u,"srcSet",f.srcSet,f,null),g&&Nn(l,u,"src",f.src,f,null);return;case"input":Cr("invalid",l);var J=_=U=b=null,he=null,Re=null;for(g in f)if(f.hasOwnProperty(g)){var Qe=f[g];if(Qe!=null)switch(g){case"name":b=Qe;break;case"type":U=Qe;break;case"checked":he=Qe;break;case"defaultChecked":Re=Qe;break;case"value":_=Qe;break;case"defaultValue":J=Qe;break;case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(n(137,u));break;default:Nn(l,u,g,Qe,f,null)}}Er(l,_,J,he,Re,U,b,!1);return;case"select":Cr("invalid",l),g=U=_=null;for(b in f)if(f.hasOwnProperty(b)&&(J=f[b],J!=null))switch(b){case"value":_=J;break;case"defaultValue":U=J;break;case"multiple":g=J;default:Nn(l,u,b,J,f,null)}u=_,f=U,l.multiple=!!g,u!=null?oe(l,!!g,u,!1):f!=null&&oe(l,!!g,f,!0);return;case"textarea":Cr("invalid",l),_=b=g=null;for(U in f)if(f.hasOwnProperty(U)&&(J=f[U],J!=null))switch(U){case"value":g=J;break;case"defaultValue":b=J;break;case"children":_=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(91));break;default:Nn(l,u,U,J,f,null)}$e(l,g,b,_);return;case"option":for(he in f)if(f.hasOwnProperty(he)&&(g=f[he],g!=null))switch(he){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Nn(l,u,he,g,f,null)}return;case"dialog":Cr("beforetoggle",l),Cr("toggle",l),Cr("cancel",l),Cr("close",l);break;case"iframe":case"object":Cr("load",l);break;case"video":case"audio":for(g=0;g<zp.length;g++)Cr(zp[g],l);break;case"image":Cr("error",l),Cr("load",l);break;case"details":Cr("toggle",l);break;case"embed":case"source":case"link":Cr("error",l),Cr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in f)if(f.hasOwnProperty(Re)&&(g=f[Re],g!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Nn(l,u,Re,g,f,null)}return;default:if(Cn(u)){for(Qe in f)f.hasOwnProperty(Qe)&&(g=f[Qe],g!==void 0&&P5(l,u,Qe,g,f,void 0));return}}for(J in f)f.hasOwnProperty(J)&&(g=f[J],g!=null&&Nn(l,u,J,g,f,null))}function pJ(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,U=null,J=null,he=null,Re=null,Qe=null;for(Ue in f){var tt=f[Ue];if(f.hasOwnProperty(Ue)&&tt!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":he=tt;default:g.hasOwnProperty(Ue)||Nn(l,u,Ue,null,g,tt)}}for(var De in g){var Ue=g[De];if(tt=f[De],g.hasOwnProperty(De)&&(Ue!=null||tt!=null))switch(De){case"type":_=Ue;break;case"name":b=Ue;break;case"checked":Re=Ue;break;case"defaultChecked":Qe=Ue;break;case"value":U=Ue;break;case"defaultValue":J=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(n(137,u));break;default:Ue!==tt&&Nn(l,u,De,Ue,g,tt)}}ar(l,U,J,he,Re,Qe,_,b);return;case"select":Ue=U=J=De=null;for(_ in f)if(he=f[_],f.hasOwnProperty(_)&&he!=null)switch(_){case"value":break;case"multiple":Ue=he;default:g.hasOwnProperty(_)||Nn(l,u,_,null,g,he)}for(b in g)if(_=g[b],he=f[b],g.hasOwnProperty(b)&&(_!=null||he!=null))switch(b){case"value":De=_;break;case"defaultValue":J=_;break;case"multiple":U=_;default:_!==he&&Nn(l,u,b,_,g,he)}u=J,f=U,g=Ue,De!=null?oe(l,!!f,De,!1):!!g!=!!f&&(u!=null?oe(l,!!f,u,!0):oe(l,!!f,f?[]:"",!1));return;case"textarea":Ue=De=null;for(J in f)if(b=f[J],f.hasOwnProperty(J)&&b!=null&&!g.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:Nn(l,u,J,null,g,b)}for(U in g)if(b=g[U],_=f[U],g.hasOwnProperty(U)&&(b!=null||_!=null))switch(U){case"value":De=b;break;case"defaultValue":Ue=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==_&&Nn(l,u,U,b,g,_)}xe(l,De,Ue);return;case"option":for(var Lt in f)if(De=f[Lt],f.hasOwnProperty(Lt)&&De!=null&&!g.hasOwnProperty(Lt))switch(Lt){case"selected":l.selected=!1;break;default:Nn(l,u,Lt,null,g,De)}for(he in g)if(De=g[he],Ue=f[he],g.hasOwnProperty(he)&&De!==Ue&&(De!=null||Ue!=null))switch(he){case"selected":l.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:Nn(l,u,he,De,g,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in f)De=f[Zt],f.hasOwnProperty(Zt)&&De!=null&&!g.hasOwnProperty(Zt)&&Nn(l,u,Zt,null,g,De);for(Re in g)if(De=g[Re],Ue=f[Re],g.hasOwnProperty(Re)&&De!==Ue&&(De!=null||Ue!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,u));break;default:Nn(l,u,Re,De,g,Ue)}return;default:if(Cn(u)){for(var _n in f)De=f[_n],f.hasOwnProperty(_n)&&De!==void 0&&!g.hasOwnProperty(_n)&&P5(l,u,_n,void 0,g,De);for(Qe in g)De=g[Qe],Ue=f[Qe],!g.hasOwnProperty(Qe)||De===Ue||De===void 0&&Ue===void 0||P5(l,u,Qe,De,g,Ue);return}}for(var _e in f)De=f[_e],f.hasOwnProperty(_e)&&De!=null&&!g.hasOwnProperty(_e)&&Nn(l,u,_e,null,g,De);for(tt in g)De=g[tt],Ue=f[tt],!g.hasOwnProperty(tt)||De===Ue||De==null&&Ue==null||Nn(l,u,tt,De,g,Ue)}function X9(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mJ(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],_=b.transferSize,U=b.initiatorType,J=b.duration;if(_&&J&&X9(U)){for(U=0,J=b.responseEnd,g+=1;g<f.length;g++){var he=f[g],Re=he.startTime;if(Re>J)break;var Qe=he.transferSize,tt=he.initiatorType;Qe&&X9(tt)&&(he=he.responseEnd,U+=Qe*(he<J?1:(J-Re)/(he-Re)))}if(--g,u+=8*(_+U)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var L5=null,B5=null;function ty(l){return l.nodeType===9?l:l.ownerDocument}function Y9(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J9(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function $5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var z5=null;function gJ(){var l=window.event;return l&&l.type==="popstate"?l===z5?!1:(z5=l,!0):(z5=null,!1)}var Z9=typeof setTimeout=="function"?setTimeout:void 0,xJ=typeof clearTimeout=="function"?clearTimeout:void 0,eO=typeof Promise=="function"?Promise:void 0,yJ=typeof queueMicrotask=="function"?queueMicrotask:typeof eO<"u"?function(l){return eO.resolve(null).then(l).catch(vJ)}:Z9;function vJ(l){setTimeout(function(){throw l})}function Xc(l){return l==="head"}function tO(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),lh(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Vp(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Vp(f);for(var _=f.firstChild;_;){var U=_.nextSibling,J=_.nodeName;_[wi]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=U}}else f==="body"&&Vp(l.ownerDocument.body);f=b}while(f);lh(u)}function rO(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function U5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":U5(f),kt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function bJ(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[wi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(_=l.getAttribute("rel"),_==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(_!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(_=l.getAttribute("src"),(_!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===_)return l}else return l;if(l=Ws(l.nextSibling),l===null)break}return null}function wJ(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Ws(l.nextSibling),l===null))return null;return l}function nO(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Ws(l.nextSibling),l===null))return null;return l}function V5(l){return l.data==="$?"||l.data==="$~"}function F5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function SJ(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Ws(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var q5=null;function aO(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return Ws(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function iO(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function sO(l,u,f){switch(u=ty(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Vp(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);kt(l)}var Ks=new Map,oO=new Set;function ry(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ll=K.d;K.d={f:NJ,r:_J,D:jJ,C:TJ,L:AJ,m:EJ,X:CJ,S:kJ,M:OJ};function NJ(){var l=Ll.f(),u=W1();return l||u}function _J(l){var u=at(l);u!==null&&u.tag===5&&u.type==="form"?_C(u):Ll.r(l)}var ih=typeof document>"u"?null:document;function lO(l,u,f){var g=ih;if(g&&typeof u=="string"&&u){var b=It(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),oO.has(b)||(oO.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),fi(u,"link",l),vr(u),g.head.appendChild(u)))}}function jJ(l){Ll.D(l),lO("dns-prefetch",l,null)}function TJ(l,u){Ll.C(l,u),lO("preconnect",l,u)}function AJ(l,u,f){Ll.L(l,u,f);var g=ih;if(g&&l&&u){var b='link[rel="preload"][as="'+It(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+It(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+It(f.imageSizes)+'"]')):b+='[href="'+It(l)+'"]';var _=b;switch(u){case"style":_=sh(l);break;case"script":_=oh(l)}Ks.has(_)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Ks.set(_,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(Fp(_))||u==="script"&&g.querySelector(qp(_))||(u=g.createElement("link"),fi(u,"link",l),vr(u),g.head.appendChild(u)))}}function EJ(l,u){Ll.m(l,u);var f=ih;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+It(g)+'"][href="'+It(l)+'"]',_=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=oh(l)}if(!Ks.has(_)&&(l=m({rel:"modulepreload",href:l},u),Ks.set(_,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(qp(_)))return}g=f.createElement("link"),fi(g,"link",l),vr(g),f.head.appendChild(g)}}}function kJ(l,u,f){Ll.S(l,u,f);var g=ih;if(g&&l){var b=nr(g).hoistableStyles,_=sh(l);u=u||"default";var U=b.get(_);if(!U){var J={loading:0,preload:null};if(U=g.querySelector(Fp(_)))J.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Ks.get(_))&&H5(l,f);var he=U=g.createElement("link");vr(he),fi(he,"link",l),he._p=new Promise(function(Re,Qe){he.onload=Re,he.onerror=Qe}),he.addEventListener("load",function(){J.loading|=1}),he.addEventListener("error",function(){J.loading|=2}),J.loading|=4,ny(U,u,g)}U={type:"stylesheet",instance:U,count:1,state:J},b.set(_,U)}}}function CJ(l,u){Ll.X(l,u);var f=ih;if(f&&l){var g=nr(f).hoistableScripts,b=oh(l),_=g.get(b);_||(_=f.querySelector(qp(b)),_||(l=m({src:l,async:!0},u),(u=Ks.get(b))&&G5(l,u),_=f.createElement("script"),vr(_),fi(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function OJ(l,u){Ll.M(l,u);var f=ih;if(f&&l){var g=nr(f).hoistableScripts,b=oh(l),_=g.get(b);_||(_=f.querySelector(qp(b)),_||(l=m({src:l,async:!0,type:"module"},u),(u=Ks.get(b))&&G5(l,u),_=f.createElement("script"),vr(_),fi(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function cO(l,u,f,g){var b=(b=Be.current)?ry(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=sh(f.href),f=nr(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=sh(f.href);var _=nr(b).hoistableStyles,U=_.get(l);if(U||(b=b.ownerDocument||b,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(l,U),(_=b.querySelector(Fp(l)))&&!_._p&&(U.instance=_,U.state.loading=5),Ks.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ks.set(l,f),_||IJ(b,l,f,U.state))),u&&g===null)throw Error(n(528,""));return U}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=oh(f),f=nr(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function sh(l){return'href="'+It(l)+'"'}function Fp(l){return'link[rel="stylesheet"]['+l+"]"}function uO(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function IJ(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),fi(u,"link",f),vr(u),l.head.appendChild(u))}function oh(l){return'[src="'+It(l)+'"]'}function qp(l){return"script[async]"+l}function dO(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+It(f.href)+'"]');if(g)return u.instance=g,vr(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),vr(g),fi(g,"style",b),ny(g,f.precedence,l),u.instance=g;case"stylesheet":b=sh(f.href);var _=l.querySelector(Fp(b));if(_)return u.state.loading|=4,u.instance=_,vr(_),_;g=uO(f),(b=Ks.get(b))&&H5(g,b),_=(l.ownerDocument||l).createElement("link"),vr(_);var U=_;return U._p=new Promise(function(J,he){U.onload=J,U.onerror=he}),fi(_,"link",g),u.state.loading|=4,ny(_,f.precedence,l),u.instance=_;case"script":return _=oh(f.src),(b=l.querySelector(qp(_)))?(u.instance=b,vr(b),b):(g=f,(b=Ks.get(_))&&(g=m({},f),G5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),vr(b),fi(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,ny(g,f.precedence,l));return u.instance}function ny(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,_=b,U=0;U<g.length;U++){var J=g[U];if(J.dataset.precedence===u)_=J;else if(_!==b)break}_?_.parentNode.insertBefore(l,_.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function H5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function G5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var ay=null;function hO(l,u,f){if(ay===null){var g=new Map,b=ay=new Map;b.set(f,g)}else b=ay,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var _=f[b];if(!(_[wi]||_[Jr]||l==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var U=_.getAttribute(u)||"";U=l+U;var J=g.get(U);J?J.push(_):g.set(U,[_])}}return g}function fO(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function RJ(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function pO(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function MJ(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=sh(g.href),_=u.querySelector(Fp(b));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=iy.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=_,vr(_);return}_=u.ownerDocument||u,g=uO(g),(b=Ks.get(b))&&H5(g,b),_=_.createElement("link"),vr(_);var U=_;U._p=new Promise(function(J,he){U.onload=J,U.onerror=he}),fi(_,"link",g),f.instance=_}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=iy.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var W5=0;function DJ(l,u){return l.stylesheets&&l.count===0&&oy(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&oy(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4+u);0<l.imgBytes&&W5===0&&(W5=62500*mJ());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&oy(l,l.stylesheets),l.unsuspend)){var _=l.unsuspend;l.unsuspend=null,_()}},(l.imgBytes>W5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function iy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oy(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var sy=null;function oy(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,sy=new Map,u.forEach(PJ,l),sy=null,iy.call(l))}function PJ(l,u){if(!(u.state.loading&4)){var f=sy.get(l);if(f)var g=f.get(null);else{f=new Map,sy.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var U=b[_];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(f.set(U.dataset.precedence,U),g=U)}g&&f.set(null,g)}b=u.instance,U=b.getAttribute("data-precedence"),_=f.get(U)||g,_===g&&f.set(null,b),f.set(U,b),this.count++,g=iy.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),_?_.parentNode.insertBefore(b,_.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var Hp={$$typeof:M,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function LJ(l,u,f,g,b,_,U,J,he){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dr(0),this.hiddenUpdates=Dr(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function mO(l,u,f,g,b,_,U,J,he,Re,Qe,tt){return l=new LJ(l,u,f,U,he,Re,Qe,tt,J),u=1,_===!0&&(u|=24),_=ws(3,null,null,u),l.current=_,_.stateNode=l,u=T4(),u.refCount++,l.pooledCache=u,u.refCount++,_.memoizedState={element:g,isDehydrated:f,cache:u},C4(_),l}function gO(l){return l?(l=B0,l):B0}function xO(l,u,f,g,b,_){b=gO(b),g.context===null?g.context=b:g.pendingContext=b,g=$c(u),g.payload={element:f},_=_===void 0?null:_,_!==null&&(g.callback=_),f=zc(l,g,u),f!==null&&(Ji(f,l,u),Np(f,l,u))}function yO(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function K5(l,u){yO(l,u),(l=l.alternate)&&yO(l,u)}function vO(l){if(l.tag===13||l.tag===31){var u=od(l,67108864);u!==null&&Ji(u,l,67108864),K5(l,67108864)}}function bO(l){if(l.tag===13||l.tag===31){var u=Ts();u=ci(u);var f=od(l,u);f!==null&&Ji(f,l,u),K5(l,u)}}var ly=!0;function BJ(l,u,f,g){var b=H.T;H.T=null;var _=K.p;try{K.p=2,Q5(l,u,f,g)}finally{K.p=_,H.T=b}}function $J(l,u,f,g){var b=H.T;H.T=null;var _=K.p;try{K.p=8,Q5(l,u,f,g)}finally{K.p=_,H.T=b}}function Q5(l,u,f,g){if(ly){var b=X5(g);if(b===null)D5(l,u,g,cy,f),SO(l,g);else if(UJ(b,l,u,f,g))g.stopPropagation();else if(SO(l,g),u&4&&-1<zJ.indexOf(l)){for(;b!==null;){var _=at(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var U=Gt(_.pendingLanes);if(U!==0){var J=_;for(J.pendingLanes|=2,J.entangledLanes|=2;U;){var he=1<<31-rt(U);J.entanglements[1]|=he,U&=~he}qo(_),(en&6)===0&&(H1=Fe()+500,$p(0))}}break;case 31:case 13:J=od(_,2),J!==null&&Ji(J,_,2),W1(),K5(_,2)}if(_=X5(g),_===null&&D5(l,u,g,cy,f),_===b)break;b=_}b!==null&&g.stopPropagation()}else D5(l,u,g,null,f)}}function X5(l){return l=Nr(l),Y5(l)}var cy=null;function Y5(l){if(cy=null,l=fe(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return cy=l,null}function wO(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jt()){case qe:return 2;case Ze:return 8;case At:case St:return 32;case lr:return 268435456;default:return 32}default:return 32}}var J5=!1,Yc=null,Jc=null,Zc=null,Gp=new Map,Wp=new Map,eu=[],zJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SO(l,u){switch(l){case"focusin":case"focusout":Yc=null;break;case"dragenter":case"dragleave":Jc=null;break;case"mouseover":case"mouseout":Zc=null;break;case"pointerover":case"pointerout":Gp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wp.delete(u.pointerId)}}function Kp(l,u,f,g,b,_){return l===null||l.nativeEvent!==_?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:_,targetContainers:[b]},u!==null&&(u=at(u),u!==null&&vO(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function UJ(l,u,f,g,b){switch(u){case"focusin":return Yc=Kp(Yc,l,u,f,g,b),!0;case"dragenter":return Jc=Kp(Jc,l,u,f,g,b),!0;case"mouseover":return Zc=Kp(Zc,l,u,f,g,b),!0;case"pointerover":var _=b.pointerId;return Gp.set(_,Kp(Gp.get(_)||null,l,u,f,g,b)),!0;case"gotpointercapture":return _=b.pointerId,Wp.set(_,Kp(Wp.get(_)||null,l,u,f,g,b)),!0}return!1}function NO(l){var u=fe(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,Ya(l.priority,function(){bO(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,Ya(l.priority,function(){bO(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function uy(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=X5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Hi=g,f.target.dispatchEvent(g),Hi=null}else return u=at(f),u!==null&&vO(u),l.blockedOn=f,!1;u.shift()}return!0}function _O(l,u,f){uy(l)&&f.delete(u)}function VJ(){J5=!1,Yc!==null&&uy(Yc)&&(Yc=null),Jc!==null&&uy(Jc)&&(Jc=null),Zc!==null&&uy(Zc)&&(Zc=null),Gp.forEach(_O),Wp.forEach(_O)}function dy(l,u){l.blockedOn===u&&(l.blockedOn=null,J5||(J5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,VJ)))}var hy=null;function jO(l){hy!==l&&(hy=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hy===l&&(hy=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(Y5(g||f)===null)continue;break}var _=at(f);_!==null&&(l.splice(u,3),u-=3,X4(_,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function lh(l){function u(he){return dy(he,l)}Yc!==null&&dy(Yc,l),Jc!==null&&dy(Jc,l),Zc!==null&&dy(Zc,l),Gp.forEach(u),Wp.forEach(u);for(var f=0;f<eu.length;f++){var g=eu[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<eu.length&&(f=eu[0],f.blockedOn===null);)NO(f),f.blockedOn===null&&eu.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],_=f[g+1],U=b[vn]||null;if(typeof _=="function")U||jO(f);else if(U){var J=null;if(_&&_.hasAttribute("formAction")){if(b=_,U=_[vn]||null)J=U.formAction;else if(Y5(b)!==null)continue}else J=U.action;typeof J=="function"?f[g+1]=J:(f.splice(g,3),g-=3),jO(f)}}}function TO(){function l(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(U){return b=U})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function Z5(l){this._internalRoot=l}fy.prototype.render=Z5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=Ts();xO(f,g,l,u,null,null)},fy.prototype.unmount=Z5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;xO(l.current,2,null,l,null,null),W1(),u[Wn]=null}};function fy(l){this._internalRoot=l}fy.prototype.unstable_scheduleHydration=function(l){if(l){var u=Pr();l={blockedOn:null,target:l,priority:u};for(var f=0;f<eu.length&&u!==0&&u<eu[f].priority;f++);eu.splice(f,0,l),f===0&&NO(l)}};var AO=e.version;if(AO!=="19.2.4")throw Error(n(527,AO,"19.2.4"));K.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var FJ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var py=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!py.isDisabled&&py.supportsFiber)try{xt=py.inject(FJ),Dt=py}catch{}}return Xp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=MC,_=DC,U=PC;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError)),u=mO(l,1,!1,null,null,f,g,null,b,_,U,TO),l[Wn]=u.current,M5(l),new Z5(u)},Xp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",_=MC,U=DC,J=PC,he=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(U=f.onCaughtError),f.onRecoverableError!==void 0&&(J=f.onRecoverableError),f.formState!==void 0&&(he=f.formState)),u=mO(l,1,!0,u,f??null,g,b,he,_,U,J,TO),u.context=gO(null),f=u.current,g=Ts(),g=ci(g),b=$c(g),b.callback=null,zc(f,b,g),f=g,u.current.lanes=f,kn(u,f),qo(u),l[Wn]=u.current,M5(l),new fy(u)},Xp.version="19.2.4",Xp}var BO;function tZ(){if(BO)return r3.exports;BO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),r3.exports=eZ(),r3.exports}var rZ=tZ();const nZ=tn(rZ);var Fa=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Fa||{});const Tr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var qa=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(qa||{});const pj={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},$O=[1.5,1.4,1.3,1.2,1.1],Qm=5,Xm=1;function aZ(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function av(t,e){const r=new Set;return t.forEach(n=>{const a=aZ(n,e);a&&r.add(a)}),Array.from(r).sort()}const iZ=[{id:"participation",name:"Participation",icon:"",xpAmount:25,fluxAmount:5,color:"blue"},{id:"helping",name:"Helping Others",icon:"",xpAmount:30,fluxAmount:10,color:"green"},{id:"leadership",name:"Leadership",icon:"",xpAmount:35,fluxAmount:10,color:"amber"},{id:"focus",name:"Great Focus",icon:"",xpAmount:20,fluxAmount:5,color:"purple"},{id:"creativity",name:"Creativity",icon:"",xpAmount:30,fluxAmount:8,color:"pink"},{id:"perseverance",name:"Perseverance",icon:"",xpAmount:25,fluxAmount:5,color:"orange"}];var zO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},sZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},EV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let x=(c&15)<<2|h>>6,y=h&63;d||(y=64,o||(x=64)),n.push(r[p],r[m],r[x],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new oZ;const x=i<<2|c>>4;if(n.push(x),h!==64){const y=c<<4&240|h>>2;if(n.push(y),m!==64){const w=h<<6&192|m;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lZ=function(t){const e=AV(t);return EV.encodeByteArray(e,!0)},Av=function(t){return lZ(t).replace(/\./g,"")},kV=function(t){try{return EV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uZ=()=>cZ().__FIREBASE_DEFAULTS__,dZ=()=>{if(typeof process>"u"||typeof zO>"u")return;const t=zO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kV(t[1]);return e&&JSON.parse(e)},j2=()=>{try{return uZ()||dZ()||hZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CV=t=>{var e,r;return(r=(e=j2())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},OV=t=>{const e=CV(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},IV=()=>{var t;return(t=j2())===null||t===void 0?void 0:t.config},RV=t=>{var e;return(e=j2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Av(JSON.stringify(r)),Av(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wa())}function gZ(){var t;const e=(t=j2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bZ(){const t=Wa();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MV(){return!gZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DV(){try{return typeof indexedDB=="object"}catch{return!1}}function wZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SZ="FirebaseError";class Do extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=SZ,Object.setPrototypeOf(this,Do.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ox.prototype.create)}}class ox{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?NZ(i,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new Do(a,c,n)}}function NZ(t,e){return t.replace(_Z,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const _Z=/\{\$([^}]+)}/g;function jZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=e[a];if(UO(i)&&UO(o)){if(!qh(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function UO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function TZ(t,e){const r=new AZ(t,e);return r.subscribe.bind(r)}class AZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");EZ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=s3),a.error===void 0&&(a.error=s3),a.complete===void 0&&(a.complete=s3);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function s3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t){return t&&t._delegate?t._delegate:t}class oc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new fZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OZ(e))try{this.getOrInitializeService({instanceIdentifier:Ed})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Ed){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ed){return this.instances.has(e)}getOptions(e=Ed){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:CZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ed){return this.component?this.component.multipleInstances?e:Ed:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CZ(t){return t===Ed?void 0:t}function OZ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new kZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rr||(Rr={}));const RZ={debug:Rr.DEBUG,verbose:Rr.VERBOSE,info:Rr.INFO,warn:Rr.WARN,error:Rr.ERROR,silent:Rr.SILENT},MZ=Rr.INFO,DZ={[Rr.DEBUG]:"log",[Rr.VERBOSE]:"log",[Rr.INFO]:"info",[Rr.WARN]:"warn",[Rr.ERROR]:"error"},PZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=DZ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class GA{constructor(e){this.name=e,this._logLevel=MZ,this._logHandler=PZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rr.DEBUG,...e),this._logHandler(this,Rr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rr.VERBOSE,...e),this._logHandler(this,Rr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rr.INFO,...e),this._logHandler(this,Rr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rr.WARN,...e),this._logHandler(this,Rr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rr.ERROR,...e),this._logHandler(this,Rr.ERROR,...e)}}const LZ=(t,e)=>e.some(r=>t instanceof r);let VO,FO;function BZ(){return VO||(VO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $Z(){return FO||(FO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PV=new WeakMap,mj=new WeakMap,LV=new WeakMap,o3=new WeakMap,WA=new WeakMap;function zZ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(Tu(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&PV.set(r,t)}).catch(()=>{}),WA.set(e,t),e}function UZ(t){if(mj.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});mj.set(t,e)}let gj={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return mj.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LV.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Tu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VZ(t){gj=t(gj)}function FZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(l3(this),e,...r);return LV.set(n,e.sort?e.sort():[e]),Tu(n)}:$Z().includes(t)?function(...e){return t.apply(l3(this),e),Tu(PV.get(this))}:function(...e){return Tu(t.apply(l3(this),e))}}function qZ(t){return typeof t=="function"?FZ(t):(t instanceof IDBTransaction&&UZ(t),LZ(t,BZ())?new Proxy(t,gj):t)}function Tu(t){if(t instanceof IDBRequest)return zZ(t);if(o3.has(t))return o3.get(t);const e=qZ(t);return e!==t&&(o3.set(t,e),WA.set(e,t)),e}const l3=t=>WA.get(t);function HZ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),c=Tu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Tu(o.result),d.oldVersion,d.newVersion,Tu(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const GZ=["get","getKey","getAll","getAllKeys","count"],WZ=["put","add","delete","clear"],c3=new Map;function qO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(c3.get(e))return c3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=WZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||GZ.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return c3.set(e,i),i}VZ(t=>({...t,get:(e,r,n)=>qO(e,r)||t.get(e,r,n),has:(e,r)=>!!qO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(QZ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function QZ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xj="@firebase/app",HO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new GA("@firebase/app"),XZ="@firebase/app-compat",YZ="@firebase/analytics-compat",JZ="@firebase/analytics",ZZ="@firebase/app-check-compat",eee="@firebase/app-check",tee="@firebase/auth",ree="@firebase/auth-compat",nee="@firebase/database",aee="@firebase/data-connect",iee="@firebase/database-compat",see="@firebase/functions",oee="@firebase/functions-compat",lee="@firebase/installations",cee="@firebase/installations-compat",uee="@firebase/messaging",dee="@firebase/messaging-compat",hee="@firebase/performance",fee="@firebase/performance-compat",pee="@firebase/remote-config",mee="@firebase/remote-config-compat",gee="@firebase/storage",xee="@firebase/storage-compat",yee="@firebase/firestore",vee="@firebase/vertexai-preview",bee="@firebase/firestore-compat",wee="firebase",See="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="[DEFAULT]",Nee={[xj]:"fire-core",[XZ]:"fire-core-compat",[JZ]:"fire-analytics",[YZ]:"fire-analytics-compat",[eee]:"fire-app-check",[ZZ]:"fire-app-check-compat",[tee]:"fire-auth",[ree]:"fire-auth-compat",[nee]:"fire-rtdb",[aee]:"fire-data-connect",[iee]:"fire-rtdb-compat",[see]:"fire-fn",[oee]:"fire-fn-compat",[lee]:"fire-iid",[cee]:"fire-iid-compat",[uee]:"fire-fcm",[dee]:"fire-fcm-compat",[hee]:"fire-perf",[fee]:"fire-perf-compat",[pee]:"fire-rc",[mee]:"fire-rc-compat",[gee]:"fire-gcs",[xee]:"fire-gcs-compat",[yee]:"fire-fst",[bee]:"fire-fst-compat",[vee]:"fire-vertex","fire-js":"fire-js",[wee]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Map,_ee=new Map,vj=new Map;function GO(t,e){try{t.container.addComponent(e)}catch(r){lc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Mu(t){const e=t.name;if(vj.has(e))return lc.debug(`There were multiple attempts to register component ${e}.`),!1;vj.set(e,t);for(const r of Ev.values())GO(r,t);for(const r of _ee.values())GO(r,t);return!0}function cx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Gl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Au=new ox("app","Firebase",jee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new oc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Au.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=See;function BV(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:yj,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw Au.create("bad-app-name",{appName:String(a)});if(r||(r=IV()),!r)throw Au.create("no-options");const i=Ev.get(a);if(i){if(qh(r,i.options)&&qh(n,i.config))return i;throw Au.create("duplicate-app",{appName:a})}const o=new IZ(a);for(const d of vj.values())o.addComponent(d);const c=new Tee(r,n,o);return Ev.set(a,c),c}function KA(t=yj){const e=Ev.get(t);if(!e&&t===yj&&IV())return BV();if(!e)throw Au.create("no-app",{appName:t});return e}function no(t,e,r){var n;let a=(n=Nee[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lc.warn(c.join(" "));return}Mu(new oc(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee="firebase-heartbeat-database",Eee=1,Ym="firebase-heartbeat-store";let u3=null;function $V(){return u3||(u3=HZ(Aee,Eee,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ym)}catch(r){console.warn(r)}}}}).catch(t=>{throw Au.create("idb-open",{originalErrorMessage:t.message})})),u3}async function kee(t){try{const r=(await $V()).transaction(Ym),n=await r.objectStore(Ym).get(zV(t));return await r.done,n}catch(e){if(e instanceof Do)lc.warn(e.message);else{const r=Au.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lc.warn(r.message)}}}async function WO(t,e){try{const n=(await $V()).transaction(Ym,"readwrite");await n.objectStore(Ym).put(e,zV(t)),await n.done}catch(r){if(r instanceof Do)lc.warn(r.message);else{const n=Au.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});lc.warn(n.message)}}}function zV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cee=1024,Oee=720*60*60*1e3;class Iee{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Mee(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=KO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=Oee}),this._storage.overwrite(this._heartbeatsCache))}catch(n){lc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=KO(),{heartbeatsToSend:n,unsentEntries:a}=Ree(this._heartbeatsCache.heartbeats),i=Av(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return lc.warn(r),""}}}function KO(){return new Date().toISOString().substring(0,10)}function Ree(t,e=Cee){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),QO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),QO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Mee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DV()?wZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await kee(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return WO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return WO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function QO(t){return Av(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dee(t){Mu(new oc("platform-logger",e=>new KZ(e),"PRIVATE")),Mu(new oc("heartbeat",e=>new Iee(e),"PRIVATE")),no(xj,HO,t),no(xj,HO,"esm2017"),no("fire-js","")}Dee("");var Pee="firebase",Lee="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */no(Pee,Lee,"app");function QA(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function UV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bee=UV,VV=new ox("auth","Firebase",UV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new GA("@firebase/auth");function $ee(t,...e){kv.logLevel<=Rr.WARN&&kv.warn(`Auth (${b0}): ${t}`,...e)}function iv(t,...e){kv.logLevel<=Rr.ERROR&&kv.error(`Auth (${b0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t,...e){throw YA(t,...e)}function Oo(t,...e){return YA(t,...e)}function XA(t,e,r){const n=Object.assign(Object.assign({},Bee()),{[e]:r});return new ox("auth","Firebase",n).create(e,{appName:t.name})}function Hd(t){return XA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zee(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&il(t,"argument-error"),XA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function YA(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return VV.create(t,...e)}function hr(t,e,...r){if(!t)throw YA(e,...r)}function Wl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iv(e),new Error(e)}function cc(t,e){t||Wl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Uee(){return XO()==="http:"||XO()==="https:"}function XO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Uee()||yZ()||"connection"in navigator)?navigator.onLine:!0}function Fee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,r){this.shortDelay=e,this.longDelay=r,cc(r>e,"Short delay should be less than long delay!"),this.isMobile=mZ()||vZ()}get(){return Vee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t,e){cc(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hee=new ux(3e4,6e4);function ZA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Lf(t,e,r,n,a={}){return qV(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=lx(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return xZ()||(h.referrerPolicy="no-referrer"),FV.fetch()(HV(t,t.config.apiHost,r,c),h)})}async function qV(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},qee),e);try{const a=new Wee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw gy(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw gy(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw gy(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw gy(t,"user-disabled",o);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw XA(t,p,h);il(t,p)}}catch(a){if(a instanceof Do)throw a;il(t,"network-request-failed",{message:String(a)})}}async function Gee(t,e,r,n,a={}){const i=await Lf(t,e,r,n,a);return"mfaPendingCredential"in i&&il(t,"multi-factor-auth-required",{_serverResponse:i}),i}function HV(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?JA(t.config,a):`${t.config.apiScheme}://${a}`}class Wee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Oo(this.auth,"network-request-failed")),Hee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Oo(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kee(t,e){return Lf(t,"POST","/v1/accounts:delete",e)}async function GV(t,e){return Lf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qee(t,e=!1){const r=En(t),n=await r.getIdToken(e),a=e8(n);hr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:Tm(d3(a.auth_time)),issuedAtTime:Tm(d3(a.iat)),expirationTime:Tm(d3(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function d3(t){return Number(t)*1e3}function e8(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return iv("JWT malformed, contained fewer than 3 sections"),null;try{const a=kV(r);return a?JSON.parse(a):(iv("Failed to decode base64 JWT payload"),null)}catch(a){return iv("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function YO(t){const e=e8(t);return hr(e,"internal-error"),hr(typeof e.exp<"u","internal-error"),hr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Do&&Xee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Xee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tm(this.lastLoginAt),this.creationTime=Tm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cv(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Jm(t,GV(r,{idToken:n}));hr(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?WV(i.providerUserInfo):[],c=Zee(t.providerData,o),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new wj(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Jee(t){const e=En(t);await Cv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Zee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function WV(t){return t.map(e=>{var{providerId:r}=e,n=QA(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ete(t,e){const r=await qV(t,{},async()=>{const n=lx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=HV(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",FV.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function tte(t,e){return Lf(t,"POST","/v2/accounts:revokeToken",ZA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){hr(e.idToken,"internal-error"),hr(typeof e.idToken<"u","internal-error"),hr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){hr(e.length!==0,"internal-error");const r=YO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(hr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await ete(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,o=new kh;return n&&(hr(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(hr(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(hr(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kh,this.toJSON())}_performRefresh(){return Wl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,e){hr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=QA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wj(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Jm(this,this.stsTokenManager.getToken(this.auth,e));return hr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Qee(this,e)}reload(){return Jee(this)}_assign(e){this!==e&&(hr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Kl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Cv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gl(this.auth.app))return Promise.reject(Hd(this.auth));const e=await this.getIdToken();return await Jm(this,Kee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,o,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,x=(a=r.email)!==null&&a!==void 0?a:void 0,y=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=r.photoURL)!==null&&o!==void 0?o:void 0,N=(c=r.tenantId)!==null&&c!==void 0?c:void 0,S=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,E=(h=r.createdAt)!==null&&h!==void 0?h:void 0,C=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:M,emailVerified:L,isAnonymous:I,providerData:R,stsTokenManager:A}=r;hr(M&&A,e,"internal-error");const T=kh.fromJSON(this.name,A);hr(typeof M=="string",e,"internal-error"),ru(m,e.name),ru(x,e.name),hr(typeof L=="boolean",e,"internal-error"),hr(typeof I=="boolean",e,"internal-error"),ru(y,e.name),ru(w,e.name),ru(N,e.name),ru(S,e.name),ru(E,e.name),ru(C,e.name);const k=new Kl({uid:M,auth:e,email:x,emailVerified:L,displayName:m,isAnonymous:I,photoURL:w,phoneNumber:y,tenantId:N,stsTokenManager:T,createdAt:E,lastLoginAt:C});return R&&Array.isArray(R)&&(k.providerData=R.map(F=>Object.assign({},F))),S&&(k._redirectEventId=S),k}static async _fromIdTokenResponse(e,r,n=!1){const a=new kh;a.updateFromServerResponse(r);const i=new Kl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Cv(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];hr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?WV(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new kh;c.updateFromIdToken(n);const d=new Kl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new wj(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new Map;function Ql(t){cc(t instanceof Function,"Expected a class definition");let e=JO.get(t);return e?(cc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}KV.type="NONE";const ZO=KV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e,r){return`firebase:${t}:${e}:${r}`}class Ch{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=sv(this.userKey,a.apiKey,i),this.fullPersistenceKey=sv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ch(Ql(ZO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Ql(ZO);const o=sv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(o);if(p){const m=Kl._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Ch(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ch(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eF(e))return"Blackberry";if(tF(e))return"Webos";if(XV(e))return"Safari";if((e.includes("chrome/")||YV(e))&&!e.includes("edge/"))return"Chrome";if(ZV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function QV(t=Wa()){return/firefox\//i.test(t)}function XV(t=Wa()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YV(t=Wa()){return/crios\//i.test(t)}function JV(t=Wa()){return/iemobile/i.test(t)}function ZV(t=Wa()){return/android/i.test(t)}function eF(t=Wa()){return/blackberry/i.test(t)}function tF(t=Wa()){return/webos/i.test(t)}function t8(t=Wa()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rte(t=Wa()){var e;return t8(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nte(){return bZ()&&document.documentMode===10}function rF(t=Wa()){return t8(t)||ZV(t)||tF(t)||eF(t)||/windows phone/i.test(t)||JV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(t,e=[]){let r;switch(t){case"Browser":r=eI(Wa());break;case"Worker":r=`${eI(Wa())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${b0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ate{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ite(t,e={}){return Lf(t,"GET","/v2/passwordPolicy",ZA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ste=6;class ote{constructor(e){var r,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:ste,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lte{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tI(this),this.idTokenSubscription=new tI(this),this.beforeStateQueue=new ate(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ql(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Ch.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await GV(this,{idToken:e}),n=await Kl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Gl(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return hr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Cv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Fee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gl(this.app))return Promise.reject(Hd(this));const r=e?En(e):null;return r&&hr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&hr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gl(this.app)?Promise.reject(Hd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gl(this.app)?Promise.reject(Hd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ql(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ite(this),r=new ote(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ox("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await tte(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ql(e)||this._popupRedirectResolver;hr(r,this,"argument-error"),this.redirectPersistenceManager=await Ch.create(this,[Ql(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(hr(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&$ee(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function T2(t){return En(t)}class tI{constructor(e){this.auth=e,this.observer=null,this.addObserver=TZ(r=>this.observer=r)}get next(){return hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r8={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cte(t){r8=t}function ute(t){return r8.loadJS(t)}function dte(){return r8.gapiScript}function hte(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fte(t,e){const r=cx(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(qh(i,e??{}))return a;il(a,"already-initialized")}return r.initialize({options:e})}function pte(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ql);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function mte(t,e,r){const n=T2(t);hr(n._canInitEmulator,n,"emulator-config-failed"),hr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=aF(e),{host:o,port:c}=gte(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),xte()}function aF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gte(t){const e=aF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:rI(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:rI(o)}}}function rI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xte(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Wl("not implemented")}_getIdTokenResponse(e){return Wl("not implemented")}_linkToIdToken(e,r){return Wl("not implemented")}_getReauthenticationResolver(e){return Wl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(t,e){return Gee(t,"POST","/v1/accounts:signInWithIdp",ZA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yte="http://localhost";class Xd extends iF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Xd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):il("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=QA(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Xd(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Oh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Oh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Oh(e,r)}buildRequest(){const e={requestUri:yte,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=lx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx extends n8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends dx{constructor(){super("facebook.com")}static credential(e){return Xd._fromParams({providerId:uu.PROVIDER_ID,signInMethod:uu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uu.credentialFromTaggedObject(e)}static credentialFromError(e){return uu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uu.credential(e.oauthAccessToken)}catch{return null}}}uu.FACEBOOK_SIGN_IN_METHOD="facebook.com";uu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends dx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Xd._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ql.credentialFromTaggedObject(e)}static credentialFromError(e){return ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ql.credential(r,n)}catch{return null}}}ql.GOOGLE_SIGN_IN_METHOD="google.com";ql.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends dx{constructor(){super("github.com")}static credential(e){return Xd._fromParams({providerId:du.PROVIDER_ID,signInMethod:du.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return du.credentialFromTaggedObject(e)}static credentialFromError(e){return du.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return du.credential(e.oauthAccessToken)}catch{return null}}}du.GITHUB_SIGN_IN_METHOD="github.com";du.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends dx{constructor(){super("twitter.com")}static credential(e,r){return Xd._fromParams({providerId:hu.PROVIDER_ID,signInMethod:hu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return hu.credentialFromTaggedObject(e)}static credentialFromError(e){return hu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return hu.credential(r,n)}catch{return null}}}hu.TWITTER_SIGN_IN_METHOD="twitter.com";hu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await Kl._fromIdTokenResponse(e,n,a),o=nI(n);return new Hh({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=nI(n);return new Hh({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function nI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends Do{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Ov.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new Ov(e,r,n,a)}}function sF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ov._fromErrorAndOperation(t,i,e,n):i})}async function vte(t,e,r=!1){const n=await Jm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Hh._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bte(t,e,r=!1){const{auth:n}=t;if(Gl(n.app))return Promise.reject(Hd(n));const a="reauthenticate";try{const i=await Jm(t,sF(n,a,e,t),r);hr(i.idToken,n,"internal-error");const o=e8(i.idToken);hr(o,n,"internal-error");const{sub:c}=o;return hr(t.uid===c,n,"user-mismatch"),Hh._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&il(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wte(t,e,r=!1){if(Gl(t.app))return Promise.reject(Hd(t));const n="signIn",a=await sF(t,n,e),i=await Hh._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function Ste(t,e,r,n){return En(t).onIdTokenChanged(e,r,n)}function Nte(t,e,r){return En(t).beforeAuthStateChanged(e,r)}function _te(t,e,r,n){return En(t).onAuthStateChanged(e,r,n)}function jte(t){return En(t).signOut()}const Iv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Iv,"1"),this.storage.removeItem(Iv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tte=1e3,Ate=10;class lF extends oF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);nte()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Ate):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Tte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}lF.type="LOCAL";const Ete=lF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF extends oF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}cF.type="SESSION";const uF=cF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kte(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new A2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,i)),d=await kte(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}A2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=a8("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(m){const x=m;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(){return window}function Ote(t){rl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(){return typeof rl().WorkerGlobalScope<"u"&&typeof rl().importScripts=="function"}async function Ite(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rte(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Mte(){return dF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="firebaseLocalStorageDb",Dte=1,Rv="firebaseLocalStorage",fF="fbase_key";class hx{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function E2(t,e){return t.transaction([Rv],e?"readwrite":"readonly").objectStore(Rv)}function Pte(){const t=indexedDB.deleteDatabase(hF);return new hx(t).toPromise()}function Sj(){const t=indexedDB.open(hF,Dte);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Rv,{keyPath:fF})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Rv)?e(n):(n.close(),await Pte(),e(await Sj()))})})}async function aI(t,e,r){const n=E2(t,!0).put({[fF]:e,value:r});return new hx(n).toPromise()}async function Lte(t,e){const r=E2(t,!1).get(e),n=await new hx(r).toPromise();return n===void 0?null:n.value}function iI(t,e){const r=E2(t,!0).delete(e);return new hx(r).toPromise()}const Bte=800,$te=3;class pF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sj(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>$te)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=A2._getInstance(Mte()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Ite(),!this.activeServiceWorker)return;this.sender=new Cte(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Rte()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sj();return await aI(e,Iv,"1"),await iI(e,Iv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>aI(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Lte(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>iI(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=E2(a,!1).getAll();return new hx(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pF.type="LOCAL";const zte=pF;new ux(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t,e){return e?Ql(e):(hr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8 extends iF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Oh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Oh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Ute(t){return wte(t.auth,new i8(t),t.bypassAuthState)}function Vte(t){const{auth:e,user:r}=t;return hr(r,e,"internal-error"),bte(r,new i8(t),t.bypassAuthState)}async function Fte(t){const{auth:e,user:r}=t;return hr(r,e,"internal-error"),vte(r,new i8(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ute;case"linkViaPopup":case"linkViaRedirect":return Fte;case"reauthViaPopup":case"reauthViaRedirect":return Vte;default:il(this.auth,"internal-error")}}resolve(e){cc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qte=new ux(2e3,1e4);async function Hte(t,e,r){if(Gl(t.app))return Promise.reject(Oo(t,"operation-not-supported-in-this-environment"));const n=T2(t);zee(t,e,n8);const a=mF(n,r);return new Ld(n,"signInViaPopup",e,a).executeNotNull()}class Ld extends gF{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Ld.currentPopupAction&&Ld.currentPopupAction.cancel(),Ld.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return hr(e,this.auth,"internal-error"),e}async onExecution(){cc(this.filter.length===1,"Popup operations only handle one event");const e=a8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Oo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Oo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ld.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qte.get())};e()}}Ld.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gte="pendingRedirect",ov=new Map;class Wte extends gF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=ov.get(this.auth._key());if(!e){try{const n=await Kte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}ov.set(this.auth._key(),e)}return this.bypassAuthState||ov.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kte(t,e){const r=Yte(e),n=Xte(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Qte(t,e){ov.set(t._key(),e)}function Xte(t){return Ql(t._redirectPersistence)}function Yte(t){return sv(Gte,t.config.apiKey,t.name)}async function Jte(t,e,r=!1){if(Gl(t.app))return Promise.reject(Hd(t));const n=T2(t),a=mF(n,e),o=await new Wte(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zte=600*1e3;class ere{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tre(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!xF(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Oo(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zte&&this.cachedEventUids.clear(),this.cachedEventUids.has(sI(e))}saveEventToCache(e){this.cachedEventUids.add(sI(e)),this.lastProcessedEventTime=Date.now()}}function sI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tre(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rre(t,e={}){return Lf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nre=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,are=/^https?/;async function ire(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rre(t);for(const r of e)try{if(sre(r))return}catch{}il(t,"unauthorized-domain")}function sre(t){const e=bj(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!are.test(r))return!1;if(nre.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ore=new ux(3e4,6e4);function oI(){const t=rl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function lre(t){return new Promise((e,r)=>{var n,a,i;function o(){oI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oI(),r(Oo(t,"network-request-failed"))},timeout:ore.get()})}if(!((a=(n=rl().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=rl().gapi)===null||i===void 0)&&i.load)o();else{const c=hte("iframefcb");return rl()[c]=()=>{gapi.load?o():r(Oo(t,"network-request-failed"))},ute(`${dte()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw lv=null,e})}let lv=null;function cre(t){return lv=lv||lre(t),lv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ure=new ux(5e3,15e3),dre="__/auth/iframe",hre="emulator/auth/iframe",fre={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pre=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mre(t){const e=t.config;hr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?JA(e,hre):`https://${t.config.authDomain}/${dre}`,n={apiKey:e.apiKey,appName:t.name,v:b0},a=pre.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${lx(n).slice(1)}`}async function gre(t){const e=await cre(t),r=rl().gapi;return hr(r,t,"internal-error"),e.open({where:document.body,url:mre(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fre,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=Oo(t,"network-request-failed"),c=rl().setTimeout(()=>{i(o)},ure.get());function d(){rl().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xre={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yre=500,vre=600,bre="_blank",wre="http://localhost";class lI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sre(t,e,r,n=yre,a=vre){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},xre),{width:n.toString(),height:a.toString(),top:i,left:o}),h=Wa().toLowerCase();r&&(c=YV(h)?bre:r),QV(h)&&(e=e||wre,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[y,w])=>`${x}${y}=${w},`,"");if(rte(h)&&c!=="_self")return Nre(e||"",c),new lI(null);const m=window.open(e||"",c,p);hr(m,t,"popup-blocked");try{m.focus()}catch{}return new lI(m)}function Nre(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _re="__/auth/handler",jre="emulator/auth/handler",Tre=encodeURIComponent("fac");async function cI(t,e,r,n,a,i){hr(t.config.authDomain,t,"auth-domain-config-required"),hr(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:b0,eventId:a};if(e instanceof n8){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jZ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof dx){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${Tre}=${encodeURIComponent(d)}`:"";return`${Are(t)}?${lx(c).slice(1)}${h}`}function Are({config:t}){return t.emulator?JA(t,jre):`https://${t.authDomain}/${_re}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="webStorageSupport";class Ere{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uF,this._completeRedirectFn=Jte,this._overrideRedirectResult=Qte}async _openPopup(e,r,n,a){var i;cc((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await cI(e,r,n,bj(),a);return Sre(e,o,a8())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await cI(e,r,n,bj(),a);return Ote(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(cc(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await gre(e),n=new ere(e);return r.register("authEvent",a=>(hr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(h3,{type:h3},a=>{var i;const o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[h3];o!==void 0&&r(!!o),il(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=ire(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return rF()||XV()||t8()}}const kre=Ere;var uI="@firebase/auth",dI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cre{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ore(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ire(t){Mu(new oc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;hr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nF(t)},h=new lte(n,a,i,d);return pte(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Mu(new oc("auth-internal",e=>{const r=T2(e.getProvider("auth").getImmediate());return(n=>new Cre(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),no(uI,dI,Ore(t)),no(uI,dI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rre=300,Mre=RV("authIdTokenMaxAge")||Rre;let hI=null;const Dre=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Mre)return;const a=r==null?void 0:r.token;hI!==a&&(hI=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Nj(t=KA()){const e=cx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=fte(t,{popupRedirectResolver:kre,persistence:[zte,Ete,uF]}),n=RV("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=Dre(i.toString());Nte(r,o,()=>o(r.currentUser)),Ste(r,c=>o(c))}}const a=CV("auth");return a&&mte(r,`http://${a}`),r}function Pre(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cte({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=Oo("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",Pre().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ire("Browser");var fI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gd,yF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function k(){}k.prototype=T.prototype,A.D=T.prototype,A.prototype=new k,A.prototype.constructor=A,A.C=function(F,O,$){for(var B=Array(arguments.length-2),G=2;G<arguments.length;G++)B[G-2]=arguments[G];return T.prototype[O].apply(F,B)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,T,k){k||(k=0);var F=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)F[O]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(O=0;16>O;++O)F[O]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=A.g[0],k=A.g[1],O=A.g[2];var $=A.g[3],B=T+($^k&(O^$))+F[0]+3614090360&4294967295;T=k+(B<<7&4294967295|B>>>25),B=$+(O^T&(k^O))+F[1]+3905402710&4294967295,$=T+(B<<12&4294967295|B>>>20),B=O+(k^$&(T^k))+F[2]+606105819&4294967295,O=$+(B<<17&4294967295|B>>>15),B=k+(T^O&($^T))+F[3]+3250441966&4294967295,k=O+(B<<22&4294967295|B>>>10),B=T+($^k&(O^$))+F[4]+4118548399&4294967295,T=k+(B<<7&4294967295|B>>>25),B=$+(O^T&(k^O))+F[5]+1200080426&4294967295,$=T+(B<<12&4294967295|B>>>20),B=O+(k^$&(T^k))+F[6]+2821735955&4294967295,O=$+(B<<17&4294967295|B>>>15),B=k+(T^O&($^T))+F[7]+4249261313&4294967295,k=O+(B<<22&4294967295|B>>>10),B=T+($^k&(O^$))+F[8]+1770035416&4294967295,T=k+(B<<7&4294967295|B>>>25),B=$+(O^T&(k^O))+F[9]+2336552879&4294967295,$=T+(B<<12&4294967295|B>>>20),B=O+(k^$&(T^k))+F[10]+4294925233&4294967295,O=$+(B<<17&4294967295|B>>>15),B=k+(T^O&($^T))+F[11]+2304563134&4294967295,k=O+(B<<22&4294967295|B>>>10),B=T+($^k&(O^$))+F[12]+1804603682&4294967295,T=k+(B<<7&4294967295|B>>>25),B=$+(O^T&(k^O))+F[13]+4254626195&4294967295,$=T+(B<<12&4294967295|B>>>20),B=O+(k^$&(T^k))+F[14]+2792965006&4294967295,O=$+(B<<17&4294967295|B>>>15),B=k+(T^O&($^T))+F[15]+1236535329&4294967295,k=O+(B<<22&4294967295|B>>>10),B=T+(O^$&(k^O))+F[1]+4129170786&4294967295,T=k+(B<<5&4294967295|B>>>27),B=$+(k^O&(T^k))+F[6]+3225465664&4294967295,$=T+(B<<9&4294967295|B>>>23),B=O+(T^k&($^T))+F[11]+643717713&4294967295,O=$+(B<<14&4294967295|B>>>18),B=k+($^T&(O^$))+F[0]+3921069994&4294967295,k=O+(B<<20&4294967295|B>>>12),B=T+(O^$&(k^O))+F[5]+3593408605&4294967295,T=k+(B<<5&4294967295|B>>>27),B=$+(k^O&(T^k))+F[10]+38016083&4294967295,$=T+(B<<9&4294967295|B>>>23),B=O+(T^k&($^T))+F[15]+3634488961&4294967295,O=$+(B<<14&4294967295|B>>>18),B=k+($^T&(O^$))+F[4]+3889429448&4294967295,k=O+(B<<20&4294967295|B>>>12),B=T+(O^$&(k^O))+F[9]+568446438&4294967295,T=k+(B<<5&4294967295|B>>>27),B=$+(k^O&(T^k))+F[14]+3275163606&4294967295,$=T+(B<<9&4294967295|B>>>23),B=O+(T^k&($^T))+F[3]+4107603335&4294967295,O=$+(B<<14&4294967295|B>>>18),B=k+($^T&(O^$))+F[8]+1163531501&4294967295,k=O+(B<<20&4294967295|B>>>12),B=T+(O^$&(k^O))+F[13]+2850285829&4294967295,T=k+(B<<5&4294967295|B>>>27),B=$+(k^O&(T^k))+F[2]+4243563512&4294967295,$=T+(B<<9&4294967295|B>>>23),B=O+(T^k&($^T))+F[7]+1735328473&4294967295,O=$+(B<<14&4294967295|B>>>18),B=k+($^T&(O^$))+F[12]+2368359562&4294967295,k=O+(B<<20&4294967295|B>>>12),B=T+(k^O^$)+F[5]+4294588738&4294967295,T=k+(B<<4&4294967295|B>>>28),B=$+(T^k^O)+F[8]+2272392833&4294967295,$=T+(B<<11&4294967295|B>>>21),B=O+($^T^k)+F[11]+1839030562&4294967295,O=$+(B<<16&4294967295|B>>>16),B=k+(O^$^T)+F[14]+4259657740&4294967295,k=O+(B<<23&4294967295|B>>>9),B=T+(k^O^$)+F[1]+2763975236&4294967295,T=k+(B<<4&4294967295|B>>>28),B=$+(T^k^O)+F[4]+1272893353&4294967295,$=T+(B<<11&4294967295|B>>>21),B=O+($^T^k)+F[7]+4139469664&4294967295,O=$+(B<<16&4294967295|B>>>16),B=k+(O^$^T)+F[10]+3200236656&4294967295,k=O+(B<<23&4294967295|B>>>9),B=T+(k^O^$)+F[13]+681279174&4294967295,T=k+(B<<4&4294967295|B>>>28),B=$+(T^k^O)+F[0]+3936430074&4294967295,$=T+(B<<11&4294967295|B>>>21),B=O+($^T^k)+F[3]+3572445317&4294967295,O=$+(B<<16&4294967295|B>>>16),B=k+(O^$^T)+F[6]+76029189&4294967295,k=O+(B<<23&4294967295|B>>>9),B=T+(k^O^$)+F[9]+3654602809&4294967295,T=k+(B<<4&4294967295|B>>>28),B=$+(T^k^O)+F[12]+3873151461&4294967295,$=T+(B<<11&4294967295|B>>>21),B=O+($^T^k)+F[15]+530742520&4294967295,O=$+(B<<16&4294967295|B>>>16),B=k+(O^$^T)+F[2]+3299628645&4294967295,k=O+(B<<23&4294967295|B>>>9),B=T+(O^(k|~$))+F[0]+4096336452&4294967295,T=k+(B<<6&4294967295|B>>>26),B=$+(k^(T|~O))+F[7]+1126891415&4294967295,$=T+(B<<10&4294967295|B>>>22),B=O+(T^($|~k))+F[14]+2878612391&4294967295,O=$+(B<<15&4294967295|B>>>17),B=k+($^(O|~T))+F[5]+4237533241&4294967295,k=O+(B<<21&4294967295|B>>>11),B=T+(O^(k|~$))+F[12]+1700485571&4294967295,T=k+(B<<6&4294967295|B>>>26),B=$+(k^(T|~O))+F[3]+2399980690&4294967295,$=T+(B<<10&4294967295|B>>>22),B=O+(T^($|~k))+F[10]+4293915773&4294967295,O=$+(B<<15&4294967295|B>>>17),B=k+($^(O|~T))+F[1]+2240044497&4294967295,k=O+(B<<21&4294967295|B>>>11),B=T+(O^(k|~$))+F[8]+1873313359&4294967295,T=k+(B<<6&4294967295|B>>>26),B=$+(k^(T|~O))+F[15]+4264355552&4294967295,$=T+(B<<10&4294967295|B>>>22),B=O+(T^($|~k))+F[6]+2734768916&4294967295,O=$+(B<<15&4294967295|B>>>17),B=k+($^(O|~T))+F[13]+1309151649&4294967295,k=O+(B<<21&4294967295|B>>>11),B=T+(O^(k|~$))+F[4]+4149444226&4294967295,T=k+(B<<6&4294967295|B>>>26),B=$+(k^(T|~O))+F[11]+3174756917&4294967295,$=T+(B<<10&4294967295|B>>>22),B=O+(T^($|~k))+F[2]+718787259&4294967295,O=$+(B<<15&4294967295|B>>>17),B=k+($^(O|~T))+F[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(O+(B<<21&4294967295|B>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+$&4294967295}n.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var k=T-this.blockSize,F=this.B,O=this.h,$=0;$<T;){if(O==0)for(;$<=k;)a(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<T;)if(F[O++]=A.charCodeAt($++),O==this.blockSize){a(this,F),O=0;break}}else for(;$<T;)if(F[O++]=A[$++],O==this.blockSize){a(this,F),O=0;break}}this.h=O,this.o+=T},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var k=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=k&255,k/=256;for(this.u(A),A=Array(16),T=k=0;4>T;++T)for(var F=0;32>F;F+=8)A[k++]=this.g[T]>>>F&255;return A};function i(A,T){var k=c;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=T(A)}function o(A,T){this.h=T;for(var k=[],F=!0,O=A.length-1;0<=O;O--){var $=A[O]|0;F&&$==T||(k[O]=$,F=!1)}this.g=k}var c={};function d(A){return-128<=A&&128>A?i(A,function(T){return new o([T|0],0>T?-1:0)}):new o([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return S(h(-A));for(var T=[],k=1,F=0;A>=k;F++)T[F]=A/k|0,k*=4294967296;return new o(T,0)}function p(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return S(p(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=h(Math.pow(T,8)),F=m,O=0;O<A.length;O+=8){var $=Math.min(8,A.length-O),B=parseInt(A.substring(O,O+$),T);8>$?($=h(Math.pow(T,$)),F=F.j($).add(h(B))):(F=F.j(k),F=F.add(h(B)))}return F}var m=d(0),x=d(1),y=d(16777216);t=o.prototype,t.m=function(){if(N(this))return-S(this).m();for(var A=0,T=1,k=0;k<this.g.length;k++){var F=this.i(k);A+=(0<=F?F:4294967296+F)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(N(this))return"-"+S(this).toString(A);for(var T=h(Math.pow(A,6)),k=this,F="";;){var O=L(k,T).g;k=E(k,O.j(T));var $=((0<k.g.length?k.g[0]:k.h)>>>0).toString(A);if(k=O,w(k))return $+F;for(;6>$.length;)$="0"+$;F=$+F}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function N(A){return A.h==-1}t.l=function(A){return A=E(this,A),N(A)?-1:w(A)?0:1};function S(A){for(var T=A.g.length,k=[],F=0;F<T;F++)k[F]=~A.g[F];return new o(k,~A.h).add(x)}t.abs=function(){return N(this)?S(this):this},t.add=function(A){for(var T=Math.max(this.g.length,A.g.length),k=[],F=0,O=0;O<=T;O++){var $=F+(this.i(O)&65535)+(A.i(O)&65535),B=($>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);F=B>>>16,$&=65535,B&=65535,k[O]=B<<16|$}return new o(k,k[k.length-1]&-2147483648?-1:0)};function E(A,T){return A.add(S(T))}t.j=function(A){if(w(this)||w(A))return m;if(N(this))return N(A)?S(this).j(S(A)):S(S(this).j(A));if(N(A))return S(this.j(S(A)));if(0>this.l(y)&&0>A.l(y))return h(this.m()*A.m());for(var T=this.g.length+A.g.length,k=[],F=0;F<2*T;F++)k[F]=0;for(F=0;F<this.g.length;F++)for(var O=0;O<A.g.length;O++){var $=this.i(F)>>>16,B=this.i(F)&65535,G=A.i(O)>>>16,Q=A.i(O)&65535;k[2*F+2*O]+=B*Q,C(k,2*F+2*O),k[2*F+2*O+1]+=$*Q,C(k,2*F+2*O+1),k[2*F+2*O+1]+=B*G,C(k,2*F+2*O+1),k[2*F+2*O+2]+=$*G,C(k,2*F+2*O+2)}for(F=0;F<T;F++)k[F]=k[2*F+1]<<16|k[2*F];for(F=T;F<2*T;F++)k[F]=0;return new o(k,0)};function C(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function M(A,T){this.g=A,this.h=T}function L(A,T){if(w(T))throw Error("division by zero");if(w(A))return new M(m,m);if(N(A))return T=L(S(A),T),new M(S(T.g),S(T.h));if(N(T))return T=L(A,S(T)),new M(S(T.g),T.h);if(30<A.g.length){if(N(A)||N(T))throw Error("slowDivide_ only works with positive integers.");for(var k=x,F=T;0>=F.l(A);)k=I(k),F=I(F);var O=R(k,1),$=R(F,1);for(F=R(F,2),k=R(k,2);!w(F);){var B=$.add(F);0>=B.l(A)&&(O=O.add(k),$=B),F=R(F,1),k=R(k,1)}return T=E(A,O.j(T)),new M(O,T)}for(O=m;0<=A.l(T);){for(k=Math.max(1,Math.floor(A.m()/T.m())),F=Math.ceil(Math.log(k)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),$=h(k),B=$.j(T);N(B)||0<B.l(A);)k-=F,$=h(k),B=$.j(T);w($)&&($=x),O=O.add($),A=E(A,B)}return new M(O,A)}t.A=function(A){return L(this,A).h},t.and=function(A){for(var T=Math.max(this.g.length,A.g.length),k=[],F=0;F<T;F++)k[F]=this.i(F)&A.i(F);return new o(k,this.h&A.h)},t.or=function(A){for(var T=Math.max(this.g.length,A.g.length),k=[],F=0;F<T;F++)k[F]=this.i(F)|A.i(F);return new o(k,this.h|A.h)},t.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),k=[],F=0;F<T;F++)k[F]=this.i(F)^A.i(F);return new o(k,this.h^A.h)};function I(A){for(var T=A.g.length+1,k=[],F=0;F<T;F++)k[F]=A.i(F)<<1|A.i(F-1)>>>31;return new o(k,A.h)}function R(A,T){var k=T>>5;T%=32;for(var F=A.g.length-k,O=[],$=0;$<F;$++)O[$]=0<T?A.i($+k)>>>T|A.i($+k+1)<<32-T:A.i($+k);return new o(O,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,yF=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Gd=o}).apply(typeof fI<"u"?fI:typeof self<"u"?self:typeof window<"u"?window:{});var xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vF,ym,bF,cv,_j,wF,SF,NF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,P,V){return v==Array.prototype||v==Object.prototype||(v[P]=V.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof xy=="object"&&xy];for(var P=0;P<v.length;++P){var V=v[P];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function a(v,P){if(P)e:{var V=n;v=v.split(".");for(var ee=0;ee<v.length-1;ee++){var je=v[ee];if(!(je in V))break e;V=V[je]}v=v[v.length-1],ee=V[v],P=P(ee),P!=ee&&P!=null&&e(V,v,{configurable:!0,writable:!0,value:P})}}function i(v,P){v instanceof String&&(v+="");var V=0,ee=!1,je={next:function(){if(!ee&&V<v.length){var Ve=V++;return{value:P(Ve,v[Ve]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return je[Symbol.iterator]=function(){return je},je}a("Array.prototype.values",function(v){return v||function(){return i(this,function(P,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(v){var P=typeof v;return P=P!="object"?P:v?Array.isArray(v)?"array":P:"null",P=="array"||P=="object"&&typeof v.length=="number"}function h(v){var P=typeof v;return P=="object"&&v!=null||P=="function"}function p(v,P,V){return v.call.apply(v.bind,arguments)}function m(v,P,V){if(!v)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var je=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(je,ee),v.apply(P,je)}}return function(){return v.apply(P,arguments)}}function x(v,P,V){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,x.apply(null,arguments)}function y(v,P){var V=Array.prototype.slice.call(arguments,1);return function(){var ee=V.slice();return ee.push.apply(ee,arguments),v.apply(this,ee)}}function w(v,P){function V(){}V.prototype=P.prototype,v.aa=P.prototype,v.prototype=new V,v.prototype.constructor=v,v.Qb=function(ee,je,Ve){for(var yt=Array(arguments.length-2),sn=2;sn<arguments.length;sn++)yt[sn-2]=arguments[sn];return P.prototype[je].apply(ee,yt)}}function N(v){const P=v.length;if(0<P){const V=Array(P);for(let ee=0;ee<P;ee++)V[ee]=v[ee];return V}return[]}function S(v,P){for(let V=1;V<arguments.length;V++){const ee=arguments[V];if(d(ee)){const je=v.length||0,Ve=ee.length||0;v.length=je+Ve;for(let yt=0;yt<Ve;yt++)v[je+yt]=ee[yt]}else v.push(ee)}}class E{constructor(P,V){this.i=P,this.j=V,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function C(v){return/^[\s\xa0]*$/.test(v)}function M(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function L(v){return L[" "](v),v}L[" "]=function(){};var I=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function R(v,P,V){for(const ee in v)P.call(V,v[ee],ee,v)}function A(v,P){for(const V in v)P.call(void 0,v[V],V,v)}function T(v){const P={};for(const V in v)P[V]=v[V];return P}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(v,P){let V,ee;for(let je=1;je<arguments.length;je++){ee=arguments[je];for(V in ee)v[V]=ee[V];for(let Ve=0;Ve<k.length;Ve++)V=k[Ve],Object.prototype.hasOwnProperty.call(ee,V)&&(v[V]=ee[V])}}function O(v){var P=1;v=v.split(":");const V=[];for(;0<P&&v.length;)V.push(v.shift()),P--;return v.length&&V.push(v.join(":")),V}function $(v){c.setTimeout(()=>{throw v},0)}function B(){var v=ae;let P=null;return v.g&&(P=v.g,v.g=v.g.next,v.g||(v.h=null),P.next=null),P}class G{constructor(){this.h=this.g=null}add(P,V){const ee=Q.get();ee.set(P,V),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var Q=new E(()=>new H,v=>v.reset());class H{constructor(){this.next=this.g=this.h=null}set(P,V){this.h=P,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let K,te=!1,ae=new G,ce=()=>{const v=c.Promise.resolve(void 0);K=()=>{v.then(X)}};var X=()=>{for(var v;v=B();){try{v.h.call(v.g)}catch(V){$(V)}var P=Q;P.j(v),100>P.h&&(P.h++,v.next=P.g,P.g=v)}te=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(v,P){this.type=v,this.g=this.target=P,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,P=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};c.addEventListener("test",V,P),c.removeEventListener("test",V,P)}catch{}return v})();function pe(v,P){if(ne.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var V=this.type=v.type,ee=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=P,P=v.relatedTarget){if(I){e:{try{L(P.nodeName);var je=!0;break e}catch{}je=!1}je||(P=null)}}else V=="mouseover"?P=v.fromElement:V=="mouseout"&&(P=v.toElement);this.relatedTarget=P,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Be[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&pe.aa.h.call(this)}}w(pe,ne);var Be={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),He=0;function Ne(v,P,V,ee,je){this.listener=v,this.proxy=null,this.src=P,this.type=V,this.capture=!!ee,this.ha=je,this.key=++He,this.da=this.fa=!1}function We(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Y(v){this.src=v,this.g={},this.h=0}Y.prototype.add=function(v,P,V,ee,je){var Ve=v.toString();v=this.g[Ve],v||(v=this.g[Ve]=[],this.h++);var yt=be(v,P,ee,je);return-1<yt?(P=v[yt],V||(P.fa=!1)):(P=new Ne(P,this.src,Ve,!!ee,je),P.fa=V,v.push(P)),P};function re(v,P){var V=P.type;if(V in v.g){var ee=v.g[V],je=Array.prototype.indexOf.call(ee,P,void 0),Ve;(Ve=0<=je)&&Array.prototype.splice.call(ee,je,1),Ve&&(We(P),v.g[V].length==0&&(delete v.g[V],v.h--))}}function be(v,P,V,ee){for(var je=0;je<v.length;++je){var Ve=v[je];if(!Ve.da&&Ve.listener==P&&Ve.capture==!!V&&Ve.ha==ee)return je}return-1}var we="closure_lm_"+(1e6*Math.random()|0),Ye={};function nt(v,P,V,ee,je){if(Array.isArray(P)){for(var Ve=0;Ve<P.length;Ve++)nt(v,P[Ve],V,ee,je);return null}return V=jt(V),v&&v[Ge]?v.K(P,V,h(ee)?!!ee.capture:!1,je):Ot(v,P,V,!1,ee,je)}function Ot(v,P,V,ee,je,Ve){if(!P)throw Error("Invalid event type");var yt=h(je)?!!je.capture:!!je,sn=de(v);if(sn||(v[we]=sn=new Y(v)),V=sn.add(P,V,ee,yt,Ve),V.proxy)return V;if(ee=Ee(),V.proxy=ee,ee.src=v,ee.listener=V,v.addEventListener)ve||(je=yt),je===void 0&&(je=!1),v.addEventListener(P.toString(),ee,je);else if(v.attachEvent)v.attachEvent(wt(P.toString()),ee);else if(v.addListener&&v.removeListener)v.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Ee(){function v(V){return P.call(v.src,v.listener,V)}const P=zt;return v}function ut(v,P,V,ee,je){if(Array.isArray(P))for(var Ve=0;Ve<P.length;Ve++)ut(v,P[Ve],V,ee,je);else ee=h(ee)?!!ee.capture:!!ee,V=jt(V),v&&v[Ge]?(v=v.i,P=String(P).toString(),P in v.g&&(Ve=v.g[P],V=be(Ve,V,ee,je),-1<V&&(We(Ve[V]),Array.prototype.splice.call(Ve,V,1),Ve.length==0&&(delete v.g[P],v.h--)))):v&&(v=de(v))&&(P=v.g[P.toString()],v=-1,P&&(v=be(P,V,ee,je)),(V=-1<v?P[v]:null)&&Nt(V))}function Nt(v){if(typeof v!="number"&&v&&!v.da){var P=v.src;if(P&&P[Ge])re(P.i,v);else{var V=v.type,ee=v.proxy;P.removeEventListener?P.removeEventListener(V,ee,v.capture):P.detachEvent?P.detachEvent(wt(V),ee):P.addListener&&P.removeListener&&P.removeListener(ee),(V=de(P))?(re(V,v),V.h==0&&(V.src=null,P[we]=null)):We(v)}}}function wt(v){return v in Ye?Ye[v]:Ye[v]="on"+v}function zt(v,P){if(v.da)v=!0;else{P=new pe(P,this);var V=v.listener,ee=v.ha||v.src;v.fa&&Nt(v),v=V.call(ee,P)}return v}function de(v){return v=v[we],v instanceof Y?v:null}var Fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function jt(v){return typeof v=="function"?v:(v[Fe]||(v[Fe]=function(P){return v.handleEvent(P)}),v[Fe])}function qe(){ie.call(this),this.i=new Y(this),this.M=this,this.F=null}w(qe,ie),qe.prototype[Ge]=!0,qe.prototype.removeEventListener=function(v,P,V,ee){ut(this,v,P,V,ee)};function Ze(v,P){var V,ee=v.F;if(ee)for(V=[];ee;ee=ee.F)V.push(ee);if(v=v.M,ee=P.type||P,typeof P=="string")P=new ne(P,v);else if(P instanceof ne)P.target=P.target||v;else{var je=P;P=new ne(ee,v),F(P,je)}if(je=!0,V)for(var Ve=V.length-1;0<=Ve;Ve--){var yt=P.g=V[Ve];je=At(yt,ee,!0,P)&&je}if(yt=P.g=v,je=At(yt,ee,!0,P)&&je,je=At(yt,ee,!1,P)&&je,V)for(Ve=0;Ve<V.length;Ve++)yt=P.g=V[Ve],je=At(yt,ee,!1,P)&&je}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var v=this.i,P;for(P in v.g){for(var V=v.g[P],ee=0;ee<V.length;ee++)We(V[ee]);delete v.g[P],v.h--}}this.F=null},qe.prototype.K=function(v,P,V,ee){return this.i.add(String(v),P,!1,V,ee)},qe.prototype.L=function(v,P,V,ee){return this.i.add(String(v),P,!0,V,ee)};function At(v,P,V,ee){if(P=v.i.g[String(P)],!P)return!0;P=P.concat();for(var je=!0,Ve=0;Ve<P.length;++Ve){var yt=P[Ve];if(yt&&!yt.da&&yt.capture==V){var sn=yt.listener,Na=yt.ha||yt.src;yt.fa&&re(v.i,yt),je=sn.call(Na,ee)!==!1&&je}}return je&&!ee.defaultPrevented}function St(v,P,V){if(typeof v=="function")V&&(v=x(v,V));else if(v&&typeof v.handleEvent=="function")v=x(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:c.setTimeout(v,P||0)}function lr(v){v.g=St(()=>{v.g=null,v.i&&(v.i=!1,lr(v))},v.l);const P=v.h;v.h=null,v.m.apply(null,P)}class ye extends ie{constructor(P,V){super(),this.m=P,this.l=V,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:lr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function it(v){ie.call(this),this.h=v,this.g={}}w(it,ie);var xt=[];function Dt(v){R(v.g,function(P,V){this.g.hasOwnProperty(V)&&Nt(P)},v),v.g={}}it.prototype.N=function(){it.aa.N.call(this),Dt(this)},it.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pt=c.JSON.stringify,rt=c.JSON.parse,Le=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function et(){}et.prototype.h=null;function lt(v){return v.h||(v.h=v.i())}function Ft(){}var Wt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qt(){ne.call(this,"d")}w(Qt,ne);function Gt(){ne.call(this,"c")}w(Gt,ne);var Et={},Hr=null;function un(){return Hr=Hr||new qe}Et.La="serverreachability";function gn(v){ne.call(this,Et.La,v)}w(gn,ne);function Dr(v){const P=un();Ze(P,new gn(P))}Et.STAT_EVENT="statevent";function kn(v,P){ne.call(this,Et.STAT_EVENT,v),this.stat=P}w(kn,ne);function gr(v){const P=un();Ze(P,new kn(P,v))}Et.Ma="timingevent";function ha(v,P){ne.call(this,Et.Ma,v),this.size=P}w(ha,ne);function xn(v,P){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},P)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function ci(v,P,V,ee,je,Ve){v.info(function(){if(v.g)if(Ve)for(var yt="",sn=Ve.split("&"),Na=0;Na<sn.length;Na++){var jr=sn[Na].split("=");if(1<jr.length){var Za=jr[0];jr=jr[1];var ei=Za.split("_");yt=2<=ei.length&&ei[1]=="type"?yt+(Za+"="+jr+"&"):yt+(Za+"=redacted&")}}else yt=null;else yt=Ve;return"XMLHTTP REQ ("+ee+") [attempt "+je+"]: "+P+`
`+V+`
`+yt})}function yn(v,P,V,ee,je,Ve,yt){v.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+je+"]: "+P+`
`+V+`
`+Ve+" "+yt})}function Pr(v,P,V,ee){v.info(function(){return"XMLHTTP TEXT ("+P+"): "+aa(v,V)+(ee?" "+ee:"")})}function Ya(v,P){v.info(function(){return"TIMEOUT: "+P})}Ln.prototype.info=function(){};function aa(v,P){if(!v.g)return P;if(!P)return null;try{var V=JSON.parse(P);if(V){for(v=0;v<V.length;v++)if(Array.isArray(V[v])){var ee=V[v];if(!(2>ee.length)){var je=ee[1];if(Array.isArray(je)&&!(1>je.length)){var Ve=je[0];if(Ve!="noop"&&Ve!="stop"&&Ve!="close")for(var yt=1;yt<je.length;yt++)je[yt]=""}}}}return Pt(V)}catch{return P}}var Jr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wn;function Pa(){}w(Pa,et),Pa.prototype.g=function(){return new XMLHttpRequest},Pa.prototype.i=function(){return{}},Wn=new Pa;function Ja(v,P,V,ee){this.j=v,this.i=P,this.l=V,this.R=ee||1,this.U=new it(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ci}function Ci(){this.i=null,this.g="",this.h=!1}var ps={},wi={};function kt(v,P,V){v.L=1,v.v=xe(It(P)),v.m=V,v.P=!0,fe(v,null)}function fe(v,P){v.F=Date.now(),nr(v),v.A=It(v.v);var V=v.A,ee=v.R;Array.isArray(ee)||(ee=[String(ee)]),ys(V.i,"t",ee),v.C=0,V=v.j.J,v.h=new Ci,v.g=l1(v.j,V?P:null,!v.m),0<v.O&&(v.M=new ye(x(v.Y,v,v.g),v.O)),P=v.U,V=v.g,ee=v.ca;var je="readystatechange";Array.isArray(je)||(je&&(xt[0]=je.toString()),je=xt);for(var Ve=0;Ve<je.length;Ve++){var yt=nt(V,je[Ve],ee||P.handleEvent,!1,P.h||P);if(!yt)break;P.g[yt.key]=yt}P=v.H?T(v.H):{},v.m?(v.u||(v.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,P)):(v.u="GET",v.g.ea(v.A,v.u,null,P)),Dr(),ci(v.i,v.u,v.A,v.l,v.R,v.m)}Ja.prototype.ca=function(v){v=v.target;const P=this.M;P&&Oi(v)==3?P.j():this.Y(v)},Ja.prototype.Y=function(v){try{if(v==this.g)e:{const ei=Oi(this.g);var P=this.g.Ba();const Rc=this.g.Z();if(!(3>ei)&&(ei!=3||this.g&&(this.h.h||this.g.oa()||td(this.g)))){this.J||ei!=4||P==7||(P==8||0>=Rc?Dr(3):Dr(2)),dn(this);var V=this.g.Z();this.X=V;t:if(at(this)){var ee=td(this.g);v="";var je=ee.length,Ve=Oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),Zr(this);var yt="";break t}this.h.i=new c.TextDecoder}for(P=0;P<je;P++)this.h.h=!0,v+=this.h.i.decode(ee[P],{stream:!(Ve&&P==je-1)});ee.length=0,this.h.g+=v,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=V==200,yn(this.i,this.u,this.A,this.l,this.R,ei,V),this.o){if(this.T&&!this.K){t:{if(this.g){var sn,Na=this.g;if((sn=Na.g?Na.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(sn)){var jr=sn;break t}}jr=null}if(V=jr)Pr(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lr(this,V);else{this.o=!1,this.s=3,gr(12),bn(this),Zr(this);break e}}if(this.P){V=!0;let Wi;for(;!this.J&&this.C<yt.length;)if(Wi=ft(this,yt),Wi==wi){ei==4&&(this.s=4,gr(14),V=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wi==ps){this.s=4,gr(15),Pr(this.i,this.l,yt,"[Invalid Chunk]"),V=!1;break}else Pr(this.i,this.l,Wi,null),Lr(this,Wi);if(at(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ei!=4||yt.length!=0||this.h.h||(this.s=1,gr(16),V=!1),this.o=this.o&&V,!V)Pr(this.i,this.l,yt,"[Invalid Chunked Response]"),bn(this),Zr(this);else if(0<yt.length&&!this.W){this.W=!0;var Za=this.j;Za.g==this&&Za.ba&&!Za.M&&(Za.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),hp(Za),Za.M=!0,gr(11))}}else Pr(this.i,this.l,yt,null),Lr(this,yt);ei==4&&bn(this),this.o&&!this.J&&(ei==4?i1(this.j,this):(this.o=!1,nr(this)))}else Zx(this.g),V==400&&0<yt.indexOf("Unknown SID")?(this.s=3,gr(12)):(this.s=0,gr(13)),bn(this),Zr(this)}}}catch{}finally{}};function at(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function ft(v,P){var V=v.C,ee=P.indexOf(`
`,V);return ee==-1?wi:(V=Number(P.substring(V,ee)),isNaN(V)?ps:(ee+=1,ee+V>P.length?wi:(P=P.slice(ee,ee+V),v.C=ee+V,P)))}Ja.prototype.cancel=function(){this.J=!0,bn(this)};function nr(v){v.S=Date.now()+v.I,vr(v,v.I)}function vr(v,P){if(v.B!=null)throw Error("WatchDog timer not null");v.B=xn(x(v.ba,v),P)}function dn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Ja.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(Ya(this.i,this.A),this.L!=2&&(Dr(),gr(17)),bn(this),this.s=2,Zr(this)):vr(this,this.S-v)};function Zr(v){v.j.G==0||v.J||i1(v.j,v)}function bn(v){dn(v);var P=v.M;P&&typeof P.ma=="function"&&P.ma(),v.M=null,Dt(v.U),v.g&&(P=v.g,v.g=null,P.abort(),P.ma())}function Lr(v,P){try{var V=v.j;if(V.G!=0&&(V.g==v||gs(V.h,v))){if(!v.K&&gs(V.h,v)&&V.G==3){try{var ee=V.Da.g.parse(P)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var je=ee;if(je[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<v.F)Oc(V),Cc(V);else break e;dp(V),gr(18)}}else V.za=je[1],0<V.za-V.T&&37500>je[2]&&V.F&&V.v==0&&!V.C&&(V.C=xn(x(V.Za,V),6e3));if(1>=vl(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else wl(V,11)}else if((v.K||V.g==v)&&Oc(V),!C(P))for(je=V.Da.g.parse(P),P=0;P<je.length;P++){let jr=je[P];if(V.T=jr[0],jr=jr[1],V.G==2)if(jr[0]=="c"){V.K=jr[1],V.ia=jr[2];const Za=jr[3];Za!=null&&(V.la=Za,V.j.info("VER="+V.la));const ei=jr[4];ei!=null&&(V.Aa=ei,V.j.info("SVER="+V.Aa));const Rc=jr[5];Rc!=null&&typeof Rc=="number"&&0<Rc&&(ee=1.5*Rc,V.L=ee,V.j.info("backChannelRequestTimeoutMs_="+ee)),ee=V;const Wi=v.g;if(Wi){const ad=Wi.g?Wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ad){var Ve=ee.h;Ve.g||ad.indexOf("spdy")==-1&&ad.indexOf("quic")==-1&&ad.indexOf("h2")==-1||(Ve.j=Ve.l,Ve.g=new Set,Ve.h&&(xs(Ve,Ve.h),Ve.h=null))}if(ee.D){const Sl=Wi.g?Wi.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(ee.ya=Sl,oe(ee.I,ee.D,Sl))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-v.F,V.j.info("Handshake RTT: "+V.R+"ms")),ee=V;var yt=v;if(ee.qa=o1(ee,ee.J?ee.ia:null,ee.W),yt.K){La(ee.h,yt);var sn=yt,Na=ee.L;Na&&(sn.I=Na),sn.B&&(dn(sn),nr(sn)),ee.g=yt}else n1(ee);0<V.i.length&&R0(V)}else jr[0]!="stop"&&jr[0]!="close"||wl(V,7);else V.G==3&&(jr[0]=="stop"||jr[0]=="close"?jr[0]=="stop"?wl(V,7):cp(V):jr[0]!="noop"&&V.l&&V.l.ta(jr),V.v=0)}}Dr(4)}catch{}}var $s=class{constructor(v,P){this.g=v,this.map=P}};function ms(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mo(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function vl(v){return v.h?1:v.g?v.g.size:0}function gs(v,P){return v.h?v.h==P:v.g?v.g.has(P):!1}function xs(v,P){v.g?v.g.add(P):v.h=P}function La(v,P){v.h&&v.h==P?v.h=null:v.g&&v.g.has(P)&&v.g.delete(P)}ms.prototype.cancel=function(){if(this.i=Sa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Sa(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let P=v.i;for(const V of v.g.values())P=P.concat(V.D);return P}return N(v.i)}function q(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var P=[],V=v.length,ee=0;ee<V;ee++)P.push(v[ee]);return P}P=[],V=0;for(ee in v)P[V++]=v[ee];return P}function Se(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var P=[];v=v.length;for(var V=0;V<v;V++)P.push(V);return P}P=[],V=0;for(const ee in v)P[V++]=ee;return P}}}function Te(v,P){if(v.forEach&&typeof v.forEach=="function")v.forEach(P,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,P,void 0);else for(var V=Se(v),ee=q(v),je=ee.length,Ve=0;Ve<je;Ve++)P.call(void 0,ee[Ve],V&&V[Ve],v)}var ke=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(v,P){if(v){v=v.split("&");for(var V=0;V<v.length;V++){var ee=v[V].indexOf("="),je=null;if(0<=ee){var Ve=v[V].substring(0,ee);je=v[V].substring(ee+1)}else Ve=v[V];P(Ve,je?decodeURIComponent(je.replace(/\+/g," ")):"")}}}function Bt(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Bt){this.h=v.h,ar(this,v.j),this.o=v.o,this.g=v.g,Er(this,v.s),this.l=v.l;var P=v.i,V=new On;V.i=P.i,P.g&&(V.g=new Map(P.g),V.h=P.h),an(this,V),this.m=v.m}else v&&(P=String(v).match(ke))?(this.h=!1,ar(this,P[1]||"",!0),this.o=$e(P[2]||""),this.g=$e(P[3]||"",!0),Er(this,P[4]),this.l=$e(P[5]||"",!0),an(this,P[6]||"",!0),this.m=$e(P[7]||"")):(this.h=!1,this.i=new On(null,this.h))}Bt.prototype.toString=function(){var v=[],P=this.j;P&&v.push(Pe(P,cr,!0),":");var V=this.g;return(V||P=="file")&&(v.push("//"),(P=this.o)&&v.push(Pe(P,cr,!0),"@"),v.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&v.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(Pe(V,V.charAt(0)=="/"?Cn:tr,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",Pe(V,zs)),v.join("")};function It(v){return new Bt(v)}function ar(v,P,V){v.j=V?$e(P,!0):P,v.j&&(v.j=v.j.replace(/:$/,""))}function Er(v,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);v.s=P}else v.s=null}function an(v,P,V){P instanceof On?(v.i=P,Xx(v.i,v.h)):(V||(P=Pe(P,Ba)),v.i=new On(P,v.h))}function oe(v,P,V){v.i.set(P,V)}function xe(v){return oe(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function $e(v,P){return v?P?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Pe(v,P,V){return typeof v=="string"?(v=encodeURI(v).replace(P,pt),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function pt(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var cr=/[#\/\?@]/g,tr=/[#\?:]/g,Cn=/[#\?]/g,Ba=/[#\?@]/g,zs=/#/g;function On(v,P){this.h=this.g=null,this.i=v||null,this.j=!!P}function wn(v){v.g||(v.g=new Map,v.h=0,v.i&&gt(v.i,function(P,V){v.add(decodeURIComponent(P.replace(/\+/g," ")),V)}))}t=On.prototype,t.add=function(v,P){wn(this),this.i=null,v=Si(this,v);var V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(P),this.h+=1,this};function Hi(v,P){wn(v),P=Si(v,P),v.g.has(P)&&(v.i=null,v.h-=v.g.get(P).length,v.g.delete(P))}function Nr(v,P){return wn(v),P=Si(v,P),v.g.has(P)}t.forEach=function(v,P){wn(this),this.g.forEach(function(V,ee){V.forEach(function(je){v.call(P,je,ee,this)},this)},this)},t.na=function(){wn(this);const v=Array.from(this.g.values()),P=Array.from(this.g.keys()),V=[];for(let ee=0;ee<P.length;ee++){const je=v[ee];for(let Ve=0;Ve<je.length;Ve++)V.push(P[ee])}return V},t.V=function(v){wn(this);let P=[];if(typeof v=="string")Nr(this,v)&&(P=P.concat(this.g.get(Si(this,v))));else{v=Array.from(this.g.values());for(let V=0;V<v.length;V++)P=P.concat(v[V])}return P},t.set=function(v,P){return wn(this),this.i=null,v=Si(this,v),Nr(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[P]),this.h+=1,this},t.get=function(v,P){return v?(v=this.V(v),0<v.length?String(v[0]):P):P};function ys(v,P,V){Hi(v,P),0<V.length&&(v.i=null,v.g.set(Si(v,P),N(V)),v.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],P=Array.from(this.g.keys());for(var V=0;V<P.length;V++){var ee=P[V];const Ve=encodeURIComponent(String(ee)),yt=this.V(ee);for(ee=0;ee<yt.length;ee++){var je=Ve;yt[ee]!==""&&(je+="="+encodeURIComponent(String(yt[ee]))),v.push(je)}}return this.i=v.join("&")};function Si(v,P){return P=String(P),v.j&&(P=P.toLowerCase()),P}function Xx(v,P){P&&!v.j&&(wn(v),v.i=null,v.g.forEach(function(V,ee){var je=ee.toLowerCase();ee!=je&&(Hi(this,ee),ys(this,je,V))},v)),v.j=P}function op(v,P){const V=new Ln;if(c.Image){const ee=new Image;ee.onload=y(Gi,V,"TestLoadImage: loaded",!0,P,ee),ee.onerror=y(Gi,V,"TestLoadImage: error",!1,P,ee),ee.onabort=y(Gi,V,"TestLoadImage: abort",!1,P,ee),ee.ontimeout=y(Gi,V,"TestLoadImage: timeout",!1,P,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=v}else P(!1)}function Yx(v,P){const V=new Ln,ee=new AbortController,je=setTimeout(()=>{ee.abort(),Gi(V,"TestPingServer: timeout",!1,P)},1e4);fetch(v,{signal:ee.signal}).then(Ve=>{clearTimeout(je),Ve.ok?Gi(V,"TestPingServer: ok",!0,P):Gi(V,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(je),Gi(V,"TestPingServer: error",!1,P)})}function Gi(v,P,V,ee,je){try{je&&(je.onload=null,je.onerror=null,je.onabort=null,je.ontimeout=null),ee(V)}catch{}}function go(){this.g=new Le}function lp(v,P,V){const ee=V||"";try{Te(v,function(je,Ve){let yt=je;h(je)&&(yt=Pt(je)),P.push(ee+Ve+"="+encodeURIComponent(yt))})}catch(je){throw P.push(ee+"type="+encodeURIComponent("_badmap")),je}}function $o(v){this.l=v.Ub||null,this.j=v.eb||!1}w($o,et),$o.prototype.g=function(){return new vs(this.l,this.j)},$o.prototype.i=(function(v){return function(){return v}})({});function vs(v,P){qe.call(this),this.D=v,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(vs,qe),t=vs.prototype,t.open=function(v,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=P,this.readyState=1,Tc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(P.body=v),(this.D||c).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zo(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Tc(this)),this.g&&(this.readyState=3,Tc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;O0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function O0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var P=v.value?v.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!v.done}))&&(this.response=this.responseText+=P)}v.done?zo(this):Tc(this),this.readyState==3&&O0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,zo(this))},t.Qa=function(v){this.g&&(this.response=v,zo(this))},t.ga=function(){this.g&&zo(this)};function zo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Tc(v)}t.setRequestHeader=function(v,P){this.u.append(v,P)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],P=this.h.entries();for(var V=P.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=P.next();return v.join(`\r
`)};function Tc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Zu(v){let P="";return R(v,function(V,ee){P+=ee,P+=":",P+=V,P+=`\r
`}),P}function Ac(v,P,V){e:{for(ee in V){var ee=!1;break e}ee=!0}ee||(V=Zu(V),typeof v=="string"?V!=null&&encodeURIComponent(String(V)):oe(v,P,V))}function Un(v){qe.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Un,qe);var Ni=/^https?$/i,bl=["POST","PUT"];t=Un.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,P,V,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);P=P?P.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wn.g(),this.v=this.o?lt(this.o):lt(Wn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(P,String(v),!0),this.B=!1}catch(Ve){ed(this,Ve);return}if(v=V||"",V=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var je in ee)V.set(je,ee[je]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Ve of ee.keys())V.set(Ve,ee.get(Ve));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(V.keys()).find(Ve=>Ve.toLowerCase()=="content-type"),je=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(bl,P,void 0))||ee||je||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ve,yt]of V)this.g.setRequestHeader(Ve,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{I0(this),this.u=!0,this.g.send(v),this.u=!1}catch(Ve){ed(this,Ve)}};function ed(v,P){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=P,v.m=5,Ec(v),kc(v)}function Ec(v){v.A||(v.A=!0,Ze(v,"complete"),Ze(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Ze(this,"complete"),Ze(this,"abort"),kc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kc(this,!0)),Un.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jx(this):this.bb())},t.bb=function(){Jx(this)};function Jx(v){if(v.h&&typeof o<"u"&&(!v.v[1]||Oi(v)!=4||v.Z()!=2)){if(v.u&&Oi(v)==4)St(v.Ea,0,v);else if(Ze(v,"readystatechange"),Oi(v)==4){v.h=!1;try{const yt=v.Z();e:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var V;if(!(V=P)){var ee;if(ee=yt===0){var je=String(v.D).match(ke)[1]||null;!je&&c.self&&c.self.location&&(je=c.self.location.protocol.slice(0,-1)),ee=!Ni.test(je?je.toLowerCase():"")}V=ee}if(V)Ze(v,"complete"),Ze(v,"success");else{v.m=6;try{var Ve=2<Oi(v)?v.g.statusText:""}catch{Ve=""}v.l=Ve+" ["+v.Z()+"]",Ec(v)}}finally{kc(v)}}}}function kc(v,P){if(v.g){I0(v);const V=v.g,ee=v.v[0]?()=>{}:null;v.g=null,v.v=null,P||Ze(v,"ready");try{V.onreadystatechange=ee}catch{}}}function I0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Oi(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var P=this.g.responseText;return v&&P.indexOf(v)==0&&(P=P.substring(v.length)),rt(P)}};function td(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Zx(v){const P={};v=(v.g&&2<=Oi(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<v.length;ee++){if(C(v[ee]))continue;var V=O(v[ee]);const je=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ve=P[je]||[];P[je]=Ve,Ve.push(V)}A(P,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rd(v,P,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||P}function e1(v){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rd("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rd("baseRetryDelayMs",5e3,v),this.cb=rd("retryDelaySeedMs",1e4,v),this.Wa=rd("forwardChannelMaxRetries",2,v),this.wa=rd("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(v&&v.concurrentRequestLimit),this.Da=new go,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=e1.prototype,t.la=8,t.G=1,t.connect=function(v,P,V,ee){gr(0),this.W=v,this.H=P||{},V&&ee!==void 0&&(this.H.OSID=V,this.H.OAID=ee),this.F=this.X,this.I=o1(this,null,this.W),R0(this)};function cp(v){if(t1(v),v.G==3){var P=v.U++,V=It(v.I);if(oe(V,"SID",v.K),oe(V,"RID",P),oe(V,"TYPE","terminate"),nd(v,V),P=new Ja(v,v.j,P),P.L=2,P.v=xe(It(V)),V=!1,c.navigator&&c.navigator.sendBeacon)try{V=c.navigator.sendBeacon(P.v.toString(),"")}catch{}!V&&c.Image&&(new Image().src=P.v,V=!0),V||(P.g=l1(P.j,null),P.g.ea(P.v)),P.F=Date.now(),nr(P)}fp(v)}function Cc(v){v.g&&(hp(v),v.g.cancel(),v.g=null)}function t1(v){Cc(v),v.u&&(c.clearTimeout(v.u),v.u=null),Oc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function R0(v){if(!mo(v.h)&&!v.s){v.s=!0;var P=v.Ga;K||ce(),te||(K(),te=!0),ae.add(P,v),v.B=0}}function s4(v,P){return vl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=P.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=xn(x(v.Ga,v,P),s1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const je=new Ja(this,this.j,v);let Ve=this.o;if(this.S&&(Ve?(Ve=T(Ve),F(Ve,this.S)):Ve=this.S),this.m!==null||this.O||(je.H=Ve,Ve=null),this.P)e:{for(var P=0,V=0;V<this.i.length;V++){t:{var ee=this.i[V];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(P+=ee,4096<P){P=V;break e}if(P===4096||V===this.i.length-1){P=V+1;break e}}P=1e3}else P=1e3;P=up(this,je,P),V=It(this.I),oe(V,"RID",v),oe(V,"CVER",22),this.D&&oe(V,"X-HTTP-Session-Id",this.D),nd(this,V),Ve&&(this.O?P="headers="+encodeURIComponent(String(Zu(Ve)))+"&"+P:this.m&&Ac(V,this.m,Ve)),xs(this.h,je),this.Ua&&oe(V,"TYPE","init"),this.P?(oe(V,"$req",P),oe(V,"SID","null"),je.T=!0,kt(je,V,null)):kt(je,V,P),this.G=2}}else this.G==3&&(v?r1(this,v):this.i.length==0||mo(this.h)||r1(this))};function r1(v,P){var V;P?V=P.l:V=v.U++;const ee=It(v.I);oe(ee,"SID",v.K),oe(ee,"RID",V),oe(ee,"AID",v.T),nd(v,ee),v.m&&v.o&&Ac(ee,v.m,v.o),V=new Ja(v,v.j,V,v.B+1),v.m===null&&(V.H=v.o),P&&(v.i=P.D.concat(v.i)),P=up(v,V,1e3),V.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),xs(v.h,V),kt(V,ee,P)}function nd(v,P){v.H&&R(v.H,function(V,ee){oe(P,ee,V)}),v.l&&Te({},function(V,ee){oe(P,ee,V)})}function up(v,P,V){V=Math.min(v.i.length,V);var ee=v.l?x(v.l.Na,v.l,v):null;e:{var je=v.i;let Ve=-1;for(;;){const yt=["count="+V];Ve==-1?0<V?(Ve=je[0].g,yt.push("ofs="+Ve)):Ve=0:yt.push("ofs="+Ve);let sn=!0;for(let Na=0;Na<V;Na++){let jr=je[Na].g;const Za=je[Na].map;if(jr-=Ve,0>jr)Ve=Math.max(0,je[Na].g-100),sn=!1;else try{lp(Za,yt,"req"+jr+"_")}catch{ee&&ee(Za)}}if(sn){ee=yt.join("&");break e}}}return v=v.i.splice(0,V),P.D=v,ee}function n1(v){if(!v.g&&!v.u){v.Y=1;var P=v.Fa;K||ce(),te||(K(),te=!0),ae.add(P,v),v.v=0}}function dp(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=xn(x(v.Fa,v),s1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,a1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=xn(x(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gr(10),Cc(this),a1(this))};function hp(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function a1(v){v.g=new Ja(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var P=It(v.qa);oe(P,"RID","rpc"),oe(P,"SID",v.K),oe(P,"AID",v.T),oe(P,"CI",v.F?"0":"1"),!v.F&&v.ja&&oe(P,"TO",v.ja),oe(P,"TYPE","xmlhttp"),nd(v,P),v.m&&v.o&&Ac(P,v.m,v.o),v.L&&(v.g.I=v.L);var V=v.g;v=v.ia,V.L=1,V.v=xe(It(P)),V.m=null,V.P=!0,fe(V,v)}t.Za=function(){this.C!=null&&(this.C=null,Cc(this),dp(this),gr(19))};function Oc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function i1(v,P){var V=null;if(v.g==P){Oc(v),hp(v),v.g=null;var ee=2}else if(gs(v.h,P))V=P.D,La(v.h,P),ee=1;else return;if(v.G!=0){if(P.o)if(ee==1){V=P.m?P.m.length:0,P=Date.now()-P.F;var je=v.B;ee=un(),Ze(ee,new ha(ee,V)),R0(v)}else n1(v);else if(je=P.s,je==3||je==0&&0<P.X||!(ee==1&&s4(v,P)||ee==2&&dp(v)))switch(V&&0<V.length&&(P=v.h,P.i=P.i.concat(V)),je){case 1:wl(v,5);break;case 4:wl(v,10);break;case 3:wl(v,6);break;default:wl(v,2)}}}function s1(v,P){let V=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(V*=2),V*P}function wl(v,P){if(v.j.info("Error code "+P),P==2){var V=x(v.fb,v),ee=v.Xa;const je=!ee;ee=new Bt(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ar(ee,"https"),xe(ee),je?op(ee.toString(),V):Yx(ee.toString(),V)}else gr(2);v.G=0,v.l&&v.l.sa(P),fp(v),t1(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),gr(2)):(this.j.info("Failed to ping google.com"),gr(1))};function fp(v){if(v.G=0,v.ka=[],v.l){const P=Sa(v.h);(P.length!=0||v.i.length!=0)&&(S(v.ka,P),S(v.ka,v.i),v.h.i.length=0,N(v.i),v.i.length=0),v.l.ra()}}function o1(v,P,V){var ee=V instanceof Bt?It(V):new Bt(V);if(ee.g!="")P&&(ee.g=P+"."+ee.g),Er(ee,ee.s);else{var je=c.location;ee=je.protocol,P=P?P+"."+je.hostname:je.hostname,je=+je.port;var Ve=new Bt(null);ee&&ar(Ve,ee),P&&(Ve.g=P),je&&Er(Ve,je),V&&(Ve.l=V),ee=Ve}return V=v.D,P=v.ya,V&&P&&oe(ee,V,P),oe(ee,"VER",v.la),nd(v,ee),ee}function l1(v,P,V){if(P&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=v.Ca&&!v.pa?new Un(new $o({eb:V})):new Un(v.pa),P.Ha(v.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function c1(){}t=c1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function M0(){}M0.prototype.g=function(v,P){return new Ii(v,P)};function Ii(v,P){qe.call(this),this.g=new e1(P),this.l=v,this.h=P&&P.messageUrlParams||null,v=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(v?v["X-WebChannel-Content-Type"]=P.messageContentType:v={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(v?v["X-WebChannel-Client-Profile"]=P.va:v={"X-WebChannel-Client-Profile":P.va}),this.g.S=v,(v=P&&P.Sb)&&!C(v)&&(this.g.m=v),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!C(P)&&(this.g.D=P,v=this.h,v!==null&&P in v&&(v=this.h,P in v&&delete v[P])),this.j=new Ic(this)}w(Ii,qe),Ii.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ii.prototype.close=function(){cp(this.g)},Ii.prototype.o=function(v){var P=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.u&&(V={},V.__data__=Pt(v),v=V);P.i.push(new $s(P.Ya++,v)),P.G==3&&R0(P)},Ii.prototype.N=function(){this.g.l=null,delete this.j,cp(this.g),delete this.g,Ii.aa.N.call(this)};function u1(v){Qt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var P=v.__sm__;if(P){e:{for(const V in P){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,P=P!==null&&v in P?P[v]:void 0),this.data=P}else this.data=v}w(u1,Qt);function d1(){Gt.call(this),this.status=1}w(d1,Gt);function Ic(v){this.g=v}w(Ic,c1),Ic.prototype.ua=function(){Ze(this.g,"a")},Ic.prototype.ta=function(v){Ze(this.g,new u1(v))},Ic.prototype.sa=function(v){Ze(this.g,new d1)},Ic.prototype.ra=function(){Ze(this.g,"b")},M0.prototype.createWebChannel=M0.prototype.g,Ii.prototype.send=Ii.prototype.o,Ii.prototype.open=Ii.prototype.m,Ii.prototype.close=Ii.prototype.close,NF=function(){return new M0},SF=function(){return un()},wF=Et,_j={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jr.NO_ERROR=0,Jr.TIMEOUT=8,Jr.HTTP_ERROR=6,cv=Jr,vn.COMPLETE="complete",bF=vn,Ft.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",qe.prototype.listen=qe.prototype.K,ym=Ft,Un.prototype.listenOnce=Un.prototype.L,Un.prototype.getLastError=Un.prototype.Ka,Un.prototype.getLastErrorCode=Un.prototype.Ba,Un.prototype.getStatus=Un.prototype.Z,Un.prototype.getResponseJson=Un.prototype.Oa,Un.prototype.getResponseText=Un.prototype.oa,Un.prototype.send=Un.prototype.ea,Un.prototype.setWithCredentials=Un.prototype.Ha,vF=Un}).apply(typeof xy<"u"?xy:typeof self<"u"?self:typeof window<"u"?window:{});const pI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ai=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ai.UNAUTHENTICATED=new Ai(null),Ai.GOOGLE_CREDENTIALS=new Ai("google-credentials-uid"),Ai.FIRST_PARTY=new Ai("first-party-uid"),Ai.MOCK_USER=new Ai("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new GA("@firebase/firestore");function vh(){return Yd.logLevel}function ot(t,...e){if(Yd.logLevel<=Rr.DEBUG){const r=e.map(s8);Yd.debug(`Firestore (${Bf}): ${t}`,...r)}}function xa(t,...e){if(Yd.logLevel<=Rr.ERROR){const r=e.map(s8);Yd.error(`Firestore (${Bf}): ${t}`,...r)}}function Zm(t,...e){if(Yd.logLevel<=Rr.WARN){const r=e.map(s8);Yd.warn(`Firestore (${Bf}): ${t}`,...r)}}function s8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t="Unexpected state"){const e=`FIRESTORE (${Bf}) INTERNAL ASSERTION FAILED: `+t;throw xa(e),new Error(e)}function Ut(t,e){t||Rt()}function $t(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends Do{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lre{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Ai.UNAUTHENTICATED)))}shutdown(){}}class $re{constructor(e){this.t=e,this.currentUser=Ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ut(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new Io;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Io,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Io)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ut(typeof n.accessToken=="string"),new Lre(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ut(e===null||typeof e=="string"),new Ai(e)}}class zre{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ai.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ure{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new zre(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Ai.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vre{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ut(this.o===void 0);const n=i=>{i.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ot("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Ut(typeof r.token=="string"),this.R=r.token,new Vre(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=qre(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function mr(t,e){return t<e?-1:t>e?1:0}function Gh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function jF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new mt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new mt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new mt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new mt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return na.fromMillis(Date.now())}static fromDate(e){return na.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new na(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mr(this.nanoseconds,e.nanoseconds):mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ht(e)}static min(){return new Ht(new na(0,0))}static max(){return new Ht(new na(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,r,n){r===void 0?r=0:r>e.length&&Rt(),n===void 0?n=e.length-r:n>e.length-r&&Rt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return eg.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof eg?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),o=r.get(a);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Kr extends eg{construct(e,r,n){return new Kr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new mt(Ke.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Kr(r)}static emptyPath(){return new Kr([])}}const Hre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ra extends eg{construct(e,r,n){return new ra(e,r,n)}static isValidIdentifier(e){return Hre.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ra.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ra(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new mt(Ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new mt(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new mt(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(i(),a++)}if(i(),o)throw new mt(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ra(r)}static emptyPath(){return new ra([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.path=e}static fromPath(e){return new _t(Kr.fromString(e))}static fromName(e){return new _t(Kr.fromString(e).popFirst(5))}static empty(){return new _t(Kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Kr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new Kr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function jj(t){return t.fields.find((e=>e.kind===2))}function kd(t){return t.fields.filter((e=>e.kind!==2))}Mv.UNKNOWN_ID=-1;class uv{constructor(e,r){this.fieldPath=e,this.kind=r}}class tg{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new tg(0,Ps.min())}}function TF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Ht.fromTimestamp(n===1e9?new na(r+1,0):new na(r,n));return new Ps(a,_t.empty(),e)}function AF(t){return new Ps(t.readTime,t.key,-1)}class Ps{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ps(Ht.min(),_t.empty(),-1)}static max(){return new Ps(Ht.max(),_t.empty(),-1)}}function o8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=_t.comparator(t.documentKey,e.documentKey),r!==0?r:mr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(t){if(t.code!==Ke.FAILED_PRECONDITION||t.message!==EF)throw t;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Me(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Me?r:Me.resolve(r)}catch(r){return Me.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Me.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Me.reject(r)}static resolve(e){return new Me(((r,n)=>{r(e)}))}static reject(e){return new Me(((r,n)=>{n(e)}))}static waitFor(e){return new Me(((r,n)=>{let a=0,i=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++i,o&&i===a&&r()}),(d=>n(d)))})),o=!0,i===a&&r()}))}static or(e){let r=Me.resolve(!1);for(const n of e)r=r.next((a=>a?Me.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new Me(((n,a)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{o[h]=p,++c,c===i&&n(o)}),(p=>a(p)))}}))}static doWhile(e,r){return new Me(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Io,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Am(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=l8(n.target.error);this.V.reject(new Am(e,a))}}static open(e,r,n,a){try{return new k2(r,e.transaction(a,n))}catch(i){throw new Am(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ot("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Wre(r)}}class Eu{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Eu.S(Wa())===12.2&&xa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ot("SimpleDb","Removing database:",e),Id(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!DV())return!1;if(Eu.v())return!0;const e=Wa(),r=Eu.S(e),n=0<r&&r<10,a=CF(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ot("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const o=i.target.result;r(o)},a.onblocked=()=>{n(new Am(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const o=i.target.error;o.name==="VersionError"?n(new mt(Ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new mt(Ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new Am(e,o))},a.onupgradeneeded=i=>{ot("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,a.transaction,i.oldVersion,this.version).next((()=>{ot("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const c=k2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Me.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&o<3;if(ot("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function CF(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Gre{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Id(this.B.delete())}}class Am extends mt{constructor(e,r){super(Ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function qu(t){return t.name==="IndexedDbTransactionError"}class Wre{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ot("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ot("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Id(n)}add(e){return ot("SimpleDb","ADD",this.store.name,e,e),Id(this.store.add(e))}get(e){return Id(this.store.get(e)).next((r=>(r===void 0&&(r=null),ot("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return ot("SimpleDb","DELETE",this.store.name,e),Id(this.store.delete(e))}count(){return ot("SimpleDb","COUNT",this.store.name),Id(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new Me(((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}}))}{const i=this.cursor(n),o=[];return this.W(i,((c,d)=>{o.push(d)})).next((()=>o))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Me(((a,i)=>{n.onerror=o=>{i(o.target.error)},n.onsuccess=o=>{a(o.target.result)}}))}j(e,r){ot("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,o,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Me(((n,a)=>{r.onerror=i=>{const o=l8(i.target.error);a(o)},r.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():n()})):n()}}))}W(e,r){const n=[];return new Me(((a,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void a();const d=new Gre(c),h=r(c.primaryKey,c.value,d);if(h instanceof Me){const p=h.catch((m=>(d.done(),Me.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Me.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Id(t){return new Me(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=l8(n.target.error);r(a)}}))}let mI=!1;function l8(t){const e=Eu.S(Wa());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mI||(mI=!0,setTimeout((()=>{throw n}),0)),n}}return t}class Kre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ot("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ot("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){qu(r)?ot("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Fu(r)}await this.X(6e4)}))}}class Qre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return Me.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!n.has(o))return ot("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next((c=>{a-=c,n.add(o)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(a,i))).next((c=>(ot("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>o.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const o=AF(i);o8(o,n)>0&&(n=o)})),new Ps(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}is.oe=-1;function fx(t){return t==null}function rg(t){return t===0&&1/t==-1/0}function OF(t){return typeof t=="number"&&Number.isInteger(t)&&!rg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=gI(e)),e=Xre(t.get(r),e);return gI(e)}function Xre(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function gI(t){return t+""}function Xo(t){const e=t.length;if(Ut(e>=2),e===2)return Ut(t.charAt(0)===""&&t.charAt(1)===""),Kr.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>r)&&Rt(),t.charAt(o+1)){case"":const c=t.substring(i,o);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,o),a+="\0";break;case"":a+=t.substring(i,o+1);break;default:Rt()}i=o+2}return new Kr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,e){return[t,Ui(e)]}function IF(t,e,r){return[t,Ui(e),r]}const Yre={},Jre=["prefixPath","collectionGroup","readTime","documentId"],Zre=["prefixPath","collectionGroup","documentId"],ene=["collectionGroup","readTime","prefixPath","documentId"],tne=["canonicalId","targetId"],rne=["targetId","path"],nne=["path","targetId"],ane=["collectionId","parent"],ine=["indexId","uid"],sne=["uid","sequenceNumber"],one=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lne=["indexId","uid","orderedDocumentKey"],cne=["userId","collectionPath","documentId"],une=["userId","collectionPath","largestBatchId"],dne=["userId","collectionGroup","largestBatchId"],RF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hne=[...RF,"documentOverlays"],MF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DF=MF,c8=[...DF,"indexConfiguration","indexState","indexEntries"],fne=c8,pne=[...c8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj extends kF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Qa(t,e){const r=$t(t);return Eu.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function w0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function PF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,r){this.comparator=e,this.root=r||gi.EMPTY}insert(e,r){return new zn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yy(this.root,e,this.comparator,!1)}getReverseIterator(){return new yy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yy(this.root,e,this.comparator,!0)}}class yy{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gi{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??gi.RED,this.left=a??gi.EMPTY,this.right=i??gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new gi(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return gi.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rt();const e=this.left.check();if(e!==this.right.check())throw Rt();return e+(this.isRed()?0:1)}}gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1;gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt()}get value(){throw Rt()}get color(){throw Rt()}get left(){throw Rt()}get right(){throw Rt()}copy(e,r,n,a,i){return this}insert(e,r,n){return new gi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new zn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new vI(this.data.getIterator())}getIteratorFrom(e){return new vI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new An(this.comparator);return r.data=e,r}}class vI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ch(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.fields=e,e.sort(ra.comparator)}static empty(){return new ss([])}unionWith(e){let r=new An(ra.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ss(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Gh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new LF("Invalid base64 string: "+i):i}})(e);return new wa(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i})(e);return new wa(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wa.EMPTY_BYTE_STRING=new wa("");const mne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uc(t){if(Ut(!!t),typeof t=="string"){let e=0;const r=mne.exec(t);if(Ut(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Qn(t.seconds),nanos:Qn(t.nanos)}}function Qn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Du(t){return typeof t=="string"?wa.fromBase64String(t):wa.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function d8(t){const e=t.mapValue.fields.__previous_value__;return u8(e)?d8(e):e}function ng(t){const e=uc(t.mapValue.fields.__local_write_time__.timestampValue);return new na(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gne{constructor(e,r,n,a,i,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Jd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Jd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hv={nullValue:"NULL_VALUE"};function Zd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?u8(t)?4:BF(t)?9007199254740991:C2(t)?10:11:Rt()}function sl(t,e){if(t===e)return!0;const r=Zd(t);if(r!==Zd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ng(t).isEqual(ng(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=uc(a.timestampValue),c=uc(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return Du(a.bytesValue).isEqual(Du(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return Qn(a.geoPointValue.latitude)===Qn(i.geoPointValue.latitude)&&Qn(a.geoPointValue.longitude)===Qn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return Qn(a.integerValue)===Qn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=Qn(a.doubleValue),c=Qn(i.doubleValue);return o===c?rg(o)===rg(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Gh(t.arrayValue.values||[],e.arrayValue.values||[],sl);case 10:case 11:return(function(a,i){const o=a.mapValue.fields||{},c=i.mapValue.fields||{};if(yI(o)!==yI(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!sl(o[d],c[d])))return!1;return!0})(t,e);default:return Rt()}}function ag(t,e){return(t.values||[]).find((r=>sl(r,e)))!==void 0}function Pu(t,e){if(t===e)return 0;const r=Zd(t),n=Zd(e);if(r!==n)return mr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return mr(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Qn(i.integerValue||i.doubleValue),d=Qn(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return bI(t.timestampValue,e.timestampValue);case 4:return bI(ng(t),ng(e));case 5:return mr(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Du(i),d=Du(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=mr(c[h],d[h]);if(p!==0)return p}return mr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=mr(Qn(i.latitude),Qn(o.latitude));return c!==0?c:mr(Qn(i.longitude),Qn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return wI(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var c,d,h,p;const m=i.fields||{},x=o.fields||{},y=(c=m.value)===null||c===void 0?void 0:c.arrayValue,w=(d=x.value)===null||d===void 0?void 0:d.arrayValue,N=mr(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((p=w==null?void 0:w.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:wI(y,w)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===xu.mapValue&&o===xu.mapValue)return 0;if(i===xu.mapValue)return 1;if(o===xu.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const x=mr(d[m],p[m]);if(x!==0)return x;const y=Pu(c[d[m]],h[p[m]]);if(y!==0)return y}return mr(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Rt()}}function bI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return mr(t,e);const r=uc(t),n=uc(e),a=mr(r.seconds,n.seconds);return a!==0?a:mr(r.nanos,n.nanos)}function wI(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Pu(r[a],n[a]);if(i)return i}return mr(r.length,n.length)}function Wh(t){return Aj(t)}function Aj(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=uc(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Du(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return _t.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=Aj(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const o of n)i?i=!1:a+=",",a+=`${o}:${Aj(r.fields[o])}`;return a+"}"})(t.mapValue):Rt()}function ig(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ej(t){return!!t&&"integerValue"in t}function sg(t){return!!t&&"arrayValue"in t}function SI(t){return!!t&&"nullValue"in t}function NI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fv(t){return!!t&&"mapValue"in t}function C2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Em(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return w0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Em(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Em(t.arrayValue.values[r]);return e}return Object.assign({},t)}function BF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const $F={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function xne(t){return"nullValue"in t?hv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ig(Jd.empty(),_t.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?C2(t)?$F:{mapValue:{}}:Rt()}function yne(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ig(Jd.empty(),_t.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?$F:"mapValue"in t?C2(t)?{mapValue:{}}:xu:Rt()}function _I(t,e){const r=Pu(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function jI(t,e){const r=Pu(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!fv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Em(r)}setAll(e){let r=ra.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=Em(o):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());fv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return sl(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];fv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){w0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new yi(Em(this.value))}}function zF(t){const e=[];return w0(t.fields,((r,n)=>{const a=new ra([r]);if(fv(n)){const i=zF(n.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)})),new ss(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,r,n,a,i,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Xn(e,0,Ht.min(),Ht.min(),Ht.min(),yi.empty(),0)}static newFoundDocument(e,r,n,a){return new Xn(e,1,r,Ht.min(),n,a,0)}static newNoDocument(e,r){return new Xn(e,2,r,Ht.min(),Ht.min(),yi.empty(),0)}static newUnknownDocument(e,r){return new Xn(e,3,r,Ht.min(),Ht.min(),yi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,r){this.position=e,this.inclusive=r}}function TI(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?n=_t.comparator(_t.fromName(o.referenceValue),r.key):n=Pu(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function AI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!sl(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,r="asc"){this.field=e,this.dir=r}}function vne(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UF=class{};class Mr extends UF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new bne(e,r,n):r==="array-contains"?new Nne(e,n):r==="in"?new WF(e,n):r==="not-in"?new _ne(e,n):r==="array-contains-any"?new jne(e,n):new Mr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new wne(e,n):new Sne(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Pu(r,this.value)):r!==null&&Zd(this.value)===Zd(r)&&this.matchesComparison(Pu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends UF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new mn(e,r)}matches(e){return Qh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qh(t){return t.op==="and"}function kj(t){return t.op==="or"}function h8(t){return VF(t)&&Qh(t)}function VF(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function Cj(t){if(t instanceof Mr)return t.field.canonicalString()+t.op.toString()+Wh(t.value);if(h8(t))return t.filters.map((e=>Cj(e))).join(",");{const e=t.filters.map((r=>Cj(r))).join(",");return`${t.op}(${e})`}}function FF(t,e){return t instanceof Mr?(function(n,a){return a instanceof Mr&&n.op===a.op&&n.field.isEqual(a.field)&&sl(n.value,a.value)})(t,e):t instanceof mn?(function(n,a){return a instanceof mn&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,o,c)=>i&&FF(o,a.filters[c])),!0):!1})(t,e):void Rt()}function qF(t,e){const r=t.filters.concat(e);return mn.create(r,t.op)}function HF(t){return t instanceof Mr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Wh(r.value)}`})(t):t instanceof mn?(function(r){return r.op.toString()+" {"+r.getFilters().map(HF).join(" ,")+"}"})(t):"Filter"}class bne extends Mr{constructor(e,r,n){super(e,r,n),this.key=_t.fromName(n.referenceValue)}matches(e){const r=_t.comparator(e.key,this.key);return this.matchesComparison(r)}}class wne extends Mr{constructor(e,r){super(e,"in",r),this.keys=GF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class Sne extends Mr{constructor(e,r){super(e,"not-in",r),this.keys=GF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function GF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>_t.fromName(n.referenceValue)))}class Nne extends Mr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return sg(r)&&ag(r.arrayValue,this.value)}}class WF extends Mr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ag(this.value.arrayValue,r)}}class _ne extends Mr{constructor(e,r){super(e,"not-in",r)}matches(e){if(ag(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ag(this.value.arrayValue,r)}}class jne extends Mr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!sg(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>ag(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tne{constructor(e,r=null,n=[],a=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function Oj(t,e=null,r=[],n=[],a=null,i=null,o=null){return new Tne(t,e,r,n,a,i,o)}function e0(t){const e=$t(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>Cj(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),fx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Wh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Wh(n))).join(",")),e.ue=r}return e.ue}function px(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!vne(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!FF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AI(t.startAt,e.startAt)&&AI(t.endAt,e.endAt)}function Dv(t){return _t.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Pv(t,e){return t.filters.filter((r=>r instanceof Mr&&r.field.isEqual(e)))}function EI(t,e,r){let n=hv,a=!0;for(const i of Pv(t,e)){let o=hv,c=!0;switch(i.op){case"<":case"<=":o=xne(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,c=!1;break;case"!=":case"not-in":o=hv}_I({value:n,inclusive:a},{value:o,inclusive:c})<0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];_I({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function kI(t,e,r){let n=xu,a=!0;for(const i of Pv(t,e)){let o=xu,c=!0;switch(i.op){case">=":case">":o=yne(i.value),c=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,c=!1;break;case"!=":case"not-in":o=xu}jI({value:n,inclusive:a},{value:o,inclusive:c})>0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];jI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,r=null,n=[],a=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function KF(t,e,r,n,a,i,o,c){return new $f(t,e,r,n,a,i,o,c)}function mx(t){return new $f(t)}function CI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QF(t){return t.collectionGroup!==null}function km(t){const e=$t(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new An(ra.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new og(i,n))})),r.has(ra.keyField().canonicalString())||e.ce.push(new og(ra.keyField(),n))}return e.ce}function Rs(t){const e=$t(t);return e.le||(e.le=Ane(e,km(t))),e.le}function Ane(t,e){if(t.limitType==="F")return Oj(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new og(a.field,i)}));const r=t.endAt?new Kh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Kh(t.startAt.position,t.startAt.inclusive):null;return Oj(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Ij(t,e){const r=t.filters.concat([e]);return new $f(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Lv(t,e,r){return new $f(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function O2(t,e){return px(Rs(t),Rs(e))&&t.limitType===e.limitType}function XF(t){return`${e0(Rs(t))}|lt:${t.limitType}`}function bh(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>HF(a))).join(", ")}]`),fx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>Wh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>Wh(a))).join(",")),`Target(${n})`})(Rs(t))}; limitType=${t.limitType})`}function gx(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):_t.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of km(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=TI(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,km(n),a)||n.endAt&&!(function(o,c,d){const h=TI(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,km(n),a))})(t,e)}function YF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JF(t){return(e,r)=>{let n=!1;for(const a of km(t)){const i=Ene(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function Ene(t,e,r){const n=t.field.isKeyField()?_t.comparator(e.key,r.key):(function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?Pu(d,h):Rt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Rt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){w0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return PF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kne=new zn(_t.comparator);function Os(){return kne}const ZF=new zn(_t.comparator);function vm(...t){let e=ZF;for(const r of t)e=e.insert(r.key,r);return e}function eq(t){let e=ZF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Yo(){return Cm()}function tq(){return Cm()}function Cm(){return new Hu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Cne=new zn(_t.comparator),One=new An(_t.comparator);function Ar(...t){let e=One;for(const r of t)e=e.add(r);return e}const Ine=new An(mr);function f8(){return Ine}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rg(e)?"-0":e}}function rq(t){return{integerValue:""+t}}function nq(t,e){return OF(e)?rq(e):p8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this._=void 0}}function Rne(t,e,r){return t instanceof lg?(function(a,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&u8(i)&&(i=d8(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(r,e):t instanceof t0?iq(t,e):t instanceof Xh?sq(t,e):(function(a,i){const o=aq(a,i),c=OI(o)+OI(a.Pe);return Ej(o)&&Ej(a.Pe)?rq(c):p8(a.serializer,c)})(t,e)}function Mne(t,e,r){return t instanceof t0?iq(t,e):t instanceof Xh?sq(t,e):r}function aq(t,e){return t instanceof Yh?(function(n){return Ej(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class lg extends I2{}class t0 extends I2{constructor(e){super(),this.elements=e}}function iq(t,e){const r=oq(e);for(const n of t.elements)r.some((a=>sl(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Xh extends I2{constructor(e){super(),this.elements=e}}function sq(t,e){let r=oq(e);for(const n of t.elements)r=r.filter((a=>!sl(a,n)));return{arrayValue:{values:r}}}class Yh extends I2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function OI(t){return Qn(t.integerValue||t.doubleValue)}function oq(t){return sg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,r){this.field=e,this.transform=r}}function Dne(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof t0&&a instanceof t0||n instanceof Xh&&a instanceof Xh?Gh(n.elements,a.elements,sl):n instanceof Yh&&a instanceof Yh?sl(n.Pe,a.Pe):n instanceof lg&&a instanceof lg})(t.transform,e.transform)}class Pne{constructor(e,r){this.version=e,this.transformResults=r}}class ya{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ya}static exists(e){return new ya(void 0,e)}static updateTime(e){return new ya(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class R2{}function lq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xx(t.key,ya.none()):new zf(t.key,t.data,ya.none());{const r=t.data,n=yi.empty();let a=new An(ra.comparator);for(let i of e.fields)if(!a.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),a=a.add(i)}return new bc(t.key,n,new ss(a.toArray()),ya.none())}}function Lne(t,e,r){t instanceof zf?(function(a,i,o){const c=a.value.clone(),d=RI(a.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof bc?(function(a,i,o){if(!pv(a.precondition,i))return void i.convertToUnknownDocument(o.version);const c=RI(a.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(cq(a)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Om(t,e,r,n){return t instanceof zf?(function(i,o,c,d){if(!pv(i.precondition,o))return c;const h=i.value.clone(),p=MI(i.fieldTransforms,d,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof bc?(function(i,o,c,d){if(!pv(i.precondition,o))return c;const h=MI(i.fieldTransforms,d,o),p=o.data;return p.setAll(cq(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,o,c){return pv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function Bne(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=aq(n.transform,a||null);i!=null&&(r===null&&(r=yi.empty()),r.set(n.field,i))}return r||null}function II(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Gh(n,a,((i,o)=>Dne(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zf extends R2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class bc extends R2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cq(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function RI(t,e,r){const n=new Map;Ut(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],o=i.transform,c=e.data.field(i.field);n.set(i.field,Mne(o,c,r[a]))}return n}function MI(t,e,r){const n=new Map;for(const a of t){const i=a.transform,o=r.data.field(a.field);n.set(a.field,Rne(i,o,e))}return n}class xx extends R2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g8 extends R2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Lne(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Om(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Om(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=tq();return this.mutations.forEach((a=>{const i=e.get(a.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=r.has(a.key)?null:c;const d=lq(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Ht.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Ar())}isEqual(e){return this.batchId===e.batchId&&Gh(this.mutations,e.mutations,((r,n)=>II(r,n)))&&Gh(this.baseMutations,e.baseMutations,((r,n)=>II(r,n)))}}class y8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Ut(e.mutations.length===n.length);let a=(function(){return Cne})();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,n[o].version);return new y8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ne{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ea,zr;function uq(t){switch(t){default:return Rt();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function dq(t){if(t===void 0)return xa("GRPC error has no .code"),Ke.UNKNOWN;switch(t){case Ea.OK:return Ke.OK;case Ea.CANCELLED:return Ke.CANCELLED;case Ea.UNKNOWN:return Ke.UNKNOWN;case Ea.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case Ea.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case Ea.INTERNAL:return Ke.INTERNAL;case Ea.UNAVAILABLE:return Ke.UNAVAILABLE;case Ea.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case Ea.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case Ea.NOT_FOUND:return Ke.NOT_FOUND;case Ea.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case Ea.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case Ea.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case Ea.ABORTED:return Ke.ABORTED;case Ea.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case Ea.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case Ea.DATA_LOSS:return Ke.DATA_LOSS;default:return Rt()}}(zr=Ea||(Ea={}))[zr.OK=0]="OK",zr[zr.CANCELLED=1]="CANCELLED",zr[zr.UNKNOWN=2]="UNKNOWN",zr[zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zr[zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zr[zr.NOT_FOUND=5]="NOT_FOUND",zr[zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",zr[zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",zr[zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",zr[zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zr[zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zr[zr.ABORTED=10]="ABORTED",zr[zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",zr[zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",zr[zr.INTERNAL=13]="INTERNAL",zr[zr.UNAVAILABLE=14]="UNAVAILABLE",zr[zr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zne(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Une=new Gd([4294967295,4294967295],0);function DI(t){const e=zne().encode(t),r=new yF;return r.update(e),new Uint8Array(r.digest())}function PI(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gd([r,n],0),new Gd([a,i],0)]}class b8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new bm(`Invalid padding: ${r}`);if(n<0)throw new bm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new bm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new bm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Gd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Gd.fromNumber(n)));return a.compare(Une)===1&&(a=new Gd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=DI(e),[n,a]=PI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new b8(i,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=DI(e),[n,a]=PI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class bm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,vx.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new yx(Ht.min(),a,new zn(mr),Os(),Ar())}}class vx{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new vx(n,r,Ar(),Ar(),Ar())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class hq{constructor(e,r){this.targetId=e,this.me=r}}class fq{constructor(e,r,n=wa.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class LI{constructor(){this.fe=0,this.ge=$I(),this.pe=wa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ar(),r=Ar(),n=Ar();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Rt()}})),new vx(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=$I()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Vne{constructor(e){this.Le=e,this.Be=new Map,this.ke=Os(),this.qe=BI(),this.Qe=new zn(mr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Rt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(Dv(i))if(n===0){const o=new _t(i.path);this.Ue(r,o,Xn.newNoDocument(o,Ht.min()))}else Ut(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let o,c;try{o=Du(n).toUint8Array()}catch(d){if(d instanceof LF)return Zm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new b8(o,a,i)}catch(d){return Zm(d instanceof bm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Dv(c.target)){const d=new _t(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Xn.newNoDocument(d,e))}i.be&&(r.set(o,i.ve()),i.Ce())}}));let n=Ar();this.qe.forEach(((i,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const a=new yx(e,r,this.Qe,this.ke,n);return this.ke=Os(),this.qe=BI(),this.Qe=new zn(mr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new LI,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new An(mr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ot("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new LI),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function BI(){return new zn(_t.comparator)}function $I(){return new zn(_t.comparator)}const Fne={asc:"ASCENDING",desc:"DESCENDING"},qne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hne={and:"AND",or:"OR"};class Gne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Rj(t,e){return t.useProto3Json||fx(e)?e:{value:e}}function Jh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wne(t,e){return Jh(t,e.toTimestamp())}function ii(t){return Ut(!!t),Ht.fromTimestamp((function(r){const n=uc(r);return new na(n.seconds,n.nanos)})(t))}function w8(t,e){return Mj(t,e).canonicalString()}function Mj(t,e){const r=(function(a){return new Kr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function mq(t){const e=Kr.fromString(t);return Ut(_q(e)),e}function cg(t,e){return w8(t.databaseId,e.path)}function ec(t,e){const r=mq(e);if(r.get(1)!==t.databaseId.projectId)throw new mt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new mt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new _t(yq(r))}function gq(t,e){return w8(t.databaseId,e)}function xq(t){const e=mq(t);return e.length===4?Kr.emptyPath():yq(e)}function Dj(t){return new Kr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yq(t){return Ut(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zI(t,e,r){return{name:cg(t,e),fields:r.value.mapValue.fields}}function Kne(t,e,r){const n=ec(t,e.name),a=ii(e.updateTime),i=e.createTime?ii(e.createTime):Ht.min(),o=new yi({mapValue:{fields:e.fields}}),c=Xn.newFoundDocument(n,a,i,o);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Qne(t,e){return"found"in e?(function(n,a){Ut(!!a.found),a.found.name,a.found.updateTime;const i=ec(n,a.found.name),o=ii(a.found.updateTime),c=a.found.createTime?ii(a.found.createTime):Ht.min(),d=new yi({mapValue:{fields:a.found.fields}});return Xn.newFoundDocument(i,o,c,d)})(t,e):"missing"in e?(function(n,a){Ut(!!a.missing),Ut(!!a.readTime);const i=ec(n,a.missing),o=ii(a.readTime);return Xn.newNoDocument(i,o)})(t,e):Rt()}function Xne(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Rt()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Ut(p===void 0||typeof p=="string"),wa.fromBase64String(p||"")):(Ut(p===void 0||p instanceof Buffer||p instanceof Uint8Array),wa.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?Ke.UNKNOWN:dq(h.code);return new mt(p,h.message||"")})(o);r=new fq(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=ec(t,n.document.name),i=ii(n.document.updateTime),o=n.document.createTime?ii(n.document.createTime):Ht.min(),c=new yi({mapValue:{fields:n.document.fields}}),d=Xn.newFoundDocument(a,i,o,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new mv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=ec(t,n.document),i=n.readTime?ii(n.readTime):Ht.min(),o=Xn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new mv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=ec(t,n.document),i=n.removedTargetIds||[];r=new mv([],i,a,null)}else{if(!("filter"in e))return Rt();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,o=new $ne(a,i),c=n.targetId;r=new hq(c,o)}}return r}function ug(t,e){let r;if(e instanceof zf)r={update:zI(t,e.key,e.value)};else if(e instanceof xx)r={delete:cg(t,e.key)};else if(e instanceof bc)r={update:zI(t,e.key,e.data),updateMask:rae(e.fieldMask)};else{if(!(e instanceof g8))return Rt();r={verify:cg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const c=o.transform;if(c instanceof lg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof t0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Yh)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Rt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:Wne(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Rt()})(t,e.precondition)),r}function Pj(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?ya.updateTime(ii(i.updateTime)):i.exists!==void 0?ya.exists(i.exists):ya.none()})(e.currentDocument):ya.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(o,c){let d=null;if("setToServerValue"in c)Ut(c.setToServerValue==="REQUEST_TIME"),d=new lg;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new t0(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new Xh(p)}else"increment"in c?d=new Yh(o,c.increment):Rt();const h=ra.fromServerFormat(c.fieldPath);return new m8(h,d)})(t,a))):[];if(e.update){e.update.name;const a=ec(t,e.update.name),i=new yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(d){const h=d.fieldPaths||[];return new ss(h.map((p=>ra.fromServerFormat(p))))})(e.updateMask);return new bc(a,i,o,r,n)}return new zf(a,i,r,n)}if(e.delete){const a=ec(t,e.delete);return new xx(a,r)}if(e.verify){const a=ec(t,e.verify);return new g8(a,r)}return Rt()}function Yne(t,e){return t&&t.length>0?(Ut(e!==void 0),t.map((r=>(function(a,i){let o=a.updateTime?ii(a.updateTime):ii(i);return o.isEqual(Ht.min())&&(o=ii(i)),new Pne(o,a.transformResults||[])})(r,e)))):[]}function vq(t,e){return{documents:[gq(t,e.path)]}}function bq(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=gq(t,a);const i=(function(h){if(h.length!==0)return Nq(mn.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((p=>(function(x){return{field:wh(x.field),direction:Zne(x.dir)}})(p)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=Rj(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function wq(t){let e=xq(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Ut(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const x=Sq(m);return x instanceof mn&&h8(x)?x.getFilters():[x]})(r.where));let o=[];r.orderBy&&(o=(function(m){return m.map((x=>(function(w){return new og(Sh(w.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(x)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let x;return x=typeof m=="object"?m.value:m,fx(x)?null:x})(r.limit));let d=null;r.startAt&&(d=(function(m){const x=!!m.before,y=m.values||[];return new Kh(y,x)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const x=!m.before,y=m.values||[];return new Kh(y,x)})(r.endAt)),KF(e,a,o,i,c,"F",d,h)}function Jne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Sq(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Sh(r.unaryFilter.field);return Mr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Sh(r.unaryFilter.field);return Mr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sh(r.unaryFilter.field);return Mr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sh(r.unaryFilter.field);return Mr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Rt()}})(t):t.fieldFilter!==void 0?(function(r){return Mr.create(Sh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return mn.create(r.compositeFilter.filters.map((n=>Sq(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Rt()}})(r.compositeFilter.op))})(t):Rt()}function Zne(t){return Fne[t]}function eae(t){return qne[t]}function tae(t){return Hne[t]}function wh(t){return{fieldPath:t.canonicalString()}}function Sh(t){return ra.fromServerFormat(t.fieldPath)}function Nq(t){return t instanceof Mr?(function(r){if(r.op==="=="){if(NI(r.value))return{unaryFilter:{field:wh(r.field),op:"IS_NAN"}};if(SI(r.value))return{unaryFilter:{field:wh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(NI(r.value))return{unaryFilter:{field:wh(r.field),op:"IS_NOT_NAN"}};if(SI(r.value))return{unaryFilter:{field:wh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wh(r.field),op:eae(r.op),value:r.value}}})(t):t instanceof mn?(function(r){const n=r.getFilters().map((a=>Nq(a)));return n.length===1?n[0]:{compositeFilter:{op:tae(r.op),filters:n}}})(t):Rt()}function rae(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function _q(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,r,n,a,i=Ht.min(),o=Ht.min(),c=wa.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Xl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e){this.ct=e}}function nae(t,e){let r;if(e.document)r=Kne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=_t.fromSegments(e.noDocument.path),a=n0(e.noDocument.readTime);r=Xn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Rt();{const n=_t.fromSegments(e.unknownDocument.path),a=n0(e.unknownDocument.version);r=Xn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new na(a[0],a[1]);return Ht.fromTimestamp(i)})(e.readTime)),r}function UI(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Bv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,o){return{name:cg(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Jh(i,o.version.toTimestamp()),createTime:Jh(i,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:r0(e.version)};else{if(!e.isUnknownDocument())return Rt();n.unknownDocument={path:r.path.toArray(),version:r0(e.version)}}return n}function Bv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function r0(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function n0(t){const e=new na(t.seconds,t.nanoseconds);return Ht.fromTimestamp(e)}function Rd(t,e){const r=(e.baseMutations||[]).map((i=>Pj(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>Pj(t.ct,i))),a=na.fromMillis(e.localWriteTimeMs);return new x8(e.batchId,a,r,n)}function wm(t){const e=n0(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?n0(t.lastLimboFreeSnapshotVersion):Ht.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Ut(i.documents.length===1),Rs(mx(xq(i.documents[0])))})(t.query):(function(i){return Rs(wq(i))})(t.query),new Xl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,wa.fromBase64String(t.resumeToken))}function Tq(t,e){const r=r0(e.snapshotVersion),n=r0(e.lastLimboFreeSnapshotVersion);let a;a=Dv(e.target)?vq(t.ct,e.target):bq(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:e0(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function Aq(t){const e=wq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lv(e,e.limit,"L"):e}function f3(t,e){return new v8(e.largestBatchId,Pj(t.ct,e.overlayMutation))}function VI(t,e){const r=e.path.lastSegment();return[t,Ui(e.path.popLast()),r]}function FI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:r0(n.readTime),documentKey:Ui(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{getBundleMetadata(e,r){return qI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:n0(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return qI(e).put((function(a){return{bundleId:a.id,createTime:r0(ii(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return HI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:Aq(i.bundledQuery),readTime:n0(i.readTime)}})(n)}))}saveNamedQuery(e,r){return HI(e).put((function(a){return{name:a.name,readTime:r0(ii(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function qI(t){return Qa(t,"bundles")}function HI(t){return Qa(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new M2(e,n)}getOverlay(e,r){return Yp(e).get(VI(this.userId,r)).next((n=>n?f3(this.serializer,n):null))}getOverlays(e,r){const n=Yo();return Me.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,o)=>{const c=new v8(r,o);a.push(this.ht(e,c))})),Me.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((o=>a.add(Ui(o.getCollectionPath()))));const i=[];return a.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);i.push(Yp(e).j("collectionPathOverlayIndex",c))})),Me.waitFor(i)}getOverlaysForCollection(e,r,n){const a=Yo(),i=Ui(r),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Yp(e).U("collectionPathOverlayIndex",o).next((c=>{for(const d of c){const h=f3(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=Yo();let o;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Yp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=f3(this.serializer,h);i.size()<a||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Yp(e).put((function(a,i,o){const[c,d,h]=VI(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ug(a.ct,o.mutation)}})(this.serializer,this.userId,r))}}function Yp(t){return Qa(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iae{Pt(e){return Qa(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?wa.fromUint8Array(n):wa.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Qn(e.integerValue));else if("doubleValue"in e){const n=Qn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),rg(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=uc(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Du(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?BF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):C2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Rt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const o="value",c=((a=(n=i[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Qn(c)),this.Vt(o,r),this.Tt(i[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),_t.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}Md.vt=new Md;function sae(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function GI(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const o=sae(255&n[i]);if(a+=o,o!==8)break}return a})(t);return Math.ceil(e/8)}class oae{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=GI(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=GI(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class lae{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class cae{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Jp{constructor(){this.jt=new oae,this.Ht=new lae(this.jt),this.Jt=new cae(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Dd(this.indexId,this.documentKey,this.arrayValue,n)}}function nu(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=WI(t.arrayValue,e.arrayValue),r!==0?r:(r=WI(t.directionalValue,e.directionalValue),r!==0?r:_t.comparator(t.documentKey,e.documentKey)))}function WI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.Xt=new An(((r,n)=>ra.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Ut(e.collectionGroup===this.collectionId),this.nn)return!1;const r=jj(e);if(r!==void 0&&!this.sn(r))return!1;const n=kd(e);let a=new Set,i=0,o=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[o++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(o>=this.en.length||!this._n(this.en[o++],c))return!1}return!0}an(){if(this.nn)return null;let e=new An(ra.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new uv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new uv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new uv(n.field,n.dir==="asc"?0:1)));return new Mv(Mv.UNKNOWN_ID,this.collectionId,r,tg.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eq(t){var e,r;if(Ut(t instanceof Mr||t instanceof mn),t instanceof Mr){if(t instanceof WF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>Mr.create(t.field,"==",i))))||[];return mn.create(a,"or")}return t}const n=t.filters.map((a=>Eq(a)));return mn.create(n,t.op)}function uae(t){if(t.getFilters().length===0)return[];const e=$j(Eq(t));return Ut(kq(e)),Lj(e)||Bj(e)?[e]:e.getFilters()}function Lj(t){return t instanceof Mr}function Bj(t){return t instanceof mn&&h8(t)}function kq(t){return Lj(t)||Bj(t)||(function(r){if(r instanceof mn&&kj(r)){for(const n of r.getFilters())if(!Lj(n)&&!Bj(n))return!1;return!0}return!1})(t)}function $j(t){if(Ut(t instanceof Mr||t instanceof mn),t instanceof Mr)return t;if(t.filters.length===1)return $j(t.filters[0]);const e=t.filters.map((n=>$j(n)));let r=mn.create(e,t.op);return r=$v(r),kq(r)?r:(Ut(r instanceof mn),Ut(Qh(r)),Ut(r.filters.length>1),r.filters.reduce(((n,a)=>S8(n,a))))}function S8(t,e){let r;return Ut(t instanceof Mr||t instanceof mn),Ut(e instanceof Mr||e instanceof mn),r=t instanceof Mr?e instanceof Mr?(function(a,i){return mn.create([a,i],"and")})(t,e):QI(t,e):e instanceof Mr?QI(e,t):(function(a,i){if(Ut(a.filters.length>0&&i.filters.length>0),Qh(a)&&Qh(i))return qF(a,i.getFilters());const o=kj(a)?a:i,c=kj(a)?i:a,d=o.filters.map((h=>S8(h,c)));return mn.create(d,"or")})(t,e),$v(r)}function QI(t,e){if(Qh(e))return qF(e,t.getFilters());{const r=e.filters.map((n=>S8(t,n)));return mn.create(r,"or")}}function $v(t){if(Ut(t instanceof Mr||t instanceof mn),t instanceof Mr)return t;const e=t.getFilters();if(e.length===1)return $v(e[0]);if(VF(t))return t;const r=e.map((a=>$v(a))),n=[];return r.forEach((a=>{a instanceof Mr?n.push(a):a instanceof mn&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:mn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dae{constructor(){this.un=new N8}addToCollectionParentIndex(e,r){return this.un.add(r),Me.resolve()}getCollectionParents(e,r){return Me.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Me.resolve()}deleteFieldIndex(e,r){return Me.resolve()}deleteAllFieldIndexes(e){return Me.resolve()}createTargetIndexes(e,r){return Me.resolve()}getDocumentsMatchingTarget(e,r){return Me.resolve(null)}getIndexType(e,r){return Me.resolve(0)}getFieldIndexes(e,r){return Me.resolve([])}getNextCollectionGroupToUpdate(e){return Me.resolve(null)}getMinOffset(e,r){return Me.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,r){return Me.resolve(Ps.min())}updateCollectionGroup(e,r,n){return Me.resolve()}updateIndexEntries(e,r){return Me.resolve()}}class N8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new An(Kr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new An(Kr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Uint8Array(0);class hae{constructor(e,r){this.databaseId=r,this.cn=new N8,this.ln=new Hu((n=>e0(n)),((n,a)=>px(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:Ui(a)};return XI(e).put(i)}return Me.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[jF(r),""],!1,!0);return XI(e).U(a).next((i=>{for(const o of i){if(o.collectionId!==r)break;n.push(Xo(o.parent))}return n}))}addFieldIndex(e,r){const n=Zp(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const o=dh(e);return i.next((c=>{o.put(FI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Zp(e),a=dh(e),i=uh(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Zp(e),n=uh(e),a=dh(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return Me.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new KI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=uh(e);let a=!0;const i=new Map;return Me.forEach(this.hn(r),(o=>this.Pn(e,o).next((c=>{a&&(a=!!c),i.set(o,c)})))).next((()=>{if(a){let o=Ar();const c=[];return Me.forEach(i,((d,h)=>{ot("IndexedDbIndexManager",`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${e0(r)}`);const p=(function(M,L){const I=jj(L);if(I===void 0)return null;for(const R of Pv(M,I.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null})(h,d),m=(function(M,L){const I=new Map;for(const R of kd(L))for(const A of Pv(M,R.fieldPath))switch(A.op){case"==":case"in":I.set(R.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return I.set(R.fieldPath.canonicalString(),A.value),Array.from(I.values())}return null})(h,d),x=(function(M,L){const I=[];let R=!0;for(const A of kd(L)){const T=A.kind===0?EI(M,A.fieldPath,M.startAt):kI(M,A.fieldPath,M.startAt);I.push(T.value),R&&(R=T.inclusive)}return new Kh(I,R)})(h,d),y=(function(M,L){const I=[];let R=!0;for(const A of kd(L)){const T=A.kind===0?kI(M,A.fieldPath,M.endAt):EI(M,A.fieldPath,M.endAt);I.push(T.value),R&&(R=T.inclusive)}return new Kh(I,R)})(h,d),w=this.In(d,h,x),N=this.In(d,h,y),S=this.Tn(d,h,m),E=this.En(d.indexId,p,w,x.inclusive,N,y.inclusive,S);return Me.forEach(E,(C=>n.G(C,r.limit).next((M=>{M.forEach((L=>{const I=_t.fromSegments(L.documentKey);o.has(I)||(o=o.add(I),c.push(I))}))}))))})).next((()=>c))}return Me.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=uae(mn.create(e.filters,"and")).map((n=>Oj(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,o,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const x=r?this.dn(r[m/h]):vy,y=this.An(e,x,n[m%h],a),w=this.Rn(e,x,i[m%h],o),N=c.map((S=>this.An(e,x,S,!0)));p.push(...this.createRange(y,w,N))}return p}An(e,r,n,a){const i=new Dd(e,_t.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Dd(e,_t.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new KI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let o=null;for(const c of i)n.rn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,r){let n=2;const a=this.hn(r);return Me.forEach(a,(i=>this.Pn(e,i).next((o=>{o?n!==0&&o.fields.length<(function(d){let h=new An(ra.comparator),p=!1;for(const m of d.filters)for(const x of m.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?p=!0:h=h.add(x.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(o){return o.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Jp;for(const a of kd(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const o=n.Yt(a.kind);Md.vt.It(i,o)}return n.zt()}dn(e){const r=new Jp;return Md.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Jp;return Md.vt.It(ig(this.databaseId,r),n.Yt((function(i){const o=kd(i);return o.length===0?0:o[o.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Jp);let i=0;for(const o of kd(e)){const c=n[i++];for(const d of a)if(this.fn(r,o.fieldPath)&&sg(c))a=this.gn(a,o,c);else{const h=d.Yt(o.kind);Md.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const o of n.arrayValue.values||[])for(const c of a){const d=new Jp;d.seed(c.zt()),Md.vt.It(o,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof Mr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Zp(e),a=dh(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const o=[];return Me.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{o.push((function(p,m){const x=m?new tg(m.sequenceNumber,new Ps(n0(m.readTime),new _t(Xo(m.documentKey)),m.largestBatchId)):tg.empty(),y=p.fields.map((([w,N])=>new uv(ra.fromServerFormat(w),N)));return new Mv(p.indexId,p.collectionGroup,y,x)})(c,d))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:mr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=Zp(e),i=dh(e);return this.yn(e).next((o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Me.forEach(c,(d=>i.put(FI(d.indexId,this.uid,o,n))))))))}updateIndexEntries(e,r){const n=new Map;return Me.forEach(r,((a,i)=>{const o=n.get(a.collectionGroup);return(o?Me.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),Me.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?Me.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return uh(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return uh(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=uh(e);let i=new An(nu);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((o,c)=>{i=i.add(new Dd(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new An(nu);const a=this.Vn(r,e);if(a==null)return n;const i=jj(r);if(i!=null){const o=e.data.field(i.fieldPath);if(sg(o))for(const c of o.arrayValue.values||[])n=n.add(new Dd(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Dd(r.indexId,e.key,vy,a));return n}bn(e,r,n,a,i){ot("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return(function(d,h,p,m,x){const y=d.getIterator(),w=h.getIterator();let N=ch(y),S=ch(w);for(;N||S;){let E=!1,C=!1;if(N&&S){const M=p(N,S);M<0?C=!0:M>0&&(E=!0)}else N!=null?C=!0:E=!0;E?(m(S),S=ch(w)):C?(x(N),N=ch(y)):(N=ch(y),S=ch(w))}})(a,i,nu,(c=>{o.push(this.Dn(e,r,n,c))}),(c=>{o.push(this.vn(e,r,n,c))})),Me.waitFor(o)}yn(e){let r=1;return dh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((o,c)=>nu(o,c))).filter(((o,c,d)=>!c||nu(o,d[c-1])!==0));const a=[];a.push(e);for(const o of n){const c=nu(o,e),d=nu(o,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(o),a.push(o.Zt());else if(d>0)break}a.push(r);const i=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const c=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,vy,[]],d=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,vy,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return nu(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(YI)}getMinOffset(e,r){return Me.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||Rt())))).next(YI)}}function XI(t){return Qa(t,"collectionParents")}function uh(t){return Qa(t,"indexEntries")}function Zp(t){return Qa(t,"indexConfiguration")}function dh(t){return Qa(t,"indexState")}function YI(t){Ut(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;o8(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Ps(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cq(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],o=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:o},((p,m,x)=>(c++,x.delete())));i.push(d.next((()=>{Ut(c===1)})));const h=[];for(const p of r.mutations){const m=IF(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return Me.waitFor(i).next((()=>h))}function zv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Rt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class D2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Ut(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new D2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return au(e).J({index:"userMutationsIndex",range:n},((a,i,o)=>{r=!1,o.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=Nh(e),o=au(e);return o.add({}).next((c=>{Ut(typeof c=="number");const d=new x8(c,r,n,a),h=(function(y,w,N){const S=N.baseMutations.map((C=>ug(y.ct,C))),E=N.mutations.map((C=>ug(y.ct,C)));return{userId:w,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:S,mutations:E}})(this.serializer,this.userId,d),p=[];let m=new An(((x,y)=>mr(x.canonicalString(),y.canonicalString())));for(const x of a){const y=IF(this.userId,x.key.path,c);m=m.add(x.key.path.popLast()),p.push(o.put(h)),p.push(i.put(y,Yre))}return m.forEach((x=>{p.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Me.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return au(e).get(r).next((n=>n?(Ut(n.userId===this.userId),Rd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Me.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return au(e).J({index:"userMutationsIndex",range:a},((o,c,d)=>{c.userId===this.userId&&(Ut(c.batchId>=n),i=Rd(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return au(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,o)=>{n=i.batchId,o.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return au(e).U("userMutationsIndex",r).next((n=>n.map((a=>Rd(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=dv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return Nh(e).J({range:a},((o,c,d)=>{const[h,p,m]=o,x=Xo(p);if(h===this.userId&&r.path.isEqual(x))return au(e).get(m).next((y=>{if(!y)throw Rt();Ut(y.userId===this.userId),i.push(Rd(this.serializer,y))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new An(mr);const a=[];return r.forEach((i=>{const o=dv(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=Nh(e).J({range:c},((h,p,m)=>{const[x,y,w]=h,N=Xo(y);x===this.userId&&i.path.isEqual(N)?n=n.add(w):m.done()}));a.push(d)})),Me.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=dv(this.userId,n),o=IDBKeyRange.lowerBound(i);let c=new An(mr);return Nh(e).J({range:o},((d,h,p)=>{const[m,x,y]=d,w=Xo(x);m===this.userId&&n.isPrefixOf(w)?w.length===a&&(c=c.add(y)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(au(e).get(i).next((o=>{if(o===null)throw Rt();Ut(o.userId===this.userId),n.push(Rd(this.serializer,o))})))})),Me.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return Cq(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Me.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Me.resolve();const n=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),a=[];return Nh(e).J({range:n},((i,o,c)=>{if(i[0]===this.userId){const d=Xo(i[1]);a.push(d)}else c.done()})).next((()=>{Ut(a.length===0)}))}))}containsKey(e,r){return Oq(e,this.userId,r)}Nn(e){return Iq(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Oq(t,e,r){const n=dv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let o=!1;return Nh(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,x]=c;p===e&&m===a&&(o=!0),h.done()})).next((()=>o))}function au(t){return Qa(t,"mutations")}function Nh(t){return Qa(t,"documentMutations")}function Iq(t){return Qa(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new a0(0)}static kn(){return new a0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fae{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new a0(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Ht.fromTimestamp(new na(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>hh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Ut(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return hh(e).J(((o,c)=>{const d=wm(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>Me.waitFor(i))).next((()=>a))}forEachTarget(e,r){return hh(e).J(((n,a)=>{const i=wm(a);r(i)}))}qn(e){return ZI(e).get("targetGlobalKey").next((r=>(Ut(r!==null),r)))}Qn(e,r){return ZI(e).put("targetGlobalKey",r)}Kn(e,r){return hh(e).put(Tq(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=e0(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return hh(e).J({range:a,index:"queryTargetsIndex"},((o,c,d)=>{const h=wm(c);px(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=fu(e);return r.forEach((o=>{const c=Ui(o.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,o))})),Me.waitFor(a)}removeMatchingKeys(e,r,n){const a=fu(e);return Me.forEach(r,(i=>{const o=Ui(i.path);return Me.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=fu(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=fu(e);let i=Ar();return a.J({range:n,H:!0},((o,c,d)=>{const h=Xo(o[1]),p=new _t(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=Ui(r.path),a=IDBKeyRange.bound([n],[jF(n)],!1,!0);let i=0;return fu(e).J({index:"documentTargetsIndex",H:!0,range:a},(([o,c],d,h)=>{o!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return hh(e).get(r).next((n=>n?wm(n):null))}}function hh(t){return Qa(t,"targets")}function ZI(t){return Qa(t,"targetGlobal")}function fu(t){return Qa(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR([t,e],[r,n]){const a=mr(t,r);return a===0?mr(e,n):a}class pae{constructor(e){this.Un=e,this.buffer=new An(eR),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();eR(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class mae{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ot("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){qu(r)?ot("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Fu(r)}await this.Hn(3e5)}))}}class gae{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Me.resolve(is.oe);const n=new pae(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(JI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,o,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,o=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),vh()<=Rr.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${a} in `+(c-o)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function xae(t,e){return new gae(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yae{constructor(e,r){this.db=e,this.garbageCollector=xae(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return by(e,n)}removeReference(e,r,n){return by(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return by(e,r)}nr(e,r){return(function(a,i){let o=!1;return Iq(a).Y((c=>Oq(a,c,i).next((d=>(d&&(o=!0),Me.resolve(!d)))))).next((()=>o))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((o,c)=>{if(c<=r){const d=this.nr(e,o).next((h=>{if(!h)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Ht.min()),fu(e).delete((function(m){return[0,Ui(m.path)]})(o)))))}));a.push(d)}})).next((()=>Me.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return by(e,r)}tr(e,r){const n=fu(e);let a,i=is.oe;return n.J({index:"documentTargetsIndex"},(([o,c],{path:d,sequenceNumber:h})=>{o===0?(i!==is.oe&&r(new _t(Xo(a)),i),i=h,a=d):i=is.oe})).next((()=>{i!==is.oe&&r(new _t(Xo(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function by(t,e){return fu(t).put((function(n,a){return{targetId:0,path:Ui(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(){this.changes=new Hu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Me.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return bd(e).put(n)}removeEntry(e,r,n){return bd(e).delete((function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Bv(o),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Xn.newInvalidDocument(r);return bd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(em(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Xn.newInvalidDocument(r)};return bd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(em(r))},((a,i)=>{n={document:this.ir(r,i),size:zv(i)}})).next((()=>n))}getEntries(e,r){let n=Os();return this._r(e,r,((a,i)=>{const o=this.ir(a,i);n=n.insert(a,o)})).next((()=>n))}ar(e,r){let n=Os(),a=new zn(_t.comparator);return this._r(e,r,((i,o)=>{const c=this.ir(i,o);n=n.insert(i,c),a=a.insert(i,zv(o))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return Me.resolve();let a=new An(nR);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(em(a.first()),em(a.last())),o=a.getIterator();let c=o.getNext();return bd(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=_t.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&nR(c,m)<0;)n(c,null),c=o.getNext();c&&c.isEqual(m)&&(n(c,h),c=o.hasNext()?o.getNext():null),c?p.$(em(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const o=r.path,c=[o.popLast().toArray(),o.lastSegment(),Bv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bd(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=Os();for(const m of h){const x=this.ir(_t.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);x.isFoundDocument()&&(gx(r,x)||a.has(x.key))&&(p=p.insert(x.key,x))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=Os();const o=rR(r,n),c=rR(r,Ps.max());return bd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},((d,h,p)=>{const m=this.ir(_t.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new bae(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return tR(e).get("remoteDocumentGlobalKey").next((r=>(Ut(!!r),r)))}rr(e,r){return tR(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=nae(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Ht.min())))return n}return Xn.newInvalidDocument(e)}}function Mq(t){return new vae(t)}class bae extends Rq{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Hu((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new An(((i,o)=>mr(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),o.isValidDocument()){const d=UI(this.cr.serializer,o);a=a.add(i.path.popLast());const h=zv(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=UI(this.cr.serializer,o.convertToNoDocument(Ht.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),Me.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,o)=>{this.lr.set(i,{size:o,readTime:n.get(i).readTime})})),n)))}}function tR(t){return Qa(t,"remoteDocumentGlobal")}function bd(t){return Qa(t,"remoteDocumentsV14")}function em(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rR(t,e){const r=e.documentKey.path.toArray();return[t,Bv(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function nR(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=mr(r[i],n[i]),a)return a;return a=mr(r.length,n.length),a||(a=mr(r[r.length-2],n[n.length-2]),a||mr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&Om(n.mutation,a,ss.empty(),na.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Ar()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Ar()){const a=Yo();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let o=vm();return i.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=Yo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Ar())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let i=Os();const o=Cm(),c=(function(){return Cm()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof bc)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Om(p.mutation,h,p.mutation.getFieldMask(),na.now())):o.set(h.key,ss.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>o.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new wae(p,(m=o.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=Cm();let a=new zn(((o,c)=>o-c)),i=Ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||ss.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||Ar()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=tq();p.forEach((x=>{if(!i.has(x)){const y=lq(r.get(x),n.get(x));y!==null&&m.set(x,y),i=i.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Me.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return _t.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):QF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Me.resolve(Yo());let c=-1,d=i;return o.next((h=>Me.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Me.resolve():this.remoteDocumentCache.getEntry(e,p).next((x=>{d=d.insert(p,x)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,Ar()))).next((p=>({batchId:c,changes:eq(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new _t(r)).next((n=>{let a=vm();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let o=vm();return this.indexManager.getCollectionParents(e,i).next((c=>Me.forEach(c,(d=>{const h=(function(m,x){return new $f(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,x)=>{o=o.insert(m,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((o=>{i.forEach(((d,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Xn.newInvalidDocument(p)))}));let c=vm();return o.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&Om(p.mutation,h,ss.empty(),na.now()),gx(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Me.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:ii(a.createTime)}})(r)),Me.resolve()}getNamedQuery(e,r){return Me.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:Aq(a.bundledQuery),readTime:ii(a.readTime)}})(r)),Me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nae{constructor(){this.overlays=new zn(_t.comparator),this.Ir=new Map}getOverlay(e,r){return Me.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Yo();return Me.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),Me.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Me.resolve()}getOverlaysForCollection(e,r,n){const a=Yo(),i=r.length+1,o=new _t(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return Me.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new zn(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=Yo(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Yo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return Me.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new v8(r,n));let i=this.Ir.get(r);i===void 0&&(i=Ar(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(){this.sessionToken=wa.EMPTY_BYTE_STRING}getSessionToken(e){return Me.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(){this.Tr=new An(ri.Er),this.dr=new An(ri.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ri(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new ri(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new _t(new Kr([])),n=new ri(r,e),a=new ri(r,e+1),i=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new _t(new Kr([])),n=new ri(r,e),a=new ri(r,e+1);let i=Ar();return this.dr.forEachInRange([n,a],(o=>{i=i.add(o.key)})),i}containsKey(e){const r=new ri(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ri{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return _t.comparator(e.key,r.key)||mr(e.wr,r.wr)}static Ar(e,r){return mr(e.wr,r.wr)||_t.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jae{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new An(ri.Er)}checkEmpty(e){return Me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new x8(i,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new ri(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Me.resolve(o)}lookupMutationBatch(e,r){return Me.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return Me.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ri(r,0),a=new ri(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);i.push(c)})),Me.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new An(mr);return r.forEach((a=>{const i=new ri(a,0),o=new ri(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(c=>{n=n.add(c.wr)}))})),Me.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;_t.isDocumentKey(i)||(i=i.child(""));const o=new ri(new _t(i),0);let c=new An(mr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),Me.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Ut(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Me.forEach(r.mutations,(a=>{const i=new ri(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new ri(r,0),a=this.br.firstAfterOrEqual(n);return Me.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Me.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tae{constructor(e){this.Mr=e,this.docs=(function(){return new zn(_t.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Me.resolve(n?n.document.mutableCopy():Xn.newInvalidDocument(r))}getEntries(e,r){let n=Os();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Xn.newInvalidDocument(a))})),Me.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=Os();const o=r.path,c=new _t(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||o8(AF(p),n)<=0||(a.has(p.key)||gx(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Me.resolve(i)}getAllFromCollectionGroup(e,r,n,a){Rt()}Or(e,r){return Me.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new Aae(this)}getSize(e){return Me.resolve(this.size)}}class Aae extends Rq{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),Me.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eae{constructor(e){this.persistence=e,this.Nr=new Hu((r=>e0(r)),px),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _8,this.targetCount=0,this.kr=a0.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Me.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new a0(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Me.resolve()}updateTargetData(e,r){return this.Kn(r),Me.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),Me.waitFor(i).next((()=>a))}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Me.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Me.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((o=>{i.push(a.markPotentiallyOrphaned(e,o))})),Me.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Me.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Me.resolve(n)}containsKey(e,r){return Me.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e,r){this.qr={},this.overlays={},this.Qr=new is(0),this.Kr=!1,this.Kr=!0,this.$r=new _ae,this.referenceDelegate=e(this),this.Ur=new Eae(this),this.indexManager=new dae,this.remoteDocumentCache=(function(a){return new Tae(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new jq(r),this.Gr=new Sae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Nae,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new jae(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ot("MemoryPersistence","Starting transaction:",e);const a=new kae(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return Me.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class kae extends kF{constructor(e){super(),this.currentSequenceNumber=e}}class P2{constructor(e){this.persistence=e,this.Jr=new _8,this.Yr=null}static Zr(e){return new P2(e)}get Xr(){if(this.Yr)return this.Yr;throw Rt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Me.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Me.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Me.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Xr,(n=>{const a=_t.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Ht.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Me.or([()=>Me.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cae{constructor(e){this.serializer=e}O(e,r,n,a){const i=new k2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xI,{unique:!0}),d.createObjectStore("documentMutations")})(e),aR(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let o=Me.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),aR(e)),o=o.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ht.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(o=o.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xI,{unique:!0});const m=h.store("mutations"),x=p.map((y=>m.put(y)));return Me.waitFor(x)}))})(e,i)))),o=o.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(o=o.next((()=>this.ni(i)))),n<6&&a>=6&&(o=o.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(o=o.next((()=>this.ii(i)))),n<8&&a>=8&&(o=o.next((()=>this.si(e,i)))),n<9&&a>=9&&(o=o.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(o=o.next((()=>this.oi(i)))),n<11&&a>=11&&(o=o.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(o=o.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:cne});h.createIndex("collectionPathOverlayIndex",une,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",dne,{unique:!1})})(e)}))),n<13&&a>=13&&(o=o.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Jre});h.createIndex("documentKeyIndex",Zre),h.createIndex("collectionGroupIndex",ene)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(o=o.next((()=>this.ai(e,i)))),n<15&&a>=15&&(o=o.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:ine}).createIndex("sequenceNumberIndex",sne,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:one}).createIndex("documentKeyIndex",lne,{unique:!1})})(e)))),n<16&&a>=16&&(o=o.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(o=o.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=zv(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>Me.forEach(a,(i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next((c=>Me.forEach(c,(d=>{Ut(d.userId===i.userId);const h=Rd(this.serializer,d);return Cq(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((o,c)=>{const d=new Kr(o),h=(function(m){return[0,Ui(m)]})(d);i.push(r.get(h).next((p=>p?Me.resolve():(m=>r.put({targetId:0,path:Ui(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>Me.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:ane});const n=r.store("collectionParents"),a=new N8,i=o=>{if(a.add(o)){const c=o.lastSegment(),d=o.popLast();return n.put({collectionId:c,parent:Ui(d)})}};return r.store("remoteDocuments").J({H:!0},((o,c)=>{const d=new Kr(o);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([o,c,d],h)=>{const p=Xo(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=wm(a),o=Tq(this.serializer,i);return r.put(o)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,o)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new _t(Kr.fromString(m.document.name).popFirst(5)):m.noDocument?_t.fromSegments(m.noDocument.path):m.unknownDocument?_t.fromSegments(m.unknownDocument.path):Rt()})(o).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(c.put(h))})).next((()=>Me.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=Mq(this.serializer),i=new Pq(P2.Zr,this.serializer.ct);return n.U().next((o=>{const c=new Map;return o.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:Ar();Rd(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),Me.forEach(c,((d,h)=>{const p=new Ai(h),m=M2.lt(this.serializer,p),x=i.getIndexManager(p),y=D2.lt(p,this.serializer,x,i.referenceDelegate);return new Dq(a,y,m,x).recalculateAndSaveOverlaysForDocumentKeys(new Tj(r,is.oe),d).next()}))}))}}function aR(t){t.createObjectStore("targetDocuments",{keyPath:rne}).createIndex("documentTargetsIndex",nne,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tne,{unique:!0}),t.createObjectStore("targetGlobal")}const p3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class j8{constructor(e,r,n,a,i,o,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=o,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=x=>Promise.resolve(),!j8.D())throw new mt(Ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yae(this,a),this.Ai=r+"main",this.serializer=new jq(d),this.Ri=new Eu(this.Ai,this.hi,new Cae(this.serializer)),this.$r=new iae,this.Ur=new fae(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mq(this.serializer),this.Gr=new aae,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&xa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new mt(Ke.FAILED_PRECONDITION,p3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new is(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>wy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(qu(e))return ot("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ot("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return tm(e).get("owner").next((r=>Me.resolve(this.vi(r))))}Ci(e){return wy(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Qa(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),o=a.filter((c=>i.indexOf(c)===-1));return Me.forEach(o,(c=>n.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Me.resolve(!0):tm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new mt(Ke.FAILED_PRECONDITION,p3);return!1}}return!(!this.networkEnabled||!this.inForeground)||wy(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||o&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&ot("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new Tj(e,is.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>wy(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return D2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hae(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return M2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){ot("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?pne:d===16?fne:d===15?c8:d===14?DF:d===13?MF:d===12?hne:d===11?RF:void Rt()})(this.hi);let o;return this.Ri.runTransaction(e,a,i,(c=>(o=new Tj(c,this.Qr?this.Qr.next():is.oe),r==="readwrite-primary"?this.wi(o).next((d=>!!d||this.Si(o))).next((d=>{if(!d)throw xa(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new mt(Ke.FAILED_PRECONDITION,EF);return n(o)})).next((d=>this.Di(o).next((()=>d)))):this.Ki(o).next((()=>n(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Ki(e){return tm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new mt(Ke.FAILED_PRECONDITION,p3)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tm(e).put("owner",r)}static D(){return Eu.D()}bi(e){const r=tm(e);return r.get("owner").next((n=>this.vi(n)?(ot("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Me.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(xa(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;MV()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return ot("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return xa("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){xa("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tm(t){return Qa(t,"owner")}function wy(t){return Qa(t,"clientMetadata")}function Lq(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=Ar(),a=Ar();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new T8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return MV()?8:CF(Wa())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Oae;return this.Xi(e,r,o).next((c=>{if(i.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(vh()<=Rr.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",bh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Me.resolve()):(vh()<=Rr.DEBUG&&ot("QueryEngine","Query:",bh(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(vh()<=Rr.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",bh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rs(r))):Me.resolve())}Yi(e,r){if(CI(r))return Me.resolve(null);let n=Rs(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=Lv(r,null,"F"),n=Rs(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=Ar(...i);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,Lv(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return CI(r)||a.isEqual(Ht.min())?Me.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(r,i);return this.ns(r,o,n,a)?Me.resolve(null):(vh()<=Rr.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bh(r)),this.rs(e,o,r,TF(a,-1)).next((c=>c)))}))}ts(e,r){let n=new An(JF(e));return r.forEach(((a,i)=>{gx(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return vh()<=Rr.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",bh(r)),this.Ji.getDocumentsMatchingQuery(e,r,Ps.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iae{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new zn(mr),this._s=new Hu((i=>e0(i)),px),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function $q(t,e,r,n){return new Iae(t,e,r,n)}async function zq(t,e){const r=$t(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],c=[];let d=Ar();for(const h of a){o.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function Rae(t,e){const r=$t(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,x=m.keys();let y=Me.resolve();return x.forEach((w=>{y=y.next((()=>p.getEntry(d,w))).next((N=>{const S=h.docVersions.get(w);Ut(S!==null),N.version.compareTo(S)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=Ar();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function Uq(t){const e=$t(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Mae(t,e){const r=$t(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const x=a.get(m);if(!x)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let y=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(wa.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):p.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(p.resumeToken,n)),a=a.insert(m,y),(function(N,S,E){return N.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(x,y,p)&&c.push(r.Ur.updateTargetData(i,y))}));let d=Os(),h=Ar();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(Dae(i,o,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Ht.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return Me.waitFor(c).next((()=>o.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function Dae(t,e,r){let n=Ar(),a=Ar();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let o=Os();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Ht.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):ot("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function Pae(t,e){const r=$t(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function Uv(t,e){const r=$t(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,Me.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new Xl(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Zh(t,e,r){const n=$t(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!qu(o))throw o;ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function zj(t,e,r){const n=$t(t);let a=Ht.min(),i=Ar();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,p){const m=$t(d),x=m._s.get(p);return x!==void 0?Me.resolve(m.os.get(x)):m.Ur.getTargetData(h,p)})(n,o,Rs(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Ht.min(),r?i:Ar()))).next((c=>(qq(n,YF(e),c),{documents:c,Ts:i})))))}function Vq(t,e){const r=$t(t),n=$t(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((o=>o?o.target:null))))}function Fq(t,e){const r=$t(t),n=r.us.get(e)||Ht.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,TF(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(qq(r,e,a),a)))}function qq(t,e,r){let n=t.us.get(e)||Ht.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function iR(t,e){return`firestore_clients_${t}_${e}`}function sR(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function m3(t,e){return`firestore_targets_${t}_${e}`}class Vv{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,o=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return o&&a.error&&(o=typeof a.error.message=="string"&&typeof a.error.code=="string",o&&(i=new mt(a.error.code,a.error.message))),o?new Vv(e,r,a.state,i):(xa("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Im{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new mt(n.error.code,n.error.message))),i?new Im(e,n.state,a):(xa("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fv{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=f8();for(let o=0;a&&o<n.activeTargetIds.length;++o)a=OF(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return a?new Fv(e,i):(xa("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class A8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new A8(r.clientId,r.onlineState):(xa("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Uj{constructor(){this.activeTargetIds=f8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g3{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new zn(mr),this.started=!1,this.bs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=iR(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Uj),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(iR(this.persistenceKey,n));if(a){const i=Fv.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(m3(this.persistenceKey,e));if(a){const i=Im.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(m3(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ot("SharedClientState","READ",e,r),r}setItem(e,r){ot("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ot("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(ot("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void xa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let o=is.oe;if(i!=null)try{const c=JSON.parse(i);Ut(typeof c=="number"),o=c}catch(c){xa("SharedClientState","Failed to read sequence number from WebStorage",c)}return o})(r.newValue);n!==is.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new Vv(this.currentUser,e,r,n),i=sR(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=sR(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=m3(this.persistenceKey,e),i=new Im(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Fv.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return Vv.Rs(new Ai(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return Im.Rs(a,r)}Ls(e){return A8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ot("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),o=[],c=[];return i.forEach((d=>{a.has(d)||o.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(o,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=f8();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class Hq{constructor(){this.so=new Uj,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Uj,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lae{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sy=null;function x3(){return Sy===null?Sy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sy++,"0x"+Sy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="WebChannelConnection";class zae extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,o){const c=x3(),d=this.xo(r,n.toUriEncodedString());ot("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(r,d,h,a).then((p=>(ot("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw Zm("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,o,c){return this.Mo(r,n,a,i,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bf})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>r[o]=i)),a&&a.headers.forEach(((i,o)=>r[o]=i))}xo(r,n){const a=Bae[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=x3();return new Promise(((o,c)=>{const d=new vF;d.setWithCredentials(!0),d.listenOnce(bF.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case cv.NO_ERROR:const p=d.getResponseJson();ot(ji,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case cv.TIMEOUT:ot(ji,`RPC '${e}' ${i} timed out`),c(new mt(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case cv.HTTP_ERROR:const m=d.getStatus();if(ot(ji,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x==null?void 0:x.error;if(y&&y.status&&y.message){const w=(function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(E)>=0?E:Ke.UNKNOWN})(y.status);c(new mt(w,y.message))}else c(new mt(Ke.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new mt(Ke.UNAVAILABLE,"Connection failed."));break;default:Rt()}}finally{ot(ji,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);ot(ji,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=x3(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NF(),c=SF(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");ot(ji,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=o.createWebChannel(p,d);let x=!1,y=!1;const w=new $ae({Io:S=>{y?ot(ji,`Not sending because RPC '${e}' stream ${a} is closed:`,S):(x||(ot(ji,`Opening RPC '${e}' stream ${a} transport.`),m.open(),x=!0),ot(ji,`RPC '${e}' stream ${a} sending:`,S),m.send(S))},To:()=>m.close()}),N=(S,E,C)=>{S.listen(E,(M=>{try{C(M)}catch(L){setTimeout((()=>{throw L}),0)}}))};return N(m,ym.EventType.OPEN,(()=>{y||(ot(ji,`RPC '${e}' stream ${a} transport opened.`),w.yo())})),N(m,ym.EventType.CLOSE,(()=>{y||(y=!0,ot(ji,`RPC '${e}' stream ${a} transport closed`),w.So())})),N(m,ym.EventType.ERROR,(S=>{y||(y=!0,Zm(ji,`RPC '${e}' stream ${a} transport errored:`,S),w.So(new mt(Ke.UNAVAILABLE,"The operation could not be completed")))})),N(m,ym.EventType.MESSAGE,(S=>{var E;if(!y){const C=S.data[0];Ut(!!C);const M=C,L=M.error||((E=M[0])===null||E===void 0?void 0:E.error);if(L){ot(ji,`RPC '${e}' stream ${a} received error:`,L);const I=L.status;let R=(function(k){const F=Ea[k];if(F!==void 0)return dq(F)})(I),A=L.message;R===void 0&&(R=Ke.INTERNAL,A="Unknown error status: "+I+" with message "+L.message),y=!0,w.So(new mt(R,A)),m.close()}else ot(ji,`RPC '${e}' stream ${a} received:`,C),w.bo(C)}})),N(c,wF.STAT_EVENT,(S=>{S.stat===_j.PROXY?ot(ji,`RPC '${e}' stream ${a} detected buffering proxy`):S.stat===_j.NOPROXY&&ot(ji,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{w.wo()}),0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gq(){return typeof window<"u"?window:null}function gv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t){return new Gne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&ot("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e,r,n,a,i,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new E8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ke.RESOURCE_EXHAUSTED?(xa(r.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new mt(Ke.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Uae extends Wq{constructor(e,r,n,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Xne(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Ht.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ht.min():o.readTime?ii(o.readTime):Ht.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Dj(this.serializer),r.addTarget=(function(i,o){let c;const d=o.target;if(c=Dv(d)?{documents:vq(i,d)}:{query:bq(i,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=pq(i,o.resumeToken);const h=Rj(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ht.min())>0){c.readTime=Jh(i,o.snapshotVersion.toTimestamp());const h=Rj(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=Jne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Dj(this.serializer),r.removeTarget=e,this.a_(r)}}class Vae extends Wq{constructor(e,r,n,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,Ut(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Yne(e.writeResults,e.commitTime),n=ii(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Dj(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>ug(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new mt(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,Mj(r,n),a,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new mt(Ke.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,Mj(r,n),a,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mt(Ke.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class qae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xa(r),this.D_=!1):ot("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{n.enqueueAndForget((async()=>{S0(this)&&(ot("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=$t(d);h.L_.add(4),await bx(h),h.q_.set("Unknown"),h.L_.delete(4),await B2(h)})(this))}))})),this.q_=new qae(n,a)}}async function B2(t){if(S0(t))for(const e of t.B_)await e(!0)}async function bx(t){for(const e of t.B_)await e(!1)}function $2(t,e){const r=$t(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),O8(r)?C8(r):Vf(r).r_()&&k8(r,e))}function ef(t,e){const r=$t(t),n=Vf(r);r.N_.delete(e),n.r_()&&Kq(r,e),r.N_.size===0&&(n.r_()?n.o_():S0(r)&&r.q_.set("Unknown"))}function k8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ht.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Vf(t).A_(e)}function Kq(t,e){t.Q_.xe(e),Vf(t).R_(e)}function C8(t){t.Q_=new Vne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Vf(t).start(),t.q_.v_()}function O8(t){return S0(t)&&!Vf(t).n_()&&t.N_.size>0}function S0(t){return $t(t).L_.size===0}function Qq(t){t.Q_=void 0}async function Gae(t){t.q_.set("Online")}async function Wae(t){t.N_.forEach(((e,r)=>{k8(t,e)}))}async function Kae(t,e){Qq(t),O8(t)?(t.q_.M_(e),C8(t)):t.q_.set("Unknown")}async function Qae(t,e,r){if(t.q_.set("Online"),e instanceof fq&&e.state===2&&e.cause)try{await(async function(a,i){const o=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await qv(t,n)}else if(e instanceof mv?t.Q_.Ke(e):e instanceof hq?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ht.min()))try{const n=await Uq(t.localStore);r.compareTo(n)>=0&&await(function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(wa.EMPTY_BYTE_STRING,p.snapshotVersion)),Kq(i,d);const m=new Xl(p.target,d,h,p.sequenceNumber);k8(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){ot("RemoteStore","Failed to raise snapshot:",n),await qv(t,n)}}async function qv(t,e,r){if(!qu(e))throw e;t.L_.add(1),await bx(t),t.q_.set("Offline"),r||(r=()=>Uq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ot("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await B2(t)}))}function Xq(t,e){return e().catch((r=>qv(t,r,e)))}async function Uf(t){const e=$t(t),r=Lu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xae(e);)try{const a=await Pae(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Yae(e,a)}catch(a){await qv(e,a)}Yq(e)&&Jq(e)}function Xae(t){return S0(t)&&t.O_.length<10}function Yae(t,e){t.O_.push(e);const r=Lu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Yq(t){return S0(t)&&!Lu(t).n_()&&t.O_.length>0}function Jq(t){Lu(t).start()}async function Jae(t){Lu(t).p_()}async function Zae(t){const e=Lu(t);for(const r of t.O_)e.m_(r.mutations)}async function eie(t,e,r){const n=t.O_.shift(),a=y8.from(n,e,r);await Xq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Uf(t)}async function tie(t,e){e&&Lu(t).V_&&await(async function(n,a){if((function(o){return uq(o)&&o!==Ke.ABORTED})(a.code)){const i=n.O_.shift();Lu(n).s_(),await Xq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await Uf(n)}})(t,e),Yq(t)&&Jq(t)}async function lR(t,e){const r=$t(t);r.asyncQueue.verifyOperationInProgress(),ot("RemoteStore","RemoteStore received new credentials");const n=S0(r);r.L_.add(3),await bx(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await B2(r)}async function Vj(t,e){const r=$t(t);e?(r.L_.delete(2),await B2(r)):e||(r.L_.add(2),await bx(r),r.q_.set("Unknown"))}function Vf(t){return t.K_||(t.K_=(function(r,n,a){const i=$t(r);return i.w_(),new Uae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:Gae.bind(null,t),Ro:Wae.bind(null,t),mo:Kae.bind(null,t),d_:Qae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),O8(t)?C8(t):t.q_.set("Unknown")):(await t.K_.stop(),Qq(t))}))),t.K_}function Lu(t){return t.U_||(t.U_=(function(r,n,a){const i=$t(r);return i.w_(),new Vae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Jae.bind(null,t),mo:tie.bind(null,t),f_:Zae.bind(null,t),g_:eie.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Uf(t)):(await t.U_.stop(),t.O_.length>0&&(ot("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new Io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const o=Date.now()+n,c=new I8(e,r,o,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R8(t,e){if(xa("AsyncQueue",`${e}: ${t}`),qu(t))return new mt(Ke.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.comparator=e?(r,n)=>e(r,n)||_t.comparator(r.key,n.key):(r,n)=>_t.comparator(r.key,n.key),this.keyedMap=vm(),this.sortedSet=new zn(this.comparator)}static emptySet(e){return new Ih(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ih)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ih;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.W_=new zn(_t.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Rt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class tf{constructor(e,r,n,a,i,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new tf(e,r,Ih.emptySet(r),o,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&O2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class nie{constructor(){this.queries=uR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=$t(r),i=a.queries;a.queries=uR(),i.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new mt(Ke.ABORTED,"Firestore shutting down"))}}function uR(){return new Hu((t=>XF(t)),O2)}async function M8(t,e){const r=$t(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new rie,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=R8(o,`Initialization of query '${bh(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&P8(r)}async function D8(t,e){const r=$t(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function aie(t,e){const r=$t(t);let n=!1;for(const a of e){const i=a.query,o=r.queries.get(i);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&P8(r)}function iie(t,e,r){const n=$t(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function P8(t){t.Y_.forEach((e=>{e.next()}))}var Fj,dR;(dR=Fj||(Fj={})).ea="default",dR.Cache="cache";class L8{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new tf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=tf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fj.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e){this.key=e}}class eH{constructor(e){this.key=e}}class sie{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ar(),this.mutatedKeys=Ar(),this.Aa=JF(e),this.Ra=new Ih(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new cR,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const x=a.get(p),y=gx(this.query,m)?m:null,w=!!x&&this.mutatedKeys.has(x.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;x&&y?x.data.isEqual(y.data)?w!==N&&(n.track({type:3,doc:y}),S=!0):this.ga(x,y)||(n.track({type:2,doc:y}),S=!0,(d&&this.Aa(y,d)>0||h&&this.Aa(y,h)<0)&&(c=!0)):!x&&y?(n.track({type:0,doc:y}),S=!0):x&&!y&&(n.track({type:1,doc:x}),S=!0,(d||h)&&(c=!0)),S&&(y?(o=o.add(y),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:o,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((p,m)=>(function(y,w){const N=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt()}};return N(y)-N(w)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new tf(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ar(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new eH(n))})),this.da.forEach((n=>{e.has(n)||r.push(new Zq(n))})),r}ba(e){this.Ta=e.Ts,this.da=Ar();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return tf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class oie{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class lie{constructor(e){this.key=e,this.va=!1}}class cie{constructor(e,r,n,a,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Hu((c=>XF(c)),O2),this.Ma=new Map,this.xa=new Set,this.Oa=new zn(_t.comparator),this.Na=new Map,this.La=new _8,this.Ba={},this.ka=new Map,this.qa=a0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uie(t,e,r=!0){const n=z2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await tH(n,e,r,!0),a}async function die(t,e){const r=z2(t);await tH(r,e,!0,!1)}async function tH(t,e,r,n){const a=await Uv(t.localStore,Rs(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await B8(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&$2(t.remoteStore,a),c}async function B8(t,e,r,n,a){t.Ka=(m,x,y)=>(async function(N,S,E,C){let M=S.view.ma(E);M.ns&&(M=await zj(N.localStore,S.query,!1).then((({documents:A})=>S.view.ma(A,M))));const L=C&&C.targetChanges.get(S.targetId),I=C&&C.targetMismatches.get(S.targetId)!=null,R=S.view.applyChanges(M,N.isPrimaryClient,L,I);return qj(N,S.targetId,R.wa),R.snapshot})(t,m,x,y);const i=await zj(t.localStore,e,!0),o=new sie(e,i.Ts),c=o.ma(i.documents),d=vx.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);qj(t,r,h.wa);const p=new oie(e,r,o);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function hie(t,e,r){const n=$t(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((o=>!O2(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Zh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&ef(n.remoteStore,a.targetId),rf(n,a.targetId)})).catch(Fu)):(rf(n,a.targetId),await Zh(n.localStore,a.targetId,!0))}async function fie(t,e){const r=$t(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),ef(r.remoteStore,n.targetId))}async function pie(t,e,r){const n=V8(t);try{const a=await(function(o,c){const d=$t(o),h=na.now(),p=c.reduce(((y,w)=>y.add(w.key)),Ar());let m,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let w=Os(),N=Ar();return d.cs.getEntries(y,p).next((S=>{w=S,w.forEach(((E,C)=>{C.isValidDocument()||(N=N.add(E))}))})).next((()=>d.localDocuments.getOverlayedDocuments(y,w))).next((S=>{m=S;const E=[];for(const C of c){const M=Bne(C,m.get(C.key).overlayedDocument);M!=null&&E.push(new bc(C.key,M,zF(M.value.mapValue),ya.exists(!0)))}return d.mutationQueue.addMutationBatch(y,h,E,c)})).next((S=>{x=S;const E=S.applyToLocalDocumentSet(m,N);return d.documentOverlayCache.saveOverlays(y,S.batchId,E)}))})).then((()=>({batchId:x.batchId,changes:eq(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new zn(mr)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await Gu(n,a.changes),await Uf(n.remoteStore)}catch(a){const i=R8(a,"Failed to persist write");r.reject(i)}}async function rH(t,e){const r=$t(t);try{const n=await Mae(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const o=r.Na.get(i);o&&(Ut(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Ut(o.va):a.removedDocuments.size>0&&(Ut(o.va),o.va=!1))})),await Gu(r,n,e)}catch(n){await Fu(n)}}function hR(t,e,r){const n=$t(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=$t(o);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const x of m.j_)x.Z_(c)&&(h=!0)})),h&&P8(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function mie(t,e,r){const n=$t(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let o=new zn(_t.comparator);o=o.insert(i,Xn.newNoDocument(i,Ht.min()));const c=Ar().add(i),d=new yx(Ht.min(),new Map,new zn(mr),o,c);await rH(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),U8(n)}else await Zh(n.localStore,e,!1).then((()=>rf(n,e,r))).catch(Fu)}async function gie(t,e){const r=$t(t),n=e.batch.batchId;try{const a=await Rae(r.localStore,e);z8(r,n,null),$8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Gu(r,a)}catch(a){await Fu(a)}}async function xie(t,e,r){const n=$t(t);try{const a=await(function(o,c){const d=$t(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Ut(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);z8(n,e,r),$8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Gu(n,a)}catch(a){await Fu(a)}}function $8(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function z8(t,e,r){const n=$t(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function rf(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||nH(t,n)}))}function nH(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(ef(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),U8(t))}function qj(t,e,r){for(const n of r)n instanceof Zq?(t.La.addReference(n.key,e),yie(t,n)):n instanceof eH?(ot("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||nH(t,n.key)):Rt()}function yie(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ot("SyncEngine","New document in limbo: "+r),t.xa.add(n),U8(t))}function U8(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new _t(Kr.fromString(e)),n=t.qa.next();t.Na.set(n,new lie(r)),t.Oa=t.Oa.insert(r,n),$2(t.remoteStore,new Xl(Rs(mx(r.path)),n,"TargetPurposeLimboResolution",is.oe))}}async function Gu(t,e,r){const n=$t(t),a=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=T8.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const p=$t(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Me.forEach(h,(x=>Me.forEach(x.$i,(y=>p.persistence.referenceDelegate.addReference(m,x.targetId,y))).next((()=>Me.forEach(x.Ui,(y=>p.persistence.referenceDelegate.removeReference(m,x.targetId,y)))))))))}catch(m){if(!qu(m))throw m;ot("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const x=m.targetId;if(!m.fromCache){const y=p.os.get(x),w=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(w);p.os=p.os.insert(x,N)}}})(n.localStore,i))}async function vie(t,e){const r=$t(t);if(!r.currentUser.isEqual(e)){ot("SyncEngine","User change. New user:",e.toKey());const n=await zq(r.localStore,e);r.currentUser=e,(function(i,o){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new mt(Ke.CANCELLED,o))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Gu(r,n.hs)}}function bie(t,e){const r=$t(t),n=r.Na.get(e);if(n&&n.va)return Ar().add(n.key);{let a=Ar();const i=r.Ma.get(e);if(!i)return a;for(const o of i){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}async function wie(t,e){const r=$t(t),n=await zj(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&qj(r,e.targetId,a.wa),a}async function Sie(t,e){const r=$t(t);return Fq(r.localStore,e).then((n=>Gu(r,n)))}async function Nie(t,e,r,n){const a=$t(t),i=await(function(c,d){const h=$t(c),p=$t(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((x=>x?h.localDocuments.getDocuments(m,x):Me.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await Uf(a.remoteStore):r==="acknowledged"||r==="rejected"?(z8(a,e,n||null),$8(a,e),(function(c,d){$t($t(c).mutationQueue).On(d)})(a.localStore,e)):Rt(),await Gu(a,i)):ot("SyncEngine","Cannot apply mutation batch with id: "+e)}async function _ie(t,e){const r=$t(t);if(z2(r),V8(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await fR(r,n.toArray());r.Qa=!0,await Vj(r.remoteStore,!0);for(const i of a)$2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,o)=>{r.sharedClientState.isLocalQueryTarget(o)?n.push(o):a=a.then((()=>(rf(r,o),Zh(r.localStore,o,!0)))),ef(r.remoteStore,o)})),await a,await fR(r,n),(function(o){const c=$t(o);c.Na.forEach(((d,h)=>{ef(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new zn(_t.comparator)})(r),r.Qa=!1,await Vj(r.remoteStore,!1)}}async function fR(t,e,r){const n=$t(t),a=[],i=[];for(const o of e){let c;const d=n.Ma.get(o);if(d&&d.length!==0){c=await Uv(n.localStore,Rs(d[0]));for(const h of d){const p=n.Fa.get(h),m=await wie(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await Vq(n.localStore,o);c=await Uv(n.localStore,h),await B8(n,aH(h),o,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function aH(t){return KF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jie(t){return(function(r){return $t($t(r).persistence).Qi()})($t(t).localStore)}async function Tie(t,e,r,n){const a=$t(t);if(a.Qa)return void ot("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const o=await Fq(a.localStore,YF(i[0])),c=yx.createSynthesizedRemoteEventForCurrentChange(e,r==="current",wa.EMPTY_BYTE_STRING);await Gu(a,o,c);break}case"rejected":await Zh(a.localStore,e,!0),rf(a,e,n);break;default:Rt()}}async function Aie(t,e,r){const n=z2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){ot("SyncEngine","Adding an already active target "+a);continue}const i=await Vq(n.localStore,a),o=await Uv(n.localStore,i);await B8(n,aH(i),o.targetId,!1,o.resumeToken),$2(n.remoteStore,o)}for(const a of r)n.Ma.has(a)&&await Zh(n.localStore,a,!1).then((()=>{ef(n.remoteStore,a),rf(n,a)})).catch(Fu)}}function z2(t){const e=$t(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mie.bind(null,e),e.Ca.d_=aie.bind(null,e.eventManager),e.Ca.$a=iie.bind(null,e.eventManager),e}function V8(t){const e=$t(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xie.bind(null,e),e}class dg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=L2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return $q(this.persistence,new Bq,e.initialUser,this.serializer)}Ga(e){return new Pq(P2.Zr,this.serializer)}Wa(e){return new Hq}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dg.provider={build:()=>new dg};class iH extends dg{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await V8(this.Ja.syncEngine),await Uf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return $q(this.persistence,new Bq,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new mae(n,e.asyncQueue,r)}Ha(e,r){const n=new Qre(r,this.persistence);return new Kre(e.asyncQueue,n)}Ga(e){const r=Lq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new j8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Gq(),gv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Hq}}class Eie extends iH{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof g3&&(this.sharedClientState.syncEngine={no:Nie.bind(null,r),ro:Tie.bind(null,r),io:Aie.bind(null,r),Qi:jie.bind(null,r),eo:Sie.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await _ie(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=Gq();if(!g3.D(r))throw new mt(Ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Lq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new g3(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class hg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>hR(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=vie.bind(null,this.syncEngine),await Vj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nie})()}createDatastore(e){const r=L2(e.databaseInfo.databaseId),n=(function(i){return new zae(i)})(e.databaseInfo);return(function(i,o,c,d){return new Fae(i,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,o,c){return new Hae(n,a,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>hR(this.syncEngine,r,0)),(function(){return oR.D()?new oR:new Lae})())}createSyncEngine(e,r){return(function(a,i,o,c,d,h,p){const m=new cie(a,i,o,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=$t(a);ot("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await bx(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}hg.provider={build:()=>new hg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new mt(Ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const o=$t(a),c={documents:i.map((m=>cg(o.serializer,m)))},d=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Kr.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const x=Qne(o.serializer,m);h.set(x.key.toString(),x)}));const p=[];return i.forEach((m=>{const x=h.get(m.toString());Ut(!!x),p.push(x)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new xx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=_t.fromPath(n);this.mutations.push(new g8(a,this.precondition(a)))})),await(async function(n,a){const i=$t(n),o={writes:a.map((c=>ug(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,Kr.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Rt();r=Ht.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new mt(Ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Ht.min())?ya.exists(!1):ya.updateTime(r):ya.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ht.min()))throw new mt(Ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ya.updateTime(r)}return ya.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new E8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new kie(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!fx(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!uq(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Ai.UNAUTHENTICATED,this.clientId=_F.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{ot("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(ot("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=R8(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function y3(t,e){t.asyncQueue.verifyOperationInProgress(),ot("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await zq(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function pR(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Iie(t);ot("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>lR(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>lR(e.remoteStore,a))),t._onlineComponents=e}async function Iie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ot("FirestoreClient","Using user provided OfflineComponentProvider");try{await y3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Ke.FAILED_PRECONDITION||a.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Zm("Error using user provided cache. Falling back to memory cache: "+r),await y3(t,new dg)}}else ot("FirestoreClient","Using default OfflineComponentProvider"),await y3(t,new dg);return t._offlineComponents}async function q8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ot("FirestoreClient","Using user provided OnlineComponentProvider"),await pR(t,t._uninitializedComponentsProvider._online)):(ot("FirestoreClient","Using default OnlineComponentProvider"),await pR(t,new hg))),t._onlineComponents}function Rie(t){return q8(t).then((e=>e.syncEngine))}function Mie(t){return q8(t).then((e=>e.datastore))}async function Hv(t){const e=await q8(t),r=e.eventManager;return r.onListen=uie.bind(null,e.syncEngine),r.onUnlisten=hie.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=die.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=fie.bind(null,e.syncEngine),r}function Die(t,e,r={}){const n=new Io;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new F8({next:x=>{p.Za(),o.enqueueAndForget((()=>D8(i,m)));const y=x.docs.has(c);!y&&x.fromCache?h.reject(new mt(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&x.fromCache&&d&&d.source==="server"?h.reject(new mt(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new L8(mx(c.path),p,{includeMetadataChanges:!0,_a:!0});return M8(i,m)})(await Hv(t),t.asyncQueue,e,r,n))),n.promise}function Pie(t,e,r={}){const n=new Io;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new F8({next:x=>{p.Za(),o.enqueueAndForget((()=>D8(i,m))),x.fromCache&&d.source==="server"?h.reject(new mt(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new L8(c,p,{includeMetadataChanges:!0,_a:!0});return M8(i,m)})(await Hv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t,e,r){if(!r)throw new mt(Ke.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Lie(t,e,r,n){if(e===!0&&n===!0)throw new mt(Ke.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function gR(t){if(!_t.isDocumentKey(t))throw new mt(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xR(t){if(_t.isDocumentKey(t))throw new mt(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function U2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Rt()}function ls(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new mt(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=U2(t);throw new mt(Ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Bie(t,e){if(e<=0)throw new mt(Ke.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new mt(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new mt(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sH((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new mt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new mt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new mt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class H8{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new mt(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yR(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Bre;switch(n.type){case"firstParty":return new Ure(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new mt(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=mR.get(r);n&&(ot("ComponentProvider","Removing Datastore"),mR.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wc(this.firestore,e,this._query)}}class vi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ku(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vi(this.firestore,e,this._key)}}class ku extends wc{constructor(e,r,n){super(e,r,mx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vi(this.firestore,null,new _t(e))}withConverter(e){return new ku(this.firestore,e,this._path)}}function qt(t,e,...r){if(t=En(t),oH("collection","path",e),t instanceof H8){const n=Kr.fromString(e,...r);return xR(n),new ku(t,null,n)}{if(!(t instanceof vi||t instanceof ku))throw new mt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kr.fromString(e,...r));return xR(n),new ku(t.firestore,null,n)}}function ct(t,e,...r){if(t=En(t),arguments.length===1&&(e=_F.newId()),oH("doc","path",e),t instanceof H8){const n=Kr.fromString(e,...r);return gR(n),new vi(t,null,new _t(n))}{if(!(t instanceof vi||t instanceof ku))throw new mt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kr.fromString(e,...r));return gR(n),new vi(t.firestore,t instanceof ku?t.converter:null,new _t(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new E8(this,"async_queue_retry"),this.Vu=()=>{const n=gv();n&&ot("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=gv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=gv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Io;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!qu(e))throw e;ot("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw xa("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=I8.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&Rt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function bR(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class ol extends H8{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new vR,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vR(e),this._firestoreClient=void 0,await e}}}function $ie(t,e,r){r||(r="(default)");const n=cx(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(qh(i,e))return a;throw new mt(Ke.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new mt(Ke.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new mt(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function wx(t){if(t._terminated)throw new mt(Ke.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zie(t),t._firestoreClient}function zie(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new gne(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,sH(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Oie(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new i0(wa.fromBase64String(e))}catch(r){throw new mt(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new i0(wa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new mt(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ra(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new mt(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new mt(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mr(this._lat,e._lat)||mr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uie=/^__.*__$/;class Vie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new bc(e,this.data,this.fieldMask,r,this.fieldTransforms):new zf(e,this.data,r,this.fieldTransforms)}}class lH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new bc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function cH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt()}}class V2{constructor(e,r,n,a,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new V2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cH(this.Cu)&&Uie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Fie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||L2(e)}Qu(e,r,n,a=!1){return new V2({Cu:e,methodName:r,qu:n,path:ra.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _x(t){const e=t._freezeSettings(),r=L2(t._databaseId);return new Fie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function K8(t,e,r,n,a,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);Y8("Data must be an object, but it was:",o,n);const c=hH(n,o);let d,h;if(i.merge)d=new ss(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const x=Hj(e,m,r);if(!o.contains(x))throw new mt(Ke.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);pH(p,x)||p.push(x)}d=new ss(p),h=o.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=o.fieldTransforms;return new Vie(new yi(c),d,h)}class F2 extends Nx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof F2}}function qie(t,e,r){return new V2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Q8 extends Nx{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=qie(this,e,!0),n=this.Ku.map((i=>Ff(i,r))),a=new t0(n);return new m8(e.path,a)}isEqual(e){return e instanceof Q8&&qh(this.Ku,e.Ku)}}class X8 extends Nx{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Yh(e.serializer,nq(e.serializer,this.$u));return new m8(e.path,r)}isEqual(e){return e instanceof X8&&this.$u===e.$u}}function uH(t,e,r,n){const a=t.Qu(1,e,r);Y8("Data must be an object, but it was:",a,n);const i=[],o=yi.empty();w0(n,((d,h)=>{const p=J8(e,d,r);h=En(h);const m=a.Nu(p);if(h instanceof F2)i.push(p);else{const x=Ff(h,m);x!=null&&(i.push(p),o.set(p,x))}}));const c=new ss(i);return new lH(o,c,a.fieldTransforms)}function dH(t,e,r,n,a,i){const o=t.Qu(1,e,r),c=[Hj(e,n,r)],d=[a];if(i.length%2!=0)throw new mt(Ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)c.push(Hj(e,i[x])),d.push(i[x+1]);const h=[],p=yi.empty();for(let x=c.length-1;x>=0;--x)if(!pH(h,c[x])){const y=c[x];let w=d[x];w=En(w);const N=o.Nu(y);if(w instanceof F2)h.push(y);else{const S=Ff(w,N);S!=null&&(h.push(y),p.set(y,S))}}const m=new ss(h);return new lH(p,m,o.fieldTransforms)}function Hie(t,e,r,n=!1){return Ff(r,t.Qu(n?4:3,e))}function Ff(t,e){if(fH(t=En(t)))return Y8("Unsupported field value:",e,t),hH(t,e);if(t instanceof Nx)return(function(n,a){if(!cH(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let o=0;for(const c of n){let d=Ff(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=En(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return nq(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=na.fromDate(n);return{timestampValue:Jh(a.serializer,i)}}if(n instanceof na){const i=new na(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Jh(a.serializer,i)}}if(n instanceof G8)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof i0)return{bytesValue:pq(a.serializer,n._byteString)};if(n instanceof vi){const i=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:w8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof W8)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return p8(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${U2(n)}`)})(t,e)}function hH(t,e){const r={};return PF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):w0(t,((n,a)=>{const i=Ff(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function fH(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof na||t instanceof G8||t instanceof i0||t instanceof vi||t instanceof Nx||t instanceof W8)}function Y8(t,e,r){if(!fH(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=U2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Hj(t,e,r){if((e=En(e))instanceof Sx)return e._internalPath;if(typeof e=="string")return J8(t,e);throw Gv("Field path arguments must be of type string or ",t,!1,void 0,r)}const Gie=new RegExp("[~\\*/\\[\\]]");function J8(t,e,r){if(e.search(Gie)>=0)throw Gv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Sx(...e.split("."))._internalPath}catch{throw Gv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Gv(t,e,r,n,a){const i=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new mt(Ke.INVALID_ARGUMENT,c+t+d)}function pH(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Wie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(q2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Wie extends Wv{data(){return super.data()}}function q2(t,e){return typeof e=="string"?J8(t,e):e instanceof Sx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new mt(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z8{}class eE extends Z8{}function Ur(t,e,...r){let n=[];e instanceof Z8&&n.push(e),n=n.concat(r),(function(i){const o=i.filter((d=>d instanceof tE)).length,c=i.filter((d=>d instanceof H2)).length;if(o>1||o>0&&c>0)throw new mt(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class H2 extends eE{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new H2(e,r,n)}_apply(e){const r=this._parse(e);return gH(e._query,r),new wc(e.firestore,e.converter,Ij(e._query,r))}_parse(e){const r=_x(e.firestore);return(function(i,o,c,d,h,p,m){let x;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new mt(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){SR(m,p);const y=[];for(const w of m)y.push(wR(d,i,w));x={arrayValue:{values:y}}}else x=wR(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||SR(m,p),x=Hie(c,o,m,p==="in"||p==="not-in");return Mr.create(h,p,x)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function pn(t,e,r){const n=e,a=q2("where",t);return H2._create(a,n,r)}class tE extends Z8{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new tE(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:mn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let o=a;const c=i.getFlattenedFilters();for(const d of c)gH(o,d),o=Ij(o,d)})(e._query,r),new wc(e.firestore,e.converter,Ij(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rE extends eE{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new rE(e,r)}_apply(e){const r=(function(a,i,o){if(a.startAt!==null)throw new mt(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new mt(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new og(i,o)})(e._query,this._field,this._direction);return new wc(e.firestore,e.converter,(function(a,i){const o=a.explicitOrderBy.concat([i]);return new $f(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function Ho(t,e="asc"){const r=e,n=q2("orderBy",t);return rE._create(n,r)}class nE extends eE{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new nE(e,r,n)}_apply(e){return new wc(e.firestore,e.converter,Lv(e._query,this._limit,this._limitType))}}function bo(t){return Bie("limit",t),nE._create("limit",t,"F")}function wR(t,e,r){if(typeof(r=En(r))=="string"){if(r==="")throw new mt(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QF(e)&&r.indexOf("/")!==-1)throw new mt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Kr.fromString(r));if(!_t.isDocumentKey(n))throw new mt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ig(t,new _t(n))}if(r instanceof vi)return ig(t,r._key);throw new mt(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${U2(r)}.`)}function SR(t,e){if(!Array.isArray(t)||t.length===0)throw new mt(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gH(t,e){const r=(function(a,i){for(const o of a)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new mt(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new mt(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class xH{convertValue(e,r="none"){switch(Zd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Rt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return w0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>Qn(o.doubleValue)));return new W8(i)}convertGeoPoint(e){return new G8(Qn(e.latitude),Qn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=d8(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ng(e));default:return null}}convertTimestamp(e){const r=uc(e);return new na(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Kr.fromString(e);Ut(_q(n));const a=new Jd(n.get(1),n.get(3)),i=new _t(n.popFirst(5));return a.isEqual(r)||xa(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Kie extends xH{constructor(e){super(),this.firestore=e}convertBytes(e){return new i0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iE extends Wv{constructor(e,r,n,a,i,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new xv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(q2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class xv extends iE{data(e={}){return super.data(e)}}class yH{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new _h(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new xv(this._firestore,this._userDataWriter,n.key,n,new _h(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new mt(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new xv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new _h(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new xv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new _h(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:Qie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Qie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){t=ls(t,vi);const e=ls(t.firestore,ol);return Die(wx(e),t._key).then((r=>vH(e,t,r)))}class G2 extends xH{constructor(e){super(),this.firestore=e}convertBytes(e){return new i0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,r)}}function wd(t){t=ls(t,wc);const e=ls(t.firestore,ol),r=wx(e),n=new G2(e);return mH(t._query),Pie(r,t._query).then((a=>new yH(e,n,t,a)))}function ea(t,e,r){t=ls(t,vi);const n=ls(t.firestore,ol),a=aE(t.converter,e,r);return W2(n,[K8(_x(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ya.none())])}function ur(t,e,r,...n){t=ls(t,vi);const a=ls(t.firestore,ol),i=_x(a);let o;return o=typeof(e=En(e))=="string"||e instanceof Sx?dH(i,"updateDoc",t._key,e,r,n):uH(i,"updateDoc",t._key,e),W2(a,[o.toMutation(t._key,ya.exists(!0))])}function Va(t){return W2(ls(t.firestore,ol),[new xx(t._key,ya.none())])}function Bl(t,e){const r=ls(t.firestore,ol),n=ct(t),a=aE(t.converter,e);return W2(r,[K8(_x(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ya.exists(!1))]).then((()=>n))}function Vr(t,...e){var r,n,a;t=En(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||bR(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(bR(e[o])){const m=e[o];e[o]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof vi)h=ls(t.firestore,ol),p=mx(t._key.path),d={next:m=>{e[o]&&e[o](vH(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=ls(t,wc);h=ls(m.firestore,ol),p=m._query;const x=new G2(h);d={next:y=>{e[o]&&e[o](new yH(h,x,m,y))},error:e[o+1],complete:e[o+2]},mH(t._query)}return(function(x,y,w,N){const S=new F8(N),E=new L8(y,S,w);return x.asyncQueue.enqueueAndForget((async()=>M8(await Hv(x),E))),()=>{S.Za(),x.asyncQueue.enqueueAndForget((async()=>D8(await Hv(x),E)))}})(wx(h),p,c,d)}function W2(t,e){return(function(n,a){const i=new Io;return n.asyncQueue.enqueueAndForget((async()=>pie(await Rie(n),a,i))),i.promise})(wx(t),e)}function vH(t,e,r){const n=r.docs.get(e._key),a=new G2(t);return new iE(t,a,e._key,n,new _h(r.hasPendingWrites,r.fromCache),e.converter)}class Xie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=ese(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Yie(t){return new Xie(t)}class Jie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=hg.provider,this._offlineComponentProvider={build:r=>new iH(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Zie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=hg.provider,this._offlineComponentProvider={build:r=>new Eie(r,e==null?void 0:e.cacheSizeBytes)}}}function ese(t){return new Jie(void 0)}function tse(){return new Zie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rse={maxAttempts:5};function rm(t,e){if((t=En(t)).firestore!==e)throw new mt(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nse extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=_x(r)}get(r){const n=rm(r,this._firestore),a=new Kie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Rt();const o=i[0];if(o.isFoundDocument())return new Wv(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new Wv(this._firestore,a,n._key,null,n.converter);throw Rt()}))}set(r,n,a){const i=rm(r,this._firestore),o=aE(i.converter,n,a),c=K8(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const o=rm(r,this._firestore);let c;return c=typeof(n=En(n))=="string"||n instanceof Sx?dH(this._dataReader,"Transaction.update",o._key,n,a,i):uH(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(r){const n=rm(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=rm(e,this._firestore),n=new G2(this._firestore);return super.get(e).then((a=>new iE(this._firestore,n,r._key,a._document,new _h(!1,!1),r.converter)))}}function v3(t,e,r){t=ls(t,ol);const n=Object.assign(Object.assign({},rse),r);return(function(i){if(i.maxAttempts<1)throw new mt(Ke.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,o,c){const d=new Io;return i.asyncQueue.enqueueAndForget((async()=>{const h=await Mie(i);new Cie(i.asyncQueue,h,c,o,d).au()})),d.promise})(wx(t),(a=>e(new nse(t,a))),n)}function NR(...t){return new Q8("arrayUnion",t)}function nm(t){return new X8("increment",t)}(function(e,r=!0){(function(a){Bf=a})(b0),Mu(new oc("firestore",((n,{instanceIdentifier:a,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new ol(new $re(n.getProvider("auth-internal")),new Fre(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new mt(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jd(h.options.projectId,p)})(o,a),o);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),no(pI,"4.7.3",e),no(pI,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH="firebasestorage.googleapis.com",wH="storageBucket",ase=120*1e3,ise=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Do{constructor(e,r,n=0){super(b3(e),`Firebase Storage: ${r} (${b3(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,da.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return b3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ua;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ua||(ua={}));function b3(t){return"storage/"+t}function sE(){const t="An unknown error occurred, please check the error payload for server response.";return new da(ua.UNKNOWN,t)}function sse(t){return new da(ua.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ose(t){return new da(ua.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lse(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new da(ua.UNAUTHENTICATED,t)}function cse(){return new da(ua.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function use(t){return new da(ua.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function dse(){return new da(ua.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hse(){return new da(ua.CANCELED,"User canceled the upload/download.")}function fse(t){return new da(ua.INVALID_URL,"Invalid URL '"+t+"'.")}function pse(t){return new da(ua.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function mse(){return new da(ua.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wH+"' property when initializing the app?")}function gse(){return new da(ua.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xse(){return new da(ua.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yse(t){return new da(ua.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gj(t){return new da(ua.INVALID_ARGUMENT,t)}function SH(){return new da(ua.APP_DELETED,"The Firebase app was deleted.")}function vse(t){return new da(ua.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rm(t,e){return new da(ua.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function am(t){throw new da(ua.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Is.makeFromUrl(e,r)}catch{return new Is(e,"")}if(n.path==="")return n;throw pse(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${p}/b/${a}/o${x}`,"i"),w={bucket:1,path:3},N=r===bH?"(?:storage.googleapis.com|storage.cloud.google.com)":r,S="([^?#]*)",E=new RegExp(`^https?://${N}/${a}/${S}`,"i"),M=[{regex:c,indices:d,postModify:i},{regex:y,indices:w,postModify:h},{regex:E,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<M.length;L++){const I=M[L],R=I.regex.exec(e);if(R){const A=R[I.indices.bucket];let T=R[I.indices.path];T||(T=""),n=new Is(A,T),I.postModify(n);break}}if(n==null)throw fse(e);return n}}class bse{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wse(t,e,r){let n=1,a=null,i=null,o=!1,c=0;function d(){return c===2}let h=!1;function p(...S){h||(h=!0,e.apply(null,S))}function m(S){a=setTimeout(()=>{a=null,t(y,d())},S)}function x(){i&&clearTimeout(i)}function y(S,...E){if(h){x();return}if(S){x(),p.call(null,S,...E);return}if(d()||o){x(),p.call(null,S,...E);return}n<64&&(n*=2);let M;c===1?(c=2,M=0):M=(n+Math.random())*1e3,m(M)}let w=!1;function N(S){w||(w=!0,x(),!h&&(a!==null?(S||(c=2),clearTimeout(a),m(0)):S||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,N(!0)},r),N}function Sse(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nse(t){return t!==void 0}function _se(t){return typeof t=="object"&&!Array.isArray(t)}function oE(t){return typeof t=="string"||t instanceof String}function _R(t){return lE()&&t instanceof Blob}function lE(){return typeof Blob<"u"}function jR(t,e,r,n){if(n<e)throw Gj(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Gj(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function NH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Wd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Wd||(Wd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jse(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tse{constructor(e,r,n,a,i,o,c,d,h,p,m,x=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new Ny(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Wd.NO_ERROR,d=i.getStatus();if(!c||jse(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Wd.ABORT;n(!1,new Ny(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Ny(h,i))})},r=(n,a)=>{const i=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());Nse(d)?i(d):i()}catch(d){o(d)}else if(c!==null){const d=sE();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?SH():hse();o(d)}else{const d=dse();o(d)}};this.canceled_?r(!1,new Ny(!1,null,!0)):this.backoffId_=wse(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Sse(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ny{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Ase(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ese(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kse(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Cse(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Ose(t,e,r,n,a,i,o=!0){const c=NH(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return kse(h,e),Ase(h,r),Ese(h,i),Cse(h,n),new Tse(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ise(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Rse(...t){const e=Ise();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(lE())return new Blob(t);throw new da(ua.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Mse(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dse(t){if(typeof atob>"u")throw yse("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w3{constructor(e,r){this.data=e,this.contentType=r||null}}function Pse(t,e){switch(t){case Jo.RAW:return new w3(_H(e));case Jo.BASE64:case Jo.BASE64URL:return new w3(jH(t,e));case Jo.DATA_URL:return new w3(Bse(e),$se(e))}throw sE()}function _H(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Lse(t){let e;try{e=decodeURIComponent(t)}catch{throw Rm(Jo.DATA_URL,"Malformed data URL.")}return _H(e)}function jH(t,e){switch(t){case Jo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw Rm(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Jo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw Rm(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Dse(e)}catch(a){throw a.message.includes("polyfill")?a:Rm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class TH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Rm(Jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=zse(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Bse(t){const e=new TH(t);return e.base64?jH(Jo.BASE64,e.rest):Lse(e.rest)}function $se(t){return new TH(t).contentType}function zse(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,r){let n=0,a="";_R(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(_R(this.data_)){const n=this.data_,a=Mse(n,e,r);return a===null?null:new pu(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new pu(n,!0)}}static getBlob(...e){if(lE()){const r=e.map(n=>n instanceof pu?n.data_:n);return new pu(Rse.apply(null,r))}else{const r=e.map(o=>oE(o)?Pse(Jo.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[i++]=o[c]}),new pu(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(t){let e;try{e=JSON.parse(t)}catch{return null}return _se(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Use(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Vse(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function EH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fse(t,e){return e}class Mi{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||Fse}}let _y=null;function qse(t){return!oE(t)||t.length<2?t:EH(t)}function kH(){if(_y)return _y;const t=[];t.push(new Mi("bucket")),t.push(new Mi("generation")),t.push(new Mi("metageneration")),t.push(new Mi("name","fullPath",!0));function e(i,o){return qse(o)}const r=new Mi("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const a=new Mi("size");return a.xform=n,t.push(a),t.push(new Mi("timeCreated")),t.push(new Mi("updated")),t.push(new Mi("md5Hash",null,!0)),t.push(new Mi("cacheControl",null,!0)),t.push(new Mi("contentDisposition",null,!0)),t.push(new Mi("contentEncoding",null,!0)),t.push(new Mi("contentLanguage",null,!0)),t.push(new Mi("contentType",null,!0)),t.push(new Mi("metadata","customMetadata",!0)),_y=t,_y}function Hse(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new Is(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function Gse(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return Hse(n,t),n}function CH(t,e,r){const n=AH(e);return n===null?null:Gse(t,n,r)}function Wse(t,e,r,n){const a=AH(e);if(a===null||!oE(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,x="/b/"+o(p)+"/o/"+o(m),y=K2(x,r,n),w=NH({alt:"media",token:h});return y+w})[0]}function Kse(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class cE{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(t){if(!t)throw sE()}function Qse(t,e){function r(n,a){const i=CH(t,a,e);return OH(i!==null),i}return r}function Xse(t,e){function r(n,a){const i=CH(t,a,e);return OH(i!==null),Wse(i,a,t.host,t._protocol)}return r}function IH(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=cse():a=lse():r.getStatus()===402?a=ose(t.bucket):r.getStatus()===403?a=use(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function RH(t){const e=IH(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=sse(t.path)),i.serverResponse=a.serverResponse,i}return r}function Yse(t,e,r){const n=e.fullServerUrl(),a=K2(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new cE(a,i,Xse(t,r),o);return c.errorHandler=RH(e),c}function Jse(t,e){const r=e.fullServerUrl(),n=K2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function o(d,h){}const c=new cE(n,a,o,i);return c.successCodes=[200,204],c.errorHandler=RH(e),c}function Zse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function eoe(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Zse(null,e)),n}function toe(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let M="";for(let L=0;L<2;L++)M=M+Math.random().toString().slice(2);return M}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=eoe(e,n,a),p=Kse(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+d+"--",y=pu.getBlob(m,n,x);if(y===null)throw gse();const w={name:h.fullPath},N=K2(i,t.host,t._protocol),S="POST",E=t.maxUploadRetryTime,C=new cE(N,S,Qse(t,r),E);return C.urlParams=w,C.headers=o,C.body=y.uploadData(),C.errorHandler=IH(e),C}class roe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw am("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw am("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw am("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw am("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw am("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class noe extends roe{initXhr(){this.xhr_.responseType="text"}}function uE(){return new noe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,r){this._service=e,r instanceof Is?this._location=r:this._location=Is.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new s0(e,r)}get root(){const e=new Is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EH(this._location.path)}get storage(){return this._service}get parent(){const e=Use(this._location.path);if(e===null)return null;const r=new Is(this._location.bucket,e);return new s0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw vse(e)}}function aoe(t,e,r){t._throwIfRoot("uploadBytes");const n=toe(t.storage,t._location,kH(),new pu(e,!0),r);return t.storage.makeRequestWithTokens(n,uE).then(a=>({metadata:a,ref:t}))}function ioe(t){t._throwIfRoot("getDownloadURL");const e=Yse(t.storage,t._location,kH());return t.storage.makeRequestWithTokens(e,uE).then(r=>{if(r===null)throw xse();return r})}function soe(t){t._throwIfRoot("deleteObject");const e=Jse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,uE)}function ooe(t,e){const r=Vse(t._location.path,e),n=new Is(t._location.bucket,r);return new s0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function loe(t){return/^[A-Za-z]+:\/\//.test(t)}function coe(t,e){return new s0(t,e)}function MH(t,e){if(t instanceof dE){const r=t;if(r._bucket==null)throw mse();const n=new s0(r,r._bucket);return e!=null?MH(n,e):n}else return e!==void 0?ooe(t,e):t}function uoe(t,e){if(e&&loe(e)){if(t instanceof dE)return coe(t,e);throw Gj("To use ref(service, url), the first argument must be a Storage instance.")}else return MH(t,e)}function TR(t,e){const r=e==null?void 0:e[wH];return r==null?null:Is.makeFromBucketSpec(r,t)}function doe(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:pZ(a,t.app.options.projectId))}class dE{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=bH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ase,this._maxUploadRetryTime=ise,this._requests=new Set,a!=null?this._bucket=Is.makeFromBucketSpec(a,this._host):this._bucket=TR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Is.makeFromBucketSpec(this._url,e):this._bucket=TR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new s0(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new bse(SH());{const o=Ose(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const AR="@firebase/storage",ER="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH="storage";function Wj(t,e,r){return t=En(t),aoe(t,e,r)}function Kv(t){return t=En(t),ioe(t)}function hoe(t){return t=En(t),soe(t)}function Mm(t,e){return t=En(t),uoe(t,e)}function foe(t=KA(),e){t=En(t);const n=cx(t,DH).getImmediate({identifier:e}),a=OV("storage");return a&&poe(n,...a),n}function poe(t,e,r,n={}){doe(t,e,r,n)}function moe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new dE(r,n,a,e,b0)}function goe(){Mu(new oc(DH,moe,"PUBLIC").setMultipleInstances(!0)),no(AR,ER,""),no(AR,ER,"esm2017")}goe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xoe="type.googleapis.com/google.protobuf.Int64Value",yoe="type.googleapis.com/google.protobuf.UInt64Value";function PH(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function Kj(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Kj(e));if(typeof t=="function"||typeof t=="object")return PH(t,e=>Kj(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Qv(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case xoe:case yoe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Qv(e)):typeof t=="function"||typeof t=="object"?PH(t,e=>Qv(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rh extends Do{constructor(e,r,n){super(`${hE}/${e}`,r||""),this.details=n}}function voe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function boe(t,e){let r=voe(t),n=r,a;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!kR[o])return new Rh("internal","internal");r=kR[o],n=o}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=Qv(a))}}catch{}return r==="ok"?null:new Rh(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class woe{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="us-central1";function Soe(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Rh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Noe{constructor(e,r,n,a,i=Qj,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new woe(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Qj}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function _oe(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function joe(t,e,r){return(n=>Aoe(t,e,n,{}))}async function Toe(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function Aoe(t,e,r,n){const a=t._url(e);return Eoe(t,a,r,n)}async function Eoe(t,e,r,n){r=Kj(r);const a={data:r},i={},o=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=n.timeout||7e4,d=Soe(c),h=await Promise.race([Toe(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Rh("cancelled","Firebase Functions instance was deleted.");const p=boe(h.status,h.json);if(p)throw p;if(!h.json)throw new Rh("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Rh("internal","Response is missing data field.");return{data:Qv(m)}}const CR="@firebase/functions",OR="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const koe="auth-internal",Coe="app-check-internal",Ooe="messaging-internal";function Ioe(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(koe),c=n.getProvider(Ooe),d=n.getProvider(Coe);return new Noe(i,o,c,d,a,t)};Mu(new oc(hE,r,"PUBLIC").setMultipleInstances(!0)),no(CR,OR,e),no(CR,OR,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Roe(t=KA(),e=Qj){const n=cx(En(t),hE).getImmediate({identifier:e}),a=OV("functions");return a&&Moe(n,...a),n}function Moe(t,e,r){_oe(En(t),e,r)}function rn(t,e,r){return joe(En(t),e)}Ioe(fetch.bind(self));const LH={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Doe=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Doe)if(!LH[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const Q2=BV(LH),Xj=Nj(Q2),Poe=new ql,Oe=$ie(Q2,{localCache:Yie({tabManager:tse()})}),Dm=foe(Q2),nn=Roe(Q2),Loe=rn(nn,"awardXP"),Boe=rn(nn,"acceptQuest"),$oe=rn(nn,"deployMission"),zoe=rn(nn,"resolveQuest"),Uoe=rn(nn,"equipItem"),Voe=rn(nn,"unequipItem"),Foe=rn(nn,"disenchantItem"),qoe=rn(nn,"craftItem"),Hoe=rn(nn,"adminUpdateInventory"),Goe=rn(nn,"adminUpdateEquipped"),Woe=rn(nn,"submitEngagement"),Koe=rn(nn,"sendClassMessage");rn(nn,"uploadQuestionBank");const Yj=rn(nn,"awardQuestionXP"),Qoe=rn(nn,"penalizeWrongAnswer"),Xoe=rn(nn,"updateStreak"),Yoe=rn(nn,"claimDailyLogin"),Joe=rn(nn,"spinFortuneWheel"),Zoe=rn(nn,"unlockSkill"),ele=rn(nn,"addSocket"),tle=rn(nn,"socketGem"),rle=rn(nn,"unsocketGem"),nle=rn(nn,"dealBossDamage"),ale=rn(nn,"answerBossQuiz"),ile=rn(nn,"createParty"),sle=rn(nn,"joinParty"),ole=rn(nn,"completeTutoring"),lle=rn(nn,"claimKnowledgeLoot"),cle=rn(nn,"purchaseCosmetic"),ule=rn(nn,"claimDailyChallenge"),dle=rn(nn,"dismissAlert"),Xv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()});function hle(t,e,r,n){const{totalTime:a,submissionCount:i,totalPastes:o,totalKeystrokes:c,totalXP:d,activityDays:h}=t,p=(e-r)/n,m=c+o>0?o/(c+o):0;return i===0&&a<60?"INACTIVE":m>.4&&i>=2&&o>8?"COPYING":a>1800&&i>=2&&d<50?"STRUGGLING":p<-.5&&h<=2&&i>=1&&i<=3?"DISENGAGING":a>1800&&h<=2&&i>=3?"SPRINTING":p<-.5&&p>=-1.5?"COASTING":p>.75&&i>=4&&m<.15&&h>=3?"THRIVING":"ON_TRACK"}const Wo={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};function fle(t){switch(t){case"THRIVING":return{categories:["Simulation","Supplemental","Article"],action:"Challenge with advanced or supplemental material. Consider peer-tutoring role.",studentTip:"You're crushing it! Try the simulations and supplemental resources to push further."};case"ON_TRACK":return{categories:["Practice Set","Textbook","Video Lesson"],action:"Continue current approach. Provide enrichment if interest is shown.",studentTip:"Solid work  keep the momentum going with practice sets and readings."};case"COASTING":return{categories:["Practice Set","Simulation","Video Lesson"],action:"Increase engagement with interactive resources. Check in on motivation.",studentTip:"Try a simulation or practice set to boost your skills  small steps add up!"};case"SPRINTING":return{categories:["Textbook","Video Lesson","Practice Set"],action:"Encourage consistent daily engagement instead of cramming. Set micro-goals.",studentTip:"Spreading your study across the week helps retention  try a bit each day."};case"STRUGGLING":return{categories:["Video Lesson","Lab Guide","Practice Set"],action:"Offer direct support. Recommend foundational resources and check understanding.",studentTip:"Your effort shows! Try video lessons for a fresh perspective on tricky topics."};case"DISENGAGING":return{categories:["Video Lesson","Simulation","Article"],action:"Reach out personally. Low-friction resources to re-establish habit.",studentTip:"We miss seeing you active  a quick video or sim is a great way to jump back in."};case"INACTIVE":return{categories:["Video Lesson","Article"],action:"Immediate outreach required. Check for external factors. Lowest-barrier resources.",studentTip:"Start small  even watching one video lesson counts. We're here to help!"};case"COPYING":return{categories:["Practice Set","Textbook","Lab Guide"],action:"Discuss academic integrity. Redirect to original-work resources.",studentTip:"Working through problems yourself builds the strongest understanding  give it a try!"}}}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BH=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mle={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>j.createElement("svg",{ref:d,...mle,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:BH("lucide",a),...c},[...o.map(([h,p])=>j.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const r=j.forwardRef(({className:n,...a},i)=>j.createElement(gle,{ref:i,iconNode:e,className:BH(`lucide-${ple(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ze("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=ze("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=ze("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=ze("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=ze("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=ze("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=ze("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=ze("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=ze("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=ze("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ze("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=ze("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=ze("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=ze("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=ze("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=ze("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ze("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=ze("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=ze("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=ze("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ze("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=ze("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jle=ze("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=ze("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ele=ze("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=ze("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kle=ze("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=ze("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=ze("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=ze("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=ze("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ole=ze("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=ze("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ze("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=ze("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mle=ze("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=ze("Heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=ze("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=ze("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=ze("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=ze("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dle=ze("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ze("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=ze("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=ze("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=ze("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=ze("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lle=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ze("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=ze("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=ze("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ble=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $le=ze("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ze("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zle=ze("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=ze("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=ze("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ule=ze("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vle=ze("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=ze("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fle=ze("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qle=ze("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hle=ze("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gle=ze("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=ze("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=ze("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=ze("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=ze("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=ze("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=ze("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wle=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=ze("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=ze("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kle=ze("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qle=ze("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=ze("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=ze("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=ze("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xle=ze("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=ze("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=ze("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yle=ze("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=ze("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=ze("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jle=ze("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ze("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zle=ze("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ece=ze("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tce=ze("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rce=ze("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nce=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=ze("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ace=ze("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ice=ze("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sce=ze("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=ze("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=ze("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),oce="kellporter2@paps.net",eG="Mr. Porter",UR=[{name:"Dashboard",icon:s.jsx(Dle,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:s.jsx(rw,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resource Editor",icon:s.jsx(Oa,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:s.jsx(us,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Student Groups",icon:s.jsx(us,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Enrollment Codes",icon:s.jsx(fg,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:s.jsx(ds,{className:"w-5 h-5"}),role:"ADMIN",children:[{name:"Operatives",icon:s.jsx(cs,{className:"w-4 h-4"})},{name:"XP Protocols",icon:s.jsx(Gn,{className:"w-4 h-4"})},{name:"Missions",icon:s.jsx(X2,{className:"w-4 h-4"})},{name:"Mission Control",icon:s.jsx(Yv,{className:"w-4 h-4"})},{name:"Boss Ops",icon:s.jsx(Ro,{className:"w-4 h-4"})},{name:"Tutoring",icon:s.jsx(ll,{className:"w-4 h-4"})}]},{name:"Resources",icon:s.jsx(ew,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:s.jsx(Yv,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:s.jsx(ds,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:s.jsx(cl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:s.jsx(Ile,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:s.jsx(Tle,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Intel Dossier",icon:s.jsx(qf,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:s.jsx(cl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:s.jsx(ll,{className:"w-5 h-5"}),role:"STUDENT"}],VR=new Set,Qs=(t,e,r)=>VR.has(t)?()=>{}:Vr(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&VR.add(t)}),Ae={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Qs("xp_events",qt(Oe,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await ea(ct(Oe,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Va(ct(Oe,"xp_events",t))},subscribeToQuests:t=>Qs("quests",qt(Oe,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await ea(ct(Oe,"quests",t.id),t)},deleteQuest:async t=>{await Va(ct(Oe,"quests",t))},acceptQuest:async(t,e)=>{await Boe({questId:e})},deployMission:async(t,e)=>{await $oe({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await zoe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Ae.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Uoe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Voe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Foe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await qoe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await Hoe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await Goe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ct(Oe,"users",t);r?await ur(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await ur(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await Koe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=ct(Oe,"class_messages",t);await v3(Oe,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ct(Oe,"class_messages",t);await v3(Oe,async n=>{const a=await n.get(r);if(!a.exists())return;const o=[...a.data().pinnedBy||[]];o.includes(e)?n.update(r,{pinnedBy:o.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...o,e]})})},toggleGlobalPin:async(t,e)=>{const r=ct(Oe,"class_messages",t);await ur(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Va(ct(Oe,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=Ur(qt(Oe,"class_messages"),pn("isFlagged","==",!0),bo(50));return Vr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ct(Oe,"class_messages",t);await ur(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Ae.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await ur(ct(Oe,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await Bl(qt(Oe,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await ur(ct(Oe,"student_groups",t),r)},deleteStudentGroup:async t=>{await Va(ct(Oe,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=Ur(qt(Oe,"student_groups"),pn("classType","==",t));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>Vr(qt(Oe,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=Ur(qt(Oe,"student_groups"),pn("memberIds","array-contains",t));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=Ur(qt(Oe,"class_messages"),pn("channelId","==",t),bo(100));return Vr(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(i.timestamp).getTime()-new Date(o.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=Ur(qt(Oe,"class_messages"),Ho("timestamp","desc"),bo(20));return Qs("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=Ur(qt(Oe,"conversations"),Ho("lastMessageAt","desc"));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=Ur(qt(Oe,`conversations/${t}/messages`),Ho("timestamp","asc"));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Fa.ADMIN?eG:e.name,content:r,timestamp:new Date().toISOString()};await Bl(qt(Oe,`conversations/${t}/messages`),n),await ur(ct(Oe,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await ur(ct(Oe,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=Ur(qt(Oe,"chat_flags"),pn("isResolved","==",!1));return Vr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await ur(ct(Oe,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=Ur(qt(Oe,"chat_flags"),pn("messageId","==",t),pn("isResolved","==",!1)),n=(await wd(e)).docs.map(a=>ur(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=Ur(qt(Oe,"evidence"),pn("studentId","==",t),pn("weekId","==",e));return Vr(n,a=>{const i=a.docs.map(o=>({id:o.id,...o.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await ea(ct(Oe,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=Mm(Dm,n.imageUrl);return hoe(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>Va(ct(Oe,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await ea(ct(Oe,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ct(Oe,"users",t);await ur(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await ur(ct(Oe,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await ur(ct(Oe,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=qt(Oe,"users");return Vr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=qt(Oe,"assignments");return Vr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0,lessonBlocks:i.lessonBlocks||[]}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=Ur(qt(Oe,"submissions"),Ho("submittedAt","desc"),bo(200));return Vr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Xv(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=Ur(qt(Oe,"submissions"),pn("userId","==",t),bo(50));return Vr(r,n=>{const a=n.docs.map(i=>{const o=i.data();return{id:i.id,userId:o.userId,userName:o.userName,assignmentId:o.assignmentId,assignmentTitle:o.assignmentTitle,metrics:o.metrics||Xv(),submittedAt:o.submittedAt,status:o.status,score:o.score,hasUnreadAdmin:o.hasUnreadAdmin||!1,hasUnreadStudent:o.hasUnreadStudent||!1,isPinned:o.isPinned||!1,isArchived:o.isArchived||!1,privateComments:(o.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,o)=>new Date(o.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=qt(Oe,"allowed_emails");return Vr(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=qt(Oe,"class_configs");return Vr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null,lessonBlocks:t.lessonBlocks&&t.lessonBlocks.length>0?t.lessonBlocks:[]};t.id?await ea(ct(Oe,"assignments",t.id),e,{merge:!0}):await Bl(qt(Oe,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await ur(ct(Oe,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Va(ct(Oe,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ct(Oe,"allowed_emails",t),n=await ga(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await ea(r,{classType:e,classTypes:i});const o=Ur(qt(Oe,"users"),pn("email","==",t)),c=await wd(o);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await ur(ct(Oe,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await ur(ct(Oe,"allowed_emails",t),{section:e});const r=Ur(qt(Oe,"users"),pn("email","==",t)),n=await wd(r);await Promise.all(n.docs.map(async a=>{await ur(ct(Oe,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await ur(ct(Oe,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await ur(ct(Oe,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await Va(ct(Oe,"allowed_emails",t));const e=Ur(qt(Oe,"users"),pn("email","==",t)),r=await wd(e);await Promise.all(r.docs.map(async n=>{await ur(ct(Oe,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ct(Oe,"users",t),n=await ga(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),o=Array.from(new Set([...i,e]));await ur(r,{isWhitelisted:!0,classType:e,enrolledClasses:o});const c=a.email;if(c){const d=await ga(ct(Oe,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await ea(ct(Oe,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await ga(ct(Oe,"users",t));if(e.exists()){const r=e.data().email;await Va(ct(Oe,"allowed_emails",r))}await Va(ct(Oe,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await ea(ct(Oe,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,o=ct(Oe,"submissions",i);(await ga(o)).exists()?await ur(o,{"metrics.engagementTime":nm(a),"metrics.lastActive":Date.now()}):await ea(o,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ct(Oe,"users",t),n=await ga(r);if(!n.exists())return;const i=n.data().email,o={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(o.isWhitelisted=!1,i&&await Va(ct(Oe,"allowed_emails",i))):(o.isWhitelisted=!0,i&&await ea(ct(Oe,"allowed_emails",i),{classType:e[0],classTypes:e})),await ur(r,o)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ct(Oe,"users",t),n=await ga(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await ur(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const o=n.data().email;o&&await ea(ct(Oe,"allowed_emails",o),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await ur(ct(Oe,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Loe({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await Woe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=Ur(qt(Oe,"users"),pn("role","==","STUDENT"));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await ea(ct(Oe,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Va(ct(Oe,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Mm(Dm,`resources/${e}_${t.name}`);return await Wj(r,t),await Kv(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Mm(Dm,`resources/html/${e}_${t.name}`);return await Wj(r,t),await Kv(r)},subscribeToAnnouncements:t=>{const e=Ur(qt(Oe,"announcements"),Ho("createdAt","desc"),bo(20));return Qs("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await Bl(qt(Oe,"announcements"),t)},deleteAnnouncement:async t=>{await Va(ct(Oe,"announcements",t))},dismissAnnouncement:async(t,e)=>{await ur(ct(Oe,"users",t),{"gamification.dismissedAnnouncements":NR(e)})},subscribeToNotifications:(t,e)=>{const r=Ur(qt(Oe,"notifications"),pn("userId","==",t),Ho("timestamp","desc"),bo(50));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await ur(ct(Oe,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=Ur(qt(Oe,"notifications"),pn("userId","==",t),pn("isRead","==",!1)),n=(await wd(e)).docs.map(a=>ur(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await Bl(qt(Oe,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(o=>Bl(qt(Oe,"notifications"),{userId:o,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await ur(ct(Oe,"users",t),n)},toggleCodenameLock:async(t,e)=>{await ur(ct(Oe,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await Xoe({})).data,claimDailyLogin:async()=>(await Yoe({})).data,spinFortuneWheel:async t=>(await Joe({classType:t})).data,unlockSkill:async(t,e)=>(await Zoe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await ele({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await tle({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await rle({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=Ur(qt(Oe,"boss_encounters"),pn("isActive","==",!0));return Qs("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=qt(Oe,"boss_encounters");return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ct(Oe,"boss_encounters",t.id);await ea(e,t)},toggleBossActive:async(t,e)=>{const r=ct(Oe,"boss_encounters",t);await ur(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ct(Oe,"boss_encounters",t);await Va(e)},subscribeToBossShards:(t,e)=>{const r=qt(Oe,`boss_encounters/${t}/shards`);return Vr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=qt(Oe,`boss_encounters/${t}/damage_log`);return Vr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await nle({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=Ur(qt(Oe,"boss_quizzes"),pn("isActive","==",!0));return Qs("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=qt(Oe,`boss_quizzes/${t}/shards`);return Vr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossQuizDamageLog:(t,e)=>{const r=qt(Oe,`boss_quizzes/${t}/damage_log`);return Vr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await ale({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=qt(Oe,"boss_quizzes");return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=ct(Oe,"boss_quizzes",t.id);await ea(e,t)},toggleBossQuizActive:async(t,e)=>{const r=ct(Oe,"boss_quizzes",t);await ur(r,{isActive:e})},deleteBossQuiz:async t=>{const e=ct(Oe,"boss_quizzes",t);await Va(e)},subscribeToBossQuestionBanks:t=>Vr(qt(Oe,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=ct(Oe,"boss_question_banks",t.id);await ea(e,t)},deleteBossQuestionBank:async t=>{await Va(ct(Oe,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=Ur(qt(Oe,"boss_quiz_progress"),pn("quizId","==",t));return(await wd(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=ct(Oe,"boss_quiz_progress",`${t}_${e}`);return Vr(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await ile({questId:t,userName:e})).data,joinParty:async(t,e)=>(await sle({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>Vr(ct(Oe,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await Bl(qt(Oe,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await ur(ct(Oe,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await ur(ct(Oe,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await ur(ct(Oe,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=ct(Oe,"tutoring_sessions",t),a=await ga(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),o=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[o]:r};i[c]&&(d.status="COMPLETED"),await ur(n,d)},subscribeToAllTutoringSessions:t=>{const e=Ur(qt(Oe,"tutoring_sessions"),Ho("createdAt","desc"),bo(100));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await Va(ct(Oe,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=Ur(qt(Oe,"tutoring_sessions"),pn("classType","==",t),bo(50));return Qs("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await ole({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=Ur(qt(Oe,"knowledge_gates"),pn("isActive","==",!0));return Qs("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await lle({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=Ur(qt(Oe,"seasonal_cosmetics"),pn("isAvailable","==",!0));return Qs("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await cle({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await ur(ct(Oe,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=Ur(qt(Oe,"daily_challenges"),pn("date","==",e));return Qs("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await ule({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=ct(Oe,"users",t);await v3(Oe,async i=>{var h;const o=await i.get(a);if(!o.exists())return;const c=((h=o.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await ga(ct(Oe,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=Ur(qt(Oe,"student_alerts"),pn("isDismissed","==",!1));return Qs("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const o={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(o[i.riskLevel]||0)-(o[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await dle({alertId:t})},subscribeToStudentBuckets:t=>Qs("student_buckets",qt(Oe,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=Ur(qt(Oe,"practice_progress"),pn("userId","==",t));return Vr(r,n=>{const a={};n.forEach(i=>{const o=i.data();o.assignmentId&&o.completed&&(a[o.assignmentId]={completed:o.completed||!1,totalCompletions:o.totalCompletions||0,bestScore:o.bestScore??null,completedAt:o.completedAt??null})}),e(a)},()=>{})},submitBugReport:async t=>{await Bl(qt(Oe,"bug_reports"),{...t,resolved:!1})},subscribeToBugReports:t=>{const e=Ur(qt(Oe,"bug_reports"),Ho("timestamp","desc"),bo(100));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},resolveBugReport:async t=>{await ur(ct(Oe,"bug_reports",t),{resolved:!0})},updateBugReport:async(t,e)=>{const{id:r,...n}=e;await ur(ct(Oe,"bug_reports",t),n)},deleteBugReport:async t=>{await Va(ct(Oe,"bug_reports",t))},createEnrollmentCode:async(t,e,r)=>{const n=[Math.random().toString(36).substring(2,6),Math.random().toString(36).substring(2,6)].join("-").toUpperCase(),a=ct(qt(Oe,"enrollment_codes"));return await ea(a,{code:n,classType:t,section:e||null,createdAt:new Date().toISOString(),createdBy:"admin",usedCount:0,maxUses:r||null,isActive:!0}),n},subscribeToEnrollmentCodes:t=>{const e=Ur(qt(Oe,"enrollment_codes"),Ho("createdAt","desc"));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},deactivateEnrollmentCode:async t=>{await ur(ct(Oe,"enrollment_codes",t),{isActive:!1})},redeemEnrollmentCode:async(t,e)=>{const r=Ur(qt(Oe,"enrollment_codes"),pn("code","==",t.toUpperCase()),pn("isActive","==",!0)),n=await wd(r);if(n.empty)return{success:!1,error:"Invalid or expired code."};const a=n.docs[0],i=a.data();if(i.maxUses&&i.usedCount>=i.maxUses)return{success:!1,error:"This code has reached its usage limit."};const o=ct(Oe,"users",e),c=await ga(o);return c.exists()?(c.data().enrolledClasses||[]).includes(i.classType)?{success:!1,error:"Already enrolled in this class."}:(await ur(o,{enrolledClasses:NR(i.classType),isWhitelisted:!0}),i.section&&await ur(o,{[`classSections.${i.classType}`]:i.section}),await ur(a.ref,{usedCount:nm(1)}),{success:!0,classType:i.classType}):{success:!1,error:"User not found."}},awardBehavior:async t=>{await Bl(qt(Oe,"behavior_awards"),t);const e=ct(Oe,"users",t.studentId);await ur(e,{"gamification.xp":nm(t.xpAmount),[`gamification.classXp.${t.classType}`]:nm(t.xpAmount),"gamification.currency":nm(t.fluxAmount)})},subscribeToBehaviorAwards:(t,e)=>{const r=Ur(qt(Oe,"behavior_awards"),pn("classType","==",t),Ho("timestamp","desc"),bo(50));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},()=>{})},updateDailyStreak:async t=>{const e=ct(Oe,"users",t),r=await ga(e);if(!r.exists())return{currentStreak:0,freezeUsed:!1};const a=r.data().streakData||{currentStreak:0,longestStreak:0,lastActiveDate:"",freezeTokens:0,maxFreezeTokens:3,streakHistory:[],milestones:[]},i=new Date().toISOString().split("T")[0];if(a.lastActiveDate===i)return{currentStreak:a.currentStreak,freezeUsed:!1};const o=new Date(Date.now()-864e5).toISOString().split("T")[0];let c=a.currentStreak,d=!1;a.lastActiveDate===o?c+=1:a.lastActiveDate&&Math.floor((new Date(i).getTime()-new Date(a.lastActiveDate).getTime())/864e5)===2&&a.freezeTokens>0?(c+=1,d=!0):c=1;const h=Math.max(a.longestStreak,c),p=[3,7,14,21,30,50,100],m=a.milestones||[],x=p.find(S=>c>=S&&!m.includes(S)),y=x?[...m,x]:m;let w=d?a.freezeTokens-1:a.freezeTokens;c>0&&c%7===0&&(w=Math.min(w+1,a.maxFreezeTokens));const N=[...a.streakHistory||[],i].slice(-30);return await ur(e,{streakData:{currentStreak:c,longestStreak:h,lastActiveDate:i,freezeTokens:w,maxFreezeTokens:3,streakHistory:N,milestones:y}}),{currentStreak:c,freezeUsed:d,newMilestone:x}}},tG=j.createContext(null),Ma=()=>{const t=j.useContext(tG);if(!t)throw new Error("useToast must be used within ToastProvider");return t},lce={success:s.jsx($r,{className:"w-5 h-5 text-green-400 shrink-0"}),error:s.jsx(Ls,{className:"w-5 h-5 text-red-400 shrink-0"}),info:s.jsx(Tx,{className:"w-5 h-5 text-blue-400 shrink-0"})},cce={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},uce=({children:t})=>{const[e,r]=j.useState([]),n=j.useCallback((o,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:o,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=j.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i={success:o=>n(o,"success"),error:o=>n(o,"error"),info:o=>n(o,"info")};return s.jsxs(tG.Provider,{value:i,children:[t,s.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(o=>s.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${cce[o.type]}`,children:[lce[o.type],s.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:o.message}),s.jsx("button",{onClick:()=>a(o.id),className:"text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Mn,{className:"w-4 h-4"})})]},o.id))})]})},dce=()=>{const[t,e]=j.useState(navigator.onLine),[r,n]=j.useState(!1);return j.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:s.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?s.jsxs(s.Fragment,{children:[s.jsx(sce,{className:"w-4 h-4"}),"Connection restored"]}):s.jsxs(s.Fragment,{children:[s.jsx(ice,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var yu=TV();const Bi=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(j.useEffect(()=>{const i=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?yu.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[s.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:s.jsx(Mn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),hce="/favicon.svg";function Wf(){return typeof window<"u"&&"Notification"in window}function bv(){return Wf()?Notification.permission:"unsupported"}async function rG(){return Wf()?await Notification.requestPermission():"unsupported"}function fce(t,e,r){if(!(!Wf()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:hce,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function pce(t,e){const r=j.useRef(new Set),n=j.useRef(!0),a=j.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const o=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of o.slice(0,3))fce(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);j.useEffect(()=>{if(!t||!e||!Wf())return;n.current=!0,r.current=new Set;const i=Ae.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const mce=({userId:t})=>{const[e,r]=se.useState(""),[n,a]=se.useState(!1),[i,o]=se.useState(null),[c,d]=se.useState(null),h=Ma(),p=x=>{const y=x.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);r(y.length>4?y.slice(0,4)+"-"+y.slice(4):y),o(null),d(null)},m=async()=>{if(e.replace("-","").length<4){o("Enter a valid code.");return}a(!0),o(null);try{const x=await Ae.redeemEnrollmentCode(e,t);x.success?(d(`Enrolled in ${x.classType}!`),h.success(`Joined ${x.classType}!`),r("")):o(x.error||"Failed to redeem code.")}catch{o("Something went wrong. Please try again.")}finally{a(!1)}};return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Enrollment"}),s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-white mb-2",children:[s.jsx(fg,{className:"w-3.5 h-3.5 text-emerald-400"}),"Join Another Class"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:x=>p(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!n&&m()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm font-mono font-bold text-emerald-400 tracking-widest placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:n}),s.jsx("button",{onClick:m,disabled:n||e.replace("-","").length<4,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl text-xs font-bold transition flex items-center gap-1.5",children:n?s.jsx(ki,{className:"w-3.5 h-3.5 animate-spin"}):"Join"})]}),i&&s.jsx("p",{className:"mt-2 text-xs text-red-400",children:i}),c&&s.jsxs("p",{className:"mt-2 text-xs text-emerald-400 flex items-center gap-1.5",children:[s.jsx(dc,{className:"w-3.5 h-3.5"})," ",c]})]})]})},gce=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var w;const[a,i]=se.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[o,c]=se.useState(((w=r.gamification)==null?void 0:w.codename)||""),[d,h]=se.useState(!1),p=Ma(),m=N=>{i(S=>({...S,[N]:!S[N]}))},x=async()=>{var N;h(!0);try{await n(a),o!==(((N=r.gamification)==null?void 0:N.codename)||"")&&await Ae.updateCodename(r.id,o.trim().slice(0,24)),e()}catch(S){console.error(S),p.error("Failed to save settings.")}finally{h(!1)}},y=({icon:N,title:S,description:E,value:C,onToggle:M})=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${C?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(N,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:S}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:E})]})]}),s.jsx("button",{onClick:M,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${C?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${C?"translate-x-5":"translate-x-0"}`})})]});return s.jsx(Bi,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Vle,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),s.jsx(y,{icon:_le,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:cs,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),s.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[o.length,"/24 characters"]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Hle,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),s.jsx(y,{icon:ZH,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(N=>({...N,soundEffects:N.soundEffects===!1}))})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),s.jsx("div",{className:"space-y-2",children:Wf()?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(zH,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:bv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),s.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(N=>({...N,pushNotifications:!1}));else{const N=await rG();N==="granted"?(i(S=>({...S,pushNotifications:!0})),p.success("Push notifications enabled!")):N==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:bv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${bv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):s.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),r.role==="STUDENT"&&s.jsx(mce,{userId:r.id}),s.jsxs("button",{onClick:x,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?s.jsx(ki,{className:"w-5 h-5 animate-spin"}):s.jsx(lf,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let j3=null,nG=!0;function xce(t){nG=t}function yce(){if(!j3){const t=window.AudioContext||window.webkitAudioContext;j3=new t}return j3}function or(t,e,r="sine",n=.15){if(nG)try{const a=yce(),i=a.createOscillator(),o=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),o.gain.setValueAtTime(n,a.currentTime),o.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(o),o.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const qn={xpGain:()=>{or(600,.1,"sine",.1),setTimeout(()=>or(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>or(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{or(1200,.15,"sine",.08),setTimeout(()=>or(1500,.12,"sine",.06),100),setTimeout(()=>or(1800,.2,"triangle",.05),180)},questAccept:()=>{or(440,.15,"square",.06),setTimeout(()=>or(660,.2,"square",.06),120)},questDeploy:()=>{or(880,.12,"sawtooth",.05),setTimeout(()=>or(660,.12,"sawtooth",.05),100),setTimeout(()=>or(550,.2,"sawtooth",.04),200)},equip:()=>{or(200,.05,"square",.1),setTimeout(()=>or(400,.08,"sine",.08),50)},salvage:()=>{or(300,.15,"sawtooth",.06),setTimeout(()=>or(200,.2,"sawtooth",.04),100),setTimeout(()=>or(100,.3,"sawtooth",.03),200)},craft:()=>{or(150,.08,"square",.1),setTimeout(()=>or(800,.2,"triangle",.08),60)},error:()=>{or(200,.15,"square",.08),setTimeout(()=>or(150,.2,"square",.06),120)},messageSend:()=>{or(500,.06,"sine",.05)},notification:()=>{or(800,.1,"sine",.06),setTimeout(()=>or(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>or(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{or(523,.12,"sine",.08),setTimeout(()=>or(659,.12,"sine",.07),100),setTimeout(()=>or(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>or(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{or(523,.15,"triangle",.1),setTimeout(()=>or(784,.15,"triangle",.1),120),setTimeout(()=>or(1047,.3,"sine",.12),240)},skillUnlock:()=>{or(300,.1,"sawtooth",.06),setTimeout(()=>or(600,.1,"sawtooth",.06),80),setTimeout(()=>or(900,.15,"sine",.08),160)},bossHit:()=>{or(100,.1,"square",.12),setTimeout(()=>or(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>or(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{or(1200,.08,"sine",.08),setTimeout(()=>or(1600,.1,"sine",.06),60),setTimeout(()=>or(2e3,.15,"triangle",.04),120)},partyJoin:()=>{or(440,.1,"sine",.06),setTimeout(()=>or(554,.1,"sine",.06),80),setTimeout(()=>or(659,.15,"sine",.05),160)},chestOpen:()=>{or(200,.15,"square",.06),setTimeout(()=>or(300,.1,"square",.05),100),setTimeout(()=>or(500,.1,"triangle",.06),200),setTimeout(()=>or(800,.2,"sine",.08),350)}},vce={QUEST_APPROVED:s.jsx(Cu,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:s.jsx(Cu,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:s.jsx(eT,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:s.jsx(Cu,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:s.jsx(XH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:s.jsx($H,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:s.jsx(rb,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:s.jsx(Gn,{className:"w-4 h-4 text-cyan-400"})},FR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=j.useState([]),[o,c]=j.useState(!1),[d,h]=j.useState(!1),[p,m]=j.useState({}),x=j.useRef(null),y=j.useRef(null),w=j.useRef(0),N=j.useCallback(()=>{if(!x.current)return;const I=x.current.getBoundingClientRect(),R=320;if(n){const A=Math.max(8,I.left),T=A+R>window.innerWidth-8?void 0:A,k=T==null?8:void 0;m({bottom:window.innerHeight-I.top+8,left:T,right:k})}else m({top:I.bottom+8,right:Math.max(8,window.innerWidth-I.right)})},[n]);j.useEffect(()=>{o&&Wf()&&bv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[o,e==null?void 0:e.pushNotifications]),j.useEffect(()=>{const I=Ae.subscribeToNotifications(t,R=>{const A=R.filter(T=>!T.isRead).length;A>w.current&&w.current>=0&&qn.notification(),w.current=A,i(R)});return()=>I()},[t]),j.useEffect(()=>{const I=R=>{var T,k;const A=R.target;(T=x.current)!=null&&T.contains(A)||(k=y.current)!=null&&k.contains(A)||c(!1)};return o&&document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[o]),j.useEffect(()=>{if(o)return N(),window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),()=>{window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0)}},[o,N]);const S=a.filter(I=>!I.isRead).length,E=async()=>{await Ae.markAllNotificationsRead(t)},C=async I=>{I.isRead||await Ae.markNotificationRead(I.id)},M=I=>{const R=Date.now()-new Date(I).getTime();return R<6e4?"just now":R<36e5?`${Math.floor(R/6e4)}m ago`:R<864e5?`${Math.floor(R/36e5)}h ago`:`${Math.floor(R/864e5)}d ago`},L=()=>{o||N(),c(!o)};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:x,onClick:L,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[s.jsx(S3,{className:"w-5 h-5"}),S>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:S>9?"9+":S})]}),o&&yu.createPortal(s.jsxs("div",{ref:y,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...p.top!=null?{top:p.top}:{},...p.bottom!=null?{bottom:p.bottom}:{},...p.left!=null?{left:p.left}:{},...p.right!=null?{right:p.right}:{}},children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),S>0&&s.jsxs("button",{onClick:E,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[s.jsx(wle,{className:"w-3 h-3"})," Mark all read"]})]}),d&&s.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(zH,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:async()=>{await rG()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),s.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),s.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(S3,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(I=>s.jsxs("div",{onClick:()=>C(I),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${I.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[s.jsx("div",{className:"mt-0.5 shrink-0",children:vce[I.type]||s.jsx(S3,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-bold text-white truncate",children:I.title}),s.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:I.message}),s.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:M(I.timestamp)})]}),!I.isRead&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},I.id))})]}),document.body)]})},bce=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var S,E;const[i,o]=j.useState(""),[c,d]=j.useState(!1),[h,p]=j.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};j.useEffect(()=>{if(!m.liveBackground){o("");return}(async()=>{try{const M=Mm(Dm,"public/background.mp4"),L=await Kv(M);o(L)}catch{console.warn("Firebase background not found, using local fallback."),o("/background.mp4")}})()},[m.liveBackground]);const x=async C=>{await Ae.updateUserSettings(t.id,C)},[y,w]=j.useState(null);j.useEffect(()=>{const C=UR.find(M=>{var L;return(L=M.children)==null?void 0:L.some(I=>r===`${M.name}:${I.name}`)});C&&w(C.name)},[r]);const N=()=>{const C=UR.filter(L=>!(L.role==="ADMIN"&&t.role!==Fa.ADMIN||L.role==="STUDENT"&&t.role!==Fa.STUDENT)),M=L=>{var I;return(I=L.children)==null?void 0:I.some(R=>r===`${L.name}:${R.name}`)};return s.jsx(s.Fragment,{children:C.map(L=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{L.children?y===L.name?w(null):(w(L.name),M(L)||(n(`${L.name}:${L.children[0].name}`),p(!1))):(n(L.name),p(!1))},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===L.name||M(L)?L.children?"bg-purple-500/10 text-white border border-purple-500/20":"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[s.jsx("span",{className:`${r===L.name||M(L)?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:L.icon}),s.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:L.name}),L.children&&s.jsx(si,{className:`w-3.5 h-3.5 transition-transform ${y===L.name?"rotate-180":""} ${M(L)?"text-purple-400":"text-gray-600"}`})]}),L.children&&y===L.name&&s.jsx("div",{className:"ml-6 mt-1 space-y-0.5 border-l border-white/10 pl-3",children:L.children.map(I=>{const R=`${L.name}:${I.name}`;return s.jsxs("button",{onClick:()=>{n(R),p(!1)},className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-xs font-medium transition-all ${r===R?"bg-purple-600/60 text-white":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[s.jsx("span",{className:r===R?"text-white":"text-gray-600",children:I.icon}),I.name]},I.name)})})]},L.name))})};return s.jsxs("div",{className:`flex flex-col lg:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[s.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:s.jsx("source",{src:i,type:"video/mp4"})},i)}),s.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),s.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:s.jsx(ll,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(FR,{userId:t.id,settings:m,onUpdateSettings:x}),s.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:s.jsx(Ble,{className:"w-6 h-6"})})]})]}),h&&s.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden flex",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),s.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((S=t.gamification)==null?void 0:S.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Mn,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:s.jsx(N,{})}),s.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[s.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[s.jsx(l0,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[s.jsx(DR,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),s.jsx("aside",{className:`p-4 hidden lg:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:s.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[s.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[s.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:s.jsx(ll,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),s.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Fa.ADMIN?"Admin System":"Operative Terminal"})]})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:s.jsx(N,{})}),s.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((E=t.gamification)==null?void 0:E.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(FR,{userId:t.id,settings:m,onUpdateSettings:x,dropUp:!0}),s.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:s.jsx(l0,{className:"w-4 h-4"})})]})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[s.jsx(DR,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),s.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-6 lg:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),s.jsx(gce,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:x})]})},wce=[.75,1,1.25,1.5,2],qR=({textContent:t,compact:e})=>{const[r,n]=j.useState(!1),[a,i]=j.useState(1),[o,c]=j.useState(0),[d,h]=j.useState(!1),p=j.useRef(null),m=j.useRef([]);j.useEffect(()=>{if(!t){m.current=[];return}const L=t.replace(/\n+/g,". ").split(new RegExp("(?<=[.!?])\\s+")).map(I=>I.trim()).filter(I=>I.length>2);m.current=L,c(0)},[t]);const x=j.useCallback(()=>{window.speechSynthesis.cancel(),n(!1)},[]),y=j.useCallback(L=>{const I=m.current;if(L<0||L>=I.length){n(!1);return}window.speechSynthesis.cancel();const R=new SpeechSynthesisUtterance(I[L]);R.rate=a,R.onend=()=>{const A=L+1;A<I.length?(c(A),y(A)):n(!1)},R.onerror=()=>{n(!1)},p.current=R,c(L),window.speechSynthesis.speak(R)},[a]),w=j.useCallback(()=>{r?x():(n(!0),y(o))},[r,o,y,x]),N=j.useCallback(()=>{const L=Math.max(0,o-1);c(L),r&&y(L)},[o,r,y]),S=j.useCallback(()=>{const L=Math.min(m.current.length-1,o+1);c(L),r&&y(L)},[o,r,y]),E=j.useCallback(L=>{if(i(L),h(!1),r){window.speechSynthesis.cancel();const I=new SpeechSynthesisUtterance(m.current[o]);I.rate=L,I.onend=()=>{const R=o+1;R<m.current.length?(c(R),y(R)):n(!1)},p.current=I,window.speechSynthesis.speak(I)}},[r,o,y]);if(j.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),!t||m.current.length===0)return null;if(e)return s.jsxs("button",{onClick:w,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${r?"text-amber-300 bg-amber-500/20 border-amber-500/30 hover:bg-amber-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:r?"Stop Reading":"Read Aloud",children:[r?s.jsx(ace,{className:"w-3 h-3"}):s.jsx(ZH,{className:"w-3 h-3"}),r?"Stop Reading":"Read Aloud"]});const C=m.current.length,M=C>0?(o+1)/C*100:0;return s.jsxs("div",{className:"flex items-center gap-2 bg-black/40 rounded-xl px-3 py-2 border border-white/10",children:[s.jsx("button",{onClick:w,className:`p-1.5 rounded-lg transition ${r?"bg-amber-500/20 text-amber-400":"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20"}`,children:r?s.jsx(Gle,{className:"w-4 h-4"}):s.jsx(Hf,{className:"w-4 h-4"})}),s.jsx("button",{onClick:N,disabled:o===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Kle,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:S,disabled:o>=C-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Qle,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-300",style:{width:`${M}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-500 font-mono min-w-[3rem] text-center",children:[o+1,"/",C]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-1 text-[10px] text-gray-400 hover:text-white bg-white/5 px-2 py-1 rounded-lg border border-white/10 transition",children:[s.jsx(Ole,{className:"w-3 h-3"}),a,"x"]}),d&&s.jsx("div",{className:"absolute bottom-full right-0 mb-1 bg-[#1a1b26] border border-white/10 rounded-lg shadow-lg overflow-hidden z-50",children:wce.map(L=>s.jsxs("button",{onClick:()=>E(L),className:`block w-full text-left px-3 py-1.5 text-xs transition ${a===L?"bg-purple-600/30 text-purple-300":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[L,"x"]},L))})]})]})},HR="portal-annotations-",GR="portal-annotation-warning-dismissed",Sce=["#ef4444","#f59e0b","#22c55e","#3b82f6","#a855f7","#ffffff"],Nce=[2,4,6,8],_ce=({containerRef:t,onAnnotationsChange:e,assignmentId:r})=>{const n=j.useRef(null),[a,i]=j.useState(!1),[o,c]=j.useState("pen"),[d,h]=j.useState("#ef4444"),[p,m]=j.useState(4),[x,y]=j.useState(!1),[w,N]=j.useState(!1),[S,E]=j.useState(!1),[C,M]=j.useState(!1),[L,I]=j.useState(!1),R=j.useRef([]),A=j.useRef(!1),T=j.useRef([]);j.useEffect(()=>{if(!r)return;const pe=localStorage.getItem(`${HR}${r}`);I(!!pe)},[r]);const k=j.useCallback(()=>r?`${HR}${r}`:null,[r]),F=j.useCallback(()=>{const pe=k();if(pe){if(R.current.length===0){localStorage.removeItem(pe),I(!1);return}localStorage.setItem(pe,JSON.stringify(R.current)),I(!0)}},[k]),O=j.useCallback(()=>{const pe=k();if(!pe)return;const Be=localStorage.getItem(pe);if(Be)try{R.current=JSON.parse(Be),e==null||e(R.current.length>0)}catch{R.current=[]}},[k,e]),$=j.useCallback(()=>{const pe=k();pe&&localStorage.removeItem(pe),I(!1)},[k]),B=j.useCallback(()=>{const pe=n.current,Be=t.current;if(!pe||!Be)return;const Ge=Be.getBoundingClientRect();pe.width=Ge.width,pe.height=Ge.height,pe.style.width=`${Ge.width}px`,pe.style.height=`${Ge.height}px`,G()},[t]);j.useEffect(()=>{if(!a)return;B();const pe=new ResizeObserver(B);return t.current&&pe.observe(t.current),()=>pe.disconnect()},[a,B,t]);const G=j.useCallback(()=>{const pe=n.current;if(!pe)return;const Be=pe.getContext("2d");if(Be){Be.clearRect(0,0,pe.width,pe.height);for(const Ge of R.current)if(!(Ge.points.length<2)){Be.beginPath(),Be.strokeStyle=Ge.tool==="eraser"?"rgba(0,0,0,0)":Ge.color,Be.lineWidth=Ge.width,Be.lineCap="round",Be.lineJoin="round",Ge.tool==="eraser"?Be.globalCompositeOperation="destination-out":Be.globalCompositeOperation="source-over",Be.moveTo(Ge.points[0].x,Ge.points[0].y);for(let He=1;He<Ge.points.length;He++)Be.lineTo(Ge.points[He].x,Ge.points[He].y);Be.stroke()}Be.globalCompositeOperation="source-over"}},[]),Q=j.useCallback(pe=>{const Be=n.current;if(!Be)return null;const Ge=Be.getBoundingClientRect();if("touches"in pe){const He=pe.touches[0];return{x:He.clientX-Ge.left,y:He.clientY-Ge.top}}return{x:pe.clientX-Ge.left,y:pe.clientY-Ge.top}},[]),H=j.useCallback(pe=>{if(!a)return;pe.preventDefault();const Be=Q(pe);Be&&(A.current=!0,T.current=[Be])},[a,Q]),K=j.useCallback(pe=>{if(!A.current||!a)return;pe.preventDefault();const Be=Q(pe);if(!Be)return;T.current.push(Be);const Ge=n.current;if(!Ge)return;const He=Ge.getContext("2d");if(!He)return;const Ne=T.current;if(Ne.length<2)return;He.beginPath(),o==="eraser"?(He.globalCompositeOperation="destination-out",He.strokeStyle="rgba(0,0,0,1)"):(He.globalCompositeOperation="source-over",He.strokeStyle=d),He.lineWidth=o==="eraser"?p*4:p,He.lineCap="round",He.lineJoin="round";const We=Ne[Ne.length-2],Y=Ne[Ne.length-1];He.moveTo(We.x,We.y),He.lineTo(Y.x,Y.y),He.stroke(),He.globalCompositeOperation="source-over"},[a,Q,o,d,p]),te=j.useCallback(()=>{A.current&&(A.current=!1,T.current.length>1&&(R.current.push({points:[...T.current],color:d,width:o==="eraser"?p*4:p,tool:o}),e==null||e(R.current.length>0)),T.current=[])},[d,p,o,e]),ae=j.useCallback(()=>{R.current.pop(),G(),e==null||e(R.current.length>0)},[G,e]),ce=j.useCallback(()=>{R.current=[],G(),e==null||e(!1)},[G,e]),X=j.useCallback(()=>{if(!(localStorage.getItem(GR)==="true")){E(!0);return}O(),i(!0)},[O]),ie=j.useCallback(()=>{C&&localStorage.setItem(GR,"true"),E(!1),M(!1),O(),i(!0)},[C,O]),ne=j.useCallback(()=>{F(),i(!1),y(!1),N(!1)},[F]),ve=j.useCallback(()=>{R.current=[],G(),$(),e==null||e(!1),i(!1),y(!1),N(!1)},[G,$,e]);return s.jsxs(s.Fragment,{children:[a?s.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest text-green-300 bg-green-500/15 border-green-500/25",children:[s.jsx(yv,{className:"w-3 h-3 animate-pulse"}),"Drawing"]}):s.jsxs("button",{onClick:X,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${L?"text-amber-300 bg-amber-500/15 border-amber-500/25 hover:bg-amber-500/25":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:L?"Resume saved annotations":"Start annotating",children:[s.jsx(yv,{className:"w-3 h-3"}),L?"Resume Notes":"Annotate"]}),S&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl max-w-md w-full mx-4 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:s.jsx(Tx,{className:"w-5 h-5 text-purple-400"})}),s.jsx("h3",{className:"text-white font-semibold text-lg",children:"Annotation Mode"})]}),s.jsxs("div",{className:"text-gray-400 text-sm space-y-3 mb-6",children:[s.jsx("p",{children:"You're about to enter annotation mode. While active, you can draw directly on the content using the pen and eraser tools."}),s.jsx("p",{children:"When you're done, you have two options:"}),s.jsxs("ul",{className:"list-none space-y-2 pl-1",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(lf,{className:"w-4 h-4 text-green-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-green-300",children:"Save & Exit"}),"  Your annotations are preserved. You can return to them later."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mn,{className:"w-4 h-4 text-red-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-red-300",children:"Discard & Exit"}),"  All annotations are permanently deleted."]})]})]})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-500 mb-5 cursor-pointer select-none",children:[s.jsx("input",{type:"checkbox",checked:C,onChange:pe=>M(pe.target.checked),className:"w-4 h-4 rounded border-white/20 bg-white/5 accent-purple-500"}),"Don't show this again"]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{E(!1),M(!1)},className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition cursor-pointer",children:"Cancel"}),s.jsx("button",{onClick:ie,className:"px-4 py-2 text-sm bg-purple-600 hover:bg-purple-500 text-white rounded-lg font-medium transition cursor-pointer",children:"Start Annotating"})]})]})}),a&&s.jsx("canvas",{ref:n,className:"absolute inset-0 z-30",style:{cursor:"crosshair",touchAction:"none"},onMouseDown:H,onMouseMove:K,onMouseUp:te,onMouseLeave:te,onTouchStart:H,onTouchMove:K,onTouchEnd:te}),a&&s.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-[#1a1b26]/95 backdrop-blur-md px-4 py-2 rounded-xl border border-white/10 shadow-2xl",children:[s.jsx("button",{onClick:()=>c("pen"),className:`p-2 rounded-lg transition cursor-pointer ${o==="pen"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Pen",children:s.jsx(yv,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>c("eraser"),className:`p-2 rounded-lg transition cursor-pointer ${o==="eraser"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Eraser",children:s.jsx(Ele,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{y(!x),N(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition cursor-pointer",title:"Color",children:[s.jsx(qle,{className:"w-4 h-4"}),s.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-2 h-2 rounded-full",style:{backgroundColor:d}})]}),x&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-1.5 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:Sce.map(pe=>s.jsx("button",{onClick:()=>{h(pe),y(!1)},className:`w-6 h-6 rounded-full border-2 transition cursor-pointer ${d===pe?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:pe}},pe))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>{N(!w),y(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition cursor-pointer",title:"Line width",children:s.jsx(tw,{className:"w-4 h-4"})}),w&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-2 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:Nce.map(pe=>s.jsx("button",{onClick:()=>{m(pe),N(!1)},className:`flex items-center justify-center w-8 h-8 rounded-lg transition cursor-pointer ${p===pe?"bg-purple-600/30 border border-purple-500/30":"hover:bg-white/5"}`,children:s.jsx("div",{className:"rounded-full bg-white",style:{width:pe*2,height:pe*2}})},pe))})]}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsx("button",{onClick:ae,disabled:R.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 disabled:opacity-30 transition cursor-pointer",title:"Undo last stroke",children:s.jsx(ece,{className:"w-4 h-4"})}),s.jsx("button",{onClick:ce,disabled:R.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-red-400 hover:bg-red-500/10 disabled:opacity-30 transition cursor-pointer",title:"Clear all strokes",children:s.jsx(Fr,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("button",{onClick:ne,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-green-300 bg-green-500/15 hover:bg-green-500/25 border border-green-500/20 transition cursor-pointer",title:"Save annotations and exit drawing mode",children:[s.jsx(lf,{className:"w-3.5 h-3.5"}),"Save & Exit"]}),s.jsxs("button",{onClick:ve,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-red-300 bg-red-500/15 hover:bg-red-500/25 border border-red-500/20 transition cursor-pointer",title:"Discard all annotations and exit",children:[s.jsx(Mn,{className:"w-3.5 h-3.5"}),"Discard & Exit"]})]})]})},jce={TEXT:s.jsx(N0,{className:"w-3.5 h-3.5"}),MC:s.jsx(Y2,{className:"w-3.5 h-3.5"}),SHORT_ANSWER:s.jsx(of,{className:"w-3.5 h-3.5"}),CHECKLIST:s.jsx(gE,{className:"w-3.5 h-3.5"}),VOCABULARY:s.jsx(Oa,{className:"w-3.5 h-3.5"}),INFO_BOX:s.jsx(Tx,{className:"w-3.5 h-3.5"}),SECTION_HEADER:s.jsx(HH,{className:"w-3.5 h-3.5"}),IMAGE:s.jsx(mE,{className:"w-3.5 h-3.5"}),VIDEO:s.jsx(Hf,{className:"w-3.5 h-3.5"}),OBJECTIVES:s.jsx(ds,{className:"w-3.5 h-3.5"}),DIVIDER:s.jsx(tw,{className:"w-3.5 h-3.5"}),EXTERNAL_LINK:s.jsx(J2,{className:"w-3.5 h-3.5"}),EMBED:s.jsx(FH,{className:"w-3.5 h-3.5"}),VOCAB_LIST:s.jsx(GH,{className:"w-3.5 h-3.5"}),ACTIVITY:s.jsx(Gn,{className:"w-3.5 h-3.5"}),SORTING:s.jsx(fE,{className:"w-3.5 h-3.5"}),DATA_TABLE:s.jsx(YH,{className:"w-3.5 h-3.5"}),BAR_CHART:s.jsx(qf,{className:"w-3.5 h-3.5"}),RANKING:s.jsx(af,{className:"w-3.5 h-3.5"}),LINKED:s.jsx(tb,{className:"w-3.5 h-3.5"})},Tce={TEXT:"Reading",MC:"Question",SHORT_ANSWER:"Response",CHECKLIST:"Checklist",VOCABULARY:"Vocabulary",INFO_BOX:"Info",SECTION_HEADER:"Section",IMAGE:"Image",VIDEO:"Video",OBJECTIVES:"Objectives",DIVIDER:"Divider",EXTERNAL_LINK:"Link",EMBED:"Embed",VOCAB_LIST:"Vocab List",ACTIVITY:"Activity",SORTING:"Sorting",DATA_TABLE:"Data Table",BAR_CHART:"Bar Chart",RANKING:"Ranking",LINKED:"Follow-up"},Ace=({blocks:t,currentBlockIndex:e,completedBlocks:r,onNavigateToBlock:n,engagementTime:a=0,xpEarned:i=0})=>{const o=t.filter(E=>["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(E.type)),c=o.filter(E=>r.has(E.id)).length,d=o.length,h=d>0?Math.round(c/d*100):e>=t.length-1?100:Math.round((e+1)/t.length*100),p=100,m=8,x=(p-m)/2,y=2*Math.PI*x,w=y-h/100*y,N=Math.floor(a/60),S=a%60;return s.jsxs("div",{className:"w-56 flex-shrink-0 flex flex-col gap-4 overflow-y-auto custom-scrollbar pr-1",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 bg-black/30 rounded-2xl p-4 border border-white/5",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{width:p,height:p,className:"transform -rotate-90",children:[s.jsx("circle",{cx:p/2,cy:p/2,r:x,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:m}),s.jsx("circle",{cx:p/2,cy:p/2,r:x,fill:"none",stroke:h===100?"#34d399":"#a855f7",strokeWidth:m,strokeLinecap:"round",strokeDasharray:y,strokeDashoffset:w,className:"transition-all duration-700 ease-out"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("span",{className:`text-xl font-black ${h===100?"text-emerald-400":"text-white"}`,children:[h,"%"]})})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[c,"/",d," questions"]}),s.jsxs("div",{className:"flex gap-3 text-[10px] text-gray-500 font-mono",children:[s.jsxs("span",{children:[N,":",String(S).padStart(2,"0")]}),i>0&&s.jsxs("span",{className:"text-amber-400",children:["+",i," XP"]})]})]}),s.jsxs("div",{className:"bg-black/30 rounded-2xl p-3 border border-white/5 flex flex-col gap-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:"Sections"}),t.map((E,C)=>{const M=C===e,L=r.has(E.id),I=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(E.type);return s.jsxs("button",{onClick:()=>n(C),className:`flex items-center gap-2 px-2 py-1.5 rounded-lg text-left transition-all text-[11px] ${M?"bg-purple-500/20 text-purple-300 border border-purple-500/30":L?"text-emerald-400/80 hover:bg-emerald-500/10":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx("span",{className:"shrink-0 w-4 h-4 flex items-center justify-center",children:L?s.jsx($r,{className:"w-3.5 h-3.5 text-emerald-400"}):s.jsx("span",{className:M?"text-purple-400":"text-gray-600",children:jce[E.type]||s.jsx(N0,{className:"w-3.5 h-3.5"})})}),s.jsxs("span",{className:"truncate flex-1 font-medium",children:[Tce[E.type]||E.type,I&&!L&&s.jsx("span",{className:"ml-1 text-[9px] text-amber-400/60",children:"*"})]}),s.jsx("span",{className:`text-[9px] font-mono ${M?"text-purple-400":"text-gray-600"}`,children:C+1})]},E.id)})]})]})},WR=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"],Ece=({block:t})=>s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:t.content}),kce=({block:t})=>{const r={tip:"border-green-500/30 bg-green-500/5 text-green-400",warning:"border-amber-500/30 bg-amber-500/5 text-amber-400",note:"border-blue-500/30 bg-blue-500/5 text-blue-400"}[t.variant||"note"];return s.jsxs("div",{className:`border rounded-xl p-4 text-sm ${r}`,children:[s.jsx("div",{className:"font-bold text-xs uppercase tracking-widest mb-1",children:t.variant==="tip"?"Tip":t.variant==="warning"?"Warning":"Note"}),s.jsx("div",{className:"text-gray-300",children:t.content})]})},Cce=({block:t,onComplete:e})=>{const[r,n]=j.useState(null),[a,i]=j.useState(!1),o=r===t.correctAnswer,c=()=>{r!==null&&(i(!0),e(r===t.correctAnswer))};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(Y2,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.options||[]).map((d,h)=>s.jsx("button",{onClick:()=>!a&&n(h),disabled:a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a&&h===t.correctAnswer?"border-green-500/50 bg-green-500/10 text-green-400":a&&h===r&&!o?"border-red-500/50 bg-red-500/10 text-red-400":r===h?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+h),"."]}),s.jsx("span",{children:d}),a&&h===t.correctAnswer&&s.jsx($r,{className:"w-4 h-4 text-green-400 ml-auto"}),a&&h===r&&!o&&s.jsx(so,{className:"w-4 h-4 text-red-400 ml-auto"})]})},h))}),!a&&s.jsx("button",{onClick:c,disabled:r===null,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Check Answer"}),a&&s.jsx("div",{className:`text-xs font-bold ${o?"text-green-400":"text-red-400"}`,children:o?"Correct!":"Incorrect  review the material above."})]})},Oce=({block:t,onComplete:e})=>{const[r,n]=j.useState(""),[a,i]=j.useState(!1),[o,c]=j.useState(!1),d=()=>{if(!r.trim())return;const p=(t.acceptedAnswers||[]).map(m=>m.toLowerCase().trim()).includes(r.toLowerCase().trim());c(p),i(!0),e(p)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(of,{className:"w-4 h-4 text-cyan-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),disabled:a,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:h=>h.key==="Enter"&&d()}),!a&&s.jsx("button",{onClick:d,disabled:!r.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),a&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${o?"text-green-400":"text-amber-400"}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(so,{className:"w-3 h-3"})," Accepted answers: ",(t.acceptedAnswers||[]).join(", ")]})})]})},Ice=({block:t})=>{const[e,r]=j.useState(!1);return s.jsx("button",{onClick:()=>r(!e),className:"w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Oa,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:t.term}),e?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:t.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal definition"})]})]})})},Rce=({block:t,onComplete:e})=>{const[r,n]=j.useState(new Set),a=(t.items||[]).length>0&&r.size===(t.items||[]).length,i=o=>{const c=new Set(r);c.has(o)?c.delete(o):c.add(o),n(c),c.size===(t.items||[]).length&&e(!0)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(gE,{className:"w-4 h-4 text-green-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.items||[]).map((o,c)=>s.jsxs("button",{onClick:()=>i(c),className:`w-full text-left flex items-center gap-3 p-3 rounded-xl border text-sm transition ${r.has(c)?"border-green-500/30 bg-green-500/5 text-green-400 line-through":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition ${r.has(c)?"border-green-500 bg-green-500":"border-gray-600"}`,children:r.has(c)&&s.jsx($r,{className:"w-3 h-3 text-white"})}),o]},c))}),a&&s.jsxs("div",{className:"text-xs font-bold text-green-400 flex items-center gap-1",children:[s.jsx($r,{className:"w-3 h-3"})," All items completed!"]})]})},Mce=({block:t})=>s.jsxs("div",{className:"text-center py-2",children:[t.icon&&s.jsx("div",{className:"text-3xl mb-2",children:t.icon}),s.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:t.title}),t.subtitle&&s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.subtitle})]}),Dce=({block:t})=>{const e=(t.url||"").replace(/\/file\/d\/([^/]+)\/.*/,"/uc?export=view&id=$1");return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",children:s.jsx("img",{src:e!==t.url?e:t.url,alt:t.alt||t.caption||"",className:"w-full max-h-[500px] object-contain",loading:"lazy"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]})},Pce=({block:t})=>{const r=(n=>{const a=n.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return a?`https://www.youtube.com/embed/${a[1]}`:""})(t.url||"");return r?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 aspect-video bg-black",children:s.jsx("iframe",{src:r,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",title:t.caption||"Video"})}),t.caption&&s.jsxs("p",{className:"text-xs text-gray-500 text-center italic flex items-center justify-center gap-1",children:[s.jsx(Hf,{className:"w-3 h-3"})," ",t.caption]})]}):s.jsx("div",{className:"text-sm text-gray-500 italic",children:"Invalid video URL"})},Lce=({block:t})=>s.jsxs("div",{className:"border border-emerald-500/20 bg-emerald-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-bold text-sm",children:[s.jsx(ds,{className:"w-4 h-4"}),t.title||"Learning Objectives"]}),s.jsx("ul",{className:"space-y-1",children:(t.items||[]).map((e,r)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[s.jsx("span",{className:"text-emerald-400 mt-0.5 shrink-0",children:""}),e]},r))})]}),Bce=()=>s.jsx("div",{className:"py-2",children:s.jsx("hr",{className:"border-white/10"})}),$ce=({block:t})=>s.jsx("a",{href:t.url,target:t.openInNewTab!==!1?"_blank":"_self",rel:"noopener noreferrer",className:"block p-4 rounded-xl border border-purple-500/20 bg-purple-500/5 hover:bg-purple-500/10 transition group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-purple-300 group-hover:text-purple-200 transition",children:t.title||t.url}),t.content&&s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:t.content})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-400 bg-purple-500/10 px-3 py-1.5 rounded-lg shrink-0 ml-3",children:[t.buttonLabel||"Open"," ",s.jsx(J2,{className:"w-3 h-3"})]})]})}),zce=({block:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",style:{height:t.height||500},children:s.jsx("iframe",{src:t.url,className:"w-full h-full border-0",title:t.caption||"Embedded content",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]}),Uce=({block:t})=>{const[e,r]=j.useState(new Set);return s.jsx("div",{className:"space-y-2",children:(t.terms||[]).map((n,a)=>s.jsx("button",{onClick:()=>r(i=>{const o=new Set(i);return o.has(a)?o.delete(a):o.add(a),o}),className:"w-full text-left p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Oa,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:n.term}),e.has(a)?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:n.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal"})]})]})},a))})},Vce=({block:t})=>s.jsxs("div",{className:"border border-amber-500/20 bg-amber-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-400 font-bold text-sm",children:[t.icon&&s.jsx("span",{className:"text-lg",children:t.icon}),t.title||"Activity"]}),s.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-line",children:t.instructions})]}),Fce=({block:t,onComplete:e})=>{const r=t.sortItems||[],[n,a]=j.useState({}),[i,o]=j.useState(!1),c=r.map((w,N)=>N).filter(w=>!(w in n)),d=Object.entries(n).filter(([,w])=>w==="left").map(([w])=>parseInt(w)),h=Object.entries(n).filter(([,w])=>w==="right").map(([w])=>parseInt(w)),p=(w,N)=>{i||a(S=>({...S,[w]:N}))},m=w=>{i||a(N=>{const S={...N};return delete S[w],S})},x=()=>{if(c.length>0)return;o(!0);const w=r.every((N,S)=>n[S]===N.correct);e(w)},y=r.filter((w,N)=>n[N]===w.correct).length;return s.jsxs("div",{className:"space-y-3",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),t.instructions&&s.jsx("p",{className:"text-xs text-gray-400",children:t.instructions}),c.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Sort these items"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(w=>s.jsxs("div",{className:"flex items-center gap-1 bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm text-gray-300",children:[s.jsx("span",{children:r[w].text}),s.jsx("button",{onClick:()=>p(w,"left"),className:"ml-1 text-[10px] bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded hover:bg-blue-500/30 transition",children:t.leftLabel||"L"}),s.jsx("button",{onClick:()=>p(w,"right"),className:"text-[10px] bg-orange-500/20 text-orange-300 px-1.5 py-0.5 rounded hover:bg-orange-500/30 transition",children:t.rightLabel||"R"})]},w))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"rounded-xl border border-blue-500/20 bg-blue-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest mb-2",children:t.leftLabel||"Category A"}),s.jsx("div",{className:"space-y-1",children:d.map(w=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[w].correct==="left"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[w].text}),!i&&s.jsx("button",{onClick:()=>m(w),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[w].correct==="left"&&s.jsx($r,{className:"w-3 h-3 text-green-400"}),i&&r[w].correct!=="left"&&s.jsx(so,{className:"w-3 h-3 text-red-400"})]},w))})]}),s.jsxs("div",{className:"rounded-xl border border-orange-500/20 bg-orange-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-2",children:t.rightLabel||"Category B"}),s.jsx("div",{className:"space-y-1",children:h.map(w=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[w].correct==="right"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[w].text}),!i&&s.jsx("button",{onClick:()=>m(w),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[w].correct==="right"&&s.jsx($r,{className:"w-3 h-3 text-green-400"}),i&&r[w].correct!=="right"&&s.jsx(so,{className:"w-3 h-3 text-red-400"})]},w))})]})]}),!i&&c.length===0&&r.length>0&&s.jsx("button",{onClick:x,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Sorting"}),i&&s.jsx("div",{className:`text-xs font-bold ${y===r.length?"text-green-400":"text-amber-400"}`,children:y===r.length?"All correct!":`${y}/${r.length} correct`})]})},qce=({block:t})=>{const e=t.columns||[],r=t.trials||3,[n,a]=j.useState(()=>Array.from({length:r},()=>Object.fromEntries(e.map(o=>[o.key,""])))),i=(o,c,d)=>{a(h=>{const p=[...h];return p[o]={...p[o],[c]:d},p})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-white/10",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/30",children:[s.jsx("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left w-12",children:"#"}),e.map(o=>s.jsxs("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left",children:[o.label,o.unit?` (${o.unit})`:""]},o.key))]})}),s.jsx("tbody",{children:n.map((o,c)=>s.jsxs("tr",{className:"border-t border-white/5",children:[s.jsx("td",{className:"px-3 py-1 text-xs text-gray-600 font-mono",children:c+1}),e.map(d=>s.jsx("td",{className:"px-1 py-1",children:d.editable!==!1?s.jsx("input",{type:"text",value:o[d.key]||"",onChange:h=>i(c,d.key,h.target.value),className:"w-full bg-black/20 border border-white/5 rounded px-2 py-1 text-sm text-white placeholder-gray-700 focus:outline-none focus:border-purple-500/50 transition"}):s.jsx("span",{className:"px-2 py-1 text-gray-400",children:o[d.key]})},d.key))]},c))})]})})]})},Hce=({block:t})=>{const e=t.barCount||3,r=t.height||300,[n,a]=j.useState(()=>Array(e).fill(0)),i=Math.max(...n.map(Math.abs),1),o=["#a855f7","#3b82f6","#ef4444","#22c55e","#f59e0b","#06b6d4","#ec4899","#8b5cf6","#14b8a6","#f97316"],c=(d,h)=>{const p=h.currentTarget.getBoundingClientRect(),m=h.clientY-p.top,x=Math.round((p.height/2-m)/(p.height/2)*10);a(y=>{const w=[...y];return w[d]=x,w})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium text-center",children:t.title}),s.jsx("div",{className:"flex items-end justify-center gap-4 px-4",style:{height:r},children:n.map((d,h)=>{const p=Math.abs(d)/Math.max(i,10)*(r/2-20);return s.jsxs("div",{className:"flex flex-col items-center gap-1 flex-1 h-full justify-center cursor-pointer",onClick:m=>c(h,m),children:[s.jsxs("div",{className:"relative w-full max-w-[60px] h-full flex items-center",children:[s.jsx("div",{className:"absolute inset-0 border-b border-white/10",style:{top:"50%"}}),s.jsx("div",{className:"absolute left-0 right-0 rounded-t-lg transition-all duration-200",style:{height:p,bottom:d>=0?"50%":void 0,top:d<0?"50%":void 0,backgroundColor:o[h%o.length],opacity:.8}})]}),s.jsx("div",{className:"text-[10px] text-gray-400 font-mono",children:d}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Bar ",h+1]})]},h)})}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 px-4",children:[s.jsx("span",{children:t.initialLabel}),s.jsx("span",{children:t.deltaLabel}),s.jsx("span",{children:t.finalLabel})]})]})},Gce=({block:t,onComplete:e})=>{const r=t.items||[],n=j.useMemo(()=>{const y=r.map((N,S)=>({item:N,origIdx:S}));let w=t.id.split("").reduce((N,S)=>N+S.charCodeAt(0),0);for(let N=y.length-1;N>0;N--){w=(w*16807+0)%2147483647;const S=w%(N+1);[y[N],y[S]]=[y[S],y[N]]}return y},[t.id,r]),[a,i]=j.useState(n),[o,c]=j.useState(!1),[d,h]=j.useState(null),p=(y,w)=>{o||i(N=>{const S=[...N],[E]=S.splice(y,1);return S.splice(w,0,E),S})},m=()=>{c(!0);const y=a.every((w,N)=>w.origIdx===N);e(y)},x=a.filter((y,w)=>y.origIdx===w).length;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(af,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-1",children:a.map((y,w)=>s.jsxs("div",{draggable:!o,onDragStart:()=>h(w),onDragOver:N=>N.preventDefault(),onDrop:()=>{d!==null&&p(d,w),h(null)},className:`flex items-center gap-2 p-3 rounded-xl border text-sm transition cursor-grab active:cursor-grabbing ${o?y.origIdx===w?"border-green-500/30 bg-green-500/5 text-green-400":"border-red-500/30 bg-red-500/5 text-red-400":d===w?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx(af,{className:"w-4 h-4 text-gray-600 shrink-0"}),s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[w+1,"."]}),s.jsx("span",{className:"flex-1",children:y.item}),o&&y.origIdx===w&&s.jsx($r,{className:"w-4 h-4 text-green-400"}),o&&y.origIdx!==w&&s.jsx(so,{className:"w-4 h-4 text-red-400"}),!o&&s.jsxs("div",{className:"flex gap-0.5",children:[s.jsx("button",{onClick:()=>w>0&&p(w,w-1),disabled:w===0,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(ao,{className:"w-3 h-3 -rotate-90"})}),s.jsx("button",{onClick:()=>w<a.length-1&&p(w,w+1),disabled:w===a.length-1,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(ao,{className:"w-3 h-3 rotate-90"})})]})]},y.origIdx))}),!o&&s.jsx("button",{onClick:m,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Order"}),o&&s.jsx("div",{className:`text-xs font-bold ${x===r.length?"text-green-400":"text-amber-400"}`,children:x===r.length?"Perfect order!":`${x}/${r.length} in correct position`})]})},Wce=({block:t,allBlocks:e,onComplete:r})=>{var m;const n=e.find(x=>x.id===t.linkedBlockId),[a,i]=j.useState(""),[o,c]=j.useState(!1),[d,h]=j.useState(!1),p=()=>{if(!a.trim())return;const x=(t.acceptedAnswers||[]).map(w=>w.toLowerCase().trim()),y=x.length===0||x.includes(a.toLowerCase().trim());h(y),c(!0),r(y)};return s.jsxs("div",{className:"space-y-3",children:[n&&s.jsxs("div",{className:"border border-white/10 bg-white/5 rounded-xl p-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[s.jsx(tb,{className:"w-3 h-3"})," Referenced question"]}),s.jsx("p",{className:"text-xs text-gray-400",children:n.content})]}),s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(tb,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),disabled:o,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:x=>x.key==="Enter"&&p()}),!o&&s.jsx("button",{onClick:p,disabled:!a.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),o&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${d?"text-green-400":"text-amber-400"}`,children:d?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(so,{className:"w-3 h-3"})," ",(t.acceptedAnswers||[]).length>0?`Accepted: ${(m=t.acceptedAnswers)==null?void 0:m.join(", ")}`:"Response recorded"]})})]})},tT=({blocks:t,onBlockComplete:e,onAllComplete:r,showSidebar:n=!1,engagementTime:a,xpEarned:i})=>{const[o,c]=j.useState(new Set),[d,h]=j.useState(0),p=j.useCallback((C,M)=>{e==null||e(C,M),c(L=>{const I=new Set(L);return I.add(C),t.filter(A=>WR.includes(A.type)).every(A=>I.has(A.id))&&(r==null||r()),I})},[t,e,r]),m=()=>{d<t.length-1&&h(C=>C+1)},x=()=>{d>0&&h(C=>C-1)};if(t.length===0)return null;const y=t[d],w=WR.includes(y.type),N=o.has(y.id),S=C=>{const M=L=>p(C.id,L);switch(C.type){case"TEXT":return s.jsx(Ece,{block:C});case"INFO_BOX":return s.jsx(kce,{block:C});case"MC":return s.jsx(Cce,{block:C,onComplete:M});case"SHORT_ANSWER":return s.jsx(Oce,{block:C,onComplete:M});case"VOCABULARY":return s.jsx(Ice,{block:C});case"CHECKLIST":return s.jsx(Rce,{block:C,onComplete:M});case"SECTION_HEADER":return s.jsx(Mce,{block:C});case"IMAGE":return s.jsx(Dce,{block:C});case"VIDEO":return s.jsx(Pce,{block:C});case"OBJECTIVES":return s.jsx(Lce,{block:C});case"DIVIDER":return s.jsx(Bce,{});case"EXTERNAL_LINK":return s.jsx($ce,{block:C});case"EMBED":return s.jsx(zce,{block:C});case"VOCAB_LIST":return s.jsx(Uce,{block:C});case"ACTIVITY":return s.jsx(Vce,{block:C});case"SORTING":return s.jsx(Fce,{block:C,onComplete:M});case"DATA_TABLE":return s.jsx(qce,{block:C});case"BAR_CHART":return s.jsx(Hce,{block:C});case"RANKING":return s.jsx(Gce,{block:C,onComplete:M});case"LINKED":return s.jsx(Wce,{block:C,allBlocks:t,onComplete:M});default:return s.jsxs("div",{className:"text-sm text-gray-500 italic",children:["Unknown block type: ",C.type]})}},E=s.jsxs("div",{className:"space-y-4 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-500",style:{width:`${(d+1)/t.length*100}%`}})}),s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[d+1,"/",t.length]})]}),s.jsx("div",{className:"animate-in fade-in slide-in-from-right-2 duration-200",children:S(y)},y.id),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/5",children:[s.jsx("button",{onClick:x,disabled:d===0,className:"text-xs text-gray-500 hover:text-white disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-white/5",children:"Previous"}),s.jsx("div",{className:"flex gap-1",children:t.map((C,M)=>s.jsx("button",{onClick:()=>h(M),className:`w-2 h-2 rounded-full transition ${M===d?"bg-purple-500 scale-125":o.has(C.id)?"bg-green-500":"bg-white/10 hover:bg-white/20"}`},C.id))}),s.jsxs("button",{onClick:m,disabled:d>=t.length-1||w&&!N,className:"flex items-center gap-1 text-xs text-purple-400 hover:text-purple-300 disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-purple-500/10",children:["Next ",s.jsx(ao,{className:"w-3 h-3"})]})]})]});return n&&t.length>=3?s.jsxs("div",{className:"flex gap-4",children:[E,s.jsx(Ace,{blocks:t,currentBlockIndex:d,completedBlocks:o,onNavigateToBlock:h,engagementTime:a,xpEarned:i})]}):E};class rs{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new rs(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Ms{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Ms(r,rs.range(this,e))}}class ht{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,o=r&&r.loc;if(o&&o.start<=o.end){var c=o.lexer.input;a=o.start,i=o.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=ht.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}ht.prototype.__proto__=Error.prototype;var Kce=function(e,r){return e===void 0?r:e},Qce=/([A-Z])/g,Xce=function(e){return e.replace(Qce,"-$1").toLowerCase()},Yce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Jce=/[&><"']/g;function Zce(t){return String(t).replace(Jce,e=>Yce[e])}var aG=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},eue=function(e){var r=aG(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},tue=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},rue=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Xr={deflt:Kce,escape:Zce,hyphenate:Xce,getBaseElem:aG,isCharacterBox:eue,protocolFromUrl:rue},wv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function nue(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class vE{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in wv)if(wv.hasOwnProperty(r)){var n=wv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:nue(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ht("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Xr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class iu{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Qo[aue[this.id]]}sub(){return Qo[iue[this.id]]}fracNum(){return Qo[sue[this.id]]}fracDen(){return Qo[oue[this.id]]}cramp(){return Qo[lue[this.id]]}text(){return Qo[cue[this.id]]}isTight(){return this.size>=2}}var bE=0,sb=1,Lh=2,tc=3,mg=4,to=5,cf=6,$i=7,Qo=[new iu(bE,0,!1),new iu(sb,0,!0),new iu(Lh,1,!1),new iu(tc,1,!0),new iu(mg,2,!1),new iu(to,2,!0),new iu(cf,3,!1),new iu($i,3,!0)],aue=[mg,to,mg,to,cf,$i,cf,$i],iue=[to,to,to,to,$i,$i,$i,$i],sue=[Lh,tc,mg,to,cf,$i,cf,$i],oue=[tc,tc,to,to,$i,$i,$i,$i],lue=[sb,sb,tc,tc,to,to,$i,$i],cue=[bE,sb,Lh,tc,Lh,tc,Lh,tc],Jt={DISPLAY:Qo[bE],TEXT:Qo[Lh],SCRIPT:Qo[mg],SCRIPTSCRIPT:Qo[cf]},rT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function uue(t){for(var e=0;e<rT.length;e++)for(var r=rT[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var Sv=[];rT.forEach(t=>t.blocks.forEach(e=>Sv.push(...e)));function iG(t){for(var e=0;e<Sv.length;e+=2)if(t>=Sv[e]&&t<=Sv[e+1])return!0;return!1}var fh=80,due=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},hue=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},fue=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},pue=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},mue=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},gue=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},xue=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},yue=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=due(r,fh);break;case"sqrtSize1":a=hue(r,fh);break;case"sqrtSize2":a=fue(r,fh);break;case"sqrtSize3":a=pue(r,fh);break;case"sqrtSize4":a=mue(r,fh);break;case"sqrtTall":a=xue(r,fh,n)}return a},vue=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},KR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},bue=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ex{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Zo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Ay={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},QR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function wue(t,e){Zo[t]=e}function wE(t,e,r){if(!Zo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Zo[e][n];if(!a&&t[0]in QR&&(n=QR[t[0]].charCodeAt(0),a=Zo[e][n]),!a&&r==="text"&&iG(n)&&(a=Zo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var T3={};function Sue(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!T3[e]){var r=T3[e]={cssEmPerMu:Ay.quad[e]/18};for(var n in Ay)Ay.hasOwnProperty(n)&&(r[n]=Ay[n][e])}return T3[e]}var Nue=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],XR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],YR=function(e,r){return r.size<2?e:Nue[e-1][r.size-1]};class Fl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Fl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=XR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Fl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:YR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:XR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=YR(Fl.BASESIZE,e);return this.size===r&&this.textSize===Fl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Fl.BASESIZE?["sizing","reset-size"+this.size,"size"+Fl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Sue(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Fl.BASESIZE=6;var nT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},_ue={ex:!0,em:!0,mu:!0},sG=function(e){return typeof e!="string"&&(e=e.unit),e in nT||e in _ue||e==="ex"},ta=function(e,r){var n;if(e.unit in nT)n=nT[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ht("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},vt=function(e){return+e.toFixed(4)+"em"},$u=function(e){return e.filter(r=>r).join(" ")},oG=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},lG=function(e){var r=document.createElement(e);r.className=$u(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},jue=/[\s"'>/=\x00-\x1f]/,cG=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Xr.escape($u(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Xr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Xr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(jue.test(i))throw new ht("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Xr.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class kx{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,oG.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return lG.call(this,"span")}toMarkup(){return cG.call(this,"span")}}class SE{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,oG.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return lG.call(this,"a")}toMarkup(){return cG.call(this,"a")}}class Tue{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Xr.escape(this.src)+'"'+(' alt="'+Xr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Xr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Xr.escape(r)+'"'),e+="'/>",e}}var Aue={:"",:"",:"",:""};class lo{constructor(e,r,n,a,i,o,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=o||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=uue(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=Aue[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=vt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=$u(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Xr.escape($u(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Xr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Xr.escape(n)+'"');var i=Xr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class hc{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Xr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class zu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",KR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Xr.escape(this.alternate)+'"/>':'<path d="'+Xr.escape(KR[this.pathName])+'"/>'}}class aT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Xr.escape(this.attributes[r])+'"');return e+="/>",e}}function JR(t){if(t instanceof lo)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Eue(t){if(t instanceof kx)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var kue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Cue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},$n={math:{},text:{}};function D(t,e,r,n,a,i){$n[t][a]={font:e,group:r,replace:n},i&&n&&($n[t][n]=$n[t][a])}var z="math",st="text",W="main",le="ams",Jn="accent-token",Ct="bin",Fi="close",Kf="inner",Yt="mathord",Da="op-token",Bs="open",aw="punct",ue="rel",Sc="spacing",ge="textord";D(z,W,ue,"","\\equiv",!0);D(z,W,ue,"","\\prec",!0);D(z,W,ue,"","\\succ",!0);D(z,W,ue,"","\\sim",!0);D(z,W,ue,"","\\perp");D(z,W,ue,"","\\preceq",!0);D(z,W,ue,"","\\succeq",!0);D(z,W,ue,"","\\simeq",!0);D(z,W,ue,"","\\mid",!0);D(z,W,ue,"","\\ll",!0);D(z,W,ue,"","\\gg",!0);D(z,W,ue,"","\\asymp",!0);D(z,W,ue,"","\\parallel");D(z,W,ue,"","\\bowtie",!0);D(z,W,ue,"","\\smile",!0);D(z,W,ue,"","\\sqsubseteq",!0);D(z,W,ue,"","\\sqsupseteq",!0);D(z,W,ue,"","\\doteq",!0);D(z,W,ue,"","\\frown",!0);D(z,W,ue,"","\\ni",!0);D(z,W,ue,"","\\propto",!0);D(z,W,ue,"","\\vdash",!0);D(z,W,ue,"","\\dashv",!0);D(z,W,ue,"","\\owns");D(z,W,aw,".","\\ldotp");D(z,W,aw,"","\\cdotp");D(z,W,ge,"#","\\#");D(st,W,ge,"#","\\#");D(z,W,ge,"&","\\&");D(st,W,ge,"&","\\&");D(z,W,ge,"","\\aleph",!0);D(z,W,ge,"","\\forall",!0);D(z,W,ge,"","\\hbar",!0);D(z,W,ge,"","\\exists",!0);D(z,W,ge,"","\\nabla",!0);D(z,W,ge,"","\\flat",!0);D(z,W,ge,"","\\ell",!0);D(z,W,ge,"","\\natural",!0);D(z,W,ge,"","\\clubsuit",!0);D(z,W,ge,"","\\wp",!0);D(z,W,ge,"","\\sharp",!0);D(z,W,ge,"","\\diamondsuit",!0);D(z,W,ge,"","\\Re",!0);D(z,W,ge,"","\\heartsuit",!0);D(z,W,ge,"","\\Im",!0);D(z,W,ge,"","\\spadesuit",!0);D(z,W,ge,"","\\S",!0);D(st,W,ge,"","\\S");D(z,W,ge,"","\\P",!0);D(st,W,ge,"","\\P");D(z,W,ge,"","\\dag");D(st,W,ge,"","\\dag");D(st,W,ge,"","\\textdagger");D(z,W,ge,"","\\ddag");D(st,W,ge,"","\\ddag");D(st,W,ge,"","\\textdaggerdbl");D(z,W,Fi,"","\\rmoustache",!0);D(z,W,Bs,"","\\lmoustache",!0);D(z,W,Fi,"","\\rgroup",!0);D(z,W,Bs,"","\\lgroup",!0);D(z,W,Ct,"","\\mp",!0);D(z,W,Ct,"","\\ominus",!0);D(z,W,Ct,"","\\uplus",!0);D(z,W,Ct,"","\\sqcap",!0);D(z,W,Ct,"","\\ast");D(z,W,Ct,"","\\sqcup",!0);D(z,W,Ct,"","\\bigcirc",!0);D(z,W,Ct,"","\\bullet",!0);D(z,W,Ct,"","\\ddagger");D(z,W,Ct,"","\\wr",!0);D(z,W,Ct,"","\\amalg");D(z,W,Ct,"&","\\And");D(z,W,ue,"","\\longleftarrow",!0);D(z,W,ue,"","\\Leftarrow",!0);D(z,W,ue,"","\\Longleftarrow",!0);D(z,W,ue,"","\\longrightarrow",!0);D(z,W,ue,"","\\Rightarrow",!0);D(z,W,ue,"","\\Longrightarrow",!0);D(z,W,ue,"","\\leftrightarrow",!0);D(z,W,ue,"","\\longleftrightarrow",!0);D(z,W,ue,"","\\Leftrightarrow",!0);D(z,W,ue,"","\\Longleftrightarrow",!0);D(z,W,ue,"","\\mapsto",!0);D(z,W,ue,"","\\longmapsto",!0);D(z,W,ue,"","\\nearrow",!0);D(z,W,ue,"","\\hookleftarrow",!0);D(z,W,ue,"","\\hookrightarrow",!0);D(z,W,ue,"","\\searrow",!0);D(z,W,ue,"","\\leftharpoonup",!0);D(z,W,ue,"","\\rightharpoonup",!0);D(z,W,ue,"","\\swarrow",!0);D(z,W,ue,"","\\leftharpoondown",!0);D(z,W,ue,"","\\rightharpoondown",!0);D(z,W,ue,"","\\nwarrow",!0);D(z,W,ue,"","\\rightleftharpoons",!0);D(z,le,ue,"","\\nless",!0);D(z,le,ue,"","\\@nleqslant");D(z,le,ue,"","\\@nleqq");D(z,le,ue,"","\\lneq",!0);D(z,le,ue,"","\\lneqq",!0);D(z,le,ue,"","\\@lvertneqq");D(z,le,ue,"","\\lnsim",!0);D(z,le,ue,"","\\lnapprox",!0);D(z,le,ue,"","\\nprec",!0);D(z,le,ue,"","\\npreceq",!0);D(z,le,ue,"","\\precnsim",!0);D(z,le,ue,"","\\precnapprox",!0);D(z,le,ue,"","\\nsim",!0);D(z,le,ue,"","\\@nshortmid");D(z,le,ue,"","\\nmid",!0);D(z,le,ue,"","\\nvdash",!0);D(z,le,ue,"","\\nvDash",!0);D(z,le,ue,"","\\ntriangleleft");D(z,le,ue,"","\\ntrianglelefteq",!0);D(z,le,ue,"","\\subsetneq",!0);D(z,le,ue,"","\\@varsubsetneq");D(z,le,ue,"","\\subsetneqq",!0);D(z,le,ue,"","\\@varsubsetneqq");D(z,le,ue,"","\\ngtr",!0);D(z,le,ue,"","\\@ngeqslant");D(z,le,ue,"","\\@ngeqq");D(z,le,ue,"","\\gneq",!0);D(z,le,ue,"","\\gneqq",!0);D(z,le,ue,"","\\@gvertneqq");D(z,le,ue,"","\\gnsim",!0);D(z,le,ue,"","\\gnapprox",!0);D(z,le,ue,"","\\nsucc",!0);D(z,le,ue,"","\\nsucceq",!0);D(z,le,ue,"","\\succnsim",!0);D(z,le,ue,"","\\succnapprox",!0);D(z,le,ue,"","\\ncong",!0);D(z,le,ue,"","\\@nshortparallel");D(z,le,ue,"","\\nparallel",!0);D(z,le,ue,"","\\nVDash",!0);D(z,le,ue,"","\\ntriangleright");D(z,le,ue,"","\\ntrianglerighteq",!0);D(z,le,ue,"","\\@nsupseteqq");D(z,le,ue,"","\\supsetneq",!0);D(z,le,ue,"","\\@varsupsetneq");D(z,le,ue,"","\\supsetneqq",!0);D(z,le,ue,"","\\@varsupsetneqq");D(z,le,ue,"","\\nVdash",!0);D(z,le,ue,"","\\precneqq",!0);D(z,le,ue,"","\\succneqq",!0);D(z,le,ue,"","\\@nsubseteqq");D(z,le,Ct,"","\\unlhd");D(z,le,Ct,"","\\unrhd");D(z,le,ue,"","\\nleftarrow",!0);D(z,le,ue,"","\\nrightarrow",!0);D(z,le,ue,"","\\nLeftarrow",!0);D(z,le,ue,"","\\nRightarrow",!0);D(z,le,ue,"","\\nleftrightarrow",!0);D(z,le,ue,"","\\nLeftrightarrow",!0);D(z,le,ue,"","\\vartriangle");D(z,le,ge,"","\\hslash");D(z,le,ge,"","\\triangledown");D(z,le,ge,"","\\lozenge");D(z,le,ge,"","\\circledS");D(z,le,ge,"","\\circledR");D(st,le,ge,"","\\circledR");D(z,le,ge,"","\\measuredangle",!0);D(z,le,ge,"","\\nexists");D(z,le,ge,"","\\mho");D(z,le,ge,"","\\Finv",!0);D(z,le,ge,"","\\Game",!0);D(z,le,ge,"","\\backprime");D(z,le,ge,"","\\blacktriangle");D(z,le,ge,"","\\blacktriangledown");D(z,le,ge,"","\\blacksquare");D(z,le,ge,"","\\blacklozenge");D(z,le,ge,"","\\bigstar");D(z,le,ge,"","\\sphericalangle",!0);D(z,le,ge,"","\\complement",!0);D(z,le,ge,"","\\eth",!0);D(st,W,ge,"","");D(z,le,ge,"","\\diagup");D(z,le,ge,"","\\diagdown");D(z,le,ge,"","\\square");D(z,le,ge,"","\\Box");D(z,le,ge,"","\\Diamond");D(z,le,ge,"","\\yen",!0);D(st,le,ge,"","\\yen",!0);D(z,le,ge,"","\\checkmark",!0);D(st,le,ge,"","\\checkmark");D(z,le,ge,"","\\beth",!0);D(z,le,ge,"","\\daleth",!0);D(z,le,ge,"","\\gimel",!0);D(z,le,ge,"","\\digamma",!0);D(z,le,ge,"","\\varkappa");D(z,le,Bs,"","\\@ulcorner",!0);D(z,le,Fi,"","\\@urcorner",!0);D(z,le,Bs,"","\\@llcorner",!0);D(z,le,Fi,"","\\@lrcorner",!0);D(z,le,ue,"","\\leqq",!0);D(z,le,ue,"","\\leqslant",!0);D(z,le,ue,"","\\eqslantless",!0);D(z,le,ue,"","\\lesssim",!0);D(z,le,ue,"","\\lessapprox",!0);D(z,le,ue,"","\\approxeq",!0);D(z,le,Ct,"","\\lessdot");D(z,le,ue,"","\\lll",!0);D(z,le,ue,"","\\lessgtr",!0);D(z,le,ue,"","\\lesseqgtr",!0);D(z,le,ue,"","\\lesseqqgtr",!0);D(z,le,ue,"","\\doteqdot");D(z,le,ue,"","\\risingdotseq",!0);D(z,le,ue,"","\\fallingdotseq",!0);D(z,le,ue,"","\\backsim",!0);D(z,le,ue,"","\\backsimeq",!0);D(z,le,ue,"","\\subseteqq",!0);D(z,le,ue,"","\\Subset",!0);D(z,le,ue,"","\\sqsubset",!0);D(z,le,ue,"","\\preccurlyeq",!0);D(z,le,ue,"","\\curlyeqprec",!0);D(z,le,ue,"","\\precsim",!0);D(z,le,ue,"","\\precapprox",!0);D(z,le,ue,"","\\vartriangleleft");D(z,le,ue,"","\\trianglelefteq");D(z,le,ue,"","\\vDash",!0);D(z,le,ue,"","\\Vvdash",!0);D(z,le,ue,"","\\smallsmile");D(z,le,ue,"","\\smallfrown");D(z,le,ue,"","\\bumpeq",!0);D(z,le,ue,"","\\Bumpeq",!0);D(z,le,ue,"","\\geqq",!0);D(z,le,ue,"","\\geqslant",!0);D(z,le,ue,"","\\eqslantgtr",!0);D(z,le,ue,"","\\gtrsim",!0);D(z,le,ue,"","\\gtrapprox",!0);D(z,le,Ct,"","\\gtrdot");D(z,le,ue,"","\\ggg",!0);D(z,le,ue,"","\\gtrless",!0);D(z,le,ue,"","\\gtreqless",!0);D(z,le,ue,"","\\gtreqqless",!0);D(z,le,ue,"","\\eqcirc",!0);D(z,le,ue,"","\\circeq",!0);D(z,le,ue,"","\\triangleq",!0);D(z,le,ue,"","\\thicksim");D(z,le,ue,"","\\thickapprox");D(z,le,ue,"","\\supseteqq",!0);D(z,le,ue,"","\\Supset",!0);D(z,le,ue,"","\\sqsupset",!0);D(z,le,ue,"","\\succcurlyeq",!0);D(z,le,ue,"","\\curlyeqsucc",!0);D(z,le,ue,"","\\succsim",!0);D(z,le,ue,"","\\succapprox",!0);D(z,le,ue,"","\\vartriangleright");D(z,le,ue,"","\\trianglerighteq");D(z,le,ue,"","\\Vdash",!0);D(z,le,ue,"","\\shortmid");D(z,le,ue,"","\\shortparallel");D(z,le,ue,"","\\between",!0);D(z,le,ue,"","\\pitchfork",!0);D(z,le,ue,"","\\varpropto");D(z,le,ue,"","\\blacktriangleleft");D(z,le,ue,"","\\therefore",!0);D(z,le,ue,"","\\backepsilon");D(z,le,ue,"","\\blacktriangleright");D(z,le,ue,"","\\because",!0);D(z,le,ue,"","\\llless");D(z,le,ue,"","\\gggtr");D(z,le,Ct,"","\\lhd");D(z,le,Ct,"","\\rhd");D(z,le,ue,"","\\eqsim",!0);D(z,W,ue,"","\\Join");D(z,le,ue,"","\\Doteq",!0);D(z,le,Ct,"","\\dotplus",!0);D(z,le,Ct,"","\\smallsetminus");D(z,le,Ct,"","\\Cap",!0);D(z,le,Ct,"","\\Cup",!0);D(z,le,Ct,"","\\doublebarwedge",!0);D(z,le,Ct,"","\\boxminus",!0);D(z,le,Ct,"","\\boxplus",!0);D(z,le,Ct,"","\\divideontimes",!0);D(z,le,Ct,"","\\ltimes",!0);D(z,le,Ct,"","\\rtimes",!0);D(z,le,Ct,"","\\leftthreetimes",!0);D(z,le,Ct,"","\\rightthreetimes",!0);D(z,le,Ct,"","\\curlywedge",!0);D(z,le,Ct,"","\\curlyvee",!0);D(z,le,Ct,"","\\circleddash",!0);D(z,le,Ct,"","\\circledast",!0);D(z,le,Ct,"","\\centerdot");D(z,le,Ct,"","\\intercal",!0);D(z,le,Ct,"","\\doublecap");D(z,le,Ct,"","\\doublecup");D(z,le,Ct,"","\\boxtimes",!0);D(z,le,ue,"","\\dashrightarrow",!0);D(z,le,ue,"","\\dashleftarrow",!0);D(z,le,ue,"","\\leftleftarrows",!0);D(z,le,ue,"","\\leftrightarrows",!0);D(z,le,ue,"","\\Lleftarrow",!0);D(z,le,ue,"","\\twoheadleftarrow",!0);D(z,le,ue,"","\\leftarrowtail",!0);D(z,le,ue,"","\\looparrowleft",!0);D(z,le,ue,"","\\leftrightharpoons",!0);D(z,le,ue,"","\\curvearrowleft",!0);D(z,le,ue,"","\\circlearrowleft",!0);D(z,le,ue,"","\\Lsh",!0);D(z,le,ue,"","\\upuparrows",!0);D(z,le,ue,"","\\upharpoonleft",!0);D(z,le,ue,"","\\downharpoonleft",!0);D(z,W,ue,"","\\origof",!0);D(z,W,ue,"","\\imageof",!0);D(z,le,ue,"","\\multimap",!0);D(z,le,ue,"","\\leftrightsquigarrow",!0);D(z,le,ue,"","\\rightrightarrows",!0);D(z,le,ue,"","\\rightleftarrows",!0);D(z,le,ue,"","\\twoheadrightarrow",!0);D(z,le,ue,"","\\rightarrowtail",!0);D(z,le,ue,"","\\looparrowright",!0);D(z,le,ue,"","\\curvearrowright",!0);D(z,le,ue,"","\\circlearrowright",!0);D(z,le,ue,"","\\Rsh",!0);D(z,le,ue,"","\\downdownarrows",!0);D(z,le,ue,"","\\upharpoonright",!0);D(z,le,ue,"","\\downharpoonright",!0);D(z,le,ue,"","\\rightsquigarrow",!0);D(z,le,ue,"","\\leadsto");D(z,le,ue,"","\\Rrightarrow",!0);D(z,le,ue,"","\\restriction");D(z,W,ge,"","`");D(z,W,ge,"$","\\$");D(st,W,ge,"$","\\$");D(st,W,ge,"$","\\textdollar");D(z,W,ge,"%","\\%");D(st,W,ge,"%","\\%");D(z,W,ge,"_","\\_");D(st,W,ge,"_","\\_");D(st,W,ge,"_","\\textunderscore");D(z,W,ge,"","\\angle",!0);D(z,W,ge,"","\\infty",!0);D(z,W,ge,"","\\prime");D(z,W,ge,"","\\triangle");D(z,W,ge,"","\\Gamma",!0);D(z,W,ge,"","\\Delta",!0);D(z,W,ge,"","\\Theta",!0);D(z,W,ge,"","\\Lambda",!0);D(z,W,ge,"","\\Xi",!0);D(z,W,ge,"","\\Pi",!0);D(z,W,ge,"","\\Sigma",!0);D(z,W,ge,"","\\Upsilon",!0);D(z,W,ge,"","\\Phi",!0);D(z,W,ge,"","\\Psi",!0);D(z,W,ge,"","\\Omega",!0);D(z,W,ge,"A","");D(z,W,ge,"B","");D(z,W,ge,"E","");D(z,W,ge,"Z","");D(z,W,ge,"H","");D(z,W,ge,"I","");D(z,W,ge,"K","");D(z,W,ge,"M","");D(z,W,ge,"N","");D(z,W,ge,"O","");D(z,W,ge,"P","");D(z,W,ge,"T","");D(z,W,ge,"X","");D(z,W,ge,"","\\neg",!0);D(z,W,ge,"","\\lnot");D(z,W,ge,"","\\top");D(z,W,ge,"","\\bot");D(z,W,ge,"","\\emptyset");D(z,le,ge,"","\\varnothing");D(z,W,Yt,"","\\alpha",!0);D(z,W,Yt,"","\\beta",!0);D(z,W,Yt,"","\\gamma",!0);D(z,W,Yt,"","\\delta",!0);D(z,W,Yt,"","\\epsilon",!0);D(z,W,Yt,"","\\zeta",!0);D(z,W,Yt,"","\\eta",!0);D(z,W,Yt,"","\\theta",!0);D(z,W,Yt,"","\\iota",!0);D(z,W,Yt,"","\\kappa",!0);D(z,W,Yt,"","\\lambda",!0);D(z,W,Yt,"","\\mu",!0);D(z,W,Yt,"","\\nu",!0);D(z,W,Yt,"","\\xi",!0);D(z,W,Yt,"","\\omicron",!0);D(z,W,Yt,"","\\pi",!0);D(z,W,Yt,"","\\rho",!0);D(z,W,Yt,"","\\sigma",!0);D(z,W,Yt,"","\\tau",!0);D(z,W,Yt,"","\\upsilon",!0);D(z,W,Yt,"","\\phi",!0);D(z,W,Yt,"","\\chi",!0);D(z,W,Yt,"","\\psi",!0);D(z,W,Yt,"","\\omega",!0);D(z,W,Yt,"","\\varepsilon",!0);D(z,W,Yt,"","\\vartheta",!0);D(z,W,Yt,"","\\varpi",!0);D(z,W,Yt,"","\\varrho",!0);D(z,W,Yt,"","\\varsigma",!0);D(z,W,Yt,"","\\varphi",!0);D(z,W,Ct,"","*",!0);D(z,W,Ct,"+","+");D(z,W,Ct,"","-",!0);D(z,W,Ct,"","\\cdot",!0);D(z,W,Ct,"","\\circ",!0);D(z,W,Ct,"","\\div",!0);D(z,W,Ct,"","\\pm",!0);D(z,W,Ct,"","\\times",!0);D(z,W,Ct,"","\\cap",!0);D(z,W,Ct,"","\\cup",!0);D(z,W,Ct,"","\\setminus",!0);D(z,W,Ct,"","\\land");D(z,W,Ct,"","\\lor");D(z,W,Ct,"","\\wedge",!0);D(z,W,Ct,"","\\vee",!0);D(z,W,ge,"","\\surd");D(z,W,Bs,"","\\langle",!0);D(z,W,Bs,"","\\lvert");D(z,W,Bs,"","\\lVert");D(z,W,Fi,"?","?");D(z,W,Fi,"!","!");D(z,W,Fi,"","\\rangle",!0);D(z,W,Fi,"","\\rvert");D(z,W,Fi,"","\\rVert");D(z,W,ue,"=","=");D(z,W,ue,":",":");D(z,W,ue,"","\\approx",!0);D(z,W,ue,"","\\cong",!0);D(z,W,ue,"","\\ge");D(z,W,ue,"","\\geq",!0);D(z,W,ue,"","\\gets");D(z,W,ue,">","\\gt",!0);D(z,W,ue,"","\\in",!0);D(z,W,ue,"","\\@not");D(z,W,ue,"","\\subset",!0);D(z,W,ue,"","\\supset",!0);D(z,W,ue,"","\\subseteq",!0);D(z,W,ue,"","\\supseteq",!0);D(z,le,ue,"","\\nsubseteq",!0);D(z,le,ue,"","\\nsupseteq",!0);D(z,W,ue,"","\\models");D(z,W,ue,"","\\leftarrow",!0);D(z,W,ue,"","\\le");D(z,W,ue,"","\\leq",!0);D(z,W,ue,"<","\\lt",!0);D(z,W,ue,"","\\rightarrow",!0);D(z,W,ue,"","\\to");D(z,le,ue,"","\\ngeq",!0);D(z,le,ue,"","\\nleq",!0);D(z,W,Sc,"","\\ ");D(z,W,Sc,"","\\space");D(z,W,Sc,"","\\nobreakspace");D(st,W,Sc,"","\\ ");D(st,W,Sc,""," ");D(st,W,Sc,"","\\space");D(st,W,Sc,"","\\nobreakspace");D(z,W,Sc,null,"\\nobreak");D(z,W,Sc,null,"\\allowbreak");D(z,W,aw,",",",");D(z,W,aw,";",";");D(z,le,Ct,"","\\barwedge",!0);D(z,le,Ct,"","\\veebar",!0);D(z,W,Ct,"","\\odot",!0);D(z,W,Ct,"","\\oplus",!0);D(z,W,Ct,"","\\otimes",!0);D(z,W,ge,"","\\partial",!0);D(z,W,Ct,"","\\oslash",!0);D(z,le,Ct,"","\\circledcirc",!0);D(z,le,Ct,"","\\boxdot",!0);D(z,W,Ct,"","\\bigtriangleup");D(z,W,Ct,"","\\bigtriangledown");D(z,W,Ct,"","\\dagger");D(z,W,Ct,"","\\diamond");D(z,W,Ct,"","\\star");D(z,W,Ct,"","\\triangleleft");D(z,W,Ct,"","\\triangleright");D(z,W,Bs,"{","\\{");D(st,W,ge,"{","\\{");D(st,W,ge,"{","\\textbraceleft");D(z,W,Fi,"}","\\}");D(st,W,ge,"}","\\}");D(st,W,ge,"}","\\textbraceright");D(z,W,Bs,"{","\\lbrace");D(z,W,Fi,"}","\\rbrace");D(z,W,Bs,"[","\\lbrack",!0);D(st,W,ge,"[","\\lbrack",!0);D(z,W,Fi,"]","\\rbrack",!0);D(st,W,ge,"]","\\rbrack",!0);D(z,W,Bs,"(","\\lparen",!0);D(z,W,Fi,")","\\rparen",!0);D(st,W,ge,"<","\\textless",!0);D(st,W,ge,">","\\textgreater",!0);D(z,W,Bs,"","\\lfloor",!0);D(z,W,Fi,"","\\rfloor",!0);D(z,W,Bs,"","\\lceil",!0);D(z,W,Fi,"","\\rceil",!0);D(z,W,ge,"\\","\\backslash");D(z,W,ge,"","|");D(z,W,ge,"","\\vert");D(st,W,ge,"|","\\textbar",!0);D(z,W,ge,"","\\|");D(z,W,ge,"","\\Vert");D(st,W,ge,"","\\textbardbl");D(st,W,ge,"~","\\textasciitilde");D(st,W,ge,"\\","\\textbackslash");D(st,W,ge,"^","\\textasciicircum");D(z,W,ue,"","\\uparrow",!0);D(z,W,ue,"","\\Uparrow",!0);D(z,W,ue,"","\\downarrow",!0);D(z,W,ue,"","\\Downarrow",!0);D(z,W,ue,"","\\updownarrow",!0);D(z,W,ue,"","\\Updownarrow",!0);D(z,W,Da,"","\\coprod");D(z,W,Da,"","\\bigvee");D(z,W,Da,"","\\bigwedge");D(z,W,Da,"","\\biguplus");D(z,W,Da,"","\\bigcap");D(z,W,Da,"","\\bigcup");D(z,W,Da,"","\\int");D(z,W,Da,"","\\intop");D(z,W,Da,"","\\iint");D(z,W,Da,"","\\iiint");D(z,W,Da,"","\\prod");D(z,W,Da,"","\\sum");D(z,W,Da,"","\\bigotimes");D(z,W,Da,"","\\bigoplus");D(z,W,Da,"","\\bigodot");D(z,W,Da,"","\\oint");D(z,W,Da,"","\\oiint");D(z,W,Da,"","\\oiiint");D(z,W,Da,"","\\bigsqcup");D(z,W,Da,"","\\smallint");D(st,W,Kf,"","\\textellipsis");D(z,W,Kf,"","\\mathellipsis");D(st,W,Kf,"","\\ldots",!0);D(z,W,Kf,"","\\ldots",!0);D(z,W,Kf,"","\\@cdots",!0);D(z,W,Kf,"","\\ddots",!0);D(z,W,ge,"","\\varvdots");D(st,W,ge,"","\\varvdots");D(z,W,Jn,"","\\acute");D(z,W,Jn,"","\\grave");D(z,W,Jn,"","\\ddot");D(z,W,Jn,"~","\\tilde");D(z,W,Jn,"","\\bar");D(z,W,Jn,"","\\breve");D(z,W,Jn,"","\\check");D(z,W,Jn,"^","\\hat");D(z,W,Jn,"","\\vec");D(z,W,Jn,"","\\dot");D(z,W,Jn,"","\\mathring");D(z,W,Yt,"","\\@imath");D(z,W,Yt,"","\\@jmath");D(z,W,ge,"","");D(z,W,ge,"","");D(st,W,ge,"","\\i",!0);D(st,W,ge,"","\\j",!0);D(st,W,ge,"","\\ss",!0);D(st,W,ge,"","\\ae",!0);D(st,W,ge,"","\\oe",!0);D(st,W,ge,"","\\o",!0);D(st,W,ge,"","\\AE",!0);D(st,W,ge,"","\\OE",!0);D(st,W,ge,"","\\O",!0);D(st,W,Jn,"","\\'");D(st,W,Jn,"","\\`");D(st,W,Jn,"","\\^");D(st,W,Jn,"","\\~");D(st,W,Jn,"","\\=");D(st,W,Jn,"","\\u");D(st,W,Jn,"","\\.");D(st,W,Jn,"","\\c");D(st,W,Jn,"","\\r");D(st,W,Jn,"","\\v");D(st,W,Jn,"",'\\"');D(st,W,Jn,"","\\H");D(st,W,Jn,"","\\textcircled");var uG={"--":!0,"---":!0,"``":!0,"''":!0};D(st,W,ge,"","--",!0);D(st,W,ge,"","\\textendash");D(st,W,ge,"","---",!0);D(st,W,ge,"","\\textemdash");D(st,W,ge,"","`",!0);D(st,W,ge,"","\\textquoteleft");D(st,W,ge,"","'",!0);D(st,W,ge,"","\\textquoteright");D(st,W,ge,"","``",!0);D(st,W,ge,"","\\textquotedblleft");D(st,W,ge,"","''",!0);D(st,W,ge,"","\\textquotedblright");D(z,W,ge,"","\\degree",!0);D(st,W,ge,"","\\degree");D(st,W,ge,"","\\textdegree",!0);D(z,W,ge,"","\\pounds");D(z,W,ge,"","\\mathsterling",!0);D(st,W,ge,"","\\pounds");D(st,W,ge,"","\\textsterling",!0);D(z,le,ge,"","\\maltese");D(st,le,ge,"","\\maltese");var ZR='0123456789/@."';for(var A3=0;A3<ZR.length;A3++){var eM=ZR.charAt(A3);D(z,W,ge,eM,eM)}var tM='0123456789!@*()-=+";:?/.,';for(var E3=0;E3<tM.length;E3++){var rM=tM.charAt(E3);D(st,W,ge,rM,rM)}var ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var k3=0;k3<ob.length;k3++){var Ey=ob.charAt(k3);D(z,W,Yt,Ey,Ey),D(st,W,ge,Ey,Ey)}D(z,le,ge,"C","");D(st,le,ge,"C","");D(z,le,ge,"H","");D(st,le,ge,"H","");D(z,le,ge,"N","");D(st,le,ge,"N","");D(z,le,ge,"P","");D(st,le,ge,"P","");D(z,le,ge,"Q","");D(st,le,ge,"Q","");D(z,le,ge,"R","");D(st,le,ge,"R","");D(z,le,ge,"Z","");D(st,le,ge,"Z","");D(z,W,Yt,"h","");D(st,W,Yt,"h","");var ir="";for(var Di=0;Di<ob.length;Di++){var oa=ob.charAt(Di);ir=String.fromCharCode(55349,56320+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56372+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56424+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56580+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56684+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56736+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56788+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56840+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56944+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),Di<26&&(ir=String.fromCharCode(55349,56632+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir),ir=String.fromCharCode(55349,56476+Di),D(z,W,Yt,oa,ir),D(st,W,ge,oa,ir))}ir="";D(z,W,Yt,"k",ir);D(st,W,ge,"k",ir);for(var Sd=0;Sd<10;Sd++){var su=Sd.toString();ir=String.fromCharCode(55349,57294+Sd),D(z,W,Yt,su,ir),D(st,W,ge,su,ir),ir=String.fromCharCode(55349,57314+Sd),D(z,W,Yt,su,ir),D(st,W,ge,su,ir),ir=String.fromCharCode(55349,57324+Sd),D(z,W,Yt,su,ir),D(st,W,ge,su,ir),ir=String.fromCharCode(55349,57334+Sd),D(z,W,Yt,su,ir),D(st,W,ge,su,ir)}var iT="";for(var C3=0;C3<iT.length;C3++){var ky=iT.charAt(C3);D(z,W,Yt,ky,ky),D(st,W,ge,ky,ky)}var Cy=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],nM=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Oue=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[Cy[c][2],Cy[c][o]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[nM[d][2],nM[d][o]]}else{if(i===120485||i===120486)return[Cy[0][2],Cy[0][o]];if(120486<i&&i<120782)return["",""];throw new ht("Unsupported character: "+e)}},iw=function(e,r,n){return $n[n][e]&&$n[n][e].replace&&(e=$n[n][e].replace),{value:e,metrics:wE(e,r,n)}},_o=function(e,r,n,a,i){var o=iw(e,r,n),c=o.metrics;e=o.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new lo(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new lo(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},Iue=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&iw(e,"Main-Bold",r).metrics?_o(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||$n[r][e].font==="main"?_o(e,"Main-Regular",r,n,a):_o(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},Rue=function(e,r,n,a,i){return i!=="textord"&&iw(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Mue=function(e,r,n){var a=e.mode,i=e.text,o=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=Oue(i,a)),h.length>0)return _o(i,h,a,r,o.concat(p));if(d){var m,x;if(d==="boldsymbol"){var y=Rue(i,a,r,o,n);m=y.fontName,x=[y.fontClass]}else c?(m=fG[d].fontName,x=[d]):(m=Oy(d,r.fontWeight,r.fontShape),x=[d,r.fontWeight,r.fontShape]);if(iw(i,m,a).metrics)return _o(i,m,a,r,o.concat(x));if(uG.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var w=[],N=0;N<i.length;N++)w.push(_o(i[N],m,a,r,o.concat(x)));return hG(w)}}if(n==="mathord")return _o(i,"Math-Italic",a,r,o.concat(["mathnormal"]));if(n==="textord"){var S=$n[a][i]&&$n[a][i].font;if(S==="ams"){var E=Oy("amsrm",r.fontWeight,r.fontShape);return _o(i,E,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(S==="main"||!S){var C=Oy("textrm",r.fontWeight,r.fontShape);return _o(i,C,a,r,o.concat(r.fontWeight,r.fontShape))}else{var M=Oy(S,r.fontWeight,r.fontShape);return _o(i,M,a,r,o.concat(M,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Due=(t,e)=>{if($u(t.classes)!==$u(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},Pue=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof lo&&n instanceof lo&&Due(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},NE=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},es=function(e,r,n,a){var i=new kx(e,r,n,a);return NE(i),i},dG=(t,e,r,n)=>new kx(t,e,r,n),Lue=function(e,r,n){var a=es([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=vt(a.height),a.maxFontSize=1,a},Bue=function(e,r,n,a){var i=new SE(e,r,n,a);return NE(i),i},hG=function(e){var r=new Ex(e);return NE(r),r},$ue=function(e,r){return e instanceof Ex?es([],[e],r):e},zue=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,o=1;o<r.length;o++){var c=-r[o].shift-i-r[o].elem.depth,d=c-(r[o-1].elem.height+r[o-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[o])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var x=e.children[m];p-=x.type==="kern"?x.size:x.elem.height+x.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var y=e.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-y.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-y.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},Uue=function(e,r){for(var{children:n,depth:a}=zue(e),i=0,o=0;o<n.length;o++){var c=n[o];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=es(["pstrut"],[]);h.style.height=vt(i);for(var p=[],m=a,x=a,y=a,w=0;w<n.length;w++){var N=n[w];if(N.type==="kern")y+=N.size;else{var S=N.elem,E=N.wrapperClasses||[],C=N.wrapperStyle||{},M=es(E,[h,S],void 0,C);M.style.top=vt(-i-y-S.depth),N.marginLeft&&(M.style.marginLeft=N.marginLeft),N.marginRight&&(M.style.marginRight=N.marginRight),p.push(M),y+=S.height+S.depth}m=Math.min(m,y),x=Math.max(x,y)}var L=es(["vlist"],p);L.style.height=vt(x);var I;if(m<0){var R=es([],[]),A=es(["vlist"],[R]);A.style.height=vt(-m);var T=es(["vlist-s"],[new lo("")]);I=[es(["vlist-r"],[L,T]),es(["vlist-r"],[A])]}else I=[es(["vlist-r"],[L])];var k=es(["vlist-t"],I);return I.length===2&&k.classes.push("vlist-t2"),k.height=x,k.depth=-m,k},Vue=(t,e)=>{var r=es(["mspace"],[],e),n=ta(t,e);return r.style.marginRight=vt(n),r},Oy=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},fG={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},pG={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Fue=function(e,r){var[n,a,i]=pG[e],o=new zu(n),c=new hc([o],{width:vt(a),height:vt(i),style:"width:"+vt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=dG(["overlay"],[c],r);return d.height=i,d.style.height=vt(i),d.style.width=vt(a),d},Ie={fontMap:fG,makeSymbol:_o,mathsym:Iue,makeSpan:es,makeSvgSpan:dG,makeLineSpan:Lue,makeAnchor:Bue,makeFragment:hG,wrapFragment:$ue,makeVList:Uue,makeOrd:Mue,makeGlue:Vue,staticSvg:Fue,svgData:pG,tryCombineChars:Pue},Zn={number:3,unit:"mu"},Nd={number:4,unit:"mu"},$l={number:5,unit:"mu"},que={mord:{mop:Zn,mbin:Nd,mrel:$l,minner:Zn},mop:{mord:Zn,mop:Zn,mrel:$l,minner:Zn},mbin:{mord:Nd,mop:Nd,mopen:Nd,minner:Nd},mrel:{mord:$l,mop:$l,mopen:$l,minner:$l},mopen:{},mclose:{mop:Zn,mbin:Nd,mrel:$l,minner:Zn},mpunct:{mord:Zn,mop:Zn,mrel:$l,mopen:Zn,mclose:Zn,mpunct:Zn,minner:Zn},minner:{mord:Zn,mop:Zn,mbin:Nd,mrel:$l,mopen:Zn,mpunct:Zn,minner:Zn}},Hue={mord:{mop:Zn},mop:{mord:Zn,mop:Zn},mbin:{},mrel:{},mopen:{},mclose:{mop:Zn},mpunct:{},minner:{mop:Zn}},mG={},lb={},cb={};function Tt(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)mG[r[d]]=c;e&&(i&&(lb[e]=i),o&&(cb[e]=o))}function _0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;Tt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var ub=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},va=function(e){return e.type==="ordgroup"?e.body:[e]},fc=Ie.makeSpan,Gue=["leftmost","mbin","mopen","mrel","mop","mpunct"],Wue=["rightmost","mrel","mclose","mpunct"],Kue={display:Jt.DISPLAY,text:Jt.TEXT,script:Jt.SCRIPT,scriptscript:Jt.SCRIPTSCRIPT},Que={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ka=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],o=0;o<e.length;o++){var c=qr(e[o],r);if(c instanceof Ex){var d=c.children;i.push(...d)}else i.push(c)}if(Ie.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Kue[p.style]))}var m=fc([a[0]||"leftmost"],[],r),x=fc([a[1]||"rightmost"],[],r),y=n==="root";return aM(i,(w,N)=>{var S=N.classes[0],E=w.classes[0];S==="mbin"&&Wue.includes(E)?N.classes[0]="mord":E==="mbin"&&Gue.includes(S)&&(w.classes[0]="mord")},{node:m},x,y),aM(i,(w,N)=>{var S=sT(N),E=sT(w),C=S&&E?w.hasClass("mtight")?Hue[S][E]:que[S][E]:null;if(C)return Ie.makeGlue(C,h)},{node:m},x,y),i},aM=function t(e,r,n,a,i){a&&e.push(a);for(var o=0;o<e.length;o++){var c=e[o],d=gG(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),o++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=fc(["leftmost"])),n.insertAfter=(m=>x=>{e.splice(m+1,0,x),o++})(o)}a&&e.pop()},gG=function(e){return e instanceof Ex||e instanceof SE||e instanceof kx&&e.hasClass("enclosing")?e:null},Xue=function t(e,r){var n=gG(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},sT=function(e,r){return e?(r&&(e=Xue(e,r)),Que[e.classes[0]]||null):null},gg=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return fc(r.concat(n))},qr=function(e,r,n){if(!e)return fc();if(lb[e.type]){var a=lb[e.type](e,r);if(n&&r.size!==n.size){a=fc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new ht("Got group of unknown type: '"+e.type+"'")};function Iy(t,e){var r=fc(["base"],t,e),n=fc(["strut"]);return n.style.height=vt(r.height+r.depth),r.depth&&(n.style.verticalAlign=vt(-r.depth)),r.children.unshift(n),r}function oT(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Ka(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],o=[],c=0;c<n.length;c++)if(o.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,o.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(Iy(o,e)),o=[])}else n[c].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(Iy(o,e)),o=[]),i.push(n[c]));o.length>0&&i.push(Iy(o,e));var h;r?(h=Iy(Ka(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=fc(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=vt(p.height+p.depth),p.depth&&(m.style.verticalAlign=vt(-p.depth))}return p}function xG(t){return new Ex(t)}class ks{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=$u(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof el&&this.children[n+1]instanceof el){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof el;)a+=this.children[++n].toText();e.appendChild(new el(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Xr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Xr.escape($u(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class el{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Xr.escape(this.toText())}toText(){return this.text}}class Yue{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",vt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+vt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var dt={MathNode:ks,TextNode:el,SpaceNode:Yue,newDocumentFragment:xG},co=function(e,r,n){return $n[r][e]&&$n[r][e].replace&&e.charCodeAt(0)!==55349&&!(uG.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=$n[r][e].replace),new dt.TextNode(e)},_E=function(e){return e.length===1?e[0]:new dt.MathNode("mrow",e)},jE=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;$n[a][i]&&$n[a][i].replace&&(i=$n[a][i].replace);var o=Ie.fontMap[n].fontName;return wE(i,o,a)?Ie.fontMap[n].variant:null};function O3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof el&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof el&&r.text===","}else return!1}var hs=function(e,r,n){if(e.length===1){var a=Pn(e[0],r);return n&&a instanceof ks&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],o,c=0;c<e.length;c++){var d=Pn(e[c],r);if(d instanceof ks&&o instanceof ks){if(d.type==="mtext"&&o.type==="mtext"&&d.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...d.children);continue}else if(d.type==="mn"&&o.type==="mn"){o.children.push(...d.children);continue}else if(O3(d)&&o.type==="mn"){o.children.push(...d.children);continue}else if(d.type==="mn"&&O3(o))d.children=[...o.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(o.type==="mn"||O3(o))){var h=d.children[0];h instanceof ks&&h.type==="mn"&&(h.children=[...o.children,...h.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var p=o.children[0];if(p instanceof el&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof el&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),o=d}return i},Uu=function(e,r,n){return _E(hs(e,r,n))},Pn=function(e,r){if(!e)return new dt.MathNode("mrow");if(cb[e.type]){var n=cb[e.type](e,r);return n}else throw new ht("Got group of unknown type: '"+e.type+"'")};function iM(t,e,r,n,a){var i=hs(t,r),o;i.length===1&&i[0]instanceof ks&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new dt.MathNode("mrow",i);var c=new dt.MathNode("annotation",[new dt.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new dt.MathNode("semantics",[o,c]),h=new dt.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return Ie.makeSpan([p],[h])}var yG=function(e){return new Fl({style:e.displayMode?Jt.DISPLAY:Jt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},vG=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Ie.makeSpan(n,[e])}return e},Jue=function(e,r,n){var a=yG(n),i;if(n.output==="mathml")return iM(e,r,a,n.displayMode,!0);if(n.output==="html"){var o=oT(e,a);i=Ie.makeSpan(["katex"],[o])}else{var c=iM(e,r,a,n.displayMode,!1),d=oT(e,a);i=Ie.makeSpan(["katex"],[c,d])}return vG(i,n)},Zue=function(e,r,n){var a=yG(n),i=oT(e,a),o=Ie.makeSpan(["katex"],[i]);return vG(o,n)},ede={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},tde=function(e){var r=new dt.MathNode("mo",[new dt.TextNode(ede[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},rde={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},nde=function(e){return e.type==="ordgroup"?e.body.length:1},ade=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=nde(h.base),m,x,y;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,y=.42,x=d+"4"):(m=312,c=2340,y=.34,x="tilde4");else{var w=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][w],m=[0,239,300,360,420][w],y=[0,.24,.3,.3,.36,.42][w],x=d+w):(c=[0,600,1033,2339,2340][w],m=[0,260,286,306,312][w],y=[0,.26,.286,.3,.306,.34][w],x="tilde"+w)}var N=new zu(x),S=new hc([N],{width:"100%",height:vt(y),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:Ie.makeSvgSpan([],[S],r),minWidth:0,height:y}}else{var E=[],C=rde[d],[M,L,I]=C,R=I/1e3,A=M.length,T,k;if(A===1){var F=C[3];T=["hide-tail"],k=[F]}else if(A===2)T=["halfarrow-left","halfarrow-right"],k=["xMinYMin","xMaxYMin"];else if(A===3)T=["brace-left","brace-center","brace-right"],k=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+A+" children.");for(var O=0;O<A;O++){var $=new zu(M[O]),B=new hc([$],{width:"400em",height:vt(R),viewBox:"0 0 "+c+" "+I,preserveAspectRatio:k[O]+" slice"}),G=Ie.makeSvgSpan([T[O]],[B],r);if(A===1)return{span:G,minWidth:L,height:R};G.style.height=vt(R),E.push(G)}return{span:Ie.makeSpan(["stretchy"],E,r),minWidth:L,height:R}}}var{span:a,minWidth:i,height:o}=n();return a.height=o,a.style.height=vt(o),i>0&&(a.style.minWidth=vt(i)),a},ide=function(e,r,n,a,i){var o,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(o=Ie.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(o.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new aT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new aT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new hc(h,{width:"100%",height:vt(c)});o=Ie.makeSvgSpan([],[p],i)}return o.height=c,o.style.height=vt(c),o},pc={encloseSpan:ide,mathMLnode:tde,svgSpan:ade};function Sr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function TE(t){var e=sw(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function sw(t){return t&&(t.type==="atom"||Cue.hasOwnProperty(t.type))?t:null}var AE=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=Sr(t.base,"accent"),r=n.base,t.base=r,a=Eue(qr(t,e)),t.base=n):(n=Sr(t,"accent"),r=n.base);var i=qr(r,e.havingCrampedStyle()),o=n.isShifty&&Xr.isCharacterBox(r),c=0;if(o){var d=Xr.getBaseElem(r),h=qr(d,e.havingCrampedStyle());c=JR(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),x;if(n.isStretchy)x=pc.svgSpan(n,e),x=Ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:x,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+vt(2*c)+")",marginLeft:vt(2*c)}:void 0}]},e);else{var y,w;n.label==="\\vec"?(y=Ie.staticSvg("vec",e),w=Ie.svgData.vec[1]):(y=Ie.makeOrd({mode:n.mode,text:n.label},e,"textord"),y=JR(y),y.italic=0,w=y.width,p&&(m+=y.depth)),x=Ie.makeSpan(["accent-body"],[y]);var N=n.label==="\\textcircled";N&&(x.classes.push("accent-full"),m=i.height);var S=c;N||(S-=w/2),x.style.left=vt(S),n.label==="\\textcircled"&&(x.style.top=".2em"),x=Ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:x}]},e)}var E=Ie.makeSpan(["mord","accent"],[x],e);return a?(a.children[0]=E,a.height=Math.max(E.height,a.height),a.classes[0]="mord",a):E},bG=(t,e)=>{var r=t.isStretchy?pc.mathMLnode(t.label):new dt.MathNode("mo",[co(t.label,t.mode)]),n=new dt.MathNode("mover",[Pn(t.base,e),r]);return n.setAttribute("accent","true"),n},sde=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));Tt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=ub(e[0]),n=!sde.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:AE,mathmlBuilder:bG});Tt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:AE,mathmlBuilder:bG});Tt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=qr(t.base,e),n=pc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=Ie.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return Ie.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=pc.mathMLnode(t.label),n=new dt.MathNode("munder",[Pn(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var Ry=t=>{var e=new dt.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Tt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=Ie.wrapFragment(qr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=Ie.wrapFragment(qr(t.below,n,e),e),o.classes.push(i+"-arrow-pad"));var c=pc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(o){var m=-e.fontMetrics().axisHeight+o.height+.5*c.height+.111;p=Ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:o,shift:m}]},e)}else p=Ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),Ie.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=pc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=Ry(Pn(t.body,e));if(t.below){var i=Ry(Pn(t.below,e));n=new dt.MathNode("munderover",[r,i,a])}else n=new dt.MathNode("mover",[r,a])}else if(t.below){var o=Ry(Pn(t.below,e));n=new dt.MathNode("munder",[r,o])}else n=Ry(),n=new dt.MathNode("mover",[r,n]);return n}});var ode=Ie.makeSpan;function wG(t,e){var r=Ka(t.body,e,!0);return ode([t.mclass],r,e)}function SG(t,e){var r,n=hs(t.body,e);return t.mclass==="minner"?r=new dt.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new dt.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new dt.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Tt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:va(a),isCharacterBox:Xr.isCharacterBox(a)}},htmlBuilder:wG,mathmlBuilder:SG});var ow=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Tt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:ow(e[0]),body:va(e[1]),isCharacterBox:Xr.isCharacterBox(e[1])}}});Tt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],o;n!=="\\stackrel"?o=ow(a):o="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:va(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[d],isCharacterBox:Xr.isCharacterBox(d)}},htmlBuilder:wG,mathmlBuilder:SG});Tt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:ow(e[0]),body:va(e[0])}},htmlBuilder(t,e){var r=Ka(t.body,e,!0),n=Ie.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=hs(t.body,e),n=new dt.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var lde={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},sM=()=>({type:"styling",body:[],mode:"math",style:"display"}),oM=t=>t.type==="textord"&&t.text==="@",cde=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function ude(t,e,r){var n=lde[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,o,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function dde(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ht("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var o=e[i],c=sM(),d=0;d<o.length;d++)if(!oM(o[d]))c.body.push(o[d]);else{n.push(c),d+=1;var h=TE(o[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var x=!0,y=d+1;y<o.length;y++){if(cde(o[y],h)){x=!1,d=y;break}if(oM(o[y]))throw new ht("Missing a "+h+" character to complete a CD arrow.",o[y]);p[m].body.push(o[y])}if(x)throw new ht("Missing a "+h+" character to complete a CD arrow.",o[d])}else throw new ht('Expected one of "<>AV=|." after @',o[d]);var w=ude(h,p,t),N={type:"styling",body:[w],mode:"math",style:"display"};n.push(N),c=sM()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var S=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:S,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}Tt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Ie.wrapFragment(qr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=vt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new dt.MathNode("mrow",[Pn(t.label,e)]);return r=new dt.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new dt.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Tt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Ie.wrapFragment(qr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new dt.MathNode("mrow",[Pn(t.fragment,e)])}});Tt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=Sr(e[0],"ordgroup"),a=n.body,i="",o=0;o<a.length;o++){var c=Sr(a[o],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new ht("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new ht("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var NG=(t,e)=>{var r=Ka(t.body,e.withColor(t.color),!1);return Ie.makeFragment(r)},_G=(t,e)=>{var r=hs(t.body,e.withColor(t.color)),n=new dt.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};Tt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=Sr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:va(a)}},htmlBuilder:NG,mathmlBuilder:_G});Tt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=Sr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:NG,mathmlBuilder:_G});Tt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&Sr(a,"size").value}},htmlBuilder(t,e){var r=Ie.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=vt(ta(t.size,e)))),r},mathmlBuilder(t,e){var r=new dt.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",vt(ta(t.size,e)))),r}});var lT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},jG=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ht("Expected a control sequence",t);return e},hde=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},TG=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};Tt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(lT[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=lT[n.text]),Sr(e.parseFunction(),"internal");throw new ht("Invalid token after macro prefix",n)}});Tt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ht("Expected a control sequence",n);for(var i=0,o,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ht('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new ht('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new ht("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return o&&d.unshift(o),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===lT[r]),{type:"internal",mode:e.mode}}});Tt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=jG(e.gullet.popToken());e.gullet.consumeSpaces();var a=hde(e);return TG(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});Tt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=jG(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return TG(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var Sm=function(e,r,n){var a=$n.math[e]&&$n.math[e].replace,i=wE(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},EE=function(e,r,n,a){var i=n.havingBaseStyle(r),o=Ie.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return o.height*=c,o.depth*=c,o.maxFontSize=i.sizeMultiplier,o},AG=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=vt(i),e.height-=i,e.depth+=i},fde=function(e,r,n,a,i,o){var c=Ie.makeSymbol(e,"Main-Regular",i,a),d=EE(c,r,a,o);return n&&AG(d,a,r),d},pde=function(e,r,n,a){return Ie.makeSymbol(e,"Size"+r+"-Regular",n,a)},EG=function(e,r,n,a,i,o){var c=pde(e,r,i,a),d=EE(Ie.makeSpan(["delimsizing","size"+r],[c],a),Jt.TEXT,a,o);return n&&AG(d,a,Jt.TEXT),d},I3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=Ie.makeSpan(["delimsizinginner",a],[Ie.makeSpan([],[Ie.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},R3=function(e,r,n){var a=Zo["Size4-Regular"][e.charCodeAt(0)]?Zo["Size4-Regular"][e.charCodeAt(0)][4]:Zo["Size1-Regular"][e.charCodeAt(0)][4],i=new zu("inner",vue(e,Math.round(1e3*r))),o=new hc([i],{width:vt(a),height:vt(r),style:"width:"+vt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=Ie.makeSvgSpan([],[o],n);return c.height=r,c.style.height=vt(r),c.style.width=vt(a),{type:"elem",elem:c}},cT=.008,My={type:"kern",size:-1*cT},mde=["|","\\lvert","\\rvert","\\vert"],gde=["\\|","\\lVert","\\rVert","\\Vert"],kG=function(e,r,n,a,i,o){var c,d,h,p,m="",x=0;c=h=p=e,d=null;var y="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):mde.includes(e)?(h="",m="vert",x=333):gde.includes(e)?(h="",m="doublevert",x=556):e==="["||e==="\\lbrack"?(c="",h="",p="",y="Size4-Regular",m="lbrack",x=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",y="Size4-Regular",m="rbrack",x=667):e==="\\lfloor"||e===""?(h=c="",p="",y="Size4-Regular",m="lfloor",x=667):e==="\\lceil"||e===""?(c="",h=p="",y="Size4-Regular",m="lceil",x=667):e==="\\rfloor"||e===""?(h=c="",p="",y="Size4-Regular",m="rfloor",x=667):e==="\\rceil"||e===""?(c="",h=p="",y="Size4-Regular",m="rceil",x=667):e==="("||e==="\\lparen"?(c="",h="",p="",y="Size4-Regular",m="lparen",x=875):e===")"||e==="\\rparen"?(c="",h="",p="",y="Size4-Regular",m="rparen",x=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",y="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",y="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",y="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",y="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",y="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",y="Size4-Regular");var w=Sm(c,y,i),N=w.height+w.depth,S=Sm(h,y,i),E=S.height+S.depth,C=Sm(p,y,i),M=C.height+C.depth,L=0,I=1;if(d!==null){var R=Sm(d,y,i);L=R.height+R.depth,I=2}var A=N+M+L,T=Math.max(0,Math.ceil((r-A)/(I*E))),k=A+T*I*E,F=a.fontMetrics().axisHeight;n&&(F*=a.sizeMultiplier);var O=k/2-F,$=[];if(m.length>0){var B=k-N-M,G=Math.round(k*1e3),Q=bue(m,Math.round(B*1e3)),H=new zu(m,Q),K=(x/1e3).toFixed(3)+"em",te=(G/1e3).toFixed(3)+"em",ae=new hc([H],{width:K,height:te,viewBox:"0 0 "+x+" "+G}),ce=Ie.makeSvgSpan([],[ae],a);ce.height=G/1e3,ce.style.width=K,ce.style.height=te,$.push({type:"elem",elem:ce})}else{if($.push(I3(p,y,i)),$.push(My),d===null){var X=k-N-M+2*cT;$.push(R3(h,X,a))}else{var ie=(k-N-M-L)/2+2*cT;$.push(R3(h,ie,a)),$.push(My),$.push(I3(d,y,i)),$.push(My),$.push(R3(h,ie,a))}$.push(My),$.push(I3(c,y,i))}var ne=a.havingBaseStyle(Jt.TEXT),ve=Ie.makeVList({positionType:"bottom",positionData:O,children:$},ne);return EE(Ie.makeSpan(["delimsizing","mult"],[ve],ne),Jt.TEXT,a,o)},M3=80,D3=.08,P3=function(e,r,n,a,i){var o=yue(e,a,n),c=new zu(e,o),d=new hc([c],{width:"400em",height:vt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ie.makeSvgSpan(["hide-tail"],[d],i)},xde=function(e,r){var n=r.havingBaseSizing(),a=RG("\\surd",e*n.sizeMultiplier,IG,n),i=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*o+M3,e<1?i=1:e<1.4&&(i=.7),d=(1+o+D3)/i,h=(1+o)/i,c=P3("sqrtMain",d,p,o,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+M3)*Pm[a.size],h=(Pm[a.size]+o)/i,d=(Pm[a.size]+o+D3)/i,c=P3("sqrtSize"+a.size,d,p,o,r),c.style.minWidth="1.02em",m=1/i):(d=e+o+D3,h=e+o,p=Math.floor(1e3*e+o)+M3,c=P3("sqrtTall",d,p,o,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=vt(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},CG=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],yde=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],OG=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Pm=[0,1.2,1.8,2.4,3],vde=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),CG.includes(e)||OG.includes(e))return EG(e,r,!1,n,a,i);if(yde.includes(e))return kG(e,Pm[r],!1,n,a,i);throw new ht("Illegal delimiter: '"+e+"'")},bde=[{type:"small",style:Jt.SCRIPTSCRIPT},{type:"small",style:Jt.SCRIPT},{type:"small",style:Jt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],wde=[{type:"small",style:Jt.SCRIPTSCRIPT},{type:"small",style:Jt.SCRIPT},{type:"small",style:Jt.TEXT},{type:"stack"}],IG=[{type:"small",style:Jt.SCRIPTSCRIPT},{type:"small",style:Jt.SCRIPT},{type:"small",style:Jt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Sde=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},RG=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),o=i;o<n.length&&n[o].type!=="stack";o++){var c=Sm(e,Sde(n[o]),"math"),d=c.height+c.depth;if(n[o].type==="small"){var h=a.havingBaseStyle(n[o].style);d*=h.sizeMultiplier}if(d>r)return n[o]}return n[n.length-1]},MG=function(e,r,n,a,i,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;OG.includes(e)?c=bde:CG.includes(e)?c=IG:c=wde;var d=RG(e,r,c,a);return d.type==="small"?fde(e,d.style,n,a,i,o):d.type==="large"?EG(e,d.size,n,a,i,o):kG(e,r,n,a,i,o)},Nde=function(e,r,n,a,i,o){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return MG(e,m,!0,a,i,o)},rc={sqrtImage:xde,sizedDelim:vde,sizeToMaxHeight:Pm,customSizedDelim:MG,leftRightDelim:Nde},lM={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},_de=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function lw(t,e){var r=sw(t);if(r&&_de.includes(r.text))return r;throw r?new ht("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ht("Invalid delimiter type '"+t.type+"'",t)}Tt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=lw(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:lM[t.funcName].size,mclass:lM[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Ie.makeSpan([t.mclass]):rc.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(co(t.delim,t.mode));var r=new dt.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=vt(rc.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function cM(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Tt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ht("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:lw(e[0],t).text,color:r}}});Tt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=lw(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=Sr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{cM(t);for(var r=Ka(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(n=Math.max(r[o].height,n),a=Math.max(r[o].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=gg(e,["mopen"]):c=rc.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=rc.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=gg(e,["mclose"]);else{var x=t.rightColor?e.withColor(t.rightColor):e;m=rc.leftRightDelim(t.right,n,a,x,t.mode,["mclose"])}return r.push(m),Ie.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{cM(t);var r=hs(t.body,e);if(t.left!=="."){var n=new dt.MathNode("mo",[co(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new dt.MathNode("mo",[co(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return _E(r)}});Tt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=lw(e[0],t);if(!t.parser.leftrightDepth)throw new ht("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=gg(e,[]);else{r=rc.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?co("|","text"):co(t.delim,t.mode),n=new dt.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var kE=(t,e)=>{var r=Ie.wrapFragment(qr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,o=0,c=Xr.isCharacterBox(t.body);if(n==="sout")i=Ie.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=ta({number:.6,unit:"pt"},e),h=ta({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=vt(m/2+d);var x=Math.floor(1e3*m*a),y=gue(x),w=new hc([new zu("phase",y)],{width:"400em",height:vt(x/1e3),viewBox:"0 0 400000 "+x,preserveAspectRatio:"xMinYMin slice"});i=Ie.makeSvgSpan(["hide-tail"],[w],e),i.style.height=vt(m),o=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var N=0,S=0,E=0;/box/.test(n)?(E=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),N=e.fontMetrics().fboxsep+(n==="colorbox"?0:E),S=N):n==="angl"?(E=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),N=4*E,S=Math.max(0,.25-r.depth)):(N=c?.2:0,S=N),i=pc.encloseSpan(r,n,N,S,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=vt(E)):n==="angl"&&E!==.049&&(i.style.borderTopWidth=vt(E),i.style.borderRightWidth=vt(E)),o=r.depth+S,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var C;if(t.backgroundColor)C=Ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var M=/cancel|phase/.test(n)?["svg-align"]:[];C=Ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:M}]},e)}return/cancel/.test(n)&&(C.height=r.height,C.depth=r.depth),/cancel/.test(n)&&!c?Ie.makeSpan(["mord","cancel-lap"],[C],e):Ie.makeSpan(["mord"],[C],e)},CE=(t,e)=>{var r=0,n=new dt.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Pn(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};Tt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=Sr(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:kE,mathmlBuilder:CE});Tt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=Sr(e[0],"color-token").color,o=Sr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:c}},htmlBuilder:kE,mathmlBuilder:CE});Tt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});Tt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:kE,mathmlBuilder:CE});Tt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var DG={};function fl(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)DG[r[d]]=c;i&&(lb[e]=i),o&&(cb[e]=o)}var PG={};function Z(t,e){PG[t]=e}function uM(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var cw=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ht("{"+t.envName+"} can be used only in display mode.")};function OE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Wu(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:o,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:x}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var y=t.gullet.expandMacroAsText("\\arraystretch");if(y==null)o=1;else if(o=parseFloat(y),!o||o<0)throw new ht("Invalid \\arraystretch: "+y)}t.gullet.beginGroup();var w=[],N=[w],S=[],E=[],C=d!=null?[]:void 0;function M(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){C&&(t.gullet.macros.get("\\df@tag")?(C.push(t.subparse([new Ms("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):C.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(M(),E.push(uM(t));;){var I=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),I={type:"ordgroup",mode:t.mode,body:I},r&&(I={type:"styling",mode:t.mode,style:r,body:[I]}),w.push(I);var R=t.fetch().text;if(R==="&"){if(m&&w.length===m){if(h||c)throw new ht("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(R==="\\end"){L(),w.length===1&&I.type==="styling"&&I.body[0].body.length===0&&(N.length>1||!p)&&N.pop(),E.length<N.length+1&&E.push([]);break}else if(R==="\\\\"){t.consume();var A=void 0;t.gullet.future().text!==" "&&(A=t.parseSizeGroup(!0)),S.push(A?A.value:null),L(),E.push(uM(t)),w=[],N.push(w),M()}else throw new ht("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:o,body:N,cols:i,rowGaps:S,hskipBeforeAndAfter:n,hLinesBeforeRow:E,colSeparationType:c,tags:C,leqno:x}}function IE(t){return t.slice(0,1)==="d"?"display":"text"}var pl=function(e,r){var n,a,i=e.body.length,o=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,x=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var y=r.havingStyle(Jt.SCRIPT).sizeMultiplier;x=.2778*(y/r.sizeMultiplier)}var w=e.colSeparationType==="CD"?ta({number:3,unit:"ex"},r):12*m,N=3*m,S=e.arraystretch*w,E=.7*S,C=.3*S,M=0;function L(Ee){for(var ut=0;ut<Ee.length;++ut)ut>0&&(M+=.25),h.push({pos:M,isDashed:Ee[ut]})}for(L(o[0]),n=0;n<e.body.length;++n){var I=e.body[n],R=E,A=C;c<I.length&&(c=I.length);var T=new Array(I.length);for(a=0;a<I.length;++a){var k=qr(I[a],r);A<k.depth&&(A=k.depth),R<k.height&&(R=k.height),T[a]=k}var F=e.rowGaps[n],O=0;F&&(O=ta(F,r),O>0&&(O+=C,A<O&&(A=O),O=0)),e.addJot&&(A+=N),T.height=R,T.depth=A,M+=R,T.pos=M,M+=A+O,d[n]=T,L(o[n+1])}var $=M/2+r.fontMetrics().axisHeight,B=e.cols||[],G=[],Q,H,K=[];if(e.tags&&e.tags.some(Ee=>Ee))for(n=0;n<i;++n){var te=d[n],ae=te.pos-$,ce=e.tags[n],X=void 0;ce===!0?X=Ie.makeSpan(["eqn-num"],[],r):ce===!1?X=Ie.makeSpan([],[],r):X=Ie.makeSpan([],Ka(ce,r,!0),r),X.depth=te.depth,X.height=te.height,K.push({type:"elem",elem:X,shift:ae})}for(a=0,H=0;a<c||H<B.length;++a,++H){for(var ie=B[H]||{},ne=!0;ie.type==="separator";){if(ne||(Q=Ie.makeSpan(["arraycolsep"],[]),Q.style.width=vt(r.fontMetrics().doubleRuleSep),G.push(Q)),ie.separator==="|"||ie.separator===":"){var ve=ie.separator==="|"?"solid":"dashed",pe=Ie.makeSpan(["vertical-separator"],[],r);pe.style.height=vt(M),pe.style.borderRightWidth=vt(p),pe.style.borderRightStyle=ve,pe.style.margin="0 "+vt(-p/2);var Be=M-$;Be&&(pe.style.verticalAlign=vt(-Be)),G.push(pe)}else throw new ht("Invalid separator type: "+ie.separator);H++,ie=B[H]||{},ne=!1}if(!(a>=c)){var Ge=void 0;(a>0||e.hskipBeforeAndAfter)&&(Ge=Xr.deflt(ie.pregap,x),Ge!==0&&(Q=Ie.makeSpan(["arraycolsep"],[]),Q.style.width=vt(Ge),G.push(Q)));var He=[];for(n=0;n<i;++n){var Ne=d[n],We=Ne[a];if(We){var Y=Ne.pos-$;We.depth=Ne.depth,We.height=Ne.height,He.push({type:"elem",elem:We,shift:Y})}}He=Ie.makeVList({positionType:"individualShift",children:He},r),He=Ie.makeSpan(["col-align-"+(ie.align||"c")],[He]),G.push(He),(a<c-1||e.hskipBeforeAndAfter)&&(Ge=Xr.deflt(ie.postgap,x),Ge!==0&&(Q=Ie.makeSpan(["arraycolsep"],[]),Q.style.width=vt(Ge),G.push(Q)))}}if(d=Ie.makeSpan(["mtable"],G),h.length>0){for(var re=Ie.makeLineSpan("hline",r,p),be=Ie.makeLineSpan("hdashline",r,p),we=[{type:"elem",elem:d,shift:0}];h.length>0;){var Ye=h.pop(),nt=Ye.pos-$;Ye.isDashed?we.push({type:"elem",elem:be,shift:nt}):we.push({type:"elem",elem:re,shift:nt})}d=Ie.makeVList({positionType:"individualShift",children:we},r)}if(K.length===0)return Ie.makeSpan(["mord"],[d],r);var Ot=Ie.makeVList({positionType:"individualShift",children:K},r);return Ot=Ie.makeSpan(["tag"],[Ot],r),Ie.makeFragment([d,Ot])},jde={c:"center ",l:"left ",r:"right "},ml=function(e,r){for(var n=[],a=new dt.MathNode("mtd",[],["mtr-glue"]),i=new dt.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var c=e.body[o],d=[],h=0;h<c.length;h++)d.push(new dt.MathNode("mtd",[Pn(c[h],r)]));e.tags&&e.tags[o]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new dt.MathNode("mtr",d))}var p=new dt.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",vt(m));var x="",y="";if(e.cols&&e.cols.length>0){var w=e.cols,N="",S=!1,E=0,C=w.length;w[0].type==="separator"&&(x+="top ",E=1),w[w.length-1].type==="separator"&&(x+="bottom ",C-=1);for(var M=E;M<C;M++)w[M].type==="align"?(y+=jde[w[M].align],S&&(N+="none "),S=!0):w[M].type==="separator"&&S&&(N+=w[M].separator==="|"?"solid ":"dashed ",S=!1);p.setAttribute("columnalign",y.trim()),/[sd]/.test(N)&&p.setAttribute("columnlines",N.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],I="",R=1;R<L.length;R++)I+=R%2?"0em ":"1em ";p.setAttribute("columnspacing",I.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var A="",T=e.hLinesBeforeRow;x+=T[0].length>0?"left ":"",x+=T[T.length-1].length>0?"right ":"";for(var k=1;k<T.length-1;k++)A+=T[k].length===0?"none ":T[k][0]?"dashed ":"solid ";return/[sd]/.test(A)&&p.setAttribute("rowlines",A.trim()),x!==""&&(p=new dt.MathNode("menclose",[p]),p.setAttribute("notation",x.trim())),e.arraystretch&&e.arraystretch<1&&(p=new dt.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},LG=function(e,r){e.envName.indexOf("ed")===-1&&cw(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",o=Wu(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:OE(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var x=Sr(r[0].body[m],"textord");p+=x.text}c=Number(p),d=c*2}var y=!d;o.body.forEach(function(E){for(var C=1;C<E.length;C+=2){var M=Sr(E[C],"styling"),L=Sr(M.body[0],"ordgroup");L.body.unshift(h)}if(y)d<E.length&&(d=E.length);else{var I=E.length/2;if(c<I)throw new ht("Too many math in a row: "+("expected "+c+", but got "+I),E[0])}});for(var w=0;w<d;++w){var N="r",S=0;w%2===1?N="l":w>0&&y&&(S=1),n[w]={type:"align",align:N,pregap:S,postgap:0}}return o.colSeparationType=y?"align":"alignat",o};fl({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=sw(e[0]),n=r?[e[0]]:Sr(e[0],"ordgroup").body,a=n.map(function(o){var c=TE(o),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ht("Unknown column alignment: "+d,o)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Wu(t.parser,i,IE(t.envName))},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ht("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Wu(t.parser,n,IE(t.envName)),o=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Wu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=sw(e[0]),n=r?[e[0]]:Sr(e[0],"ordgroup").body,a=n.map(function(o){var c=TE(o),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ht("Unknown column alignment: "+d,o)});if(a.length>1)throw new ht("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Wu(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new ht("{subarray} can contain only one column");return i},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Wu(t.parser,e,IE(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:LG,htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&cw(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:OE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Wu(t.parser,e,"display")},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:LG,htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){cw(t);var e={autoTag:OE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Wu(t.parser,e,"display")},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["CD"],props:{numArgs:0},handler(t){return cw(t),dde(t.parser)},htmlBuilder:pl,mathmlBuilder:ml});Z("\\nonumber","\\gdef\\@eqnsw{0}");Z("\\notag","\\nonumber");Tt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ht(t.funcName+" valid only within array environment")}});var dM=DG;Tt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ht("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=Sr(a.body[o],"textord").text;if(n==="\\begin"){if(!dM.hasOwnProperty(i))throw new ht("No such environment: "+i,a);var c=dM[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var x=r.nextToken,y=Sr(r.parseFunction(),"environment");if(y.name!==i)throw new ht("Mismatch: \\begin{"+i+"} matched by \\end{"+y.name+"}",x);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var BG=(t,e)=>{var r=t.font,n=e.withFont(r);return qr(t.body,n)},$G=(t,e)=>{var r=t.font,n=e.withFont(r);return Pn(t.body,n)},hM={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Tt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=ub(e[0]),i=n;return i in hM&&(i=hM[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:BG,mathmlBuilder:$G});Tt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Xr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:ow(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});Tt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,o=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:BG,mathmlBuilder:$G});var zG=(t,e)=>{var r=e;return t==="display"?r=r.id>=Jt.SCRIPT.id?r.text():Jt.DISPLAY:t==="text"&&r.size===Jt.DISPLAY.size?r=Jt.TEXT:t==="script"?r=Jt.SCRIPT:t==="scriptscript"&&(r=Jt.SCRIPTSCRIPT),r},RE=(t,e)=>{var r=zG(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var o=qr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;o.height=o.height<c?c:o.height,o.depth=o.depth<d?d:o.depth}i=e.havingStyle(a);var h=qr(t.denom,i,e),p,m,x;t.hasBarLine?(t.barSize?(m=ta(t.barSize,e),p=Ie.makeLineSpan("frac-line",e,m)):p=Ie.makeLineSpan("frac-line",e),m=p.height,x=p.height):(p=null,m=0,x=e.fontMetrics().defaultRuleThickness);var y,w,N;r.size===Jt.DISPLAY.size||t.size==="display"?(y=e.fontMetrics().num1,m>0?w=3*x:w=7*x,N=e.fontMetrics().denom1):(m>0?(y=e.fontMetrics().num2,w=x):(y=e.fontMetrics().num3,w=3*x),N=e.fontMetrics().denom2);var S;if(p){var C=e.fontMetrics().axisHeight;y-o.depth-(C+.5*m)<w&&(y+=w-(y-o.depth-(C+.5*m))),C-.5*m-(h.height-N)<w&&(N+=w-(C-.5*m-(h.height-N)));var M=-(C-.5*m);S=Ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:N},{type:"elem",elem:p,shift:M},{type:"elem",elem:o,shift:-y}]},e)}else{var E=y-o.depth-(h.height-N);E<w&&(y+=.5*(w-E),N+=.5*(w-E)),S=Ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:N},{type:"elem",elem:o,shift:-y}]},e)}i=e.havingStyle(r),S.height*=i.sizeMultiplier/e.sizeMultiplier,S.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===Jt.DISPLAY.size?L=e.fontMetrics().delim1:r.size===Jt.SCRIPTSCRIPT.size?L=e.havingStyle(Jt.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var I,R;return t.leftDelim==null?I=gg(e,["mopen"]):I=rc.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?R=Ie.makeSpan([]):t.rightDelim==null?R=gg(e,["mclose"]):R=rc.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),Ie.makeSpan(["mord"].concat(i.sizingClasses(e)),[I,Ie.makeSpan(["mfrac"],[S]),R],e)},ME=(t,e)=>{var r=new dt.MathNode("mfrac",[Pn(t.numer,e),Pn(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=ta(t.barSize,e);r.setAttribute("linethickness",vt(n))}var a=zG(t.size,e.style);if(a.size!==e.style.size){r=new dt.MathNode("mstyle",[r]);var i=a.size===Jt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var c=new dt.MathNode("mo",[new dt.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}if(o.push(r),t.rightDelim!=null){var d=new dt.MathNode("mo",[new dt.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),o.push(d)}return _E(o)}return r};Tt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],o,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,c="(",d=")";break;case"\\\\bracefrac":o=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":o=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:o,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:RE,mathmlBuilder:ME});Tt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Tt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var fM=["display","text","script","scriptscript"],pM=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};Tt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=ub(e[0]),o=i.type==="atom"&&i.family==="open"?pM(i.text):null,c=ub(e[1]),d=c.type==="atom"&&c.family==="close"?pM(c.text):null,h=Sr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var x="auto",y=e[3];if(y.type==="ordgroup"){if(y.body.length>0){var w=Sr(y.body[0],"textord");x=fM[Number(w.text)]}}else y=Sr(y,"textord"),x=fM[Number(y.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:o,rightDelim:d,size:x}},htmlBuilder:RE,mathmlBuilder:ME});Tt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Sr(e[0],"size").value,token:a}}});Tt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=tue(Sr(e[1],"infix").size),o=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:RE,mathmlBuilder:ME});var UG=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?qr(t.sup,e.havingStyle(r.sup()),e):qr(t.sub,e.havingStyle(r.sub()),e),a=Sr(t.base,"horizBrace")):a=Sr(t,"horizBrace");var i=qr(a.base,e.havingBaseStyle(Jt.DISPLAY)),o=pc.svgSpan(a,e),c;if(a.isOver?(c=Ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=Ie.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=Ie.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=Ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=Ie.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return Ie.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},Tde=(t,e)=>{var r=pc.mathMLnode(t.label);return new dt.MathNode(t.isOver?"mover":"munder",[Pn(t.base,e),r])};Tt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:UG,mathmlBuilder:Tde});Tt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=Sr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:va(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Ka(t.body,e,!1);return Ie.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=Uu(t.body,e);return r instanceof ks||(r=new ks("mrow",[r])),r.setAttribute("href",t.href),r}});Tt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=Sr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var o=n[i];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:va(c)}}});Tt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:va(e[0])}},htmlBuilder(t,e){var r=Ka(t.body,e,!1);return Ie.makeFragment(r)},mathmlBuilder(t,e){return new dt.MathNode("mrow",hs(t.body,e))}});Tt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=Sr(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],x=m.indexOf("=");if(x<0)throw new ht("\\htmlData key/value '"+m+"' missing equals sign");var y=m.slice(0,x),w=m.slice(x+1);d["data-"+y.trim()]=w}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:va(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Ka(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=Ie.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>Uu(t.body,e)});Tt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:va(e[0]),mathml:va(e[1])}},htmlBuilder:(t,e)=>{var r=Ka(t.html,e,!1);return Ie.makeFragment(r)},mathmlBuilder:(t,e)=>Uu(t.mathml,e)});var L3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ht("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!sG(n))throw new ht("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Tt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},c="";if(r[0])for(var d=Sr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var x=m[1].trim();switch(m[0].trim()){case"alt":c=x;break;case"width":a=L3(x);break;case"height":i=L3(x);break;case"totalheight":o=L3(x);break;default:throw new ht("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var y=Sr(e[0],"url").url;return c===""&&(c=y,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:y})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:o,src:y}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=ta(t.height,e),n=0;t.totalheight.number>0&&(n=ta(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=ta(t.width,e));var i={height:vt(r+n)};a>0&&(i.width=vt(a)),n>0&&(i.verticalAlign=vt(-n));var o=new Tue(t.src,t.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new dt.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=ta(t.height,e),a=0;if(t.totalheight.number>0&&(a=ta(t.totalheight,e)-n,r.setAttribute("valign",vt(-a))),r.setAttribute("height",vt(n+a)),t.width.number>0){var i=ta(t.width,e);r.setAttribute("width",vt(i))}return r.setAttribute("src",t.src),r}});Tt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=Sr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",o=a.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return Ie.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=ta(t.dimension,e);return new dt.SpaceNode(r)}});Tt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Ie.makeSpan([],[qr(t.body,e)]),r=Ie.makeSpan(["inner"],[r],e)):r=Ie.makeSpan(["inner"],[qr(t.body,e)]);var n=Ie.makeSpan(["fix"],[]),a=Ie.makeSpan([t.alignment],[r,n],e),i=Ie.makeSpan(["strut"]);return i.style.height=vt(a.height+a.depth),a.depth&&(i.style.verticalAlign=vt(-a.depth)),a.children.unshift(i),a=Ie.makeSpan(["thinbox"],[a],e),Ie.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new dt.MathNode("mpadded",[Pn(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});Tt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}});Tt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ht("Mismatched "+t.funcName)}});var mM=(t,e)=>{switch(e.style.size){case Jt.DISPLAY.size:return t.display;case Jt.TEXT.size:return t.text;case Jt.SCRIPT.size:return t.script;case Jt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Tt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:va(e[0]),text:va(e[1]),script:va(e[2]),scriptscript:va(e[3])}},htmlBuilder:(t,e)=>{var r=mM(t,e),n=Ka(r,e,!1);return Ie.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=mM(t,e);return Uu(r,e)}});var VG=(t,e,r,n,a,i,o)=>{t=Ie.makeSpan([],[t]);var c=r&&Xr.isCharacterBox(r),d,h;if(e){var p=qr(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=qr(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var x;if(h&&d){var y=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+o;x=Ie.makeVList({positionType:"bottom",positionData:y,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:vt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:vt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var w=t.height-o;x=Ie.makeVList({positionType:"top",positionData:w,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:vt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var N=t.depth+o;x=Ie.makeVList({positionType:"bottom",positionData:N,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:vt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var S=[x];if(d&&i!==0&&!c){var E=Ie.makeSpan(["mspace"],[],n);E.style.marginRight=vt(i),S.unshift(E)}return Ie.makeSpan(["mop","op-limits"],S,n)},FG=["\\smallint"],Qf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=Sr(t.base,"op"),a=!0):i=Sr(t,"op");var o=e.style,c=!1;o.size===Jt.DISPLAY.size&&i.symbol&&!FG.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=Ie.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,x=Ie.staticSvg(p+"Size"+(c?"2":"1"),e);d=Ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:x,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var y=Ka(i.body,e,!0);y.length===1&&y[0]instanceof lo?(d=y[0],d.classes[0]="mop"):d=Ie.makeSpan(["mop"],y,e)}else{for(var w=[],N=1;N<i.name.length;N++)w.push(Ie.mathsym(i.name[N],i.mode,e));d=Ie.makeSpan(["mop"],w,e)}var S=0,E=0;return(d instanceof lo||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(S=(d.height-d.depth)/2-e.fontMetrics().axisHeight,E=d.italic),a?VG(d,r,n,e,o,E,S):(S&&(d.style.position="relative",d.style.top=vt(S)),d)},Cx=(t,e)=>{var r;if(t.symbol)r=new ks("mo",[co(t.name,t.mode)]),FG.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new ks("mo",hs(t.body,e));else{r=new ks("mi",[new el(t.name.slice(1))]);var n=new ks("mo",[co("","text")]);t.parentIsSupSub?r=new ks("mrow",[r,n]):r=xG([r,n])}return r},Ade={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Tt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=Ade[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Qf,mathmlBuilder:Cx});Tt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:va(n)}},htmlBuilder:Qf,mathmlBuilder:Cx});var Ede={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Tt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Qf,mathmlBuilder:Cx});Tt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Qf,mathmlBuilder:Cx});Tt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Ede[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Qf,mathmlBuilder:Cx});var qG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=Sr(t.base,"operatorname"),a=!0):i=Sr(t,"operatorname");var o;if(i.body.length>0){for(var c=i.body.map(m=>{var x=m.text;return typeof x=="string"?{type:"textord",mode:m.mode,text:x}:m}),d=Ka(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof lo&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=Ie.makeSpan(["mop"],d,e)}else o=Ie.makeSpan(["mop"],[],e);return a?VG(o,r,n,e,e.style,0,0):o},kde=(t,e)=>{for(var r=hs(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof dt.SpaceNode))if(i instanceof dt.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof dt.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new dt.TextNode(c)]}var d=new dt.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new dt.MathNode("mo",[co("","text")]);return t.parentIsSupSub?new dt.MathNode("mrow",[d,h]):dt.newDocumentFragment([d,h])};Tt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:va(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:qG,mathmlBuilder:kde});Z("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");_0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Ie.makeFragment(Ka(t.body,e,!1)):Ie.makeSpan(["mord"],Ka(t.body,e,!0),e)},mathmlBuilder(t,e){return Uu(t.body,e,!0)}});Tt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=qr(t.body,e.havingCrampedStyle()),n=Ie.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return Ie.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new dt.MathNode("mo",[new dt.TextNode("")]);r.setAttribute("stretchy","true");var n=new dt.MathNode("mover",[Pn(t.body,e),r]);return n.setAttribute("accent","true"),n}});Tt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:va(n)}},htmlBuilder:(t,e)=>{var r=Ka(t.body,e.withPhantom(),!1);return Ie.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=hs(t.body,e);return new dt.MathNode("mphantom",r)}});Tt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ie.makeSpan([],[qr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Ie.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=hs(va(t.body),e),n=new dt.MathNode("mphantom",r),a=new dt.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});Tt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ie.makeSpan(["inner"],[qr(t.body,e.withPhantom())]),n=Ie.makeSpan(["fix"],[]);return Ie.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=hs(va(t.body),e),n=new dt.MathNode("mphantom",r),a=new dt.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});Tt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=Sr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=qr(t.body,e),n=ta(t.dy,e);return Ie.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new dt.MathNode("mpadded",[Pn(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});Tt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});Tt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=Sr(e[0],"size"),o=Sr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&Sr(a,"size").value,width:i.value,height:o.value}},htmlBuilder(t,e){var r=Ie.makeSpan(["mord","rule"],[],e),n=ta(t.width,e),a=ta(t.height,e),i=t.shift?ta(t.shift,e):0;return r.style.borderRightWidth=vt(n),r.style.borderTopWidth=vt(a),r.style.bottom=vt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=ta(t.width,e),n=ta(t.height,e),a=t.shift?ta(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new dt.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",vt(r)),o.setAttribute("height",vt(n));var c=new dt.MathNode("mpadded",[o]);return a>=0?c.setAttribute("height",vt(a)):(c.setAttribute("height",vt(a)),c.setAttribute("depth",vt(-a))),c.setAttribute("voffset",vt(a)),c}});function HG(t,e,r){for(var n=Ka(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return Ie.makeFragment(n)}var gM=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Cde=(t,e)=>{var r=e.havingSize(t.size);return HG(t.body,r,e)};Tt({type:"sizing",names:gM,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:gM.indexOf(n)+1,body:i}},htmlBuilder:Cde,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=hs(t.body,r),a=new dt.MathNode("mstyle",n);return a.setAttribute("mathsize",vt(r.sizeMultiplier)),a}});Tt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,o=r[0]&&Sr(r[0],"ordgroup");if(o)for(var c="",d=0;d<o.body.length;++d){var h=o.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=Ie.makeSpan([],[qr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=Ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Ie.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new dt.MathNode("mpadded",[Pn(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});Tt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=qr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Ie.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Jt.TEXT.id&&(i=e.fontMetrics().xHeight);var o=a+i/4,c=r.height+r.depth+o+a,{span:d,ruleWidth:h,advanceWidth:p}=rc.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+o&&(o=(o+m-r.height-r.depth)/2);var x=d.height-r.height-o-h;r.style.paddingLeft=vt(p);var y=Ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+x)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var w=e.havingStyle(Jt.SCRIPTSCRIPT),N=qr(t.index,w,e),S=.6*(y.height-y.depth),E=Ie.makeVList({positionType:"shift",positionData:-S,children:[{type:"elem",elem:N}]},e),C=Ie.makeSpan(["root"],[E]);return Ie.makeSpan(["mord","sqrt"],[C,y],e)}else return Ie.makeSpan(["mord","sqrt"],[y],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new dt.MathNode("mroot",[Pn(r,e),Pn(n,e)]):new dt.MathNode("msqrt",[Pn(r,e)])}});var xM={display:Jt.DISPLAY,text:Jt.TEXT,script:Jt.SCRIPT,scriptscript:Jt.SCRIPTSCRIPT};Tt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(t,e){var r=xM[t.style],n=e.havingStyle(r).withFont("");return HG(t.body,n,e)},mathmlBuilder(t,e){var r=xM[t.style],n=e.havingStyle(r),a=hs(t.body,n),i=new dt.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=o[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var Ode=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Jt.DISPLAY.size||n.alwaysHandleSupSub);return a?Qf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Jt.DISPLAY.size||n.limits);return i?qG:null}else{if(n.type==="accent")return Xr.isCharacterBox(n.base)?AE:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?UG:null}else return null}else return null};_0({type:"supsub",htmlBuilder(t,e){var r=Ode(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,o=qr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,x=n&&Xr.isCharacterBox(n);if(a){var y=e.havingStyle(e.style.sup());c=qr(a,y,e),x||(p=o.height-y.fontMetrics().supDrop*y.sizeMultiplier/e.sizeMultiplier)}if(i){var w=e.havingStyle(e.style.sub());d=qr(i,w,e),x||(m=o.depth+w.fontMetrics().subDrop*w.sizeMultiplier/e.sizeMultiplier)}var N;e.style===Jt.DISPLAY?N=h.sup1:e.style.cramped?N=h.sup3:N=h.sup2;var S=e.sizeMultiplier,E=vt(.5/h.ptPerEm/S),C=null;if(d){var M=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof lo||M)&&(C=vt(-o.italic))}var L;if(c&&d){p=Math.max(p,N,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var I=h.defaultRuleThickness,R=4*I;if(p-c.depth-(d.height-m)<R){m=R-(p-c.depth)+d.height;var A=.8*h.xHeight-(p-c.depth);A>0&&(p+=A,m-=A)}var T=[{type:"elem",elem:d,shift:m,marginRight:E,marginLeft:C},{type:"elem",elem:c,shift:-p,marginRight:E}];L=Ie.makeVList({positionType:"individualShift",children:T},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var k=[{type:"elem",elem:d,marginLeft:C,marginRight:E}];L=Ie.makeVList({positionType:"shift",positionData:m,children:k},e)}else if(c)p=Math.max(p,N,c.depth+.25*h.xHeight),L=Ie.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:E}]},e);else throw new Error("supsub must have either sup or sub.");var F=sT(o,"right")||"mord";return Ie.makeSpan([F],[o,Ie.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[Pn(t.base,e)];t.sub&&i.push(Pn(t.sub,e)),t.sup&&i.push(Pn(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Jt.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Jt.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Jt.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Jt.DISPLAY)?o="munder":o="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Jt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Jt.DISPLAY)?o="mover":o="msup"}return new dt.MathNode(o,i)}});_0({type:"atom",htmlBuilder(t,e){return Ie.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new dt.MathNode("mo",[co(t.text,t.mode)]);if(t.family==="bin"){var n=jE(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var GG={mi:"italic",mn:"normal",mtext:"normal"};_0({type:"mathord",htmlBuilder(t,e){return Ie.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new dt.MathNode("mi",[co(t.text,t.mode,e)]),n=jE(t,e)||"italic";return n!==GG[r.type]&&r.setAttribute("mathvariant",n),r}});_0({type:"textord",htmlBuilder(t,e){return Ie.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=co(t.text,t.mode,e),n=jE(t,e)||"normal",a;return t.mode==="text"?a=new dt.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new dt.MathNode("mn",[r]):t.text==="\\prime"?a=new dt.MathNode("mo",[r]):a=new dt.MathNode("mi",[r]),n!==GG[a.type]&&a.setAttribute("mathvariant",n),a}});var B3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},$3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};_0({type:"spacing",htmlBuilder(t,e){if($3.hasOwnProperty(t.text)){var r=$3[t.text].className||"";if(t.mode==="text"){var n=Ie.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Ie.makeSpan(["mspace",r],[Ie.mathsym(t.text,t.mode,e)],e)}else{if(B3.hasOwnProperty(t.text))return Ie.makeSpan(["mspace",B3[t.text]],[],e);throw new ht('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if($3.hasOwnProperty(t.text))r=new dt.MathNode("mtext",[new dt.TextNode("")]);else{if(B3.hasOwnProperty(t.text))return new dt.MathNode("mspace");throw new ht('Unknown type of space "'+t.text+'"')}return r}});var yM=()=>{var t=new dt.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};_0({type:"tag",mathmlBuilder(t,e){var r=new dt.MathNode("mtable",[new dt.MathNode("mtr",[yM(),new dt.MathNode("mtd",[Uu(t.body,e)]),yM(),new dt.MathNode("mtd",[Uu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var vM={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},bM={"\\textbf":"textbf","\\textmd":"textmd"},Ide={"\\textit":"textit","\\textup":"textup"},wM=(t,e)=>{var r=t.font;if(r){if(vM[r])return e.withTextFontFamily(vM[r]);if(bM[r])return e.withTextFontWeight(bM[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Ide[r])};Tt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:va(a),font:n}},htmlBuilder(t,e){var r=wM(t,e),n=Ka(t.body,r,!0);return Ie.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=wM(t,e);return Uu(t.body,r)}});Tt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=qr(t.body,e),n=Ie.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ie.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return Ie.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new dt.MathNode("mo",[new dt.TextNode("")]);r.setAttribute("stretchy","true");var n=new dt.MathNode("munder",[Pn(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});Tt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=qr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return Ie.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new dt.MathNode("mpadded",[Pn(t.body,e)],["vcenter"])}});Tt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ht("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=SM(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),n.push(Ie.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return Ie.makeSpan(["mord","text"].concat(a.sizingClasses(e)),Ie.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new dt.TextNode(SM(t)),n=new dt.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var SM=t=>t.body.replace(/ /g,t.star?"":""),vu=mG,WG=`[ \r
	]`,Rde="\\\\[a-zA-Z@]+",Mde="\\\\[^\uD800-\uDFFF]",Dde="("+Rde+")"+WG+"*",Pde=`\\\\(
|[ \r	]+
?)[ \r	]*`,uT="[-]",Lde=new RegExp(uT+"+$"),Bde="("+WG+"+)|"+(Pde+"|")+"([!-\\[\\]---]"+(uT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(uT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Dde)+("|"+Mde+")");class NM{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Bde,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Ms("EOF",new rs(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ht("Unexpected character: '"+e[r]+"'",new Ms(e[r],new rs(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Ms(a,new rs(this,r,this.tokenRegex.lastIndex))}}class $de{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ht("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var zde=PG;Z("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});Z("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});Z("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});Z("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});Z("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});Z("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Z("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var _M={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Z("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ht("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=_M[e.text],n==null||n>=r)throw new ht("Invalid base-"+r+" digit "+e.text);for(var a;(a=_M[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var DE=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ht("\\newcommand's first argument must be a macro name");var i=a[0].text,o=t.isDefined(i);if(o&&!e)throw new ht("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new ht("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ht("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return o&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};Z("\\newcommand",t=>DE(t,!1,!0,!1));Z("\\renewcommand",t=>DE(t,!0,!1,!1));Z("\\providecommand",t=>DE(t,!0,!0,!0));Z("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});Z("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});Z("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),vu[r],$n.math[r],$n.text[r]),""});Z("\\bgroup","{");Z("\\egroup","}");Z("~","\\nobreakspace");Z("\\lq","`");Z("\\rq","'");Z("\\aa","\\r a");Z("\\AA","\\r A");Z("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Z("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Z("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Z("","\\mathscr{B}");Z("","\\mathscr{E}");Z("","\\mathscr{F}");Z("","\\mathscr{H}");Z("","\\mathscr{I}");Z("","\\mathscr{L}");Z("","\\mathscr{M}");Z("","\\mathscr{R}");Z("","\\mathfrak{C}");Z("","\\mathfrak{H}");Z("","\\mathfrak{Z}");Z("\\Bbbk","\\Bbb{k}");Z("","\\cdotp");Z("\\llap","\\mathllap{\\textrm{#1}}");Z("\\rlap","\\mathrlap{\\textrm{#1}}");Z("\\clap","\\mathclap{\\textrm{#1}}");Z("\\mathstrut","\\vphantom{(}");Z("\\underbar","\\underline{\\text{#1}}");Z("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Z("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Z("\\ne","\\neq");Z("","\\neq");Z("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Z("","\\notin");Z("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Z("","\\perp");Z("","\\mathclose{!\\mkern-0.8mu!}");Z("","\\notni");Z("","\\ulcorner");Z("","\\urcorner");Z("","\\llcorner");Z("","\\lrcorner");Z("","\\copyright");Z("","\\textregistered");Z("","\\textregistered");Z("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Z("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Z("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Z("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Z("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Z("","\\vdots");Z("\\varGamma","\\mathit{\\Gamma}");Z("\\varDelta","\\mathit{\\Delta}");Z("\\varTheta","\\mathit{\\Theta}");Z("\\varLambda","\\mathit{\\Lambda}");Z("\\varXi","\\mathit{\\Xi}");Z("\\varPi","\\mathit{\\Pi}");Z("\\varSigma","\\mathit{\\Sigma}");Z("\\varUpsilon","\\mathit{\\Upsilon}");Z("\\varPhi","\\mathit{\\Phi}");Z("\\varPsi","\\mathit{\\Psi}");Z("\\varOmega","\\mathit{\\Omega}");Z("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Z("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Z("\\boxed","\\fbox{$\\displaystyle{#1}$}");Z("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Z("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Z("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Z("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Z("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var jM={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Z("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in jM?e=jM[r]:(r.slice(0,4)==="\\not"||r in $n.math&&["bin","rel"].includes($n.math[r].group))&&(e="\\dotsb"),e});var PE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Z("\\dotso",function(t){var e=t.future().text;return e in PE?"\\ldots\\,":"\\ldots"});Z("\\dotsc",function(t){var e=t.future().text;return e in PE&&e!==","?"\\ldots\\,":"\\ldots"});Z("\\cdots",function(t){var e=t.future().text;return e in PE?"\\@cdots\\,":"\\@cdots"});Z("\\dotsb","\\cdots");Z("\\dotsm","\\cdots");Z("\\dotsi","\\!\\cdots");Z("\\dotsx","\\ldots\\,");Z("\\DOTSI","\\relax");Z("\\DOTSB","\\relax");Z("\\DOTSX","\\relax");Z("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Z("\\,","\\tmspace+{3mu}{.1667em}");Z("\\thinspace","\\,");Z("\\>","\\mskip{4mu}");Z("\\:","\\tmspace+{4mu}{.2222em}");Z("\\medspace","\\:");Z("\\;","\\tmspace+{5mu}{.2777em}");Z("\\thickspace","\\;");Z("\\!","\\tmspace-{3mu}{.1667em}");Z("\\negthinspace","\\!");Z("\\negmedspace","\\tmspace-{4mu}{.2222em}");Z("\\negthickspace","\\tmspace-{5mu}{.277em}");Z("\\enspace","\\kern.5em ");Z("\\enskip","\\hskip.5em\\relax");Z("\\quad","\\hskip1em\\relax");Z("\\qquad","\\hskip2em\\relax");Z("\\tag","\\@ifstar\\tag@literal\\tag@paren");Z("\\tag@paren","\\tag@literal{({#1})}");Z("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ht("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Z("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Z("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Z("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Z("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Z("\\newline","\\\\\\relax");Z("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var KG=vt(Zo["Main-Regular"][84][1]-.7*Zo["Main-Regular"][65][1]);Z("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+KG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Z("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+KG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Z("\\hspace","\\@ifstar\\@hspacer\\@hspace");Z("\\@hspace","\\hskip #1\\relax");Z("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Z("\\ordinarycolon",":");Z("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Z("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Z("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Z("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Z("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Z("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Z("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Z("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Z("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Z("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Z("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Z("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Z("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Z("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Z("","\\dblcolon");Z("","\\eqcolon");Z("","\\coloneqq");Z("","\\eqqcolon");Z("","\\Coloneqq");Z("\\ratio","\\vcentcolon");Z("\\coloncolon","\\dblcolon");Z("\\colonequals","\\coloneqq");Z("\\coloncolonequals","\\Coloneqq");Z("\\equalscolon","\\eqqcolon");Z("\\equalscoloncolon","\\Eqqcolon");Z("\\colonminus","\\coloneq");Z("\\coloncolonminus","\\Coloneq");Z("\\minuscolon","\\eqcolon");Z("\\minuscoloncolon","\\Eqcolon");Z("\\coloncolonapprox","\\Colonapprox");Z("\\coloncolonsim","\\Colonsim");Z("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Z("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Z("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Z("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Z("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Z("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Z("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Z("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Z("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Z("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Z("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Z("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Z("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Z("\\nleqq","\\html@mathml{\\@nleqq}{}");Z("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Z("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Z("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Z("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Z("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Z("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Z("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Z("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Z("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Z("\\imath","\\html@mathml{\\@imath}{}");Z("\\jmath","\\html@mathml{\\@jmath}{}");Z("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Z("","\\llbracket");Z("","\\rrbracket");Z("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Z("","\\lBrace");Z("","\\rBrace");Z("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Z("","\\minuso");Z("\\darr","\\downarrow");Z("\\dArr","\\Downarrow");Z("\\Darr","\\Downarrow");Z("\\lang","\\langle");Z("\\rang","\\rangle");Z("\\uarr","\\uparrow");Z("\\uArr","\\Uparrow");Z("\\Uarr","\\Uparrow");Z("\\N","\\mathbb{N}");Z("\\R","\\mathbb{R}");Z("\\Z","\\mathbb{Z}");Z("\\alef","\\aleph");Z("\\alefsym","\\aleph");Z("\\Alpha","\\mathrm{A}");Z("\\Beta","\\mathrm{B}");Z("\\bull","\\bullet");Z("\\Chi","\\mathrm{X}");Z("\\clubs","\\clubsuit");Z("\\cnums","\\mathbb{C}");Z("\\Complex","\\mathbb{C}");Z("\\Dagger","\\ddagger");Z("\\diamonds","\\diamondsuit");Z("\\empty","\\emptyset");Z("\\Epsilon","\\mathrm{E}");Z("\\Eta","\\mathrm{H}");Z("\\exist","\\exists");Z("\\harr","\\leftrightarrow");Z("\\hArr","\\Leftrightarrow");Z("\\Harr","\\Leftrightarrow");Z("\\hearts","\\heartsuit");Z("\\image","\\Im");Z("\\infin","\\infty");Z("\\Iota","\\mathrm{I}");Z("\\isin","\\in");Z("\\Kappa","\\mathrm{K}");Z("\\larr","\\leftarrow");Z("\\lArr","\\Leftarrow");Z("\\Larr","\\Leftarrow");Z("\\lrarr","\\leftrightarrow");Z("\\lrArr","\\Leftrightarrow");Z("\\Lrarr","\\Leftrightarrow");Z("\\Mu","\\mathrm{M}");Z("\\natnums","\\mathbb{N}");Z("\\Nu","\\mathrm{N}");Z("\\Omicron","\\mathrm{O}");Z("\\plusmn","\\pm");Z("\\rarr","\\rightarrow");Z("\\rArr","\\Rightarrow");Z("\\Rarr","\\Rightarrow");Z("\\real","\\Re");Z("\\reals","\\mathbb{R}");Z("\\Reals","\\mathbb{R}");Z("\\Rho","\\mathrm{P}");Z("\\sdot","\\cdot");Z("\\sect","\\S");Z("\\spades","\\spadesuit");Z("\\sub","\\subset");Z("\\sube","\\subseteq");Z("\\supe","\\supseteq");Z("\\Tau","\\mathrm{T}");Z("\\thetasym","\\vartheta");Z("\\weierp","\\wp");Z("\\Zeta","\\mathrm{Z}");Z("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Z("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Z("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Z("\\bra","\\mathinner{\\langle{#1}|}");Z("\\ket","\\mathinner{|{#1}\\rangle}");Z("\\braket","\\mathinner{\\langle{#1}\\rangle}");Z("\\Bra","\\left\\langle#1\\right|");Z("\\Ket","\\left|#1\\right\\rangle");var QG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>x=>{t&&(x.macros.set("|",o),a.length&&x.macros.set("\\|",c));var y=m;if(!m&&a.length){var w=x.future();w.text==="|"&&(x.popToken(),y=!0)}return{tokens:y?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};Z("\\bra@ket",QG(!1));Z("\\bra@set",QG(!0));Z("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Z("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Z("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Z("\\angln","{\\angl n}");Z("\\blue","\\textcolor{##6495ed}{#1}");Z("\\orange","\\textcolor{##ffa500}{#1}");Z("\\pink","\\textcolor{##ff00af}{#1}");Z("\\red","\\textcolor{##df0030}{#1}");Z("\\green","\\textcolor{##28ae7b}{#1}");Z("\\gray","\\textcolor{gray}{#1}");Z("\\purple","\\textcolor{##9d38bd}{#1}");Z("\\blueA","\\textcolor{##ccfaff}{#1}");Z("\\blueB","\\textcolor{##80f6ff}{#1}");Z("\\blueC","\\textcolor{##63d9ea}{#1}");Z("\\blueD","\\textcolor{##11accd}{#1}");Z("\\blueE","\\textcolor{##0c7f99}{#1}");Z("\\tealA","\\textcolor{##94fff5}{#1}");Z("\\tealB","\\textcolor{##26edd5}{#1}");Z("\\tealC","\\textcolor{##01d1c1}{#1}");Z("\\tealD","\\textcolor{##01a995}{#1}");Z("\\tealE","\\textcolor{##208170}{#1}");Z("\\greenA","\\textcolor{##b6ffb0}{#1}");Z("\\greenB","\\textcolor{##8af281}{#1}");Z("\\greenC","\\textcolor{##74cf70}{#1}");Z("\\greenD","\\textcolor{##1fab54}{#1}");Z("\\greenE","\\textcolor{##0d923f}{#1}");Z("\\goldA","\\textcolor{##ffd0a9}{#1}");Z("\\goldB","\\textcolor{##ffbb71}{#1}");Z("\\goldC","\\textcolor{##ff9c39}{#1}");Z("\\goldD","\\textcolor{##e07d10}{#1}");Z("\\goldE","\\textcolor{##a75a05}{#1}");Z("\\redA","\\textcolor{##fca9a9}{#1}");Z("\\redB","\\textcolor{##ff8482}{#1}");Z("\\redC","\\textcolor{##f9685d}{#1}");Z("\\redD","\\textcolor{##e84d39}{#1}");Z("\\redE","\\textcolor{##bc2612}{#1}");Z("\\maroonA","\\textcolor{##ffbde0}{#1}");Z("\\maroonB","\\textcolor{##ff92c6}{#1}");Z("\\maroonC","\\textcolor{##ed5fa6}{#1}");Z("\\maroonD","\\textcolor{##ca337c}{#1}");Z("\\maroonE","\\textcolor{##9e034e}{#1}");Z("\\purpleA","\\textcolor{##ddd7ff}{#1}");Z("\\purpleB","\\textcolor{##c6b9fc}{#1}");Z("\\purpleC","\\textcolor{##aa87ff}{#1}");Z("\\purpleD","\\textcolor{##7854ab}{#1}");Z("\\purpleE","\\textcolor{##543b78}{#1}");Z("\\mintA","\\textcolor{##f5f9e8}{#1}");Z("\\mintB","\\textcolor{##edf2df}{#1}");Z("\\mintC","\\textcolor{##e0e5cc}{#1}");Z("\\grayA","\\textcolor{##f6f7f7}{#1}");Z("\\grayB","\\textcolor{##f0f1f2}{#1}");Z("\\grayC","\\textcolor{##e3e5e6}{#1}");Z("\\grayD","\\textcolor{##d6d8da}{#1}");Z("\\grayE","\\textcolor{##babec2}{#1}");Z("\\grayF","\\textcolor{##888d93}{#1}");Z("\\grayG","\\textcolor{##626569}{#1}");Z("\\grayH","\\textcolor{##3b3e40}{#1}");Z("\\grayI","\\textcolor{##21242c}{#1}");Z("\\kaBlue","\\textcolor{##314453}{#1}");Z("\\kaGreen","\\textcolor{##71B307}{#1}");var XG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Ude{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new $de(zde,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new NM(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new Ms("EOF",n.loc)),this.pushTokens(a),new Ms("",rs.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,o=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new ht("Extra }",i)}else if(i.text==="EOF")throw new ht("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((o===0||o===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(o!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ht("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new ht("Use of the macro doesn't match its definition",i)}}for(var o=[],c=0;c<e;c++)o.push(this.consumeArg(r&&r[c+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ht("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ht("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new ht("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...o[+d.text-1]);else throw new ht("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Ms(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var c=new NM(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||vu.hasOwnProperty(e)||$n.math.hasOwnProperty(e)||$n.text.hasOwnProperty(e)||XG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:vu.hasOwnProperty(e)&&!vu[e].primitive}}var TM=/^[]/,Dy=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),z3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},AM={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class uw{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Ude(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ht("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Ms("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(uw.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&vu[a.text]&&vu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ht("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,o,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?o=d[0]:o={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],o],[]):h=this.callFunction(n,[i,o],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new ht("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new ht("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new ht("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new ht("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new ht("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(Dy[i.text]){var h=TM.test(i.text),p=[];for(p.push(new Ms(Dy[i.text])),this.consume();;){var m=this.fetch().text;if(!Dy[m]||TM.test(m)!==h)break;p.unshift(new Ms(Dy[m])),this.consume()}var x=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:x}:n={type:"ordgroup",mode:"math",body:x}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=vu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new ht("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new ht("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new ht("Can't use function '"+a+"' in math mode",n);var{args:o,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,o,c,n,e)}callFunction(e,r,n,a,i){var o={funcName:e,parser:this,token:a,breakOnTokenText:i},c=vu[e];if(c&&c.handler)return c.handler(o,r,n);throw new ht("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],o=0;o<n;o++){var c=r.argTypes&&r.argTypes[o],d=o<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new ht("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new ht("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ht("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ht("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",o;(o=this.fetch()).text!=="EOF"&&e.test(i+o.text);)a=o,i+=a.text,this.consume();if(i==="")throw new ht("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ht("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ht("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!sG(i))throw new ht("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),o}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,o),d=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:rs.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!XG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ht("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:rs.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:rs.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:rs.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ht(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}AM.hasOwnProperty(r[0])&&!$n[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=AM[r[0]]+r.slice(1));var i=Lde.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if($n[this.mode][r]){this.settings.strict&&this.mode==="math"&&iT.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=$n[this.mode][r].group,d=rs.range(e),h;if(kue.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};o=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(iG(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:rs.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var x=i[0][m];if(!z3[x])throw new ht("Unknown accent ' "+x+"'",e);var y=z3[x][this.mode]||z3[x].text;if(!y)throw new ht("Accent "+x+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:rs.range(e),label:y,isStretchy:!1,isShifty:!0,base:o}}return o}}uw.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var LE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new uw(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ht("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new Ms("\\df@tag")])}]}return a},YG=function(e,r,n){r.textContent="";var a=BE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),YG=function(){throw new ht("KaTeX doesn't work in quirks mode.")});var Vde=function(e,r){var n=BE(e,r).toMarkup();return n},Fde=function(e,r){var n=new vE(r);return LE(e,n)},JG=function(e,r,n){if(n.throwOnError||!(e instanceof ht))throw e;var a=Ie.makeSpan(["katex-error"],[new lo(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},BE=function(e,r){var n=new vE(r);try{var a=LE(e,n);return Jue(a,e,n)}catch(i){return JG(i,e,n)}},qde=function(e,r){var n=new vE(r);try{var a=LE(e,n);return Zue(a,e,n)}catch(i){return JG(i,e,n)}},Hde="0.16.28",Gde={Span:kx,Anchor:SE,SymbolNode:lo,SvgNode:hc,PathNode:zu,LineNode:aT},db={version:Hde,render:YG,renderToString:Vde,ParseError:ht,SETTINGS_SCHEMA:wv,__parse:Fde,__renderToDomTree:BE,__renderToHTMLTree:qde,__setFontMetrics:wue,__defineSymbol:D,__defineFunction:Tt,__defineMacro:Z,__domTree:Gde};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(t)}function dT(t,e){return dT=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},dT(t,e)}function Wde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nv(t,e,r){return Wde()?Nv=Reflect.construct:Nv=function(a,i,o){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return o&&dT(h,o.prototype),h},Nv.apply(null,arguments)}function No(t){return Kde(t)||Qde(t)||Xde(t)||Yde()}function Kde(t){if(Array.isArray(t))return hT(t)}function Qde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xde(t,e){if(t){if(typeof t=="string")return hT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hT(t,e)}}function hT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Jde=Object.hasOwnProperty,EM=Object.setPrototypeOf,Zde=Object.isFrozen,e0e=Object.getPrototypeOf,t0e=Object.getOwnPropertyDescriptor,Vi=Object.freeze,uo=Object.seal,r0e=Object.create,ZG=typeof Reflect<"u"&&Reflect,hb=ZG.apply,fT=ZG.construct;hb||(hb=function(e,r,n){return e.apply(r,n)});Vi||(Vi=function(e){return e});uo||(uo=function(e){return e});fT||(fT=function(e,r){return Nv(e,No(r))});var n0e=ho(Array.prototype.forEach),kM=ho(Array.prototype.pop),im=ho(Array.prototype.push),_v=ho(String.prototype.toLowerCase),U3=ho(String.prototype.toString),CM=ho(String.prototype.match),wo=ho(String.prototype.replace),a0e=ho(String.prototype.indexOf),i0e=ho(String.prototype.trim),pi=ho(RegExp.prototype.test),V3=s0e(TypeError);function ho(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return hb(t,e,n)}}function s0e(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return fT(t,r)}}function _r(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:_v,EM&&EM(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var o=r(i);o!==i&&(Zde(e)||(e[a]=o),i=o)}t[i]=!0}return t}function _d(t){var e=r0e(null),r;for(r in t)hb(Jde,t,[r])===!0&&(e[r]=t[r]);return e}function Py(t,e){for(;t!==null;){var r=t0e(t,e);if(r){if(r.get)return ho(r.get);if(typeof r.value=="function")return ho(r.value)}t=e0e(t)}function n(a){return console.warn("fallback value for",a),null}return n}var OM=Vi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),F3=Vi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),q3=Vi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),o0e=Vi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),H3=Vi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),l0e=Vi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),IM=Vi(["#text"]),RM=Vi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),G3=Vi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),MM=Vi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ly=Vi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),c0e=uo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),u0e=uo(/<%[\w\W]*|[\w\W]*%>/gm),d0e=uo(/\${[\w\W]*}/gm),h0e=uo(/^data-[\-\w.\u00B7-\uFFFF]+$/),f0e=uo(/^aria-[\-\w]+$/),p0e=uo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),m0e=uo(/^(?:\w+script|data):/i),g0e=uo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),x0e=uo(/^html$/i),y0e=uo(/^[a-z][.\w]*(-[.\w]+)+$/i),v0e=function(){return typeof window>"u"?null:window},b0e=function(e,r){if(mu(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function eW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v0e(),e=function(fe){return eW(fe)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,o=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,x=t.DOMParser,y=t.trustedTypes,w=c.prototype,N=Py(w,"cloneNode"),S=Py(w,"nextSibling"),E=Py(w,"childNodes"),C=Py(w,"parentNode");if(typeof i=="function"){var M=n.createElement("template");M.content&&M.content.ownerDocument&&(n=M.content.ownerDocument)}var L=b0e(y,r),I=L?L.createHTML(""):"",R=n,A=R.implementation,T=R.createNodeIterator,k=R.createDocumentFragment,F=R.getElementsByTagName,O=r.importNode,$={};try{$=_d(n).documentMode?n.documentMode:{}}catch{}var B={};e.isSupported=typeof C=="function"&&A&&A.createHTMLDocument!==void 0&&$!==9;var G=c0e,Q=u0e,H=d0e,K=h0e,te=f0e,ae=m0e,ce=g0e,X=y0e,ie=p0e,ne=null,ve=_r({},[].concat(No(OM),No(F3),No(q3),No(H3),No(IM))),pe=null,Be=_r({},[].concat(No(RM),No(G3),No(MM),No(Ly))),Ge=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),He=null,Ne=null,We=!0,Y=!0,re=!1,be=!0,we=!1,Ye=!0,nt=!1,Ot=!1,Ee=!1,ut=!1,Nt=!1,wt=!1,zt=!0,de=!1,Fe="user-content-",jt=!0,qe=!1,Ze={},At=null,St=_r({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),lr=null,ye=_r({},["audio","video","img","source","image","track"]),it=null,xt=_r({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",Pt="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xhtml",Le=rt,et=!1,lt=null,Ft=_r({},[Dt,Pt,rt],U3),Wt,Qt=["application/xhtml+xml","text/html"],Gt="text/html",Et,Hr=null,un=n.createElement("form"),gn=function(fe){return fe instanceof RegExp||fe instanceof Function},Dr=function(fe){Hr&&Hr===fe||((!fe||mu(fe)!=="object")&&(fe={}),fe=_d(fe),Wt=Qt.indexOf(fe.PARSER_MEDIA_TYPE)===-1?Wt=Gt:Wt=fe.PARSER_MEDIA_TYPE,Et=Wt==="application/xhtml+xml"?U3:_v,ne="ALLOWED_TAGS"in fe?_r({},fe.ALLOWED_TAGS,Et):ve,pe="ALLOWED_ATTR"in fe?_r({},fe.ALLOWED_ATTR,Et):Be,lt="ALLOWED_NAMESPACES"in fe?_r({},fe.ALLOWED_NAMESPACES,U3):Ft,it="ADD_URI_SAFE_ATTR"in fe?_r(_d(xt),fe.ADD_URI_SAFE_ATTR,Et):xt,lr="ADD_DATA_URI_TAGS"in fe?_r(_d(ye),fe.ADD_DATA_URI_TAGS,Et):ye,At="FORBID_CONTENTS"in fe?_r({},fe.FORBID_CONTENTS,Et):St,He="FORBID_TAGS"in fe?_r({},fe.FORBID_TAGS,Et):{},Ne="FORBID_ATTR"in fe?_r({},fe.FORBID_ATTR,Et):{},Ze="USE_PROFILES"in fe?fe.USE_PROFILES:!1,We=fe.ALLOW_ARIA_ATTR!==!1,Y=fe.ALLOW_DATA_ATTR!==!1,re=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,be=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,we=fe.SAFE_FOR_TEMPLATES||!1,Ye=fe.SAFE_FOR_XML!==!1,nt=fe.WHOLE_DOCUMENT||!1,ut=fe.RETURN_DOM||!1,Nt=fe.RETURN_DOM_FRAGMENT||!1,wt=fe.RETURN_TRUSTED_TYPE||!1,Ee=fe.FORCE_BODY||!1,zt=fe.SANITIZE_DOM!==!1,de=fe.SANITIZE_NAMED_PROPS||!1,jt=fe.KEEP_CONTENT!==!1,qe=fe.IN_PLACE||!1,ie=fe.ALLOWED_URI_REGEXP||ie,Le=fe.NAMESPACE||rt,Ge=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&gn(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ge.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&gn(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ge.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ge.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),we&&(Y=!1),Nt&&(ut=!0),Ze&&(ne=_r({},No(IM)),pe=[],Ze.html===!0&&(_r(ne,OM),_r(pe,RM)),Ze.svg===!0&&(_r(ne,F3),_r(pe,G3),_r(pe,Ly)),Ze.svgFilters===!0&&(_r(ne,q3),_r(pe,G3),_r(pe,Ly)),Ze.mathMl===!0&&(_r(ne,H3),_r(pe,MM),_r(pe,Ly))),fe.ADD_TAGS&&(ne===ve&&(ne=_d(ne)),_r(ne,fe.ADD_TAGS,Et)),fe.ADD_ATTR&&(pe===Be&&(pe=_d(pe)),_r(pe,fe.ADD_ATTR,Et)),fe.ADD_URI_SAFE_ATTR&&_r(it,fe.ADD_URI_SAFE_ATTR,Et),fe.FORBID_CONTENTS&&(At===St&&(At=_d(At)),_r(At,fe.FORBID_CONTENTS,Et)),jt&&(ne["#text"]=!0),nt&&_r(ne,["html","head","body"]),ne.table&&(_r(ne,["tbody"]),delete He.tbody),Vi&&Vi(fe),Hr=fe)},kn=_r({},["mi","mo","mn","ms","mtext"]),gr=_r({},["annotation-xml"]),ha=_r({},["title","style","font","a","script"]),xn=_r({},F3);_r(xn,q3),_r(xn,o0e);var Ln=_r({},H3);_r(Ln,l0e);var ci=function(fe){var at=C(fe);(!at||!at.tagName)&&(at={namespaceURI:Le,tagName:"template"});var ft=_v(fe.tagName),nr=_v(at.tagName);return lt[fe.namespaceURI]?fe.namespaceURI===Pt?at.namespaceURI===rt?ft==="svg":at.namespaceURI===Dt?ft==="svg"&&(nr==="annotation-xml"||kn[nr]):!!xn[ft]:fe.namespaceURI===Dt?at.namespaceURI===rt?ft==="math":at.namespaceURI===Pt?ft==="math"&&gr[nr]:!!Ln[ft]:fe.namespaceURI===rt?at.namespaceURI===Pt&&!gr[nr]||at.namespaceURI===Dt&&!kn[nr]?!1:!Ln[ft]&&(ha[ft]||!xn[ft]):!!(Wt==="application/xhtml+xml"&&lt[fe.namespaceURI]):!1},yn=function(fe){im(e.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{try{fe.outerHTML=I}catch{fe.remove()}}},Pr=function(fe,at){try{im(e.removed,{attribute:at.getAttributeNode(fe),from:at})}catch{im(e.removed,{attribute:null,from:at})}if(at.removeAttribute(fe),fe==="is"&&!pe[fe])if(ut||Nt)try{yn(at)}catch{}else try{at.setAttribute(fe,"")}catch{}},Ya=function(fe){var at,ft;if(Ee)fe="<remove></remove>"+fe;else{var nr=CM(fe,/^[\r\n\t ]+/);ft=nr&&nr[0]}Wt==="application/xhtml+xml"&&Le===rt&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");var vr=L?L.createHTML(fe):fe;if(Le===rt)try{at=new x().parseFromString(vr,Wt)}catch{}if(!at||!at.documentElement){at=A.createDocument(Le,"template",null);try{at.documentElement.innerHTML=et?I:vr}catch{}}var dn=at.body||at.documentElement;return fe&&ft&&dn.insertBefore(n.createTextNode(ft),dn.childNodes[0]||null),Le===rt?F.call(at,nt?"html":"body")[0]:nt?at.documentElement:dn},aa=function(fe){return T.call(fe.ownerDocument||fe,fe,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Jr=function(fe){return fe instanceof m&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof p)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},vn=function(fe){return mu(o)==="object"?fe instanceof o:fe&&mu(fe)==="object"&&typeof fe.nodeType=="number"&&typeof fe.nodeName=="string"},Wn=function(fe,at,ft){B[fe]&&n0e(B[fe],function(nr){nr.call(e,at,ft,Hr)})},Pa=function(fe){var at;if(Wn("beforeSanitizeElements",fe,null),Jr(fe)||pi(/[\u0080-\uFFFF]/,fe.nodeName))return yn(fe),!0;var ft=Et(fe.nodeName);if(Wn("uponSanitizeElement",fe,{tagName:ft,allowedTags:ne}),fe.hasChildNodes()&&!vn(fe.firstElementChild)&&(!vn(fe.content)||!vn(fe.content.firstElementChild))&&pi(/<[/\w]/g,fe.innerHTML)&&pi(/<[/\w]/g,fe.textContent)||ft==="select"&&pi(/<template/i,fe.innerHTML)||fe.nodeType===7||Ye&&fe.nodeType===8&&pi(/<[/\w]/g,fe.data))return yn(fe),!0;if(!ne[ft]||He[ft]){if(!He[ft]&&Ci(ft)&&(Ge.tagNameCheck instanceof RegExp&&pi(Ge.tagNameCheck,ft)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(ft)))return!1;if(jt&&!At[ft]){var nr=C(fe)||fe.parentNode,vr=E(fe)||fe.childNodes;if(vr&&nr)for(var dn=vr.length,Zr=dn-1;Zr>=0;--Zr){var bn=N(vr[Zr],!0);bn.__removalCount=(fe.__removalCount||0)+1,nr.insertBefore(bn,S(fe))}}return yn(fe),!0}return fe instanceof c&&!ci(fe)||(ft==="noscript"||ft==="noembed"||ft==="noframes")&&pi(/<\/no(script|embed|frames)/i,fe.innerHTML)?(yn(fe),!0):(we&&fe.nodeType===3&&(at=fe.textContent,at=wo(at,G," "),at=wo(at,Q," "),at=wo(at,H," "),fe.textContent!==at&&(im(e.removed,{element:fe.cloneNode()}),fe.textContent=at)),Wn("afterSanitizeElements",fe,null),!1)},Ja=function(fe,at,ft){if(zt&&(at==="id"||at==="name")&&(ft in n||ft in un))return!1;if(!(Y&&!Ne[at]&&pi(K,at))){if(!(We&&pi(te,at))){if(!pe[at]||Ne[at]){if(!(Ci(fe)&&(Ge.tagNameCheck instanceof RegExp&&pi(Ge.tagNameCheck,fe)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(fe))&&(Ge.attributeNameCheck instanceof RegExp&&pi(Ge.attributeNameCheck,at)||Ge.attributeNameCheck instanceof Function&&Ge.attributeNameCheck(at))||at==="is"&&Ge.allowCustomizedBuiltInElements&&(Ge.tagNameCheck instanceof RegExp&&pi(Ge.tagNameCheck,ft)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(ft))))return!1}else if(!it[at]){if(!pi(ie,wo(ft,ce,""))){if(!((at==="src"||at==="xlink:href"||at==="href")&&fe!=="script"&&a0e(ft,"data:")===0&&lr[fe])){if(!(re&&!pi(ae,wo(ft,ce,"")))){if(ft)return!1}}}}}}return!0},Ci=function(fe){return fe!=="annotation-xml"&&CM(fe,X)},ps=function(fe){var at,ft,nr,vr;Wn("beforeSanitizeAttributes",fe,null);var dn=fe.attributes;if(!(!dn||Jr(fe))){var Zr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pe};for(vr=dn.length;vr--;){at=dn[vr];var bn=at,Lr=bn.name,$s=bn.namespaceURI;if(ft=Lr==="value"?at.value:i0e(at.value),nr=Et(Lr),Zr.attrName=nr,Zr.attrValue=ft,Zr.keepAttr=!0,Zr.forceKeepAttr=void 0,Wn("uponSanitizeAttribute",fe,Zr),ft=Zr.attrValue,!Zr.forceKeepAttr&&(Pr(Lr,fe),!!Zr.keepAttr)){if(!be&&pi(/\/>/i,ft)){Pr(Lr,fe);continue}we&&(ft=wo(ft,G," "),ft=wo(ft,Q," "),ft=wo(ft,H," "));var ms=Et(fe.nodeName);if(Ja(ms,nr,ft)){if(de&&(nr==="id"||nr==="name")&&(Pr(Lr,fe),ft=Fe+ft),Ye&&pi(/((--!?|])>)|<\/(style|title)/i,ft)){Pr(Lr,fe);continue}if(L&&mu(y)==="object"&&typeof y.getAttributeType=="function"&&!$s)switch(y.getAttributeType(ms,nr)){case"TrustedHTML":{ft=L.createHTML(ft);break}case"TrustedScriptURL":{ft=L.createScriptURL(ft);break}}try{$s?fe.setAttributeNS($s,Lr,ft):fe.setAttribute(Lr,ft),Jr(fe)?yn(fe):kM(e.removed)}catch{}}}}Wn("afterSanitizeAttributes",fe,null)}},wi=function kt(fe){var at,ft=aa(fe);for(Wn("beforeSanitizeShadowDOM",fe,null);at=ft.nextNode();)Wn("uponSanitizeShadowNode",at,null),Pa(at),ps(at),at.content instanceof a&&kt(at.content);Wn("afterSanitizeShadowDOM",fe,null)};return e.sanitize=function(kt){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},at,ft,nr,vr,dn;if(et=!kt,et&&(kt="<!-->"),typeof kt!="string"&&!vn(kt))if(typeof kt.toString=="function"){if(kt=kt.toString(),typeof kt!="string")throw V3("dirty is not a string, aborting")}else throw V3("toString is not a function");if(!e.isSupported){if(mu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof kt=="string")return t.toStaticHTML(kt);if(vn(kt))return t.toStaticHTML(kt.outerHTML)}return kt}if(Ot||Dr(fe),e.removed=[],typeof kt=="string"&&(qe=!1),qe){if(kt.nodeName){var Zr=Et(kt.nodeName);if(!ne[Zr]||He[Zr])throw V3("root node is forbidden and cannot be sanitized in-place")}}else if(kt instanceof o)at=Ya("<!---->"),ft=at.ownerDocument.importNode(kt,!0),ft.nodeType===1&&ft.nodeName==="BODY"||ft.nodeName==="HTML"?at=ft:at.appendChild(ft);else{if(!ut&&!we&&!nt&&kt.indexOf("<")===-1)return L&&wt?L.createHTML(kt):kt;if(at=Ya(kt),!at)return ut?null:wt?I:""}at&&Ee&&yn(at.firstChild);for(var bn=aa(qe?kt:at);nr=bn.nextNode();)nr.nodeType===3&&nr===vr||(Pa(nr),ps(nr),nr.content instanceof a&&wi(nr.content),vr=nr);if(vr=null,qe)return kt;if(ut){if(Nt)for(dn=k.call(at.ownerDocument);at.firstChild;)dn.appendChild(at.firstChild);else dn=at;return(pe.shadowroot||pe.shadowrootmod)&&(dn=O.call(r,dn,!0)),dn}var Lr=nt?at.outerHTML:at.innerHTML;return nt&&ne["!doctype"]&&at.ownerDocument&&at.ownerDocument.doctype&&at.ownerDocument.doctype.name&&pi(x0e,at.ownerDocument.doctype.name)&&(Lr="<!DOCTYPE "+at.ownerDocument.doctype.name+`>
`+Lr),we&&(Lr=wo(Lr,G," "),Lr=wo(Lr,Q," "),Lr=wo(Lr,H," ")),L&&wt?L.createHTML(Lr):Lr},e.setConfig=function(kt){Dr(kt),Ot=!0},e.clearConfig=function(){Hr=null,Ot=!1},e.isValidAttribute=function(kt,fe,at){Hr||Dr({});var ft=Et(kt),nr=Et(fe);return Ja(ft,nr,at)},e.addHook=function(kt,fe){typeof fe=="function"&&(B[kt]=B[kt]||[],im(B[kt],fe))},e.removeHook=function(kt){if(B[kt])return kM(B[kt])},e.removeHooks=function(kt){B[kt]&&(B[kt]=[])},e.removeAllHooks=function(){B={}},e}var tW=eW();const w0e=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i,lessonBlocks:o})=>{const c=j.useRef(Xv()),d=j.useRef(Date.now()),h=j.useRef(t),[p,m]=j.useState(!0),[x,y]=j.useState(0),[w,N]=j.useState(!1),[S,E]=j.useState(null),[C,M]=j.useState(0),[L,I]=j.useState(0),[R,A]=j.useState(!1),[T,k]=j.useState(0),[F,O]=j.useState(!1),$=j.useRef(null),B=j.useRef(null),G=j.useRef(null),Q=j.useRef(new Set),H=j.useRef(null),[K,te]=j.useState(!1),[ae,ce]=j.useState(""),[X,ie]=j.useState(0),ne=j.useRef(new Set);j.useEffect(()=>{h.current=t},[t]);const ve=j.useCallback(()=>{d.current=Date.now(),p||m(!0)},[p]),pe=j.useCallback(async(He,Ne)=>{if(!Ne||!n||!a||ne.current.has(He))return;ne.current.add(He),ie(Y=>Y+1),ve();const We=15;try{const re=(await Yj({assignmentId:a,questionId:`block_${He}`,xpAmount:We,classType:i||"Uncategorized"})).data;if(re.awarded){const be=re.serverXP||We;I(we=>we+be),E({text:`+${be} XP`,type:"success"}),qn.xpGain(),setTimeout(()=>E(null),2e3)}}catch(Y){console.error("Lesson block XP award failed",Y)}},[n,a,i,ve]);j.useEffect(()=>{const He=setInterval(()=>{Date.now()-d.current<6e4?(c.current.engagementTime+=1,y(c.current.engagementTime),p||m(!0)):p&&m(!1)},1e3);return()=>clearInterval(He)},[p]),j.useEffect(()=>{const He=["mousemove","keydown","scroll","click"];return He.forEach(Ne=>window.addEventListener(Ne,ve)),()=>He.forEach(Ne=>window.removeEventListener(Ne,ve))},[ve]),j.useEffect(()=>()=>{h.current(c.current)},[]),j.useEffect(()=>{if(!n||!a)return;const He=async Ne=>{var we,Ye,nt,Ot,Ee,ut,Nt,wt,zt,de,Fe,jt;const We=$.current;if(!We)return;const Y=We.src?new URL(We.src).origin:"";if(Ne.origin!==window.location.origin&&Ne.origin!==Y)return;const re=Ne.origin,be=Ne.data;if(!(!be||typeof be!="object"||!((we=be.type)!=null&&we.startsWith("portal-"))))switch(ve(),be.type){case"portal-ready":{N(!0);try{const qe=await ga(ct(Oe,"practice_progress",`${n}_${a}`)),Ze=qe.exists()?qe.data():null,At=(Ze==null?void 0:Ze.answeredQuestions)||[];At.forEach(ye=>Q.current.add(ye)),M(At.length),Ze&&(H.current=Ze,Ze.completed&&(A(!0),k(Ze.totalCompletions||1)));const St=Ze?{state:Ze.state||null,currentQuestion:Ze.currentQuestion??0}:null,lr=Ze!=null&&Ze.completed?{completed:!0,completedAt:Ze.completedAt,bestScore:Ze.bestScore,totalCompletions:Ze.totalCompletions||0,lastCompletion:((Ye=Ze.completionHistory)==null?void 0:Ye.length)>0?Ze.completionHistory[Ze.completionHistory.length-1]:null}:null;(nt=We.contentWindow)==null||nt.postMessage({type:"portal-init",payload:{userId:n,savedState:St,completionInfo:lr}},re)}catch(qe){console.error("Bridge: Failed to load saved state",qe),(Ot=We.contentWindow)==null||Ot.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},re)}break}case"portal-save":{const{state:qe,currentQuestion:Ze}=be.payload||{};if(!qe)break;try{const At=H.current,St={userId:n,assignmentId:a,state:qe,currentQuestion:Ze??0,answeredQuestions:Array.from(Q.current),lastUpdated:new Date().toISOString()};At!=null&&At.completed&&(St.completed=At.completed,St.completedAt=At.completedAt,St.bestScore=At.bestScore,St.totalCompletions=At.totalCompletions,St.completionHistory=At.completionHistory),await ea(ct(Oe,"practice_progress",`${n}_${a}`),St,{merge:!0}),H.current={...H.current,...St},(Ee=We.contentWindow)==null||Ee.postMessage({type:"portal-save-ok"},re)}catch(At){console.error("Bridge: Save failed",At),(ut=We.contentWindow)==null||ut.postMessage({type:"portal-save-error"},re)}break}case"portal-complete":{const{score:qe,totalQuestions:Ze,correctAnswers:At}=be.payload||{};try{const St=H.current,lr=new Date().toISOString(),ye={completedAt:lr,score:qe??0,totalQuestions:Ze??0,correctAnswers:At??0,answeredQuestions:Array.from(Q.current)},it=[...(St==null?void 0:St.completionHistory)||[],ye],xt=Math.max((St==null?void 0:St.bestScore)||0,qe||0),Dt=((St==null?void 0:St.totalCompletions)||0)+1,Pt={userId:n,assignmentId:a,completed:!0,completedAt:(St==null?void 0:St.completedAt)||lr,bestScore:xt,totalCompletions:Dt,completionHistory:it,answeredQuestions:Array.from(Q.current),lastUpdated:lr};St!=null&&St.state&&(Pt.state=St.state,Pt.currentQuestion=St.currentQuestion),await ea(ct(Oe,"practice_progress",`${n}_${a}`),Pt,{merge:!0}),H.current={...H.current,...Pt},A(!0),k(Dt),qn.xpGain(),E({text:"Module Complete!",type:"success"}),setTimeout(()=>E(null),3e3),(Nt=We.contentWindow)==null||Nt.postMessage({type:"portal-complete-ok",payload:{totalCompletions:Dt,bestScore:xt}},re)}catch(St){console.error("Bridge: Completion save failed",St),(wt=We.contentWindow)==null||wt.postMessage({type:"portal-complete-error"},re)}break}case"portal-replay":{try{const qe=H.current,Ze={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(Q.current),lastUpdated:new Date().toISOString(),completed:(qe==null?void 0:qe.completed)||!1,completedAt:(qe==null?void 0:qe.completedAt)||null,bestScore:(qe==null?void 0:qe.bestScore)||null,totalCompletions:(qe==null?void 0:qe.totalCompletions)||0,completionHistory:(qe==null?void 0:qe.completionHistory)||[]};await ea(ct(Oe,"practice_progress",`${n}_${a}`),Ze,{merge:!0}),H.current=Ze,O(!1),(zt=We.contentWindow)==null||zt.postMessage({type:"portal-reset-ok"},re)}catch(qe){console.error("Bridge: Replay reset failed",qe)}break}case"portal-answer":{const{questionId:qe,correct:Ze,attempts:At}=be.payload||{};if(!qe)break;if(Ze&&!Q.current.has(qe)){Q.current.add(qe),M(lr=>lr+1);const St=At===1?15:10;try{const ye=(await Yj({assignmentId:a,questionId:qe,xpAmount:St,classType:i||"Uncategorized"})).data;if(ye.awarded){const it=ye.serverXP||St;I(xt=>xt+it),E({text:`+${it} XP`,type:"success"}),qn.xpGain(),setTimeout(()=>E(null),2e3)}(de=We.contentWindow)==null||de.postMessage({type:"portal-xp-result",payload:{questionId:qe,awarded:ye.awarded,xp:ye.serverXP||St}},re)}catch(lr){console.error("Bridge: XP award failed",lr),(Fe=We.contentWindow)==null||Fe.postMessage({type:"portal-xp-result",payload:{questionId:qe,awarded:!1,xp:0}},re)}}else Ze&&((jt=We.contentWindow)==null||jt.postMessage({type:"portal-xp-result",payload:{questionId:qe,awarded:!1,xp:0}},re));break}}};return window.addEventListener("message",He),()=>window.removeEventListener("message",He)},[n,a,i,ve]);const Be=j.useCallback(()=>{const He=$.current;if(!He||!n||!a)return;const We=(He.src?new URL(He.src).origin:"")||window.location.origin;(async()=>{var Y;try{const re=H.current,be={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(Q.current),lastUpdated:new Date().toISOString(),completed:(re==null?void 0:re.completed)||!1,completedAt:(re==null?void 0:re.completedAt)||null,bestScore:(re==null?void 0:re.bestScore)||null,totalCompletions:(re==null?void 0:re.totalCompletions)||0,completionHistory:(re==null?void 0:re.completionHistory)||[]};await ea(ct(Oe,"practice_progress",`${n}_${a}`),be,{merge:!0}),H.current=be,O(!1),(Y=He.contentWindow)==null||Y.postMessage({type:"portal-reset-ok"},We)}catch(re){console.error("Replay reset failed",re)}})()},[n,a]),Ge=j.useCallback(()=>{const He=G.current;He&&(document.fullscreenElement?document.exitFullscreen():He.requestFullscreen().catch(()=>{te(Ne=>!Ne)}))},[]);return j.useEffect(()=>{const He=()=>te(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",He),()=>document.removeEventListener("fullscreenchange",He)},[]),j.useEffect(()=>{if(B.current&&r){const He=r.replace(/\$(.*?)\$/g,(Ne,We)=>{try{return db.renderToString(We,{throwOnError:!1})}catch{return We}});B.current.innerHTML=tW.sanitize(He,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]}),ce(B.current.textContent||"")}},[r]),s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?s.jsx(pE,{className:"w-4 h-4"}):s.jsx(oo,{className:"w-4 h-4 animate-pulse"}),p?"Active Session":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(x/60),"m ",x%60,"s"]}),w&&C>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[s.jsx($r,{className:"w-3 h-3"})," ",C," answered"]}),!w&&X>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-indigo-300 bg-indigo-500/10 px-3 py-1 rounded-full border border-indigo-500/20",children:[s.jsx($r,{className:"w-3 h-3"})," ",X," blocks completed"]}),w&&L>0&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[s.jsx(Gn,{className:"w-3 h-3"})," ",L," XP"]}),R&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[s.jsx(cl,{className:"w-3 h-3"}),"Completed",T>1?` (${T}x)`:""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(r||ae)&&s.jsx(qR,{textContent:ae,compact:!0}),R&&w&&(F?s.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[s.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),s.jsx("button",{onClick:Be,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),s.jsx("button",{onClick:()=>O(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[s.jsx(Wle,{className:"w-3 h-3"})," Replay"]})),e&&s.jsxs("button",{onClick:Ge,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:K?"Exit full screen (Esc)":"Full screen",children:[K?s.jsx(WH,{className:"w-3 h-3"}):s.jsx(Zj,{className:"w-3 h-3"}),K?"Exit Full Screen":"Full Screen"]}),w&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Gn,{className:"w-3 h-3"})," XP Linked"]}),!p&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Ls,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),S&&s.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${S.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[S.type==="success"?s.jsx($r,{className:"w-4 h-4"}):s.jsx(so,{className:"w-4 h-4"}),S.text]})}),s.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{ref:G,className:`flex flex-col bg-white relative ${o&&o.length>0?"flex-[3]":"flex-1"}`,children:[s.jsx("iframe",{ref:$,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:ve}),s.jsx(_ce,{containerRef:G,assignmentId:a})]}),o&&o.length>0&&s.jsx("div",{className:"flex-[2] bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:s.jsx(tT,{blocks:o,onBlockComplete:pe,showSidebar:!0,engagementTime:x,xpEarned:L})})]}):o&&o.length>0?s.jsx("div",{className:"flex-1 bg-[#0f0720]/95 overflow-y-auto p-6 text-gray-300 custom-scrollbar",children:s.jsx(tT,{blocks:o,onBlockComplete:pe,showSidebar:!0,engagementTime:x,xpEarned:L})}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:s.jsxs("div",{className:"text-center",children:[s.jsx(o0,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),s.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&s.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-white font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Zj,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),ae&&s.jsx(qR,{textContent:ae})]}),s.jsx("div",{ref:B,className:"proctor-content text-sm leading-relaxed"})]})]})]})},S0e=()=>{const[t,e]=j.useState(!1),[r,n]=j.useState(null),a=async()=>{e(!0),n(null);try{await Hte(Xj,Poe)}catch(o){console.error("Login Error:",o),n(o instanceof Error?o.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ls,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"break-words",children:[s.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[s.jsx(kle,{className:"w-4 h-4"}),"Action Required:"]}),s.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",s.jsx("code",{children:"lib/firebase.ts"})," and replace",s.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),s.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),s.jsx("span",{children:"Sign in with Google"})]})}),s.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),s.jsx("span",{children:""}),s.jsx("span",{children:"Firebase Auth"})]})]})})]})},rW=j.createContext(null),Po=()=>{const t=j.useContext(rW);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},N0e=({children:t})=>{const[e,r]=j.useState({isOpen:!1,options:{message:""}}),n=j.useRef(null),a=j.useRef(null),i=j.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),o=j.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=j.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);j.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),j.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&o()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,o]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return s.jsxs(rW.Provider,{value:{confirm:i},children:[t,e.isOpen&&s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),s.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:s.jsx(Ls,{className:"w-5 h-5"})}),s.jsxs("div",{children:[e.options.title&&s.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),s.jsx("button",{ref:a,onClick:o,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),s.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},xg=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=o=>{e.includes(o)?r(e.filter(c=>c!==o)):r([...e,o])};return s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(o=>s.jsx("button",{type:"button",onClick:()=>i(o),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(o)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:o},o))]})]})},DM={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:s.jsx(Tx,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:s.jsx(Ls,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:s.jsx(Fle,{className:"w-4 h-4"})}},_0e=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=Po(),a=Ma(),[i,o]=j.useState(!1),[c,d]=j.useState(""),[h,p]=j.useState(""),[m,x]=j.useState("INFO"),[y,w]=j.useState("GLOBAL"),[N,S]=j.useState([]),E=async()=>{if(!(!c.trim()||!h.trim()))try{await Ae.createAnnouncement({title:c.trim(),content:h.trim(),classType:y,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...N.length>0?{targetSections:N}:{}}),await Ae.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),S([]),o(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},C=async M=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Ae.deleteAnnouncement(M)};return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(rb,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(cn,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(rb,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):s.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(M=>{var I;const L=DM[M.priority]||DM.INFO;return s.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:M.title}),s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:M.content}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[M.classType==="GLOBAL"?"All Classes":M.classType,(I=M.targetSections)!=null&&I.length?`  ${M.targetSections.join(", ")}`:"","  ",new Date(M.createdAt).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>C(M.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},M.id)})}),s.jsx(Bi,{isOpen:i,onClose:()=>o(!1),title:"New Announcement",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:M=>d(M.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),s.jsx("textarea",{value:h,onChange:M=>p(M.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),s.jsxs("select",{value:m,onChange:M=>x(M.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"INFO",children:"Info"}),s.jsx("option",{value:"WARNING",children:"Warning"}),s.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),s.jsxs("select",{value:y,onChange:M=>w(M.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Tr).filter(M=>M!=="Uncategorized").map(M=>s.jsx("option",{value:M,children:M},M))]})]})]}),s.jsx(xg,{availableSections:r,selectedSections:N,onChange:S}),s.jsx("button",{onClick:E,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},$E=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],zE=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],j0e=t=>zE.filter(e=>!e.isSecret||t.includes(e.id)),By={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},nW=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],PM=(t,e)=>{const r=nW.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},T0e=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],UE=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of T0e){const a=n.itemIds.filter(o=>r.includes(o)).length,i=n.bonuses.filter(o=>a>=o.count).sort((o,c)=>c.count-o.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},A0e=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],LM=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],aW=t=>[...LM].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||LM[0],iW=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,BM=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],E0e=["I","II","III","IV","V"],k0e=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},c0=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,BM.length-1),a=BM[n]||"Unknownium",i=E0e[r],o=n+1,c=k0e(o);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Zi={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},C0e={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},$M=(t,e,r)=>{const n=Zi.UNSOCKET_BASE,a=C0e[t],i=Math.max(1,e),o=1+r;return Math.ceil(n*a*i*o)},zM=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},VE=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},FE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([o,c])=>{e[o]+=c})}),e},u0=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let o=0;switch(n.rarity){case"COMMON":o=0;break;case"UNCOMMON":o=10;break;case"RARE":o=30;break;case"UNIQUE":o=60;break}e+=i*10+o}),Math.floor(e))},O0e=t=>{if(!t)return{};const e=Object.values(t).filter(Boolean),r=UE(e),n={};return r.forEach(({activeBonus:a})=>{a.effects.forEach(i=>{n[i.stat]=(n[i.stat]||0)+i.value})}),n},I0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{(n.gems||[]).forEach(a=>{e[a.stat]=(e[a.stat]||0)+a.value})}),e},R0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{if(!n.runewordActive)return;const a=$E.find(i=>i.id===n.runewordActive);if(a)for(const[i,o]of Object.entries(a.bonusStats))e[i]=(e[i]||0)+o}),e},UM=t=>t.runewordActive&&$E.find(e=>e.id===t.runewordActive)||null,ma=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Vu(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const M0e=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var I,R,A,T,k,F,O,$,B,G;const[i,o]=j.useState(!1),c=((I=t.gamification)==null?void 0:I.level)||1,d=((R=t.gamification)==null?void 0:R.xp)||0,h=((A=t.gamification)==null?void 0:A.currency)||0,p=c0(c),m=FE(t),x=t.enrolledClasses||(t.classType?[t.classType]:[]),y=((k=(T=t.gamification)==null?void 0:T.completedQuests)==null?void 0:k.length)||0,w=((O=(F=t.gamification)==null?void 0:F.activeQuests)==null?void 0:O.filter(Q=>Q.status==="ACCEPTED"||Q.status==="DEPLOYED").length)||0,N=j.useMemo(()=>x.map(Q=>{var ie,ne;const H=((ne=(ie=t.gamification)==null?void 0:ie.classXp)==null?void 0:ne[Q])||0,K=Vu(t,Q),te=u0(K.equipped),ae=K.inventory.length,ce=e.filter(ve=>{const pe=r.find(Be=>Be.id===ve.assignmentId);return(pe==null?void 0:pe.classType)===Q}),X=Math.round(ce.reduce((ve,pe)=>{var Be;return ve+(((Be=pe.metrics)==null?void 0:Be.engagementTime)||0)},0)/60);return{cls:Q,classXp:H,gearScore:te,inventoryCount:ae,resourcesViewed:ce.length,totalTime:X}}),[t,e,r,x]),S=j.useMemo(()=>{const Q=new Map;return e.forEach(H=>{var X,ie,ne,ve,pe,Be,Ge;const K=r.find(He=>He.id===H.assignmentId),te=H.assignmentId,ae=Q.get(te),ce=((X=H.metrics)==null?void 0:X.engagementTime)||0;ae?(ae.visits++,ae.totalTime+=ce,ae.totalKeystrokes+=((ie=H.metrics)==null?void 0:ie.keystrokes)||0,ae.totalClicks+=((ne=H.metrics)==null?void 0:ne.clickCount)||0,ae.totalPastes+=((ve=H.metrics)==null?void 0:ve.pasteCount)||0,ae.statuses.push(H.status),H.submittedAt&&(!ae.lastVisit||H.submittedAt>ae.lastVisit)&&(ae.lastVisit=H.submittedAt)):Q.set(te,{title:(K==null?void 0:K.title)||H.assignmentTitle,classType:(K==null?void 0:K.classType)||"Unknown",category:(K==null?void 0:K.category)||"Supplemental",visits:1,totalTime:ce,totalKeystrokes:((pe=H.metrics)==null?void 0:pe.keystrokes)||0,totalClicks:((Be=H.metrics)==null?void 0:Be.clickCount)||0,totalPastes:((Ge=H.metrics)==null?void 0:Ge.pasteCount)||0,lastVisit:H.submittedAt||null,statuses:[H.status]})}),Array.from(Q.values()).sort((H,K)=>K.totalTime-H.totalTime)},[e,r]),E=j.useMemo(()=>e.filter(Q=>Q.submittedAt).sort((Q,H)=>new Date(H.submittedAt).getTime()-new Date(Q.submittedAt).getTime()).slice(0,10).map(Q=>{var H,K;return{...Q,assignmentTitle:((H=r.find(te=>te.id===Q.assignmentId))==null?void 0:H.title)||Q.assignmentTitle,classType:((K=r.find(te=>te.id===Q.assignmentId))==null?void 0:K.classType)||"Unknown"}}),[e,r]),C=Math.round(e.reduce((Q,H)=>{var K;return Q+(((K=H.metrics)==null?void 0:K.engagementTime)||0)},0)/60),M=j.useMemo(()=>{const Q=new Set;e.forEach(X=>{if(X.submittedAt){const ie=new Date(X.submittedAt),ne=ie.getFullYear(),ve=new Date(ne,0,1),pe=Math.ceil(((ie.getTime()-ve.getTime())/864e5+ve.getDay()+1)/7);Q.add(`${ne}-W${pe}`)}});const H=new Date,K=H.getFullYear(),te=new Date(K,0,1),ae=Math.ceil(((H.getTime()-te.getTime())/864e5+te.getDay()+1)/7);let ce=0;for(let X=ae;X>0&&Q.has(`${K}-W${X}`);X--)ce++;return ce},[e]),L=j.useMemo(()=>{const Q=[],H=new Date;for(let ne=6;ne>=0;ne--){const ve=new Date(H);ve.setDate(ve.getDate()-ne);const pe=ve.toISOString().split("T")[0],Be=e.filter(He=>{var Ne;return(Ne=He.submittedAt)==null?void 0:Ne.startsWith(pe)}),Ge=Be.reduce((He,Ne)=>{var We;return He+(((We=Ne.metrics)==null?void 0:We.engagementTime)||0)},0);Q.push({label:ve.toLocaleDateString([],{weekday:"short"}),time:Math.round(Ge/60),subs:Be.length})}const K=Q.slice(4).reduce((ne,ve)=>ne+ve.time,0),te=Q.slice(0,4).reduce((ne,ve)=>ne+ve.time,0),ae=K/3,ce=te/4,X=ae>ce*1.2?"up":ae<ce*.6?"down":"flat",ie=Math.max(1,...Q.map(ne=>ne.time));return{days:Q,trend:X,maxTime:ie}},[e]);return yu.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),s.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:s.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?s.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):s.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),(($=t.gamification)==null?void 0:$.codename)&&s.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),s.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:s.jsx(Mn,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Gn,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(oo,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[C,"m"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Oa,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Cu,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:y}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(eT,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:h}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Ou,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[M,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),s.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([Q,H])=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:Q}),s.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,H)}%`}})}),s.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:H})]},Q))})]}),n.length>0&&(()=>{const Q=n[0],H=Wo[Q.bucket];return H?s.jsxs("div",{className:`border rounded-2xl p-4 ${H.borderColor} ${H.bgColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${H.color} border ${H.borderColor}`,children:H.label})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-3",children:H.description}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[s.jsxs("span",{children:["ES: ",Q.engagementScore]}),s.jsxs("span",{children:["Subs: ",Q.metrics.submissionCount]}),s.jsxs("span",{children:["Days Active: ",Q.metrics.activityDays,"/7"]}),s.jsxs("span",{children:["Paste Ratio: ",Math.round(Q.metrics.avgPasteRatio*100),"%"]}),s.jsxs("span",{children:["Time: ",Math.round(Q.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[s.jsx(eb,{className:"w-3.5 h-3.5 text-amber-400"}),s.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:Q.recommendation.action}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:Q.recommendation.categories.map(K=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:K},K))})]}),(()=>{const K=r.filter(te=>te.classType===Q.classType&&te.status==="ACTIVE"&&Q.recommendation.categories.includes(te.category||"Supplemental")).slice(0,3);return K.length===0?null:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),s.jsx("div",{className:"space-y-1",children:K.map(te=>s.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:te.category}),s.jsx("span",{className:"text-white truncate",children:te.title})]},te.id))})]})})()]}):null})(),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),s.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&s.jsx(nw,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&s.jsx(Jle,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&s.jsx(tw,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((Q,H)=>{const K=L.maxTime>0?Math.max(2,Q.time/L.maxTime*100):2,te=H===L.days.length-1;return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[s.jsx("div",{className:`w-full rounded-t transition-all ${Q.time>0?te?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${K}%`}}),s.jsx("span",{className:"text-[8px] text-gray-500",children:Q.label}),s.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[Q.time,"m  ",Q.subs," sub",Q.subs!==1?"s":""]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),s.jsx("div",{className:"space-y-3",children:N.map(Q=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:Q.cls}),s.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[Q.classXp.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[s.jsxs("span",{children:[s.jsx(cs,{className:"w-3 h-3 inline mr-0.5"}),Q.gearScore," GS"]}),s.jsxs("span",{children:[s.jsx(eT,{className:"w-3 h-3 inline mr-0.5"}),Q.inventoryCount," items"]}),s.jsxs("span",{children:[s.jsx(Oa,{className:"w-3 h-3 inline mr-0.5"}),Q.resourcesViewed," viewed"]}),s.jsxs("span",{children:[s.jsx(oo,{className:"w-3 h-3 inline mr-0.5"}),Q.totalTime,"m"]})]})]},Q.cls))})]}),S.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center justify-between w-full mb-1",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[s.jsx(qf,{className:"w-3.5 h-3.5"})," Resource Performance",s.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",S.length,")"]})]}),i?s.jsx(jx,{className:"w-4 h-4 text-gray-500"}):s.jsx(si,{className:"w-4 h-4 text-gray-500"})]}),i&&s.jsx("div",{className:"space-y-2 mt-3",children:S.map((Q,H)=>{const K=Math.round(Q.totalTime/60),te=Q.totalKeystrokes>20&&Q.totalClicks>5?"high":Q.totalClicks>2?"medium":"low",ae=te==="high"?"text-green-400":te==="medium"?"text-yellow-400":"text-red-400",ce=te==="high"?"bg-green-500":te==="medium"?"bg-yellow-500":"bg-red-500";return s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:Q.title}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[Q.classType,"  ",Q.category]})]}),s.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${ce}`,title:`${te} engagement`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Time"}),s.jsxs("div",{className:"text-white font-bold",children:[K,"m"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Visits"}),s.jsx("div",{className:"text-white font-bold",children:Q.visits})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Keys"}),s.jsx("div",{className:"text-white font-bold",children:Q.totalKeystrokes})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Quality"}),s.jsx("div",{className:`font-bold capitalize ${ae}`,children:te})]})]}),Q.lastVisit&&s.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(Q.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),E.length===0?s.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):s.jsx("div",{className:"space-y-2",children:E.map(Q=>{var K;const H=Math.round((((K=Q.metrics)==null?void 0:K.engagementTime)||0)/60);return s.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H>=5?"bg-green-500":H>=1?"bg-yellow-500":"bg-gray-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:Q.assignmentTitle}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[Q.classType,"  ",H,"m engaged"]})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:Q.submittedAt?new Date(Q.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},Q.id)})})]}),w>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),s.jsx("div",{className:"space-y-2",children:(G=(B=t.gamification)==null?void 0:B.activeQuests)==null?void 0:G.filter(Q=>Q.status==="ACCEPTED"||Q.status==="DEPLOYED").map(Q=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cu,{className:`w-3.5 h-3.5 ${Q.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),s.jsx("span",{className:"text-xs text-white",children:Q.questId})]}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${Q.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:Q.status})]},Q.questId))})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[s.jsxs("div",{children:["Email: ",t.email]}),s.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),s.jsxs("div",{children:["Enrolled: ",x.join(", ")||"None"]}),s.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),s.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&s.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},D0e=({students:t,isOpen:e,onClose:r})=>{const n=Ma(),[a,i]=j.useState(""),[o,c]=j.useState(null),[d,h]=j.useState(!1),p=iZ,m=j.useMemo(()=>a?t.filter(y=>y.name.toLowerCase().includes(a.toLowerCase())).slice(0,20):t.slice(0,20),[t,a]),x=async y=>{if(o){h(!0);try{await Ae.awardBehavior({studentId:o.id,studentName:o.name,categoryId:y.id,categoryName:y.name,xpAmount:y.xpAmount,fluxAmount:y.fluxAmount,classType:o.classType||"AP Physics",awardedBy:"admin",timestamp:new Date().toISOString()}),n.success(`${y.icon} +${y.xpAmount} XP awarded to ${o.name} for ${y.name}!`),c(null),i("")}catch{n.error("Failed to award.")}finally{h(!1)}}};return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:r,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl animate-in fade-in zoom-in-95 duration-300",onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(X2,{className:"w-5 h-5 text-amber-400"})," Quick Award"]}),s.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Mn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-5",children:o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-5 p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.avatarUrl?s.jsx("img",{src:o.avatarUrl,alt:"",className:"w-10 h-10 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-sm font-bold text-purple-400",children:o.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:o.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:o.classType})]}),s.jsx("button",{onClick:()=>c(null),className:"text-xs text-gray-500 hover:text-white transition",children:"Change"})]}),s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-3",children:"Select Behavior"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(y=>s.jsxs("button",{onClick:()=>x(y),disabled:d,className:`p-4 rounded-xl border text-left transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-40 bg-${y.color}-500/5 border-${y.color}-500/20 hover:border-${y.color}-500/40 hover:bg-${y.color}-500/10`,children:[s.jsx("div",{className:"text-2xl mb-1",children:y.icon}),s.jsx("div",{className:"text-sm font-bold text-white",children:y.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] text-purple-400 font-bold flex items-center gap-0.5",children:[s.jsx(Gn,{className:"w-2.5 h-2.5"}),y.xpAmount," XP"]}),s.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxAmount," Flux"]})]})]},y.id))})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Gf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search for a student...",value:a,onChange:y=>i(y.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 transition",autoFocus:!0})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar space-y-1",children:m.map(y=>s.jsxs("button",{onClick:()=>c(y),className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-left hover:bg-white/5 transition group",children:[y.avatarUrl?s.jsx("img",{src:y.avatarUrl,alt:"",className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs font-bold text-purple-400",children:y.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-white group-hover:text-amber-300 transition",children:y.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:y.classType})]})]},y.id))})]})})]})]}):null},P0e=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=Po(),[a,i]=j.useState(null),[o,c]=j.useState([]),[d,h]=j.useState([]),[p,m]=j.useState([]),[x,y]=j.useState([]),[w,N]=j.useState(Date.now()),[S,E]=j.useState(null),[C,M]=j.useState("xp"),[L,I]=j.useState("desc"),[R,A]=j.useState(""),[T,k]=j.useState(""),[F,O]=j.useState(!1),$=Y=>{C===Y?I(re=>re==="asc"?"desc":"asc"):(M(Y),I("asc"))},B=({label:Y,col:re,className:be})=>s.jsx("th",{className:`cursor-pointer select-none group p-3 ${be??""}`,onClick:()=>$(re),children:s.jsxs("div",{className:`flex items-center gap-1 ${be!=null&&be.includes("text-center")?"justify-center":be!=null&&be.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:Y}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(jx,{className:`w-2.5 h-2.5 -mb-0.5 ${C===re&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(si,{className:`w-2.5 h-2.5 -mt-0.5 ${C===re&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});j.useEffect(()=>{const Y=Ae.subscribeToChatFlags(c),re=Ae.subscribeToAnnouncements(h),be=Ae.subscribeToStudentAlerts(m),we=Ae.subscribeToStudentBuckets(y),Ye=setInterval(()=>N(Date.now()),6e4);return()=>{Y(),re(),be(),we(),clearInterval(Ye)}},[]);const G=t.filter(Y=>Y.role==="STUDENT"),Q=j.useMemo(()=>{const Y=new Set;return G.forEach(re=>{re.section&&Y.add(re.section)}),Array.from(Y).sort()},[G]),H=j.useMemo(()=>{const Y=new Map;for(const re of p){const be=Y.get(re.studentId),we={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!be||(we[re.riskLevel]||0)>(we[be.riskLevel]||0))&&Y.set(re.studentId,re)}return Y},[p]),K=j.useMemo(()=>{const Y=new Map;for(const re of x)Y.has(re.studentId)||Y.set(re.studentId,re);return Y},[x]),te=j.useMemo(()=>{const Y={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},re=new Set;for(const be of x)re.has(be.studentId)||(re.add(be.studentId),Y[be.bucket]!==void 0&&Y[be.bucket]++);return Y},[x]),ae=G.length,ce=Math.round(G.reduce((Y,re)=>{var be;return Y+(((be=re.stats)==null?void 0:be.totalTime)||0)},0)/(ae||1)),X=G.reduce((Y,re)=>{var be;return Y+(((be=re.stats)==null?void 0:be.problemsCompleted)||0)},0),ie=G.reduce((Y,re)=>{var be;return Y+(((be=re.gamification)==null?void 0:be.xp)||0)},0),ne=G.filter(Y=>Y.mutedUntil&&new Date(Y.mutedUntil).getTime()>w),ve=async Y=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Ae.muteUser(Y,0)},pe=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Ae.INDEFINITE_MUTE}],Be=async(Y,re)=>{await Ae.muteUser(Y,re),E(null)},Ge=async(Y,re)=>{const be=new Date(re).getTime(),we=new Date(Math.max(be,Date.now())+3600*1e3),Ye=Math.ceil((we.getTime()-Date.now())/6e4);await Ae.muteUser(Y,Ye)},He=({label:Y,value:re,icon:be,color:we})=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[s.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${we}`,children:be}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:re}),s.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:Y})]}),s.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${we}`})]}),Ne=Y=>{const be=new Date(Y).getTime()-w;if(be<=0)return"Expired";const we=Math.ceil(be/6e4);return we>60?`${Math.ceil(we/60)} hrs`:`${we} mins`},We=Y=>{if(!Y)return"Never";const re=new Date(Y),be=Date.now()-re.getTime(),we=Math.floor(be/6e4);if(we<1)return"Just now";if(we<60)return`${we}m ago`;const Ye=Math.floor(we/60);return Ye<24?`${Ye}h ago`:re.toLocaleDateString()};return s.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),s.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(He,{label:"Total Students",value:ae,icon:s.jsx(us,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),s.jsx(He,{label:"Total XP Awarded",value:ie.toLocaleString(),icon:s.jsx(Gn,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),s.jsx(He,{label:"Resources Viewed",value:X,icon:s.jsx(N0,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),s.jsx(He,{label:"Avg Active Time",value:`${ce}m`,icon:s.jsx(oo,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${o.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${o.length>0?"text-red-400":"text-white"}`,children:[o.length>0?s.jsx(Ls,{className:"w-5 h-5"}):s.jsx(rw,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${o.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:o.length>0?`${o.length} Issues`:"Secure"})]}),o.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(dc,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:o.map(Y=>s.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-white",children:[Y.senderName," ",s.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",Y.classType]})]}),s.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',Y.content,'"']})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(Y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:async()=>{await Ae.resolveFlag(Y.id),Y.messageId&&await Ae.unflagMessage(Y.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(Ao,{className:"w-3 h-3"})," Dismiss"]}),s.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Ae.resolveFlag(Y.id),Y.messageId&&await Ae.deleteMessage(Y.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(Fr,{className:"w-3 h-3"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>E(S===Y.id?null:Y.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:s.jsx(nb,{className:"w-3 h-3"})}),S===Y.id&&s.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",Y.senderName]}),pe.map(re=>s.jsx("button",{onClick:()=>Be(Y.senderId,re.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:re.label},re.minutes))]})]})]})]},Y.id))})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(nb,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),ne.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(us,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[s.jsx("th",{className:"pb-2",children:"Operative"}),s.jsx("th",{className:"pb-2",children:"Remaining"}),s.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:ne.map(Y=>s.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[s.jsxs("td",{className:"py-3",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:Y.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:Y.classType})]}),s.jsx("td",{className:"py-3",children:s.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:Ne(Y.mutedUntil)})}),s.jsx("td",{className:"py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Ge(Y.id,Y.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:s.jsx(ab,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>ve(Y.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:s.jsx(dc,{className:"w-3.5 h-3.5"})})]})})]},Y.id))})]})})]})]}),p.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(Jj,{className:"w-5 h-5"}),"Early Warning System"]}),s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(Y=>{const re={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},be={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},we=Y.bucket?Wo[Y.bucket]:null;return s.jsx("div",{className:`border p-4 rounded-xl ${re[Y.riskLevel]||re.LOW}`,children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${be[Y.riskLevel]||be.LOW}`,children:Y.riskLevel}),we&&s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${we.bgColor} ${we.color} ${we.borderColor} border`,children:we.label}),s.jsx("span",{className:"text-sm font-bold text-white truncate",children:Y.studentName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:Y.classType})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:Y.message}),we&&s.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:we.description}),s.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["ES: ",Y.engagementScore]}),s.jsxs("span",{children:["Class Avg: ",Y.classMean]}),s.jsx("span",{children:new Date(Y.createdAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{onClick:()=>i(Y.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),s.jsx("button",{onClick:async()=>{await Ae.dismissAlert(Y.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},Y.id)})})]}),x.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Jj,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),s.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[x.length," profile",x.length!==1?"s":""," across classes"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(Wo).map(Y=>{const re=Wo[Y],be=te[Y];return s.jsxs("div",{className:`border rounded-xl p-3 ${re.borderColor} ${re.bgColor} transition hover:scale-[1.02]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:`text-xs font-bold ${re.color}`,children:re.label}),s.jsx("span",{className:"text-lg font-bold text-white",children:be})]}),s.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:re.description})]},Y)})}),(()=>{const Y=Object.values(te).reduce((re,be)=>re+be,0);return Y===0?null:s.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(Wo).map(re=>{const be=te[re]/Y*100;if(be===0)return null;const we={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return s.jsx("div",{className:`${we[re]||"bg-gray-500"} transition-all`,style:{width:`${be}%`},title:`${Wo[re].label}: ${te[re]} (${Math.round(be)}%)`},re)})})})()]}),s.jsx("div",{className:"mt-8",children:s.jsx(_0e,{announcements:d,studentIds:G.map(Y=>Y.id),availableSections:Q})}),s.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Student Engagement Ranking"}),s.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(X2,{className:"w-3.5 h-3.5"})," Quick Award"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Gf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:R,onChange:Y=>A(Y.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("select",{value:T,onChange:Y=>k(Y.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{value:"",children:"All Buckets"}),Object.keys(Wo).map(Y=>s.jsx("option",{value:Y,children:Wo[Y].label},Y))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[s.jsx(B,{label:"Student",col:"name"}),s.jsx(B,{label:"Class",col:"class"}),s.jsx(B,{label:"Last Seen",col:"lastSeen",className:"text-center"}),s.jsx(B,{label:"Total Time",col:"time",className:"text-center"}),s.jsx(B,{label:"Resources",col:"resources",className:"text-center"}),s.jsx(B,{label:"XP",col:"xp",className:"text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const re=[...G.filter(we=>{var Ot;const Ye=!R||we.name.toLowerCase().includes(R.toLowerCase())||we.email.toLowerCase().includes(R.toLowerCase()),nt=!T||((Ot=K.get(we.id))==null?void 0:Ot.bucket)===T;return Ye&&nt})].sort((we,Ye)=>{var nt,Ot,Ee,ut,Nt,wt,zt,de;switch(C){case"name":return L==="asc"?we.name.localeCompare(Ye.name):Ye.name.localeCompare(we.name);case"class":return L==="asc"?(we.classType||"").localeCompare(Ye.classType||""):(Ye.classType||"").localeCompare(we.classType||"");case"lastSeen":{const Fe=we.lastLoginAt?new Date(we.lastLoginAt).getTime():0,jt=Ye.lastLoginAt?new Date(Ye.lastLoginAt).getTime():0;return L==="asc"?Fe-jt:jt-Fe}case"time":{const Fe=((nt=we.stats)==null?void 0:nt.totalTime)||0,jt=((Ot=Ye.stats)==null?void 0:Ot.totalTime)||0;return L==="asc"?Fe-jt:jt-Fe}case"resources":{const Fe=((Ee=we.stats)==null?void 0:Ee.problemsCompleted)||0,jt=((ut=Ye.stats)==null?void 0:ut.problemsCompleted)||0;return L==="asc"?Fe-jt:jt-Fe}case"xp":default:{const Fe=((wt=(Nt=we.gamification)==null?void 0:Nt.classXp)==null?void 0:wt[we.classType||""])||0,jt=((de=(zt=Ye.gamification)==null?void 0:zt.classXp)==null?void 0:de[Ye.classType||""])||0;return L==="asc"?Fe-jt:jt-Fe}}}),be=Math.max(1,...G.map(we=>{var Ye,nt;return((nt=(Ye=we.gamification)==null?void 0:Ye.classXp)==null?void 0:nt[we.classType||""])||0}));return re.map(we=>{var jt,qe,Ze,At;const Ye=((qe=(jt=we.gamification)==null?void 0:jt.classXp)==null?void 0:qe[we.classType||""])||0,nt=Math.round(Ye/be*100),Ot=we.lastLoginAt,Ee=Ot?Date.now()-new Date(Ot).getTime():1/0,ut=Ee<36e5?"text-green-400":Ee<864e5?"text-yellow-400":Ee<1/0?"text-red-400":"text-gray-600",Nt=Ee<36e5?"bg-green-500":Ee<864e5?"bg-yellow-500":Ee<1/0?"bg-red-500":"bg-gray-600",wt=H.get(we.id),zt={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},de=K.get(we.id),Fe=de?Wo[de.bucket]:null;return s.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(wt==null?void 0:wt.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(we.id),children:[s.jsx("td",{className:"p-3 font-bold text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[we.avatarUrl?s.jsx("img",{src:we.avatarUrl,alt:we.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:we.name.charAt(0)}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Nt}`})]}),s.jsx("span",{className:"truncate max-w-[120px]",children:we.name}),wt&&zt[wt.riskLevel]&&s.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${zt[wt.riskLevel]}`,title:`${wt.riskLevel} risk: ${wt.reason}`}),Fe&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${Fe.bgColor} ${Fe.color} border ${Fe.borderColor}`,title:Fe.description,children:Fe.label})]})}),s.jsx("td",{className:"p-3 text-sm text-gray-400",children:we.classType}),s.jsx("td",{className:`p-3 text-center text-xs font-mono ${ut}`,children:We(we.lastLoginAt)}),s.jsxs("td",{className:"p-3 text-center text-white",children:[((Ze=we.stats)==null?void 0:Ze.totalTime)||0,"m"]}),s.jsx("td",{className:"p-3 text-center text-white",children:((At=we.stats)==null?void 0:At.problemsCompleted)||0}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${nt}%`}})}),s.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Ye})]})})]},we.id)})})()})]})})]}),a&&(()=>{const Y=G.find(re=>re.id===a);return Y?s.jsx(M0e,{student:Y,submissions:r.filter(re=>re.userId===a),assignments:e,bucketProfiles:x.filter(re=>re.studentId===a),onClose:()=>i(null)}):null})(),s.jsx(D0e,{students:G,isOpen:F,onClose:()=>O(!1)})]})},L0e=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=Ma(),{confirm:i}=Po(),[o,c]=j.useState(new Set),[d,h]=j.useState(Tr.AP_PHYSICS),[p,m]=j.useState(!1),[x,y]=j.useState(!1),[w,N]=j.useState({}),S=(ye,it)=>{N(xt=>{const Dt=xt[ye]||{col:"name",dir:"asc"};return{...xt,[ye]:{col:it,dir:Dt.col===it&&Dt.dir==="asc"?"desc":"asc"}}})},E=({label:ye,col:it,type:xt,className:Dt})=>{const Pt=w[xt]||{col:"name",dir:"asc"},rt=Pt.col===it;return s.jsx("th",{className:`cursor-pointer select-none group p-4 ${Dt??""}`,onClick:()=>S(xt,it),children:s.jsxs("div",{className:`flex items-center gap-1 ${Dt!=null&&Dt.includes("text-center")?"justify-center":"justify-start"}`,children:[s.jsx("span",{children:ye}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(jx,{className:`w-2.5 h-2.5 -mb-0.5 ${rt&&Pt.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(si,{className:`w-2.5 h-2.5 -mt-0.5 ${rt&&Pt.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[C,M]=j.useState(""),[L,I]=j.useState(Tr.AP_PHYSICS),[R,A]=j.useState(""),[T,k]=j.useState(""),[F,O]=j.useState(!1),[$,B]=j.useState(!1),[G,Q]=j.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[H,K]=j.useState(10),[te,ae]=j.useState("single"),[ce,X]=j.useState([]),[ie,ne]=j.useState(!1),ve=j.useRef(null),[pe,Be]=j.useState(null),[Ge,He]=j.useState(""),[Ne,We]=j.useState(""),Y=t.filter(ye=>ye.role==="STUDENT"),re=j.useMemo(()=>{const ye=new Set;return Y.forEach(it=>{it.classSections&&Object.values(it.classSections).forEach(xt=>{xt&&ye.add(xt)}),it.section&&ye.add(it.section)}),Array.from(ye).sort()},[Y]),be=async(ye,it,xt)=>{try{xt?await Ae.updateUserClassSection(ye,xt,it):await Ae.updateUserSection(ye,it),Be(null),He(""),We(""),a.success(`Section updated to ${it||"none"}${xt?` for ${xt}`:""}`)}catch{a.error("Failed to update section")}},we=async ye=>{if(o.size!==0)try{await Promise.all(Array.from(o).map(it=>Ae.updateUserSection(it,ye))),c(new Set),a.success(`Set ${o.size} students to ${ye}`)}catch{a.error("Failed to bulk update sections")}},Ye=j.useMemo(()=>e.filter(ye=>!t.some(it=>it.email.toLowerCase()===ye.email.toLowerCase())),[e,t]),nt=j.useMemo(()=>[...Array.from(new Set([...Object.values(Tr).filter(it=>it!==Tr.UNCATEGORIZED),...r.map(it=>it.className)])).sort(),Tr.UNCATEGORIZED],[r]),Ot=ye=>{const it=Y.filter(Pt=>{var rt,Le;return((rt=Pt.enrolledClasses)==null?void 0:rt.includes(ye))||ye===Tr.UNCATEGORIZED&&(((Le=Pt.enrolledClasses)==null?void 0:Le.length)===0||!Pt.enrolledClasses)}),xt=it.every(Pt=>o.has(Pt.id)),Dt=new Set(o);it.forEach(Pt=>{xt?Dt.delete(Pt.id):Dt.add(Pt.id)}),c(Dt)},Ee=ye=>{const it=new Set(o);it.has(ye)?it.delete(ye):it.add(ye),c(it)},ut=async()=>{if(o.size>0){const ye=Array.from(o).map(async it=>{const xt=t.find(Dt=>Dt.id===it);if(xt){const Dt=xt.enrolledClasses||[],Pt=Array.from(new Set([...Dt.filter(rt=>rt!==Tr.UNCATEGORIZED),d]));await Ae.updateUserEnrolledClasses(it,Pt)}});await Promise.all(ye),c(new Set)}},Nt=async ye=>{if(o.size>0){if(!await i({message:`Remove ${o.size} students from ${ye}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const it=Array.from(o).map(async xt=>{const Dt=t.find(Pt=>Pt.id===xt);if(Dt){const rt=(Dt.enrolledClasses||[]).filter(Le=>Le!==ye);await Ae.updateUserEnrolledClasses(xt,rt)}});await Promise.all(it),c(new Set)}},wt=async(ye,it)=>{if(await i({message:`Remove ${ye.name} from ${it}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Dt=(ye.enrolledClasses||[]).filter(Pt=>Pt!==it);await Ae.updateUserEnrolledClasses(ye.id,Dt)}},zt=async(ye,it)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${it}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Ae.removeUser(ye)},de=async ye=>{ye!==Tr.UNCATEGORIZED&&await i({message:`Delete group config ${ye}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Ae.deleteClassConfig(ye)},Fe=async ye=>{await i({message:`Cancel invite for ${ye}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Ae.removeFromWhitelist(ye)},jt=(ye,it)=>{ye!==Tr.UNCATEGORIZED&&(k(ye),O(!0),it?(Q(it.features),K(it.xpPerMinute||10)):(Q({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),K(10)),y(!0))},qe=ye=>{ye.preventDefault(),n(C,L),R.trim()&&Ae.updateWhitelistSection(C,R.trim()),M(""),A(""),m(!1)},Ze=ye=>{var Dt;const it=(Dt=ye.target.files)==null?void 0:Dt[0];if(!it)return;const xt=new FileReader;xt.onload=Pt=>{var Qt,Gt;const rt=(Qt=Pt.target)==null?void 0:Qt.result;if(!rt)return;const Le=rt.split(/\r?\n/).filter(Et=>Et.trim()),et=(Gt=Le[0])!=null&&Gt.toLowerCase().includes("email")?1:0,lt=new Set(e.map(Et=>Et.email.toLowerCase())),Ft=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Wt=Le.slice(et).map(Et=>{const Hr=Et.includes("	")?Et.split("	"):Et.split(","),un=(Hr[0]||"").trim().toLowerCase(),gn=(Hr[1]||"").trim()||Tr.AP_PHYSICS,Dr=(Hr[2]||"").trim();let kn="pending";return Ft.test(un)?lt.has(un)&&(kn="duplicate"):kn="invalid",{email:un,classType:gn,section:Dr,status:kn}}).filter(Et=>Et.email.length>0);X(Wt)},xt.readAsText(it),ye.target.value=""},At=async()=>{const ye=ce.filter(xt=>xt.status==="pending");if(ye.length===0)return;ne(!0);let it=0;for(const xt of ye)try{await Ae.addToWhitelist(xt.email,xt.classType),xt.section&&await Ae.updateWhitelistSection(xt.email,xt.section),xt.status="success",it++}catch{xt.status="invalid"}X([...ce]),ne(!1),a.success(`${it} operative${it!==1?"s":""} imported successfully.`),ce.every(xt=>xt.status==="success"||xt.status==="duplicate")&&setTimeout(()=>{m(!1),X([]),ae("single")},1500)},St=async ye=>{if(ye.preventDefault(),!!T){B(!0);try{await Ae.saveClassConfig({id:T,className:T,features:G,xpPerMinute:H}),k(""),y(!1),O(!1)}catch(it){console.error("Failed to save config:",it),a.error("Failed to save class configuration.")}finally{B(!1)}}},lr=ye=>{const it=ye===Tr.UNCATEGORIZED,xt=w[ye]||{col:"name",dir:"asc"},Dt=[...Y.filter(rt=>{var Le;return((Le=rt.enrolledClasses)==null?void 0:Le.includes(ye))||it&&(!rt.enrolledClasses||rt.enrolledClasses.length===0)})].sort((rt,Le)=>{var et,lt,Ft,Wt;switch(xt.col){case"section":{const Qt=rt.section||"",Gt=Le.section||"";return xt.dir==="asc"?Qt.localeCompare(Gt):Gt.localeCompare(Qt)}case"status":{const Qt=rt.isWhitelisted?1:0,Gt=Le.isWhitelisted?1:0;return xt.dir==="asc"?Qt-Gt:Gt-Qt}case"lastSeen":{const Qt=rt.lastLoginAt?new Date(rt.lastLoginAt).getTime():0,Gt=Le.lastLoginAt?new Date(Le.lastLoginAt).getTime():0;return xt.dir==="asc"?Qt-Gt:Gt-Qt}case"xp":{const Qt=((lt=(et=rt.gamification)==null?void 0:et.classXp)==null?void 0:lt[ye])||0,Gt=((Wt=(Ft=Le.gamification)==null?void 0:Ft.classXp)==null?void 0:Wt[ye])||0;return xt.dir==="asc"?Qt-Gt:Gt-Qt}case"name":default:return xt.dir==="asc"?rt.name.localeCompare(Le.name):Le.name.localeCompare(rt.name)}}),Pt=r.find(rt=>rt.className===ye);return s.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${it?"opacity-90":""}`,children:[s.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${it?"bg-orange-500/10":"bg-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:`font-bold text-lg tracking-wide ${it?"text-orange-300":"text-white"}`,children:[it&&s.jsx(Y2,{className:"w-5 h-5 inline mr-2 mb-1"}),ye]}),s.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${it?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Dt.length," Registered"]}),!it&&s.jsx("button",{onClick:()=>jt(ye,Pt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:s.jsx(l0,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[o.size>0&&Array.from(o).some(rt=>Dt.find(Le=>Le.id===rt))&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("select",{onChange:rt=>{rt.target.value&&we(rt.target.value),rt.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),s.jsx("option",{value:"",children:"No Section"}),re.map(rt=>s.jsx("option",{value:rt,children:rt},rt))]})}),s.jsxs("button",{onClick:()=>Nt(ye),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[s.jsx(rce,{className:"w-3 h-3"})," Remove Selected"]})]}),!it&&s.jsxs("button",{onClick:()=>de(ye),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[s.jsx(Fr,{className:"w-3 h-3"}),"Config"]})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[s.jsx("th",{className:"w-12 p-4 text-center",children:Dt.length>0&&s.jsx("button",{onClick:()=>Ot(ye),className:"hover:text-purple-400 transition",children:s.jsx($R,{className:"w-4 h-4"})})}),s.jsx(E,{label:"Operative",col:"name",type:ye}),s.jsx(E,{label:"Section",col:"section",type:ye,className:"text-center"}),s.jsx(E,{label:"System Status",col:"status",type:ye,className:"text-center"}),s.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Dt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 italic text-sm",children:it?"No restricted operatives found.":"No students registered in this roster yet."})}):Dt.map(rt=>{var Le;return s.jsxs("tr",{className:`hover:bg-white/5 transition group ${o.has(rt.id)?"bg-purple-500/10":""}`,children:[s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>Ee(rt.id),className:"text-gray-500 hover:text-purple-400 transition",children:o.has(rt.id)?s.jsx(Xle,{className:"w-4 h-4 text-purple-500"}):s.jsx($R,{className:"w-4 h-4 group-hover:text-gray-400"})})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:rt.avatarUrl,alt:rt.name,className:"w-8 h-8 rounded-full border border-white/10"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:rt.name}),s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:rt.email})]})]})}),s.jsx("td",{className:"p-4 text-center",children:pe===rt.id?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((Le=rt.enrolledClasses)!=null&&Le.length?rt.enrolledClasses:[rt.classType].filter(Boolean)).map(et=>{var Ft;if(!et)return null;const lt=((Ft=rt.classSections)==null?void 0:Ft[et])||(rt.section&&rt.classType===et?rt.section:"");return s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:et,children:et}),s.jsxs("select",{value:lt,onChange:Wt=>{const Qt=Wt.target.value;Qt==="__custom__"?(He("__custom__"),We("")):be(rt.id,Qt,et)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[s.jsx("option",{value:"",children:"None"}),re.map(Wt=>s.jsx("option",{value:Wt,children:Wt},Wt)),s.jsx("option",{value:"__custom__",children:"+ New"})]})]},et)}),Ge==="__custom__"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{value:Ne,onChange:et=>We(et.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:et=>{var lt;if(et.key==="Enter"&&Ne.trim()){const Ft=(lt=rt.enrolledClasses)!=null&&lt.length?rt.enrolledClasses:[rt.classType].filter(Boolean);Ft[0]&&be(rt.id,Ne.trim(),Ft[0])}},autoFocus:!0}),s.jsx("button",{onClick:()=>{var et;if(Ne.trim()){const lt=(et=rt.enrolledClasses)!=null&&et.length?rt.enrolledClasses:[rt.classType].filter(Boolean);lt[0]&&be(rt.id,Ne.trim(),lt[0])}},className:"text-green-400 hover:text-green-300 p-1",children:s.jsx(cn,{className:"w-3 h-3"})})]}),s.jsx("button",{onClick:()=>{Be(null),He(""),We("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):s.jsx("button",{onClick:()=>{Be(rt.id),He(""),We("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${rt.classSections&&Object.keys(rt.classSections).length>0||rt.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:rt.classSections&&Object.keys(rt.classSections).length>0?Object.values(rt.classSections).filter(Boolean).join(", ")||"Assign":rt.section||"Assign"})}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${rt.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[rt.isWhitelisted?s.jsx(LR,{className:"w-3 h-3"}):s.jsx(rw,{className:"w-3 h-3"}),rt.isWhitelisted?"Authorized":"Restricted"]})}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx("button",{onClick:()=>it?zt(rt.id,rt.name):wt(rt,ye),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:it?"Permanently Delete":"Remove from this Class",children:s.jsx(Mn,{className:"w-4 h-4"})})})})]},rt.id)})})]})})]},ye)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),s.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{k(""),Q({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),O(!1),y(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[s.jsx(l0,{className:"w-4 h-4"}),"Class Config"]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[s.jsx(ib,{className:"w-4 h-4"}),"Invite Student"]})]})]}),Ye.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Lle,{className:"w-4 h-4"})," Pending Class Invitations (",Ye.length,")"]}),s.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),s.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Ye.map(ye=>s.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:ye.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(LR,{className:"w-3 h-3 text-amber-500"}),s.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(ye.classTypes||[ye.classType]).join(", ")," Access"]})]})]}),s.jsx("button",{onClick:()=>Fe(ye.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},ye.email))})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:d,onChange:ye=>h(ye.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:nt.filter(ye=>ye!==Tr.UNCATEGORIZED).map(ye=>s.jsxs("option",{value:ye,children:["Apply ",ye," Access"]},ye))}),s.jsx(si,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),s.jsxs("button",{onClick:ut,disabled:o.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[s.jsx(cn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),s.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[o.size," SELECTION ACTIVE"]})]}),s.jsx("div",{className:"pb-12",children:nt.map(ye=>lr(ye))}),s.jsxs(Bi,{isOpen:p,onClose:()=>{m(!1),X([]),ae("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[s.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[s.jsxs("button",{onClick:()=>{ae("single"),X([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${te==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(ib,{className:"w-3.5 h-3.5"})," Single"]}),s.jsxs("button",{onClick:()=>ae("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${te==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(Bu,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),te==="single"?s.jsxs("form",{onSubmit:qe,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),s.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:C,onChange:ye=>M(ye.target.value),placeholder:"student@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),s.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:ye=>I(ye.target.value),children:nt.filter(ye=>ye!==Tr.UNCATEGORIZED).map(ye=>s.jsx("option",{value:ye,children:ye},ye))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),s.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:R,onChange:ye=>A(ye.target.value),placeholder:"e.g. Period 3, Block A"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[s.jsx("input",{type:"file",ref:ve,accept:".csv,.tsv,.txt",onChange:Ze,className:"hidden"}),ce.length===0?s.jsxs(s.Fragment,{children:[s.jsx(Bu,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),s.jsx("button",{onClick:()=>{var ye;return(ye=ve.current)==null?void 0:ye.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",s.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),s.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:s.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",s.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",s.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",s.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(N0,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm font-bold text-white",children:[ce.length," records parsed"]}),s.jsx("button",{onClick:()=>{X([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),ce.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[s.jsx("th",{className:"p-2 pl-3",children:"Email"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Section"}),s.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:ce.map((ye,it)=>s.jsxs("tr",{className:ye.status==="invalid"?"bg-red-500/5":ye.status==="duplicate"?"bg-yellow-500/5":ye.status==="success"?"bg-green-500/5":"",children:[s.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:ye.email}),s.jsx("td",{className:"p-2 text-gray-400",children:ye.classType}),s.jsx("td",{className:"p-2 text-gray-500",children:ye.section||""}),s.jsx("td",{className:"p-2 pr-3 text-right",children:s.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${ye.status==="pending"?"bg-blue-500/20 text-blue-400":ye.status==="success"?"bg-green-500/20 text-green-400":ye.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:ye.status})})]},it))})]})}),s.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("span",{className:"text-blue-400",children:[ce.filter(ye=>ye.status==="pending").length," ready"]}),s.jsxs("span",{className:"text-yellow-400",children:[ce.filter(ye=>ye.status==="duplicate").length," duplicates"]}),s.jsxs("span",{className:"text-red-400",children:[ce.filter(ye=>ye.status==="invalid").length," invalid"]}),ce.some(ye=>ye.status==="success")&&s.jsxs("span",{className:"text-green-400",children:[ce.filter(ye=>ye.status==="success").length," imported"]})]})}),ce.filter(ye=>ye.status==="duplicate").length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[s.jsx(Ls,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),s.jsx("button",{onClick:At,disabled:ie||ce.filter(ye=>ye.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ie?s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"w-4 h-4 animate-spin"})," Importing..."]}):s.jsxs(s.Fragment,{children:["Import ",ce.filter(ye=>ye.status==="pending").length," Operatives"]})})]})]})]}),s.jsx(Bi,{isOpen:x,onClose:()=>y(!1),title:F?"Edit Class Node Config":"Initialize New Class Node",children:s.jsxs("form",{onSubmit:St,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:T,onChange:ye=>k(ye.target.value),placeholder:"e.g. AP Physics Period 4"}),F&&s.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsLab,onChange:ye=>Q({...G,physicsLab:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.evidenceLocker,onChange:ye=>Q({...G,evidenceLocker:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.leaderboard,onChange:ye=>Q({...G,leaderboard:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsTools,onChange:ye=>Q({...G,physicsTools:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.communications,onChange:ye=>Q({...G,communications:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"number",min:1,max:100,value:H,onChange:ye=>K(Math.max(1,Math.min(100,parseInt(ye.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),s.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),s.jsx("button",{type:"submit",disabled:$,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${$?"opacity-70 cursor-not-allowed":""}`,children:$?s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):F?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},ou={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},VM={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},B0e=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,$0e=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,z0e=({assignment:t,isOpen:e,onClose:r})=>{const n=Ma(),a=j.useRef(null),[i,o]=j.useState([]),[c,d]=j.useState(!0),[h,p]=j.useState(!1),[m,x]=j.useState(t.category==="Practice Set"?"reading":"manage"),[y,w]=j.useState(null),[N,S]=j.useState(null),[E,C]=j.useState(""),[M,L]=j.useState(null),[I,R]=j.useState(!1),[A,T]=j.useState(null),[k,F]=j.useState({}),[O,$]=j.useState(null),[B,G]=j.useState(!0),[Q,H]=j.useState(null),[K,te]=j.useState(null),[ae,ce]=j.useState(null),[X,ie]=j.useState(!1),ne=j.useRef(null),ve=t.category==="Practice Set";j.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const ut=await ga(ct(Oe,"question_banks",t.id));ut.exists()?o(ut.data().questions||[]):o([]);const Nt=await ga(ct(Oe,"reading_materials",t.id));Nt.exists()?H(Nt.data()):H(null)}catch(ut){console.error("Failed to load bank:",ut),o([])}finally{d(!1)}})()},[e,t.id]);const pe=async Ee=>{p(!0);try{await ea(ct(Oe,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Ee,questionCount:Ee.length,updatedAt:new Date().toISOString()}),o(Ee)}catch(ut){n.error("Failed to save: "+(ut instanceof Error?ut.message:"Unknown error"))}finally{p(!1)}},Be=async Ee=>{const ut=i.filter(Nt=>Nt.id!==Ee);await pe(ut),n.success("Question removed."),M===Ee&&L(null)},Ge=async()=>{try{await Va(ct(Oe,"question_banks",t.id)),o([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},He=()=>{navigator.clipboard.writeText(B0e(t.title,t.classType,t.description)),R(!0),setTimeout(()=>R(!1),2e3),n.success("Prompt copied!")},Ne=()=>{navigator.clipboard.writeText($0e(t.title,t.classType,t.description)),ie(!0),setTimeout(()=>ie(!1),2e3),n.success("Reading prompt copied!")},We=async Ee=>{var Nt;const ut=(Nt=Ee.target.files)==null?void 0:Nt[0];if(ut){ce(null),te(null);try{let zt=(await ut.text()).replace(/```json\s*|```\s*/g,"").trim();zt=zt.replace(/[\x00-\x1F\x7F]/g,jt=>jt===`
`||jt==="\r"||jt==="	"?" ":"");let de;try{de=JSON.parse(zt)}catch{const jt=zt.match(/\{[\s\S]*\}/);if(jt)de=JSON.parse(jt[0]);else throw new Error("No JSON object found.")}if(!de.title||!de.sections||!Array.isArray(de.sections))throw new Error("Missing required fields: title and sections array.");const Fe=de.sections.filter(jt=>!jt.title||!jt.content);if(Fe.length>0)throw new Error(`${Fe.length} section(s) missing title or content.`);te(de)}catch(wt){ce(wt instanceof Error?wt.message:"Parse failed.")}ne.current&&(ne.current.value="")}},Y=async()=>{if(K){p(!0);try{await ea(ct(Oe,"reading_materials",t.id),{...K,assignmentId:t.id,updatedAt:new Date().toISOString()}),H(K),te(null),n.success(`Study material uploaded: ${K.sections.length} sections!`)}catch(Ee){n.error("Failed to save: "+(Ee instanceof Error?Ee.message:"Unknown error"))}finally{p(!1)}}},re=async()=>{p(!0);try{await Va(ct(Oe,"reading_materials",t.id)),H(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},be=async Ee=>{var Nt;const ut=(Nt=Ee.target.files)==null?void 0:Nt[0];if(ut){$(null),T(null);try{let zt=(await ut.text()).replace(/```json\s*|```\s*/g,"").trim();zt=zt.replace(/[\x00-\x1F\x7F]/g,Ze=>Ze===`
`||Ze==="\r"||Ze==="	"?" ":"");let de;try{de=JSON.parse(zt)}catch{const Ze=zt.match(/\[[\s\S]*\]/);if(Ze)try{de=JSON.parse(Ze[0])}catch{const At=Ze[0];let St=null;for(let lr=At.length-1;lr>0;lr--)if(At[lr]==="}")try{St=JSON.parse(At.slice(0,lr+1)+"]");break}catch{}if(St)de=St;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let At=null;const St="["+zt;for(let lr=St.length-1;lr>0;lr--)if(St[lr]==="}")try{At=JSON.parse(St.slice(0,lr+1)+"]");break}catch{}if(At)de=At;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(de)||de.length===0)throw new Error("Must be a non-empty JSON array.");const Fe=de.filter(Ze=>Ze.id&&Ze.tier&&Ze.type&&Ze.stem&&Ze.options&&Ze.correctAnswer),jt=de.length-Fe.length;if(Fe.length===0){$("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const qe={};Fe.forEach(Ze=>{const At=Ze.tier;qe[At]=(qe[At]||0)+1}),T(Fe),F(qe),jt>0&&n.success(`Parsed ${Fe.length} questions (${jt} skipped  missing fields).`)}catch(wt){$(wt instanceof Error?wt.message:"Parse failed.")}a.current&&(a.current.value="")}},we=async()=>{if(!A)return;let Ee;if(B&&i.length>0){const ut=new Set(i.map(wt=>wt.id)),Nt=A.map((wt,zt)=>({...wt,id:ut.has(wt.id)?`${wt.id}_${Date.now()}_${zt}`:wt.id}));Ee=[...i,...Nt]}else Ee=A;await pe(Ee),n.success(`${B?"Added":"Replaced with"} ${A.length} questions. Total: ${Ee.length}`),T(null),x("manage")},Ye=j.useMemo(()=>{let Ee=i;if(y&&(Ee=Ee.filter(ut=>ut.tier===y)),N&&(Ee=Ee.filter(ut=>ut.type===N)),E){const ut=E.toLowerCase();Ee=Ee.filter(Nt=>Nt.stem.toLowerCase().includes(ut)||Nt.id.toLowerCase().includes(ut))}return Ee},[i,y,N,E]),nt=j.useMemo(()=>{const Ee={1:0,2:0,3:0};return i.forEach(ut=>{Ee[ut.tier]=(Ee[ut.tier]||0)+1}),Ee},[i]),Ot=j.useMemo(()=>{const Ee={};return i.forEach(ut=>{Ee[ut.type]=(Ee[ut.type]||0)+1}),Ee},[i]);return e?s.jsx(Bi,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:s.jsxs("div",{className:"text-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[s.jsx(Mh,{className:"w-5 h-5 text-purple-400 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),s.jsx("div",{className:"text-xs mt-1",children:c?s.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?s.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):s.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&s.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Ee=>s.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${ou[Ee].bg} ${ou[Ee].border} border`,children:[s.jsx("div",{className:`text-sm font-bold ${ou[Ee].text}`,children:nt[Ee]}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Ee]})]},Ee))})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[!ve&&s.jsxs("button",{onClick:()=>x("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Mh,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!ve&&s.jsxs("button",{onClick:()=>x("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(cn,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),s.jsxs("button",{onClick:()=>x("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Oa,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",Q?`(${Q.sections.length})`:""]})]}),m==="manage"&&s.jsx("div",{className:"space-y-3",children:c?s.jsx("div",{className:"py-12 text-center",children:s.jsx(ki,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx(Mh,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[s.jsx(Gf,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{value:E,onChange:Ee=>C(Ee.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>w(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${y?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Ee=>s.jsxs("button",{onClick:()=>w(y===Ee?null:Ee),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${y===Ee?`${ou[Ee].bg} ${ou[Ee].text} ${ou[Ee].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Ee," (",nt[Ee],")"]},Ee))]})]}),Object.keys(Ot).length>1&&s.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Ot).sort((Ee,ut)=>ut[1]-Ee[1]).map(([Ee,ut])=>s.jsxs("button",{onClick:()=>S(N===Ee?null:Ee),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${N===Ee?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[VM[Ee]||Ee," (",ut,")"]},Ee))}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:Ye.length===0?s.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):Ye.map(Ee=>{const ut=ou[Ee.tier]||ou[1],Nt=M===Ee.id;return s.jsxs("div",{className:`rounded-xl border transition ${Nt?`${ut.border} ${ut.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>L(Nt?null:Ee.id),children:[s.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${ut.bg} ${ut.text}`,children:["T",Ee.tier]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[s.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Ee.id}),s.jsx("span",{className:"text-[8px] text-gray-600",children:""}),s.jsx("span",{className:"text-[8px] text-gray-500",children:VM[Ee.type]||Ee.type}),s.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(Gn,{className:"w-2.5 h-2.5"}),Ee.xp]})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Ee.stem})]}),s.jsx(ao,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${Nt?"rotate-90":""}`})]}),Nt&&s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Ee.context&&s.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Ee.context}),s.jsx("div",{className:"space-y-1",children:Ee.options.map(wt=>{const zt=Array.isArray(Ee.correctAnswer)?Ee.correctAnswer.includes(wt.id):Ee.correctAnswer===wt.id;return s.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${zt?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[s.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[wt.id.toUpperCase(),"."]}),s.jsx("span",{children:wt.text}),zt&&s.jsx($r,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},wt.id)})}),s.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Ee.explanation]}),Ee.linkedFollowUp&&s.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold",children:"Follow-up: "}),Ee.linkedFollowUp.stem]}),s.jsxs("button",{onClick:()=>Be(Ee.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[s.jsx(Fr,{className:"w-3 h-3"})," Delete Question"]})]})]},Ee.id)})}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[s.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",Ye.length," of ",i.length]}),s.jsxs("button",{onClick:Ge,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(Fr,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),s.jsx("button",{onClick:He,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${I?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:I?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(nf,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",s.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[s.jsx(Zv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:be,className:"hidden"})]})]}),O&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Ls,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:O})]}),A&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-emerald-400"}),s.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[A.length," questions parsed"]})]}),s.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Ee=>s.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[s.jsx("div",{className:"text-base font-bold text-white",children:k[Ee]||0}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Ee]})]},Ee))}),i.length>0&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>G(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[s.jsx(cn,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",A.length,")"]}),s.jsxs("button",{onClick:()=>G(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[s.jsx(so,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:we,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(ki,{className:"w-4 h-4 animate-spin"}):s.jsx(Bu,{className:"w-4 h-4"}),h?"Saving...":`Upload ${A.length} Questions`]}),s.jsx("button",{onClick:()=>T(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(Fr,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&s.jsxs("div",{className:"space-y-5",children:[Q?s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oa,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Q.title})]}),s.jsxs("button",{onClick:re,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(Fr,{className:"w-3 h-3"})," Remove"]})]}),Q.description&&s.jsx("p",{className:"text-xs text-gray-400",children:Q.description}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:[Q.sections.length," sections"]}),Q.estimatedMinutes&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["~",Q.estimatedMinutes," min read"]})]})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:Q.sections.map((Ee,ut)=>s.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:ut+1}),s.jsx("span",{className:"truncate",children:Ee.title})]},ut))})]}):s.jsxs("div",{className:"py-6 text-center",children:[s.jsx(Oa,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),s.jsx("button",{onClick:Ne,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${X?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:X?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(nf,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[s.jsx(Zv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:ne,type:"file",accept:".json,.txt",onChange:We,className:"hidden"})]})]}),ae&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Ls,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:ae})]}),K&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:K.title})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[K.sections.length," sections  ~",K.estimatedMinutes||"?"," min read"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Y,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(ki,{className:"w-4 h-4 animate-spin"}):s.jsx(Bu,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),s.jsx("button",{onClick:()=>te(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(Fr,{className:"w-4 h-4"})})]})]})]}),h&&s.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[s.jsx(ki,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null};function fb(t,e){if(!e||e.length===0)return[...t].sort();const r=new Map(e.map((n,a)=>[n,a]));return[...t].sort((n,a)=>{const i=r.get(n)??Number.MAX_SAFE_INTEGER,o=r.get(a)??Number.MAX_SAFE_INTEGER;return i===o?n.localeCompare(a):i-o})}const U0e=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],V0e={Textbook:s.jsx(Oa,{className:"w-4 h-4"}),Simulation:s.jsx(pE,{className:"w-4 h-4"}),"Lab Guide":s.jsx(Z2,{className:"w-4 h-4"}),"Practice Set":s.jsx(ds,{className:"w-4 h-4"}),Article:s.jsx(KH,{className:"w-4 h-4"}),"Video Lesson":s.jsx(JH,{className:"w-4 h-4"}),Supplemental:s.jsx(ew,{className:"w-4 h-4"})},F0e=({assignments:t,submissions:e,classConfigs:r,onPreviewAssignment:n,onNavigate:a})=>{const i=Ma(),{confirm:o}=Po(),[c,d]=j.useState("All Classes"),[h,p]=j.useState("All Categories"),[m,x]=j.useState(new Set),[y,w]=j.useState(null),[N,S]=j.useState(!1),[E,C]=j.useState(null),[M,L]=j.useState(!1),I=j.useMemo(()=>{const K=Object.values(Tr).filter(ae=>ae!==Tr.UNCATEGORIZED),te=(r||[]).map(ae=>ae.className);return Array.from(new Set(["All Classes",...K,...te]))},[r]),R=j.useMemo(()=>t.filter(K=>{const te=c==="All Classes"||K.classType===c,ae=h==="All Categories"||K.category===h;return te&&ae}),[t,c,h]),A=j.useMemo(()=>c==="All Classes"?null:r.find(K=>K.className===c)||null,[r,c]),T=j.useMemo(()=>{if(c==="All Classes")return[];const K=new Set;return t.filter(te=>te.classType===c).forEach(te=>K.add(te.unit||"Unassigned")),fb(Array.from(K),A==null?void 0:A.unitOrder)},[t,c,A]),k=j.useMemo(()=>{const K={};return R.forEach(ae=>{const ce=c==="All Classes"?`${ae.classType.toUpperCase()}  ${ae.unit||"Unassigned"}`:ae.unit||"Unassigned";K[ce]||(K[ce]=[]),K[ce].push(ae)}),(c==="All Classes"?Object.keys(K).sort():fb(Object.keys(K),A==null?void 0:A.unitOrder)).reduce((ae,ce)=>(ae[ce]=K[ce],ae),{})},[R,c,A]),F=async K=>{await Ae.updateAssignmentStatus(K.id,qa.ACTIVE),i.success(`"${K.title}" deployed.`)},O=async K=>{const te=K.status===qa.ACTIVE?qa.ARCHIVED:qa.ACTIVE;await Ae.updateAssignmentStatus(K.id,te)},$=j.useMemo(()=>[...Array.isArray(e)?e:[]].sort((te,ae)=>{const ce=new Date(te.submittedAt||0).getTime();return new Date(ae.submittedAt||0).getTime()-ce}),[e]),B=j.useCallback(()=>{C([...T]),S(!0)},[T]),G=j.useCallback((K,te)=>{C(ae=>{if(!ae)return ae;const ce=[...ae],X=te==="up"?K-1:K+1;return X<0||X>=ce.length?ae:([ce[K],ce[X]]=[ce[X],ce[K]],ce)})},[]),Q=j.useCallback(async()=>{if(!(!E||!A)){L(!0);try{await Ae.saveClassConfig({...A,unitOrder:E}),i.success("Unit order saved."),S(!1),C(null)}catch{i.error("Failed to save unit order.")}finally{L(!1)}}},[E,A,i]),H=K=>K.status===qa.DRAFT?s.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Draft"}):K.scheduledAt&&new Date(K.scheduledAt)>new Date?s.jsxs("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1",children:[s.jsx(UH,{className:"w-3 h-3"}),new Date(K.scheduledAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):null;return s.jsxs("div",{className:"space-y-8 pb-12",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),s.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),s.jsxs("button",{onClick:()=>a==null?void 0:a("Resource Editor"),className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[s.jsx(cn,{className:"w-5 h-5"})," Resource Editor"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[s.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:c,onChange:K=>d(K.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:I.map(K=>s.jsx("option",{value:K,children:K},K))}),s.jsx(si,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:K=>p(K.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),U0e.map(K=>s.jsx("option",{value:K,children:K},K))]}),s.jsx(si,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),c!=="All Classes"&&T.length>1&&s.jsxs("button",{onClick:B,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-bold text-purple-300 bg-purple-500/10 border border-purple-500/20 hover:bg-purple-500/20 rounded-lg transition cursor-pointer ml-auto",children:[s.jsx(MR,{className:"w-3.5 h-3.5"})," Unit Order"]})]}),N&&E&&s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-purple-500/20 rounded-2xl p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2",children:[s.jsx(MR,{className:"w-4 h-4 text-purple-400"}),"Reorder Units  ",c]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{S(!1),C(null)},className:"text-xs text-gray-400 hover:text-white px-3 py-1.5 rounded-lg transition cursor-pointer",children:"Cancel"}),s.jsxs("button",{onClick:Q,disabled:M,className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/15 hover:bg-green-500/25 border border-green-500/20 px-3 py-1.5 rounded-lg transition cursor-pointer disabled:opacity-40",children:[s.jsx(lf,{className:"w-3.5 h-3.5"}),M?"Saving...":"Save Order"]})]})]}),s.jsx("div",{className:"space-y-1",children:E.map((K,te)=>s.jsxs("div",{className:"flex items-center gap-2 bg-black/20 border border-white/5 rounded-xl px-3 py-2 group hover:border-purple-500/20 transition",children:[s.jsx(af,{className:"w-3.5 h-3.5 text-gray-600 shrink-0"}),s.jsx("span",{className:"text-xs font-bold text-gray-300 truncate flex-1",children:K}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono shrink-0",children:["#",te+1]}),s.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition shrink-0",children:[s.jsx("button",{onClick:()=>G(te,"up"),disabled:te===0,className:"p-1 text-gray-400 hover:text-white hover:bg-white/10 rounded transition disabled:opacity-20 cursor-pointer",children:s.jsx($H,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>G(te,"down"),disabled:te===E.length-1,className:"p-1 text-gray-400 hover:text-white hover:bg-white/10 rounded transition disabled:opacity-20 cursor-pointer",children:s.jsx(yle,{className:"w-3.5 h-3.5"})})]})]},K))})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(k).map(([K,te])=>s.jsxs("div",{className:"mb-6 last:mb-0",children:[s.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[s.jsx("button",{onClick:()=>{const ae=new Set(m);ae.has(K)?ae.delete(K):ae.add(K),x(ae)},className:"text-gray-400 hover:text-white transition",children:m.has(K)?s.jsx(si,{className:"w-4 h-4"}):s.jsx(ao,{className:"w-4 h-4"})}),s.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:K}),s.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!m.has(K)&&s.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:te.map(ae=>{const ce=H(ae);return s.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${ae.status===qa.ARCHIVED?"bg-white/2 border-white/5 opacity-60":ae.status===qa.DRAFT?"bg-blue-900/10 border-blue-500/20":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${ae.status===qa.DRAFT?"bg-blue-500/20 text-blue-400":ae.status===qa.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:ae.status===qa.DRAFT?s.jsx(N0,{className:"w-4 h-4"}):V0e[ae.category||"Supplemental"]}),s.jsxs("div",{className:"truncate flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:ae.title}),ce,s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:ae.classType})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ae.description})]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[ae.status===qa.DRAFT&&s.jsx("button",{onClick:()=>F(ae),className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition",title:"Deploy Now",children:s.jsx(xE,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>w(ae),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:s.jsx(Ro,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n==null?void 0:n(ae.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:s.jsx(Ule,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a==null?void 0:a("Resource Editor"),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",title:"Edit in Resource Editor",children:s.jsx(yv,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>O(ae),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:ae.status===qa.ACTIVE?s.jsx(xle,{className:"w-4 h-4"}):s.jsx(o0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:async()=>{await o({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Ae.deleteAssignment(ae.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:s.jsx(Fr,{className:"w-4 h-4"})})]})]},ae.id)})})]},K))})]}),s.jsx(q0e,{engagementLogs:$,toast:i,confirm:o})]}),y&&s.jsx(z0e,{assignment:y,isOpen:!!y,onClose:()=>w(null)})]})},FM={bug:{label:"Bug",color:"bg-red-500/20 text-red-400 border-red-500/30"},feature:{label:"Feature",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},other:{label:"Other",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"}},q0e=({engagementLogs:t,toast:e,confirm:r})=>{const[n,a]=j.useState("LOG"),[i,o]=j.useState([]),[c,d]=j.useState(!1),[h,p]=j.useState(null),[m,x]=j.useState(""),[y,w]=j.useState(new Set),[N,S]=j.useState("fix"),[E,C]=j.useState("");j.useEffect(()=>Ae.subscribeToBugReports(o),[]);const M=j.useMemo(()=>i.filter(O=>c||!O.resolved),[i,c]),L=j.useCallback(O=>{w($=>{const B=new Set($);return B.has(O)?B.delete(O):B.add(O),B})},[]),I=j.useCallback(O=>{p(O.id),x(O.description)},[]),R=j.useCallback(async O=>{await Ae.updateBugReport(O,{description:m}),p(null),x(""),e.success("Report updated.")},[m,e]),A=j.useCallback(async O=>{await Ae.resolveBugReport(O),w($=>{const B=new Set($);return B.delete(O),B}),e.success("Report resolved.")},[e]),T=j.useCallback(async O=>{await r({message:"Delete this report permanently?",confirmLabel:"Delete"})&&(await Ae.deleteBugReport(O),w($=>{const B=new Set($);return B.delete(O),B}))},[r]),k=j.useCallback(()=>{const O=i.filter($=>y.has($.id));return N==="fix"?`You are working on "Porter Portal", an educational platform built with React 19, TypeScript, Tailwind CSS, and Firebase Firestore.

The following bug reports and feature requests have been filed by users:

${O.length>0?O.map((B,G)=>`${G+1}. [${B.category.toUpperCase()}] ${B.description}${B.userName?` (reported by ${B.userName})`:""}`).join(`
`):"(No specific reports selected  analyze the codebase for common issues)"}
${E?`
Additional context from the admin:
${E}
`:""}
Please analyze these issues, identify the root causes in the codebase, and implement fixes. For each fix:
1. Explain what the issue is and where in the code it occurs
2. Make the minimal, targeted change needed
3. Ensure the fix doesn't introduce regressions
4. Build and verify the changes compile cleanly`:N==="create"?`You are working on "Porter Portal", an educational platform built with React 19, TypeScript, Tailwind CSS, and Firebase Firestore.

I need you to help create new educational content. The platform supports two content formats:

 FORMAT 1: LESSON BLOCKS (JSON) 
Output a JSON array of block objects for the Resource Editor's "Paste JSON" import.

Available block types and required fields:

Content blocks:
- {"type":"SECTION_HEADER", "icon":"", "title":"Section Name", "subtitle":"Optional subtitle"}
- {"type":"TEXT", "content":"Plain text content"}
- {"type":"IMAGE", "url":"https://...", "caption":"Caption", "alt":"Description"}
- {"type":"VIDEO", "url":"https://youtube.com/watch?v=...", "caption":"Caption"}
- {"type":"OBJECTIVES", "title":"Learning Objectives", "items":["Obj 1","Obj 2"]}
- {"type":"DIVIDER"}
- {"type":"EXTERNAL_LINK", "title":"Link Title", "url":"https://...", "content":"Description", "buttonLabel":"Open", "openInNewTab":true}
- {"type":"INFO_BOX", "variant":"tip|warning|note", "content":"Box content"}

Interactive blocks:
- {"type":"VOCABULARY", "term":"Word", "definition":"Definition"}
- {"type":"VOCAB_LIST", "terms":[{"term":"Word1","definition":"Def1"}]}
- {"type":"ACTIVITY", "icon":"", "title":"Activity Name", "instructions":"Do this..."}
- {"type":"CHECKLIST", "content":"Checklist title", "items":["Step 1","Step 2"]}
- {"type":"SORTING", "title":"Sort Title", "instructions":"Sort these", "leftLabel":"Category A", "rightLabel":"Category B", "sortItems":[{"text":"Item","correct":"left|right"}]}
- {"type":"DATA_TABLE", "title":"Table Title", "columns":[{"key":"col1","label":"Name","editable":true}], "trials":3}
- {"type":"BAR_CHART", "title":"Chart Title", "barCount":3, "initialLabel":"Initial", "finalLabel":"Final", "deltaLabel":"Change", "height":300}

Question blocks:
- {"type":"MC", "content":"Question?", "options":["A","B","C","D"], "correctAnswer":0}
- {"type":"SHORT_ANSWER", "content":"Question?", "acceptedAnswers":["answer1","answer2"]}
- {"type":"RANKING", "content":"Put in order:", "items":["First","Second","Third"]}

Rules: Start with SECTION_HEADER, use OBJECTIVES near top, add TEXT between interactive elements, include INFO_BOX for callouts, add DIVIDER between sections, include 2-3 question blocks.

 FORMAT 2: STANDALONE HTML ACTIVITY 
Create a single HTML file that integrates with the Proctor Bridge Protocol via postMessage:
- Include PortalBridge snippet: init(), save(state, currentQuestion), answer(questionId, correct, attempts), complete(score, total, correct)
- Self-contained (inline CSS + JS), dark theme (#0f0720 bg), mobile-responsive
- Call PortalBridge.answer() when students answer (awards XP), PortalBridge.complete() when finished

${E?`Here is what I want to create:
${E}

`:""}Make the content engaging, educationally sound, and well-structured.`:`You are working on "Porter Portal", an educational platform built with React 19, TypeScript, Tailwind CSS, and Firebase Firestore.

Please analyze the codebase and suggest improvements, new features, or optimizations. Focus on:

1. UX improvements that would benefit students and administrators
2. Performance optimizations for large class sizes
3. Missing features that similar educational platforms typically have
4. Code quality improvements and potential bug areas
5. Accessibility improvements
${E?`
The admin has these specific areas of interest:
${E}
`:""}
For each suggestion, briefly describe the feature/improvement, the expected benefit, and the approximate complexity (small/medium/large). Prioritize suggestions by impact.`},[N,y,i,E]),F=j.useCallback(()=>{const O=k();navigator.clipboard.writeText(O),e.success("Prompt copied to clipboard!")},[k,e]);return s.jsx("div",{className:"lg:col-span-4",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[s.jsx("div",{className:"flex items-center gap-1 mb-4 bg-black/20 rounded-xl p-1 border border-white/5",children:[{key:"LOG",icon:s.jsx(oo,{className:"w-3.5 h-3.5"}),label:"Activity"},{key:"BUGS",icon:s.jsx(Jv,{className:"w-3.5 h-3.5"}),label:"Reports"},{key:"AI",icon:s.jsx(pg,{className:"w-3.5 h-3.5"}),label:"AI Lab"}].map(O=>s.jsxs("button",{onClick:()=>a(O.key),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-xs font-bold transition cursor-pointer ${n===O.key?"bg-purple-600/50 text-white shadow-lg":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[O.icon," ",O.label]},O.key))}),n==="LOG"&&s.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[t.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[s.jsx(oo,{className:"w-10 h-10 text-gray-700 mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),t.map(O=>s.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:O.userName}),s.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:O.assignmentTitle})]}),s.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(O.score)," XP"]})]}),s.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[s.jsxs("span",{children:[Math.round(O.metrics.engagementTime/60),"m active"]}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(O.submittedAt||"").toLocaleDateString()})]})]},O.id))]}),n==="BUGS"&&s.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:[M.length," report",M.length!==1?"s":""]}),s.jsxs("div",{className:"flex items-center gap-2",children:[y.size>0&&s.jsxs("button",{onClick:()=>{a("AI"),S("fix")},className:"flex items-center gap-1 text-[10px] font-bold text-purple-300 bg-purple-500/10 border border-purple-500/20 px-2 py-1 rounded-lg hover:bg-purple-500/20 transition cursor-pointer",children:[s.jsx(pg,{className:"w-3 h-3"})," AI Fix (",y.size,")"]}),s.jsxs("label",{className:"flex items-center gap-1.5 text-[10px] text-gray-500 cursor-pointer select-none",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:O=>d(O.target.checked),className:"w-3 h-3 rounded accent-purple-500"}),"Resolved"]})]})]}),s.jsxs("div",{className:"space-y-2 overflow-y-auto pr-1 custom-scrollbar flex-1",children:[M.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[s.jsx(Jv,{className:"w-10 h-10 text-gray-700 mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No reports yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Bug reports and feature requests will appear here."})]}),M.map(O=>{const $=FM[O.category],B=y.has(O.id),G=h===O.id;return s.jsxs("div",{className:`bg-black/30 border rounded-xl p-3 transition ${O.resolved?"border-green-500/10 opacity-50":B?"border-purple-500/30 bg-purple-500/5":"border-white/5 hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[!O.resolved&&s.jsx("button",{onClick:()=>L(O.id),className:`mt-0.5 w-4 h-4 rounded border flex items-center justify-center shrink-0 transition cursor-pointer ${B?"bg-purple-600 border-purple-500":"border-white/20 hover:border-purple-500/50"}`,children:B&&s.jsx(Ao,{className:"w-2.5 h-2.5 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase px-1.5 py-0.5 rounded border ${$.color}`,children:$.label}),s.jsx("span",{className:"text-[10px] text-gray-500 truncate",children:O.userName}),O.resolved&&s.jsx(dc,{className:"w-3 h-3 text-green-500 shrink-0"})]}),G?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:m,onChange:Q=>x(Q.target.value),rows:3,className:"w-full bg-black/40 border border-white/10 rounded-lg px-3 py-2 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>R(O.id),className:"flex items-center gap-1 text-[10px] font-bold text-green-300 bg-green-500/10 px-2 py-1 rounded-lg hover:bg-green-500/20 transition cursor-pointer",children:[s.jsx(Ao,{className:"w-3 h-3"})," Save"]}),s.jsx("button",{onClick:()=>p(null),className:"text-[10px] text-gray-400 hover:text-white px-2 py-1 rounded-lg transition cursor-pointer",children:"Cancel"})]})]}):s.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:O.description})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-white/5",children:[s.jsx("span",{className:"text-[9px] text-gray-600 font-mono",children:new Date(O.timestamp).toLocaleDateString([],{month:"short",day:"numeric"})}),!O.resolved&&!G&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>I(O),className:"p-1 text-gray-500 hover:text-amber-400 hover:bg-amber-500/10 rounded transition cursor-pointer",title:"Edit description",children:s.jsx(vv,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>A(O.id),className:"p-1 text-gray-500 hover:text-green-400 hover:bg-green-500/10 rounded transition cursor-pointer",title:"Mark resolved",children:s.jsx(dc,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>T(O.id),className:"p-1 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded transition cursor-pointer",title:"Delete",children:s.jsx(Fr,{className:"w-3 h-3"})})]})]})]},O.id)})]})]}),n==="AI"&&s.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[s.jsx("div",{className:"flex items-center gap-1 mb-4 bg-black/20 rounded-lg p-1 border border-white/5",children:[{key:"fix",icon:s.jsx(zR,{className:"w-3 h-3"}),label:"Fix Bugs"},{key:"create",icon:s.jsx(Oa,{className:"w-3 h-3"}),label:"Create"},{key:"discover",icon:s.jsx(eb,{className:"w-3 h-3"}),label:"Discover"}].map(O=>s.jsxs("button",{onClick:()=>S(O.key),className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 rounded-md text-[10px] font-bold transition cursor-pointer ${N===O.key?"bg-purple-600/40 text-purple-200":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[O.icon," ",O.label]},O.key))}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-4 pr-1",children:[s.jsxs("div",{className:"bg-black/20 border border-white/5 rounded-xl p-3",children:[N==="fix"&&s.jsxs("div",{className:"text-xs text-gray-400",children:[s.jsxs("p",{className:"font-bold text-gray-300 mb-1 flex items-center gap-1.5",children:[s.jsx(zR,{className:"w-3.5 h-3.5 text-amber-400"})," Bug Fix Mode"]}),s.jsx("p",{children:"Select bug reports from the Reports tab, add context below, then copy the prompt to share with an AI assistant for fixes."}),y.size>0&&s.jsxs("div",{className:"mt-2 bg-purple-500/10 border border-purple-500/20 rounded-lg p-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-300 uppercase tracking-widest",children:[y.size," report",y.size!==1?"s":""," selected"]}),s.jsx("div",{className:"mt-1 space-y-1",children:i.filter(O=>y.has(O.id)).map(O=>s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-400",children:[s.jsx("span",{className:`text-[8px] font-bold uppercase px-1 py-0.5 rounded ${FM[O.category].color}`,children:O.category}),s.jsxs("span",{className:"truncate",children:[O.description.slice(0,60),O.description.length>60?"...":""]}),s.jsx("button",{onClick:()=>L(O.id),className:"ml-auto shrink-0 p-0.5 text-gray-600 hover:text-red-400 transition cursor-pointer",children:s.jsx(Mn,{className:"w-3 h-3"})})]},O.id))})]})]}),N==="create"&&s.jsxs("div",{className:"text-xs text-gray-400",children:[s.jsxs("p",{className:"font-bold text-gray-300 mb-1 flex items-center gap-1.5",children:[s.jsx(Oa,{className:"w-3.5 h-3.5 text-blue-400"})," Content Creation Mode"]}),s.jsx("p",{children:"Describe the lesson content you want to create. The prompt will include all supported block types and formatting guidance for the AI."})]}),N==="discover"&&s.jsxs("div",{className:"text-xs text-gray-400",children:[s.jsxs("p",{className:"font-bold text-gray-300 mb-1 flex items-center gap-1.5",children:[s.jsx(eb,{className:"w-3.5 h-3.5 text-yellow-400"})," Feature Discovery Mode"]}),s.jsx("p",{children:"Describe areas of interest or let the AI analyze the codebase for improvements, new features, and optimizations."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-1.5 block",children:N==="fix"?"Additional Context":N==="create"?"What to Create":"Areas of Interest"}),s.jsx("textarea",{value:E,onChange:O=>C(O.target.value),rows:4,placeholder:N==="fix"?"Add any extra context about the bugs or how to reproduce them...":N==="create"?"Describe the lesson content, topic, grade level, or specific blocks you want...":"Describe areas you want the AI to focus on, or leave blank for a general analysis...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-1.5 block",children:"Generated Prompt Preview"}),s.jsx("div",{className:"bg-black/40 border border-white/5 rounded-xl p-3 max-h-48 overflow-y-auto custom-scrollbar",children:s.jsx("pre",{className:"text-[10px] text-gray-400 whitespace-pre-wrap font-mono leading-relaxed",children:k()})})]})]}),s.jsxs("button",{onClick:F,className:"mt-4 w-full flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold text-sm transition cursor-pointer shadow-lg",children:[s.jsx(Nle,{className:"w-4 h-4"})," Copy Prompt to Clipboard"]})]})]})})},sW=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),s.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),s.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),s.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:s.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),s.jsxs("g",{filter:"url(#b-glow)",children:[s.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),s.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),s.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),s.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>s.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),H0e=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),s.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:s.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),s.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>s.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[s.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),s.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),s.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),s.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),s.jsxs("g",{filter:"url(#p-glow)",children:[s.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),s.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),s.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),s.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return s.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[s.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),G0e=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),s.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),s.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),s.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),s.jsxs("g",{filter:"url(#s-glow)",children:[s.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),s.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),s.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>s.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),s.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>s.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),W0e={BRUTE:sW,PHANTOM:H0e,SERPENT:G0e},oW=({bossType:t,hue:e,size:r})=>{const n=W0e[t]||sW;return s.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:s.jsx(n,{hue:e})})},K0e=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],Q0e=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,o]=j.useState(null),c=j.useMemo(()=>{var y;if(!t)return[];const x=Object.keys(((y=t.gamification)==null?void 0:y.classProfiles)||{});return x.length>0?x:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=j.useMemo(()=>{var y,w;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((y=t.gamification)==null?void 0:y.inventory)||[],equipped:((w=t.gamification)==null?void 0:w.equipped)||{}};const x=Vu(t,d);return{inventory:x.inventory,equipped:x.equipped}},[t,d]);return t?s.jsx(Bi,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:s.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:s.jsx(cn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:s.jsx(Mn,{className:"w-4 h-4"})})]})]})]}),c.length>1&&s.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(x=>s.jsx("button",{onClick:()=>o(x),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===x?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:x==="_legacy"?"Global":x},x))}),s.jsxs("div",{className:"border-b border-white/5 pb-6",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&s.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:K0e.map(x=>{var w;const y=(w=h.equipped)==null?void 0:w[x];return s.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${y?ma(y.rarity).border+" "+ma(y.rarity).bg:"border-white/10 bg-black/20"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:y.name}),s.jsx("button",{onClick:()=>n(t,x,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:s.jsx(Mn,{className:"w-3 h-3"})})]}):s.jsx("span",{className:"text-[8px] text-gray-600",children:x})},x)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((x,y)=>s.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${ma(x.rarity).border}`,children:[s.jsx("div",{className:`text-[8px] font-bold ${ma(x.rarity).text} text-center truncate w-full`,children:x.name}),s.jsx("div",{className:"text-[8px] text-gray-500",children:x.slot}),s.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:s.jsx("button",{onClick:()=>r(t,x,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:s.jsx(Fr,{className:"w-4 h-4"})})})]},y)),h.inventory.length===0&&s.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},X0e=[10,50,100,-10,-50,-100],Y0e=({user:t,onClose:e,onAdjust:r})=>{var o;const[n,a]=j.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return s.jsx(Bi,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((o=t.gamification)==null?void 0:o.xp)||0," XP"]})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:X0e.map(c=>s.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),s.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},J0e=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&s.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return s.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),s.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[s.jsx(ds,{className:"w-3 h-3"}),n.quest.title]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),s.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),s.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&s.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:s.jsx(jle,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),s.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:s.jsx(Ao,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:s.jsx(Mn,{className:"w-5 h-5"})})]})]})]})]},a)})]}),W3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},Z0e=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:o,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return s.jsx(Bi,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:s.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),s.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),s.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),s.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),s.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),s.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),s.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),s.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"All Classes"}),Object.values(Tr).filter(h=>h!=="Uncategorized").map(h=>s.jsx("option",{value:h,children:h},h))]})]})]}),s.jsx(xg,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),s.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),s.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),s.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),s.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"COMMON",children:"Common"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&s.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),s.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),s.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),s.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),s.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),s.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),s.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[i&&s.jsx("button",{type:"button",disabled:o,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),s.jsx("button",{type:"submit",disabled:o,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:o?"Transmitting...":"Broadcast Mission"})]})]})})},ehe={Operatives:"OPERATIVES","XP Protocols":"PROTOCOLS",Missions:"MISSIONS","Mission Control":"MISSION_CONTROL","Boss Ops":"BOSS_OPS",Tutoring:"TUTORING"},the=({users:t,initialTab:e})=>{const r=Ma(),{confirm:n}=Po(),a=e&&ehe[e]||"OPERATIVES",[i,o]=j.useState(""),[c,d]=j.useState("All Classes"),[h,p]=j.useState("All Sections"),[m,x]=j.useState("xp"),[y,w]=j.useState("desc"),N=q=>{m===q?w(Se=>Se==="asc"?"desc":"asc"):(x(q),w("asc"))},S=({label:q,col:Se,className:Te})=>s.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Te??""}`,onClick:()=>N(Se),children:s.jsxs("div",{className:`flex items-center gap-1 ${Te!=null&&Te.includes("text-center")?"justify-center":Te!=null&&Te.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(jx,{className:`w-2.5 h-2.5 -mb-0.5 ${m===Se&&y==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(si,{className:`w-2.5 h-2.5 -mt-0.5 ${m===Se&&y==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[E,C]=j.useState([]),[M,L]=j.useState([]),[I,R]=j.useState(null),[A,T]=j.useState(null),[k,F]=j.useState(!1),[O,$]=j.useState(!1),[B,G]=j.useState(W3),[Q,H]=j.useState(!1),[K,te]=j.useState([]),[ae,ce]=j.useState(null),[X,ie]=j.useState(""),[ne,ve]=j.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Tr.AP_PHYSICS,targetSections:[]}),[pe,Be]=j.useState([]),[Ge,He]=j.useState(!1),[Ne,We]=j.useState(null),[Y,re]=j.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[be,we]=j.useState(!1),Ye=j.useRef(null),[nt,Ot]=j.useState(null),[Ee,ut]=j.useState([]),[Nt,wt]=j.useState("bosses"),[zt,de]=j.useState(!1),[Fe,jt]=j.useState(null),[qe,Ze]=j.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),At=j.useRef(null),[St,lr]=j.useState(null),[ye,it]=j.useState([]),[xt,Dt]=j.useState(null),[Pt,rt]=j.useState([]),[Le,et]=j.useState(!1),[lt,Ft]=j.useState("pending"),[Wt,Qt]=j.useState([]);j.useEffect(()=>{const q=Ae.subscribeToXPEvents(C),Se=Ae.subscribeToQuests(L),Te=Ae.subscribeToAllBossQuizzes(Be),ke=Ae.subscribeToAllTutoringSessions(Qt),gt=Ae.subscribeToBossQuestionBanks(ut);return()=>{q(),Se(),Te(),ke(),gt()}},[]),j.useEffect(()=>{const q=[];t.forEach(Se=>{var Te,ke;(ke=(Te=Se.gamification)==null?void 0:Te.activeQuests)==null||ke.forEach(gt=>{const Bt=M.find(It=>It.id===gt.questId);Bt&&(gt.status==="DEPLOYED"||gt.status==="ACCEPTED")&&q.push({user:Se,quest:Bt,status:gt.status,roll:gt.deploymentRoll,acceptedAt:gt.acceptedAt})})}),te(q)},[t,M,a]);const Gt=j.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),Et=j.useMemo(()=>{const q=new Set;return Gt.forEach(Se=>{Se.classSections?Object.values(Se.classSections).forEach(Te=>{Te&&q.add(Te)}):Se.section&&q.add(Se.section)}),Array.from(q).sort()},[Gt]),Hr=j.useMemo(()=>{if(ne.type!=="CLASS_SPECIFIC"||!ne.targetClass)return Et;const q=av(Gt,ne.targetClass);return q.length>0?q:Et},[ne.type,ne.targetClass,Gt,Et]),un=j.useMemo(()=>{if(!B.targetClass)return Et;const q=av(Gt,B.targetClass);return q.length>0?q:Et},[B.targetClass,Gt,Et]),gn=j.useMemo(()=>{if(Y.classType==="GLOBAL"||!Y.classType)return Et;const q=av(Gt,Y.classType);return q.length>0?q:Et},[Y.classType,Gt,Et]),Dr=q=>{var Te,ke;const Se=(Te=q.gamification)==null?void 0:Te.classProfiles;return Se&&Object.keys(Se).length>0?Object.values(Se).reduce((gt,Bt)=>gt+u0(Bt.equipped),0):u0((ke=q.gamification)==null?void 0:ke.equipped)},kn=j.useMemo(()=>Gt.filter(q=>{var Bt;const Se=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),Te=c==="All Classes"||q.classType===c||((Bt=q.enrolledClasses)==null?void 0:Bt.includes(c)),ke=q.classSections?Object.values(q.classSections):[],gt=h==="All Sections"||q.section===h||ke.includes(h);return Se&&Te&&gt}).sort((q,Se)=>{var Te,ke,gt,Bt,It,ar,Er,an,oe,xe;switch(m){case"name":return y==="asc"?q.name.localeCompare(Se.name):Se.name.localeCompare(q.name);case"class":return y==="asc"?(q.classType||"").localeCompare(Se.classType||""):(Se.classType||"").localeCompare(q.classType||"");case"level":{const $e=((Te=q.gamification)==null?void 0:Te.level)||1,Pe=((ke=Se.gamification)==null?void 0:ke.level)||1;return y==="asc"?$e-Pe:Pe-$e}case"flux":{const $e=((gt=q.gamification)==null?void 0:gt.currency)||0,Pe=((Bt=Se.gamification)==null?void 0:Bt.currency)||0;return y==="asc"?$e-Pe:Pe-$e}case"gear":{const $e=Dr(q),Pe=Dr(Se);return y==="asc"?$e-Pe:Pe-$e}case"xp":default:{const $e=c!=="All Classes"?((ar=(It=q.gamification)==null?void 0:It.classXp)==null?void 0:ar[c])||0:((Er=q.gamification)==null?void 0:Er.xp)||0,Pe=c!=="All Classes"?((oe=(an=Se.gamification)==null?void 0:an.classXp)==null?void 0:oe[c])||0:((xe=Se.gamification)==null?void 0:xe.xp)||0;return y==="asc"?$e-Pe:Pe-$e}}}),[Gt,i,c,h,m,y]),gr=async(q,Se)=>{try{await Ae.adjustUserXP(q.id,Se,q.classType||Tr.UNCATEGORIZED),r.success(`${Se>0?"+":""}${Se} XP applied to ${q.name}.`)}catch{r.error("Failed to adjust XP.")}R(null)},ha=async q=>{q.preventDefault();const Se={id:Math.random().toString(36).substring(2,9),title:ne.title,multiplier:ne.multiplier,isActive:!0,type:ne.type};ne.type==="CLASS_SPECIFIC"&&(Se.targetClass=ne.targetClass),ne.targetSections.length>0&&(Se.targetSections=ne.targetSections),await Ae.saveXPEvent(Se),F(!1),ve({title:"",multiplier:2,type:"GLOBAL",targetClass:Tr.AP_PHYSICS,targetSections:[]})},xn=async q=>{q.preventDefault(),H(!0);try{const Se={};B.techReq>0&&(Se.tech=B.techReq),B.focusReq>0&&(Se.focus=B.focusReq),B.analysisReq>0&&(Se.analysis=B.analysisReq),B.charismaReq>0&&(Se.charisma=B.charismaReq);const Te=new Date;Te.setHours(Te.getHours()+(B.durationHours||0));const ke={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!0,type:B.type,statRequirements:Se,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:B.durationHours>0?Te.toISOString():null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await Ae.saveQuest(ke),r.success(`Mission "${ke.title}" deployed.`),G(W3),$(!1)}catch(Se){console.error("Failed to issue mission:",Se),r.error("Failed to issue mission.")}finally{H(!1)}},Ln=async q=>{await Ae.saveXPEvent({...q,isActive:!q.isActive})},ci=async q=>{const Se={...q,isActive:!q.isActive};Se.isActive&&(Se.expiresAt=null),await Ae.saveQuest(Se)},yn=async(q,Se,Te)=>{var Bt,It;if(!await n({message:`Confiscate ${Se.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const gt=(Te?Vu(q,Te):{inventory:((Bt=q.gamification)==null?void 0:Bt.inventory)||[]}).inventory.filter(ar=>ar.id!==Se.id);await Ae.adminUpdateInventory(q.id,gt,((It=q.gamification)==null?void 0:It.currency)||0,Te),T(ar=>{var Er,an;return ar?Te&&((an=(Er=ar.gamification)==null?void 0:Er.classProfiles)!=null&&an[Te])?{...ar,gamification:{...ar.gamification,classProfiles:{...ar.gamification.classProfiles,[Te]:{...ar.gamification.classProfiles[Te],inventory:gt}}}}:{...ar,gamification:{...ar.gamification,inventory:gt}}:null})},Pr=async(q,Se,Te)=>{var Bt;if(!await n({message:`Force unequip ${Se} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const gt={...(Te?Vu(q,Te):{equipped:{...(Bt=q.gamification)==null?void 0:Bt.equipped}}).equipped};delete gt[Se],await Ae.adminUpdateEquipped(q.id,gt,Te),T(It=>{var ar,Er;return It?Te&&((Er=(ar=It.gamification)==null?void 0:ar.classProfiles)!=null&&Er[Te])?{...It,gamification:{...It.gamification,classProfiles:{...It.gamification.classProfiles,[Te]:{...It.gamification.classProfiles[Te],equipped:gt}}}}:{...It,gamification:{...It.gamification,equipped:gt}}:null})},Ya=async(q,Se)=>{var ke,gt;const Te=Math.max(0,(((ke=q.gamification)==null?void 0:ke.currency)||0)+Se);await Ae.adminUpdateInventory(q.id,((gt=q.gamification)==null?void 0:gt.inventory)||[],Te),T(Bt=>Bt?{...Bt,gamification:{...Bt.gamification,currency:Te}}:null)},aa=async(q,Se,Te,ke)=>{try{await Ae.resolveQuest(q,Se,Te,ke),r.success(Te?`Mission "${Se.title}" approved.`:`Mission "${Se.title}" rejected.`)}catch{r.error("Failed to resolve mission.")}},Jr=async q=>{const Se=q.quest.rollDieSides||20,Te=Math.floor(Math.random()*Se)+1;r.info(`Rolled a ${Te} on a D${Se}. ${Te===Se?"CRITICAL SUCCESS!":"Failure confirmed."}`),await aa(q.user.id,q.quest,Te===Se,q.user.classType)},vn=async q=>{try{await Ae.updateCodename(q,X.trim().slice(0,24)),r.success("Code name updated.")}catch{r.error("Failed to update code name.")}ce(null)},Wn=async(q,Se)=>{try{await Ae.toggleCodenameLock(q,Se),r.success(Se?"Codename locked.":"Codename unlocked.")}catch{r.error("Failed to update lock.")}},Pa=q=>{var Se,Te,ke,gt,Bt;if(q)We(q),re({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((Se=q.rewards)==null?void 0:Se.xp)||500,rewardFlux:((Te=q.rewards)==null?void 0:Te.flux)||100,rewardItemRarity:((ke=q.rewards)==null?void 0:ke.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(It=>({...It,damageBonus:It.damageBonus||0})),targetSections:q.targetSections||[],bossType:((gt=q.bossAppearance)==null?void 0:gt.bossType)||"BRUTE",bossHue:((Bt=q.bossAppearance)==null?void 0:Bt.hue)??0}),it(q.modifiers||[]);else{We(null);const It=new Date;It.setDate(It.getDate()+7),re({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:It.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),it([])}He(!0)},Ja=()=>{re(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},Ci=(q,Se,Te)=>{re(ke=>{const gt=[...ke.questions];return gt[q]={...gt[q],[Se]:Te},{...ke,questions:gt}})},ps=(q,Se,Te)=>{re(ke=>{const gt=[...ke.questions],Bt=[...gt[q].options];return Bt[Se]=Te,gt[q]={...gt[q],options:Bt},{...ke,questions:gt}})},wi=q=>{re(Se=>({...Se,questions:Se.questions.filter((Te,ke)=>ke!==q)}))},kt=async q=>{if(q.preventDefault(),Y.questions.length===0){r.error("Add at least one question.");return}try{const Se=[...new Set(Y.questions.map(ke=>ke.bankId).filter(Boolean))],Te={id:(Ne==null?void 0:Ne.id)||Math.random().toString(36).substring(2,12),bossName:Y.bossName,description:Y.description,maxHp:Y.maxHp,currentHp:(Ne==null?void 0:Ne.currentHp)??Y.maxHp,classType:Y.classType,isActive:(Ne==null?void 0:Ne.isActive)??!0,deadline:new Date(Y.deadline).toISOString(),damagePerCorrect:Y.damagePerCorrect,questions:Y.questions.map(ke=>({id:ke.id,stem:ke.stem,options:ke.options.filter(gt=>gt.trim()),correctAnswer:ke.correctAnswer,difficulty:ke.difficulty,...ke.damageBonus>0?{damageBonus:ke.damageBonus}:{},...ke.bankId?{bankId:ke.bankId}:{}})),rewards:{xp:Y.rewardXp,flux:Y.rewardFlux,...Y.rewardItemRarity?{itemRarity:Y.rewardItemRarity}:{}},...Y.targetSections.length>0?{targetSections:Y.targetSections}:{},bossAppearance:{bossType:Y.bossType,hue:Y.bossHue},...ye.length>0?{modifiers:ye}:{},...Se.length>0?{questionBankIds:Se}:{}};await Ae.saveBossQuiz(Te),r.success(Ne?"Quiz boss updated.":"Quiz boss deployed!"),He(!1)}catch{r.error("Failed to save quiz boss.")}},fe=async q=>{await Ae.toggleBossQuizActive(q.id,!q.isActive)},at=async q=>{await n({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Ae.deleteBossQuiz(q.id),r.success("Quiz boss deleted."))},ft=q=>{q?(jt(q),Ze({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(Se=>({...Se,damageBonus:Se.damageBonus||0}))})):(jt(null),Ze({name:"",classType:"GLOBAL",description:"",questions:[]})),lr(null),de(!0)},nr=async q=>{if(q.preventDefault(),qe.questions.length===0){r.error("Add at least one question.");return}try{const Se=new Date().toISOString(),Te={id:(Fe==null?void 0:Fe.id)||Math.random().toString(36).substring(2,12),name:qe.name,classType:qe.classType,description:qe.description,questions:qe.questions.map(ke=>({id:ke.id,stem:ke.stem,options:ke.options.filter(gt=>gt.trim()),correctAnswer:ke.correctAnswer,difficulty:ke.difficulty,...ke.damageBonus>0?{damageBonus:ke.damageBonus}:{}})),createdAt:(Fe==null?void 0:Fe.createdAt)||Se,updatedAt:Se};await Ae.saveBossQuestionBank(Te),r.success(Fe?"Question bank updated.":"Question bank created!"),de(!1)}catch{r.error("Failed to save question bank.")}},vr=async q=>{await n({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Ae.deleteBossQuestionBank(q.id),r.success("Question bank deleted."))},dn=async(q,Se)=>{var gt;const Te=(gt=q.target.files)==null?void 0:gt[0];if(!Te)return;const ke=Se==="bank"?lr:Ot;ke(null);try{let It=(await Te.text()).replace(/```json\s*|```\s*/g,"").trim();It=It.replace(/[\x00-\x1F\x7F]/g,xe=>xe===`
`||xe==="\r"||xe==="	"?" ":"");let ar;try{ar=JSON.parse(It)}catch{const xe=It.match(/\[[\s\S]*\]/);if(xe)try{ar=JSON.parse(xe[0])}catch{let $e=null;for(let Pe=xe[0].length-1;Pe>0;Pe--)if(xe[0][Pe]==="}")try{$e=JSON.parse(xe[0].slice(0,Pe+1)+"]");break}catch{}if($e)ar=$e;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(ar)||ar.length===0)throw new Error("Must be a non-empty JSON array.");const Er=ar.filter(xe=>xe.stem&&xe.options&&xe.correctAnswer!==void 0);if(Er.length===0)throw new Error("No valid questions found.");const an=Er.map(xe=>({id:xe.id||Math.random().toString(36).substring(2,10),stem:xe.stem,options:xe.options.slice(0,4),correctAnswer:typeof xe.correctAnswer=="number"?xe.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(xe.difficulty)?xe.difficulty:"MEDIUM",damageBonus:typeof xe.damageBonus=="number"?xe.damageBonus:0})),oe=ar.length-Er.length;Se==="bank"?Ze(xe=>({...xe,questions:[...xe.questions,...an]})):re(xe=>({...xe,questions:[...xe.questions,...an]})),r.success(`Imported ${an.length} questions${oe>0?` (${oe} skipped)`:""}`)}catch(Bt){ke(Bt instanceof Error?Bt.message:"Import failed."),r.error("Failed to import questions.")}Se==="bank"&&At.current&&(At.current.value=""),Se==="boss"&&Ye.current&&(Ye.current.value="")},Zr=q=>{const Se=q.questions.map(Te=>({...Te,damageBonus:Te.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));re(Te=>({...Te,questions:[...Te.questions,...Se]})),r.success(`Imported ${Se.length} questions from "${q.name}"`)},bn=q=>{it(Se=>{if(Se.find(gt=>gt.type===q))return Se.filter(gt=>gt.type!==q);const ke=pj[q];return[...Se,{type:q,...ke.hasValue?{value:ke.defaultValue}:{}}]})},Lr=(q,Se)=>{it(Te=>Te.map(ke=>ke.type===q?{...ke,value:Se}:ke))},$s=async q=>{Dt(q),et(!0);try{const Se=await Ae.getBossQuizAllProgress(q.id);rt(Se)}catch{r.error("Failed to load endgame data.")}et(!1)},ms=(q,Se)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${Se||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,mo=()=>{const q=ms(Y.bossName,Y.classType);navigator.clipboard.writeText(q),we(!0),setTimeout(()=>we(!1),2500),r.success("Prompt copied to clipboard!")},vl=q=>dn(q,"boss"),gs=async(q,Se)=>{try{const Te=await Ae.completeTutoring(q,Se);r.success(`Verified! Tutor earned ${Te.xpAwarded} XP and ${Te.fluxAwarded} Flux`)}catch{r.error("Failed to verify session")}},xs=async q=>{if(await n({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await Ae.cancelTutoringSession(q),r.success("Session cancelled.")}catch{r.error("Failed to cancel session")}},La=Wt.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),Sa={OPERATIVES:"Operatives",PROTOCOLS:"XP Protocols",MISSIONS:"Missions",MISSION_CONTROL:"Mission Control",BOSS_OPS:"Boss Ops",TUTORING:"Tutoring"};return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:Sa[a]}),s.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="PROTOCOLS"&&s.jsxs("button",{onClick:()=>F(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[s.jsx(xE,{className:"w-4 h-4"})," Deploy Protocol"]}),a==="MISSIONS"&&s.jsxs("button",{onClick:()=>$(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[s.jsx(X2,{className:"w-4 h-4"})," Issue Mission"]}),a==="BOSS_OPS"&&s.jsxs("button",{onClick:()=>Pa(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[s.jsx(Ro,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:s.jsxs("div",{className:"p-6",children:[a==="OPERATIVES"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Gf,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>o(q.target.value)})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[kn.length," operatives"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Cle,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Classes"}),Object.values(Tr).map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(si,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),Et.length>0&&s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Sections"}),Et.map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(si,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[s.jsx(S,{label:"Operative",col:"name",className:"pl-4"}),s.jsx(S,{label:"Class",col:"class"}),s.jsx(S,{label:"Level",col:"level",className:"text-center"}),s.jsx(S,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),s.jsx(S,{label:"Flux",col:"flux",className:"text-center"}),s.jsx(S,{label:"Gear",col:"gear",className:"text-center"}),s.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:kn.map(q=>{var gt,Bt,It,ar,Er,an,oe,xe,$e;const Se=((gt=q.gamification)==null?void 0:gt.level)||1,Te=((Bt=q.gamification)==null?void 0:Bt.currency)||0,ke=q.enrolledClasses||(q.classType?[q.classType]:[]);return s.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"py-3 pl-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),ae===q.id?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{autoFocus:!0,value:X,onChange:Pe=>ie(Pe.target.value),maxLength:24,onKeyDown:Pe=>{Pe.key==="Enter"&&vn(q.id),Pe.key==="Escape"&&ce(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),s.jsx("button",{onClick:()=>vn(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:s.jsx(Ao,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>ce(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:s.jsx(Mn,{className:"w-3 h-3"})})]}):s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:()=>{var Pe;ce(q.id),ie(((Pe=q.gamification)==null?void 0:Pe.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((It=q.gamification)==null?void 0:It.codename)||"UNASSIGNED",s.jsx(vv,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),s.jsx("button",{onClick:()=>{var Pe;return Wn(q.id,!((Pe=q.gamification)!=null&&Pe.codenameLocked))},className:`transition ${(ar=q.gamification)!=null&&ar.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Er=q.gamification)!=null&&Er.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(an=q.gamification)!=null&&an.codenameLocked?s.jsx(sf,{className:"w-2.5 h-2.5"}):s.jsx(Ple,{className:"w-2.5 h-2.5"})})]})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:ke.map(Pe=>s.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:Pe},Pe))})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-lg font-black text-white",children:Se})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((xe=(oe=q.gamification)==null?void 0:oe.classXp)==null?void 0:xe[c])||0:(($e=q.gamification)==null?void 0:$e.xp)||0).toLocaleString()})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Te})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:Dr(q)})}),s.jsx("td",{className:"py-3 text-right pr-4",children:s.jsxs("div",{className:"flex justify-end gap-1.5",children:[s.jsxs("button",{onClick:()=>T(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Yv,{className:"w-3 h-3"})," Inventory"]}),s.jsxs("button",{onClick:()=>R(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),a==="PROTOCOLS"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[E.map(q=>s.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&s.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(Gn,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>Ae.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Fr,{className:"w-4 h-4"})})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),s.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),s.jsx("button",{onClick:()=>Ln(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),s.jsxs("button",{onClick:()=>F(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx(cn,{className:"w-6 h-6"})}),s.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),a==="MISSIONS"&&s.jsx("div",{className:"space-y-4",children:M.map(q=>s.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(cl,{className:"w-7 h-7"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),s.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&s.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([Se,Te])=>s.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Te," ",Se]},Se))}),s.jsxs("div",{className:"flex gap-3 mt-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("button",{onClick:()=>ci(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),s.jsx("button",{onClick:()=>Ae.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Fr,{className:"w-4 h-4"})})]})]},q.id))}),a==="MISSION_CONTROL"&&s.jsx(J0e,{deployments:K,onResolveQuest:aa,onRollForSalvation:Jr}),a==="BOSS_OPS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>wt("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Nt==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Ph,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",pe.length,")"]}),s.jsxs("button",{onClick:()=>wt("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Nt==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Mh,{className:"w-3 h-3 inline mr-1"})," Question Banks (",Ee.length,")"]})]}),Nt==="bosses"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),pe.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Ro,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),s.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),pe.map(q=>{var gt,Bt;const Se=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,Te=new Date(q.deadline)<new Date,ke=(q.currentHp??q.maxHp)<=0||!q.isActive;return s.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!Te?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!Te?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(Ro,{className:"w-7 h-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),s.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(gt=q.modifiers)!=null&&gt.length?s.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(Bt=q.targetSections)!=null&&Bt.length?s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,Te&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),ke&&s.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),s.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:s.jsx("div",{className:`h-full rounded-full transition-all ${Se>50?"bg-amber-500":Se>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${Se}%`}})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[ke&&s.jsxs("button",{onClick:()=>$s(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(qf,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),s.jsxs("button",{onClick:()=>Pa(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(vv,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>fe(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("button",{onClick:()=>at(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Fr,{className:"w-4 h-4"})})]})]},q.id)})]}),Nt==="banks"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),s.jsxs("button",{onClick:()=>ft(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[s.jsx(cn,{className:"w-3 h-3"})," New Bank"]})]}),Ee.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Mh,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No question banks yet."}),s.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),Ee.map(q=>s.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:s.jsx(Mh,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&s.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>ft(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[s.jsx(vv,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>vr(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Fr,{className:"w-4 h-4"})})]})]},q.id))]})]}),a==="TUTORING"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>Ft("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${lt==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",La.length,")"]}),s.jsxs("button",{onClick:()=>Ft("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${lt==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",Wt.length,")"]})]}),(lt==="pending"?La:Wt).length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(ll,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:lt==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(lt==="pending"?La:Wt).map(q=>s.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx($le,{className:"w-4 h-4 text-gray-500"}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),s.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["Requester: ",s.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&s.jsxs("span",{children:["Tutor: ",s.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),s.jsxs("span",{children:["Class: ",s.jsx("span",{className:"text-purple-400",children:q.classType})]}),s.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&s.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&s.jsxs("button",{onClick:()=>gs(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx($r,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>xs(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Mn,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&s.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[s.jsx($r,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})}),s.jsx(Q0e,{user:A,onClose:()=>T(null),onDeleteItem:yn,onUnequipItem:Pr,onGrantFlux:Ya}),s.jsx(Z0e,{isOpen:O,onClose:()=>$(!1),form:B,setForm:G,onSubmit:xn,onSaveDraft:async()=>{const q={};B.techReq>0&&(q.tech=B.techReq),B.focusReq>0&&(q.focus=B.focusReq),B.analysisReq>0&&(q.analysis=B.analysisReq),B.charismaReq>0&&(q.charisma=B.charismaReq);const Se={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!1,type:B.type,statRequirements:q,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await Ae.saveQuest(Se),r.success("Mission saved as draft (standby)."),G(W3),$(!1)},isSubmitting:Q,availableSections:un}),s.jsx(Bi,{isOpen:k,onClose:()=>F(!1),title:"New XP Protocol Deployment",children:s.jsxs("form",{onSubmit:ha,className:"space-y-4 text-gray-100 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),s.jsx("input",{value:ne.title,onChange:q=>ve({...ne,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),s.jsx("input",{type:"number",step:"0.5",value:ne.multiplier,onChange:q=>ve({...ne,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),s.jsxs("select",{value:ne.type,onChange:q=>ve({...ne,type:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[s.jsx("option",{value:"GLOBAL",children:"Global Node"}),s.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),ne.type==="CLASS_SPECIFIC"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),s.jsx("select",{value:ne.targetClass,onChange:q=>ve({...ne,targetClass:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Tr).map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsx(xg,{availableSections:Hr,selectedSections:ne.targetSections,onChange:q=>ve({...ne,targetSections:q})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:async()=>{const q={id:Math.random().toString(36).substring(2,9),title:ne.title,multiplier:ne.multiplier,isActive:!1,type:ne.type,...ne.type==="CLASS_SPECIFIC"?{targetClass:ne.targetClass}:{},...ne.targetSections.length>0?{targetSections:ne.targetSections}:{}};await Ae.saveXPEvent(q),F(!1),ve({title:"",multiplier:2,type:"GLOBAL",targetClass:Tr.AP_PHYSICS,targetSections:[]}),r.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),s.jsx(Y0e,{user:I,onClose:()=>R(null),onAdjust:gr}),s.jsx(Bi,{isOpen:Ge,onClose:()=>He(!1),title:Ne?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:kt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),s.jsx("input",{value:Y.bossName,onChange:q=>re({...Y,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("textarea",{value:Y.description,onChange:q=>re({...Y,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:s.jsx(oW,{bossType:Y.bossType,hue:Y.bossHue})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),s.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>s.jsx("button",{type:"button",onClick:()=>re({...Y,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${Y.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",Y.bossHue,""]}),s.jsx("input",{type:"range",min:"0",max:"360",value:Y.bossHue,onChange:q=>re({...Y,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),s.jsx("input",{type:"number",value:Y.maxHp,onChange:q=>re({...Y,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),s.jsx("input",{type:"number",value:Y.damagePerCorrect,onChange:q=>re({...Y,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:Y.classType,onChange:q=>re({...Y,classType:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Tr).map(q=>s.jsx("option",{value:q,children:q},q))]})]})]}),s.jsx(xg,{availableSections:gn,selectedSections:Y.targetSections,onChange:q=>re({...Y,targetSections:q})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),s.jsx("input",{type:"datetime-local",value:Y.deadline,onChange:q=>re({...Y,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),s.jsx("input",{type:"number",value:Y.rewardXp,onChange:q=>re({...Y,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),s.jsx("input",{type:"number",value:Y.rewardFlux,onChange:q=>re({...Y,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),s.jsxs("select",{value:Y.rewardItemRarity,onChange:q=>re({...Y,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",ye.length," active)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(pj).map(([q,Se])=>{const Te=ye.find(ke=>ke.type===q);return s.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${Te?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[s.jsxs("button",{type:"button",onClick:()=>bn(q),className:"w-full text-left",children:[s.jsx("div",{className:"text-[10px] font-bold text-white",children:Se.name}),s.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:Se.description})]}),Te&&Se.hasValue&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("input",{type:"number",value:Te.value??Se.defaultValue,onChange:ke=>Lr(q,parseInt(ke.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),s.jsx("span",{className:"text-[9px] text-gray-500",children:Se.unit})]})]},q)})})]}),Ee.length>0&&s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Ee.filter(q=>q.classType===Y.classType||q.classType==="GLOBAL"||Y.classType==="GLOBAL").map(q=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),s.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),s.jsxs("button",{type:"button",onClick:()=>Zr(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",Y.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:mo,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${be?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:be?s.jsxs(s.Fragment,{children:[s.jsx(Ao,{className:"w-3 h-3"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(nf,{className:"w-3 h-3"})," Copy AI Prompt"]})}),s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(Bu,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Ye,type:"file",accept:".json,.txt",onChange:vl,className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:Ja,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Manual"]})]})]}),nt&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[s.jsx(Mn,{className:"w-4 h-4 flex-shrink-0"}),nt,s.jsx("button",{type:"button",onClick:()=>Ot(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Mn,{className:"w-3 h-3"})})]}),Y.questions.length===0&&s.jsxs("div",{className:"text-center py-6 space-y-2",children:[s.jsx(Zv,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),s.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",s.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",s.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),Y.questions.map((q,Se)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",Se+1]}),s.jsx("textarea",{value:q.stem,onChange:Te=>Ci(Se,"stem",Te.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),s.jsx("button",{type:"button",onClick:()=>wi(Se),className:"text-gray-600 hover:text-red-400 mt-4",children:s.jsx(Fr,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((Te,ke)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>Ci(Se,"correctAnswer",ke),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===ke?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:s.jsx(Ao,{className:"w-3 h-3"})}),s.jsx("input",{value:Te,onChange:gt=>ps(Se,ke,gt.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+ke)}`,required:!0})]},ke))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:q.difficulty,onChange:Te=>Ci(Se,"difficulty",Te.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Te=>Ci(Se,"damageBonus",parseInt(Te.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),s.jsxs("div",{className:"flex gap-3",children:[!Ne&&s.jsx("button",{type:"button",onClick:async()=>{if(Y.questions.length===0){r.error("Add at least one question.");return}const q=[...new Set(Y.questions.map(Te=>Te.bankId).filter(Boolean))],Se={id:Math.random().toString(36).substring(2,12),bossName:Y.bossName,description:Y.description,maxHp:Y.maxHp,currentHp:Y.maxHp,classType:Y.classType,isActive:!1,deadline:Y.deadline?new Date(Y.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:Y.damagePerCorrect,questions:Y.questions.map(Te=>({id:Te.id,stem:Te.stem,options:Te.options.filter(ke=>ke.trim()),correctAnswer:Te.correctAnswer,difficulty:Te.difficulty,...Te.damageBonus>0?{damageBonus:Te.damageBonus}:{},...Te.bankId?{bankId:Te.bankId}:{}})),rewards:{xp:Y.rewardXp,flux:Y.rewardFlux,...Y.rewardItemRarity?{itemRarity:Y.rewardItemRarity}:{}},...Y.targetSections.length>0?{targetSections:Y.targetSections}:{},bossAppearance:{bossType:Y.bossType,hue:Y.bossHue},...ye.length>0?{modifiers:ye}:{},...q.length>0?{questionBankIds:q}:{}};await Ae.saveBossQuiz(Se),r.success("Quiz boss saved as draft (inactive)."),He(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:`${Ne?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:Ne?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),s.jsx(Bi,{isOpen:zt,onClose:()=>de(!1),title:Fe?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:nr,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),s.jsx("input",{value:qe.name,onChange:q=>Ze({...qe,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),s.jsxs("select",{value:qe.classType,onChange:q=>Ze({...qe,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Tr).map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("input",{value:qe.description,onChange:q=>Ze({...qe,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",qe.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(Bu,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:At,type:"file",accept:".json,.txt",onChange:q=>dn(q,"bank"),className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:()=>Ze(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Manual"]})]})]}),St&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[s.jsx(Mn,{className:"w-4 h-4 flex-shrink-0"})," ",St,s.jsx("button",{type:"button",onClick:()=>lr(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Mn,{className:"w-3 h-3"})})]}),qe.questions.length===0&&s.jsxs("div",{className:"text-center py-6",children:[s.jsx(Zv,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),qe.questions.map((q,Se)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:q.stem,onChange:Te=>{const ke=[...qe.questions];ke[Se]={...ke[Se],stem:Te.target.value},Ze({...qe,questions:ke})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${Se+1}`,required:!0})}),s.jsx("button",{type:"button",onClick:()=>Ze(Te=>({...Te,questions:Te.questions.filter((ke,gt)=>gt!==Se)})),className:"text-gray-600 hover:text-red-400 mt-2",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((Te,ke)=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>{const gt=[...qe.questions];gt[Se]={...gt[Se],correctAnswer:ke},Ze({...qe,questions:gt})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===ke?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:s.jsx(Ao,{className:"w-2.5 h-2.5"})}),s.jsx("input",{value:Te,onChange:gt=>{const Bt=[...qe.questions],It=[...Bt[Se].options];It[ke]=gt.target.value,Bt[Se]={...Bt[Se],options:It},Ze({...qe,questions:Bt})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+ke)}`,required:!0})]},ke))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:q.difficulty,onChange:Te=>{const ke=[...qe.questions];ke[Se]={...ke[Se],difficulty:Te.target.value},Ze({...qe,questions:ke})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Te=>{const ke=[...qe.questions];ke[Se]={...ke[Se],damageBonus:parseInt(Te.target.value)||0},Ze({...qe,questions:ke})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:Fe?"Update Question Bank":"Create Question Bank"})]})}),s.jsx(Bi,{isOpen:!!xt,onClose:()=>{Dt(null),rt([])},title:xt?`Endgame: ${xt.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:Le?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):xt&&s.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-white",children:Pt.length}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-amber-400",children:Pt.reduce((q,Se)=>{var Te;return q+(((Te=Se.combatStats)==null?void 0:Te.totalDamageDealt)||0)},0).toLocaleString()}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-green-400",children:Pt.reduce((q,Se)=>{var Te;return q+(((Te=Se.combatStats)==null?void 0:Te.questionsCorrect)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-red-400",children:Pt.reduce((q,Se)=>{var Te;return q+(((Te=Se.combatStats)==null?void 0:Te.criticalHits)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[s.jsx(qH,{className:"w-4 h-4"})," Top Damage Dealers"]}),s.jsx("div",{className:"space-y-2",children:[...Pt].sort((q,Se)=>{var Te,ke;return(((Te=Se.combatStats)==null?void 0:Te.totalDamageDealt)||0)-(((ke=q.combatStats)==null?void 0:ke.totalDamageDealt)||0)}).slice(0,5).map((q,Se)=>{var Er;const Te=t.find(an=>an.id===q.userId),ke=q.combatStats,gt=Se,Bt=gt<$O.length?$O[gt]:1,It=((ke==null?void 0:ke.questionsAttempted)||0)>=Qm&&((ke==null?void 0:ke.questionsCorrect)||0)>=Xm,ar=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${Se===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[s.jsxs("div",{className:`text-xl font-black w-8 text-center ${ar[Se]||"text-gray-500"}`,children:["#",Se+1]}),(Te==null?void 0:Te.avatarUrl)&&s.jsx("img",{src:Te.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-white truncate",children:(Te==null?void 0:Te.name)||q.userId}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{className:"text-amber-400 font-bold",children:[((Er=ke==null?void 0:ke.totalDamageDealt)==null?void 0:Er.toLocaleString())||0," dmg"]}),s.jsxs("span",{children:[(ke==null?void 0:ke.questionsCorrect)||0,"/",(ke==null?void 0:ke.questionsAttempted)||0," correct"]}),s.jsxs("span",{children:[(ke==null?void 0:ke.criticalHits)||0," crits"]}),s.jsxs("span",{children:["Streak: ",(ke==null?void 0:ke.longestStreak)||0]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:It?s.jsxs("span",{className:`text-xs font-bold ${Se<5?ar[Se]:"text-gray-400"}`,children:[Bt,"x"]}):s.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[s.jsx(o0,{className:"w-4 h-4"})," All Participants"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[s.jsx("th",{className:"pb-2 pl-2",children:"#"}),s.jsx("th",{className:"pb-2",children:"Student"}),s.jsx("th",{className:"pb-2 text-center",children:"Damage"}),s.jsx("th",{className:"pb-2 text-center",children:"Correct"}),s.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),s.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),s.jsx("th",{className:"pb-2 text-center",children:"Crits"}),s.jsx("th",{className:"pb-2 text-center",children:"Streak"}),s.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),s.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:[...Pt].sort((q,Se)=>{var Te,ke;return(((Te=Se.combatStats)==null?void 0:Te.totalDamageDealt)||0)-(((ke=q.combatStats)==null?void 0:ke.totalDamageDealt)||0)}).map((q,Se)=>{const Te=t.find(Er=>Er.id===q.userId),ke=q.combatStats,gt=(ke==null?void 0:ke.questionsAttempted)||0,Bt=(ke==null?void 0:ke.questionsCorrect)||0,It=gt>0?Math.round(Bt/gt*100):0,ar=gt>=Qm&&Bt>=Xm;return s.jsxs("tr",{className:"hover:bg-white/5",children:[s.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:Se+1}),s.jsx("td",{className:"py-2 font-bold text-white",children:(Te==null?void 0:Te.name)||q.userId.slice(0,8)}),s.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((ke==null?void 0:ke.totalDamageDealt)||0).toLocaleString()}),s.jsx("td",{className:"py-2 text-center text-green-400",children:Bt}),s.jsx("td",{className:"py-2 text-center text-gray-400",children:gt}),s.jsxs("td",{className:"py-2 text-center text-gray-300",children:[It,"%"]}),s.jsx("td",{className:"py-2 text-center text-red-400",children:(ke==null?void 0:ke.criticalHits)||0}),s.jsx("td",{className:"py-2 text-center text-purple-400",children:(ke==null?void 0:ke.longestStreak)||0}),s.jsx("td",{className:"py-2 text-center text-cyan-400",children:(ke==null?void 0:ke.damageReduced)||0}),s.jsx("td",{className:"py-2 text-center",children:ar?s.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):s.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const Se=Pt.reduce((It,ar)=>{var Er,an;return It+(((an=(Er=ar.combatStats)==null?void 0:Er.correctByDifficulty)==null?void 0:an[q])||0)},0),Te=Pt.reduce((It,ar)=>{var Er,an;return It+(((an=(Er=ar.combatStats)==null?void 0:Er.incorrectByDifficulty)==null?void 0:an[q])||0)},0),ke=Se+Te,gt=ke>0?Math.round(Se/ke*100):0,Bt=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return s.jsxs("div",{className:`bg-${Bt}-500/5 border border-${Bt}-500/20 rounded-xl p-3 text-center`,children:[s.jsx("div",{className:`text-[10px] font-bold text-${Bt}-400 uppercase mb-1`,children:q}),s.jsxs("div",{className:"text-lg font-black text-white",children:[gt,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[Se,"/",ke," correct"]})]},q)})})]})]})})]})},rhe=({students:t,availableSections:e,fullPage:r})=>{const{confirm:n}=Po(),a=Ma(),[i,o]=j.useState({}),[c,d]=j.useState(Tr.AP_PHYSICS),[h,p]=j.useState(!1),[m,x]=j.useState(""),[y,w]=j.useState(null),[N,S]=j.useState(""),[E,C]=j.useState(""),M=j.useMemo(()=>Object.values(Tr).filter(O=>O!=="Uncategorized"),[]);j.useEffect(()=>{const O=Ae.subscribeToStudentGroups(c,$=>{o(B=>({...B,[c]:$}))});return()=>O()},[c]);const L=i[c]||[],I=j.useMemo(()=>t.filter(O=>{var $;return O.role==="STUDENT"&&(($=O.enrolledClasses)==null?void 0:$.includes(c))}).filter(O=>!N||O.section===N),[t,c,N]),R=async()=>{if(m.trim())try{await Ae.createStudentGroup(m.trim(),c,[]),x(""),p(!1),a.success("Group created.")}catch{a.error("Failed to create group.")}},A=async O=>{await n({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await Ae.deleteStudentGroup(O)},T=async(O,$)=>{if(O.members.some(G=>G.userId===$.id))return;const B=[...O.members,{userId:$.id,userName:$.name}];await Ae.updateStudentGroup(O.id,{members:B})},k=async(O,$)=>{const B=O.members.filter(G=>G.userId!==$);await Ae.updateStudentGroup(O.id,{members:B})},F=j.useMemo(()=>{var $;const O={};for(const B of M)O[B]=(($=i[B])==null?void 0:$.length)||0;return O},[M,i]);return r?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Student Groups"}),s.jsx("p",{className:"text-gray-400",children:"Create and manage student groups across all classes."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-cyan-900/20",children:[s.jsx(cn,{className:"w-4 h-4"})," New Group"]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:M.map(O=>s.jsxs("button",{onClick:()=>d(O),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${c===O?"bg-purple-600/80 text-white border-purple-500/50 shadow-lg":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white"}`,children:[O,F[O]>0&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full ${c===O?"bg-white/20":"bg-white/10"}`,children:F[O]})]},O))}),h&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-white mb-3",children:["Create Group for ",c]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:m,onChange:O=>x(O.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-cyan-500 transition",onKeyDown:O=>O.key==="Enter"&&R(),autoFocus:!0}),s.jsx("button",{onClick:R,disabled:!m.trim(),className:"px-5 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>{p(!1),x("")},className:"p-3 text-gray-400 hover:text-white transition",children:s.jsx(Mn,{className:"w-5 h-5"})})]})]}),L.length===0?s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-12 backdrop-blur-md text-center",children:[s.jsx(us,{className:"w-14 h-14 mx-auto mb-4 text-gray-600"}),s.jsxs("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:["No groups for ",c]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a group to get started with collaborative assignments and group chat."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:L.map(O=>s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md hover:border-white/20 transition-all",children:[s.jsx("div",{className:"p-5 border-b border-white/5",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:O.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[O.members.length," member",O.members.length!==1?"s":"",s.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),c]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>w(y===O.id?null:O.id),className:`p-2 rounded-lg transition ${y===O.id?"bg-cyan-500/20 text-cyan-400":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Add members",children:s.jsx(ib,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>A(O.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition",title:"Delete group",children:s.jsx(Fr,{className:"w-4 h-4"})})]})]})}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[O.members.map($=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/10 transition group/member",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[9px] font-bold text-purple-400",children:$.userName.charAt(0)}),$.userName,s.jsx("button",{onClick:()=>k(O,$.userId),className:"text-gray-600 hover:text-red-400 transition opacity-0 group-hover/member:opacity-100",children:s.jsx(tce,{className:"w-3 h-3"})})]},$.userId)),O.members.length===0&&s.jsxs("p",{className:"text-xs text-gray-600 italic py-2",children:["No members yet  click the ",s.jsx(ib,{className:"w-3 h-3 inline"})," button to assign students."]})]}),y===O.id&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Gf,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:E,onChange:$=>C($.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg pl-8 pr-3 py-1.5 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"})]}),e.length>0&&s.jsxs("select",{value:N,onChange:$=>S($.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-white",children:[s.jsx("option",{value:"",children:"All Sections"}),e.map($=>s.jsx("option",{value:$,children:$},$))]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-40 overflow-y-auto custom-scrollbar",children:I.filter($=>!O.members.some(B=>B.userId===$.id)).filter($=>!E||$.name.toLowerCase().includes(E.toLowerCase())).map($=>s.jsxs("button",{onClick:()=>T(O,$),className:"px-3 py-1.5 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-xs text-cyan-300 font-medium transition",children:["+ ",$.name]},$.id))})]})]})]},O.id))})]}):s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx(us,{className:"w-5 h-5 text-cyan-400"})," Student Groups"]}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Groups have moved to the sidebar for a better experience."})]})},nhe={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:s.jsx(QH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:s.jsx(VH,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:s.jsx(nw,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},ahe=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=j.useState(null),[a,i]=j.useState(!1),o=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[s.jsxs("button",{onClick:()=>o("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[s.jsx(nw,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),s.jsxs("button",{onClick:()=>o("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[s.jsx(VH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),s.jsxs("button",{onClick:()=>o("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[s.jsx(QH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&s.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[s.jsx(of,{className:"w-6 h-6"}),e&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=nhe[r];return s.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[s.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),s.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?s.jsx(Zj,{className:"w-4 h-4"}):s.jsx(WH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:s.jsx(Mn,{className:"w-4 h-4"})})]})]}),!a&&s.jsx("div",{className:"flex-1 bg-white relative",children:s.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},ihe=["","","","","","","",""],she=["","","","","","","","","","","","","","","","","","","","","","","","","",""],ohe=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:o,onOpenResource:c})=>{var wt,zt;const{confirm:d}=Po(),[h,p]=j.useState([]),[m,x]=j.useState(""),[y,w]=j.useState("Main"),[N,S]=j.useState(!1),[E,C]=j.useState(!1),[M,L]=j.useState(null),[I,R]=j.useState(null),[A,T]=j.useState([]),[k,F]=j.useState([]),[O,$]=j.useState(null),[B,G]=j.useState([]),[Q,H]=j.useState(null),K=j.useRef(null),te=j.useRef(null),ae=j.useRef(null),ce=j.useMemo(()=>Object.values(Tr).filter(de=>{var Ze;if(de===Tr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const Fe=a.find(At=>At.className===de),jt=(Ze=t.enrolledClasses)==null?void 0:Ze.includes(de),qe=Fe?Fe.features.communications:!0;return jt&&qe}),[a,t.role,t.enrolledClasses]),[X,ie]=j.useState(ce[0]||"");j.useEffect(()=>{(!X||!ce.includes(X))&&ce.length>0&&ie(ce[0])},[ce]);const ne=j.useMemo(()=>y==="Resources"&&I?`res_${I}`:y==="Resources"&&!I?"":y==="Groups"&&O?`group_${O}`:y==="Groups"&&!O||!X?"":`class_${X.replace(/\s+/g,"_").toLowerCase()}`,[X,y,I,O]),ve=j.useRef(null),pe=j.useMemo(()=>n.filter(de=>!(de.classType!==X||de.status==="DRAFT"||de.status==="ARCHIVED"||de.scheduledAt&&new Date(de.scheduledAt)>new Date)),[n,X]),Be=j.useMemo(()=>h.filter(de=>{var Fe;return de.isGlobalPinned||((Fe=de.pinnedBy)==null?void 0:Fe.includes(t.id))}),[h,t.id]),Ge=j.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),He=j.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("class_")),[i]),Ne=j.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("res_")),[i]),We=j.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(de=>de.startsWith("group_")),[i]),Y=j.useRef(!1);j.useEffect(()=>{if(!e){Y.current=!1;return}if(Y.current||!i||i.size===0)return;Y.current=!0;const de=Array.from(i)[0];if(de.startsWith("class_")){w("Main");const Fe=ce.find(jt=>`class_${jt.replace(/\s+/g,"_").toLowerCase()}`===de);Fe&&ie(Fe)}else de.startsWith("res_")?(w("Resources"),R(de.replace("res_",""))):de.startsWith("group_")&&(w("Groups"),$(de.replace("group_","")))},[e,i,ce]),j.useEffect(()=>{!e||!ne||o==null||o(ne)},[e,ne,o]),j.useEffect(()=>{if(!e)return;const de=t.role==="ADMIN"?Ae.subscribeToStudentGroups(X,T):Ae.subscribeToMyGroups(t.id,T);return()=>de()},[e,t.id,t.role,X]),j.useEffect(()=>{if(!e)return;let de="";if(y==="Resources"&&I?de=`res_${I}`:y==="Groups"&&O?de=`group_${O}`:(y==="Main"||y==="Bookmarks")&&(de=`class_${X.replace(/\s+/g,"_").toLowerCase()}`),!de)return;S(!0);const Fe=Ae.subscribeToChannelMessages(de,jt=>{p(jt),S(!1)});return()=>{Fe()}},[e,X,y,I,O]),j.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const de=Ae.subscribeToFlaggedMessages(jt=>{G(jt)}),Fe=Ae.subscribeToAllGroups(F);return()=>{de(),Fe()}},[e,t.role]),j.useEffect(()=>{ve.current&&(ve.current.scrollTop=ve.current.scrollHeight)},[h,N,y,I]),j.useEffect(()=>{const de=Fe=>{K.current&&!K.current.contains(Fe.target)&&C(!1),te.current&&!te.current.contains(Fe.target)&&L(null)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]),j.useEffect(()=>{if(!e)return;const de=Fe=>{Fe.key==="Escape"&&r()};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[e,r]);const re=j.useCallback(async de=>{if(de.preventDefault(),!(!m.trim()||!ne)&&!Ge)try{await Ae.sendMessage(t,m,ne,X),x(""),C(!1)}catch(Fe){console.error("Failed to send message:",Fe)}},[m,ne,Ge,t,X]),be=j.useCallback(async(de,Fe)=>{try{await Ae.toggleReaction(de,Fe,t.id),L(null)}catch(jt){console.error(jt)}},[t.id]),we=j.useCallback(async de=>{try{await Ae.togglePersonalPin(de,t.id)}catch(Fe){console.error(Fe)}},[t.id]),Ye=j.useCallback(async(de,Fe)=>{try{await Ae.toggleGlobalPin(de,!Fe)}catch(jt){console.error(jt)}},[]),nt=async de=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Ae.deleteMessage(de)}catch(Fe){console.error(Fe)}},Ot=async de=>{try{await Ae.unflagMessage(de),await Ae.resolveFlagByMessageId(de)}catch(Fe){console.error(Fe)}},Ee=async de=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Ae.resolveFlagByMessageId(de),await Ae.deleteMessage(de)}catch(Fe){console.error(Fe)}},ut=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Ae.INDEFINITE_MUTE}],Nt=async de=>{if(Q){try{await Ae.muteUser(Q.senderId,de)}catch(Fe){console.error(Fe)}H(null)}};return j.useEffect(()=>{const de=Fe=>{ae.current&&!ae.current.contains(Fe.target)&&H(null)};return Q&&document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[Q]),e?s.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[y==="Resources"&&I||y==="Groups"&&O?s.jsx("button",{onClick:()=>{R(null),$(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:s.jsx(Sle,{className:"w-5 h-5"})}):s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:s.jsx(of,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:y==="Moderation"?"Moderation Queue":y==="Groups"?O?(wt=A.find(de=>de.id===O))==null?void 0:wt.name:"My Groups":y==="Resources"?I?(zt=pe.find(de=>de.id===I))==null?void 0:zt.title:"Class Resources":X}),y!=="Resources"&&y!=="Moderation"&&y!=="Groups"&&ce.length>1&&s.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:X}),s.jsx(si,{className:"w-3 h-3 text-gray-500 ml-1"}),s.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:X,onChange:de=>ie(de.target.value),children:ce.map(de=>s.jsx("option",{value:de,children:de},de))})]})]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:s.jsx(Mn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[s.jsxs("button",{onClick:()=>w("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${y==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(of,{className:"w-5 h-5"}),He&&y!=="Main"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("button",{onClick:()=>w("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${y==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(Oa,{className:"w-5 h-5"}),Ne&&y!=="Resources"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(A.length>0||t.role==="ADMIN")&&s.jsxs("button",{onClick:()=>{w("Groups"),$(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${y==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(us,{className:"w-5 h-5"}),We&&y!=="Groups"?s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):A.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:A.length})]}),s.jsx("button",{onClick:()=>w("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${y==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:s.jsx(IR,{className:"w-5 h-5"})}),t.role==="ADMIN"&&s.jsxs("button",{onClick:()=>w("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${y==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(cs,{className:"w-5 h-5"}),B.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:B.length})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col relative",children:[y==="Resources"&&!I&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:pe.map(de=>s.jsxs("div",{onClick:()=>R(de.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${de.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[s.jsx(Mle,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${de.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:de.title}),s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:de.unit})]})]}),s.jsx("button",{onClick:Fe=>{Fe.stopPropagation(),c==null||c(de.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:s.jsx(J2,{className:"w-4 h-4"})})]},de.id))})}),y==="Groups"&&!O&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:A.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(us,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No groups yet"}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):A.map(de=>s.jsx("div",{onClick:()=>$(de.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${de.id}`)?"border-cyan-500/40":"border-white/5"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[s.jsx(us,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${de.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:de.name}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[de.members.length," member",de.members.length!==1?"s":"","  ",de.classType]})]})]})},de.id))})}),y==="Moderation"&&t.role==="ADMIN"&&s.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Ls,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[B.length," item",B.length!==1?"s":""]})]}),B.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(cs,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):s.jsx("div",{className:"space-y-3",children:B.map(de=>{var Fe,jt,qe;return s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300",children:de.senderName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(de.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-sm text-gray-200 mb-1",children:de.content}),de.systemNote&&s.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:de.systemNote}),s.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(Fe=de.channelId)!=null&&Fe.startsWith("group_")?`Group: ${((jt=k.find(Ze=>Ze.id===de.channelId.replace("group_","")))==null?void 0:jt.name)||de.channelId.replace("group_","")}`:((qe=de.channelId)==null?void 0:qe.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>Ot(de.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[s.jsx(Ao,{className:"w-3.5 h-3.5"})," Approve"]}),s.jsxs("button",{onClick:()=>Ee(de.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[s.jsx(Fr,{className:"w-3.5 h-3.5"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((Q==null?void 0:Q.id)===`flag-${de.id}`?null:{id:`flag-${de.id}`,senderId:de.senderId,senderName:de.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:s.jsx(nb,{className:"w-3.5 h-3.5"})}),(Q==null?void 0:Q.id)===`flag-${de.id}`&&s.jsxs("div",{ref:ae,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",de.senderName]}),ut.map(Ze=>s.jsx("button",{onClick:()=>Nt(Ze.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:Ze.label},Ze.minutes))]})]})]})]},de.id)})})]}),(y==="Main"||y==="Bookmarks"||y==="Resources"&&I||y==="Groups"&&O)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:ve,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(y==="Bookmarks"?Be:h).map((de,Fe,jt)=>{var At;const qe=de.senderId===t.id,Ze=Fe>0&&jt[Fe-1].senderId===de.senderId&&new Date(de.timestamp).getTime()-new Date(jt[Fe-1].timestamp).getTime()<3e5;return s.jsxs("div",{className:`group flex flex-col ${qe?"items-end":"items-start"} ${Ze?"mt-1":"mt-4"}`,children:[!Ze&&s.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("span",{className:`text-xs font-bold ${qe?"text-indigo-400":"text-gray-300"}`,children:de.senderName}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(de.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),de.isGlobalPinned&&s.jsx(PR,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),s.jsxs("div",{className:"relative max-w-[85%]",children:[s.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${qe?"right-0":"left-0"} z-30`,children:[s.jsx("button",{onClick:()=>L(de.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:s.jsx(BR,{className:"w-3.5 h-3.5 text-yellow-400"})}),s.jsx("button",{onClick:()=>we(de.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(At=de.pinnedBy)!=null&&At.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:s.jsx(IR,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Ye(de.id,!!de.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${de.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:s.jsx(PR,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>nt(de.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})}),de.senderId!==t.id&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((Q==null?void 0:Q.id)===de.id?null:{id:de.id,senderId:de.senderId,senderName:de.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:s.jsx(nb,{className:"w-3.5 h-3.5"})}),(Q==null?void 0:Q.id)===de.id&&s.jsxs("div",{ref:ae,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",de.senderName]}),ut.map(St=>s.jsx("button",{onClick:()=>Nt(St.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:St.label},St.minutes))]})]})]})]}),M===de.id&&s.jsx("div",{ref:te,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${qe?"right-0":"left-0"}`,children:ihe.map(St=>s.jsx("button",{onClick:()=>be(de.id,St),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:St},St))}),s.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${qe?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${de.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${de.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:de.content}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:de.reactions&&Object.entries(de.reactions).map(([St,lr])=>{const ye=lr;return ye.length>0&&s.jsxs("button",{onClick:()=>be(de.id,St),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${ye.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[St," ",ye.length]},St)})})]})]},de.id)})}),s.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:s.jsxs("form",{onSubmit:re,className:"relative flex items-center gap-2",children:[E&&s.jsx("div",{ref:K,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:she.map(de=>s.jsx("button",{type:"button",onClick:()=>x(Fe=>Fe+de),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:de},de))}),s.jsx("button",{type:"button",onClick:()=>C(!E),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:s.jsx(BR,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:m,onChange:de=>x(de.target.value),placeholder:Ge?"Transmission Disabled":"Type message...",disabled:!ne||Ge,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),s.jsx("button",{type:"submit",disabled:!ne||Ge||!m.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:s.jsx(yE,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function lW(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=lW(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function wr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=lW(t))&&(n&&(n+=" "),n+=e);return n}var K3,qM;function fs(){if(qM)return K3;qM=1;var t=Array.isArray;return K3=t,K3}var Q3,HM;function cW(){if(HM)return Q3;HM=1;var t=typeof my=="object"&&my&&my.Object===Object&&my;return Q3=t,Q3}var X3,GM;function gl(){if(GM)return X3;GM=1;var t=cW(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return X3=r,X3}var Y3,WM;function Ox(){if(WM)return Y3;WM=1;var t=gl(),e=t.Symbol;return Y3=e,Y3}var J3,KM;function lhe(){if(KM)return J3;KM=1;var t=Ox(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var p=n.call(o);return h&&(c?o[a]=d:delete o[a]),p}return J3=i,J3}var Z3,QM;function che(){if(QM)return Z3;QM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return Z3=r,Z3}var eS,XM;function Nc(){if(XM)return eS;XM=1;var t=Ox(),e=lhe(),r=che(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return eS=o,eS}var tS,YM;function _c(){if(YM)return tS;YM=1;function t(e){return e!=null&&typeof e=="object"}return tS=t,tS}var rS,JM;function Xf(){if(JM)return rS;JM=1;var t=Nc(),e=_c(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return rS=n,rS}var nS,ZM;function qE(){if(ZM)return nS;ZM=1;var t=fs(),e=Xf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return nS=a,nS}var aS,eD;function Ku(){if(eD)return aS;eD=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return aS=t,aS}var iS,tD;function HE(){if(tD)return iS;tD=1;var t=Nc(),e=Ku(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return iS=o,iS}var sS,rD;function uhe(){if(rD)return sS;rD=1;var t=gl(),e=t["__core-js_shared__"];return sS=e,sS}var oS,nD;function dhe(){if(nD)return oS;nD=1;var t=uhe(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return oS=r,oS}var lS,aD;function uW(){if(aD)return lS;aD=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return lS=r,lS}var cS,iD;function hhe(){if(iD)return cS;iD=1;var t=HE(),e=dhe(),r=Ku(),n=uW(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(x){if(!r(x)||e(x))return!1;var y=t(x)?p:i;return y.test(n(x))}return cS=m,cS}var uS,sD;function fhe(){if(sD)return uS;sD=1;function t(e,r){return e==null?void 0:e[r]}return uS=t,uS}var dS,oD;function j0(){if(oD)return dS;oD=1;var t=hhe(),e=fhe();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return dS=r,dS}var hS,lD;function dw(){if(lD)return hS;lD=1;var t=j0(),e=t(Object,"create");return hS=e,hS}var fS,cD;function phe(){if(cD)return fS;cD=1;var t=dw();function e(){this.__data__=t?t(null):{},this.size=0}return fS=e,fS}var pS,uD;function mhe(){if(uD)return pS;uD=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return pS=t,pS}var mS,dD;function ghe(){if(dD)return mS;dD=1;var t=dw(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var c=o[i];return c===e?void 0:c}return n.call(o,i)?o[i]:void 0}return mS=a,mS}var gS,hD;function xhe(){if(hD)return gS;hD=1;var t=dw(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return gS=n,gS}var xS,fD;function yhe(){if(fD)return xS;fD=1;var t=dw(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return xS=r,xS}var yS,pD;function vhe(){if(pD)return yS;pD=1;var t=phe(),e=mhe(),r=ghe(),n=xhe(),a=yhe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,yS=i,yS}var vS,mD;function bhe(){if(mD)return vS;mD=1;function t(){this.__data__=[],this.size=0}return vS=t,vS}var bS,gD;function GE(){if(gD)return bS;gD=1;function t(e,r){return e===r||e!==e&&r!==r}return bS=t,bS}var wS,xD;function hw(){if(xD)return wS;xD=1;var t=GE();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return wS=e,wS}var SS,yD;function whe(){if(yD)return SS;yD=1;var t=hw(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():r.call(i,o,1),--this.size,!0}return SS=n,SS}var NS,vD;function She(){if(vD)return NS;vD=1;var t=hw();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return NS=e,NS}var _S,bD;function Nhe(){if(bD)return _S;bD=1;var t=hw();function e(r){return t(this.__data__,r)>-1}return _S=e,_S}var jS,wD;function _he(){if(wD)return jS;wD=1;var t=hw();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return jS=e,jS}var TS,SD;function fw(){if(SD)return TS;SD=1;var t=bhe(),e=whe(),r=She(),n=Nhe(),a=_he();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,TS=i,TS}var AS,ND;function WE(){if(ND)return AS;ND=1;var t=j0(),e=gl(),r=t(e,"Map");return AS=r,AS}var ES,_D;function jhe(){if(_D)return ES;_D=1;var t=vhe(),e=fw(),r=WE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return ES=n,ES}var kS,jD;function The(){if(jD)return kS;jD=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return kS=t,kS}var CS,TD;function pw(){if(TD)return CS;TD=1;var t=The();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return CS=e,CS}var OS,AD;function Ahe(){if(AD)return OS;AD=1;var t=pw();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return OS=e,OS}var IS,ED;function Ehe(){if(ED)return IS;ED=1;var t=pw();function e(r){return t(this,r).get(r)}return IS=e,IS}var RS,kD;function khe(){if(kD)return RS;kD=1;var t=pw();function e(r){return t(this,r).has(r)}return RS=e,RS}var MS,CD;function Che(){if(CD)return MS;CD=1;var t=pw();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return MS=e,MS}var DS,OD;function KE(){if(OD)return DS;OD=1;var t=jhe(),e=Ahe(),r=Ehe(),n=khe(),a=Che();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,DS=i,DS}var PS,ID;function dW(){if(ID)return PS;ID=1;var t=KE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,PS=r,PS}var LS,RD;function Ohe(){if(RD)return LS;RD=1;var t=dW(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return LS=r,LS}var BS,MD;function Ihe(){if(MD)return BS;MD=1;var t=Ohe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,c,d,h){i.push(d?h.replace(r,"$1"):c||o)}),i});return BS=n,BS}var $S,DD;function QE(){if(DD)return $S;DD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return $S=t,$S}var zS,PD;function Rhe(){if(PD)return zS;PD=1;var t=Ox(),e=QE(),r=fs(),n=Xf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return zS=o,zS}var US,LD;function hW(){if(LD)return US;LD=1;var t=Rhe();function e(r){return r==null?"":t(r)}return US=e,US}var VS,BD;function fW(){if(BD)return VS;BD=1;var t=fs(),e=qE(),r=Ihe(),n=hW();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return VS=a,VS}var FS,$D;function mw(){if($D)return FS;$D=1;var t=Xf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return FS=e,FS}var qS,zD;function XE(){if(zD)return qS;zD=1;var t=fW(),e=mw();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return qS=r,qS}var HS,UD;function pW(){if(UD)return HS;UD=1;var t=XE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return HS=e,HS}var Mhe=pW();const io=tn(Mhe);var GS,VD;function Dhe(){if(VD)return GS;VD=1;function t(e){return e==null}return GS=t,GS}var Phe=Dhe();const xr=tn(Phe);var WS,FD;function Lhe(){if(FD)return WS;FD=1;var t=Nc(),e=fs(),r=_c(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return WS=a,WS}var Bhe=Lhe();const d0=tn(Bhe);var $he=HE();const dr=tn($he);var zhe=Ku();const Yf=tn(zhe);var KS={exports:{}},on={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD;function Uhe(){if(qD)return on;qD=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),w;w=Symbol.for("react.module.reference");function N(S){if(typeof S=="object"&&S!==null){var E=S.$$typeof;switch(E){case t:switch(S=S.type,S){case r:case a:case n:case h:case p:return S;default:switch(S=S&&S.$$typeof,S){case c:case o:case d:case x:case m:case i:return S;default:return E}}case e:return E}}}return on.ContextConsumer=o,on.ContextProvider=i,on.Element=t,on.ForwardRef=d,on.Fragment=r,on.Lazy=x,on.Memo=m,on.Portal=e,on.Profiler=a,on.StrictMode=n,on.Suspense=h,on.SuspenseList=p,on.isAsyncMode=function(){return!1},on.isConcurrentMode=function(){return!1},on.isContextConsumer=function(S){return N(S)===o},on.isContextProvider=function(S){return N(S)===i},on.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},on.isForwardRef=function(S){return N(S)===d},on.isFragment=function(S){return N(S)===r},on.isLazy=function(S){return N(S)===x},on.isMemo=function(S){return N(S)===m},on.isPortal=function(S){return N(S)===e},on.isProfiler=function(S){return N(S)===a},on.isStrictMode=function(S){return N(S)===n},on.isSuspense=function(S){return N(S)===h},on.isSuspenseList=function(S){return N(S)===p},on.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===r||S===a||S===n||S===h||S===p||S===y||typeof S=="object"&&S!==null&&(S.$$typeof===x||S.$$typeof===m||S.$$typeof===i||S.$$typeof===o||S.$$typeof===d||S.$$typeof===w||S.getModuleId!==void 0)},on.typeOf=N,on}var HD;function Vhe(){return HD||(HD=1,KS.exports=Uhe()),KS.exports}var Fhe=Vhe(),QS,GD;function mW(){if(GD)return QS;GD=1;var t=Nc(),e=_c(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return QS=n,QS}var XS,WD;function qhe(){if(WD)return XS;WD=1;var t=mW();function e(r){return t(r)&&r!=+r}return XS=e,XS}var Hhe=qhe();const Ix=tn(Hhe);var Ghe=mW();const Whe=tn(Ghe);var Eo=function(e){return e===0?0:e>0?1:-1},Bd=function(e){return d0(e)&&e.indexOf("%")===e.length-1},bt=function(e){return Whe(e)&&!Ix(e)},Khe=function(e){return xr(e)},Ga=function(e){return bt(e)||d0(e)},Qhe=0,Rx=function(e){var r=++Qhe;return"".concat(e||"").concat(r)},ko=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bt(e)&&!d0(e))return n;var i;if(Bd(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return Ix(i)&&(i=n),a&&i>r&&(i=r),i},gu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Xhe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},ns=function(e,r){return bt(e)&&bt(r)?function(n){return e+n*(r-e)}:function(){return r}};function pb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):io(n,e))===r})}var Yhe=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,o=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,o+=h*h,c=Math.min(c,h),d=Math.max(d,h);var x=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:c,xmax:d,a:x,b:(a-x*n)/r}},Jhe=function(e,r){return bt(e)&&bt(r)?e-r:d0(e)&&d0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Bh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function pT(t){"@babel/helpers - typeof";return pT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pT(t)}var Zhe=["viewBox","children"],efe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],KD=["points","pathLength"],YS={svg:Zhe,polygon:KD,polyline:KD},YE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],mb=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(j.isValidElement(e)&&(n=e.props),!Yf(n))return null;var a={};return Object.keys(n).forEach(function(i){YE.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},tfe=function(e,r,n){return function(a){return e(r,n,a),null}},h0=function(e,r,n){if(!Yf(e)||pT(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];YE.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=tfe(o,r,n))}),a},rfe=["children"],nfe=["children"];function QD(t,e){if(t==null)return{};var r=afe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function afe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var XD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},nc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},YD=null,JS=null,JE=function t(e){if(e===YD&&Array.isArray(JS))return JS;var r=[];return j.Children.forEach(e,function(n){xr(n)||(Fhe.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),JS=r,YD=e,r};function Ds(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return nc(a)}):n=[nc(e)],JE(t).forEach(function(a){var i=io(a,"type.displayName")||io(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Es(t,e){var r=Ds(t,e);return r&&r[0]}var JD=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!bt(n)||n<=0||!bt(a)||a<=0)},ife=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sfe=function(e){return e&&e.type&&d0(e.type)&&ife.indexOf(e.type)>=0},ofe=function(e,r,n,a){var i,o=(i=YS==null?void 0:YS[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!dr(e)&&(a&&o.includes(r)||efe.includes(r))||n&&YE.includes(r)},Xt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(j.isValidElement(e)&&(a=e.props),!Yf(a))return null;var i={};return Object.keys(a).forEach(function(o){var c;ofe((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(i[o]=a[o])}),i},mT=function t(e,r){if(e===r)return!0;var n=j.Children.count(e);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return ZD(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!ZD(i,o))return!1}return!0},ZD=function(e,r){if(xr(e)&&xr(r))return!0;if(!xr(e)&&!xr(r)){var n=e.props||{},a=n.children,i=QD(n,rfe),o=r.props||{},c=o.children,d=QD(o,nfe);return a&&c?Bh(i,d)&&mT(a,c):!a&&!c?Bh(i,d):!1}return!1},eP=function(e,r){var n=[],a={};return JE(e).forEach(function(i,o){if(sfe(i))n.push(i);else if(i){var c=nc(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,o);n.push(m),a[c]=!0}}}),n},lfe=function(e){var r=e&&e.type;return r&&XD[r]?XD[r]:null},cfe=function(e,r){return JE(r).indexOf(e)},ufe=["children","width","height","viewBox","className","style","title","desc"];function gT(){return gT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gT.apply(this,arguments)}function dfe(t,e){if(t==null)return{};var r=hfe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xT(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,c=t.title,d=t.desc,h=dfe(t,ufe),p=a||{width:r,height:n,x:0,y:0},m=wr("recharts-surface",i);return se.createElement("svg",gT({},Xt(h,!0,"svg"),{className:m,width:r,height:n,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),se.createElement("title",null,c),se.createElement("desc",null,d),e)}var ffe=["children","className"];function yT(){return yT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yT.apply(this,arguments)}function pfe(t,e){if(t==null)return{};var r=mfe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Qr=se.forwardRef(function(t,e){var r=t.children,n=t.className,a=pfe(t,ffe),i=wr("recharts-layer",n);return se.createElement("g",yT({className:i},Xt(a,!0),{ref:e}),r)}),ac=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},ZS,tP;function gfe(){if(tP)return ZS;tP=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return ZS=t,ZS}var e6,rP;function xfe(){if(rP)return e6;rP=1;var t=gfe();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return e6=e,e6}var t6,nP;function gW(){if(nP)return t6;nP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+i+"]");function d(h){return c.test(h)}return t6=d,t6}var r6,aP;function yfe(){if(aP)return r6;aP=1;function t(e){return e.split("")}return r6=t,r6}var n6,iP;function vfe(){if(iP)return n6;iP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",w=h+"?",N="["+i+"]?",S="(?:"+y+"(?:"+[p,m,x].join("|")+")"+N+w+")*",E=N+w+S,C="(?:"+[p+c+"?",c,m,x,o].join("|")+")",M=RegExp(d+"(?="+d+")|"+C+E,"g");function L(I){return I.match(M)||[]}return n6=L,n6}var a6,sP;function bfe(){if(sP)return a6;sP=1;var t=yfe(),e=gW(),r=vfe();function n(a){return e(a)?r(a):t(a)}return a6=n,a6}var i6,oP;function wfe(){if(oP)return i6;oP=1;var t=xfe(),e=gW(),r=bfe(),n=hW();function a(i){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[i]()+h}}return i6=a,i6}var s6,lP;function Sfe(){if(lP)return s6;lP=1;var t=wfe(),e=t("toUpperCase");return s6=e,s6}var Nfe=Sfe();const gw=tn(Nfe);function Bn(t){return function(){return t}}const xW=Math.cos,gb=Math.sin,Lo=Math.sqrt,xb=Math.PI,xw=2*xb,vT=Math.PI,bT=2*vT,Cd=1e-6,_fe=bT-Cd;function yW(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function jfe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return yW;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Tfe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?yW:jfe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,p=o-e,m=c-r,x=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(x>Cd)if(!(Math.abs(m*d-h*p)>Cd)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let y=n-o,w=a-c,N=d*d+h*h,S=y*y+w*w,E=Math.sqrt(N),C=Math.sqrt(x),M=i*Math.tan((vT-Math.acos((N+x-S)/(2*E*C)))/2),L=M/C,I=M/E;Math.abs(L-1)>Cd&&this._append`L${e+L*p},${r+L*m}`,this._append`A${i},${i},0,0,${+(m*y>p*w)},${this._x1=e+I*d},${this._y1=r+I*h}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^o,x=o?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Cd||Math.abs(this._y1-p)>Cd)&&this._append`L${h},${p}`,n&&(x<0&&(x=x%bT+bT),x>_fe?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:x>Cd&&this._append`A${n},${n},0,${+(x>=vT)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function ZE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Tfe(e)}function e7(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vW(t){this._context=t}vW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function yw(t){return new vW(t)}function bW(t){return t[0]}function wW(t){return t[1]}function SW(t,e){var r=Bn(!0),n=null,a=yw,i=null,o=ZE(c);t=typeof t=="function"?t:t===void 0?bW:Bn(t),e=typeof e=="function"?e:e===void 0?wW:Bn(e);function c(d){var h,p=(d=e7(d)).length,m,x=!1,y;for(n==null&&(i=a(y=o())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+t(m,h,d),+e(m,h,d));if(y)return i=null,y+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Bn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Bn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Bn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function $y(t,e,r){var n=null,a=Bn(!0),i=null,o=yw,c=null,d=ZE(h);t=typeof t=="function"?t:t===void 0?bW:Bn(+t),e=typeof e=="function"?e:Bn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?wW:Bn(+r);function h(m){var x,y,w,N=(m=e7(m)).length,S,E=!1,C,M=new Array(N),L=new Array(N);for(i==null&&(c=o(C=d())),x=0;x<=N;++x){if(!(x<N&&a(S=m[x],x,m))===E)if(E=!E)y=x,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),w=x-1;w>=y;--w)c.point(M[w],L[w]);c.lineEnd(),c.areaEnd()}E&&(M[x]=+t(S,x,m),L[x]=+e(S,x,m),c.point(n?+n(S,x,m):M[x],r?+r(S,x,m):L[x]))}if(C)return c=null,C+""||null}function p(){return SW().defined(a).curve(o).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:Bn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Bn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Bn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:Bn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Bn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Bn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Bn(!!m),h):a},h.curve=function(m){return arguments.length?(o=m,i!=null&&(c=o(i)),h):o},h.context=function(m){return arguments.length?(m==null?i=c=null:c=o(i=m),h):i},h}class NW{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Afe(t){return new NW(t,!0)}function Efe(t){return new NW(t,!1)}const t7={draw(t,e){const r=Lo(e/xb);t.moveTo(r,0),t.arc(0,0,r,0,xw)}},kfe={draw(t,e){const r=Lo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},_W=Lo(1/3),Cfe=_W*2,Ofe={draw(t,e){const r=Lo(e/Cfe),n=r*_W;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Ife={draw(t,e){const r=Lo(e),n=-r/2;t.rect(n,n,r,r)}},Rfe=.8908130915292852,jW=gb(xb/10)/gb(7*xb/10),Mfe=gb(xw/10)*jW,Dfe=-xW(xw/10)*jW,Pfe={draw(t,e){const r=Lo(e*Rfe),n=Mfe*r,a=Dfe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=xw*i/5,c=xW(o),d=gb(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},o6=Lo(3),Lfe={draw(t,e){const r=-Lo(e/(o6*3));t.moveTo(0,r*2),t.lineTo(-o6*r,-r),t.lineTo(o6*r,-r),t.closePath()}},Xs=-.5,Ys=Lo(3)/2,wT=1/Lo(12),Bfe=(wT/2+1)*3,$fe={draw(t,e){const r=Lo(e/Bfe),n=r/2,a=r*wT,i=n,o=r*wT+r,c=-i,d=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(c,d),t.lineTo(Xs*n-Ys*a,Ys*n+Xs*a),t.lineTo(Xs*i-Ys*o,Ys*i+Xs*o),t.lineTo(Xs*c-Ys*d,Ys*c+Xs*d),t.lineTo(Xs*n+Ys*a,Xs*a-Ys*n),t.lineTo(Xs*i+Ys*o,Xs*o-Ys*i),t.lineTo(Xs*c+Ys*d,Xs*d-Ys*c),t.closePath()}};function zfe(t,e){let r=null,n=ZE(a);t=typeof t=="function"?t:Bn(t||t7),e=typeof e=="function"?e:Bn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Bn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Bn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function yb(){}function vb(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function TW(t){this._context=t}TW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ufe(t){return new TW(t)}function AW(t){this._context=t}AW.prototype={areaStart:yb,areaEnd:yb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:vb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vfe(t){return new AW(t)}function EW(t){this._context=t}EW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:vb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ffe(t){return new EW(t)}function kW(t){this._context=t}kW.prototype={areaStart:yb,areaEnd:yb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function qfe(t){return new kW(t)}function cP(t){return t<0?-1:1}function uP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(cP(i)+cP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function dP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function l6(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,o-c*r,i,o)}function bb(t){this._context=t}bb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l6(this,this._t0,dP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,l6(this,dP(this,r=uP(this,t,e)),r);break;default:l6(this,this._t0,r=uP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function CW(t){this._context=new OW(t)}(CW.prototype=Object.create(bb.prototype)).point=function(t,e){bb.prototype.point.call(this,e,t)};function OW(t){this._context=t}OW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function Hfe(t){return new bb(t)}function Gfe(t){return new CW(t)}function IW(t){this._context=t}IW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=hP(t),a=hP(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function hP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function Wfe(t){return new IW(t)}function vw(t,e){this._context=t,this._t=e}vw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Kfe(t){return new vw(t,.5)}function Qfe(t){return new vw(t,0)}function Xfe(t){return new vw(t,1)}function uf(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,c=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function ST(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Yfe(t,e){return t[e]}function Jfe(t){const e=[];return e.key=t,e}function Zfe(){var t=Bn([]),e=ST,r=uf,n=Yfe;function a(i){var o=Array.from(t.apply(this,arguments),Jfe),c,d=o.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(m,o[c].key,h,i)]).data=m;for(c=0,p=e7(e(o));c<d;++c)o[p[c]].index=c;return r(o,p),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Bn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Bn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?ST:typeof i=="function"?i:Bn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??uf,a):r},a}function epe(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}uf(t,e)}}function tpe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}uf(t,e)}}function rpe(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,h=0;c<o;++c){for(var p=t[e[c]],m=p[n][1]||0,x=p[n-1][1]||0,y=(m-x)/2,w=0;w<c;++w){var N=t[e[w]],S=N[n][1]||0,E=N[n-1][1]||0;y+=S-E}d+=m,h+=y*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,uf(t,e)}}function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}var npe=["type","size","sizeType"];function NT(){return NT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NT.apply(this,arguments)}function fP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(r),!0).forEach(function(n){ape(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ape(t,e,r){return e=ipe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ipe(t){var e=spe(t,"string");return yg(e)=="symbol"?e:e+""}function spe(t,e){if(yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ope(t,e){if(t==null)return{};var r=lpe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var RW={symbolCircle:t7,symbolCross:kfe,symbolDiamond:Ofe,symbolSquare:Ife,symbolStar:Pfe,symbolTriangle:Lfe,symbolWye:$fe},cpe=Math.PI/180,upe=function(e){var r="symbol".concat(gw(e));return RW[r]||t7},dpe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*cpe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},hpe=function(e,r){RW["symbol".concat(gw(e))]=r},bw=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=ope(e,npe),h=pP(pP({},d),{},{type:n,size:i,sizeType:c}),p=function(){var S=upe(n),E=zfe().type(S).size(dpe(i,c,n));return E()},m=h.className,x=h.cx,y=h.cy,w=Xt(h,!0);return x===+x&&y===+y&&i===+i?se.createElement("path",NT({},w,{className:wr("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(y,")"),d:p()})):null};bw.registerSymbol=hpe;function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function _T(){return _T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_T.apply(this,arguments)}function mP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fpe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(r),!0).forEach(function(n){vg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ppe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DW(n.key),n)}}function gpe(t,e,r){return e&&mpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xpe(t,e,r){return e=wb(e),ype(t,MW()?Reflect.construct(e,r||[],wb(t).constructor):e.apply(t,r))}function ype(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vpe(t)}function vpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MW=function(){return!!t})()}function wb(t){return wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wb(t)}function bpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jT(t,e)}function jT(t,e){return jT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jT(t,e)}function vg(t,e,r){return e=DW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DW(t){var e=wpe(t,"string");return df(e)=="symbol"?e:e+""}function wpe(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Js=32,r7=(function(t){function e(){return ppe(this,e),xpe(this,e,arguments)}return bpe(e,t),gpe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Js/2,o=Js/6,c=Js/3,d=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Js,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Js,"M").concat(2*c,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Js/8,"h").concat(Js,"v").concat(Js*3/4,"h").concat(-Js,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var h=fpe({},n);return delete h.legendIcon,se.cloneElement(n.legendIcon,h)}return se.createElement(bw,{fill:d,cx:i,cy:i,size:Js,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Js,height:Js},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(y,w){var N=y.formatter||d,S=wr(vg(vg({"recharts-legend-item":!0},"legend-item-".concat(w),!0),"inactive",y.inactive));if(y.type==="none")return null;var E=dr(y.value)?null:y.value;ac(!dr(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var C=y.inactive?h:y.color;return se.createElement("li",_T({className:S,style:m,key:"legend-item-".concat(w)},h0(n.props,y,w)),se.createElement(xT,{width:o,height:o,viewBox:p,style:x},n.renderIcon(y)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:C}},N?N(E,y,w):E))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(j.PureComponent);vg(r7,"displayName","Legend");vg(r7,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var c6,gP;function Spe(){if(gP)return c6;gP=1;var t=fw();function e(){this.__data__=new t,this.size=0}return c6=e,c6}var u6,xP;function Npe(){if(xP)return u6;xP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return u6=t,u6}var d6,yP;function _pe(){if(yP)return d6;yP=1;function t(e){return this.__data__.get(e)}return d6=t,d6}var h6,vP;function jpe(){if(vP)return h6;vP=1;function t(e){return this.__data__.has(e)}return h6=t,h6}var f6,bP;function Tpe(){if(bP)return f6;bP=1;var t=fw(),e=WE(),r=KE(),n=200;function a(i,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,o),this.size=c.size,this}return f6=a,f6}var p6,wP;function PW(){if(wP)return p6;wP=1;var t=fw(),e=Spe(),r=Npe(),n=_pe(),a=jpe(),i=Tpe();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,p6=o,p6}var m6,SP;function Ape(){if(SP)return m6;SP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return m6=e,m6}var g6,NP;function Epe(){if(NP)return g6;NP=1;function t(e){return this.__data__.has(e)}return g6=t,g6}var x6,_P;function LW(){if(_P)return x6;_P=1;var t=KE(),e=Ape(),r=Epe();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,x6=n,x6}var y6,jP;function BW(){if(jP)return y6;jP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return y6=t,y6}var v6,TP;function $W(){if(TP)return v6;TP=1;function t(e,r){return e.has(r)}return v6=t,v6}var b6,AP;function zW(){if(AP)return b6;AP=1;var t=LW(),e=BW(),r=$W(),n=1,a=2;function i(o,c,d,h,p,m){var x=d&n,y=o.length,w=c.length;if(y!=w&&!(x&&w>y))return!1;var N=m.get(o),S=m.get(c);if(N&&S)return N==c&&S==o;var E=-1,C=!0,M=d&a?new t:void 0;for(m.set(o,c),m.set(c,o);++E<y;){var L=o[E],I=c[E];if(h)var R=x?h(I,L,E,c,o,m):h(L,I,E,o,c,m);if(R!==void 0){if(R)continue;C=!1;break}if(M){if(!e(c,function(A,T){if(!r(M,T)&&(L===A||p(L,A,d,h,m)))return M.push(T)})){C=!1;break}}else if(!(L===I||p(L,I,d,h,m))){C=!1;break}}return m.delete(o),m.delete(c),C}return b6=i,b6}var w6,EP;function kpe(){if(EP)return w6;EP=1;var t=gl(),e=t.Uint8Array;return w6=e,w6}var S6,kP;function Cpe(){if(kP)return S6;kP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return S6=t,S6}var N6,CP;function n7(){if(CP)return N6;CP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return N6=t,N6}var _6,OP;function Ope(){if(OP)return _6;OP=1;var t=Ox(),e=kpe(),r=GE(),n=zW(),a=Cpe(),i=n7(),o=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",x="[object Number]",y="[object RegExp]",w="[object Set]",N="[object String]",S="[object Symbol]",E="[object ArrayBuffer]",C="[object DataView]",M=t?t.prototype:void 0,L=M?M.valueOf:void 0;function I(R,A,T,k,F,O,$){switch(T){case C:if(R.byteLength!=A.byteLength||R.byteOffset!=A.byteOffset)return!1;R=R.buffer,A=A.buffer;case E:return!(R.byteLength!=A.byteLength||!O(new e(R),new e(A)));case d:case h:case x:return r(+R,+A);case p:return R.name==A.name&&R.message==A.message;case y:case N:return R==A+"";case m:var B=a;case w:var G=k&o;if(B||(B=i),R.size!=A.size&&!G)return!1;var Q=$.get(R);if(Q)return Q==A;k|=c,$.set(R,A);var H=n(B(R),B(A),k,F,O,$);return $.delete(R),H;case S:if(L)return L.call(R)==L.call(A)}return!1}return _6=I,_6}var j6,IP;function UW(){if(IP)return j6;IP=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return j6=t,j6}var T6,RP;function Ipe(){if(RP)return T6;RP=1;var t=UW(),e=fs();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return T6=r,T6}var A6,MP;function Rpe(){if(MP)return A6;MP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[i++]=c)}return o}return A6=t,A6}var E6,DP;function Mpe(){if(DP)return E6;DP=1;function t(){return[]}return E6=t,E6}var k6,PP;function Dpe(){if(PP)return k6;PP=1;var t=Rpe(),e=Mpe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return k6=i,k6}var C6,LP;function Ppe(){if(LP)return C6;LP=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return C6=t,C6}var O6,BP;function Lpe(){if(BP)return O6;BP=1;var t=Nc(),e=_c(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return O6=n,O6}var I6,$P;function a7(){if($P)return I6;$P=1;var t=Lpe(),e=_c(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return I6=i,I6}var Nm={exports:{}},R6,zP;function Bpe(){if(zP)return R6;zP=1;function t(){return!1}return R6=t,R6}Nm.exports;var UP;function VW(){return UP||(UP=1,(function(t,e){var r=gl(),n=Bpe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(Nm,Nm.exports)),Nm.exports}var M6,VP;function i7(){if(VP)return M6;VP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return M6=r,M6}var D6,FP;function s7(){if(FP)return D6;FP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return D6=e,D6}var P6,qP;function $pe(){if(qP)return P6;qP=1;var t=Nc(),e=s7(),r=_c(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",x="[object RegExp]",y="[object Set]",w="[object String]",N="[object WeakMap]",S="[object ArrayBuffer]",E="[object DataView]",C="[object Float32Array]",M="[object Float64Array]",L="[object Int8Array]",I="[object Int16Array]",R="[object Int32Array]",A="[object Uint8Array]",T="[object Uint8ClampedArray]",k="[object Uint16Array]",F="[object Uint32Array]",O={};O[C]=O[M]=O[L]=O[I]=O[R]=O[A]=O[T]=O[k]=O[F]=!0,O[n]=O[a]=O[S]=O[i]=O[E]=O[o]=O[c]=O[d]=O[h]=O[p]=O[m]=O[x]=O[y]=O[w]=O[N]=!1;function $(B){return r(B)&&e(B.length)&&!!O[t(B)]}return P6=$,P6}var L6,HP;function FW(){if(HP)return L6;HP=1;function t(e){return function(r){return e(r)}}return L6=t,L6}var _m={exports:{}};_m.exports;var GP;function zpe(){return GP||(GP=1,(function(t,e){var r=cW(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(_m,_m.exports)),_m.exports}var B6,WP;function qW(){if(WP)return B6;WP=1;var t=$pe(),e=FW(),r=zpe(),n=r&&r.isTypedArray,a=n?e(n):t;return B6=a,B6}var $6,KP;function Upe(){if(KP)return $6;KP=1;var t=Ppe(),e=a7(),r=fs(),n=VW(),a=i7(),i=qW(),o=Object.prototype,c=o.hasOwnProperty;function d(h,p){var m=r(h),x=!m&&e(h),y=!m&&!x&&n(h),w=!m&&!x&&!y&&i(h),N=m||x||y||w,S=N?t(h.length,String):[],E=S.length;for(var C in h)(p||c.call(h,C))&&!(N&&(C=="length"||y&&(C=="offset"||C=="parent")||w&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||a(C,E)))&&S.push(C);return S}return $6=d,$6}var z6,QP;function Vpe(){if(QP)return z6;QP=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return z6=e,z6}var U6,XP;function HW(){if(XP)return U6;XP=1;function t(e,r){return function(n){return e(r(n))}}return U6=t,U6}var V6,YP;function Fpe(){if(YP)return V6;YP=1;var t=HW(),e=t(Object.keys,Object);return V6=e,V6}var F6,JP;function qpe(){if(JP)return F6;JP=1;var t=Vpe(),e=Fpe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&o.push(c);return o}return F6=a,F6}var q6,ZP;function Mx(){if(ZP)return q6;ZP=1;var t=HE(),e=s7();function r(n){return n!=null&&e(n.length)&&!t(n)}return q6=r,q6}var H6,eL;function ww(){if(eL)return H6;eL=1;var t=Upe(),e=qpe(),r=Mx();function n(a){return r(a)?t(a):e(a)}return H6=n,H6}var G6,tL;function Hpe(){if(tL)return G6;tL=1;var t=Ipe(),e=Dpe(),r=ww();function n(a){return t(a,r,e)}return G6=n,G6}var W6,rL;function Gpe(){if(rL)return W6;rL=1;var t=Hpe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,c,d,h,p){var m=c&e,x=t(i),y=x.length,w=t(o),N=w.length;if(y!=N&&!m)return!1;for(var S=y;S--;){var E=x[S];if(!(m?E in o:n.call(o,E)))return!1}var C=p.get(i),M=p.get(o);if(C&&M)return C==o&&M==i;var L=!0;p.set(i,o),p.set(o,i);for(var I=m;++S<y;){E=x[S];var R=i[E],A=o[E];if(d)var T=m?d(A,R,E,o,i,p):d(R,A,E,i,o,p);if(!(T===void 0?R===A||h(R,A,c,d,p):T)){L=!1;break}I||(I=E=="constructor")}if(L&&!I){var k=i.constructor,F=o.constructor;k!=F&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof F=="function"&&F instanceof F)&&(L=!1)}return p.delete(i),p.delete(o),L}return W6=a,W6}var K6,nL;function Wpe(){if(nL)return K6;nL=1;var t=j0(),e=gl(),r=t(e,"DataView");return K6=r,K6}var Q6,aL;function Kpe(){if(aL)return Q6;aL=1;var t=j0(),e=gl(),r=t(e,"Promise");return Q6=r,Q6}var X6,iL;function GW(){if(iL)return X6;iL=1;var t=j0(),e=gl(),r=t(e,"Set");return X6=r,X6}var Y6,sL;function Qpe(){if(sL)return Y6;sL=1;var t=j0(),e=gl(),r=t(e,"WeakMap");return Y6=r,Y6}var J6,oL;function Xpe(){if(oL)return J6;oL=1;var t=Wpe(),e=WE(),r=Kpe(),n=GW(),a=Qpe(),i=Nc(),o=uW(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",x="[object DataView]",y=o(t),w=o(e),N=o(r),S=o(n),E=o(a),C=i;return(t&&C(new t(new ArrayBuffer(1)))!=x||e&&C(new e)!=c||r&&C(r.resolve())!=h||n&&C(new n)!=p||a&&C(new a)!=m)&&(C=function(M){var L=i(M),I=L==d?M.constructor:void 0,R=I?o(I):"";if(R)switch(R){case y:return x;case w:return c;case N:return h;case S:return p;case E:return m}return L}),J6=C,J6}var Z6,lL;function Ype(){if(lL)return Z6;lL=1;var t=PW(),e=zW(),r=Ope(),n=Gpe(),a=Xpe(),i=fs(),o=VW(),c=qW(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",x=Object.prototype,y=x.hasOwnProperty;function w(N,S,E,C,M,L){var I=i(N),R=i(S),A=I?p:a(N),T=R?p:a(S);A=A==h?m:A,T=T==h?m:T;var k=A==m,F=T==m,O=A==T;if(O&&o(N)){if(!o(S))return!1;I=!0,k=!1}if(O&&!k)return L||(L=new t),I||c(N)?e(N,S,E,C,M,L):r(N,S,A,E,C,M,L);if(!(E&d)){var $=k&&y.call(N,"__wrapped__"),B=F&&y.call(S,"__wrapped__");if($||B){var G=$?N.value():N,Q=B?S.value():S;return L||(L=new t),M(G,Q,E,C,L)}}return O?(L||(L=new t),n(N,S,E,C,M,L)):!1}return Z6=w,Z6}var eN,cL;function o7(){if(cL)return eN;cL=1;var t=Ype(),e=_c();function r(n,a,i,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,c)}return eN=r,eN}var tN,uL;function Jpe(){if(uL)return tN;uL=1;var t=PW(),e=o7(),r=1,n=2;function a(i,o,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var x=c[h];if(m&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++h<p;){x=c[h];var y=x[0],w=i[y],N=x[1];if(m&&x[2]){if(w===void 0&&!(y in i))return!1}else{var S=new t;if(d)var E=d(w,N,y,i,o,S);if(!(E===void 0?e(N,w,r|n,d,S):E))return!1}}return!0}return tN=a,tN}var rN,dL;function WW(){if(dL)return rN;dL=1;var t=Ku();function e(r){return r===r&&!t(r)}return rN=e,rN}var nN,hL;function Zpe(){if(hL)return nN;hL=1;var t=WW(),e=ww();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],c=n[o];a[i]=[o,c,t(c)]}return a}return nN=r,nN}var aN,fL;function KW(){if(fL)return aN;fL=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return aN=t,aN}var iN,pL;function eme(){if(pL)return iN;pL=1;var t=Jpe(),e=Zpe(),r=KW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return iN=n,iN}var sN,mL;function tme(){if(mL)return sN;mL=1;function t(e,r){return e!=null&&r in Object(e)}return sN=t,sN}var oN,gL;function rme(){if(gL)return oN;gL=1;var t=fW(),e=a7(),r=fs(),n=i7(),a=s7(),i=mw();function o(c,d,h){d=t(d,c);for(var p=-1,m=d.length,x=!1;++p<m;){var y=i(d[p]);if(!(x=c!=null&&h(c,y)))break;c=c[y]}return x||++p!=m?x:(m=c==null?0:c.length,!!m&&a(m)&&n(y,m)&&(r(c)||e(c)))}return oN=o,oN}var lN,xL;function nme(){if(xL)return lN;xL=1;var t=tme(),e=rme();function r(n,a){return n!=null&&e(n,a,t)}return lN=r,lN}var cN,yL;function ame(){if(yL)return cN;yL=1;var t=o7(),e=pW(),r=nme(),n=qE(),a=WW(),i=KW(),o=mw(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(o(p),m):function(x){var y=e(x,p);return y===void 0&&y===m?r(x,p):t(m,y,c|d)}}return cN=h,cN}var uN,vL;function Jf(){if(vL)return uN;vL=1;function t(e){return e}return uN=t,uN}var dN,bL;function ime(){if(bL)return dN;bL=1;function t(e){return function(r){return r==null?void 0:r[e]}}return dN=t,dN}var hN,wL;function sme(){if(wL)return hN;wL=1;var t=XE();function e(r){return function(n){return t(n,r)}}return hN=e,hN}var fN,SL;function ome(){if(SL)return fN;SL=1;var t=ime(),e=sme(),r=qE(),n=mw();function a(i){return r(i)?t(n(i)):e(i)}return fN=a,fN}var pN,NL;function xl(){if(NL)return pN;NL=1;var t=eme(),e=ame(),r=Jf(),n=fs(),a=ome();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return pN=i,pN}var mN,_L;function QW(){if(_L)return mN;_L=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return mN=t,mN}var gN,jL;function lme(){if(jL)return gN;jL=1;function t(e){return e!==e}return gN=t,gN}var xN,TL;function cme(){if(TL)return xN;TL=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return xN=t,xN}var yN,AL;function ume(){if(AL)return yN;AL=1;var t=QW(),e=lme(),r=cme();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return yN=n,yN}var vN,EL;function dme(){if(EL)return vN;EL=1;var t=ume();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return vN=e,vN}var bN,kL;function hme(){if(kL)return bN;kL=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return bN=t,bN}var wN,CL;function fme(){if(CL)return wN;CL=1;function t(){}return wN=t,wN}var SN,OL;function pme(){if(OL)return SN;OL=1;var t=GW(),e=fme(),r=n7(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return SN=a,SN}var NN,IL;function mme(){if(IL)return NN;IL=1;var t=LW(),e=dme(),r=hme(),n=$W(),a=pme(),i=n7(),o=200;function c(d,h,p){var m=-1,x=e,y=d.length,w=!0,N=[],S=N;if(p)w=!1,x=r;else if(y>=o){var E=h?null:a(d);if(E)return i(E);w=!1,x=n,S=new t}else S=h?[]:N;e:for(;++m<y;){var C=d[m],M=h?h(C):C;if(C=p||C!==0?C:0,w&&M===M){for(var L=S.length;L--;)if(S[L]===M)continue e;h&&S.push(M),N.push(C)}else x(S,M,p)||(S!==N&&S.push(M),N.push(C))}return N}return NN=c,NN}var _N,RL;function gme(){if(RL)return _N;RL=1;var t=xl(),e=mme();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return _N=r,_N}var xme=gme();const ML=tn(xme);function XW(t,e,r){return e===!0?ML(t,r):dr(e)?ML(t,e):t}function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}var yme=["ref"];function DL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(r),!0).forEach(function(n){Sw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JW(n.key),n)}}function bme(t,e,r){return e&&PL(t.prototype,e),r&&PL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wme(t,e,r){return e=Sb(e),Sme(t,YW()?Reflect.construct(e,r||[],Sb(t).constructor):e.apply(t,r))}function Sme(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nme(t)}function Nme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YW=function(){return!!t})()}function Sb(t){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sb(t)}function _me(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TT(t,e)}function TT(t,e){return TT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TT(t,e)}function Sw(t,e,r){return e=JW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JW(t){var e=jme(t,"string");return hf(e)=="symbol"?e:e+""}function jme(t,e){if(hf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Tme(t,e){if(t==null)return{};var r=Ame(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ame(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Eme(t){return t.value}function kme(t,e){if(se.isValidElement(t))return se.cloneElement(t,e);if(typeof t=="function")return se.createElement(t,e);e.ref;var r=Tme(e,yme);return se.createElement(r7,r)}var LL=1,$h=(function(t){function e(){var r;vme(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=wme(this,e,[].concat(a)),Sw(r,"lastBoundingBox",{width:-1,height:-1}),r}return _me(e,t),bme(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>LL||Math.abs(a.height-this.lastBoundingBox.height)>LL)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?zl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,x;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var y=this.getBBoxSnapshot();m={left:((h||0)-y.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var w=this.getBBoxSnapshot();x={top:((p||0)-w.height)/2}}else x=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return zl(zl({},m),x)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=zl(zl({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return se.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(y){n.wrapperNode=y}},kme(i,zl(zl({},this.props),{},{payload:XW(p,h,Eme)})))}}],[{key:"getWithHeight",value:function(n,a){var i=zl(zl({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&bt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(j.PureComponent);Sw($h,"displayName","Legend");Sw($h,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var jN,BL;function Cme(){if(BL)return jN;BL=1;var t=Ox(),e=a7(),r=fs(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return jN=a,jN}var TN,$L;function ZW(){if($L)return TN;$L=1;var t=UW(),e=Cme();function r(n,a,i,o,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,o,c):t(c,p):o||(c[c.length]=p)}return c}return TN=r,TN}var AN,zL;function Ome(){if(zL)return AN;zL=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(o[h],h,o)===!1)break}return r}}return AN=t,AN}var EN,UL;function Ime(){if(UL)return EN;UL=1;var t=Ome(),e=t();return EN=e,EN}var kN,VL;function eK(){if(VL)return kN;VL=1;var t=Ime(),e=ww();function r(n,a){return n&&t(n,a,e)}return kN=r,kN}var CN,FL;function Rme(){if(FL)return CN;FL=1;var t=Mx();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&i(d[c],c,d)!==!1;);return a}}return CN=e,CN}var ON,qL;function l7(){if(qL)return ON;qL=1;var t=eK(),e=Rme(),r=e(t);return ON=r,ON}var IN,HL;function tK(){if(HL)return IN;HL=1;var t=l7(),e=Mx();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++i]=a(c,d,h)}),o}return IN=r,IN}var RN,GL;function Mme(){if(GL)return RN;GL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return RN=t,RN}var MN,WL;function Dme(){if(WL)return MN;WL=1;var t=Xf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!o)return 1;if(!i&&!c&&!m&&r<n||m&&a&&o&&!i&&!c||h&&a&&o||!d&&o||!p)return-1}return 0}return MN=e,MN}var DN,KL;function Pme(){if(KL)return DN;KL=1;var t=Dme();function e(r,n,a){for(var i=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++i<d;){var p=t(o[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return DN=e,DN}var PN,QL;function Lme(){if(QL)return PN;QL=1;var t=QE(),e=XE(),r=xl(),n=tK(),a=Mme(),i=FW(),o=Pme(),c=Jf(),d=fs();function h(p,m,x){m.length?m=t(m,function(N){return d(N)?function(S){return e(S,N.length===1?N[0]:N)}:N}):m=[c];var y=-1;m=t(m,i(r));var w=n(p,function(N,S,E){var C=t(m,function(M){return M(N)});return{criteria:C,index:++y,value:N}});return a(w,function(N,S){return o(N,S,x)})}return PN=h,PN}var LN,XL;function Bme(){if(XL)return LN;XL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return LN=t,LN}var BN,YL;function $me(){if(YL)return BN;YL=1;var t=Bme(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=o[c];return p[a]=i(h),t(n,this,p)}}return BN=r,BN}var $N,JL;function zme(){if(JL)return $N;JL=1;function t(e){return function(){return e}}return $N=t,$N}var zN,ZL;function rK(){if(ZL)return zN;ZL=1;var t=j0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return zN=e,zN}var UN,eB;function Ume(){if(eB)return UN;eB=1;var t=zme(),e=rK(),r=Jf(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return UN=n,UN}var VN,tB;function Vme(){if(tB)return VN;tB=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return VN=n,VN}var FN,rB;function Fme(){if(rB)return FN;rB=1;var t=Ume(),e=Vme(),r=e(t);return FN=r,FN}var qN,nB;function qme(){if(nB)return qN;nB=1;var t=Jf(),e=$me(),r=Fme();function n(a,i){return r(e(a,i,t),a+"")}return qN=n,qN}var HN,aB;function Nw(){if(aB)return HN;aB=1;var t=GE(),e=Mx(),r=i7(),n=Ku();function a(i,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],i):!1}return HN=a,HN}var GN,iB;function Hme(){if(iB)return GN;iB=1;var t=ZW(),e=Lme(),r=qme(),n=Nw(),a=r(function(i,o){if(i==null)return[];var c=o.length;return c>1&&n(i,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return GN=a,GN}var Gme=Hme();const c7=tn(Gme);function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function AT(){return AT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AT.apply(this,arguments)}function Wme(t,e){return Yme(t)||Xme(t,e)||Qme(t,e)||Kme()}function Kme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qme(t,e){if(t){if(typeof t=="string")return sB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sB(t,e)}}function sB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Yme(t){if(Array.isArray(t))return t}function oB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oB(Object(r),!0).forEach(function(n){Jme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jme(t,e,r){return e=Zme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zme(t){var e=ege(t,"string");return bg(e)=="symbol"?e:e+""}function ege(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tge(t){return Array.isArray(t)&&Ga(t[0])&&Ga(t[1])?t.join(" ~ "):t}var rge=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,x=e.itemSorter,y=e.wrapperClassName,w=e.labelClassName,N=e.label,S=e.labelFormatter,E=e.accessibilityLayer,C=E===void 0?!1:E,M=function(){if(p&&p.length){var $={padding:0,margin:0},B=(x?c7(p,x):p).map(function(G,Q){if(G.type==="none")return null;var H=WN({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},c),K=G.formatter||m||tge,te=G.value,ae=G.name,ce=te,X=ae;if(K&&ce!=null&&X!=null){var ie=K(te,ae,G,Q,p);if(Array.isArray(ie)){var ne=Wme(ie,2);ce=ne[0],X=ne[1]}else ce=ie}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Q),style:H},Ga(X)?se.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Ga(X)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},ce),se.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:$},B)}return null},L=WN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),I=WN({margin:0},h),R=!xr(N),A=R?N:"",T=wr("recharts-default-tooltip",y),k=wr("recharts-tooltip-label",w);R&&S&&p!==void 0&&p!==null&&(A=S(N,p));var F=C?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",AT({className:T,style:L},F),se.createElement("p",{className:k,style:I},se.isValidElement(A)?A:"".concat(A)),M())};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function zy(t,e,r){return e=nge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nge(t){var e=age(t,"string");return wg(e)=="symbol"?e:e+""}function age(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sm="recharts-tooltip-wrapper",ige={visibility:"hidden"};function sge(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return wr(sm,zy(zy(zy(zy({},"".concat(sm,"-right"),bt(r)&&e&&bt(e.x)&&r>=e.x),"".concat(sm,"-left"),bt(r)&&e&&bt(e.x)&&r<e.x),"".concat(sm,"-bottom"),bt(n)&&e&&bt(e.y)&&n>=e.y),"".concat(sm,"-top"),bt(n)&&e&&bt(e.y)&&n<e.y))}function lB(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&bt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return o[n]?p:m;if(o[n]){var x=p,y=d[n];return x<y?Math.max(m,d[n]):Math.max(p,d[n])}var w=m+c,N=d[n]+h;return w>N?Math.max(p,d[n]):Math.max(m,d[n])}function oge(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function lge(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return o.height>0&&o.width>0&&r?(p=lB({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=lB({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=oge({translateX:p,translateY:m,useTranslate3d:c})):h=ige,{cssProperties:h,cssClasses:sge({translateX:p,translateY:m,coordinate:r})}}function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function cB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(r),!0).forEach(function(n){kT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aK(n.key),n)}}function dge(t,e,r){return e&&uge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hge(t,e,r){return e=Nb(e),fge(t,nK()?Reflect.construct(e,r||[],Nb(t).constructor):e.apply(t,r))}function fge(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pge(t)}function pge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nK=function(){return!!t})()}function Nb(t){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nb(t)}function mge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ET(t,e)}function ET(t,e){return ET=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ET(t,e)}function kT(t,e,r){return e=aK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aK(t){var e=gge(t,"string");return ff(e)=="symbol"?e:e+""}function gge(t,e){if(ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dB=1,xge=(function(t){function e(){var r;cge(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=hge(this,e,[].concat(a)),kT(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),kT(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return mge(e,t),dge(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>dB||Math.abs(n.height-this.state.lastBoundingBox.height)>dB)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,x=a.isAnimationActive,y=a.offset,w=a.position,N=a.reverseDirection,S=a.useTranslate3d,E=a.viewBox,C=a.wrapperStyle,M=lge({allowEscapeViewBox:o,coordinate:p,offsetTopLeft:y,position:w,reverseDirection:N,tooltipBox:this.state.lastBoundingBox,useTranslate3d:S,viewBox:E}),L=M.cssClasses,I=M.cssProperties,R=uB(uB({transition:x&&i?"transform ".concat(c,"ms ").concat(d):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},C);return se.createElement("div",{tabIndex:-1,className:L,style:R,ref:function(T){n.wrapperNode=T}},h)}}])})(j.PureComponent),yge=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},T0={isSsr:yge()};function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function hB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hB(Object(r),!0).forEach(function(n){u7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sK(n.key),n)}}function wge(t,e,r){return e&&bge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sge(t,e,r){return e=_b(e),Nge(t,iK()?Reflect.construct(e,r||[],_b(t).constructor):e.apply(t,r))}function Nge(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ge(t)}function _ge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iK=function(){return!!t})()}function _b(t){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_b(t)}function jge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CT(t,e)}function CT(t,e){return CT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},CT(t,e)}function u7(t,e,r){return e=sK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sK(t){var e=Tge(t,"string");return pf(e)=="symbol"?e:e+""}function Tge(t,e){if(pf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Age(t){return t.dataKey}function Ege(t,e){return se.isValidElement(t)?se.cloneElement(t,e):typeof t=="function"?se.createElement(t,e):se.createElement(rge,e)}var Ko=(function(t){function e(){return vge(this,e),Sge(this,e,arguments)}return jge(e,t),wge(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,x=a.isAnimationActive,y=a.offset,w=a.payload,N=a.payloadUniqBy,S=a.position,E=a.reverseDirection,C=a.useTranslate3d,M=a.viewBox,L=a.wrapperStyle,I=w??[];m&&I.length&&(I=XW(w.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),N,Age));var R=I.length>0;return se.createElement(xge,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:x,active:i,coordinate:p,hasPayload:R,offset:y,position:S,reverseDirection:E,useTranslate3d:C,viewBox:M,wrapperStyle:L},Ege(h,fB(fB({},this.props),{},{payload:I})))}}])})(j.PureComponent);u7(Ko,"displayName","Tooltip");u7(Ko,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!T0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var KN,pB;function kge(){if(pB)return KN;pB=1;var t=gl(),e=function(){return t.Date.now()};return KN=e,KN}var QN,mB;function Cge(){if(mB)return QN;mB=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return QN=e,QN}var XN,gB;function Oge(){if(gB)return XN;gB=1;var t=Cge(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return XN=r,XN}var YN,xB;function oK(){if(xB)return YN;xB=1;var t=Oge(),e=Ku(),r=Xf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||o.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return YN=d,YN}var JN,yB;function Ige(){if(yB)return JN;yB=1;var t=Ku(),e=kge(),r=oK(),n="Expected a function",a=Math.max,i=Math.min;function o(c,d,h){var p,m,x,y,w,N,S=0,E=!1,C=!1,M=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(E=!!h.leading,C="maxWait"in h,x=C?a(r(h.maxWait)||0,d):x,M="trailing"in h?!!h.trailing:M);function L(B){var G=p,Q=m;return p=m=void 0,S=B,y=c.apply(Q,G),y}function I(B){return S=B,w=setTimeout(T,d),E?L(B):y}function R(B){var G=B-N,Q=B-S,H=d-G;return C?i(H,x-Q):H}function A(B){var G=B-N,Q=B-S;return N===void 0||G>=d||G<0||C&&Q>=x}function T(){var B=e();if(A(B))return k(B);w=setTimeout(T,R(B))}function k(B){return w=void 0,M&&p?L(B):(p=m=void 0,y)}function F(){w!==void 0&&clearTimeout(w),S=0,p=N=m=w=void 0}function O(){return w===void 0?y:k(e())}function $(){var B=e(),G=A(B);if(p=arguments,m=this,N=B,G){if(w===void 0)return I(N);if(C)return clearTimeout(w),w=setTimeout(T,d),L(N)}return w===void 0&&(w=setTimeout(T,d)),y}return $.cancel=F,$.flush=O,$}return JN=o,JN}var ZN,vB;function Rge(){if(vB)return ZN;vB=1;var t=Ige(),e=Ku(),r="Expected a function";function n(a,i,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return ZN=n,ZN}var Mge=Rge();const lK=tn(Mge);function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function bB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Uy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bB(Object(r),!0).forEach(function(n){Dge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dge(t,e,r){return e=Pge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pge(t){var e=Lge(t,"string");return Sg(e)=="symbol"?e:e+""}function Lge(t,e){if(Sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bge(t,e){return Vge(t)||Uge(t,e)||zge(t,e)||$ge()}function $ge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zge(t,e){if(t){if(typeof t=="string")return wB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wB(t,e)}}function wB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Uge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Vge(t){if(Array.isArray(t))return t}var cK=j.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,x=t.maxHeight,y=t.children,w=t.debounce,N=w===void 0?0:w,S=t.id,E=t.className,C=t.onResize,M=t.style,L=M===void 0?{}:M,I=j.useRef(null),R=j.useRef();R.current=C,j.useImperativeHandle(e,function(){return Object.defineProperty(I.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),I.current},configurable:!0})});var A=j.useState({containerWidth:a.width,containerHeight:a.height}),T=Bge(A,2),k=T[0],F=T[1],O=j.useCallback(function(B,G){F(function(Q){var H=Math.round(B),K=Math.round(G);return Q.containerWidth===H&&Q.containerHeight===K?Q:{containerWidth:H,containerHeight:K}})},[]);j.useEffect(function(){var B=function(ae){var ce,X=ae[0].contentRect,ie=X.width,ne=X.height;O(ie,ne),(ce=R.current)===null||ce===void 0||ce.call(R,ie,ne)};N>0&&(B=lK(B,N,{trailing:!0,leading:!1}));var G=new ResizeObserver(B),Q=I.current.getBoundingClientRect(),H=Q.width,K=Q.height;return O(H,K),G.observe(I.current),function(){G.disconnect()}},[O,N]);var $=j.useMemo(function(){var B=k.containerWidth,G=k.containerHeight;if(B<0||G<0)return null;ac(Bd(o)||Bd(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),ac(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Q=Bd(o)?B:o,H=Bd(d)?G:d;r&&r>0&&(Q?H=Q/r:H&&(Q=H*r),x&&H>x&&(H=x)),ac(Q>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Q,H,o,d,p,m,r);var K=!Array.isArray(y)&&nc(y.type).endsWith("Chart");return se.Children.map(y,function(te){return se.isValidElement(te)?j.cloneElement(te,Uy({width:Q,height:H},K?{style:Uy({height:"100%",width:"100%",maxHeight:H,maxWidth:Q},te.props.style)}:{})):te})},[r,y,d,x,m,p,k,o]);return se.createElement("div",{id:S?"".concat(S):void 0,className:wr("recharts-responsive-container",E),style:Uy(Uy({},L),{},{width:o,height:d,minWidth:p,minHeight:m,maxHeight:x}),ref:I},$)}),d7=function(e){return null};d7.displayName="Cell";function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function SB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function OT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SB(Object(r),!0).forEach(function(n){Fge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fge(t,e,r){return e=qge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qge(t){var e=Hge(t,"string");return Ng(e)=="symbol"?e:e+""}function Hge(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ph={widthCache:{},cacheCount:0},Gge=2e3,Wge={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},NB="recharts_measurement_span";function Kge(t){var e=OT({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Lm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||T0.isSsr)return{width:0,height:0};var n=Kge(r),a=JSON.stringify({text:e,copyStyle:n});if(ph.widthCache[a])return ph.widthCache[a];try{var i=document.getElementById(NB);i||(i=document.createElement("span"),i.setAttribute("id",NB),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=OT(OT({},Wge),n);Object.assign(i.style,o),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return ph.widthCache[a]=d,++ph.cacheCount>Gge&&(ph.cacheCount=0,ph.widthCache={}),d}catch{return{width:0,height:0}}},Qge=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function jb(t,e){return Zge(t)||Jge(t,e)||Yge(t,e)||Xge()}function Xge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yge(t,e){if(t){if(typeof t=="string")return _B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _B(t,e)}}function _B(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Zge(t){if(Array.isArray(t))return t}function exe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rxe(n.key),n)}}function txe(t,e,r){return e&&jB(t.prototype,e),r&&jB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rxe(t){var e=nxe(t,"string");return _g(e)=="symbol"?e:e+""}function nxe(t,e){if(_g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var TB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,axe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ixe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sxe=Object.keys(uK),jh="NaN";function oxe(t,e){return t*uK[e]}var Vy=(function(){function t(e,r){exe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!axe.test(r)&&(this.num=NaN,this.unit=""),sxe.includes(r)&&(this.num=oxe(e,r),this.unit="px")}return txe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=ixe.exec(r))!==null&&n!==void 0?n:[],i=jb(a,3),o=i[1],c=i[2];return new t(parseFloat(o),c??"")}}])})();function dK(t){if(t.includes(jh))return jh;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=TB.exec(e))!==null&&r!==void 0?r:[],a=jb(n,4),i=a[1],o=a[2],c=a[3],d=Vy.parse(i??""),h=Vy.parse(c??""),p=o==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return jh;e=e.replace(TB,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,x=(m=AB.exec(e))!==null&&m!==void 0?m:[],y=jb(x,4),w=y[1],N=y[2],S=y[3],E=Vy.parse(w??""),C=Vy.parse(S??""),M=N==="+"?E.add(C):E.subtract(C);if(M.isNaN())return jh;e=e.replace(AB,M.toString())}return e}var EB=/\(([^()]*)\)/;function lxe(t){for(var e=t;e.includes("(");){var r=EB.exec(e),n=jb(r,2),a=n[1];e=e.replace(EB,dK(a))}return e}function cxe(t){var e=t.replace(/\s+/g,"");return e=lxe(e),e=dK(e),e}function uxe(t){try{return cxe(t)}catch{return jh}}function e_(t){var e=uxe(t.slice(5,-1));return e===jh?"":e}var dxe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],hxe=["dx","dy","angle","className","breakAll"];function IT(){return IT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IT.apply(this,arguments)}function kB(t,e){if(t==null)return{};var r=fxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function CB(t,e){return xxe(t)||gxe(t,e)||mxe(t,e)||pxe()}function pxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mxe(t,e){if(t){if(typeof t=="string")return OB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OB(t,e)}}function OB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function xxe(t){if(Array.isArray(t))return t}var hK=/[ \f\n\r\t\v\u2028\u2029]+/,fK=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];xr(r)||(n?i=r.toString().split(""):i=r.toString().split(hK));var o=i.map(function(d){return{word:d,width:Lm(d,a).width}}),c=n?0:Lm("",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},yxe=function(e,r,n,a,i){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=bt(o),m=c,x=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Q.reduce(function(H,K){var te=K.word,ae=K.width,ce=H[H.length-1];if(ce&&(a==null||i||ce.width+ae+n<Number(a)))ce.words.push(te),ce.width+=ae+n;else{var X={words:[te],width:ae};H.push(X)}return H},[])},y=x(r),w=function(Q){return Q.reduce(function(H,K){return H.width>K.width?H:K})};if(!p)return y;for(var N="",S=function(Q){var H=m.slice(0,Q),K=fK({breakAll:h,style:d,children:H+N}).wordsWithComputedWidth,te=x(K),ae=te.length>o||w(te).width>Number(a);return[ae,te]},E=0,C=m.length-1,M=0,L;E<=C&&M<=m.length-1;){var I=Math.floor((E+C)/2),R=I-1,A=S(R),T=CB(A,2),k=T[0],F=T[1],O=S(I),$=CB(O,1),B=$[0];if(!k&&!B&&(E=I+1),k&&B&&(C=I-1),!k&&B){L=F;break}M++}return L||y},IB=function(e){var r=xr(e)?[]:e.toString().split(hK);return[{words:r}]},vxe=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!T0.isSsr){var d,h,p=fK({breakAll:o,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,x=p.spaceWidth;d=m,h=x}else return IB(a);return yxe({breakAll:o,children:a,maxLines:c,style:i},d,h,r,n)}return IB(a)},RB="#808080",mf=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,x=e.textAnchor,y=x===void 0?"start":x,w=e.verticalAnchor,N=w===void 0?"end":w,S=e.fill,E=S===void 0?RB:S,C=kB(e,dxe),M=j.useMemo(function(){return vxe({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:m,style:C.style,width:C.width})},[C.breakAll,C.children,C.maxLines,m,C.style,C.width]),L=C.dx,I=C.dy,R=C.angle,A=C.className,T=C.breakAll,k=kB(C,hxe);if(!Ga(n)||!Ga(i))return null;var F=n+(bt(L)?L:0),O=i+(bt(I)?I:0),$;switch(N){case"start":$=e_("calc(".concat(h,")"));break;case"middle":$=e_("calc(".concat((M.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:$=e_("calc(".concat(M.length-1," * -").concat(c,")"));break}var B=[];if(m){var G=M[0].width,Q=C.width;B.push("scale(".concat((bt(Q)?Q/G:1)/G,")"))}return R&&B.push("rotate(".concat(R,", ").concat(F,", ").concat(O,")")),B.length&&(k.transform=B.join(" ")),se.createElement("text",IT({},Xt(k,!0),{x:F,y:O,className:wr("recharts-text",A),textAnchor:y,fill:E.includes("url")?RB:E}),M.map(function(H,K){var te=H.words.join(T?"":" ");return se.createElement("tspan",{x:F,dy:K===0?$:c,key:"".concat(te,"-").concat(K)},te)}))};function Iu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bxe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function h7(t){let e,r,n;t.length!==2?(e=Iu,r=(c,d)=>Iu(t(c),d),n=(c,d)=>t(c)-d):(e=t===Iu||t===bxe?t:wxe,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function o(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:o,right:i}}function wxe(){return 0}function pK(t){return t===null?NaN:+t}function*Sxe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Nxe=h7(Iu),Dx=Nxe.right;h7(pK).center;class MB extends Map{constructor(e,r=Txe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(DB(this,e))}has(e){return super.has(DB(this,e))}set(e,r){return super.set(_xe(this,e),r)}delete(e){return super.delete(jxe(this,e))}}function DB({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function _xe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function jxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Txe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Axe(t=Iu){if(t===Iu)return mK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function mK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Exe=Math.sqrt(50),kxe=Math.sqrt(10),Cxe=Math.sqrt(2);function Tb(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Exe?10:i>=kxe?5:i>=Cxe?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?Tb(t,e,r*2):[c,d,h]}function RT(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?Tb(e,t,r):Tb(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(i-h)/-o;else for(let h=0;h<c;++h)d[h]=(i-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function MT(t,e,r){return e=+e,t=+t,r=+r,Tb(t,e,r)[2]}function DT(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?MT(e,t,r):MT(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function PB(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function LB(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function gK(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?mK:Axe(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),y=Math.max(r,Math.floor(e-h*m/d+x)),w=Math.min(n,Math.floor(e+(d-h)*m/d+x));gK(t,e,y,w,a)}const i=t[e];let o=r,c=n;for(om(t,r,e),a(t[n],i)>0&&om(t,r,n);o<c;){for(om(t,o,c),++o,--c;a(t[o],i)<0;)++o;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?om(t,r,c):(++c,om(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function om(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Oxe(t,e,r){if(t=Float64Array.from(Sxe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return LB(t);if(e>=1)return PB(t);var n,a=(n-1)*e,i=Math.floor(a),o=PB(gK(t,i).subarray(0,i+1)),c=LB(t.subarray(i+1));return o+(c-o)*(a-i)}}function Ixe(t,e,r=pK){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return o+(c-o)*(a-i)}}function Rxe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function po(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function jc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const PT=Symbol("implicit");function f7(){var t=new MB,e=[],r=[],n=PT;function a(i){let o=t.get(i);if(o===void 0){if(n!==PT)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new MB;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return f7(e,r).unknown(n)},po.apply(a,arguments),a}function jg(){var t=f7().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var x=e().length,y=a<n,w=y?a:n,N=y?n:a;i=(N-w)/Math.max(1,x-d+h*2),c&&(i=Math.floor(i)),w+=(N-w-i*(x-d))*p,o=i*(1-d),c&&(w=Math.round(w),o=Math.round(o));var S=Rxe(x).map(function(E){return w+i*E});return r(y?S.reverse():S)}return t.domain=function(x){return arguments.length?(e(x),m()):e()},t.range=function(x){return arguments.length?([n,a]=x,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(x){return[n,a]=x,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(x){return arguments.length?(c=!!x,m()):c},t.padding=function(x){return arguments.length?(d=Math.min(1,h=+x),m()):d},t.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),m()):d},t.paddingOuter=function(x){return arguments.length?(h=+x,m()):h},t.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),m()):p},t.copy=function(){return jg(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},po.apply(m(),arguments)}function xK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return xK(e())},t}function Bm(){return xK(jg.apply(null,arguments).paddingInner(1))}function p7(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function yK(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Px(){}var Tg=.7,Ab=1/Tg,zh="\\s*([+-]?\\d+)\\s*",Ag="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mxe=/^#([0-9a-f]{3,8})$/,Dxe=new RegExp(`^rgb\\(${zh},${zh},${zh}\\)$`),Pxe=new RegExp(`^rgb\\(${nl},${nl},${nl}\\)$`),Lxe=new RegExp(`^rgba\\(${zh},${zh},${zh},${Ag}\\)$`),Bxe=new RegExp(`^rgba\\(${nl},${nl},${nl},${Ag}\\)$`),$xe=new RegExp(`^hsl\\(${Ag},${nl},${nl}\\)$`),zxe=new RegExp(`^hsla\\(${Ag},${nl},${nl},${Ag}\\)$`),BB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p7(Px,Eg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$B,formatHex:$B,formatHex8:Uxe,formatHsl:Vxe,formatRgb:zB,toString:zB});function $B(){return this.rgb().formatHex()}function Uxe(){return this.rgb().formatHex8()}function Vxe(){return vK(this).formatHsl()}function zB(){return this.rgb().formatRgb()}function Eg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Mxe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?UB(e):r===3?new os(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Fy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Fy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Dxe.exec(t))?new os(e[1],e[2],e[3],1):(e=Pxe.exec(t))?new os(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Lxe.exec(t))?Fy(e[1],e[2],e[3],e[4]):(e=Bxe.exec(t))?Fy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$xe.exec(t))?qB(e[1],e[2]/100,e[3]/100,1):(e=zxe.exec(t))?qB(e[1],e[2]/100,e[3]/100,e[4]):BB.hasOwnProperty(t)?UB(BB[t]):t==="transparent"?new os(NaN,NaN,NaN,0):null}function UB(t){return new os(t>>16&255,t>>8&255,t&255,1)}function Fy(t,e,r,n){return n<=0&&(t=e=r=NaN),new os(t,e,r,n)}function Fxe(t){return t instanceof Px||(t=Eg(t)),t?(t=t.rgb(),new os(t.r,t.g,t.b,t.opacity)):new os}function LT(t,e,r,n){return arguments.length===1?Fxe(t):new os(t,e,r,n??1)}function os(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}p7(os,LT,yK(Px,{brighter(t){return t=t==null?Ab:Math.pow(Ab,t),new os(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tg:Math.pow(Tg,t),new os(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new os(Kd(this.r),Kd(this.g),Kd(this.b),Eb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VB,formatHex:VB,formatHex8:qxe,formatRgb:FB,toString:FB}));function VB(){return`#${$d(this.r)}${$d(this.g)}${$d(this.b)}`}function qxe(){return`#${$d(this.r)}${$d(this.g)}${$d(this.b)}${$d((isNaN(this.opacity)?1:this.opacity)*255)}`}function FB(){const t=Eb(this.opacity);return`${t===1?"rgb(":"rgba("}${Kd(this.r)}, ${Kd(this.g)}, ${Kd(this.b)}${t===1?")":`, ${t})`}`}function Eb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $d(t){return t=Kd(t),(t<16?"0":"")+t.toString(16)}function qB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new To(t,e,r,n)}function vK(t){if(t instanceof To)return new To(t.h,t.s,t.l,t.opacity);if(t instanceof Px||(t=Eg(t)),!t)return new To;if(t instanceof To)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(e===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new To(o,c,d,t.opacity)}function Hxe(t,e,r,n){return arguments.length===1?vK(t):new To(t,e,r,n??1)}function To(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}p7(To,Hxe,yK(Px,{brighter(t){return t=t==null?Ab:Math.pow(Ab,t),new To(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tg:Math.pow(Tg,t),new To(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new os(t_(t>=240?t-240:t+120,a,n),t_(t,a,n),t_(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new To(HB(this.h),qy(this.s),qy(this.l),Eb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Eb(this.opacity);return`${t===1?"hsl(":"hsla("}${HB(this.h)}, ${qy(this.s)*100}%, ${qy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function HB(t){return t=(t||0)%360,t<0?t+360:t}function qy(t){return Math.max(0,Math.min(1,t||0))}function t_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const m7=t=>()=>t;function Gxe(t,e){return function(r){return t+r*e}}function Wxe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Kxe(t){return(t=+t)==1?bK:function(e,r){return r-e?Wxe(e,r,t):m7(isNaN(e)?r:e)}}function bK(t,e){var r=e-t;return r?Gxe(t,r):m7(isNaN(t)?e:t)}const GB=(function t(e){var r=Kxe(e);function n(a,i){var o=r((a=LT(a)).r,(i=LT(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=bK(a.opacity,i.opacity);return function(p){return a.r=o(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function Qxe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function Xxe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Yxe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Zf(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function Jxe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function kb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Zxe(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Zf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var BT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,r_=new RegExp(BT.source,"g");function e1e(t){return function(){return t}}function t1e(t){return function(e){return t(e)+""}}function r1e(t,e){var r=BT.lastIndex=r_.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=BT.exec(t))&&(a=r_.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:kb(n,a)})),r=r_.lastIndex;return r<e.length&&(i=e.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?t1e(d[0].x):e1e(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function Zf(t,e){var r=typeof e,n;return e==null||r==="boolean"?m7(e):(r==="number"?kb:r==="string"?(n=Eg(e))?(e=n,GB):r1e:e instanceof Eg?GB:e instanceof Date?Jxe:Xxe(e)?Qxe:Array.isArray(e)?Yxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Zxe:kb)(t,e)}function g7(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function n1e(t,e){e===void 0&&(e=t,t=Zf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function a1e(t){return function(){return t}}function Cb(t){return+t}var WB=[0,1];function zi(t){return t}function $T(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:a1e(isNaN(e)?NaN:.5)}function i1e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function s1e(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=$T(a,n),i=r(o,i)):(n=$T(n,a),i=r(i,o)),function(c){return i(n(c))}}function o1e(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=$T(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(c){var d=Dx(t,c,1,n)-1;return i[d](a[d](c))}}function Lx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _w(){var t=WB,e=WB,r=Zf,n,a,i,o=zi,c,d,h;function p(){var x=Math.min(t.length,e.length);return o!==zi&&(o=i1e(t[0],t[x-1])),c=x>2?o1e:s1e,d=h=null,m}function m(x){return x==null||isNaN(x=+x)?i:(d||(d=c(t.map(n),e,r)))(n(o(x)))}return m.invert=function(x){return o(a((h||(h=c(e,t.map(n),kb)))(x)))},m.domain=function(x){return arguments.length?(t=Array.from(x,Cb),p()):t.slice()},m.range=function(x){return arguments.length?(e=Array.from(x),p()):e.slice()},m.rangeRound=function(x){return e=Array.from(x),r=g7,p()},m.clamp=function(x){return arguments.length?(o=x?!0:zi,p()):o!==zi},m.interpolate=function(x){return arguments.length?(r=x,p()):r},m.unknown=function(x){return arguments.length?(i=x,m):i},function(x,y){return n=x,a=y,p()}}function x7(){return _w()(zi,zi)}function l1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ob(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function gf(t){return t=Ob(Math.abs(t)),t?t[1]:NaN}function c1e(t,e){return function(r,n){for(var a=r.length,i=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return i.reverse().join(e)}}function u1e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var d1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kg(t){if(!(e=d1e.exec(t)))throw new Error("invalid format: "+t);var e;return new y7({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}kg.prototype=y7.prototype;function y7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}y7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h1e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Ib;function f1e(t,e){var r=Ob(t,e);if(!r)return Ib=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(Ib=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ob(t,Math.max(0,e+i-1))[0]}function KB(t,e){var r=Ob(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const QB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:l1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>KB(t*100,e),r:KB,s:f1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function XB(t){return t}var YB=Array.prototype.map,JB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function p1e(t){var e=t.grouping===void 0||t.thousands===void 0?XB:c1e(YB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?XB:u1e(YB.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,x){m=kg(m);var y=m.fill,w=m.align,N=m.sign,S=m.symbol,E=m.zero,C=m.width,M=m.comma,L=m.precision,I=m.trim,R=m.type;R==="n"?(M=!0,R="g"):QB[R]||(L===void 0&&(L=12),I=!0,R="g"),(E||y==="0"&&w==="=")&&(E=!0,y="0",w="=");var A=(x&&x.prefix!==void 0?x.prefix:"")+(S==="$"?r:S==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():""),T=(S==="$"?n:/[%p]/.test(R)?o:"")+(x&&x.suffix!==void 0?x.suffix:""),k=QB[R],F=/[defgprs%]/.test(R);L=L===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function O($){var B=A,G=T,Q,H,K;if(R==="c")G=k($)+G,$="";else{$=+$;var te=$<0||1/$<0;if($=isNaN($)?d:k(Math.abs($),L),I&&($=h1e($)),te&&+$==0&&N!=="+"&&(te=!1),B=(te?N==="("?N:c:N==="-"||N==="("?"":N)+B,G=(R==="s"&&!isNaN($)&&Ib!==void 0?JB[8+Ib/3]:"")+G+(te&&N==="("?")":""),F){for(Q=-1,H=$.length;++Q<H;)if(K=$.charCodeAt(Q),48>K||K>57){G=(K===46?a+$.slice(Q+1):$.slice(Q))+G,$=$.slice(0,Q);break}}}M&&!E&&($=e($,1/0));var ae=B.length+$.length+G.length,ce=ae<C?new Array(C-ae+1).join(y):"";switch(M&&E&&($=e(ce+$,ce.length?C-G.length:1/0),ce=""),w){case"<":$=B+$+G+ce;break;case"=":$=B+ce+$+G;break;case"^":$=ce.slice(0,ae=ce.length>>1)+B+$+G+ce.slice(ae);break;default:$=ce+B+$+G;break}return i($)}return O.toString=function(){return m+""},O}function p(m,x){var y=Math.max(-8,Math.min(8,Math.floor(gf(x)/3)))*3,w=Math.pow(10,-y),N=h((m=kg(m),m.type="f",m),{suffix:JB[8+y/3]});return function(S){return N(w*S)}}return{format:h,formatPrefix:p}}var Hy,v7,wK;m1e({thousands:",",grouping:[3],currency:["$",""]});function m1e(t){return Hy=p1e(t),v7=Hy.format,wK=Hy.formatPrefix,Hy}function g1e(t){return Math.max(0,-gf(Math.abs(t)))}function x1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gf(e)/3)))*3-gf(Math.abs(t)))}function y1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,gf(e)-gf(t))+1}function SK(t,e,r,n){var a=DT(t,e,r),i;switch(n=kg(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=x1e(a,o))&&(n.precision=i),wK(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=y1e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=g1e(a))&&(n.precision=i-(n.type==="%")*2);break}}return v7(n)}function Qu(t){var e=t.domain;return t.ticks=function(r){var n=e();return RT(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return SK(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],c=n[i],d,h,p=10;for(c<o&&(h=o,o=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=MT(o,c,r),h===d)return n[a]=o,n[i]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function Rb(){var t=x7();return t.copy=function(){return Lx(t,Rb())},po.apply(t,arguments),Qu(t)}function NK(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Cb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return NK(t).unknown(e)},t=arguments.length?Array.from(t,Cb):[0,1],Qu(r)}function _K(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function ZB(t){return Math.log(t)}function e$(t){return Math.exp(t)}function v1e(t){return-Math.log(-t)}function b1e(t){return-Math.exp(-t)}function w1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function S1e(t){return t===10?w1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function N1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function t$(t){return(e,r)=>-t(-e,r)}function b7(t){const e=t(ZB,e$),r=e.domain;let n=10,a,i;function o(){return a=N1e(n),i=S1e(n),r()[0]<0?(a=t$(a),i=t$(i),t(v1e,b1e)):t(ZB,e$),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let x=a(h),y=a(p),w,N;const S=c==null?10:+c;let E=[];if(!(n%1)&&y-x<S){if(x=Math.floor(x),y=Math.ceil(y),h>0){for(;x<=y;++x)for(w=1;w<n;++w)if(N=x<0?w/i(-x):w*i(x),!(N<h)){if(N>p)break;E.push(N)}}else for(;x<=y;++x)for(w=n-1;w>=1;--w)if(N=x>0?w/i(-x):w*i(x),!(N<h)){if(N>p)break;E.push(N)}E.length*2<S&&(E=RT(h,p,S))}else E=RT(x,y,Math.min(y-x,S)).map(i);return m?E.reverse():E},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=kg(d)).precision==null&&(d.trim=!0),d=v7(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(_K(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function jK(){const t=b7(_w()).domain([1,10]);return t.copy=()=>Lx(t,jK()).base(t.base()),po.apply(t,arguments),t}function r$(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function n$(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function w7(t){var e=1,r=t(r$(e),n$(e));return r.constant=function(n){return arguments.length?t(r$(e=+n),n$(e)):e},Qu(r)}function TK(){var t=w7(_w());return t.copy=function(){return Lx(t,TK()).constant(t.constant())},po.apply(t,arguments)}function a$(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function _1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function j1e(t){return t<0?-t*t:t*t}function S7(t){var e=t(zi,zi),r=1;function n(){return r===1?t(zi,zi):r===.5?t(_1e,j1e):t(a$(r),a$(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Qu(e)}function N7(){var t=S7(_w());return t.copy=function(){return Lx(t,N7()).exponent(t.exponent())},po.apply(t,arguments),t}function T1e(){return N7.apply(null,arguments).exponent(.5)}function i$(t){return Math.sign(t)*t*t}function A1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function AK(){var t=x7(),e=[0,1],r=!1,n;function a(i){var o=A1e(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(i$(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,Cb)).map(i$)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return AK(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},po.apply(a,arguments),Qu(a)}function EK(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=Ixe(t,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:e[Dx(r,o)]}return i.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Iu),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return EK().domain(t).range(e).unknown(n)},po.apply(i,arguments)}function kK(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[Dx(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return kK().domain([t,e]).range(a).unknown(i)},po.apply(Qu(o),arguments)}function CK(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[Dx(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return CK().domain(t).range(e).unknown(r)},po.apply(a,arguments)}const n_=new Date,a_=new Date;function Xa(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<o);return d},a.filter=i=>Xa(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!i(o););else for(;--c>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(n_.setTime(+i),a_.setTime(+o),t(n_),t(a_),Math.floor(r(n_,a_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Mb=Xa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Mb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Xa(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Mb);Mb.range;const Yl=1e3,ro=Yl*60,Jl=ro*60,mc=Jl*24,_7=mc*7,s$=mc*30,i_=mc*365,zd=Xa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Yl)},(t,e)=>(e-t)/Yl,t=>t.getUTCSeconds());zd.range;const j7=Xa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yl)},(t,e)=>{t.setTime(+t+e*ro)},(t,e)=>(e-t)/ro,t=>t.getMinutes());j7.range;const T7=Xa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ro)},(t,e)=>(e-t)/ro,t=>t.getUTCMinutes());T7.range;const A7=Xa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yl-t.getMinutes()*ro)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getHours());A7.range;const E7=Xa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getUTCHours());E7.range;const Bx=Xa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ro)/mc,t=>t.getDate()-1);Bx.range;const jw=Xa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/mc,t=>t.getUTCDate()-1);jw.range;const OK=Xa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/mc,t=>Math.floor(t/mc));OK.range;function A0(t){return Xa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ro)/_7)}const Tw=A0(0),Db=A0(1),E1e=A0(2),k1e=A0(3),xf=A0(4),C1e=A0(5),O1e=A0(6);Tw.range;Db.range;E1e.range;k1e.range;xf.range;C1e.range;O1e.range;function E0(t){return Xa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/_7)}const Aw=E0(0),Pb=E0(1),I1e=E0(2),R1e=E0(3),yf=E0(4),M1e=E0(5),D1e=E0(6);Aw.range;Pb.range;I1e.range;R1e.range;yf.range;M1e.range;D1e.range;const k7=Xa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());k7.range;const C7=Xa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());C7.range;const gc=Xa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());gc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});gc.range;const xc=Xa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());xc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});xc.range;function IK(t,e,r,n,a,i){const o=[[zd,1,Yl],[zd,5,5*Yl],[zd,15,15*Yl],[zd,30,30*Yl],[i,1,ro],[i,5,5*ro],[i,15,15*ro],[i,30,30*ro],[a,1,Jl],[a,3,3*Jl],[a,6,6*Jl],[a,12,12*Jl],[n,1,mc],[n,2,2*mc],[r,1,_7],[e,1,s$],[e,3,3*s$],[t,1,i_]];function c(h,p,m){const x=p<h;x&&([h,p]=[p,h]);const y=m&&typeof m.range=="function"?m:d(h,p,m),w=y?y.range(h,+p+1):[];return x?w.reverse():w}function d(h,p,m){const x=Math.abs(p-h)/m,y=h7(([,,S])=>S).right(o,x);if(y===o.length)return t.every(DT(h/i_,p/i_,m));if(y===0)return Mb.every(Math.max(DT(h,p,m),1));const[w,N]=o[x/o[y-1][2]<o[y][2]/x?y-1:y];return w.every(N)}return[c,d]}const[P1e,L1e]=IK(xc,C7,Aw,OK,E7,T7),[B1e,$1e]=IK(gc,k7,Tw,Bx,A7,j7);function s_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function o_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lm(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function z1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=cm(a),p=um(a),m=cm(i),x=um(i),y=cm(o),w=um(o),N=cm(c),S=um(c),E=cm(d),C=um(d),M={a:K,A:te,b:ae,B:ce,c:null,d:h$,e:h$,f:cye,g:vye,G:wye,H:sye,I:oye,j:lye,L:RK,m:uye,M:dye,p:X,q:ie,Q:m$,s:g$,S:hye,u:fye,U:pye,V:mye,w:gye,W:xye,x:null,X:null,y:yye,Y:bye,Z:Sye,"%":p$},L={a:ne,A:ve,b:pe,B:Be,c:null,d:f$,e:f$,f:Tye,g:Pye,G:Bye,H:Nye,I:_ye,j:jye,L:DK,m:Aye,M:Eye,p:Ge,q:He,Q:m$,s:g$,S:kye,u:Cye,U:Oye,V:Iye,w:Rye,W:Mye,x:null,X:null,y:Dye,Y:Lye,Z:$ye,"%":p$},I={a:F,A:O,b:$,B,c:G,d:u$,e:u$,f:rye,g:c$,G:l$,H:d$,I:d$,j:J1e,L:tye,m:Y1e,M:Z1e,p:k,q:X1e,Q:aye,s:iye,S:eye,u:H1e,U:G1e,V:W1e,w:q1e,W:K1e,x:Q,X:H,y:c$,Y:l$,Z:Q1e,"%":nye};M.x=R(r,M),M.X=R(n,M),M.c=R(e,M),L.x=R(r,L),L.X=R(n,L),L.c=R(e,L);function R(Ne,We){return function(Y){var re=[],be=-1,we=0,Ye=Ne.length,nt,Ot,Ee;for(Y instanceof Date||(Y=new Date(+Y));++be<Ye;)Ne.charCodeAt(be)===37&&(re.push(Ne.slice(we,be)),(Ot=o$[nt=Ne.charAt(++be)])!=null?nt=Ne.charAt(++be):Ot=nt==="e"?" ":"0",(Ee=We[nt])&&(nt=Ee(Y,Ot)),re.push(nt),we=be+1);return re.push(Ne.slice(we,be)),re.join("")}}function A(Ne,We){return function(Y){var re=lm(1900,void 0,1),be=T(re,Ne,Y+="",0),we,Ye;if(be!=Y.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(We&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(we=o_(lm(re.y,0,1)),Ye=we.getUTCDay(),we=Ye>4||Ye===0?Pb.ceil(we):Pb(we),we=jw.offset(we,(re.V-1)*7),re.y=we.getUTCFullYear(),re.m=we.getUTCMonth(),re.d=we.getUTCDate()+(re.w+6)%7):(we=s_(lm(re.y,0,1)),Ye=we.getDay(),we=Ye>4||Ye===0?Db.ceil(we):Db(we),we=Bx.offset(we,(re.V-1)*7),re.y=we.getFullYear(),re.m=we.getMonth(),re.d=we.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Ye="Z"in re?o_(lm(re.y,0,1)).getUTCDay():s_(lm(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Ye+5)%7:re.w+re.U*7-(Ye+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,o_(re)):s_(re)}}function T(Ne,We,Y,re){for(var be=0,we=We.length,Ye=Y.length,nt,Ot;be<we;){if(re>=Ye)return-1;if(nt=We.charCodeAt(be++),nt===37){if(nt=We.charAt(be++),Ot=I[nt in o$?We.charAt(be++):nt],!Ot||(re=Ot(Ne,Y,re))<0)return-1}else if(nt!=Y.charCodeAt(re++))return-1}return re}function k(Ne,We,Y){var re=h.exec(We.slice(Y));return re?(Ne.p=p.get(re[0].toLowerCase()),Y+re[0].length):-1}function F(Ne,We,Y){var re=y.exec(We.slice(Y));return re?(Ne.w=w.get(re[0].toLowerCase()),Y+re[0].length):-1}function O(Ne,We,Y){var re=m.exec(We.slice(Y));return re?(Ne.w=x.get(re[0].toLowerCase()),Y+re[0].length):-1}function $(Ne,We,Y){var re=E.exec(We.slice(Y));return re?(Ne.m=C.get(re[0].toLowerCase()),Y+re[0].length):-1}function B(Ne,We,Y){var re=N.exec(We.slice(Y));return re?(Ne.m=S.get(re[0].toLowerCase()),Y+re[0].length):-1}function G(Ne,We,Y){return T(Ne,e,We,Y)}function Q(Ne,We,Y){return T(Ne,r,We,Y)}function H(Ne,We,Y){return T(Ne,n,We,Y)}function K(Ne){return o[Ne.getDay()]}function te(Ne){return i[Ne.getDay()]}function ae(Ne){return d[Ne.getMonth()]}function ce(Ne){return c[Ne.getMonth()]}function X(Ne){return a[+(Ne.getHours()>=12)]}function ie(Ne){return 1+~~(Ne.getMonth()/3)}function ne(Ne){return o[Ne.getUTCDay()]}function ve(Ne){return i[Ne.getUTCDay()]}function pe(Ne){return d[Ne.getUTCMonth()]}function Be(Ne){return c[Ne.getUTCMonth()]}function Ge(Ne){return a[+(Ne.getUTCHours()>=12)]}function He(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var We=R(Ne+="",M);return We.toString=function(){return Ne},We},parse:function(Ne){var We=A(Ne+="",!1);return We.toString=function(){return Ne},We},utcFormat:function(Ne){var We=R(Ne+="",L);return We.toString=function(){return Ne},We},utcParse:function(Ne){var We=A(Ne+="",!0);return We.toString=function(){return Ne},We}}}var o$={"-":"",_:" ",0:"0"},li=/^\s*\d+/,U1e=/^%/,V1e=/[\\^$*+?|[\]().{}]/g;function Yr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function F1e(t){return t.replace(V1e,"\\$&")}function cm(t){return new RegExp("^(?:"+t.map(F1e).join("|")+")","i")}function um(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function q1e(t,e,r){var n=li.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function H1e(t,e,r){var n=li.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function G1e(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function W1e(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function K1e(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function l$(t,e,r){var n=li.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function c$(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Q1e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function X1e(t,e,r){var n=li.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Y1e(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function u$(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function J1e(t,e,r){var n=li.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function d$(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Z1e(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function eye(t,e,r){var n=li.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function tye(t,e,r){var n=li.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function rye(t,e,r){var n=li.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function nye(t,e,r){var n=U1e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function aye(t,e,r){var n=li.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function iye(t,e,r){var n=li.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function h$(t,e){return Yr(t.getDate(),e,2)}function sye(t,e){return Yr(t.getHours(),e,2)}function oye(t,e){return Yr(t.getHours()%12||12,e,2)}function lye(t,e){return Yr(1+Bx.count(gc(t),t),e,3)}function RK(t,e){return Yr(t.getMilliseconds(),e,3)}function cye(t,e){return RK(t,e)+"000"}function uye(t,e){return Yr(t.getMonth()+1,e,2)}function dye(t,e){return Yr(t.getMinutes(),e,2)}function hye(t,e){return Yr(t.getSeconds(),e,2)}function fye(t){var e=t.getDay();return e===0?7:e}function pye(t,e){return Yr(Tw.count(gc(t)-1,t),e,2)}function MK(t){var e=t.getDay();return e>=4||e===0?xf(t):xf.ceil(t)}function mye(t,e){return t=MK(t),Yr(xf.count(gc(t),t)+(gc(t).getDay()===4),e,2)}function gye(t){return t.getDay()}function xye(t,e){return Yr(Db.count(gc(t)-1,t),e,2)}function yye(t,e){return Yr(t.getFullYear()%100,e,2)}function vye(t,e){return t=MK(t),Yr(t.getFullYear()%100,e,2)}function bye(t,e){return Yr(t.getFullYear()%1e4,e,4)}function wye(t,e){var r=t.getDay();return t=r>=4||r===0?xf(t):xf.ceil(t),Yr(t.getFullYear()%1e4,e,4)}function Sye(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yr(e/60|0,"0",2)+Yr(e%60,"0",2)}function f$(t,e){return Yr(t.getUTCDate(),e,2)}function Nye(t,e){return Yr(t.getUTCHours(),e,2)}function _ye(t,e){return Yr(t.getUTCHours()%12||12,e,2)}function jye(t,e){return Yr(1+jw.count(xc(t),t),e,3)}function DK(t,e){return Yr(t.getUTCMilliseconds(),e,3)}function Tye(t,e){return DK(t,e)+"000"}function Aye(t,e){return Yr(t.getUTCMonth()+1,e,2)}function Eye(t,e){return Yr(t.getUTCMinutes(),e,2)}function kye(t,e){return Yr(t.getUTCSeconds(),e,2)}function Cye(t){var e=t.getUTCDay();return e===0?7:e}function Oye(t,e){return Yr(Aw.count(xc(t)-1,t),e,2)}function PK(t){var e=t.getUTCDay();return e>=4||e===0?yf(t):yf.ceil(t)}function Iye(t,e){return t=PK(t),Yr(yf.count(xc(t),t)+(xc(t).getUTCDay()===4),e,2)}function Rye(t){return t.getUTCDay()}function Mye(t,e){return Yr(Pb.count(xc(t)-1,t),e,2)}function Dye(t,e){return Yr(t.getUTCFullYear()%100,e,2)}function Pye(t,e){return t=PK(t),Yr(t.getUTCFullYear()%100,e,2)}function Lye(t,e){return Yr(t.getUTCFullYear()%1e4,e,4)}function Bye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?yf(t):yf.ceil(t),Yr(t.getUTCFullYear()%1e4,e,4)}function $ye(){return"+0000"}function p$(){return"%"}function m$(t){return+t}function g$(t){return Math.floor(+t/1e3)}var mh,LK,BK;zye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zye(t){return mh=z1e(t),LK=mh.format,mh.parse,BK=mh.utcFormat,mh.utcParse,mh}function Uye(t){return new Date(t)}function Vye(t){return t instanceof Date?+t:+new Date(+t)}function O7(t,e,r,n,a,i,o,c,d,h){var p=x7(),m=p.invert,x=p.domain,y=h(".%L"),w=h(":%S"),N=h("%I:%M"),S=h("%I %p"),E=h("%a %d"),C=h("%b %d"),M=h("%B"),L=h("%Y");function I(R){return(d(R)<R?y:c(R)<R?w:o(R)<R?N:i(R)<R?S:n(R)<R?a(R)<R?E:C:r(R)<R?M:L)(R)}return p.invert=function(R){return new Date(m(R))},p.domain=function(R){return arguments.length?x(Array.from(R,Vye)):x().map(Uye)},p.ticks=function(R){var A=x();return t(A[0],A[A.length-1],R??10)},p.tickFormat=function(R,A){return A==null?I:h(A)},p.nice=function(R){var A=x();return(!R||typeof R.range!="function")&&(R=e(A[0],A[A.length-1],R??10)),R?x(_K(A,R)):p},p.copy=function(){return Lx(p,O7(t,e,r,n,a,i,o,c,d,h))},p}function Fye(){return po.apply(O7(B1e,$1e,gc,k7,Tw,Bx,A7,j7,zd,LK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qye(){return po.apply(O7(P1e,L1e,xc,C7,Aw,jw,E7,T7,zd,BK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ew(){var t=0,e=1,r,n,a,i,o=zi,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:o(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(o=m,h):o};function p(m){return function(x){var y,w;return arguments.length?([y,w]=x,o=m(y,w),h):[o(0),o(1)]}}return h.range=p(Zf),h.rangeRound=p(g7),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Xu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $K(){var t=Qu(Ew()(zi));return t.copy=function(){return Xu(t,$K())},jc.apply(t,arguments)}function zK(){var t=b7(Ew()).domain([1,10]);return t.copy=function(){return Xu(t,zK()).base(t.base())},jc.apply(t,arguments)}function UK(){var t=w7(Ew());return t.copy=function(){return Xu(t,UK()).constant(t.constant())},jc.apply(t,arguments)}function I7(){var t=S7(Ew());return t.copy=function(){return Xu(t,I7()).exponent(t.exponent())},jc.apply(t,arguments)}function Hye(){return I7.apply(null,arguments).exponent(.5)}function VK(){var t=[],e=zi;function r(n){if(n!=null&&!isNaN(n=+n))return e((Dx(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Iu),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Oxe(t,i/n))},r.copy=function(){return VK(e).domain(t)},jc.apply(r,arguments)}function kw(){var t=0,e=.5,r=1,n=1,a,i,o,c,d,h=zi,p,m=!1,x;function y(N){return isNaN(N=+N)?x:(N=.5+((N=+p(N))-i)*(n*N<n*i?c:d),h(m?Math.max(0,Math.min(1,N)):N))}y.domain=function(N){return arguments.length?([t,e,r]=N,a=p(t=+t),i=p(e=+e),o=p(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y):[t,e,r]},y.clamp=function(N){return arguments.length?(m=!!N,y):m},y.interpolator=function(N){return arguments.length?(h=N,y):h};function w(N){return function(S){var E,C,M;return arguments.length?([E,C,M]=S,h=n1e(N,[E,C,M]),y):[h(0),h(.5),h(1)]}}return y.range=w(Zf),y.rangeRound=w(g7),y.unknown=function(N){return arguments.length?(x=N,y):x},function(N){return p=N,a=N(t),i=N(e),o=N(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y}}function FK(){var t=Qu(kw()(zi));return t.copy=function(){return Xu(t,FK())},jc.apply(t,arguments)}function qK(){var t=b7(kw()).domain([.1,1,10]);return t.copy=function(){return Xu(t,qK()).base(t.base())},jc.apply(t,arguments)}function HK(){var t=w7(kw());return t.copy=function(){return Xu(t,HK()).constant(t.constant())},jc.apply(t,arguments)}function R7(){var t=S7(kw());return t.copy=function(){return Xu(t,R7()).exponent(t.exponent())},jc.apply(t,arguments)}function Gye(){return R7.apply(null,arguments).exponent(.5)}const x$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jg,scaleDiverging:FK,scaleDivergingLog:qK,scaleDivergingPow:R7,scaleDivergingSqrt:Gye,scaleDivergingSymlog:HK,scaleIdentity:NK,scaleImplicit:PT,scaleLinear:Rb,scaleLog:jK,scaleOrdinal:f7,scalePoint:Bm,scalePow:N7,scaleQuantile:EK,scaleQuantize:kK,scaleRadial:AK,scaleSequential:$K,scaleSequentialLog:zK,scaleSequentialPow:I7,scaleSequentialQuantile:VK,scaleSequentialSqrt:Hye,scaleSequentialSymlog:UK,scaleSqrt:T1e,scaleSymlog:TK,scaleThreshold:CK,scaleTime:Fye,scaleUtc:qye,tickFormat:SK},Symbol.toStringTag,{value:"Module"}));var l_,y$;function Cw(){if(y$)return l_;y$=1;var t=Xf();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return l_=e,l_}var c_,v$;function GK(){if(v$)return c_;v$=1;function t(e,r){return e>r}return c_=t,c_}var u_,b$;function Wye(){if(b$)return u_;b$=1;var t=Cw(),e=GK(),r=Jf();function n(a){return a&&a.length?t(a,r,e):void 0}return u_=n,u_}var Kye=Wye();const Ow=tn(Kye);var d_,w$;function WK(){if(w$)return d_;w$=1;function t(e,r){return e<r}return d_=t,d_}var h_,S$;function Qye(){if(S$)return h_;S$=1;var t=Cw(),e=WK(),r=Jf();function n(a){return a&&a.length?t(a,r,e):void 0}return h_=n,h_}var Xye=Qye();const Iw=tn(Xye);var f_,N$;function Yye(){if(N$)return f_;N$=1;var t=QE(),e=xl(),r=tK(),n=fs();function a(i,o){var c=n(i)?t:r;return c(i,e(o,3))}return f_=a,f_}var p_,_$;function Jye(){if(_$)return p_;_$=1;var t=ZW(),e=Yye();function r(n,a){return t(e(n,a),1)}return p_=r,p_}var Zye=Jye();const eve=tn(Zye);var m_,j$;function tve(){if(j$)return m_;j$=1;var t=o7();function e(r,n){return t(r,n)}return m_=e,m_}var rve=tve();const $x=tn(rve);var ep=1e9,nve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},D7,Yn=!0,fo="[DecimalError] ",Qd=fo+"Invalid argument: ",M7=fo+"Exponent out of range: ",tp=Math.floor,Od=Math.pow,ave=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cs,ni=1e7,Hn=7,KK=9007199254740991,Lb=tp(KK/Hn),Mt={};Mt.absoluteValue=Mt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Mt.comparedTo=Mt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Mt.decimalPlaces=Mt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Hn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Mt.dividedBy=Mt.div=function(t){return ic(this,new this.constructor(t))};Mt.dividedToIntegerBy=Mt.idiv=function(t){var e=this,r=e.constructor;return Dn(ic(e,new r(t),0,1),r.precision)};Mt.equals=Mt.eq=function(t){return!this.cmp(t)};Mt.exponent=function(){return Ia(this)};Mt.greaterThan=Mt.gt=function(t){return this.cmp(t)>0};Mt.greaterThanOrEqualTo=Mt.gte=function(t){return this.cmp(t)>=0};Mt.isInteger=Mt.isint=function(){return this.e>this.d.length-2};Mt.isNegative=Mt.isneg=function(){return this.s<0};Mt.isPositive=Mt.ispos=function(){return this.s>0};Mt.isZero=function(){return this.s===0};Mt.lessThan=Mt.lt=function(t){return this.cmp(t)<0};Mt.lessThanOrEqualTo=Mt.lte=function(t){return this.cmp(t)<1};Mt.logarithm=Mt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Cs))throw Error(fo+"NaN");if(r.s<1)throw Error(fo+(r.s?"NaN":"-Infinity"));return r.eq(Cs)?new n(0):(Yn=!1,e=ic(Cg(r,i),Cg(t,i),i),Yn=!0,Dn(e,a))};Mt.minus=Mt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?YK(e,t):QK(e,(t.s=-t.s,t))};Mt.modulo=Mt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(fo+"NaN");return r.s?(Yn=!1,e=ic(r,t,0,1).times(t),Yn=!0,r.minus(e)):Dn(new n(r),a)};Mt.naturalExponential=Mt.exp=function(){return XK(this)};Mt.naturalLogarithm=Mt.ln=function(){return Cg(this)};Mt.negated=Mt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Mt.plus=Mt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?QK(e,t):YK(e,(t.s=-t.s,t))};Mt.precision=Mt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Qd+t);if(e=Ia(a)+1,n=a.d.length-1,r=n*Hn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Mt.squareRoot=Mt.sqrt=function(){var t,e,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(fo+"NaN")}for(t=Ia(c),Yn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=tl(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=tp((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(ic(c,i,o+2)).times(.5),tl(i.d).slice(0,o)===(e=tl(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Dn(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;o+=4}return Yn=!0,Dn(n,r)};Mt.times=Mt.mul=function(t){var e,r,n,a,i,o,c,d,h,p=this,m=p.constructor,x=p.d,y=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=x.length,h=y.length,d<h&&(i=x,x=y,y=i,o=d,d=h,h=o),i=[],o=d+h,n=o;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+y[n]*x[a-n-1]+e,i[a--]=c%ni|0,e=c/ni|0;i[a]=(i[a]+e)%ni|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Yn?Dn(t,m.precision):t};Mt.toDecimalPlaces=Mt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(ul(t,0,ep),e===void 0?e=n.rounding:ul(e,0,8),Dn(r,t+Ia(r)+1,e))};Mt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=f0(n,!0):(ul(t,0,ep),e===void 0?e=a.rounding:ul(e,0,8),n=Dn(new a(n),t+1,e),r=f0(n,!0,t+1)),r};Mt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?f0(a):(ul(t,0,ep),e===void 0?e=i.rounding:ul(e,0,8),n=Dn(new i(a),t+Ia(a)+1,e),r=f0(n.abs(),!1,t+Ia(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Mt.toInteger=Mt.toint=function(){var t=this,e=t.constructor;return Dn(new e(t),Ia(t)+1,e.rounding)};Mt.toNumber=function(){return+this};Mt.toPower=Mt.pow=function(t){var e,r,n,a,i,o,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(Cs);if(c=new d(c),!c.s){if(t.s<1)throw Error(fo+"Infinity");return c}if(c.eq(Cs))return c;if(n=d.precision,t.eq(Cs))return Dn(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=c.s,o){if((r=p<0?-p:p)<=KK){for(a=new d(Cs),e=Math.ceil(n/Hn+4),Yn=!1;r%2&&(a=a.times(c),A$(a.d,e)),r=tp(r/2),r!==0;)c=c.times(c),A$(c.d,e);return Yn=!0,t.s<0?new d(Cs).div(a):Dn(a,n)}}else if(i<0)throw Error(fo+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Yn=!1,a=t.times(Cg(c,n+h)),Yn=!0,a=XK(a),a.s=i,a};Mt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Ia(a),n=f0(a,r<=i.toExpNeg||r>=i.toExpPos)):(ul(t,1,ep),e===void 0?e=i.rounding:ul(e,0,8),a=Dn(new i(a),t,e),r=Ia(a),n=f0(a,t<=r||r<=i.toExpNeg,t)),n};Mt.toSignificantDigits=Mt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(ul(t,1,ep),e===void 0?e=n.rounding:ul(e,0,8)),Dn(new n(r),t,e)};Mt.toString=Mt.valueOf=Mt.val=Mt.toJSON=Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ia(t),r=t.constructor;return f0(t,e<=r.toExpNeg||e>=r.toExpPos)};function QK(t,e){var r,n,a,i,o,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Yn?Dn(e,m):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(m/Hn),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/ni|0,d[i]%=ni;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Yn?Dn(e,m):e}function ul(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Qd+t)}function tl(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=Hn-n.length,r&&(i+=lu(r)),i+=n;o=t[e],n=o+"",r=Hn-n.length,r&&(i+=lu(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ic=(function(){function t(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%ni|0,o=i/ni|0;return o&&n.unshift(o),n}function e(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*ni+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,h,p,m,x,y,w,N,S,E,C,M,L,I,R,A,T,k=n.constructor,F=n.s==a.s?1:-1,O=n.d,$=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(fo+"Division by zero");for(d=n.e-a.e,A=$.length,I=O.length,y=new k(F),w=y.d=[],h=0;$[h]==(O[h]||0);)++h;if($[h]>(O[h]||0)&&--d,i==null?C=i=k.precision:o?C=i+(Ia(n)-Ia(a))+1:C=i,C<0)return new k(0);if(C=C/Hn+2|0,h=0,A==1)for(p=0,$=$[0],C++;(h<I||p)&&C--;h++)M=p*ni+(O[h]||0),w[h]=M/$|0,p=M%$|0;else{for(p=ni/($[0]+1)|0,p>1&&($=t($,p),O=t(O,p),A=$.length,I=O.length),L=A,N=O.slice(0,A),S=N.length;S<A;)N[S++]=0;T=$.slice(),T.unshift(0),R=$[0],$[1]>=ni/2&&++R;do p=0,c=e($,N,A,S),c<0?(E=N[0],A!=S&&(E=E*ni+(N[1]||0)),p=E/R|0,p>1?(p>=ni&&(p=ni-1),m=t($,p),x=m.length,S=N.length,c=e(m,N,x,S),c==1&&(p--,r(m,A<x?T:$,x))):(p==0&&(c=p=1),m=$.slice()),x=m.length,x<S&&m.unshift(0),r(N,m,S),c==-1&&(S=N.length,c=e($,N,A,S),c<1&&(p++,r(N,A<S?T:$,S))),S=N.length):c===0&&(p++,N=[0]),w[h++]=p,c&&N[0]?N[S++]=O[L]||0:(N=[O[L]],S=1);while((L++<I||N[0]!==void 0)&&C--)}return w[0]||w.shift(),y.e=d,Dn(y,o?i+Ia(y)+1:i)}})();function XK(t,e){var r,n,a,i,o,c,d=0,h=0,p=t.constructor,m=p.precision;if(Ia(t)>16)throw Error(M7+Ia(t));if(!t.s)return new p(Cs);for(Yn=!1,c=m,o=new p(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(Od(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(Cs),p.precision=c;;){if(a=Dn(a.times(t),c),r=r.times(++d),o=i.plus(ic(a,r,c)),tl(o.d).slice(0,c)===tl(i.d).slice(0,c)){for(;h--;)i=Dn(i.times(i),c);return p.precision=m,e==null?(Yn=!0,Dn(i,m)):i}i=o}}function Ia(t){for(var e=t.e*Hn,r=t.d[0];r>=10;r/=10)e++;return e}function g_(t,e,r){if(e>t.LN10.sd())throw Yn=!0,r&&(t.precision=r),Error(fo+"LN10 precision limit exceeded");return Dn(new t(t.LN10),e)}function lu(t){for(var e="";t--;)e+="0";return e}function Cg(t,e){var r,n,a,i,o,c,d,h,p,m=1,x=10,y=t,w=y.d,N=y.constructor,S=N.precision;if(y.s<1)throw Error(fo+(y.s?"NaN":"-Infinity"));if(y.eq(Cs))return new N(0);if(e==null?(Yn=!1,h=S):h=e,y.eq(10))return e==null&&(Yn=!0),g_(N,h);if(h+=x,N.precision=h,r=tl(w),n=r.charAt(0),i=Ia(y),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)y=y.times(t),r=tl(y.d),n=r.charAt(0),m++;i=Ia(y),n>1?(y=new N("0."+r),i++):y=new N(n+"."+r.slice(1))}else return d=g_(N,h+2,S).times(i+""),y=Cg(new N(n+"."+r.slice(1)),h-x).plus(d),N.precision=S,e==null?(Yn=!0,Dn(y,S)):y;for(c=o=y=ic(y.minus(Cs),y.plus(Cs),h),p=Dn(y.times(y),h),a=3;;){if(o=Dn(o.times(p),h),d=c.plus(ic(o,new N(a),h)),tl(d.d).slice(0,h)===tl(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(g_(N,h+2,S).times(i+""))),c=ic(c,new N(m),h),N.precision=S,e==null?(Yn=!0,Dn(c,S)):c;c=d,a+=2}}function T$(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=tp(r/Hn),t.d=[],n=(r+1)%Hn,r<0&&(n+=Hn),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Hn;n<a;)t.d.push(+e.slice(n,n+=Hn));e=e.slice(n),n=Hn-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Yn&&(t.e>Lb||t.e<-Lb))throw Error(M7+r)}else t.s=0,t.e=0,t.d=[0];return t}function Dn(t,e,r){var n,a,i,o,c,d,h,p,m=t.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Hn,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/Hn),i=m.length,p>=i)return t;for(h=i=m[p],o=1;i>=10;i/=10)o++;n%=Hn,a=n-Hn+o}if(r!==void 0&&(i=Od(10,o-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/Od(10,o-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Ia(t),m.length=1,e=e-i-1,m[0]=Od(10,(Hn-e%Hn)%Hn),t.e=tp(-e/Hn)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=Od(10,Hn-n),m[p]=a>0?(h/Od(10,o-a)%Od(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==ni&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=ni)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Yn&&(t.e>Lb||t.e<-Lb))throw Error(M7+Ia(t));return t}function YK(t,e){var r,n,a,i,o,c,d,h,p,m,x=t.constructor,y=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),Yn?Dn(e,y):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(p=o<0,p?(r=d,o=-o,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(y/Hn),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}o=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>o;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=ni-1;--d[i],d[a]+=ni}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Yn?Dn(e,y):e):new x(0)}function f0(t,e,r){var n,a=Ia(t),i=tl(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+lu(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+lu(-a-1)+i,r&&(n=r-o)>0&&(i+=lu(n))):a>=o?(i+=lu(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+lu(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=lu(n))),t.s<0?"-"+i:i}function A$(t,e){if(t.length>e)return t.length=e,!0}function JK(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Qd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return T$(o,i.toString())}else if(typeof i!="string")throw Error(Qd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,ave.test(i))T$(o,i);else throw Error(Qd+i)}if(a.prototype=Mt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=JK,a.config=a.set=ive,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function ive(t){if(!t||typeof t!="object")throw Error(fo+"Object expected");var e,r,n,a=["precision",1,ep,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(tp(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Qd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Qd+r+": "+n);return this}var D7=JK(nve);Cs=new D7(1);const jn=D7;function sve(t){return uve(t)||cve(t)||lve(t)||ove()}function ove(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lve(t,e){if(t){if(typeof t=="string")return zT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zT(t,e)}}function cve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function uve(t){if(Array.isArray(t))return zT(t)}function zT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var dve=function(e){return e},ZK={},eQ=function(e){return e===ZK},E$=function(e){return function r(){return arguments.length===0||arguments.length===1&&eQ(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},hve=function t(e,r){return e===1?r:E$(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(c){return c!==ZK}).length;return o>=e?r.apply(void 0,a):t(e-o,E$(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return eQ(m)?d.shift():m});return r.apply(void 0,sve(p).concat(d))}))})},Rw=function(e){return hve(e.length,e)},UT=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},fve=Rw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),pve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return dve;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},VT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},tQ=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function mve(t){var e;return t===0?e=1:e=Math.floor(new jn(t).abs().log(10).toNumber())+1,e}function gve(t,e,r){for(var n=new jn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var xve=Rw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),yve=Rw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),vve=Rw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Mw={rangeStep:gve,getDigitCount:mve,interpolateNumber:xve,uninterpolateNumber:yve,uninterpolateTruncation:vve};function FT(t){return Sve(t)||wve(t)||rQ(t)||bve()}function bve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Sve(t){if(Array.isArray(t))return qT(t)}function Og(t,e){return jve(t)||_ve(t,e)||rQ(t,e)||Nve()}function Nve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rQ(t,e){if(t){if(typeof t=="string")return qT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qT(t,e)}}function qT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _ve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function jve(t){if(Array.isArray(t))return t}function nQ(t){var e=Og(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function aQ(t,e,r){if(t.lte(0))return new jn(0);var n=Mw.getDigitCount(t.toNumber()),a=new jn(10).pow(n),i=t.div(a),o=n!==1?.05:.1,c=new jn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new jn(Math.ceil(d))}function Tve(t,e,r){var n=1,a=new jn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new jn(10).pow(Mw.getDigitCount(t)-1),a=new jn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new jn(Math.floor(t)))}else t===0?a=new jn(Math.floor((e-1)/2)):r||(a=new jn(Math.floor(t)));var o=Math.floor((e-1)/2),c=pve(fve(function(d){return a.add(new jn(d-o).mul(n)).toNumber()}),UT);return c(0,e)}function iQ(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new jn(0),tickMin:new jn(0),tickMax:new jn(0)};var i=aQ(new jn(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new jn(0):(o=new jn(t).add(e).div(2),o=o.sub(new jn(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),d=Math.ceil(new jn(e).sub(o).div(i).toNumber()),h=c+d+1;return h>r?iQ(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:o.sub(new jn(c).mul(i)),tickMax:o.add(new jn(d).mul(i))})}function Ave(t){var e=Og(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=nQ([r,n]),d=Og(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(FT(UT(0,a-1).map(function(){return 1/0}))):[].concat(FT(UT(0,a-1).map(function(){return-1/0})),[p]);return r>n?VT(m):m}if(h===p)return Tve(h,a,i);var x=iQ(h,p,o,i),y=x.step,w=x.tickMin,N=x.tickMax,S=Mw.rangeStep(w,N.add(new jn(.1).mul(y)),y);return r>n?VT(S):S}function Eve(t,e){var r=Og(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=nQ([n,a]),c=Og(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=aQ(new jn(h).sub(d).div(p-1),i,0),x=[].concat(FT(Mw.rangeStep(new jn(d),new jn(h).sub(new jn(.99).mul(m)),m)),[h]);return n>a?VT(x):x}var kve=tQ(Ave),Cve=tQ(Eve),Ove="Invariant failed";function p0(t,e){throw new Error(Ove)}var Ive=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function Bb(){return Bb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bb.apply(this,arguments)}function Rve(t,e){return Lve(t)||Pve(t,e)||Dve(t,e)||Mve()}function Mve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dve(t,e){if(t){if(typeof t=="string")return k$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k$(t,e)}}function k$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Lve(t){if(Array.isArray(t))return t}function Bve(t,e){if(t==null)return{};var r=$ve(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $ve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function zve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lQ(n.key),n)}}function Vve(t,e,r){return e&&Uve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fve(t,e,r){return e=$b(e),qve(t,sQ()?Reflect.construct(e,r||[],$b(t).constructor):e.apply(t,r))}function qve(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hve(t)}function Hve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sQ=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$b(t)}function Gve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HT(t,e)}function HT(t,e){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HT(t,e)}function oQ(t,e,r){return e=lQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lQ(t){var e=Wve(t,"string");return vf(e)=="symbol"?e:e+""}function Wve(t,e){if(vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zx=(function(t){function e(){return zve(this,e),Fve(this,e,arguments)}return Gve(e,t),Vve(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,x=Bve(n,Ive),y=Xt(x,!1);this.props.direction==="x"&&p.type!=="number"&&p0();var w=d.map(function(N){var S=h(N,c),E=S.x,C=S.y,M=S.value,L=S.errorVal;if(!L)return null;var I=[],R,A;if(Array.isArray(L)){var T=Rve(L,2);R=T[0],A=T[1]}else R=A=L;if(i==="vertical"){var k=p.scale,F=C+a,O=F+o,$=F-o,B=k(M-R),G=k(M+A);I.push({x1:G,y1:O,x2:G,y2:$}),I.push({x1:B,y1:F,x2:G,y2:F}),I.push({x1:B,y1:O,x2:B,y2:$})}else if(i==="horizontal"){var Q=m.scale,H=E+a,K=H-o,te=H+o,ae=Q(M-R),ce=Q(M+A);I.push({x1:K,y1:ce,x2:te,y2:ce}),I.push({x1:H,y1:ae,x2:H,y2:ce}),I.push({x1:K,y1:ae,x2:te,y2:ae})}return se.createElement(Qr,Bb({className:"recharts-errorBar",key:"bar-".concat(I.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},y),I.map(function(X){return se.createElement("line",Bb({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return se.createElement(Qr,{className:"recharts-errorBars"},w)}}])})(se.Component);oQ(zx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});oQ(zx,"displayName","ErrorBar");function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function C$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(r),!0).forEach(function(n){Kve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kve(t,e,r){return e=Qve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qve(t){var e=Xve(t,"string");return Ig(e)=="symbol"?e:e+""}function Xve(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cQ=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=Es(r,$h);if(!o)return null;var c=$h.defaultProps,d=c!==void 0?jd(jd({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var x=m.item,y=m.props,w=y.sectors||y.data||[];return p.concat(w.map(function(N){return{type:o.props.iconType||x.props.legendType,value:N.name,color:N.fill,payload:N}}))},[]):h=(n||[]).map(function(p){var m=p.item,x=m.type.defaultProps,y=x!==void 0?jd(jd({},x),m.props):{},w=y.dataKey,N=y.name,S=y.legendType,E=y.hide;return{inactive:E,dataKey:w,type:d.iconType||S||"square",color:P7(m),value:N||w,payload:y}}),jd(jd(jd({},d),$h.getWithHeight(o,a)),{},{payload:h,item:o})};function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function O$(t){return ebe(t)||Zve(t)||Jve(t)||Yve()}function Yve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jve(t,e){if(t){if(typeof t=="string")return GT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GT(t,e)}}function Zve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ebe(t){if(Array.isArray(t))return GT(t)}function GT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ca(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(r),!0).forEach(function(n){Uh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uh(t,e,r){return e=tbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tbe(t){var e=rbe(t,"string");return Rg(e)=="symbol"?e:e+""}function rbe(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bi(t,e,r){return xr(t)||xr(e)?r:Ga(e)?io(t,e,r):dr(e)?e(t):r}function $m(t,e,r,n){var a=eve(t,function(c){return bi(c,e)});if(r==="number"){var i=a.filter(function(c){return bt(c)||parseFloat(c)});return i.length?[Iw(i),Ow(i)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!xr(c)}):a;return o.map(function(c){return Ga(c)||c instanceof Date?c:""})}var nbe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,x=h>=c-1?a[0].coordinate:a[h+1].coordinate,y=void 0;if(Eo(m-p)!==Eo(x-m)){var w=[];if(Eo(x-m)===Eo(d[1]-d[0])){y=x;var N=m+d[1]-d[0];w[0]=Math.min(N,(N+p)/2),w[1]=Math.max(N,(N+p)/2)}else{y=p;var S=x+d[1]-d[0];w[0]=Math.min(m,(S+m)/2),w[1]=Math.max(m,(S+m)/2)}var E=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(e>E[0]&&e<=E[1]||e>=w[0]&&e<=w[1]){o=a[h].index;break}}else{var C=Math.min(p,x),M=Math.max(p,x);if(e>(C+m)/2&&e<=(M+m)/2){o=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){o=n[L].index;break}return o},P7=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?ca(ca({},e.type.defaultProps),e.props):e.props,o=i.stroke,c=i.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},abe=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),x=0,y=m.length;x<y;x++){var w=p[m[x]],N=w.items,S=w.cateAxisId,E=N.filter(function(A){return nc(A.type).indexOf("Bar")>=0});if(E&&E.length){var C=E[0].type.defaultProps,M=C!==void 0?ca(ca({},C),E[0].props):E[0].props,L=M.barSize,I=M[S];o[I]||(o[I]=[]);var R=xr(L)?r:L;o[I].push({item:E[0],stackList:E.slice(1),barSize:xr(R)?void 0:ko(R,n,0)})}}return o},ibe=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=ko(r,a,0,!0),p,m=[];if(o[0].barSize===+o[0].barSize){var x=!1,y=a/d,w=o.reduce(function(L,I){return L+I.barSize||0},0);w+=(d-1)*h,w>=a&&(w-=(d-1)*h,h=0),w>=a&&y>0&&(x=!0,y*=.9,w=d*y);var N=(a-w)/2>>0,S={offset:N-h,size:0};p=o.reduce(function(L,I){var R={item:I.item,position:{offset:S.offset+S.size+h,size:x?y:I.barSize}},A=[].concat(O$(L),[R]);return S=A[A.length-1].position,I.stackList&&I.stackList.length&&I.stackList.forEach(function(T){A.push({item:T,position:S})}),A},m)}else{var E=ko(n,a,0,!0);a-2*E-(d-1)*h<=0&&(h=0);var C=(a-2*E-(d-1)*h)/d;C>1&&(C>>=0);var M=c===+c?Math.min(C,c):C;p=o.reduce(function(L,I,R){var A=[].concat(O$(L),[{item:I.item,position:{offset:E+(C+h)*R+(C-M)/2,size:M}}]);return I.stackList&&I.stackList.length&&I.stackList.forEach(function(T){A.push({item:T,position:A[A.length-1].position})}),A},m)}return p},sbe=function(e,r,n,a){var i=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=cQ({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,x=p.height,y=h.align,w=h.verticalAlign,N=h.layout;if((N==="vertical"||N==="horizontal"&&w==="middle")&&y!=="center"&&bt(e[y]))return ca(ca({},e),{},Uh({},y,e[y]+(m||0)));if((N==="horizontal"||N==="vertical"&&y==="center")&&w!=="middle"&&bt(e[w]))return ca(ca({},e),{},Uh({},w,e[w]+(x||0)))}return e},obe=function(e,r,n){return xr(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},uQ=function(e,r,n,a,i){var o=r.props.children,c=Ds(o,zx).filter(function(h){return obe(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=bi(p,n);if(xr(m))return h;var x=Array.isArray(m)?[Iw(m),Ow(m)]:[m,m],y=d.reduce(function(w,N){var S=bi(p,N,0),E=x[0]-Math.abs(Array.isArray(S)?S[0]:S),C=x[1]+Math.abs(Array.isArray(S)?S[1]:S);return[Math.min(E,w[0]),Math.max(C,w[1])]},[1/0,-1/0]);return[Math.min(y[0],h[0]),Math.max(y[1],h[1])]},[1/0,-1/0])}return null},lbe=function(e,r,n,a,i){var o=r.map(function(c){return uQ(e,c,n,i,a)}).filter(function(c){return!xr(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},dQ=function(e,r,n,a,i){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&uQ(e,d,h,a)||$m(e,h,n,i)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},hQ=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},fQ=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,o,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||c.push(r),o||c.push(n),c},Zl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?Eo(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var x=i?i.indexOf(m):m;return{coordinate:a(x)+h,value:m,offset:h}});return p.filter(function(m){return!Ix(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,x){return{coordinate:a(m)+h,value:m,index:x,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,x){return{coordinate:a(m)+h,value:i?i[m]:m,index:x,offset:h}})},x_=new WeakMap,Gy=function(e,r){if(typeof r!="function")return e;x_.has(e)||x_.set(e,new WeakMap);var n=x_.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},pQ=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:jg(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:Rb(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Bm(),realScaleType:"point"}:i==="category"?{scale:jg(),realScaleType:"band"}:{scale:Rb(),realScaleType:"linear"};if(d0(a)){var d="scale".concat(gw(a));return{scale:(x$[d]||Bm)(),realScaleType:x$[d]?d:"point"}}return dr(a)?{scale:a}:{scale:Bm(),realScaleType:"point"}},R$=1e-4,mQ=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-R$,o=Math.max(a[0],a[1])+R$,c=e(r[0]),d=e(r[n-1]);(c<i||c>o||d<i||d>o)&&e.domain([r[0],r[n-1]])}},cbe=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},ube=function(e,r){if(!r||r.length!==2||!bt(r[0])||!bt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!bt(e[0])||e[0]<n)&&(i[0]=n),(!bt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},dbe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,c=0;c<r;++c){var d=Ix(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},hbe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var c=Ix(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=i,e[o][n][1]=i+c,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},fbe={sign:dbe,expand:epe,none:uf,silhouette:tpe,wiggle:rpe,positive:hbe},pbe=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=fbe[n],o=Zfe().keys(a).value(function(c,d){return+bi(c,d,0)}).order(ST).offset(i);return o(e)},mbe=function(e,r,n,a,i,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(m,x){var y,w=(y=x.type)!==null&&y!==void 0&&y.defaultProps?ca(ca({},x.type.defaultProps),x.props):x.props,N=w.stackId,S=w.hide;if(S)return m;var E=w[n],C=m[E]||{hasStack:!1,stackGroups:{}};if(Ga(N)){var M=C.stackGroups[N]||{numericAxisId:n,cateAxisId:a,items:[]};M.items.push(x),C.hasStack=!0,C.stackGroups[N]=M}else C.stackGroups[Rx("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[x]};return ca(ca({},m),{},Uh({},E,C))},d),p={};return Object.keys(h).reduce(function(m,x){var y=h[x];if(y.hasStack){var w={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(N,S){var E=y.stackGroups[S];return ca(ca({},N),{},Uh({},S,{numericAxisId:n,cateAxisId:a,items:E.items,stackedData:pbe(e,E.items,i)}))},w)}return ca(ca({},m),{},Uh({},x,y))},p)},gQ=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=kve(h,i,c);return e.domain([Iw(p),Ow(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),x=Cve(m,i,c);return{niceTicks:x}}return null};function M$(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!xr(a[e.dataKey])){var c=pb(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=bi(a,xr(o)?e.dataKey:o);return xr(d)?null:e.scale(d)}var D$=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=bi(o,r.dataKey,r.domain[c]);return xr(d)?null:r.scale(d)-i/2+a},gbe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},xbe=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ca(ca({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(Ga(i)){var o=r[i];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},ybe=function(e){return e.reduce(function(r,n){return[Iw(n.concat([r[0]]).filter(bt)),Ow(n.concat([r[1]]).filter(bt))]},[1/0,-1/0])},xQ=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],c=o.stackedData,d=c.reduce(function(h,p){var m=ybe(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},P$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,L$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WT=function(e,r,n){if(dr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(bt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(P$.test(e[0])){var i=+P$.exec(e[0])[1];a[0]=r[0]-i}else dr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(bt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(L$.test(e[1])){var o=+L$.exec(e[1])[1];a[1]=r[1]+o}else dr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},zb=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=c7(r,function(m){return m.coordinate}),o=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];o=Math.min((h.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},B$=function(e,r,n){return!e||!e.length||$x(e,io(n,"type.defaultProps.domain"))?r:e},yQ=function(e,r){var n=e.type.defaultProps?ca(ca({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return ca(ca({},Xt(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:i||a,color:P7(e),value:bi(r,a),type:d,payload:r,chartType:h,hide:p})};function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function $$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(r),!0).forEach(function(n){vQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vQ(t,e,r){return e=vbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vbe(t){var e=bbe(t,"string");return Mg(e)=="symbol"?e:e+""}function bbe(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wbe(t,e){return jbe(t)||_be(t,e)||Nbe(t,e)||Sbe()}function Sbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nbe(t,e){if(t){if(typeof t=="string")return z$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z$(t,e)}}function z$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _be(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function jbe(t){if(Array.isArray(t))return t}var Ub=Math.PI/180,Tbe=function(e){return e*180/Math.PI},Tn=function(e,r,n,a){return{x:e+Math.cos(-Ub*a)*n,y:r+Math.sin(-Ub*a)*n}},Abe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Ebe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=ko(e.cx,o,o/2),m=ko(e.cy,c,c/2),x=Abe(o,c,n),y=ko(e.innerRadius,x,0),w=ko(e.outerRadius,x,x*.8),N=Object.keys(r);return N.reduce(function(S,E){var C=r[E],M=C.domain,L=C.reversed,I;if(xr(C.range))a==="angleAxis"?I=[d,h]:a==="radiusAxis"&&(I=[y,w]),L&&(I=[I[1],I[0]]);else{I=C.range;var R=I,A=wbe(R,2);d=A[0],h=A[1]}var T=pQ(C,i),k=T.realScaleType,F=T.scale;F.domain(M).range(I),mQ(F);var O=gQ(F,Vl(Vl({},C),{},{realScaleType:k})),$=Vl(Vl(Vl({},C),O),{},{range:I,radius:w,realScaleType:k,scale:F,cx:p,cy:m,innerRadius:y,outerRadius:w,startAngle:d,endAngle:h});return Vl(Vl({},S),{},vQ({},E,$))},{})},kbe=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Cbe=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,c=kbe({x:n,y:a},{x:i,y:o});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:Tbe(h),angleInRadian:h}},Obe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},Ibe=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(i,o);return e+c*360},U$=function(e,r){var n=e.x,a=e.y,i=Cbe({x:n,y:a},r),o=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var p=Obe(r),m=p.startAngle,x=p.endAngle,y=c,w;if(m<=x){for(;y>x;)y-=360;for(;y<m;)y+=360;w=y>=m&&y<=x}else{for(;y>m;)y-=360;for(;y<x;)y+=360;w=y>=x&&y<=m}return w?Vl(Vl({},r),{},{radius:o,angle:Ibe(y,r)}):null},bQ=function(e){return!j.isValidElement(e)&&!dr(e)&&typeof e!="boolean"?e.className:""};function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}var Rbe=["offset"];function Mbe(t){return Bbe(t)||Lbe(t)||Pbe(t)||Dbe()}function Dbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pbe(t,e){if(t){if(typeof t=="string")return KT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KT(t,e)}}function Lbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Bbe(t){if(Array.isArray(t))return KT(t)}function KT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $be(t,e){if(t==null)return{};var r=zbe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function V$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ua(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V$(Object(r),!0).forEach(function(n){Ube(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ube(t,e,r){return e=Vbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vbe(t){var e=Fbe(t,"string");return Dg(e)=="symbol"?e:e+""}function Fbe(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pg(){return Pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pg.apply(this,arguments)}var qbe=function(e){var r=e.value,n=e.formatter,a=xr(e.children)?r:e.children;return dr(n)?n(a):a},Hbe=function(e,r){var n=Eo(r-e),a=Math.min(Math.abs(r-e),360);return n*a},Gbe=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,x=d.outerRadius,y=d.startAngle,w=d.endAngle,N=d.clockWise,S=(m+x)/2,E=Hbe(y,w),C=E>=0?1:-1,M,L;a==="insideStart"?(M=y+C*o,L=N):a==="insideEnd"?(M=w-C*o,L=!N):a==="end"&&(M=w+C*o,L=N),L=E<=0?L:!L;var I=Tn(h,p,S,M),R=Tn(h,p,S,M+(L?1:-1)*359),A="M".concat(I.x,",").concat(I.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(L?0:1,`,
    `).concat(R.x,",").concat(R.y),T=xr(e.id)?Rx("recharts-radial-line-"):e.id;return se.createElement("text",Pg({},n,{dominantBaseline:"central",className:wr("recharts-radial-bar-label",c)}),se.createElement("defs",null,se.createElement("path",{id:T,d:A})),se.createElement("textPath",{xlinkHref:"#".concat(T)},r))},Wbe=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,x=(p+m)/2;if(a==="outside"){var y=Tn(o,c,h+n,x),w=y.x,N=y.y;return{x:w,y:N,textAnchor:w>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var S=(d+h)/2,E=Tn(o,c,S,x),C=E.x,M=E.y;return{x:C,y:M,textAnchor:"middle",verticalAnchor:"middle"}},Kbe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,c=o.x,d=o.y,h=o.width,p=o.height,m=p>=0?1:-1,x=m*a,y=m>0?"end":"start",w=m>0?"start":"end",N=h>=0?1:-1,S=N*a,E=N>0?"end":"start",C=N>0?"start":"end";if(i==="top"){var M={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:y};return Ua(Ua({},M),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+p+x,textAnchor:"middle",verticalAnchor:w};return Ua(Ua({},L),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var I={x:c-S,y:d+p/2,textAnchor:E,verticalAnchor:"middle"};return Ua(Ua({},I),n?{width:Math.max(I.x-n.x,0),height:p}:{})}if(i==="right"){var R={x:c+h+S,y:d+p/2,textAnchor:C,verticalAnchor:"middle"};return Ua(Ua({},R),n?{width:Math.max(n.x+n.width-R.x,0),height:p}:{})}var A=n?{width:h,height:p}:{};return i==="insideLeft"?Ua({x:c+S,y:d+p/2,textAnchor:C,verticalAnchor:"middle"},A):i==="insideRight"?Ua({x:c+h-S,y:d+p/2,textAnchor:E,verticalAnchor:"middle"},A):i==="insideTop"?Ua({x:c+h/2,y:d+x,textAnchor:"middle",verticalAnchor:w},A):i==="insideBottom"?Ua({x:c+h/2,y:d+p-x,textAnchor:"middle",verticalAnchor:y},A):i==="insideTopLeft"?Ua({x:c+S,y:d+x,textAnchor:C,verticalAnchor:w},A):i==="insideTopRight"?Ua({x:c+h-S,y:d+x,textAnchor:E,verticalAnchor:w},A):i==="insideBottomLeft"?Ua({x:c+S,y:d+p-x,textAnchor:C,verticalAnchor:y},A):i==="insideBottomRight"?Ua({x:c+h-S,y:d+p-x,textAnchor:E,verticalAnchor:y},A):Yf(i)&&(bt(i.x)||Bd(i.x))&&(bt(i.y)||Bd(i.y))?Ua({x:c+ko(i.x,h),y:d+ko(i.y,p),textAnchor:"end",verticalAnchor:"end"},A):Ua({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},A)},Qbe=function(e){return"cx"in e&&bt(e.cx)};function xi(t){var e=t.offset,r=e===void 0?5:e,n=$be(t,Rbe),a=Ua({offset:r},n),i=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,x=a.textBreakAll;if(!i||xr(c)&&xr(d)&&!j.isValidElement(h)&&!dr(h))return null;if(j.isValidElement(h))return j.cloneElement(h,a);var y;if(dr(h)){if(y=j.createElement(h,a),j.isValidElement(y))return y}else y=qbe(a);var w=Qbe(i),N=Xt(a,!0);if(w&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Gbe(a,y,N);var S=w?Wbe(a):Kbe(a);return se.createElement(mf,Pg({className:wr("recharts-label",m)},N,S,{breakAll:x}),y)}xi.displayName="Label";var wQ=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,x=e.y,y=e.top,w=e.left,N=e.width,S=e.height,E=e.clockWise,C=e.labelViewBox;if(C)return C;if(bt(N)&&bt(S)){if(bt(m)&&bt(x))return{x:m,y:x,width:N,height:S};if(bt(y)&&bt(w))return{x:y,y:w,width:N,height:S}}return bt(m)&&bt(x)?{x:m,y:x,width:0,height:0}:bt(r)&&bt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:E}:e.viewBox?e.viewBox:{}},Xbe=function(e,r){return e?e===!0?se.createElement(xi,{key:"label-implicit",viewBox:r}):Ga(e)?se.createElement(xi,{key:"label-implicit",viewBox:r,value:e}):j.isValidElement(e)?e.type===xi?j.cloneElement(e,{key:"label-implicit",viewBox:r}):se.createElement(xi,{key:"label-implicit",content:e,viewBox:r}):dr(e)?se.createElement(xi,{key:"label-implicit",content:e,viewBox:r}):Yf(e)?se.createElement(xi,Pg({viewBox:r},e,{key:"label-implicit"})):null:null},Ybe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=wQ(e),o=Ds(a,xi).map(function(d,h){return j.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return o;var c=Xbe(e.label,r||i);return[c].concat(Mbe(o))};xi.parseViewBox=wQ;xi.renderCallByParent=Ybe;var y_,F$;function Jbe(){if(F$)return y_;F$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return y_=t,y_}var Zbe=Jbe();const SQ=tn(Zbe);function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}var e2e=["valueAccessor"],t2e=["data","dataKey","clockWise","id","textBreakAll"];function r2e(t){return s2e(t)||i2e(t)||a2e(t)||n2e()}function n2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a2e(t,e){if(t){if(typeof t=="string")return QT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QT(t,e)}}function i2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function s2e(t){if(Array.isArray(t))return QT(t)}function QT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vb.apply(this,arguments)}function q$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function H$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q$(Object(r),!0).forEach(function(n){o2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o2e(t,e,r){return e=l2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l2e(t){var e=c2e(t,"string");return Lg(e)=="symbol"?e:e+""}function c2e(t,e){if(Lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G$(t,e){if(t==null)return{};var r=u2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function u2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var d2e=function(e){return Array.isArray(e.value)?SQ(e.value):e.value};function sc(t){var e=t.valueAccessor,r=e===void 0?d2e:e,n=G$(t,e2e),a=n.data,i=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=G$(n,t2e);return!a||!a.length?null:se.createElement(Qr,{className:"recharts-label-list"},a.map(function(p,m){var x=xr(i)?r(p,m):bi(p&&p.payload,i),y=xr(c)?{}:{id:"".concat(c,"-").concat(m)};return se.createElement(xi,Vb({},Xt(p,!0),h,y,{parentViewBox:p.parentViewBox,value:x,textBreakAll:d,viewBox:xi.parseViewBox(xr(o)?p:H$(H$({},p),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}sc.displayName="LabelList";function h2e(t,e){return t?t===!0?se.createElement(sc,{key:"labelList-implicit",data:e}):se.isValidElement(t)||dr(t)?se.createElement(sc,{key:"labelList-implicit",data:e,content:t}):Yf(t)?se.createElement(sc,Vb({data:e},t,{key:"labelList-implicit"})):null:null}function f2e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Ds(n,sc).map(function(o,c){return j.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=h2e(t.label,e);return[i].concat(r2e(a))}sc.renderCallByParent=f2e;function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function XT(){return XT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XT.apply(this,arguments)}function W$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function K$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(r),!0).forEach(function(n){p2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p2e(t,e,r){return e=m2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m2e(t){var e=g2e(t,"string");return Bg(e)=="symbol"?e:e+""}function g2e(t,e){if(Bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x2e=function(e,r){var n=Eo(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Wy=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/Ub,x=h?i:i+o*m,y=Tn(r,n,p,x),w=Tn(r,n,a,x),N=h?i-o*m:i,S=Tn(r,n,p*Math.cos(m*Ub),N);return{center:y,circleTangency:w,lineTangency:S,theta:m}},NQ=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,c=e.endAngle,d=x2e(o,c),h=o+d,p=Tn(r,n,i,o),m=Tn(r,n,i,h),x="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var y=Tn(r,n,a,o),w=Tn(r,n,a,h);x+="L ".concat(w.x,",").concat(w.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(y.x,",").concat(y.y," Z")}else x+="L ".concat(r,",").concat(n," Z");return x},y2e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=Eo(p-h),x=Wy({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:o,cornerIsExternal:d}),y=x.circleTangency,w=x.lineTangency,N=x.theta,S=Wy({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:o,cornerIsExternal:d}),E=S.circleTangency,C=S.lineTangency,M=S.theta,L=d?Math.abs(h-p):Math.abs(h-p)-N-M;if(L<0)return c?"M ".concat(w.x,",").concat(w.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):NQ({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var I="M ".concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,`
  `);if(a>0){var R=Wy({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),A=R.circleTangency,T=R.lineTangency,k=R.theta,F=Wy({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),O=F.circleTangency,$=F.lineTangency,B=F.theta,G=d?Math.abs(h-p):Math.abs(h-p)-k-B;if(G<0&&o===0)return"".concat(I,"L").concat(r,",").concat(n,"Z");I+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(G>180),",").concat(+(m>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(T.x,",").concat(T.y,"Z")}else I+="L".concat(r,",").concat(n,"Z");return I},v2e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_Q=function(e){var r=K$(K$({},v2e),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,x=r.className;if(o<i||p===m)return null;var y=wr("recharts-sector",x),w=o-i,N=ko(c,w,0,!0),S;return N>0&&Math.abs(p-m)<360?S=y2e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,w/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):S=NQ({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:p,endAngle:m}),se.createElement("path",XT({},Xt(r,!0),{className:y,d:S,role:"img"}))};function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function YT(){return YT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YT.apply(this,arguments)}function Q$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function X$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q$(Object(r),!0).forEach(function(n){b2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b2e(t,e,r){return e=w2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w2e(t){var e=S2e(t,"string");return $g(e)=="symbol"?e:e+""}function S2e(t,e){if($g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y$={curveBasisClosed:Vfe,curveBasisOpen:Ffe,curveBasis:Ufe,curveBumpX:Afe,curveBumpY:Efe,curveLinearClosed:qfe,curveLinear:yw,curveMonotoneX:Hfe,curveMonotoneY:Gfe,curveNatural:Wfe,curveStep:Kfe,curveStepAfter:Xfe,curveStepBefore:Qfe},Ky=function(e){return e.x===+e.x&&e.y===+e.y},dm=function(e){return e.x},hm=function(e){return e.y},N2e=function(e,r){if(dr(e))return e;var n="curve".concat(gw(e));return(n==="curveMonotone"||n==="curveBump")&&r?Y$["".concat(n).concat(r==="vertical"?"Y":"X")]:Y$[n]||yw},_2e=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=N2e(n,c),m=h?i.filter(function(N){return Ky(N)}):i,x;if(Array.isArray(o)){var y=h?o.filter(function(N){return Ky(N)}):o,w=m.map(function(N,S){return X$(X$({},N),{},{base:y[S]})});return c==="vertical"?x=$y().y(hm).x1(dm).x0(function(N){return N.base.x}):x=$y().x(dm).y1(hm).y0(function(N){return N.base.y}),x.defined(Ky).curve(p),x(w)}return c==="vertical"&&bt(o)?x=$y().y(hm).x1(dm).x0(o):bt(o)?x=$y().x(dm).y1(hm).y0(o):x=SW().x(dm).y(hm),x.defined(Ky).curve(p),x(m)},JT=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?_2e(e):a;return j.createElement("path",YT({},Xt(e,!1),mb(e),{className:wr("recharts-curve",r),d:o,ref:i}))},v_={exports:{}},b_,J$;function j2e(){if(J$)return b_;J$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return b_=t,b_}var w_,Z$;function T2e(){if(Z$)return w_;Z$=1;var t=j2e();function e(){}function r(){}return r.resetWarningCache=e,w_=function(){function n(o,c,d,h,p,m){if(m!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},w_}var ez;function A2e(){return ez||(ez=1,v_.exports=T2e()()),v_.exports}var E2e=A2e();const ln=tn(E2e),{getOwnPropertyNames:k2e,getOwnPropertySymbols:C2e}=Object,{hasOwnProperty:O2e}=Object.prototype;function S_(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Qy(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,o=i.get(r),c=i.get(n);if(o&&c)return o===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function I2e(t){return t!=null?t[Symbol.toStringTag]:void 0}function tz(t){return k2e(t).concat(C2e(t))}const R2e=Object.hasOwn||((t,e)=>O2e.call(t,e));function k0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const M2e="__v",D2e="__o",P2e="_owner",{getOwnPropertyDescriptor:rz,keys:nz}=Object;function L2e(t,e){return t.byteLength===e.byteLength&&Fb(new Uint8Array(t),new Uint8Array(e))}function B2e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function $2e(t,e){return t.byteLength===e.byteLength&&Fb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function z2e(t,e){return k0(t.getTime(),e.getTime())}function U2e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function V2e(t,e){return t===e}function az(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let o,c,d=0;for(;(o=i.next())&&!o.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const x=o.value,y=c.value;if(r.equals(x[0],y[0],d,m,t,e,r)&&r.equals(x[1],y[1],x[0],y[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const F2e=k0;function q2e(t,e,r){const n=nz(t);let a=n.length;if(nz(e).length!==a)return!1;for(;a-- >0;)if(!jQ(t,e,r,n[a]))return!1;return!0}function fm(t,e,r){const n=tz(t);let a=n.length;if(tz(e).length!==a)return!1;let i,o,c;for(;a-- >0;)if(i=n[a],!jQ(t,e,r,i)||(o=rz(t,i),c=rz(e,i),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function H2e(t,e){return k0(t.valueOf(),e.valueOf())}function G2e(t,e){return t.source===e.source&&t.flags===e.flags}function iz(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let o,c;for(;(o=i.next())&&!o.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function Fb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function W2e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function jQ(t,e,r,n){return(n===P2e||n===D2e||n===M2e)&&(t.$$typeof||e.$$typeof)?!0:R2e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const K2e="[object ArrayBuffer]",Q2e="[object Arguments]",X2e="[object Boolean]",Y2e="[object DataView]",J2e="[object Date]",Z2e="[object Error]",ewe="[object Map]",twe="[object Number]",rwe="[object Object]",nwe="[object RegExp]",awe="[object Set]",iwe="[object String]",swe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},owe="[object URL]",lwe=Object.prototype.toString;function cwe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:x,areUrlsEqual:y,unknownTagComparators:w}){return function(S,E,C){if(S===E)return!0;if(S==null||E==null)return!1;const M=typeof S;if(M!==typeof E)return!1;if(M!=="object")return M==="number"?c(S,E,C):M==="function"?i(S,E,C):!1;const L=S.constructor;if(L!==E.constructor)return!1;if(L===Object)return d(S,E,C);if(Array.isArray(S))return e(S,E,C);if(L===Date)return n(S,E,C);if(L===RegExp)return p(S,E,C);if(L===Map)return o(S,E,C);if(L===Set)return m(S,E,C);const I=lwe.call(S);if(I===J2e)return n(S,E,C);if(I===nwe)return p(S,E,C);if(I===ewe)return o(S,E,C);if(I===awe)return m(S,E,C);if(I===rwe)return typeof S.then!="function"&&typeof E.then!="function"&&d(S,E,C);if(I===owe)return y(S,E,C);if(I===Z2e)return a(S,E,C);if(I===Q2e)return d(S,E,C);if(swe[I])return x(S,E,C);if(I===K2e)return t(S,E,C);if(I===Y2e)return r(S,E,C);if(I===X2e||I===twe||I===iwe)return h(S,E,C);if(w){let R=w[I];if(!R){const A=I2e(S);A&&(R=w[A])}if(R)return R(S,E,C)}return!1}}function uwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:L2e,areArraysEqual:r?fm:B2e,areDataViewsEqual:$2e,areDatesEqual:z2e,areErrorsEqual:U2e,areFunctionsEqual:V2e,areMapsEqual:r?S_(az,fm):az,areNumbersEqual:F2e,areObjectsEqual:r?fm:q2e,arePrimitiveWrappersEqual:H2e,areRegExpsEqual:G2e,areSetsEqual:r?S_(iz,fm):iz,areTypedArraysEqual:r?S_(Fb,fm):Fb,areUrlsEqual:W2e,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Qy(n.areArraysEqual),i=Qy(n.areMapsEqual),o=Qy(n.areObjectsEqual),c=Qy(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:c})}return n}function dwe(t){return function(e,r,n,a,i,o,c){return t(e,r,c)}}function hwe({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const fwe=Yu();Yu({strict:!0});Yu({circular:!0});Yu({circular:!0,strict:!0});Yu({createInternalComparator:()=>k0});Yu({strict:!0,createInternalComparator:()=>k0});Yu({circular:!0,createInternalComparator:()=>k0});Yu({circular:!0,createInternalComparator:()=>k0,strict:!0});function Yu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=uwe(t),o=cwe(i),c=r?r(o):dwe(o);return hwe({circular:e,comparator:o,createState:n,equals:c,strict:a})}function pwe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function sz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):pwe(a)};requestAnimationFrame(n)}function ZT(t){"@babel/helpers - typeof";return ZT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZT(t)}function mwe(t){return vwe(t)||ywe(t)||xwe(t)||gwe()}function gwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xwe(t,e){if(t){if(typeof t=="string")return oz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oz(t,e)}}function oz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ywe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vwe(t){if(Array.isArray(t))return t}function bwe(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,c=mwe(o),d=c[0],h=c.slice(1);if(typeof d=="number"){sz(a.bind(null,h),d);return}a(d),sz(a.bind(null,h));return}ZT(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function cz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){TQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TQ(t,e,r){return e=wwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wwe(t){var e=Swe(t,"string");return zg(e)==="symbol"?e:String(e)}function Swe(t,e){if(zg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nwe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},_we=function(e){return e},jwe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},zm=function(e,r){return Object.keys(r).reduce(function(n,a){return cz(cz({},n),{},TQ({},a,e(a,r[a])))},{})},uz=function(e,r,n){return e.map(function(a){return"".concat(jwe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Twe(t,e){return kwe(t)||Ewe(t,e)||AQ(t,e)||Awe()}function Awe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ewe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function kwe(t){if(Array.isArray(t))return t}function Cwe(t){return Rwe(t)||Iwe(t)||AQ(t)||Owe()}function Owe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AQ(t,e){if(t){if(typeof t=="string")return eA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eA(t,e)}}function Iwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rwe(t){if(Array.isArray(t))return eA(t)}function eA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qb=1e-4,EQ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},kQ=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},dz=function(e,r){return function(n){var a=EQ(e,r);return kQ(a,n)}},Mwe=function(e,r){return function(n){var a=EQ(e,r),i=[].concat(Cwe(a.map(function(o,c){return o*c}).slice(1)),[0]);return kQ(i,n)}},hz=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,c=1;break;case"ease":a=.25,i=.1,o=.25,c=1;break;case"ease-in":a=.42,i=0,o=1,c=1;break;case"ease-out":a=.42,i=0,o=.58,c=1;break;case"ease-in-out":a=0,i=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(S){return parseFloat(S)}),p=Twe(h,4);a=p[0],i=p[1],o=p[2],c=p[3]}}}var m=dz(a,o),x=dz(i,c),y=Mwe(a,o),w=function(E){return E>1?1:E<0?0:E},N=function(E){for(var C=E>1?1:E,M=C,L=0;L<8;++L){var I=m(M)-C,R=y(M);if(Math.abs(I-C)<qb||R<qb)return x(M);M=w(M-I/R)}return x(M)};return N.isStepper=!1,N},Dwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(p,m,x){var y=-(p-m)*n,w=x*i,N=x+(y-w)*c/1e3,S=x*c/1e3+p;return Math.abs(S-m)<qb&&Math.abs(N)<qb?[m,0]:[S,N]};return d.isStepper=!0,d.dt=c,d},Pwe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return hz(a);case"spring":return Dwe();default:if(a.split("(")[0]==="cubic-bezier")return hz(a)}return typeof a=="function"?a:null};function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function fz(t){return $we(t)||Bwe(t)||CQ(t)||Lwe()}function Lwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $we(t){if(Array.isArray(t))return rA(t)}function pz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(r),!0).forEach(function(n){tA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tA(t,e,r){return e=zwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zwe(t){var e=Uwe(t,"string");return Ug(e)==="symbol"?e:String(e)}function Uwe(t,e){if(Ug(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ug(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vwe(t,e){return Hwe(t)||qwe(t,e)||CQ(t,e)||Fwe()}function Fwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CQ(t,e){if(t){if(typeof t=="string")return rA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rA(t,e)}}function rA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Hwe(t){if(Array.isArray(t))return t}var Hb=function(e,r,n){return e+(r-e)*n},nA=function(e){var r=e.from,n=e.to;return r!==n},Gwe=function t(e,r,n){var a=zm(function(i,o){if(nA(o)){var c=e(o.from,o.to,o.velocity),d=Vwe(c,2),h=d[0],p=d[1];return mi(mi({},o),{},{from:h,velocity:p})}return o},r);return n<1?zm(function(i,o){return nA(o)?mi(mi({},o),{},{velocity:Hb(o.velocity,a[i].velocity,n),from:Hb(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const Wwe=(function(t,e,r,n,a){var i=Nwe(t,e),o=i.reduce(function(S,E){return mi(mi({},S),{},tA({},E,[t[E],e[E]]))},{}),c=i.reduce(function(S,E){return mi(mi({},S),{},tA({},E,{from:t[E],velocity:0,to:e[E]}))},{}),d=-1,h,p,m=function(){return null},x=function(){return zm(function(E,C){return C.from},c)},y=function(){return!Object.values(c).filter(nA).length},w=function(E){h||(h=E);var C=E-h,M=C/r.dt;c=Gwe(r,c,M),a(mi(mi(mi({},t),e),x())),h=E,y()||(d=requestAnimationFrame(m))},N=function(E){p||(p=E);var C=(E-p)/n,M=zm(function(I,R){return Hb.apply(void 0,fz(R).concat([r(C)]))},o);if(a(mi(mi(mi({},t),e),M)),C<1)d=requestAnimationFrame(m);else{var L=zm(function(I,R){return Hb.apply(void 0,fz(R).concat([r(1)]))},o);a(mi(mi(mi({},t),e),L))}};return m=r.isStepper?w:N,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}var Kwe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Qwe(t,e){if(t==null)return{};var r=Xwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xwe(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function N_(t){return e4e(t)||Zwe(t)||Jwe(t)||Ywe()}function Ywe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jwe(t,e){if(t){if(typeof t=="string")return aA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aA(t,e)}}function Zwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e4e(t){if(Array.isArray(t))return aA(t)}function aA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function So(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(r),!0).forEach(function(n){jm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jm(t,e,r){return e=OQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OQ(n.key),n)}}function n4e(t,e,r){return e&&r4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OQ(t){var e=a4e(t,"string");return bf(e)==="symbol"?e:String(e)}function a4e(t,e){if(bf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iA(t,e)}function iA(t,e){return iA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iA(t,e)}function s4e(t){var e=o4e();return function(){var n=Gb(t),a;if(e){var i=Gb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return sA(this,a)}}function sA(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oA(t)}function oA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gb(t){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gb(t)}var dl=(function(t){i4e(r,t);var e=s4e(r);function r(n,a){var i;t4e(this,r),i=e.call(this,n,a);var o=i.props,c=o.isActive,d=o.attributeName,h=o.from,p=o.to,m=o.steps,x=o.children,y=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(oA(i)),i.changeStyle=i.changeStyle.bind(oA(i)),!c||y<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:p}),sA(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof x=="function")return i.state={style:h},sA(i);i.state={style:d?jm({},d,h):h}}else i.state={style:{}};return i}return n4e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,x=this.state.style;if(c){if(!o){var y={style:d?jm({},d,p):p};this.state&&x&&(d&&x[d]!==p||!d&&x!==p)&&this.setState(y);return}if(!(fwe(a.to,p)&&a.canBegin&&a.isActive)){var w=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var N=w||h?m:a.to;if(this.state&&x){var S={style:d?jm({},d,N):N};(d&&x[d]!==N||!d&&x!==N)&&this.setState(S)}this.runAnimation(So(So({},this.props),{},{from:N,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,x=a.onAnimationStart,y=Wwe(o,c,Pwe(h),d,this.changeStyle),w=function(){i.stopJSAnimation=y()};this.manager.start([x,p,w,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],p=h.style,m=h.duration,x=m===void 0?0:m,y=function(N,S,E){if(E===0)return N;var C=S.duration,M=S.easing,L=M===void 0?"ease":M,I=S.style,R=S.properties,A=S.onAnimationEnd,T=E>0?o[E-1]:S,k=R||Object.keys(I);if(typeof L=="function"||L==="spring")return[].concat(N_(N),[i.runJSAnimation.bind(i,{from:T.style,to:I,duration:C,easing:L}),C]);var F=uz(k,C,L),O=So(So(So({},T.style),I),{},{transition:F});return[].concat(N_(N),[O,C,A]).filter(_we)};return this.manager.start([d].concat(N_(o.reduce(y,[p,Math.max(x,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=bwe());var i=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,x=a.steps,y=a.children,w=this.manager;if(this.unSubscribe=w.subscribe(this.handleStyleChange),typeof h=="function"||typeof y=="function"||h==="spring"){this.runJSAnimation(a);return}if(x.length>1){this.runStepAnimation(a);return}var N=c?jm({},c,d):d,S=uz(Object.keys(N),o,h);w.start([p,i,So(So({},N),{},{transition:S}),o,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=Qwe(a,Kwe),h=j.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||o<=0)return i;var m=function(y){var w=y.props,N=w.style,S=N===void 0?{}:N,E=w.className,C=j.cloneElement(y,So(So({},d),{},{style:So(So({},S),p),className:E}));return C};return h===1?m(j.Children.only(i)):se.createElement("div",null,j.Children.map(i,function(x){return m(x)}))}}]),r})(j.PureComponent);dl.displayName="Animate";dl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};dl.propTypes={from:ln.oneOfType([ln.object,ln.string]),to:ln.oneOfType([ln.object,ln.string]),attributeName:ln.string,duration:ln.number,begin:ln.number,easing:ln.oneOfType([ln.string,ln.func]),steps:ln.arrayOf(ln.shape({duration:ln.number.isRequired,style:ln.object.isRequired,easing:ln.oneOfType([ln.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ln.func]),properties:ln.arrayOf("string"),onAnimationEnd:ln.func})),children:ln.oneOfType([ln.node,ln.func]),isActive:ln.bool,canBegin:ln.bool,onAnimationEnd:ln.func,shouldReAnimate:ln.bool,onAnimationStart:ln.func,onAnimationReStart:ln.func};function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function Wb(){return Wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wb.apply(this,arguments)}function l4e(t,e){return h4e(t)||d4e(t,e)||u4e(t,e)||c4e()}function c4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u4e(t,e){if(t){if(typeof t=="string")return gz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gz(t,e)}}function gz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function h4e(t){if(Array.isArray(t))return t}function xz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xz(Object(r),!0).forEach(function(n){f4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function f4e(t,e,r){return e=p4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p4e(t){var e=m4e(t,"string");return Vg(e)=="symbol"?e:e+""}function m4e(t,e){if(Vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vz=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],x=0,y=4;x<y;x++)m[x]=i[x]>o?o:i[x];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(o>0&&i===+i&&i>0){var w=Math.min(o,i);p="M ".concat(e,",").concat(r+c*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+d*w,",").concat(r,`
            L `).concat(e+n-d*w,",").concat(r,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*w,`
            L `).concat(e+n,",").concat(r+a-c*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e+n-d*w,",").concat(r+a,`
            L `).concat(e+d*w,",").concat(r+a,`
            A `).concat(w,",").concat(w,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*w," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},g4e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(o,o+d),x=Math.max(o,o+d);return n>=h&&n<=p&&a>=m&&a<=x}return!1},x4e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},L7=function(e){var r=yz(yz({},x4e),e),n=j.useRef(),a=j.useState(-1),i=l4e(a,2),o=i[0],c=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,x=r.radius,y=r.className,w=r.animationEasing,N=r.animationDuration,S=r.animationBegin,E=r.isAnimationActive,C=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var M=wr("recharts-rectangle",y);return C?se.createElement(dl,{canBegin:o>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:N,animationEasing:w,isActive:C},function(L){var I=L.width,R=L.height,A=L.x,T=L.y;return se.createElement(dl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:N,isActive:E,easing:w},se.createElement("path",Wb({},Xt(r,!0),{className:M,d:vz(A,T,I,R,x),ref:n})))}):se.createElement("path",Wb({},Xt(r,!0),{className:M,d:vz(d,h,p,m,x)}))},y4e=["points","className","baseLinePoints","connectNulls"];function Th(){return Th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Th.apply(this,arguments)}function v4e(t,e){if(t==null)return{};var r=b4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function b4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bz(t){return _4e(t)||N4e(t)||S4e(t)||w4e()}function w4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S4e(t,e){if(t){if(typeof t=="string")return lA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lA(t,e)}}function N4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _4e(t){if(Array.isArray(t))return lA(t)}function lA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var wz=function(e){return e&&e.x===+e.x&&e.y===+e.y},j4e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){wz(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),wz(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Um=function(e,r){var n=j4e(e);r&&(n=[n.reduce(function(i,o){return[].concat(bz(i),bz(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},T4e=function(e,r,n){var a=Um(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Um(r.reverse(),n).slice(1))},IQ=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=v4e(e,y4e);if(!r||!r.length)return null;var c=wr("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=T4e(r,a,i);return se.createElement("g",{className:c},se.createElement("path",Th({},Xt(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?se.createElement("path",Th({},Xt(o,!0),{fill:"none",d:Um(r,i)})):null,d?se.createElement("path",Th({},Xt(o,!0),{fill:"none",d:Um(a,i)})):null)}var p=Um(r,i);return se.createElement("path",Th({},Xt(o,!0),{fill:p.slice(-1)==="Z"?o.fill:"none",className:c,d:p}))};function cA(){return cA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cA.apply(this,arguments)}var Dw=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=wr("recharts-dot",i);return r===+r&&n===+n&&a===+a?j.createElement("circle",cA({},Xt(e,!1),mb(e),{className:o,cx:r,cy:n,r:a})):null};function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}var A4e=["x","y","top","left","width","height","className"];function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uA.apply(this,arguments)}function Sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function E4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sz(Object(r),!0).forEach(function(n){k4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k4e(t,e,r){return e=C4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C4e(t){var e=O4e(t,"string");return Fg(e)=="symbol"?e:e+""}function O4e(t,e){if(Fg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I4e(t,e){if(t==null)return{};var r=R4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function R4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var M4e=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},D4e=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,x=e.height,y=x===void 0?0:x,w=e.className,N=I4e(e,A4e),S=E4e({x:n,y:i,top:c,left:h,width:m,height:y},N);return!bt(n)||!bt(i)||!bt(m)||!bt(y)||!bt(c)||!bt(h)?null:se.createElement("path",uA({},Xt(S,!0),{className:wr("recharts-cross",w),d:M4e(n,i,m,y,c,h)}))},P4e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function L4e(t,e){if(t==null)return{};var r=B4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function B4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yc(){return yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yc.apply(this,arguments)}function Nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(r),!0).forEach(function(n){$4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $4e(t,e,r){return e=z4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z4e(t){var e=U4e(t,"string");return qg(e)=="symbol"?e:e+""}function U4e(t,e){if(qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V4e=function(e,r,n,a){var i="";return a.forEach(function(o,c){var d=Tn(r,n,e,o);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},F4e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.polarAngles,c=e.radialLines;if(!o||!o.length||!c)return null;var d=Hg({stroke:"#ccc"},Xt(e,!1));return se.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(h){var p=Tn(r,n,a,h),m=Tn(r,n,i,h);return se.createElement("line",yc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},q4e=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,o=Hg(Hg({stroke:"#ccc"},Xt(e,!1)),{},{fill:"none"});return se.createElement("circle",yc({},o,{className:wr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},H4e=function(e){var r=e.radius,n=e.index,a=Hg(Hg({stroke:"#ccc"},Xt(e,!1)),{},{fill:"none"});return se.createElement("path",yc({},a,{className:wr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:V4e(r,e.cx,e.cy,e.polarAngles)}))},G4e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:se.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?se.createElement(q4e,yc({key:o},e,{radius:a,index:i})):se.createElement(H4e,yc({key:o},e,{radius:a,index:i}))}))},RQ=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,o=e.innerRadius,c=o===void 0?0:o,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,x=e.radialLines,y=x===void 0?!0:x,w=L4e(e,P4e);return h<=0?null:se.createElement("g",{className:"recharts-polar-grid"},se.createElement(F4e,yc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:y},w)),se.createElement(G4e,yc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:y},w)))};RQ.displayName="PolarGrid";var __,_z;function W4e(){if(_z)return __;_z=1;var t=Cw(),e=GK(),r=xl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return __=n,__}var K4e=W4e();const Q4e=tn(K4e);var j_,jz;function X4e(){if(jz)return j_;jz=1;var t=Cw(),e=xl(),r=WK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return j_=n,j_}var Y4e=X4e();const J4e=tn(Y4e);var Z4e=["cx","cy","angle","ticks","axisLine"],e5e=["ticks","tick","angle","tickFormatter","stroke"];function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vm.apply(this,arguments)}function Tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Td(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tz(Object(r),!0).forEach(function(n){Pw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Az(t,e){if(t==null)return{};var r=t5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function t5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function r5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ez(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DQ(n.key),n)}}function n5e(t,e,r){return e&&Ez(t.prototype,e),r&&Ez(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a5e(t,e,r){return e=Kb(e),i5e(t,MQ()?Reflect.construct(e,r||[],Kb(t).constructor):e.apply(t,r))}function i5e(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s5e(t)}function s5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MQ=function(){return!!t})()}function Kb(t){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(t)}function o5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dA(t,e)}function dA(t,e){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dA(t,e)}function Pw(t,e,r){return e=DQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DQ(t){var e=l5e(t,"string");return wf(e)=="symbol"?e:e+""}function l5e(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ux=(function(t){function e(){return r5e(this,e),a5e(this,e,arguments)}return o5e(e,t),n5e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,c=i.cx,d=i.cy;return Tn(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=Q4e(c,function(p){return p.coordinate||0}),h=J4e(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=Az(n,Z4e),p=c.reduce(function(w,N){return[Math.min(w[0],N.coordinate),Math.max(w[1],N.coordinate)]},[1/0,-1/0]),m=Tn(a,i,p[0],o),x=Tn(a,i,p[1],o),y=Td(Td(Td({},Xt(h,!1)),{},{fill:"none"},Xt(d,!1)),{},{x1:m.x,y1:m.y,x2:x.x,y2:x.y});return se.createElement("line",Vm({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=Az(a,e5e),m=this.getTickTextAnchor(),x=Xt(p,!1),y=Xt(o,!1),w=i.map(function(N,S){var E=n.getTickValueCoord(N),C=Td(Td(Td(Td({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(E.x,", ").concat(E.y,")")},x),{},{stroke:"none",fill:h},y),{},{index:S},E),{},{payload:N});return se.createElement(Qr,Vm({className:wr("recharts-polar-radius-axis-tick",bQ(o)),key:"tick-".concat(N.coordinate)},h0(n.props,N,S)),e.renderTickItem(o,C,d?d(N.value,S):N.value))});return se.createElement(Qr,{className:"recharts-polar-radius-axis-ticks"},w)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:se.createElement(Qr,{className:wr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),xi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):dr(n)?o=n(a):o=se.createElement(mf,Vm({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(j.PureComponent);Pw(Ux,"displayName","PolarRadiusAxis");Pw(Ux,"axisType","radiusAxis");Pw(Ux,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function Pd(){return Pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pd.apply(this,arguments)}function kz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ad(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kz(Object(r),!0).forEach(function(n){Lw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LQ(n.key),n)}}function u5e(t,e,r){return e&&Cz(t.prototype,e),r&&Cz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d5e(t,e,r){return e=Qb(e),h5e(t,PQ()?Reflect.construct(e,r||[],Qb(t).constructor):e.apply(t,r))}function h5e(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f5e(t)}function f5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PQ=function(){return!!t})()}function Qb(t){return Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qb(t)}function p5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hA(t,e)}function hA(t,e){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hA(t,e)}function Lw(t,e,r){return e=LQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LQ(t){var e=m5e(t,"string");return Sf(e)=="symbol"?e:e+""}function m5e(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var g5e=Math.PI/180,Oz=1e-5,Vx=(function(t){function e(){return c5e(this,e),d5e(this,e,arguments)}return p5e(e,t),u5e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=Tn(i,o,c,n.coordinate),x=Tn(i,o,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*g5e),o;return i>Oz?o=a==="outer"?"start":"end":i<-Oz?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=Ad(Ad({},Xt(this.props,!1)),{},{fill:"none"},Xt(c,!1));if(d==="circle")return se.createElement(Dw,Pd({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:o}));var p=this.props.ticks,m=p.map(function(x){return Tn(a,i,o,x.coordinate)});return se.createElement(IQ,Pd({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=Xt(this.props,!1),m=Xt(o,!1),x=Ad(Ad({},p),{},{fill:"none"},Xt(c,!1)),y=i.map(function(w,N){var S=n.getTickLineCoord(w),E=n.getTickTextAnchor(w),C=Ad(Ad(Ad({textAnchor:E},p),{},{stroke:"none",fill:h},m),{},{index:N,payload:w,x:S.x2,y:S.y2});return se.createElement(Qr,Pd({className:wr("recharts-polar-angle-axis-tick",bQ(o)),key:"tick-".concat(w.coordinate)},h0(n.props,w,N)),c&&se.createElement("line",Pd({className:"recharts-polar-angle-axis-tick-line"},x,S)),o&&e.renderTickItem(o,C,d?d(w.value,N):w.value))});return se.createElement(Qr,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(Qr,{className:wr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):dr(n)?o=n(a):o=se.createElement(mf,Pd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(j.PureComponent);Lw(Vx,"displayName","PolarAngleAxis");Lw(Vx,"axisType","angleAxis");Lw(Vx,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var T_,Iz;function x5e(){if(Iz)return T_;Iz=1;var t=HW(),e=t(Object.getPrototypeOf,Object);return T_=e,T_}var A_,Rz;function y5e(){if(Rz)return A_;Rz=1;var t=Nc(),e=x5e(),r=_c(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,c=i.hasOwnProperty,d=o.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var x=c.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&o.call(x)==d}return A_=h,A_}var v5e=y5e();const b5e=tn(v5e);var E_,Mz;function w5e(){if(Mz)return E_;Mz=1;var t=Nc(),e=_c(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return E_=n,E_}var S5e=w5e();const N5e=tn(S5e);function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}function Xb(){return Xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xb.apply(this,arguments)}function _5e(t,e){return E5e(t)||A5e(t,e)||T5e(t,e)||j5e()}function j5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T5e(t,e){if(t){if(typeof t=="string")return Dz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dz(t,e)}}function Dz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function E5e(t){if(Array.isArray(t))return t}function Pz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pz(Object(r),!0).forEach(function(n){k5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k5e(t,e,r){return e=C5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C5e(t){var e=O5e(t,"string");return Gg(e)=="symbol"?e:e+""}function O5e(t,e){if(Gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bz=function(e,r,n,a,i){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+i),c+="L ".concat(e+n-o/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},I5e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},R5e=function(e){var r=Lz(Lz({},I5e),e),n=j.useRef(),a=j.useState(-1),i=_5e(a,2),o=i[0],c=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var M=n.current.getTotalLength();M&&c(M)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,x=r.height,y=r.className,w=r.animationEasing,N=r.animationDuration,S=r.animationBegin,E=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||x!==+x||p===0&&m===0||x===0)return null;var C=wr("recharts-trapezoid",y);return E?se.createElement(dl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:x,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:x,x:d,y:h},duration:N,animationEasing:w,isActive:E},function(M){var L=M.upperWidth,I=M.lowerWidth,R=M.height,A=M.x,T=M.y;return se.createElement(dl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:N,easing:w},se.createElement("path",Xb({},Xt(r,!0),{className:C,d:Bz(A,T,L,I,R),ref:n})))}):se.createElement("g",null,se.createElement("path",Xb({},Xt(r,!0),{className:C,d:Bz(d,h,p,m,x)})))},M5e=["option","shapeType","propTransformer","activeClassName","isActive"];function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function D5e(t,e){if(t==null)return{};var r=P5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function P5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Yb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$z(Object(r),!0).forEach(function(n){L5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$z(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L5e(t,e,r){return e=B5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B5e(t){var e=$5e(t,"string");return Wg(e)=="symbol"?e:e+""}function $5e(t,e){if(Wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z5e(t,e){return Yb(Yb({},e),t)}function U5e(t,e){return t==="symbols"}function zz(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return se.createElement(L7,r);case"trapezoid":return se.createElement(R5e,r);case"sector":return se.createElement(_Q,r);case"symbols":if(U5e(e))return se.createElement(bw,r);break;default:return null}}function V5e(t){return j.isValidElement(t)?t.props:t}function fA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?z5e:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,c=t.isActive,d=D5e(t,M5e),h;if(j.isValidElement(e))h=j.cloneElement(e,Yb(Yb({},d),V5e(e)));else if(dr(e))h=e(d);else if(b5e(e)&&!N5e(e)){var p=a(e,d);h=se.createElement(zz,{shapeType:r,elementProps:p})}else{var m=d;h=se.createElement(zz,{shapeType:r,elementProps:m})}return c?se.createElement(Qr,{className:o},h):h}function Bw(t,e){return e!=null&&"trapezoids"in t.props}function $w(t,e){return e!=null&&"sectors"in t.props}function Kg(t,e){return e!=null&&"points"in t.props}function F5e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function q5e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function H5e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function G5e(t,e){var r;return Bw(t,e)?r=F5e:$w(t,e)?r=q5e:Kg(t,e)&&(r=H5e),r}function W5e(t,e){var r;return Bw(t,e)?r="trapezoids":$w(t,e)?r="sectors":Kg(t,e)&&(r="points"),r}function K5e(t,e){if(Bw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if($w(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Kg(t,e)?e.payload:{}}function Q5e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=W5e(r,e),i=K5e(r,e),o=n.filter(function(d,h){var p=$x(i,d),m=r.props[a].filter(function(w){var N=G5e(r,e);return N(w,e)}),x=r.props[a].indexOf(m[m.length-1]),y=h===x;return p&&y}),c=n.indexOf(o[o.length-1]);return c}var k_,Uz;function X5e(){if(Uz)return k_;Uz=1;function t(e){return e&&e.length?e[0]:void 0}return k_=t,k_}var C_,Vz;function Y5e(){return Vz||(Vz=1,C_=X5e()),C_}var J5e=Y5e();const Z5e=tn(J5e);var e3e=["key"];function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}function t3e(t,e){if(t==null)return{};var r=r3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Jb(){return Jb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jb.apply(this,arguments)}function Fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Li(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(r),!0).forEach(function(n){Hl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function n3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$Q(n.key),n)}}function a3e(t,e,r){return e&&qz(t.prototype,e),r&&qz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i3e(t,e,r){return e=Zb(e),s3e(t,BQ()?Reflect.construct(e,r||[],Zb(t).constructor):e.apply(t,r))}function s3e(t,e){if(e&&(Nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o3e(t)}function o3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BQ=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zb(t)}function l3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pA(t,e)}function pA(t,e){return pA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pA(t,e)}function Hl(t,e,r){return e=$Q(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Q(t){var e=c3e(t,"string");return Nf(e)=="symbol"?e:e+""}function c3e(t,e){if(Nf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fx=(function(t){function e(){var r;n3e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=i3e(this,e,[].concat(a)),Hl(r,"state",{isAnimationFinished:!1}),Hl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),dr(o)&&o()}),Hl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),dr(o)&&o()}),Hl(r,"handleMouseEnter",function(o){var c=r.props.onMouseEnter;c&&c(r.props,o)}),Hl(r,"handleMouseLeave",function(o){var c=r.props.onMouseLeave;c&&c(r.props,o)}),r}return l3e(e,t),a3e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,c=Xt(this.props,!1),d=Xt(i,!0),h=n.map(function(p,m){var x=Li(Li(Li({key:"dot-".concat(m),r:3},c),d),{},{dataKey:o,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,x)});return se.createElement(Qr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return se.isValidElement(i)?p=se.cloneElement(i,Li(Li({},this.props),{},{points:n})):dr(i)?p=i(Li(Li({},this.props),{},{points:n})):p=se.createElement(IQ,Jb({},Xt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),se.createElement(Qr,{className:"recharts-radar-polygon"},p,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(dl,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,w=m&&m.length/i.length,N=i.map(function(S,E){var C=m&&m[Math.floor(E*w)];if(C){var M=ns(C.x,S.x),L=ns(C.y,S.y);return Li(Li({},S),{},{x:M(y),y:L(y)})}var I=ns(S.cx,S.x),R=ns(S.cy,S.y);return Li(Li({},S),{},{x:I(y),y:R(y)})});return n.renderPolygonStatically(N)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!o&&(!c||!$x(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,c=n.isAnimationActive;if(a||!o||!o.length)return null;var d=this.state.isAnimationFinished,h=wr("recharts-radar",i);return se.createElement(Qr,{className:h},this.renderPolygon(),(!c||d)&&sc.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(dr(n))i=n(a);else{var o=a.key,c=t3e(a,e3e);i=se.createElement(Dw,Jb({},c,{key:o,className:wr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(j.PureComponent);Hl(Fx,"displayName","Radar");Hl(Fx,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Hl(Fx,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,o=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(x,y){var w=bi(x,r.dataKey,y),N=bi(x,a),S=r.scale(w)+p,E=Array.isArray(N)?SQ(N):N,C=xr(E)?void 0:e.scale(E);Array.isArray(N)&&N.length>=2&&(d=!0),h.push(Li(Li({},Tn(o,c,C,S)),{},{name:w,value:N,cx:o,cy:c,radius:C,angle:S,payload:x}))});var m=[];return d&&h.forEach(function(x){if(Array.isArray(x.value)){var y=Z5e(x.value),w=xr(y)?void 0:e.scale(y);m.push(Li(Li({},x),{},{radius:w},Tn(o,c,w,x.angle)))}else m.push(x)}),{points:h,isRange:d,baseLinePoints:m}});var O_,Hz;function u3e(){if(Hz)return O_;Hz=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=i;return h}return O_=r,O_}var I_,Gz;function zQ(){if(Gz)return I_;Gz=1;var t=oK(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return I_=n,I_}var R_,Wz;function d3e(){if(Wz)return R_;Wz=1;var t=u3e(),e=Nw(),r=zQ();function n(a){return function(i,o,c){return c&&typeof c!="number"&&e(i,o,c)&&(o=c=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),c=c===void 0?i<o?1:-1:r(c),t(i,o,c,a)}}return R_=n,R_}var M_,Kz;function h3e(){if(Kz)return M_;Kz=1;var t=d3e(),e=t();return M_=e,M_}var f3e=h3e();const e2=tn(f3e);function Qg(t){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(t)}function Qz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qz(Object(r),!0).forEach(function(n){UQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function UQ(t,e,r){return e=p3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p3e(t){var e=m3e(t,"string");return Qg(e)=="symbol"?e:e+""}function m3e(t,e){if(Qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g3e=["Webkit","Moz","O","ms"],x3e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=g3e.reduce(function(i,o){return Xz(Xz({},i),{},UQ({},o+n,r))},{});return a[e]=r,a};function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function t2(){return t2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},t2.apply(this,arguments)}function Yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function D_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yz(Object(r),!0).forEach(function(n){As(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FQ(n.key),n)}}function v3e(t,e,r){return e&&Jz(t.prototype,e),r&&Jz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function b3e(t,e,r){return e=r2(e),w3e(t,VQ()?Reflect.construct(e,r||[],r2(t).constructor):e.apply(t,r))}function w3e(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S3e(t)}function S3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VQ=function(){return!!t})()}function r2(t){return r2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r2(t)}function N3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mA(t,e)}function mA(t,e){return mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mA(t,e)}function As(t,e,r){return e=FQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FQ(t){var e=_3e(t,"string");return _f(e)=="symbol"?e:e+""}function _3e(t,e){if(_f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var j3e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=Bm().domain(e2(0,d)).range([i,i+o-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},Zz=function(e){return e.changedTouches&&!!e.changedTouches.length},jf=(function(t){function e(r){var n;return y3e(this,e),n=b3e(this,e,[r]),As(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),As(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),As(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,c=a.startIndex;o==null||o({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),As(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),As(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),As(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),As(n,"handleSlideDragStart",function(a){var i=Zz(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return N3e(e,t),v3e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),x=Math.max(a,i),y=e.getIndexInRange(o,m),w=e.getIndexInRange(o,x);return{startIndex:y-y%d,endIndex:w===p?p:w-w%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,c=a.dataKey,d=bi(i[n],c,n);return dr(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,x=d.startIndex,y=d.endIndex,w=d.onChange,N=n.pageX-i;N>0?N=Math.min(N,h+p-m-c,h+p-m-o):N<0&&(N=Math.max(N,h-o,h-c));var S=this.getIndex({startX:o+N,endX:c+N});(S.startIndex!==x||S.endIndex!==y)&&w&&w(S),this.setState({startX:o+N,endX:c+N,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=Zz(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],p=this.props,m=p.x,x=p.width,y=p.travellerWidth,w=p.onChange,N=p.gap,S=p.data,E={startX:this.state.startX,endX:this.state.endX},C=n.pageX-i;C>0?C=Math.min(C,m+x-y-h):C<0&&(C=Math.max(C,m-h)),E[o]=h+C;var M=this.getIndex(E),L=M.startIndex,I=M.endIndex,R=function(){var T=S.length-1;return o==="startX"&&(c>d?L%N===0:I%N===0)||c<d&&I===T||o==="endX"&&(c>d?I%N===0:L%N===0)||c>d&&I===T};this.setState(As(As({},o,h+C),"brushMoveStartX",n.pageX),function(){w&&R()&&w(M)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var x=m+n;if(!(x===-1||x>=c.length)){var y=c[x];a==="startX"&&y>=h||a==="endX"&&y<=d||this.setState(As({},a,y),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return se.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=j.Children.only(h);return m?se.cloneElement(m,{x:a,y:i,width:o,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,x=d.traveller,y=d.ariaLabel,w=d.data,N=d.startIndex,S=d.endIndex,E=Math.max(n,this.props.x),C=D_(D_({},Xt(this.props,!1)),{},{x:E,y:h,width:p,height:m}),M=y||"Min value: ".concat((i=w[N])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=w[S])===null||o===void 0?void 0:o.name);return se.createElement(Qr,{tabIndex:0,role:"slider","aria-label":M,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(I){["ArrowLeft","ArrowRight"].includes(I.key)&&(I.preventDefault(),I.stopPropagation(),c.handleTravellerMoveKeyboard(I.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(x,C))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:o,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,x=p.endX,y=5,w={pointerEvents:"none",fill:h};return se.createElement(Qr,{className:"recharts-brush-texts"},se.createElement(mf,t2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,x)-y,y:o+c/2},w),this.getTextOfTick(a)),se.createElement(mf,t2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,x)+d+y,y:o+c/2},w),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,x=this.state,y=x.startX,w=x.endX,N=x.isTextActive,S=x.isSlideMoving,E=x.isTravellerMoving,C=x.isTravellerFocused;if(!a||!a.length||!bt(c)||!bt(d)||!bt(h)||!bt(p)||h<=0||p<=0)return null;var M=wr("recharts-brush",i),L=se.Children.count(o)===1,I=x3e("userSelect","none");return se.createElement(Qr,{className:M,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:I},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(y,w),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(w,"endX"),(N||S||E||C||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:o,height:c,fill:d,stroke:"none"}),se.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):dr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return D_({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},i&&i.length?j3e({data:i,width:o,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var x=a.scale.domain().map(function(y){return a.scale(y)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,c=i-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(j.PureComponent);As(jf,"displayName","Brush");As(jf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var P_,eU;function T3e(){if(eU)return P_;eU=1;var t=l7();function e(r,n){var a;return t(r,function(i,o,c){return a=n(i,o,c),!a}),!!a}return P_=e,P_}var L_,tU;function A3e(){if(tU)return L_;tU=1;var t=BW(),e=xl(),r=T3e(),n=fs(),a=Nw();function i(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return L_=i,L_}var E3e=A3e();const k3e=tn(E3e);var al=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},B_,rU;function C3e(){if(rU)return B_;rU=1;var t=rK();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return B_=e,B_}var $_,nU;function O3e(){if(nU)return $_;nU=1;var t=C3e(),e=eK(),r=xl();function n(a,i){var o={};return i=r(i,3),e(a,function(c,d,h){t(o,d,i(c,d,h))}),o}return $_=n,$_}var I3e=O3e();const R3e=tn(I3e);var z_,aU;function M3e(){if(aU)return z_;aU=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return z_=t,z_}var U_,iU;function D3e(){if(iU)return U_;iU=1;var t=l7();function e(r,n){var a=!0;return t(r,function(i,o,c){return a=!!n(i,o,c),a}),a}return U_=e,U_}var V_,sU;function P3e(){if(sU)return V_;sU=1;var t=M3e(),e=D3e(),r=xl(),n=fs(),a=Nw();function i(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return V_=i,V_}var L3e=P3e();const qQ=tn(L3e);var B3e=["x","y"];function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function gA(){return gA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gA.apply(this,arguments)}function oU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(r),!0).forEach(function(n){$3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $3e(t,e,r){return e=z3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z3e(t){var e=U3e(t,"string");return Xg(e)=="symbol"?e:e+""}function U3e(t,e){if(Xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V3e(t,e){if(t==null)return{};var r=F3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function F3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function q3e(t,e){var r=t.x,n=t.y,a=V3e(t,B3e),i="".concat(r),o=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),x=parseInt(m,10);return pm(pm(pm(pm(pm({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:p,width:x,name:e.name,radius:e.radius})}function lU(t){return se.createElement(fA,gA({shapeType:"rectangle",propTransformer:q3e,activeClassName:"recharts-active-bar"},t))}var H3e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=bt(n)||Khe(n);return i?e(n,a):(i||p0(),r)}},G3e=["value","background"],HQ;function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function W3e(t,e){if(t==null)return{};var r=K3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function n2(){return n2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n2.apply(this,arguments)}function cU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ka(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cU(Object(r),!0).forEach(function(n){bu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WQ(n.key),n)}}function X3e(t,e,r){return e&&uU(t.prototype,e),r&&uU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y3e(t,e,r){return e=a2(e),J3e(t,GQ()?Reflect.construct(e,r||[],a2(t).constructor):e.apply(t,r))}function J3e(t,e){if(e&&(Tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z3e(t)}function Z3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GQ=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a2(t)}function eSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xA(t,e)}function xA(t,e){return xA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xA(t,e)}function bu(t,e,r){return e=WQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WQ(t){var e=tSe(t,"string");return Tf(e)=="symbol"?e:e+""}function tSe(t,e){if(Tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qx=(function(t){function e(){var r;Q3e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Y3e(this,e,[].concat(a)),bu(r,"state",{isAnimationFinished:!1}),bu(r,"id",Rx("recharts-bar-")),bu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),bu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return eSe(e,t),X3e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=Xt(this.props,!1);return n&&n.map(function(m,x){var y=x===d,w=y?h:o,N=ka(ka(ka({},p),m),{},{isActive:y,option:w,index:x,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(Qr,n2({className:"recharts-bar-rectangle"},h0(a.props,m,x),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(x)}),se.createElement(lU,N))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,x=this.state.prevData;return se.createElement(dl,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var w=y.t,N=i.map(function(S,E){var C=x&&x[E];if(C){var M=ns(C.x,S.x),L=ns(C.y,S.y),I=ns(C.width,S.width),R=ns(C.height,S.height);return ka(ka({},S),{},{x:M(w),y:L(w),width:I(w),height:R(w)})}if(o==="horizontal"){var A=ns(0,S.height),T=A(w);return ka(ka({},S),{},{y:S.y+S.height-T,height:T})}var k=ns(0,S.width),F=k(w);return ka(ka({},S),{},{width:F})});return se.createElement(Qr,null,n.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!$x(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,c=a.activeIndex,d=Xt(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,x=W3e(h,G3e);if(!m)return null;var y=ka(ka(ka(ka(ka({},x),{},{fill:"#eee"},m),d),h0(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:p,className:"recharts-bar-background-rectangle"});return se.createElement(lU,n2({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},y))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=Ds(p,zx);if(!m)return null;var x=h==="vertical"?o[0].height/2:o[0].width/2,y=function(S,E){var C=Array.isArray(S.value)?S.value[1]:S.value;return{x:S.x,y:S.y,value:C,errorVal:bi(S,E)}},w={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(Qr,w,m.map(function(N){return se.cloneElement(N,{key:"error-bar-".concat(a,"-").concat(N.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:x,dataPointFormatter:y})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,x=n.height,y=n.isAnimationActive,w=n.background,N=n.id;if(a||!i||!i.length)return null;var S=this.state.isAnimationFinished,E=wr("recharts-bar",o),C=c&&c.allowDataOverflow,M=d&&d.allowDataOverflow,L=C||M,I=xr(N)?this.id:N;return se.createElement(Qr,{className:E},C||M?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(I)},se.createElement("rect",{x:C?h:h-m/2,y:M?p:p-x/2,width:C?m:m*2,height:M?x:x*2}))):null,se.createElement(Qr,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(I,")"):null},w?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,I),(!y||S)&&sc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(j.PureComponent);HQ=qx;bu(qx,"displayName","Bar");bu(qx,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});bu(qx,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,x=t.offset,y=cbe(n,r);if(!y)return null;var w=e.layout,N=r.type.defaultProps,S=N!==void 0?ka(ka({},N),r.props):r.props,E=S.dataKey,C=S.children,M=S.minPointSize,L=w==="horizontal"?o:i,I=h?L.scale.domain():null,R=gbe({numericAxis:L}),A=Ds(C,d7),T=m.map(function(k,F){var O,$,B,G,Q,H;h?O=ube(h[p+F],I):(O=bi(k,E),Array.isArray(O)||(O=[R,O]));var K=H3e(M,HQ.defaultProps.minPointSize)(O[1],F);if(w==="horizontal"){var te,ae=[o.scale(O[0]),o.scale(O[1])],ce=ae[0],X=ae[1];$=D$({axis:i,ticks:c,bandSize:a,offset:y.offset,entry:k,index:F}),B=(te=X??ce)!==null&&te!==void 0?te:void 0,G=y.size;var ie=ce-X;if(Q=Number.isNaN(ie)?0:ie,H={x:$,y:o.y,width:G,height:o.height},Math.abs(K)>0&&Math.abs(Q)<Math.abs(K)){var ne=Eo(Q||K)*(Math.abs(K)-Math.abs(Q));B-=ne,Q+=ne}}else{var ve=[i.scale(O[0]),i.scale(O[1])],pe=ve[0],Be=ve[1];if($=pe,B=D$({axis:o,ticks:d,bandSize:a,offset:y.offset,entry:k,index:F}),G=Be-pe,Q=y.size,H={x:i.x,y:B,width:i.width,height:Q},Math.abs(K)>0&&Math.abs(G)<Math.abs(K)){var Ge=Eo(G||K)*(Math.abs(K)-Math.abs(G));G+=Ge}}return ka(ka(ka({},k),{},{x:$,y:B,width:G,height:Q,value:h?O:O[1],payload:k,background:H},A&&A[F]&&A[F].props),{},{tooltipPayload:[yQ(r,k)],tooltipPosition:{x:$+G/2,y:B+Q/2}})});return ka({data:T,layout:w},x)});function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function rSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KQ(n.key),n)}}function nSe(t,e,r){return e&&dU(t.prototype,e),r&&dU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function hU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hU(Object(r),!0).forEach(function(n){zw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zw(t,e,r){return e=KQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KQ(t){var e=aSe(t,"string");return Yg(e)=="symbol"?e:e+""}function aSe(t,e){if(Yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iSe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},x=!!Es(h,qx);return p.reduce(function(y,w){var N=r[w],S=N.orientation,E=N.domain,C=N.padding,M=C===void 0?{}:C,L=N.mirror,I=N.reversed,R="".concat(S).concat(L?"Mirror":""),A,T,k,F,O;if(N.type==="number"&&(N.padding==="gap"||N.padding==="no-gap")){var $=E[1]-E[0],B=1/0,G=N.categoricalDomain.sort(Jhe);if(G.forEach(function(ve,pe){pe>0&&(B=Math.min((ve||0)-(G[pe-1]||0),B))}),Number.isFinite(B)){var Q=B/$,H=N.layout==="vertical"?n.height:n.width;if(N.padding==="gap"&&(A=Q*H/2),N.padding==="no-gap"){var K=ko(e.barCategoryGap,Q*H),te=Q*H/2;A=te-K-(te-K)/H*K}}}a==="xAxis"?T=[n.left+(M.left||0)+(A||0),n.left+n.width-(M.right||0)-(A||0)]:a==="yAxis"?T=d==="horizontal"?[n.top+n.height-(M.bottom||0),n.top+(M.top||0)]:[n.top+(M.top||0)+(A||0),n.top+n.height-(M.bottom||0)-(A||0)]:T=N.range,I&&(T=[T[1],T[0]]);var ae=pQ(N,i,x),ce=ae.scale,X=ae.realScaleType;ce.domain(E).range(T),mQ(ce);var ie=gQ(ce,jo(jo({},N),{},{realScaleType:X}));a==="xAxis"?(O=S==="top"&&!L||S==="bottom"&&L,k=n.left,F=m[R]-O*N.height):a==="yAxis"&&(O=S==="left"&&!L||S==="right"&&L,k=m[R]-O*N.width,F=n.top);var ne=jo(jo(jo({},N),ie),{},{realScaleType:X,x:k,y:F,scale:ce,width:a==="xAxis"?n.width:N.width,height:a==="yAxis"?n.height:N.height});return ne.bandSize=zb(ne,ie),!N.hide&&a==="xAxis"?m[R]+=(O?-1:1)*ne.height:N.hide||(m[R]+=(O?-1:1)*ne.width),jo(jo({},y),{},zw({},w,ne))},{})},QQ=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},sSe=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return QQ({x:r,y:n},{x:a,y:i})},XQ=(function(){function t(e){rSe(this,t),this.scale=e}return nSe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();zw(XQ,"EPS",1e-4);var B7=function(e){var r=Object.keys(e).reduce(function(n,a){return jo(jo({},n),{},zw({},a,XQ.create(e[a])))},{});return jo(jo({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,c=i.position;return R3e(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return qQ(a,function(i,o){return r[o].isInRange(i)})}})};function oSe(t){return(t%180+180)%180}var lSe=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=oSe(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},F_,fU;function cSe(){if(fU)return F_;fU=1;var t=xl(),e=Mx(),r=ww();function n(a){return function(i,o,c){var d=Object(i);if(!e(i)){var h=t(o,3);i=r(i),o=function(m){return h(d[m],m,d)}}var p=a(i,o,c);return p>-1?d[h?i[p]:p]:void 0}}return F_=n,F_}var q_,pU;function uSe(){if(pU)return q_;pU=1;var t=zQ();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return q_=e,q_}var H_,mU;function dSe(){if(mU)return H_;mU=1;var t=QW(),e=xl(),r=uSe(),n=Math.max;function a(i,o,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(o,3),h)}return H_=a,H_}var G_,gU;function hSe(){if(gU)return G_;gU=1;var t=cSe(),e=dSe(),r=t(e);return G_=r,G_}var fSe=hSe();const pSe=tn(fSe);var mSe=dW();const gSe=tn(mSe);var xSe=gSe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),$7=j.createContext(void 0),z7=j.createContext(void 0),YQ=j.createContext(void 0),JQ=j.createContext({}),ZQ=j.createContext(void 0),eX=j.createContext(0),tX=j.createContext(0),xU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,p=xSe(i);return se.createElement($7.Provider,{value:n},se.createElement(z7.Provider,{value:a},se.createElement(JQ.Provider,{value:i},se.createElement(YQ.Provider,{value:p},se.createElement(ZQ.Provider,{value:o},se.createElement(eX.Provider,{value:h},se.createElement(tX.Provider,{value:d},c)))))))},ySe=function(){return j.useContext(ZQ)},rX=function(e){var r=j.useContext($7);r==null&&p0();var n=r[e];return n==null&&p0(),n},vSe=function(){var e=j.useContext($7);return gu(e)},bSe=function(){var e=j.useContext(z7),r=pSe(e,function(n){return qQ(n.domain,Number.isFinite)});return r||gu(e)},nX=function(e){var r=j.useContext(z7);r==null&&p0();var n=r[e];return n==null&&p0(),n},wSe=function(){var e=j.useContext(YQ);return e},SSe=function(){return j.useContext(JQ)},U7=function(){return j.useContext(tX)},V7=function(){return j.useContext(eX)};function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function NSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iX(n.key),n)}}function jSe(t,e,r){return e&&_Se(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TSe(t,e,r){return e=i2(e),ASe(t,aX()?Reflect.construct(e,r||[],i2(t).constructor):e.apply(t,r))}function ASe(t,e){if(e&&(Af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ESe(t)}function ESe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aX=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i2(t)}function kSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yA(t,e)}function yA(t,e){return yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yA(t,e)}function yU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(r),!0).forEach(function(n){F7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F7(t,e,r){return e=iX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iX(t){var e=CSe(t,"string");return Af(e)=="symbol"?e:e+""}function CSe(t,e){if(Af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function OSe(t,e){return DSe(t)||MSe(t,e)||RSe(t,e)||ISe()}function ISe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RSe(t,e){if(t){if(typeof t=="string")return bU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bU(t,e)}}function bU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function DSe(t){if(Array.isArray(t))return t}function vA(){return vA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vA.apply(this,arguments)}var PSe=function(e,r){var n;return se.isValidElement(e)?n=se.cloneElement(e,r):dr(e)?n=e(r):n=se.createElement("line",vA({},r,{className:"recharts-reference-line-line"})),n},LSe=function(e,r,n,a,i,o,c,d,h){var p=i.x,m=i.y,x=i.width,y=i.height;if(n){var w=h.y,N=e.y.apply(w,{position:o});if(al(h,"discard")&&!e.y.isInRange(N))return null;var S=[{x:p+x,y:N},{x:p,y:N}];return d==="left"?S.reverse():S}if(r){var E=h.x,C=e.x.apply(E,{position:o});if(al(h,"discard")&&!e.x.isInRange(C))return null;var M=[{x:C,y:m+y},{x:C,y:m}];return c==="top"?M.reverse():M}if(a){var L=h.segment,I=L.map(function(R){return e.apply(R,{position:o})});return al(h,"discard")&&k3e(I,function(R){return!e.isInRange(R)})?null:I}return null};function BSe(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=ySe(),p=rX(a),m=nX(i),x=wSe();if(!h||!x)return null;ac(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=B7({x:p.scale,y:m.scale}),w=Ga(e),N=Ga(r),S=n&&n.length===2,E=LSe(y,w,N,S,x,t.position,p.orientation,m.orientation,t);if(!E)return null;var C=OSe(E,2),M=C[0],L=M.x,I=M.y,R=C[1],A=R.x,T=R.y,k=al(t,"hidden")?"url(#".concat(h,")"):void 0,F=vU(vU({clipPath:k},Xt(t,!0)),{},{x1:L,y1:I,x2:A,y2:T});return se.createElement(Qr,{className:wr("recharts-reference-line",c)},PSe(o,F),xi.renderCallByParent(t,sSe({x1:L,y1:I,x2:A,y2:T})))}var q7=(function(t){function e(){return NSe(this,e),TSe(this,e,arguments)}return kSe(e,t),jSe(e,[{key:"render",value:function(){return se.createElement(BSe,this.props)}}])})(se.Component);F7(q7,"displayName","ReferenceLine");F7(q7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function bA(){return bA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bA.apply(this,arguments)}function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function wU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function SU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(r),!0).forEach(function(n){Uw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oX(n.key),n)}}function USe(t,e,r){return e&&zSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VSe(t,e,r){return e=s2(e),FSe(t,sX()?Reflect.construct(e,r||[],s2(t).constructor):e.apply(t,r))}function FSe(t,e){if(e&&(Ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qSe(t)}function qSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!t})()}function s2(t){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s2(t)}function HSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}function wA(t,e){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wA(t,e)}function Uw(t,e,r){return e=oX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oX(t){var e=GSe(t,"string");return Ef(e)=="symbol"?e:e+""}function GSe(t,e){if(Ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var WSe=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=B7({x:a.scale,y:i.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return al(e,"discard")&&!o.isInRange(c)?null:c},Vw=(function(t){function e(){return $Se(this,e),VSe(this,e,arguments)}return HSe(e,t),USe(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=Ga(a),p=Ga(i);if(ac(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=WSe(this.props);if(!m)return null;var x=m.x,y=m.y,w=this.props,N=w.shape,S=w.className,E=al(this.props,"hidden")?"url(#".concat(d,")"):void 0,C=SU(SU({clipPath:E},Xt(this.props,!0)),{},{cx:x,cy:y});return se.createElement(Qr,{className:wr("recharts-reference-dot",S)},e.renderDot(N,C),xi.renderCallByParent(this.props,{x:x-o,y:y-o,width:2*o,height:2*o}))}}])})(se.Component);Uw(Vw,"displayName","ReferenceDot");Uw(Vw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Uw(Vw,"renderDot",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):dr(t)?r=t(e):r=se.createElement(Dw,bA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function SA(){return SA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SA.apply(this,arguments)}function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function NU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _U(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(r),!0).forEach(function(n){Fw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cX(n.key),n)}}function XSe(t,e,r){return e&&QSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YSe(t,e,r){return e=o2(e),JSe(t,lX()?Reflect.construct(e,r||[],o2(t).constructor):e.apply(t,r))}function JSe(t,e){if(e&&(kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZSe(t)}function ZSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lX=function(){return!!t})()}function o2(t){return o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o2(t)}function e6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NA(t,e)}function NA(t,e){return NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},NA(t,e)}function Fw(t,e,r){return e=cX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cX(t){var e=t6e(t,"string");return kf(e)=="symbol"?e:e+""}function t6e(t,e){if(kf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var r6e=function(e,r,n,a,i){var o=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var x=B7({x:p.scale,y:m.scale}),y={x:e?x.x.apply(o,{position:"start"}):x.x.rangeMin,y:n?x.y.apply(d,{position:"start"}):x.y.rangeMin},w={x:r?x.x.apply(c,{position:"end"}):x.x.rangeMax,y:a?x.y.apply(h,{position:"end"}):x.y.rangeMax};return al(i,"discard")&&(!x.isInRange(y)||!x.isInRange(w))?null:QQ(y,w)},qw=(function(t){function e(){return KSe(this,e),YSe(this,e,arguments)}return e6e(e,t),XSe(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;ac(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Ga(a),x=Ga(i),y=Ga(o),w=Ga(c),N=this.props.shape;if(!m&&!x&&!y&&!w&&!N)return null;var S=r6e(m,x,y,w,this.props);if(!S&&!N)return null;var E=al(this.props,"hidden")?"url(#".concat(p,")"):void 0;return se.createElement(Qr,{className:wr("recharts-reference-area",d)},e.renderRect(N,_U(_U({clipPath:E},Xt(this.props,!0)),S)),xi.renderCallByParent(this.props,S))}}])})(se.Component);Fw(qw,"displayName","ReferenceArea");Fw(qw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Fw(qw,"renderRect",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):dr(t)?r=t(e):r=se.createElement(L7,SA({},e,{className:"recharts-reference-area-rect"})),r});function uX(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function n6e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return lSe(n,r)}function a6e(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function l2(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function i6e(t,e){return uX(t,e+1)}function s6e(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,p=o,m=function(){var w=n==null?void 0:n[d];if(w===void 0)return{v:uX(n,h)};var N=d,S,E=function(){return S===void 0&&(S=r(w,N)),S},C=w.coordinate,M=d===0||l2(t,C,E,p,c);M||(d=0,p=o,h+=1),M&&(p=C+t*(E()/2+a),d+=h)},x;h<=i.length;)if(x=m(),x)return x.v;return[]}function Jg(t){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(t)}function jU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(r),!0).forEach(function(n){o6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o6e(t,e,r){return e=l6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l6e(t){var e=c6e(t,"string");return Jg(e)=="symbol"?e:e+""}function c6e(t,e){if(Jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u6e(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,c=e.start,d=e.end,h=function(x){var y=i[x],w,N=function(){return w===void 0&&(w=r(y,x)),w};if(x===o-1){var S=t*(y.coordinate+t*N()/2-d);i[x]=y=Ti(Ti({},y),{},{tickCoord:S>0?y.coordinate-S*t:y.coordinate})}else i[x]=y=Ti(Ti({},y),{},{tickCoord:y.coordinate});var E=l2(t,y.tickCoord,N,c,d);E&&(d=y.tickCoord-t*(N()/2+a),i[x]=Ti(Ti({},y),{},{isShow:!0}))},p=o-1;p>=0;p--)h(p);return i}function d6e(t,e,r,n,a,i){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),x=t*(p.coordinate+t*m/2-h);o[c-1]=p=Ti(Ti({},p),{},{tickCoord:x>0?p.coordinate-x*t:p.coordinate});var y=l2(t,p.tickCoord,function(){return m},d,h);y&&(h=p.tickCoord-t*(m/2+a),o[c-1]=Ti(Ti({},p),{},{isShow:!0}))}for(var w=i?c-1:c,N=function(C){var M=o[C],L,I=function(){return L===void 0&&(L=r(M,C)),L};if(C===0){var R=t*(M.coordinate-t*I()/2-d);o[C]=M=Ti(Ti({},M),{},{tickCoord:R<0?M.coordinate-R*t:M.coordinate})}else o[C]=M=Ti(Ti({},M),{},{tickCoord:M.coordinate});var A=l2(t,M.tickCoord,I,d,h);A&&(d=M.tickCoord+t*(I()/2+a),o[C]=Ti(Ti({},M),{},{isShow:!0}))},S=0;S<w;S++)N(S);return o}function H7(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(bt(d)||T0.isSsr)return i6e(a,typeof d=="number"&&bt(d)?d:0);var x=[],y=c==="top"||c==="bottom"?"width":"height",w=p&&y==="width"?Lm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},N=function(M,L){var I=dr(h)?h(M.value,L):M.value;return y==="width"?n6e(Lm(I,{fontSize:e,letterSpacing:r}),w,m):Lm(I,{fontSize:e,letterSpacing:r})[y]},S=a.length>=2?Eo(a[1].coordinate-a[0].coordinate):1,E=a6e(i,S,y);return d==="equidistantPreserveStart"?s6e(S,E,N,a,o):(d==="preserveStart"||d==="preserveStartEnd"?x=d6e(S,E,N,a,o,d==="preserveStartEnd"):x=u6e(S,E,N,a,o),x.filter(function(C){return C.isShow}))}var h6e=["viewBox"],f6e=["viewBox"],p6e=["ticks"];function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ah.apply(this,arguments)}function TU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function za(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(r),!0).forEach(function(n){G7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function W_(t,e){if(t==null)return{};var r=m6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function m6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function g6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hX(n.key),n)}}function x6e(t,e,r){return e&&AU(t.prototype,e),r&&AU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y6e(t,e,r){return e=c2(e),v6e(t,dX()?Reflect.construct(e,r||[],c2(t).constructor):e.apply(t,r))}function v6e(t,e){if(e&&(Cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b6e(t)}function b6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dX=function(){return!!t})()}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c2(t)}function w6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_A(t,e)}function _A(t,e){return _A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_A(t,e)}function G7(t,e,r){return e=hX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hX(t){var e=S6e(t,"string");return Cf(e)=="symbol"?e:e+""}function S6e(t,e){if(Cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rp=(function(t){function e(r){var n;return g6e(this,e),n=y6e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return w6e(e,t),x6e(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=W_(n,h6e),c=this.props,d=c.viewBox,h=W_(c,f6e);return!Bh(i,d)||!Bh(o,h)||!Bh(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,x=a.tickMargin,y,w,N,S,E,C,M=m?-1:1,L=n.tickSize||p,I=bt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":y=w=n.coordinate,S=o+ +!m*d,N=S-M*L,C=N-M*x,E=I;break;case"left":N=S=n.coordinate,w=i+ +!m*c,y=w-M*L,E=y-M*x,C=I;break;case"right":N=S=n.coordinate,w=i+ +m*c,y=w+M*L,E=y+M*x,C=I;break;default:y=w=n.coordinate,S=o+ +m*d,N=S+M*L,C=N+M*x,E=I;break}return{line:{x1:y,y1:N,x2:w,y2:S},tick:{x:E,y:C}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=za(za(za({},Xt(this.props,!1)),Xt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var x=+(d==="top"&&!h||d==="bottom"&&h);m=za(za({},m),{},{x1:a,y1:i+x*c,x2:a+o,y2:i+x*c})}else{var y=+(d==="left"&&!h||d==="right"&&h);m=za(za({},m),{},{x1:a+y*o,y1:i,x2:a+y*o,y2:i+c})}return se.createElement("line",Ah({},m,{className:wr("recharts-cartesian-axis-line",io(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,x=c.unit,y=H7(za(za({},this.props),{},{ticks:n}),a,i),w=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),S=Xt(this.props,!1),E=Xt(p,!1),C=za(za({},S),{},{fill:"none"},Xt(d,!1)),M=y.map(function(L,I){var R=o.getTickLineCoord(L),A=R.line,T=R.tick,k=za(za(za(za({textAnchor:w,verticalAnchor:N},S),{},{stroke:"none",fill:h},E),T),{},{index:I,payload:L,visibleTicksCount:y.length,tickFormatter:m});return se.createElement(Qr,Ah({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},h0(o.props,L,I)),d&&se.createElement("line",Ah({},C,A,{className:wr("recharts-cartesian-axis-tick-line",io(d,"className"))})),p&&e.renderTickItem(p,k,"".concat(dr(m)?m(L.value,I):L.value).concat(x||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},M)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,x=m.ticks,y=W_(m,p6e),w=x;return dr(d)&&(w=x&&x.length>0?d(this.props):d(y)),o<=0||c<=0||!w||!w.length?null:se.createElement(Qr,{className:wr("recharts-cartesian-axis",h),ref:function(S){n.layerReference=S}},i&&this.renderAxisLine(),this.renderTicks(w,this.state.fontSize,this.state.letterSpacing),xi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,c=wr(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?o=se.cloneElement(n,za(za({},a),{},{className:c})):dr(n)?o=n(za(za({},a),{},{className:c})):o=se.createElement(mf,Ah({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(j.Component);G7(rp,"displayName","CartesianAxis");G7(rp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var N6e=["x1","y1","x2","y2","key"],_6e=["offset"];function m0(t){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m0(t)}function EU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ei(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(r),!0).forEach(function(n){j6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j6e(t,e,r){return e=T6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T6e(t){var e=A6e(t,"string");return m0(e)=="symbol"?e:e+""}function A6e(t,e){if(m0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(m0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ud.apply(this,arguments)}function kU(t,e){if(t==null)return{};var r=E6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function E6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var k6e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,c=e.height,d=e.ry;return se.createElement("rect",{x:a,y:i,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function fX(t,e){var r;if(se.isValidElement(t))r=se.cloneElement(t,e);else if(dr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,c=e.key,d=kU(e,N6e),h=Xt(d,!1);h.offset;var p=kU(h,_6e);r=se.createElement("line",Ud({},p,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:c}))}return r}function C6e(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Ei(Ei({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return fX(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function O6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Ei(Ei({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return fX(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function I6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(x){return Math.round(x+a-a)}).sort(function(x,y){return x-y});a!==p[0]&&p.unshift(0);var m=p.map(function(x,y){var w=!p[y+1],N=w?a+o-x:p[y+1]-x;if(N<=0)return null;var S=y%e.length;return se.createElement("rect",{key:"react-".concat(y),y:x,x:n,height:N,width:i,stroke:"none",fill:e[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function R6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(x){return Math.round(x+i-i)}).sort(function(x,y){return x-y});i!==p[0]&&p.unshift(0);var m=p.map(function(x,y){var w=!p[y+1],N=w?i+c-x:p[y+1]-x;if(N<=0)return null;var S=y%n.length;return se.createElement("rect",{key:"react-".concat(y),x,y:o,width:N,height:d,stroke:"none",fill:n[S],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var M6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return fQ(H7(Ei(Ei(Ei({},rp.defaultProps),n),{},{ticks:Zl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},D6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return fQ(H7(Ei(Ei(Ei({},rp.defaultProps),n),{},{ticks:Zl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},gh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pX(t){var e,r,n,a,i,o,c=U7(),d=V7(),h=SSe(),p=Ei(Ei({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:gh.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:gh.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:gh.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:gh.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:gh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:gh.verticalFill,x:bt(t.x)?t.x:h.left,y:bt(t.y)?t.y:h.top,width:bt(t.width)?t.width:h.width,height:bt(t.height)?t.height:h.height}),m=p.x,x=p.y,y=p.width,w=p.height,N=p.syncWithTicks,S=p.horizontalValues,E=p.verticalValues,C=vSe(),M=bSe();if(!bt(y)||y<=0||!bt(w)||w<=0||!bt(m)||m!==+m||!bt(x)||x!==+x)return null;var L=p.verticalCoordinatesGenerator||M6e,I=p.horizontalCoordinatesGenerator||D6e,R=p.horizontalPoints,A=p.verticalPoints;if((!R||!R.length)&&dr(I)){var T=S&&S.length,k=I({yAxis:M?Ei(Ei({},M),{},{ticks:T?S:M.ticks}):void 0,width:c,height:d,offset:h},T?!0:N);ac(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(m0(k),"]")),Array.isArray(k)&&(R=k)}if((!A||!A.length)&&dr(L)){var F=E&&E.length,O=L({xAxis:C?Ei(Ei({},C),{},{ticks:F?E:C.ticks}):void 0,width:c,height:d,offset:h},F?!0:N);ac(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(m0(O),"]")),Array.isArray(O)&&(A=O)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(k6e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),se.createElement(C6e,Ud({},p,{offset:h,horizontalPoints:R,xAxis:C,yAxis:M})),se.createElement(O6e,Ud({},p,{offset:h,verticalPoints:A,xAxis:C,yAxis:M})),se.createElement(I6e,Ud({},p,{horizontalPoints:R})),se.createElement(R6e,Ud({},p,{verticalPoints:A})))}pX.displayName="CartesianGrid";function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function P6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xX(n.key),n)}}function B6e(t,e,r){return e&&L6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $6e(t,e,r){return e=u2(e),z6e(t,mX()?Reflect.construct(e,r||[],u2(t).constructor):e.apply(t,r))}function z6e(t,e){if(e&&(Of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U6e(t)}function U6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mX=function(){return!!t})()}function u2(t){return u2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u2(t)}function V6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jA(t,e)}function jA(t,e){return jA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jA(t,e)}function gX(t,e,r){return e=xX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xX(t){var e=F6e(t,"string");return Of(e)=="symbol"?e:e+""}function F6e(t,e){if(Of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hw=(function(t){function e(){return P6e(this,e),$6e(this,e,arguments)}return V6e(e,t),B6e(e,[{key:"render",value:function(){return null}}])})(j.Component);gX(Hw,"displayName","ZAxis");gX(Hw,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var q6e=["option","isActive"];function Fm(){return Fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fm.apply(this,arguments)}function H6e(t,e){if(t==null)return{};var r=G6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function G6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function W6e(t){var e=t.option,r=t.isActive,n=H6e(t,q6e);return typeof e=="string"?j.createElement(fA,Fm({option:j.createElement(bw,Fm({type:e},n)),isActive:r,shapeType:"symbols"},n)):j.createElement(fA,Fm({option:e,isActive:r,shapeType:"symbols"},n))}function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function qm(){return qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qm.apply(this,arguments)}function CU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CU(Object(r),!0).forEach(function(n){wu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vX(n.key),n)}}function Q6e(t,e,r){return e&&OU(t.prototype,e),r&&OU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function X6e(t,e,r){return e=d2(e),Y6e(t,yX()?Reflect.construct(e,r||[],d2(t).constructor):e.apply(t,r))}function Y6e(t,e){if(e&&(If(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J6e(t)}function J6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yX=function(){return!!t})()}function d2(t){return d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d2(t)}function Z6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TA(t,e)}function TA(t,e){return TA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TA(t,e)}function wu(t,e,r){return e=vX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vX(t){var e=eNe(t,"string");return If(e)=="symbol"?e:e+""}function eNe(t,e){if(If(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hx=(function(t){function e(){var r;K6e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=X6e(this,e,[].concat(a)),wu(r,"state",{isAnimationFinished:!1}),wu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),wu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),wu(r,"id",Rx("recharts-scatter-")),r}return Z6e(e,t),Q6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.activeShape,d=i.activeIndex,h=Xt(this.props,!1);return n.map(function(p,m){var x=d===m,y=x?c:o,w=Zs(Zs({},h),p);return se.createElement(Qr,qm({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},h0(a.props,p,m),{role:"img"}),se.createElement(W6e,qm({option:y,isActive:x,key:"symbol-".concat(m)},w)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(dl,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,w=i.map(function(N,S){var E=m&&m[S];if(E){var C=ns(E.cx,N.cx),M=ns(E.cy,N.cy),L=ns(E.size,N.size);return Zs(Zs({},N),{},{cx:C(y),cy:M(y),size:L(y)})}var I=ns(0,N.size);return Zs(Zs({},N),{},{size:I(y)})});return se.createElement(Qr,null,n.renderSymbolsStatically(w))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!$x(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,c=a.yAxis,d=a.children,h=Ds(d,zx);return h?h.map(function(p,m){var x=p.props,y=x.direction,w=x.dataKey;return se.cloneElement(p,{key:"".concat(y,"-").concat(w,"-").concat(i[m]),data:i,xAxis:o,yAxis:c,layout:y==="x"?"vertical":"horizontal",dataPointFormatter:function(S,E){return{x:S.cx,y:S.cy,value:y==="x"?+S.node.x:+S.node.y,errorVal:bi(S,E)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,c=n.lineJointType,d=Xt(this.props,!1),h=Xt(i,!1),p,m;if(o==="joint")p=a.map(function(M){return{x:M.cx,y:M.cy}});else if(o==="fitting"){var x=Yhe(a),y=x.xmin,w=x.xmax,N=x.a,S=x.b,E=function(L){return N*L+S};p=[{x:y,y:E(y)},{x:w,y:E(w)}]}var C=Zs(Zs(Zs({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return se.isValidElement(i)?m=se.cloneElement(i,C):dr(i)?m=i(C):m=se.createElement(JT,qm({},C,{type:c})),se.createElement(Qr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,x=n.width,y=n.height,w=n.id,N=n.isAnimationActive;if(a||!i||!i.length)return null;var S=this.state.isAnimationFinished,E=wr("recharts-scatter",c),C=d&&d.allowDataOverflow,M=h&&h.allowDataOverflow,L=C||M,I=xr(w)?this.id:w;return se.createElement(Qr,{className:E,clipPath:L?"url(#clipPath-".concat(I,")"):null},C||M?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(I)},se.createElement("rect",{x:C?p:p-x/2,y:M?m:m-y/2,width:C?x:x*2,height:M?y:y*2}))):null,o&&this.renderLine(),this.renderErrorBar(),se.createElement(Qr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!N||S)&&sc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(j.PureComponent);wu(Hx,"displayName","Scatter");wu(Hx,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});wu(Hx,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,o=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=Ds(a.props.children,d7),m=xr(e.dataKey)?a.props.dataKey:e.dataKey,x=xr(r.dataKey)?a.props.dataKey:r.dataKey,y=n&&n.dataKey,w=n?n.range:Hw.defaultProps.range,N=w&&w[0],S=e.scale.bandwidth?e.scale.bandwidth():0,E=r.scale.bandwidth?r.scale.bandwidth():0,C=i.map(function(M,L){var I=bi(M,m),R=bi(M,x),A=!xr(y)&&bi(M,y)||"-",T=[{name:xr(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:I,payload:M,dataKey:m,type:h},{name:xr(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:R,payload:M,dataKey:x,type:h}];A!=="-"&&T.push({name:n.name||n.dataKey,unit:n.unit||"",value:A,payload:M,dataKey:y,type:h});var k=M$({axis:e,ticks:o,bandSize:S,entry:M,index:L,dataKey:m}),F=M$({axis:r,ticks:c,bandSize:E,entry:M,index:L,dataKey:x}),O=A!=="-"?n.scale(A):N,$=Math.sqrt(Math.max(O,0)/Math.PI);return Zs(Zs({},M),{},{cx:k,cy:F,x:k-$,y:F-$,xAxis:e,yAxis:r,zAxis:n,width:2*$,height:2*$,size:O,node:{x:I,y:R,z:A},tooltipPayload:T,tooltipPosition:{x:k,y:F},payload:M},p&&p[L]&&p[L].props)});return Zs({points:C},d)});function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function tNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SX(n.key),n)}}function nNe(t,e,r){return e&&rNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function aNe(t,e,r){return e=h2(e),iNe(t,bX()?Reflect.construct(e,r||[],h2(t).constructor):e.apply(t,r))}function iNe(t,e){if(e&&(Rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sNe(t)}function sNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bX=function(){return!!t})()}function h2(t){return h2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h2(t)}function oNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AA(t,e)}function AA(t,e){return AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},AA(t,e)}function wX(t,e,r){return e=SX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SX(t){var e=lNe(t,"string");return Rf(e)=="symbol"?e:e+""}function lNe(t,e){if(Rf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function EA(){return EA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EA.apply(this,arguments)}function cNe(t){var e=t.xAxisId,r=U7(),n=V7(),a=rX(e);return a==null?null:j.createElement(rp,EA({},a,{className:wr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Zl(o,!0)}}))}var Gw=(function(t){function e(){return tNe(this,e),aNe(this,e,arguments)}return oNe(e,t),nNe(e,[{key:"render",value:function(){return j.createElement(cNe,this.props)}}])})(j.Component);wX(Gw,"displayName","XAxis");wX(Gw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Mf(t){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(t)}function uNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jX(n.key),n)}}function hNe(t,e,r){return e&&dNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fNe(t,e,r){return e=f2(e),pNe(t,NX()?Reflect.construct(e,r||[],f2(t).constructor):e.apply(t,r))}function pNe(t,e){if(e&&(Mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mNe(t)}function mNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NX=function(){return!!t})()}function f2(t){return f2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f2(t)}function gNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kA(t,e)}function kA(t,e){return kA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kA(t,e)}function _X(t,e,r){return e=jX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jX(t){var e=xNe(t,"string");return Mf(e)=="symbol"?e:e+""}function xNe(t,e){if(Mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function CA(){return CA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CA.apply(this,arguments)}var yNe=function(e){var r=e.yAxisId,n=U7(),a=V7(),i=nX(r);return i==null?null:j.createElement(rp,CA({},i,{className:wr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Zl(c,!0)}}))},Ww=(function(t){function e(){return uNe(this,e),fNe(this,e,arguments)}return gNe(e,t),hNe(e,[{key:"render",value:function(){return j.createElement(yNe,this.props)}}])})(j.Component);_X(Ww,"displayName","YAxis");_X(Ww,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function IU(t){return SNe(t)||wNe(t)||bNe(t)||vNe()}function vNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bNe(t,e){if(t){if(typeof t=="string")return OA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OA(t,e)}}function wNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SNe(t){if(Array.isArray(t))return OA(t)}function OA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var IA=function(e,r,n,a,i){var o=Ds(e,q7),c=Ds(e,Vw),d=[].concat(IU(o),IU(c)),h=Ds(e,qw),p="".concat(a,"Id"),m=a[0],x=r;if(d.length&&(x=d.reduce(function(N,S){if(S.props[p]===n&&al(S.props,"extendDomain")&&bt(S.props[m])){var E=S.props[m];return[Math.min(N[0],E),Math.max(N[1],E)]}return N},x)),h.length){var y="".concat(m,"1"),w="".concat(m,"2");x=h.reduce(function(N,S){if(S.props[p]===n&&al(S.props,"extendDomain")&&bt(S.props[y])&&bt(S.props[w])){var E=S.props[y],C=S.props[w];return[Math.min(N[0],E,C),Math.max(N[1],E,C)]}return N},x)}return i&&i.length&&(x=i.reduce(function(N,S){return bt(S)?[Math.min(N[0],S),Math.max(N[1],S)]:N},x)),x},K_={exports:{}},RU;function NNe(){return RU||(RU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var y=new a(p,m||d,x),w=r?r+h:h;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],y]:d._events[w].push(y):(d._events[w]=y,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,y=m.length,w=new Array(y);x<y;x++)w[x]=m[x].fn;return w},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,x,y,w){var N=r?r+h:h;if(!this._events[N])return!1;var S=this._events[N],E=arguments.length,C,M;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),E){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,m),!0;case 4:return S.fn.call(S.context,p,m,x),!0;case 5:return S.fn.call(S.context,p,m,x,y),!0;case 6:return S.fn.call(S.context,p,m,x,y,w),!0}for(M=1,C=new Array(E-1);M<E;M++)C[M-1]=arguments[M];S.fn.apply(S.context,C)}else{var L=S.length,I;for(M=0;M<L;M++)switch(S[M].once&&this.removeListener(h,S[M].fn,void 0,!0),E){case 1:S[M].fn.call(S[M].context);break;case 2:S[M].fn.call(S[M].context,p);break;case 3:S[M].fn.call(S[M].context,p,m);break;case 4:S[M].fn.call(S[M].context,p,m,x);break;default:if(!C)for(I=1,C=new Array(E-1);I<E;I++)C[I-1]=arguments[I];S[M].fn.apply(S[M].context,C)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,x){var y=r?r+h:h;if(!this._events[y])return this;if(!p)return o(this,y),this;var w=this._events[y];if(w.fn)w.fn===p&&(!x||w.once)&&(!m||w.context===m)&&o(this,y);else{for(var N=0,S=[],E=w.length;N<E;N++)(w[N].fn!==p||x&&!w[N].once||m&&w[N].context!==m)&&S.push(w[N]);S.length?this._events[y]=S.length===1?S[0]:S:o(this,y)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(K_)),K_.exports}var _Ne=NNe();const jNe=tn(_Ne);var Q_=new jNe,X_="recharts.syncMouseEvents";function Zg(t){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(t)}function TNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ANe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TX(n.key),n)}}function ENe(t,e,r){return e&&ANe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y_(t,e,r){return e=TX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TX(t){var e=kNe(t,"string");return Zg(e)=="symbol"?e:e+""}function kNe(t,e){if(Zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CNe=(function(){function t(){TNe(this,t),Y_(this,"activeIndex",0),Y_(this,"coordinateList",[]),Y_(this,"layout","horizontal")}return ENe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,x=r.mouseHandlerCallback,y=x===void 0?null:x;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,x=o+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:x})}}}])})();function ONe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&bt(n)&&bt(a))return!0}return!1}function INe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function AX(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=Tn(e,r,n,a),c=Tn(e,r,n,i);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function RNe(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,x=Tn(c,d,h,m),y=Tn(c,d,p,m);n=x.x,a=x.y,i=y.x,o=y.y}else return AX(e);return[{x:n,y:a},{x:i,y:o}]}function ex(t){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex(t)}function MU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(r),!0).forEach(function(n){MNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MNe(t,e,r){return e=DNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DNe(t){var e=PNe(t,"string");return ex(e)=="symbol"?e:e+""}function PNe(t,e){if(ex(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LNe(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,x=t.chartName,y=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!y||!i||!o||x!=="ScatterChart"&&a!=="axis")return null;var w,N=JT;if(x==="ScatterChart")w=o,N=D4e;else if(x==="BarChart")w=INe(m,o,d,p),N=L7;else if(m==="radial"){var S=AX(o),E=S.cx,C=S.cy,M=S.radius,L=S.startAngle,I=S.endAngle;w={cx:E,cy:C,startAngle:L,endAngle:I,innerRadius:M,outerRadius:M},N=_Q}else w={points:RNe(m,o,d)},N=JT;var R=Xy(Xy(Xy(Xy({stroke:"#ccc",pointerEvents:"none"},d),w),Xt(y,!1)),{},{payload:c,payloadIndex:h,className:wr("recharts-tooltip-cursor",y.className)});return j.isValidElement(y)?j.cloneElement(y,R):j.createElement(N,R)}var BNe=["item"],$Ne=["children","className","width","height","style","compact","title","desc"];function Df(t){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(t)}function Eh(){return Eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Eh.apply(this,arguments)}function DU(t,e){return VNe(t)||UNe(t,e)||kX(t,e)||zNe()}function zNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UNe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function VNe(t){if(Array.isArray(t))return t}function PU(t,e){if(t==null)return{};var r=FNe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function qNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CX(n.key),n)}}function GNe(t,e,r){return e&&HNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function WNe(t,e,r){return e=p2(e),KNe(t,EX()?Reflect.construct(e,r||[],p2(t).constructor):e.apply(t,r))}function KNe(t,e){if(e&&(Df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QNe(t)}function QNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EX=function(){return!!t})()}function p2(t){return p2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p2(t)}function XNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RA(t,e)}function RA(t,e){return RA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},RA(t,e)}function Pf(t){return ZNe(t)||JNe(t)||kX(t)||YNe()}function YNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kX(t,e){if(t){if(typeof t=="string")return MA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MA(t,e)}}function JNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZNe(t){if(Array.isArray(t))return MA(t)}function MA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function LU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(r),!0).forEach(function(n){er(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function er(t,e,r){return e=CX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CX(t){var e=e_e(t,"string");return Df(e)=="symbol"?e:e+""}function e_e(t,e){if(Df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t_e={xAxis:["bottom","top"],yAxis:["left","right"]},r_e={width:"100%",height:"100%"},OX={x:0,y:0};function Yy(t){return t}var n_e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},a_e=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,c=a.radius;return Xe(Xe(Xe({},a),Tn(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=i.coordinate,h=a.angle;return Xe(Xe(Xe({},a),Tn(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return OX},Kw=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(Pf(c),Pf(h)):c},[]);return o.length>0?o:e&&e.length&&bt(a)&&bt(i)?e.slice(a,i+1):[]};function IX(t){return t==="number"?[0,"auto"]:void 0}var DA=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,c=Kw(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var x;if(o.dataKey&&!o.allowDuplicatedCategory){var y=m===void 0?c:m;x=pb(y,o.dataKey,a)}else x=m&&m[n]||c[n];return x?[].concat(Pf(d),[yQ(h,x)]):d},[])},BU=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=n_e(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=nbe(o,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,x=DA(e,r,p,m),y=a_e(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:x,activeCoordinate:y}}return null},i_e=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,x=e.stackOffset,y=hQ(p,i);return n.reduce(function(w,N){var S,E=N.type.defaultProps!==void 0?Xe(Xe({},N.type.defaultProps),N.props):N.props,C=E.type,M=E.dataKey,L=E.allowDataOverflow,I=E.allowDuplicatedCategory,R=E.scale,A=E.ticks,T=E.includeHidden,k=E[o];if(w[k])return w;var F=Kw(e.data,{graphicalItems:a.filter(function(ie){var ne,ve=o in ie.props?ie.props[o]:(ne=ie.type.defaultProps)===null||ne===void 0?void 0:ne[o];return ve===k}),dataStartIndex:d,dataEndIndex:h}),O=F.length,$,B,G;ONe(E.domain,L,C)&&($=WT(E.domain,null,L),y&&(C==="number"||R!=="auto")&&(G=$m(F,M,"category")));var Q=IX(C);if(!$||$.length===0){var H,K=(H=E.domain)!==null&&H!==void 0?H:Q;if(M){if($=$m(F,M,C),C==="category"&&y){var te=Xhe($);I&&te?(B=$,$=e2(0,O)):I||($=B$(K,$,N).reduce(function(ie,ne){return ie.indexOf(ne)>=0?ie:[].concat(Pf(ie),[ne])},[]))}else if(C==="category")I?$=$.filter(function(ie){return ie!==""&&!xr(ie)}):$=B$(K,$,N).reduce(function(ie,ne){return ie.indexOf(ne)>=0||ne===""||xr(ne)?ie:[].concat(Pf(ie),[ne])},[]);else if(C==="number"){var ae=lbe(F,a.filter(function(ie){var ne,ve,pe=o in ie.props?ie.props[o]:(ne=ie.type.defaultProps)===null||ne===void 0?void 0:ne[o],Be="hide"in ie.props?ie.props.hide:(ve=ie.type.defaultProps)===null||ve===void 0?void 0:ve.hide;return pe===k&&(T||!Be)}),M,i,p);ae&&($=ae)}y&&(C==="number"||R!=="auto")&&(G=$m(F,M,"category"))}else y?$=e2(0,O):c&&c[k]&&c[k].hasStack&&C==="number"?$=x==="expand"?[0,1]:xQ(c[k].stackGroups,d,h):$=dQ(F,a.filter(function(ie){var ne=o in ie.props?ie.props[o]:ie.type.defaultProps[o],ve="hide"in ie.props?ie.props.hide:ie.type.defaultProps.hide;return ne===k&&(T||!ve)}),C,p,!0);if(C==="number")$=IA(m,$,k,i,A),K&&($=WT(K,$,L));else if(C==="category"&&K){var ce=K,X=$.every(function(ie){return ce.indexOf(ie)>=0});X&&($=ce)}}return Xe(Xe({},w),{},er({},k,Xe(Xe({},E),{},{axisType:i,domain:$,categoricalDomain:G,duplicateDomain:B,originalDomain:(S=E.domain)!==null&&S!==void 0?S:Q,isCategorical:y,layout:p})))},{})},s_e=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,x=Kw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),y=x.length,w=hQ(p,i),N=-1;return n.reduce(function(S,E){var C=E.type.defaultProps!==void 0?Xe(Xe({},E.type.defaultProps),E.props):E.props,M=C[o],L=IX("number");if(!S[M]){N++;var I;return w?I=e2(0,y):c&&c[M]&&c[M].hasStack?(I=xQ(c[M].stackGroups,d,h),I=IA(m,I,M,i)):(I=WT(L,dQ(x,n.filter(function(R){var A,T,k=o in R.props?R.props[o]:(A=R.type.defaultProps)===null||A===void 0?void 0:A[o],F="hide"in R.props?R.props.hide:(T=R.type.defaultProps)===null||T===void 0?void 0:T.hide;return k===M&&!F}),"number",p),a.defaultProps.allowDataOverflow),I=IA(m,I,M,i)),Xe(Xe({},S),{},er({},M,Xe(Xe({axisType:i},a.defaultProps),{},{hide:!0,orientation:io(t_e,"".concat(i,".").concat(N%2),null),domain:I,originalDomain:L,isCategorical:w,layout:p})))}return S},{})},o_e=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),x=Ds(p,i),y={};return x&&x.length?y=i_e(e,{axes:x,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(y=s_e(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),y},l_e=function(e){var r=gu(e),n=Zl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:c7(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:zb(r,n)}},$U=function(e){var r=e.children,n=e.defaultShowTooltip,a=Es(r,jf),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},c_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=nc(r&&r.type);return n&&n.indexOf("Bar")>=0})},zU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},u_e=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,x=n.margin||{},y=Es(m,jf),w=Es(m,$h),N=Object.keys(d).reduce(function(I,R){var A=d[R],T=A.orientation;return!A.mirror&&!A.hide?Xe(Xe({},I),{},er({},T,I[T]+A.width)):I},{left:x.left||0,right:x.right||0}),S=Object.keys(o).reduce(function(I,R){var A=o[R],T=A.orientation;return!A.mirror&&!A.hide?Xe(Xe({},I),{},er({},T,io(I,"".concat(T))+A.height)):I},{top:x.top||0,bottom:x.bottom||0}),E=Xe(Xe({},S),N),C=E.bottom;y&&(E.bottom+=y.props.height||jf.defaultProps.height),w&&r&&(E=sbe(E,a,n,r));var M=h-E.left-E.right,L=p-E.top-E.bottom;return Xe(Xe({brushBottom:C},E),{},{width:Math.max(M,0),height:Math.max(L,0)})},d_e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},RX=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,x=function(E,C){var M=C.graphicalItems,L=C.stackGroups,I=C.offset,R=C.updateId,A=C.dataStartIndex,T=C.dataEndIndex,k=E.barSize,F=E.layout,O=E.barGap,$=E.barCategoryGap,B=E.maxBarSize,G=zU(F),Q=G.numericAxisName,H=G.cateAxisName,K=c_e(M),te=[];return M.forEach(function(ae,ce){var X=Kw(E.data,{graphicalItems:[ae],dataStartIndex:A,dataEndIndex:T}),ie=ae.type.defaultProps!==void 0?Xe(Xe({},ae.type.defaultProps),ae.props):ae.props,ne=ie.dataKey,ve=ie.maxBarSize,pe=ie["".concat(Q,"Id")],Be=ie["".concat(H,"Id")],Ge={},He=d.reduce(function(wt,zt){var de=C["".concat(zt.axisType,"Map")],Fe=ie["".concat(zt.axisType,"Id")];de&&de[Fe]||zt.axisType==="zAxis"||p0();var jt=de[Fe];return Xe(Xe({},wt),{},er(er({},zt.axisType,jt),"".concat(zt.axisType,"Ticks"),Zl(jt)))},Ge),Ne=He[H],We=He["".concat(H,"Ticks")],Y=L&&L[pe]&&L[pe].hasStack&&xbe(ae,L[pe].stackGroups),re=nc(ae.type).indexOf("Bar")>=0,be=zb(Ne,We),we=[],Ye=K&&abe({barSize:k,stackGroups:L,totalSize:d_e(He,H)});if(re){var nt,Ot,Ee=xr(ve)?B:ve,ut=(nt=(Ot=zb(Ne,We,!0))!==null&&Ot!==void 0?Ot:Ee)!==null&&nt!==void 0?nt:0;we=ibe({barGap:O,barCategoryGap:$,bandSize:ut!==be?ut:be,sizeList:Ye[Be],maxBarSize:Ee}),ut!==be&&(we=we.map(function(wt){return Xe(Xe({},wt),{},{position:Xe(Xe({},wt.position),{},{offset:wt.position.offset-ut/2})})}))}var Nt=ae&&ae.type&&ae.type.getComposedData;Nt&&te.push({props:Xe(Xe({},Nt(Xe(Xe({},He),{},{displayedData:X,props:E,dataKey:ne,item:ae,bandSize:be,barPosition:we,offset:I,stackedData:Y,layout:F,dataStartIndex:A,dataEndIndex:T}))),{},er(er(er({key:ae.key||"item-".concat(ce)},Q,He[Q]),H,He[H]),"animationId",R)),childIndex:cfe(ae,E.children),item:ae})}),te},y=function(E,C){var M=E.props,L=E.dataStartIndex,I=E.dataEndIndex,R=E.updateId;if(!JD({props:M}))return null;var A=M.children,T=M.layout,k=M.stackOffset,F=M.data,O=M.reverseStackOrder,$=zU(T),B=$.numericAxisName,G=$.cateAxisName,Q=Ds(A,n),H=mbe(F,Q,"".concat(B,"Id"),"".concat(G,"Id"),k,O),K=d.reduce(function(ie,ne){var ve="".concat(ne.axisType,"Map");return Xe(Xe({},ie),{},er({},ve,o_e(M,Xe(Xe({},ne),{},{graphicalItems:Q,stackGroups:ne.axisType===B&&H,dataStartIndex:L,dataEndIndex:I}))))},{}),te=u_e(Xe(Xe({},K),{},{props:M,graphicalItems:Q}),C==null?void 0:C.legendBBox);Object.keys(K).forEach(function(ie){K[ie]=p(M,K[ie],te,ie.replace("Map",""),r)});var ae=K["".concat(G,"Map")],ce=l_e(ae),X=x(M,Xe(Xe({},K),{},{dataStartIndex:L,dataEndIndex:I,updateId:R,graphicalItems:Q,stackGroups:H,offset:te}));return Xe(Xe({formattedGraphicalItems:X,graphicalItems:Q,offset:te,stackGroups:H},ce),K)},w=(function(S){function E(C){var M,L,I;return qNe(this,E),I=WNe(this,E,[C]),er(I,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),er(I,"accessibilityManager",new CNe),er(I,"handleLegendBBoxUpdate",function(R){if(R){var A=I.state,T=A.dataStartIndex,k=A.dataEndIndex,F=A.updateId;I.setState(Xe({legendBBox:R},y({props:I.props,dataStartIndex:T,dataEndIndex:k,updateId:F},Xe(Xe({},I.state),{},{legendBBox:R}))))}}),er(I,"handleReceiveSyncEvent",function(R,A,T){if(I.props.syncId===R){if(T===I.eventEmitterSymbol&&typeof I.props.syncMethod!="function")return;I.applySyncEvent(A)}}),er(I,"handleBrushChange",function(R){var A=R.startIndex,T=R.endIndex;if(A!==I.state.dataStartIndex||T!==I.state.dataEndIndex){var k=I.state.updateId;I.setState(function(){return Xe({dataStartIndex:A,dataEndIndex:T},y({props:I.props,dataStartIndex:A,dataEndIndex:T,updateId:k},I.state))}),I.triggerSyncEvent({dataStartIndex:A,dataEndIndex:T})}}),er(I,"handleMouseEnter",function(R){var A=I.getMouseInfo(R);if(A){var T=Xe(Xe({},A),{},{isTooltipActive:!0});I.setState(T),I.triggerSyncEvent(T);var k=I.props.onMouseEnter;dr(k)&&k(T,R)}}),er(I,"triggeredAfterMouseMove",function(R){var A=I.getMouseInfo(R),T=A?Xe(Xe({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};I.setState(T),I.triggerSyncEvent(T);var k=I.props.onMouseMove;dr(k)&&k(T,R)}),er(I,"handleItemMouseEnter",function(R){I.setState(function(){return{isTooltipActive:!0,activeItem:R,activePayload:R.tooltipPayload,activeCoordinate:R.tooltipPosition||{x:R.cx,y:R.cy}}})}),er(I,"handleItemMouseLeave",function(){I.setState(function(){return{isTooltipActive:!1}})}),er(I,"handleMouseMove",function(R){R.persist(),I.throttleTriggeredAfterMouseMove(R)}),er(I,"handleMouseLeave",function(R){I.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};I.setState(A),I.triggerSyncEvent(A);var T=I.props.onMouseLeave;dr(T)&&T(A,R)}),er(I,"handleOuterEvent",function(R){var A=lfe(R),T=io(I.props,"".concat(A));if(A&&dr(T)){var k,F;/.*touch.*/i.test(A)?F=I.getMouseInfo(R.changedTouches[0]):F=I.getMouseInfo(R),T((k=F)!==null&&k!==void 0?k:{},R)}}),er(I,"handleClick",function(R){var A=I.getMouseInfo(R);if(A){var T=Xe(Xe({},A),{},{isTooltipActive:!0});I.setState(T),I.triggerSyncEvent(T);var k=I.props.onClick;dr(k)&&k(T,R)}}),er(I,"handleMouseDown",function(R){var A=I.props.onMouseDown;if(dr(A)){var T=I.getMouseInfo(R);A(T,R)}}),er(I,"handleMouseUp",function(R){var A=I.props.onMouseUp;if(dr(A)){var T=I.getMouseInfo(R);A(T,R)}}),er(I,"handleTouchMove",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&I.throttleTriggeredAfterMouseMove(R.changedTouches[0])}),er(I,"handleTouchStart",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&I.handleMouseDown(R.changedTouches[0])}),er(I,"handleTouchEnd",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&I.handleMouseUp(R.changedTouches[0])}),er(I,"handleDoubleClick",function(R){var A=I.props.onDoubleClick;if(dr(A)){var T=I.getMouseInfo(R);A(T,R)}}),er(I,"handleContextMenu",function(R){var A=I.props.onContextMenu;if(dr(A)){var T=I.getMouseInfo(R);A(T,R)}}),er(I,"triggerSyncEvent",function(R){I.props.syncId!==void 0&&Q_.emit(X_,I.props.syncId,R,I.eventEmitterSymbol)}),er(I,"applySyncEvent",function(R){var A=I.props,T=A.layout,k=A.syncMethod,F=I.state.updateId,O=R.dataStartIndex,$=R.dataEndIndex;if(R.dataStartIndex!==void 0||R.dataEndIndex!==void 0)I.setState(Xe({dataStartIndex:O,dataEndIndex:$},y({props:I.props,dataStartIndex:O,dataEndIndex:$,updateId:F},I.state)));else if(R.activeTooltipIndex!==void 0){var B=R.chartX,G=R.chartY,Q=R.activeTooltipIndex,H=I.state,K=H.offset,te=H.tooltipTicks;if(!K)return;if(typeof k=="function")Q=k(te,R);else if(k==="value"){Q=-1;for(var ae=0;ae<te.length;ae++)if(te[ae].value===R.activeLabel){Q=ae;break}}var ce=Xe(Xe({},K),{},{x:K.left,y:K.top}),X=Math.min(B,ce.x+ce.width),ie=Math.min(G,ce.y+ce.height),ne=te[Q]&&te[Q].value,ve=DA(I.state,I.props.data,Q),pe=te[Q]?{x:T==="horizontal"?te[Q].coordinate:X,y:T==="horizontal"?ie:te[Q].coordinate}:OX;I.setState(Xe(Xe({},R),{},{activeLabel:ne,activeCoordinate:pe,activePayload:ve,activeTooltipIndex:Q}))}else I.setState(R)}),er(I,"renderCursor",function(R){var A,T=I.state,k=T.isTooltipActive,F=T.activeCoordinate,O=T.activePayload,$=T.offset,B=T.activeTooltipIndex,G=T.tooltipAxisBandSize,Q=I.getTooltipEventType(),H=(A=R.props.active)!==null&&A!==void 0?A:k,K=I.props.layout,te=R.key||"_recharts-cursor";return se.createElement(LNe,{key:te,activeCoordinate:F,activePayload:O,activeTooltipIndex:B,chartName:r,element:R,isActive:H,layout:K,offset:$,tooltipAxisBandSize:G,tooltipEventType:Q})}),er(I,"renderPolarAxis",function(R,A,T){var k=io(R,"type.axisType"),F=io(I.state,"".concat(k,"Map")),O=R.type.defaultProps,$=O!==void 0?Xe(Xe({},O),R.props):R.props,B=F&&F[$["".concat(k,"Id")]];return j.cloneElement(R,Xe(Xe({},B),{},{className:wr(k,B.className),key:R.key||"".concat(A,"-").concat(T),ticks:Zl(B,!0)}))}),er(I,"renderPolarGrid",function(R){var A=R.props,T=A.radialLines,k=A.polarAngles,F=A.polarRadius,O=I.state,$=O.radiusAxisMap,B=O.angleAxisMap,G=gu($),Q=gu(B),H=Q.cx,K=Q.cy,te=Q.innerRadius,ae=Q.outerRadius;return j.cloneElement(R,{polarAngles:Array.isArray(k)?k:Zl(Q,!0).map(function(ce){return ce.coordinate}),polarRadius:Array.isArray(F)?F:Zl(G,!0).map(function(ce){return ce.coordinate}),cx:H,cy:K,innerRadius:te,outerRadius:ae,key:R.key||"polar-grid",radialLines:T})}),er(I,"renderLegend",function(){var R=I.state.formattedGraphicalItems,A=I.props,T=A.children,k=A.width,F=A.height,O=I.props.margin||{},$=k-(O.left||0)-(O.right||0),B=cQ({children:T,formattedGraphicalItems:R,legendWidth:$,legendContent:h});if(!B)return null;var G=B.item,Q=PU(B,BNe);return j.cloneElement(G,Xe(Xe({},Q),{},{chartWidth:k,chartHeight:F,margin:O,onBBoxUpdate:I.handleLegendBBoxUpdate}))}),er(I,"renderTooltip",function(){var R,A=I.props,T=A.children,k=A.accessibilityLayer,F=Es(T,Ko);if(!F)return null;var O=I.state,$=O.isTooltipActive,B=O.activeCoordinate,G=O.activePayload,Q=O.activeLabel,H=O.offset,K=(R=F.props.active)!==null&&R!==void 0?R:$;return j.cloneElement(F,{viewBox:Xe(Xe({},H),{},{x:H.left,y:H.top}),active:K,label:Q,payload:K?G:[],coordinate:B,accessibilityLayer:k})}),er(I,"renderBrush",function(R){var A=I.props,T=A.margin,k=A.data,F=I.state,O=F.offset,$=F.dataStartIndex,B=F.dataEndIndex,G=F.updateId;return j.cloneElement(R,{key:R.key||"_recharts-brush",onChange:Gy(I.handleBrushChange,R.props.onChange),data:k,x:bt(R.props.x)?R.props.x:O.left,y:bt(R.props.y)?R.props.y:O.top+O.height+O.brushBottom-(T.bottom||0),width:bt(R.props.width)?R.props.width:O.width,startIndex:$,endIndex:B,updateId:"brush-".concat(G)})}),er(I,"renderReferenceElement",function(R,A,T){if(!R)return null;var k=I,F=k.clipPathId,O=I.state,$=O.xAxisMap,B=O.yAxisMap,G=O.offset,Q=R.type.defaultProps||{},H=R.props,K=H.xAxisId,te=K===void 0?Q.xAxisId:K,ae=H.yAxisId,ce=ae===void 0?Q.yAxisId:ae;return j.cloneElement(R,{key:R.key||"".concat(A,"-").concat(T),xAxis:$[te],yAxis:B[ce],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:F})}),er(I,"renderActivePoints",function(R){var A=R.item,T=R.activePoint,k=R.basePoint,F=R.childIndex,O=R.isRange,$=[],B=A.props.key,G=A.item.type.defaultProps!==void 0?Xe(Xe({},A.item.type.defaultProps),A.item.props):A.item.props,Q=G.activeDot,H=G.dataKey,K=Xe(Xe({index:F,dataKey:H,cx:T.x,cy:T.y,r:4,fill:P7(A.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},Xt(Q,!1)),mb(Q));return $.push(E.renderActiveDot(Q,K,"".concat(B,"-activePoint-").concat(F))),k?$.push(E.renderActiveDot(Q,Xe(Xe({},K),{},{cx:k.x,cy:k.y}),"".concat(B,"-basePoint-").concat(F))):O&&$.push(null),$}),er(I,"renderGraphicChild",function(R,A,T){var k=I.filterFormatItem(R,A,T);if(!k)return null;var F=I.getTooltipEventType(),O=I.state,$=O.isTooltipActive,B=O.tooltipAxis,G=O.activeTooltipIndex,Q=O.activeLabel,H=I.props.children,K=Es(H,Ko),te=k.props,ae=te.points,ce=te.isRange,X=te.baseLine,ie=k.item.type.defaultProps!==void 0?Xe(Xe({},k.item.type.defaultProps),k.item.props):k.item.props,ne=ie.activeDot,ve=ie.hide,pe=ie.activeBar,Be=ie.activeShape,Ge=!!(!ve&&$&&K&&(ne||pe||Be)),He={};F!=="axis"&&K&&K.props.trigger==="click"?He={onClick:Gy(I.handleItemMouseEnter,R.props.onClick)}:F!=="axis"&&(He={onMouseLeave:Gy(I.handleItemMouseLeave,R.props.onMouseLeave),onMouseEnter:Gy(I.handleItemMouseEnter,R.props.onMouseEnter)});var Ne=j.cloneElement(R,Xe(Xe({},k.props),He));function We(zt){return typeof B.dataKey=="function"?B.dataKey(zt.payload):null}if(Ge)if(G>=0){var Y,re;if(B.dataKey&&!B.allowDuplicatedCategory){var be=typeof B.dataKey=="function"?We:"payload.".concat(B.dataKey.toString());Y=pb(ae,be,Q),re=ce&&X&&pb(X,be,Q)}else Y=ae==null?void 0:ae[G],re=ce&&X&&X[G];if(Be||pe){var we=R.props.activeIndex!==void 0?R.props.activeIndex:G;return[j.cloneElement(R,Xe(Xe(Xe({},k.props),He),{},{activeIndex:we})),null,null]}if(!xr(Y))return[Ne].concat(Pf(I.renderActivePoints({item:k,activePoint:Y,basePoint:re,childIndex:G,isRange:ce})))}else{var Ye,nt=(Ye=I.getItemByXY(I.state.activeCoordinate))!==null&&Ye!==void 0?Ye:{graphicalItem:Ne},Ot=nt.graphicalItem,Ee=Ot.item,ut=Ee===void 0?R:Ee,Nt=Ot.childIndex,wt=Xe(Xe(Xe({},k.props),He),{},{activeIndex:Nt});return[j.cloneElement(ut,wt),null,null]}return ce?[Ne,null,null]:[Ne,null]}),er(I,"renderCustomized",function(R,A,T){return j.cloneElement(R,Xe(Xe({key:"recharts-customized-".concat(T)},I.props),I.state))}),er(I,"renderMap",{CartesianGrid:{handler:Yy,once:!0},ReferenceArea:{handler:I.renderReferenceElement},ReferenceLine:{handler:Yy},ReferenceDot:{handler:I.renderReferenceElement},XAxis:{handler:Yy},YAxis:{handler:Yy},Brush:{handler:I.renderBrush,once:!0},Bar:{handler:I.renderGraphicChild},Line:{handler:I.renderGraphicChild},Area:{handler:I.renderGraphicChild},Radar:{handler:I.renderGraphicChild},RadialBar:{handler:I.renderGraphicChild},Scatter:{handler:I.renderGraphicChild},Pie:{handler:I.renderGraphicChild},Funnel:{handler:I.renderGraphicChild},Tooltip:{handler:I.renderCursor,once:!0},PolarGrid:{handler:I.renderPolarGrid,once:!0},PolarAngleAxis:{handler:I.renderPolarAxis},PolarRadiusAxis:{handler:I.renderPolarAxis},Customized:{handler:I.renderCustomized}}),I.clipPathId="".concat((M=C.id)!==null&&M!==void 0?M:Rx("recharts"),"-clip"),I.throttleTriggeredAfterMouseMove=lK(I.triggeredAfterMouseMove,(L=C.throttleDelay)!==null&&L!==void 0?L:1e3/60),I.state={},I}return XNe(E,S),GNe(E,[{key:"componentDidMount",value:function(){var M,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(M=this.props.margin.left)!==null&&M!==void 0?M:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var M=this.props,L=M.children,I=M.data,R=M.height,A=M.layout,T=Es(L,Ko);if(T){var k=T.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,O=DA(this.state,I,k,F),$=this.state.tooltipTicks[k].coordinate,B=(this.state.offset.top+R)/2,G=A==="horizontal",Q=G?{x:$,y:B}:{y:$,x:B},H=this.state.formattedGraphicalItems.find(function(te){var ae=te.item;return ae.type.name==="Scatter"});H&&(Q=Xe(Xe({},Q),H.props.points[k].tooltipPosition),O=H.props.points[k].tooltipPayload);var K={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:F,activePayload:O,activeCoordinate:Q};this.setState(K),this.renderCursor(T),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(M,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==M.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==M.margin){var I,R;this.accessibilityManager.setDetails({offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(R=this.props.margin.top)!==null&&R!==void 0?R:0}})}return null}},{key:"componentDidUpdate",value:function(M){mT([Es(M.children,Ko)],[Es(this.props.children,Ko)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var M=Es(this.props.children,Ko);if(M&&typeof M.props.shared=="boolean"){var L=M.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(M){if(!this.container)return null;var L=this.container,I=L.getBoundingClientRect(),R=Qge(I),A={chartX:Math.round(M.pageX-R.left),chartY:Math.round(M.pageY-R.top)},T=I.width/L.offsetWidth||1,k=this.inRange(A.chartX,A.chartY,T);if(!k)return null;var F=this.state,O=F.xAxisMap,$=F.yAxisMap,B=this.getTooltipEventType(),G=BU(this.state,this.props.data,this.props.layout,k);if(B!=="axis"&&O&&$){var Q=gu(O).scale,H=gu($).scale,K=Q&&Q.invert?Q.invert(A.chartX):null,te=H&&H.invert?H.invert(A.chartY):null;return Xe(Xe({},A),{},{xValue:K,yValue:te},G)}return G?Xe(Xe({},A),G):null}},{key:"inRange",value:function(M,L){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=this.props.layout,A=M/I,T=L/I;if(R==="horizontal"||R==="vertical"){var k=this.state.offset,F=A>=k.left&&A<=k.left+k.width&&T>=k.top&&T<=k.top+k.height;return F?{x:A,y:T}:null}var O=this.state,$=O.angleAxisMap,B=O.radiusAxisMap;if($&&B){var G=gu($);return U$({x:A,y:T},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var M=this.props.children,L=this.getTooltipEventType(),I=Es(M,Ko),R={};I&&L==="axis"&&(I.props.trigger==="click"?R={onClick:this.handleClick}:R={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=mb(this.props,this.handleOuterEvent);return Xe(Xe({},A),R)}},{key:"addListener",value:function(){Q_.on(X_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Q_.removeListener(X_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(M,L,I){for(var R=this.state.formattedGraphicalItems,A=0,T=R.length;A<T;A++){var k=R[A];if(k.item===M||k.props.key===M.key||L===nc(k.item.type)&&I===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var M=this.clipPathId,L=this.state.offset,I=L.left,R=L.top,A=L.height,T=L.width;return se.createElement("defs",null,se.createElement("clipPath",{id:M},se.createElement("rect",{x:I,y:R,height:A,width:T})))}},{key:"getXScales",value:function(){var M=this.state.xAxisMap;return M?Object.entries(M).reduce(function(L,I){var R=DU(I,2),A=R[0],T=R[1];return Xe(Xe({},L),{},er({},A,T.scale))},{}):null}},{key:"getYScales",value:function(){var M=this.state.yAxisMap;return M?Object.entries(M).reduce(function(L,I){var R=DU(I,2),A=R[0],T=R[1];return Xe(Xe({},L),{},er({},A,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(M){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[M])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(M){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[M])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(M){var L=this.state,I=L.formattedGraphicalItems,R=L.activeItem;if(I&&I.length)for(var A=0,T=I.length;A<T;A++){var k=I[A],F=k.props,O=k.item,$=O.type.defaultProps!==void 0?Xe(Xe({},O.type.defaultProps),O.props):O.props,B=nc(O.type);if(B==="Bar"){var G=(F.data||[]).find(function(te){return g4e(M,te)});if(G)return{graphicalItem:k,payload:G}}else if(B==="RadialBar"){var Q=(F.data||[]).find(function(te){return U$(M,te)});if(Q)return{graphicalItem:k,payload:Q}}else if(Bw(k,R)||$w(k,R)||Kg(k,R)){var H=Q5e({graphicalItem:k,activeTooltipItem:R,itemData:$.data}),K=$.activeIndex===void 0?H:$.activeIndex;return{graphicalItem:Xe(Xe({},k),{},{childIndex:K}),payload:Kg(k,R)?$.data[H]:k.props.data[H]}}}return null}},{key:"render",value:function(){var M=this;if(!JD(this))return null;var L=this.props,I=L.children,R=L.className,A=L.width,T=L.height,k=L.style,F=L.compact,O=L.title,$=L.desc,B=PU(L,$Ne),G=Xt(B,!1);if(F)return se.createElement(xU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(xT,Eh({},G,{width:A,height:T,title:O,desc:$}),this.renderClipPath(),eP(I,this.renderMap)));if(this.props.accessibilityLayer){var Q,H;G.tabIndex=(Q=this.props.tabIndex)!==null&&Q!==void 0?Q:0,G.role=(H=this.props.role)!==null&&H!==void 0?H:"application",G.onKeyDown=function(te){M.accessibilityManager.keyboardEvent(te)},G.onFocus=function(){M.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return se.createElement(xU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",Eh({className:wr("recharts-wrapper",R),style:Xe({position:"relative",cursor:"default",width:A,height:T},k)},K,{ref:function(ae){M.container=ae}}),se.createElement(xT,Eh({},G,{width:A,height:T,title:O,desc:$,style:r_e}),this.renderClipPath(),eP(I,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(j.Component);er(w,"displayName",r),er(w,"defaultProps",Xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),er(w,"getDerivedStateFromProps",function(S,E){var C=S.dataKey,M=S.data,L=S.children,I=S.width,R=S.height,A=S.layout,T=S.stackOffset,k=S.margin,F=E.dataStartIndex,O=E.dataEndIndex;if(E.updateId===void 0){var $=$U(S);return Xe(Xe(Xe({},$),{},{updateId:0},y(Xe(Xe({props:S},$),{},{updateId:0}),E)),{},{prevDataKey:C,prevData:M,prevWidth:I,prevHeight:R,prevLayout:A,prevStackOffset:T,prevMargin:k,prevChildren:L})}if(C!==E.prevDataKey||M!==E.prevData||I!==E.prevWidth||R!==E.prevHeight||A!==E.prevLayout||T!==E.prevStackOffset||!Bh(k,E.prevMargin)){var B=$U(S),G={chartX:E.chartX,chartY:E.chartY,isTooltipActive:E.isTooltipActive},Q=Xe(Xe({},BU(E,M,A)),{},{updateId:E.updateId+1}),H=Xe(Xe(Xe({},B),G),Q);return Xe(Xe(Xe({},H),y(Xe({props:S},H),E)),{},{prevDataKey:C,prevData:M,prevWidth:I,prevHeight:R,prevLayout:A,prevStackOffset:T,prevMargin:k,prevChildren:L})}if(!mT(L,E.prevChildren)){var K,te,ae,ce,X=Es(L,jf),ie=X&&(K=(te=X.props)===null||te===void 0?void 0:te.startIndex)!==null&&K!==void 0?K:F,ne=X&&(ae=(ce=X.props)===null||ce===void 0?void 0:ce.endIndex)!==null&&ae!==void 0?ae:O,ve=ie!==F||ne!==O,pe=!xr(M),Be=pe&&!ve?E.updateId:E.updateId+1;return Xe(Xe({updateId:Be},y(Xe(Xe({props:S},E),{},{updateId:Be,dataStartIndex:ie,dataEndIndex:ne}),E)),{},{prevChildren:L,dataStartIndex:ie,dataEndIndex:ne})}return null}),er(w,"renderActiveDot",function(S,E,C){var M;return j.isValidElement(S)?M=j.cloneElement(S,E):dr(S)?M=S(E):M=se.createElement(Dw,E),se.createElement(Qr,{className:"recharts-active-dot",key:C},M)});var N=j.forwardRef(function(E,C){return se.createElement(w,Eh({},E,{ref:C}))});return N.displayName=w.displayName,N},h_e=RX({chartName:"RadarChart",GraphicalChild:Fx,axisComponents:[{axisType:"angleAxis",AxisComp:Vx},{axisType:"radiusAxis",AxisComp:Ux}],formatAxisMap:Ebe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),f_e=RX({chartName:"ScatterChart",GraphicalChild:Hx,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Gw},{axisType:"yAxis",AxisComp:Ww},{axisType:"zAxis",AxisComp:Hw}],formatAxisMap:iSe});const Qw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function np(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function W7(t){return"nodeType"in t}function qi(t){var e,r;return t?np(t)?t:W7(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function K7(t){const{Document:e}=qi(t);return t instanceof e}function Gx(t){return np(t)?!1:t instanceof qi(t).HTMLElement}function MX(t){return t instanceof qi(t).SVGElement}function ap(t){return t?np(t)?t.document:W7(t)?K7(t)?t:Gx(t)||MX(t)?t.ownerDocument:document:document:document}const vc=Qw?j.useLayoutEffect:j.useEffect;function Xw(t){const e=j.useRef(t);return vc(()=>{e.current=t}),j.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function p_e(){const t=j.useRef(null),e=j.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=j.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function tx(t,e){e===void 0&&(e=[t]);const r=j.useRef(t);return vc(()=>{r.current!==t&&(r.current=t)},e),r}function Wx(t,e){const r=j.useRef();return j.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function m2(t){const e=Xw(t),r=j.useRef(null),n=j.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function g2(t){const e=j.useRef();return j.useEffect(()=>{e.current=t},[t]),e.current}let J_={};function Yw(t,e){return j.useMemo(()=>{if(e)return e;const r=J_[t]==null?0:J_[t]+1;return J_[t]=r,t+"-"+r},[t,e])}function DX(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const c=Object.entries(o);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const Vh=DX(1),x2=DX(-1);function m_e(t){return"clientX"in t&&"clientY"in t}function Q7(t){if(!t)return!1;const{KeyboardEvent:e}=qi(t.target);return e&&t instanceof e}function g_e(t){if(!t)return!1;const{TouchEvent:e}=qi(t.target);return e&&t instanceof e}function rx(t){if(g_e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return m_e(t)?{x:t.clientX,y:t.clientY}:null}const nx=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[nx.Translate.toString(t),nx.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),UU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function x_e(t){return t.matches(UU)?t:t.querySelector(UU)}const y_e={display:"none"};function v_e(t){let{id:e,value:r}=t;return se.createElement("div",{id:e,style:y_e},r)}function b_e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return se.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function w_e(){const[t,e]=j.useState("");return{announce:j.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const PX=j.createContext(null);function S_e(t){const e=j.useContext(PX);j.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function N_e(){const[t]=j.useState(()=>new Set),e=j.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[j.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[t]),e]}const __e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},j_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function T_e(t){let{announcements:e=j_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=__e}=t;const{announce:i,announcement:o}=w_e(),c=Yw("DndLiveRegion"),[d,h]=j.useState(!1);if(j.useEffect(()=>{h(!0)},[]),S_e(j.useMemo(()=>({onDragStart(m){let{active:x}=m;i(e.onDragStart({active:x}))},onDragMove(m){let{active:x,over:y}=m;e.onDragMove&&i(e.onDragMove({active:x,over:y}))},onDragOver(m){let{active:x,over:y}=m;i(e.onDragOver({active:x,over:y}))},onDragEnd(m){let{active:x,over:y}=m;i(e.onDragEnd({active:x,over:y}))},onDragCancel(m){let{active:x,over:y}=m;i(e.onDragCancel({active:x,over:y}))}}),[i,e])),!d)return null;const p=se.createElement(se.Fragment,null,se.createElement(v_e,{id:n,value:a.draggable}),se.createElement(b_e,{id:c,announcement:o}));return r?yu.createPortal(p,r):p}var Ha;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ha||(Ha={}));function y2(){}function VU(t,e){return j.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function A_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return j.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Mo=Object.freeze({x:0,y:0});function E_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function k_e(t,e){const r=rx(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function C_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function O_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function I_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function FU(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const R_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=FU(e,e.left,e.top),i=[];for(const o of n){const{id:c}=o,d=r.get(c);if(d){const h=E_e(FU(d),a);i.push({id:c,data:{droppableContainer:o,value:h}})}}return i.sort(C_e)};function M_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=o*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const D_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,c=r.get(o);if(c){const d=M_e(c,e);d>0&&a.push({id:o,data:{droppableContainer:i,value:d}})}}return a.sort(O_e)};function P_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function LX(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Mo}function L_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const B_e=L_e(1);function BX(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function $_e(t,e,r){const n=BX(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:c}=n,d=t.left-o-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const z_e={ignoreTransform:!1};function Kx(t,e){e===void 0&&(e=z_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=qi(t).getComputedStyle(t);h&&(r=$_e(r,h,p))}const{top:n,left:a,width:i,height:o,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:o,bottom:c,right:d}}function qU(t){return Kx(t,{ignoreTransform:!0})}function U_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function V_e(t,e){return e===void 0&&(e=qi(t).getComputedStyle(t)),e.position==="fixed"}function F_e(t,e){e===void 0&&(e=qi(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function X7(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(K7(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Gx(a)||MX(a)||r.includes(a))return r;const i=qi(t).getComputedStyle(a);return a!==t&&F_e(a,i)&&r.push(a),V_e(a,i)?r:n(a.parentNode)}return t?n(t):r}function $X(t){const[e]=X7(t,1);return e??null}function Z_(t){return!Qw||!t?null:np(t)?t:W7(t)?K7(t)||t===ap(t).scrollingElement?window:Gx(t)?t:null:null}function zX(t){return np(t)?t.scrollX:t.scrollLeft}function UX(t){return np(t)?t.scrollY:t.scrollTop}function PA(t){return{x:zX(t),y:UX(t)}}var ai;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ai||(ai={}));function VX(t){return!Qw||!t?!1:t===document.scrollingElement}function FX(t){const e={x:0,y:0},r=VX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const q_e={x:.2,y:.2};function H_e(t,e,r,n,a){let{top:i,left:o,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=q_e);const{isTop:h,isBottom:p,isLeft:m,isRight:x}=FX(t),y={x:0,y:0},w={x:0,y:0},N={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+N.height?(y.y=ai.Backward,w.y=n*Math.abs((e.top+N.height-i)/N.height)):!p&&d>=e.bottom-N.height&&(y.y=ai.Forward,w.y=n*Math.abs((e.bottom-N.height-d)/N.height)),!x&&c>=e.right-N.width?(y.x=ai.Forward,w.x=n*Math.abs((e.right-N.width-c)/N.width)):!m&&o<=e.left+N.width&&(y.x=ai.Backward,w.x=n*Math.abs((e.left+N.width-o)/N.width)),{direction:y,speed:w}}function G_e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function qX(t){return t.reduce((e,r)=>Vh(e,PA(r)),Mo)}function W_e(t){return t.reduce((e,r)=>e+zX(r),0)}function K_e(t){return t.reduce((e,r)=>e+UX(r),0)}function HX(t,e){if(e===void 0&&(e=Kx),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);$X(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Q_e=[["x",["left","right"],W_e],["y",["top","bottom"],K_e]];class Y7{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=X7(r),a=qX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,c]of Q_e)for(const d of o)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Hm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function X_e(t){const{EventTarget:e}=qi(t);return t instanceof e?t:ap(t)}function ej(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var eo;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(eo||(eo={}));function HU(t){t.preventDefault()}function Y_e(t){t.stopPropagation()}var Rn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Rn||(Rn={}));const GX={start:[Rn.Space,Rn.Enter],cancel:[Rn.Esc],end:[Rn.Space,Rn.Enter,Rn.Tab]},J_e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Rn.Right:return{...r,x:r.x+25};case Rn.Left:return{...r,x:r.x-25};case Rn.Down:return{...r,y:r.y+25};case Rn.Up:return{...r,y:r.y-25}}};class WX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Hm(ap(r)),this.windowListeners=new Hm(qi(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(eo.Resize,this.handleCancel),this.windowListeners.add(eo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(eo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&HX(n),r(Mo)}handleKeyDown(e){if(Q7(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=GX,coordinateGetter:o=J_e,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:Mo;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:r,context:n.current,currentCoordinates:p});if(m){const x=x2(m,p),y={x:0,y:0},{scrollableAncestors:w}=n.current;for(const N of w){const S=e.code,{isTop:E,isRight:C,isLeft:M,isBottom:L,maxScroll:I,minScroll:R}=FX(N),A=G_e(N),T={x:Math.min(S===Rn.Right?A.right-A.width/2:A.right,Math.max(S===Rn.Right?A.left:A.left+A.width/2,m.x)),y:Math.min(S===Rn.Down?A.bottom-A.height/2:A.bottom,Math.max(S===Rn.Down?A.top:A.top+A.height/2,m.y))},k=S===Rn.Right&&!C||S===Rn.Left&&!M,F=S===Rn.Down&&!L||S===Rn.Up&&!E;if(k&&T.x!==m.x){const O=N.scrollLeft+x.x,$=S===Rn.Right&&O<=I.x||S===Rn.Left&&O>=R.x;if($&&!x.y){N.scrollTo({left:O,behavior:c});return}$?y.x=N.scrollLeft-O:y.x=S===Rn.Right?N.scrollLeft-I.x:N.scrollLeft-R.x,y.x&&N.scrollBy({left:-y.x,behavior:c});break}else if(F&&T.y!==m.y){const O=N.scrollTop+x.y,$=S===Rn.Down&&O<=I.y||S===Rn.Up&&O>=R.y;if($&&!x.x){N.scrollTo({top:O,behavior:c});return}$?y.y=N.scrollTop-O:y.y=S===Rn.Down?N.scrollTop-I.y:N.scrollTop-R.y,y.y&&N.scrollBy({top:-y.y,behavior:c});break}}this.handleMove(e,Vh(x2(m,this.referenceCoordinates),y))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}WX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=GX,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function GU(t){return!!(t&&"distance"in t)}function WU(t){return!!(t&&"delay"in t)}class J7{constructor(e,r,n){var a;n===void 0&&(n=X_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=ap(o),this.documentListeners=new Hm(this.document),this.listeners=new Hm(n),this.windowListeners=new Hm(qi(o)),this.initialCoordinates=(a=rx(i))!=null?a:Mo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(eo.Resize,this.handleCancel),this.windowListeners.add(eo.DragStart,HU),this.windowListeners.add(eo.VisibilityChange,this.handleCancel),this.windowListeners.add(eo.ContextMenu,HU),this.documentListeners.add(eo.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(WU(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(GU(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(eo.Click,Y_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(eo.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=rx(e))!=null?r:Mo,h=x2(a,d);if(!n&&c){if(GU(c)){if(c.tolerance!=null&&ej(h,c.tolerance))return this.handleCancel();if(ej(h,c.distance))return this.handleStart()}if(WU(c)&&ej(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Rn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Z_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Z7 extends J7{constructor(e){const{event:r}=e,n=ap(r.target);super(e,Z_e,n)}}Z7.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const eje={move:{name:"mousemove"},end:{name:"mouseup"}};var LA;(function(t){t[t.RightClick=2]="RightClick"})(LA||(LA={}));class tje extends J7{constructor(e){super(e,eje,ap(e.event.target))}}tje.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===LA.RightClick?!1:(n==null||n({event:r}),!0)}}];const tj={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class KX extends J7{constructor(e){super(e,tj)}static setup(){return window.addEventListener(tj.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(tj.move.name,e)};function e(){}}}KX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Gm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Gm||(Gm={}));var v2;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(v2||(v2={}));function rje(t){let{acceleration:e,activator:r=Gm.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:c=v2.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:x}=t;const y=aje({delta:m,disabled:!i}),[w,N]=p_e(),S=j.useRef({x:0,y:0}),E=j.useRef({x:0,y:0}),C=j.useMemo(()=>{switch(r){case Gm.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Gm.DraggableRect:return a}},[r,a,d]),M=j.useRef(null),L=j.useCallback(()=>{const R=M.current;if(!R)return;const A=S.current.x*E.current.x,T=S.current.y*E.current.y;R.scrollBy(A,T)},[]),I=j.useMemo(()=>c===v2.TreeOrder?[...h].reverse():h,[c,h]);j.useEffect(()=>{if(!i||!h.length||!C){N();return}for(const R of I){if((n==null?void 0:n(R))===!1)continue;const A=h.indexOf(R),T=p[A];if(!T)continue;const{direction:k,speed:F}=H_e(R,T,C,e,x);for(const O of["x","y"])y[O][k[O]]||(F[O]=0,k[O]=0);if(F.x>0||F.y>0){N(),M.current=R,w(L,o),S.current=F,E.current=k;return}}S.current={x:0,y:0},E.current={x:0,y:0},N()},[e,L,n,N,i,o,JSON.stringify(C),JSON.stringify(y),w,h,I,p,JSON.stringify(x)])}const nje={x:{[ai.Backward]:!1,[ai.Forward]:!1},y:{[ai.Backward]:!1,[ai.Forward]:!1}};function aje(t){let{delta:e,disabled:r}=t;const n=g2(e);return Wx(a=>{if(r||!n||!a)return nje;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[ai.Backward]:a.x[ai.Backward]||i.x===-1,[ai.Forward]:a.x[ai.Forward]||i.x===1},y:{[ai.Backward]:a.y[ai.Backward]||i.y===-1,[ai.Forward]:a.y[ai.Forward]||i.y===1}}},[r,e,n])}function ije(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return Wx(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function sje(t,e){return j.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var ax;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ax||(ax={}));var BA;(function(t){t.Optimized="optimized"})(BA||(BA={}));const KU=new Map;function oje(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=j.useState(null),{frequency:c,measure:d,strategy:h}=a,p=j.useRef(t),m=S(),x=tx(m),y=j.useCallback(function(E){E===void 0&&(E=[]),!x.current&&o(C=>C===null?E:C.concat(E.filter(M=>!C.includes(M))))},[x]),w=j.useRef(null),N=Wx(E=>{if(m&&!r)return KU;if(!E||E===KU||p.current!==t||i!=null){const C=new Map;for(let M of t){if(!M)continue;if(i&&i.length>0&&!i.includes(M.id)&&M.rect.current){C.set(M.id,M.rect.current);continue}const L=M.node.current,I=L?new Y7(d(L),L):null;M.rect.current=I,I&&C.set(M.id,I)}return C}return E},[t,i,r,m,d]);return j.useEffect(()=>{p.current=t},[t]),j.useEffect(()=>{m||y()},[r,m]),j.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),j.useEffect(()=>{m||typeof c!="number"||w.current!==null||(w.current=setTimeout(()=>{y(),w.current=null},c))},[c,m,y,...n]),{droppableRects:N,measureDroppableContainers:y,measuringScheduled:i!=null};function S(){switch(h){case ax.Always:return!1;case ax.BeforeDragging:return r;default:return!r}}}function ek(t,e){return Wx(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function lje(t,e){return ek(t,e)}function cje(t){let{callback:e,disabled:r}=t;const n=Xw(e),a=j.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return j.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Jw(t){let{callback:e,disabled:r}=t;const n=Xw(e),a=j.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return j.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function uje(t){return new Y7(Kx(t),t)}function QU(t,e,r){e===void 0&&(e=uje);const[n,a]=j.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const o=cje({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=Jw({callback:i});return vc(()=>{i(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),n}function dje(t){const e=ek(t);return LX(t,e)}const XU=[];function hje(t){const e=j.useRef(t),r=Wx(n=>t?n&&n!==XU&&t&&e.current&&t.parentNode===e.current.parentNode?n:X7(t):XU,[t]);return j.useEffect(()=>{e.current=t},[t]),r}function fje(t){const[e,r]=j.useState(null),n=j.useRef(t),a=j.useCallback(i=>{const o=Z_(i.target);o&&r(c=>c?(c.set(o,PA(o)),new Map(c)):null)},[]);return j.useEffect(()=>{const i=n.current;if(t!==i){o(i);const c=t.map(d=>{const h=Z_(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,PA(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(i)};function o(c){c.forEach(d=>{const h=Z_(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),j.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Vh(i,o),Mo):qX(t):Mo,[t,e])}function YU(t,e){e===void 0&&(e=[]);const r=j.useRef(null);return j.useEffect(()=>{r.current=null},e),j.useEffect(()=>{const n=t!==Mo;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?x2(t,r.current):Mo}function pje(t){j.useEffect(()=>{if(!Qw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function mje(t,e){return j.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function QX(t){return j.useMemo(()=>t?U_e(t):null,[t])}const JU=[];function gje(t,e){e===void 0&&(e=Kx);const[r]=t,n=QX(r?qi(r):null),[a,i]=j.useState(JU);function o(){i(()=>t.length?t.map(d=>VX(d)?n:new Y7(e(d),d)):JU)}const c=Jw({callback:o});return vc(()=>{c==null||c.disconnect(),o(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function XX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Gx(e)?e:t}function xje(t){let{measure:e}=t;const[r,n]=j.useState(null),a=j.useCallback(h=>{for(const{target:p}of h)if(Gx(p)){n(m=>{const x=e(p);return m?{...m,width:x.width,height:x.height}:x});break}},[e]),i=Jw({callback:a}),o=j.useCallback(h=>{const p=XX(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=m2(o);return j.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const yje=[{sensor:Z7,options:{}},{sensor:WX,options:{}}],vje={current:{}},jv={draggable:{measure:qU},droppable:{measure:qU,strategy:ax.WhileDragging,frequency:BA.Optimized},dragOverlay:{measure:Kx}};class Wm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const bje={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:y2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:jv,measureDroppableContainers:y2,windowRect:null,measuringScheduled:!1},YX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:y2,draggableNodes:new Map,over:null,measureDroppableContainers:y2},Qx=j.createContext(YX),JX=j.createContext(bje);function wje(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wm}}}function Sje(t,e){switch(e.type){case Ha.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ha.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ha.DragEnd:case Ha.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ha.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Wm(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Ha.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new Wm(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case Ha.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Wm(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function Nje(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=j.useContext(Qx),i=g2(n),o=g2(r==null?void 0:r.id);return j.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!Q7(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=x_e(p);if(m){m.focus();break}}})}},[n,e,a,o,i]),null}function ZX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function _je(t){return j.useMemo(()=>({draggable:{...jv.draggable,...t==null?void 0:t.draggable},droppable:{...jv.droppable,...t==null?void 0:t.droppable},dragOverlay:{...jv.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function jje(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=j.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;vc(()=>{if(!o&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=LX(p,n);if(o||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=$X(h);x&&x.scrollBy({top:m.y,left:m.x})}},[e,o,c,n,r])}const Zw=j.createContext({...Mo,scaleX:1,scaleY:1});var cu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(cu||(cu={}));const Tje=j.memo(function(e){var r,n,a,i;let{id:o,accessibility:c,autoScroll:d=!0,children:h,sensors:p=yje,collisionDetection:m=D_e,measuring:x,modifiers:y,...w}=e;const N=j.useReducer(Sje,void 0,wje),[S,E]=N,[C,M]=N_e(),[L,I]=j.useState(cu.Uninitialized),R=L===cu.Initialized,{draggable:{active:A,nodes:T,translate:k},droppable:{containers:F}}=S,O=A!=null?T.get(A):null,$=j.useRef({initial:null,translated:null}),B=j.useMemo(()=>{var Qt;return A!=null?{id:A,data:(Qt=O==null?void 0:O.data)!=null?Qt:vje,rect:$}:null},[A,O]),G=j.useRef(null),[Q,H]=j.useState(null),[K,te]=j.useState(null),ae=tx(w,Object.values(w)),ce=Yw("DndDescribedBy",o),X=j.useMemo(()=>F.getEnabled(),[F]),ie=_je(x),{droppableRects:ne,measureDroppableContainers:ve,measuringScheduled:pe}=oje(X,{dragging:R,dependencies:[k.x,k.y],config:ie.droppable}),Be=ije(T,A),Ge=j.useMemo(()=>K?rx(K):null,[K]),He=Wt(),Ne=lje(Be,ie.draggable.measure);jje({activeNode:A!=null?T.get(A):null,config:He.layoutShiftCompensation,initialRect:Ne,measure:ie.draggable.measure});const We=QU(Be,ie.draggable.measure,Ne),Y=QU(Be?Be.parentElement:null),re=j.useRef({activatorEvent:null,active:null,activeNode:Be,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=F.getNodeFor((r=re.current.over)==null?void 0:r.id),we=xje({measure:ie.dragOverlay.measure}),Ye=(n=we.nodeRef.current)!=null?n:Be,nt=R?(a=we.rect)!=null?a:We:null,Ot=!!(we.nodeRef.current&&we.rect),Ee=dje(Ot?null:We),ut=QX(Ye?qi(Ye):null),Nt=hje(R?be??Be:null),wt=gje(Nt),zt=ZX(y,{transform:{x:k.x-Ee.x,y:k.y-Ee.y,scaleX:1,scaleY:1},activatorEvent:K,active:B,activeNodeRect:We,containerNodeRect:Y,draggingNodeRect:nt,over:re.current.over,overlayNodeRect:we.rect,scrollableAncestors:Nt,scrollableAncestorRects:wt,windowRect:ut}),de=Ge?Vh(Ge,k):null,Fe=fje(Nt),jt=YU(Fe),qe=YU(Fe,[We]),Ze=Vh(zt,jt),At=nt?B_e(nt,zt):null,St=B&&At?m({active:B,collisionRect:At,droppableRects:ne,droppableContainers:X,pointerCoordinates:de}):null,lr=I_e(St,"id"),[ye,it]=j.useState(null),xt=Ot?zt:Vh(zt,qe),Dt=P_e(xt,(i=ye==null?void 0:ye.rect)!=null?i:null,We),Pt=j.useRef(null),rt=j.useCallback((Qt,Gt)=>{let{sensor:Et,options:Hr}=Gt;if(G.current==null)return;const un=T.get(G.current);if(!un)return;const gn=Qt.nativeEvent,Dr=new Et({active:G.current,activeNode:un,event:gn,options:Hr,context:re,onAbort(gr){if(!T.get(gr))return;const{onDragAbort:xn}=ae.current,Ln={id:gr};xn==null||xn(Ln),C({type:"onDragAbort",event:Ln})},onPending(gr,ha,xn,Ln){if(!T.get(gr))return;const{onDragPending:yn}=ae.current,Pr={id:gr,constraint:ha,initialCoordinates:xn,offset:Ln};yn==null||yn(Pr),C({type:"onDragPending",event:Pr})},onStart(gr){const ha=G.current;if(ha==null)return;const xn=T.get(ha);if(!xn)return;const{onDragStart:Ln}=ae.current,ci={activatorEvent:gn,active:{id:ha,data:xn.data,rect:$}};yu.unstable_batchedUpdates(()=>{Ln==null||Ln(ci),I(cu.Initializing),E({type:Ha.DragStart,initialCoordinates:gr,active:ha}),C({type:"onDragStart",event:ci}),H(Pt.current),te(gn)})},onMove(gr){E({type:Ha.DragMove,coordinates:gr})},onEnd:kn(Ha.DragEnd),onCancel:kn(Ha.DragCancel)});Pt.current=Dr;function kn(gr){return async function(){const{active:xn,collisions:Ln,over:ci,scrollAdjustedTranslate:yn}=re.current;let Pr=null;if(xn&&yn){const{cancelDrop:Ya}=ae.current;Pr={activatorEvent:gn,active:xn,collisions:Ln,delta:yn,over:ci},gr===Ha.DragEnd&&typeof Ya=="function"&&await Promise.resolve(Ya(Pr))&&(gr=Ha.DragCancel)}G.current=null,yu.unstable_batchedUpdates(()=>{E({type:gr}),I(cu.Uninitialized),it(null),H(null),te(null),Pt.current=null;const Ya=gr===Ha.DragEnd?"onDragEnd":"onDragCancel";if(Pr){const aa=ae.current[Ya];aa==null||aa(Pr),C({type:Ya,event:Pr})}})}}},[T]),Le=j.useCallback((Qt,Gt)=>(Et,Hr)=>{const un=Et.nativeEvent,gn=T.get(Hr);if(G.current!==null||!gn||un.dndKit||un.defaultPrevented)return;const Dr={active:gn};Qt(Et,Gt.options,Dr)===!0&&(un.dndKit={capturedBy:Gt.sensor},G.current=Hr,rt(Et,Gt))},[T,rt]),et=sje(p,Le);pje(p),vc(()=>{We&&L===cu.Initializing&&I(cu.Initialized)},[We,L]),j.useEffect(()=>{const{onDragMove:Qt}=ae.current,{active:Gt,activatorEvent:Et,collisions:Hr,over:un}=re.current;if(!Gt||!Et)return;const gn={active:Gt,activatorEvent:Et,collisions:Hr,delta:{x:Ze.x,y:Ze.y},over:un};yu.unstable_batchedUpdates(()=>{Qt==null||Qt(gn),C({type:"onDragMove",event:gn})})},[Ze.x,Ze.y]),j.useEffect(()=>{const{active:Qt,activatorEvent:Gt,collisions:Et,droppableContainers:Hr,scrollAdjustedTranslate:un}=re.current;if(!Qt||G.current==null||!Gt||!un)return;const{onDragOver:gn}=ae.current,Dr=Hr.get(lr),kn=Dr&&Dr.rect.current?{id:Dr.id,rect:Dr.rect.current,data:Dr.data,disabled:Dr.disabled}:null,gr={active:Qt,activatorEvent:Gt,collisions:Et,delta:{x:un.x,y:un.y},over:kn};yu.unstable_batchedUpdates(()=>{it(kn),gn==null||gn(gr),C({type:"onDragOver",event:gr})})},[lr]),vc(()=>{re.current={activatorEvent:K,active:B,activeNode:Be,collisionRect:At,collisions:St,droppableRects:ne,draggableNodes:T,draggingNode:Ye,draggingNodeRect:nt,droppableContainers:F,over:ye,scrollableAncestors:Nt,scrollAdjustedTranslate:Ze},$.current={initial:nt,translated:At}},[B,Be,St,At,T,Ye,nt,ne,F,ye,Nt,Ze]),rje({...He,delta:k,draggingRect:At,pointerCoordinates:de,scrollableAncestors:Nt,scrollableAncestorRects:wt});const lt=j.useMemo(()=>({active:B,activeNode:Be,activeNodeRect:We,activatorEvent:K,collisions:St,containerNodeRect:Y,dragOverlay:we,draggableNodes:T,droppableContainers:F,droppableRects:ne,over:ye,measureDroppableContainers:ve,scrollableAncestors:Nt,scrollableAncestorRects:wt,measuringConfiguration:ie,measuringScheduled:pe,windowRect:ut}),[B,Be,We,K,St,Y,we,T,F,ne,ye,ve,Nt,wt,ie,pe,ut]),Ft=j.useMemo(()=>({activatorEvent:K,activators:et,active:B,activeNodeRect:We,ariaDescribedById:{draggable:ce},dispatch:E,draggableNodes:T,over:ye,measureDroppableContainers:ve}),[K,et,B,We,E,ce,T,ye,ve]);return se.createElement(PX.Provider,{value:M},se.createElement(Qx.Provider,{value:Ft},se.createElement(JX.Provider,{value:lt},se.createElement(Zw.Provider,{value:Dt},h)),se.createElement(Nje,{disabled:(c==null?void 0:c.restoreFocus)===!1})),se.createElement(T_e,{...c,hiddenTextDescribedById:ce}));function Wt(){const Qt=(Q==null?void 0:Q.autoScrollEnabled)===!1,Gt=typeof d=="object"?d.enabled===!1:d===!1,Et=R&&!Qt&&!Gt;return typeof d=="object"?{...d,enabled:Et}:{enabled:Et}}}),Aje=j.createContext(null),ZU="button",Eje="Draggable";function eY(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Yw(Eje),{activators:o,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:x}=j.useContext(Qx),{role:y=ZU,roleDescription:w="draggable",tabIndex:N=0}=a??{},S=(d==null?void 0:d.id)===e,E=j.useContext(S?Zw:Aje),[C,M]=m2(),[L,I]=m2(),R=mje(o,e),A=tx(r);vc(()=>(m.set(e,{id:e,key:i,node:C,activatorNode:L,data:A}),()=>{const k=m.get(e);k&&k.key===i&&m.delete(e)}),[m,e]);const T=j.useMemo(()=>({role:y,tabIndex:N,"aria-disabled":n,"aria-pressed":S&&y===ZU?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[n,y,N,S,w,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:T,isDragging:S,listeners:n?void 0:R,node:C,over:x,setNodeRef:M,setActivatorNodeRef:I,transform:E}}function kje(){return j.useContext(JX)}const Cje="Droppable",Oje={timeout:25};function tk(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Yw(Cje),{active:o,dispatch:c,over:d,measureDroppableContainers:h}=j.useContext(Qx),p=j.useRef({disabled:r}),m=j.useRef(!1),x=j.useRef(null),y=j.useRef(null),{disabled:w,updateMeasurementsFor:N,timeout:S}={...Oje,...a},E=tx(N??n),C=j.useCallback(()=>{if(!m.current){m.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),y.current=null},S)},[S]),M=Jw({callback:C,disabled:w||!o}),L=j.useCallback((T,k)=>{M&&(k&&(M.unobserve(k),m.current=!1),T&&M.observe(T))},[M]),[I,R]=m2(L),A=tx(e);return j.useEffect(()=>{!M||!I.current||(M.disconnect(),m.current=!1,M.observe(I.current))},[I,M]),j.useEffect(()=>(c({type:Ha.RegisterDroppable,element:{id:n,key:i,disabled:r,node:I,rect:x,data:A}}),()=>c({type:Ha.UnregisterDroppable,key:i,id:n})),[n]),j.useEffect(()=>{r!==p.current.disabled&&(c({type:Ha.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:o,rect:x,isOver:(d==null?void 0:d.id)===n,node:I,over:d,setNodeRef:R}}function Ije(t){let{animation:e,children:r}=t;const[n,a]=j.useState(null),[i,o]=j.useState(null),c=g2(r);return!r&&!n&&c&&a(c),vc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),se.createElement(se.Fragment,null,r,n?j.cloneElement(n,{ref:o}):null)}const Rje={x:0,y:0,scaleX:1,scaleY:1};function Mje(t){let{children:e}=t;return se.createElement(Qx.Provider,{value:YX},se.createElement(Zw.Provider,{value:Rje},e))}const Dje={position:"fixed",touchAction:"none"},Pje=t=>Q7(t)?"transform 250ms ease":void 0,Lje=j.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:c,style:d,transform:h,transition:p=Pje}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},x={...Dje,width:c.width,height:c.height,top:c.top,left:c.left,transform:nx.Transform.toString(m),transformOrigin:a&&n?k_e(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return se.createElement(r,{className:o,style:x,ref:e},i)}),Bje=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);o!=null&&o.active&&r.node.classList.remove(o.active)}},$je=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:nx.Transform.toString(e)},{transform:nx.Transform.toString(r)}]},zje={duration:250,easing:"ease",keyframes:$je,sideEffects:Bje({styles:{active:{opacity:"0"}}})};function Uje(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return Xw((i,o)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=XX(o);if(!h)return;const{transform:p}=qi(o).getComputedStyle(o),m=BX(p);if(!m)return;const x=typeof e=="function"?e:Vje(e);return HX(d,a.draggable.measure),x({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function Vje(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...zje,...t};return i=>{let{active:o,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},m={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},x={x:d.x-p.x,y:d.y-p.y,...m},y=a({...h,active:o,dragOverlay:c,transform:{initial:d,final:x}}),[w]=y,N=y[y.length-1];if(JSON.stringify(w)===JSON.stringify(N))return;const S=n==null?void 0:n({active:o,dragOverlay:c,...h}),E=c.node.animate(y,{duration:e,easing:r,fill:"forwards"});return new Promise(C=>{E.onfinish=()=>{S==null||S(),C()}})}}let eV=0;function Fje(t){return j.useMemo(()=>{if(t!=null)return eV++,eV},[t])}const qje=se.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:x,containerNodeRect:y,draggableNodes:w,droppableContainers:N,dragOverlay:S,over:E,measuringConfiguration:C,scrollableAncestors:M,scrollableAncestorRects:L,windowRect:I}=kje(),R=j.useContext(Zw),A=Fje(m==null?void 0:m.id),T=ZX(o,{activatorEvent:p,active:m,activeNodeRect:x,containerNodeRect:y,draggingNodeRect:S.rect,over:E,overlayNodeRect:S.rect,scrollableAncestors:M,scrollableAncestorRects:L,transform:R,windowRect:I}),k=ek(x),F=Uje({config:n,draggableNodes:w,droppableContainers:N,measuringConfiguration:C}),O=k?S.setRef:void 0;return se.createElement(Mje,null,se.createElement(Ije,{animation:F},m&&A?se.createElement(Lje,{key:A,id:m.id,ref:O,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:k,style:{zIndex:h,...a},transform:T},r):null))});function tV(t,e=800){const[r,n]=j.useState(t),a=j.useRef(t),i=j.useRef(0);return j.useEffect(()=>{const o=a.current,c=t;if(a.current=t,o===c)return;const d=performance.now(),h=c-o,p=m=>{const x=m-d,y=Math.min(x/e,1),w=1-Math.pow(1-y,3);n(Math.round(o+h*w)),y<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const tY=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],rY=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],Hje=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],rV={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},xh=t=>t?rV[t.rarity]||rV.COMMON:null,Gje=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},ix=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,o=(e==null?void 0:e.bodyType)||"A",c=o==="B",d=o==="C",h=tY[(e==null?void 0:e.skinTone)??0],p=rY[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,x=h+"99",y=t==null?void 0:t.HEAD,w=t==null?void 0:t.CHEST,N=t==null?void 0:t.HANDS,S=t==null?void 0:t.FEET,E=t==null?void 0:t.BELT,C=t==null?void 0:t.AMULET,M=j.useMemo(()=>[y,w,N,S,E,C].filter(Boolean).length,[y,w,N,S,E,C]),L=j.useMemo(()=>[y,w,N,S,E,C].some(T=>(T==null?void 0:T.rarity)==="UNIQUE"),[y,w,N,S,E,C]),I=Math.min(1,.2+M*.13),R=c?23:21,A=j.useMemo(()=>Gje(m,R),[m,R]);return s.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[s.jsxs("defs",{children:[s.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[s.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),s.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),s.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[s.jsx("stop",{offset:"0%",stopColor:h}),s.jsx("stop",{offset:"100%",stopColor:x})]}),s.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:I}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:I*.3}),s.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),s.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:p}),s.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),s.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&s.jsxs("g",{filter:"url(#av-bloom)",children:[s.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),s.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),S?(()=>{const T=xh(S);return s.jsxs("g",{filter:T.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:T.primary,stroke:T.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:T.primary,stroke:T.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:T.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),s.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:T.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),T.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:T.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:T.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),s.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),s.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),s.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),s.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),s.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),w&&(()=>{const T=xh(w);return s.jsxs("g",{filter:T.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:T.primary,fillOpacity:"0.3",stroke:T.primary,strokeWidth:"1",strokeOpacity:"0.6"}),s.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:T.primary,fillOpacity:"0.5",stroke:T.particle,strokeWidth:"0.5"}),s.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:T.primary,fillOpacity:"0.5",stroke:T.particle,strokeWidth:"0.5"}),s.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:T.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:T.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),s.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:T.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),s.jsx("circle",{cx:"100",cy:"120",r:"2",fill:T.particle,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),T.intensity>=.7&&s.jsxs("g",{children:[s.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:T.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:T.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),E?(()=>{const T=xh(E);return s.jsxs("g",{children:[s.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:T.primary,fillOpacity:"0.55",stroke:T.primary,strokeWidth:"0.8"}),s.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:T.particle,fillOpacity:"0.4"}),s.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:T.primary,fillOpacity:"0.3",stroke:T.particle,strokeWidth:"0.3"}),s.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:T.primary,fillOpacity:"0.3",stroke:T.particle,strokeWidth:"0.3"})]})})():s.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),s.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),N?(()=>{const T=xh(N);return s.jsxs("g",{filter:T.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:T.primary,fillOpacity:"0.5",stroke:T.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:T.primary,fillOpacity:"0.5",stroke:T.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:T.particle,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:T.particle,strokeWidth:"1",strokeOpacity:"0.5"}),T.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"50",cy:"168",r:"2",fill:T.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"150",cy:"168",r:"2",fill:T.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),s.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),M>0&&s.jsxs(s.Fragment,{children:[s.jsx("g",{filter:"url(#av-bloom)",children:s.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:s.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),s.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:I*.7,children:s.jsx("animate",{attributeName:"fillOpacity",values:`${I*.7};${I*.3};${I*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),M>=3&&s.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),s.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),C&&(()=>{const T=xh(C);return s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:T.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),s.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:T.primary,stroke:T.particle,strokeWidth:"0.8",children:s.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"97",r:"2",fill:T.particle,children:s.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),s.jsxs("g",{children:[A.back&&s.jsx("path",{d:A.back,fill:"url(#av-hair)",opacity:"0.8"}),s.jsx("ellipse",{cx:"100",cy:"50",rx:R,ry:"28",fill:"url(#av-face)",stroke:x,strokeWidth:"0.5"}),s.jsx("ellipse",{cx:100-R-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsx("ellipse",{cx:100+R+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsxs("g",{children:[s.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),s.jsx("path",{d:A.main,fill:"url(#av-hair)"}),A.accent&&s.jsx("path",{d:A.accent,fill:"url(#av-hair)",opacity:"0.9"}),y&&(()=>{const T=xh(y),k=y.visualId||"";return s.jsx("g",{filter:T.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:k.includes("helm")?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:`M${100-R-2} 28 Q100 10 ${100+R+2} 28 L${100+R+4} 62 Q100 72 ${100-R-4} 62 Z`,fill:T.primary,fillOpacity:"0.55",stroke:T.primary,strokeWidth:"1.2"}),s.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):k.includes("visor")?s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:T.primary,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:T.primary,strokeWidth:"1.5"}),s.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:T.primary,strokeWidth:"1.5"})]}):s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:T.primary,fillOpacity:"0.7",stroke:T.particle,strokeWidth:"0.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:T.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:T.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:T.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:T.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:T.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&s.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((T,k)=>s.jsx("polygon",{points:`${100+T},16 ${97+T},22 ${103+T},22`,fill:"#fbbf24",fillOpacity:"0.6",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+k*.2}s`,repeatCount:"indefinite"})},k))]}),L&&s.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((T,k)=>{const F=T*Math.PI/180,O=100+Math.cos(F)*50,$=145+Math.sin(F)*75;return s.jsxs("circle",{cx:O,cy:$,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-18};${$}`,dur:`${2+k*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+k*.3}s`,repeatCount:"indefinite"})]},k)})}),r>=5&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),s.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((T,k)=>{const F=k*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),O=100+Math.cos(F)*(38+k*3),$=140+Math.sin(F)*(55+k*2),B=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return s.jsxs("circle",{cx:O,cy:$,r:"1",fill:B,fillOpacity:"0.35",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-12};${$}`,dur:`${2+k*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+k*.4}s`,repeatCount:"indefinite"})]},k)})}),n&&a&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((T,k)=>{const F=60+Math.random()*80,O=20+Math.random()*260;return s.jsxs("circle",{cx:F,cy:O,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[s.jsx("animate",{attributeName:"cy",values:`${O};${O-25};${O}`,dur:`${3+k*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+k*.5}s`,repeatCount:"indefinite"})]},`c-${k}`)})})]})]})},Wje={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},Kje=({unlockedAchievements:t,achievementProgress:e})=>{const r=j.useMemo(()=>j0e(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=zE.filter(o=>!o.isSecret).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(cl,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),s.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(o=>{const c=r.filter(h=>h.category===o);if(c.length===0)return null;const d=Wje[o];return s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[s.jsx("span",{children:d.icon})," ",d.label]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,x=Math.min(100,m/h.condition.target*100);return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[s.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&s.jsx(sf,{className:"w-3 h-3 text-gray-600"})]}),s.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&s.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${x}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&s.jsxs("div",{className:"text-right shrink-0",children:[s.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&s.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},o)})]})},Qje={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},Xje=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=j.useState(t||null),[i,o]=j.useState(null),c=Ma(),{confirm:d}=Po(),h=!!t,p=n||"THEORIST",m=nW.filter(w=>w.specialization===p),x=[1,2,3,4],y=async w=>{if(!i){if(!h){const N=By[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${N} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${N}`,cancelLabel:"Go Back",variant:"warning"}))return}o(w);try{await Ae.unlockSkill(w,p),qn.skillUnlock(),c.success("Skill unlocked!")}catch(N){c.error(N instanceof Error?N.message:"Failed to unlock")}o(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[s.jsx(Gn,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[s.jsx(Ls,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),s.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",s.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[s.jsx($r,{className:"w-4 h-4 text-green-400"}),s.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",s.jsxs("span",{className:"font-bold text-white",children:[By[t].icon," ",By[t].name]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(By).map(([w,N])=>{const S=p===w,E=h&&t!==w;return s.jsxs("button",{onClick:()=>!E&&a(w),disabled:E,className:`p-3 rounded-xl border text-left transition-all ${S?`border-white/30 bg-gradient-to-br ${Qje[w]} bg-opacity-10`:E?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:N.icon}),s.jsx("span",{className:"font-bold text-sm text-white",children:N.name}),E&&s.jsx(sf,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:N.description}),!h&&S&&s.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},w)})}),s.jsx("div",{className:"space-y-4",children:x.map(w=>{const N=m.filter(S=>S.tier===w);return s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",w]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(S=>{const E=r.includes(S.id),C=!E&&PM(S.id,r)&&e>=S.cost,M=PM(S.id,r);return s.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${E?"border-green-500/30 bg-green-500/10":C?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>C&&y(S.id),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-sm",children:S.icon}),s.jsx("span",{className:"text-xs font-bold text-white truncate",children:S.name}),E&&s.jsx($r,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!E&&!M&&s.jsx(sf,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400",children:S.description}),!E&&s.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",S.cost," SP"]}),i===S.id&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},S.id)})})]},w)})})]})},rj=25,Jy=A0e,Yje=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=j.useState(!1),[i,o]=j.useState(0),[c,d]=j.useState(null),h=j.useRef(null),p=Ma(),m=new Date().toISOString().split("T")[0],x=e===m,y=!x&&t>=rj&&!n,w=async()=>{if(y){a(!0),d(null),qn.wheelSpin();try{const E=await Ae.spinFortuneWheel(r),C=Jy.findIndex(I=>I.id===E.prizeId),M=360/Jy.length,L=360*5+(360-C*M-M/2);o(I=>I+L),setTimeout(()=>{qn.wheelPrize(),d(E.rewardDescription),a(!1),E.prizeType!=="NOTHING"?p.success(`You won: ${E.rewardDescription}!`):p.info(E.rewardDescription)},4e3)}catch(E){a(!1),p.error(E instanceof Error?E.message:"Spin failed")}}},N=360/Jy.length,S=140;return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",rj," Flux for a daily spin"]}),s.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[s.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),s.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:s.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Jy.map((E,C)=>{const M=(C*N-90)*(Math.PI/180),L=((C+1)*N-90)*(Math.PI/180),I=S*Math.cos(M),R=S*Math.sin(M),A=S*Math.cos(L),T=S*Math.sin(L),k=N>180?1:0,F=((C+.5)*N-90)*(Math.PI/180),O=S*.65*Math.cos(F),$=S*.65*Math.sin(F),B=(C+.5)*N;return s.jsxs("g",{children:[s.jsx("path",{d:`M0,0 L${I},${R} A${S},${S} 0 ${k},1 ${A},${T} Z`,fill:E.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),s.jsx("text",{x:O,y:$,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${B}, ${O}, ${$})`,children:E.label})]},E.id)}),s.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),s.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&s.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[s.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),s.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),s.jsx("button",{onClick:w,disabled:!y,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${y?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":x?"Come back tomorrow!":`Spin (${rj} Flux)`})]})};function Jje(t,e){const[r,n]=j.useState(e);return j.useEffect(()=>{const a=Ae.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function Zje(t){const[e,r]=j.useState([]);return j.useEffect(()=>{const n=Ae.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const eTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var w;const i=Jje(t.id,t.maxHp),o=Zje(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=o.reduce((N,S)=>(N[S.userId]||(N[S.userId]={name:S.userName,total:0}),N[S.userId].total+=S.damage,N),{}),m=Object.entries(p).sort(([,N],[,S])=>S.total-N.total).slice(0,5),x=((w=p[e])==null?void 0:w.total)||0,y=(a==null?void 0:a.bossId)===t.id;return s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[y&&s.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(oo,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),y&&a&&s.jsx("div",{className:"text-center animate-bounce",children:s.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),x>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx(cs,{className:"w-3 h-3"}),"Your total damage: ",s.jsx("span",{className:"text-white font-bold",children:x})]}),m.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[s.jsx(us,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([N,S],E)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:`${N===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",E+1," ",S.name]}),s.jsxs("span",{className:"text-red-400 font-mono",children:[S.total," dmg"]})]},N))]}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Gn,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),s.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[s.jsx(Cu,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),s.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},tTe=({userId:t,userName:e,classType:r})=>{const[n,a]=j.useState([]),[i,o]=j.useState(null),[c,d]=j.useState(null),h=Ma();j.useEffect(()=>{let m;try{m=Ae.subscribeToBossEncounters(x=>{const y=x.filter(w=>!w.classType||w.classType===r||w.classType==="GLOBAL");a(y)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){o(m);try{const x=await Ae.dealBossDamage(m,e,r||"");if(qn.bossHit(),d({bossId:m,damage:x.damageDealt,isCrit:x.isCrit}),setTimeout(()=>d(null),2e3),x.bossDefeated)qn.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const y=x.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${x.damageDealt} damage!${y} (+${x.xpEarned} XP)`)}}catch(x){h.error(x instanceof Error?x.message:"Attack failed")}o(null)}};return n.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[s.jsx(Yle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>s.jsx(eTe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},rTe=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:o,bossHpPercent:c,isCrit:d,healAmount:h,shieldBlocked:p})=>{const[m,x]=j.useState(!1),[y,w]=j.useState(!1),[N,S]=j.useState(null),[E,C]=j.useState(!1),[M,L]=j.useState(null),[I,R]=j.useState(!1),[A,T]=j.useState([]),[k,F]=j.useState(!1),O=(n==null?void 0:n.bossType)||"BRUTE",$=(n==null?void 0:n.hue)??0,B=(G,Q,H)=>{const K=G==="right"?75:25,te=Array.from({length:H},(ae,ce)=>({id:Date.now()+ce,x:K+(Math.random()-.5)*20,y:30+(Math.random()-.5)*15,color:Q,px:(Math.random()-.5)*60,py:-(Math.random()*40+10)}));T(ae=>[...ae,...te]),setTimeout(()=>T(ae=>ae.filter(ce=>!te.find(X=>X.id===ce.id))),1e3)};return j.useEffect(()=>{if(a==="player-attack"&&i){x(!0),S({value:i,side:"right",isCrit:d}),B("right",d?"#fbbf24":"#f59e0b",d?12:6),d&&(C(!0),F(!0),setTimeout(()=>C(!1),400),setTimeout(()=>F(!1),400));const G=setTimeout(()=>x(!1),500),Q=setTimeout(()=>S(null),1200);return h&&h>0&&setTimeout(()=>{L(h),setTimeout(()=>L(null),1200)},400),()=>{clearTimeout(G),clearTimeout(Q)}}else if(a==="boss-attack"){if(p){R(!0),B("left","#22d3ee",6),setTimeout(()=>R(!1),800);return}if(i&&i>0){w(!0),F(!0),B("left","#ef4444",8),S({value:i,side:"left"}),setTimeout(()=>F(!1),300);const G=setTimeout(()=>w(!1),500),Q=setTimeout(()=>S(null),1200);return()=>{clearTimeout(G),clearTimeout(Q)}}}},[a,i,d,h,p]),s.jsxs("div",{className:`relative w-full h-48 flex items-end justify-between px-4 overflow-hidden select-none ${k?"animate-[battleShake_0.3s_ease-in-out]":""}`,children:[E&&s.jsx("div",{className:"absolute inset-0 bg-amber-400/20 animate-[critFlash_0.4s_ease-out_forwards] z-10 pointer-events-none"}),I&&s.jsx("div",{className:"absolute left-10 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:s.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-cyan-400/60 bg-cyan-400/10 animate-[shieldPulse_0.8s_ease-out_forwards] flex items-center justify-center",children:s.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-cyan-400 fill-current",children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})})}),A.map(G=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full pointer-events-none animate-[particleBurst_1s_ease-out_forwards]",style:{left:`${G.x}%`,top:`${G.y}%`,backgroundColor:G.color,"--px":`${G.px}px`,"--py":`${G.py}px`}},G.id)),M!==null&&s.jsxs("div",{className:"absolute left-8 bottom-12 text-base font-black text-emerald-400 animate-[floatUp_1.2s_ease-out_forwards] z-10 pointer-events-none",children:["+",M," HP"]}),s.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),s.jsxs("div",{className:`relative w-24 h-36 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-10 scale-110":""} ${y?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2.5rem) scale(1.1)":void 0},children:[s.jsx(ix,{equipped:e,appearance:t,evolutionLevel:r}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o>50?"bg-emerald-500":o>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o}%`}})})]}),s.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),m&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[s.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),s.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),s.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),s.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),y&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[s.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),s.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),N&&s.jsxs("div",{className:`absolute font-black animate-[floatUp_1.2s_ease-out_forwards] ${N.isCrit?"text-2xl":"text-xl"} ${N.side==="right"?`right-4 ${N.isCrit?"text-yellow-300":"text-amber-400"}`:"left-4 text-red-400"}`,style:{top:"10%"},children:[N.isCrit&&s.jsx("span",{className:"text-[10px] block text-center text-yellow-300 font-black tracking-widest animate-pulse",children:"CRIT!"}),"-",N.value]})]}),s.jsxs("div",{className:`relative w-28 h-40 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-10 scale-110":""} ${m?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2.5rem) scale(1.1)":m?void 0:"scaleX(-1)",...m?{}:{filter:void 0}},children:[s.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:s.jsx(oW,{bossType:O,hue:$})}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),s.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes battleShake {
                    0%, 100% { transform: translate(0, 0); }
                    10% { transform: translate(-3px, -2px); }
                    20% { transform: translate(4px, 1px); }
                    30% { transform: translate(-2px, 3px); }
                    40% { transform: translate(3px, -1px); }
                    50% { transform: translate(-4px, 2px); }
                    60% { transform: translate(2px, -3px); }
                    70% { transform: translate(-1px, 2px); }
                    80% { transform: translate(3px, -2px); }
                    90% { transform: translate(-2px, 1px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
                @keyframes critFlash {
                    0% { opacity: 0.3; }
                    50% { opacity: 0.15; }
                    100% { opacity: 0; }
                }
                @keyframes shieldPulse {
                    0% { transform: scale(0.5); opacity: 0.9; }
                    50% { transform: scale(1.2); opacity: 0.6; }
                    100% { transform: scale(1.5); opacity: 0; }
                }
                @keyframes particleBurst {
                    0% { opacity: 1; transform: translate(0, 0) scale(1); }
                    100% { opacity: 0; transform: translate(var(--px, 20px), var(--py, -30px)) scale(0); }
                }
            `})]})},nTe=({bossId:t,maxEntries:e=5})=>{const[r,n]=j.useState([]),a=j.useRef(null);return j.useEffect(()=>{const i=Ae.subscribeToBossQuizDamageLog(t,o=>{const c=[...o].sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime());n(c.slice(0,e))});return()=>i()},[t,e]),j.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[r.length]),r.length===0?null:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest flex items-center gap-1",children:[s.jsx(Gn,{className:"w-2.5 h-2.5"})," Live Battle Feed"]}),s.jsx("div",{ref:a,className:"max-h-24 overflow-y-auto custom-scrollbar space-y-0.5",children:r.map((i,o)=>s.jsxs("div",{className:`flex items-center gap-2 text-[10px] py-0.5 px-2 rounded-lg ${o===0?"bg-amber-500/5 animate-in fade-in slide-in-from-top-1 duration-300":"opacity-60"}`,children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-purple-500/20 flex items-center justify-center text-[8px] font-bold text-purple-400 shrink-0",children:i.userName.charAt(0)}),s.jsx("span",{className:"text-gray-400 truncate flex-1",children:i.userName}),s.jsxs("span",{className:`font-bold ${i.isCrit?"text-yellow-300":"text-amber-400"}`,children:["-",i.damage,i.isCrit?"!":""]})]},`${i.userId}-${i.timestamp}`))})]})};function aTe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function iTe(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function sTe(t,e){const r=[...t],n=aTe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function oTe(t,e){const[r,n]=j.useState(e);return j.useEffect(()=>{const a=Ae.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const lTe=({modifier:t})=>{const e=pj[t.type];return e?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[s.jsx(Ou,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&s.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},cTe=({quiz:t,progress:e})=>{var m,x;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,o=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=o>0?Math.round(c/o*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx(qH,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),s.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&s.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),s.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((x=t.rewards)==null?void 0:x.flux)||0)*(a||1))," Flux"]}),a&&a>1&&s.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[s.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Qm," attempts and ",Xm," correct answer"]})]}):null,r&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Ph,{className:"w-3 h-3"})," Damage Dealt"]}),s.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(ds,{className:"w-3 h-3"})," Accuracy"]}),s.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",o]})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Gn,{className:"w-3 h-3"})," Critical Hits"]}),s.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Damage Mitigated"]}),s.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(nw,{className:"w-3 h-3"})," Longest Streak"]}),s.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Dh,{className:"w-3 h-3"})," Healing Received"]}),s.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(y=>{const w=r.correctByDifficulty[y]||0,N=r.incorrectByDifficulty[y]||0,S=w+N,E=S>0?Math.round(w/S*100):0;return s.jsxs("div",{className:`rounded-lg p-2 border text-center ${y==="EASY"?"border-green-500/20 bg-green-500/5":y==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[s.jsx("div",{className:`text-[9px] font-bold uppercase ${y==="EASY"?"text-green-400":y==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:y}),s.jsxs("div",{className:"text-sm font-black text-white",children:[E,"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[w,"/",S]})]},y)})})]})},uTe=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o})=>{var He,Ne,We,Y;const c=oTe(t.id,t.maxHp),d=c/t.maxHp*100,h=se.useMemo(()=>sTe(t.questions,iTe(e+t.id)),[t.questions,e,t.id]),[p,m]=j.useState(null),[x,y]=j.useState(!1);j.useEffect(()=>{const re=Ae.subscribeToBossQuizProgress(e,t.id,be=>{m(be),y(!0)});return()=>re()},[e,t.id]);const w=se.useMemo(()=>n?VE(n).maxHp:100,[n]),[N,S]=j.useState(-1),[E,C]=j.useState(-1),[M,L]=j.useState(w),[I,R]=j.useState(!1),[A,T]=j.useState(null),[k,F]=j.useState(null),[O,$]=j.useState(!1),[B,G]=j.useState("idle"),[Q,H]=j.useState(void 0),[K,te]=j.useState(!1),[ae,ce]=j.useState(void 0),[X,ie]=j.useState(!1);j.useEffect(()=>{if(x&&N===-1)if(p){const re=new Set(p.answeredQuestions||[]),be=h.findIndex(nt=>!re.has(nt.id));S(be===-1?h.length:be);const we=p.currentHp,Ye=p.maxHp>0?p.maxHp:w;L(Ye),we>=0?(C(we),we===0&&R(!0)):C(Ye)}else S(0),C(w),L(w)},[x]),j.useEffect(()=>{L(w)},[w]);const ne=M>0?(E===-1?M:E)/M*100:100,ve=N>=0?h[N%h.length]:void 0,pe=N>=h.length,Be=c<=0,Ge=async(re,be,we)=>{O||I||($(!0),T(we),r(re,be,we,{onResult:Ye=>{Ye.playerHp!==void 0&&C(Ye.playerHp),Ye.playerMaxHp!==void 0&&L(Ye.playerMaxHp),Ye.knockedOut&&R(!0),Ye.correct?(H(Ye.damage),te(!!Ye.isCrit),ce(Ye.healAmount),ie(!1),G("player-attack"),setTimeout(()=>G("idle"),800)):Ye.shieldBlocked?(H(0),ie(!0),te(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)):Ye.playerDamage&&Ye.playerDamage>0&&(H(Ye.playerDamage),ie(!1),te(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)),F(Ye),Ye.knockedOut||setTimeout(()=>{S(nt=>nt+1),T(null),F(null)},2e3),$(!1)}}))};return s.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-amber-400",children:t.bossName}),s.jsx("p",{className:"text-sm text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!Be&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((re,be)=>s.jsx(lTe,{modifier:re},be))}),Be?s.jsx(cTe,{quiz:t,progress:p}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:s.jsx(rTe,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o,bossAppearance:t.bossAppearance,attackState:B,damage:Q,playerHpPercent:ne,bossHpPercent:d,isCrit:K,healAmount:ae,shieldBlocked:X})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[s.jsx(Dh,{className:"w-3 h-3"})," Your HP: ",E===-1?M:E]}),s.jsx("span",{className:"text-gray-600",children:M})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${ne>50?"bg-gradient-to-r from-emerald-600 to-green-500":ne>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${ne}%`}})})]}),I?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(so,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):pe?s.jsxs("div",{className:"text-center py-8",children:[s.jsx($r,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):ve?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Question ",N+1," / ",h.length]}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ve.difficulty==="HARD"?"bg-red-500/20 text-red-400":ve.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[ve.difficulty,ve.damageBonus?` (+${ve.damageBonus} dmg)`:""]})]}),s.jsx("p",{className:"text-base text-white font-semibold leading-relaxed",children:ve.stem}),s.jsx("div",{className:"space-y-2.5",children:ve.options.map((re,be)=>{const we=A===be,Ye=k&&we,nt=k==null?void 0:k.correct;return s.jsx("button",{onClick:()=>Ge(t.id,ve.id,be),disabled:O||!!k||I,className:`w-full text-left p-4 rounded-xl border text-base transition-all ${Ye&&nt?"border-green-500/50 bg-green-500/10 text-green-400":Ye&&!nt?"border-red-500/50 bg-red-500/10 text-red-400":we?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm font-mono text-gray-600 w-6",children:[String.fromCharCode(65+be),"."]}),s.jsx("span",{children:re}),Ye&&nt&&s.jsx($r,{className:"w-5 h-5 text-green-400 ml-auto shrink-0"}),Ye&&!nt&&s.jsx(so,{className:"w-5 h-5 text-red-400 ml-auto shrink-0"})]})},be)})}),k&&k.correct&&s.jsxs("div",{className:"text-center space-y-1",children:[s.jsxs("div",{className:"text-base text-amber-400 font-bold animate-bounce",children:[s.jsx(Gn,{className:"w-5 h-5 inline mr-1"}),k.isCrit?"CRITICAL HIT! ":"","-",k.damage," HP to boss!"]}),k.healAmount&&k.healAmount>0&&s.jsxs("div",{className:"text-sm text-emerald-400 font-bold",children:[s.jsx(Dh,{className:"w-4 h-4 inline mr-1"})," +",k.healAmount," HP healed"]})]}),k&&!k.correct&&k.shieldBlocked&&s.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[s.jsx(cs,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),k&&!k.correct&&!k.shieldBlocked&&k.playerDamage&&k.playerDamage>0&&s.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[s.jsx(Dh,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",k.playerDamage," damage!"]})]}):null,p&&!Be&&!I&&!pe&&s.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((He=p.combatStats)==null?void 0:He.questionsAttempted)||0)<Qm||(((Ne=p.combatStats)==null?void 0:Ne.questionsCorrect)||0)<Xm?s.jsxs("span",{children:["Rewards: ",((We=p.combatStats)==null?void 0:We.questionsAttempted)||0,"/",Qm," attempts"," ",""," ",((Y=p.combatStats)==null?void 0:Y.questionsCorrect)||0,"/",Xm," correct needed"]}):s.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),s.jsx(nTe,{bossId:t.id,maxEntries:5}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsx("span",{children:"Defeat rewards:"}),s.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),s.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},dTe=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:o,playerEvolutionLevel:c})=>{const[d,h]=j.useState([]),p=Ma();j.useEffect(()=>{let y;try{y=Ae.subscribeToBossQuizzes(e,h)}catch{}return()=>y==null?void 0:y()},[e]);const m=d.filter(y=>{var w;if(y.scheduledAt&&new Date(y.scheduledAt)>new Date)return!1;if((w=y.targetSections)!=null&&w.length){const N=y.classType!=="GLOBAL"?y.classType:e,S=(n==null?void 0:n[N])||(n==null?void 0:n[e])||r||"";if(!y.targetSections.includes(S))return!1}return!0}),x=async(y,w,N,S)=>{try{const E=await Ae.answerBossQuiz(y,w,N);E.alreadyAnswered?p.info("Already answered this question!"):E.correct?(qn.bossHit(),E.bossDefeated?(qn.bossDefeated(),p.success("Boss defeated! Completion rewards distributed to all contributors!")):E.isCrit?p.success(`CRITICAL HIT! Dealt ${E.damage} damage!`):p.success(`Correct! Dealt ${E.damage} damage!`)):E.shieldBlocked?p.info("Shield blocked the attack!"):E.playerDamage&&E.playerDamage>0?p.error(`Wrong! The boss hits you for ${E.playerDamage} damage!`):p.error("Incorrect. No damage dealt."),E.knockedOut&&qn.bossHit(),S.onResult(E)}catch(E){p.error(E instanceof Error?E.message:"Failed to submit answer"),S.onResult({correct:!1,damage:0})}};return m.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(Ro,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),m.map(y=>s.jsx(uTe,{quiz:y,userId:t,onAnswer:x,playerStats:a,playerAppearance:i,playerEquipped:o||{},playerEvolutionLevel:c||1},y.id))]})},nj={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},nV=({value:t,onChange:e,label:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>s.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:s.jsx(Ax,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),hTe=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=j.useState(0),[i,o]=j.useState(0),[c,d]=j.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return s.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[s.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),s.jsx(nV,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),s.jsx(nV,{value:i,onChange:o,label:h?"Tutor communication":"Student engagement"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),s.jsx("textarea",{value:c,onChange:x=>d(x.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),s.jsx("div",{className:"flex justify-between mt-1",children:s.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),s.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[s.jsx(yE,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},fTe=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=j.useState([]),[o,c]=j.useState(!1),[d,h]=j.useState(""),[p,m]=j.useState(!1),[x,y]=j.useState(null),[w,N]=j.useState(!1),S=Ma();j.useEffect(()=>{let k;try{k=Ae.subscribeToTutoringSessions(r,i)}catch{}return()=>k==null?void 0:k()},[r]);const E=async()=>{if(!(!d.trim()||p)){m(!0);try{await Ae.createTutoringRequest(t,e,d,r),S.success("Tutoring request posted!"),h(""),c(!1)}catch{S.error("Failed to create request")}m(!1)}},C=async k=>{try{await Ae.claimTutorRole(k,t,e),S.success("You are now the tutor for this session!")}catch{S.error("Failed to claim tutor role")}},M=async k=>{try{await Ae.startTutoringSession(k),S.success("Session started!")}catch{S.error("Failed to start session")}},L=async(k,F)=>{N(!0);try{const O=a.find(B=>B.id===k);if(!O)throw new Error("Session not found");const $=O.requesterId===t?"requester":"tutor";await Ae.submitTutoringFeedback(k,$,F),S.success("Feedback submitted! "+($==="requester"?O.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":O.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),y(null)}catch{S.error("Failed to submit feedback")}N(!1)},I=async(k,F)=>{try{const O=await Ae.completeTutoring(k,F);S.success(`Verified! Tutor earned ${O.xpAwarded} XP and ${O.fluxAwarded} Flux`)}catch{S.error("Failed to verify session")}},R=a.filter(k=>k.status==="OPEN"),A=a.filter(k=>["MATCHED","IN_PROGRESS"].includes(k.status)),T=a.filter(k=>k.status==="VERIFIED");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(ll,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),s.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(cn,{className:"w-3 h-3"})," Request Help"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),o&&s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[s.jsx("input",{value:d,onChange:k=>h(k.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:E,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),s.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),R.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(Rle,{className:"w-3 h-3"})," Open Requests"]}),R.map(k=>s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",k.requesterName," - ",new Date(k.createdAt).toLocaleDateString()]})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${nj[k.status]}`,children:k.status})]}),k.requesterId!==t&&s.jsxs("button",{onClick:()=>C(k.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[s.jsx(us,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},k.id))]}),A.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(oo,{className:"w-3 h-3"})," Active Sessions"]}),A.map(k=>{const F=k.requesterId===t||k.tutorId===t,O=k.requesterId===t,$=k.tutorId===t,B=O?k.requesterFeedback:k.tutorFeedback,G=O?k.tutorFeedback:k.requesterFeedback;return s.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName||"Finding tutor..."]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${nj[k.status]}`,children:k.status}),k.status==="MATCHED"&&F&&s.jsx("button",{onClick:()=>M(k.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),k.status==="IN_PROGRESS"&&F&&!B&&s.jsxs("button",{onClick:()=>y(k.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx($r,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),k.status==="IN_PROGRESS"&&F&&B&&!G&&s.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",O?"tutor":"student"]}),n&&k.tutorId&&k.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>I(k.id,k.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[s.jsx($r,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),x===k.id&&k.status==="IN_PROGRESS"&&($||O)&&s.jsx(hTe,{role:O?"requester":"tutor",onSubmit:Q=>L(k.id,Q),submitting:w})]},k.id)})]}),a.filter(k=>k.status==="COMPLETED").length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[s.jsx(oo,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(k=>k.status==="COMPLETED").map(k=>s.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),k.requesterFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),k.tutorFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&k.tutorId&&s.jsxs("button",{onClick:()=>I(k.id,k.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx($r,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},k.id))]}),T.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx($r,{className:"w-3 h-3 text-green-400"})," Completed (",T.length,")"]}),T.slice(0,3).map(k=>s.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 truncate",children:k.topic}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${nj[k.status]}`,children:k.status})]},k.id))]}),a.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-600",children:[s.jsx(ll,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},pTe=({item:t,onClose:e})=>{const[r,n]=j.useState("chest"),a=ma(t.rarity);j.useEffect(()=>{qn.chestOpen();const o=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(o),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:s.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&s.jsxs("div",{className:"animate-in zoom-in duration-500",children:[s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),s.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),s.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[s.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),s.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&s.jsx("div",{className:"animate-in zoom-in duration-300",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[s.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((o,c)=>s.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[s.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&s.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[s.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[s.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),s.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),s.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,o])=>o&&o>0).map(([o,c])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:o}),s.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},o))}),t.affixes.length>0&&s.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((o,c)=>s.jsxs("div",{className:"text-[10px] text-gray-400",children:[o.name,": +",o.value," ",o.stat," (T",o.tier,")"]},c))}),t.setId&&s.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&s.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((o,c)=>s.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),s.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},mTe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],gTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],xTe=({user:t,classType:e,onClose:r})=>{var R,A,T;const[n,a]=se.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},o=i.level||1,c=c0(o),d=aW(o),{equipped:h,appearance:p}=Vu(t,e),m=FE({gamification:{...i,equipped:h}}),x=u0(h),y=((R=i.classXp)==null?void 0:R[e])||0,w=(A=t.settings)==null?void 0:A.privacyMode,N=w?i.codename||"Unknown Agent":t.name,S=Object.values(h).filter(Boolean),E=UE(S),C=i.unlockedAchievements||[],M=j.useMemo(()=>zE.filter(k=>C.includes(k.id)),[C]),L=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),I=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),s.jsxs("div",{className:"relative flex items-center gap-6",children:[s.jsx("div",{className:"w-32 h-44 shrink-0",children:s.jsx(ix,{equipped:h,appearance:p})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h1",{className:`text-2xl font-black ${w?"text-purple-300 italic":"text-white"}`,children:N}),s.jsx("button",{onClick:I,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?s.jsx(Ao,{className:"w-4 h-4 text-green-400"}):s.jsx(nf,{className:"w-4 h-4"})})]}),s.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",o]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:y.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-yellow-400",children:x}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-purple-400",children:C.length}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&s.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:s.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(ds,{className:"w-3 h-3"})," Combat Stats"]}),s.jsx("div",{className:"space-y-2",children:mTe.map(({key:k,label:F,color:O,bg:$})=>{const B=m[k]||0,G=B/L*100;return s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-xs text-gray-400",children:F}),s.jsx("span",{className:`text-xs font-bold ${O}`,children:B})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${$} transition-all`,style:{width:`${G}%`}})})]},k)})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"space-y-1.5",children:gTe.map(k=>{const F=h[k];if(!F)return s.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[s.jsx("span",{className:"font-mono w-12 text-[10px]",children:k}),s.jsx("span",{className:"italic",children:"Empty"})]},k);const O=ma(F.rarity);return s.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${O.border} ${O.bg}`,children:[s.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:k}),s.jsx("span",{className:`text-xs font-bold truncate ${O.text}`,children:F.name})]},k)})})]}),E.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[s.jsx(Ax,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),E.map(({set:k,activeBonus:F})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[s.jsx("span",{className:"text-purple-400 font-bold",children:k.name}),s.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",F.label]})]},k.id))]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",C.length,")"]}),M.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:M.slice(0,12).map(k=>s.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[s.jsx("div",{className:"text-xl",children:k.icon}),s.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:k.title})]},k.id))}):s.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ou,{className:"w-3.5 h-3.5 text-orange-400"}),s.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),s.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ph,{className:"w-3.5 h-3.5 text-red-400"}),s.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),s.jsx("span",{className:"text-red-400 font-bold",children:((T=i.completedQuests)==null?void 0:T.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(ll,{className:"w-3.5 h-3.5 text-green-400"}),s.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),s.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Gn,{className:"w-3.5 h-3.5 text-cyan-400"}),s.jsx("span",{className:"text-gray-400",children:"Total XP:"}),s.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})},Zy=({label:t,value:e,max:r,color:n,icon:a,description:i})=>{const o=Math.min(e/r*100,100);return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:n,children:a}),s.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider",children:t})]}),s.jsx("span",{className:`text-sm font-black ${n}`,children:e})]}),s.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${n.replace("text-","bg-").replace("400","500/60")}`,style:{width:`${o}%`}})}),s.jsx("div",{className:"absolute -top-10 left-0 hidden group-hover:block z-20 w-56 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:i})]})},ev=({label:t,value:e,sub:r,color:n="text-white",icon:a})=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-gray-600",children:a}),s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:t})]}),s.jsx("div",{className:`text-lg font-black ${n} leading-tight`,children:e}),r&&s.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:r})]}),yTe=({user:t,submissions:e,assignments:r,activeClass:n})=>{var O;const a=t.gamification,i=((O=a==null?void 0:a.classXp)==null?void 0:O[n])||0,o=(a==null?void 0:a.xp)||0,c=(a==null?void 0:a.level)||1,d=(a==null?void 0:a.currency)||0,h=(a==null?void 0:a.engagementStreak)||0,p=(a==null?void 0:a.loginStreak)||0,m=c0(c),y=j.useMemo(()=>Vu(t,n),[t,n]).equipped,w=j.useMemo(()=>{const $={tech:10,focus:10,analysis:10,charisma:10};return Object.values(y).filter(Boolean).forEach(G=>{G.stats&&Object.entries(G.stats).forEach(([Q,H])=>{$[Q]+=H})}),$},[y]),N=j.useMemo(()=>VE(w),[w]),S=j.useMemo(()=>u0(y),[y]),E=j.useMemo(()=>I0e(y),[y]),C=j.useMemo(()=>R0e(y),[y]),M=j.useMemo(()=>O0e(y),[y]),L=iW(h),I=j.useMemo(()=>{const $=new Set(r.filter(B=>B.classType===n).map(B=>B.id));return e.filter(B=>$.has(B.assignmentId))},[e,r,n]),R=j.useMemo(()=>{var ce;const $=I.reduce((X,ie)=>{var ne;return X+(((ne=ie.metrics)==null?void 0:ne.engagementTime)||0)},0),B=Math.round($/60)*10,Q=(((ce=a==null?void 0:a.completedQuests)==null?void 0:ce.length)||0)*100,H=(a==null?void 0:a.bossDamageDealt)||{},K=Object.values(H).reduce((X,ie)=>X+ie,0)*2,te=(a==null?void 0:a.tutoringXpEarned)||0,ae=Math.max(0,i-B-Q-K-te);return{engagementXp:B,questXp:Q,bossXp:K,tutoringXp:te,otherXp:ae}},[I,a,i]),A=j.useMemo(()=>{const $=Date.now(),B=10080*60*1e3,G=I.filter(ne=>(ne.submittedAt?new Date(ne.submittedAt).getTime():0)>$-B),Q=new Set(G.filter(ne=>ne.submittedAt).map(ne=>new Date(ne.submittedAt).toISOString().split("T")[0])).size,H={totalTime:G.reduce((ne,ve)=>{var pe;return ne+(((pe=ve.metrics)==null?void 0:pe.engagementTime)||0)},0),submissionCount:G.length,totalClicks:G.reduce((ne,ve)=>{var pe;return ne+(((pe=ve.metrics)==null?void 0:pe.clickCount)||0)},0),totalPastes:G.reduce((ne,ve)=>{var pe;return ne+(((pe=ve.metrics)==null?void 0:pe.pasteCount)||0)},0),totalKeystrokes:G.reduce((ne,ve)=>{var pe;return ne+(((pe=ve.metrics)==null?void 0:pe.keystrokes)||0)},0),totalXP:i,activityDays:Q},K=H.totalTime/60+H.submissionCount*10,ce=hle(H,K,150,60),X=fle(ce),ie=Wo[ce];return{bucket:ce,recommendation:X,meta:ie,metrics:H,engagementScore:K}},[I,i]),T=j.useMemo(()=>{const $=[];for(let B=6;B>=0;B--){const G=new Date;G.setDate(G.getDate()-B);const Q=G.toISOString().split("T")[0],H=G.toLocaleDateString("en",{weekday:"short"}),K=I.filter(te=>{var ae;return(ae=te.submittedAt)==null?void 0:ae.startsWith(Q)});$.push({label:H,count:K.length,minutes:Math.round(K.reduce((te,ae)=>{var ce;return te+(((ce=ae.metrics)==null?void 0:ce.engagementTime)||0)},0)/60)})}return $},[I]),k=Math.max(1,...T.map($=>$.minutes)),F=j.useMemo(()=>{const $={SUCCESS:0,NORMAL:0,SUPPORT_NEEDED:0,FLAGGED:0,STARTED:0};return I.forEach(B=>{B.status in $&&$[B.status]++}),$},[I]);return s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[s.jsx(Ro,{className:"w-5 h-5 text-purple-400"}),"Intel Dossier"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Classified operative analysis  ",n]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-black ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Level ",c]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(ev,{label:"Class XP",value:i.toLocaleString(),sub:`${o.toLocaleString()} total across all classes`,color:"text-amber-400",icon:s.jsx(Gn,{className:"w-3.5 h-3.5"})}),s.jsx(ev,{label:"Gear Score",value:S,sub:`${Object.values(y).filter(Boolean).length}/8 slots filled`,color:"text-purple-400",icon:s.jsx(cs,{className:"w-3.5 h-3.5"})}),s.jsx(ev,{label:"Resources Accessed",value:I.length,sub:`${F.SUCCESS} excellent`,color:"text-emerald-400",icon:s.jsx(ds,{className:"w-3.5 h-3.5"})}),s.jsx(ev,{label:"Cyber-Flux",value:d,sub:"crafting currency",color:"text-cyan-400",icon:s.jsx(pg,{className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Ph,{className:"w-4 h-4 text-red-400"})," Combat Analysis"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your character stats translate to boss fight performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Zy,{label:"Tech",value:w.tech,max:100,color:"text-blue-400",icon:s.jsx(Gn,{className:"w-3 h-3"}),description:"Attack Power  Increases base damage dealt to bosses in quiz events."}),s.jsx(Zy,{label:"Focus",value:w.focus,max:100,color:"text-green-400",icon:s.jsx(Cu,{className:"w-3 h-3"}),description:`Critical Strikes  ${(N.critChance*100).toFixed(0)}% crit chance, ${N.critMultiplier.toFixed(2)}x crit multiplier.`}),s.jsx(Zy,{label:"Analysis",value:w.analysis,max:100,color:"text-yellow-400",icon:s.jsx(cs,{className:"w-3 h-3"}),description:`Armor  Reduces incoming boss damage by ${N.armorPercent.toFixed(0)}%.`}),s.jsx(Zy,{label:"Charisma",value:w.charisma,max:100,color:"text-purple-400",icon:s.jsx(Dh,{className:"w-3 h-3"}),description:`Health Pool  Gives you ${N.maxHp} HP in boss fights (base 100 + 5 per charisma above 10).`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-3 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Max HP"}),s.jsx("div",{className:"text-sm font-black text-emerald-400",children:N.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Armor"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:[N.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit %"}),s.jsxs("div",{className:"text-sm font-black text-green-400",children:[(N.critChance*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit Dmg"}),s.jsxs("div",{className:"text-sm font-black text-red-400",children:[N.critMultiplier.toFixed(2),"x"]})]})]}),(Object.keys(E).length>0||Object.keys(C).length>0||Object.keys(M).length>0)&&s.jsxs("div",{className:"pt-3 border-t border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest",children:"Stat Sources"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px]",children:[s.jsxs("div",{className:"flex justify-between text-gray-500",children:[s.jsx("span",{children:"Base Stats"}),s.jsx("span",{className:"text-gray-400",children:"10 each"})]}),Object.keys(E).length>0&&s.jsxs("div",{className:"flex justify-between text-cyan-400/70",children:[s.jsx("span",{children:"Gems"}),s.jsxs("span",{children:["+",Object.values(E).reduce(($,B)=>$+B,0)]})]}),Object.keys(C).length>0&&s.jsxs("div",{className:"flex justify-between text-orange-400/70",children:[s.jsx("span",{children:"Runewords"}),s.jsxs("span",{children:["+",Object.values(C).reduce(($,B)=>$+B,0)]})]}),Object.keys(M).length>0&&s.jsxs("div",{className:"flex justify-between text-amber-400/70",children:[s.jsx("span",{children:"Set Bonus"}),s.jsxs("span",{children:["+",Object.values(M).reduce(($,B)=>$+B,0)]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Gn,{className:"w-4 h-4 text-amber-400"})," XP Sources"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 -mt-2",children:["Where your ",i.toLocaleString()," XP in ",n," came from"]}),s.jsx("div",{className:"space-y-2",children:[{label:"Resource Engagement",xp:R.engagementXp,color:"bg-purple-500",textColor:"text-purple-400",desc:"~10 XP per minute of active engagement"},{label:"Mission Rewards",xp:R.questXp,color:"bg-indigo-500",textColor:"text-indigo-400",desc:"XP from completing contracts"},{label:"Boss Encounters",xp:R.bossXp,color:"bg-red-500",textColor:"text-red-400",desc:"XP from boss quiz damage"},{label:"Peer Tutoring",xp:R.tutoringXp,color:"bg-emerald-500",textColor:"text-emerald-400",desc:"XP earned helping other agents"},{label:"Other (Badges, Daily, Behavior)",xp:R.otherXp,color:"bg-amber-500",textColor:"text-amber-400",desc:"Login rewards, behavior awards, badge XP"}].filter($=>$.xp>0).map($=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${$.color}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-300",children:$.label}),s.jsxs("span",{className:`font-bold ${$.textColor}`,children:["~",$.xp.toLocaleString()," XP"]})]}),s.jsx("div",{className:"text-[10px] text-gray-600",children:$.desc})]})]},$.label))}),L>1&&s.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ou,{className:"w-4 h-4 text-orange-400"}),s.jsx("span",{className:"text-orange-400 font-bold",children:"Streak Bonus Active"}),s.jsxs("span",{className:"ml-auto text-sm font-black text-yellow-400",children:["+",Math.round((L-1)*100),"%"]})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[h,"-week engagement streak  All XP earnings boosted"]})]}),p>1&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 pt-2 border-t border-white/5",children:[s.jsx(Ax,{className:"w-3.5 h-3.5 text-purple-400"}),s.jsxs("span",{children:[p,"-day daily login streak"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-2xl p-5 space-y-4 ${A.meta.bgColor} ${A.meta.borderColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Jj,{className:"w-4 h-4"})," Engagement Status"]}),s.jsx("span",{className:`text-sm font-black ${A.meta.color}`,children:A.meta.label})]}),s.jsx("p",{className:"text-sm text-gray-300",children:A.meta.description}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Why this classification"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active time (7d)"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[Math.round(A.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Resources (7d)"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.submissionCount})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active days"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[A.metrics.activityDays,"/7"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Keystrokes"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.totalKeystrokes})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-1",children:"How to level up your status"}),s.jsx("p",{className:"text-sm text-gray-300",children:A.recommendation.studentTip})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommended for you"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.recommendation.categories.map($=>s.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-2.5 py-1 rounded-full text-gray-300 font-medium",children:$},$))})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(qf,{className:"w-4 h-4 text-cyan-400"})," 7-Day Activity"]}),s.jsx("div",{className:"flex items-end gap-2 h-32",children:T.map(($,B)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 font-mono",children:[$.minutes,"m"]}),s.jsx("div",{className:"w-full bg-white/5 rounded-t-lg relative flex-1 flex items-end",children:s.jsx("div",{className:`w-full rounded-t-lg transition-all duration-500 ${$.minutes>0?"bg-purple-500/50 border border-purple-500/30":"bg-white/5"}`,style:{height:`${Math.max($.minutes>0?8:0,$.minutes/k*100)}%`}})}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold",children:$.label}),$.count>0&&s.jsxs("div",{className:"text-[8px] text-gray-600",children:[$.count," res"]})]},B))}),s.jsxs("div",{className:"pt-3 border-t border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Submission Quality"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[F.SUCCESS>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-gray-400",children:"Excellent"}),s.jsx("span",{className:"text-emerald-400 font-bold ml-auto",children:F.SUCCESS})]}),F.NORMAL>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-400",children:"Normal"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:F.NORMAL})]}),F.SUPPORT_NEEDED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),s.jsx("span",{className:"text-gray-400",children:"Needs Support"}),s.jsx("span",{className:"text-amber-400 font-bold ml-auto",children:F.SUPPORT_NEEDED})]}),F.STARTED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),s.jsx("span",{className:"text-gray-400",children:"Started"}),s.jsx("span",{className:"text-gray-400 font-bold ml-auto",children:F.STARTED})]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Ph,{className:"w-4 h-4 text-red-400"})," Boss Fight Readiness"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your equipment and stats prepare you for boss quiz encounters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-red-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-red-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Ph,{className:"w-3 h-3"})," Offense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:["Your ",s.jsxs("span",{className:"text-blue-400 font-bold",children:[w.tech," Tech"]})," powers your base attack.",w.tech>20&&s.jsx("span",{className:"text-emerald-400",children:" Strong offensive capability."}),w.tech<=20&&w.tech>10&&s.jsx("span",{className:"text-yellow-400",children:" Moderate damage output."}),w.tech<=10&&s.jsx("span",{className:"text-red-400",children:" Low damage  equip Tech gear to improve."})]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Crit chance: ",s.jsxs("span",{className:"text-green-400 font-bold",children:[(N.critChance*100).toFixed(0),"%"]})," (from ",w.focus," Focus)"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-yellow-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-yellow-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(cs,{className:"w-3 h-3"})," Defense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[N.armorPercent.toFixed(0),"% Armor"]})," from ",w.analysis," Analysis reduces boss damage.",N.armorPercent>=30&&s.jsx("span",{className:"text-emerald-400",children:" Excellent damage mitigation."}),N.armorPercent<30&&N.armorPercent>=15&&s.jsx("span",{className:"text-yellow-400",children:" Decent protection."}),N.armorPercent<15&&s.jsx("span",{className:"text-red-400",children:" Vulnerable  equip Analysis gear."})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-emerald-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-emerald-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Dh,{className:"w-3 h-3"})," Survivability"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-emerald-400 font-bold",children:[N.maxHp," HP"]})," from ",w.charisma," Charisma.",N.maxHp>=150&&s.jsx("span",{className:"text-emerald-400",children:" Large health pool  can absorb many hits."}),N.maxHp<150&&N.maxHp>=120&&s.jsx("span",{className:"text-yellow-400",children:" Average survivability."}),N.maxHp<120&&s.jsx("span",{className:"text-red-400",children:" Fragile  Charisma gear increases HP."})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommendations"}),s.jsxs("div",{className:"space-y-1.5",children:[S<100&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(jy,{className:"w-3 h-3 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your Gear Score is ",s.jsx("span",{className:"text-amber-400 font-bold",children:S}),". Complete more missions and level up to earn better equipment drops."]})]}),w.tech<=15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(jy,{className:"w-3 h-3 text-blue-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Equip items with ",s.jsx("span",{className:"text-blue-400 font-bold",children:"Tech"})," stats to increase boss damage output."]})]}),N.critChance<.1&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(jy,{className:"w-3 h-3 text-green-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Socket ",s.jsx("span",{className:"text-green-400 font-bold",children:"Focus"})," gems to boost critical hit chance beyond ",(N.critChance*100).toFixed(0),"%."]})]}),N.armorPercent<10&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(jy,{className:"w-3 h-3 text-yellow-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your armor is low. ",s.jsx("span",{className:"text-yellow-400 font-bold",children:"Analysis"})," items will reduce boss damage significantly."]})]}),S>=100&&N.critChance>=.1&&N.armorPercent>=10&&w.tech>15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-emerald-400",children:[s.jsx(pg,{className:"w-3 h-3 mt-0.5 shrink-0"}),s.jsx("span",{children:"Your loadout is well-balanced. Consider specializing in one stat for even greater effectiveness."})]})]})]})]})]})};function vTe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=rx(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const bTe={Textbook:s.jsx(Oa,{className:"w-5 h-5"}),Simulation:s.jsx(Hf,{className:"w-5 h-5 fill-current"}),"Lab Guide":s.jsx(Z2,{className:"w-5 h-5"}),"Practice Set":s.jsx(ds,{className:"w-5 h-5"}),Article:s.jsx(KH,{className:"w-5 h-5"}),"Video Lesson":s.jsx(JH,{className:"w-5 h-5"}),Supplemental:s.jsx(ew,{className:"w-5 h-5"})};let yh=0,aj=!1,ij=!1,aV="";const wTe=({user:t,assignments:e,submissions:r,classConfigs:n,enabledFeatures:a,onNavigate:i,onStartAssignment:o,studentTab:c="RESOURCES"})=>{var Ci,ps,wi,kt,fe,at,ft,nr,vr,dn,Zr,bn,Lr,$s,ms,mo,vl,gs,xs,La,Sa,q,Se,Te,ke,gt,Bt,It,ar,Er,an;const d=Ma(),{confirm:h}=Po(),[p,m]=j.useState(new Set),[x,y]=j.useState(t.classType||((Ci=t.enrolledClasses)==null?void 0:Ci[0])||"Unassigned"),[w,N]=j.useState(null),[S,E]=j.useState([]),[C,M]=j.useState({}),[L,I]=j.useState(!1),[R,A]=j.useState(null);aV!==t.id&&(aV=t.id,yh=((ps=t.gamification)==null?void 0:ps.lastLevelSeen)||1,aj=!1,ij=!1),yh===0&&(yh=((wi=t.gamification)==null?void 0:wi.lastLevelSeen)||1);const T=c,[k,F]=j.useState(!1),[O,$]=j.useState(null),[B,G]=j.useState(!1),[Q,H]=j.useState(null),[K,te]=j.useState(null),[ae,ce]=j.useState(null),[X,ie]=j.useState(null),[ne,ve]=j.useState(null),[pe,Be]=j.useState(null),[Ge,He]=j.useState(!1),[Ne,We]=j.useState(null),[Y,re]=j.useState(!1);j.useEffect(()=>{var $e,Pe,pt;const oe=(($e=t.gamification)==null?void 0:$e.level)||1,xe=Math.max(((Pe=t.gamification)==null?void 0:Pe.lastLevelSeen)||1,yh);if(oe>xe){yh=oe;const cr=((pt=t.gamification)==null?void 0:pt.inventory)||[],tr=cr.length>0?cr[cr.length-1]:null;A(tr),I(!0),qn.levelUp()}},[(kt=t.gamification)==null?void 0:kt.level,(fe=t.gamification)==null?void 0:fe.lastLevelSeen,(at=t.gamification)==null?void 0:at.inventory]),j.useEffect(()=>{const oe=[];try{oe.push(Ae.subscribeToXPEvents(xe=>{const $e=xe.find(Pe=>{var pt,cr,tr;if(!Pe.isActive||Pe.type!=="GLOBAL"&&Pe.targetClass!==x||Pe.scheduledAt&&new Date(Pe.scheduledAt)>new Date)return!1;if((pt=Pe.targetSections)!=null&&pt.length){const Cn=Pe.type!=="GLOBAL"&&Pe.targetClass?Pe.targetClass:x,Ba=((cr=t.classSections)==null?void 0:cr[Cn])||((tr=t.classSections)==null?void 0:tr[x])||t.section||"";if(!Pe.targetSections.includes(Ba))return!1}return!0});N($e||null)}))}catch{}try{oe.push(Ae.subscribeToQuests(xe=>{const $e=t.enrolledClasses||(t.classType?[t.classType]:[]);E(xe.filter(Pe=>{var cr,tr;if(!Pe.isActive)return!1;const pt=new Date;if(Pe.startsAt&&new Date(Pe.startsAt)>pt||Pe.expiresAt&&new Date(Pe.expiresAt)<pt||Pe.targetClass&&!$e.includes(Pe.targetClass))return!1;if((cr=Pe.targetSections)!=null&&cr.length){const Cn=((tr=t.classSections)==null?void 0:tr[Pe.targetClass||x])||t.section||"";if(!Pe.targetSections.includes(Cn))return!1}return!0}))}))}catch{}try{oe.push(Ae.subscribeToStudentPracticeProgress(t.id,M))}catch{}return()=>oe.forEach(xe=>xe())},[x]);const be=((nr=(ft=t.gamification)==null?void 0:ft.classXp)==null?void 0:nr[x])||0,we=se.useRef(be),Ye=se.useRef(x);j.useEffect(()=>{if(Ye.current!==x){Ye.current=x,we.current=be;return}if(be>we.current&&we.current>=0){const oe=be-we.current;if(oe>0&&oe<500){Be(oe),qn.xpGain();const xe=setTimeout(()=>Be(null),2e3);return()=>clearTimeout(xe)}}we.current=be},[be]),j.useEffect(()=>{var $e;if(aj)return;aj=!0;const oe=new Date().toISOString().split("T")[0];(($e=t.gamification)==null?void 0:$e.lastLoginRewardDate)!==oe&&!Y&&Ae.claimDailyLogin().then(Pe=>{Pe.alreadyClaimed||(re(!0),qn.dailyReward(),d.success(`Daily login: +${Pe.xpReward} XP, +${Pe.fluxReward} Flux (${Pe.streak}-day streak!)`))}).catch(()=>{})},[]),j.useEffect(()=>{ij||(ij=!0,Ae.updateEngagementStreak().catch(()=>{}))},[]);const[nt,Ot]=j.useState([]);j.useEffect(()=>{let oe;try{oe=Ae.subscribeToAnnouncements(Ot)}catch{}return()=>oe==null?void 0:oe()},[]);const Ee=j.useMemo(()=>{var xe;const oe=((xe=t.gamification)==null?void 0:xe.dismissedAnnouncements)||[];return nt.filter($e=>{var Pe,pt,cr;if(oe.includes($e.id)||$e.classType!=="GLOBAL"&&$e.classType!==x)return!1;if((Pe=$e.targetSections)!=null&&Pe.length){const tr=$e.classType!=="GLOBAL"?$e.classType:x,Cn=((pt=t.classSections)==null?void 0:pt[tr])||((cr=t.classSections)==null?void 0:cr[x])||t.section||"";if(!$e.targetSections.includes(Cn))return!1}return!0})},[nt,(vr=t.gamification)==null?void 0:vr.dismissedAnnouncements,x,t.classSections,t.section]),ut=async oe=>{await Ae.dismissAnnouncement(t.id,oe)},Nt=()=>{var xe;const oe=((xe=t.gamification)==null?void 0:xe.level)||1;yh=oe,I(!1),A(null),Ae.updateUserLastLevelSeen(t.id,oe).catch(()=>{})},wt=async oe=>{try{await Ae.updateUserAppearance(t.id,oe,x),d.success("Profile updated!"),F(!1),H(null),te(null),ce(null),ie(null),ve(null)}catch{d.error("Failed to save  try again")}},zt=t.enrolledClasses||(t.classType?[t.classType]:[]),de=j.useMemo(()=>Vu(t,x),[t,x]),Fe=de.equipped,jt=de.inventory,qe=j.useMemo(()=>{const oe={tech:10,focus:10,analysis:10,charisma:10};return Object.values(Fe).filter(Boolean).forEach($e=>{$e.stats&&Object.entries($e.stats).forEach(([Pe,pt])=>{oe[Pe]+=pt})}),oe},[Fe]),Ze=j.useMemo(()=>u0(Fe),[Fe]),At=j.useMemo(()=>{const oe=t.gamification||{},$e={...oe.achievementProgress||{}},Pe=oe.xp||0,pt=oe.level||1,cr=oe.inventory||[],tr=oe.completedQuests||[],Cn=oe.engagementStreak||0,Ba=oe.loginStreak||0,zs=oe.tutoringSessionsCompleted||0,On=oe.bossesDefeated||0,wn=oe.challengesCompleted||0,Hi=oe.itemsCrafted||0,Nr=(ys,Si)=>{(!$e[ys]||Si>$e[ys])&&($e[ys]=Si)};return Nr("first_steps",Pe),Nr("xp_5k",Pe),Nr("xp_25k",Pe),Nr("rising_star",pt),Nr("veteran",pt),Nr("elite",pt),Nr("legend",pt),Nr("collector_10",cr.length),Nr("collector_50",cr.length),Nr("gear_score_100",Ze),Nr("gear_score_500",Ze),Nr("first_mission",tr.length),Nr("mission_5",tr.length),Nr("mission_20",tr.length),Nr("boss_slayer",On),Nr("streak_3",Cn),Nr("streak_8",Cn),Nr("streak_16",Cn),Nr("login_7",Ba),Nr("login_30",Ba),Nr("challenges_10",wn),Nr("tutor_1",zs),Nr("tutor_10",zs),Nr("tech_50",qe.tech),Nr("focus_50",qe.focus),Nr("analysis_50",qe.analysis),Nr("charisma_50",qe.charisma),Nr("craft_10",Hi),$e},[t,Ze,qe]),St=[{subject:"Tech",A:qe.tech,fullMark:100},{subject:"Focus",A:qe.focus,fullMark:100},{subject:"Analysis",A:qe.analysis,fullMark:100},{subject:"Charisma",A:qe.charisma,fullMark:100}],lr=j.useMemo(()=>{const oe={};return e.filter(xe=>{var $e,Pe;if(xe.classType!==x||xe.status==="DRAFT"||xe.status==="ARCHIVED"||xe.scheduledAt&&new Date(xe.scheduledAt)>new Date)return!1;if(($e=xe.targetSections)!=null&&$e.length){const pt=((Pe=t.classSections)==null?void 0:Pe[x])||t.section||"";if(!xe.targetSections.includes(pt))return!1}return!0}).forEach(xe=>{var pt;const $e=r.find(cr=>cr.assignmentId===xe.id),Pe=xe.unit||"General Resources";oe[Pe]||(oe[Pe]=[]),oe[Pe].push({...xe,lastEngagement:$e&&$e.submittedAt||null,engagementTime:((pt=$e==null?void 0:$e.metrics)==null?void 0:pt.engagementTime)||0})}),oe},[e,r,x]),ye=oe=>{const xe=new Set(p);xe.has(oe)?xe.delete(oe):xe.add(oe),m(xe)},it=((dn=t.gamification)==null?void 0:dn.level)||1,xt=((Zr=t.gamification)==null?void 0:Zr.currency)||0,Dt=be,Pt=Dt%1e3/1e3*100,rt=tV(Dt),Le=tV(xt),et=c0(it),lt=async oe=>{const xe=oe.target.value;y(xe),await Ae.switchUserView(t.id,xe)},Ft=async oe=>{if(!B){G(!0);try{await Ae.equipItem(t.id,oe,x),$(null),qn.equip(),d.success(`${oe.name} equipped.`)}catch{d.error("Failed to equip item.")}finally{G(!1)}}},Wt=async oe=>{G(!0);try{await Ae.unequipItem(t.id,oe,x),$(null),d.success("Item unequipped.")}catch{d.error("Failed to unequip item.")}finally{G(!1)}},Qt=async()=>{if(!O)return;if(Object.values(Fe).some($e=>$e&&$e.id===O.id)){d.error("Unequip this item before salvaging.");return}const xe=zM(O);if(await h({message:`Salvage ${O.name} for ${xe} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){G(!0);try{await Ae.disenchantItem(t.id,O,x),$(null),qn.salvage(),d.success(`Salvaged for ${xe} Cyber-Flux.`)}catch{d.error("Failed to salvage item.")}finally{G(!1)}}},Gt=async oe=>{if(!O)return;const xe=Zi[oe];if(xt<xe)return d.error("Insufficient Cyber-Flux.");G(!0);try{await Ae.craftItem(t.id,O,oe,x),$(null),qn.craft(),d.success(`${oe.charAt(0)+oe.slice(1).toLowerCase()} complete.`)}catch($e){const Pe=($e==null?void 0:$e.message)||($e==null?void 0:$e.code)||"Unknown error";d.error(`Fabrication failed: ${Pe}`)}finally{G(!1)}},Et=((bn=t.gamification)==null?void 0:bn.gemsInventory)||[],Hr=async()=>{if(!(!O||B)){if(xt<Zi.SOCKET)return d.error("Insufficient Cyber-Flux.");if((O.sockets||0)>=3)return d.error("Maximum sockets reached.");G(!0);try{const oe=await Ae.addSocket(O.id,x);$(oe.item),qn.craft(),d.success("Socket added!")}catch(oe){d.error((oe==null?void 0:oe.message)||"Failed to add socket.")}finally{G(!1)}}},un=async oe=>{if(!(!O||B)){if(xt<Zi.ENCHANT)return d.error("Insufficient Cyber-Flux.");G(!0);try{const xe=await Ae.socketGem(O.id,oe,x);$(xe.item),qn.craft(),xe.runewordActivated?(qn.levelUp(),d.success(`RUNEWORD ACTIVATED: ${xe.runewordActivated.name}!`)):d.success("Gem socketed!")}catch(xe){d.error((xe==null?void 0:xe.message)||"Failed to socket gem.")}finally{G(!1)}}},gn=async oe=>{var Pe;if(!O||B)return;const xe=(Pe=O.gems)==null?void 0:Pe[oe];if(!xe)return;const $e=$M(O.rarity,xe.tier,O.unsocketCount||0);if(xt<$e)return d.error(`Insufficient Cyber-Flux. Need ${$e}.`);G(!0);try{const pt=await Ae.unsocketGem(O.id,oe,x);$(pt.item),qn.craft(),d.success(`Gem removed! -${pt.cost} Flux`)}catch(pt){d.error((pt==null?void 0:pt.message)||"Failed to unsocket gem.")}finally{G(!1)}},Dr=((Lr=t.gamification)==null?void 0:Lr.activeQuests)||[],kn=(($s=t.gamification)==null?void 0:$s.completedQuests)||[],gr=S.filter(oe=>Dr.some(xe=>xe.questId===oe.id)),ha=S.filter(oe=>!Dr.some(xe=>xe.questId===oe.id)&&!kn.includes(oe.id)),xn=async oe=>{try{await Ae.acceptQuest(t.id,oe.id),qn.questAccept(),d.success(`Contract accepted: ${oe.title}`)}catch{d.error("Failed to accept contract.")}},Ln=async oe=>{const xe=oe.type==="CUSTOM";if(await h({message:xe?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:xe?"Submit":"Deploy",variant:"info"}))try{await Ae.deployMission(t.id,oe),qn.questDeploy(),d.info("Mission deployed. Awaiting verification.")}catch{d.error("Deployment failed.")}},ci=["HEAD","HANDS","RING1","AMULET"],yn=["CHEST","BELT","FEET","RING2"],[Pr,Ya]=j.useState(null),aa=A_e(VU(Z7,{activationConstraint:{distance:8}}),VU(KX,{activationConstraint:{delay:150,tolerance:5}})),Jr=oe=>oe==="RING1"||oe==="RING2"?["RING"]:[oe],vn=oe=>{const{active:xe}=oe,$e=jt.find(Pe=>Pe.id===xe.id)||Object.values(Fe).find(Pe=>Pe&&Pe.id===xe.id);Ya($e||null)},Wn=oe=>{const{active:xe,over:$e}=oe;if(Ya(null),!$e)return;const Pe=xe.id,pt=$e.id;if(pt.startsWith("slot-")){const cr=pt.replace("slot-",""),tr=jt.find(Ba=>Ba.id===Pe);if(!tr||!Jr(cr).includes(tr.slot))return;Ft(tr)}if(Pe.startsWith("equipped-")&&(pt==="inventory-zone"||pt.startsWith("storage-cell-"))){const cr=Pe.replace("equipped-","");Wt(cr)}},Pa=(oe,xe,$e="w-5 h-5")=>{const Pe=`${$e} ${xe}`,pt={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(oe){case"HEAD":return s.jsxs("svg",{className:Pe,...pt,children:[s.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),s.jsx("path",{d:"M5 11v2h14v-2"}),s.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return s.jsxs("svg",{className:Pe,...pt,children:[s.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),s.jsx("path",{d:"M6 4h12"}),s.jsx("path",{d:"M12 4v5"}),s.jsx("path",{d:"M9 9h6"})]});case"HANDS":return s.jsxs("svg",{className:Pe,...pt,children:[s.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),s.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),s.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return s.jsxs("svg",{className:Pe,...pt,children:[s.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),s.jsx("path",{d:"M4 19h16"}),s.jsx("path",{d:"M11 3v4"})]});case"BELT":return s.jsxs("svg",{className:Pe,...pt,children:[s.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),s.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),s.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return s.jsxs("svg",{className:Pe,...pt,children:[s.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),s.jsx("path",{d:"M12 7v3"}),s.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return s.jsxs("svg",{className:Pe,...pt,children:[s.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),s.jsx("path",{d:"M12 9V6"}),s.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return s.jsx(Yv,{className:Pe})}},Ja=({slot:oe})=>{const xe=Fe[oe],$e=xe?ma(xe.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:Pe,isOver:pt}=tk({id:`slot-${oe}`}),{attributes:cr,listeners:tr,setNodeRef:Cn,isDragging:Ba}=eY({id:xe?`equipped-${oe}`:`empty-slot-${oe}`,disabled:!xe}),zs=Pr&&Jr(oe).includes(Pr.slot),On=pt&&zs?"ring-2 ring-purple-500 scale-110":Pr&&zs?"ring-1 ring-purple-500/40 animate-pulse":"";return s.jsx("div",{ref:Pe,className:"relative",children:s.jsx("div",{ref:Cn,...cr,...tr,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${Ba?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${$e.border} ${$e.bg} ${$e.shimmer} ${$e.glow} ${On}`,onClick:()=>!Ba&&xe&&$(xe),children:xe?s.jsxs(s.Fragment,{children:[Pa(oe.replace(/\d/,""),$e.text),s.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${$e.text}`,children:xe.baseName||xe.name.split(" ").slice(-1)[0]}),!Ba&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${$e.text}`,children:xe.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[xe.rarity," ",oe]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(xe.stats).map(([wn,Hi])=>`+${Hi} ${wn.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):s.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:oe.slice(0,4)})})})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-6 lg:gap-8 h-full pb-6 lg:pb-12",children:[Ee.length>0&&s.jsx("div",{className:"lg:col-span-12 space-y-2",children:Ee.map(oe=>{const xe={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return s.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${xe[oe.priority]}`,children:[s.jsx(rb,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white",children:oe.title}),s.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:oe.content})]}),s.jsx("button",{onClick:()=>ut(oe.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Mn,{className:"w-4 h-4"})})]},oe.id)})}),w&&s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:s.jsx(Gn,{className:"w-5 h-5 fill-current"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[w.title," ACTIVE"]}),s.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",w.multiplier,"x XP on all tasks."]})]})]}),s.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[w.multiplier,"x"]})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${et.tierColor.split(" ")[0]} border-opacity-30`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${et.tierGlow} shadow-xl`,children:s.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${et.tierColor.split(" ")[0]}`})}),s.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((ms=t.gamification)==null?void 0:ms.codename)||t.name}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${et.tierColor.split(" ")[1]}`,children:[et.rankName," (Lvl ",it,")"]}),s.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",Ze]})]}),zt.length>1&&s.jsxs("div",{className:"mt-4 relative w-full",children:[s.jsx("select",{value:x,onChange:lt,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:zt.map(oe=>s.jsx("option",{value:oe,children:oe},oe))}),s.jsx(si,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),s.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Pt}%`}})}),s.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[s.jsxs("span",{children:[rt.toLocaleString()," XP (",x,")"]}),s.jsx("span",{children:"Next Rank"}),pe&&s.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",pe," XP"]})]})]})]}),s.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:s.jsx(N3,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-white leading-none",children:Le})]})]})}),(((mo=t.gamification)==null?void 0:mo.engagementStreak)||0)>0&&(()=>{var $e;const oe=(($e=t.gamification)==null?void 0:$e.engagementStreak)||0,xe=iW(oe);return s.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:s.jsx(Ou,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),s.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[oe,"w"]})]}),xe>1&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((xe-1)*100),"%"]})]})]})})})(),(((vl=t.gamification)==null?void 0:vl.loginStreak)||0)>1&&s.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[s.jsx(pg,{className:"w-5 h-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),s.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((gs=t.gamification)==null?void 0:gs.loginStreak)||0," day streak"]})]})]}),s.jsxs("button",{onClick:()=>He(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[s.jsx(o0,{className:"w-4 h-4"})," View Profile"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),a.physicsLab&&s.jsxs("button",{onClick:()=>i("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:s.jsx(Z2,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),s.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),s.jsx(ao,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),a.evidenceLocker&&s.jsxs("button",{onClick:()=>i("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:s.jsx(zle,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),s.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),s.jsx(ao,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),s.jsx("div",{className:"lg:col-span-9 space-y-6",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[T==="MISSIONS"&&s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[ha.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),ha.map(oe=>s.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:oe.title}),s.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:oe.type.replace("_"," ")})]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:oe.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[oe.statRequirements&&s.jsx("div",{className:"flex gap-2",children:Object.entries(oe.statRequirements).map(([xe,$e])=>s.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[$e," ",xe]},xe))}),oe.expiresAt&&s.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[s.jsx(Ls,{className:"w-3 h-3"})," Expires: ",new Date(oe.expiresAt).toLocaleDateString()]})]}),s.jsxs("button",{onClick:()=>xn(oe),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[s.jsx(Cu,{className:"w-4 h-4"})," Accept Contract"]})]},oe.id))]}),s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[gr.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),gr.map(oe=>{var pt,cr;const xe=((pt=Dr.find(tr=>tr.questId===oe.id))==null?void 0:pt.status)||"ACCEPTED",$e=(cr=Dr.find(tr=>tr.questId===oe.id))==null?void 0:cr.deploymentRoll,Pe=oe.type==="CUSTOM";return s.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:s.jsx(ds,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:oe.title}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[oe.type," MISSION"]})]})]}),s.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${xe==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":xe==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":xe==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:xe})]}),xe==="ACCEPTED"?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:oe.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>Ln(oe),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[s.jsx(XH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),Pe?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),oe.isGroupQuest&&s.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:s.jsx(us,{className:"w-5 h-5"})})]})]}):xe==="DEPLOYED"?s.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),s.jsx(Gn,{className:"w-6 h-6 text-purple-400"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),s.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:Pe?"AWAITING_HQ_SIG_VERIFICATION":$e===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),s.jsx("div",{className:"h-10 w-px bg-white/5"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),s.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),s.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),s.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:Pe?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},oe.id)})]})]},"missions"),T==="RESOURCES"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(lr).length===0?s.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):s.jsx("div",{className:"space-y-4",children:(()=>{var $e;const oe=($e=n==null?void 0:n.find(Pe=>Pe.className===x))==null?void 0:$e.unitOrder;return fb(Object.keys(lr),oe).map(Pe=>[Pe,lr[Pe]])})().map(([oe,xe])=>s.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[s.jsxs("button",{onClick:()=>ye(oe),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[p.has(oe)?s.jsx(si,{className:"w-4 h-4 text-purple-400"}):s.jsx(ao,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:oe})]}),s.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[xe.length," Files"]})]}),p.has(oe)&&s.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:xe.map($e=>{const Pe=!!$e.dueDate,pt=$e.dueDate?new Date($e.dueDate):null,cr=new Date,tr=pt?Math.ceil((pt.getTime()-cr.getTime())/864e5):1/0,Cn=tr<=0?"text-red-400":tr<=2?"text-yellow-400":"text-gray-500",Ba=Math.floor($e.engagementTime/60),zs=Ba>=5,On=C[$e.id],wn=On==null?void 0:On.completed,Hi=$e.lessonBlocks&&$e.lessonBlocks.length>0,Nr=Hi&&!$e.contentUrl;return s.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${wn?"border-green-500/20":Hi?"border-indigo-500/10":"border-white/5"}`,onClick:()=>o&&o($e.id),children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${wn||zs?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":$e.lastEngagement?"bg-green-500/10 text-green-400":Nr?"bg-indigo-500/10 text-indigo-400 group-hover:scale-110 shadow-lg group-hover:shadow-indigo-500/20":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:wn?s.jsx($r,{className:"w-6 h-6"}):zs?s.jsx($r,{className:"w-6 h-6"}):$e.lastEngagement?s.jsx($r,{className:"w-5 h-5 opacity-60"}):Nr?s.jsx(ll,{className:"w-6 h-6"}):bTe[$e.category||"Supplemental"]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[8px] font-bold uppercase px-1.5 py-0.5 rounded border ${Nr?"bg-indigo-500/10 text-indigo-400 border-indigo-500/20":"bg-black/40 text-gray-500 border-white/5"}`,children:Nr?"Lesson":$e.category}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:$e.title}),wn&&s.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[s.jsx($r,{className:"w-2.5 h-2.5"}),"COMPLETED",((On==null?void 0:On.totalCompletions)||0)>1?` (${On.totalCompletions}x)`:""]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:s.jsx("p",{className:"text-xs text-gray-500 truncate",children:$e.description})}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[$e.lastEngagement&&s.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[Ba,"m engaged"]}),wn&&(On==null?void 0:On.bestScore)!=null&&On.bestScore>0&&s.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",On.bestScore,"%"]}),Hi&&s.jsxs("span",{className:"text-[9px] text-indigo-400 font-bold flex items-center gap-0.5",children:[s.jsx(ll,{className:"w-3 h-3"})," ",$e.lessonBlocks.length," blocks"]}),Pe&&s.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Cn}`,children:[s.jsx(oo,{className:"w-3 h-3"}),tr<=0?"Overdue":tr===1?"Due tomorrow":`Due in ${tr}d`]})]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:s.jsx(Hf,{className:"w-4 h-4 text-purple-400 fill-current"})})]},$e.id)})})]},oe))})},"resources"),T==="LOADOUT"&&s.jsxs(Tje,{sensors:aa,collisionDetection:R_e,modifiers:[vTe],onDragStart:vn,onDragEnd:Wn,children:[s.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[s.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((xs=de.appearance)==null?void 0:xs.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),s.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[s.jsx("div",{className:"flex flex-col gap-4",children:ci.map(oe=>s.jsx(Ja,{slot:oe},oe))}),s.jsx("div",{className:"w-40 h-full relative",children:s.jsx(ix,{equipped:Fe,appearance:de.appearance,evolutionLevel:it})}),s.jsx("div",{className:"flex flex-col gap-4",children:yn.map(oe=>s.jsx(Ja,{slot:oe},oe))})]}),s.jsxs("button",{onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),F(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[s.jsx(nce,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),s.jsx("div",{className:"h-[200px]",children:s.jsx(cK,{width:"100%",height:"100%",children:s.jsxs(h_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:St,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),s.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),s.jsx(RQ,{stroke:"rgba(255,255,255,0.08)"}),s.jsx(Vx,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),s.jsx(Ux,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),s.jsx(Fx,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const oe=VE(qe);return s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),s.jsx("span",{className:"text-gray-500",children:"Tech"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:qe.tech}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),s.jsx("br",{}),"Increases damage dealt to bosses."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),s.jsx("span",{className:"text-gray-500",children:"Focus"}),s.jsx("span",{className:"text-green-400 font-bold ml-auto",children:qe.focus}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),s.jsx("br",{}),"Crit chance: ",(oe.critChance*100).toFixed(0),"%  Crit damage: ",oe.critMultiplier.toFixed(2),"x"]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),s.jsx("span",{className:"text-gray-500",children:"Analysis"}),s.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:qe.analysis}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),s.jsx("br",{}),"Reduces boss damage by ",oe.armorPercent.toFixed(0),"%."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),s.jsx("span",{className:"text-gray-500",children:"Charisma"}),s.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:qe.charisma}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),s.jsx("br",{}),"Max HP: ",oe.maxHp]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"HP"}),s.jsx("span",{className:"text-emerald-400 font-bold",children:oe.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Armor"}),s.jsxs("span",{className:"text-yellow-400 font-bold",children:[oe.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Crit"}),s.jsxs("span",{className:"text-green-400 font-bold",children:[(oe.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),s.jsx(STe,{inventory:jt,equipped:Fe,draggedItem:Pr,onInspect:$,getSlotIcon:Pa})]},"loadout"),s.jsx(qje,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:Pr&&(()=>{const oe=ma(Pr.rarity);return s.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:s.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${oe.bg} ${oe.border} ${oe.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[Pa(Pr.slot,oe.text,"w-7 h-7"),s.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${oe.text} drop-shadow-lg`,children:Pr.baseName||Pr.name.split(" ").slice(-1)[0]})]})})})()})]}),T==="ACHIEVEMENTS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(Kje,{unlockedAchievements:((La=t.gamification)==null?void 0:La.unlockedAchievements)||[],achievementProgress:At})},"achievements"),T==="SKILLS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(Xje,{specialization:(Sa=t.gamification)==null?void 0:Sa.specialization,skillPoints:((q=t.gamification)==null?void 0:q.skillPoints)||0,unlockedSkills:((Se=t.gamification)==null?void 0:Se.unlockedSkills)||[]})},"skills"),T==="FORTUNE"&&s.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(Yje,{currency:xt,lastSpin:(Te=t.gamification)==null?void 0:Te.lastWheelSpin,classType:x})},"fortune"),T==="TUTORING"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(fTe,{userId:t.id,userName:t.name,classType:x})},"tutoring"),T==="INTEL"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(yTe,{user:t,submissions:r,assignments:e,activeClass:x})},"intel")]})}),s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[s.jsx(tTe,{userId:t.id,userName:t.name,classType:x}),s.jsx(dTe,{userId:t.id,classType:x,userSection:((ke=t.classSections)==null?void 0:ke[x])||t.section,userClassSections:t.classSections,playerStats:qe,playerAppearance:de.appearance,playerEquipped:Fe,playerEvolutionLevel:it})]})}),s.jsx(Bi,{isOpen:k,onClose:()=>{F(!1),H(null),te(null),ce(null),ie(null),ve(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:s.jsx(ix,{equipped:Fe,appearance:{...de.appearance,hue:Q??((gt=de.appearance)==null?void 0:gt.hue)??0,bodyType:K??((Bt=de.appearance)==null?void 0:Bt.bodyType)??"A",skinTone:ae??((It=de.appearance)==null?void 0:It.skinTone)??0,hairStyle:X??((ar=de.appearance)==null?void 0:ar.hairStyle)??1,hairColor:ne??((Er=de.appearance)==null?void 0:Er.hairColor)??0}})})}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),s.jsx("div",{className:"flex justify-center gap-2",children:tY.map((oe,xe)=>{var Pe;const $e=(ae??((Pe=de.appearance)==null?void 0:Pe.skinTone)??0)===xe;return s.jsx("button",{onClick:()=>ce(xe),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${$e?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},xe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Hje.map((oe,xe)=>{var Pe;const $e=(X??((Pe=de.appearance)==null?void 0:Pe.hairStyle)??1)===xe;return s.jsx("button",{onClick:()=>ie(xe),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${$e?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:oe},xe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),s.jsx("div",{className:"flex justify-center gap-2",children:rY.map((oe,xe)=>{var Pe;const $e=(ne??((Pe=de.appearance)==null?void 0:Pe.hairColor)??0)===xe;return s.jsx("button",{onClick:()=>ve(xe),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${$e?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},xe)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),s.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(oe=>{var $e;const xe=(K??(($e=de.appearance)==null?void 0:$e.bodyType)??"A")===oe;return s.jsx("button",{onClick:()=>te(oe),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${xe?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:oe==="A"?"Alpha":oe==="B"?"Beta":"Femme"},oe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(oe=>{var $e;const xe=(Q??(($e=de.appearance)==null?void 0:$e.hue)??0)===oe;return s.jsx("button",{onClick:()=>H(oe),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${xe?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${oe}, 60%, 45%)`}},oe)})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{F(!1),H(null),te(null),ce(null),ie(null),ve(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:()=>{var oe,xe,$e,Pe,pt;return wt({hue:Q??((oe=de.appearance)==null?void 0:oe.hue)??0,bodyType:K??((xe=de.appearance)==null?void 0:xe.bodyType)??"A",skinTone:ae??(($e=de.appearance)==null?void 0:$e.skinTone)??0,hairStyle:X??((Pe=de.appearance)==null?void 0:Pe.hairStyle)??1,hairColor:ne??((pt=de.appearance)==null?void 0:pt.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),s.jsx(Bi,{isOpen:!!O,onClose:()=>$(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:O&&s.jsxs("div",{className:"space-y-6 text-gray-100",children:[s.jsxs("div",{className:`p-5 rounded-xl border ${O.runewordActive?"border-amber-500/40 runeword-active":ma(O.rarity).border} ${ma(O.rarity).bg} ${ma(O.rarity).shimmer} relative overflow-hidden`,children:[s.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${O.runewordActive?"border-amber-500/50":ma(O.rarity).border} ${ma(O.rarity).bg}`,style:{boxShadow:O.runewordActive?"0 0 20px rgba(245,158,11,0.3)":O.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":O.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:Pa(O.slot,O.runewordActive?"text-amber-400":ma(O.rarity).text,"w-7 h-7")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`text-lg font-bold ${O.runewordActive?"text-amber-300":ma(O.rarity).text}`,children:O.name}),s.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[O.rarity," ",O.slot]}),O.runewordActive&&s.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(an=UM(O))==null?void 0:an.name})]})]}),s.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(O.stats).map(([oe,xe])=>s.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[s.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:oe}),s.jsxs("span",{className:"font-mono font-bold",children:["+",xe]})]},oe))}),s.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:O.affixes.map((oe,xe)=>s.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[oe.name," (T",oe.tier,")"]},xe))})]}),(O.sockets||0)>0&&(()=>{const oe=O.sockets||0,xe=O.gems||[],$e=oe-xe.length,Pe=UM(O);return s.jsxs("div",{className:`p-4 rounded-xl border ${Pe?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[Pe&&s.jsxs("div",{className:"mb-3 text-center",children:[s.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),s.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:Pe.name}),s.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:Pe.lore}),s.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(Pe.bonusStats).map(([pt,cr])=>s.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",cr," ",pt.slice(0,3).toUpperCase()]},pt))}),Pe.bonusEffects&&Pe.bonusEffects.length>0&&s.jsx("div",{className:"mt-1",children:Pe.bonusEffects.map(pt=>s.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:pt.description},pt.id))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[s.jsx(N3,{className:"w-3 h-3"})," Gem Sockets (",xe.length,"/",oe,")"]}),s.jsxs("div",{className:"flex gap-2",children:[xe.map((pt,cr)=>{const tr=$M(O.rarity,pt.tier,O.unsocketCount||0);return s.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:pt.color,backgroundColor:`${pt.color}20`,boxShadow:`0 0 8px ${pt.color}40`},children:s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:pt.color}})}),s.jsx("span",{className:"text-[9px] text-gray-400",children:pt.name}),s.jsxs("button",{onClick:()=>gn(cr),disabled:B||xt<tr,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${tr} Flux`,children:["Remove (",tr," F)"]})]},cr)}),Array.from({length:$e}).map((pt,cr)=>s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${cr}`))]}),$e>0&&Et.length>0&&s.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Zi.ENCHANT," Flux)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Et.map(pt=>s.jsxs("button",{onClick:()=>un(pt.id),disabled:B||xt<Zi.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:pt.color}}),s.jsx("span",{className:"text-gray-300",children:pt.name}),s.jsxs("span",{className:"text-gray-600 font-mono",children:["+",pt.value]})]},pt.id))}),xe.length>0&&!Pe&&(()=>{const pt=xe.map(tr=>tr.name),cr=$E.filter(tr=>tr.requiredSockets===oe&&tr.pattern.slice(0,pt.length).every((Cn,Ba)=>Cn===pt[Ba]));return cr.length===0?null:s.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:cr.map(tr=>s.jsxs("div",{children:["Possible: ",s.jsx("span",{className:"font-bold text-amber-400/80",children:tr.name}),"  needs [",tr.pattern.join("  "),"]"]},tr.id))})})()]})]})})(),(O.sockets||0)<3&&s.jsxs("button",{onClick:Hr,disabled:B||xt<Zi.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(N3,{className:"w-4 h-4"}),"Add Socket (",Zi.SOCKET," Flux)  ",O.sockets||0,"/3"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const oe=O.slot==="RING"?"RING1":O.slot,xe=Fe[oe]||(O.slot==="RING"?Fe.RING2:null);if(!xe||xe.id===O.id)return null;const $e=ma(xe.rarity),Pe=new Set([...Object.keys(O.stats),...Object.keys(xe.stats)]);return s.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-xs font-bold ${$e.text}`,children:xe.name}),s.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:xe.rarity})]}),s.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(Pe).map(pt=>{const cr=O.stats[pt]||0,tr=xe.stats[pt]||0,Cn=cr-tr;return Cn===0?s.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[pt.slice(0,3).toUpperCase(),": 0"]},pt):s.jsxs("span",{className:`text-[10px] font-mono font-bold ${Cn>0?"text-green-400":"text-red-400"}`,children:[pt.slice(0,3).toUpperCase(),": ",Cn>0?"":"",Math.abs(Cn)]},pt)})})]})})(),(()=>{var xe;const oe=(xe=Object.entries(Fe).find(([,$e])=>$e&&$e.id===O.id))==null?void 0:xe[0];return oe?s.jsx("button",{onClick:()=>Wt(oe),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:B,children:"Unequip Gear"}):s.jsx("button",{onClick:()=>Ft(O),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:B,children:"Equip Gear"})})(),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),s.jsxs("button",{onClick:()=>Gt("RECALIBRATE"),disabled:B||xt<Zi.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Zi.RECALIBRATE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),s.jsxs("button",{onClick:()=>Gt("REFORGE"),disabled:B||xt<Zi.REFORGE||O.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Zi.REFORGE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),s.jsxs("button",{onClick:()=>Gt("OPTIMIZE"),disabled:B||xt<Zi.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Zi.OPTIMIZE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsxs("button",{onClick:Qt,disabled:B,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[s.jsx(Fr,{className:"w-4 h-4"}),"Salvage for ",zM(O)," Flux"]})]})]})}),Ge&&s.jsx(xTe,{user:t,classType:x,onClose:()=>He(!1)}),Ne&&s.jsx(pTe,{item:Ne,onClose:()=>We(null)}),s.jsx(Bi,{isOpen:L,onClose:Nt,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:s.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((oe,xe)=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][xe%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},xe))}),s.jsxs("div",{className:"relative inline-block mb-6",children:[s.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),s.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),s.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:s.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:it})})]}),s.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:s.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:et.rankName})}),s.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),R&&s.jsxs("div",{className:`${ma(R.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${ma(R.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),s.jsx("div",{className:`text-xl font-bold ${ma(R.rarity).text}`,children:R.name}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[R.rarity," ",R.slot]}),s.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(R.stats).map(([oe,xe])=>s.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",xe," ",oe.toUpperCase()]},oe))})]})]}),s.jsx("button",{onClick:Nt,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},STe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:o}=tk({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return s.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":o?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[s.jsxs("span",{children:["Gear Storage (",t.length,")"]}),s.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[s.jsx(af,{className:"w-3 h-3"})," Drag to equip"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>s.jsx(_Te,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>s.jsx(NTe,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},NTe=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=tk({id:`storage-cell-${t}`});return s.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},_Te=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:o,isDragging:c}=eY({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=ma(t.rarity);return s.jsxs("div",{ref:o,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var e4=typeof self<"u"?self:global;const sx=typeof navigator<"u",jTe=sx&&typeof HTMLImageElement>"u",b2=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),t4=e4.Buffer,tv=e4.BigInt,r4=!!t4,TTe=t=>t;function w2(t,e=TTe){if(b2)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let rk=e4.fetch;const ATe=t=>rk=t;if(!e4.fetch){const t=w2("http",(n=>n)),e=w2("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,o)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const x={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(x.port=Number(c));const y=(p==="https:"?await e:await t).request(x,(w=>{if(w.statusCode===301||w.statusCode===302){let N=new URL(w.headers.location,n).toString();return r(N,{headers:a}).then(i).catch(o)}i({status:w.statusCode,arrayBuffer:()=>new Promise((N=>{let S=[];w.on("data",(E=>S.push(E))),w.on("end",(()=>N(Buffer.concat(S))))}))})}));y.on("error",o),y.end()}));ATe(r)}function sr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const S2=t=>nY(t)?void 0:t,ETe=t=>t!==void 0;function nY(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(ETe).length===0)}function Ra(t){let e=new Error(t);throw delete e.stack,e}function Vd(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function $A(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const zA=t=>String.fromCharCode.apply(null,t),iV=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function aY(t){return iV?iV.decode(t):r4?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(zA(t)))}class as{static from(e,r){return e instanceof this&&e.le===r?e:new as(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof as){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Ra("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Ra("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=as){return e instanceof DataView||e instanceof as?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Ra("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new as(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return aY(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return zA(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return zA(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function UA(t,e){Ra(`${t} '${e}' was not loaded, try using full build of exifr.`)}class nk extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||UA(this.kind,e),r&&(e in r||(function(n,a){Ra(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||UA(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var hl=new nk("file parser"),Ca=new nk("segment parser"),yl=new nk("file reader");function kTe(t,e){return typeof t=="string"?sV(t,e):sx&&!jTe&&t instanceof HTMLImageElement?sV(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new as(t):sx&&t instanceof Blob?VA(t,e,"blob",x0):void Ra("Invalid input argument")}function sV(t,e){return(r=t).startsWith("data:")||r.length>1e4?FA(t,e,"base64"):b2&&t.includes("://")?VA(t,e,"url",g0):b2?FA(t,e,"fs"):sx?VA(t,e,"url",g0):void Ra("Invalid input argument");var r}async function VA(t,e,r,n){return yl.has(r)?FA(t,e,r):n?(async function(a,i){let o=await i(a);return new as(o)})(t,n):void Ra(`Parser ${r} is not loaded`)}async function FA(t,e,r){let n=new(yl.get(r))(t,e);return await n.read(),n}const g0=t=>rk(t).then((e=>e.arrayBuffer())),x0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class CTe extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function ba(t,e,r){let n=new CTe;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function y0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const oi=new Map,Bo=new Map,Ru=new Map,Su=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ip=["jfif","xmp","icc","iptc","ihdr"],v0=["tiff",...ip],la=["ifd0","ifd1","exif","gps","interop"],Nu=[...v0,...la],_u=["makerNote","userComment"],sp=["translateKeys","translateValues","reviveValues","multiSegment"],ju=[...sp,"sanitize","mergeOutput","silentErrors"];class iY{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class mm extends iY{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),sr(this,"enabled",!1),sr(this,"skip",new Set),sr(this,"pick",new Set),sr(this,"deps",new Set),sr(this,"translateKeys",!1),sr(this,"translateValues",!1),sr(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=la.includes(e),this.canBeFiltered&&(this.dict=oi.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Ra(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of sp)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of e)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,N2(this.pick,this.deps)):this.enabled&&this.pick.size>0&&N2(this.pick,this.deps)}}var Pi={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},oV=new Map;class C0 extends iY{static useCached(e){let r=oV.get(e);return r!==void 0||(r=new this(e),oV.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Ra(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=sx?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Su)this[e]=Pi[e];for(e of ju)this[e]=Pi[e];for(e of _u)this[e]=Pi[e];for(e of Nu)this[e]=new mm(e,Pi[e],void 0,this)}setupFromTrue(){let e;for(e of Su)this[e]=Pi[e];for(e of ju)this[e]=Pi[e];for(e of _u)this[e]=!0;for(e of Nu)this[e]=new mm(e,!0,void 0,this)}setupFromArray(e){let r;for(r of Su)this[r]=Pi[r];for(r of ju)this[r]=Pi[r];for(r of _u)this[r]=Pi[r];for(r of Nu)this[r]=new mm(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,la)}setupFromObject(e){let r;for(r of(la.ifd0=la.ifd0||la.image,la.ifd1=la.ifd1||la.thumbnail,Object.assign(this,e),Su))this[r]=sj(e[r],Pi[r]);for(r of ju)this[r]=sj(e[r],Pi[r]);for(r of _u)this[r]=sj(e[r],Pi[r]);for(r of v0)this[r]=new mm(r,Pi[r],e[r],this);for(r of la)this[r]=new mm(r,Pi[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,la,Nu),e.tiff===!0?this.batchEnableWithBool(la,!0):e.tiff===!1?this.batchEnableWithUserValue(la,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,la):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,la)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let o of a)this[o].enabled=!1;let i=lV(e,n);for(let[o,c]of i)N2(this[o].pick,c),this[o].enabled=!0}else if(r&&r.length){let i=lV(r,n);for(let[o,c]of i)N2(this[o].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=la.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of la)this[i].finalizeFilters()}get onlyTiff(){return!ip.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of v0)this[e].enabled&&!Ca.has(e)&&UA("segment parser",e)}}function lV(t,e){let r,n,a,i,o=[];for(a of e){for(i of(r=oi.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function sj(t,e){return t!==void 0?t:e!==void 0?e:void 0}function N2(t,e){for(let r of e)t.add(r)}sr(C0,"default",Pi);class Ju{constructor(e){sr(this,"parsers",{}),sr(this,"output",{}),sr(this,"errors",[]),sr(this,"pushToErrors",(r=>this.errors.push(r))),this.options=C0.useCached(e)}async read(e){this.file=await kTe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of hl)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Ra("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),S2(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Ca.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,e,r),c=await o.extractThumbnail();return r.close&&r.close(),c}}async function n4(t,e){let r=new Ju(e);return await r.read(t),r.parse()}var OTe=Object.freeze({__proto__:null,parse:n4,Exifr:Ju,fileParsers:hl,segmentParsers:Ca,fileReaders:yl,tagKeys:oi,tagValues:Bo,tagRevivers:Ru,createDictionary:ba,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:Su,otherSegments:ip,segments:v0,tiffBlocks:la,segmentsAndBlocks:Nu,tiffExtractables:_u,inheritables:sp,allFormatters:ju,Options:C0});class a4{constructor(e,r,n){sr(this,"errors",[]),sr(this,"ensureSegmentChunk",(async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(c){Ra(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Ra("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Ca.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class Co{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(e,r={}){return new this(e,new C0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof as?e:new as(e)}constructor(e,r={},n){sr(this,"errors",[]),sr(this,"raw",new Map),sr(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Ru.get(r),a=Bo.get(r),i=oi.get(r),o=this.options[r],c=o.reviveValues&&!!n,d=o.translateValues&&!!a,h=o.translateKeys&&!!i,p={};for(let[m,x]of e)c&&n.has(m)?x=n.get(m)(x):d&&a.has(m)&&(x=this.translateValue(x,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=x;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}sr(Co,"headerLength",4),sr(Co,"type",void 0),sr(Co,"multiSegment",!1),sr(Co,"canHandle",(()=>!1));function ITe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function RTe(t){return t>=224&&t<=239}function MTe(t,e,r){for(let[n,a]of Ca)if(a.canHandle(t,e,r))return n}class cV extends a4{constructor(...e){super(...e),sr(this,"appSegments",[]),sr(this,"jpegSegments",[]),sr(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ca.keyList())):(e=e===void 0?Ca.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Ca.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Ca.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;o.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,o,c,d,{file:h,findAll:p,wanted:m,remaining:x,options:y}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),RTe(n)){if(a=h.getUint16(e+2),i=MTe(h,e,a),i&&m.has(i)&&(o=Ca.get(i),c=o.findPosition(h,e),d=y[i],c.type=i,this.appSegments.push(c),!p&&(o.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||x.delete(i)):x.delete(i),x.size===0)))break;y.recordUnknownSegments&&(c=Co.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(ITe(n)){if(a=h.getUint16(e+2),n===218&&y.stopAfterSos!==!1)return;y.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,o,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?o=c.get(i):c.set(i,o=[]),o.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Ca.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}sr(cV,"type","jpeg"),hl.set("jpeg",cV);const DTe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class PTe extends Co{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(o){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),o=a.getUint32(e+4),c=DTe[i];if(c*o<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Ra(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Ra(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,o);if(i===2)return Vd(a.getString(e,o));if(i===7)return a.getUint8Array(e,o);if(o===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(o),h=c;for(let p=0;p<o;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Ra(`Invalid tiff type ${e}`)}}}class oj extends PTe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ra("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Ra(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,$A(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,$A(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",uV(...e.get(2),e.get(1))),e.set("longitude",uV(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of la)if(e=this[r],!nY(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function uV(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}sr(oj,"type","tiff"),sr(oj,"headerLength",10),Ca.set("tiff",oj);var LTe=Object.freeze({__proto__:null,default:OTe,Exifr:Ju,fileParsers:hl,segmentParsers:Ca,fileReaders:yl,tagKeys:oi,tagValues:Bo,tagRevivers:Ru,createDictionary:ba,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:Su,otherSegments:ip,segments:v0,tiffBlocks:la,segmentsAndBlocks:Nu,tiffExtractables:_u,inheritables:sp,allFormatters:ju,Options:C0,parse:n4});const ak={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ik=Object.assign({},ak,{firstChunkSize:4e4,gps:[1,2,3,4]});async function sY(t){let e=new Ju(ik);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const sk=Object.assign({},ak,{tiff:!1,ifd1:!0,mergeOutput:!1});async function oY(t){let e=new Ju(sk);await e.read(t);let r=await e.extractThumbnail();return r&&r4?t4.from(r):r}async function lY(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const ok=Object.assign({},ak,{firstChunkSize:4e4,ifd0:[274]});async function lk(t){let e=new Ju(ok);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const ck=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Fd=!0,qd=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Fd=Number(r)+.1*Number(n)<13.4,qd=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Fd=qd=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Fd=qd=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Fd=qd=Number(e)<77}}async function cY(t){let e=await lk(t);return Object.assign({canvas:Fd,css:qd},ck[e])}class BTe extends as{constructor(...e){super(...e),sr(this,"ranges",new $Te),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=r4?t4.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class $Te{constructor(){sr(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((o=>dV(e,o.offset,a)||dV(e,o.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let o=i.shift();o.offset=e,o.length=r,o.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function dV(t,e,r){return t<=e&&e<=r}class i4 extends BTe{constructor(e,r){super(0),sr(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}yl.set("blob",class extends i4{async readWhole(){this.chunked=!1;let t=await x0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await x0(n);return this.set(a,t,!0)}});var zTe=Object.freeze({__proto__:null,default:LTe,Exifr:Ju,fileParsers:hl,segmentParsers:Ca,fileReaders:yl,tagKeys:oi,tagValues:Bo,tagRevivers:Ru,createDictionary:ba,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:Su,otherSegments:ip,segments:v0,tiffBlocks:la,segmentsAndBlocks:Nu,tiffExtractables:_u,inheritables:sp,allFormatters:ju,Options:C0,parse:n4,gpsOnlyOptions:ik,gps:sY,thumbnailOnlyOptions:sk,thumbnail:oY,thumbnailUrl:lY,orientationOnlyOptions:ok,orientation:lk,rotations:ck,get rotateCanvas(){return Fd},get rotateCss(){return qd},rotation:cY});yl.set("url",class extends i4{async readWhole(){this.chunked=!1;let t=await g0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await rk(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==e&&(this.size=t+o),this.set(i,t,!0)}});as.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof tv!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),tv(e)<<tv(32)|tv(r)):void Ra("Trying to read 64b value but JS can only handle 53b numbers.")};class UTe extends a4{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class uY extends UTe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,c]=i;await this.file.ensureChunk(o,c);let d=4+this.file.getUint32(o);o+=d,c-=d,await this.registerSegment("tiff",o,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,o=e.start,c=this.file.getUint16(o);for(o+=2;c--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[o,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,x=this.file.getUintBytes(n,m);for(n+=m;x--;){let y=this.file.getUintBytes(n,d);n+=d+h+2+o;let w=this.file.getUint16(n);if(n+=2,y===r)return w>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=w*p}}}class dY extends uY{}sr(dY,"type","heic");class hV extends uY{}sr(hV,"type","avif"),hl.set("heic",dY),hl.set("avif",hV),ba(oi,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ba(oi,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ba(oi,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ba(Bo,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Km=ba(Bo,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const fV={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Km.set(37392,fV),Km.set(41488,fV);const lj={0:"Normal",1:"Low",2:"High"};function pV(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function mV(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function cj(t){if(typeof t=="string"){var[e,r,n,a,i,o]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(c.setHours(a),c.setMinutes(i),c.setSeconds(o)),Number.isNaN(+c)?t:c}}function gm(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(gV(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(gV(t[r],t[r+1]));return Vd(String.fromCodePoint(...e))}function gV(t,e){return t<<8|e}Km.set(41992,lj),Km.set(41993,lj),Km.set(41994,lj),ba(Ru,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?aY(t):t}],[306,cj],[40091,gm],[40092,gm],[40093,gm],[40094,gm],[40095,gm]]),ba(Ru,"exif",[[40960,mV],[36864,mV],[36867,cj],[36868,cj],[40962,pV],[40963,pV]]),ba(Ru,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class uj extends Co{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:as.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let o={},c={};for(let d of mY)o[d]=[],c[d]=0;return i.replace(HTe,((d,h,p)=>{if(h==="<"){let m=++c[p];return o[p].push(m),`${d}#${m}`}return`${d}#${o[p].pop()}`}))})(e);let r=Fh.findAll(e,"rdf","Description");r.length===0&&r.push(new Fh("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let o of i.properties)n=qTe(o.ns,a),hY(o,n);return(function(i){let o;for(let c in i)o=i[c]=S2(i[c]),o===void 0&&delete i[c];return S2(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}sr(uj,"type","xmp"),sr(uj,"multiSegment",!0),Ca.set("xmp",uj);class _2{static findAll(e){return fY(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(_2.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=pY(a),new _2(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Fh{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return fY(e,a).map(Fh.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new Fh(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=_2.findAll(n),this.children=Fh.findAll(a),this.value=this.children.length===0?pY(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return FTe(this.children.map(VTe));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)hY(r,e);return this.value!==void 0&&(e.value=this.value),S2(e)}}function hY(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var VTe=t=>t.serialize(),FTe=t=>t.length===1?t[0]:t,qTe=(t,e)=>e[t]?e[t]:e[t]={};function fY(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function pY(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const mY=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],HTe=new RegExp(`(<|\\/)(${mY.join("|")})`,"g");var GTe=Object.freeze({__proto__:null,default:zTe,Exifr:Ju,fileParsers:hl,segmentParsers:Ca,fileReaders:yl,tagKeys:oi,tagValues:Bo,tagRevivers:Ru,createDictionary:ba,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:Su,otherSegments:ip,segments:v0,tiffBlocks:la,segmentsAndBlocks:Nu,tiffExtractables:_u,inheritables:sp,allFormatters:ju,Options:C0,parse:n4,gpsOnlyOptions:ik,gps:sY,thumbnailOnlyOptions:sk,thumbnail:oY,thumbnailUrl:lY,orientationOnlyOptions:ok,orientation:lk,rotations:ck,get rotateCanvas(){return Fd},get rotateCss(){return qd},rotation:cY});let xV=w2("fs",(t=>t.promises));yl.set("fs",class extends i4{async readWhole(){this.chunked=!1,this.fs=await xV;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await xV,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});yl.set("base64",class extends i4{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let c=Math.min(e,this.size-t);if(r4){let d=t4.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class yV extends a4{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max($A(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}sr(yV,"type","tiff"),hl.set("tiff",yV);let WTe=w2("zlib");const KTe=["ihdr","iccp","text","itxt","exif"];class vV extends a4{constructor(...e){super(...e),sr(this,"catchError",(r=>this.errors.push(r))),sr(this,"metaChunks",[]),sr(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),o=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:o,offset:e,length:c,start:e+4+4,size:a,marker:i};KTe.includes(o)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),b2){let c=await WTe,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}sr(vV,"type","png"),hl.set("png",vV),ba(oi,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),y0(oi,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let bV=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];y0(oi,"ifd0",bV),y0(oi,"exif",bV),ba(Bo,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class dj extends Co{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}sr(dj,"type","jfif"),sr(dj,"headerLength",9),Ca.set("jfif",dj),ba(oi,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class wV extends Co{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}sr(wV,"type","ihdr"),Ca.set("ihdr",wV),ba(oi,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ba(Bo,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Tv extends Co{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,o=0;for(let h of a)o+=h.length;let c=new i(o),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new as(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Ra("ICC header is too short");for(let[r,n]of Object.entries(QTe)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:o}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Vd(this.chunk.getString(e+12,r))}parseText(e,r){return Vd(this.chunk.getString(e+8,r-8))}parseSig(e){return Vd(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,o=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,x=Vd(r.getUnicodeString(m,p));o.push({lang:d,country:h,text:x}),i+=a}return n===1?o[0].text:o}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}sr(Tv,"type","icc"),sr(Tv,"multiSegment",!0),sr(Tv,"headerLength",18);const QTe={4:Ul,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:Ul,16:Ul,20:Ul,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),o=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,o,c))},36:Ul,40:Ul,48:Ul,52:Ul,64:(t,e)=>t.getUint32(e),80:Ul};function Ul(t,e){return Vd(t.getString(e,4))}Ca.set("icc",Tv),ba(oi,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const rv={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},SV={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ba(Bo,"icc",[[4,rv],[12,SV],[40,Object.assign({},rv,SV)],[48,rv],[80,rv],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class nv extends Co{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(o,this.pluralizeValue(e.get(o),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}sr(nv,"type","iptc"),sr(nv,"translateValues",!1),sr(nv,"reviveValues",!1),Ca.set("iptc",nv),ba(oi,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ba(Bo,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const xm=["Monday","Tuesday","Wednesday","Thursday","Friday"],XTe=({user:t})=>{const e=Ma(),{confirm:r}=Po(),n=j.useMemo(()=>Ae.getWeekId(),[]),[a,i]=j.useState([]),[o,c]=j.useState("Monday"),[d,h]=j.useState(!1),p=j.useRef(null),[m,x]=j.useState(!1),y=t.enrolledClasses||(t.classType?[t.classType]:[]),[w,N]=j.useState(t.classType||y[0]||"Uncategorized");j.useEffect(()=>{const A=new Date().toLocaleDateString("en-US",{weekday:"long"});xm.includes(A)&&c(A)},[]),j.useEffect(()=>{const A=Ae.subscribeToEvidence(t.id,n,i);return()=>A()},[t.id,n]);const S=j.useMemo(()=>{const A=y[0]||"Uncategorized";return a.filter(T=>T.classType?T.classType===w:w===A)},[a,w,y]),E=A=>S.find(T=>T.dayOfWeek===A),C=A=>A?new Date(A).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,M=async A=>{var k;const T=(k=A.target.files)==null?void 0:k[0];if(T){h(!0);try{let F=null;if(T.type.startsWith("image/"))try{const te=await GTe.parse(T,["DateTimeOriginal"])||{};te.DateTimeOriginal&&(F=te.DateTimeOriginal.toISOString())}catch(te){console.warn("EXIF extraction failed",te)}const O=w.replace(/[^a-zA-Z0-9]/g,"_"),$=Math.random().toString(36).substring(2,9),B=Mm(Dm,`evidence/${t.id}/${n}/${O}_${o}_${$}`);await Wj(B,T);const G=await Kv(B),Q=E(o),K={id:`${t.id}_${n}_${o}_${O}`,studentId:t.id,weekId:n,classType:w,dayOfWeek:o,imageUrl:G,timestamp:new Date().toISOString(),exifDate:F,reflection:(Q==null?void 0:Q.reflection)||""};await Ae.uploadEvidence(K)}catch(F){e.error("Upload failed: "+(F instanceof Error?F.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},L=async(A,T)=>{const k=E(A);k&&k.reflection!==T&&await Ae.uploadEvidence({...k,reflection:T})},I=async()=>{if(!(S.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${w} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){x(!0);try{const T=new WJ,k=T.internal.pageSize.getWidth(),F=T.internal.pageSize.getHeight(),O=20,$=k-O*2,B=F-O;T.setFillColor(15,7,32),T.rect(0,0,k,40,"F"),T.setTextColor(255,255,255),T.setFontSize(22),T.setFont("helvetica","bold"),T.text("WEEKLY PROGRESS REPORT",O,18),T.setFontSize(10),T.setFont("helvetica","normal"),T.text(`Operative: ${t.name.toUpperCase()}`,O,28),T.text(`Class: ${w}`,O,33),T.text(`Cycle ID: ${n}`,O,38),T.text(`Generated: ${new Date().toLocaleDateString()}`,k-O,33,{align:"right"});let G=55;const Q=[...S].sort((H,K)=>xm.indexOf(H.dayOfWeek)-xm.indexOf(K.dayOfWeek));for(const H of Q){let K=null,te="JPEG",ae=0,ce=0,X=!1;try{const Ne=await fetch(H.imageUrl);if(!Ne.ok)throw new Error(`Image fetch failed: ${Ne.statusText}`);const We=await Ne.blob();K=await new Promise((we,Ye)=>{const nt=new FileReader;nt.onloadend=()=>we(nt.result),nt.onerror=Ye,nt.readAsDataURL(We)}),We.type==="image/png"&&(te="PNG"),We.type==="image/webp"&&(te="WEBP");const Y=T.getImageProperties(K),re=Y.width/Y.height,be=100;ae=$,ce=ae/re,ce>be&&(ce=be,ae=ce*re)}catch(Ne){console.warn("Image processing error for PDF",Ne),X=!0,ce=15}const ve=20+ce+12;G+ve>B&&(T.addPage(),G=O),T.setDrawColor(200,200,200),T.setLineWidth(.5),T.line(O,G,k-O,G),G+=6,T.setTextColor(15,7,32),T.setFontSize(16),T.setFont("helvetica","bold"),T.text(H.dayOfWeek.toUpperCase(),O,G);const pe=C(H.exifDate)||C(H.timestamp);if(T.setFontSize(9),T.setFont("helvetica","italic"),T.setTextColor(100,100,100),T.text(`Captured: ${pe}`,k-O,G,{align:"right"}),G+=10,!X&&K){const Ne=(k-ae)/2;T.addImage(K,te,Ne,G,ae,ce),G+=ce+12}else T.setTextColor(255,0,0),T.setFontSize(8),T.text("[Image Error]",O,G),G+=15;T.setFont("helvetica","normal"),T.setFontSize(10);const Be=H.reflection||"No reflection logged for this cycle.",Ge=T.splitTextToSize(Be,$),He=Ge.length*5+15;G+He>B&&(T.addPage(),G=O),T.setTextColor(15,7,32),T.setFontSize(11),T.setFont("helvetica","bold"),T.text("DAILY REFLECTION:",O,G),G+=6,T.setFont("helvetica","normal"),T.setFontSize(10),T.setTextColor(60,60,60),T.text(Ge,O,G),G+=Ge.length*5+25}T.save(`Report_${w.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Ae.deleteWeeklyEvidence(S),e.success("PDF generated and evidence cleared.")}catch(T){console.error("PDF generation failed:",T),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{x(!1)}}},R=E(o);return s.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[s.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[s.jsx(RR,{className:"w-7 h-7"})," Weekly Evidence Log"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.length>1?s.jsxs("div",{className:"relative group",children:[s.jsx("select",{value:w,onChange:A=>N(A.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:y.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsx(si,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):s.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:w}),s.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),s.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),s.jsxs("button",{onClick:I,disabled:m||S.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?s.jsx(ki,{className:"w-5 h-5 animate-spin"}):s.jsx(Ale,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),s.jsx("input",{type:"file",ref:p,onChange:M,className:"hidden",accept:"image/*"}),s.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:xm.map(A=>{const T=E(A),k=o===A;return s.jsxs("button",{onClick:()=>c(A),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${k?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${k?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",xm.indexOf(A)+1]}),s.jsx("span",{className:"font-bold text-sm",children:A}),T&&s.jsx("div",{className:`absolute top-2 right-2 ${k?"text-emerald-200":"text-emerald-500"}`,children:s.jsx(dc,{className:"w-3 h-3"})})]},A)})}),s.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(mE,{className:"w-4 h-4"})," Evidence Capture (",w,")"]}),R&&s.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[s.jsx(oo,{className:"w-3 h-3"}),C(R.exifDate)||C(R.timestamp)]})]}),s.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:R?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:R.imageUrl,alt:o,className:"w-full h-full object-contain bg-black/20"}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},children:[s.jsx(Bu,{className:"w-8 h-8 text-emerald-400"}),s.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):s.jsxs("button",{onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?s.jsx(ki,{className:"w-10 h-10 animate-spin text-emerald-500"}):s.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:s.jsx(RR,{className:"w-8 h-8"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),s.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),s.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[s.jsx("div",{className:"mb-2",children:s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(N0,{className:"w-4 h-4"})," Daily Reflection"]})}),R?s.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${o} in ${w}...`,defaultValue:R.reflection,onBlur:A=>L(o,A.target.value)},o):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[s.jsx("div",{className:"mb-2 opacity-30",children:s.jsx(ao,{className:"w-6 h-6"})}),s.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),s.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},YTe=({user:t})=>{const e=Ma(),[r,n]=j.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=j.useState(""),[o,c]=j.useState(""),[d,h]=j.useState("");j.useEffect(()=>{const x=r.content.replace(/\$(.*?)\$/g,(y,w)=>{try{return db.renderToString(w,{throwOnError:!1})}catch{return w}}).replace(/\n/g,"<br/>");i(x)},[r.content]);const p=async()=>{await Ae.saveLabReport(r),await Ae.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const x=parseFloat(o),y=parseFloat(d);!isNaN(x)&&!isNaN(y)&&(n(w=>({...w,dataPoints:[...w.dataPoints,{x,y}].sort((N,S)=>N.x-S.x)})),c(""),h(""))};return s.jsxs("div",{className:"h-full flex flex-col gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[s.jsx(Z2,{className:"w-6 h-6"})," Physics Laboratory"]}),s.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[s.jsx(lf,{className:"w-4 h-4"})," Save Report"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:s.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),s.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[s.jsxs("div",{className:"w-1/3",children:[s.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"number",placeholder:"X",value:o,onChange:x=>c(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),s.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:x=>h(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),s.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(cK,{width:"100%",height:"100%",children:s.jsxs(f_e,{children:[s.jsx(pX,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx(Gw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),s.jsx(Ww,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),s.jsx(Ko,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),s.jsx(Hx,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),s.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:s.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[s.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:x=>n(y=>({...y,content:x.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),s.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:tW.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},JTe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],ZTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],eAe=({userId:t,classType:e,onClose:r})=>{var L,I,R,A,T;const[n,a]=j.useState(null),[i,o]=j.useState(!0);if(j.useEffect(()=>{(async()=>{const F=await Ae.getPublicProfile(t);a(F),o(!1)})()},[t]),i)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=c0(p),x=aW(p),{equipped:y,appearance:w}=Vu(n,e),N=FE({gamification:{...c,equipped:y}}),S=u0(y),E=((I=c.classXp)==null?void 0:I[e])||0,C=Object.values(y).filter(Boolean),M=UE(C);return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:s.jsx(Mn,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-32 shrink-0",children:s.jsx(ix,{equipped:y,appearance:w})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),s.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[x.name," - Level ",p]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gn,{className:"w-3 h-3 text-cyan-400"}),s.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[E.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3 text-yellow-400"}),s.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[S," GS"]})]})]})]})]})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(ds,{className:"w-3 h-3"})," Stats"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:JTe.map(({key:k,label:F,color:O,icon:$})=>{const B=N[k]||0;return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:$}),s.jsx("span",{className:"text-xs text-gray-400",children:F}),s.jsx("span",{className:`text-sm font-bold ${O} ml-auto`,children:B})]},k)})})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ZTe.map(k=>{const F=y[k];if(!F)return s.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[s.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:k}),s.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},k);const O=ma(F.rarity);return s.jsxs("div",{className:`p-2 rounded-lg border ${O.border} ${O.bg}`,children:[s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:k}),s.jsx("div",{className:`text-xs font-bold truncate ${O.text}`,children:F.name}),s.jsx("div",{className:"text-[9px] text-gray-500",children:F.rarity})]},k)})})]}),M.length>0&&s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(Ax,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),M.map(({set:k,activeBonus:F})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[s.jsx("div",{className:"text-xs font-bold text-purple-400",children:k.name}),s.jsxs("div",{className:"text-[10px] text-gray-400",children:[F.label,": ",F.effects.map(O=>`+${O.value} ${O.stat}`).join(", ")]})]},k.id))]}),(((R=c.unlockedAchievements)==null?void 0:R.length)||0)>0&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(A=c.unlockedAchievements)==null?void 0:A.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(T=c.unlockedAchievements)==null?void 0:T.slice(0,12).map(k=>s.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:k.replace(/_/g," ")},k))})]})]})})},tAe=()=>s.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>s.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[s.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),s.jsxs("div",{className:"space-y-2 text-right",children:[s.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),rAe=({user:t})=>{var m;const[e,r]=j.useState([]),[n,a]=j.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||Tr.AP_PHYSICS),[i,o]=j.useState(!0),[c,d]=j.useState(null);j.useEffect(()=>{const x=Ae.subscribeToLeaderboard(y=>{r(y),o(!1)});return()=>x()},[]);const h=j.useMemo(()=>{const x=t.enrolledClasses||[];if(x.length>0)return x.sort();const y=new Set;return e.forEach(w=>{var N;return(N=w.enrolledClasses)==null?void 0:N.forEach(S=>y.add(S))}),Array.from(y).sort()},[t.enrolledClasses,e]),p=j.useMemo(()=>e.filter(x=>{var y;return(y=x.enrolledClasses)==null?void 0:y.includes(n)}).sort((x,y)=>{var S,E,C,M;const w=((E=(S=x.gamification)==null?void 0:S.classXp)==null?void 0:E[n])||0;return(((M=(C=y.gamification)==null?void 0:C.classXp)==null?void 0:M[n])||0)-w}).slice(0,10),[e,n]);return s.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),s.jsxs("div",{className:"inline-block relative",children:[s.jsxs("select",{value:n,onChange:x=>a(x.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(x=>s.jsx("option",{value:x,children:x},x)),h.length===0&&s.jsx("option",{children:n})]}),s.jsx(si,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?s.jsx(tAe,{}):s.jsxs(s.Fragment,{children:[p.length>=3&&s.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(x=>{var A,T,k,F;const y=p[x];if(!y)return null;const w=(A=y.settings)==null?void 0:A.privacyMode,N=w?((T=y.gamification)==null?void 0:T.codename)||"Unknown Agent":y.name,S=((F=(k=y.gamification)==null?void 0:k.classXp)==null?void 0:F[n])||0,E=Math.floor(S/1e3)+1,C=c0(E),M=x===0,L=["h-28","h-20","h-16"],I=["w-20 h-20","w-14 h-14","w-14 h-14"],R=[{icon:s.jsx(cl,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:s.jsx(Ty,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:s.jsx(Ty,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return s.jsxs("div",{className:`flex flex-col items-center ${M?"order-2":x===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+x*.15}s both`},children:[s.jsxs("div",{className:`relative mb-2 ${M?"mb-3":""}`,children:[s.jsx("div",{className:`${I[x]} rounded-full p-0.5 bg-white/10 ring-2 ${R[x].ring} relative ${M?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:s.jsx("img",{src:y.avatarUrl,alt:N,className:`w-full h-full rounded-full border-2 ${C.tierColor.split(" ")[0]} object-cover`})}),s.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${R[x].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:R[x].icon})]}),s.jsxs("div",{className:`text-center ${M?"mt-2":"mt-1"}`,children:[s.jsx("div",{className:`font-bold truncate max-w-[100px] ${M?"text-sm text-white":"text-xs text-gray-300"} ${w?"italic":""}`,children:N}),s.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${M?"text-xl":"text-base"}`,children:S.toLocaleString()}),s.jsx("div",{className:`text-[9px] font-mono uppercase ${C.tierColor.split(" ")[1]}`,children:C.rankName}),s.jsxs("button",{onClick:()=>d(y.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[s.jsx(o0,{className:"w-3 h-3"})," Inspect"]})]}),s.jsx("div",{className:`${L[x]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${x===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":x===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},y.id)})}),s.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((x,y)=>{var L,I,R,A;const w=p.length>=3?y+3:y,N=(L=x.settings)==null?void 0:L.privacyMode,S=N?((I=x.gamification)==null?void 0:I.codename)||"Unknown Agent":x.name,E=((A=(R=x.gamification)==null?void 0:R.classXp)==null?void 0:A[n])||0,C=Math.floor(E/1e3)+1,M=c0(C);return s.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*w}s both`},children:[s.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[w<3&&w===0&&s.jsx(cl,{className:"w-6 h-6 text-yellow-400 mx-auto"}),w<3&&w===1&&s.jsx(Ty,{className:"w-6 h-6 text-gray-300 mx-auto"}),w<3&&w===2&&s.jsx(Ty,{className:"w-6 h-6 text-amber-600 mx-auto"}),w>=3&&`#${w+1}`]}),s.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[s.jsx("img",{src:x.avatarUrl,alt:S,className:`w-full h-full rounded-full border-2 ${M.tierColor.split(" ")[0]}`}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:C})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:`text-base font-bold truncate ${N?"text-purple-300 italic":"text-white"}`,children:[S,N&&s.jsx(sf,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${M.tierColor.split(" ")[1]}`,children:M.rankName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:E.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),s.jsx("button",{onClick:()=>d(x.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:s.jsx(o0,{className:"w-4 h-4"})})]},x.id)}),p.length===0&&s.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[s.jsx(us,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&s.jsx(eAe,{userId:c,classType:n,onClose:()=>d(null)})]})};class nAe extends se.Component{constructor(r){super(r);EO(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),s.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&s.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),s.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[s.jsx(ab,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const NV={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:s.jsx(Ro,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:s.jsx(eb,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:s.jsx(Ax,{className:"w-4 h-4"})}},aAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},hj=3;function fj(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const iAe=({assignment:t})=>{const e=Ma(),[r,n]=j.useState([]),[a,i]=j.useState([]),[o,c]=j.useState(!0),[d,h]=j.useState(!1),[p,m]=j.useState({}),[x,y]=j.useState(1),[w,N]=j.useState(null),[S,E]=j.useState(new Set),C=j.useRef({engagementTime:0}),M=j.useRef(Date.now());j.useEffect(()=>{const G=setInterval(()=>{Date.now()-M.current<6e4&&(C.current.engagementTime+=1)},1e3);return()=>clearInterval(G)},[]),j.useEffect(()=>{const G=()=>{M.current=Date.now()},Q=["mousemove","keydown","scroll","click"];return Q.forEach(H=>window.addEventListener(H,G)),()=>Q.forEach(H=>window.removeEventListener(H,G))},[]),j.useEffect(()=>()=>{var Q;const G=C.current.engagementTime;if(G>=5){const H=(Q=Nj().currentUser)==null?void 0:Q.uid;H&&Ae.submitReviewEngagement(H,t.id,t.title,t.classType,G).catch(()=>{})}},[t.id,t.title,t.classType]);const L=j.useCallback(G=>{const Q=fj(G.filter(te=>te.tier===1),hj),H=fj(G.filter(te=>te.tier===2),hj),K=fj(G.filter(te=>te.tier===3),hj);i([...Q,...H,...K]),m({}),N(null)},[]);j.useEffect(()=>{(async()=>{var Q;c(!0),h(!1);try{const H=await ga(ct(Oe,"question_banks",t.id));if(!H.exists()){h(!0);return}const K=H.data().questions||[];n(K),L(K)}catch(H){console.error("Failed to load question bank:",H),h(!0);return}finally{c(!1)}try{const H=(Q=Nj().currentUser)==null?void 0:Q.uid;if(H){const K=await ga(ct(Oe,"review_progress",`${H}_${t.id}`));K.exists()&&E(new Set(K.data().answeredQuestions||[]))}}catch(H){console.warn("Could not load review progress:",H)}})()},[t.id,L]);const I=()=>{r.length>0&&L(r)},R=(G,Q,H)=>{const K=p[G];if(!(K!=null&&K.submitted))if(H==="multiple_select"||H==="ranking"){const te=(K==null?void 0:K.selected)||[],ae=te.includes(Q)?te.filter(ce=>ce!==Q):[...te,Q];m(ce=>({...ce,[G]:{...ce[G],selected:ae,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(te=>({...te,[G]:{selected:Q,submitted:!1,correct:!1,xpAwarded:!1}}))},A=(G,Q)=>{var H;(H=p[G])!=null&&H.submitted||m(K=>({...K,[G]:{...K[G],linkedSelected:Q}}))},T=async G=>{const Q=p[G.id];if(!(Q!=null&&Q.selected))return;let H=!1;if(G.type==="multiple_select"||G.type==="ranking"){const K=Q.selected,te=G.correctAnswer;H=K.length===te.length&&K.every((ae,ce)=>ae===te[ce])}else G.type==="linked_mc"?H=Q.selected===G.correctAnswer&&(!G.linkedFollowUp||Q.linkedSelected===G.linkedFollowUp.correctAnswer):H=Q.selected===G.correctAnswer;if(H)if(S.has(G.id))m(K=>({...K,[G.id]:{...K[G.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(K=>({...K,[G.id]:{...K[G.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await Yj({assignmentId:t.id,questionId:G.id,xpAmount:G.xp,classType:t.classType})).data.awarded?(e.success(`+${G.xp} XP earned!`),m(ae=>({...ae,[G.id]:{...ae[G.id],submitted:!0,correct:!0,xpAwarded:!0}})),E(ae=>new Set([...ae,G.id]))):e.success("Correct! (XP already claimed)")}catch(K){console.error("XP award error:",K)}}else{const K=Math.ceil(G.xp/2);m(te=>({...te,[G.id]:{...te[G.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:K}})),e.error(`-${K} XP penalty`);try{await Qoe({assignmentId:t.id,questionId:G.id,classType:t.classType})}catch(te){console.error("Penalty error:",te)}}},k=j.useMemo(()=>a.filter(G=>G.tier===x),[a,x]),F=j.useMemo(()=>Object.entries(p).filter(([,G])=>G.correct&&G.xpAwarded).reduce((G,[Q])=>{var H;return G+(((H=a.find(K=>K.id===Q))==null?void 0:H.xp)||0)},0),[p,a]),O=j.useMemo(()=>Object.values(p).reduce((G,Q)=>G+(Q.penalty||0),0),[p]),$=j.useMemo(()=>a.reduce((G,Q)=>G+Q.xp,0),[a]),B=j.useMemo(()=>a.length>0&&a.every(G=>{var Q;return(Q=p[G.id])==null?void 0:Q.submitted}),[a,p]);return o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(ki,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Ro,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ro,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),s.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"w-4 h-4 text-yellow-400"}),s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:F}),O>0&&s.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",O]}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",$," XP"]})]}),s.jsxs("button",{onClick:I,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[s.jsx(ab,{className:"w-3 h-3"})," New Set"]})]})]}),s.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(G=>{const Q=NV[G],H=a.filter(ae=>ae.tier===G),K=H.filter(ae=>{var ce;return(ce=p[ae.id])==null?void 0:ce.submitted}).length,te=H.filter(ae=>{var ce;return(ce=p[ae.id])==null?void 0:ce.correct}).length;return s.jsxs("button",{onClick:()=>y(G),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${x===G?`${Q.bg} ${Q.color} ${Q.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[Q.icon,s.jsx("span",{className:"hidden sm:inline",children:Q.name}),s.jsxs("span",{className:"sm:hidden",children:["Tier ",G]}),K>0&&s.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${te===H.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[te,"/",H.length]})]},G)})}),B&&s.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),s.jsxs("button",{onClick:I,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[s.jsx(ab,{className:"w-3 h-3"})," New Questions"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[k.map((G,Q)=>{const H=p[G.id],K=w===G.id,te=H==null?void 0:H.submitted,ae=H==null?void 0:H.correct,ce=NV[G.tier];return s.jsxs("div",{className:`rounded-2xl border transition-all ${te?ae?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":K?`${ce.border} ${ce.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[s.jsxs("button",{onClick:()=>N(K?null:G.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${te?ae?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${ce.bg} ${ce.color}`}`,children:te?ae?s.jsx($r,{className:"w-4 h-4"}):s.jsx(so,{className:"w-4 h-4"}):Q+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${ce.color}`,children:G.bloomsLevel}),s.jsx("span",{className:"text-[9px] text-gray-600",children:""}),s.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:aAe[G.type]||G.type}),s.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(Gn,{className:"w-3 h-3"}),G.xp," XP"]}),s.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(G.xp/2)," if wrong"]})]}),s.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:G.stem})]}),s.jsx(ao,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${K?"rotate-90":""}`})]}),K&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[G.context&&s.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:G.context}),G.type==="ranking"?s.jsx(lAe,{question:G,answer:H,onSelect:R}):G.type==="multiple_select"?s.jsx(oAe,{question:G,answer:H,onSelect:R}):s.jsx(sAe,{question:G,answer:H,onSelect:R}),G.type==="linked_mc"&&G.linkedFollowUp&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[s.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),s.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:G.linkedFollowUp.stem}),s.jsx("div",{className:"space-y-2",children:G.linkedFollowUp.options.map(X=>{const ie=(H==null?void 0:H.linkedSelected)===X.id,ne=te,ve=X.id===G.linkedFollowUp.correctAnswer;return s.jsxs("button",{onClick:()=>A(G.id,X.id),disabled:te,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${ne?ve?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ie?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ie?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[X.id.toUpperCase(),"."]})," ",X.text]},X.id)})})]}),te?s.jsxs("div",{className:`p-4 rounded-xl border ${ae?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ae?s.jsx($r,{className:"w-5 h-5 text-emerald-400"}):s.jsx(so,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:`font-bold text-sm ${ae?"text-emerald-400":"text-red-400"}`,children:ae?`Correct! +${G.xp} XP`:`Incorrect  ${(H==null?void 0:H.penalty)||Math.ceil(G.xp/2)} XP penalty`})]}),s.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:G.explanation})]}):s.jsx("button",{onClick:()=>T(G),disabled:!(H!=null&&H.selected)||Array.isArray(H==null?void 0:H.selected)&&H.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},G.id)}),k.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[s.jsx(sf,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},sAe=({question:t,answer:e,onSelect:r})=>s.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,o=n.id===t.correctAnswer;return s.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?o?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),oAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const o=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return s.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":o?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":o?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${o?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:o&&s.jsx($r,{className:"w-3 h-3 text-white"})}),s.jsxs("span",{children:[s.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},lAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[s.jsx(fE,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&s.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((o,c)=>{const d=t.options.find(p=>p.id===o),h=a&&i[c]===o;return s.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},o)})}),t.options.map(o=>{const c=n.includes(o.id),d=n.indexOf(o.id);return s.jsxs("button",{onClick:()=>r(t.id,o.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?s.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):s.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),o.text]},o.id)})]})};function cAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${db.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return db.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const uAe=({assignment:t,onComplete:e})=>{const[r,n]=j.useState(null),[a,i]=j.useState(!0),[o,c]=j.useState(!1),d=j.useRef(Xv()),h=j.useRef(Date.now()),p=j.useRef(e),[m,x]=j.useState(!0),[y,w]=j.useState(0);j.useEffect(()=>{p.current=e},[e]);const N=j.useCallback(()=>{h.current=Date.now(),m||x(!0)},[m]);j.useEffect(()=>{const E=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,w(d.current.engagementTime),m||x(!0)):m&&x(!1)},1e3);return()=>clearInterval(E)},[m]),j.useEffect(()=>{const E=["mousemove","keydown","scroll","click"];return E.forEach(C=>window.addEventListener(C,N)),()=>{E.forEach(C=>window.removeEventListener(C,N))}},[N]),j.useEffect(()=>()=>{p.current(d.current)},[]),j.useEffect(()=>{(async()=>{i(!0);try{const C=await ga(ct(Oe,"reading_materials",t.id));C.exists()?n(C.data()):c(!0)}catch(C){console.error("Failed to load reading material:",C),c(!0)}finally{i(!1)}})()},[t.id]);const S=j.useMemo(()=>r?r.sections.map(E=>({title:E.title,html:cAe(E.content)})):[],[r]);return a?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(ki,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):o||!r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(Oa,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?s.jsx(pE,{className:"w-4 h-4"}):s.jsx(oo,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(y/60),"m ",y%60,"s"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Ls,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:N,children:s.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),s.jsx("div",{className:"space-y-10",children:S.map((E,C)=>s.jsxs("div",{className:"group",children:[s.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[s.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:C+1}),E.title]}),s.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:E.html}})]},C))}),s.jsx("div",{className:"mt-12 mb-4 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[s.jsx(Oa,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},dAe=({user:t})=>{const[e,r]=j.useState(!1),[n,a]=j.useState(""),[i,o]=j.useState("bug"),[c,d]=j.useState(!1),[h,p]=j.useState(!1),m=async()=>{if(n.trim()){d(!0);try{await Ae.submitBugReport({userId:t.id,userName:t.name,userEmail:t.email,category:i,description:n.trim(),page:window.location.pathname,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}),p(!0),setTimeout(()=>{p(!1),r(!1),a("")},2e3)}catch{}finally{d(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 left-4 z-40 p-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-full text-gray-400 hover:text-white transition-all shadow-lg backdrop-blur-md group",title:"Report a bug",children:s.jsx(Jv,{className:"w-4 h-4 group-hover:text-amber-400 transition"})}),e&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:()=>r(!1),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsx("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-md shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-300",onClick:x=>x.stopPropagation(),children:h?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(dc,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Report Submitted"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Thanks for helping improve Porter Portal!"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Jv,{className:"w-5 h-5 text-amber-400"})," Report an Issue"]}),s.jsx("button",{onClick:()=>r(!1),className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Mn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:["bug","feature","other"].map(x=>s.jsx("button",{onClick:()=>o(x),className:`flex-1 px-3 py-2 rounded-xl text-xs font-bold transition border ${i===x?"bg-purple-600/60 text-white border-purple-500/50":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10"}`,children:x==="bug"?"Bug":x==="feature"?"Feature Request":"Other"},x))}),s.jsx("textarea",{value:n,onChange:x=>a(x.target.value),placeholder:"Describe what happened or what you'd like to see...",rows:4,maxLength:1e3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("p",{className:"text-[10px] text-gray-600 text-right",children:[n.length,"/1000"]}),s.jsxs("button",{onClick:m,disabled:!n.trim()||c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl font-bold transition",children:[s.jsx(yE,{className:"w-4 h-4"}),c?"Submitting...":"Submit Report"]})]})]})})]})]})},hAe={3:"text-blue-400",7:"text-green-400",14:"text-purple-400",21:"text-amber-400",30:"text-red-400",50:"text-pink-400",100:"text-cyan-400"},fAe=({userId:t,streakData:e,compact:r})=>{var h,p;const[n,a]=j.useState(e||null),[i,o]=j.useState(null);if(j.useEffect(()=>{(async()=>{try{const x=await Ae.updateDailyStreak(t);x.freezeUsed?(o({message:"Streak Freeze used! Streak saved.",type:"freeze"}),setTimeout(()=>o(null),3e3)):x.newMilestone&&(o({message:`${x.newMilestone}-day streak milestone!`,type:"milestone"}),setTimeout(()=>o(null),3e3))}catch{}})()},[t]),j.useEffect(()=>{e&&a(e)},[e]),!n)return null;const c=n.currentStreak>=30?"text-red-400 animate-pulse":n.currentStreak>=14?"text-orange-400":n.currentStreak>=7?"text-amber-400":n.currentStreak>=3?"text-yellow-400":"text-gray-500";if(r)return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Ou,{className:`w-4 h-4 ${c}`}),s.jsx("span",{className:`text-sm font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-500"}`,children:n.currentStreak}),n.freezeTokens>0&&s.jsx("div",{className:"flex items-center gap-0.5 ml-1",title:`${n.freezeTokens} streak freeze${n.freezeTokens!==1?"s":""}`,children:Array.from({length:n.freezeTokens}).map((m,x)=>s.jsx(_3,{className:"w-3 h-3 text-cyan-400"},x))})]});const d=Array.from({length:7}).map((m,x)=>{var E;const y=new Date(Date.now()-(6-x)*864e5).toISOString().split("T")[0],w=(E=n.streakHistory)==null?void 0:E.includes(y),N=y===new Date().toISOString().split("T")[0],S=new Date(y).toLocaleDateString("en-US",{weekday:"narrow"});return{date:y,isActive:w,isToday:N,dayLabel:S}});return s.jsxs("div",{className:"relative",children:[i&&s.jsxs("div",{className:`absolute -top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-xl text-xs font-bold animate-in slide-in-from-bottom-2 fade-in duration-300 whitespace-nowrap ${i.type==="freeze"?"bg-cyan-600/90 text-white":i.type==="milestone"?"bg-amber-600/90 text-white":"bg-orange-600/90 text-white"}`,children:[i.type==="freeze"&&s.jsx(_3,{className:"w-3 h-3 inline mr-1"}),i.type==="milestone"&&s.jsx(cl,{className:"w-3 h-3 inline mr-1"}),i.message]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ou,{className:`w-7 h-7 ${c}`}),s.jsxs("div",{children:[s.jsxs("div",{className:`text-2xl font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-400"}`,children:[n.currentStreak," Day",n.currentStreak!==1?"s":""]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold",children:["Current Streak | Best: ",n.longestStreak]})]})]}),s.jsx("div",{className:"flex items-center gap-1",title:`${n.freezeTokens} / ${n.maxFreezeTokens} freeze tokens`,children:Array.from({length:n.maxFreezeTokens}).map((m,x)=>s.jsx(_3,{className:`w-5 h-5 ${x<n.freezeTokens?"text-cyan-400":"text-gray-700"}`},x))})]}),s.jsx("div",{className:"flex gap-1.5",children:d.map(m=>s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-500 mb-1",children:m.dayLabel}),s.jsx("div",{className:`w-full aspect-square rounded-lg flex items-center justify-center text-xs font-bold transition ${m.isActive?"bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-500/20":m.isToday?"border-2 border-dashed border-amber-500/40 text-amber-500/40":"bg-white/5 text-gray-700"}`,children:m.isActive?s.jsx(Ou,{className:"w-3.5 h-3.5"}):""})]},m.date))}),(((h=n.milestones)==null?void 0:h.length)||0)>0&&s.jsx("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/5",children:(p=n.milestones)==null?void 0:p.map(m=>s.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full bg-white/5 border border-white/10 ${hAe[m]||"text-white"}`,children:[m,"d"]},m))})]})]})},pAe=({classConfigs:t,availableSections:e})=>{const r=Ma(),{confirm:n}=Po(),[a,i]=j.useState([]),[o,c]=j.useState(!1),[d,h]=j.useState(Tr.AP_PHYSICS),[p,m]=j.useState(""),[x,y]=j.useState(""),[w,N]=j.useState(null);j.useEffect(()=>{const R=Ae.subscribeToEnrollmentCodes(i);return()=>R()},[]);const S=async()=>{const R=await Ae.createEnrollmentCode(d,p||void 0,x?parseInt(x):void 0);r.success(`Code created: ${R}`),c(!1),m(""),y("")},E=(R,A)=>{navigator.clipboard.writeText(R),N(A),setTimeout(()=>N(null),2e3)},C=async R=>{await n({message:"Deactivate this enrollment code?",confirmLabel:"Deactivate"})&&await Ae.deactivateEnrollmentCode(R)},M=t&&t.length>0?t.map(R=>R.className):Object.values(Tr).filter(R=>R!=="Uncategorized"),L=a.filter(R=>R.isActive),I=a.filter(R=>!R.isActive);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(fg,{className:"w-5 h-5 text-emerald-400"}),"Enrollment Codes"]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(cn,{className:"w-3.5 h-3.5"})," Generate Code"]})]}),o&&s.jsxs("div",{className:"mb-5 p-4 bg-black/20 border border-white/10 rounded-xl space-y-3 animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("select",{value:d,onChange:R=>h(R.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:M.map(R=>s.jsx("option",{value:R,children:R},R))}),s.jsxs("select",{value:p,onChange:R=>m(R.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"",children:"No Section"}),e.map(R=>s.jsx("option",{value:R,children:R},R))]})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("input",{type:"number",min:"1",placeholder:"Max uses (unlimited if empty)",value:x,onChange:R=>y(R.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50"}),s.jsx("button",{onClick:S,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx(Mn,{className:"w-4 h-4"})})]})]}),L.length===0&&!o?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(fg,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active enrollment codes. Generate one to let students self-enroll."]}):s.jsx("div",{className:"space-y-2",children:L.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 border border-white/10 rounded-xl group hover:border-emerald-500/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("code",{className:"text-lg font-mono font-bold text-emerald-400 tracking-widest",children:R.code}),s.jsx("span",{className:"text-xs text-gray-500",children:R.classType}),R.section&&s.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded",children:R.section})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-[10px] text-gray-500",children:[R.usedCount," used",R.maxUses?` / ${R.maxUses}`:""]}),s.jsx("button",{onClick:()=>E(R.code,R.id),className:"p-1.5 text-gray-500 hover:text-white transition",title:"Copy code",children:w===R.id?s.jsx(Ao,{className:"w-3.5 h-3.5 text-green-400"}):s.jsx(nf,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>C(R.id),className:"p-1.5 text-gray-500 hover:text-red-400 transition",title:"Deactivate",children:s.jsx(ble,{className:"w-3.5 h-3.5"})})]})]},R.id))}),I.length>0&&s.jsxs("details",{className:"mt-4",children:[s.jsxs("summary",{className:"text-[10px] text-gray-500 cursor-pointer hover:text-gray-300 uppercase tracking-widest font-bold",children:[I.length," expired code",I.length!==1?"s":""]}),s.jsx("div",{className:"mt-2 space-y-1",children:I.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/10 border border-white/5 rounded-lg opacity-50",children:[s.jsx("code",{className:"text-sm font-mono text-gray-500",children:R.code}),s.jsxs("span",{className:"text-[10px] text-gray-600",children:[R.classType," | ",R.usedCount," used"]})]},R.id))})]})]})},gY=[{type:"TEXT",label:"Text",icon:s.jsx(Zle,{className:"w-4 h-4"}),description:"Plain text content",category:"Content"},{type:"SECTION_HEADER",label:"Section Header",icon:s.jsx(HH,{className:"w-4 h-4"}),description:"Section title & subtitle",category:"Content"},{type:"IMAGE",label:"Image",icon:s.jsx(mE,{className:"w-4 h-4"}),description:"Image with caption",category:"Content"},{type:"VIDEO",label:"Video",icon:s.jsx(Hf,{className:"w-4 h-4"}),description:"YouTube embed",category:"Content"},{type:"OBJECTIVES",label:"Objectives",icon:s.jsx(ds,{className:"w-4 h-4"}),description:"Learning objectives",category:"Content"},{type:"DIVIDER",label:"Divider",icon:s.jsx(tw,{className:"w-4 h-4"}),description:"Separator line",category:"Content"},{type:"EXTERNAL_LINK",label:"External Link",icon:s.jsx(J2,{className:"w-4 h-4"}),description:"Styled link card",category:"Content"},{type:"EMBED",label:"Embed",icon:s.jsx(FH,{className:"w-4 h-4"}),description:"iFrame embed",category:"Content"},{type:"INFO_BOX",label:"Info Box",icon:s.jsx(Tx,{className:"w-4 h-4"}),description:"Tip, warning, or note",category:"Content"},{type:"VOCABULARY",label:"Vocabulary",icon:s.jsx(Oa,{className:"w-4 h-4"}),description:"Term & definition",category:"Interactive"},{type:"VOCAB_LIST",label:"Vocab List",icon:s.jsx(GH,{className:"w-4 h-4"}),description:"Multiple terms",category:"Interactive"},{type:"ACTIVITY",label:"Activity",icon:s.jsx(Gn,{className:"w-4 h-4"}),description:"Activity instructions",category:"Interactive"},{type:"CHECKLIST",label:"Checklist",icon:s.jsx(gE,{className:"w-4 h-4"}),description:"Task list",category:"Interactive"},{type:"SORTING",label:"Sorting",icon:s.jsx(fE,{className:"w-4 h-4"}),description:"Categorize items",category:"Interactive"},{type:"DATA_TABLE",label:"Data Table",icon:s.jsx(YH,{className:"w-4 h-4"}),description:"Editable table",category:"Interactive"},{type:"BAR_CHART",label:"Bar Chart",icon:s.jsx(qf,{className:"w-4 h-4"}),description:"Interactive chart",category:"Interactive"},{type:"MC",label:"Multiple Choice",icon:s.jsx(Y2,{className:"w-4 h-4"}),description:"Question with options",category:"Questions"},{type:"SHORT_ANSWER",label:"Short Answer",icon:s.jsx(of,{className:"w-4 h-4"}),description:"Free-text question",category:"Questions"},{type:"RANKING",label:"Ranking",icon:s.jsx(af,{className:"w-4 h-4"}),description:"Reorder items",category:"Questions"},{type:"LINKED",label:"Linked Question",icon:s.jsx(tb,{className:"w-4 h-4"}),description:"Follow-up question",category:"Questions"}],qA=()=>`block_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,mAe=t=>{const e={id:qA(),type:t,content:""};switch(t){case"MC":return{...e,options:["",""],correctAnswer:0};case"SHORT_ANSWER":return{...e,acceptedAnswers:[""]};case"VOCABULARY":return{...e,term:"",definition:""};case"CHECKLIST":return{...e,items:[""]};case"INFO_BOX":return{...e,variant:"note"};case"SECTION_HEADER":return{...e,icon:"",title:"",subtitle:""};case"IMAGE":return{...e,url:"",caption:"",alt:""};case"VIDEO":return{...e,url:"",caption:""};case"OBJECTIVES":return{...e,title:"Learning Objectives",items:[""]};case"DIVIDER":return e;case"EXTERNAL_LINK":return{...e,title:"",url:"",buttonLabel:"Open",openInNewTab:!0};case"EMBED":return{...e,url:"",caption:"",height:500};case"VOCAB_LIST":return{...e,terms:[{term:"",definition:""}]};case"ACTIVITY":return{...e,icon:"",title:"",instructions:""};case"SORTING":return{...e,title:"",instructions:"",leftLabel:"Category A",rightLabel:"Category B",sortItems:[{text:"",correct:"left"}]};case"DATA_TABLE":return{...e,title:"",columns:[{key:"col1",label:"Column 1",editable:!0}],trials:3};case"BAR_CHART":return{...e,title:"",barCount:3,initialLabel:"Initial",finalLabel:"Final",deltaLabel:"Change",height:300};case"RANKING":return{...e,items:[""]};case"LINKED":return{...e,linkedBlockId:"",acceptedAnswers:[""]};default:return e}},gAe=({onSelect:t,onClose:e})=>{const r=["Content","Interactive","Questions"];return s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-1 bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl p-3 z-50 w-[480px] max-h-[50vh] overflow-y-auto",onClick:n=>n.stopPropagation(),children:r.map(n=>s.jsxs("div",{className:"mb-2 last:mb-0",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:n}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:gY.filter(a=>a.category===n).map(a=>s.jsxs("button",{type:"button",onClick:()=>{t(a.type),e()},className:"flex items-center gap-2 p-2 rounded-lg text-left hover:bg-white/5 transition group",children:[s.jsx("span",{className:"text-gray-500 group-hover:text-purple-400 transition",children:a.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] font-bold text-gray-300",children:a.label}),s.jsx("div",{className:"text-[9px] text-gray-600",children:a.description})]})]},a.type))})]},n))})},_V=({onInsert:t})=>{const[e,r]=j.useState(!1);return s.jsxs("div",{className:"relative flex items-center justify-center py-1 group",children:[s.jsx("div",{className:"absolute inset-x-0 top-1/2 h-px bg-white/5 group-hover:bg-purple-500/20 transition"}),s.jsx("button",{type:"button",onClick:()=>r(!e),className:"relative z-10 w-7 h-7 rounded-full bg-[#1a1b26] border border-white/10 hover:border-purple-500/40 hover:bg-purple-500/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(cn,{className:"w-3.5 h-3.5 text-gray-500 group-hover:text-purple-400"})}),e&&s.jsx(gAe,{onSelect:t,onClose:()=>r(!1)})]})},xAe=t=>{switch(t.type){case"TEXT":return t.content.slice(0,80)||"Empty text";case"MC":return t.content.slice(0,60)||"Multiple choice question";case"SHORT_ANSWER":return t.content.slice(0,60)||"Short answer question";case"VOCABULARY":return t.term||"Vocabulary term";case"CHECKLIST":return t.content||`${(t.items||[]).length} items`;case"INFO_BOX":return`${t.variant}: ${t.content.slice(0,50)}`;case"SECTION_HEADER":return`${t.icon||""} ${t.title||"Section"}`.trim();case"IMAGE":return t.caption||t.alt||"Image";case"VIDEO":return t.caption||"Video";case"OBJECTIVES":return t.title||"Objectives";case"DIVIDER":return"";case"EXTERNAL_LINK":return t.title||"Link";case"EMBED":return t.caption||"Embed";case"VOCAB_LIST":return`${(t.terms||[]).length} terms`;case"ACTIVITY":return t.title||"Activity";case"SORTING":return t.title||"Sorting activity";case"DATA_TABLE":return t.title||"Data table";case"BAR_CHART":return t.title||"Bar chart";case"RANKING":return t.content.slice(0,60)||"Ranking question";case"LINKED":return t.content.slice(0,60)||"Linked question";default:return t.type}},yAe=t=>gY.find(e=>e.type===t),vAe=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],bAe=({value:t,onChange:e,existingUnits:r})=>{const[n,a]=j.useState(!1),[i,o]=j.useState(""),c=j.useRef(null);j.useEffect(()=>{const p=m=>{c.current&&!c.current.contains(m.target)&&a(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const d=r.filter(p=>p.toLowerCase().includes(i.toLowerCase())),h=i&&!r.some(p=>p.toLowerCase()===i.toLowerCase());return s.jsxs("div",{ref:c,className:"relative",children:[s.jsx("label",{className:pr,children:"Unit"}),s.jsx("input",{type:"text",value:t,onChange:p=>{e(p.target.value),o(p.target.value)},onFocus:()=>{a(!0),o("")},placeholder:"Select or type a unit...",className:rr}),n&&r.length>0&&s.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-[#1a1b26] border border-white/10 rounded-xl shadow-2xl max-h-48 overflow-y-auto",children:[d.map(p=>s.jsx("button",{type:"button",onClick:()=>{e(p),a(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-purple-500/10 transition ${t===p?"text-purple-300 bg-purple-500/5":"text-gray-300"}`,children:p},p)),d.length===0&&!h&&s.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 italic",children:"No matching units"}),h&&s.jsxs("button",{type:"button",onClick:()=>{e(i),a(!1)},className:"w-full text-left px-4 py-2 text-sm text-emerald-400 hover:bg-emerald-500/10 transition flex items-center gap-2",children:[s.jsx(cn,{className:"w-3 h-3"}),' Create "',i,'"']})]})]})},wAe=({assignments:t,onClose:e,initialAssignmentId:r,classConfigs:n=[],users:a=[],availableSections:i=[],onCreateAssignment:o})=>{const c=Ma(),d=j.useMemo(()=>{const Le={};return t.sort((et,lt)=>et.title.localeCompare(lt.title)).forEach(et=>{const lt=et.unit||"Unassigned";Le[lt]||(Le[lt]=[]),Le[lt].push(et)}),Le},[t]),h=j.useMemo(()=>{const Le=Object.values(Tr).filter(lt=>lt!==Tr.UNCATEGORIZED),et=(n||[]).map(lt=>lt.className);return Array.from(new Set([...Le,...et]))},[n]),p=j.useMemo(()=>a.filter(Le=>Le.role==="STUDENT"),[a]),[m,x]=j.useState(r||null),[y,w]=j.useState(!1),[N,S]=j.useState([]),[E,C]=j.useState(null),[M,L]=j.useState(!1),[I,R]=j.useState(!1),[A,T]=j.useState(""),[k,F]=j.useState(""),[O,$]=j.useState(!1),[B,G]=j.useState(""),[Q,H]=j.useState(new Set(Object.keys(d))),[K,te]=j.useState(!1),[ae,ce]=j.useState(!1),[X,ie]=j.useState(""),[ne,ve]=j.useState("Unit 1: Overview"),[pe,Be]=j.useState("Textbook"),[Ge,He]=j.useState(""),[Ne,We]=j.useState(null),[Y,re]=j.useState(new Set([h[0]||Tr.AP_PHYSICS])),[be,we]=j.useState([]),[Ye,nt]=j.useState(""),[Ot,Ee]=j.useState(""),[ut,Nt]=j.useState(!1),wt=j.useMemo(()=>{const Le=Array.from(Y)[0];if(!Le)return i;const et=av(p,Le);return et.length>0?et:i},[Y,p,i]),zt=j.useMemo(()=>{const Le=new Set;return t.forEach(et=>{Y.has(et.classType)&&et.unit&&Le.add(et.unit)}),Array.from(Le).sort()},[t,Y]),de=j.useMemo(()=>t.find(Le=>Le.id===m)||null,[t,m]),Fe=j.useCallback(Le=>{const et=t.find(lt=>lt.id===Le);et&&(x(Le),w(!1),S(et.lessonBlocks||[]),ie(et.title),ve(et.unit||"Unit 1: Overview"),Be(et.category||"Textbook"),He(et.description||""),We(et.contentUrl||null),re(new Set([et.classType])),we(et.targetSections||[]),nt(et.scheduledAt?et.scheduledAt.slice(0,16):""),Ee(et.dueDate?et.dueDate.slice(0,16):""),C(null),L(!1),te(!1),ce(!1))},[t]),jt=j.useCallback(()=>{x(null),w(!0),S([]),ie(""),ve("Unit 1: Overview"),Be("Textbook"),He(""),We(null),re(new Set([h[0]||Tr.AP_PHYSICS])),we([]),nt(""),Ee(""),C(null),L(!1),te(!1),ce(!0)},[h]);se.useEffect(()=>{r&&Fe(r)},[r,Fe]);const qe=j.useCallback(Le=>{S(Le),te(!0)},[]),Ze=j.useCallback((Le,et)=>{const lt=mAe(et),Ft=[...N];Ft.splice(Le,0,lt),qe(Ft),C(lt.id)},[N,qe]),At=j.useCallback(Le=>{qe(N.filter((et,lt)=>lt!==Le))},[N,qe]),St=j.useCallback((Le,et)=>{const lt=Le+et;if(lt<0||lt>=N.length)return;const Ft=[...N];[Ft[Le],Ft[lt]]=[Ft[lt],Ft[Le]],qe(Ft)},[N,qe]),lr=j.useCallback(Le=>{const et={...N[Le],id:qA()},lt=[...N];lt.splice(Le+1,0,et),qe(lt)},[N,qe]),ye=j.useCallback((Le,et)=>{const lt={title:X,description:Ge,unit:ne,category:pe,status:Le,lessonBlocks:N,contentUrl:Ne};return be.length>0&&(lt.targetSections=be),et&&(lt.scheduledAt=new Date(et).toISOString()),Ot&&(lt.dueDate=new Date(Ot).toISOString()),de!=null&&de.id&&!y&&(lt.id=de.id),lt},[X,Ge,ne,pe,N,Ne,be,Ot,de,y]),it=j.useCallback(async(Le,et)=>{if(!X.trim()){c.error("Title is required.");return}if(Y.size===0){c.error("Select a target class.");return}$(!0);try{const lt=ye(Le,et);if(o)de!=null&&de.id&&!y?await o({...lt,classType:Array.from(Y)[0]}):await Promise.all(Array.from(Y).map(Ft=>o({...lt,classType:Ft})));else for(const Ft of Array.from(Y))await Ae.addAssignment({...lt,classType:Ft});c.success(Le===qa.DRAFT?"Draft saved.":et?"Deployment scheduled.":"Resource deployed!"),te(!1),w(!1)}catch(lt){c.error("Save failed."),console.error(lt)}finally{$(!1)}},[X,Y,ye,o,de,y,c]),xt=j.useCallback(async()=>{if(!(!de&&!y)){if(y){await it(qa.ACTIVE);return}$(!0);try{const Le=ye(de.status);await Ae.addAssignment({...de,...Le}),c.success("Saved!"),te(!1)}catch(Le){c.error("Failed to save."),console.error(Le)}finally{$(!1)}}},[de,y,it,ye,c]),Dt=j.useCallback(()=>{F("");try{const Le=JSON.parse(A);let et;if(Array.isArray(Le))et=Le;else if(Le!=null&&Le.blocks&&Array.isArray(Le.blocks))et=Le.blocks;else{F("JSON must be an array of blocks or { blocks: [...] }");return}et=et.map(lt=>{if(!lt.type)throw new Error('Block missing "type" field');return{...lt,id:lt.id||qA(),content:lt.content??""}}),qe([...N,...et]),R(!1),T(""),c.success(`${et.length} blocks imported!`)}catch(Le){F(Le instanceof Error?Le.message:"Invalid JSON")}},[A,N,qe,c]),Pt=j.useMemo(()=>{if(!B)return d;const Le=B.toLowerCase(),et={};return Object.entries(d).forEach(([lt,Ft])=>{const Wt=Ft.filter(Qt=>Qt.title.toLowerCase().includes(Le)||lt.toLowerCase().includes(Le));Wt.length>0&&(et[lt]=Wt)}),et},[d,B]),rt=de!==null||y;return s.jsxs("div",{className:"fixed inset-0 z-[9999] bg-[#0f0720] flex flex-col",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md border-b border-white/10 px-6 py-3 flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h1",{className:"text-lg font-black text-white tracking-tight flex items-center gap-2",children:[s.jsx(Oa,{className:"w-5 h-5 text-purple-400"})," Resource Editor"]}),rt&&s.jsxs("span",{className:"text-xs text-gray-400 bg-white/5 px-3 py-1 rounded-lg border border-white/10",children:[y?"New Resource":X,K&&s.jsx("span",{className:"ml-2 text-amber-400",children:"*unsaved"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>R(!I),className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/20 uppercase font-bold tracking-wider transition",children:[s.jsx(Bu,{className:"w-3 h-3"})," Paste JSON"]}),rt&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",onClick:()=>ce(!ae),className:`flex items-center gap-1.5 text-[10px] px-3 py-1.5 rounded-lg border uppercase font-bold tracking-wider transition ${ae?"text-amber-300 bg-amber-500/20 border-amber-500/30":"text-gray-300 bg-white/5 border-white/10 hover:text-white"}`,children:[s.jsx(l0,{className:"w-3 h-3"})," Settings"]}),s.jsxs("button",{type:"button",onClick:()=>L(!M),className:`flex items-center gap-1.5 text-[10px] px-3 py-1.5 rounded-lg border uppercase font-bold tracking-wider transition ${M?"text-purple-300 bg-purple-500/20 border-purple-500/30":"text-gray-300 bg-white/5 border-white/10 hover:text-white"}`,children:[s.jsx(o0,{className:"w-3 h-3"})," ",M?"Edit":"Preview"]}),s.jsxs("button",{type:"button",onClick:xt,disabled:O||!K,className:"flex items-center gap-1.5 text-[10px] text-emerald-300 bg-emerald-500/10 hover:bg-emerald-500/20 disabled:opacity-40 px-3 py-1.5 rounded-lg border border-emerald-500/20 uppercase font-bold tracking-wider transition",children:[s.jsx(lf,{className:"w-3 h-3"})," ",O?"Saving...":"Save"]})]}),s.jsx("div",{className:"w-px h-6 bg-white/10"}),s.jsx("button",{type:"button",onClick:e,className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx(Mn,{className:"w-5 h-5"})})]})]}),I&&s.jsx("div",{className:"bg-black/60 border-b border-white/10 px-6 py-4 shrink-0",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-3",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:["Paste a JSON array of blocks or ",s.jsx("code",{className:"text-purple-300",children:"{ blocks: [...] }"})]}),s.jsx("textarea",{value:A,onChange:Le=>{T(Le.target.value),F("")},placeholder:'[{"type":"TEXT","content":"Hello"}]',className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-xs font-mono text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition min-h-[120px]"}),k&&s.jsx("div",{className:"text-xs text-red-400 bg-red-500/10 border border-red-500/30 rounded-lg p-2",children:k}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Dt,disabled:!A.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Import"}),s.jsx("button",{type:"button",onClick:()=>{R(!1),T(""),F("")},className:"px-4 py-2 text-gray-400 hover:text-white text-xs transition",children:"Cancel"})]})]})}),s.jsxs("div",{className:"flex flex-1 min-h-0",children:[s.jsxs("div",{className:"w-72 border-r border-white/10 bg-black/20 flex flex-col shrink-0",children:[s.jsxs("div",{className:"p-3 border-b border-white/5 space-y-2",children:[s.jsxs("button",{onClick:jt,className:"w-full bg-purple-600 hover:bg-purple-500 text-white px-4 py-2.5 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition shadow-lg",children:[s.jsx(cn,{className:"w-4 h-4"})," New Resource"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Gf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",value:B,onChange:Le=>G(Le.target.value),placeholder:"Search resources...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:[(()=>{var Ft;const Le=Array.from(Y)[0],et=(Ft=n==null?void 0:n.find(Wt=>Wt.className===Le))==null?void 0:Ft.unitOrder;return fb(Object.keys(Pt),et).map(Wt=>[Wt,Pt[Wt]])})().map(([Le,et])=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>H(lt=>{const Ft=new Set(lt);return Ft.has(Le)?Ft.delete(Le):Ft.add(Le),Ft}),className:"w-full flex items-center gap-2 px-2 py-1.5 text-left hover:bg-white/5 rounded-lg transition",children:[Q.has(Le)?s.jsx(si,{className:"w-3 h-3 text-gray-500"}):s.jsx(ao,{className:"w-3 h-3 text-gray-500"}),s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest truncate flex-1",children:Le}),s.jsx("span",{className:"text-[9px] text-gray-600 font-mono",children:et.length})]}),Q.has(Le)&&et.map(lt=>{const Ft=lt.lessonBlocks&&lt.lessonBlocks.length>0,Wt=!!lt.contentUrl;return s.jsxs("button",{onClick:()=>Fe(lt.id),className:`w-full flex items-center gap-2 px-3 py-2 ml-2 rounded-lg text-left transition text-[11px] ${m===lt.id?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"text-gray-400 hover:text-gray-200 hover:bg-white/5"}`,children:[s.jsx(ew,{className:"w-3.5 h-3.5 shrink-0"}),s.jsx("span",{className:"truncate flex-1",children:lt.title}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[Ft&&s.jsxs("span",{className:"text-[8px] text-indigo-400 bg-indigo-500/10 px-1 rounded font-mono",children:[lt.lessonBlocks.length,"b"]}),Wt&&s.jsx("span",{className:"text-[8px] text-cyan-400 bg-cyan-500/10 px-1 rounded font-mono",children:"html"}),lt.status===qa.DRAFT&&s.jsx("span",{className:"text-[8px] text-blue-400 bg-blue-500/10 px-1 rounded font-mono",children:"draft"})]})]},lt.id)})]},Le)),Object.keys(Pt).length===0&&s.jsx("div",{className:"text-center py-8 text-gray-600 text-xs",children:"No resources found"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:rt?M?s.jsx("div",{className:"max-w-3xl mx-auto p-8",children:s.jsx(tT,{blocks:N,showSidebar:!0})}):s.jsxs("div",{className:"max-w-3xl mx-auto p-6 pb-32",children:[ae&&s.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-2xl p-5 mb-6 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(l0,{className:"w-3.5 h-3.5"})," Resource Settings"]}),s.jsx("button",{type:"button",onClick:()=>ce(!1),className:"text-gray-600 hover:text-gray-300 transition",children:s.jsx(Mn,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:X,onChange:Le=>{ie(Le.target.value),te(!0)},placeholder:"Resource title...",className:rr})]}),s.jsx(bAe,{value:ne,onChange:Le=>{ve(Le),te(!0)},existingUnits:zt}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Category"}),s.jsx("select",{value:pe,onChange:Le=>{Be(Le.target.value),te(!0)},className:rr,children:vAe.map(Le=>s.jsx("option",{value:Le,children:Le},Le))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Target Classes"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.map(Le=>s.jsx("button",{type:"button",onClick:()=>{const et=new Set(Y);et.has(Le)?et.size>1&&et.delete(Le):et.add(Le),re(et),we([]),te(!0)},className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${Y.has(Le)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Le},Le))})]}),s.jsx(xg,{availableSections:wt,selectedSections:be,onChange:Le=>{we(Le),te(!0)}}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[s.jsx("label",{className:"block text-[11px] font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),s.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-xs file:mr-3 file:py-1.5 file:px-3 file:rounded-full file:border-0 file:bg-purple-600 file:text-white file:text-xs",onChange:async Le=>{var et;if((et=Le.target.files)!=null&&et[0]){Nt(!0);try{const lt=await Ae.uploadHtmlResource(Le.target.files[0]);We(lt),te(!0),c.success("File uploaded!")}catch(lt){c.error("Upload failed: "+(lt instanceof Error?lt.message:"Unknown error"))}finally{Nt(!1)}}}}),ut&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[s.jsx(ki,{className:"w-3.5 h-3.5 animate-spin"})," Uploading..."]}),!ut&&Ne&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[s.jsx(dc,{className:"w-3.5 h-3.5"})," Resource uploaded"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Description ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("textarea",{value:Ge,onChange:Le=>{He(Le.target.value),te(!0)},placeholder:"Brief description...",className:`${Go} h-16`})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Schedule ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:Ye,onChange:Le=>{nt(Le.target.value),te(!0)},className:rr})]}),s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Due Date ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:Ot,onChange:Le=>{Ee(Le.target.value),te(!0)},className:rr})]})]}),s.jsxs("div",{className:"flex gap-2 pt-1",children:[s.jsxs("button",{type:"button",disabled:O,onClick:()=>it(qa.DRAFT),className:"flex-1 flex items-center justify-center gap-2 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-3 rounded-xl font-bold text-xs transition",children:[s.jsx(N0,{className:"w-3.5 h-3.5"})," Save Draft"]}),Ye?s.jsx("button",{type:"button",disabled:O,onClick:()=>it(qa.ACTIVE,Ye),className:"flex-[2] flex items-center justify-center gap-2 bg-amber-600 hover:bg-amber-500 text-white py-3 rounded-xl font-bold text-xs transition",children:O?s.jsx(ki,{className:"w-4 h-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(UH,{className:"w-3.5 h-3.5"})," Schedule"]})}):s.jsx("button",{type:"button",disabled:O,onClick:()=>it(qa.ACTIVE),className:"flex-[2] flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-500 text-white py-3 rounded-xl font-bold text-xs transition",children:O?s.jsx(ki,{className:"w-4 h-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(xE,{className:"w-3.5 h-3.5"})," Deploy"]})})]})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsx(_V,{onInsert:Le=>Ze(0,Le)}),N.map((Le,et)=>{const lt=yAe(Le.type),Ft=E===Le.id;return s.jsxs(se.Fragment,{children:[s.jsxs("div",{className:`border rounded-2xl transition-all ${Ft?"bg-white/5 border-purple-500/30 shadow-lg shadow-purple-500/5":"bg-white/[0.02] border-white/5 hover:border-white/15"}`,children:[s.jsxs("button",{type:"button",onClick:()=>C(Ft?null:Le.id),className:"w-full flex items-center gap-3 px-4 py-3 text-left",children:[s.jsx("span",{className:"text-gray-500",children:lt==null?void 0:lt.icon}),s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider w-24 shrink-0",children:lt==null?void 0:lt.label}),s.jsx("span",{className:"text-xs text-gray-400 truncate flex-1",children:xAe(Le)}),s.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",onClick:Wt=>Wt.stopPropagation(),children:[s.jsx("button",{type:"button",onClick:()=>St(et,-1),disabled:et===0,className:"p-1 text-gray-600 hover:text-white disabled:opacity-20 transition",children:s.jsx(jx,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>St(et,1),disabled:et===N.length-1,className:"p-1 text-gray-600 hover:text-white disabled:opacity-20 transition",children:s.jsx(si,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>lr(et),className:"p-1 text-gray-600 hover:text-blue-400 transition",children:s.jsx(nf,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>At(et),className:"p-1 text-gray-600 hover:text-red-400 transition",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]}),s.jsx(ao,{className:`w-4 h-4 text-gray-600 transition-transform ${Ft?"rotate-90":""}`})]}),Ft&&s.jsx("div",{className:"px-4 pb-4 border-t border-white/5 pt-3 animate-in fade-in slide-in-from-top-1 duration-200",children:s.jsx(SAe,{block:Le,allBlocks:N,onUpdate:Wt=>{const Qt=[...N];Qt[et]=Wt,qe(Qt)}})})]}),s.jsx(_V,{onInsert:Wt=>Ze(et+1,Wt)})]},Le.id)}),N.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-600",children:[s.jsxs("p",{className:"text-sm mb-2",children:["No blocks yet. Click the ",s.jsx(cn,{className:"w-4 h-4 inline"})," button above to add your first block."]}),s.jsx("p",{className:"text-xs",children:"Or paste JSON to import blocks in bulk."})]})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-8",children:[s.jsx(Oa,{className:"w-16 h-16 text-gray-700 mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-400 mb-2",children:"Select or Create a Resource"}),s.jsx("p",{className:"text-sm text-gray-600 max-w-md mb-6",children:"Choose a resource from the sidebar to edit, or create a new one."}),s.jsxs("button",{onClick:jt,className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl font-bold flex items-center gap-2 transition shadow-xl",children:[s.jsx(cn,{className:"w-5 h-5"})," New Resource"]})]})})]})]})},rr="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",Go="w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",pr="text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",SAe=({block:t,allBlocks:e,onUpdate:r})=>{switch(t.type){case"TEXT":return s.jsx("textarea",{value:t.content,onChange:n=>r({...t,content:n.target.value}),placeholder:"Enter text content...",className:`${Go} min-h-[80px]`,rows:3});case"SECTION_HEADER":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:n=>r({...t,icon:n.target.value}),placeholder:"",className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),placeholder:"Section title...",className:rr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Subtitle"}),s.jsx("input",{type:"text",value:t.subtitle||"",onChange:n=>r({...t,subtitle:n.target.value}),placeholder:"Optional subtitle...",className:rr})]})]});case"IMAGE":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Image URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),placeholder:"https://...",className:rr})]}),t.url&&s.jsx("img",{src:t.url,alt:t.alt||"",className:"max-h-32 rounded-lg border border-white/10 object-contain",onError:n=>n.currentTarget.style.display="none"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),placeholder:"Caption...",className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Alt Text"}),s.jsx("input",{type:"text",value:t.alt||"",onChange:n=>r({...t,alt:n.target.value}),placeholder:"Describe...",className:rr})]})]})]});case"VIDEO":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"YouTube URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),placeholder:"https://youtube.com/watch?v=...",className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),placeholder:"Caption...",className:rr})]})]});case"OBJECTIVES":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:rr})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ds,{className:"w-4 h-4 text-emerald-400 mt-2 shrink-0"}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},placeholder:`Objective ${i+1}`,className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add"]})]})}case"DIVIDER":return s.jsx("div",{className:"text-xs text-gray-500 italic",children:"Horizontal divider  no configuration needed."});case"EXTERNAL_LINK":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),className:rr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Description"}),s.jsx("input",{type:"text",value:t.content,onChange:n=>r({...t,content:n.target.value}),className:rr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Button Label"}),s.jsx("input",{type:"text",value:t.buttonLabel||"",onChange:n=>r({...t,buttonLabel:n.target.value}),className:rr})]}),s.jsx("div",{className:"flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx("input",{type:"checkbox",checked:t.openInNewTab??!0,onChange:n=>r({...t,openInNewTab:n.target.checked})})," New tab"]})})]})]});case"EMBED":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Embed URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),className:rr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||500,onChange:n=>r({...t,height:parseInt(n.target.value)||500}),className:rr})]})]})]});case"INFO_BOX":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex gap-2",children:["tip","warning","note"].map(n=>s.jsx("button",{type:"button",onClick:()=>r({...t,variant:n}),className:`px-3 py-1 rounded-lg border text-xs font-bold capitalize transition ${t.variant===n?n==="tip"?"bg-green-500/20 border-green-500/30 text-green-400":n==="warning"?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-blue-500/20 border-blue-500/30 text-blue-400":"bg-black/30 border-white/10 text-gray-400"}`,children:n},n))}),s.jsx("textarea",{value:t.content,onChange:n=>r({...t,content:n.target.value}),placeholder:"Content...",className:Go,rows:2})]});case"MC":{const n=t.options||["",""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Question...",className:Go,rows:2}),n.map((a,i)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>r({...t,correctAnswer:i}),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 ${t.correctAnswer===i?"border-green-500 bg-green-500":"border-gray-600"}`,children:t.correctAnswer===i&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,options:c})},placeholder:`Option ${String.fromCharCode(65+i)}`,className:`flex-1 ${rr}`}),n.length>2&&s.jsx("button",{type:"button",onClick:()=>{const o=n.filter((c,d)=>d!==i);r({...t,options:o,correctAnswer:t.correctAnswer===i?0:(t.correctAnswer||0)>i?(t.correctAnswer||0)-1:t.correctAnswer})},className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},i)),n.length<6&&s.jsxs("button",{type:"button",onClick:()=>r({...t,options:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Option"]})]})}case"SHORT_ANSWER":{const n=t.acceptedAnswers||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Question...",className:Go,rows:2}),s.jsx("label",{className:pr,children:"Accepted Answers"}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,acceptedAnswers:c})},placeholder:`Answer ${i+1}`,className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Answer"]})]})}case"VOCABULARY":return s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Term"}),s.jsx("input",{type:"text",value:t.term||"",onChange:n=>r({...t,term:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Definition"}),s.jsx("input",{type:"text",value:t.definition||"",onChange:n=>r({...t,definition:n.target.value}),className:rr})]})]});case"VOCAB_LIST":{const n=t.terms||[{term:"",definition:""}];return s.jsxs("div",{className:"space-y-2",children:[n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.term,onChange:o=>{const c=[...n];c[i]={...c[i],term:o.target.value},r({...t,terms:c})},placeholder:"Term",className:`flex-1 ${rr}`}),s.jsx("input",{type:"text",value:a.definition,onChange:o=>{const c=[...n];c[i]={...c[i],definition:o.target.value},r({...t,terms:c})},placeholder:"Definition",className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,terms:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,terms:[...n,{term:"",definition:""}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Term"]})]})}case"CHECKLIST":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Checklist title...",className:Go,rows:1}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-5 h-5 rounded border-2 border-gray-600 shrink-0 mt-1.5"}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},placeholder:`Item ${i+1}`,className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Item"]})]})}case"ACTIVITY":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:n=>r({...t,icon:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:rr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:n=>r({...t,instructions:n.target.value}),className:`${Go} min-h-[60px]`,rows:2})]})]});case"SORTING":{const n=t.sortItems||[{text:"",correct:"left"}];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:a=>r({...t,instructions:a.target.value}),className:Go,rows:1})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Left Category"}),s.jsx("input",{type:"text",value:t.leftLabel||"",onChange:a=>r({...t,leftLabel:a.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Right Category"}),s.jsx("input",{type:"text",value:t.rightLabel||"",onChange:a=>r({...t,rightLabel:a.target.value}),className:rr})]})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.text,onChange:o=>{const c=[...n];c[i]={...c[i],text:o.target.value},r({...t,sortItems:c})},placeholder:`Item ${i+1}`,className:`flex-1 ${rr}`}),s.jsxs("select",{value:a.correct,onChange:o=>{const c=[...n];c[i]={...c[i],correct:o.target.value},r({...t,sortItems:c})},className:`w-28 ${rr}`,children:[s.jsx("option",{value:"left",children:t.leftLabel||"Left"}),s.jsx("option",{value:"right",children:t.rightLabel||"Right"})]}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,sortItems:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,sortItems:[...n,{text:"",correct:"left"}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Item"]})]})}case"DATA_TABLE":{const n=t.columns||[{key:"col1",label:"Column 1",editable:!0}];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Rows"}),s.jsx("input",{type:"number",value:t.trials||3,onChange:a=>r({...t,trials:parseInt(a.target.value)||3}),className:rr})]})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.label,onChange:o=>{const c=[...n];c[i]={...c[i],label:o.target.value},r({...t,columns:c})},placeholder:"Label",className:`flex-1 ${rr}`}),s.jsx("input",{type:"text",value:a.unit||"",onChange:o=>{const c=[...n];c[i]={...c[i],unit:o.target.value},r({...t,columns:c})},placeholder:"Unit",className:`w-20 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,columns:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,columns:[...n,{key:`col${n.length+1}`,label:"",editable:!0}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Column"]})]})}case"BAR_CHART":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:rr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Bars"}),s.jsx("input",{type:"number",value:t.barCount||3,onChange:n=>r({...t,barCount:parseInt(n.target.value)||3}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||300,onChange:n=>r({...t,height:parseInt(n.target.value)||300}),className:rr})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Initial"}),s.jsx("input",{type:"text",value:t.initialLabel||"",onChange:n=>r({...t,initialLabel:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Delta"}),s.jsx("input",{type:"text",value:t.deltaLabel||"",onChange:n=>r({...t,deltaLabel:n.target.value}),className:rr})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Final"}),s.jsx("input",{type:"text",value:t.finalLabel||"",onChange:n=>r({...t,finalLabel:n.target.value}),className:rr})]})]})]});case"RANKING":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Ranking question...",className:Go,rows:2}),s.jsx("label",{className:pr,children:"Items (in correct order)"}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 mt-2 w-5 text-right",children:[i+1,"."]}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},className:`flex-1 ${rr}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Item"]})]})}case"LINKED":{const n=e.filter(i=>i.id!==t.id&&["MC","SHORT_ANSWER","RANKING"].includes(i.type)),a=t.acceptedAnswers||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Reference Block"}),s.jsxs("select",{value:t.linkedBlockId||"",onChange:i=>r({...t,linkedBlockId:i.target.value}),className:rr,children:[s.jsx("option",{value:"",children:"Select..."}),n.map(i=>s.jsxs("option",{value:i.id,children:[i.type,": ",(i.content||"").slice(0,40)]},i.id))]})]}),s.jsx("textarea",{value:t.content,onChange:i=>r({...t,content:i.target.value}),placeholder:"Follow-up question...",className:Go,rows:2}),s.jsx("label",{className:pr,children:"Accepted Answers"}),a.map((i,o)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:i,onChange:c=>{const d=[...a];d[o]=c.target.value,r({...t,acceptedAnswers:d})},className:`flex-1 ${rr}`}),a.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:a.filter((c,d)=>d!==o)}),className:"p-1 text-red-400",children:s.jsx(Fr,{className:"w-3.5 h-3.5"})})]},o)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...a,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(cn,{className:"w-3 h-3"})," Add Answer"]})]})}default:return s.jsxs("div",{className:"text-xs text-gray-500 italic",children:["Unknown block type: ",t.type]})}},NAe=({userName:t,userId:e,onLogout:r})=>{const[n,a]=j.useState(""),[i,o]=j.useState(!1),[c,d]=j.useState(null),[h,p]=j.useState(null),m=y=>{const w=y.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);a(w.length>4?w.slice(0,4)+"-"+w.slice(4):w),d(null)},x=async()=>{if(n.replace("-","").length<4){d("Please enter a valid enrollment code.");return}o(!0),d(null);try{const y=await Ae.redeemEnrollmentCode(n,e);y.success?p(`Enrolled in ${y.classType}! Refreshing...`):d(y.error||"Failed to redeem code.")}catch{d("Something went wrong. Please try again.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[s.jsx(rw,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:["Hi ",t,"! Your account is not yet enrolled in a class."]}),s.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-2xl p-6 mb-6 text-left",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-white mb-3",children:[s.jsx(fg,{className:"w-4 h-4 text-emerald-400"}),"Have an enrollment code?"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:n,onChange:y=>m(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!i&&x()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-center text-lg font-mono font-bold text-emerald-400 tracking-[0.2em] placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:i||!!h}),s.jsx("button",{onClick:x,disabled:i||!!h||n.replace("-","").length<4,className:"px-5 py-3 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl font-bold transition flex items-center gap-2",children:i?s.jsx(ki,{className:"w-4 h-4 animate-spin"}):"Join"})]}),c&&s.jsx("p",{className:"mt-3 text-sm text-red-400 animate-in fade-in slide-in-from-top-1 duration-200",children:c}),h&&s.jsxs("p",{className:"mt-3 text-sm text-emerald-400 flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[s.jsx(dc,{className:"w-4 h-4"})," ",h]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["No code? Ask ",eG," for one, or wait for manual authorization."]}),s.jsx("button",{onClick:r,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})})},jV={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING","Intel Dossier":"INTEL"},_Ae=()=>{var Ne,We;const[t,e]=j.useState(null),[r,n]=j.useState("Dashboard"),[a,i]=j.useState([]),[o,c]=j.useState([]),[d,h]=j.useState([]),[p,m]=j.useState([]),[x,y]=j.useState([]),[w,N]=j.useState(null),[S,E]=j.useState("STUDENT"),[C,M]=j.useState("WORK"),[L,I]=j.useState(!1),[R,A]=j.useState(!1),[T,k]=j.useState(!0),[F,O]=j.useState(!1),[$,B]=j.useState(new Set),G=j.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),Q=j.useRef(new Set);j.useEffect(()=>{if(!(t!=null&&t.id)||t.role===Fa.ADMIN)return;const Y=Ae.subscribeToMyGroups(t.id,re=>{Q.current=new Set(re.map(be=>be.id))});return()=>Y()},[t==null?void 0:t.id,t==null?void 0:t.role]);const H=j.useCallback(Y=>{const re=Date.now();G.current[Y]=re,localStorage.setItem("chatChannelLastSeen",JSON.stringify(G.current)),B(be=>{if(!be.has(Y))return be;const we=new Set(be);return we.delete(Y),we})},[]);j.useEffect(()=>{const Y=Ae.subscribeToRecentMessages(re=>{const be=new Set,we=G.current,Ye=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(nt=>`class_${nt.replace(/\s+/g,"_").toLowerCase()}`));for(const nt of re){if(!nt.channelId||nt.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==Fa.ADMIN){if(nt.channelId.startsWith("group_")){const ut=nt.channelId.slice(6);if(!Q.current.has(ut))continue}else if(nt.channelId.startsWith("class_")&&!Ye.has(nt.channelId))continue}const Ot=new Date(nt.timestamp).getTime(),Ee=we[nt.channelId]||0;Ot>Ee&&be.add(nt.channelId)}B(be)});return()=>Y()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const K=j.useMemo(()=>{const Y=new Map;return o.forEach(re=>{const be=Y.get(re.userId)||[];be.push(re),Y.set(re.userId,be)}),d.map(re=>{const be=Y.get(re.id)||[],we=be.length,Ye=Math.round(be.reduce((nt,Ot)=>{var Ee;return nt+(((Ee=Ot.metrics)==null?void 0:Ee.engagementTime)||0)},0)/60);return{...re,stats:{problemsCompleted:we,avgScore:0,rawAccuracy:0,totalTime:Ye}}})},[d,o]),te=j.useMemo(()=>{const Y=new Set;return d.forEach(re=>{re.section&&Y.add(re.section)}),Array.from(Y).sort()},[d]),ae=j.useMemo(()=>a.find(Y=>Y.id===w)||null,[a,w]);j.useEffect(()=>{if(I(!1),A(!1),!w)return;const Y=ga(ct(Oe,"question_banks",w)).then(be=>{be.exists()&&(be.data().questions||[]).length>0&&I(!0)}).catch(()=>{}),re=ga(ct(Oe,"reading_materials",w)).then(be=>{be.exists()&&A(!0)}).catch(()=>{});Promise.all([Y,re]).then(()=>{})},[w]),j.useEffect(()=>{let Y=null;const re=_te(Xj,async be=>{be?(await ce(be),Y=Vr(ct(Oe,"users",be.uid),we=>{we.exists()&&e(Ye=>({...Ye||{},...we.data(),id:be.uid}))})):(e(null),Y&&Y(),k(!1))});return()=>{re(),Y&&Y()}},[]),j.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Fa.ADMIN)){const Y=Ae.subscribeToAssignments(i),re=Ae.subscribeToClassConfigs(y),be=[Y,re];return t.role===Fa.ADMIN?(be.push(Ae.subscribeToSubmissions(c)),be.push(Ae.subscribeToUsers(h)),be.push(Ae.subscribeToWhitelist(m))):be.push(Ae.subscribeToUserSubmissions(t.id,c)),()=>be.forEach(we=>we())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),j.useEffect(()=>{(t==null?void 0:t.role)===Fa.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),j.useEffect(()=>{var Y;xce(((Y=t==null?void 0:t.settings)==null?void 0:Y.soundEffects)!==!1)},[(Ne=t==null?void 0:t.settings)==null?void 0:Ne.soundEffects]),pce((t==null?void 0:t.id)||null,((We=t==null?void 0:t.settings)==null?void 0:We.pushNotifications)===!0);const ce=async Y=>{try{const re=ct(Oe,"users",Y.uid),be=await ga(re),we=await ga(ct(Oe,"allowed_emails",Y.email||"")),nt=(await Y.getIdTokenResult()).claims.admin===!0||Y.email===oce,Ot=we.exists()||nt,Ee=we.exists()?we.data():null,ut=(Ee==null?void 0:Ee.classType)||Tr.UNCATEGORIZED,Nt=(Ee==null?void 0:Ee.classTypes)||(ut!==Tr.UNCATEGORIZED?[ut]:[]);if(be.exists()){const wt=be.data(),zt={lastLoginAt:new Date().toISOString(),isWhitelisted:Ot};if(nt&&(zt.role="ADMIN"),!Ot&&!nt&&(zt.enrolledClasses=[]),Ot&&Nt.length>0){const de=wt.enrolledClasses||[],Fe=Array.from(new Set([...de,...Nt]));Fe.length!==de.length&&(zt.enrolledClasses=Fe,(!wt.classType||wt.classType===Tr.UNCATEGORIZED)&&(zt.classType=Nt[0]))}await ur(re,zt)}else{const wt={email:Y.email,name:Y.displayName||"Student",avatarUrl:Y.photoURL||"",role:nt?"ADMIN":"STUDENT",classType:ut,enrolledClasses:Ot?Nt:[],isWhitelisted:Ot,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await ea(re,wt)}}catch(re){console.error(re)}finally{k(!1)}},X=async()=>{await jte(Xj),e(null),N(null)},ie=Y=>{M("WORK"),N(Y)},ne=j.useRef(ae),ve=j.useRef(t);j.useEffect(()=>{ne.current=ae},[ae]),j.useEffect(()=>{ve.current=t},[t]);const pe=async Y=>{const re=ve.current,be=ne.current;if(!(!re||!be||re.role===Fa.ADMIN)&&!(Y.engagementTime<10))try{await Ae.submitEngagement(re.id,re.name,be.id,be.title,Y,be.classType)}catch(we){console.error("Engagement submission failed:",we)}},Be=j.useMemo(()=>{const Y={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const re=x.find(be=>be.className===t.classType);if(re)return re.features}return Y},[t==null?void 0:t.role,t==null?void 0:t.classType,x]);if(T)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return s.jsx(S0e,{});if(!t.isWhitelisted&&t.role!==Fa.ADMIN)return s.jsx(NAe,{userName:t.name,userId:t.id,onLogout:X});const Ge=t.role===Fa.ADMIN||Be.physicsTools,He=t.role===Fa.ADMIN||Be.communications;return s.jsx(nAe,{children:s.jsx(N0e,{children:s.jsx(uce,{children:s.jsxs(s.Fragment,{children:[s.jsx(dce,{}),Ge&&s.jsx(ahe,{onToggleChat:He?()=>O(!F):void 0,hasUnreadChat:$.size>0}),He&&s.jsx(ohe,{user:t,isOpen:F,onClose:()=>O(!1),assignments:a,classConfigs:x,unreadChannels:$,onMarkChannelRead:H,onOpenResource:Y=>{ie(Y)}}),s.jsx(bce,{user:t,onLogout:X,activeTab:r,setActiveTab:n,children:ae?s.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[ae.title,t.role===Fa.ADMIN&&s.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),s.jsxs("div",{className:"flex gap-4 mt-2",children:[s.jsx("button",{onClick:()=>M("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${C==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),L&&s.jsxs("button",{onClick:()=>M("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${C==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Ro,{className:"w-3.5 h-3.5"})," Review"]}),R&&s.jsxs("button",{onClick:()=>M("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${C==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Oa,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&s.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[s.jsx("button",{onClick:()=>E("STUDENT"),className:`px-3 py-1.5 rounded transition ${S==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),s.jsx("button",{onClick:()=>E("ADMIN"),className:`px-3 py-1.5 rounded transition ${S==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),s.jsxs("button",{onClick:()=>{N(null),M("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[s.jsx(vle,{className:"w-4 h-4"})," Exit"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[C==="WORK"&&s.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(w0e,{onComplete:pe,contentUrl:ae.contentUrl,htmlContent:ae.htmlContent,userId:t.id,assignmentId:ae.id,classType:ae.classType,lessonBlocks:ae.lessonBlocks})}),S==="ADMIN"&&t.role===Fa.ADMIN&&s.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(l0,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:s.jsx(us,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o.filter(Y=>Y.assignmentId===ae.id&&!Y.isArchived).length}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),s.jsx("button",{onClick:()=>O(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),C==="REVIEW"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(iAe,{assignment:ae})}),C==="STUDY"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(uAe,{assignment:ae,onComplete:pe})})]})]}):s.jsx("div",{className:"h-full",children:s.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Fa.ADMIN&&s.jsxs(s.Fragment,{children:[r==="Dashboard"&&s.jsx(P0e,{users:K,assignments:a,submissions:o}),r==="User Management"&&s.jsx(L0e,{users:K,whitelistedEmails:p,classConfigs:x,onWhitelist:async(Y,re)=>Ae.addToWhitelist(Y,re)}),r==="Admin Panel"&&s.jsx(F0e,{assignments:a,submissions:o,users:d,onCreateAssignment:async Y=>{Y.title&&await Ae.addAssignment(Y)},classConfigs:x,availableSections:te,onPreviewAssignment:Y=>{E("STUDENT"),ie(Y)},onNavigate:n}),r==="Student Groups"&&s.jsx(rhe,{students:K.filter(Y=>Y.role==="STUDENT"),availableSections:te,fullPage:!0}),r==="Enrollment Codes"&&s.jsx(pAe,{classConfigs:x,availableSections:te}),r==="Resource Editor"&&s.jsx(wAe,{assignments:a,onClose:()=>n("Admin Panel"),classConfigs:x,users:d,availableSections:te,onCreateAssignment:async Y=>{Y.title&&await Ae.addAssignment(Y)}}),r.startsWith("XP Command:")&&s.jsx(the,{users:d,initialTab:r.split(":")[1]})]}),t.role===Fa.STUDENT&&s.jsxs(s.Fragment,{children:[r in jV&&s.jsx(wTe,{user:t,assignments:a,submissions:o,classConfigs:x,enabledFeatures:Be,onNavigate:n,onStartAssignment:ie,studentTab:jV[r]}),r==="Forensics"&&Be.evidenceLocker&&s.jsx(XTe,{user:t}),r==="Physics Lab"&&Be.physicsLab&&s.jsx(YTe,{user:t}),r==="Leaderboard"&&Be.leaderboard&&s.jsx(rAe,{user:t})]})]},r)})}),s.jsx(dAe,{user:t}),t.role===Fa.STUDENT&&s.jsx("div",{className:"fixed top-3 right-48 z-30",children:s.jsx(fAe,{userId:t.id,compact:!0})})]})})})})},xY=document.getElementById("root");if(!xY)throw new Error("Could not find root element to mount to");const jAe=nZ.createRoot(xY);jAe.render(s.jsx(se.StrictMode,{children:s.jsx(_Ae,{})}));
