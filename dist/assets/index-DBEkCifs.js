var BJ=Object.defineProperty;var $J=(t,e,r)=>e in t?BJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var wO=(t,e,r)=>$J(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as zJ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function en(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var K5={exports:{}},Gm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SO;function UJ(){if(SO)return Gm;SO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Gm.Fragment=e,Gm.jsx=r,Gm.jsxs=r,Gm}var NO;function VJ(){return NO||(NO=1,K5.exports=UJ()),K5.exports}var s=VJ(),Q5={exports:{}},or={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O;function FJ(){if(_O)return or;_O=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),x=Symbol.iterator;function y(Y){return Y===null||typeof Y!="object"?null:(Y=x&&Y[x]||Y["@@iterator"],typeof Y=="function"?Y:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,w={};function j(Y,ne,re){this.props=Y,this.context=ne,this.refs=w,this.updater=re||S}j.prototype.isReactComponent={},j.prototype.setState=function(Y,ne){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ne,"setState")},j.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function k(){}k.prototype=j.prototype;function I(Y,ne,re){this.props=Y,this.context=ne,this.refs=w,this.updater=re||S}var L=I.prototype=new k;L.constructor=I,N(L,j.prototype),L.isPureReactComponent=!0;var O=Array.isArray;function R(){}var A={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function C(Y,ne,re){var xe=re.ref;return{$$typeof:t,type:Y,key:ne,ref:xe!==void 0?xe:null,props:re}}function U(Y,ne){return C(Y.type,ne,Y.props)}function P(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function $(Y){var ne={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(re){return ne[re]})}var B=/\/+/g;function G(Y,ne){return typeof Y=="object"&&Y!==null&&Y.key!=null?$(""+Y.key):ne.toString(36)}function K(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(R,R):(Y.status="pending",Y.then(function(ne){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ne)},function(ne){Y.status==="pending"&&(Y.status="rejected",Y.reason=ne)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function H(Y,ne,re,xe,Te){var Ve=typeof Y;(Ve==="undefined"||Ve==="boolean")&&(Y=null);var Ze=!1;if(Y===null)Ze=!0;else switch(Ve){case"bigint":case"string":case"number":Ze=!0;break;case"object":switch(Y.$$typeof){case t:case e:Ze=!0;break;case m:return Ze=Y._init,H(Ze(Y._payload),ne,re,xe,Te)}}if(Ze)return Te=Te(Y),Ze=xe===""?"."+G(Y,0):xe,O(Te)?(re="",Ze!=null&&(re=Ze.replace(B,"$&/")+"/"),H(Te,ne,re,"",function(Be){return Be})):Te!=null&&(P(Te)&&(Te=U(Te,re+(Te.key==null||Y&&Y.key===Te.key?"":(""+Te.key).replace(B,"$&/")+"/")+Ze)),ne.push(Te)),1;Ze=0;var Xe=xe===""?".":xe+":";if(O(Y))for(var ie=0;ie<Y.length;ie++)xe=Y[ie],Ve=Xe+G(xe,ie),Ze+=H(xe,ne,re,Ve,Te);else if(ie=y(Y),typeof ie=="function")for(Y=ie.call(Y),ie=0;!(xe=Y.next()).done;)xe=xe.value,Ve=Xe+G(xe,ie++),Ze+=H(xe,ne,re,Ve,Te);else if(Ve==="object"){if(typeof Y.then=="function")return H(K(Y),ne,re,xe,Te);throw ne=String(Y),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ze}function Z(Y,ne,re){if(Y==null)return Y;var xe=[],Te=0;return H(Y,xe,"","",function(Ve){return ne.call(re,Ve,Te++)}),xe}function ae(Y){if(Y._status===-1){var ne=Y._result;ne=ne(),ne.then(function(re){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=re)},function(re){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=re)}),Y._status===-1&&(Y._status=0,Y._result=ne)}if(Y._status===1)return Y._result.default;throw Y._result}var he=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},fe={map:Z,forEach:function(Y,ne,re){Z(Y,function(){ne.apply(this,arguments)},re)},count:function(Y){var ne=0;return Z(Y,function(){ne++}),ne},toArray:function(Y){return Z(Y,function(ne){return ne})||[]},only:function(Y){if(!P(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return or.Activity=p,or.Children=fe,or.Component=j,or.Fragment=r,or.Profiler=a,or.PureComponent=I,or.StrictMode=n,or.Suspense=d,or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,or.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return A.H.useMemoCache(Y)}},or.cache=function(Y){return function(){return Y.apply(null,arguments)}},or.cacheSignal=function(){return null},or.cloneElement=function(Y,ne,re){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var xe=N({},Y.props),Te=Y.key;if(ne!=null)for(Ve in ne.key!==void 0&&(Te=""+ne.key),ne)!E.call(ne,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ne.ref===void 0||(xe[Ve]=ne[Ve]);var Ve=arguments.length-2;if(Ve===1)xe.children=re;else if(1<Ve){for(var Ze=Array(Ve),Xe=0;Xe<Ve;Xe++)Ze[Xe]=arguments[Xe+2];xe.children=Ze}return C(Y.type,Te,xe)},or.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:i,_context:Y},Y},or.createElement=function(Y,ne,re){var xe,Te={},Ve=null;if(ne!=null)for(xe in ne.key!==void 0&&(Ve=""+ne.key),ne)E.call(ne,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(Te[xe]=ne[xe]);var Ze=arguments.length-2;if(Ze===1)Te.children=re;else if(1<Ze){for(var Xe=Array(Ze),ie=0;ie<Ze;ie++)Xe[ie]=arguments[ie+2];Te.children=Xe}if(Y&&Y.defaultProps)for(xe in Ze=Y.defaultProps,Ze)Te[xe]===void 0&&(Te[xe]=Ze[xe]);return C(Y,Ve,Te)},or.createRef=function(){return{current:null}},or.forwardRef=function(Y){return{$$typeof:c,render:Y}},or.isValidElement=P,or.lazy=function(Y){return{$$typeof:m,_payload:{_status:-1,_result:Y},_init:ae}},or.memo=function(Y,ne){return{$$typeof:h,type:Y,compare:ne===void 0?null:ne}},or.startTransition=function(Y){var ne=A.T,re={};A.T=re;try{var xe=Y(),Te=A.S;Te!==null&&Te(re,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(R,he)}catch(Ve){he(Ve)}finally{ne!==null&&re.types!==null&&(ne.types=re.types),A.T=ne}},or.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},or.use=function(Y){return A.H.use(Y)},or.useActionState=function(Y,ne,re){return A.H.useActionState(Y,ne,re)},or.useCallback=function(Y,ne){return A.H.useCallback(Y,ne)},or.useContext=function(Y){return A.H.useContext(Y)},or.useDebugValue=function(){},or.useDeferredValue=function(Y,ne){return A.H.useDeferredValue(Y,ne)},or.useEffect=function(Y,ne){return A.H.useEffect(Y,ne)},or.useEffectEvent=function(Y){return A.H.useEffectEvent(Y)},or.useId=function(){return A.H.useId()},or.useImperativeHandle=function(Y,ne,re){return A.H.useImperativeHandle(Y,ne,re)},or.useInsertionEffect=function(Y,ne){return A.H.useInsertionEffect(Y,ne)},or.useLayoutEffect=function(Y,ne){return A.H.useLayoutEffect(Y,ne)},or.useMemo=function(Y,ne){return A.H.useMemo(Y,ne)},or.useOptimistic=function(Y,ne){return A.H.useOptimistic(Y,ne)},or.useReducer=function(Y,ne,re){return A.H.useReducer(Y,ne,re)},or.useRef=function(Y){return A.H.useRef(Y)},or.useState=function(Y){return A.H.useState(Y)},or.useSyncExternalStore=function(Y,ne,re){return A.H.useSyncExternalStore(Y,ne,re)},or.useTransition=function(){return A.H.useTransition()},or.version="19.2.4",or}var TO;function LA(){return TO||(TO=1,Q5.exports=FJ()),Q5.exports}var T=LA();const se=en(T);var X5={exports:{}},Wm={},Y5={exports:{}},J5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO;function qJ(){return jO||(jO=1,(function(t){function e(H,Z){var ae=H.length;H.push(Z);e:for(;0<ae;){var he=ae-1>>>1,fe=H[he];if(0<a(fe,Z))H[he]=Z,H[ae]=fe,ae=he;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Z=H[0],ae=H.pop();if(ae!==Z){H[0]=ae;e:for(var he=0,fe=H.length,Y=fe>>>1;he<Y;){var ne=2*(he+1)-1,re=H[ne],xe=ne+1,Te=H[xe];if(0>a(re,ae))xe<fe&&0>a(Te,re)?(H[he]=Te,H[xe]=ae,he=xe):(H[he]=re,H[ne]=ae,he=ne);else if(xe<fe&&0>a(Te,ae))H[he]=Te,H[xe]=ae,he=xe;else break e}}return Z}function a(H,Z){var ae=H.sortIndex-Z.sortIndex;return ae!==0?ae:H.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],m=1,p=null,x=3,y=!1,S=!1,N=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var Z=r(h);Z!==null;){if(Z.callback===null)n(h);else if(Z.startTime<=H)n(h),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=r(h)}}function O(H){if(N=!1,L(H),!S)if(r(d)!==null)S=!0,R||(R=!0,$());else{var Z=r(h);Z!==null&&K(O,Z.startTime-H)}}var R=!1,A=-1,E=5,C=-1;function U(){return w?!0:!(t.unstable_now()-C<E)}function P(){if(w=!1,R){var H=t.unstable_now();C=H;var Z=!0;try{e:{S=!1,N&&(N=!1,k(A),A=-1),y=!0;var ae=x;try{t:{for(L(H),p=r(d);p!==null&&!(p.expirationTime>H&&U());){var he=p.callback;if(typeof he=="function"){p.callback=null,x=p.priorityLevel;var fe=he(p.expirationTime<=H);if(H=t.unstable_now(),typeof fe=="function"){p.callback=fe,L(H),Z=!0;break t}p===r(d)&&n(d),L(H)}else n(d);p=r(d)}if(p!==null)Z=!0;else{var Y=r(h);Y!==null&&K(O,Y.startTime-H),Z=!1}}break e}finally{p=null,x=ae,y=!1}Z=void 0}}finally{Z?$():R=!1}}}var $;if(typeof I=="function")$=function(){I(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=P,$=function(){G.postMessage(null)}}else $=function(){j(P,0)};function K(H,Z){A=j(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(H){switch(x){case 1:case 2:case 3:var Z=3;break;default:Z=x}var ae=x;x=Z;try{return H()}finally{x=ae}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ae=x;x=H;try{return Z()}finally{x=ae}},t.unstable_scheduleCallback=function(H,Z,ae){var he=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?he+ae:he):ae=he,H){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ae+fe,H={id:m++,callback:Z,priorityLevel:H,startTime:ae,expirationTime:fe,sortIndex:-1},ae>he?(H.sortIndex=ae,e(h,H),r(d)===null&&H===r(h)&&(N?(k(A),A=-1):N=!0,K(O,ae-he))):(H.sortIndex=fe,e(d,H),S||y||(S=!0,R||(R=!0,$()))),H},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(H){var Z=x;return function(){var ae=x;x=Z;try{return H.apply(this,arguments)}finally{x=ae}}}})(J5)),J5}var AO;function HJ(){return AO||(AO=1,Y5.exports=qJ()),Y5.exports}var Z5={exports:{}},Si={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO;function GJ(){if(EO)return Si;EO=1;var t=LA();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:h,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Si.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Si.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,m)},Si.flushSync=function(d){var h=o.T,m=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=h,n.p=m,n.d.f()}},Si.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},Si.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Si.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:y}):m==="script"&&n.d.X(d,{crossOrigin:p,integrity:x,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Si.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},Si.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin);n.d.L(d,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Si.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},Si.requestFormReset=function(d){n.d.r(d)},Si.unstable_batchedUpdates=function(d,h){return d(h)},Si.useFormState=function(d,h,m){return o.H.useFormState(d,h,m)},Si.useFormStatus=function(){return o.H.useHostTransitionStatus()},Si.version="19.2.4",Si}var kO;function xV(){if(kO)return Z5.exports;kO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Z5.exports=GJ(),Z5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO;function WJ(){if(CO)return Wm;CO=1;var t=HJ(),e=LA(),r=xV();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var _=b.alternate;if(_===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===f)return d(b),l;if(_===g)return d(b),u;_=_.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=_;else{for(var V=!1,X=b.child;X;){if(X===f){V=!0,f=b,g=_;break}if(X===g){V=!0,g=b,f=_;break}X=X.sibling}if(!V){for(X=_.child;X;){if(X===f){V=!0,f=_,g=b;break}if(X===g){V=!0,g=_,f=b;break}X=X.sibling}if(!V)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function m(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=m(l),u!==null)return u;l=l.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=P&&l[P]||l["@@iterator"],typeof l=="function"?l:null)}var B=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===B?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case N:return"Fragment";case j:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case R:return"SuspenseList";case C:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case S:return"Portal";case I:return l.displayName||"Context";case k:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case A:return u=l.displayName||null,u!==null?u:G(l.type)||"Memo";case E:u=l._payload,l=l._init;try{return G(l(u))}catch{}}return null}var K=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},he=[],fe=-1;function Y(l){return{current:l}}function ne(l){0>fe||(l.current=he[fe],he[fe]=null,fe--)}function re(l,u){fe++,he[fe]=l.current,l.current=u}var xe=Y(null),Te=Y(null),Ve=Y(null),Ze=Y(null);function Xe(l,u){switch(re(Ve,u),re(Te,l),re(xe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?q9(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=q9(u),l=H9(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(xe),re(xe,l)}function ie(){ne(xe),ne(Te),ne(Ve)}function Be(l){l.memoizedState!==null&&re(Ze,l);var u=xe.current,f=H9(u,l.type);u!==f&&(re(Te,l),re(xe,f))}function Q(l){Te.current===l&&(ne(xe),ne(Te)),Ze.current===l&&(ne(Ze),Vm._currentValue=ae)}var te,Ne;function Se(l){if(te===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);te=u&&u[1]||"",Ne=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+Ne}var Qe=!1;function nt(l,u){if(!l||Qe)return"";Qe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Le){var Pe=Le}Reflect.construct(l,[],Ye)}else{try{Ye.call()}catch(Le){Pe=Le}l.call(Ye.prototype)}}else{try{throw Error()}catch(Le){Pe=Le}(Ye=l())&&typeof Ye.catch=="function"&&Ye.catch(function(){})}}catch(Le){if(Le&&Pe&&typeof Le.stack=="string")return[Le.stack,Pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),V=_[0],X=_[1];if(V&&X){var de=V.split(`
`),Ce=X.split(`
`);for(b=g=0;g<de.length&&!de[g].includes("DetermineComponentFrameRoot");)g++;for(;b<Ce.length&&!Ce[b].includes("DetermineComponentFrameRoot");)b++;if(g===de.length||b===Ce.length)for(g=de.length-1,b=Ce.length-1;1<=g&&0<=b&&de[g]!==Ce[b];)b--;for(;1<=g&&0<=b;g--,b--)if(de[g]!==Ce[b]){if(g!==1||b!==1)do if(g--,b--,0>b||de[g]!==Ce[b]){var Ge=`
`+de[g].replace(" at new "," at ");return l.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",l.displayName)),Ge}while(1<=g&&0<=b);break}}}finally{Qe=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Se(f):""}function Ot(l,u){switch(l.tag){case 26:case 27:case 5:return Se(l.type);case 16:return Se("Lazy");case 13:return l.child!==u&&u!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return nt(l.type,!1);case 11:return nt(l.type.render,!1);case 1:return nt(l.type,!0);case 31:return Se("Activity");default:return""}}function Me(l){try{var u="",f=null;do u+=Ot(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var lt=Object.prototype.hasOwnProperty,St=t.unstable_scheduleCallback,vt=t.unstable_cancelCallback,et=t.unstable_shouldYield,ce=t.unstable_requestPaint,Ue=t.unstable_now,Je=t.unstable_getCurrentPriorityLevel,ht=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,Ut=t.unstable_NormalPriority,tr=t.unstable_LowPriority,Ir=t.unstable_IdlePriority,ve=t.log,st=t.unstable_setDisableYieldValue,At=null,Pt=null;function $t(l){if(typeof ve=="function"&&st(l),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(At,l)}catch{}}var tt=Math.clz32?Math.clz32:Ur,ar=Math.log,Sr=Math.LN2;function Ur(l){return l>>>=0,l===0?32:31-(ar(l)/Sr|0)|0}var mn=256,wr=262144,Gt=4194304;function zt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Nt(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,_=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var X=g&134217727;return X!==0?(g=X&~_,g!==0?b=zt(g):(V&=X,V!==0?b=zt(V):f||(f=X&~l,f!==0&&(b=zt(f))))):(X=g&~_,X!==0?b=zt(X):V!==0?b=zt(V):f||(f=g&~l,f!==0&&(b=zt(f)))),b===0?0:u!==0&&u!==b&&(u&_)===0&&(_=b&-b,f=u&-u,_>=f||_===32&&(f&4194048)!==0)?u:b}function Vr(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function ln(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yr(){var l=Gt;return Gt<<=1,(Gt&62914560)===0&&(Gt=4194304),l}function Fr(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function pn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function dr(l,u,f,g,b,_){var V=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var X=l.entanglements,de=l.expirationTimes,Ce=l.hiddenUpdates;for(f=V&~f;0<f;){var Ge=31-tt(f),Ye=1<<Ge;X[Ge]=0,de[Ge]=-1;var Pe=Ce[Ge];if(Pe!==null)for(Ce[Ge]=null,Ge=0;Ge<Pe.length;Ge++){var Le=Pe[Ge];Le!==null&&(Le.lane&=-536870913)}f&=~Ye}g!==0&&ba(l,g,0),_!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=_&~(V&~u))}function ba(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-tt(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function gn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-tt(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function In(l,u){var f=u&-u;return f=(f&42)!==0?1:ii(f),(f&(l.suspendedLanes|u))!==0?0:f}function ii(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function jr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function xn(){var l=Z.p;return l!==0?l:(l=window.event,l===void 0?32:mO(l.type))}function si(l,u){var f=Z.p;try{return Z.p=l,u()}finally{Z.p=f}}var Qn=Math.random().toString(36).slice(2),nn="__reactFiber$"+Qn,yn="__reactProps$"+Qn,An="__reactContainer$"+Qn,oi="__reactEvents$"+Qn,Ka="__reactListeners$"+Qn,ki="__reactHandles$"+Qn,hs="__reactResources$"+Qn,bi="__reactMarker$"+Qn;function _t(l){delete l[nn],delete l[yn],delete l[oi],delete l[Ka],delete l[ki]}function me(l){var u=l[nn];if(u)return u;for(var f=l.parentNode;f;){if(u=f[An]||f[nn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=J9(l);l!==null;){if(f=l[nn])return f;l=J9(l)}return u}l=f,f=l.parentNode}return null}function rt(l){if(l=l[nn]||l[An]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function ft(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Xt(l){var u=l[hs];return u||(u=l[hs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function mr(l){l[bi]=!0}var cn=new Set,Jr={};function vn(l,u){Rr(l,u),Rr(l+"Capture",u)}function Rr(l,u){for(Jr[l]=u,l=0;l<u.length;l++)cn.add(u[l])}var Ls=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fs={},fo={};function xl(l){return lt.call(fo,l)?!0:lt.call(fs,l)?!1:Ls.test(l)?fo[l]=!0:(fs[l]=!0,!1)}function ms(l,u,f){if(xl(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function ps(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function Da(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function wa(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function be(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,_=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(V){f=""+V,_.call(this,V)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(V){f=""+V},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function je(l){if(!l._valueTracker){var u=q(l)?"checked":"value";l._valueTracker=be(l,u,""+l[u])}}function Ae(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=q(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function pt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var It=/[\n"\\]/g;function jt(l){return l.replace(It,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Yt(l,u,f,g,b,_,V,X){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),u!=null?V==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+wa(u)):l.value!==""+wa(u)&&(l.value=""+wa(u)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),u!=null?ue(l,V,wa(u)):f!=null?ue(l,V,wa(f)):g!=null&&l.removeAttribute("value"),b==null&&_!=null&&(l.defaultChecked=!!_),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?l.name=""+wa(X):l.removeAttribute("name")}function Nr(l,u,f,g,b,_,V,X){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(l.type=_),u!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){je(l);return}f=f!=null?""+wa(f):"",u=u!=null?""+wa(u):f,X||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=X?l.checked:!!g,l.defaultChecked=!!g,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),je(l)}function ue(l,u,f){u==="number"&&pt(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function ye(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+wa(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function De(l,u,f){if(u!=null&&(u=""+wa(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+wa(f):""}function Fe(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(K(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=wa(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),je(l)}function qe(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var sr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kt(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||sr.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function Rn(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&Kt(l,b,g)}else for(var _ in u)u.hasOwnProperty(_)&&Kt(l,_,u[_])}function ua(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(l){return Sa.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ra(){}var Mr=null;function Po(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var $s=null,gs=null;function Wx(l){var u=rt(l);if(u&&(l=u.stateNode)){var f=l[yn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Yt(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+jt(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[yn]||null;if(!b)throw Error(n(90));Yt(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&Ae(g)}break e;case"textarea":De(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&ye(l,!!f.multiple,u,!1)}}}var am=!1;function Kx(l,u,f){if(am)return l(u,f);am=!0;try{var g=l(u);return g}finally{if(am=!1,($s!==null||gs!==null)&&(q1(),$s&&(u=$s,l=gs,gs=$s=null,Wx(u),l)))for(u=0;u<l.length;u++)Wx(l[u])}}function qi(l,u){var f=l.stateNode;if(f===null)return null;var g=f[yn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),im=!1;if(mo)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){im=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{im=!1}var xs=null,C0=null,Bo=null;function Tc(){if(Bo)return Bo;var l,u=C0,f=u.length,g,b="value"in xs?xs.value:xs.textContent,_=b.length;for(l=0;l<f&&u[l]===b[l];l++);var V=f-l;for(g=1;g<=V&&u[f-g]===b[_-g];g++);return Bo=b.slice(l,1<g?1-g:void 0)}function Ju(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function jc(){return!0}function Bn(){return!1}function wi(l){function u(f,g,b,_,V){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=_,this.target=V,this.currentTarget=null;for(var X in l)l.hasOwnProperty(X)&&(f=l[X],this[X]=f?f(_):_[X]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?jc:Bn,this.isPropagationStopped=Bn,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),u}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=wi(yl),Ac=p({},yl,{view:0,detail:0}),Qx=wi(Ac),Ec,O0,Ci,ed=p({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ci&&(Ci&&l.type==="mousemove"?(Ec=l.screenX-Ci.screenX,O0=l.screenY-Ci.screenY):O0=Ec=0,Ci=l),Ec)},movementY:function(l){return"movementY"in l?l.movementY:O0}}),Xx=wi(ed),td=p({},ed,{dataTransfer:0}),Yx=wi(td),sm=p({},Ac,{relatedTarget:0}),kc=wi(sm),Jx=p({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=wi(Jx),e4=p({},yl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Zx=wi(e4),rd=p({},yl,{data:0}),om=wi(rd),e1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=cm[l])?!!u[l]:!1}function Cc(){return t1}var r1=p({},Ac,{key:function(l){if(l.key){var u=e1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Ju(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?lm[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cc,charCode:function(l){return l.type==="keypress"?Ju(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ju(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),n1=wi(r1),vl=p({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),um=wi(vl),a1=p({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cc}),i1=wi(a1),s1=p({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),R0=wi(s1),Oi=p({},ed,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=wi(Oi),l1=p({},yl,{newState:0,oldState:0}),Oc=wi(l1),v=[9,13,27,32],D=mo&&"CompositionEvent"in window,F=null;mo&&"documentMode"in document&&(F=document.documentMode);var ee=mo&&"TextEvent"in window&&!F,_e=mo&&(!D||F&&8<F&&11>=F),ze=" ",gt=!1;function an(l,u){switch(l){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _a(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var vr=!1;function Qa(l,u){switch(l){case"compositionend":return _a(u);case"keypress":return u.which!==32?null:(gt=!0,ze);case"textInput":return l=u.data,l===ze&&gt?null:l;default:return null}}function Xa(l,u){if(vr)return l==="compositionend"||!D&&an(l,u)?(l=Tc(),Bo=C0=xs=null,vr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return _e&&u.locale!=="ko"?null:u.data;default:return null}}var Ic={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Ic[l.type]:u==="textarea"}function nd(l,u,f,g){$s?gs?gs.push(g):gs=[g]:$s=g,u=Y1(u,"onChange"),0<u.length&&(f=new Zu("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var bl=null,dm=null;function dY(l){B9(l,0)}function c1(l){var u=ft(l);if(Ae(u))return l}function nk(l,u){if(l==="change")return u}var ak=!1;if(mo){var t4;if(mo){var r4="oninput"in document;if(!r4){var ik=document.createElement("div");ik.setAttribute("oninput","return;"),r4=typeof ik.oninput=="function"}t4=r4}else t4=!1;ak=t4&&(!document.documentMode||9<document.documentMode)}function sk(){bl&&(bl.detachEvent("onpropertychange",ok),dm=bl=null)}function ok(l){if(l.propertyName==="value"&&c1(dm)){var u=[];nd(u,dm,l,Po(l)),Kx(dY,u)}}function hY(l,u,f){l==="focusin"?(sk(),bl=u,dm=f,bl.attachEvent("onpropertychange",ok)):l==="focusout"&&sk()}function fY(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return c1(dm)}function mY(l,u){if(l==="click")return c1(u)}function pY(l,u){if(l==="input"||l==="change")return c1(u)}function gY(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var ys=typeof Object.is=="function"?Object.is:gY;function hm(l,u){if(ys(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!lt.call(u,b)||!ys(l[b],u[b]))return!1}return!0}function lk(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ck(l,u){var f=lk(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=lk(f)}}function uk(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?uk(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function dk(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=pt(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=pt(l.document)}return u}function n4(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var xY=mo&&"documentMode"in document&&11>=document.documentMode,M0=null,a4=null,fm=null,i4=!1;function hk(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;i4||M0==null||M0!==pt(g)||(g=M0,"selectionStart"in g&&n4(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),fm&&hm(fm,g)||(fm=g,g=Y1(a4,"onSelect"),0<g.length&&(u=new Zu("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=M0)))}function ad(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var D0={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionrun:ad("Transition","TransitionRun"),transitionstart:ad("Transition","TransitionStart"),transitioncancel:ad("Transition","TransitionCancel"),transitionend:ad("Transition","TransitionEnd")},s4={},fk={};mo&&(fk=document.createElement("div").style,"AnimationEvent"in window||(delete D0.animationend.animation,delete D0.animationiteration.animation,delete D0.animationstart.animation),"TransitionEvent"in window||delete D0.transitionend.transition);function id(l){if(s4[l])return s4[l];if(!D0[l])return l;var u=D0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in fk)return s4[l]=u[f];return l}var mk=id("animationend"),pk=id("animationiteration"),gk=id("animationstart"),yY=id("transitionrun"),vY=id("transitionstart"),bY=id("transitioncancel"),xk=id("transitionend"),yk=new Map,o4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o4.push("scrollEnd");function po(l,u){yk.set(l,u),vn(u,[l])}var u1=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},zs=[],P0=0,l4=0;function d1(){for(var l=P0,u=l4=P0=0;u<l;){var f=zs[u];zs[u++]=null;var g=zs[u];zs[u++]=null;var b=zs[u];zs[u++]=null;var _=zs[u];if(zs[u++]=null,g!==null&&b!==null){var V=g.pending;V===null?b.next=b:(b.next=V.next,V.next=b),g.pending=b}_!==0&&vk(f,b,_)}}function h1(l,u,f,g){zs[P0++]=l,zs[P0++]=u,zs[P0++]=f,zs[P0++]=g,l4|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function c4(l,u,f,g){return h1(l,u,f,g),f1(l)}function sd(l,u){return h1(l,null,null,u),f1(l)}function vk(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,_=l.return;_!==null;)_.childLanes|=f,g=_.alternate,g!==null&&(g.childLanes|=f),_.tag===22&&(l=_.stateNode,l===null||l._visibility&1||(b=!0)),l=_,_=_.return;return l.tag===3?(_=l.stateNode,b&&u!==null&&(b=31-tt(f),l=_.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),_):null}function f1(l){if(50<Dm)throw Dm=0,y5=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var L0={};function wY(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(l,u,f,g){return new wY(l,u,f,g)}function u4(l){return l=l.prototype,!(!l||!l.isReactComponent)}function wl(l,u){var f=l.alternate;return f===null?(f=vs(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function bk(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function m1(l,u,f,g,b,_){var V=0;if(g=l,typeof l=="function")u4(l)&&(V=1);else if(typeof l=="string")V=jJ(l,f,xe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case C:return l=vs(31,f,u,b),l.elementType=C,l.lanes=_,l;case N:return od(f.children,b,_,u);case w:V=8,b|=24;break;case j:return l=vs(12,f,u,b|2),l.elementType=j,l.lanes=_,l;case O:return l=vs(13,f,u,b),l.elementType=O,l.lanes=_,l;case R:return l=vs(19,f,u,b),l.elementType=R,l.lanes=_,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:V=10;break e;case k:V=9;break e;case L:V=11;break e;case A:V=14;break e;case E:V=16,g=null;break e}V=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=vs(V,f,u,b),u.elementType=l,u.type=g,u.lanes=_,u}function od(l,u,f,g){return l=vs(7,l,g,u),l.lanes=f,l}function d4(l,u,f){return l=vs(6,l,null,u),l.lanes=f,l}function wk(l){var u=vs(18,null,null,0);return u.stateNode=l,u}function h4(l,u,f){return u=vs(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Sk=new WeakMap;function Us(l,u){if(typeof l=="object"&&l!==null){var f=Sk.get(l);return f!==void 0?f:(u={value:l,source:u,stack:Me(u)},Sk.set(l,u),u)}return{value:l,source:u,stack:Me(u)}}var B0=[],$0=0,p1=null,mm=0,Vs=[],Fs=0,Rc=null,$o=1,zo="";function Sl(l,u){B0[$0++]=mm,B0[$0++]=p1,p1=l,mm=u}function Nk(l,u,f){Vs[Fs++]=$o,Vs[Fs++]=zo,Vs[Fs++]=Rc,Rc=l;var g=$o;l=zo;var b=32-tt(g)-1;g&=~(1<<b),f+=1;var _=32-tt(u)+b;if(30<_){var V=b-b%5;_=(g&(1<<V)-1).toString(32),g>>=V,b-=V,$o=1<<32-tt(u)+b|f<<b|g,zo=_+l}else $o=1<<_|f<<b|g,zo=l}function f4(l){l.return!==null&&(Sl(l,1),Nk(l,1,0))}function m4(l){for(;l===p1;)p1=B0[--$0],B0[$0]=null,mm=B0[--$0],B0[$0]=null;for(;l===Rc;)Rc=Vs[--Fs],Vs[Fs]=null,zo=Vs[--Fs],Vs[Fs]=null,$o=Vs[--Fs],Vs[Fs]=null}function _k(l,u){Vs[Fs++]=$o,Vs[Fs++]=zo,Vs[Fs++]=Rc,$o=u.id,zo=u.overflow,Rc=l}var li=null,$n=null,Dr=!1,Mc=null,qs=!1,p4=Error(n(519));function Dc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pm(Us(u,l)),p4}function Tk(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[nn]=l,u[yn]=g,f){case"dialog":Tr("cancel",u),Tr("close",u);break;case"iframe":case"object":case"embed":Tr("load",u);break;case"video":case"audio":for(f=0;f<Lm.length;f++)Tr(Lm[f],u);break;case"source":Tr("error",u);break;case"img":case"image":case"link":Tr("error",u),Tr("load",u);break;case"details":Tr("toggle",u);break;case"input":Tr("invalid",u),Nr(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Tr("invalid",u);break;case"textarea":Tr("invalid",u),Fe(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||V9(u.textContent,f)?(g.popover!=null&&(Tr("beforetoggle",u),Tr("toggle",u)),g.onScroll!=null&&Tr("scroll",u),g.onScrollEnd!=null&&Tr("scrollend",u),g.onClick!=null&&(u.onclick=ra),u=!0):u=!1,u||Dc(l,!0)}function jk(l){for(li=l.return;li;)switch(li.tag){case 5:case 31:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:li=li.return}}function z0(l){if(l!==li)return!1;if(!Dr)return jk(l),Dr=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||R5(l.type,l.memoizedProps)),f=!f),f&&$n&&Dc(l),jk(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));$n=Y9(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));$n=Y9(l)}else u===27?(u=$n,Qc(l.type)?(l=B5,B5=null,$n=l):$n=u):$n=li?Gs(l.stateNode.nextSibling):null;return!0}function ld(){$n=li=null,Dr=!1}function g4(){var l=Mc;return l!==null&&(Qi===null?Qi=l:Qi.push.apply(Qi,l),Mc=null),l}function pm(l){Mc===null?Mc=[l]:Mc.push(l)}var x4=Y(null),cd=null,Nl=null;function Pc(l,u,f){re(x4,u._currentValue),u._currentValue=f}function _l(l){l._currentValue=x4.current,ne(x4)}function y4(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function v4(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var _=b.dependencies;if(_!==null){var V=b.child;_=_.firstContext;e:for(;_!==null;){var X=_;_=b;for(var de=0;de<u.length;de++)if(X.context===u[de]){_.lanes|=f,X=_.alternate,X!==null&&(X.lanes|=f),y4(_.return,f,l),g||(V=null);break e}_=X.next}}else if(b.tag===18){if(V=b.return,V===null)throw Error(n(341));V.lanes|=f,_=V.alternate,_!==null&&(_.lanes|=f),y4(V,f,l),V=null}else V=b.child;if(V!==null)V.return=b;else for(V=b;V!==null;){if(V===l){V=null;break}if(b=V.sibling,b!==null){b.return=V.return,V=b;break}V=V.return}b=V}}function U0(l,u,f,g){l=null;for(var b=u,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var V=b.alternate;if(V===null)throw Error(n(387));if(V=V.memoizedProps,V!==null){var X=b.type;ys(b.pendingProps.value,V.value)||(l!==null?l.push(X):l=[X])}}else if(b===Ze.current){if(V=b.alternate,V===null)throw Error(n(387));V.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Vm):l=[Vm])}b=b.return}l!==null&&v4(u,l,f,g),u.flags|=262144}function g1(l){for(l=l.firstContext;l!==null;){if(!ys(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ud(l){cd=l,Nl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ci(l){return Ak(cd,l)}function x1(l,u){return cd===null&&ud(l),Ak(l,u)}function Ak(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},Nl===null){if(l===null)throw Error(n(308));Nl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Nl=Nl.next=u;return f}var SY=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},NY=t.unstable_scheduleCallback,_Y=t.unstable_NormalPriority,Ta={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b4(){return{controller:new SY,data:new Map,refCount:0}}function gm(l){l.refCount--,l.refCount===0&&NY(_Y,function(){l.controller.abort()})}var xm=null,w4=0,V0=0,F0=null;function TY(l,u){if(xm===null){var f=xm=[];w4=0,V0=_5(),F0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return w4++,u.then(Ek,Ek),u}function Ek(){if(--w4===0&&xm!==null){F0!==null&&(F0.status="fulfilled");var l=xm;xm=null,V0=0,F0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function jY(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var kk=H.S;H.S=function(l,u){h9=Ue(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&TY(l,u),kk!==null&&kk(l,u)};var dd=Y(null);function S4(){var l=dd.current;return l!==null?l:En.pooledCache}function y1(l,u){u===null?re(dd,dd.current):re(dd,u.pool)}function Ck(){var l=S4();return l===null?null:{parent:Ta._currentValue,pool:l}}var q0=Error(n(460)),N4=Error(n(474)),v1=Error(n(542)),b1={then:function(){}};function Ok(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Ik(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(ra,ra),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Mk(l),l;default:if(typeof u.status=="string")u.then(ra,ra);else{if(l=En,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Mk(l),l}throw fd=u,q0}}function hd(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(fd=f,q0):f}}var fd=null;function Rk(){if(fd===null)throw Error(n(459));var l=fd;return fd=null,l}function Mk(l){if(l===q0||l===v1)throw Error(n(483))}var H0=null,ym=0;function w1(l){var u=ym;return ym+=1,H0===null&&(H0=[]),Ik(H0,l,u)}function vm(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function S1(l,u){throw u.$$typeof===x?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Dk(l){function u(we,pe){if(l){var Ee=we.deletions;Ee===null?(we.deletions=[pe],we.flags|=16):Ee.push(pe)}}function f(we,pe){if(!l)return null;for(;pe!==null;)u(we,pe),pe=pe.sibling;return null}function g(we){for(var pe=new Map;we!==null;)we.key!==null?pe.set(we.key,we):pe.set(we.index,we),we=we.sibling;return pe}function b(we,pe){return we=wl(we,pe),we.index=0,we.sibling=null,we}function _(we,pe,Ee){return we.index=Ee,l?(Ee=we.alternate,Ee!==null?(Ee=Ee.index,Ee<pe?(we.flags|=67108866,pe):Ee):(we.flags|=67108866,pe)):(we.flags|=1048576,pe)}function V(we){return l&&we.alternate===null&&(we.flags|=67108866),we}function X(we,pe,Ee,Ke){return pe===null||pe.tag!==6?(pe=d4(Ee,we.mode,Ke),pe.return=we,pe):(pe=b(pe,Ee),pe.return=we,pe)}function de(we,pe,Ee,Ke){var Vt=Ee.type;return Vt===N?Ge(we,pe,Ee.props.children,Ke,Ee.key):pe!==null&&(pe.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===E&&hd(Vt)===pe.type)?(pe=b(pe,Ee.props),vm(pe,Ee),pe.return=we,pe):(pe=m1(Ee.type,Ee.key,Ee.props,null,we.mode,Ke),vm(pe,Ee),pe.return=we,pe)}function Ce(we,pe,Ee,Ke){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ee.containerInfo||pe.stateNode.implementation!==Ee.implementation?(pe=h4(Ee,we.mode,Ke),pe.return=we,pe):(pe=b(pe,Ee.children||[]),pe.return=we,pe)}function Ge(we,pe,Ee,Ke,Vt){return pe===null||pe.tag!==7?(pe=od(Ee,we.mode,Ke,Vt),pe.return=we,pe):(pe=b(pe,Ee),pe.return=we,pe)}function Ye(we,pe,Ee){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=d4(""+pe,we.mode,Ee),pe.return=we,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:return Ee=m1(pe.type,pe.key,pe.props,null,we.mode,Ee),vm(Ee,pe),Ee.return=we,Ee;case S:return pe=h4(pe,we.mode,Ee),pe.return=we,pe;case E:return pe=hd(pe),Ye(we,pe,Ee)}if(K(pe)||$(pe))return pe=od(pe,we.mode,Ee,null),pe.return=we,pe;if(typeof pe.then=="function")return Ye(we,w1(pe),Ee);if(pe.$$typeof===I)return Ye(we,x1(we,pe),Ee);S1(we,pe)}return null}function Pe(we,pe,Ee,Ke){var Vt=pe!==null?pe.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Vt!==null?null:X(we,pe,""+Ee,Ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case y:return Ee.key===Vt?de(we,pe,Ee,Ke):null;case S:return Ee.key===Vt?Ce(we,pe,Ee,Ke):null;case E:return Ee=hd(Ee),Pe(we,pe,Ee,Ke)}if(K(Ee)||$(Ee))return Vt!==null?null:Ge(we,pe,Ee,Ke,null);if(typeof Ee.then=="function")return Pe(we,pe,w1(Ee),Ke);if(Ee.$$typeof===I)return Pe(we,pe,x1(we,Ee),Ke);S1(we,Ee)}return null}function Le(we,pe,Ee,Ke,Vt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return we=we.get(Ee)||null,X(pe,we,""+Ke,Vt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case y:return we=we.get(Ke.key===null?Ee:Ke.key)||null,de(pe,we,Ke,Vt);case S:return we=we.get(Ke.key===null?Ee:Ke.key)||null,Ce(pe,we,Ke,Vt);case E:return Ke=hd(Ke),Le(we,pe,Ee,Ke,Vt)}if(K(Ke)||$(Ke))return we=we.get(Ee)||null,Ge(pe,we,Ke,Vt,null);if(typeof Ke.then=="function")return Le(we,pe,Ee,w1(Ke),Vt);if(Ke.$$typeof===I)return Le(we,pe,Ee,x1(pe,Ke),Vt);S1(pe,Ke)}return null}function Ct(we,pe,Ee,Ke){for(var Vt=null,qr=null,Dt=pe,pr=pe=0,Er=null;Dt!==null&&pr<Ee.length;pr++){Dt.index>pr?(Er=Dt,Dt=null):Er=Dt.sibling;var Hr=Pe(we,Dt,Ee[pr],Ke);if(Hr===null){Dt===null&&(Dt=Er);break}l&&Dt&&Hr.alternate===null&&u(we,Dt),pe=_(Hr,pe,pr),qr===null?Vt=Hr:qr.sibling=Hr,qr=Hr,Dt=Er}if(pr===Ee.length)return f(we,Dt),Dr&&Sl(we,pr),Vt;if(Dt===null){for(;pr<Ee.length;pr++)Dt=Ye(we,Ee[pr],Ke),Dt!==null&&(pe=_(Dt,pe,pr),qr===null?Vt=Dt:qr.sibling=Dt,qr=Dt);return Dr&&Sl(we,pr),Vt}for(Dt=g(Dt);pr<Ee.length;pr++)Er=Le(Dt,we,pr,Ee[pr],Ke),Er!==null&&(l&&Er.alternate!==null&&Dt.delete(Er.key===null?pr:Er.key),pe=_(Er,pe,pr),qr===null?Vt=Er:qr.sibling=Er,qr=Er);return l&&Dt.forEach(function(eu){return u(we,eu)}),Dr&&Sl(we,pr),Vt}function Wt(we,pe,Ee,Ke){if(Ee==null)throw Error(n(151));for(var Vt=null,qr=null,Dt=pe,pr=pe=0,Er=null,Hr=Ee.next();Dt!==null&&!Hr.done;pr++,Hr=Ee.next()){Dt.index>pr?(Er=Dt,Dt=null):Er=Dt.sibling;var eu=Pe(we,Dt,Hr.value,Ke);if(eu===null){Dt===null&&(Dt=Er);break}l&&Dt&&eu.alternate===null&&u(we,Dt),pe=_(eu,pe,pr),qr===null?Vt=eu:qr.sibling=eu,qr=eu,Dt=Er}if(Hr.done)return f(we,Dt),Dr&&Sl(we,pr),Vt;if(Dt===null){for(;!Hr.done;pr++,Hr=Ee.next())Hr=Ye(we,Hr.value,Ke),Hr!==null&&(pe=_(Hr,pe,pr),qr===null?Vt=Hr:qr.sibling=Hr,qr=Hr);return Dr&&Sl(we,pr),Vt}for(Dt=g(Dt);!Hr.done;pr++,Hr=Ee.next())Hr=Le(Dt,we,pr,Hr.value,Ke),Hr!==null&&(l&&Hr.alternate!==null&&Dt.delete(Hr.key===null?pr:Hr.key),pe=_(Hr,pe,pr),qr===null?Vt=Hr:qr.sibling=Hr,qr=Hr);return l&&Dt.forEach(function(LJ){return u(we,LJ)}),Dr&&Sl(we,pr),Vt}function Sn(we,pe,Ee,Ke){if(typeof Ee=="object"&&Ee!==null&&Ee.type===N&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case y:e:{for(var Vt=Ee.key;pe!==null;){if(pe.key===Vt){if(Vt=Ee.type,Vt===N){if(pe.tag===7){f(we,pe.sibling),Ke=b(pe,Ee.props.children),Ke.return=we,we=Ke;break e}}else if(pe.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===E&&hd(Vt)===pe.type){f(we,pe.sibling),Ke=b(pe,Ee.props),vm(Ke,Ee),Ke.return=we,we=Ke;break e}f(we,pe);break}else u(we,pe);pe=pe.sibling}Ee.type===N?(Ke=od(Ee.props.children,we.mode,Ke,Ee.key),Ke.return=we,we=Ke):(Ke=m1(Ee.type,Ee.key,Ee.props,null,we.mode,Ke),vm(Ke,Ee),Ke.return=we,we=Ke)}return V(we);case S:e:{for(Vt=Ee.key;pe!==null;){if(pe.key===Vt)if(pe.tag===4&&pe.stateNode.containerInfo===Ee.containerInfo&&pe.stateNode.implementation===Ee.implementation){f(we,pe.sibling),Ke=b(pe,Ee.children||[]),Ke.return=we,we=Ke;break e}else{f(we,pe);break}else u(we,pe);pe=pe.sibling}Ke=h4(Ee,we.mode,Ke),Ke.return=we,we=Ke}return V(we);case E:return Ee=hd(Ee),Sn(we,pe,Ee,Ke)}if(K(Ee))return Ct(we,pe,Ee,Ke);if($(Ee)){if(Vt=$(Ee),typeof Vt!="function")throw Error(n(150));return Ee=Vt.call(Ee),Wt(we,pe,Ee,Ke)}if(typeof Ee.then=="function")return Sn(we,pe,w1(Ee),Ke);if(Ee.$$typeof===I)return Sn(we,pe,x1(we,Ee),Ke);S1(we,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,pe!==null&&pe.tag===6?(f(we,pe.sibling),Ke=b(pe,Ee),Ke.return=we,we=Ke):(f(we,pe),Ke=d4(Ee,we.mode,Ke),Ke.return=we,we=Ke),V(we)):f(we,pe)}return function(we,pe,Ee,Ke){try{ym=0;var Vt=Sn(we,pe,Ee,Ke);return H0=null,Vt}catch(Dt){if(Dt===q0||Dt===v1)throw Dt;var qr=vs(29,Dt,null,we.mode);return qr.lanes=Ke,qr.return=we,qr}finally{}}}var md=Dk(!0),Pk=Dk(!1),Lc=!1;function _4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function T4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Bc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function $c(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(Zr&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=f1(l),vk(l,null,f),u}return h1(l,g,u,f),f1(l)}function bm(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,gn(l,f)}}function j4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var V={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?b=_=V:_=_.next=V,f=f.next}while(f!==null);_===null?b=_=u:_=_.next=u}else b=_=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var A4=!1;function wm(){if(A4){var l=F0;if(l!==null)throw l}}function Sm(l,u,f,g){A4=!1;var b=l.updateQueue;Lc=!1;var _=b.firstBaseUpdate,V=b.lastBaseUpdate,X=b.shared.pending;if(X!==null){b.shared.pending=null;var de=X,Ce=de.next;de.next=null,V===null?_=Ce:V.next=Ce,V=de;var Ge=l.alternate;Ge!==null&&(Ge=Ge.updateQueue,X=Ge.lastBaseUpdate,X!==V&&(X===null?Ge.firstBaseUpdate=Ce:X.next=Ce,Ge.lastBaseUpdate=de))}if(_!==null){var Ye=b.baseState;V=0,Ge=Ce=de=null,X=_;do{var Pe=X.lane&-536870913,Le=Pe!==X.lane;if(Le?(Ar&Pe)===Pe:(g&Pe)===Pe){Pe!==0&&Pe===V0&&(A4=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var Ct=l,Wt=X;Pe=u;var Sn=f;switch(Wt.tag){case 1:if(Ct=Wt.payload,typeof Ct=="function"){Ye=Ct.call(Sn,Ye,Pe);break e}Ye=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Wt.payload,Pe=typeof Ct=="function"?Ct.call(Sn,Ye,Pe):Ct,Pe==null)break e;Ye=p({},Ye,Pe);break e;case 2:Lc=!0}}Pe=X.callback,Pe!==null&&(l.flags|=64,Le&&(l.flags|=8192),Le=b.callbacks,Le===null?b.callbacks=[Pe]:Le.push(Pe))}else Le={lane:Pe,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Ge===null?(Ce=Ge=Le,de=Ye):Ge=Ge.next=Le,V|=Pe;if(X=X.next,X===null){if(X=b.shared.pending,X===null)break;Le=X,X=Le.next,Le.next=null,b.lastBaseUpdate=Le,b.shared.pending=null}}while(!0);Ge===null&&(de=Ye),b.baseState=de,b.firstBaseUpdate=Ce,b.lastBaseUpdate=Ge,_===null&&(b.shared.lanes=0),qc|=V,l.lanes=V,l.memoizedState=Ye}}function Lk(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function Bk(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)Lk(f[l],u)}var G0=Y(null),N1=Y(0);function $k(l,u){l=Rl,re(N1,l),re(G0,u),Rl=l|u.baseLanes}function E4(){re(N1,Rl),re(G0,G0.current)}function k4(){Rl=N1.current,ne(G0),ne(N1)}var bs=Y(null),Hs=null;function zc(l){var u=l.alternate;re(da,da.current&1),re(bs,l),Hs===null&&(u===null||G0.current!==null||u.memoizedState!==null)&&(Hs=l)}function C4(l){re(da,da.current),re(bs,l),Hs===null&&(Hs=l)}function zk(l){l.tag===22?(re(da,da.current),re(bs,l),Hs===null&&(Hs=l)):Uc()}function Uc(){re(da,da.current),re(bs,bs.current)}function ws(l){ne(bs),Hs===l&&(Hs=null),ne(da)}var da=Y(0);function _1(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||P5(f)||L5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Tl=0,fr=null,bn=null,ja=null,T1=!1,W0=!1,pd=!1,j1=0,Nm=0,K0=null,AY=0;function na(){throw Error(n(321))}function O4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!ys(l[f],u[f]))return!1;return!0}function I4(l,u,f,g,b,_){return Tl=_,fr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?NC:W4,pd=!1,_=f(g,b),pd=!1,W0&&(_=Vk(u,f,g,b)),Uk(l),_}function Uk(l){H.H=jm;var u=bn!==null&&bn.next!==null;if(Tl=0,ja=bn=fr=null,T1=!1,Nm=0,K0=null,u)throw Error(n(300));l===null||Aa||(l=l.dependencies,l!==null&&g1(l)&&(Aa=!0))}function Vk(l,u,f,g){fr=l;var b=0;do{if(W0&&(K0=null),Nm=0,W0=!1,25<=b)throw Error(n(301));if(b+=1,ja=bn=null,l.updateQueue!=null){var _=l.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=_C,_=u(f,g)}while(W0);return _}function EY(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?_m(u):u,l=l.useState()[0],(bn!==null?bn.memoizedState:null)!==l&&(fr.flags|=1024),u}function R4(){var l=j1!==0;return j1=0,l}function M4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function D4(l){if(T1){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}T1=!1}Tl=0,ja=bn=fr=null,W0=!1,Nm=j1=0,K0=null}function Ii(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ja===null?fr.memoizedState=ja=l:ja=ja.next=l,ja}function ha(){if(bn===null){var l=fr.alternate;l=l!==null?l.memoizedState:null}else l=bn.next;var u=ja===null?fr.memoizedState:ja.next;if(u!==null)ja=u,bn=l;else{if(l===null)throw fr.alternate===null?Error(n(467)):Error(n(310));bn=l,l={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},ja===null?fr.memoizedState=ja=l:ja=ja.next=l}return ja}function A1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _m(l){var u=Nm;return Nm+=1,K0===null&&(K0=[]),l=Ik(K0,l,u),u=fr,(ja===null?u.memoizedState:ja.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?NC:W4),l}function E1(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return _m(l);if(l.$$typeof===I)return ci(l)}throw Error(n(438,String(l)))}function P4(l){var u=null,f=fr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=fr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=A1(),fr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=U;return u.index++,f}function jl(l,u){return typeof u=="function"?u(l):u}function k1(l){var u=ha();return L4(u,bn,l)}function L4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,_=g.pending;if(_!==null){if(b!==null){var V=b.next;b.next=_.next,_.next=V}u.baseQueue=b=_,g.pending=null}if(_=l.baseState,b===null)l.memoizedState=_;else{u=b.next;var X=V=null,de=null,Ce=u,Ge=!1;do{var Ye=Ce.lane&-536870913;if(Ye!==Ce.lane?(Ar&Ye)===Ye:(Tl&Ye)===Ye){var Pe=Ce.revertLane;if(Pe===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),Ye===V0&&(Ge=!0);else if((Tl&Pe)===Pe){Ce=Ce.next,Pe===V0&&(Ge=!0);continue}else Ye={lane:0,revertLane:Ce.revertLane,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},de===null?(X=de=Ye,V=_):de=de.next=Ye,fr.lanes|=Pe,qc|=Pe;Ye=Ce.action,pd&&f(_,Ye),_=Ce.hasEagerState?Ce.eagerState:f(_,Ye)}else Pe={lane:Ye,revertLane:Ce.revertLane,gesture:Ce.gesture,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},de===null?(X=de=Pe,V=_):de=de.next=Pe,fr.lanes|=Ye,qc|=Ye;Ce=Ce.next}while(Ce!==null&&Ce!==u);if(de===null?V=_:de.next=X,!ys(_,l.memoizedState)&&(Aa=!0,Ge&&(f=F0,f!==null)))throw f;l.memoizedState=_,l.baseState=V,l.baseQueue=de,g.lastRenderedState=_}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function B4(l){var u=ha(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,_=u.memoizedState;if(b!==null){f.pending=null;var V=b=b.next;do _=l(_,V.action),V=V.next;while(V!==b);ys(_,u.memoizedState)||(Aa=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),f.lastRenderedState=_}return[_,g]}function Fk(l,u,f){var g=fr,b=ha(),_=Dr;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=u();var V=!ys((bn||b).memoizedState,f);if(V&&(b.memoizedState=f,Aa=!0),b=b.queue,U4(Gk.bind(null,g,b,l),[l]),b.getSnapshot!==u||V||ja!==null&&ja.memoizedState.tag&1){if(g.flags|=2048,Q0(9,{destroy:void 0},Hk.bind(null,g,b,f,u),null),En===null)throw Error(n(349));_||(Tl&127)!==0||qk(g,u,f)}return f}function qk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=fr.updateQueue,u===null?(u=A1(),fr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function Hk(l,u,f,g){u.value=f,u.getSnapshot=g,Wk(u)&&Kk(l)}function Gk(l,u,f){return f(function(){Wk(u)&&Kk(l)})}function Wk(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!ys(l,f)}catch{return!0}}function Kk(l){var u=sd(l,2);u!==null&&Xi(u,l,2)}function $4(l){var u=Ii();if(typeof l=="function"){var f=l;if(l=f(),pd){$t(!0);try{f()}finally{$t(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:l},u}function Qk(l,u,f,g){return l.baseState=f,L4(l,bn,typeof g=="function"?g:jl)}function kY(l,u,f,g,b){if(I1(l))throw Error(n(485));if(l=u.action,l!==null){var _={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){_.listeners.push(V)}};H.T!==null?f(!0):_.isTransition=!1,g(_),f=u.pending,f===null?(_.next=u.pending=_,Xk(u,_)):(_.next=f.next,u.pending=f.next=_)}}function Xk(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var _=H.T,V={};H.T=V;try{var X=f(b,g),de=H.S;de!==null&&de(V,X),Yk(l,u,X)}catch(Ce){z4(l,u,Ce)}finally{_!==null&&V.types!==null&&(_.types=V.types),H.T=_}}else try{_=f(b,g),Yk(l,u,_)}catch(Ce){z4(l,u,Ce)}}function Yk(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){Jk(l,u,g)},function(g){return z4(l,u,g)}):Jk(l,u,f)}function Jk(l,u,f){u.status="fulfilled",u.value=f,Zk(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,Xk(l,f)))}function z4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,Zk(u),u=u.next;while(u!==g)}l.action=null}function Zk(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function eC(l,u){return u}function tC(l,u){if(Dr){var f=En.formState;if(f!==null){e:{var g=fr;if(Dr){if($n){t:{for(var b=$n,_=qs;b.nodeType!==8;){if(!_){b=null;break t}if(b=Gs(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){$n=Gs(b.nextSibling),g=b.data==="F!";break e}}Dc(g)}g=!1}g&&(u=f[0])}}return f=Ii(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eC,lastRenderedState:u},f.queue=g,f=bC.bind(null,fr,g),g.dispatch=f,g=$4(!1),_=G4.bind(null,fr,!1,g.queue),g=Ii(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=kY.bind(null,fr,b,_,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function rC(l){var u=ha();return nC(u,bn,l)}function nC(l,u,f){if(u=L4(l,u,eC)[0],l=k1(jl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=_m(u)}catch(V){throw V===q0?v1:V}else g=u;u=ha();var b=u.queue,_=b.dispatch;return f!==u.memoizedState&&(fr.flags|=2048,Q0(9,{destroy:void 0},CY.bind(null,b,f),null)),[g,_,l]}function CY(l,u){l.action=u}function aC(l){var u=ha(),f=bn;if(f!==null)return nC(u,f,l);ha(),u=u.memoizedState,f=ha();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function Q0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=fr.updateQueue,u===null&&(u=A1(),fr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function iC(){return ha().memoizedState}function C1(l,u,f,g){var b=Ii();fr.flags|=l,b.memoizedState=Q0(1|u,{destroy:void 0},f,g===void 0?null:g)}function O1(l,u,f,g){var b=ha();g=g===void 0?null:g;var _=b.memoizedState.inst;bn!==null&&g!==null&&O4(g,bn.memoizedState.deps)?b.memoizedState=Q0(u,_,f,g):(fr.flags|=l,b.memoizedState=Q0(1|u,_,f,g))}function sC(l,u){C1(8390656,8,l,u)}function U4(l,u){O1(2048,8,l,u)}function OY(l){fr.flags|=4;var u=fr.updateQueue;if(u===null)u=A1(),fr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function oC(l){var u=ha().memoizedState;return OY({ref:u,nextImpl:l}),function(){if((Zr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function lC(l,u){return O1(4,2,l,u)}function cC(l,u){return O1(4,4,l,u)}function uC(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function dC(l,u,f){f=f!=null?f.concat([l]):null,O1(4,4,uC.bind(null,u,l),f)}function V4(){}function hC(l,u){var f=ha();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&O4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function fC(l,u){var f=ha();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&O4(u,g[1]))return g[0];if(g=l(),pd){$t(!0);try{l()}finally{$t(!1)}}return f.memoizedState=[g,u],g}function F4(l,u,f){return f===void 0||(Tl&1073741824)!==0&&(Ar&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=m9(),fr.lanes|=l,qc|=l,f)}function mC(l,u,f,g){return ys(f,u)?f:G0.current!==null?(l=F4(l,f,g),ys(l,u)||(Aa=!0),l):(Tl&42)===0||(Tl&1073741824)!==0&&(Ar&261930)===0?(Aa=!0,l.memoizedState=f):(l=m9(),fr.lanes|=l,qc|=l,u)}function pC(l,u,f,g,b){var _=Z.p;Z.p=_!==0&&8>_?_:8;var V=H.T,X={};H.T=X,G4(l,!1,u,f);try{var de=b(),Ce=H.S;if(Ce!==null&&Ce(X,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var Ge=jY(de,g);Tm(l,u,Ge,_s(l))}else Tm(l,u,g,_s(l))}catch(Ye){Tm(l,u,{then:function(){},status:"rejected",reason:Ye},_s())}finally{Z.p=_,V!==null&&X.types!==null&&(V.types=X.types),H.T=V}}function IY(){}function q4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=gC(l).queue;pC(l,b,u,ae,f===null?IY:function(){return xC(l),f(g)})}function gC(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:ae},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function xC(l){var u=gC(l);u.next===null&&(u=l.alternate.memoizedState),Tm(l,u.next.queue,{},_s())}function H4(){return ci(Vm)}function yC(){return ha().memoizedState}function vC(){return ha().memoizedState}function RY(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=_s();l=Bc(f);var g=$c(u,l,f);g!==null&&(Xi(g,u,f),bm(g,u,f)),u={cache:b4()},l.payload=u;return}u=u.return}}function MY(l,u,f){var g=_s();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},I1(l)?wC(u,f):(f=c4(l,u,f,g),f!==null&&(Xi(f,l,g),SC(f,u,g)))}function bC(l,u,f){var g=_s();Tm(l,u,f,g)}function Tm(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(I1(l))wC(u,b);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var V=u.lastRenderedState,X=_(V,f);if(b.hasEagerState=!0,b.eagerState=X,ys(X,V))return h1(l,u,b,0),En===null&&d1(),!1}catch{}finally{}if(f=c4(l,u,b,g),f!==null)return Xi(f,l,g),SC(f,u,g),!0}return!1}function G4(l,u,f,g){if(g={lane:2,revertLane:_5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},I1(l)){if(u)throw Error(n(479))}else u=c4(l,f,g,2),u!==null&&Xi(u,l,2)}function I1(l){var u=l.alternate;return l===fr||u!==null&&u===fr}function wC(l,u){W0=T1=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function SC(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,gn(l,f)}}var jm={readContext:ci,use:E1,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useInsertionEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useSyncExternalStore:na,useId:na,useHostTransitionStatus:na,useFormState:na,useActionState:na,useOptimistic:na,useMemoCache:na,useCacheRefresh:na};jm.useEffectEvent=na;var NC={readContext:ci,use:E1,useCallback:function(l,u){return Ii().memoizedState=[l,u===void 0?null:u],l},useContext:ci,useEffect:sC,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,C1(4194308,4,uC.bind(null,u,l),f)},useLayoutEffect:function(l,u){return C1(4194308,4,l,u)},useInsertionEffect:function(l,u){C1(4,2,l,u)},useMemo:function(l,u){var f=Ii();u=u===void 0?null:u;var g=l();if(pd){$t(!0);try{l()}finally{$t(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Ii();if(f!==void 0){var b=f(u);if(pd){$t(!0);try{f(u)}finally{$t(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=MY.bind(null,fr,l),[g.memoizedState,l]},useRef:function(l){var u=Ii();return l={current:l},u.memoizedState=l},useState:function(l){l=$4(l);var u=l.queue,f=bC.bind(null,fr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:V4,useDeferredValue:function(l,u){var f=Ii();return F4(f,l,u)},useTransition:function(){var l=$4(!1);return l=pC.bind(null,fr,l.queue,!0,!1),Ii().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=fr,b=Ii();if(Dr){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),En===null)throw Error(n(349));(Ar&127)!==0||qk(g,u,f)}b.memoizedState=f;var _={value:f,getSnapshot:u};return b.queue=_,sC(Gk.bind(null,g,_,l),[l]),g.flags|=2048,Q0(9,{destroy:void 0},Hk.bind(null,g,_,f,u),null),f},useId:function(){var l=Ii(),u=En.identifierPrefix;if(Dr){var f=zo,g=$o;f=(g&~(1<<32-tt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=j1++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=AY++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:H4,useFormState:tC,useActionState:tC,useOptimistic:function(l){var u=Ii();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=G4.bind(null,fr,!0,f),f.dispatch=u,[l,u]},useMemoCache:P4,useCacheRefresh:function(){return Ii().memoizedState=RY.bind(null,fr)},useEffectEvent:function(l){var u=Ii(),f={impl:l};return u.memoizedState=f,function(){if((Zr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},W4={readContext:ci,use:E1,useCallback:hC,useContext:ci,useEffect:U4,useImperativeHandle:dC,useInsertionEffect:lC,useLayoutEffect:cC,useMemo:fC,useReducer:k1,useRef:iC,useState:function(){return k1(jl)},useDebugValue:V4,useDeferredValue:function(l,u){var f=ha();return mC(f,bn.memoizedState,l,u)},useTransition:function(){var l=k1(jl)[0],u=ha().memoizedState;return[typeof l=="boolean"?l:_m(l),u]},useSyncExternalStore:Fk,useId:yC,useHostTransitionStatus:H4,useFormState:rC,useActionState:rC,useOptimistic:function(l,u){var f=ha();return Qk(f,bn,l,u)},useMemoCache:P4,useCacheRefresh:vC};W4.useEffectEvent=oC;var _C={readContext:ci,use:E1,useCallback:hC,useContext:ci,useEffect:U4,useImperativeHandle:dC,useInsertionEffect:lC,useLayoutEffect:cC,useMemo:fC,useReducer:B4,useRef:iC,useState:function(){return B4(jl)},useDebugValue:V4,useDeferredValue:function(l,u){var f=ha();return bn===null?F4(f,l,u):mC(f,bn.memoizedState,l,u)},useTransition:function(){var l=B4(jl)[0],u=ha().memoizedState;return[typeof l=="boolean"?l:_m(l),u]},useSyncExternalStore:Fk,useId:yC,useHostTransitionStatus:H4,useFormState:aC,useActionState:aC,useOptimistic:function(l,u){var f=ha();return bn!==null?Qk(f,bn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:P4,useCacheRefresh:vC};_C.useEffectEvent=oC;function K4(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:p({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var Q4={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=_s(),b=Bc(g);b.payload=u,f!=null&&(b.callback=f),u=$c(l,b,g),u!==null&&(Xi(u,l,g),bm(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=_s(),b=Bc(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=$c(l,b,g),u!==null&&(Xi(u,l,g),bm(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=_s(),g=Bc(f);g.tag=2,u!=null&&(g.callback=u),u=$c(l,g,f),u!==null&&(Xi(u,l,f),bm(u,l,f))}};function TC(l,u,f,g,b,_,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,_,V):u.prototype&&u.prototype.isPureReactComponent?!hm(f,g)||!hm(b,_):!0}function jC(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&Q4.enqueueReplaceState(u,u.state,null)}function gd(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=p({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function AC(l){u1(l)}function EC(l){console.error(l)}function kC(l){u1(l)}function R1(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function CC(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function X4(l,u,f){return f=Bc(f),f.tag=3,f.payload={element:null},f.callback=function(){R1(l,u)},f}function OC(l){return l=Bc(l),l.tag=3,l}function IC(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var _=g.value;l.payload=function(){return b(_)},l.callback=function(){CC(u,f,g)}}var V=f.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){CC(u,f,g),typeof b!="function"&&(Hc===null?Hc=new Set([this]):Hc.add(this));var X=g.stack;this.componentDidCatch(g.value,{componentStack:X!==null?X:""})})}function DY(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&U0(u,f,b,!0),f=bs.current,f!==null){switch(f.tag){case 31:case 13:return Hs===null?H1():f.alternate===null&&aa===0&&(aa=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===b1?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),w5(l,g,b)),!1;case 22:return f.flags|=65536,g===b1?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),w5(l,g,b)),!1}throw Error(n(435,f.tag))}return w5(l,g,b),H1(),!1}if(Dr)return u=bs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==p4&&(l=Error(n(422),{cause:g}),pm(Us(l,f)))):(g!==p4&&(u=Error(n(423),{cause:g}),pm(Us(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Us(g,f),b=X4(l.stateNode,g,b),j4(l,b),aa!==4&&(aa=2)),!1;var _=Error(n(520),{cause:g});if(_=Us(_,f),Mm===null?Mm=[_]:Mm.push(_),aa!==4&&(aa=2),u===null)return!0;g=Us(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=X4(f.stateNode,g,l),j4(f,l),!1;case 1:if(u=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Hc===null||!Hc.has(_))))return f.flags|=65536,b&=-b,f.lanes|=b,b=OC(b),IC(b,l,f,g),j4(f,b),!1}f=f.return}while(f!==null);return!1}var Y4=Error(n(461)),Aa=!1;function ui(l,u,f,g){u.child=l===null?Pk(u,null,f,g):md(u,l.child,f,g)}function RC(l,u,f,g,b){f=f.render;var _=u.ref;if("ref"in g){var V={};for(var X in g)X!=="ref"&&(V[X]=g[X])}else V=g;return ud(u),g=I4(l,u,f,V,_,b),X=R4(),l!==null&&!Aa?(M4(l,u,b),Al(l,u,b)):(Dr&&X&&f4(u),u.flags|=1,ui(l,u,g,b),u.child)}function MC(l,u,f,g,b){if(l===null){var _=f.type;return typeof _=="function"&&!u4(_)&&_.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=_,DC(l,u,_,g,b)):(l=m1(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(_=l.child,!i5(l,b)){var V=_.memoizedProps;if(f=f.compare,f=f!==null?f:hm,f(V,g)&&l.ref===u.ref)return Al(l,u,b)}return u.flags|=1,l=wl(_,g),l.ref=u.ref,l.return=u,u.child=l}function DC(l,u,f,g,b){if(l!==null){var _=l.memoizedProps;if(hm(_,g)&&l.ref===u.ref)if(Aa=!1,u.pendingProps=g=_,i5(l,b))(l.flags&131072)!==0&&(Aa=!0);else return u.lanes=l.lanes,Al(l,u,b)}return J4(l,u,f,g,b)}function PC(l,u,f,g){var b=g.children,_=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~_}else g=0,u.child=null;return LC(l,u,_,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&y1(u,_!==null?_.cachePool:null),_!==null?$k(u,_):E4(),zk(u);else return g=u.lanes=536870912,LC(l,u,_!==null?_.baseLanes|f:f,f,g)}else _!==null?(y1(u,_.cachePool),$k(u,_),Uc(),u.memoizedState=null):(l!==null&&y1(u,null),E4(),Uc());return ui(l,u,b,f),u.child}function Am(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function LC(l,u,f,g,b){var _=S4();return _=_===null?null:{parent:Ta._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},l!==null&&y1(u,null),E4(),zk(u),l!==null&&U0(l,u,g,!0),u.childLanes=b,null}function M1(l,u){return u=P1({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function BC(l,u,f){return md(u,l.child,null,f),l=M1(u,u.pendingProps),l.flags|=2,ws(u),u.memoizedState=null,l}function PY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Dr){if(g.mode==="hidden")return l=M1(u,g),u.lanes=536870912,Am(null,l);if(C4(u),(l=$n)?(l=X9(l,qs),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Rc!==null?{id:$o,overflow:zo}:null,retryLane:536870912,hydrationErrors:null},f=wk(l),f.return=u,u.child=f,li=u,$n=null)):l=null,l===null)throw Dc(u);return u.lanes=536870912,null}return M1(u,g)}var _=l.memoizedState;if(_!==null){var V=_.dehydrated;if(C4(u),b)if(u.flags&256)u.flags&=-257,u=BC(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(Aa||U0(l,u,f,!1),b=(f&l.childLanes)!==0,Aa||b){if(g=En,g!==null&&(V=In(g,f),V!==0&&V!==_.retryLane))throw _.retryLane=V,sd(l,V),Xi(g,l,V),Y4;H1(),u=BC(l,u,f)}else l=_.treeContext,$n=Gs(V.nextSibling),li=u,Dr=!0,Mc=null,qs=!1,l!==null&&_k(u,l),u=M1(u,g),u.flags|=4096;return u}return l=wl(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function D1(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function J4(l,u,f,g,b){return ud(u),f=I4(l,u,f,g,void 0,b),g=R4(),l!==null&&!Aa?(M4(l,u,b),Al(l,u,b)):(Dr&&g&&f4(u),u.flags|=1,ui(l,u,f,b),u.child)}function $C(l,u,f,g,b,_){return ud(u),u.updateQueue=null,f=Vk(u,g,f,b),Uk(l),g=R4(),l!==null&&!Aa?(M4(l,u,_),Al(l,u,_)):(Dr&&g&&f4(u),u.flags|=1,ui(l,u,f,_),u.child)}function zC(l,u,f,g,b){if(ud(u),u.stateNode===null){var _=L0,V=f.contextType;typeof V=="object"&&V!==null&&(_=ci(V)),_=new f(g,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Q4,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=g,_.state=u.memoizedState,_.refs={},_4(u),V=f.contextType,_.context=typeof V=="object"&&V!==null?ci(V):L0,_.state=u.memoizedState,V=f.getDerivedStateFromProps,typeof V=="function"&&(K4(u,f,V,g),_.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(V=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),V!==_.state&&Q4.enqueueReplaceState(_,_.state,null),Sm(u,g,_,b),wm(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){_=u.stateNode;var X=u.memoizedProps,de=gd(f,X);_.props=de;var Ce=_.context,Ge=f.contextType;V=L0,typeof Ge=="object"&&Ge!==null&&(V=ci(Ge));var Ye=f.getDerivedStateFromProps;Ge=typeof Ye=="function"||typeof _.getSnapshotBeforeUpdate=="function",X=u.pendingProps!==X,Ge||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(X||Ce!==V)&&jC(u,_,g,V),Lc=!1;var Pe=u.memoizedState;_.state=Pe,Sm(u,g,_,b),wm(),Ce=u.memoizedState,X||Pe!==Ce||Lc?(typeof Ye=="function"&&(K4(u,f,Ye,g),Ce=u.memoizedState),(de=Lc||TC(u,f,de,g,Pe,Ce,V))?(Ge||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Ce),_.props=g,_.state=Ce,_.context=V,g=de):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{_=u.stateNode,T4(l,u),V=u.memoizedProps,Ge=gd(f,V),_.props=Ge,Ye=u.pendingProps,Pe=_.context,Ce=f.contextType,de=L0,typeof Ce=="object"&&Ce!==null&&(de=ci(Ce)),X=f.getDerivedStateFromProps,(Ce=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(V!==Ye||Pe!==de)&&jC(u,_,g,de),Lc=!1,Pe=u.memoizedState,_.state=Pe,Sm(u,g,_,b),wm();var Le=u.memoizedState;V!==Ye||Pe!==Le||Lc||l!==null&&l.dependencies!==null&&g1(l.dependencies)?(typeof X=="function"&&(K4(u,f,X,g),Le=u.memoizedState),(Ge=Lc||TC(u,f,Ge,g,Pe,Le,de)||l!==null&&l.dependencies!==null&&g1(l.dependencies))?(Ce||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Le,de),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Le,de)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||V===l.memoizedProps&&Pe===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Pe===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Le),_.props=g,_.state=Le,_.context=de,g=Ge):(typeof _.componentDidUpdate!="function"||V===l.memoizedProps&&Pe===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Pe===l.memoizedState||(u.flags|=1024),g=!1)}return _=g,D1(l,u),g=(u.flags&128)!==0,_||g?(_=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,l!==null&&g?(u.child=md(u,l.child,null,b),u.child=md(u,null,f,b)):ui(l,u,f,b),u.memoizedState=_.state,l=u.child):l=Al(l,u,b),l}function UC(l,u,f,g){return ld(),u.flags|=256,ui(l,u,f,g),u.child}var Z4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function e5(l){return{baseLanes:l,cachePool:Ck()}}function t5(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=Ns),l}function VC(l,u,f){var g=u.pendingProps,b=!1,_=(u.flags&128)!==0,V;if((V=_)||(V=l!==null&&l.memoizedState===null?!1:(da.current&2)!==0),V&&(b=!0,u.flags&=-129),V=(u.flags&32)!==0,u.flags&=-33,l===null){if(Dr){if(b?zc(u):Uc(),(l=$n)?(l=X9(l,qs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Rc!==null?{id:$o,overflow:zo}:null,retryLane:536870912,hydrationErrors:null},f=wk(l),f.return=u,u.child=f,li=u,$n=null)):l=null,l===null)throw Dc(u);return L5(l)?u.lanes=32:u.lanes=536870912,null}var X=g.children;return g=g.fallback,b?(Uc(),b=u.mode,X=P1({mode:"hidden",children:X},b),g=od(g,b,f,null),X.return=u,g.return=u,X.sibling=g,u.child=X,g=u.child,g.memoizedState=e5(f),g.childLanes=t5(l,V,f),u.memoizedState=Z4,Am(null,g)):(zc(u),r5(u,X))}var de=l.memoizedState;if(de!==null&&(X=de.dehydrated,X!==null)){if(_)u.flags&256?(zc(u),u.flags&=-257,u=n5(l,u,f)):u.memoizedState!==null?(Uc(),u.child=l.child,u.flags|=128,u=null):(Uc(),X=g.fallback,b=u.mode,g=P1({mode:"visible",children:g.children},b),X=od(X,b,f,null),X.flags|=2,g.return=u,X.return=u,g.sibling=X,u.child=g,md(u,l.child,null,f),g=u.child,g.memoizedState=e5(f),g.childLanes=t5(l,V,f),u.memoizedState=Z4,u=Am(null,g));else if(zc(u),L5(X)){if(V=X.nextSibling&&X.nextSibling.dataset,V)var Ce=V.dgst;V=Ce,g=Error(n(419)),g.stack="",g.digest=V,pm({value:g,source:null,stack:null}),u=n5(l,u,f)}else if(Aa||U0(l,u,f,!1),V=(f&l.childLanes)!==0,Aa||V){if(V=En,V!==null&&(g=In(V,f),g!==0&&g!==de.retryLane))throw de.retryLane=g,sd(l,g),Xi(V,l,g),Y4;P5(X)||H1(),u=n5(l,u,f)}else P5(X)?(u.flags|=192,u.child=l.child,u=null):(l=de.treeContext,$n=Gs(X.nextSibling),li=u,Dr=!0,Mc=null,qs=!1,l!==null&&_k(u,l),u=r5(u,g.children),u.flags|=4096);return u}return b?(Uc(),X=g.fallback,b=u.mode,de=l.child,Ce=de.sibling,g=wl(de,{mode:"hidden",children:g.children}),g.subtreeFlags=de.subtreeFlags&65011712,Ce!==null?X=wl(Ce,X):(X=od(X,b,f,null),X.flags|=2),X.return=u,g.return=u,g.sibling=X,u.child=g,Am(null,g),g=u.child,X=l.child.memoizedState,X===null?X=e5(f):(b=X.cachePool,b!==null?(de=Ta._currentValue,b=b.parent!==de?{parent:de,pool:de}:b):b=Ck(),X={baseLanes:X.baseLanes|f,cachePool:b}),g.memoizedState=X,g.childLanes=t5(l,V,f),u.memoizedState=Z4,Am(l.child,g)):(zc(u),f=l.child,l=f.sibling,f=wl(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(V=u.deletions,V===null?(u.deletions=[l],u.flags|=16):V.push(l)),u.child=f,u.memoizedState=null,f)}function r5(l,u){return u=P1({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function P1(l,u){return l=vs(22,l,null,u),l.lanes=0,l}function n5(l,u,f){return md(u,l.child,null,f),l=r5(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function FC(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),y4(l.return,u,f)}function a5(l,u,f,g,b,_){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:_}:(V.isBackwards=u,V.rendering=null,V.renderingStartTime=0,V.last=g,V.tail=f,V.tailMode=b,V.treeForkCount=_)}function qC(l,u,f){var g=u.pendingProps,b=g.revealOrder,_=g.tail;g=g.children;var V=da.current,X=(V&2)!==0;if(X?(V=V&1|2,u.flags|=128):V&=1,re(da,V),ui(l,u,g,f),g=Dr?mm:0,!X&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&FC(l,f,u);else if(l.tag===19)FC(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&_1(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),a5(u,!1,b,f,_,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&_1(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}a5(u,!0,f,null,_,g);break;case"together":a5(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function Al(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),qc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(U0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=wl(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=wl(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function i5(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&g1(l)))}function LY(l,u,f){switch(u.tag){case 3:Xe(u,u.stateNode.containerInfo),Pc(u,Ta,l.memoizedState.cache),ld();break;case 27:case 5:Be(u);break;case 4:Xe(u,u.stateNode.containerInfo);break;case 10:Pc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,C4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(zc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?VC(l,u,f):(zc(u),l=Al(l,u,f),l!==null?l.sibling:null);zc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(U0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return qC(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),re(da,da.current),g)break;return null;case 22:return u.lanes=0,PC(l,u,f,u.pendingProps);case 24:Pc(u,Ta,l.memoizedState.cache)}return Al(l,u,f)}function HC(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)Aa=!0;else{if(!i5(l,f)&&(u.flags&128)===0)return Aa=!1,LY(l,u,f);Aa=(l.flags&131072)!==0}else Aa=!1,Dr&&(u.flags&1048576)!==0&&Nk(u,mm,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=hd(u.elementType),u.type=l,typeof l=="function")u4(l)?(g=gd(l,g),u.tag=1,u=zC(null,u,l,g,f)):(u.tag=0,u=J4(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=RC(null,u,l,g,f);break e}else if(b===A){u.tag=14,u=MC(null,u,l,g,f);break e}}throw u=G(l)||l,Error(n(306,u,""))}}return u;case 0:return J4(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=gd(g,u.pendingProps),zC(l,u,g,b,f);case 3:e:{if(Xe(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var _=u.memoizedState;b=_.element,T4(l,u),Sm(u,g,null,f);var V=u.memoizedState;if(g=V.cache,Pc(u,Ta,g),g!==_.cache&&v4(u,[Ta],f,!0),wm(),g=V.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:V.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=UC(l,u,g,f);break e}else if(g!==b){b=Us(Error(n(424)),u),pm(b),u=UC(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for($n=Gs(l.firstChild),li=u,Dr=!0,Mc=null,qs=!0,f=Pk(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ld(),g===b){u=Al(l,u,f);break e}ui(l,u,g,f)}u=u.child}return u;case 26:return D1(l,u),l===null?(f=rO(u.type,null,u.pendingProps,null))?u.memoizedState=f:Dr||(f=u.type,l=u.pendingProps,g=J1(Ve.current).createElement(f),g[nn]=u,g[yn]=l,di(g,f,l),mr(g),u.stateNode=g):u.memoizedState=rO(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Be(u),l===null&&Dr&&(g=u.stateNode=Z9(u.type,u.pendingProps,Ve.current),li=u,qs=!0,b=$n,Qc(u.type)?(B5=b,$n=Gs(g.firstChild)):$n=b),ui(l,u,u.pendingProps.children,f),D1(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Dr&&((b=g=$n)&&(g=fJ(g,u.type,u.pendingProps,qs),g!==null?(u.stateNode=g,li=u,$n=Gs(g.firstChild),qs=!1,b=!0):b=!1),b||Dc(u)),Be(u),b=u.type,_=u.pendingProps,V=l!==null?l.memoizedProps:null,g=_.children,R5(b,_)?g=null:V!==null&&R5(b,V)&&(u.flags|=32),u.memoizedState!==null&&(b=I4(l,u,EY,null,null,f),Vm._currentValue=b),D1(l,u),ui(l,u,g,f),u.child;case 6:return l===null&&Dr&&((l=f=$n)&&(f=mJ(f,u.pendingProps,qs),f!==null?(u.stateNode=f,li=u,$n=null,l=!0):l=!1),l||Dc(u)),null;case 13:return VC(l,u,f);case 4:return Xe(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=md(u,null,g,f):ui(l,u,g,f),u.child;case 11:return RC(l,u,u.type,u.pendingProps,f);case 7:return ui(l,u,u.pendingProps,f),u.child;case 8:return ui(l,u,u.pendingProps.children,f),u.child;case 12:return ui(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Pc(u,u.type,g.value),ui(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,ud(u),b=ci(b),g=g(b),u.flags|=1,ui(l,u,g,f),u.child;case 14:return MC(l,u,u.type,u.pendingProps,f);case 15:return DC(l,u,u.type,u.pendingProps,f);case 19:return qC(l,u,f);case 31:return PY(l,u,f);case 22:return PC(l,u,f,u.pendingProps);case 24:return ud(u),g=ci(Ta),l===null?(b=S4(),b===null&&(b=En,_=b4(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=f),b=_),u.memoizedState={parent:g,cache:b},_4(u),Pc(u,Ta,b)):((l.lanes&f)!==0&&(T4(l,u),Sm(u,null,null,f),wm()),b=l.memoizedState,_=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Pc(u,Ta,g)):(g=_.cache,Pc(u,Ta,g),g!==b.cache&&v4(u,[Ta],f,!0))),ui(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function El(l){l.flags|=4}function s5(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(y9())l.flags|=8192;else throw fd=b1,N4}else l.flags&=-16777217}function GC(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!oO(u))if(y9())l.flags|=8192;else throw fd=b1,N4}function L1(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Yr():536870912,l.lanes|=u,Z0|=u)}function Em(l,u){if(!Dr)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function zn(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function BY(l,u,f){var g=u.pendingProps;switch(m4(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(u),null;case 1:return zn(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),_l(Ta),ie(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(z0(u)?El(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,g4())),zn(u),null;case 26:var b=u.type,_=u.memoizedState;return l===null?(El(u),_!==null?(zn(u),GC(u,_)):(zn(u),s5(u,b,null,g,f))):_?_!==l.memoizedState?(El(u),zn(u),GC(u,_)):(zn(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&El(u),zn(u),s5(u,b,l,g,f)),null;case 27:if(Q(u),f=Ve.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&El(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return zn(u),null}l=xe.current,z0(u)?Tk(u):(l=Z9(b,g,f),u.stateNode=l,El(u))}return zn(u),null;case 5:if(Q(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&El(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return zn(u),null}if(_=xe.current,z0(u))Tk(u);else{var V=J1(Ve.current);switch(_){case 1:_=V.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=V.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=V.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?V.createElement("select",{is:g.is}):V.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?V.createElement(b,{is:g.is}):V.createElement(b)}}_[nn]=u,_[yn]=g;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)_.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=_;e:switch(di(_,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&El(u)}}return zn(u),s5(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&El(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=Ve.current,z0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=li,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[nn]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||V9(l.nodeValue,f)),l||Dc(u,!0)}else l=J1(l).createTextNode(g),l[nn]=u,u.stateNode=l}return zn(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=z0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[nn]=u}else ld(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;zn(u),l=!1}else f=g4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(ws(u),u):(ws(u),null);if((u.flags&128)!==0)throw Error(n(558))}return zn(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=z0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[nn]=u}else ld(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;zn(u),b=!1}else b=g4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(ws(u),u):(ws(u),null)}return ws(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),L1(u,u.updateQueue),zn(u),null);case 4:return ie(),l===null&&E5(u.stateNode.containerInfo),zn(u),null;case 10:return _l(u.type),zn(u),null;case 19:if(ne(da),g=u.memoizedState,g===null)return zn(u),null;if(b=(u.flags&128)!==0,_=g.rendering,_===null)if(b)Em(g,!1);else{if(aa!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(_=_1(l),_!==null){for(u.flags|=128,Em(g,!1),l=_.updateQueue,u.updateQueue=l,L1(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)bk(f,l),f=f.sibling;return re(da,da.current&1|2),Dr&&Sl(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&Ue()>V1&&(u.flags|=128,b=!0,Em(g,!1),u.lanes=4194304)}else{if(!b)if(l=_1(_),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,L1(u,l),Em(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Dr)return zn(u),null}else 2*Ue()-g.renderingStartTime>V1&&f!==536870912&&(u.flags|=128,b=!0,Em(g,!1),u.lanes=4194304);g.isBackwards?(_.sibling=u.child,u.child=_):(l=g.last,l!==null?l.sibling=_:u.child=_,g.last=_)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Ue(),l.sibling=null,f=da.current,re(da,b?f&1|2:f&1),Dr&&Sl(u,g.treeForkCount),l):(zn(u),null);case 22:case 23:return ws(u),k4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(zn(u),u.subtreeFlags&6&&(u.flags|=8192)):zn(u),f=u.updateQueue,f!==null&&L1(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ne(dd),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),_l(Ta),zn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function $Y(l,u){switch(m4(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return _l(Ta),ie(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Q(u),null;case 31:if(u.memoizedState!==null){if(ws(u),u.alternate===null)throw Error(n(340));ld()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(ws(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));ld()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ne(da),null;case 4:return ie(),null;case 10:return _l(u.type),null;case 22:case 23:return ws(u),k4(),l!==null&&ne(dd),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return _l(Ta),null;case 25:return null;default:return null}}function WC(l,u){switch(m4(u),u.tag){case 3:_l(Ta),ie();break;case 26:case 27:case 5:Q(u);break;case 4:ie();break;case 31:u.memoizedState!==null&&ws(u);break;case 13:ws(u);break;case 19:ne(da);break;case 10:_l(u.type);break;case 22:case 23:ws(u),k4(),l!==null&&ne(dd);break;case 24:_l(Ta)}}function km(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var _=f.create,V=f.inst;g=_(),V.destroy=g}f=f.next}while(f!==b)}}catch(X){dn(u,u.return,X)}}function Vc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var _=b.next;g=_;do{if((g.tag&l)===l){var V=g.inst,X=V.destroy;if(X!==void 0){V.destroy=void 0,b=u;var de=f,Ce=X;try{Ce()}catch(Ge){dn(b,de,Ge)}}}g=g.next}while(g!==_)}}catch(Ge){dn(u,u.return,Ge)}}function KC(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{Bk(u,f)}catch(g){dn(l,l.return,g)}}}function QC(l,u,f){f.props=gd(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){dn(l,u,g)}}function Cm(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){dn(l,u,b)}}function Uo(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){dn(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){dn(l,u,b)}else f.current=null}function XC(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){dn(l,l.return,b)}}function o5(l,u,f){try{var g=l.stateNode;oJ(g,l.type,f,u),g[yn]=u}catch(b){dn(l,l.return,b)}}function YC(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Qc(l.type)||l.tag===4}function l5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||YC(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Qc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function c5(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=ra));else if(g!==4&&(g===27&&Qc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(c5(l,u,f),l=l.sibling;l!==null;)c5(l,u,f),l=l.sibling}function B1(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Qc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(B1(l,u,f),l=l.sibling;l!==null;)B1(l,u,f),l=l.sibling}function JC(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);di(u,g,f),u[nn]=l,u[yn]=f}catch(_){dn(l,l.return,_)}}var kl=!1,Ea=!1,u5=!1,ZC=typeof WeakSet=="function"?WeakSet:Set,Ya=null;function zY(l,u){if(l=l.containerInfo,O5=iy,l=dk(l),n4(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var V=0,X=-1,de=-1,Ce=0,Ge=0,Ye=l,Pe=null;t:for(;;){for(var Le;Ye!==f||b!==0&&Ye.nodeType!==3||(X=V+b),Ye!==_||g!==0&&Ye.nodeType!==3||(de=V+g),Ye.nodeType===3&&(V+=Ye.nodeValue.length),(Le=Ye.firstChild)!==null;)Pe=Ye,Ye=Le;for(;;){if(Ye===l)break t;if(Pe===f&&++Ce===b&&(X=V),Pe===_&&++Ge===g&&(de=V),(Le=Ye.nextSibling)!==null)break;Ye=Pe,Pe=Ye.parentNode}Ye=Le}f=X===-1||de===-1?null:{start:X,end:de}}else f=null}f=f||{start:0,end:0}}else f=null;for(I5={focusedElem:l,selectionRange:f},iy=!1,Ya=u;Ya!==null;)if(u=Ya,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Ya=l;else for(;Ya!==null;){switch(u=Ya,_=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&_!==null){l=void 0,f=u,b=_.memoizedProps,_=_.memoizedState,g=f.stateNode;try{var Ct=gd(f.type,b);l=g.getSnapshotBeforeUpdate(Ct,_),g.__reactInternalSnapshotBeforeUpdate=l}catch(Wt){dn(f,f.return,Wt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)D5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":D5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Ya=l;break}Ya=u.return}}function e9(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Ol(l,f),g&4&&km(5,f);break;case 1:if(Ol(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(V){dn(f,f.return,V)}else{var b=gd(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(V){dn(f,f.return,V)}}g&64&&KC(f),g&512&&Cm(f,f.return);break;case 3:if(Ol(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{Bk(l,u)}catch(V){dn(f,f.return,V)}}break;case 27:u===null&&g&4&&JC(f);case 26:case 5:Ol(l,f),u===null&&g&4&&XC(f),g&512&&Cm(f,f.return);break;case 12:Ol(l,f);break;case 31:Ol(l,f),g&4&&n9(l,f);break;case 13:Ol(l,f),g&4&&a9(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=QY.bind(null,f),pJ(l,f))));break;case 22:if(g=f.memoizedState!==null||kl,!g){u=u!==null&&u.memoizedState!==null||Ea,b=kl;var _=Ea;kl=g,(Ea=u)&&!_?Il(l,f,(f.subtreeFlags&8772)!==0):Ol(l,f),kl=b,Ea=_}break;case 30:break;default:Ol(l,f)}}function t9(l){var u=l.alternate;u!==null&&(l.alternate=null,t9(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&_t(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Fn=null,Gi=!1;function Cl(l,u,f){for(f=f.child;f!==null;)r9(l,u,f),f=f.sibling}function r9(l,u,f){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(At,f)}catch{}switch(f.tag){case 26:Ea||Uo(f,u),Cl(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ea||Uo(f,u);var g=Fn,b=Gi;Qc(f.type)&&(Fn=f.stateNode,Gi=!1),Cl(l,u,f),$m(f.stateNode),Fn=g,Gi=b;break;case 5:Ea||Uo(f,u);case 6:if(g=Fn,b=Gi,Fn=null,Cl(l,u,f),Fn=g,Gi=b,Fn!==null)if(Gi)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(f.stateNode)}catch(_){dn(f,u,_)}else try{Fn.removeChild(f.stateNode)}catch(_){dn(f,u,_)}break;case 18:Fn!==null&&(Gi?(l=Fn,K9(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),oh(l)):K9(Fn,f.stateNode));break;case 4:g=Fn,b=Gi,Fn=f.stateNode.containerInfo,Gi=!0,Cl(l,u,f),Fn=g,Gi=b;break;case 0:case 11:case 14:case 15:Vc(2,f,u),Ea||Vc(4,f,u),Cl(l,u,f);break;case 1:Ea||(Uo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&QC(f,u,g)),Cl(l,u,f);break;case 21:Cl(l,u,f);break;case 22:Ea=(g=Ea)||f.memoizedState!==null,Cl(l,u,f),Ea=g;break;default:Cl(l,u,f)}}function n9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{oh(l)}catch(f){dn(u,u.return,f)}}}function a9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{oh(l)}catch(f){dn(u,u.return,f)}}function UY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new ZC),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new ZC),u;default:throw Error(n(435,l.tag))}}function $1(l,u){var f=UY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=XY.bind(null,l,g);g.then(b,b)}})}function Wi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],_=l,V=u,X=V;e:for(;X!==null;){switch(X.tag){case 27:if(Qc(X.type)){Fn=X.stateNode,Gi=!1;break e}break;case 5:Fn=X.stateNode,Gi=!1;break e;case 3:case 4:Fn=X.stateNode.containerInfo,Gi=!0;break e}X=X.return}if(Fn===null)throw Error(n(160));r9(_,V,b),Fn=null,Gi=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)i9(u,l),u=u.sibling}var go=null;function i9(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Wi(u,l),Ki(l),g&4&&(Vc(3,l,l.return),km(3,l),Vc(5,l,l.return));break;case 1:Wi(u,l),Ki(l),g&512&&(Ea||f===null||Uo(f,f.return)),g&64&&kl&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=go;if(Wi(u,l),Ki(l),g&512&&(Ea||f===null||Uo(f,f.return)),g&4){var _=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":_=b.getElementsByTagName("title")[0],(!_||_[bi]||_[nn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(g),b.head.insertBefore(_,b.querySelector("head > title"))),di(_,g,f),_[nn]=l,mr(_),g=_;break e;case"link":var V=iO("link","href",b).get(g+(f.href||""));if(V){for(var X=0;X<V.length;X++)if(_=V[X],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){V.splice(X,1);break t}}_=b.createElement(g),di(_,g,f),b.head.appendChild(_);break;case"meta":if(V=iO("meta","content",b).get(g+(f.content||""))){for(X=0;X<V.length;X++)if(_=V[X],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){V.splice(X,1);break t}}_=b.createElement(g),di(_,g,f),b.head.appendChild(_);break;default:throw Error(n(468,g))}_[nn]=l,mr(_),g=_}l.stateNode=g}else sO(b,l.type,l.stateNode);else l.stateNode=aO(b,g,l.memoizedProps);else _!==g?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,g===null?sO(b,l.type,l.stateNode):aO(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&o5(l,l.memoizedProps,f.memoizedProps)}break;case 27:Wi(u,l),Ki(l),g&512&&(Ea||f===null||Uo(f,f.return)),f!==null&&g&4&&o5(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Wi(u,l),Ki(l),g&512&&(Ea||f===null||Uo(f,f.return)),l.flags&32){b=l.stateNode;try{qe(b,"")}catch(Ct){dn(l,l.return,Ct)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,o5(l,b,f!==null?f.memoizedProps:b)),g&1024&&(u5=!0);break;case 6:if(Wi(u,l),Ki(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Ct){dn(l,l.return,Ct)}}break;case 3:if(ty=null,b=go,go=Z1(u.containerInfo),Wi(u,l),go=b,Ki(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{oh(u.containerInfo)}catch(Ct){dn(l,l.return,Ct)}u5&&(u5=!1,s9(l));break;case 4:g=go,go=Z1(l.stateNode.containerInfo),Wi(u,l),Ki(l),go=g;break;case 12:Wi(u,l),Ki(l);break;case 31:Wi(u,l),Ki(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,$1(l,g)));break;case 13:Wi(u,l),Ki(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(U1=Ue()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,$1(l,g)));break;case 22:b=l.memoizedState!==null;var de=f!==null&&f.memoizedState!==null,Ce=kl,Ge=Ea;if(kl=Ce||b,Ea=Ge||de,Wi(u,l),Ea=Ge,kl=Ce,Ki(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||de||kl||Ea||xd(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){de=f=u;try{if(_=de.stateNode,b)V=_.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{X=de.stateNode;var Ye=de.memoizedProps.style,Pe=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null;X.style.display=Pe==null||typeof Pe=="boolean"?"":(""+Pe).trim()}}catch(Ct){dn(de,de.return,Ct)}}}else if(u.tag===6){if(f===null){de=u;try{de.stateNode.nodeValue=b?"":de.memoizedProps}catch(Ct){dn(de,de.return,Ct)}}}else if(u.tag===18){if(f===null){de=u;try{var Le=de.stateNode;b?Q9(Le,!0):Q9(de.stateNode,!1)}catch(Ct){dn(de,de.return,Ct)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,$1(l,f))));break;case 19:Wi(u,l),Ki(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,$1(l,g)));break;case 30:break;case 21:break;default:Wi(u,l),Ki(l)}}function Ki(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(YC(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,_=l5(l);B1(l,_,b);break;case 5:var V=f.stateNode;f.flags&32&&(qe(V,""),f.flags&=-33);var X=l5(l);B1(l,X,V);break;case 3:case 4:var de=f.stateNode.containerInfo,Ce=l5(l);c5(l,Ce,de);break;default:throw Error(n(161))}}catch(Ge){dn(l,l.return,Ge)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function s9(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;s9(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Ol(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)e9(l,u.alternate,u),u=u.sibling}function xd(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Vc(4,u,u.return),xd(u);break;case 1:Uo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&QC(u,u.return,f),xd(u);break;case 27:$m(u.stateNode);case 26:case 5:Uo(u,u.return),xd(u);break;case 22:u.memoizedState===null&&xd(u);break;case 30:xd(u);break;default:xd(u)}l=l.sibling}}function Il(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,_=u,V=_.flags;switch(_.tag){case 0:case 11:case 15:Il(b,_,f),km(4,_);break;case 1:if(Il(b,_,f),g=_,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ce){dn(g,g.return,Ce)}if(g=_,b=g.updateQueue,b!==null){var X=g.stateNode;try{var de=b.shared.hiddenCallbacks;if(de!==null)for(b.shared.hiddenCallbacks=null,b=0;b<de.length;b++)Lk(de[b],X)}catch(Ce){dn(g,g.return,Ce)}}f&&V&64&&KC(_),Cm(_,_.return);break;case 27:JC(_);case 26:case 5:Il(b,_,f),f&&g===null&&V&4&&XC(_),Cm(_,_.return);break;case 12:Il(b,_,f);break;case 31:Il(b,_,f),f&&V&4&&n9(b,_);break;case 13:Il(b,_,f),f&&V&4&&a9(b,_);break;case 22:_.memoizedState===null&&Il(b,_,f),Cm(_,_.return);break;case 30:break;default:Il(b,_,f)}u=u.sibling}}function d5(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&gm(f))}function h5(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&gm(l))}function xo(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)o9(l,u,f,g),u=u.sibling}function o9(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:xo(l,u,f,g),b&2048&&km(9,u);break;case 1:xo(l,u,f,g);break;case 3:xo(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&gm(l)));break;case 12:if(b&2048){xo(l,u,f,g),l=u.stateNode;try{var _=u.memoizedProps,V=_.id,X=_.onPostCommit;typeof X=="function"&&X(V,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(de){dn(u,u.return,de)}}else xo(l,u,f,g);break;case 31:xo(l,u,f,g);break;case 13:xo(l,u,f,g);break;case 23:break;case 22:_=u.stateNode,V=u.alternate,u.memoizedState!==null?_._visibility&2?xo(l,u,f,g):Om(l,u):_._visibility&2?xo(l,u,f,g):(_._visibility|=2,X0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&d5(V,u);break;case 24:xo(l,u,f,g),b&2048&&h5(u.alternate,u);break;default:xo(l,u,f,g)}}function X0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=l,V=u,X=f,de=g,Ce=V.flags;switch(V.tag){case 0:case 11:case 15:X0(_,V,X,de,b),km(8,V);break;case 23:break;case 22:var Ge=V.stateNode;V.memoizedState!==null?Ge._visibility&2?X0(_,V,X,de,b):Om(_,V):(Ge._visibility|=2,X0(_,V,X,de,b)),b&&Ce&2048&&d5(V.alternate,V);break;case 24:X0(_,V,X,de,b),b&&Ce&2048&&h5(V.alternate,V);break;default:X0(_,V,X,de,b)}u=u.sibling}}function Om(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:Om(f,g),b&2048&&d5(g.alternate,g);break;case 24:Om(f,g),b&2048&&h5(g.alternate,g);break;default:Om(f,g)}u=u.sibling}}var Im=8192;function Y0(l,u,f){if(l.subtreeFlags&Im)for(l=l.child;l!==null;)l9(l,u,f),l=l.sibling}function l9(l,u,f){switch(l.tag){case 26:Y0(l,u,f),l.flags&Im&&l.memoizedState!==null&&AJ(f,go,l.memoizedState,l.memoizedProps);break;case 5:Y0(l,u,f);break;case 3:case 4:var g=go;go=Z1(l.stateNode.containerInfo),Y0(l,u,f),go=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=Im,Im=16777216,Y0(l,u,f),Im=g):Y0(l,u,f));break;default:Y0(l,u,f)}}function c9(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Rm(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ya=g,d9(g,l)}c9(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)u9(l),l=l.sibling}function u9(l){switch(l.tag){case 0:case 11:case 15:Rm(l),l.flags&2048&&Vc(9,l,l.return);break;case 3:Rm(l);break;case 12:Rm(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,z1(l)):Rm(l);break;default:Rm(l)}}function z1(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ya=g,d9(g,l)}c9(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Vc(8,u,u.return),z1(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,z1(u));break;default:z1(u)}l=l.sibling}}function d9(l,u){for(;Ya!==null;){var f=Ya;switch(f.tag){case 0:case 11:case 15:Vc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:gm(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Ya=g;else e:for(f=l;Ya!==null;){g=Ya;var b=g.sibling,_=g.return;if(t9(g),g===f){Ya=null;break e}if(b!==null){b.return=_,Ya=b;break e}Ya=_}}}var VY={getCacheForType:function(l){var u=ci(Ta),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return ci(Ta).controller.signal}},FY=typeof WeakMap=="function"?WeakMap:Map,Zr=0,En=null,_r=null,Ar=0,un=0,Ss=null,Fc=!1,J0=!1,f5=!1,Rl=0,aa=0,qc=0,yd=0,m5=0,Ns=0,Z0=0,Mm=null,Qi=null,p5=!1,U1=0,h9=0,V1=1/0,F1=null,Hc=null,Pa=0,Gc=null,eh=null,Ml=0,g5=0,x5=null,f9=null,Dm=0,y5=null;function _s(){return(Zr&2)!==0&&Ar!==0?Ar&-Ar:H.T!==null?_5():xn()}function m9(){if(Ns===0)if((Ar&536870912)===0||Dr){var l=wr;wr<<=1,(wr&3932160)===0&&(wr=262144),Ns=l}else Ns=536870912;return l=bs.current,l!==null&&(l.flags|=32),Ns}function Xi(l,u,f){(l===En&&(un===2||un===9)||l.cancelPendingCommit!==null)&&(th(l,0),Wc(l,Ar,Ns,!1)),pn(l,f),((Zr&2)===0||l!==En)&&(l===En&&((Zr&2)===0&&(yd|=f),aa===4&&Wc(l,Ar,Ns,!1)),Vo(l))}function p9(l,u,f){if((Zr&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||Vr(l,u),b=g?GY(l,u):b5(l,u,!0),_=g;do{if(b===0){J0&&!g&&Wc(l,u,0,!1);break}else{if(f=l.current.alternate,_&&!qY(f)){b=b5(l,u,!1),_=!1;continue}if(b===2){if(_=u,l.errorRecoveryDisabledLanes&_)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){u=V;e:{var X=l;b=Mm;var de=X.current.memoizedState.isDehydrated;if(de&&(th(X,V).flags|=256),V=b5(X,V,!1),V!==2){if(f5&&!de){X.errorRecoveryDisabledLanes|=_,yd|=_,b=4;break e}_=Qi,Qi=b,_!==null&&(Qi===null?Qi=_:Qi.push.apply(Qi,_))}b=V}if(_=!1,b!==2)continue}}if(b===1){th(l,0),Wc(l,u,0,!0);break}e:{switch(g=l,_=b,_){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Wc(g,u,Ns,!Fc);break e;case 2:Qi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=U1+300-Ue(),10<b)){if(Wc(g,u,Ns,!Fc),Nt(g,0,!0)!==0)break e;Ml=u,g.timeoutHandle=G9(g9.bind(null,g,f,Qi,F1,p5,u,Ns,yd,Z0,Fc,_,"Throttled",-0,0),b);break e}g9(g,f,Qi,F1,p5,u,Ns,yd,Z0,Fc,_,null,-0,0)}}break}while(!0);Vo(l)}function g9(l,u,f,g,b,_,V,X,de,Ce,Ge,Ye,Pe,Le){if(l.timeoutHandle=-1,Ye=u.subtreeFlags,Ye&8192||(Ye&16785408)===16785408){Ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ra},l9(u,_,Ye);var Ct=(_&62914560)===_?U1-Ue():(_&4194048)===_?h9-Ue():0;if(Ct=EJ(Ye,Ct),Ct!==null){Ml=_,l.cancelPendingCommit=Ct(_9.bind(null,l,u,_,f,g,b,V,X,de,Ge,Ye,null,Pe,Le)),Wc(l,_,V,!Ce);return}}_9(l,u,_,f,g,b,V,X,de)}function qY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],_=b.getSnapshot;b=b.value;try{if(!ys(_(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Wc(l,u,f,g){u&=~m5,u&=~yd,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var _=31-tt(b),V=1<<_;g[_]=-1,b&=~V}f!==0&&ba(l,f,u)}function q1(){return(Zr&6)===0?(Pm(0),!1):!0}function v5(){if(_r!==null){if(un===0)var l=_r.return;else l=_r,Nl=cd=null,D4(l),H0=null,ym=0,l=_r;for(;l!==null;)WC(l.alternate,l),l=l.return;_r=null}}function th(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,uJ(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Ml=0,v5(),En=l,_r=f=wl(l.current,null),Ar=u,un=0,Ss=null,Fc=!1,J0=Vr(l,u),f5=!1,Z0=Ns=m5=yd=qc=aa=0,Qi=Mm=null,p5=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-tt(g),_=1<<b;u|=l[b],g&=~_}return Rl=u,d1(),f}function x9(l,u){fr=null,H.H=jm,u===q0||u===v1?(u=Rk(),un=3):u===N4?(u=Rk(),un=4):un=u===Y4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ss=u,_r===null&&(aa=1,R1(l,Us(u,l.current)))}function y9(){var l=bs.current;return l===null?!0:(Ar&4194048)===Ar?Hs===null:(Ar&62914560)===Ar||(Ar&536870912)!==0?l===Hs:!1}function v9(){var l=H.H;return H.H=jm,l===null?jm:l}function b9(){var l=H.A;return H.A=VY,l}function H1(){aa=4,Fc||(Ar&4194048)!==Ar&&bs.current!==null||(J0=!0),(qc&134217727)===0&&(yd&134217727)===0||En===null||Wc(En,Ar,Ns,!1)}function b5(l,u,f){var g=Zr;Zr|=2;var b=v9(),_=b9();(En!==l||Ar!==u)&&(F1=null,th(l,u)),u=!1;var V=aa;e:do try{if(un!==0&&_r!==null){var X=_r,de=Ss;switch(un){case 8:v5(),V=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(u=!0);var Ce=un;if(un=0,Ss=null,rh(l,X,de,Ce),f&&J0){V=0;break e}break;default:Ce=un,un=0,Ss=null,rh(l,X,de,Ce)}}HY(),V=aa;break}catch(Ge){x9(l,Ge)}while(!0);return u&&l.shellSuspendCounter++,Nl=cd=null,Zr=g,H.H=b,H.A=_,_r===null&&(En=null,Ar=0,d1()),V}function HY(){for(;_r!==null;)w9(_r)}function GY(l,u){var f=Zr;Zr|=2;var g=v9(),b=b9();En!==l||Ar!==u?(F1=null,V1=Ue()+500,th(l,u)):J0=Vr(l,u);e:do try{if(un!==0&&_r!==null){u=_r;var _=Ss;t:switch(un){case 1:un=0,Ss=null,rh(l,u,_,1);break;case 2:case 9:if(Ok(_)){un=0,Ss=null,S9(u);break}u=function(){un!==2&&un!==9||En!==l||(un=7),Vo(l)},_.then(u,u);break e;case 3:un=7;break e;case 4:un=5;break e;case 7:Ok(_)?(un=0,Ss=null,S9(u)):(un=0,Ss=null,rh(l,u,_,7));break;case 5:var V=null;switch(_r.tag){case 26:V=_r.memoizedState;case 5:case 27:var X=_r;if(V?oO(V):X.stateNode.complete){un=0,Ss=null;var de=X.sibling;if(de!==null)_r=de;else{var Ce=X.return;Ce!==null?(_r=Ce,G1(Ce)):_r=null}break t}}un=0,Ss=null,rh(l,u,_,5);break;case 6:un=0,Ss=null,rh(l,u,_,6);break;case 8:v5(),aa=6;break e;default:throw Error(n(462))}}WY();break}catch(Ge){x9(l,Ge)}while(!0);return Nl=cd=null,H.H=g,H.A=b,Zr=f,_r!==null?0:(En=null,Ar=0,d1(),aa)}function WY(){for(;_r!==null&&!et();)w9(_r)}function w9(l){var u=HC(l.alternate,l,Rl);l.memoizedProps=l.pendingProps,u===null?G1(l):_r=u}function S9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=$C(f,u,u.pendingProps,u.type,void 0,Ar);break;case 11:u=$C(f,u,u.pendingProps,u.type.render,u.ref,Ar);break;case 5:D4(u);default:WC(f,u),u=_r=bk(u,Rl),u=HC(f,u,Rl)}l.memoizedProps=l.pendingProps,u===null?G1(l):_r=u}function rh(l,u,f,g){Nl=cd=null,D4(u),H0=null,ym=0;var b=u.return;try{if(DY(l,b,u,f,Ar)){aa=1,R1(l,Us(f,l.current)),_r=null;return}}catch(_){if(b!==null)throw _r=b,_;aa=1,R1(l,Us(f,l.current)),_r=null;return}u.flags&32768?(Dr||g===1?l=!0:J0||(Ar&536870912)!==0?l=!1:(Fc=l=!0,(g===2||g===9||g===3||g===6)&&(g=bs.current,g!==null&&g.tag===13&&(g.flags|=16384))),N9(u,l)):G1(u)}function G1(l){var u=l;do{if((u.flags&32768)!==0){N9(u,Fc);return}l=u.return;var f=BY(u.alternate,u,Rl);if(f!==null){_r=f;return}if(u=u.sibling,u!==null){_r=u;return}_r=u=l}while(u!==null);aa===0&&(aa=5)}function N9(l,u){do{var f=$Y(l.alternate,l);if(f!==null){f.flags&=32767,_r=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){_r=l;return}_r=l=f}while(l!==null);aa=6,_r=null}function _9(l,u,f,g,b,_,V,X,de){l.cancelPendingCommit=null;do W1();while(Pa!==0);if((Zr&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(_=u.lanes|u.childLanes,_|=l4,dr(l,f,_,V,X,de),l===En&&(_r=En=null,Ar=0),eh=u,Gc=l,Ml=f,g5=_,x5=b,f9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,YY(Ut,function(){return k9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=Z.p,Z.p=2,V=Zr,Zr|=4;try{zY(l,u,f)}finally{Zr=V,Z.p=b,H.T=g}}Pa=1,T9(),j9(),A9()}}function T9(){if(Pa===1){Pa=0;var l=Gc,u=eh,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=Z.p;Z.p=2;var b=Zr;Zr|=4;try{i9(u,l);var _=I5,V=dk(l.containerInfo),X=_.focusedElem,de=_.selectionRange;if(V!==X&&X&&X.ownerDocument&&uk(X.ownerDocument.documentElement,X)){if(de!==null&&n4(X)){var Ce=de.start,Ge=de.end;if(Ge===void 0&&(Ge=Ce),"selectionStart"in X)X.selectionStart=Ce,X.selectionEnd=Math.min(Ge,X.value.length);else{var Ye=X.ownerDocument||document,Pe=Ye&&Ye.defaultView||window;if(Pe.getSelection){var Le=Pe.getSelection(),Ct=X.textContent.length,Wt=Math.min(de.start,Ct),Sn=de.end===void 0?Wt:Math.min(de.end,Ct);!Le.extend&&Wt>Sn&&(V=Sn,Sn=Wt,Wt=V);var we=ck(X,Wt),pe=ck(X,Sn);if(we&&pe&&(Le.rangeCount!==1||Le.anchorNode!==we.node||Le.anchorOffset!==we.offset||Le.focusNode!==pe.node||Le.focusOffset!==pe.offset)){var Ee=Ye.createRange();Ee.setStart(we.node,we.offset),Le.removeAllRanges(),Wt>Sn?(Le.addRange(Ee),Le.extend(pe.node,pe.offset)):(Ee.setEnd(pe.node,pe.offset),Le.addRange(Ee))}}}}for(Ye=[],Le=X;Le=Le.parentNode;)Le.nodeType===1&&Ye.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<Ye.length;X++){var Ke=Ye[X];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}iy=!!O5,I5=O5=null}finally{Zr=b,Z.p=g,H.T=f}}l.current=u,Pa=2}}function j9(){if(Pa===2){Pa=0;var l=Gc,u=eh,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=Z.p;Z.p=2;var b=Zr;Zr|=4;try{e9(l,u.alternate,u)}finally{Zr=b,Z.p=g,H.T=f}}Pa=3}}function A9(){if(Pa===4||Pa===3){Pa=0,ce();var l=Gc,u=eh,f=Ml,g=f9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Pa=5:(Pa=0,eh=Gc=null,E9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Hc=null),jr(f),u=u.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(At,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=H.T,b=Z.p,Z.p=2,H.T=null;try{for(var _=l.onRecoverableError,V=0;V<g.length;V++){var X=g[V];_(X.value,{componentStack:X.stack})}}finally{H.T=u,Z.p=b}}(Ml&3)!==0&&W1(),Vo(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===y5?Dm++:(Dm=0,y5=l):Dm=0,Pm(0)}}function E9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,gm(u)))}function W1(){return T9(),j9(),A9(),k9()}function k9(){if(Pa!==5)return!1;var l=Gc,u=g5;g5=0;var f=jr(Ml),g=H.T,b=Z.p;try{Z.p=32>f?32:f,H.T=null,f=x5,x5=null;var _=Gc,V=Ml;if(Pa=0,eh=Gc=null,Ml=0,(Zr&6)!==0)throw Error(n(331));var X=Zr;if(Zr|=4,u9(_.current),o9(_,_.current,V,f),Zr=X,Pm(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(At,_)}catch{}return!0}finally{Z.p=b,H.T=g,E9(l,u)}}function C9(l,u,f){u=Us(f,u),u=X4(l.stateNode,u,2),l=$c(l,u,2),l!==null&&(pn(l,2),Vo(l))}function dn(l,u,f){if(l.tag===3)C9(l,l,f);else for(;u!==null;){if(u.tag===3){C9(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Hc===null||!Hc.has(g))){l=Us(f,l),f=OC(2),g=$c(u,f,2),g!==null&&(IC(f,g,u,l),pn(g,2),Vo(g));break}}u=u.return}}function w5(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new FY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(f5=!0,b.add(f),l=KY.bind(null,l,u,f),u.then(l,l))}function KY(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,En===l&&(Ar&f)===f&&(aa===4||aa===3&&(Ar&62914560)===Ar&&300>Ue()-U1?(Zr&2)===0&&th(l,0):m5|=f,Z0===Ar&&(Z0=0)),Vo(l)}function O9(l,u){u===0&&(u=Yr()),l=sd(l,u),l!==null&&(pn(l,u),Vo(l))}function QY(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),O9(l,f)}function XY(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),O9(l,f)}function YY(l,u){return St(l,u)}var K1=null,nh=null,S5=!1,Q1=!1,N5=!1,Kc=0;function Vo(l){l!==nh&&l.next===null&&(nh===null?K1=nh=l:nh=nh.next=l),Q1=!0,S5||(S5=!0,ZY())}function Pm(l,u){if(!N5&&Q1){N5=!0;do for(var f=!1,g=K1;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var _=0;else{var V=g.suspendedLanes,X=g.pingedLanes;_=(1<<31-tt(42|l)+1)-1,_&=b&~(V&~X),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,D9(g,_))}else _=Ar,_=Nt(g,g===En?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Vr(g,_)||(f=!0,D9(g,_));g=g.next}while(f);N5=!1}}function JY(){I9()}function I9(){Q1=S5=!1;var l=0;Kc!==0&&cJ()&&(l=Kc);for(var u=Ue(),f=null,g=K1;g!==null;){var b=g.next,_=R9(g,u);_===0?(g.next=null,f===null?K1=b:f.next=b,b===null&&(nh=f)):(f=g,(l!==0||(_&3)!==0)&&(Q1=!0)),g=b}Pa!==0&&Pa!==5||Pm(l),Kc!==0&&(Kc=0)}function R9(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,_=l.pendingLanes&-62914561;0<_;){var V=31-tt(_),X=1<<V,de=b[V];de===-1?((X&f)===0||(X&g)!==0)&&(b[V]=ln(X,u)):de<=u&&(l.expiredLanes|=X),_&=~X}if(u=En,f=Ar,f=Nt(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(un===2||un===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&vt(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Vr(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&vt(g),jr(f)){case 2:case 8:f=dt;break;case 32:f=Ut;break;case 268435456:f=Ir;break;default:f=Ut}return g=M9.bind(null,l),f=St(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&vt(g),l.callbackPriority=2,l.callbackNode=null,2}function M9(l,u){if(Pa!==0&&Pa!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(W1()&&l.callbackNode!==f)return null;var g=Ar;return g=Nt(l,l===En?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(p9(l,g,u),R9(l,Ue()),l.callbackNode!=null&&l.callbackNode===f?M9.bind(null,l):null)}function D9(l,u){if(W1())return null;p9(l,u,!0)}function ZY(){dJ(function(){(Zr&6)!==0?St(ht,JY):I9()})}function _5(){if(Kc===0){var l=V0;l===0&&(l=mn,mn<<=1,(mn&261888)===0&&(mn=256)),Kc=l}return Kc}function P9(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Na(""+l)}function L9(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function eJ(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var _=P9((b[yn]||null).action),V=g.submitter;V&&(u=(u=V[yn]||null)?P9(u.formAction):V.getAttribute("formAction"),u!==null&&(_=u,V=null));var X=new Zu("action","action",null,g,b);l.push({event:X,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Kc!==0){var de=V?L9(b,V):new FormData(b);q4(f,{pending:!0,data:de,method:b.method,action:_},null,de)}}else typeof _=="function"&&(X.preventDefault(),de=V?L9(b,V):new FormData(b),q4(f,{pending:!0,data:de,method:b.method,action:_},_,de))},currentTarget:b}]})}}for(var T5=0;T5<o4.length;T5++){var j5=o4[T5],tJ=j5.toLowerCase(),rJ=j5[0].toUpperCase()+j5.slice(1);po(tJ,"on"+rJ)}po(mk,"onAnimationEnd"),po(pk,"onAnimationIteration"),po(gk,"onAnimationStart"),po("dblclick","onDoubleClick"),po("focusin","onFocus"),po("focusout","onBlur"),po(yY,"onTransitionRun"),po(vY,"onTransitionStart"),po(bY,"onTransitionCancel"),po(xk,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lm));function B9(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var _=void 0;if(u)for(var V=g.length-1;0<=V;V--){var X=g[V],de=X.instance,Ce=X.currentTarget;if(X=X.listener,de!==_&&b.isPropagationStopped())break e;_=X,b.currentTarget=Ce;try{_(b)}catch(Ge){u1(Ge)}b.currentTarget=null,_=de}else for(V=0;V<g.length;V++){if(X=g[V],de=X.instance,Ce=X.currentTarget,X=X.listener,de!==_&&b.isPropagationStopped())break e;_=X,b.currentTarget=Ce;try{_(b)}catch(Ge){u1(Ge)}b.currentTarget=null,_=de}}}}function Tr(l,u){var f=u[oi];f===void 0&&(f=u[oi]=new Set);var g=l+"__bubble";f.has(g)||($9(u,l,2,!1),f.add(g))}function A5(l,u,f){var g=0;u&&(g|=4),$9(f,l,g,u)}var X1="_reactListening"+Math.random().toString(36).slice(2);function E5(l){if(!l[X1]){l[X1]=!0,cn.forEach(function(f){f!=="selectionchange"&&(nJ.has(f)||A5(f,!1,l),A5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[X1]||(u[X1]=!0,A5("selectionchange",!1,u))}}function $9(l,u,f,g){switch(mO(u)){case 2:var b=OJ;break;case 8:b=IJ;break;default:b=F5}f=b.bind(null,u,f,l),b=void 0,!im||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function k5(l,u,f,g,b){var _=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var X=g.stateNode.containerInfo;if(X===b)break;if(V===4)for(V=g.return;V!==null;){var de=V.tag;if((de===3||de===4)&&V.stateNode.containerInfo===b)return;V=V.return}for(;X!==null;){if(V=me(X),V===null)return;if(de=V.tag,de===5||de===6||de===26||de===27){g=_=V;continue e}X=X.parentNode}}g=g.return}Kx(function(){var Ce=_,Ge=Po(f),Ye=[];e:{var Pe=yk.get(l);if(Pe!==void 0){var Le=Zu,Ct=l;switch(l){case"keypress":if(Ju(f)===0)break e;case"keydown":case"keyup":Le=n1;break;case"focusin":Ct="focus",Le=kc;break;case"focusout":Ct="blur",Le=kc;break;case"beforeblur":case"afterblur":Le=kc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=Xx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=Yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=i1;break;case mk:case pk:case gk:Le=I0;break;case xk:Le=R0;break;case"scroll":case"scrollend":Le=Qx;break;case"wheel":Le=o1;break;case"copy":case"cut":case"paste":Le=Zx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=um;break;case"toggle":case"beforetoggle":Le=Oc}var Wt=(u&4)!==0,Sn=!Wt&&(l==="scroll"||l==="scrollend"),we=Wt?Pe!==null?Pe+"Capture":null:Pe;Wt=[];for(var pe=Ce,Ee;pe!==null;){var Ke=pe;if(Ee=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Ee===null||we===null||(Ke=qi(pe,we),Ke!=null&&Wt.push(Bm(pe,Ke,Ee))),Sn)break;pe=pe.return}0<Wt.length&&(Pe=new Le(Pe,Ct,null,f,Ge),Ye.push({event:Pe,listeners:Wt}))}}if((u&7)===0){e:{if(Pe=l==="mouseover"||l==="pointerover",Le=l==="mouseout"||l==="pointerout",Pe&&f!==Mr&&(Ct=f.relatedTarget||f.fromElement)&&(me(Ct)||Ct[An]))break e;if((Le||Pe)&&(Pe=Ge.window===Ge?Ge:(Pe=Ge.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,Le?(Ct=f.relatedTarget||f.toElement,Le=Ce,Ct=Ct?me(Ct):null,Ct!==null&&(Sn=i(Ct),Wt=Ct.tag,Ct!==Sn||Wt!==5&&Wt!==27&&Wt!==6)&&(Ct=null)):(Le=null,Ct=Ce),Le!==Ct)){if(Wt=Xx,Ke="onMouseLeave",we="onMouseEnter",pe="mouse",(l==="pointerout"||l==="pointerover")&&(Wt=um,Ke="onPointerLeave",we="onPointerEnter",pe="pointer"),Sn=Le==null?Pe:ft(Le),Ee=Ct==null?Pe:ft(Ct),Pe=new Wt(Ke,pe+"leave",Le,f,Ge),Pe.target=Sn,Pe.relatedTarget=Ee,Ke=null,me(Ge)===Ce&&(Wt=new Wt(we,pe+"enter",Ct,f,Ge),Wt.target=Ee,Wt.relatedTarget=Sn,Ke=Wt),Sn=Ke,Le&&Ct)t:{for(Wt=aJ,we=Le,pe=Ct,Ee=0,Ke=we;Ke;Ke=Wt(Ke))Ee++;Ke=0;for(var Vt=pe;Vt;Vt=Wt(Vt))Ke++;for(;0<Ee-Ke;)we=Wt(we),Ee--;for(;0<Ke-Ee;)pe=Wt(pe),Ke--;for(;Ee--;){if(we===pe||pe!==null&&we===pe.alternate){Wt=we;break t}we=Wt(we),pe=Wt(pe)}Wt=null}else Wt=null;Le!==null&&z9(Ye,Pe,Le,Wt,!1),Ct!==null&&Sn!==null&&z9(Ye,Sn,Ct,Wt,!0)}}e:{if(Pe=Ce?ft(Ce):window,Le=Pe.nodeName&&Pe.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Pe.type==="file")var qr=nk;else if(Hi(Pe))if(ak)qr=pY;else{qr=fY;var Dt=hY}else Le=Pe.nodeName,!Le||Le.toLowerCase()!=="input"||Pe.type!=="checkbox"&&Pe.type!=="radio"?Ce&&ua(Ce.elementType)&&(qr=nk):qr=mY;if(qr&&(qr=qr(l,Ce))){nd(Ye,qr,f,Ge);break e}Dt&&Dt(l,Pe,Ce),l==="focusout"&&Ce&&Pe.type==="number"&&Ce.memoizedProps.value!=null&&ue(Pe,"number",Pe.value)}switch(Dt=Ce?ft(Ce):window,l){case"focusin":(Hi(Dt)||Dt.contentEditable==="true")&&(M0=Dt,a4=Ce,fm=null);break;case"focusout":fm=a4=M0=null;break;case"mousedown":i4=!0;break;case"contextmenu":case"mouseup":case"dragend":i4=!1,hk(Ye,f,Ge);break;case"selectionchange":if(xY)break;case"keydown":case"keyup":hk(Ye,f,Ge)}var pr;if(D)e:{switch(l){case"compositionstart":var Er="onCompositionStart";break e;case"compositionend":Er="onCompositionEnd";break e;case"compositionupdate":Er="onCompositionUpdate";break e}Er=void 0}else vr?an(l,f)&&(Er="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Er="onCompositionStart");Er&&(_e&&f.locale!=="ko"&&(vr||Er!=="onCompositionStart"?Er==="onCompositionEnd"&&vr&&(pr=Tc()):(xs=Ge,C0="value"in xs?xs.value:xs.textContent,vr=!0)),Dt=Y1(Ce,Er),0<Dt.length&&(Er=new om(Er,l,null,f,Ge),Ye.push({event:Er,listeners:Dt}),pr?Er.data=pr:(pr=_a(f),pr!==null&&(Er.data=pr)))),(pr=ee?Qa(l,f):Xa(l,f))&&(Er=Y1(Ce,"onBeforeInput"),0<Er.length&&(Dt=new om("onBeforeInput","beforeinput",null,f,Ge),Ye.push({event:Dt,listeners:Er}),Dt.data=pr)),eJ(Ye,l,Ce,f,Ge)}B9(Ye,u)})}function Bm(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Y1(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=qi(l,f),b!=null&&g.unshift(Bm(l,b,_)),b=qi(l,u),b!=null&&g.push(Bm(l,b,_))),l.tag===3)return g;l=l.return}return[]}function aJ(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function z9(l,u,f,g,b){for(var _=u._reactName,V=[];f!==null&&f!==g;){var X=f,de=X.alternate,Ce=X.stateNode;if(X=X.tag,de!==null&&de===g)break;X!==5&&X!==26&&X!==27||Ce===null||(de=Ce,b?(Ce=qi(f,_),Ce!=null&&V.unshift(Bm(f,Ce,de))):b||(Ce=qi(f,_),Ce!=null&&V.push(Bm(f,Ce,de)))),f=f.return}V.length!==0&&l.push({event:u,listeners:V})}var iJ=/\r\n?/g,sJ=/\u0000|\uFFFD/g;function U9(l){return(typeof l=="string"?l:""+l).replace(iJ,`
`).replace(sJ,"")}function V9(l,u){return u=U9(u),U9(l)===u}function wn(l,u,f,g,b,_){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||qe(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&qe(l,""+g);break;case"className":ps(l,"class",g);break;case"tabIndex":ps(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ps(l,f,g);break;case"style":Rn(l,g,_);break;case"data":if(u!=="object"){ps(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Na(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(u!=="input"&&wn(l,u,"name",b.name,b,null),wn(l,u,"formEncType",b.formEncType,b,null),wn(l,u,"formMethod",b.formMethod,b,null),wn(l,u,"formTarget",b.formTarget,b,null)):(wn(l,u,"encType",b.encType,b,null),wn(l,u,"method",b.method,b,null),wn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Na(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=ra);break;case"onScroll":g!=null&&Tr("scroll",l);break;case"onScrollEnd":g!=null&&Tr("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=Na(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":Tr("beforetoggle",l),Tr("toggle",l),ms(l,"popover",g);break;case"xlinkActuate":Da(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Da(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Da(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Da(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Da(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Da(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Da(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Da(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Da(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ms(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Bs.get(f)||f,ms(l,f,g))}}function C5(l,u,f,g,b,_){switch(f){case"style":Rn(l,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?qe(l,g):(typeof g=="number"||typeof g=="bigint")&&qe(l,""+g);break;case"onScroll":g!=null&&Tr("scroll",l);break;case"onScrollEnd":g!=null&&Tr("scrollend",l);break;case"onClick":g!=null&&(l.onclick=ra);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),_=l[yn]||null,_=_!=null?_[f]:null,typeof _=="function"&&l.removeEventListener(u,_,b),typeof g=="function")){typeof _!="function"&&_!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):ms(l,f,g)}}}function di(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tr("error",l),Tr("load",l);var g=!1,b=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var V=f[_];if(V!=null)switch(_){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:wn(l,u,_,V,f,null)}}b&&wn(l,u,"srcSet",f.srcSet,f,null),g&&wn(l,u,"src",f.src,f,null);return;case"input":Tr("invalid",l);var X=_=V=b=null,de=null,Ce=null;for(g in f)if(f.hasOwnProperty(g)){var Ge=f[g];if(Ge!=null)switch(g){case"name":b=Ge;break;case"type":V=Ge;break;case"checked":de=Ge;break;case"defaultChecked":Ce=Ge;break;case"value":_=Ge;break;case"defaultValue":X=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(n(137,u));break;default:wn(l,u,g,Ge,f,null)}}Nr(l,_,X,de,Ce,V,b,!1);return;case"select":Tr("invalid",l),g=V=_=null;for(b in f)if(f.hasOwnProperty(b)&&(X=f[b],X!=null))switch(b){case"value":_=X;break;case"defaultValue":V=X;break;case"multiple":g=X;default:wn(l,u,b,X,f,null)}u=_,f=V,l.multiple=!!g,u!=null?ye(l,!!g,u,!1):f!=null&&ye(l,!!g,f,!0);return;case"textarea":Tr("invalid",l),_=b=g=null;for(V in f)if(f.hasOwnProperty(V)&&(X=f[V],X!=null))switch(V){case"value":g=X;break;case"defaultValue":b=X;break;case"children":_=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(91));break;default:wn(l,u,V,X,f,null)}Fe(l,g,b,_);return;case"option":for(de in f)if(f.hasOwnProperty(de)&&(g=f[de],g!=null))switch(de){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:wn(l,u,de,g,f,null)}return;case"dialog":Tr("beforetoggle",l),Tr("toggle",l),Tr("cancel",l),Tr("close",l);break;case"iframe":case"object":Tr("load",l);break;case"video":case"audio":for(g=0;g<Lm.length;g++)Tr(Lm[g],l);break;case"image":Tr("error",l),Tr("load",l);break;case"details":Tr("toggle",l);break;case"embed":case"source":case"link":Tr("error",l),Tr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ce in f)if(f.hasOwnProperty(Ce)&&(g=f[Ce],g!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:wn(l,u,Ce,g,f,null)}return;default:if(ua(u)){for(Ge in f)f.hasOwnProperty(Ge)&&(g=f[Ge],g!==void 0&&C5(l,u,Ge,g,f,void 0));return}}for(X in f)f.hasOwnProperty(X)&&(g=f[X],g!=null&&wn(l,u,X,g,f,null))}function oJ(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,V=null,X=null,de=null,Ce=null,Ge=null;for(Le in f){var Ye=f[Le];if(f.hasOwnProperty(Le)&&Ye!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":de=Ye;default:g.hasOwnProperty(Le)||wn(l,u,Le,null,g,Ye)}}for(var Pe in g){var Le=g[Pe];if(Ye=f[Pe],g.hasOwnProperty(Pe)&&(Le!=null||Ye!=null))switch(Pe){case"type":_=Le;break;case"name":b=Le;break;case"checked":Ce=Le;break;case"defaultChecked":Ge=Le;break;case"value":V=Le;break;case"defaultValue":X=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,u));break;default:Le!==Ye&&wn(l,u,Pe,Le,g,Ye)}}Yt(l,V,X,de,Ce,Ge,_,b);return;case"select":Le=V=X=Pe=null;for(_ in f)if(de=f[_],f.hasOwnProperty(_)&&de!=null)switch(_){case"value":break;case"multiple":Le=de;default:g.hasOwnProperty(_)||wn(l,u,_,null,g,de)}for(b in g)if(_=g[b],de=f[b],g.hasOwnProperty(b)&&(_!=null||de!=null))switch(b){case"value":Pe=_;break;case"defaultValue":X=_;break;case"multiple":V=_;default:_!==de&&wn(l,u,b,_,g,de)}u=X,f=V,g=Le,Pe!=null?ye(l,!!f,Pe,!1):!!g!=!!f&&(u!=null?ye(l,!!f,u,!0):ye(l,!!f,f?[]:"",!1));return;case"textarea":Le=Pe=null;for(X in f)if(b=f[X],f.hasOwnProperty(X)&&b!=null&&!g.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:wn(l,u,X,null,g,b)}for(V in g)if(b=g[V],_=f[V],g.hasOwnProperty(V)&&(b!=null||_!=null))switch(V){case"value":Pe=b;break;case"defaultValue":Le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==_&&wn(l,u,V,b,g,_)}De(l,Pe,Le);return;case"option":for(var Ct in f)if(Pe=f[Ct],f.hasOwnProperty(Ct)&&Pe!=null&&!g.hasOwnProperty(Ct))switch(Ct){case"selected":l.selected=!1;break;default:wn(l,u,Ct,null,g,Pe)}for(de in g)if(Pe=g[de],Le=f[de],g.hasOwnProperty(de)&&Pe!==Le&&(Pe!=null||Le!=null))switch(de){case"selected":l.selected=Pe&&typeof Pe!="function"&&typeof Pe!="symbol";break;default:wn(l,u,de,Pe,g,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in f)Pe=f[Wt],f.hasOwnProperty(Wt)&&Pe!=null&&!g.hasOwnProperty(Wt)&&wn(l,u,Wt,null,g,Pe);for(Ce in g)if(Pe=g[Ce],Le=f[Ce],g.hasOwnProperty(Ce)&&Pe!==Le&&(Pe!=null||Le!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,u));break;default:wn(l,u,Ce,Pe,g,Le)}return;default:if(ua(u)){for(var Sn in f)Pe=f[Sn],f.hasOwnProperty(Sn)&&Pe!==void 0&&!g.hasOwnProperty(Sn)&&C5(l,u,Sn,void 0,g,Pe);for(Ge in g)Pe=g[Ge],Le=f[Ge],!g.hasOwnProperty(Ge)||Pe===Le||Pe===void 0&&Le===void 0||C5(l,u,Ge,Pe,g,Le);return}}for(var we in f)Pe=f[we],f.hasOwnProperty(we)&&Pe!=null&&!g.hasOwnProperty(we)&&wn(l,u,we,null,g,Pe);for(Ye in g)Pe=g[Ye],Le=f[Ye],!g.hasOwnProperty(Ye)||Pe===Le||Pe==null&&Le==null||wn(l,u,Ye,Pe,g,Le)}function F9(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lJ(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],_=b.transferSize,V=b.initiatorType,X=b.duration;if(_&&X&&F9(V)){for(V=0,X=b.responseEnd,g+=1;g<f.length;g++){var de=f[g],Ce=de.startTime;if(Ce>X)break;var Ge=de.transferSize,Ye=de.initiatorType;Ge&&F9(Ye)&&(de=de.responseEnd,V+=Ge*(de<X?1:(X-Ce)/(de-Ce)))}if(--g,u+=8*(_+V)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var O5=null,I5=null;function J1(l){return l.nodeType===9?l:l.ownerDocument}function q9(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function H9(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function R5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var M5=null;function cJ(){var l=window.event;return l&&l.type==="popstate"?l===M5?!1:(M5=l,!0):(M5=null,!1)}var G9=typeof setTimeout=="function"?setTimeout:void 0,uJ=typeof clearTimeout=="function"?clearTimeout:void 0,W9=typeof Promise=="function"?Promise:void 0,dJ=typeof queueMicrotask=="function"?queueMicrotask:typeof W9<"u"?function(l){return W9.resolve(null).then(l).catch(hJ)}:G9;function hJ(l){setTimeout(function(){throw l})}function Qc(l){return l==="head"}function K9(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),oh(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")$m(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,$m(f);for(var _=f.firstChild;_;){var V=_.nextSibling,X=_.nodeName;_[bi]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=V}}else f==="body"&&$m(l.ownerDocument.body);f=b}while(f);oh(u)}function Q9(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function D5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":D5(f),_t(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function fJ(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[bi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(_=l.getAttribute("rel"),_==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(_!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(_=l.getAttribute("src"),(_!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===_)return l}else return l;if(l=Gs(l.nextSibling),l===null)break}return null}function mJ(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Gs(l.nextSibling),l===null))return null;return l}function X9(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Gs(l.nextSibling),l===null))return null;return l}function P5(l){return l.data==="$?"||l.data==="$~"}function L5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function pJ(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Gs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var B5=null;function Y9(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return Gs(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function J9(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function Z9(l,u,f){switch(u=J1(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function $m(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);_t(l)}var Ws=new Map,eO=new Set;function Z1(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Dl=Z.d;Z.d={f:gJ,r:xJ,D:yJ,C:vJ,L:bJ,m:wJ,X:NJ,S:SJ,M:_J};function gJ(){var l=Dl.f(),u=q1();return l||u}function xJ(l){var u=rt(l);u!==null&&u.tag===5&&u.type==="form"?xC(u):Dl.r(l)}var ah=typeof document>"u"?null:document;function tO(l,u,f){var g=ah;if(g&&typeof u=="string"&&u){var b=jt(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),eO.has(b)||(eO.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),di(u,"link",l),mr(u),g.head.appendChild(u)))}}function yJ(l){Dl.D(l),tO("dns-prefetch",l,null)}function vJ(l,u){Dl.C(l,u),tO("preconnect",l,u)}function bJ(l,u,f){Dl.L(l,u,f);var g=ah;if(g&&l&&u){var b='link[rel="preload"][as="'+jt(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+jt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+jt(f.imageSizes)+'"]')):b+='[href="'+jt(l)+'"]';var _=b;switch(u){case"style":_=ih(l);break;case"script":_=sh(l)}Ws.has(_)||(l=p({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Ws.set(_,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(zm(_))||u==="script"&&g.querySelector(Um(_))||(u=g.createElement("link"),di(u,"link",l),mr(u),g.head.appendChild(u)))}}function wJ(l,u){Dl.m(l,u);var f=ah;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+jt(g)+'"][href="'+jt(l)+'"]',_=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=sh(l)}if(!Ws.has(_)&&(l=p({rel:"modulepreload",href:l},u),Ws.set(_,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Um(_)))return}g=f.createElement("link"),di(g,"link",l),mr(g),f.head.appendChild(g)}}}function SJ(l,u,f){Dl.S(l,u,f);var g=ah;if(g&&l){var b=Xt(g).hoistableStyles,_=ih(l);u=u||"default";var V=b.get(_);if(!V){var X={loading:0,preload:null};if(V=g.querySelector(zm(_)))X.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Ws.get(_))&&$5(l,f);var de=V=g.createElement("link");mr(de),di(de,"link",l),de._p=new Promise(function(Ce,Ge){de.onload=Ce,de.onerror=Ge}),de.addEventListener("load",function(){X.loading|=1}),de.addEventListener("error",function(){X.loading|=2}),X.loading|=4,ey(V,u,g)}V={type:"stylesheet",instance:V,count:1,state:X},b.set(_,V)}}}function NJ(l,u){Dl.X(l,u);var f=ah;if(f&&l){var g=Xt(f).hoistableScripts,b=sh(l),_=g.get(b);_||(_=f.querySelector(Um(b)),_||(l=p({src:l,async:!0},u),(u=Ws.get(b))&&z5(l,u),_=f.createElement("script"),mr(_),di(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function _J(l,u){Dl.M(l,u);var f=ah;if(f&&l){var g=Xt(f).hoistableScripts,b=sh(l),_=g.get(b);_||(_=f.querySelector(Um(b)),_||(l=p({src:l,async:!0,type:"module"},u),(u=Ws.get(b))&&z5(l,u),_=f.createElement("script"),mr(_),di(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function rO(l,u,f,g){var b=(b=Ve.current)?Z1(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=ih(f.href),f=Xt(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=ih(f.href);var _=Xt(b).hoistableStyles,V=_.get(l);if(V||(b=b.ownerDocument||b,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(l,V),(_=b.querySelector(zm(l)))&&!_._p&&(V.instance=_,V.state.loading=5),Ws.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ws.set(l,f),_||TJ(b,l,f,V.state))),u&&g===null)throw Error(n(528,""));return V}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=sh(f),f=Xt(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function ih(l){return'href="'+jt(l)+'"'}function zm(l){return'link[rel="stylesheet"]['+l+"]"}function nO(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function TJ(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),di(u,"link",f),mr(u),l.head.appendChild(u))}function sh(l){return'[src="'+jt(l)+'"]'}function Um(l){return"script[async]"+l}function aO(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+jt(f.href)+'"]');if(g)return u.instance=g,mr(g),g;var b=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),mr(g),di(g,"style",b),ey(g,f.precedence,l),u.instance=g;case"stylesheet":b=ih(f.href);var _=l.querySelector(zm(b));if(_)return u.state.loading|=4,u.instance=_,mr(_),_;g=nO(f),(b=Ws.get(b))&&$5(g,b),_=(l.ownerDocument||l).createElement("link"),mr(_);var V=_;return V._p=new Promise(function(X,de){V.onload=X,V.onerror=de}),di(_,"link",g),u.state.loading|=4,ey(_,f.precedence,l),u.instance=_;case"script":return _=sh(f.src),(b=l.querySelector(Um(_)))?(u.instance=b,mr(b),b):(g=f,(b=Ws.get(_))&&(g=p({},f),z5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),mr(b),di(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,ey(g,f.precedence,l));return u.instance}function ey(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,_=b,V=0;V<g.length;V++){var X=g[V];if(X.dataset.precedence===u)_=X;else if(_!==b)break}_?_.parentNode.insertBefore(l,_.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function $5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function z5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var ty=null;function iO(l,u,f){if(ty===null){var g=new Map,b=ty=new Map;b.set(f,g)}else b=ty,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var _=f[b];if(!(_[bi]||_[nn]||l==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var V=_.getAttribute(u)||"";V=l+V;var X=g.get(V);X?X.push(_):g.set(V,[_])}}return g}function sO(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function jJ(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function oO(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function AJ(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=ih(g.href),_=u.querySelector(zm(b));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=ry.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=_,mr(_);return}_=u.ownerDocument||u,g=nO(g),(b=Ws.get(b))&&$5(g,b),_=_.createElement("link"),mr(_);var V=_;V._p=new Promise(function(X,de){V.onload=X,V.onerror=de}),di(_,"link",g),f.instance=_}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=ry.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var U5=0;function EJ(l,u){return l.stylesheets&&l.count===0&&ay(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&ay(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4+u);0<l.imgBytes&&U5===0&&(U5=62500*lJ());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&ay(l,l.stylesheets),l.unsuspend)){var _=l.unsuspend;l.unsuspend=null,_()}},(l.imgBytes>U5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function ry(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ay(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ny=null;function ay(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ny=new Map,u.forEach(kJ,l),ny=null,ry.call(l))}function kJ(l,u){if(!(u.state.loading&4)){var f=ny.get(l);if(f)var g=f.get(null);else{f=new Map,ny.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var V=b[_];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(f.set(V.dataset.precedence,V),g=V)}g&&f.set(null,g)}b=u.instance,V=b.getAttribute("data-precedence"),_=f.get(V)||g,_===g&&f.set(null,b),f.set(V,b),this.count++,g=ry.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),_?_.parentNode.insertBefore(b,_.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var Vm={$$typeof:I,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function CJ(l,u,f,g,b,_,V,X,de){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.hiddenUpdates=Fr(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function lO(l,u,f,g,b,_,V,X,de,Ce,Ge,Ye){return l=new CJ(l,u,f,V,de,Ce,Ge,Ye,X),u=1,_===!0&&(u|=24),_=vs(3,null,null,u),l.current=_,_.stateNode=l,u=b4(),u.refCount++,l.pooledCache=u,u.refCount++,_.memoizedState={element:g,isDehydrated:f,cache:u},_4(_),l}function cO(l){return l?(l=L0,l):L0}function uO(l,u,f,g,b,_){b=cO(b),g.context===null?g.context=b:g.pendingContext=b,g=Bc(u),g.payload={element:f},_=_===void 0?null:_,_!==null&&(g.callback=_),f=$c(l,g,u),f!==null&&(Xi(f,l,u),bm(f,l,u))}function dO(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function V5(l,u){dO(l,u),(l=l.alternate)&&dO(l,u)}function hO(l){if(l.tag===13||l.tag===31){var u=sd(l,67108864);u!==null&&Xi(u,l,67108864),V5(l,67108864)}}function fO(l){if(l.tag===13||l.tag===31){var u=_s();u=ii(u);var f=sd(l,u);f!==null&&Xi(f,l,u),V5(l,u)}}var iy=!0;function OJ(l,u,f,g){var b=H.T;H.T=null;var _=Z.p;try{Z.p=2,F5(l,u,f,g)}finally{Z.p=_,H.T=b}}function IJ(l,u,f,g){var b=H.T;H.T=null;var _=Z.p;try{Z.p=8,F5(l,u,f,g)}finally{Z.p=_,H.T=b}}function F5(l,u,f,g){if(iy){var b=q5(g);if(b===null)k5(l,u,g,sy,f),pO(l,g);else if(MJ(b,l,u,f,g))g.stopPropagation();else if(pO(l,g),u&4&&-1<RJ.indexOf(l)){for(;b!==null;){var _=rt(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var V=zt(_.pendingLanes);if(V!==0){var X=_;for(X.pendingLanes|=2,X.entangledLanes|=2;V;){var de=1<<31-tt(V);X.entanglements[1]|=de,V&=~de}Vo(_),(Zr&6)===0&&(V1=Ue()+500,Pm(0))}}break;case 31:case 13:X=sd(_,2),X!==null&&Xi(X,_,2),q1(),V5(_,2)}if(_=q5(g),_===null&&k5(l,u,g,sy,f),_===b)break;b=_}b!==null&&g.stopPropagation()}else k5(l,u,g,null,f)}}function q5(l){return l=Po(l),H5(l)}var sy=null;function H5(l){if(sy=null,l=me(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return sy=l,null}function mO(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case ht:return 2;case dt:return 8;case Ut:case tr:return 32;case Ir:return 268435456;default:return 32}default:return 32}}var G5=!1,Xc=null,Yc=null,Jc=null,Fm=new Map,qm=new Map,Zc=[],RJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pO(l,u){switch(l){case"focusin":case"focusout":Xc=null;break;case"dragenter":case"dragleave":Yc=null;break;case"mouseover":case"mouseout":Jc=null;break;case"pointerover":case"pointerout":Fm.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":qm.delete(u.pointerId)}}function Hm(l,u,f,g,b,_){return l===null||l.nativeEvent!==_?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:_,targetContainers:[b]},u!==null&&(u=rt(u),u!==null&&hO(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function MJ(l,u,f,g,b){switch(u){case"focusin":return Xc=Hm(Xc,l,u,f,g,b),!0;case"dragenter":return Yc=Hm(Yc,l,u,f,g,b),!0;case"mouseover":return Jc=Hm(Jc,l,u,f,g,b),!0;case"pointerover":var _=b.pointerId;return Fm.set(_,Hm(Fm.get(_)||null,l,u,f,g,b)),!0;case"gotpointercapture":return _=b.pointerId,qm.set(_,Hm(qm.get(_)||null,l,u,f,g,b)),!0}return!1}function gO(l){var u=me(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,si(l.priority,function(){fO(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,si(l.priority,function(){fO(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function oy(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=q5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Mr=g,f.target.dispatchEvent(g),Mr=null}else return u=rt(f),u!==null&&hO(u),l.blockedOn=f,!1;u.shift()}return!0}function xO(l,u,f){oy(l)&&f.delete(u)}function DJ(){G5=!1,Xc!==null&&oy(Xc)&&(Xc=null),Yc!==null&&oy(Yc)&&(Yc=null),Jc!==null&&oy(Jc)&&(Jc=null),Fm.forEach(xO),qm.forEach(xO)}function ly(l,u){l.blockedOn===u&&(l.blockedOn=null,G5||(G5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,DJ)))}var cy=null;function yO(l){cy!==l&&(cy=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cy===l&&(cy=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(H5(g||f)===null)continue;break}var _=rt(f);_!==null&&(l.splice(u,3),u-=3,q4(_,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function oh(l){function u(de){return ly(de,l)}Xc!==null&&ly(Xc,l),Yc!==null&&ly(Yc,l),Jc!==null&&ly(Jc,l),Fm.forEach(u),qm.forEach(u);for(var f=0;f<Zc.length;f++){var g=Zc[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<Zc.length&&(f=Zc[0],f.blockedOn===null);)gO(f),f.blockedOn===null&&Zc.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],_=f[g+1],V=b[yn]||null;if(typeof _=="function")V||yO(f);else if(V){var X=null;if(_&&_.hasAttribute("formAction")){if(b=_,V=_[yn]||null)X=V.formAction;else if(H5(b)!==null)continue}else X=V.action;typeof X=="function"?f[g+1]=X:(f.splice(g,3),g-=3),yO(f)}}}function vO(){function l(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(V){return b=V})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function W5(l){this._internalRoot=l}uy.prototype.render=W5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=_s();uO(f,g,l,u,null,null)},uy.prototype.unmount=W5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;uO(l.current,2,null,l,null,null),q1(),u[An]=null}};function uy(l){this._internalRoot=l}uy.prototype.unstable_scheduleHydration=function(l){if(l){var u=xn();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Zc.length&&u!==0&&u<Zc[f].priority;f++);Zc.splice(f,0,l),f===0&&gO(l)}};var bO=e.version;if(bO!=="19.2.4")throw Error(n(527,bO,"19.2.4"));Z.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var PJ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dy.isDisabled&&dy.supportsFiber)try{At=dy.inject(PJ),Pt=dy}catch{}}return Wm.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=AC,_=EC,V=kC;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError)),u=lO(l,1,!1,null,null,f,g,null,b,_,V,vO),l[An]=u.current,E5(l),new W5(u)},Wm.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",_=AC,V=EC,X=kC,de=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(V=f.onCaughtError),f.onRecoverableError!==void 0&&(X=f.onRecoverableError),f.formState!==void 0&&(de=f.formState)),u=lO(l,1,!0,u,f??null,g,b,de,_,V,X,vO),u.context=cO(null),f=u.current,g=_s(),g=ii(g),b=Bc(g),b.callback=null,$c(f,b,g),f=g,u.current.lanes=f,pn(u,f),Vo(u),l[An]=u.current,E5(l),new uy(u)},Wm.version="19.2.4",Wm}var OO;function KJ(){if(OO)return X5.exports;OO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),X5.exports=WJ(),X5.exports}var QJ=KJ();const XJ=en(QJ);var za=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(za||{});const kr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Ba=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(Ba||{});const cT={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},IO=[1.5,1.4,1.3,1.2,1.1],Gp=5,Wp=1;function YJ(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function tv(t,e){const r=new Set;return t.forEach(n=>{const a=YJ(n,e);a&&r.add(a)}),Array.from(r).sort()}const JJ=[{id:"participation",name:"Participation",icon:"",xpAmount:25,fluxAmount:5,color:"blue"},{id:"helping",name:"Helping Others",icon:"",xpAmount:30,fluxAmount:10,color:"green"},{id:"leadership",name:"Leadership",icon:"",xpAmount:35,fluxAmount:10,color:"amber"},{id:"focus",name:"Great Focus",icon:"",xpAmount:20,fluxAmount:5,color:"purple"},{id:"creativity",name:"Creativity",icon:"",xpAmount:30,fluxAmount:8,color:"pink"},{id:"perseverance",name:"Perseverance",icon:"",xpAmount:25,fluxAmount:5,color:"orange"}];var RO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},ZJ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},vV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,m=i>>2,p=(i&3)<<4|c>>4;let x=(c&15)<<2|h>>6,y=h&63;d||(y=64,o||(x=64)),n.push(r[m],r[p],r[x],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZJ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const p=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||p==null)throw new eZ;const x=i<<2|c>>4;if(n.push(x),h!==64){const y=c<<4&240|h>>2;if(n.push(y),p!==64){const S=h<<6&192|p;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tZ=function(t){const e=yV(t);return vV.encodeByteArray(e,!0)},Nv=function(t){return tZ(t).replace(/\./g,"")},bV=function(t){try{return vV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ=()=>rZ().__FIREBASE_DEFAULTS__,aZ=()=>{if(typeof process>"u"||typeof RO>"u")return;const t=RO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bV(t[1]);return e&&JSON.parse(e)},v2=()=>{try{return nZ()||aZ()||iZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wV=t=>{var e,r;return(r=(e=v2())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},SV=t=>{const e=wV(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},NV=()=>{var t;return(t=v2())===null||t===void 0?void 0:t.config},_V=t=>{var e;return(e=v2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nv(JSON.stringify(r)),Nv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fa())}function cZ(){var t;const e=(t=v2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fZ(){const t=Fa();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TV(){return!cZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jV(){try{return typeof indexedDB=="object"}catch{return!1}}function mZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pZ="FirebaseError";class Io extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=pZ,Object.setPrototypeOf(this,Io.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ax.prototype.create)}}class ax{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?gZ(i,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new Io(a,c,n)}}function gZ(t,e){return t.replace(xZ,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const xZ=/\{\$([^}]+)}/g;function yZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=e[a];if(MO(i)&&MO(o)){if(!Fh(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function MO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function vZ(t,e){const r=new bZ(t,e);return r.subscribe.bind(r)}class bZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");wZ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=e3),a.error===void 0&&(a.error=e3),a.complete===void 0&&(a.complete=e3);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function e3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t){return t&&t._delegate?t._delegate:t}class sc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new sZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_Z(e))try{this.getOrInitializeService({instanceIdentifier:Ad})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Ad){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ad){return this.instances.has(e)}getOptions(e=Ad){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:NZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ad){return this.component?this.component.multipleInstances?e:Ad:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NZ(t){return t===Ad?void 0:t}function _Z(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new SZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Cr||(Cr={}));const jZ={debug:Cr.DEBUG,verbose:Cr.VERBOSE,info:Cr.INFO,warn:Cr.WARN,error:Cr.ERROR,silent:Cr.SILENT},AZ=Cr.INFO,EZ={[Cr.DEBUG]:"log",[Cr.VERBOSE]:"log",[Cr.INFO]:"info",[Cr.WARN]:"warn",[Cr.ERROR]:"error"},kZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=EZ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class BA{constructor(e){this.name=e,this._logLevel=AZ,this._logHandler=kZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Cr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Cr.DEBUG,...e),this._logHandler(this,Cr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Cr.VERBOSE,...e),this._logHandler(this,Cr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Cr.INFO,...e),this._logHandler(this,Cr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Cr.WARN,...e),this._logHandler(this,Cr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Cr.ERROR,...e),this._logHandler(this,Cr.ERROR,...e)}}const CZ=(t,e)=>e.some(r=>t instanceof r);let DO,PO;function OZ(){return DO||(DO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IZ(){return PO||(PO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AV=new WeakMap,uT=new WeakMap,EV=new WeakMap,t3=new WeakMap,$A=new WeakMap;function RZ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(Tu(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&AV.set(r,t)}).catch(()=>{}),$A.set(e,t),e}function MZ(t){if(uT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});uT.set(t,e)}let dT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return uT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EV.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Tu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DZ(t){dT=t(dT)}function PZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(r3(this),e,...r);return EV.set(n,e.sort?e.sort():[e]),Tu(n)}:IZ().includes(t)?function(...e){return t.apply(r3(this),e),Tu(AV.get(this))}:function(...e){return Tu(t.apply(r3(this),e))}}function LZ(t){return typeof t=="function"?PZ(t):(t instanceof IDBTransaction&&MZ(t),CZ(t,OZ())?new Proxy(t,dT):t)}function Tu(t){if(t instanceof IDBRequest)return RZ(t);if(t3.has(t))return t3.get(t);const e=LZ(t);return e!==t&&(t3.set(t,e),$A.set(e,t)),e}const r3=t=>$A.get(t);function BZ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),c=Tu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Tu(o.result),d.oldVersion,d.newVersion,Tu(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const $Z=["get","getKey","getAll","getAllKeys","count"],zZ=["put","add","delete","clear"],n3=new Map;function LO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(n3.get(e))return n3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=zZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||$Z.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return n3.set(e,i),i}DZ(t=>({...t,get:(e,r,n)=>LO(e,r)||t.get(e,r,n),has:(e,r)=>!!LO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(VZ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function VZ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hT="@firebase/app",BO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new BA("@firebase/app"),FZ="@firebase/app-compat",qZ="@firebase/analytics-compat",HZ="@firebase/analytics",GZ="@firebase/app-check-compat",WZ="@firebase/app-check",KZ="@firebase/auth",QZ="@firebase/auth-compat",XZ="@firebase/database",YZ="@firebase/data-connect",JZ="@firebase/database-compat",ZZ="@firebase/functions",eee="@firebase/functions-compat",tee="@firebase/installations",ree="@firebase/installations-compat",nee="@firebase/messaging",aee="@firebase/messaging-compat",iee="@firebase/performance",see="@firebase/performance-compat",oee="@firebase/remote-config",lee="@firebase/remote-config-compat",cee="@firebase/storage",uee="@firebase/storage-compat",dee="@firebase/firestore",hee="@firebase/vertexai-preview",fee="@firebase/firestore-compat",mee="firebase",pee="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="[DEFAULT]",gee={[hT]:"fire-core",[FZ]:"fire-core-compat",[HZ]:"fire-analytics",[qZ]:"fire-analytics-compat",[WZ]:"fire-app-check",[GZ]:"fire-app-check-compat",[KZ]:"fire-auth",[QZ]:"fire-auth-compat",[XZ]:"fire-rtdb",[YZ]:"fire-data-connect",[JZ]:"fire-rtdb-compat",[ZZ]:"fire-fn",[eee]:"fire-fn-compat",[tee]:"fire-iid",[ree]:"fire-iid-compat",[nee]:"fire-fcm",[aee]:"fire-fcm-compat",[iee]:"fire-perf",[see]:"fire-perf-compat",[oee]:"fire-rc",[lee]:"fire-rc-compat",[cee]:"fire-gcs",[uee]:"fire-gcs-compat",[dee]:"fire-fst",[fee]:"fire-fst-compat",[hee]:"fire-vertex","fire-js":"fire-js",[mee]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map,xee=new Map,mT=new Map;function $O(t,e){try{t.container.addComponent(e)}catch(r){oc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ru(t){const e=t.name;if(mT.has(e))return oc.debug(`There were multiple attempts to register component ${e}.`),!1;mT.set(e,t);for(const r of _v.values())$O(r,t);for(const r of xee.values())$O(r,t);return!0}function sx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ql(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ju=new ax("app","Firebase",yee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vee{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new sc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ju.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=pee;function kV(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:fT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw ju.create("bad-app-name",{appName:String(a)});if(r||(r=NV()),!r)throw ju.create("no-options");const i=_v.get(a);if(i){if(Fh(r,i.options)&&Fh(n,i.config))return i;throw ju.create("duplicate-app",{appName:a})}const o=new TZ(a);for(const d of mT.values())o.addComponent(d);const c=new vee(r,n,o);return _v.set(a,c),c}function zA(t=fT){const e=_v.get(t);if(!e&&t===fT&&NV())return kV();if(!e)throw ju.create("no-app",{appName:t});return e}function ro(t,e,r){var n;let a=(n=gee[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oc.warn(c.join(" "));return}Ru(new sc(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bee="firebase-heartbeat-database",wee=1,Kp="firebase-heartbeat-store";let a3=null;function CV(){return a3||(a3=BZ(bee,wee,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Kp)}catch(r){console.warn(r)}}}}).catch(t=>{throw ju.create("idb-open",{originalErrorMessage:t.message})})),a3}async function See(t){try{const r=(await CV()).transaction(Kp),n=await r.objectStore(Kp).get(OV(t));return await r.done,n}catch(e){if(e instanceof Io)oc.warn(e.message);else{const r=ju.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oc.warn(r.message)}}}async function zO(t,e){try{const n=(await CV()).transaction(Kp,"readwrite");await n.objectStore(Kp).put(e,OV(t)),await n.done}catch(r){if(r instanceof Io)oc.warn(r.message);else{const n=ju.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});oc.warn(n.message)}}}function OV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nee=1024,_ee=720*60*60*1e3;class Tee{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Aee(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=UO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=_ee}),this._storage.overwrite(this._heartbeatsCache))}catch(n){oc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=UO(),{heartbeatsToSend:n,unsentEntries:a}=jee(this._heartbeatsCache.heartbeats),i=Nv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return oc.warn(r),""}}}function UO(){return new Date().toISOString().substring(0,10)}function jee(t,e=Nee){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),VO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),VO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Aee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jV()?mZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await See(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return zO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return zO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function VO(t){return Nv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eee(t){Ru(new sc("platform-logger",e=>new UZ(e),"PRIVATE")),Ru(new sc("heartbeat",e=>new Tee(e),"PRIVATE")),ro(hT,BO,t),ro(hT,BO,"esm2017"),ro("fire-js","")}Eee("");var kee="firebase",Cee="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ro(kee,Cee,"app");function UA(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function IV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oee=IV,RV=new ax("auth","Firebase",IV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new BA("@firebase/auth");function Iee(t,...e){Tv.logLevel<=Cr.WARN&&Tv.warn(`Auth (${b0}): ${t}`,...e)}function rv(t,...e){Tv.logLevel<=Cr.ERROR&&Tv.error(`Auth (${b0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,...e){throw FA(t,...e)}function Eo(t,...e){return FA(t,...e)}function VA(t,e,r){const n=Object.assign(Object.assign({},Oee()),{[e]:r});return new ax("auth","Firebase",n).create(e,{appName:t.name})}function qd(t){return VA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ree(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&nl(t,"argument-error"),VA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function FA(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return RV.create(t,...e)}function nr(t,e,...r){if(!t)throw FA(e,...r)}function Hl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rv(e),new Error(e)}function lc(t,e){t||Hl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Mee(){return FO()==="http:"||FO()==="https:"}function FO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Mee()||dZ()||"connection"in navigator)?navigator.onLine:!0}function Pee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,r){this.shortDelay=e,this.longDelay=r,lc(r>e,"Short delay should be less than long delay!"),this.isMobile=lZ()||hZ()}get(){return Dee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t,e){lc(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bee=new ox(3e4,6e4);function HA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Df(t,e,r,n,a={}){return DV(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=ix(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return uZ()||(h.referrerPolicy="no-referrer"),MV.fetch()(PV(t,t.config.apiHost,r,c),h)})}async function DV(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Lee),e);try{const a=new zee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fy(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw fy(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw fy(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw fy(t,"user-disabled",o);const m=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw VA(t,m,h);nl(t,m)}}catch(a){if(a instanceof Io)throw a;nl(t,"network-request-failed",{message:String(a)})}}async function $ee(t,e,r,n,a={}){const i=await Df(t,e,r,n,a);return"mfaPendingCredential"in i&&nl(t,"multi-factor-auth-required",{_serverResponse:i}),i}function PV(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?qA(t.config,a):`${t.config.apiScheme}://${a}`}class zee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Eo(this.auth,"network-request-failed")),Bee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Eo(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uee(t,e){return Df(t,"POST","/v1/accounts:delete",e)}async function LV(t,e){return Df(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vee(t,e=!1){const r=jn(t),n=await r.getIdToken(e),a=GA(n);nr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:Np(i3(a.auth_time)),issuedAtTime:Np(i3(a.iat)),expirationTime:Np(i3(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function i3(t){return Number(t)*1e3}function GA(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return rv("JWT malformed, contained fewer than 3 sections"),null;try{const a=bV(r);return a?JSON.parse(a):(rv("Failed to decode base64 JWT payload"),null)}catch(a){return rv("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function qO(t){const e=GA(t);return nr(e,"internal-error"),nr(typeof e.exp<"u","internal-error"),nr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qp(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Io&&Fee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Fee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Np(this.lastLoginAt),this.creationTime=Np(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jv(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Qp(t,LV(r,{idToken:n}));nr(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?BV(i.providerUserInfo):[],c=Gee(t.providerData,o),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),m=d?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new gT(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function Hee(t){const e=jn(t);await jv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function BV(t){return t.map(e=>{var{providerId:r}=e,n=UA(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wee(t,e){const r=await DV(t,{},async()=>{const n=ix({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=PV(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",MV.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Kee(t,e){return Df(t,"POST","/v2/accounts:revokeToken",HA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nr(e.idToken,"internal-error"),nr(typeof e.idToken<"u","internal-error"),nr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){nr(e.length!==0,"internal-error");const r=qO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(nr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await Wee(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,o=new Eh;return n&&(nr(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(nr(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(nr(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eh,this.toJSON())}_performRefresh(){return Hl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t,e){nr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=UA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Qp(this,this.stsTokenManager.getToken(this.auth,e));return nr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Vee(this,e)}reload(){return Hee(this)}_assign(e){this!==e&&(nr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Gl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await jv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ql(this.auth.app))return Promise.reject(qd(this.auth));const e=await this.getIdToken();return await Qp(this,Uee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,o,c,d,h,m;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,x=(a=r.email)!==null&&a!==void 0?a:void 0,y=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=r.photoURL)!==null&&o!==void 0?o:void 0,N=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,j=(h=r.createdAt)!==null&&h!==void 0?h:void 0,k=(m=r.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:I,emailVerified:L,isAnonymous:O,providerData:R,stsTokenManager:A}=r;nr(I&&A,e,"internal-error");const E=Eh.fromJSON(this.name,A);nr(typeof I=="string",e,"internal-error"),tu(p,e.name),tu(x,e.name),nr(typeof L=="boolean",e,"internal-error"),nr(typeof O=="boolean",e,"internal-error"),tu(y,e.name),tu(S,e.name),tu(N,e.name),tu(w,e.name),tu(j,e.name),tu(k,e.name);const C=new Gl({uid:I,auth:e,email:x,emailVerified:L,displayName:p,isAnonymous:O,photoURL:S,phoneNumber:y,tenantId:N,stsTokenManager:E,createdAt:j,lastLoginAt:k});return R&&Array.isArray(R)&&(C.providerData=R.map(U=>Object.assign({},U))),w&&(C._redirectEventId=w),C}static async _fromIdTokenResponse(e,r,n=!1){const a=new Eh;a.updateFromServerResponse(r);const i=new Gl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await jv(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];nr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?BV(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new Eh;c.updateFromIdToken(n);const d=new Gl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new gT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new Map;function Wl(t){lc(t instanceof Function,"Expected a class definition");let e=HO.get(t);return e?(lc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}$V.type="NONE";const GO=$V;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e,r){return`firebase:${t}:${e}:${r}`}class kh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=nv(this.userKey,a.apiKey,i),this.fullPersistenceKey=nv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new kh(Wl(GO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Wl(GO);const o=nv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const m=await h._get(o);if(m){const p=Gl._fromJSON(e,m);h!==i&&(c=p),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new kh(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new kh(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HV(e))return"Blackberry";if(GV(e))return"Webos";if(UV(e))return"Safari";if((e.includes("chrome/")||VV(e))&&!e.includes("edge/"))return"Chrome";if(qV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function zV(t=Fa()){return/firefox\//i.test(t)}function UV(t=Fa()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VV(t=Fa()){return/crios\//i.test(t)}function FV(t=Fa()){return/iemobile/i.test(t)}function qV(t=Fa()){return/android/i.test(t)}function HV(t=Fa()){return/blackberry/i.test(t)}function GV(t=Fa()){return/webos/i.test(t)}function WA(t=Fa()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Qee(t=Fa()){var e;return WA(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xee(){return fZ()&&document.documentMode===10}function WV(t=Fa()){return WA(t)||qV(t)||GV(t)||HV(t)||/windows phone/i.test(t)||FV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t,e=[]){let r;switch(t){case"Browser":r=WO(Fa());break;case"Worker":r=`${WO(Fa())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${b0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jee(t,e={}){return Df(t,"GET","/v2/passwordPolicy",HA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zee=6;class ete{constructor(e){var r,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:Zee,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tte{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KO(this),this.idTokenSubscription=new KO(this),this.beforeStateQueue=new Yee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Wl(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await kh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await LV(this,{idToken:e}),n=await Gl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(ql(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return nr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await jv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Pee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ql(this.app))return Promise.reject(qd(this));const r=e?jn(e):null;return r&&nr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&nr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ql(this.app)?Promise.reject(qd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ql(this.app)?Promise.reject(qd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Jee(this),r=new ete(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ax("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Kee(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Wl(e)||this._popupRedirectResolver;nr(r,this,"argument-error"),this.redirectPersistenceManager=await kh.create(this,[Wl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(nr(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Iee(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function b2(t){return jn(t)}class KO{constructor(e){this.auth=e,this.observer=null,this.addObserver=vZ(r=>this.observer=r)}get next(){return nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rte(t){KA=t}function nte(t){return KA.loadJS(t)}function ate(){return KA.gapiScript}function ite(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ste(t,e){const r=sx(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(Fh(i,e??{}))return a;nl(a,"already-initialized")}return r.initialize({options:e})}function ote(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Wl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function lte(t,e,r){const n=b2(t);nr(n._canInitEmulator,n,"emulator-config-failed"),nr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=QV(e),{host:o,port:c}=cte(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),ute()}function QV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cte(t){const e=QV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:QO(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:QO(o)}}}function QO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ute(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Hl("not implemented")}_getIdTokenResponse(e){return Hl("not implemented")}_linkToIdToken(e,r){return Hl("not implemented")}_getReauthenticationResolver(e){return Hl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t,e){return $ee(t,"POST","/v1/accounts:signInWithIdp",HA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dte="http://localhost";class Qd extends XV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Qd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):nl("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=UA(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Qd(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Ch(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ch(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ch(e,r)}buildRequest(){const e={requestUri:dte,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ix(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx extends QA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends lx{constructor(){super("facebook.com")}static credential(e){return Qd._fromParams({providerId:cu.PROVIDER_ID,signInMethod:cu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cu.credentialFromTaggedObject(e)}static credentialFromError(e){return cu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cu.credential(e.oauthAccessToken)}catch{return null}}}cu.FACEBOOK_SIGN_IN_METHOD="facebook.com";cu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends lx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Qd._fromParams({providerId:Vl.PROVIDER_ID,signInMethod:Vl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Vl.credentialFromTaggedObject(e)}static credentialFromError(e){return Vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Vl.credential(r,n)}catch{return null}}}Vl.GOOGLE_SIGN_IN_METHOD="google.com";Vl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends lx{constructor(){super("github.com")}static credential(e){return Qd._fromParams({providerId:uu.PROVIDER_ID,signInMethod:uu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uu.credentialFromTaggedObject(e)}static credentialFromError(e){return uu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uu.credential(e.oauthAccessToken)}catch{return null}}}uu.GITHUB_SIGN_IN_METHOD="github.com";uu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends lx{constructor(){super("twitter.com")}static credential(e,r){return Qd._fromParams({providerId:du.PROVIDER_ID,signInMethod:du.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return du.credentialFromTaggedObject(e)}static credentialFromError(e){return du.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return du.credential(r,n)}catch{return null}}}du.TWITTER_SIGN_IN_METHOD="twitter.com";du.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await Gl._fromIdTokenResponse(e,n,a),o=XO(n);return new qh({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=XO(n);return new qh({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function XO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av extends Io{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Av.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new Av(e,r,n,a)}}function YV(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Av._fromErrorAndOperation(t,i,e,n):i})}async function hte(t,e,r=!1){const n=await Qp(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return qh._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fte(t,e,r=!1){const{auth:n}=t;if(ql(n.app))return Promise.reject(qd(n));const a="reauthenticate";try{const i=await Qp(t,YV(n,a,e,t),r);nr(i.idToken,n,"internal-error");const o=GA(i.idToken);nr(o,n,"internal-error");const{sub:c}=o;return nr(t.uid===c,n,"user-mismatch"),qh._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&nl(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mte(t,e,r=!1){if(ql(t.app))return Promise.reject(qd(t));const n="signIn",a=await YV(t,n,e),i=await qh._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function pte(t,e,r,n){return jn(t).onIdTokenChanged(e,r,n)}function gte(t,e,r){return jn(t).beforeAuthStateChanged(e,r)}function xte(t,e,r,n){return jn(t).onAuthStateChanged(e,r,n)}function yte(t){return jn(t).signOut()}const Ev="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Ev,"1"),this.storage.removeItem(Ev),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte=1e3,bte=10;class ZV extends JV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);Xee()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,bte):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},vte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZV.type="LOCAL";const wte=ZV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF extends JV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}eF.type="SESSION";const tF=eF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ste(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new w2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,i)),d=await Ste(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}w2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=XA("",20);a.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(p){const x=p;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(m),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(){return window}function _te(t){Zo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){return typeof Zo().WorkerGlobalScope<"u"&&typeof Zo().importScripts=="function"}async function Tte(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jte(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ate(){return rF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="firebaseLocalStorageDb",Ete=1,kv="firebaseLocalStorage",aF="fbase_key";class cx{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function S2(t,e){return t.transaction([kv],e?"readwrite":"readonly").objectStore(kv)}function kte(){const t=indexedDB.deleteDatabase(nF);return new cx(t).toPromise()}function xT(){const t=indexedDB.open(nF,Ete);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(kv,{keyPath:aF})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(kv)?e(n):(n.close(),await kte(),e(await xT()))})})}async function YO(t,e,r){const n=S2(t,!0).put({[aF]:e,value:r});return new cx(n).toPromise()}async function Cte(t,e){const r=S2(t,!1).get(e),n=await new cx(r).toPromise();return n===void 0?null:n.value}function JO(t,e){const r=S2(t,!0).delete(e);return new cx(r).toPromise()}const Ote=800,Ite=3;class iF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Ite)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=w2._getInstance(Ate()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Tte(),!this.activeServiceWorker)return;this.sender=new Nte(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jte()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xT();return await YO(e,Ev,"1"),await JO(e,Ev),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>YO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Cte(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>JO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=S2(a,!1).getAll();return new cx(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ote)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iF.type="LOCAL";const Rte=iF;new ox(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t,e){return e?Wl(e):(nr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA extends XV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ch(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ch(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ch(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Mte(t){return mte(t.auth,new YA(t),t.bypassAuthState)}function Dte(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),fte(r,new YA(t),t.bypassAuthState)}async function Pte(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),hte(r,new YA(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mte;case"linkViaPopup":case"linkViaRedirect":return Pte;case"reauthViaPopup":case"reauthViaRedirect":return Dte;default:nl(this.auth,"internal-error")}}resolve(e){lc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lte=new ox(2e3,1e4);async function Bte(t,e,r){if(ql(t.app))return Promise.reject(Eo(t,"operation-not-supported-in-this-environment"));const n=b2(t);Ree(t,e,QA);const a=sF(n,r);return new Pd(n,"signInViaPopup",e,a).executeNotNull()}class Pd extends oF{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Pd.currentPopupAction&&Pd.currentPopupAction.cancel(),Pd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nr(e,this.auth,"internal-error"),e}async onExecution(){lc(this.filter.length===1,"Popup operations only handle one event");const e=XA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Eo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Eo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Eo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lte.get())};e()}}Pd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $te="pendingRedirect",av=new Map;class zte extends oF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=av.get(this.auth._key());if(!e){try{const n=await Ute(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}av.set(this.auth._key(),e)}return this.bypassAuthState||av.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ute(t,e){const r=qte(e),n=Fte(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Vte(t,e){av.set(t._key(),e)}function Fte(t){return Wl(t._redirectPersistence)}function qte(t){return nv($te,t.config.apiKey,t.name)}async function Hte(t,e,r=!1){if(ql(t.app))return Promise.reject(qd(t));const n=b2(t),a=sF(n,e),o=await new zte(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gte=600*1e3;class Wte{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kte(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!lF(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Eo(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gte&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZO(e))}saveEventToCache(e){this.cachedEventUids.add(ZO(e)),this.lastProcessedEventTime=Date.now()}}function ZO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Kte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qte(t,e={}){return Df(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xte=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yte=/^https?/;async function Jte(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Qte(t);for(const r of e)try{if(Zte(r))return}catch{}nl(t,"unauthorized-domain")}function Zte(t){const e=pT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Yte.test(r))return!1;if(Xte.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ere=new ox(3e4,6e4);function eI(){const t=Zo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function tre(t){return new Promise((e,r)=>{var n,a,i;function o(){eI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eI(),r(Eo(t,"network-request-failed"))},timeout:ere.get()})}if(!((a=(n=Zo().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Zo().gapi)===null||i===void 0)&&i.load)o();else{const c=ite("iframefcb");return Zo()[c]=()=>{gapi.load?o():r(Eo(t,"network-request-failed"))},nte(`${ate()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw iv=null,e})}let iv=null;function rre(t){return iv=iv||tre(t),iv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nre=new ox(5e3,15e3),are="__/auth/iframe",ire="emulator/auth/iframe",sre={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ore=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lre(t){const e=t.config;nr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?qA(e,ire):`https://${t.config.authDomain}/${are}`,n={apiKey:e.apiKey,appName:t.name,v:b0},a=ore.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${ix(n).slice(1)}`}async function cre(t){const e=await rre(t),r=Zo().gapi;return nr(r,t,"internal-error"),e.open({where:document.body,url:lre(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sre,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=Eo(t,"network-request-failed"),c=Zo().setTimeout(()=>{i(o)},nre.get());function d(){Zo().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ure={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dre=500,hre=600,fre="_blank",mre="http://localhost";class tI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pre(t,e,r,n=dre,a=hre){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},ure),{width:n.toString(),height:a.toString(),top:i,left:o}),h=Fa().toLowerCase();r&&(c=VV(h)?fre:r),zV(h)&&(e=e||mre,d.scrollbars="yes");const m=Object.entries(d).reduce((x,[y,S])=>`${x}${y}=${S},`,"");if(Qee(h)&&c!=="_self")return gre(e||"",c),new tI(null);const p=window.open(e||"",c,m);nr(p,t,"popup-blocked");try{p.focus()}catch{}return new tI(p)}function gre(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xre="__/auth/handler",yre="emulator/auth/handler",vre=encodeURIComponent("fac");async function rI(t,e,r,n,a,i){nr(t.config.authDomain,t,"auth-domain-config-required"),nr(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:b0,eventId:a};if(e instanceof QA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yZ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof lx){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await t._getAppCheckToken(),h=d?`#${vre}=${encodeURIComponent(d)}`:"";return`${bre(t)}?${ix(c).slice(1)}${h}`}function bre({config:t}){return t.emulator?qA(t,yre):`https://${t.authDomain}/${xre}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="webStorageSupport";class wre{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tF,this._completeRedirectFn=Hte,this._overrideRedirectResult=Vte}async _openPopup(e,r,n,a){var i;lc((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await rI(e,r,n,pT(),a);return pre(e,o,XA())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await rI(e,r,n,pT(),a);return _te(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(lc(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await cre(e),n=new Wte(e);return r.register("authEvent",a=>(nr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(s3,{type:s3},a=>{var i;const o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[s3];o!==void 0&&r(!!o),nl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Jte(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return WV()||UV()||WA()}}const Sre=wre;var nI="@firebase/auth",aI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nre{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _re(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Tre(t){Ru(new sc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;nr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KV(t)},h=new tte(n,a,i,d);return ote(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ru(new sc("auth-internal",e=>{const r=b2(e.getProvider("auth").getImmediate());return(n=>new Nre(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ro(nI,aI,_re(t)),ro(nI,aI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jre=300,Are=_V("authIdTokenMaxAge")||jre;let iI=null;const Ere=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Are)return;const a=r==null?void 0:r.token;iI!==a&&(iI=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function yT(t=zA()){const e=sx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=ste(t,{popupRedirectResolver:Sre,persistence:[Rte,wte,tF]}),n=_V("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=Ere(i.toString());gte(r,o,()=>o(r.currentUser)),pte(r,c=>o(c))}}const a=wV("auth");return a&&lte(r,`http://${a}`),r}function kre(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rte({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=Eo("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",kre().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Tre("Browser");var sI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hd,cF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function C(){}C.prototype=E.prototype,A.D=E.prototype,A.prototype=new C,A.prototype.constructor=A,A.C=function(U,P,$){for(var B=Array(arguments.length-2),G=2;G<arguments.length;G++)B[G-2]=arguments[G];return E.prototype[P].apply(U,B)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,E,C){C||(C=0);var U=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)U[P]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(P=0;16>P;++P)U[P]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=A.g[0],C=A.g[1],P=A.g[2];var $=A.g[3],B=E+($^C&(P^$))+U[0]+3614090360&4294967295;E=C+(B<<7&4294967295|B>>>25),B=$+(P^E&(C^P))+U[1]+3905402710&4294967295,$=E+(B<<12&4294967295|B>>>20),B=P+(C^$&(E^C))+U[2]+606105819&4294967295,P=$+(B<<17&4294967295|B>>>15),B=C+(E^P&($^E))+U[3]+3250441966&4294967295,C=P+(B<<22&4294967295|B>>>10),B=E+($^C&(P^$))+U[4]+4118548399&4294967295,E=C+(B<<7&4294967295|B>>>25),B=$+(P^E&(C^P))+U[5]+1200080426&4294967295,$=E+(B<<12&4294967295|B>>>20),B=P+(C^$&(E^C))+U[6]+2821735955&4294967295,P=$+(B<<17&4294967295|B>>>15),B=C+(E^P&($^E))+U[7]+4249261313&4294967295,C=P+(B<<22&4294967295|B>>>10),B=E+($^C&(P^$))+U[8]+1770035416&4294967295,E=C+(B<<7&4294967295|B>>>25),B=$+(P^E&(C^P))+U[9]+2336552879&4294967295,$=E+(B<<12&4294967295|B>>>20),B=P+(C^$&(E^C))+U[10]+4294925233&4294967295,P=$+(B<<17&4294967295|B>>>15),B=C+(E^P&($^E))+U[11]+2304563134&4294967295,C=P+(B<<22&4294967295|B>>>10),B=E+($^C&(P^$))+U[12]+1804603682&4294967295,E=C+(B<<7&4294967295|B>>>25),B=$+(P^E&(C^P))+U[13]+4254626195&4294967295,$=E+(B<<12&4294967295|B>>>20),B=P+(C^$&(E^C))+U[14]+2792965006&4294967295,P=$+(B<<17&4294967295|B>>>15),B=C+(E^P&($^E))+U[15]+1236535329&4294967295,C=P+(B<<22&4294967295|B>>>10),B=E+(P^$&(C^P))+U[1]+4129170786&4294967295,E=C+(B<<5&4294967295|B>>>27),B=$+(C^P&(E^C))+U[6]+3225465664&4294967295,$=E+(B<<9&4294967295|B>>>23),B=P+(E^C&($^E))+U[11]+643717713&4294967295,P=$+(B<<14&4294967295|B>>>18),B=C+($^E&(P^$))+U[0]+3921069994&4294967295,C=P+(B<<20&4294967295|B>>>12),B=E+(P^$&(C^P))+U[5]+3593408605&4294967295,E=C+(B<<5&4294967295|B>>>27),B=$+(C^P&(E^C))+U[10]+38016083&4294967295,$=E+(B<<9&4294967295|B>>>23),B=P+(E^C&($^E))+U[15]+3634488961&4294967295,P=$+(B<<14&4294967295|B>>>18),B=C+($^E&(P^$))+U[4]+3889429448&4294967295,C=P+(B<<20&4294967295|B>>>12),B=E+(P^$&(C^P))+U[9]+568446438&4294967295,E=C+(B<<5&4294967295|B>>>27),B=$+(C^P&(E^C))+U[14]+3275163606&4294967295,$=E+(B<<9&4294967295|B>>>23),B=P+(E^C&($^E))+U[3]+4107603335&4294967295,P=$+(B<<14&4294967295|B>>>18),B=C+($^E&(P^$))+U[8]+1163531501&4294967295,C=P+(B<<20&4294967295|B>>>12),B=E+(P^$&(C^P))+U[13]+2850285829&4294967295,E=C+(B<<5&4294967295|B>>>27),B=$+(C^P&(E^C))+U[2]+4243563512&4294967295,$=E+(B<<9&4294967295|B>>>23),B=P+(E^C&($^E))+U[7]+1735328473&4294967295,P=$+(B<<14&4294967295|B>>>18),B=C+($^E&(P^$))+U[12]+2368359562&4294967295,C=P+(B<<20&4294967295|B>>>12),B=E+(C^P^$)+U[5]+4294588738&4294967295,E=C+(B<<4&4294967295|B>>>28),B=$+(E^C^P)+U[8]+2272392833&4294967295,$=E+(B<<11&4294967295|B>>>21),B=P+($^E^C)+U[11]+1839030562&4294967295,P=$+(B<<16&4294967295|B>>>16),B=C+(P^$^E)+U[14]+4259657740&4294967295,C=P+(B<<23&4294967295|B>>>9),B=E+(C^P^$)+U[1]+2763975236&4294967295,E=C+(B<<4&4294967295|B>>>28),B=$+(E^C^P)+U[4]+1272893353&4294967295,$=E+(B<<11&4294967295|B>>>21),B=P+($^E^C)+U[7]+4139469664&4294967295,P=$+(B<<16&4294967295|B>>>16),B=C+(P^$^E)+U[10]+3200236656&4294967295,C=P+(B<<23&4294967295|B>>>9),B=E+(C^P^$)+U[13]+681279174&4294967295,E=C+(B<<4&4294967295|B>>>28),B=$+(E^C^P)+U[0]+3936430074&4294967295,$=E+(B<<11&4294967295|B>>>21),B=P+($^E^C)+U[3]+3572445317&4294967295,P=$+(B<<16&4294967295|B>>>16),B=C+(P^$^E)+U[6]+76029189&4294967295,C=P+(B<<23&4294967295|B>>>9),B=E+(C^P^$)+U[9]+3654602809&4294967295,E=C+(B<<4&4294967295|B>>>28),B=$+(E^C^P)+U[12]+3873151461&4294967295,$=E+(B<<11&4294967295|B>>>21),B=P+($^E^C)+U[15]+530742520&4294967295,P=$+(B<<16&4294967295|B>>>16),B=C+(P^$^E)+U[2]+3299628645&4294967295,C=P+(B<<23&4294967295|B>>>9),B=E+(P^(C|~$))+U[0]+4096336452&4294967295,E=C+(B<<6&4294967295|B>>>26),B=$+(C^(E|~P))+U[7]+1126891415&4294967295,$=E+(B<<10&4294967295|B>>>22),B=P+(E^($|~C))+U[14]+2878612391&4294967295,P=$+(B<<15&4294967295|B>>>17),B=C+($^(P|~E))+U[5]+4237533241&4294967295,C=P+(B<<21&4294967295|B>>>11),B=E+(P^(C|~$))+U[12]+1700485571&4294967295,E=C+(B<<6&4294967295|B>>>26),B=$+(C^(E|~P))+U[3]+2399980690&4294967295,$=E+(B<<10&4294967295|B>>>22),B=P+(E^($|~C))+U[10]+4293915773&4294967295,P=$+(B<<15&4294967295|B>>>17),B=C+($^(P|~E))+U[1]+2240044497&4294967295,C=P+(B<<21&4294967295|B>>>11),B=E+(P^(C|~$))+U[8]+1873313359&4294967295,E=C+(B<<6&4294967295|B>>>26),B=$+(C^(E|~P))+U[15]+4264355552&4294967295,$=E+(B<<10&4294967295|B>>>22),B=P+(E^($|~C))+U[6]+2734768916&4294967295,P=$+(B<<15&4294967295|B>>>17),B=C+($^(P|~E))+U[13]+1309151649&4294967295,C=P+(B<<21&4294967295|B>>>11),B=E+(P^(C|~$))+U[4]+4149444226&4294967295,E=C+(B<<6&4294967295|B>>>26),B=$+(C^(E|~P))+U[11]+3174756917&4294967295,$=E+(B<<10&4294967295|B>>>22),B=P+(E^($|~C))+U[2]+718787259&4294967295,P=$+(B<<15&4294967295|B>>>17),B=C+($^(P|~E))+U[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(P+(B<<21&4294967295|B>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+$&4294967295}n.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var C=E-this.blockSize,U=this.B,P=this.h,$=0;$<E;){if(P==0)for(;$<=C;)a(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<E;)if(U[P++]=A.charCodeAt($++),P==this.blockSize){a(this,U),P=0;break}}else for(;$<E;)if(U[P++]=A[$++],P==this.blockSize){a(this,U),P=0;break}}this.h=P,this.o+=E},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var C=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=C&255,C/=256;for(this.u(A),A=Array(16),E=C=0;4>E;++E)for(var U=0;32>U;U+=8)A[C++]=this.g[E]>>>U&255;return A};function i(A,E){var C=c;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=E(A)}function o(A,E){this.h=E;for(var C=[],U=!0,P=A.length-1;0<=P;P--){var $=A[P]|0;U&&$==E||(C[P]=$,U=!1)}this.g=C}var c={};function d(A){return-128<=A&&128>A?i(A,function(E){return new o([E|0],0>E?-1:0)}):new o([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return w(h(-A));for(var E=[],C=1,U=0;A>=C;U++)E[U]=A/C|0,C*=4294967296;return new o(E,0)}function m(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return w(m(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(E,8)),U=p,P=0;P<A.length;P+=8){var $=Math.min(8,A.length-P),B=parseInt(A.substring(P,P+$),E);8>$?($=h(Math.pow(E,$)),U=U.j($).add(h(B))):(U=U.j(C),U=U.add(h(B)))}return U}var p=d(0),x=d(1),y=d(16777216);t=o.prototype,t.m=function(){if(N(this))return-w(this).m();for(var A=0,E=1,C=0;C<this.g.length;C++){var U=this.i(C);A+=(0<=U?U:4294967296+U)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(N(this))return"-"+w(this).toString(A);for(var E=h(Math.pow(A,6)),C=this,U="";;){var P=L(C,E).g;C=j(C,P.j(E));var $=((0<C.g.length?C.g[0]:C.h)>>>0).toString(A);if(C=P,S(C))return $+U;for(;6>$.length;)$="0"+$;U=$+U}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function N(A){return A.h==-1}t.l=function(A){return A=j(this,A),N(A)?-1:S(A)?0:1};function w(A){for(var E=A.g.length,C=[],U=0;U<E;U++)C[U]=~A.g[U];return new o(C,~A.h).add(x)}t.abs=function(){return N(this)?w(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),C=[],U=0,P=0;P<=E;P++){var $=U+(this.i(P)&65535)+(A.i(P)&65535),B=($>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);U=B>>>16,$&=65535,B&=65535,C[P]=B<<16|$}return new o(C,C[C.length-1]&-2147483648?-1:0)};function j(A,E){return A.add(w(E))}t.j=function(A){if(S(this)||S(A))return p;if(N(this))return N(A)?w(this).j(w(A)):w(w(this).j(A));if(N(A))return w(this.j(w(A)));if(0>this.l(y)&&0>A.l(y))return h(this.m()*A.m());for(var E=this.g.length+A.g.length,C=[],U=0;U<2*E;U++)C[U]=0;for(U=0;U<this.g.length;U++)for(var P=0;P<A.g.length;P++){var $=this.i(U)>>>16,B=this.i(U)&65535,G=A.i(P)>>>16,K=A.i(P)&65535;C[2*U+2*P]+=B*K,k(C,2*U+2*P),C[2*U+2*P+1]+=$*K,k(C,2*U+2*P+1),C[2*U+2*P+1]+=B*G,k(C,2*U+2*P+1),C[2*U+2*P+2]+=$*G,k(C,2*U+2*P+2)}for(U=0;U<E;U++)C[U]=C[2*U+1]<<16|C[2*U];for(U=E;U<2*E;U++)C[U]=0;return new o(C,0)};function k(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function I(A,E){this.g=A,this.h=E}function L(A,E){if(S(E))throw Error("division by zero");if(S(A))return new I(p,p);if(N(A))return E=L(w(A),E),new I(w(E.g),w(E.h));if(N(E))return E=L(A,w(E)),new I(w(E.g),E.h);if(30<A.g.length){if(N(A)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var C=x,U=E;0>=U.l(A);)C=O(C),U=O(U);var P=R(C,1),$=R(U,1);for(U=R(U,2),C=R(C,2);!S(U);){var B=$.add(U);0>=B.l(A)&&(P=P.add(C),$=B),U=R(U,1),C=R(C,1)}return E=j(A,P.j(E)),new I(P,E)}for(P=p;0<=A.l(E);){for(C=Math.max(1,Math.floor(A.m()/E.m())),U=Math.ceil(Math.log(C)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),$=h(C),B=$.j(E);N(B)||0<B.l(A);)C-=U,$=h(C),B=$.j(E);S($)&&($=x),P=P.add($),A=j(A,B)}return new I(P,A)}t.A=function(A){return L(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),C=[],U=0;U<E;U++)C[U]=this.i(U)&A.i(U);return new o(C,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),C=[],U=0;U<E;U++)C[U]=this.i(U)|A.i(U);return new o(C,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),C=[],U=0;U<E;U++)C[U]=this.i(U)^A.i(U);return new o(C,this.h^A.h)};function O(A){for(var E=A.g.length+1,C=[],U=0;U<E;U++)C[U]=A.i(U)<<1|A.i(U-1)>>>31;return new o(C,A.h)}function R(A,E){var C=E>>5;E%=32;for(var U=A.g.length-C,P=[],$=0;$<U;$++)P[$]=0<E?A.i($+C)>>>E|A.i($+C+1)<<32-E:A.i($+C);return new o(P,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,cF=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,Hd=o}).apply(typeof sI<"u"?sI:typeof self<"u"?self:typeof window<"u"?window:{});var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uF,pp,dF,sv,vT,hF,fF,mF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,D,F){return v==Array.prototype||v==Object.prototype||(v[D]=F.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof my=="object"&&my];for(var D=0;D<v.length;++D){var F=v[D];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var n=r(this);function a(v,D){if(D)e:{var F=n;v=v.split(".");for(var ee=0;ee<v.length-1;ee++){var _e=v[ee];if(!(_e in F))break e;F=F[_e]}v=v[v.length-1],ee=F[v],D=D(ee),D!=ee&&D!=null&&e(F,v,{configurable:!0,writable:!0,value:D})}}function i(v,D){v instanceof String&&(v+="");var F=0,ee=!1,_e={next:function(){if(!ee&&F<v.length){var ze=F++;return{value:D(ze,v[ze]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}a("Array.prototype.values",function(v){return v||function(){return i(this,function(D,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(v){var D=typeof v;return D=D!="object"?D:v?Array.isArray(v)?"array":D:"null",D=="array"||D=="object"&&typeof v.length=="number"}function h(v){var D=typeof v;return D=="object"&&v!=null||D=="function"}function m(v,D,F){return v.call.apply(v.bind,arguments)}function p(v,D,F){if(!v)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,ee),v.apply(D,_e)}}return function(){return v.apply(D,arguments)}}function x(v,D,F){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,x.apply(null,arguments)}function y(v,D){var F=Array.prototype.slice.call(arguments,1);return function(){var ee=F.slice();return ee.push.apply(ee,arguments),v.apply(this,ee)}}function S(v,D){function F(){}F.prototype=D.prototype,v.aa=D.prototype,v.prototype=new F,v.prototype.constructor=v,v.Qb=function(ee,_e,ze){for(var gt=Array(arguments.length-2),an=2;an<arguments.length;an++)gt[an-2]=arguments[an];return D.prototype[_e].apply(ee,gt)}}function N(v){const D=v.length;if(0<D){const F=Array(D);for(let ee=0;ee<D;ee++)F[ee]=v[ee];return F}return[]}function w(v,D){for(let F=1;F<arguments.length;F++){const ee=arguments[F];if(d(ee)){const _e=v.length||0,ze=ee.length||0;v.length=_e+ze;for(let gt=0;gt<ze;gt++)v[_e+gt]=ee[gt]}else v.push(ee)}}class j{constructor(D,F){this.i=D,this.j=F,this.h=0,this.g=null}get(){let D;return 0<this.h?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function k(v){return/^[\s\xa0]*$/.test(v)}function I(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function L(v){return L[" "](v),v}L[" "]=function(){};var O=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function R(v,D,F){for(const ee in v)D.call(F,v[ee],ee,v)}function A(v,D){for(const F in v)D.call(void 0,v[F],F,v)}function E(v){const D={};for(const F in v)D[F]=v[F];return D}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(v,D){let F,ee;for(let _e=1;_e<arguments.length;_e++){ee=arguments[_e];for(F in ee)v[F]=ee[F];for(let ze=0;ze<C.length;ze++)F=C[ze],Object.prototype.hasOwnProperty.call(ee,F)&&(v[F]=ee[F])}}function P(v){var D=1;v=v.split(":");const F=[];for(;0<D&&v.length;)F.push(v.shift()),D--;return v.length&&F.push(v.join(":")),F}function $(v){c.setTimeout(()=>{throw v},0)}function B(){var v=he;let D=null;return v.g&&(D=v.g,v.g=v.g.next,v.g||(v.h=null),D.next=null),D}class G{constructor(){this.h=this.g=null}add(D,F){const ee=K.get();ee.set(D,F),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var K=new j(()=>new H,v=>v.reset());class H{constructor(){this.next=this.g=this.h=null}set(D,F){this.h=D,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ae=!1,he=new G,fe=()=>{const v=c.Promise.resolve(void 0);Z=()=>{v.then(Y)}};var Y=()=>{for(var v;v=B();){try{v.h.call(v.g)}catch(F){$(F)}var D=K;D.j(v),100>D.h&&(D.h++,v.next=D.g,D.g=v)}ae=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(v,D){this.type=v,this.g=this.target=D,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var xe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,D=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const F=()=>{};c.addEventListener("test",F,D),c.removeEventListener("test",F,D)}catch{}return v})();function Te(v,D){if(re.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var F=this.type=v.type,ee=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=D,D=v.relatedTarget){if(O){e:{try{L(D.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(D=null)}}else F=="mouseover"?D=v.fromElement:F=="mouseout"&&(D=v.toElement);this.relatedTarget=D,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Ve[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&Te.aa.h.call(this)}}S(Te,re);var Ve={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function ie(v,D,F,ee,_e){this.listener=v,this.proxy=null,this.src=D,this.type=F,this.capture=!!ee,this.ha=_e,this.key=++Xe,this.da=this.fa=!1}function Be(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Q(v){this.src=v,this.g={},this.h=0}Q.prototype.add=function(v,D,F,ee,_e){var ze=v.toString();v=this.g[ze],v||(v=this.g[ze]=[],this.h++);var gt=Ne(v,D,ee,_e);return-1<gt?(D=v[gt],F||(D.fa=!1)):(D=new ie(D,this.src,ze,!!ee,_e),D.fa=F,v.push(D)),D};function te(v,D){var F=D.type;if(F in v.g){var ee=v.g[F],_e=Array.prototype.indexOf.call(ee,D,void 0),ze;(ze=0<=_e)&&Array.prototype.splice.call(ee,_e,1),ze&&(Be(D),v.g[F].length==0&&(delete v.g[F],v.h--))}}function Ne(v,D,F,ee){for(var _e=0;_e<v.length;++_e){var ze=v[_e];if(!ze.da&&ze.listener==D&&ze.capture==!!F&&ze.ha==ee)return _e}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),Qe={};function nt(v,D,F,ee,_e){if(Array.isArray(D)){for(var ze=0;ze<D.length;ze++)nt(v,D[ze],F,ee,_e);return null}return F=Je(F),v&&v[Ze]?v.K(D,F,h(ee)?!!ee.capture:!1,_e):Ot(v,D,F,!1,ee,_e)}function Ot(v,D,F,ee,_e,ze){if(!D)throw Error("Invalid event type");var gt=h(_e)?!!_e.capture:!!_e,an=ce(v);if(an||(v[Se]=an=new Q(v)),F=an.add(D,F,ee,gt,ze),F.proxy)return F;if(ee=Me(),F.proxy=ee,ee.src=v,ee.listener=F,v.addEventListener)xe||(_e=gt),_e===void 0&&(_e=!1),v.addEventListener(D.toString(),ee,_e);else if(v.attachEvent)v.attachEvent(vt(D.toString()),ee);else if(v.addListener&&v.removeListener)v.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Me(){function v(F){return D.call(v.src,v.listener,F)}const D=et;return v}function lt(v,D,F,ee,_e){if(Array.isArray(D))for(var ze=0;ze<D.length;ze++)lt(v,D[ze],F,ee,_e);else ee=h(ee)?!!ee.capture:!!ee,F=Je(F),v&&v[Ze]?(v=v.i,D=String(D).toString(),D in v.g&&(ze=v.g[D],F=Ne(ze,F,ee,_e),-1<F&&(Be(ze[F]),Array.prototype.splice.call(ze,F,1),ze.length==0&&(delete v.g[D],v.h--)))):v&&(v=ce(v))&&(D=v.g[D.toString()],v=-1,D&&(v=Ne(D,F,ee,_e)),(F=-1<v?D[v]:null)&&St(F))}function St(v){if(typeof v!="number"&&v&&!v.da){var D=v.src;if(D&&D[Ze])te(D.i,v);else{var F=v.type,ee=v.proxy;D.removeEventListener?D.removeEventListener(F,ee,v.capture):D.detachEvent?D.detachEvent(vt(F),ee):D.addListener&&D.removeListener&&D.removeListener(ee),(F=ce(D))?(te(F,v),F.h==0&&(F.src=null,D[Se]=null)):Be(v)}}}function vt(v){return v in Qe?Qe[v]:Qe[v]="on"+v}function et(v,D){if(v.da)v=!0;else{D=new Te(D,this);var F=v.listener,ee=v.ha||v.src;v.fa&&St(v),v=F.call(ee,D)}return v}function ce(v){return v=v[Se],v instanceof Q?v:null}var Ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function Je(v){return typeof v=="function"?v:(v[Ue]||(v[Ue]=function(D){return v.handleEvent(D)}),v[Ue])}function ht(){ne.call(this),this.i=new Q(this),this.M=this,this.F=null}S(ht,ne),ht.prototype[Ze]=!0,ht.prototype.removeEventListener=function(v,D,F,ee){lt(this,v,D,F,ee)};function dt(v,D){var F,ee=v.F;if(ee)for(F=[];ee;ee=ee.F)F.push(ee);if(v=v.M,ee=D.type||D,typeof D=="string")D=new re(D,v);else if(D instanceof re)D.target=D.target||v;else{var _e=D;D=new re(ee,v),U(D,_e)}if(_e=!0,F)for(var ze=F.length-1;0<=ze;ze--){var gt=D.g=F[ze];_e=Ut(gt,ee,!0,D)&&_e}if(gt=D.g=v,_e=Ut(gt,ee,!0,D)&&_e,_e=Ut(gt,ee,!1,D)&&_e,F)for(ze=0;ze<F.length;ze++)gt=D.g=F[ze],_e=Ut(gt,ee,!1,D)&&_e}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var v=this.i,D;for(D in v.g){for(var F=v.g[D],ee=0;ee<F.length;ee++)Be(F[ee]);delete v.g[D],v.h--}}this.F=null},ht.prototype.K=function(v,D,F,ee){return this.i.add(String(v),D,!1,F,ee)},ht.prototype.L=function(v,D,F,ee){return this.i.add(String(v),D,!0,F,ee)};function Ut(v,D,F,ee){if(D=v.i.g[String(D)],!D)return!0;D=D.concat();for(var _e=!0,ze=0;ze<D.length;++ze){var gt=D[ze];if(gt&&!gt.da&&gt.capture==F){var an=gt.listener,_a=gt.ha||gt.src;gt.fa&&te(v.i,gt),_e=an.call(_a,ee)!==!1&&_e}}return _e&&!ee.defaultPrevented}function tr(v,D,F){if(typeof v=="function")F&&(v=x(v,F));else if(v&&typeof v.handleEvent=="function")v=x(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(D)?-1:c.setTimeout(v,D||0)}function Ir(v){v.g=tr(()=>{v.g=null,v.i&&(v.i=!1,Ir(v))},v.l);const D=v.h;v.h=null,v.m.apply(null,D)}class ve extends ne{constructor(D,F){super(),this.m=D,this.l=F,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(v){ne.call(this),this.h=v,this.g={}}S(st,ne);var At=[];function Pt(v){R(v.g,function(D,F){this.g.hasOwnProperty(F)&&St(D)},v),v.g={}}st.prototype.N=function(){st.aa.N.call(this),Pt(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,tt=c.JSON.parse,ar=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Sr(){}Sr.prototype.h=null;function Ur(v){return v.h||(v.h=v.i())}function mn(){}var wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gt(){re.call(this,"d")}S(Gt,re);function zt(){re.call(this,"c")}S(zt,re);var Nt={},Vr=null;function ln(){return Vr=Vr||new ht}Nt.La="serverreachability";function Yr(v){re.call(this,Nt.La,v)}S(Yr,re);function Fr(v){const D=ln();dt(D,new Yr(D))}Nt.STAT_EVENT="statevent";function pn(v,D){re.call(this,Nt.STAT_EVENT,v),this.stat=D}S(pn,re);function dr(v){const D=ln();dt(D,new pn(D,v))}Nt.Ma="timingevent";function ba(v,D){re.call(this,Nt.Ma,v),this.size=D}S(ba,re);function gn(v,D){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},D)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function ii(v,D,F,ee,_e,ze){v.info(function(){if(v.g)if(ze)for(var gt="",an=ze.split("&"),_a=0;_a<an.length;_a++){var vr=an[_a].split("=");if(1<vr.length){var Qa=vr[0];vr=vr[1];var Xa=Qa.split("_");gt=2<=Xa.length&&Xa[1]=="type"?gt+(Qa+"="+vr+"&"):gt+(Qa+"=redacted&")}}else gt=null;else gt=ze;return"XMLHTTP REQ ("+ee+") [attempt "+_e+"]: "+D+`
`+F+`
`+gt})}function jr(v,D,F,ee,_e,ze,gt){v.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+_e+"]: "+D+`
`+F+`
`+ze+" "+gt})}function xn(v,D,F,ee){v.info(function(){return"XMLHTTP TEXT ("+D+"): "+Qn(v,F)+(ee?" "+ee:"")})}function si(v,D){v.info(function(){return"TIMEOUT: "+D})}In.prototype.info=function(){};function Qn(v,D){if(!v.g)return D;if(!D)return null;try{var F=JSON.parse(D);if(F){for(v=0;v<F.length;v++)if(Array.isArray(F[v])){var ee=F[v];if(!(2>ee.length)){var _e=ee[1];if(Array.isArray(_e)&&!(1>_e.length)){var ze=_e[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(var gt=1;gt<_e.length;gt++)_e[gt]=""}}}}return $t(F)}catch{return D}}var nn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},An;function oi(){}S(oi,Sr),oi.prototype.g=function(){return new XMLHttpRequest},oi.prototype.i=function(){return{}},An=new oi;function Ka(v,D,F,ee){this.j=v,this.i=D,this.l=F,this.R=ee||1,this.U=new st(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ki}function ki(){this.i=null,this.g="",this.h=!1}var hs={},bi={};function _t(v,D,F){v.L=1,v.v=De(jt(D)),v.m=F,v.P=!0,me(v,null)}function me(v,D){v.F=Date.now(),Xt(v),v.A=jt(v.v);var F=v.A,ee=v.R;Array.isArray(ee)||(ee=[String(ee)]),$s(F.i,"t",ee),v.C=0,F=v.j.J,v.h=new ki,v.g=i1(v.j,F?D:null,!v.m),0<v.O&&(v.M=new ve(x(v.Y,v,v.g),v.O)),D=v.U,F=v.g,ee=v.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(At[0]=_e.toString()),_e=At);for(var ze=0;ze<_e.length;ze++){var gt=nt(F,_e[ze],ee||D.handleEvent,!1,D.h||D);if(!gt)break;D.g[gt.key]=gt}D=v.H?E(v.H):{},v.m?(v.u||(v.u="POST"),D["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,D)):(v.u="GET",v.g.ea(v.A,v.u,null,D)),Fr(),ii(v.i,v.u,v.A,v.l,v.R,v.m)}Ka.prototype.ca=function(v){v=v.target;const D=this.M;D&&Ci(v)==3?D.j():this.Y(v)},Ka.prototype.Y=function(v){try{if(v==this.g)e:{const Xa=Ci(this.g);var D=this.g.Ba();const Ic=this.g.Z();if(!(3>Xa)&&(Xa!=3||this.g&&(this.h.h||this.g.oa()||ed(this.g)))){this.J||Xa!=4||D==7||(D==8||0>=Ic?Fr(3):Fr(2)),cn(this);var F=this.g.Z();this.X=F;t:if(rt(this)){var ee=ed(this.g);v="";var _e=ee.length,ze=Ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Jr(this);var gt="";break t}this.h.i=new c.TextDecoder}for(D=0;D<_e;D++)this.h.h=!0,v+=this.h.i.decode(ee[D],{stream:!(ze&&D==_e-1)});ee.length=0,this.h.g+=v,this.C=0,gt=this.h.g}else gt=this.g.oa();if(this.o=F==200,jr(this.i,this.u,this.A,this.l,this.R,Xa,F),this.o){if(this.T&&!this.K){t:{if(this.g){var an,_a=this.g;if((an=_a.g?_a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(an)){var vr=an;break t}}vr=null}if(F=vr)xn(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rr(this,F);else{this.o=!1,this.s=3,dr(12),vn(this),Jr(this);break e}}if(this.P){F=!0;let Hi;for(;!this.J&&this.C<gt.length;)if(Hi=ft(this,gt),Hi==bi){Xa==4&&(this.s=4,dr(14),F=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(Hi==hs){this.s=4,dr(15),xn(this.i,this.l,gt,"[Invalid Chunk]"),F=!1;break}else xn(this.i,this.l,Hi,null),Rr(this,Hi);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xa!=4||gt.length!=0||this.h.h||(this.s=1,dr(16),F=!1),this.o=this.o&&F,!F)xn(this.i,this.l,gt,"[Invalid Chunked Response]"),vn(this),Jr(this);else if(0<gt.length&&!this.W){this.W=!0;var Qa=this.j;Qa.g==this&&Qa.ba&&!Qa.M&&(Qa.j.info("Great, no buffering proxy detected. Bytes received: "+gt.length),cm(Qa),Qa.M=!0,dr(11))}}else xn(this.i,this.l,gt,null),Rr(this,gt);Xa==4&&vn(this),this.o&&!this.J&&(Xa==4?r1(this.j,this):(this.o=!1,Xt(this)))}else Xx(this.g),F==400&&0<gt.indexOf("Unknown SID")?(this.s=3,dr(12)):(this.s=0,dr(13)),vn(this),Jr(this)}}}catch{}finally{}};function rt(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function ft(v,D){var F=v.C,ee=D.indexOf(`
`,F);return ee==-1?bi:(F=Number(D.substring(F,ee)),isNaN(F)?hs:(ee+=1,ee+F>D.length?bi:(D=D.slice(ee,ee+F),v.C=ee+F,D)))}Ka.prototype.cancel=function(){this.J=!0,vn(this)};function Xt(v){v.S=Date.now()+v.I,mr(v,v.I)}function mr(v,D){if(v.B!=null)throw Error("WatchDog timer not null");v.B=gn(x(v.ba,v),D)}function cn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Ka.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(si(this.i,this.A),this.L!=2&&(Fr(),dr(17)),vn(this),this.s=2,Jr(this)):mr(this,this.S-v)};function Jr(v){v.j.G==0||v.J||r1(v.j,v)}function vn(v){cn(v);var D=v.M;D&&typeof D.ma=="function"&&D.ma(),v.M=null,Pt(v.U),v.g&&(D=v.g,v.g=null,D.abort(),D.ma())}function Rr(v,D){try{var F=v.j;if(F.G!=0&&(F.g==v||ms(F.h,v))){if(!v.K&&ms(F.h,v)&&F.G==3){try{var ee=F.Da.g.parse(D)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var _e=ee;if(_e[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<v.F)Cc(F),kc(F);else break e;lm(F),dr(18)}}else F.za=_e[1],0<F.za-F.T&&37500>_e[2]&&F.F&&F.v==0&&!F.C&&(F.C=gn(x(F.Za,F),6e3));if(1>=xl(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else vl(F,11)}else if((v.K||F.g==v)&&Cc(F),!k(D))for(_e=F.Da.g.parse(D),D=0;D<_e.length;D++){let vr=_e[D];if(F.T=vr[0],vr=vr[1],F.G==2)if(vr[0]=="c"){F.K=vr[1],F.ia=vr[2];const Qa=vr[3];Qa!=null&&(F.la=Qa,F.j.info("VER="+F.la));const Xa=vr[4];Xa!=null&&(F.Aa=Xa,F.j.info("SVER="+F.Aa));const Ic=vr[5];Ic!=null&&typeof Ic=="number"&&0<Ic&&(ee=1.5*Ic,F.L=ee,F.j.info("backChannelRequestTimeoutMs_="+ee)),ee=F;const Hi=v.g;if(Hi){const nd=Hi.g?Hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nd){var ze=ee.h;ze.g||nd.indexOf("spdy")==-1&&nd.indexOf("quic")==-1&&nd.indexOf("h2")==-1||(ze.j=ze.l,ze.g=new Set,ze.h&&(ps(ze,ze.h),ze.h=null))}if(ee.D){const bl=Hi.g?Hi.g.getResponseHeader("X-HTTP-Session-Id"):null;bl&&(ee.ya=bl,ye(ee.I,ee.D,bl))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-v.F,F.j.info("Handshake RTT: "+F.R+"ms")),ee=F;var gt=v;if(ee.qa=a1(ee,ee.J?ee.ia:null,ee.W),gt.K){Da(ee.h,gt);var an=gt,_a=ee.L;_a&&(an.I=_a),an.B&&(cn(an),Xt(an)),ee.g=gt}else e1(ee);0<F.i.length&&I0(F)}else vr[0]!="stop"&&vr[0]!="close"||vl(F,7);else F.G==3&&(vr[0]=="stop"||vr[0]=="close"?vr[0]=="stop"?vl(F,7):sm(F):vr[0]!="noop"&&F.l&&F.l.ta(vr),F.v=0)}}Fr(4)}catch{}}var Ls=class{constructor(v,D){this.g=v,this.map=D}};function fs(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fo(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function xl(v){return v.h?1:v.g?v.g.size:0}function ms(v,D){return v.h?v.h==D:v.g?v.g.has(D):!1}function ps(v,D){v.g?v.g.add(D):v.h=D}function Da(v,D){v.h&&v.h==D?v.h=null:v.g&&v.g.has(D)&&v.g.delete(D)}fs.prototype.cancel=function(){if(this.i=wa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function wa(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let D=v.i;for(const F of v.g.values())D=D.concat(F.D);return D}return N(v.i)}function q(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var D=[],F=v.length,ee=0;ee<F;ee++)D.push(v[ee]);return D}D=[],F=0;for(ee in v)D[F++]=v[ee];return D}function be(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var D=[];v=v.length;for(var F=0;F<v;F++)D.push(F);return D}D=[],F=0;for(const ee in v)D[F++]=ee;return D}}}function je(v,D){if(v.forEach&&typeof v.forEach=="function")v.forEach(D,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,D,void 0);else for(var F=be(v),ee=q(v),_e=ee.length,ze=0;ze<_e;ze++)D.call(void 0,ee[ze],F&&F[ze],v)}var Ae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(v,D){if(v){v=v.split("&");for(var F=0;F<v.length;F++){var ee=v[F].indexOf("="),_e=null;if(0<=ee){var ze=v[F].substring(0,ee);_e=v[F].substring(ee+1)}else ze=v[F];D(ze,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function It(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof It){this.h=v.h,Yt(this,v.j),this.o=v.o,this.g=v.g,Nr(this,v.s),this.l=v.l;var D=v.i,F=new Na;F.i=D.i,D.g&&(F.g=new Map(D.g),F.h=D.h),ue(this,F),this.m=v.m}else v&&(D=String(v).match(Ae))?(this.h=!1,Yt(this,D[1]||"",!0),this.o=Fe(D[2]||""),this.g=Fe(D[3]||"",!0),Nr(this,D[4]),this.l=Fe(D[5]||"",!0),ue(this,D[6]||"",!0),this.m=Fe(D[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}It.prototype.toString=function(){var v=[],D=this.j;D&&v.push(qe(D,Kt,!0),":");var F=this.g;return(F||D=="file")&&(v.push("//"),(D=this.o)&&v.push(qe(D,Kt,!0),"@"),v.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&v.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&v.push("/"),v.push(qe(F,F.charAt(0)=="/"?ua:Rn,!0))),(F=this.i.toString())&&v.push("?",F),(F=this.m)&&v.push("#",qe(F,Sa)),v.join("")};function jt(v){return new It(v)}function Yt(v,D,F){v.j=F?Fe(D,!0):D,v.j&&(v.j=v.j.replace(/:$/,""))}function Nr(v,D){if(D){if(D=Number(D),isNaN(D)||0>D)throw Error("Bad port number "+D);v.s=D}else v.s=null}function ue(v,D,F){D instanceof Na?(v.i=D,Wx(v.i,v.h)):(F||(D=qe(D,Bs)),v.i=new Na(D,v.h))}function ye(v,D,F){v.i.set(D,F)}function De(v){return ye(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Fe(v,D){return v?D?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function qe(v,D,F){return typeof v=="string"?(v=encodeURI(v).replace(D,sr),F&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function sr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Kt=/[#\/\?@]/g,Rn=/[#\?:]/g,ua=/[#\?]/g,Bs=/[#\?@]/g,Sa=/#/g;function Na(v,D){this.h=this.g=null,this.i=v||null,this.j=!!D}function ra(v){v.g||(v.g=new Map,v.h=0,v.i&&pt(v.i,function(D,F){v.add(decodeURIComponent(D.replace(/\+/g," ")),F)}))}t=Na.prototype,t.add=function(v,D){ra(this),this.i=null,v=gs(this,v);var F=this.g.get(v);return F||this.g.set(v,F=[]),F.push(D),this.h+=1,this};function Mr(v,D){ra(v),D=gs(v,D),v.g.has(D)&&(v.i=null,v.h-=v.g.get(D).length,v.g.delete(D))}function Po(v,D){return ra(v),D=gs(v,D),v.g.has(D)}t.forEach=function(v,D){ra(this),this.g.forEach(function(F,ee){F.forEach(function(_e){v.call(D,_e,ee,this)},this)},this)},t.na=function(){ra(this);const v=Array.from(this.g.values()),D=Array.from(this.g.keys()),F=[];for(let ee=0;ee<D.length;ee++){const _e=v[ee];for(let ze=0;ze<_e.length;ze++)F.push(D[ee])}return F},t.V=function(v){ra(this);let D=[];if(typeof v=="string")Po(this,v)&&(D=D.concat(this.g.get(gs(this,v))));else{v=Array.from(this.g.values());for(let F=0;F<v.length;F++)D=D.concat(v[F])}return D},t.set=function(v,D){return ra(this),this.i=null,v=gs(this,v),Po(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[D]),this.h+=1,this},t.get=function(v,D){return v?(v=this.V(v),0<v.length?String(v[0]):D):D};function $s(v,D,F){Mr(v,D),0<F.length&&(v.i=null,v.g.set(gs(v,D),N(F)),v.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],D=Array.from(this.g.keys());for(var F=0;F<D.length;F++){var ee=D[F];const ze=encodeURIComponent(String(ee)),gt=this.V(ee);for(ee=0;ee<gt.length;ee++){var _e=ze;gt[ee]!==""&&(_e+="="+encodeURIComponent(String(gt[ee]))),v.push(_e)}}return this.i=v.join("&")};function gs(v,D){return D=String(D),v.j&&(D=D.toLowerCase()),D}function Wx(v,D){D&&!v.j&&(ra(v),v.i=null,v.g.forEach(function(F,ee){var _e=ee.toLowerCase();ee!=_e&&(Mr(this,ee),$s(this,_e,F))},v)),v.j=D}function am(v,D){const F=new In;if(c.Image){const ee=new Image;ee.onload=y(qi,F,"TestLoadImage: loaded",!0,D,ee),ee.onerror=y(qi,F,"TestLoadImage: error",!1,D,ee),ee.onabort=y(qi,F,"TestLoadImage: abort",!1,D,ee),ee.ontimeout=y(qi,F,"TestLoadImage: timeout",!1,D,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=v}else D(!1)}function Kx(v,D){const F=new In,ee=new AbortController,_e=setTimeout(()=>{ee.abort(),qi(F,"TestPingServer: timeout",!1,D)},1e4);fetch(v,{signal:ee.signal}).then(ze=>{clearTimeout(_e),ze.ok?qi(F,"TestPingServer: ok",!0,D):qi(F,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(_e),qi(F,"TestPingServer: error",!1,D)})}function qi(v,D,F,ee,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),ee(F)}catch{}}function mo(){this.g=new ar}function im(v,D,F){const ee=F||"";try{je(v,function(_e,ze){let gt=_e;h(_e)&&(gt=$t(_e)),D.push(ee+ze+"="+encodeURIComponent(gt))})}catch(_e){throw D.push(ee+"type="+encodeURIComponent("_badmap")),_e}}function Lo(v){this.l=v.Ub||null,this.j=v.eb||!1}S(Lo,Sr),Lo.prototype.g=function(){return new xs(this.l,this.j)},Lo.prototype.i=(function(v){return function(){return v}})({});function xs(v,D){ht.call(this),this.D=v,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(xs,ht),t=xs.prototype,t.open=function(v,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=D,this.readyState=1,Tc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const D={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(D.body=v),(this.D||c).fetch(new Request(this.A,D)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bo(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Tc(this)),this.g&&(this.readyState=3,Tc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;C0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function C0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var D=v.value?v.value:new Uint8Array(0);(D=this.v.decode(D,{stream:!v.done}))&&(this.response=this.responseText+=D)}v.done?Bo(this):Tc(this),this.readyState==3&&C0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Bo(this))},t.Qa=function(v){this.g&&(this.response=v,Bo(this))},t.ga=function(){this.g&&Bo(this)};function Bo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Tc(v)}t.setRequestHeader=function(v,D){this.u.append(v,D)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],D=this.h.entries();for(var F=D.next();!F.done;)F=F.value,v.push(F[0]+": "+F[1]),F=D.next();return v.join(`\r
`)};function Tc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ju(v){let D="";return R(v,function(F,ee){D+=ee,D+=":",D+=F,D+=`\r
`}),D}function jc(v,D,F){e:{for(ee in F){var ee=!1;break e}ee=!0}ee||(F=Ju(F),typeof v=="string"?F!=null&&encodeURIComponent(String(F)):ye(v,D,F))}function Bn(v){ht.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Bn,ht);var wi=/^https?$/i,yl=["POST","PUT"];t=Bn.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,D,F,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);D=D?D.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():An.g(),this.v=this.o?Ur(this.o):Ur(An),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(D,String(v),!0),this.B=!1}catch(ze){Zu(this,ze);return}if(v=F||"",F=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var _e in ee)F.set(_e,ee[_e]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const ze of ee.keys())F.set(ze,ee.get(ze));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(F.keys()).find(ze=>ze.toLowerCase()=="content-type"),_e=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(yl,D,void 0))||ee||_e||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,gt]of F)this.g.setRequestHeader(ze,gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{O0(this),this.u=!0,this.g.send(v),this.u=!1}catch(ze){Zu(this,ze)}};function Zu(v,D){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=D,v.m=5,Ac(v),Ec(v)}function Ac(v){v.A||(v.A=!0,dt(v,"complete"),dt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,dt(this,"complete"),dt(this,"abort"),Ec(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ec(this,!0)),Bn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qx(this):this.bb())},t.bb=function(){Qx(this)};function Qx(v){if(v.h&&typeof o<"u"&&(!v.v[1]||Ci(v)!=4||v.Z()!=2)){if(v.u&&Ci(v)==4)tr(v.Ea,0,v);else if(dt(v,"readystatechange"),Ci(v)==4){v.h=!1;try{const gt=v.Z();e:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var F;if(!(F=D)){var ee;if(ee=gt===0){var _e=String(v.D).match(Ae)[1]||null;!_e&&c.self&&c.self.location&&(_e=c.self.location.protocol.slice(0,-1)),ee=!wi.test(_e?_e.toLowerCase():"")}F=ee}if(F)dt(v,"complete"),dt(v,"success");else{v.m=6;try{var ze=2<Ci(v)?v.g.statusText:""}catch{ze=""}v.l=ze+" ["+v.Z()+"]",Ac(v)}}finally{Ec(v)}}}}function Ec(v,D){if(v.g){O0(v);const F=v.g,ee=v.v[0]?()=>{}:null;v.g=null,v.v=null,D||dt(v,"ready");try{F.onreadystatechange=ee}catch{}}}function O0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Ci(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var D=this.g.responseText;return v&&D.indexOf(v)==0&&(D=D.substring(v.length)),tt(D)}};function ed(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Xx(v){const D={};v=(v.g&&2<=Ci(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<v.length;ee++){if(k(v[ee]))continue;var F=P(v[ee]);const _e=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const ze=D[_e]||[];D[_e]=ze,ze.push(F)}A(D,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function td(v,D,F){return F&&F.internalChannelParams&&F.internalChannelParams[v]||D}function Yx(v){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=td("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=td("baseRetryDelayMs",5e3,v),this.cb=td("retryDelaySeedMs",1e4,v),this.Wa=td("forwardChannelMaxRetries",2,v),this.wa=td("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new fs(v&&v.concurrentRequestLimit),this.Da=new mo,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Yx.prototype,t.la=8,t.G=1,t.connect=function(v,D,F,ee){dr(0),this.W=v,this.H=D||{},F&&ee!==void 0&&(this.H.OSID=F,this.H.OAID=ee),this.F=this.X,this.I=a1(this,null,this.W),I0(this)};function sm(v){if(Jx(v),v.G==3){var D=v.U++,F=jt(v.I);if(ye(F,"SID",v.K),ye(F,"RID",D),ye(F,"TYPE","terminate"),rd(v,F),D=new Ka(v,v.j,D),D.L=2,D.v=De(jt(F)),F=!1,c.navigator&&c.navigator.sendBeacon)try{F=c.navigator.sendBeacon(D.v.toString(),"")}catch{}!F&&c.Image&&(new Image().src=D.v,F=!0),F||(D.g=i1(D.j,null),D.g.ea(D.v)),D.F=Date.now(),Xt(D)}um(v)}function kc(v){v.g&&(cm(v),v.g.cancel(),v.g=null)}function Jx(v){kc(v),v.u&&(c.clearTimeout(v.u),v.u=null),Cc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function I0(v){if(!fo(v.h)&&!v.s){v.s=!0;var D=v.Ga;Z||fe(),ae||(Z(),ae=!0),he.add(D,v),v.B=0}}function e4(v,D){return xl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=D.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=gn(x(v.Ga,v,D),n1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const _e=new Ka(this,this.j,v);let ze=this.o;if(this.S&&(ze?(ze=E(ze),U(ze,this.S)):ze=this.S),this.m!==null||this.O||(_e.H=ze,ze=null),this.P)e:{for(var D=0,F=0;F<this.i.length;F++){t:{var ee=this.i[F];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(D+=ee,4096<D){D=F;break e}if(D===4096||F===this.i.length-1){D=F+1;break e}}D=1e3}else D=1e3;D=om(this,_e,D),F=jt(this.I),ye(F,"RID",v),ye(F,"CVER",22),this.D&&ye(F,"X-HTTP-Session-Id",this.D),rd(this,F),ze&&(this.O?D="headers="+encodeURIComponent(String(Ju(ze)))+"&"+D:this.m&&jc(F,this.m,ze)),ps(this.h,_e),this.Ua&&ye(F,"TYPE","init"),this.P?(ye(F,"$req",D),ye(F,"SID","null"),_e.T=!0,_t(_e,F,null)):_t(_e,F,D),this.G=2}}else this.G==3&&(v?Zx(this,v):this.i.length==0||fo(this.h)||Zx(this))};function Zx(v,D){var F;D?F=D.l:F=v.U++;const ee=jt(v.I);ye(ee,"SID",v.K),ye(ee,"RID",F),ye(ee,"AID",v.T),rd(v,ee),v.m&&v.o&&jc(ee,v.m,v.o),F=new Ka(v,v.j,F,v.B+1),v.m===null&&(F.H=v.o),D&&(v.i=D.D.concat(v.i)),D=om(v,F,1e3),F.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),ps(v.h,F),_t(F,ee,D)}function rd(v,D){v.H&&R(v.H,function(F,ee){ye(D,ee,F)}),v.l&&je({},function(F,ee){ye(D,ee,F)})}function om(v,D,F){F=Math.min(v.i.length,F);var ee=v.l?x(v.l.Na,v.l,v):null;e:{var _e=v.i;let ze=-1;for(;;){const gt=["count="+F];ze==-1?0<F?(ze=_e[0].g,gt.push("ofs="+ze)):ze=0:gt.push("ofs="+ze);let an=!0;for(let _a=0;_a<F;_a++){let vr=_e[_a].g;const Qa=_e[_a].map;if(vr-=ze,0>vr)ze=Math.max(0,_e[_a].g-100),an=!1;else try{im(Qa,gt,"req"+vr+"_")}catch{ee&&ee(Qa)}}if(an){ee=gt.join("&");break e}}}return v=v.i.splice(0,F),D.D=v,ee}function e1(v){if(!v.g&&!v.u){v.Y=1;var D=v.Fa;Z||fe(),ae||(Z(),ae=!0),he.add(D,v),v.v=0}}function lm(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=gn(x(v.Fa,v),n1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,t1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=gn(x(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dr(10),kc(this),t1(this))};function cm(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function t1(v){v.g=new Ka(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var D=jt(v.qa);ye(D,"RID","rpc"),ye(D,"SID",v.K),ye(D,"AID",v.T),ye(D,"CI",v.F?"0":"1"),!v.F&&v.ja&&ye(D,"TO",v.ja),ye(D,"TYPE","xmlhttp"),rd(v,D),v.m&&v.o&&jc(D,v.m,v.o),v.L&&(v.g.I=v.L);var F=v.g;v=v.ia,F.L=1,F.v=De(jt(D)),F.m=null,F.P=!0,me(F,v)}t.Za=function(){this.C!=null&&(this.C=null,kc(this),lm(this),dr(19))};function Cc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function r1(v,D){var F=null;if(v.g==D){Cc(v),cm(v),v.g=null;var ee=2}else if(ms(v.h,D))F=D.D,Da(v.h,D),ee=1;else return;if(v.G!=0){if(D.o)if(ee==1){F=D.m?D.m.length:0,D=Date.now()-D.F;var _e=v.B;ee=ln(),dt(ee,new ba(ee,F)),I0(v)}else e1(v);else if(_e=D.s,_e==3||_e==0&&0<D.X||!(ee==1&&e4(v,D)||ee==2&&lm(v)))switch(F&&0<F.length&&(D=v.h,D.i=D.i.concat(F)),_e){case 1:vl(v,5);break;case 4:vl(v,10);break;case 3:vl(v,6);break;default:vl(v,2)}}}function n1(v,D){let F=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(F*=2),F*D}function vl(v,D){if(v.j.info("Error code "+D),D==2){var F=x(v.fb,v),ee=v.Xa;const _e=!ee;ee=new It(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yt(ee,"https"),De(ee),_e?am(ee.toString(),F):Kx(ee.toString(),F)}else dr(2);v.G=0,v.l&&v.l.sa(D),um(v),Jx(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),dr(2)):(this.j.info("Failed to ping google.com"),dr(1))};function um(v){if(v.G=0,v.ka=[],v.l){const D=wa(v.h);(D.length!=0||v.i.length!=0)&&(w(v.ka,D),w(v.ka,v.i),v.h.i.length=0,N(v.i),v.i.length=0),v.l.ra()}}function a1(v,D,F){var ee=F instanceof It?jt(F):new It(F);if(ee.g!="")D&&(ee.g=D+"."+ee.g),Nr(ee,ee.s);else{var _e=c.location;ee=_e.protocol,D=D?D+"."+_e.hostname:_e.hostname,_e=+_e.port;var ze=new It(null);ee&&Yt(ze,ee),D&&(ze.g=D),_e&&Nr(ze,_e),F&&(ze.l=F),ee=ze}return F=v.D,D=v.ya,F&&D&&ye(ee,F,D),ye(ee,"VER",v.la),rd(v,ee),ee}function i1(v,D,F){if(D&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return D=v.Ca&&!v.pa?new Bn(new Lo({eb:F})):new Bn(v.pa),D.Ha(v.J),D}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function s1(){}t=s1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function R0(){}R0.prototype.g=function(v,D){return new Oi(v,D)};function Oi(v,D){ht.call(this),this.g=new Yx(D),this.l=v,this.h=D&&D.messageUrlParams||null,v=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(v?v["X-WebChannel-Content-Type"]=D.messageContentType:v={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.va&&(v?v["X-WebChannel-Client-Profile"]=D.va:v={"X-WebChannel-Client-Profile":D.va}),this.g.S=v,(v=D&&D.Sb)&&!k(v)&&(this.g.m=v),this.v=D&&D.supportsCrossDomainXhr||!1,this.u=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!k(D)&&(this.g.D=D,v=this.h,v!==null&&D in v&&(v=this.h,D in v&&delete v[D])),this.j=new Oc(this)}S(Oi,ht),Oi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Oi.prototype.close=function(){sm(this.g)},Oi.prototype.o=function(v){var D=this.g;if(typeof v=="string"){var F={};F.__data__=v,v=F}else this.u&&(F={},F.__data__=$t(v),v=F);D.i.push(new Ls(D.Ya++,v)),D.G==3&&I0(D)},Oi.prototype.N=function(){this.g.l=null,delete this.j,sm(this.g),delete this.g,Oi.aa.N.call(this)};function o1(v){Gt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var D=v.__sm__;if(D){e:{for(const F in D){v=F;break e}v=void 0}(this.i=v)&&(v=this.i,D=D!==null&&v in D?D[v]:void 0),this.data=D}else this.data=v}S(o1,Gt);function l1(){zt.call(this),this.status=1}S(l1,zt);function Oc(v){this.g=v}S(Oc,s1),Oc.prototype.ua=function(){dt(this.g,"a")},Oc.prototype.ta=function(v){dt(this.g,new o1(v))},Oc.prototype.sa=function(v){dt(this.g,new l1)},Oc.prototype.ra=function(){dt(this.g,"b")},R0.prototype.createWebChannel=R0.prototype.g,Oi.prototype.send=Oi.prototype.o,Oi.prototype.open=Oi.prototype.m,Oi.prototype.close=Oi.prototype.close,mF=function(){return new R0},fF=function(){return ln()},hF=Nt,vT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nn.NO_ERROR=0,nn.TIMEOUT=8,nn.HTTP_ERROR=6,sv=nn,yn.COMPLETE="complete",dF=yn,mn.EventType=wr,wr.OPEN="a",wr.CLOSE="b",wr.ERROR="c",wr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,pp=mn,Bn.prototype.listenOnce=Bn.prototype.L,Bn.prototype.getLastError=Bn.prototype.Ka,Bn.prototype.getLastErrorCode=Bn.prototype.Ba,Bn.prototype.getStatus=Bn.prototype.Z,Bn.prototype.getResponseJson=Bn.prototype.Oa,Bn.prototype.getResponseText=Bn.prototype.oa,Bn.prototype.send=Bn.prototype.ea,Bn.prototype.setWithCredentials=Bn.prototype.Ha,uF=Bn}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});const oI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new BA("@firebase/firestore");function yh(){return Xd.logLevel}function it(t,...e){if(Xd.logLevel<=Cr.DEBUG){const r=e.map(JA);Xd.debug(`Firestore (${Pf}): ${t}`,...r)}}function pa(t,...e){if(Xd.logLevel<=Cr.ERROR){const r=e.map(JA);Xd.error(`Firestore (${Pf}): ${t}`,...r)}}function Xp(t,...e){if(Xd.logLevel<=Cr.WARN){const r=e.map(JA);Xd.warn(`Firestore (${Pf}): ${t}`,...r)}}function JA(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t="Unexpected state"){const e=`FIRESTORE (${Pf}) INTERNAL ASSERTION FAILED: `+t;throw pa(e),new Error(e)}function Mt(t,e){t||Et()}function Rt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends Io{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cre{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ore{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Ti.UNAUTHENTICATED)))}shutdown(){}}class Ire{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Mt(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new ko;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ko,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ko)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Mt(typeof n.accessToken=="string"),new Cre(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string"),new Ti(e)}}class Rre{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Mre{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Rre(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Ti.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dre{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Mt(this.o===void 0);const n=i=>{i.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,it("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Mt(typeof r.token=="string"),this.R=r.token,new Dre(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Lre(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function lr(t,e){return t<e?-1:t>e?1:0}function Hh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function gF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new mt(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new mt(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new mt(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new mt(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ta.fromMillis(Date.now())}static fromDate(e){return ta.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new ta(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bt(e)}static min(){return new Bt(new ta(0,0))}static max(){return new Bt(new ta(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,r,n){r===void 0?r=0:r>e.length&&Et(),n===void 0?n=e.length-r:n>e.length-r&&Et(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Yp.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Yp?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),o=r.get(a);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Gr extends Yp{construct(e,r,n){return new Gr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new mt(He.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Gr(r)}static emptyPath(){return new Gr([])}}const Bre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ea extends Yp{construct(e,r,n){return new ea(e,r,n)}static isValidIdentifier(e){return Bre.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ea.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ea(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new mt(He.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new mt(He.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new mt(He.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(i(),a++)}if(i(),o)throw new mt(He.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ea(r)}static emptyPath(){return new ea([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.path=e}static fromPath(e){return new bt(Gr.fromString(e))}static fromName(e){return new bt(Gr.fromString(e).popFirst(5))}static empty(){return new bt(Gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Gr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new Gr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function bT(t){return t.fields.find((e=>e.kind===2))}function Ed(t){return t.fields.filter((e=>e.kind!==2))}Cv.UNKNOWN_ID=-1;class ov{constructor(e,r){this.fieldPath=e,this.kind=r}}class Jp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Jp(0,Ms.min())}}function xF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Bt.fromTimestamp(n===1e9?new ta(r+1,0):new ta(r,n));return new Ms(a,bt.empty(),e)}function yF(t){return new Ms(t.readTime,t.key,-1)}class Ms{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ms(Bt.min(),bt.empty(),-1)}static max(){return new Ms(Bt.max(),bt.empty(),-1)}}function ZA(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=bt.comparator(t.documentKey,e.documentKey),r!==0?r:lr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t){if(t.code!==He.FAILED_PRECONDITION||t.message!==vF)throw t;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Oe(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Oe?r:Oe.resolve(r)}catch(r){return Oe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Oe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Oe.reject(r)}static resolve(e){return new Oe(((r,n)=>{r(e)}))}static reject(e){return new Oe(((r,n)=>{n(e)}))}static waitFor(e){return new Oe(((r,n)=>{let a=0,i=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++i,o&&i===a&&r()}),(d=>n(d)))})),o=!0,i===a&&r()}))}static or(e){let r=Oe.resolve(!1);for(const n of e)r=r.next((a=>a?Oe.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new Oe(((n,a)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((m=>{o[h]=m,++c,c===i&&n(o)}),(m=>a(m)))}}))}static doWhile(e,r){return new Oe(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new ko,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new _p(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=e8(n.target.error);this.V.reject(new _p(e,a))}}static open(e,r,n,a){try{return new N2(r,e.transaction(a,n))}catch(i){throw new _p(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(it("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new zre(r)}}class Au{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Au.S(Fa())===12.2&&pa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return it("SimpleDb","Removing database:",e),Od(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!jV())return!1;if(Au.v())return!0;const e=Fa(),r=Au.S(e),n=0<r&&r<10,a=wF(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(it("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const o=i.target.result;r(o)},a.onblocked=()=>{n(new _p(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const o=i.target.error;o.name==="VersionError"?n(new mt(He.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new mt(He.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new _p(e,o))},a.onupgradeneeded=i=>{it("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,a.transaction,i.oldVersion,this.version).next((()=>{it("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const c=N2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Oe.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&o<3;if(it("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function wF(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class $re{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Od(this.B.delete())}}class _p extends mt{constructor(e,r){super(He.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Fu(t){return t.name==="IndexedDbTransactionError"}class zre{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(it("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(it("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Od(n)}add(e){return it("SimpleDb","ADD",this.store.name,e,e),Od(this.store.add(e))}get(e){return Od(this.store.get(e)).next((r=>(r===void 0&&(r=null),it("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return it("SimpleDb","DELETE",this.store.name,e),Od(this.store.delete(e))}count(){return it("SimpleDb","COUNT",this.store.name),Od(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new Oe(((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}}))}{const i=this.cursor(n),o=[];return this.W(i,((c,d)=>{o.push(d)})).next((()=>o))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Oe(((a,i)=>{n.onerror=o=>{i(o.target.error)},n.onsuccess=o=>{a(o.target.result)}}))}j(e,r){it("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,o,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Oe(((n,a)=>{r.onerror=i=>{const o=e8(i.target.error);a(o)},r.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():n()})):n()}}))}W(e,r){const n=[];return new Oe(((a,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void a();const d=new $re(c),h=r(c.primaryKey,c.value,d);if(h instanceof Oe){const m=h.catch((p=>(d.done(),Oe.reject(p))));n.push(m)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Oe.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Od(t){return new Oe(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=e8(n.target.error);r(a)}}))}let lI=!1;function e8(t){const e=Au.S(Fa());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lI||(lI=!0,setTimeout((()=>{throw n}),0)),n}}return t}class Ure{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){it("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{it("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Fu(r)?it("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Vu(r)}await this.X(6e4)}))}}class Vre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return Oe.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!n.has(o))return it("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next((c=>{a-=c,n.add(o)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(a,i))).next((c=>(it("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>o.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const o=yF(i);ZA(o,n)>0&&(n=o)})),new Ms(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ns.oe=-1;function ux(t){return t==null}function Zp(t){return t===0&&1/t==-1/0}function SF(t){return typeof t=="number"&&Number.isInteger(t)&&!Zp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=cI(e)),e=Fre(t.get(r),e);return cI(e)}function Fre(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function cI(t){return t+""}function Wo(t){const e=t.length;if(Mt(e>=2),e===2)return Mt(t.charAt(0)===""&&t.charAt(1)===""),Gr.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>r)&&Et(),t.charAt(o+1)){case"":const c=t.substring(i,o);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,o),a+="\0";break;case"":a+=t.substring(i,o+1);break;default:Et()}i=o+2}return new Gr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e){return[t,$i(e)]}function NF(t,e,r){return[t,$i(e),r]}const qre={},Hre=["prefixPath","collectionGroup","readTime","documentId"],Gre=["prefixPath","collectionGroup","documentId"],Wre=["collectionGroup","readTime","prefixPath","documentId"],Kre=["canonicalId","targetId"],Qre=["targetId","path"],Xre=["path","targetId"],Yre=["collectionId","parent"],Jre=["indexId","uid"],Zre=["uid","sequenceNumber"],ene=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tne=["indexId","uid","orderedDocumentKey"],rne=["userId","collectionPath","documentId"],nne=["userId","collectionPath","largestBatchId"],ane=["userId","collectionGroup","largestBatchId"],_F=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ine=[..._F,"documentOverlays"],TF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jF=TF,t8=[...jF,"indexConfiguration","indexState","indexEntries"],sne=t8,one=[...t8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT extends bF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Ha(t,e){const r=Rt(t);return Au.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function w0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function AF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,r){this.comparator=e,this.root=r||mi.EMPTY}insert(e,r){return new Ln(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new py(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new py(this.root,e,this.comparator,!1)}getReverseIterator(){return new py(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new py(this.root,e,this.comparator,!0)}}class py{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mi{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??mi.RED,this.left=a??mi.EMPTY,this.right=i??mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new mi(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return mi.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const e=this.left.check();if(e!==this.right.check())throw Et();return e+(this.isRed()?0:1)}}mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1;mi.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(e,r,n,a,i){return this}insert(e,r,n){return new mi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new hI(this.data.getIterator())}getIteratorFrom(e){return new hI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Tn(this.comparator);return r.data=e,r}}class hI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lh(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.fields=e,e.sort(ea.comparator)}static empty(){return new as([])}unionWith(e){let r=new Tn(ea.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new as(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Hh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new EF("Invalid base64 string: "+i):i}})(e);return new va(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i})(e);return new va(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}va.EMPTY_BYTE_STRING=new va("");const lne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cc(t){if(Mt(!!t),typeof t=="string"){let e=0;const r=lne.exec(t);if(Mt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Hn(t.seconds),nanos:Hn(t.nanos)}}function Hn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mu(t){return typeof t=="string"?va.fromBase64String(t):va.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function n8(t){const e=t.mapValue.fields.__previous_value__;return r8(e)?n8(e):e}function eg(t){const e=cc(t.mapValue.fields.__local_write_time__.timestampValue);return new ta(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cne{constructor(e,r,n,a,i,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Yd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Yd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cv={nullValue:"NULL_VALUE"};function Jd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?r8(t)?4:kF(t)?9007199254740991:_2(t)?10:11:Et()}function al(t,e){if(t===e)return!0;const r=Jd(t);if(r!==Jd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eg(t).isEqual(eg(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=cc(a.timestampValue),c=cc(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return Mu(a.bytesValue).isEqual(Mu(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return Hn(a.geoPointValue.latitude)===Hn(i.geoPointValue.latitude)&&Hn(a.geoPointValue.longitude)===Hn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return Hn(a.integerValue)===Hn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=Hn(a.doubleValue),c=Hn(i.doubleValue);return o===c?Zp(o)===Zp(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Hh(t.arrayValue.values||[],e.arrayValue.values||[],al);case 10:case 11:return(function(a,i){const o=a.mapValue.fields||{},c=i.mapValue.fields||{};if(dI(o)!==dI(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!al(o[d],c[d])))return!1;return!0})(t,e);default:return Et()}}function tg(t,e){return(t.values||[]).find((r=>al(r,e)))!==void 0}function Du(t,e){if(t===e)return 0;const r=Jd(t),n=Jd(e);if(r!==n)return lr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return lr(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Hn(i.integerValue||i.doubleValue),d=Hn(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return fI(t.timestampValue,e.timestampValue);case 4:return fI(eg(t),eg(e));case 5:return lr(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Mu(i),d=Mu(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const m=lr(c[h],d[h]);if(m!==0)return m}return lr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=lr(Hn(i.latitude),Hn(o.latitude));return c!==0?c:lr(Hn(i.longitude),Hn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return mI(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var c,d,h,m;const p=i.fields||{},x=o.fields||{},y=(c=p.value)===null||c===void 0?void 0:c.arrayValue,S=(d=x.value)===null||d===void 0?void 0:d.arrayValue,N=lr(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0);return N!==0?N:mI(y,S)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===gu.mapValue&&o===gu.mapValue)return 0;if(i===gu.mapValue)return 1;if(o===gu.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let p=0;p<d.length&&p<m.length;++p){const x=lr(d[p],m[p]);if(x!==0)return x;const y=Du(c[d[p]],h[m[p]]);if(y!==0)return y}return lr(d.length,m.length)})(t.mapValue,e.mapValue);default:throw Et()}}function fI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lr(t,e);const r=cc(t),n=cc(e),a=lr(r.seconds,n.seconds);return a!==0?a:lr(r.nanos,n.nanos)}function mI(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Du(r[a],n[a]);if(i)return i}return lr(r.length,n.length)}function Gh(t){return ST(t)}function ST(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=cc(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Mu(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return bt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=ST(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const o of n)i?i=!1:a+=",",a+=`${o}:${ST(r.fields[o])}`;return a+"}"})(t.mapValue):Et()}function rg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function NT(t){return!!t&&"integerValue"in t}function ng(t){return!!t&&"arrayValue"in t}function pI(t){return!!t&&"nullValue"in t}function gI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uv(t){return!!t&&"mapValue"in t}function _2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Tp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return w0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Tp(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Tp(t.arrayValue.values[r]);return e}return Object.assign({},t)}function kF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const CF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function une(t){return"nullValue"in t?cv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?rg(Yd.empty(),bt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?_2(t)?CF:{mapValue:{}}:Et()}function dne(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?rg(Yd.empty(),bt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?CF:"mapValue"in t?_2(t)?{mapValue:{}}:gu:Et()}function xI(t,e){const r=Du(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yI(t,e){const r=Du(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!uv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tp(r)}setAll(e){let r=ea.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=Tp(o):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());uv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return al(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];uv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){w0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new gi(Tp(this.value))}}function OF(t){const e=[];return w0(t.fields,((r,n)=>{const a=new ea([r]);if(uv(n)){const i=OF(n.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)})),new as(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,r,n,a,i,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Gn(e,0,Bt.min(),Bt.min(),Bt.min(),gi.empty(),0)}static newFoundDocument(e,r,n,a){return new Gn(e,1,r,Bt.min(),n,a,0)}static newNoDocument(e,r){return new Gn(e,2,r,Bt.min(),Bt.min(),gi.empty(),0)}static newUnknownDocument(e,r){return new Gn(e,3,r,Bt.min(),Bt.min(),gi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,r){this.position=e,this.inclusive=r}}function vI(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?n=bt.comparator(bt.fromName(o.referenceValue),r.key):n=Du(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function bI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!al(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,r="asc"){this.field=e,this.dir=r}}function hne(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IF=class{};class Or extends IF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new fne(e,r,n):r==="array-contains"?new gne(e,n):r==="in"?new BF(e,n):r==="not-in"?new xne(e,n):r==="array-contains-any"?new yne(e,n):new Or(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new mne(e,n):new pne(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Du(r,this.value)):r!==null&&Jd(this.value)===Jd(r)&&this.matchesComparison(Du(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends IF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new fn(e,r)}matches(e){return Kh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kh(t){return t.op==="and"}function _T(t){return t.op==="or"}function a8(t){return RF(t)&&Kh(t)}function RF(t){for(const e of t.filters)if(e instanceof fn)return!1;return!0}function TT(t){if(t instanceof Or)return t.field.canonicalString()+t.op.toString()+Gh(t.value);if(a8(t))return t.filters.map((e=>TT(e))).join(",");{const e=t.filters.map((r=>TT(r))).join(",");return`${t.op}(${e})`}}function MF(t,e){return t instanceof Or?(function(n,a){return a instanceof Or&&n.op===a.op&&n.field.isEqual(a.field)&&al(n.value,a.value)})(t,e):t instanceof fn?(function(n,a){return a instanceof fn&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,o,c)=>i&&MF(o,a.filters[c])),!0):!1})(t,e):void Et()}function DF(t,e){const r=t.filters.concat(e);return fn.create(r,t.op)}function PF(t){return t instanceof Or?(function(r){return`${r.field.canonicalString()} ${r.op} ${Gh(r.value)}`})(t):t instanceof fn?(function(r){return r.op.toString()+" {"+r.getFilters().map(PF).join(" ,")+"}"})(t):"Filter"}class fne extends Or{constructor(e,r,n){super(e,r,n),this.key=bt.fromName(n.referenceValue)}matches(e){const r=bt.comparator(e.key,this.key);return this.matchesComparison(r)}}class mne extends Or{constructor(e,r){super(e,"in",r),this.keys=LF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class pne extends Or{constructor(e,r){super(e,"not-in",r),this.keys=LF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function LF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>bt.fromName(n.referenceValue)))}class gne extends Or{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ng(r)&&tg(r.arrayValue,this.value)}}class BF extends Or{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&tg(this.value.arrayValue,r)}}class xne extends Or{constructor(e,r){super(e,"not-in",r)}matches(e){if(tg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!tg(this.value.arrayValue,r)}}class yne extends Or{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ng(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>tg(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vne{constructor(e,r=null,n=[],a=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function jT(t,e=null,r=[],n=[],a=null,i=null,o=null){return new vne(t,e,r,n,a,i,o)}function Zd(t){const e=Rt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>TT(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),ux(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Gh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Gh(n))).join(",")),e.ue=r}return e.ue}function dx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!hne(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!MF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bI(t.startAt,e.startAt)&&bI(t.endAt,e.endAt)}function Ov(t){return bt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Iv(t,e){return t.filters.filter((r=>r instanceof Or&&r.field.isEqual(e)))}function wI(t,e,r){let n=cv,a=!0;for(const i of Iv(t,e)){let o=cv,c=!0;switch(i.op){case"<":case"<=":o=une(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,c=!1;break;case"!=":case"not-in":o=cv}xI({value:n,inclusive:a},{value:o,inclusive:c})<0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];xI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function SI(t,e,r){let n=gu,a=!0;for(const i of Iv(t,e)){let o=gu,c=!0;switch(i.op){case">=":case">":o=dne(i.value),c=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,c=!1;break;case"!=":case"not-in":o=gu}yI({value:n,inclusive:a},{value:o,inclusive:c})>0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];yI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r=null,n=[],a=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $F(t,e,r,n,a,i,o,c){return new Lf(t,e,r,n,a,i,o,c)}function hx(t){return new Lf(t)}function NI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zF(t){return t.collectionGroup!==null}function jp(t){const e=Rt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Tn(ea.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ag(i,n))})),r.has(ea.keyField().canonicalString())||e.ce.push(new ag(ea.keyField(),n))}return e.ce}function Os(t){const e=Rt(t);return e.le||(e.le=bne(e,jp(t))),e.le}function bne(t,e){if(t.limitType==="F")return jT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new ag(a.field,i)}));const r=t.endAt?new Wh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Wh(t.startAt.position,t.startAt.inclusive):null;return jT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function AT(t,e){const r=t.filters.concat([e]);return new Lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Rv(t,e,r){return new Lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function T2(t,e){return dx(Os(t),Os(e))&&t.limitType===e.limitType}function UF(t){return`${Zd(Os(t))}|lt:${t.limitType}`}function vh(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>PF(a))).join(", ")}]`),ux(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>Gh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>Gh(a))).join(",")),`Target(${n})`})(Os(t))}; limitType=${t.limitType})`}function fx(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):bt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of jp(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=vI(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,jp(n),a)||n.endAt&&!(function(o,c,d){const h=vI(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,jp(n),a))})(t,e)}function VF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FF(t){return(e,r)=>{let n=!1;for(const a of jp(t)){const i=wne(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function wne(t,e,r){const n=t.field.isKeyField()?bt.comparator(e.key,r.key):(function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?Du(d,h):Et()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Et()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){w0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return AF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sne=new Ln(bt.comparator);function ks(){return Sne}const qF=new Ln(bt.comparator);function gp(...t){let e=qF;for(const r of t)e=e.insert(r.key,r);return e}function HF(t){let e=qF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Ko(){return Ap()}function GF(){return Ap()}function Ap(){return new qu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Nne=new Ln(bt.comparator),_ne=new Tn(bt.comparator);function br(...t){let e=_ne;for(const r of t)e=e.add(r);return e}const Tne=new Tn(lr);function i8(){return Tne}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zp(e)?"-0":e}}function WF(t){return{integerValue:""+t}}function KF(t,e){return SF(e)?WF(e):s8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this._=void 0}}function jne(t,e,r){return t instanceof ig?(function(a,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&r8(i)&&(i=n8(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(r,e):t instanceof e0?XF(t,e):t instanceof Qh?YF(t,e):(function(a,i){const o=QF(a,i),c=_I(o)+_I(a.Pe);return NT(o)&&NT(a.Pe)?WF(c):s8(a.serializer,c)})(t,e)}function Ane(t,e,r){return t instanceof e0?XF(t,e):t instanceof Qh?YF(t,e):r}function QF(t,e){return t instanceof Xh?(function(n){return NT(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class ig extends j2{}class e0 extends j2{constructor(e){super(),this.elements=e}}function XF(t,e){const r=JF(e);for(const n of t.elements)r.some((a=>al(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Qh extends j2{constructor(e){super(),this.elements=e}}function YF(t,e){let r=JF(e);for(const n of t.elements)r=r.filter((a=>!al(a,n)));return{arrayValue:{values:r}}}class Xh extends j2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function _I(t){return Hn(t.integerValue||t.doubleValue)}function JF(t){return ng(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,r){this.field=e,this.transform=r}}function Ene(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof e0&&a instanceof e0||n instanceof Qh&&a instanceof Qh?Hh(n.elements,a.elements,al):n instanceof Xh&&a instanceof Xh?al(n.Pe,a.Pe):n instanceof ig&&a instanceof ig})(t.transform,e.transform)}class kne{constructor(e,r){this.version=e,this.transformResults=r}}class ga{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ga}static exists(e){return new ga(void 0,e)}static updateTime(e){return new ga(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class A2{}function ZF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mx(t.key,ga.none()):new Bf(t.key,t.data,ga.none());{const r=t.data,n=gi.empty();let a=new Tn(ea.comparator);for(let i of e.fields)if(!a.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),a=a.add(i)}return new vc(t.key,n,new as(a.toArray()),ga.none())}}function Cne(t,e,r){t instanceof Bf?(function(a,i,o){const c=a.value.clone(),d=jI(a.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof vc?(function(a,i,o){if(!dv(a.precondition,i))return void i.convertToUnknownDocument(o.version);const c=jI(a.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(eq(a)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Ep(t,e,r,n){return t instanceof Bf?(function(i,o,c,d){if(!dv(i.precondition,o))return c;const h=i.value.clone(),m=AI(i.fieldTransforms,d,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof vc?(function(i,o,c,d){if(!dv(i.precondition,o))return c;const h=AI(i.fieldTransforms,d,o),m=o.data;return m.setAll(eq(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(i,o,c){return dv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function One(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=QF(n.transform,a||null);i!=null&&(r===null&&(r=gi.empty()),r.set(n.field,i))}return r||null}function TI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Hh(n,a,((i,o)=>Ene(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bf extends A2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class vc extends A2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eq(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function jI(t,e,r){const n=new Map;Mt(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],o=i.transform,c=e.data.field(i.field);n.set(i.field,Ane(o,c,r[a]))}return n}function AI(t,e,r){const n=new Map;for(const a of t){const i=a.transform,o=r.data.field(a.field);n.set(a.field,jne(i,o,e))}return n}class mx extends A2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l8 extends A2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Cne(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Ep(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Ep(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=GF();return this.mutations.forEach((a=>{const i=e.get(a.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=r.has(a.key)?null:c;const d=ZF(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Bt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),br())}isEqual(e){return this.batchId===e.batchId&&Hh(this.mutations,e.mutations,((r,n)=>TI(r,n)))&&Hh(this.baseMutations,e.baseMutations,((r,n)=>TI(r,n)))}}class u8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Mt(e.mutations.length===n.length);let a=(function(){return Nne})();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,n[o].version);return new u8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ine{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ka,Pr;function tq(t){switch(t){default:return Et();case He.CANCELLED:case He.UNKNOWN:case He.DEADLINE_EXCEEDED:case He.RESOURCE_EXHAUSTED:case He.INTERNAL:case He.UNAVAILABLE:case He.UNAUTHENTICATED:return!1;case He.INVALID_ARGUMENT:case He.NOT_FOUND:case He.ALREADY_EXISTS:case He.PERMISSION_DENIED:case He.FAILED_PRECONDITION:case He.ABORTED:case He.OUT_OF_RANGE:case He.UNIMPLEMENTED:case He.DATA_LOSS:return!0}}function rq(t){if(t===void 0)return pa("GRPC error has no .code"),He.UNKNOWN;switch(t){case ka.OK:return He.OK;case ka.CANCELLED:return He.CANCELLED;case ka.UNKNOWN:return He.UNKNOWN;case ka.DEADLINE_EXCEEDED:return He.DEADLINE_EXCEEDED;case ka.RESOURCE_EXHAUSTED:return He.RESOURCE_EXHAUSTED;case ka.INTERNAL:return He.INTERNAL;case ka.UNAVAILABLE:return He.UNAVAILABLE;case ka.UNAUTHENTICATED:return He.UNAUTHENTICATED;case ka.INVALID_ARGUMENT:return He.INVALID_ARGUMENT;case ka.NOT_FOUND:return He.NOT_FOUND;case ka.ALREADY_EXISTS:return He.ALREADY_EXISTS;case ka.PERMISSION_DENIED:return He.PERMISSION_DENIED;case ka.FAILED_PRECONDITION:return He.FAILED_PRECONDITION;case ka.ABORTED:return He.ABORTED;case ka.OUT_OF_RANGE:return He.OUT_OF_RANGE;case ka.UNIMPLEMENTED:return He.UNIMPLEMENTED;case ka.DATA_LOSS:return He.DATA_LOSS;default:return Et()}}(Pr=ka||(ka={}))[Pr.OK=0]="OK",Pr[Pr.CANCELLED=1]="CANCELLED",Pr[Pr.UNKNOWN=2]="UNKNOWN",Pr[Pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pr[Pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pr[Pr.NOT_FOUND=5]="NOT_FOUND",Pr[Pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pr[Pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pr[Pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pr[Pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pr[Pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pr[Pr.ABORTED=10]="ABORTED",Pr[Pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pr[Pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pr[Pr.INTERNAL=13]="INTERNAL",Pr[Pr.UNAVAILABLE=14]="UNAVAILABLE",Pr[Pr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rne(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mne=new Hd([4294967295,4294967295],0);function EI(t){const e=Rne().encode(t),r=new cF;return r.update(e),new Uint8Array(r.digest())}function kI(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hd([r,n],0),new Hd([a,i],0)]}class h8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new xp(`Invalid padding: ${r}`);if(n<0)throw new xp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new xp(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new xp(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Hd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Hd.fromNumber(n)));return a.compare(Mne)===1&&(a=new Hd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=EI(e),[n,a]=kI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new h8(i,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=EI(e),[n,a]=kI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class xp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,gx.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new px(Bt.min(),a,new Ln(lr),ks(),br())}}class gx{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new gx(n,r,br(),br(),br())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class nq{constructor(e,r){this.targetId=e,this.me=r}}class aq{constructor(e,r,n=va.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class CI{constructor(){this.fe=0,this.ge=II(),this.pe=va.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=br(),r=br(),n=br();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Et()}})),new gx(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=II()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Dne{constructor(e){this.Le=e,this.Be=new Map,this.ke=ks(),this.qe=OI(),this.Qe=new Ln(lr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Et()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(Ov(i))if(n===0){const o=new bt(i.path);this.Ue(r,o,Gn.newNoDocument(o,Bt.min()))}else Mt(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let o,c;try{o=Mu(n).toUint8Array()}catch(d){if(d instanceof EF)return Xp("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new h8(o,a,i)}catch(d){return Xp(d instanceof xp?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Ov(c.target)){const d=new bt(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Gn.newNoDocument(d,e))}i.be&&(r.set(o,i.ve()),i.Ce())}}));let n=br();this.qe.forEach(((i,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const a=new px(e,r,this.Qe,this.ke,n);return this.ke=ks(),this.qe=OI(),this.Qe=new Ln(lr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new CI,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Tn(lr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||it("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new CI),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function OI(){return new Ln(bt.comparator)}function II(){return new Ln(bt.comparator)}const Pne={asc:"ASCENDING",desc:"DESCENDING"},Lne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bne={and:"AND",or:"OR"};class $ne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function ET(t,e){return t.useProto3Json||ux(e)?e:{value:e}}function Yh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zne(t,e){return Yh(t,e.toTimestamp())}function ri(t){return Mt(!!t),Bt.fromTimestamp((function(r){const n=cc(r);return new ta(n.seconds,n.nanos)})(t))}function f8(t,e){return kT(t,e).canonicalString()}function kT(t,e){const r=(function(a){return new Gr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function sq(t){const e=Gr.fromString(t);return Mt(pq(e)),e}function sg(t,e){return f8(t.databaseId,e.path)}function Zl(t,e){const r=sq(e);if(r.get(1)!==t.databaseId.projectId)throw new mt(He.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new mt(He.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new bt(cq(r))}function oq(t,e){return f8(t.databaseId,e)}function lq(t){const e=sq(t);return e.length===4?Gr.emptyPath():cq(e)}function CT(t){return new Gr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cq(t){return Mt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function RI(t,e,r){return{name:sg(t,e),fields:r.value.mapValue.fields}}function Une(t,e,r){const n=Zl(t,e.name),a=ri(e.updateTime),i=e.createTime?ri(e.createTime):Bt.min(),o=new gi({mapValue:{fields:e.fields}}),c=Gn.newFoundDocument(n,a,i,o);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Vne(t,e){return"found"in e?(function(n,a){Mt(!!a.found),a.found.name,a.found.updateTime;const i=Zl(n,a.found.name),o=ri(a.found.updateTime),c=a.found.createTime?ri(a.found.createTime):Bt.min(),d=new gi({mapValue:{fields:a.found.fields}});return Gn.newFoundDocument(i,o,c,d)})(t,e):"missing"in e?(function(n,a){Mt(!!a.missing),Mt(!!a.readTime);const i=Zl(n,a.missing),o=ri(a.readTime);return Gn.newNoDocument(i,o)})(t,e):Et()}function Fne(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Et()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,m){return h.useProto3Json?(Mt(m===void 0||typeof m=="string"),va.fromBase64String(m||"")):(Mt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),va.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const m=h.code===void 0?He.UNKNOWN:rq(h.code);return new mt(m,h.message||"")})(o);r=new aq(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Zl(t,n.document.name),i=ri(n.document.updateTime),o=n.document.createTime?ri(n.document.createTime):Bt.min(),c=new gi({mapValue:{fields:n.document.fields}}),d=Gn.newFoundDocument(a,i,o,c),h=n.targetIds||[],m=n.removedTargetIds||[];r=new hv(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Zl(t,n.document),i=n.readTime?ri(n.readTime):Bt.min(),o=Gn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new hv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Zl(t,n.document),i=n.removedTargetIds||[];r=new hv([],i,a,null)}else{if(!("filter"in e))return Et();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,o=new Ine(a,i),c=n.targetId;r=new nq(c,o)}}return r}function og(t,e){let r;if(e instanceof Bf)r={update:RI(t,e.key,e.value)};else if(e instanceof mx)r={delete:sg(t,e.key)};else if(e instanceof vc)r={update:RI(t,e.key,e.data),updateMask:Qne(e.fieldMask)};else{if(!(e instanceof l8))return Et();r={verify:sg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const c=o.transform;if(c instanceof ig)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof e0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Qh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xh)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Et()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:zne(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Et()})(t,e.precondition)),r}function OT(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?ga.updateTime(ri(i.updateTime)):i.exists!==void 0?ga.exists(i.exists):ga.none()})(e.currentDocument):ga.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(o,c){let d=null;if("setToServerValue"in c)Mt(c.setToServerValue==="REQUEST_TIME"),d=new ig;else if("appendMissingElements"in c){const m=c.appendMissingElements.values||[];d=new e0(m)}else if("removeAllFromArray"in c){const m=c.removeAllFromArray.values||[];d=new Qh(m)}else"increment"in c?d=new Xh(o,c.increment):Et();const h=ea.fromServerFormat(c.fieldPath);return new o8(h,d)})(t,a))):[];if(e.update){e.update.name;const a=Zl(t,e.update.name),i=new gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(d){const h=d.fieldPaths||[];return new as(h.map((m=>ea.fromServerFormat(m))))})(e.updateMask);return new vc(a,i,o,r,n)}return new Bf(a,i,r,n)}if(e.delete){const a=Zl(t,e.delete);return new mx(a,r)}if(e.verify){const a=Zl(t,e.verify);return new l8(a,r)}return Et()}function qne(t,e){return t&&t.length>0?(Mt(e!==void 0),t.map((r=>(function(a,i){let o=a.updateTime?ri(a.updateTime):ri(i);return o.isEqual(Bt.min())&&(o=ri(i)),new kne(o,a.transformResults||[])})(r,e)))):[]}function uq(t,e){return{documents:[oq(t,e.path)]}}function dq(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=oq(t,a);const i=(function(h){if(h.length!==0)return mq(fn.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((m=>(function(x){return{field:bh(x.field),direction:Gne(x.dir)}})(m)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=ET(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function hq(t){let e=lq(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Mt(n===1);const m=r.from[0];m.allDescendants?a=m.collectionId:e=e.child(m.collectionId)}let i=[];r.where&&(i=(function(p){const x=fq(p);return x instanceof fn&&a8(x)?x.getFilters():[x]})(r.where));let o=[];r.orderBy&&(o=(function(p){return p.map((x=>(function(S){return new ag(wh(S.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(x)))})(r.orderBy));let c=null;r.limit&&(c=(function(p){let x;return x=typeof p=="object"?p.value:p,ux(x)?null:x})(r.limit));let d=null;r.startAt&&(d=(function(p){const x=!!p.before,y=p.values||[];return new Wh(y,x)})(r.startAt));let h=null;return r.endAt&&(h=(function(p){const x=!p.before,y=p.values||[];return new Wh(y,x)})(r.endAt)),$F(e,a,o,i,c,"F",d,h)}function Hne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function fq(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=wh(r.unaryFilter.field);return Or.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=wh(r.unaryFilter.field);return Or.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wh(r.unaryFilter.field);return Or.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wh(r.unaryFilter.field);return Or.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Et()}})(t):t.fieldFilter!==void 0?(function(r){return Or.create(wh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return fn.create(r.compositeFilter.filters.map((n=>fq(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Et()}})(r.compositeFilter.op))})(t):Et()}function Gne(t){return Pne[t]}function Wne(t){return Lne[t]}function Kne(t){return Bne[t]}function bh(t){return{fieldPath:t.canonicalString()}}function wh(t){return ea.fromServerFormat(t.fieldPath)}function mq(t){return t instanceof Or?(function(r){if(r.op==="=="){if(gI(r.value))return{unaryFilter:{field:bh(r.field),op:"IS_NAN"}};if(pI(r.value))return{unaryFilter:{field:bh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(gI(r.value))return{unaryFilter:{field:bh(r.field),op:"IS_NOT_NAN"}};if(pI(r.value))return{unaryFilter:{field:bh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(r.field),op:Wne(r.op),value:r.value}}})(t):t instanceof fn?(function(r){const n=r.getFilters().map((a=>mq(a)));return n.length===1?n[0]:{compositeFilter:{op:Kne(r.op),filters:n}}})(t):Et()}function Qne(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function pq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,r,n,a,i=Bt.min(),o=Bt.min(),c=va.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Kl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Kl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(e){this.ct=e}}function Xne(t,e){let r;if(e.document)r=Une(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=bt.fromSegments(e.noDocument.path),a=r0(e.noDocument.readTime);r=Gn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et();{const n=bt.fromSegments(e.unknownDocument.path),a=r0(e.unknownDocument.version);r=Gn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new ta(a[0],a[1]);return Bt.fromTimestamp(i)})(e.readTime)),r}function MI(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Mv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,o){return{name:sg(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Yh(i,o.version.toTimestamp()),createTime:Yh(i,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:t0(e.version)};else{if(!e.isUnknownDocument())return Et();n.unknownDocument={path:r.path.toArray(),version:t0(e.version)}}return n}function Mv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function t0(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function r0(t){const e=new ta(t.seconds,t.nanoseconds);return Bt.fromTimestamp(e)}function Id(t,e){const r=(e.baseMutations||[]).map((i=>OT(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>OT(t.ct,i))),a=ta.fromMillis(e.localWriteTimeMs);return new c8(e.batchId,a,r,n)}function yp(t){const e=r0(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?r0(t.lastLimboFreeSnapshotVersion):Bt.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Mt(i.documents.length===1),Os(hx(lq(i.documents[0])))})(t.query):(function(i){return Os(hq(i))})(t.query),new Kl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,va.fromBase64String(t.resumeToken))}function xq(t,e){const r=t0(e.snapshotVersion),n=t0(e.lastLimboFreeSnapshotVersion);let a;a=Ov(e.target)?uq(t.ct,e.target):dq(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zd(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function yq(t){const e=hq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rv(e,e.limit,"L"):e}function o3(t,e){return new d8(e.largestBatchId,OT(t.ct,e.overlayMutation))}function DI(t,e){const r=e.path.lastSegment();return[t,$i(e.path.popLast()),r]}function PI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:t0(n.readTime),documentKey:$i(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne{getBundleMetadata(e,r){return LI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:r0(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return LI(e).put((function(a){return{bundleId:a.id,createTime:t0(ri(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return BI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:yq(i.bundledQuery),readTime:r0(i.readTime)}})(n)}))}saveNamedQuery(e,r){return BI(e).put((function(a){return{name:a.name,readTime:t0(ri(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function LI(t){return Ha(t,"bundles")}function BI(t){return Ha(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new E2(e,n)}getOverlay(e,r){return Km(e).get(DI(this.userId,r)).next((n=>n?o3(this.serializer,n):null))}getOverlays(e,r){const n=Ko();return Oe.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,o)=>{const c=new d8(r,o);a.push(this.ht(e,c))})),Oe.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((o=>a.add($i(o.getCollectionPath()))));const i=[];return a.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);i.push(Km(e).j("collectionPathOverlayIndex",c))})),Oe.waitFor(i)}getOverlaysForCollection(e,r,n){const a=Ko(),i=$i(r),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Km(e).U("collectionPathOverlayIndex",o).next((c=>{for(const d of c){const h=o3(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=Ko();let o;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Km(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,m)=>{const p=o3(this.serializer,h);i.size()<a||p.largestBatchId===o?(i.set(p.getKey(),p),o=p.largestBatchId):m.done()})).next((()=>i))}ht(e,r){return Km(e).put((function(a,i,o){const[c,d,h]=DI(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:og(a.ct,o.mutation)}})(this.serializer,this.userId,r))}}function Km(t){return Ha(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jne{Pt(e){return Ha(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?va.fromUint8Array(n):va.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Hn(e.integerValue));else if("doubleValue"in e){const n=Hn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Zp(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=cc(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Mu(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?kF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):_2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Et()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const o="value",c=((a=(n=i[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Hn(c)),this.Vt(o,r),this.Tt(i[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),bt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}Rd.vt=new Rd;function Zne(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function $I(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const o=Zne(255&n[i]);if(a+=o,o!==8)break}return a})(t);return Math.ceil(e/8)}class eae{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=$I(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=$I(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class tae{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class rae{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Qm{constructor(){this.jt=new eae,this.Ht=new tae(this.jt),this.Jt=new rae(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Md(this.indexId,this.documentKey,this.arrayValue,n)}}function ru(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=zI(t.arrayValue,e.arrayValue),r!==0?r:(r=zI(t.directionalValue,e.directionalValue),r!==0?r:bt.comparator(t.documentKey,e.documentKey)))}function zI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.Xt=new Tn(((r,n)=>ea.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Mt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=bT(e);if(r!==void 0&&!this.sn(r))return!1;const n=Ed(e);let a=new Set,i=0,o=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[o++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(o>=this.en.length||!this._n(this.en[o++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Tn(ea.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new ov(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new ov(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new ov(n.field,n.dir==="asc"?0:1)));return new Cv(Cv.UNKNOWN_ID,this.collectionId,r,Jp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t){var e,r;if(Mt(t instanceof Or||t instanceof fn),t instanceof Or){if(t instanceof BF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>Or.create(t.field,"==",i))))||[];return fn.create(a,"or")}return t}const n=t.filters.map((a=>vq(a)));return fn.create(n,t.op)}function nae(t){if(t.getFilters().length===0)return[];const e=MT(vq(t));return Mt(bq(e)),IT(e)||RT(e)?[e]:e.getFilters()}function IT(t){return t instanceof Or}function RT(t){return t instanceof fn&&a8(t)}function bq(t){return IT(t)||RT(t)||(function(r){if(r instanceof fn&&_T(r)){for(const n of r.getFilters())if(!IT(n)&&!RT(n))return!1;return!0}return!1})(t)}function MT(t){if(Mt(t instanceof Or||t instanceof fn),t instanceof Or)return t;if(t.filters.length===1)return MT(t.filters[0]);const e=t.filters.map((n=>MT(n)));let r=fn.create(e,t.op);return r=Dv(r),bq(r)?r:(Mt(r instanceof fn),Mt(Kh(r)),Mt(r.filters.length>1),r.filters.reduce(((n,a)=>m8(n,a))))}function m8(t,e){let r;return Mt(t instanceof Or||t instanceof fn),Mt(e instanceof Or||e instanceof fn),r=t instanceof Or?e instanceof Or?(function(a,i){return fn.create([a,i],"and")})(t,e):VI(t,e):e instanceof Or?VI(e,t):(function(a,i){if(Mt(a.filters.length>0&&i.filters.length>0),Kh(a)&&Kh(i))return DF(a,i.getFilters());const o=_T(a)?a:i,c=_T(a)?i:a,d=o.filters.map((h=>m8(h,c)));return fn.create(d,"or")})(t,e),Dv(r)}function VI(t,e){if(Kh(e))return DF(e,t.getFilters());{const r=e.filters.map((n=>m8(t,n)));return fn.create(r,"or")}}function Dv(t){if(Mt(t instanceof Or||t instanceof fn),t instanceof Or)return t;const e=t.getFilters();if(e.length===1)return Dv(e[0]);if(RF(t))return t;const r=e.map((a=>Dv(a))),n=[];return r.forEach((a=>{a instanceof Or?n.push(a):a instanceof fn&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:fn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{constructor(){this.un=new p8}addToCollectionParentIndex(e,r){return this.un.add(r),Oe.resolve()}getCollectionParents(e,r){return Oe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Oe.resolve()}deleteFieldIndex(e,r){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,r){return Oe.resolve()}getDocumentsMatchingTarget(e,r){return Oe.resolve(null)}getIndexType(e,r){return Oe.resolve(0)}getFieldIndexes(e,r){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,r){return Oe.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,r){return Oe.resolve(Ms.min())}updateCollectionGroup(e,r,n){return Oe.resolve()}updateIndexEntries(e,r){return Oe.resolve()}}class p8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Tn(Gr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Tn(Gr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Uint8Array(0);class iae{constructor(e,r){this.databaseId=r,this.cn=new p8,this.ln=new qu((n=>Zd(n)),((n,a)=>dx(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:$i(a)};return FI(e).put(i)}return Oe.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[gF(r),""],!1,!0);return FI(e).U(a).next((i=>{for(const o of i){if(o.collectionId!==r)break;n.push(Wo(o.parent))}return n}))}addFieldIndex(e,r){const n=Xm(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const o=uh(e);return i.next((c=>{o.put(PI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Xm(e),a=uh(e),i=ch(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Xm(e),n=ch(e),a=uh(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return Oe.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new UI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=ch(e);let a=!0;const i=new Map;return Oe.forEach(this.hn(r),(o=>this.Pn(e,o).next((c=>{a&&(a=!!c),i.set(o,c)})))).next((()=>{if(a){let o=br();const c=[];return Oe.forEach(i,((d,h)=>{it("IndexedDbIndexManager",`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${Zd(r)}`);const m=(function(I,L){const O=bT(L);if(O===void 0)return null;for(const R of Iv(I,O.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null})(h,d),p=(function(I,L){const O=new Map;for(const R of Ed(L))for(const A of Iv(I,R.fieldPath))switch(A.op){case"==":case"in":O.set(R.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return O.set(R.fieldPath.canonicalString(),A.value),Array.from(O.values())}return null})(h,d),x=(function(I,L){const O=[];let R=!0;for(const A of Ed(L)){const E=A.kind===0?wI(I,A.fieldPath,I.startAt):SI(I,A.fieldPath,I.startAt);O.push(E.value),R&&(R=E.inclusive)}return new Wh(O,R)})(h,d),y=(function(I,L){const O=[];let R=!0;for(const A of Ed(L)){const E=A.kind===0?SI(I,A.fieldPath,I.endAt):wI(I,A.fieldPath,I.endAt);O.push(E.value),R&&(R=E.inclusive)}return new Wh(O,R)})(h,d),S=this.In(d,h,x),N=this.In(d,h,y),w=this.Tn(d,h,p),j=this.En(d.indexId,m,S,x.inclusive,N,y.inclusive,w);return Oe.forEach(j,(k=>n.G(k,r.limit).next((I=>{I.forEach((L=>{const O=bt.fromSegments(L.documentKey);o.has(O)||(o=o.add(O),c.push(O))}))}))))})).next((()=>c))}return Oe.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=nae(fn.create(e.filters,"and")).map((n=>jT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,o,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),m=[];for(let p=0;p<d;++p){const x=r?this.dn(r[p/h]):gy,y=this.An(e,x,n[p%h],a),S=this.Rn(e,x,i[p%h],o),N=c.map((w=>this.An(e,x,w,!0)));m.push(...this.createRange(y,S,N))}return m}An(e,r,n,a){const i=new Md(e,bt.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Md(e,bt.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new UI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let o=null;for(const c of i)n.rn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,r){let n=2;const a=this.hn(r);return Oe.forEach(a,(i=>this.Pn(e,i).next((o=>{o?n!==0&&o.fields.length<(function(d){let h=new Tn(ea.comparator),m=!1;for(const p of d.filters)for(const x of p.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?m=!0:h=h.add(x.field));for(const p of d.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(m?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(o){return o.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Qm;for(const a of Ed(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const o=n.Yt(a.kind);Rd.vt.It(i,o)}return n.zt()}dn(e){const r=new Qm;return Rd.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Qm;return Rd.vt.It(rg(this.databaseId,r),n.Yt((function(i){const o=Ed(i);return o.length===0?0:o[o.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Qm);let i=0;for(const o of Ed(e)){const c=n[i++];for(const d of a)if(this.fn(r,o.fieldPath)&&ng(c))a=this.gn(a,o,c);else{const h=d.Yt(o.kind);Rd.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const o of n.arrayValue.values||[])for(const c of a){const d=new Qm;d.seed(c.zt()),Rd.vt.It(o,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof Or&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Xm(e),a=uh(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const o=[];return Oe.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{o.push((function(m,p){const x=p?new Jp(p.sequenceNumber,new Ms(r0(p.readTime),new bt(Wo(p.documentKey)),p.largestBatchId)):Jp.empty(),y=m.fields.map((([S,N])=>new ov(ea.fromServerFormat(S),N)));return new Cv(m.indexId,m.collectionGroup,y,x)})(c,d))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:lr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=Xm(e),i=uh(e);return this.yn(e).next((o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Oe.forEach(c,(d=>i.put(PI(d.indexId,this.uid,o,n))))))))}updateIndexEntries(e,r){const n=new Map;return Oe.forEach(r,((a,i)=>{const o=n.get(a.collectionGroup);return(o?Oe.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),Oe.forEach(c,(d=>this.wn(e,a,d).next((h=>{const m=this.Sn(i,d);return h.isEqual(m)?Oe.resolve():this.bn(e,i,d,h,m)})))))))}))}Dn(e,r,n,a){return ch(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return ch(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=ch(e);let i=new Tn(ru);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((o,c)=>{i=i.add(new Md(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new Tn(ru);const a=this.Vn(r,e);if(a==null)return n;const i=bT(r);if(i!=null){const o=e.data.field(i.fieldPath);if(ng(o))for(const c of o.arrayValue.values||[])n=n.add(new Md(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Md(r.indexId,e.key,gy,a));return n}bn(e,r,n,a,i){it("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return(function(d,h,m,p,x){const y=d.getIterator(),S=h.getIterator();let N=lh(y),w=lh(S);for(;N||w;){let j=!1,k=!1;if(N&&w){const I=m(N,w);I<0?k=!0:I>0&&(j=!0)}else N!=null?k=!0:j=!0;j?(p(w),w=lh(S)):k?(x(N),N=lh(y)):(N=lh(y),w=lh(S))}})(a,i,ru,(c=>{o.push(this.Dn(e,r,n,c))}),(c=>{o.push(this.vn(e,r,n,c))})),Oe.waitFor(o)}yn(e){let r=1;return uh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((o,c)=>ru(o,c))).filter(((o,c,d)=>!c||ru(o,d[c-1])!==0));const a=[];a.push(e);for(const o of n){const c=ru(o,e),d=ru(o,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(o),a.push(o.Zt());else if(d>0)break}a.push(r);const i=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const c=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,gy,[]],d=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,gy,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return ru(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(qI)}getMinOffset(e,r){return Oe.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||Et())))).next(qI)}}function FI(t){return Ha(t,"collectionParents")}function ch(t){return Ha(t,"indexEntries")}function Xm(t){return Ha(t,"indexConfiguration")}function uh(t){return Ha(t,"indexState")}function qI(t){Mt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;ZA(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Ms(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zi{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Zi(e,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wq(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],o=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:o},((m,p,x)=>(c++,x.delete())));i.push(d.next((()=>{Mt(c===1)})));const h=[];for(const m of r.mutations){const p=NF(e,m.key.path,r.batchId);i.push(a.delete(p)),h.push(m.key)}return Oe.waitFor(i).next((()=>h))}function Pv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Et();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi.DEFAULT_COLLECTION_PERCENTILE=10,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zi.DEFAULT=new Zi(41943040,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zi.DISABLED=new Zi(-1,0,0);class k2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Mt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new k2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nu(e).J({index:"userMutationsIndex",range:n},((a,i,o)=>{r=!1,o.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=Sh(e),o=nu(e);return o.add({}).next((c=>{Mt(typeof c=="number");const d=new c8(c,r,n,a),h=(function(y,S,N){const w=N.baseMutations.map((k=>og(y.ct,k))),j=N.mutations.map((k=>og(y.ct,k)));return{userId:S,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:w,mutations:j}})(this.serializer,this.userId,d),m=[];let p=new Tn(((x,y)=>lr(x.canonicalString(),y.canonicalString())));for(const x of a){const y=NF(this.userId,x.key.path,c);p=p.add(x.key.path.popLast()),m.push(o.put(h)),m.push(i.put(y,qre))}return p.forEach((x=>{m.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Oe.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,r){return nu(e).get(r).next((n=>n?(Mt(n.userId===this.userId),Id(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Oe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return nu(e).J({index:"userMutationsIndex",range:a},((o,c,d)=>{c.userId===this.userId&&(Mt(c.batchId>=n),i=Id(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return nu(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,o)=>{n=i.batchId,o.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nu(e).U("userMutationsIndex",r).next((n=>n.map((a=>Id(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=lv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return Sh(e).J({range:a},((o,c,d)=>{const[h,m,p]=o,x=Wo(m);if(h===this.userId&&r.path.isEqual(x))return nu(e).get(p).next((y=>{if(!y)throw Et();Mt(y.userId===this.userId),i.push(Id(this.serializer,y))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Tn(lr);const a=[];return r.forEach((i=>{const o=lv(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=Sh(e).J({range:c},((h,m,p)=>{const[x,y,S]=h,N=Wo(y);x===this.userId&&i.path.isEqual(N)?n=n.add(S):p.done()}));a.push(d)})),Oe.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=lv(this.userId,n),o=IDBKeyRange.lowerBound(i);let c=new Tn(lr);return Sh(e).J({range:o},((d,h,m)=>{const[p,x,y]=d,S=Wo(x);p===this.userId&&n.isPrefixOf(S)?S.length===a&&(c=c.add(y)):m.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(nu(e).get(i).next((o=>{if(o===null)throw Et();Mt(o.userId===this.userId),n.push(Id(this.serializer,o))})))})),Oe.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return wq(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Oe.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Oe.resolve();const n=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),a=[];return Sh(e).J({range:n},((i,o,c)=>{if(i[0]===this.userId){const d=Wo(i[1]);a.push(d)}else c.done()})).next((()=>{Mt(a.length===0)}))}))}containsKey(e,r){return Sq(e,this.userId,r)}Nn(e){return Nq(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Sq(t,e,r){const n=lv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let o=!1;return Sh(t).J({range:i,H:!0},((c,d,h)=>{const[m,p,x]=c;m===e&&p===a&&(o=!0),h.done()})).next((()=>o))}function nu(t){return Ha(t,"mutations")}function Sh(t){return Ha(t,"documentMutations")}function Nq(t){return Ha(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n0(0)}static kn(){return new n0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sae{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new n0(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Bt.fromTimestamp(new ta(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>dh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Mt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return dh(e).J(((o,c)=>{const d=yp(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>Oe.waitFor(i))).next((()=>a))}forEachTarget(e,r){return dh(e).J(((n,a)=>{const i=yp(a);r(i)}))}qn(e){return GI(e).get("targetGlobalKey").next((r=>(Mt(r!==null),r)))}Qn(e,r){return GI(e).put("targetGlobalKey",r)}Kn(e,r){return dh(e).put(xq(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Zd(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return dh(e).J({range:a,index:"queryTargetsIndex"},((o,c,d)=>{const h=yp(c);dx(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=hu(e);return r.forEach((o=>{const c=$i(o.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,o))})),Oe.waitFor(a)}removeMatchingKeys(e,r,n){const a=hu(e);return Oe.forEach(r,(i=>{const o=$i(i.path);return Oe.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=hu(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=hu(e);let i=br();return a.J({range:n,H:!0},((o,c,d)=>{const h=Wo(o[1]),m=new bt(h);i=i.add(m)})).next((()=>i))}containsKey(e,r){const n=$i(r.path),a=IDBKeyRange.bound([n],[gF(n)],!1,!0);let i=0;return hu(e).J({index:"documentTargetsIndex",H:!0,range:a},(([o,c],d,h)=>{o!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return dh(e).get(r).next((n=>n?yp(n):null))}}function dh(t){return Ha(t,"targets")}function GI(t){return Ha(t,"targetGlobal")}function hu(t){return Ha(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI([t,e],[r,n]){const a=lr(t,r);return a===0?lr(e,n):a}class oae{constructor(e){this.Un=e,this.buffer=new Tn(WI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();WI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class lae{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){it("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Fu(r)?it("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Vu(r)}await this.Hn(3e5)}))}}class cae{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Oe.resolve(ns.oe);const n=new oae(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(HI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,o,c,d,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),a=this.params.maximumSequenceNumbersToCollect):a=p,o=Date.now(),this.nthSequenceNumber(e,a)))).next((p=>(n=p,c=Date.now(),this.removeTargets(e,n,r)))).next((p=>(i=p,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(h=Date.now(),yh()<=Cr.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${a} in `+(c-o)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${p} documents in `+(h-d)+`ms
Total Duration: ${h-m}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:p}))))}}function uae(t,e){return new cae(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dae{constructor(e,r){this.db=e,this.garbageCollector=uae(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return xy(e,n)}removeReference(e,r,n){return xy(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return xy(e,r)}nr(e,r){return(function(a,i){let o=!1;return Nq(a).Y((c=>Sq(a,c,i).next((d=>(d&&(o=!0),Oe.resolve(!d)))))).next((()=>o))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((o,c)=>{if(c<=r){const d=this.nr(e,o).next((h=>{if(!h)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Bt.min()),hu(e).delete((function(p){return[0,$i(p.path)]})(o)))))}));a.push(d)}})).next((()=>Oe.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return xy(e,r)}tr(e,r){const n=hu(e);let a,i=ns.oe;return n.J({index:"documentTargetsIndex"},(([o,c],{path:d,sequenceNumber:h})=>{o===0?(i!==ns.oe&&r(new bt(Wo(a)),i),i=h,a=d):i=ns.oe})).next((()=>{i!==ns.oe&&r(new bt(Wo(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xy(t,e){return hu(t).put((function(n,a){return{targetId:0,path:$i(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(){this.changes=new qu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Oe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return vd(e).put(n)}removeEntry(e,r,n){return vd(e).delete((function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Mv(o),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Gn.newInvalidDocument(r);return vd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ym(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Gn.newInvalidDocument(r)};return vd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ym(r))},((a,i)=>{n={document:this.ir(r,i),size:Pv(i)}})).next((()=>n))}getEntries(e,r){let n=ks();return this._r(e,r,((a,i)=>{const o=this.ir(a,i);n=n.insert(a,o)})).next((()=>n))}ar(e,r){let n=ks(),a=new Ln(bt.comparator);return this._r(e,r,((i,o)=>{const c=this.ir(i,o);n=n.insert(i,c),a=a.insert(i,Pv(o))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return Oe.resolve();let a=new Tn(XI);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(Ym(a.first()),Ym(a.last())),o=a.getIterator();let c=o.getNext();return vd(e).J({index:"documentKeyIndex",range:i},((d,h,m)=>{const p=bt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&XI(c,p)<0;)n(c,null),c=o.getNext();c&&c.isEqual(p)&&(n(c,h),c=o.hasNext()?o.getNext():null),c?m.$(Ym(c)):m.done()})).next((()=>{for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const o=r.path,c=[o.popLast().toArray(),o.lastSegment(),Mv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vd(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let m=ks();for(const p of h){const x=this.ir(bt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);x.isFoundDocument()&&(fx(r,x)||a.has(x.key))&&(m=m.insert(x.key,x))}return m}))}getAllFromCollectionGroup(e,r,n,a){let i=ks();const o=QI(r,n),c=QI(r,Ms.max());return vd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},((d,h,m)=>{const p=this.ir(bt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(p.key,p),i.size===a&&m.done()})).next((()=>i))}newChangeBuffer(e){return new fae(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return KI(e).get("remoteDocumentGlobalKey").next((r=>(Mt(!!r),r)))}rr(e,r){return KI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Xne(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Bt.min())))return n}return Gn.newInvalidDocument(e)}}function Tq(t){return new hae(t)}class fae extends _q{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new qu((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new Tn(((i,o)=>lr(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),o.isValidDocument()){const d=MI(this.cr.serializer,o);a=a.add(i.path.popLast());const h=Pv(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=MI(this.cr.serializer,o.convertToNoDocument(Bt.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),Oe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,o)=>{this.lr.set(i,{size:o,readTime:n.get(i).readTime})})),n)))}}function KI(t){return Ha(t,"remoteDocumentGlobal")}function vd(t){return Ha(t,"remoteDocumentsV14")}function Ym(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QI(t,e){const r=e.documentKey.path.toArray();return[t,Mv(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function XI(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=lr(r[i],n[i]),a)return a;return a=lr(r.length,n.length),a||(a=lr(r[r.length-2],n[n.length-2]),a||lr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mae{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&Ep(n.mutation,a,as.empty(),ta.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,br()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=br()){const a=Ko();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let o=gp();return i.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=Ko();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,br())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let i=ks();const o=Ap(),c=(function(){return Ap()})();return r.forEach(((d,h)=>{const m=n.get(h.key);a.has(h.key)&&(m===void 0||m.mutation instanceof vc)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Ep(m.mutation,h,m.mutation.getFieldMask(),ta.now())):o.set(h.key,as.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,m)=>o.set(h,m))),r.forEach(((h,m)=>{var p;return c.set(h,new mae(m,(p=o.get(h))!==null&&p!==void 0?p:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=Ap();let a=new Ln(((o,c)=>o-c)),i=br();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let m=n.get(d)||as.empty();m=c.applyToLocalView(h,m),n.set(d,m);const p=(a.get(c.batchId)||br()).add(d);a=a.insert(c.batchId,p)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,m=d.value,p=GF();m.forEach((x=>{if(!i.has(x)){const y=ZF(r.get(x),n.get(x));y!==null&&p.set(x,y),i=i.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return Oe.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):zF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Oe.resolve(Ko());let c=-1,d=i;return o.next((h=>Oe.forEach(h,((m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(m)?Oe.resolve():this.remoteDocumentCache.getEntry(e,m).next((x=>{d=d.insert(m,x)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,br()))).next((m=>({batchId:c,changes:HF(m)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new bt(r)).next((n=>{let a=gp();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let o=gp();return this.indexManager.getCollectionParents(e,i).next((c=>Oe.forEach(c,(d=>{const h=(function(p,x){return new Lf(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((m=>{m.forEach(((p,x)=>{o=o.insert(p,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((o=>{i.forEach(((d,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,Gn.newInvalidDocument(m)))}));let c=gp();return o.forEach(((d,h)=>{const m=i.get(d);m!==void 0&&Ep(m.mutation,h,as.empty(),ta.now()),fx(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Oe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:ri(a.createTime)}})(r)),Oe.resolve()}getNamedQuery(e,r){return Oe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:yq(a.bundledQuery),readTime:ri(a.readTime)}})(r)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gae{constructor(){this.overlays=new Ln(bt.comparator),this.Ir=new Map}getOverlay(e,r){return Oe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ko();return Oe.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),Oe.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Oe.resolve()}getOverlaysForCollection(e,r,n){const a=Ko(),i=r.length+1,o=new bt(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return Oe.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new Ln(((h,m)=>h-m));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let m=i.get(h.largestBatchId);m===null&&(m=Ko(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=Ko(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>c.set(h,m))),!(c.size()>=a)););return Oe.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new d8(r,n));let i=this.Ir.get(r);i===void 0&&(i=br(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xae{constructor(){this.sessionToken=va.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.Tr=new Tn(Za.Er),this.dr=new Tn(Za.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Za(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Za(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new bt(new Gr([])),n=new Za(r,e),a=new Za(r,e+1),i=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new bt(new Gr([])),n=new Za(r,e),a=new Za(r,e+1);let i=br();return this.dr.forEachInRange([n,a],(o=>{i=i.add(o.key)})),i}containsKey(e){const r=new Za(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Za{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return bt.comparator(e.key,r.key)||lr(e.wr,r.wr)}static Ar(e,r){return lr(e.wr,r.wr)||bt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yae{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Tn(Za.Er)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new c8(i,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new Za(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Oe.resolve(o)}lookupMutationBatch(e,r){return Oe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return Oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Za(r,0),a=new Za(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);i.push(c)})),Oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Tn(lr);return r.forEach((a=>{const i=new Za(a,0),o=new Za(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(c=>{n=n.add(c.wr)}))})),Oe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;bt.isDocumentKey(i)||(i=i.child(""));const o=new Za(new bt(i),0);let c=new Tn(lr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),Oe.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Mt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Oe.forEach(r.mutations,(a=>{const i=new Za(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Za(r,0),a=this.br.firstAfterOrEqual(n);return Oe.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(e){this.Mr=e,this.docs=(function(){return new Ln(bt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Oe.resolve(n?n.document.mutableCopy():Gn.newInvalidDocument(r))}getEntries(e,r){let n=ks();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Gn.newInvalidDocument(a))})),Oe.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=ks();const o=r.path,c=new bt(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||ZA(yF(m),n)<=0||(a.has(m.key)||fx(r,m))&&(i=i.insert(m.key,m.mutableCopy()))}return Oe.resolve(i)}getAllFromCollectionGroup(e,r,n,a){Et()}Or(e,r){return Oe.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new bae(this)}getSize(e){return Oe.resolve(this.size)}}class bae extends _q{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),Oe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{constructor(e){this.persistence=e,this.Nr=new qu((r=>Zd(r)),dx),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new g8,this.targetCount=0,this.kr=n0.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Oe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new n0(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Oe.resolve()}updateTargetData(e,r){return this.Kn(r),Oe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),Oe.waitFor(i).next((()=>a))}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Oe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Oe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((o=>{i.push(a.markPotentiallyOrphaned(e,o))})),Oe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Oe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Oe.resolve(n)}containsKey(e,r){return Oe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ns(0),this.Kr=!1,this.Kr=!0,this.$r=new xae,this.referenceDelegate=e(this),this.Ur=new wae(this),this.indexManager=new aae,this.remoteDocumentCache=(function(a){return new vae(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new gq(r),this.Gr=new pae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new gae,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new yae(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){it("MemoryPersistence","Starting transaction:",e);const a=new Sae(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return Oe.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class Sae extends bF{constructor(e){super(),this.currentSequenceNumber=e}}class C2{constructor(e){this.persistence=e,this.Jr=new g8,this.Yr=null}static Zr(e){return new C2(e)}get Xr(){if(this.Yr)return this.Yr;throw Et()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Oe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Oe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Oe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Xr,(n=>{const a=bt.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Bt.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Oe.or([()=>Oe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nae{constructor(e){this.serializer=e}O(e,r,n,a){const i=new N2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uI,{unique:!0}),d.createObjectStore("documentMutations")})(e),YI(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let o=Oe.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),YI(e)),o=o.next((()=>(function(d){const h=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)})(i)))),n<4&&a>=4&&(n!==0&&(o=o.next((()=>(function(d,h){return h.store("mutations").U().next((m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uI,{unique:!0});const p=h.store("mutations"),x=m.map((y=>p.put(y)));return Oe.waitFor(x)}))})(e,i)))),o=o.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(o=o.next((()=>this.ni(i)))),n<6&&a>=6&&(o=o.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(o=o.next((()=>this.ii(i)))),n<8&&a>=8&&(o=o.next((()=>this.si(e,i)))),n<9&&a>=9&&(o=o.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(o=o.next((()=>this.oi(i)))),n<11&&a>=11&&(o=o.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(o=o.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:rne});h.createIndex("collectionPathOverlayIndex",nne,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",ane,{unique:!1})})(e)}))),n<13&&a>=13&&(o=o.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Hre});h.createIndex("documentKeyIndex",Gre),h.createIndex("collectionGroupIndex",Wre)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(o=o.next((()=>this.ai(e,i)))),n<15&&a>=15&&(o=o.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Jre}).createIndex("sequenceNumberIndex",Zre,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:ene}).createIndex("documentKeyIndex",tne,{unique:!1})})(e)))),n<16&&a>=16&&(o=o.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(o=o.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=Pv(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>Oe.forEach(a,(i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next((c=>Oe.forEach(c,(d=>{Mt(d.userId===i.userId);const h=Id(this.serializer,d);return wq(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((o,c)=>{const d=new Gr(o),h=(function(p){return[0,$i(p)]})(d);i.push(r.get(h).next((m=>m?Oe.resolve():(p=>r.put({targetId:0,path:$i(p),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>Oe.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:Yre});const n=r.store("collectionParents"),a=new p8,i=o=>{if(a.add(o)){const c=o.lastSegment(),d=o.popLast();return n.put({collectionId:c,parent:$i(d)})}};return r.store("remoteDocuments").J({H:!0},((o,c)=>{const d=new Gr(o);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([o,c,d],h)=>{const m=Wo(c);return i(m.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=yp(a),o=xq(this.serializer,i);return r.put(o)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,o)=>{const c=r.store("remoteDocumentsV14"),d=(function(p){return p.document?new bt(Gr.fromString(p.document.name).popFirst(5)):p.noDocument?bt.fromSegments(p.noDocument.path):p.unknownDocument?bt.fromSegments(p.unknownDocument.path):Et()})(o).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(c.put(h))})).next((()=>Oe.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=Tq(this.serializer),i=new Aq(C2.Zr,this.serializer.ct);return n.U().next((o=>{const c=new Map;return o.forEach((d=>{var h;let m=(h=c.get(d.userId))!==null&&h!==void 0?h:br();Id(this.serializer,d).keys().forEach((p=>m=m.add(p))),c.set(d.userId,m)})),Oe.forEach(c,((d,h)=>{const m=new Ti(h),p=E2.lt(this.serializer,m),x=i.getIndexManager(m),y=k2.lt(m,this.serializer,x,i.referenceDelegate);return new jq(a,y,p,x).recalculateAndSaveOverlaysForDocumentKeys(new wT(r,ns.oe),d).next()}))}))}}function YI(t){t.createObjectStore("targetDocuments",{keyPath:Qre}).createIndex("documentTargetsIndex",Xre,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kre,{unique:!0}),t.createObjectStore("targetGlobal")}const l3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class x8{constructor(e,r,n,a,i,o,c,d,h,m,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=o,this.document=c,this.ci=h,this.li=m,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=x=>Promise.resolve(),!x8.D())throw new mt(He.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dae(this,a),this.Ai=r+"main",this.serializer=new gq(d),this.Ri=new Au(this.Ai,this.hi,new Nae(this.serializer)),this.$r=new Jne,this.Ur=new sae(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Tq(this.serializer),this.Gr=new Yne,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,m===!1&&pa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new mt(He.FAILED_PRECONDITION,l3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new ns(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>yy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Fu(e))return it("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return it("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Jm(e).get("owner").next((r=>Oe.resolve(this.vi(r))))}Ci(e){return yy(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Ha(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),o=a.filter((c=>i.indexOf(c)===-1));return Oe.forEach(o,(c=>n.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Oe.resolve(!0):Jm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new mt(He.FAILED_PRECONDITION,l3);return!1}}return!(!this.networkEnabled||!this.inForeground)||yy(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||o&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&it("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new wT(e,ns.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>yy(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return k2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iae(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return E2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){it("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?one:d===16?sne:d===15?t8:d===14?jF:d===13?TF:d===12?ine:d===11?_F:void Et()})(this.hi);let o;return this.Ri.runTransaction(e,a,i,(c=>(o=new wT(c,this.Qr?this.Qr.next():ns.oe),r==="readwrite-primary"?this.wi(o).next((d=>!!d||this.Si(o))).next((d=>{if(!d)throw pa(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new mt(He.FAILED_PRECONDITION,vF);return n(o)})).next((d=>this.Di(o).next((()=>d)))):this.Ki(o).next((()=>n(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Ki(e){return Jm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new mt(He.FAILED_PRECONDITION,l3)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jm(e).put("owner",r)}static D(){return Au.D()}bi(e){const r=Jm(e);return r.get("owner").next((n=>this.vi(n)?(it("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Oe.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(pa(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;TV()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return it("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return pa("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){pa("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jm(t){return Ha(t,"owner")}function yy(t){return Ha(t,"clientMetadata")}function Eq(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=br(),a=br();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new y8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return TV()?8:wF(Fa())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new _ae;return this.Xi(e,r,o).next((c=>{if(i.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(yh()<=Cr.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",vh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Oe.resolve()):(yh()<=Cr.DEBUG&&it("QueryEngine","Query:",vh(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(yh()<=Cr.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",vh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Os(r))):Oe.resolve())}Yi(e,r){if(NI(r))return Oe.resolve(null);let n=Os(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=Rv(r,null,"F"),n=Os(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=br(...i);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,Rv(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return NI(r)||a.isEqual(Bt.min())?Oe.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(r,i);return this.ns(r,o,n,a)?Oe.resolve(null):(yh()<=Cr.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),vh(r)),this.rs(e,o,r,xF(a,-1)).next((c=>c)))}))}ts(e,r){let n=new Tn(FF(e));return r.forEach(((a,i)=>{fx(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return yh()<=Cr.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",vh(r)),this.Ji.getDocumentsMatchingQuery(e,r,Ms.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tae{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Ln(lr),this._s=new qu((i=>Zd(i)),dx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function Cq(t,e,r,n){return new Tae(t,e,r,n)}async function Oq(t,e){const r=Rt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],c=[];let d=br();for(const h of a){o.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of i){c.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function jae(t,e){const r=Rt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,m){const p=h.batch,x=p.keys();let y=Oe.resolve();return x.forEach((S=>{y=y.next((()=>m.getEntry(d,S))).next((N=>{const w=h.docVersions.get(S);Mt(w!==null),N.version.compareTo(w)<0&&(p.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),m.addEntry(N)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(d,p)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=br();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function Iq(t){const e=Rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Aae(t,e){const r=Rt(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((m,p)=>{const x=a.get(p);if(!x)return;c.push(r.Ur.removeMatchingKeys(i,m.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(i,m.addedDocuments,p))));let y=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(va.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):m.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(m.resumeToken,n)),a=a.insert(p,y),(function(N,w,j){return N.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(x,y,m)&&c.push(r.Ur.updateTargetData(i,y))}));let d=ks(),h=br();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,m))})),c.push(Eae(i,o,e.documentUpdates).next((m=>{d=m.Ps,h=m.Is}))),!n.isEqual(Bt.min())){const m=r.Ur.getLastRemoteSnapshotVersion(i).next((p=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(m)}return Oe.waitFor(c).next((()=>o.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function Eae(t,e,r){let n=br(),a=br();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let o=ks();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Bt.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):it("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function kae(t,e){const r=Rt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function Lv(t,e){const r=Rt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,Oe.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new Kl(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Jh(t,e,r){const n=Rt(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!Fu(o))throw o;it("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function DT(t,e,r){const n=Rt(t);let a=Bt.min(),i=br();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,m){const p=Rt(d),x=p._s.get(m);return x!==void 0?Oe.resolve(p.os.get(x)):p.Ur.getTargetData(h,m)})(n,o,Os(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Bt.min(),r?i:br()))).next((c=>(Dq(n,VF(e),c),{documents:c,Ts:i})))))}function Rq(t,e){const r=Rt(t),n=Rt(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((o=>o?o.target:null))))}function Mq(t,e){const r=Rt(t),n=r.us.get(e)||Bt.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,xF(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(Dq(r,e,a),a)))}function Dq(t,e,r){let n=t.us.get(e)||Bt.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function JI(t,e){return`firestore_clients_${t}_${e}`}function ZI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function c3(t,e){return`firestore_targets_${t}_${e}`}class Bv{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,o=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return o&&a.error&&(o=typeof a.error.message=="string"&&typeof a.error.code=="string",o&&(i=new mt(a.error.code,a.error.message))),o?new Bv(e,r,a.state,i):(pa("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kp{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new mt(n.error.code,n.error.message))),i?new kp(e,n.state,a):(pa("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $v{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=i8();for(let o=0;a&&o<n.activeTargetIds.length;++o)a=SF(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return a?new $v(e,i):(pa("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class v8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new v8(r.clientId,r.onlineState):(pa("SharedClientState",`Failed to parse online state: ${e}`),null)}}class PT{constructor(){this.activeTargetIds=i8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u3{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ln(lr),this.started=!1,this.bs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=JI(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new PT),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(JI(this.persistenceKey,n));if(a){const i=$v.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(c3(this.persistenceKey,e));if(a){const i=kp.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(c3(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return it("SharedClientState","READ",e,r),r}setItem(e,r){it("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){it("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(it("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void pa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let o=ns.oe;if(i!=null)try{const c=JSON.parse(i);Mt(typeof c=="number"),o=c}catch(c){pa("SharedClientState","Failed to read sequence number from WebStorage",c)}return o})(r.newValue);n!==ns.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new Bv(this.currentUser,e,r,n),i=ZI(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=ZI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=c3(this.persistenceKey,e),i=new kp(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return $v.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return Bv.Rs(new Ti(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return kp.Rs(a,r)}Ls(e){return v8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);it("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),o=[],c=[];return i.forEach((d=>{a.has(d)||o.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(o,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=i8();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class Pq{constructor(){this.so=new PT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new PT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cae{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy=null;function d3(){return vy===null?vy=(function(){return 268435456+Math.round(2147483648*Math.random())})():vy++,"0x"+vy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="WebChannelConnection";class Rae extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,o){const c=d3(),d=this.xo(r,n.toUriEncodedString());it("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(r,d,h,a).then((m=>(it("RestConnection",`Received RPC '${r}' ${c}: `,m),m)),(m=>{throw Xp("RestConnection",`RPC '${r}' ${c} failed with error: `,m,"url: ",d,"request:",a),m}))}Lo(r,n,a,i,o,c){return this.Mo(r,n,a,i,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pf})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>r[o]=i)),a&&a.headers.forEach(((i,o)=>r[o]=i))}xo(r,n){const a=Oae[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=d3();return new Promise(((o,c)=>{const d=new uF;d.setWithCredentials(!0),d.listenOnce(dF.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case sv.NO_ERROR:const m=d.getResponseJson();it(Ni,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case sv.TIMEOUT:it(Ni,`RPC '${e}' ${i} timed out`),c(new mt(He.DEADLINE_EXCEEDED,"Request time out"));break;case sv.HTTP_ERROR:const p=d.getStatus();if(it(Ni,`RPC '${e}' ${i} failed with status:`,p,"response text:",d.getResponseText()),p>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x==null?void 0:x.error;if(y&&y.status&&y.message){const S=(function(w){const j=w.toLowerCase().replace(/_/g,"-");return Object.values(He).indexOf(j)>=0?j:He.UNKNOWN})(y.status);c(new mt(S,y.message))}else c(new mt(He.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new mt(He.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{it(Ni,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);it(Ni,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=d3(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mF(),c=fF(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const m=i.join("");it(Ni,`Creating RPC '${e}' stream ${a}: ${m}`,d);const p=o.createWebChannel(m,d);let x=!1,y=!1;const S=new Iae({Io:w=>{y?it(Ni,`Not sending because RPC '${e}' stream ${a} is closed:`,w):(x||(it(Ni,`Opening RPC '${e}' stream ${a} transport.`),p.open(),x=!0),it(Ni,`RPC '${e}' stream ${a} sending:`,w),p.send(w))},To:()=>p.close()}),N=(w,j,k)=>{w.listen(j,(I=>{try{k(I)}catch(L){setTimeout((()=>{throw L}),0)}}))};return N(p,pp.EventType.OPEN,(()=>{y||(it(Ni,`RPC '${e}' stream ${a} transport opened.`),S.yo())})),N(p,pp.EventType.CLOSE,(()=>{y||(y=!0,it(Ni,`RPC '${e}' stream ${a} transport closed`),S.So())})),N(p,pp.EventType.ERROR,(w=>{y||(y=!0,Xp(Ni,`RPC '${e}' stream ${a} transport errored:`,w),S.So(new mt(He.UNAVAILABLE,"The operation could not be completed")))})),N(p,pp.EventType.MESSAGE,(w=>{var j;if(!y){const k=w.data[0];Mt(!!k);const I=k,L=I.error||((j=I[0])===null||j===void 0?void 0:j.error);if(L){it(Ni,`RPC '${e}' stream ${a} received error:`,L);const O=L.status;let R=(function(C){const U=ka[C];if(U!==void 0)return rq(U)})(O),A=L.message;R===void 0&&(R=He.INTERNAL,A="Unknown error status: "+O+" with message "+L.message),y=!0,S.So(new mt(R,A)),p.close()}else it(Ni,`RPC '${e}' stream ${a} received:`,k),S.bo(k)}})),N(c,hF.STAT_EVENT,(w=>{w.stat===vT.PROXY?it(Ni,`RPC '${e}' stream ${a} detected buffering proxy`):w.stat===vT.NOPROXY&&it(Ni,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{S.wo()}),0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(){return typeof window<"u"?window:null}function fv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t){return new $ne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&it("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,r,n,a,i,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new b8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===He.RESOURCE_EXHAUSTED?(pa(r.toString()),pa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===He.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new mt(He.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return it("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mae extends Bq{constructor(e,r,n,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Fne(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Bt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Bt.min():o.readTime?ri(o.readTime):Bt.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=CT(this.serializer),r.addTarget=(function(i,o){let c;const d=o.target;if(c=Ov(d)?{documents:uq(i,d)}:{query:dq(i,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=iq(i,o.resumeToken);const h=ET(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Bt.min())>0){c.readTime=Yh(i,o.snapshotVersion.toTimestamp());const h=ET(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=Hne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=CT(this.serializer),r.removeTarget=e,this.a_(r)}}class Dae extends Bq{constructor(e,r,n,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=qne(e.writeResults,e.commitTime),n=ri(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=CT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>og(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new mt(He.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,kT(r,n),a,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new mt(He.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,kT(r,n),a,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mt(He.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Lae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pa(r),this.D_=!1):it("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{n.enqueueAndForget((async()=>{S0(this)&&(it("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Rt(d);h.L_.add(4),await xx(h),h.q_.set("Unknown"),h.L_.delete(4),await I2(h)})(this))}))})),this.q_=new Lae(n,a)}}async function I2(t){if(S0(t))for(const e of t.B_)await e(!0)}async function xx(t){for(const e of t.B_)await e(!1)}function R2(t,e){const r=Rt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),N8(r)?S8(r):zf(r).r_()&&w8(r,e))}function Zh(t,e){const r=Rt(t),n=zf(r);r.N_.delete(e),n.r_()&&$q(r,e),r.N_.size===0&&(n.r_()?n.o_():S0(r)&&r.q_.set("Unknown"))}function w8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Bt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}zf(t).A_(e)}function $q(t,e){t.Q_.xe(e),zf(t).R_(e)}function S8(t){t.Q_=new Dne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zf(t).start(),t.q_.v_()}function N8(t){return S0(t)&&!zf(t).n_()&&t.N_.size>0}function S0(t){return Rt(t).L_.size===0}function zq(t){t.Q_=void 0}async function $ae(t){t.q_.set("Online")}async function zae(t){t.N_.forEach(((e,r)=>{w8(t,e)}))}async function Uae(t,e){zq(t),N8(t)?(t.q_.M_(e),S8(t)):t.q_.set("Unknown")}async function Vae(t,e,r){if(t.q_.set("Online"),e instanceof aq&&e.state===2&&e.cause)try{await(async function(a,i){const o=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){it("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await zv(t,n)}else if(e instanceof hv?t.Q_.Ke(e):e instanceof nq?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Bt.min()))try{const n=await Iq(t.localStore);r.compareTo(n)>=0&&await(function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=i.N_.get(h);m&&i.N_.set(h,m.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const m=i.N_.get(d);if(!m)return;i.N_.set(d,m.withResumeToken(va.EMPTY_BYTE_STRING,m.snapshotVersion)),$q(i,d);const p=new Kl(m.target,d,h,m.sequenceNumber);w8(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){it("RemoteStore","Failed to raise snapshot:",n),await zv(t,n)}}async function zv(t,e,r){if(!Fu(e))throw e;t.L_.add(1),await xx(t),t.q_.set("Offline"),r||(r=()=>Iq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{it("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await I2(t)}))}function Uq(t,e){return e().catch((r=>zv(t,r,e)))}async function $f(t){const e=Rt(t),r=Pu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Fae(e);)try{const a=await kae(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,qae(e,a)}catch(a){await zv(e,a)}Vq(e)&&Fq(e)}function Fae(t){return S0(t)&&t.O_.length<10}function qae(t,e){t.O_.push(e);const r=Pu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Vq(t){return S0(t)&&!Pu(t).n_()&&t.O_.length>0}function Fq(t){Pu(t).start()}async function Hae(t){Pu(t).p_()}async function Gae(t){const e=Pu(t);for(const r of t.O_)e.m_(r.mutations)}async function Wae(t,e,r){const n=t.O_.shift(),a=u8.from(n,e,r);await Uq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await $f(t)}async function Kae(t,e){e&&Pu(t).V_&&await(async function(n,a){if((function(o){return tq(o)&&o!==He.ABORTED})(a.code)){const i=n.O_.shift();Pu(n).s_(),await Uq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await $f(n)}})(t,e),Vq(t)&&Fq(t)}async function tR(t,e){const r=Rt(t);r.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const n=S0(r);r.L_.add(3),await xx(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await I2(r)}async function LT(t,e){const r=Rt(t);e?(r.L_.delete(2),await I2(r)):e||(r.L_.add(2),await xx(r),r.q_.set("Unknown"))}function zf(t){return t.K_||(t.K_=(function(r,n,a){const i=Rt(r);return i.w_(),new Mae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:$ae.bind(null,t),Ro:zae.bind(null,t),mo:Uae.bind(null,t),d_:Vae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),N8(t)?S8(t):t.q_.set("Unknown")):(await t.K_.stop(),zq(t))}))),t.K_}function Pu(t){return t.U_||(t.U_=(function(r,n,a){const i=Rt(r);return i.w_(),new Dae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hae.bind(null,t),mo:Kae.bind(null,t),f_:Gae.bind(null,t),g_:Wae.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await $f(t)):(await t.U_.stop(),t.O_.length>0&&(it("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const o=Date.now()+n,c=new _8(e,r,o,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(He.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T8(t,e){if(pa("AsyncQueue",`${e}: ${t}`),Fu(t))return new mt(He.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.comparator=e?(r,n)=>e(r,n)||bt.comparator(r.key,n.key):(r,n)=>bt.comparator(r.key,n.key),this.keyedMap=gp(),this.sortedSet=new Ln(this.comparator)}static emptySet(e){return new Oh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Oh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Oh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.W_=new Ln(bt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Et():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class ef{constructor(e,r,n,a,i,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new ef(e,r,Oh.emptySet(r),o,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&T2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Xae{constructor(){this.queries=nR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Rt(r),i=a.queries;a.queries=nR(),i.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new mt(He.ABORTED,"Firestore shutting down"))}}function nR(){return new qu((t=>UF(t)),T2)}async function j8(t,e){const r=Rt(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new Qae,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=T8(o,`Initialization of query '${vh(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&E8(r)}async function A8(t,e){const r=Rt(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Yae(t,e){const r=Rt(t);let n=!1;for(const a of e){const i=a.query,o=r.queries.get(i);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&E8(r)}function Jae(t,e,r){const n=Rt(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function E8(t){t.Y_.forEach((e=>{e.next()}))}var BT,aR;(aR=BT||(BT={})).ea="default",aR.Cache="cache";class k8{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new ef(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ef.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==BT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e){this.key=e}}class Hq{constructor(e){this.key=e}}class Zae{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=br(),this.mutatedKeys=br(),this.Aa=FF(e),this.Ra=new Oh(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new rR,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((m,p)=>{const x=a.get(m),y=fx(this.query,p)?p:null,S=!!x&&this.mutatedKeys.has(x.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;x&&y?x.data.isEqual(y.data)?S!==N&&(n.track({type:3,doc:y}),w=!0):this.ga(x,y)||(n.track({type:2,doc:y}),w=!0,(d&&this.Aa(y,d)>0||h&&this.Aa(y,h)<0)&&(c=!0)):!x&&y?(n.track({type:0,doc:y}),w=!0):x&&!y&&(n.track({type:1,doc:x}),w=!0,(d||h)&&(c=!0)),w&&(y?(o=o.add(y),i=N?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),n.track({type:1,doc:m})}return{Ra:o,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((m,p)=>(function(y,S){const N=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return N(y)-N(S)})(m.type,p.type)||this.Aa(m.doc,p.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new ef(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=br(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new Hq(n))})),this.da.forEach((n=>{e.has(n)||r.push(new qq(n))})),r}ba(e){this.Ta=e.Ts,this.da=br();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ef.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class eie{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class tie{constructor(e){this.key=e,this.va=!1}}class rie{constructor(e,r,n,a,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new qu((c=>UF(c)),T2),this.Ma=new Map,this.xa=new Set,this.Oa=new Ln(bt.comparator),this.Na=new Map,this.La=new g8,this.Ba={},this.ka=new Map,this.qa=n0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nie(t,e,r=!0){const n=M2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await Gq(n,e,r,!0),a}async function aie(t,e){const r=M2(t);await Gq(r,e,!0,!1)}async function Gq(t,e,r,n){const a=await Lv(t.localStore,Os(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await C8(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&R2(t.remoteStore,a),c}async function C8(t,e,r,n,a){t.Ka=(p,x,y)=>(async function(N,w,j,k){let I=w.view.ma(j);I.ns&&(I=await DT(N.localStore,w.query,!1).then((({documents:A})=>w.view.ma(A,I))));const L=k&&k.targetChanges.get(w.targetId),O=k&&k.targetMismatches.get(w.targetId)!=null,R=w.view.applyChanges(I,N.isPrimaryClient,L,O);return $T(N,w.targetId,R.wa),R.snapshot})(t,p,x,y);const i=await DT(t.localStore,e,!0),o=new Zae(e,i.Ts),c=o.ma(i.documents),d=gx.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);$T(t,r,h.wa);const m=new eie(e,r,o);return t.Fa.set(e,m),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function iie(t,e,r){const n=Rt(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((o=>!T2(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Jh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&Zh(n.remoteStore,a.targetId),tf(n,a.targetId)})).catch(Vu)):(tf(n,a.targetId),await Jh(n.localStore,a.targetId,!0))}async function sie(t,e){const r=Rt(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Zh(r.remoteStore,n.targetId))}async function oie(t,e,r){const n=M8(t);try{const a=await(function(o,c){const d=Rt(o),h=ta.now(),m=c.reduce(((y,S)=>y.add(S.key)),br());let p,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let S=ks(),N=br();return d.cs.getEntries(y,m).next((w=>{S=w,S.forEach(((j,k)=>{k.isValidDocument()||(N=N.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(y,S))).next((w=>{p=w;const j=[];for(const k of c){const I=One(k,p.get(k.key).overlayedDocument);I!=null&&j.push(new vc(k.key,I,OF(I.value.mapValue),ga.exists(!0)))}return d.mutationQueue.addMutationBatch(y,h,j,c)})).next((w=>{x=w;const j=w.applyToLocalDocumentSet(p,N);return d.documentOverlayCache.saveOverlays(y,w.batchId,j)}))})).then((()=>({batchId:x.batchId,changes:HF(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ln(lr)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await Hu(n,a.changes),await $f(n.remoteStore)}catch(a){const i=T8(a,"Failed to persist write");r.reject(i)}}async function Wq(t,e){const r=Rt(t);try{const n=await Aae(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const o=r.Na.get(i);o&&(Mt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Mt(o.va):a.removedDocuments.size>0&&(Mt(o.va),o.va=!1))})),await Hu(r,n,e)}catch(n){await Vu(n)}}function iR(t,e,r){const n=Rt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=Rt(o);d.onlineState=c;let h=!1;d.queries.forEach(((m,p)=>{for(const x of p.j_)x.Z_(c)&&(h=!0)})),h&&E8(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function lie(t,e,r){const n=Rt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let o=new Ln(bt.comparator);o=o.insert(i,Gn.newNoDocument(i,Bt.min()));const c=br().add(i),d=new px(Bt.min(),new Map,new Ln(lr),o,c);await Wq(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),R8(n)}else await Jh(n.localStore,e,!1).then((()=>tf(n,e,r))).catch(Vu)}async function cie(t,e){const r=Rt(t),n=e.batch.batchId;try{const a=await jae(r.localStore,e);I8(r,n,null),O8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Hu(r,a)}catch(a){await Vu(a)}}async function uie(t,e,r){const n=Rt(t);try{const a=await(function(o,c){const d=Rt(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,c).next((p=>(Mt(p!==null),m=p.keys(),d.mutationQueue.removeMutationBatch(h,p)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(n.localStore,e);I8(n,e,r),O8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Hu(n,a)}catch(a){await Vu(a)}}function O8(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function I8(t,e,r){const n=Rt(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function tf(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||Kq(t,n)}))}function Kq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Zh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),R8(t))}function $T(t,e,r){for(const n of r)n instanceof qq?(t.La.addReference(n.key,e),die(t,n)):n instanceof Hq?(it("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Kq(t,n.key)):Et()}function die(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(it("SyncEngine","New document in limbo: "+r),t.xa.add(n),R8(t))}function R8(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new bt(Gr.fromString(e)),n=t.qa.next();t.Na.set(n,new tie(r)),t.Oa=t.Oa.insert(r,n),R2(t.remoteStore,new Kl(Os(hx(r.path)),n,"TargetPurposeLimboResolution",ns.oe))}}async function Hu(t,e,r){const n=Rt(t),a=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var m;if((h||r)&&n.isPrimaryClient){const p=h?!h.fromCache:(m=r==null?void 0:r.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(h){a.push(h);const p=y8.Wi(d.targetId,h);i.push(p)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const m=Rt(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>Oe.forEach(h,(x=>Oe.forEach(x.$i,(y=>m.persistence.referenceDelegate.addReference(p,x.targetId,y))).next((()=>Oe.forEach(x.Ui,(y=>m.persistence.referenceDelegate.removeReference(p,x.targetId,y)))))))))}catch(p){if(!Fu(p))throw p;it("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const x=p.targetId;if(!p.fromCache){const y=m.os.get(x),S=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(S);m.os=m.os.insert(x,N)}}})(n.localStore,i))}async function hie(t,e){const r=Rt(t);if(!r.currentUser.isEqual(e)){it("SyncEngine","User change. New user:",e.toKey());const n=await Oq(r.localStore,e);r.currentUser=e,(function(i,o){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new mt(He.CANCELLED,o))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Hu(r,n.hs)}}function fie(t,e){const r=Rt(t),n=r.Na.get(e);if(n&&n.va)return br().add(n.key);{let a=br();const i=r.Ma.get(e);if(!i)return a;for(const o of i){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}async function mie(t,e){const r=Rt(t),n=await DT(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&$T(r,e.targetId,a.wa),a}async function pie(t,e){const r=Rt(t);return Mq(r.localStore,e).then((n=>Hu(r,n)))}async function gie(t,e,r,n){const a=Rt(t),i=await(function(c,d){const h=Rt(c),m=Rt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(p=>m.Mn(p,d).next((x=>x?h.localDocuments.getDocuments(p,x):Oe.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await $f(a.remoteStore):r==="acknowledged"||r==="rejected"?(I8(a,e,n||null),O8(a,e),(function(c,d){Rt(Rt(c).mutationQueue).On(d)})(a.localStore,e)):Et(),await Hu(a,i)):it("SyncEngine","Cannot apply mutation batch with id: "+e)}async function xie(t,e){const r=Rt(t);if(M2(r),M8(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await sR(r,n.toArray());r.Qa=!0,await LT(r.remoteStore,!0);for(const i of a)R2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,o)=>{r.sharedClientState.isLocalQueryTarget(o)?n.push(o):a=a.then((()=>(tf(r,o),Jh(r.localStore,o,!0)))),Zh(r.remoteStore,o)})),await a,await sR(r,n),(function(o){const c=Rt(o);c.Na.forEach(((d,h)=>{Zh(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new Ln(bt.comparator)})(r),r.Qa=!1,await LT(r.remoteStore,!1)}}async function sR(t,e,r){const n=Rt(t),a=[],i=[];for(const o of e){let c;const d=n.Ma.get(o);if(d&&d.length!==0){c=await Lv(n.localStore,Os(d[0]));for(const h of d){const m=n.Fa.get(h),p=await mie(n,m);p.snapshot&&i.push(p.snapshot)}}else{const h=await Rq(n.localStore,o);c=await Lv(n.localStore,h),await C8(n,Qq(h),o,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function Qq(t){return $F(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yie(t){return(function(r){return Rt(Rt(r).persistence).Qi()})(Rt(t).localStore)}async function vie(t,e,r,n){const a=Rt(t);if(a.Qa)return void it("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const o=await Mq(a.localStore,VF(i[0])),c=px.createSynthesizedRemoteEventForCurrentChange(e,r==="current",va.EMPTY_BYTE_STRING);await Hu(a,o,c);break}case"rejected":await Jh(a.localStore,e,!0),tf(a,e,n);break;default:Et()}}async function bie(t,e,r){const n=M2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){it("SyncEngine","Adding an already active target "+a);continue}const i=await Rq(n.localStore,a),o=await Lv(n.localStore,i);await C8(n,Qq(i),o.targetId,!1,o.resumeToken),R2(n.remoteStore,o)}for(const a of r)n.Ma.has(a)&&await Jh(n.localStore,a,!1).then((()=>{Zh(n.remoteStore,a),tf(n,a)})).catch(Vu)}}function M2(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lie.bind(null,e),e.Ca.d_=Yae.bind(null,e.eventManager),e.Ca.$a=Jae.bind(null,e.eventManager),e}function M8(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uie.bind(null,e),e}class lg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=O2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return Cq(this.persistence,new kq,e.initialUser,this.serializer)}Ga(e){return new Aq(C2.Zr,this.serializer)}Wa(e){return new Pq}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lg.provider={build:()=>new lg};class Xq extends lg{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await M8(this.Ja.syncEngine),await $f(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return Cq(this.persistence,new kq,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new lae(n,e.asyncQueue,r)}Ha(e,r){const n=new Vre(r,this.persistence);return new Ure(e.asyncQueue,n)}Ga(e){const r=Eq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Zi.withCacheSize(this.cacheSizeBytes):Zi.DEFAULT;return new x8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Lq(),fv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Pq}}class wie extends Xq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof u3&&(this.sharedClientState.syncEngine={no:gie.bind(null,r),ro:vie.bind(null,r),io:bie.bind(null,r),Qi:yie.bind(null,r),eo:pie.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await xie(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=Lq();if(!u3.D(r))throw new mt(He.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Eq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new u3(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class cg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>iR(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=hie.bind(null,this.syncEngine),await LT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Xae})()}createDatastore(e){const r=O2(e.databaseInfo.databaseId),n=(function(i){return new Rae(i)})(e.databaseInfo);return(function(i,o,c,d){return new Pae(i,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,o,c){return new Bae(n,a,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>iR(this.syncEngine,r,0)),(function(){return eR.D()?new eR:new Cae})())}createSyncEngine(e,r){return(function(a,i,o,c,d,h,m){const p=new rie(a,i,o,c,d,h);return m&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=Rt(a);it("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await xx(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}cg.provider={build:()=>new cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new mt(He.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const o=Rt(a),c={documents:i.map((p=>sg(o.serializer,p)))},d=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Gr.emptyPath(),c,i.length),h=new Map;d.forEach((p=>{const x=Vne(o.serializer,p);h.set(x.key.toString(),x)}));const m=[];return i.forEach((p=>{const x=h.get(p.toString());Mt(!!x),m.push(x)})),m})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new mx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=bt.fromPath(n);this.mutations.push(new l8(a,this.precondition(a)))})),await(async function(n,a){const i=Rt(n),o={writes:a.map((c=>og(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,Gr.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Et();r=Bt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new mt(He.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Bt.min())?ga.exists(!1):ga.updateTime(r):ga.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Bt.min()))throw new mt(He.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ga.updateTime(r)}return ga.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new b8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new Sie(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!ux(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!tq(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Ti.UNAUTHENTICATED,this.clientId=pF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{it("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(it("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=T8(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function h3(t,e){t.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await Oq(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function oR(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Tie(t);it("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>tR(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>tR(e.remoteStore,a))),t._onlineComponents=e}async function Tie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){it("FirestoreClient","Using user provided OfflineComponentProvider");try{await h3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===He.FAILED_PRECONDITION||a.code===He.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Xp("Error using user provided cache. Falling back to memory cache: "+r),await h3(t,new lg)}}else it("FirestoreClient","Using default OfflineComponentProvider"),await h3(t,new lg);return t._offlineComponents}async function P8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(it("FirestoreClient","Using user provided OnlineComponentProvider"),await oR(t,t._uninitializedComponentsProvider._online)):(it("FirestoreClient","Using default OnlineComponentProvider"),await oR(t,new cg))),t._onlineComponents}function jie(t){return P8(t).then((e=>e.syncEngine))}function Aie(t){return P8(t).then((e=>e.datastore))}async function Uv(t){const e=await P8(t),r=e.eventManager;return r.onListen=nie.bind(null,e.syncEngine),r.onUnlisten=iie.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=aie.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=sie.bind(null,e.syncEngine),r}function Eie(t,e,r={}){const n=new ko;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const m=new D8({next:x=>{m.Za(),o.enqueueAndForget((()=>A8(i,p)));const y=x.docs.has(c);!y&&x.fromCache?h.reject(new mt(He.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&x.fromCache&&d&&d.source==="server"?h.reject(new mt(He.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new k8(hx(c.path),m,{includeMetadataChanges:!0,_a:!0});return j8(i,p)})(await Uv(t),t.asyncQueue,e,r,n))),n.promise}function kie(t,e,r={}){const n=new ko;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const m=new D8({next:x=>{m.Za(),o.enqueueAndForget((()=>A8(i,p))),x.fromCache&&d.source==="server"?h.reject(new mt(He.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new k8(c,m,{includeMetadataChanges:!0,_a:!0});return j8(i,p)})(await Uv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jq(t,e,r){if(!r)throw new mt(He.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Cie(t,e,r,n){if(e===!0&&n===!0)throw new mt(He.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function cR(t){if(!bt.isDocumentKey(t))throw new mt(He.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uR(t){if(bt.isDocumentKey(t))throw new mt(He.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function D2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Et()}function ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new mt(He.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=D2(t);throw new mt(He.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Oie(t,e){if(e<=0)throw new mt(He.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new mt(He.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new mt(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yq((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new mt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new mt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new mt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class L8{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(He.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new mt(He.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dR(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Ore;switch(n.type){case"firstParty":return new Mre(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new mt(He.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=lR.get(r);n&&(it("ComponentProvider","Removing Datastore"),lR.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bc(this.firestore,e,this._query)}}class xi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xi(this.firestore,e,this._key)}}class Eu extends bc{constructor(e,r,n){super(e,r,hx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xi(this.firestore,null,new bt(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function Lt(t,e,...r){if(t=jn(t),Jq("collection","path",e),t instanceof L8){const n=Gr.fromString(e,...r);return uR(n),new Eu(t,null,n)}{if(!(t instanceof xi||t instanceof Eu))throw new mt(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Gr.fromString(e,...r));return uR(n),new Eu(t.firestore,null,n)}}function ot(t,e,...r){if(t=jn(t),arguments.length===1&&(e=pF.newId()),Jq("doc","path",e),t instanceof L8){const n=Gr.fromString(e,...r);return cR(n),new xi(t,null,new bt(n))}{if(!(t instanceof xi||t instanceof Eu))throw new mt(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Gr.fromString(e,...r));return cR(n),new xi(t.firestore,t instanceof Eu?t.converter:null,new bt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new b8(this,"async_queue_retry"),this.Vu=()=>{const n=fv();n&&it("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=fv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=fv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new ko;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fu(e))throw e;it("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw pa("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=_8.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&Et()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function fR(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class il extends L8{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new hR,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hR(e),this._firestoreClient=void 0,await e}}}function Iie(t,e,r){r||(r="(default)");const n=sx(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Fh(i,e))return a;throw new mt(He.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new mt(He.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new mt(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function yx(t){if(t._terminated)throw new mt(He.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Rie(t),t._firestoreClient}function Rie(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,m){return new cne(c,d,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Yq(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new _ie(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new a0(va.fromBase64String(e))}catch(r){throw new mt(He.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new a0(va.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new mt(He.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ea(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new mt(He.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new mt(He.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mie=/^__.*__$/;class Die{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new vc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Bf(e,this.data,r,this.fieldTransforms)}}class Zq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new vc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function eH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class P2{constructor(e,r,n,a,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new P2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(eH(this.Cu)&&Mie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Pie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||O2(e)}Qu(e,r,n,a=!1){return new P2({Cu:e,methodName:r,qu:n,path:ea.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wx(t){const e=t._freezeSettings(),r=O2(t._databaseId);return new Pie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function z8(t,e,r,n,a,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);F8("Data must be an object, but it was:",o,n);const c=nH(n,o);let d,h;if(i.merge)d=new as(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const x=zT(e,p,r);if(!o.contains(x))throw new mt(He.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);iH(m,x)||m.push(x)}d=new as(m),h=o.fieldTransforms.filter((p=>d.covers(p.field)))}else d=null,h=o.fieldTransforms;return new Die(new gi(c),d,h)}class L2 extends bx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof L2}}function Lie(t,e,r){return new P2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class U8 extends bx{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Lie(this,e,!0),n=this.Ku.map((i=>Uf(i,r))),a=new e0(n);return new o8(e.path,a)}isEqual(e){return e instanceof U8&&Fh(this.Ku,e.Ku)}}class V8 extends bx{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Xh(e.serializer,KF(e.serializer,this.$u));return new o8(e.path,r)}isEqual(e){return e instanceof V8&&this.$u===e.$u}}function tH(t,e,r,n){const a=t.Qu(1,e,r);F8("Data must be an object, but it was:",a,n);const i=[],o=gi.empty();w0(n,((d,h)=>{const m=q8(e,d,r);h=jn(h);const p=a.Nu(m);if(h instanceof L2)i.push(m);else{const x=Uf(h,p);x!=null&&(i.push(m),o.set(m,x))}}));const c=new as(i);return new Zq(o,c,a.fieldTransforms)}function rH(t,e,r,n,a,i){const o=t.Qu(1,e,r),c=[zT(e,n,r)],d=[a];if(i.length%2!=0)throw new mt(He.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)c.push(zT(e,i[x])),d.push(i[x+1]);const h=[],m=gi.empty();for(let x=c.length-1;x>=0;--x)if(!iH(h,c[x])){const y=c[x];let S=d[x];S=jn(S);const N=o.Nu(y);if(S instanceof L2)h.push(y);else{const w=Uf(S,N);w!=null&&(h.push(y),m.set(y,w))}}const p=new as(h);return new Zq(m,p,o.fieldTransforms)}function Bie(t,e,r,n=!1){return Uf(r,t.Qu(n?4:3,e))}function Uf(t,e){if(aH(t=jn(t)))return F8("Unsupported field value:",e,t),nH(t,e);if(t instanceof bx)return(function(n,a){if(!eH(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let o=0;for(const c of n){let d=Uf(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=jn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return KF(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=ta.fromDate(n);return{timestampValue:Yh(a.serializer,i)}}if(n instanceof ta){const i=new ta(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yh(a.serializer,i)}}if(n instanceof B8)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof a0)return{bytesValue:iq(a.serializer,n._byteString)};if(n instanceof xi){const i=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:f8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof $8)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return s8(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${D2(n)}`)})(t,e)}function nH(t,e){const r={};return AF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):w0(t,((n,a)=>{const i=Uf(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function aH(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ta||t instanceof B8||t instanceof a0||t instanceof xi||t instanceof bx||t instanceof $8)}function F8(t,e,r){if(!aH(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=D2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function zT(t,e,r){if((e=jn(e))instanceof vx)return e._internalPath;if(typeof e=="string")return q8(t,e);throw Vv("Field path arguments must be of type string or ",t,!1,void 0,r)}const $ie=new RegExp("[~\\*/\\[\\]]");function q8(t,e,r){if(e.search($ie)>=0)throw Vv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new vx(...e.split("."))._internalPath}catch{throw Vv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Vv(t,e,r,n,a){const i=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new mt(He.INVALID_ARGUMENT,c+t+d)}function iH(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(B2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class zie extends Fv{data(){return super.data()}}function B2(t,e){return typeof e=="string"?q8(t,e):e instanceof vx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new mt(He.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H8{}class G8 extends H8{}function Br(t,e,...r){let n=[];e instanceof H8&&n.push(e),n=n.concat(r),(function(i){const o=i.filter((d=>d instanceof W8)).length,c=i.filter((d=>d instanceof $2)).length;if(o>1||o>0&&c>0)throw new mt(He.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class $2 extends G8{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new $2(e,r,n)}_apply(e){const r=this._parse(e);return oH(e._query,r),new bc(e.firestore,e.converter,AT(e._query,r))}_parse(e){const r=wx(e.firestore);return(function(i,o,c,d,h,m,p){let x;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new mt(He.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){pR(p,m);const y=[];for(const S of p)y.push(mR(d,i,S));x={arrayValue:{values:y}}}else x=mR(d,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||pR(p,m),x=Bie(c,o,p,m==="in"||m==="not-in");return Or.create(h,m,x)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function hn(t,e,r){const n=e,a=B2("where",t);return $2._create(a,n,r)}class W8 extends H8{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new W8(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:fn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let o=a;const c=i.getFlattenedFilters();for(const d of c)oH(o,d),o=AT(o,d)})(e._query,r),new bc(e.firestore,e.converter,AT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class K8 extends G8{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new K8(e,r)}_apply(e){const r=(function(a,i,o){if(a.startAt!==null)throw new mt(He.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new mt(He.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ag(i,o)})(e._query,this._field,this._direction);return new bc(e.firestore,e.converter,(function(a,i){const o=a.explicitOrderBy.concat([i]);return new Lf(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function Fo(t,e="asc"){const r=e,n=B2("orderBy",t);return K8._create(n,r)}class Q8 extends G8{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Q8(e,r,n)}_apply(e){return new bc(e.firestore,e.converter,Rv(e._query,this._limit,this._limitType))}}function yo(t){return Oie("limit",t),Q8._create("limit",t,"F")}function mR(t,e,r){if(typeof(r=jn(r))=="string"){if(r==="")throw new mt(He.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zF(e)&&r.indexOf("/")!==-1)throw new mt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Gr.fromString(r));if(!bt.isDocumentKey(n))throw new mt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rg(t,new bt(n))}if(r instanceof xi)return rg(t,r._key);throw new mt(He.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${D2(r)}.`)}function pR(t,e){if(!Array.isArray(t)||t.length===0)throw new mt(He.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oH(t,e){const r=(function(a,i){for(const o of a)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new mt(He.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new mt(He.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class lH{convertValue(e,r="none"){switch(Jd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Et()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return w0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>Hn(o.doubleValue)));return new $8(i)}convertGeoPoint(e){return new B8(Hn(e.latitude),Hn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=n8(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(eg(e));default:return null}}convertTimestamp(e){const r=cc(e);return new ta(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Gr.fromString(e);Mt(pq(n));const a=new Yd(n.get(1),n.get(3)),i=new bt(n.popFirst(5));return a.isEqual(r)||pa(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Uie extends lH{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y8 extends Fv{constructor(e,r,n,a,i,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new mv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(B2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class mv extends Y8{data(e={}){return super.data(e)}}class cH{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Nh(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new mv(this._firestore,this._userDataWriter,n.key,n,new Nh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new mt(He.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new mv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new Nh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new mv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new Nh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:Vie(c.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Vie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){t=ss(t,xi);const e=ss(t.firestore,il);return Eie(yx(e),t._key).then((r=>uH(e,t,r)))}class z2 extends lH{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,r)}}function bd(t){t=ss(t,bc);const e=ss(t.firestore,il),r=yx(e),n=new z2(e);return sH(t._query),kie(r,t._query).then((a=>new cH(e,n,t,a)))}function Yn(t,e,r){t=ss(t,xi);const n=ss(t.firestore,il),a=X8(t.converter,e,r);return U2(n,[z8(wx(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ga.none())])}function ir(t,e,r,...n){t=ss(t,xi);const a=ss(t.firestore,il),i=wx(a);let o;return o=typeof(e=jn(e))=="string"||e instanceof vx?rH(i,"updateDoc",t._key,e,r,n):tH(i,"updateDoc",t._key,e),U2(a,[o.toMutation(t._key,ga.exists(!0))])}function Ja(t){return U2(ss(t.firestore,il),[new mx(t._key,ga.none())])}function Pl(t,e){const r=ss(t.firestore,il),n=ot(t),a=X8(t.converter,e);return U2(r,[z8(wx(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ga.exists(!1))]).then((()=>n))}function $r(t,...e){var r,n,a;t=jn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fR(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(fR(e[o])){const p=e[o];e[o]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[o+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[o+2]=(a=p.complete)===null||a===void 0?void 0:a.bind(p)}let d,h,m;if(t instanceof xi)h=ss(t.firestore,il),m=hx(t._key.path),d={next:p=>{e[o]&&e[o](uH(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=ss(t,bc);h=ss(p.firestore,il),m=p._query;const x=new z2(h);d={next:y=>{e[o]&&e[o](new cH(h,x,p,y))},error:e[o+1],complete:e[o+2]},sH(t._query)}return(function(x,y,S,N){const w=new D8(N),j=new k8(y,w,S);return x.asyncQueue.enqueueAndForget((async()=>j8(await Uv(x),j))),()=>{w.Za(),x.asyncQueue.enqueueAndForget((async()=>A8(await Uv(x),j)))}})(yx(h),m,c,d)}function U2(t,e){return(function(n,a){const i=new ko;return n.asyncQueue.enqueueAndForget((async()=>oie(await jie(n),a,i))),i.promise})(yx(t),e)}function uH(t,e,r){const n=r.docs.get(e._key),a=new z2(t);return new Y8(t,a,e._key,n,new Nh(r.hasPendingWrites,r.fromCache),e.converter)}class Fie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=Wie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function qie(t){return new Fie(t)}class Hie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=cg.provider,this._offlineComponentProvider={build:r=>new Xq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Gie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=cg.provider,this._offlineComponentProvider={build:r=>new wie(r,e==null?void 0:e.cacheSizeBytes)}}}function Wie(t){return new Hie(void 0)}function Kie(){return new Gie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qie={maxAttempts:5};function Zm(t,e){if((t=jn(t)).firestore!==e)throw new mt(He.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=wx(r)}get(r){const n=Zm(r,this._firestore),a=new Uie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Et();const o=i[0];if(o.isFoundDocument())return new Fv(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new Fv(this._firestore,a,n._key,null,n.converter);throw Et()}))}set(r,n,a){const i=Zm(r,this._firestore),o=X8(i.converter,n,a),c=z8(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const o=Zm(r,this._firestore);let c;return c=typeof(n=jn(n))=="string"||n instanceof vx?rH(this._dataReader,"Transaction.update",o._key,n,a,i):tH(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(r){const n=Zm(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Zm(e,this._firestore),n=new z2(this._firestore);return super.get(e).then((a=>new Y8(this._firestore,n,r._key,a._document,new Nh(!1,!1),r.converter)))}}function f3(t,e,r){t=ss(t,il);const n=Object.assign(Object.assign({},Qie),r);return(function(i){if(i.maxAttempts<1)throw new mt(He.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,o,c){const d=new ko;return i.asyncQueue.enqueueAndForget((async()=>{const h=await Aie(i);new Nie(i.asyncQueue,h,c,o,d).au()})),d.promise})(yx(t),(a=>e(new Xie(t,a))),n)}function gR(...t){return new U8("arrayUnion",t)}function ep(t){return new V8("increment",t)}(function(e,r=!0){(function(a){Pf=a})(b0),Ru(new sc("firestore",((n,{instanceIdentifier:a,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new il(new Ire(n.getProvider("auth-internal")),new Pre(n.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new mt(He.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yd(h.options.projectId,m)})(o,a),o);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),ro(oI,"4.7.3",e),ro(oI,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dH="firebasestorage.googleapis.com",hH="storageBucket",Yie=120*1e3,Jie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Io{constructor(e,r,n=0){super(m3(e),`Firebase Storage: ${r} (${m3(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ca.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return m3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var la;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(la||(la={}));function m3(t){return"storage/"+t}function J8(){const t="An unknown error occurred, please check the error payload for server response.";return new ca(la.UNKNOWN,t)}function Zie(t){return new ca(la.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ese(t){return new ca(la.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function tse(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ca(la.UNAUTHENTICATED,t)}function rse(){return new ca(la.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nse(t){return new ca(la.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ase(){return new ca(la.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ise(){return new ca(la.CANCELED,"User canceled the upload/download.")}function sse(t){return new ca(la.INVALID_URL,"Invalid URL '"+t+"'.")}function ose(t){return new ca(la.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lse(){return new ca(la.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hH+"' property when initializing the app?")}function cse(){return new ca(la.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function use(){return new ca(la.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dse(t){return new ca(la.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function UT(t){return new ca(la.INVALID_ARGUMENT,t)}function fH(){return new ca(la.APP_DELETED,"The Firebase app was deleted.")}function hse(t){return new ca(la.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cp(t,e){return new ca(la.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function tp(t){throw new ca(la.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Cs.makeFromUrl(e,r)}catch{return new Cs(e,"")}if(n.path==="")return n;throw ose(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const m="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${m}/b/${a}/o${x}`,"i"),S={bucket:1,path:3},N=r===dH?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",j=new RegExp(`^https?://${N}/${a}/${w}`,"i"),I=[{regex:c,indices:d,postModify:i},{regex:y,indices:S,postModify:h},{regex:j,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<I.length;L++){const O=I[L],R=O.regex.exec(e);if(R){const A=R[O.indices.bucket];let E=R[O.indices.path];E||(E=""),n=new Cs(A,E),O.postModify(n);break}}if(n==null)throw sse(e);return n}}class fse{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mse(t,e,r){let n=1,a=null,i=null,o=!1,c=0;function d(){return c===2}let h=!1;function m(...w){h||(h=!0,e.apply(null,w))}function p(w){a=setTimeout(()=>{a=null,t(y,d())},w)}function x(){i&&clearTimeout(i)}function y(w,...j){if(h){x();return}if(w){x(),m.call(null,w,...j);return}if(d()||o){x(),m.call(null,w,...j);return}n<64&&(n*=2);let I;c===1?(c=2,I=0):I=(n+Math.random())*1e3,p(I)}let S=!1;function N(w){S||(S=!0,x(),!h&&(a!==null?(w||(c=2),clearTimeout(a),p(0)):w||(c=1)))}return p(0),i=setTimeout(()=>{o=!0,N(!0)},r),N}function pse(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gse(t){return t!==void 0}function xse(t){return typeof t=="object"&&!Array.isArray(t)}function Z8(t){return typeof t=="string"||t instanceof String}function xR(t){return eE()&&t instanceof Blob}function eE(){return typeof Blob<"u"}function yR(t,e,r,n){if(n<e)throw UT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw UT(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function mH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Gd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Gd||(Gd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yse(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vse{constructor(e,r,n,a,i,o,c,d,h,m,p,x=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=m,this.connectionFactory_=p,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,S)=>{this.resolve_=y,this.reject_=S,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new by(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Gd.NO_ERROR,d=i.getStatus();if(!c||yse(d,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===Gd.ABORT;n(!1,new by(!1,null,m));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new by(h,i))})},r=(n,a)=>{const i=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());gse(d)?i(d):i()}catch(d){o(d)}else if(c!==null){const d=J8();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?fH():ise();o(d)}else{const d=ase();o(d)}};this.canceled_?r(!1,new by(!1,null,!0)):this.backoffId_=mse(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&pse(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class by{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function bse(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function wse(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Sse(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Nse(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _se(t,e,r,n,a,i,o=!0){const c=mH(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return Sse(h,e),bse(h,r),wse(h,i),Nse(h,n),new vse(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tse(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jse(...t){const e=Tse();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(eE())return new Blob(t);throw new ca(la.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ase(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ese(t){if(typeof atob>"u")throw dse("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class p3{constructor(e,r){this.data=e,this.contentType=r||null}}function kse(t,e){switch(t){case Qo.RAW:return new p3(pH(e));case Qo.BASE64:case Qo.BASE64URL:return new p3(gH(t,e));case Qo.DATA_URL:return new p3(Ose(e),Ise(e))}throw J8()}function pH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Cse(t){let e;try{e=decodeURIComponent(t)}catch{throw Cp(Qo.DATA_URL,"Malformed data URL.")}return pH(e)}function gH(t,e){switch(t){case Qo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw Cp(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Qo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw Cp(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Ese(e)}catch(a){throw a.message.includes("polyfill")?a:Cp(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class xH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Cp(Qo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Rse(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Ose(t){const e=new xH(t);return e.base64?gH(Qo.BASE64,e.rest):Cse(e.rest)}function Ise(t){return new xH(t).contentType}function Rse(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,r){let n=0,a="";xR(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(xR(this.data_)){const n=this.data_,a=Ase(n,e,r);return a===null?null:new fu(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new fu(n,!0)}}static getBlob(...e){if(eE()){const r=e.map(n=>n instanceof fu?n.data_:n);return new fu(jse.apply(null,r))}else{const r=e.map(o=>Z8(o)?kse(Qo.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[i++]=o[c]}),new fu(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t){let e;try{e=JSON.parse(t)}catch{return null}return xse(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mse(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Dse(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function vH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pse(t,e){return e}class Ri{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||Pse}}let wy=null;function Lse(t){return!Z8(t)||t.length<2?t:vH(t)}function bH(){if(wy)return wy;const t=[];t.push(new Ri("bucket")),t.push(new Ri("generation")),t.push(new Ri("metageneration")),t.push(new Ri("name","fullPath",!0));function e(i,o){return Lse(o)}const r=new Ri("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const a=new Ri("size");return a.xform=n,t.push(a),t.push(new Ri("timeCreated")),t.push(new Ri("updated")),t.push(new Ri("md5Hash",null,!0)),t.push(new Ri("cacheControl",null,!0)),t.push(new Ri("contentDisposition",null,!0)),t.push(new Ri("contentEncoding",null,!0)),t.push(new Ri("contentLanguage",null,!0)),t.push(new Ri("contentType",null,!0)),t.push(new Ri("metadata","customMetadata",!0)),wy=t,wy}function Bse(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new Cs(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function $se(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return Bse(n,t),n}function wH(t,e,r){const n=yH(e);return n===null?null:$se(t,n,r)}function zse(t,e,r,n){const a=yH(e);if(a===null||!Z8(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const m=t.bucket,p=t.fullPath,x="/b/"+o(m)+"/o/"+o(p),y=V2(x,r,n),S=mH({alt:"media",token:h});return y+S})[0]}function Use(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class tE{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(t){if(!t)throw J8()}function Vse(t,e){function r(n,a){const i=wH(t,a,e);return SH(i!==null),i}return r}function Fse(t,e){function r(n,a){const i=wH(t,a,e);return SH(i!==null),zse(i,a,t.host,t._protocol)}return r}function NH(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=rse():a=tse():r.getStatus()===402?a=ese(t.bucket):r.getStatus()===403?a=nse(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function _H(t){const e=NH(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=Zie(t.path)),i.serverResponse=a.serverResponse,i}return r}function qse(t,e,r){const n=e.fullServerUrl(),a=V2(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new tE(a,i,Fse(t,r),o);return c.errorHandler=_H(e),c}function Hse(t,e){const r=e.fullServerUrl(),n=V2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function o(d,h){}const c=new tE(n,a,o,i);return c.successCodes=[200,204],c.errorHandler=_H(e),c}function Gse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Wse(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Gse(null,e)),n}function Kse(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let I="";for(let L=0;L<2;L++)I=I+Math.random().toString().slice(2);return I}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=Wse(e,n,a),m=Use(h,r),p="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+d+"--",y=fu.getBlob(p,n,x);if(y===null)throw cse();const S={name:h.fullPath},N=V2(i,t.host,t._protocol),w="POST",j=t.maxUploadRetryTime,k=new tE(N,w,Vse(t,r),j);return k.urlParams=S,k.headers=o,k.body=y.uploadData(),k.errorHandler=NH(e),k}class Qse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw tp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Xse extends Qse{initXhr(){this.xhr_.responseType="text"}}function rE(){return new Xse}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,r){this._service=e,r instanceof Cs?this._location=r:this._location=Cs.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new i0(e,r)}get root(){const e=new Cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vH(this._location.path)}get storage(){return this._service}get parent(){const e=Mse(this._location.path);if(e===null)return null;const r=new Cs(this._location.bucket,e);return new i0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw hse(e)}}function Yse(t,e,r){t._throwIfRoot("uploadBytes");const n=Kse(t.storage,t._location,bH(),new fu(e,!0),r);return t.storage.makeRequestWithTokens(n,rE).then(a=>({metadata:a,ref:t}))}function Jse(t){t._throwIfRoot("getDownloadURL");const e=qse(t.storage,t._location,bH());return t.storage.makeRequestWithTokens(e,rE).then(r=>{if(r===null)throw use();return r})}function Zse(t){t._throwIfRoot("deleteObject");const e=Hse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,rE)}function eoe(t,e){const r=Dse(t._location.path,e),n=new Cs(t._location.bucket,r);return new i0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function toe(t){return/^[A-Za-z]+:\/\//.test(t)}function roe(t,e){return new i0(t,e)}function TH(t,e){if(t instanceof nE){const r=t;if(r._bucket==null)throw lse();const n=new i0(r,r._bucket);return e!=null?TH(n,e):n}else return e!==void 0?eoe(t,e):t}function noe(t,e){if(e&&toe(e)){if(t instanceof nE)return roe(t,e);throw UT("To use ref(service, url), the first argument must be a Storage instance.")}else return TH(t,e)}function vR(t,e){const r=e==null?void 0:e[hH];return r==null?null:Cs.makeFromBucketSpec(r,t)}function aoe(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:oZ(a,t.app.options.projectId))}class nE{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=dH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yie,this._maxUploadRetryTime=Jie,this._requests=new Set,a!=null?this._bucket=Cs.makeFromBucketSpec(a,this._host):this._bucket=vR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cs.makeFromBucketSpec(this._url,e):this._bucket=vR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new i0(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new fse(fH());{const o=_se(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const bR="@firebase/storage",wR="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH="storage";function VT(t,e,r){return t=jn(t),Yse(t,e,r)}function qv(t){return t=jn(t),Jse(t)}function ioe(t){return t=jn(t),Zse(t)}function Op(t,e){return t=jn(t),noe(t,e)}function soe(t=zA(),e){t=jn(t);const n=sx(t,jH).getImmediate({identifier:e}),a=SV("storage");return a&&ooe(n,...a),n}function ooe(t,e,r,n={}){aoe(t,e,r,n)}function loe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new nE(r,n,a,e,b0)}function coe(){Ru(new sc(jH,loe,"PUBLIC").setMultipleInstances(!0)),ro(bR,wR,""),ro(bR,wR,"esm2017")}coe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uoe="type.googleapis.com/google.protobuf.Int64Value",doe="type.googleapis.com/google.protobuf.UInt64Value";function AH(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function FT(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>FT(e));if(typeof t=="function"||typeof t=="object")return AH(t,e=>FT(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Hv(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case uoe:case doe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Hv(e)):typeof t=="function"||typeof t=="object"?AH(t,e=>Hv(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ih extends Io{constructor(e,r,n){super(`${aE}/${e}`,r||""),this.details=n}}function hoe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function foe(t,e){let r=hoe(t),n=r,a;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!SR[o])return new Ih("internal","internal");r=SR[o],n=o}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=Hv(a))}}catch{}return r==="ok"?null:new Ih(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class moe{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="us-central1";function poe(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Ih("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class goe{constructor(e,r,n,a,i=qT,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new moe(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=qT}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function xoe(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function yoe(t,e,r){return(n=>boe(t,e,n,{}))}async function voe(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function boe(t,e,r,n){const a=t._url(e);return woe(t,a,r,n)}async function woe(t,e,r,n){r=FT(r);const a={data:r},i={},o=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=n.timeout||7e4,d=poe(c),h=await Promise.race([voe(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Ih("cancelled","Firebase Functions instance was deleted.");const m=foe(h.status,h.json);if(m)throw m;if(!h.json)throw new Ih("internal","Response is not valid JSON object.");let p=h.json.data;if(typeof p>"u"&&(p=h.json.result),typeof p>"u")throw new Ih("internal","Response is missing data field.");return{data:Hv(p)}}const NR="@firebase/functions",_R="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Soe="auth-internal",Noe="app-check-internal",_oe="messaging-internal";function Toe(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(Soe),c=n.getProvider(_oe),d=n.getProvider(Noe);return new goe(i,o,c,d,a,t)};Ru(new sc(aE,r,"PUBLIC").setMultipleInstances(!0)),ro(NR,_R,e),ro(NR,_R,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function joe(t=zA(),e=qT){const n=sx(jn(t),aE).getImmediate({identifier:e}),a=SV("functions");return a&&Aoe(n,...a),n}function Aoe(t,e,r){xoe(jn(t),e,r)}function tn(t,e,r){return yoe(jn(t),e)}Toe(fetch.bind(self));const EH={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Eoe=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Eoe)if(!EH[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const F2=kV(EH),HT=yT(F2),koe=new Vl,Ie=Iie(F2,{localCache:qie({tabManager:Kie()})}),Ip=soe(F2),rn=joe(F2),Coe=tn(rn,"awardXP"),Ooe=tn(rn,"acceptQuest"),Ioe=tn(rn,"deployMission"),Roe=tn(rn,"resolveQuest"),Moe=tn(rn,"equipItem"),Doe=tn(rn,"unequipItem"),Poe=tn(rn,"disenchantItem"),Loe=tn(rn,"craftItem"),Boe=tn(rn,"adminUpdateInventory"),$oe=tn(rn,"adminUpdateEquipped"),zoe=tn(rn,"submitEngagement"),Uoe=tn(rn,"sendClassMessage");tn(rn,"uploadQuestionBank");const kH=tn(rn,"awardQuestionXP"),Voe=tn(rn,"penalizeWrongAnswer"),Foe=tn(rn,"updateStreak"),qoe=tn(rn,"claimDailyLogin"),Hoe=tn(rn,"spinFortuneWheel"),Goe=tn(rn,"unlockSkill"),Woe=tn(rn,"addSocket"),Koe=tn(rn,"socketGem"),Qoe=tn(rn,"unsocketGem"),Xoe=tn(rn,"dealBossDamage"),Yoe=tn(rn,"answerBossQuiz"),Joe=tn(rn,"createParty"),Zoe=tn(rn,"joinParty"),ele=tn(rn,"completeTutoring"),tle=tn(rn,"claimKnowledgeLoot"),rle=tn(rn,"purchaseCosmetic"),nle=tn(rn,"claimDailyChallenge"),ale=tn(rn,"dismissAlert"),Gv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()});function ile(t,e,r,n){const{totalTime:a,submissionCount:i,totalPastes:o,totalKeystrokes:c,totalXP:d,activityDays:h}=t,m=(e-r)/n,p=c+o>0?o/(c+o):0;return i===0&&a<60?"INACTIVE":p>.4&&i>=2&&o>8?"COPYING":a>1800&&i>=2&&d<50?"STRUGGLING":m<-.5&&h<=2&&i>=1&&i<=3?"DISENGAGING":a>1800&&h<=2&&i>=3?"SPRINTING":m<-.5&&m>=-1.5?"COASTING":m>.75&&i>=4&&p<.15&&h>=3?"THRIVING":"ON_TRACK"}const qo={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};function sle(t){switch(t){case"THRIVING":return{categories:["Simulation","Supplemental","Article"],action:"Challenge with advanced or supplemental material. Consider peer-tutoring role.",studentTip:"You're crushing it! Try the simulations and supplemental resources to push further."};case"ON_TRACK":return{categories:["Practice Set","Textbook","Video Lesson"],action:"Continue current approach. Provide enrichment if interest is shown.",studentTip:"Solid work  keep the momentum going with practice sets and readings."};case"COASTING":return{categories:["Practice Set","Simulation","Video Lesson"],action:"Increase engagement with interactive resources. Check in on motivation.",studentTip:"Try a simulation or practice set to boost your skills  small steps add up!"};case"SPRINTING":return{categories:["Textbook","Video Lesson","Practice Set"],action:"Encourage consistent daily engagement instead of cramming. Set micro-goals.",studentTip:"Spreading your study across the week helps retention  try a bit each day."};case"STRUGGLING":return{categories:["Video Lesson","Lab Guide","Practice Set"],action:"Offer direct support. Recommend foundational resources and check understanding.",studentTip:"Your effort shows! Try video lessons for a fresh perspective on tricky topics."};case"DISENGAGING":return{categories:["Video Lesson","Simulation","Article"],action:"Reach out personally. Low-friction resources to re-establish habit.",studentTip:"We miss seeing you active  a quick video or sim is a great way to jump back in."};case"INACTIVE":return{categories:["Video Lesson","Article"],action:"Immediate outreach required. Check for external factors. Lowest-barrier resources.",studentTip:"Start small  even watching one video lesson counts. We're here to help!"};case"COPYING":return{categories:["Practice Set","Textbook","Lab Guide"],action:"Discuss academic integrity. Redirect to original-work resources.",studentTip:"Working through problems yourself builds the strongest understanding  give it a try!"}}}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CH=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lle={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cle=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>T.createElement("svg",{ref:d,...lle,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:CH("lucide",a),...c},[...o.map(([h,m])=>T.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(t,e)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(cle,{ref:i,iconNode:e,className:CH(`lucide-${ole(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=$e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=$e("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=$e("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=$e("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=$e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=$e("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=$e("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=$e("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=$e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=$e("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=$e("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=$e("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=$e("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=$e("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=$e("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=$e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=$e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=$e("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=$e("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=$e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=$e("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=$e("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=$e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=$e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=$e("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=$e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=$e("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=$e("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=$e("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=$e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=$e("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=$e("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=$e("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=$e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=$e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=$e("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=$e("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=$e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=$e("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=$e("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=$e("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=$e("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=$e("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=$e("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=$e("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jle=$e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=$e("Heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=$e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=$e("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=$e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=$e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=$e("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=$e("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=$e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=$e("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=$e("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=$e("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=$e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ele=$e("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=$e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=$e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kle=$e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=$e("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=$e("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=$e("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=$e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ole=$e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=$e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=$e("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=$e("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=$e("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=$e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=$e("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mle=$e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=$e("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dle=$e("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=$e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=$e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lle=$e("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ble=$e("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=$e("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=$e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=$e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=$e("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=$e("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=$e("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=$e("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $le=$e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=$e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=$e("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=$e("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=$e("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=$e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zle=$e("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ule=$e("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=$e("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=$e("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=$e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vle=$e("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=$e("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=$e("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fle=$e("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=$e("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=$e("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=$e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qle=$e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=$e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=$e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=$e("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hle=$e("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gle=$e("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=$e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wle=$e("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=$e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kle=$e("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qle=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=$e("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=$e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xle=$e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yle=$e("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jle=$e("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=$e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Zle="kellporter2@paps.net",WH="Mr. Porter",MR=[{name:"Dashboard",icon:s.jsx(Ale,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:s.jsx(X2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:s.jsx(ls,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Student Groups",icon:s.jsx(ls,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Enrollment Codes",icon:s.jsx(ug,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:s.jsx(cs,{className:"w-5 h-5"}),role:"ADMIN",children:[{name:"Operatives",icon:s.jsx(os,{className:"w-4 h-4"})},{name:"XP Protocols",icon:s.jsx(Vn,{className:"w-4 h-4"})},{name:"Missions",icon:s.jsx(q2,{className:"w-4 h-4"})},{name:"Mission Control",icon:s.jsx(Wv,{className:"w-4 h-4"})},{name:"Boss Ops",icon:s.jsx(Co,{className:"w-4 h-4"})},{name:"Tutoring",icon:s.jsx(Lu,{className:"w-4 h-4"})}]},{name:"Resources",icon:s.jsx(lE,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:s.jsx(Wv,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:s.jsx(cs,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:s.jsx(sl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:s.jsx(_le,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:s.jsx(yle,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Intel Dossier",icon:s.jsx(Vf,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:s.jsx(sl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:s.jsx(Lu,{className:"w-5 h-5"}),role:"STUDENT"}],DR=new Set,Ks=(t,e,r)=>DR.has(t)?()=>{}:$r(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&DR.add(t)}),Re={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Ks("xp_events",Lt(Ie,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await Yn(ot(Ie,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Ja(ot(Ie,"xp_events",t))},subscribeToQuests:t=>Ks("quests",Lt(Ie,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await Yn(ot(Ie,"quests",t.id),t)},deleteQuest:async t=>{await Ja(ot(Ie,"quests",t))},acceptQuest:async(t,e)=>{await Ooe({questId:e})},deployMission:async(t,e)=>{await Ioe({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await Roe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Re.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Moe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Doe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Poe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Loe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await Boe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await $oe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ot(Ie,"users",t);r?await ir(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await ir(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await Uoe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=ot(Ie,"class_messages",t);await f3(Ie,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(m=>m!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ot(Ie,"class_messages",t);await f3(Ie,async n=>{const a=await n.get(r);if(!a.exists())return;const o=[...a.data().pinnedBy||[]];o.includes(e)?n.update(r,{pinnedBy:o.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...o,e]})})},toggleGlobalPin:async(t,e)=>{const r=ot(Ie,"class_messages",t);await ir(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Ja(ot(Ie,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=Br(Lt(Ie,"class_messages"),hn("isFlagged","==",!0),yo(50));return $r(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ot(Ie,"class_messages",t);await ir(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Re.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await ir(ot(Ie,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await Pl(Lt(Ie,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await ir(ot(Ie,"student_groups",t),r)},deleteStudentGroup:async t=>{await Ja(ot(Ie,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=Br(Lt(Ie,"student_groups"),hn("classType","==",t));return $r(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>$r(Lt(Ie,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=Br(Lt(Ie,"student_groups"),hn("memberIds","array-contains",t));return $r(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=Br(Lt(Ie,"class_messages"),hn("channelId","==",t),yo(100));return $r(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(i.timestamp).getTime()-new Date(o.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=Br(Lt(Ie,"class_messages"),Fo("timestamp","desc"),yo(20));return Ks("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=Br(Lt(Ie,"conversations"),Fo("lastMessageAt","desc"));return $r(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=Br(Lt(Ie,`conversations/${t}/messages`),Fo("timestamp","asc"));return $r(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===za.ADMIN?WH:e.name,content:r,timestamp:new Date().toISOString()};await Pl(Lt(Ie,`conversations/${t}/messages`),n),await ir(ot(Ie,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await ir(ot(Ie,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=Br(Lt(Ie,"chat_flags"),hn("isResolved","==",!1));return $r(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await ir(ot(Ie,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=Br(Lt(Ie,"chat_flags"),hn("messageId","==",t),hn("isResolved","==",!1)),n=(await bd(e)).docs.map(a=>ir(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=Br(Lt(Ie,"evidence"),hn("studentId","==",t),hn("weekId","==",e));return $r(n,a=>{const i=a.docs.map(o=>({id:o.id,...o.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await Yn(ot(Ie,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=Op(Ip,n.imageUrl);return ioe(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>Ja(ot(Ie,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await Yn(ot(Ie,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ot(Ie,"users",t);await ir(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await ir(ot(Ie,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await ir(ot(Ie,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=Lt(Ie,"users");return $r(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=Lt(Ie,"assignments");return $r(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0,lessonBlocks:i.lessonBlocks||[]}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=Br(Lt(Ie,"submissions"),Fo("submittedAt","desc"),yo(200));return $r(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Gv(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=Br(Lt(Ie,"submissions"),hn("userId","==",t),yo(50));return $r(r,n=>{const a=n.docs.map(i=>{const o=i.data();return{id:i.id,userId:o.userId,userName:o.userName,assignmentId:o.assignmentId,assignmentTitle:o.assignmentTitle,metrics:o.metrics||Gv(),submittedAt:o.submittedAt,status:o.status,score:o.score,hasUnreadAdmin:o.hasUnreadAdmin||!1,hasUnreadStudent:o.hasUnreadStudent||!1,isPinned:o.isPinned||!1,isArchived:o.isArchived||!1,privateComments:(o.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,o)=>new Date(o.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=Lt(Ie,"allowed_emails");return $r(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=Lt(Ie,"class_configs");return $r(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null,lessonBlocks:t.lessonBlocks&&t.lessonBlocks.length>0?t.lessonBlocks:[]};t.id?await Yn(ot(Ie,"assignments",t.id),e,{merge:!0}):await Pl(Lt(Ie,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await ir(ot(Ie,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Ja(ot(Ie,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ot(Ie,"allowed_emails",t),n=await ma(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await Yn(r,{classType:e,classTypes:i});const o=Br(Lt(Ie,"users"),hn("email","==",t)),c=await bd(o);await Promise.all(c.docs.map(async d=>{const h=d.data(),m=h.enrolledClasses||(h.classType?[h.classType]:[]),p=Array.from(new Set([...m,e]));await ir(ot(Ie,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:p})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await ir(ot(Ie,"allowed_emails",t),{section:e});const r=Br(Lt(Ie,"users"),hn("email","==",t)),n=await bd(r);await Promise.all(n.docs.map(async a=>{await ir(ot(Ie,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await ir(ot(Ie,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await ir(ot(Ie,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await Ja(ot(Ie,"allowed_emails",t));const e=Br(Lt(Ie,"users"),hn("email","==",t)),r=await bd(e);await Promise.all(r.docs.map(async n=>{await ir(ot(Ie,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ot(Ie,"users",t),n=await ma(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),o=Array.from(new Set([...i,e]));await ir(r,{isWhitelisted:!0,classType:e,enrolledClasses:o});const c=a.email;if(c){const d=await ma(ot(Ie,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],m=Array.from(new Set([...h,e]));await Yn(ot(Ie,"allowed_emails",c),{classType:e,classTypes:m})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await ma(ot(Ie,"users",t));if(e.exists()){const r=e.data().email;await Ja(ot(Ie,"allowed_emails",r))}await Ja(ot(Ie,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await Yn(ot(Ie,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,o=ot(Ie,"submissions",i);(await ma(o)).exists()?await ir(o,{"metrics.engagementTime":ep(a),"metrics.lastActive":Date.now()}):await Yn(o,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ot(Ie,"users",t),n=await ma(r);if(!n.exists())return;const i=n.data().email,o={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(o.isWhitelisted=!1,i&&await Ja(ot(Ie,"allowed_emails",i))):(o.isWhitelisted=!0,i&&await Yn(ot(Ie,"allowed_emails",i),{classType:e[0],classTypes:e})),await ir(r,o)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ot(Ie,"users",t),n=await ma(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await ir(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const o=n.data().email;o&&await Yn(ot(Ie,"allowed_emails",o),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await ir(ot(Ie,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Coe({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await zoe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=Br(Lt(Ie,"users"),hn("role","==","STUDENT"));return $r(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await Yn(ot(Ie,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Ja(ot(Ie,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Op(Ip,`resources/${e}_${t.name}`);return await VT(r,t),await qv(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Op(Ip,`resources/html/${e}_${t.name}`);return await VT(r,t),await qv(r)},subscribeToAnnouncements:t=>{const e=Br(Lt(Ie,"announcements"),Fo("createdAt","desc"),yo(20));return Ks("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await Pl(Lt(Ie,"announcements"),t)},deleteAnnouncement:async t=>{await Ja(ot(Ie,"announcements",t))},dismissAnnouncement:async(t,e)=>{await ir(ot(Ie,"users",t),{"gamification.dismissedAnnouncements":gR(e)})},subscribeToNotifications:(t,e)=>{const r=Br(Lt(Ie,"notifications"),hn("userId","==",t),Fo("timestamp","desc"),yo(50));return $r(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await ir(ot(Ie,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=Br(Lt(Ie,"notifications"),hn("userId","==",t),hn("isRead","==",!1)),n=(await bd(e)).docs.map(a=>ir(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await Pl(Lt(Ie,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(o=>Pl(Lt(Ie,"notifications"),{userId:o,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await ir(ot(Ie,"users",t),n)},toggleCodenameLock:async(t,e)=>{await ir(ot(Ie,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await Foe({})).data,claimDailyLogin:async()=>(await qoe({})).data,spinFortuneWheel:async t=>(await Hoe({classType:t})).data,unlockSkill:async(t,e)=>(await Goe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await Woe({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await Koe({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await Qoe({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=Br(Lt(Ie,"boss_encounters"),hn("isActive","==",!0));return Ks("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=Lt(Ie,"boss_encounters");return $r(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ot(Ie,"boss_encounters",t.id);await Yn(e,t)},toggleBossActive:async(t,e)=>{const r=ot(Ie,"boss_encounters",t);await ir(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ot(Ie,"boss_encounters",t);await Ja(e)},subscribeToBossShards:(t,e)=>{const r=Lt(Ie,`boss_encounters/${t}/shards`);return $r(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=Lt(Ie,`boss_encounters/${t}/damage_log`);return $r(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await Xoe({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=Br(Lt(Ie,"boss_quizzes"),hn("isActive","==",!0));return Ks("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=Lt(Ie,`boss_quizzes/${t}/shards`);return $r(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossQuizDamageLog:(t,e)=>{const r=Lt(Ie,`boss_quizzes/${t}/damage_log`);return $r(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await Yoe({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=Lt(Ie,"boss_quizzes");return $r(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=ot(Ie,"boss_quizzes",t.id);await Yn(e,t)},toggleBossQuizActive:async(t,e)=>{const r=ot(Ie,"boss_quizzes",t);await ir(r,{isActive:e})},deleteBossQuiz:async t=>{const e=ot(Ie,"boss_quizzes",t);await Ja(e)},subscribeToBossQuestionBanks:t=>$r(Lt(Ie,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=ot(Ie,"boss_question_banks",t.id);await Yn(e,t)},deleteBossQuestionBank:async t=>{await Ja(ot(Ie,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=Br(Lt(Ie,"boss_quiz_progress"),hn("quizId","==",t));return(await bd(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=ot(Ie,"boss_quiz_progress",`${t}_${e}`);return $r(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await Joe({questId:t,userName:e})).data,joinParty:async(t,e)=>(await Zoe({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>$r(ot(Ie,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await Pl(Lt(Ie,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await ir(ot(Ie,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await ir(ot(Ie,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await ir(ot(Ie,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=ot(Ie,"tutoring_sessions",t),a=await ma(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),o=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[o]:r};i[c]&&(d.status="COMPLETED"),await ir(n,d)},subscribeToAllTutoringSessions:t=>{const e=Br(Lt(Ie,"tutoring_sessions"),Fo("createdAt","desc"),yo(100));return $r(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await Ja(ot(Ie,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=Br(Lt(Ie,"tutoring_sessions"),hn("classType","==",t),yo(50));return Ks("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await ele({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=Br(Lt(Ie,"knowledge_gates"),hn("isActive","==",!0));return Ks("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await tle({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=Br(Lt(Ie,"seasonal_cosmetics"),hn("isAvailable","==",!0));return Ks("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await rle({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await ir(ot(Ie,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=Br(Lt(Ie,"daily_challenges"),hn("date","==",e));return Ks("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await nle({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=ot(Ie,"users",t);await f3(Ie,async i=>{var h;const o=await i.get(a);if(!o.exists())return;const c=((h=o.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(m=>m.challengeId===e)){const m=c.map(p=>p.challengeId===e?{...p,progress:r,completed:n}:p);i.update(a,{"gamification.activeDailyChallenges":m})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await ma(ot(Ie,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=Br(Lt(Ie,"student_alerts"),hn("isDismissed","==",!1));return Ks("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const o={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(o[i.riskLevel]||0)-(o[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await ale({alertId:t})},subscribeToStudentBuckets:t=>Ks("student_buckets",Lt(Ie,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=Br(Lt(Ie,"practice_progress"),hn("userId","==",t));return $r(r,n=>{const a={};n.forEach(i=>{const o=i.data();o.assignmentId&&o.completed&&(a[o.assignmentId]={completed:o.completed||!1,totalCompletions:o.totalCompletions||0,bestScore:o.bestScore??null,completedAt:o.completedAt??null})}),e(a)},()=>{})},submitBugReport:async t=>{await Pl(Lt(Ie,"bug_reports"),{...t,resolved:!1})},subscribeToBugReports:t=>{const e=Br(Lt(Ie,"bug_reports"),Fo("timestamp","desc"),yo(100));return $r(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},resolveBugReport:async t=>{await ir(ot(Ie,"bug_reports",t),{resolved:!0})},createEnrollmentCode:async(t,e,r)=>{const n=[Math.random().toString(36).substring(2,6),Math.random().toString(36).substring(2,6)].join("-").toUpperCase(),a=ot(Lt(Ie,"enrollment_codes"));return await Yn(a,{code:n,classType:t,section:e||null,createdAt:new Date().toISOString(),createdBy:"admin",usedCount:0,maxUses:r||null,isActive:!0}),n},subscribeToEnrollmentCodes:t=>{const e=Br(Lt(Ie,"enrollment_codes"),Fo("createdAt","desc"));return $r(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},deactivateEnrollmentCode:async t=>{await ir(ot(Ie,"enrollment_codes",t),{isActive:!1})},redeemEnrollmentCode:async(t,e)=>{const r=Br(Lt(Ie,"enrollment_codes"),hn("code","==",t.toUpperCase()),hn("isActive","==",!0)),n=await bd(r);if(n.empty)return{success:!1,error:"Invalid or expired code."};const a=n.docs[0],i=a.data();if(i.maxUses&&i.usedCount>=i.maxUses)return{success:!1,error:"This code has reached its usage limit."};const o=ot(Ie,"users",e),c=await ma(o);return c.exists()?(c.data().enrolledClasses||[]).includes(i.classType)?{success:!1,error:"Already enrolled in this class."}:(await ir(o,{enrolledClasses:gR(i.classType),isWhitelisted:!0}),i.section&&await ir(o,{[`classSections.${i.classType}`]:i.section}),await ir(a.ref,{usedCount:ep(1)}),{success:!0,classType:i.classType}):{success:!1,error:"User not found."}},awardBehavior:async t=>{await Pl(Lt(Ie,"behavior_awards"),t);const e=ot(Ie,"users",t.studentId);await ir(e,{"gamification.xp":ep(t.xpAmount),[`gamification.classXp.${t.classType}`]:ep(t.xpAmount),"gamification.currency":ep(t.fluxAmount)})},subscribeToBehaviorAwards:(t,e)=>{const r=Br(Lt(Ie,"behavior_awards"),hn("classType","==",t),Fo("timestamp","desc"),yo(50));return $r(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},()=>{})},updateDailyStreak:async t=>{const e=ot(Ie,"users",t),r=await ma(e);if(!r.exists())return{currentStreak:0,freezeUsed:!1};const a=r.data().streakData||{currentStreak:0,longestStreak:0,lastActiveDate:"",freezeTokens:0,maxFreezeTokens:3,streakHistory:[],milestones:[]},i=new Date().toISOString().split("T")[0];if(a.lastActiveDate===i)return{currentStreak:a.currentStreak,freezeUsed:!1};const o=new Date(Date.now()-864e5).toISOString().split("T")[0];let c=a.currentStreak,d=!1;a.lastActiveDate===o?c+=1:a.lastActiveDate&&Math.floor((new Date(i).getTime()-new Date(a.lastActiveDate).getTime())/864e5)===2&&a.freezeTokens>0?(c+=1,d=!0):c=1;const h=Math.max(a.longestStreak,c),m=[3,7,14,21,30,50,100],p=a.milestones||[],x=m.find(w=>c>=w&&!p.includes(w)),y=x?[...p,x]:p;let S=d?a.freezeTokens-1:a.freezeTokens;c>0&&c%7===0&&(S=Math.min(S+1,a.maxFreezeTokens));const N=[...a.streakHistory||[],i].slice(-30);return await ir(e,{streakData:{currentStreak:c,longestStreak:h,lastActiveDate:i,freezeTokens:S,maxFreezeTokens:3,streakHistory:N,milestones:y}}),{currentStreak:c,freezeUsed:d,newMilestone:x}}},KH=T.createContext(null),Ga=()=>{const t=T.useContext(KH);if(!t)throw new Error("useToast must be used within ToastProvider");return t},ece={success:s.jsx(Lr,{className:"w-5 h-5 text-green-400 shrink-0"}),error:s.jsx(Ds,{className:"w-5 h-5 text-red-400 shrink-0"}),info:s.jsx(K2,{className:"w-5 h-5 text-blue-400 shrink-0"})},tce={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},rce=({children:t})=>{const[e,r]=T.useState([]),n=T.useCallback((o,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:o,type:c}]),setTimeout(()=>{r(h=>h.filter(m=>m.id!==d))},4e3)},[]),a=T.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i={success:o=>n(o,"success"),error:o=>n(o,"error"),info:o=>n(o,"info")};return s.jsxs(KH.Provider,{value:i,children:[t,s.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(o=>s.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${tce[o.type]}`,children:[ece[o.type],s.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:o.message}),s.jsx("button",{onClick:()=>a(o.id),className:"text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Jn,{className:"w-4 h-4"})})]},o.id))})]})},nce=()=>{const[t,e]=T.useState(navigator.onLine),[r,n]=T.useState(!1);return T.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:s.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?s.jsxs(s.Fragment,{children:[s.jsx(Jle,{className:"w-4 h-4"}),"Connection restored"]}):s.jsxs(s.Fragment,{children:[s.jsx(Yle,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var xu=xV();const Ei=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(T.useEffect(()=>{const i=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?xu.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[s.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:s.jsx(Jn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),ace="/favicon.svg";function qf(){return typeof window<"u"&&"Notification"in window}function gv(){return qf()?Notification.permission:"unsupported"}async function QH(){return qf()?await Notification.requestPermission():"unsupported"}function ice(t,e,r){if(!(!qf()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:ace,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function sce(t,e){const r=T.useRef(new Set),n=T.useRef(!0),a=T.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const o=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of o.slice(0,3))ice(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);T.useEffect(()=>{if(!t||!e||!qf())return;n.current=!0,r.current=new Set;const i=Re.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const oce=({userId:t})=>{const[e,r]=se.useState(""),[n,a]=se.useState(!1),[i,o]=se.useState(null),[c,d]=se.useState(null),h=Ga(),m=x=>{const y=x.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);r(y.length>4?y.slice(0,4)+"-"+y.slice(4):y),o(null),d(null)},p=async()=>{if(e.replace("-","").length<4){o("Enter a valid code.");return}a(!0),o(null);try{const x=await Re.redeemEnrollmentCode(e,t);x.success?(d(`Enrolled in ${x.classType}!`),h.success(`Joined ${x.classType}!`),r("")):o(x.error||"Failed to redeem code.")}catch{o("Something went wrong. Please try again.")}finally{a(!1)}};return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Enrollment"}),s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-white mb-2",children:[s.jsx(ug,{className:"w-3.5 h-3.5 text-emerald-400"}),"Join Another Class"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:x=>m(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!n&&p()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm font-mono font-bold text-emerald-400 tracking-widest placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:n}),s.jsx("button",{onClick:p,disabled:n||e.replace("-","").length<4,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl text-xs font-bold transition flex items-center gap-1.5",children:n?s.jsx(Ai,{className:"w-3.5 h-3.5 animate-spin"}):"Join"})]}),i&&s.jsx("p",{className:"mt-2 text-xs text-red-400",children:i}),c&&s.jsxs("p",{className:"mt-2 text-xs text-emerald-400 flex items-center gap-1.5",children:[s.jsx(s0,{className:"w-3.5 h-3.5"})," ",c]})]})]})},lce=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var S;const[a,i]=se.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[o,c]=se.useState(((S=r.gamification)==null?void 0:S.codename)||""),[d,h]=se.useState(!1),m=Ga(),p=N=>{i(w=>({...w,[N]:!w[N]}))},x=async()=>{var N;h(!0);try{await n(a),o!==(((N=r.gamification)==null?void 0:N.codename)||"")&&await Re.updateCodename(r.id,o.trim().slice(0,24)),e()}catch(w){console.error(w),m.error("Failed to save settings.")}finally{h(!1)}},y=({icon:N,title:w,description:j,value:k,onToggle:I})=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${k?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(N,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:w}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:j})]})]}),s.jsx("button",{onClick:I,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${k?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${k?"translate-x-5":"translate-x-0"}`})})]});return s.jsx(Ei,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Mle,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>p("liveBackground")}),s.jsx(y,{icon:gle,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>p("performanceMode")})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:os,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>p("privacyMode")}),a.privacyMode&&s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),s.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[o.length,"/24 characters"]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Lle,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>p("compactView")}),s.jsx(y,{icon:GH,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(N=>({...N,soundEffects:N.soundEffects===!1}))})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),s.jsx("div",{className:"space-y-2",children:qf()?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(OH,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:gv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),s.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(N=>({...N,pushNotifications:!1}));else{const N=await QH();N==="granted"?(i(w=>({...w,pushNotifications:!0})),m.success("Push notifications enabled!")):N==="denied"&&m.error("Notifications blocked by browser. Check your browser settings.")}},disabled:gv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${gv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):s.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),r.role==="STUDENT"&&s.jsx(oce,{userId:r.id}),s.jsxs("button",{onClick:x,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?s.jsx(Ai,{className:"w-5 h-5 animate-spin"}):s.jsx(FH,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let b3=null,XH=!0;function cce(t){XH=t}function uce(){if(!b3){const t=window.AudioContext||window.webkitAudioContext;b3=new t}return b3}function er(t,e,r="sine",n=.15){if(XH)try{const a=uce(),i=a.createOscillator(),o=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),o.gain.setValueAtTime(n,a.currentTime),o.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(o),o.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const qn={xpGain:()=>{er(600,.1,"sine",.1),setTimeout(()=>er(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{er(1200,.15,"sine",.08),setTimeout(()=>er(1500,.12,"sine",.06),100),setTimeout(()=>er(1800,.2,"triangle",.05),180)},questAccept:()=>{er(440,.15,"square",.06),setTimeout(()=>er(660,.2,"square",.06),120)},questDeploy:()=>{er(880,.12,"sawtooth",.05),setTimeout(()=>er(660,.12,"sawtooth",.05),100),setTimeout(()=>er(550,.2,"sawtooth",.04),200)},equip:()=>{er(200,.05,"square",.1),setTimeout(()=>er(400,.08,"sine",.08),50)},salvage:()=>{er(300,.15,"sawtooth",.06),setTimeout(()=>er(200,.2,"sawtooth",.04),100),setTimeout(()=>er(100,.3,"sawtooth",.03),200)},craft:()=>{er(150,.08,"square",.1),setTimeout(()=>er(800,.2,"triangle",.08),60)},error:()=>{er(200,.15,"square",.08),setTimeout(()=>er(150,.2,"square",.06),120)},messageSend:()=>{er(500,.06,"sine",.05)},notification:()=>{er(800,.1,"sine",.06),setTimeout(()=>er(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>er(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{er(523,.12,"sine",.08),setTimeout(()=>er(659,.12,"sine",.07),100),setTimeout(()=>er(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>er(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{er(523,.15,"triangle",.1),setTimeout(()=>er(784,.15,"triangle",.1),120),setTimeout(()=>er(1047,.3,"sine",.12),240)},skillUnlock:()=>{er(300,.1,"sawtooth",.06),setTimeout(()=>er(600,.1,"sawtooth",.06),80),setTimeout(()=>er(900,.15,"sine",.08),160)},bossHit:()=>{er(100,.1,"square",.12),setTimeout(()=>er(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{er(1200,.08,"sine",.08),setTimeout(()=>er(1600,.1,"sine",.06),60),setTimeout(()=>er(2e3,.15,"triangle",.04),120)},partyJoin:()=>{er(440,.1,"sine",.06),setTimeout(()=>er(554,.1,"sine",.06),80),setTimeout(()=>er(659,.15,"sine",.05),160)},chestOpen:()=>{er(200,.15,"square",.06),setTimeout(()=>er(300,.1,"square",.05),100),setTimeout(()=>er(500,.1,"triangle",.06),200),setTimeout(()=>er(800,.2,"sine",.08),350)}},dce={QUEST_APPROVED:s.jsx(ku,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:s.jsx(ku,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:s.jsx(WT,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:s.jsx(ku,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:s.jsx(UH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:s.jsx(hle,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:s.jsx(Xv,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:s.jsx(Vn,{className:"w-4 h-4 text-cyan-400"})},PR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(!1),[m,p]=T.useState({}),x=T.useRef(null),y=T.useRef(null),S=T.useRef(0),N=T.useCallback(()=>{if(!x.current)return;const O=x.current.getBoundingClientRect(),R=320;if(n){const A=Math.max(8,O.left),E=A+R>window.innerWidth-8?void 0:A,C=E==null?8:void 0;p({bottom:window.innerHeight-O.top+8,left:E,right:C})}else p({top:O.bottom+8,right:Math.max(8,window.innerWidth-O.right)})},[n]);T.useEffect(()=>{o&&qf()&&gv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[o,e==null?void 0:e.pushNotifications]),T.useEffect(()=>{const O=Re.subscribeToNotifications(t,R=>{const A=R.filter(E=>!E.isRead).length;A>S.current&&S.current>=0&&qn.notification(),S.current=A,i(R)});return()=>O()},[t]),T.useEffect(()=>{const O=R=>{var E,C;const A=R.target;(E=x.current)!=null&&E.contains(A)||(C=y.current)!=null&&C.contains(A)||c(!1)};return o&&document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[o]),T.useEffect(()=>{if(o)return N(),window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),()=>{window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0)}},[o,N]);const w=a.filter(O=>!O.isRead).length,j=async()=>{await Re.markAllNotificationsRead(t)},k=async O=>{O.isRead||await Re.markNotificationRead(O.id)},I=O=>{const R=Date.now()-new Date(O).getTime();return R<6e4?"just now":R<36e5?`${Math.floor(R/6e4)}m ago`:R<864e5?`${Math.floor(R/36e5)}h ago`:`${Math.floor(R/864e5)}d ago`},L=()=>{o||N(),c(!o)};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:x,onClick:L,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[s.jsx(g3,{className:"w-5 h-5"}),w>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:w>9?"9+":w})]}),o&&xu.createPortal(s.jsxs("div",{ref:y,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...m.top!=null?{top:m.top}:{},...m.bottom!=null?{bottom:m.bottom}:{},...m.left!=null?{left:m.left}:{},...m.right!=null?{right:m.right}:{}},children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),w>0&&s.jsxs("button",{onClick:j,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[s.jsx(mle,{className:"w-3 h-3"})," Mark all read"]})]}),d&&s.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(OH,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:async()=>{await QH()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),s.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),s.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(g3,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(O=>s.jsxs("div",{onClick:()=>k(O),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${O.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[s.jsx("div",{className:"mt-0.5 shrink-0",children:dce[O.type]||s.jsx(g3,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-bold text-white truncate",children:O.title}),s.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:O.message}),s.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:I(O.timestamp)})]}),!O.isRead&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},O.id))})]}),document.body)]})},hce=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var w,j;const[i,o]=T.useState(""),[c,d]=T.useState(!1),[h,m]=T.useState(!1),p=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};T.useEffect(()=>{if(!p.liveBackground){o("");return}(async()=>{try{const I=Op(Ip,"public/background.mp4"),L=await qv(I);o(L)}catch{console.warn("Firebase background not found, using local fallback."),o("/background.mp4")}})()},[p.liveBackground]);const x=async k=>{await Re.updateUserSettings(t.id,k)},[y,S]=T.useState(null);T.useEffect(()=>{const k=MR.find(I=>{var L;return(L=I.children)==null?void 0:L.some(O=>r===`${I.name}:${O.name}`)});k&&S(k.name)},[r]);const N=()=>{const k=MR.filter(L=>!(L.role==="ADMIN"&&t.role!==za.ADMIN||L.role==="STUDENT"&&t.role!==za.STUDENT)),I=L=>{var O;return(O=L.children)==null?void 0:O.some(R=>r===`${L.name}:${R.name}`)};return s.jsx(s.Fragment,{children:k.map(L=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{L.children?y===L.name?S(null):(S(L.name),I(L)||(n(`${L.name}:${L.children[0].name}`),m(!1))):(n(L.name),m(!1))},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${p.compactView?"py-2.5":"py-3"} ${r===L.name||I(L)?L.children?"bg-purple-500/10 text-white border border-purple-500/20":"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[s.jsx("span",{className:`${r===L.name||I(L)?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:L.icon}),s.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:L.name}),L.children&&s.jsx(yi,{className:`w-3.5 h-3.5 transition-transform ${y===L.name?"rotate-180":""} ${I(L)?"text-purple-400":"text-gray-600"}`})]}),L.children&&y===L.name&&s.jsx("div",{className:"ml-6 mt-1 space-y-0.5 border-l border-white/10 pl-3",children:L.children.map(O=>{const R=`${L.name}:${O.name}`;return s.jsxs("button",{onClick:()=>{n(R),m(!1)},className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-xs font-medium transition-all ${r===R?"bg-purple-600/60 text-white":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[s.jsx("span",{className:r===R?"text-white":"text-gray-600",children:O.icon}),O.name]},O.name)})})]},L.name))})};return s.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${p.performanceMode?"perf-mode":""}`,children:[s.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),p.liveBackground&&i&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:s.jsx("source",{src:i,type:"video/mp4"})},i)}),s.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${p.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${p.performanceMode?"":"backdrop-blur-[3px]"}`}),s.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:s.jsx(Lu,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(PR,{userId:t.id,settings:p,onUpdateSettings:x}),s.jsx("button",{onClick:()=>m(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:s.jsx(Cle,{className:"w-6 h-6"})})]})]}),h&&s.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>m(!1)}),s.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-white",children:p.privacyMode?((w=t.gamification)==null?void 0:w.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),s.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Jn,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:s.jsx(N,{})}),s.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[s.jsxs("button",{onClick:()=>{d(!0),m(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[s.jsx(dg,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[s.jsx(kR,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),s.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${p.compactView?"w-60":"w-72"}`,children:s.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${p.performanceMode?"":"backdrop-blur-2xl"}`,children:[s.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[s.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:s.jsx(Lu,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),s.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===za.ADMIN?"Admin System":"Operative Terminal"})]})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:s.jsx(N,{})}),s.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold truncate text-white",children:p.privacyMode?((j=t.gamification)==null?void 0:j.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(PR,{userId:t.id,settings:p,onUpdateSettings:x,dropUp:!0}),s.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:s.jsx(dg,{className:"w-4 h-4"})})]})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[s.jsx(kR,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),s.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${p.performanceMode?"no-anim":"animate-slide-up"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),s.jsx(lce,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:x})]})},fce=[.75,1,1.25,1.5,2],LR=({textContent:t,compact:e})=>{const[r,n]=T.useState(!1),[a,i]=T.useState(1),[o,c]=T.useState(0),[d,h]=T.useState(!1),m=T.useRef(null),p=T.useRef([]);T.useEffect(()=>{if(!t){p.current=[];return}const L=t.replace(/\n+/g,". ").split(new RegExp("(?<=[.!?])\\s+")).map(O=>O.trim()).filter(O=>O.length>2);p.current=L,c(0)},[t]);const x=T.useCallback(()=>{window.speechSynthesis.cancel(),n(!1)},[]),y=T.useCallback(L=>{const O=p.current;if(L<0||L>=O.length){n(!1);return}window.speechSynthesis.cancel();const R=new SpeechSynthesisUtterance(O[L]);R.rate=a,R.onend=()=>{const A=L+1;A<O.length?(c(A),y(A)):n(!1)},R.onerror=()=>{n(!1)},m.current=R,c(L),window.speechSynthesis.speak(R)},[a]),S=T.useCallback(()=>{r?x():(n(!0),y(o))},[r,o,y,x]),N=T.useCallback(()=>{const L=Math.max(0,o-1);c(L),r&&y(L)},[o,r,y]),w=T.useCallback(()=>{const L=Math.min(p.current.length-1,o+1);c(L),r&&y(L)},[o,r,y]),j=T.useCallback(L=>{if(i(L),h(!1),r){window.speechSynthesis.cancel();const O=new SpeechSynthesisUtterance(p.current[o]);O.rate=L,O.onend=()=>{const R=o+1;R<p.current.length?(c(R),y(R)):n(!1)},m.current=O,window.speechSynthesis.speak(O)}},[r,o,y]);if(T.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),!t||p.current.length===0)return null;if(e)return s.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${r?"text-amber-300 bg-amber-500/20 border-amber-500/30 hover:bg-amber-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:r?"Stop Reading":"Read Aloud",children:[r?s.jsx(Xle,{className:"w-3 h-3"}):s.jsx(GH,{className:"w-3 h-3"}),r?"Stop Reading":"Read Aloud"]});const k=p.current.length,I=k>0?(o+1)/k*100:0;return s.jsxs("div",{className:"flex items-center gap-2 bg-black/40 rounded-xl px-3 py-2 border border-white/10",children:[s.jsx("button",{onClick:S,className:`p-1.5 rounded-lg transition ${r?"bg-amber-500/20 text-amber-400":"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20"}`,children:r?s.jsx(Ble,{className:"w-4 h-4"}):s.jsx(Ff,{className:"w-4 h-4"})}),s.jsx("button",{onClick:N,disabled:o===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(zle,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:w,disabled:o>=k-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Ule,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-300",style:{width:`${I}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-500 font-mono min-w-[3rem] text-center",children:[o+1,"/",k]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-1 text-[10px] text-gray-400 hover:text-white bg-white/5 px-2 py-1 rounded-lg border border-white/10 transition",children:[s.jsx(Nle,{className:"w-3 h-3"}),a,"x"]}),d&&s.jsx("div",{className:"absolute bottom-full right-0 mb-1 bg-[#1a1b26] border border-white/10 rounded-lg shadow-lg overflow-hidden z-50",children:fce.map(L=>s.jsxs("button",{onClick:()=>j(L),className:`block w-full text-left px-3 py-1.5 text-xs transition ${a===L?"bg-purple-600/30 text-purple-300":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[L,"x"]},L))})]})]})},mce=["#ef4444","#f59e0b","#22c55e","#3b82f6","#a855f7","#ffffff"],pce=[2,4,6,8],gce=({containerRef:t,onAnnotationsChange:e})=>{const r=T.useRef(null),[n,a]=T.useState(!1),[i,o]=T.useState("pen"),[c,d]=T.useState("#ef4444"),[h,m]=T.useState(4),[p,x]=T.useState(!1),[y,S]=T.useState(!1),N=T.useRef([]),w=T.useRef(!1),j=T.useRef([]),k=T.useCallback(()=>{const P=r.current,$=t.current;if(!P||!$)return;const B=$.getBoundingClientRect();P.width=B.width,P.height=B.height,P.style.width=`${B.width}px`,P.style.height=`${B.height}px`,I()},[t]);T.useEffect(()=>{if(!n)return;k();const P=new ResizeObserver(k);return t.current&&P.observe(t.current),()=>P.disconnect()},[n,k,t]);const I=T.useCallback(()=>{const P=r.current;if(!P)return;const $=P.getContext("2d");if($){$.clearRect(0,0,P.width,P.height);for(const B of N.current)if(!(B.points.length<2)){$.beginPath(),$.strokeStyle=B.tool==="eraser"?"rgba(0,0,0,0)":B.color,$.lineWidth=B.width,$.lineCap="round",$.lineJoin="round",B.tool==="eraser"?$.globalCompositeOperation="destination-out":$.globalCompositeOperation="source-over",$.moveTo(B.points[0].x,B.points[0].y);for(let G=1;G<B.points.length;G++)$.lineTo(B.points[G].x,B.points[G].y);$.stroke()}$.globalCompositeOperation="source-over"}},[]),L=T.useCallback(P=>{const $=r.current;if(!$)return null;const B=$.getBoundingClientRect();if("touches"in P){const G=P.touches[0];return{x:G.clientX-B.left,y:G.clientY-B.top}}return{x:P.clientX-B.left,y:P.clientY-B.top}},[]),O=T.useCallback(P=>{if(!n)return;P.preventDefault();const $=L(P);$&&(w.current=!0,j.current=[$])},[n,L]),R=T.useCallback(P=>{if(!w.current||!n)return;P.preventDefault();const $=L(P);if(!$)return;j.current.push($);const B=r.current;if(!B)return;const G=B.getContext("2d");if(!G)return;const K=j.current;if(K.length<2)return;G.beginPath(),i==="eraser"?(G.globalCompositeOperation="destination-out",G.strokeStyle="rgba(0,0,0,1)"):(G.globalCompositeOperation="source-over",G.strokeStyle=c),G.lineWidth=i==="eraser"?h*4:h,G.lineCap="round",G.lineJoin="round";const H=K[K.length-2],Z=K[K.length-1];G.moveTo(H.x,H.y),G.lineTo(Z.x,Z.y),G.stroke(),G.globalCompositeOperation="source-over"},[n,L,i,c,h]),A=T.useCallback(()=>{w.current&&(w.current=!1,j.current.length>1&&(N.current.push({points:[...j.current],color:c,width:i==="eraser"?h*4:h,tool:i}),e==null||e(N.current.length>0)),j.current=[])},[c,h,i,e]),E=T.useCallback(()=>{N.current.pop(),I(),e==null||e(N.current.length>0)},[I,e]),C=T.useCallback(()=>{N.current=[],I(),e==null||e(!1)},[I,e]),U=T.useCallback(()=>{a(P=>!P),x(!1),S(!1)},[]);return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:U,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${n?"text-red-300 bg-red-500/20 border-red-500/30 hover:bg-red-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:"Annotate",children:[s.jsx(Jv,{className:"w-3 h-3"}),n?"Clear Annotations":"Annotate"]}),n&&s.jsx("canvas",{ref:r,className:"absolute inset-0 z-30",style:{cursor:"crosshair",touchAction:"none"},onMouseDown:O,onMouseMove:R,onMouseUp:A,onMouseLeave:A,onTouchStart:O,onTouchMove:R,onTouchEnd:A}),n&&s.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-[#1a1b26]/95 backdrop-blur-md px-4 py-2 rounded-xl border border-white/10 shadow-2xl",children:[s.jsx("button",{onClick:()=>o("pen"),className:`p-2 rounded-lg transition ${i==="pen"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Pen",children:s.jsx(Jv,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>o("eraser"),className:`p-2 rounded-lg transition ${i==="eraser"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Eraser",children:s.jsx(ble,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{x(!p),S(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Color",children:[s.jsx(Ple,{className:"w-4 h-4"}),s.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-2 h-2 rounded-full",style:{backgroundColor:c}})]}),p&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-1.5 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:mce.map(P=>s.jsx("button",{onClick:()=>{d(P),x(!1)},className:`w-6 h-6 rounded-full border-2 transition ${c===P?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:P}},P))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>{S(!y),x(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Line width",children:s.jsx(Q2,{className:"w-4 h-4"})}),y&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-2 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:pce.map(P=>s.jsx("button",{onClick:()=>{m(P),S(!1)},className:`flex items-center justify-center w-8 h-8 rounded-lg transition ${h===P?"bg-purple-600/30 border border-purple-500/30":"hover:bg-white/5"}`,children:s.jsx("div",{className:"rounded-full bg-white",style:{width:P*2,height:P*2}})},P))})]}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsx("button",{onClick:E,disabled:N.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 disabled:opacity-30 transition",title:"Undo",children:s.jsx(Gle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:C,disabled:N.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-red-400 hover:bg-red-500/10 disabled:opacity-30 transition",title:"Clear all",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})},xce={TEXT:s.jsx(l0,{className:"w-3.5 h-3.5"}),MC:s.jsx(H2,{className:"w-3.5 h-3.5"}),SHORT_ANSWER:s.jsx(sf,{className:"w-3.5 h-3.5"}),CHECKLIST:s.jsx(cE,{className:"w-3.5 h-3.5"}),VOCABULARY:s.jsx(zi,{className:"w-3.5 h-3.5"}),INFO_BOX:s.jsx(K2,{className:"w-3.5 h-3.5"}),SECTION_HEADER:s.jsx(DH,{className:"w-3.5 h-3.5"}),IMAGE:s.jsx(oE,{className:"w-3.5 h-3.5"}),VIDEO:s.jsx(Ff,{className:"w-3.5 h-3.5"}),OBJECTIVES:s.jsx(cs,{className:"w-3.5 h-3.5"}),DIVIDER:s.jsx(Q2,{className:"w-3.5 h-3.5"}),EXTERNAL_LINK:s.jsx(G2,{className:"w-3.5 h-3.5"}),EMBED:s.jsx(RH,{className:"w-3.5 h-3.5"}),VOCAB_LIST:s.jsx(LH,{className:"w-3.5 h-3.5"}),ACTIVITY:s.jsx(Vn,{className:"w-3.5 h-3.5"}),SORTING:s.jsx(iE,{className:"w-3.5 h-3.5"}),DATA_TABLE:s.jsx(qH,{className:"w-3.5 h-3.5"}),BAR_CHART:s.jsx(Vf,{className:"w-3.5 h-3.5"}),RANKING:s.jsx(nf,{className:"w-3.5 h-3.5"}),LINKED:s.jsx(Qv,{className:"w-3.5 h-3.5"})},yce={TEXT:"Reading",MC:"Question",SHORT_ANSWER:"Response",CHECKLIST:"Checklist",VOCABULARY:"Vocabulary",INFO_BOX:"Info",SECTION_HEADER:"Section",IMAGE:"Image",VIDEO:"Video",OBJECTIVES:"Objectives",DIVIDER:"Divider",EXTERNAL_LINK:"Link",EMBED:"Embed",VOCAB_LIST:"Vocab List",ACTIVITY:"Activity",SORTING:"Sorting",DATA_TABLE:"Data Table",BAR_CHART:"Bar Chart",RANKING:"Ranking",LINKED:"Follow-up"},vce=({blocks:t,currentBlockIndex:e,completedBlocks:r,onNavigateToBlock:n,engagementTime:a=0,xpEarned:i=0})=>{const o=t.filter(j=>["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(j.type)),c=o.filter(j=>r.has(j.id)).length,d=o.length,h=d>0?Math.round(c/d*100):e>=t.length-1?100:Math.round((e+1)/t.length*100),m=100,p=8,x=(m-p)/2,y=2*Math.PI*x,S=y-h/100*y,N=Math.floor(a/60),w=a%60;return s.jsxs("div",{className:"w-56 flex-shrink-0 flex flex-col gap-4 overflow-y-auto custom-scrollbar pr-1",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 bg-black/30 rounded-2xl p-4 border border-white/5",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{width:m,height:m,className:"transform -rotate-90",children:[s.jsx("circle",{cx:m/2,cy:m/2,r:x,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:p}),s.jsx("circle",{cx:m/2,cy:m/2,r:x,fill:"none",stroke:h===100?"#34d399":"#a855f7",strokeWidth:p,strokeLinecap:"round",strokeDasharray:y,strokeDashoffset:S,className:"transition-all duration-700 ease-out"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("span",{className:`text-xl font-black ${h===100?"text-emerald-400":"text-white"}`,children:[h,"%"]})})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[c,"/",d," questions"]}),s.jsxs("div",{className:"flex gap-3 text-[10px] text-gray-500 font-mono",children:[s.jsxs("span",{children:[N,":",String(w).padStart(2,"0")]}),i>0&&s.jsxs("span",{className:"text-amber-400",children:["+",i," XP"]})]})]}),s.jsxs("div",{className:"bg-black/30 rounded-2xl p-3 border border-white/5 flex flex-col gap-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:"Sections"}),t.map((j,k)=>{const I=k===e,L=r.has(j.id),O=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(j.type);return s.jsxs("button",{onClick:()=>n(k),className:`flex items-center gap-2 px-2 py-1.5 rounded-lg text-left transition-all text-[11px] ${I?"bg-purple-500/20 text-purple-300 border border-purple-500/30":L?"text-emerald-400/80 hover:bg-emerald-500/10":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx("span",{className:"shrink-0 w-4 h-4 flex items-center justify-center",children:L?s.jsx(Lr,{className:"w-3.5 h-3.5 text-emerald-400"}):s.jsx("span",{className:I?"text-purple-400":"text-gray-600",children:xce[j.type]||s.jsx(l0,{className:"w-3.5 h-3.5"})})}),s.jsxs("span",{className:"truncate flex-1 font-medium",children:[yce[j.type]||j.type,O&&!L&&s.jsx("span",{className:"ml-1 text-[9px] text-amber-400/60",children:"*"})]}),s.jsx("span",{className:`text-[9px] font-mono ${I?"text-purple-400":"text-gray-600"}`,children:k+1})]},j.id)})]})]})},BR=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"],bce=({block:t})=>s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:t.content}),wce=({block:t})=>{const r={tip:"border-green-500/30 bg-green-500/5 text-green-400",warning:"border-amber-500/30 bg-amber-500/5 text-amber-400",note:"border-blue-500/30 bg-blue-500/5 text-blue-400"}[t.variant||"note"];return s.jsxs("div",{className:`border rounded-xl p-4 text-sm ${r}`,children:[s.jsx("div",{className:"font-bold text-xs uppercase tracking-widest mb-1",children:t.variant==="tip"?"Tip":t.variant==="warning"?"Warning":"Note"}),s.jsx("div",{className:"text-gray-300",children:t.content})]})},Sce=({block:t,onComplete:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!1),o=r===t.correctAnswer,c=()=>{r!==null&&(i(!0),e(r===t.correctAnswer))};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(H2,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.options||[]).map((d,h)=>s.jsx("button",{onClick:()=>!a&&n(h),disabled:a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a&&h===t.correctAnswer?"border-green-500/50 bg-green-500/10 text-green-400":a&&h===r&&!o?"border-red-500/50 bg-red-500/10 text-red-400":r===h?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+h),"."]}),s.jsx("span",{children:d}),a&&h===t.correctAnswer&&s.jsx(Lr,{className:"w-4 h-4 text-green-400 ml-auto"}),a&&h===r&&!o&&s.jsx(ao,{className:"w-4 h-4 text-red-400 ml-auto"})]})},h))}),!a&&s.jsx("button",{onClick:c,disabled:r===null,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Check Answer"}),a&&s.jsx("div",{className:`text-xs font-bold ${o?"text-green-400":"text-red-400"}`,children:o?"Correct!":"Incorrect  review the material above."})]})},Nce=({block:t,onComplete:e})=>{const[r,n]=T.useState(""),[a,i]=T.useState(!1),[o,c]=T.useState(!1),d=()=>{if(!r.trim())return;const m=(t.acceptedAnswers||[]).map(p=>p.toLowerCase().trim()).includes(r.toLowerCase().trim());c(m),i(!0),e(m)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(sf,{className:"w-4 h-4 text-cyan-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),disabled:a,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:h=>h.key==="Enter"&&d()}),!a&&s.jsx("button",{onClick:d,disabled:!r.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),a&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${o?"text-green-400":"text-amber-400"}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Lr,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(ao,{className:"w-3 h-3"})," Accepted answers: ",(t.acceptedAnswers||[]).join(", ")]})})]})},_ce=({block:t})=>{const[e,r]=T.useState(!1);return s.jsx("button",{onClick:()=>r(!e),className:"w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(zi,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:t.term}),e?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:t.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal definition"})]})]})})},Tce=({block:t,onComplete:e})=>{const[r,n]=T.useState(new Set),a=(t.items||[]).length>0&&r.size===(t.items||[]).length,i=o=>{const c=new Set(r);c.has(o)?c.delete(o):c.add(o),n(c),c.size===(t.items||[]).length&&e(!0)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(cE,{className:"w-4 h-4 text-green-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.items||[]).map((o,c)=>s.jsxs("button",{onClick:()=>i(c),className:`w-full text-left flex items-center gap-3 p-3 rounded-xl border text-sm transition ${r.has(c)?"border-green-500/30 bg-green-500/5 text-green-400 line-through":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition ${r.has(c)?"border-green-500 bg-green-500":"border-gray-600"}`,children:r.has(c)&&s.jsx(Lr,{className:"w-3 h-3 text-white"})}),o]},c))}),a&&s.jsxs("div",{className:"text-xs font-bold text-green-400 flex items-center gap-1",children:[s.jsx(Lr,{className:"w-3 h-3"})," All items completed!"]})]})},jce=({block:t})=>s.jsxs("div",{className:"text-center py-2",children:[t.icon&&s.jsx("div",{className:"text-3xl mb-2",children:t.icon}),s.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:t.title}),t.subtitle&&s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.subtitle})]}),Ace=({block:t})=>{const e=(t.url||"").replace(/\/file\/d\/([^/]+)\/.*/,"/uc?export=view&id=$1");return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",children:s.jsx("img",{src:e!==t.url?e:t.url,alt:t.alt||t.caption||"",className:"w-full max-h-[500px] object-contain",loading:"lazy"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]})},Ece=({block:t})=>{const r=(n=>{const a=n.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return a?`https://www.youtube.com/embed/${a[1]}`:""})(t.url||"");return r?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 aspect-video bg-black",children:s.jsx("iframe",{src:r,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",title:t.caption||"Video"})}),t.caption&&s.jsxs("p",{className:"text-xs text-gray-500 text-center italic flex items-center justify-center gap-1",children:[s.jsx(Ff,{className:"w-3 h-3"})," ",t.caption]})]}):s.jsx("div",{className:"text-sm text-gray-500 italic",children:"Invalid video URL"})},kce=({block:t})=>s.jsxs("div",{className:"border border-emerald-500/20 bg-emerald-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-bold text-sm",children:[s.jsx(cs,{className:"w-4 h-4"}),t.title||"Learning Objectives"]}),s.jsx("ul",{className:"space-y-1",children:(t.items||[]).map((e,r)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[s.jsx("span",{className:"text-emerald-400 mt-0.5 shrink-0",children:""}),e]},r))})]}),Cce=()=>s.jsx("div",{className:"py-2",children:s.jsx("hr",{className:"border-white/10"})}),Oce=({block:t})=>s.jsx("a",{href:t.url,target:t.openInNewTab!==!1?"_blank":"_self",rel:"noopener noreferrer",className:"block p-4 rounded-xl border border-purple-500/20 bg-purple-500/5 hover:bg-purple-500/10 transition group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-purple-300 group-hover:text-purple-200 transition",children:t.title||t.url}),t.content&&s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:t.content})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-400 bg-purple-500/10 px-3 py-1.5 rounded-lg shrink-0 ml-3",children:[t.buttonLabel||"Open"," ",s.jsx(G2,{className:"w-3 h-3"})]})]})}),Ice=({block:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",style:{height:t.height||500},children:s.jsx("iframe",{src:t.url,className:"w-full h-full border-0",title:t.caption||"Embedded content",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]}),Rce=({block:t})=>{const[e,r]=T.useState(new Set);return s.jsx("div",{className:"space-y-2",children:(t.terms||[]).map((n,a)=>s.jsx("button",{onClick:()=>r(i=>{const o=new Set(i);return o.has(a)?o.delete(a):o.add(a),o}),className:"w-full text-left p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(zi,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:n.term}),e.has(a)?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:n.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal"})]})]})},a))})},Mce=({block:t})=>s.jsxs("div",{className:"border border-amber-500/20 bg-amber-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-400 font-bold text-sm",children:[t.icon&&s.jsx("span",{className:"text-lg",children:t.icon}),t.title||"Activity"]}),s.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-line",children:t.instructions})]}),Dce=({block:t,onComplete:e})=>{const r=t.sortItems||[],[n,a]=T.useState({}),[i,o]=T.useState(!1),c=r.map((S,N)=>N).filter(S=>!(S in n)),d=Object.entries(n).filter(([,S])=>S==="left").map(([S])=>parseInt(S)),h=Object.entries(n).filter(([,S])=>S==="right").map(([S])=>parseInt(S)),m=(S,N)=>{i||a(w=>({...w,[S]:N}))},p=S=>{i||a(N=>{const w={...N};return delete w[S],w})},x=()=>{if(c.length>0)return;o(!0);const S=r.every((N,w)=>n[w]===N.correct);e(S)},y=r.filter((S,N)=>n[N]===S.correct).length;return s.jsxs("div",{className:"space-y-3",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),t.instructions&&s.jsx("p",{className:"text-xs text-gray-400",children:t.instructions}),c.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Sort these items"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(S=>s.jsxs("div",{className:"flex items-center gap-1 bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm text-gray-300",children:[s.jsx("span",{children:r[S].text}),s.jsx("button",{onClick:()=>m(S,"left"),className:"ml-1 text-[10px] bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded hover:bg-blue-500/30 transition",children:t.leftLabel||"L"}),s.jsx("button",{onClick:()=>m(S,"right"),className:"text-[10px] bg-orange-500/20 text-orange-300 px-1.5 py-0.5 rounded hover:bg-orange-500/30 transition",children:t.rightLabel||"R"})]},S))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"rounded-xl border border-blue-500/20 bg-blue-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest mb-2",children:t.leftLabel||"Category A"}),s.jsx("div",{className:"space-y-1",children:d.map(S=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[S].correct==="left"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[S].text}),!i&&s.jsx("button",{onClick:()=>p(S),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[S].correct==="left"&&s.jsx(Lr,{className:"w-3 h-3 text-green-400"}),i&&r[S].correct!=="left"&&s.jsx(ao,{className:"w-3 h-3 text-red-400"})]},S))})]}),s.jsxs("div",{className:"rounded-xl border border-orange-500/20 bg-orange-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-2",children:t.rightLabel||"Category B"}),s.jsx("div",{className:"space-y-1",children:h.map(S=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[S].correct==="right"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[S].text}),!i&&s.jsx("button",{onClick:()=>p(S),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[S].correct==="right"&&s.jsx(Lr,{className:"w-3 h-3 text-green-400"}),i&&r[S].correct!=="right"&&s.jsx(ao,{className:"w-3 h-3 text-red-400"})]},S))})]})]}),!i&&c.length===0&&r.length>0&&s.jsx("button",{onClick:x,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Sorting"}),i&&s.jsx("div",{className:`text-xs font-bold ${y===r.length?"text-green-400":"text-amber-400"}`,children:y===r.length?"All correct!":`${y}/${r.length} correct`})]})},Pce=({block:t})=>{const e=t.columns||[],r=t.trials||3,[n,a]=T.useState(()=>Array.from({length:r},()=>Object.fromEntries(e.map(o=>[o.key,""])))),i=(o,c,d)=>{a(h=>{const m=[...h];return m[o]={...m[o],[c]:d},m})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-white/10",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/30",children:[s.jsx("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left w-12",children:"#"}),e.map(o=>s.jsxs("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left",children:[o.label,o.unit?` (${o.unit})`:""]},o.key))]})}),s.jsx("tbody",{children:n.map((o,c)=>s.jsxs("tr",{className:"border-t border-white/5",children:[s.jsx("td",{className:"px-3 py-1 text-xs text-gray-600 font-mono",children:c+1}),e.map(d=>s.jsx("td",{className:"px-1 py-1",children:d.editable!==!1?s.jsx("input",{type:"text",value:o[d.key]||"",onChange:h=>i(c,d.key,h.target.value),className:"w-full bg-black/20 border border-white/5 rounded px-2 py-1 text-sm text-white placeholder-gray-700 focus:outline-none focus:border-purple-500/50 transition"}):s.jsx("span",{className:"px-2 py-1 text-gray-400",children:o[d.key]})},d.key))]},c))})]})})]})},Lce=({block:t})=>{const e=t.barCount||3,r=t.height||300,[n,a]=T.useState(()=>Array(e).fill(0)),i=Math.max(...n.map(Math.abs),1),o=["#a855f7","#3b82f6","#ef4444","#22c55e","#f59e0b","#06b6d4","#ec4899","#8b5cf6","#14b8a6","#f97316"],c=(d,h)=>{const m=h.currentTarget.getBoundingClientRect(),p=h.clientY-m.top,x=Math.round((m.height/2-p)/(m.height/2)*10);a(y=>{const S=[...y];return S[d]=x,S})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium text-center",children:t.title}),s.jsx("div",{className:"flex items-end justify-center gap-4 px-4",style:{height:r},children:n.map((d,h)=>{const m=Math.abs(d)/Math.max(i,10)*(r/2-20);return s.jsxs("div",{className:"flex flex-col items-center gap-1 flex-1 h-full justify-center cursor-pointer",onClick:p=>c(h,p),children:[s.jsxs("div",{className:"relative w-full max-w-[60px] h-full flex items-center",children:[s.jsx("div",{className:"absolute inset-0 border-b border-white/10",style:{top:"50%"}}),s.jsx("div",{className:"absolute left-0 right-0 rounded-t-lg transition-all duration-200",style:{height:m,bottom:d>=0?"50%":void 0,top:d<0?"50%":void 0,backgroundColor:o[h%o.length],opacity:.8}})]}),s.jsx("div",{className:"text-[10px] text-gray-400 font-mono",children:d}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Bar ",h+1]})]},h)})}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 px-4",children:[s.jsx("span",{children:t.initialLabel}),s.jsx("span",{children:t.deltaLabel}),s.jsx("span",{children:t.finalLabel})]})]})},Bce=({block:t,onComplete:e})=>{const r=t.items||[],n=T.useMemo(()=>{const y=r.map((N,w)=>({item:N,origIdx:w}));let S=t.id.split("").reduce((N,w)=>N+w.charCodeAt(0),0);for(let N=y.length-1;N>0;N--){S=(S*16807+0)%2147483647;const w=S%(N+1);[y[N],y[w]]=[y[w],y[N]]}return y},[t.id,r]),[a,i]=T.useState(n),[o,c]=T.useState(!1),[d,h]=T.useState(null),m=(y,S)=>{o||i(N=>{const w=[...N],[j]=w.splice(y,1);return w.splice(S,0,j),w})},p=()=>{c(!0);const y=a.every((S,N)=>S.origIdx===N);e(y)},x=a.filter((y,S)=>y.origIdx===S).length;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(nf,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-1",children:a.map((y,S)=>s.jsxs("div",{draggable:!o,onDragStart:()=>h(S),onDragOver:N=>N.preventDefault(),onDrop:()=>{d!==null&&m(d,S),h(null)},className:`flex items-center gap-2 p-3 rounded-xl border text-sm transition cursor-grab active:cursor-grabbing ${o?y.origIdx===S?"border-green-500/30 bg-green-500/5 text-green-400":"border-red-500/30 bg-red-500/5 text-red-400":d===S?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx(nf,{className:"w-4 h-4 text-gray-600 shrink-0"}),s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[S+1,"."]}),s.jsx("span",{className:"flex-1",children:y.item}),o&&y.origIdx===S&&s.jsx(Lr,{className:"w-4 h-4 text-green-400"}),o&&y.origIdx!==S&&s.jsx(ao,{className:"w-4 h-4 text-red-400"}),!o&&s.jsxs("div",{className:"flex gap-0.5",children:[s.jsx("button",{onClick:()=>S>0&&m(S,S-1),disabled:S===0,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(el,{className:"w-3 h-3 -rotate-90"})}),s.jsx("button",{onClick:()=>S<a.length-1&&m(S,S+1),disabled:S===a.length-1,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(el,{className:"w-3 h-3 rotate-90"})})]})]},y.origIdx))}),!o&&s.jsx("button",{onClick:p,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Order"}),o&&s.jsx("div",{className:`text-xs font-bold ${x===r.length?"text-green-400":"text-amber-400"}`,children:x===r.length?"Perfect order!":`${x}/${r.length} in correct position`})]})},$ce=({block:t,allBlocks:e,onComplete:r})=>{var p;const n=e.find(x=>x.id===t.linkedBlockId),[a,i]=T.useState(""),[o,c]=T.useState(!1),[d,h]=T.useState(!1),m=()=>{if(!a.trim())return;const x=(t.acceptedAnswers||[]).map(S=>S.toLowerCase().trim()),y=x.length===0||x.includes(a.toLowerCase().trim());h(y),c(!0),r(y)};return s.jsxs("div",{className:"space-y-3",children:[n&&s.jsxs("div",{className:"border border-white/10 bg-white/5 rounded-xl p-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[s.jsx(Qv,{className:"w-3 h-3"})," Referenced question"]}),s.jsx("p",{className:"text-xs text-gray-400",children:n.content})]}),s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(Qv,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),disabled:o,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:x=>x.key==="Enter"&&m()}),!o&&s.jsx("button",{onClick:m,disabled:!a.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),o&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${d?"text-green-400":"text-amber-400"}`,children:d?s.jsxs(s.Fragment,{children:[s.jsx(Lr,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(ao,{className:"w-3 h-3"})," ",(t.acceptedAnswers||[]).length>0?`Accepted: ${(p=t.acceptedAnswers)==null?void 0:p.join(", ")}`:"Response recorded"]})})]})},YH=({blocks:t,onBlockComplete:e,onAllComplete:r,showSidebar:n=!1,engagementTime:a,xpEarned:i})=>{const[o,c]=T.useState(new Set),[d,h]=T.useState(0),m=T.useCallback((k,I)=>{e==null||e(k,I),c(L=>{const O=new Set(L);return O.add(k),t.filter(A=>BR.includes(A.type)).every(A=>O.has(A.id))&&(r==null||r()),O})},[t,e,r]),p=()=>{d<t.length-1&&h(k=>k+1)},x=()=>{d>0&&h(k=>k-1)};if(t.length===0)return null;const y=t[d],S=BR.includes(y.type),N=o.has(y.id),w=k=>{const I=L=>m(k.id,L);switch(k.type){case"TEXT":return s.jsx(bce,{block:k});case"INFO_BOX":return s.jsx(wce,{block:k});case"MC":return s.jsx(Sce,{block:k,onComplete:I});case"SHORT_ANSWER":return s.jsx(Nce,{block:k,onComplete:I});case"VOCABULARY":return s.jsx(_ce,{block:k});case"CHECKLIST":return s.jsx(Tce,{block:k,onComplete:I});case"SECTION_HEADER":return s.jsx(jce,{block:k});case"IMAGE":return s.jsx(Ace,{block:k});case"VIDEO":return s.jsx(Ece,{block:k});case"OBJECTIVES":return s.jsx(kce,{block:k});case"DIVIDER":return s.jsx(Cce,{});case"EXTERNAL_LINK":return s.jsx(Oce,{block:k});case"EMBED":return s.jsx(Ice,{block:k});case"VOCAB_LIST":return s.jsx(Rce,{block:k});case"ACTIVITY":return s.jsx(Mce,{block:k});case"SORTING":return s.jsx(Dce,{block:k,onComplete:I});case"DATA_TABLE":return s.jsx(Pce,{block:k});case"BAR_CHART":return s.jsx(Lce,{block:k});case"RANKING":return s.jsx(Bce,{block:k,onComplete:I});case"LINKED":return s.jsx($ce,{block:k,allBlocks:t,onComplete:I});default:return s.jsxs("div",{className:"text-sm text-gray-500 italic",children:["Unknown block type: ",k.type]})}},j=s.jsxs("div",{className:"space-y-4 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-500",style:{width:`${(d+1)/t.length*100}%`}})}),s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[d+1,"/",t.length]})]}),s.jsx("div",{className:"animate-in fade-in slide-in-from-right-2 duration-200",children:w(y)},y.id),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/5",children:[s.jsx("button",{onClick:x,disabled:d===0,className:"text-xs text-gray-500 hover:text-white disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-white/5",children:"Previous"}),s.jsx("div",{className:"flex gap-1",children:t.map((k,I)=>s.jsx("button",{onClick:()=>h(I),className:`w-2 h-2 rounded-full transition ${I===d?"bg-purple-500 scale-125":o.has(k.id)?"bg-green-500":"bg-white/10 hover:bg-white/20"}`},k.id))}),s.jsxs("button",{onClick:p,disabled:d>=t.length-1||S&&!N,className:"flex items-center gap-1 text-xs text-purple-400 hover:text-purple-300 disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-purple-500/10",children:["Next ",s.jsx(el,{className:"w-3 h-3"})]})]})]});return n&&t.length>=3?s.jsxs("div",{className:"flex gap-4",children:[j,s.jsx(vce,{blocks:t,currentBlockIndex:d,completedBlocks:o,onNavigateToBlock:h,engagementTime:a,xpEarned:i})]}):j};class es{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new es(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Is{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Is(r,es.range(this,e))}}class ut{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,o=r&&r.loc;if(o&&o.start<=o.end){var c=o.lexer.input;a=o.start,i=o.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var m;i+15<c.length?m=c.slice(i,i+15)+"":m=c.slice(i),n+=h+d+m}var p=new Error(n);return p.name="ParseError",p.__proto__=ut.prototype,p.position=a,a!=null&&i!=null&&(p.length=i-a),p.rawMessage=e,p}}ut.prototype.__proto__=Error.prototype;var zce=function(e,r){return e===void 0?r:e},Uce=/([A-Z])/g,Vce=function(e){return e.replace(Uce,"-$1").toLowerCase()},Fce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},qce=/[&><"']/g;function Hce(t){return String(t).replace(qce,e=>Fce[e])}var JH=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Gce=function(e){var r=JH(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Wce=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Kce=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Qr={deflt:zce,escape:Hce,hyphenate:Vce,getBaseElem:JH,isCharacterBox:Gce,protocolFromUrl:Kce},xv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Qce(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class dE{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in xv)if(xv.hasOwnProperty(r)){var n=xv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:Qce(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ut("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Qr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class au{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Go[Xce[this.id]]}sub(){return Go[Yce[this.id]]}fracNum(){return Go[Jce[this.id]]}fracDen(){return Go[Zce[this.id]]}cramp(){return Go[eue[this.id]]}text(){return Go[tue[this.id]]}isTight(){return this.size>=2}}var hE=0,tb=1,Ph=2,ec=3,hg=4,eo=5,of=6,Li=7,Go=[new au(hE,0,!1),new au(tb,0,!0),new au(Ph,1,!1),new au(ec,1,!0),new au(hg,2,!1),new au(eo,2,!0),new au(of,3,!1),new au(Li,3,!0)],Xce=[hg,eo,hg,eo,of,Li,of,Li],Yce=[eo,eo,eo,eo,Li,Li,Li,Li],Jce=[Ph,ec,hg,eo,of,Li,of,Li],Zce=[ec,ec,eo,eo,Li,Li,Li,Li],eue=[tb,tb,ec,ec,eo,eo,Li,Li],tue=[hE,tb,Ph,ec,Ph,ec,Ph,ec],Ht={DISPLAY:Go[hE],TEXT:Go[Ph],SCRIPT:Go[hg],SCRIPTSCRIPT:Go[of]},QT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function rue(t){for(var e=0;e<QT.length;e++)for(var r=QT[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var yv=[];QT.forEach(t=>t.blocks.forEach(e=>yv.push(...e)));function ZH(t){for(var e=0;e<yv.length;e+=2)if(t>=yv[e]&&t<=yv[e+1])return!0;return!1}var hh=80,nue=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},aue=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},iue=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},sue=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},oue=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},lue=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},cue=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},uue=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=nue(r,hh);break;case"sqrtSize1":a=aue(r,hh);break;case"sqrtSize2":a=iue(r,hh);break;case"sqrtSize3":a=sue(r,hh);break;case"sqrtSize4":a=oue(r,hh);break;case"sqrtTall":a=cue(r,hh,n)}return a},due=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},$R={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},hue=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Tx{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Xo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},_y={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},zR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function fue(t,e){Xo[t]=e}function fE(t,e,r){if(!Xo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Xo[e][n];if(!a&&t[0]in zR&&(n=zR[t[0]].charCodeAt(0),a=Xo[e][n]),!a&&r==="text"&&ZH(n)&&(a=Xo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var w3={};function mue(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!w3[e]){var r=w3[e]={cssEmPerMu:_y.quad[e]/18};for(var n in _y)_y.hasOwnProperty(n)&&(r[n]=_y[n][e])}return w3[e]}var pue=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],UR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],VR=function(e,r){return r.size<2?e:pue[e-1][r.size-1]};class Ul{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Ul.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=UR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Ul(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:VR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:UR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=VR(Ul.BASESIZE,e);return this.size===r&&this.textSize===Ul.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Ul.BASESIZE?["sizing","reset-size"+this.size,"size"+Ul.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=mue(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Ul.BASESIZE=6;var XT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},gue={ex:!0,em:!0,mu:!0},eG=function(e){return typeof e!="string"&&(e=e.unit),e in XT||e in gue||e==="ex"},Zn=function(e,r){var n;if(e.unit in XT)n=XT[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ut("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},xt=function(e){return+e.toFixed(4)+"em"},Bu=function(e){return e.filter(r=>r).join(" ")},tG=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},rG=function(e){var r=document.createElement(e);r.className=Bu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},xue=/[\s"'>/=\x00-\x1f]/,nG=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Qr.escape(Bu(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Qr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Qr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(xue.test(i))throw new ut("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Qr.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class jx{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,tG.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return rG.call(this,"span")}toMarkup(){return nG.call(this,"span")}}class mE{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,tG.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return rG.call(this,"a")}toMarkup(){return nG.call(this,"a")}}class yue{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Qr.escape(this.src)+'"'+(' alt="'+Qr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Qr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Qr.escape(r)+'"'),e+="'/>",e}}var vue={:"",:"",:"",:""};class so{constructor(e,r,n,a,i,o,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=o||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=rue(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=vue[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=xt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Bu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Qr.escape(Bu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Qr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Qr.escape(n)+'"');var i=Qr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class dc{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Qr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class $u{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",$R[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Qr.escape(this.alternate)+'"/>':'<path d="'+Qr.escape($R[this.pathName])+'"/>'}}class YT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Qr.escape(this.attributes[r])+'"');return e+="/>",e}}function FR(t){if(t instanceof so)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function bue(t){if(t instanceof jx)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var wue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Sue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Pn={math:{},text:{}};function M(t,e,r,n,a,i){Pn[t][a]={font:e,group:r,replace:n},i&&n&&(Pn[t][n]=Pn[t][a])}var z="math",at="text",W="main",oe="ams",Kn="accent-token",Tt="bin",Vi="close",Hf="inner",qt="mathord",Ma="op-token",Ps="open",J2="punct",le="rel",wc="spacing",ge="textord";M(z,W,le,"","\\equiv",!0);M(z,W,le,"","\\prec",!0);M(z,W,le,"","\\succ",!0);M(z,W,le,"","\\sim",!0);M(z,W,le,"","\\perp");M(z,W,le,"","\\preceq",!0);M(z,W,le,"","\\succeq",!0);M(z,W,le,"","\\simeq",!0);M(z,W,le,"","\\mid",!0);M(z,W,le,"","\\ll",!0);M(z,W,le,"","\\gg",!0);M(z,W,le,"","\\asymp",!0);M(z,W,le,"","\\parallel");M(z,W,le,"","\\bowtie",!0);M(z,W,le,"","\\smile",!0);M(z,W,le,"","\\sqsubseteq",!0);M(z,W,le,"","\\sqsupseteq",!0);M(z,W,le,"","\\doteq",!0);M(z,W,le,"","\\frown",!0);M(z,W,le,"","\\ni",!0);M(z,W,le,"","\\propto",!0);M(z,W,le,"","\\vdash",!0);M(z,W,le,"","\\dashv",!0);M(z,W,le,"","\\owns");M(z,W,J2,".","\\ldotp");M(z,W,J2,"","\\cdotp");M(z,W,ge,"#","\\#");M(at,W,ge,"#","\\#");M(z,W,ge,"&","\\&");M(at,W,ge,"&","\\&");M(z,W,ge,"","\\aleph",!0);M(z,W,ge,"","\\forall",!0);M(z,W,ge,"","\\hbar",!0);M(z,W,ge,"","\\exists",!0);M(z,W,ge,"","\\nabla",!0);M(z,W,ge,"","\\flat",!0);M(z,W,ge,"","\\ell",!0);M(z,W,ge,"","\\natural",!0);M(z,W,ge,"","\\clubsuit",!0);M(z,W,ge,"","\\wp",!0);M(z,W,ge,"","\\sharp",!0);M(z,W,ge,"","\\diamondsuit",!0);M(z,W,ge,"","\\Re",!0);M(z,W,ge,"","\\heartsuit",!0);M(z,W,ge,"","\\Im",!0);M(z,W,ge,"","\\spadesuit",!0);M(z,W,ge,"","\\S",!0);M(at,W,ge,"","\\S");M(z,W,ge,"","\\P",!0);M(at,W,ge,"","\\P");M(z,W,ge,"","\\dag");M(at,W,ge,"","\\dag");M(at,W,ge,"","\\textdagger");M(z,W,ge,"","\\ddag");M(at,W,ge,"","\\ddag");M(at,W,ge,"","\\textdaggerdbl");M(z,W,Vi,"","\\rmoustache",!0);M(z,W,Ps,"","\\lmoustache",!0);M(z,W,Vi,"","\\rgroup",!0);M(z,W,Ps,"","\\lgroup",!0);M(z,W,Tt,"","\\mp",!0);M(z,W,Tt,"","\\ominus",!0);M(z,W,Tt,"","\\uplus",!0);M(z,W,Tt,"","\\sqcap",!0);M(z,W,Tt,"","\\ast");M(z,W,Tt,"","\\sqcup",!0);M(z,W,Tt,"","\\bigcirc",!0);M(z,W,Tt,"","\\bullet",!0);M(z,W,Tt,"","\\ddagger");M(z,W,Tt,"","\\wr",!0);M(z,W,Tt,"","\\amalg");M(z,W,Tt,"&","\\And");M(z,W,le,"","\\longleftarrow",!0);M(z,W,le,"","\\Leftarrow",!0);M(z,W,le,"","\\Longleftarrow",!0);M(z,W,le,"","\\longrightarrow",!0);M(z,W,le,"","\\Rightarrow",!0);M(z,W,le,"","\\Longrightarrow",!0);M(z,W,le,"","\\leftrightarrow",!0);M(z,W,le,"","\\longleftrightarrow",!0);M(z,W,le,"","\\Leftrightarrow",!0);M(z,W,le,"","\\Longleftrightarrow",!0);M(z,W,le,"","\\mapsto",!0);M(z,W,le,"","\\longmapsto",!0);M(z,W,le,"","\\nearrow",!0);M(z,W,le,"","\\hookleftarrow",!0);M(z,W,le,"","\\hookrightarrow",!0);M(z,W,le,"","\\searrow",!0);M(z,W,le,"","\\leftharpoonup",!0);M(z,W,le,"","\\rightharpoonup",!0);M(z,W,le,"","\\swarrow",!0);M(z,W,le,"","\\leftharpoondown",!0);M(z,W,le,"","\\rightharpoondown",!0);M(z,W,le,"","\\nwarrow",!0);M(z,W,le,"","\\rightleftharpoons",!0);M(z,oe,le,"","\\nless",!0);M(z,oe,le,"","\\@nleqslant");M(z,oe,le,"","\\@nleqq");M(z,oe,le,"","\\lneq",!0);M(z,oe,le,"","\\lneqq",!0);M(z,oe,le,"","\\@lvertneqq");M(z,oe,le,"","\\lnsim",!0);M(z,oe,le,"","\\lnapprox",!0);M(z,oe,le,"","\\nprec",!0);M(z,oe,le,"","\\npreceq",!0);M(z,oe,le,"","\\precnsim",!0);M(z,oe,le,"","\\precnapprox",!0);M(z,oe,le,"","\\nsim",!0);M(z,oe,le,"","\\@nshortmid");M(z,oe,le,"","\\nmid",!0);M(z,oe,le,"","\\nvdash",!0);M(z,oe,le,"","\\nvDash",!0);M(z,oe,le,"","\\ntriangleleft");M(z,oe,le,"","\\ntrianglelefteq",!0);M(z,oe,le,"","\\subsetneq",!0);M(z,oe,le,"","\\@varsubsetneq");M(z,oe,le,"","\\subsetneqq",!0);M(z,oe,le,"","\\@varsubsetneqq");M(z,oe,le,"","\\ngtr",!0);M(z,oe,le,"","\\@ngeqslant");M(z,oe,le,"","\\@ngeqq");M(z,oe,le,"","\\gneq",!0);M(z,oe,le,"","\\gneqq",!0);M(z,oe,le,"","\\@gvertneqq");M(z,oe,le,"","\\gnsim",!0);M(z,oe,le,"","\\gnapprox",!0);M(z,oe,le,"","\\nsucc",!0);M(z,oe,le,"","\\nsucceq",!0);M(z,oe,le,"","\\succnsim",!0);M(z,oe,le,"","\\succnapprox",!0);M(z,oe,le,"","\\ncong",!0);M(z,oe,le,"","\\@nshortparallel");M(z,oe,le,"","\\nparallel",!0);M(z,oe,le,"","\\nVDash",!0);M(z,oe,le,"","\\ntriangleright");M(z,oe,le,"","\\ntrianglerighteq",!0);M(z,oe,le,"","\\@nsupseteqq");M(z,oe,le,"","\\supsetneq",!0);M(z,oe,le,"","\\@varsupsetneq");M(z,oe,le,"","\\supsetneqq",!0);M(z,oe,le,"","\\@varsupsetneqq");M(z,oe,le,"","\\nVdash",!0);M(z,oe,le,"","\\precneqq",!0);M(z,oe,le,"","\\succneqq",!0);M(z,oe,le,"","\\@nsubseteqq");M(z,oe,Tt,"","\\unlhd");M(z,oe,Tt,"","\\unrhd");M(z,oe,le,"","\\nleftarrow",!0);M(z,oe,le,"","\\nrightarrow",!0);M(z,oe,le,"","\\nLeftarrow",!0);M(z,oe,le,"","\\nRightarrow",!0);M(z,oe,le,"","\\nleftrightarrow",!0);M(z,oe,le,"","\\nLeftrightarrow",!0);M(z,oe,le,"","\\vartriangle");M(z,oe,ge,"","\\hslash");M(z,oe,ge,"","\\triangledown");M(z,oe,ge,"","\\lozenge");M(z,oe,ge,"","\\circledS");M(z,oe,ge,"","\\circledR");M(at,oe,ge,"","\\circledR");M(z,oe,ge,"","\\measuredangle",!0);M(z,oe,ge,"","\\nexists");M(z,oe,ge,"","\\mho");M(z,oe,ge,"","\\Finv",!0);M(z,oe,ge,"","\\Game",!0);M(z,oe,ge,"","\\backprime");M(z,oe,ge,"","\\blacktriangle");M(z,oe,ge,"","\\blacktriangledown");M(z,oe,ge,"","\\blacksquare");M(z,oe,ge,"","\\blacklozenge");M(z,oe,ge,"","\\bigstar");M(z,oe,ge,"","\\sphericalangle",!0);M(z,oe,ge,"","\\complement",!0);M(z,oe,ge,"","\\eth",!0);M(at,W,ge,"","");M(z,oe,ge,"","\\diagup");M(z,oe,ge,"","\\diagdown");M(z,oe,ge,"","\\square");M(z,oe,ge,"","\\Box");M(z,oe,ge,"","\\Diamond");M(z,oe,ge,"","\\yen",!0);M(at,oe,ge,"","\\yen",!0);M(z,oe,ge,"","\\checkmark",!0);M(at,oe,ge,"","\\checkmark");M(z,oe,ge,"","\\beth",!0);M(z,oe,ge,"","\\daleth",!0);M(z,oe,ge,"","\\gimel",!0);M(z,oe,ge,"","\\digamma",!0);M(z,oe,ge,"","\\varkappa");M(z,oe,Ps,"","\\@ulcorner",!0);M(z,oe,Vi,"","\\@urcorner",!0);M(z,oe,Ps,"","\\@llcorner",!0);M(z,oe,Vi,"","\\@lrcorner",!0);M(z,oe,le,"","\\leqq",!0);M(z,oe,le,"","\\leqslant",!0);M(z,oe,le,"","\\eqslantless",!0);M(z,oe,le,"","\\lesssim",!0);M(z,oe,le,"","\\lessapprox",!0);M(z,oe,le,"","\\approxeq",!0);M(z,oe,Tt,"","\\lessdot");M(z,oe,le,"","\\lll",!0);M(z,oe,le,"","\\lessgtr",!0);M(z,oe,le,"","\\lesseqgtr",!0);M(z,oe,le,"","\\lesseqqgtr",!0);M(z,oe,le,"","\\doteqdot");M(z,oe,le,"","\\risingdotseq",!0);M(z,oe,le,"","\\fallingdotseq",!0);M(z,oe,le,"","\\backsim",!0);M(z,oe,le,"","\\backsimeq",!0);M(z,oe,le,"","\\subseteqq",!0);M(z,oe,le,"","\\Subset",!0);M(z,oe,le,"","\\sqsubset",!0);M(z,oe,le,"","\\preccurlyeq",!0);M(z,oe,le,"","\\curlyeqprec",!0);M(z,oe,le,"","\\precsim",!0);M(z,oe,le,"","\\precapprox",!0);M(z,oe,le,"","\\vartriangleleft");M(z,oe,le,"","\\trianglelefteq");M(z,oe,le,"","\\vDash",!0);M(z,oe,le,"","\\Vvdash",!0);M(z,oe,le,"","\\smallsmile");M(z,oe,le,"","\\smallfrown");M(z,oe,le,"","\\bumpeq",!0);M(z,oe,le,"","\\Bumpeq",!0);M(z,oe,le,"","\\geqq",!0);M(z,oe,le,"","\\geqslant",!0);M(z,oe,le,"","\\eqslantgtr",!0);M(z,oe,le,"","\\gtrsim",!0);M(z,oe,le,"","\\gtrapprox",!0);M(z,oe,Tt,"","\\gtrdot");M(z,oe,le,"","\\ggg",!0);M(z,oe,le,"","\\gtrless",!0);M(z,oe,le,"","\\gtreqless",!0);M(z,oe,le,"","\\gtreqqless",!0);M(z,oe,le,"","\\eqcirc",!0);M(z,oe,le,"","\\circeq",!0);M(z,oe,le,"","\\triangleq",!0);M(z,oe,le,"","\\thicksim");M(z,oe,le,"","\\thickapprox");M(z,oe,le,"","\\supseteqq",!0);M(z,oe,le,"","\\Supset",!0);M(z,oe,le,"","\\sqsupset",!0);M(z,oe,le,"","\\succcurlyeq",!0);M(z,oe,le,"","\\curlyeqsucc",!0);M(z,oe,le,"","\\succsim",!0);M(z,oe,le,"","\\succapprox",!0);M(z,oe,le,"","\\vartriangleright");M(z,oe,le,"","\\trianglerighteq");M(z,oe,le,"","\\Vdash",!0);M(z,oe,le,"","\\shortmid");M(z,oe,le,"","\\shortparallel");M(z,oe,le,"","\\between",!0);M(z,oe,le,"","\\pitchfork",!0);M(z,oe,le,"","\\varpropto");M(z,oe,le,"","\\blacktriangleleft");M(z,oe,le,"","\\therefore",!0);M(z,oe,le,"","\\backepsilon");M(z,oe,le,"","\\blacktriangleright");M(z,oe,le,"","\\because",!0);M(z,oe,le,"","\\llless");M(z,oe,le,"","\\gggtr");M(z,oe,Tt,"","\\lhd");M(z,oe,Tt,"","\\rhd");M(z,oe,le,"","\\eqsim",!0);M(z,W,le,"","\\Join");M(z,oe,le,"","\\Doteq",!0);M(z,oe,Tt,"","\\dotplus",!0);M(z,oe,Tt,"","\\smallsetminus");M(z,oe,Tt,"","\\Cap",!0);M(z,oe,Tt,"","\\Cup",!0);M(z,oe,Tt,"","\\doublebarwedge",!0);M(z,oe,Tt,"","\\boxminus",!0);M(z,oe,Tt,"","\\boxplus",!0);M(z,oe,Tt,"","\\divideontimes",!0);M(z,oe,Tt,"","\\ltimes",!0);M(z,oe,Tt,"","\\rtimes",!0);M(z,oe,Tt,"","\\leftthreetimes",!0);M(z,oe,Tt,"","\\rightthreetimes",!0);M(z,oe,Tt,"","\\curlywedge",!0);M(z,oe,Tt,"","\\curlyvee",!0);M(z,oe,Tt,"","\\circleddash",!0);M(z,oe,Tt,"","\\circledast",!0);M(z,oe,Tt,"","\\centerdot");M(z,oe,Tt,"","\\intercal",!0);M(z,oe,Tt,"","\\doublecap");M(z,oe,Tt,"","\\doublecup");M(z,oe,Tt,"","\\boxtimes",!0);M(z,oe,le,"","\\dashrightarrow",!0);M(z,oe,le,"","\\dashleftarrow",!0);M(z,oe,le,"","\\leftleftarrows",!0);M(z,oe,le,"","\\leftrightarrows",!0);M(z,oe,le,"","\\Lleftarrow",!0);M(z,oe,le,"","\\twoheadleftarrow",!0);M(z,oe,le,"","\\leftarrowtail",!0);M(z,oe,le,"","\\looparrowleft",!0);M(z,oe,le,"","\\leftrightharpoons",!0);M(z,oe,le,"","\\curvearrowleft",!0);M(z,oe,le,"","\\circlearrowleft",!0);M(z,oe,le,"","\\Lsh",!0);M(z,oe,le,"","\\upuparrows",!0);M(z,oe,le,"","\\upharpoonleft",!0);M(z,oe,le,"","\\downharpoonleft",!0);M(z,W,le,"","\\origof",!0);M(z,W,le,"","\\imageof",!0);M(z,oe,le,"","\\multimap",!0);M(z,oe,le,"","\\leftrightsquigarrow",!0);M(z,oe,le,"","\\rightrightarrows",!0);M(z,oe,le,"","\\rightleftarrows",!0);M(z,oe,le,"","\\twoheadrightarrow",!0);M(z,oe,le,"","\\rightarrowtail",!0);M(z,oe,le,"","\\looparrowright",!0);M(z,oe,le,"","\\curvearrowright",!0);M(z,oe,le,"","\\circlearrowright",!0);M(z,oe,le,"","\\Rsh",!0);M(z,oe,le,"","\\downdownarrows",!0);M(z,oe,le,"","\\upharpoonright",!0);M(z,oe,le,"","\\downharpoonright",!0);M(z,oe,le,"","\\rightsquigarrow",!0);M(z,oe,le,"","\\leadsto");M(z,oe,le,"","\\Rrightarrow",!0);M(z,oe,le,"","\\restriction");M(z,W,ge,"","`");M(z,W,ge,"$","\\$");M(at,W,ge,"$","\\$");M(at,W,ge,"$","\\textdollar");M(z,W,ge,"%","\\%");M(at,W,ge,"%","\\%");M(z,W,ge,"_","\\_");M(at,W,ge,"_","\\_");M(at,W,ge,"_","\\textunderscore");M(z,W,ge,"","\\angle",!0);M(z,W,ge,"","\\infty",!0);M(z,W,ge,"","\\prime");M(z,W,ge,"","\\triangle");M(z,W,ge,"","\\Gamma",!0);M(z,W,ge,"","\\Delta",!0);M(z,W,ge,"","\\Theta",!0);M(z,W,ge,"","\\Lambda",!0);M(z,W,ge,"","\\Xi",!0);M(z,W,ge,"","\\Pi",!0);M(z,W,ge,"","\\Sigma",!0);M(z,W,ge,"","\\Upsilon",!0);M(z,W,ge,"","\\Phi",!0);M(z,W,ge,"","\\Psi",!0);M(z,W,ge,"","\\Omega",!0);M(z,W,ge,"A","");M(z,W,ge,"B","");M(z,W,ge,"E","");M(z,W,ge,"Z","");M(z,W,ge,"H","");M(z,W,ge,"I","");M(z,W,ge,"K","");M(z,W,ge,"M","");M(z,W,ge,"N","");M(z,W,ge,"O","");M(z,W,ge,"P","");M(z,W,ge,"T","");M(z,W,ge,"X","");M(z,W,ge,"","\\neg",!0);M(z,W,ge,"","\\lnot");M(z,W,ge,"","\\top");M(z,W,ge,"","\\bot");M(z,W,ge,"","\\emptyset");M(z,oe,ge,"","\\varnothing");M(z,W,qt,"","\\alpha",!0);M(z,W,qt,"","\\beta",!0);M(z,W,qt,"","\\gamma",!0);M(z,W,qt,"","\\delta",!0);M(z,W,qt,"","\\epsilon",!0);M(z,W,qt,"","\\zeta",!0);M(z,W,qt,"","\\eta",!0);M(z,W,qt,"","\\theta",!0);M(z,W,qt,"","\\iota",!0);M(z,W,qt,"","\\kappa",!0);M(z,W,qt,"","\\lambda",!0);M(z,W,qt,"","\\mu",!0);M(z,W,qt,"","\\nu",!0);M(z,W,qt,"","\\xi",!0);M(z,W,qt,"","\\omicron",!0);M(z,W,qt,"","\\pi",!0);M(z,W,qt,"","\\rho",!0);M(z,W,qt,"","\\sigma",!0);M(z,W,qt,"","\\tau",!0);M(z,W,qt,"","\\upsilon",!0);M(z,W,qt,"","\\phi",!0);M(z,W,qt,"","\\chi",!0);M(z,W,qt,"","\\psi",!0);M(z,W,qt,"","\\omega",!0);M(z,W,qt,"","\\varepsilon",!0);M(z,W,qt,"","\\vartheta",!0);M(z,W,qt,"","\\varpi",!0);M(z,W,qt,"","\\varrho",!0);M(z,W,qt,"","\\varsigma",!0);M(z,W,qt,"","\\varphi",!0);M(z,W,Tt,"","*",!0);M(z,W,Tt,"+","+");M(z,W,Tt,"","-",!0);M(z,W,Tt,"","\\cdot",!0);M(z,W,Tt,"","\\circ",!0);M(z,W,Tt,"","\\div",!0);M(z,W,Tt,"","\\pm",!0);M(z,W,Tt,"","\\times",!0);M(z,W,Tt,"","\\cap",!0);M(z,W,Tt,"","\\cup",!0);M(z,W,Tt,"","\\setminus",!0);M(z,W,Tt,"","\\land");M(z,W,Tt,"","\\lor");M(z,W,Tt,"","\\wedge",!0);M(z,W,Tt,"","\\vee",!0);M(z,W,ge,"","\\surd");M(z,W,Ps,"","\\langle",!0);M(z,W,Ps,"","\\lvert");M(z,W,Ps,"","\\lVert");M(z,W,Vi,"?","?");M(z,W,Vi,"!","!");M(z,W,Vi,"","\\rangle",!0);M(z,W,Vi,"","\\rvert");M(z,W,Vi,"","\\rVert");M(z,W,le,"=","=");M(z,W,le,":",":");M(z,W,le,"","\\approx",!0);M(z,W,le,"","\\cong",!0);M(z,W,le,"","\\ge");M(z,W,le,"","\\geq",!0);M(z,W,le,"","\\gets");M(z,W,le,">","\\gt",!0);M(z,W,le,"","\\in",!0);M(z,W,le,"","\\@not");M(z,W,le,"","\\subset",!0);M(z,W,le,"","\\supset",!0);M(z,W,le,"","\\subseteq",!0);M(z,W,le,"","\\supseteq",!0);M(z,oe,le,"","\\nsubseteq",!0);M(z,oe,le,"","\\nsupseteq",!0);M(z,W,le,"","\\models");M(z,W,le,"","\\leftarrow",!0);M(z,W,le,"","\\le");M(z,W,le,"","\\leq",!0);M(z,W,le,"<","\\lt",!0);M(z,W,le,"","\\rightarrow",!0);M(z,W,le,"","\\to");M(z,oe,le,"","\\ngeq",!0);M(z,oe,le,"","\\nleq",!0);M(z,W,wc,"","\\ ");M(z,W,wc,"","\\space");M(z,W,wc,"","\\nobreakspace");M(at,W,wc,"","\\ ");M(at,W,wc,""," ");M(at,W,wc,"","\\space");M(at,W,wc,"","\\nobreakspace");M(z,W,wc,null,"\\nobreak");M(z,W,wc,null,"\\allowbreak");M(z,W,J2,",",",");M(z,W,J2,";",";");M(z,oe,Tt,"","\\barwedge",!0);M(z,oe,Tt,"","\\veebar",!0);M(z,W,Tt,"","\\odot",!0);M(z,W,Tt,"","\\oplus",!0);M(z,W,Tt,"","\\otimes",!0);M(z,W,ge,"","\\partial",!0);M(z,W,Tt,"","\\oslash",!0);M(z,oe,Tt,"","\\circledcirc",!0);M(z,oe,Tt,"","\\boxdot",!0);M(z,W,Tt,"","\\bigtriangleup");M(z,W,Tt,"","\\bigtriangledown");M(z,W,Tt,"","\\dagger");M(z,W,Tt,"","\\diamond");M(z,W,Tt,"","\\star");M(z,W,Tt,"","\\triangleleft");M(z,W,Tt,"","\\triangleright");M(z,W,Ps,"{","\\{");M(at,W,ge,"{","\\{");M(at,W,ge,"{","\\textbraceleft");M(z,W,Vi,"}","\\}");M(at,W,ge,"}","\\}");M(at,W,ge,"}","\\textbraceright");M(z,W,Ps,"{","\\lbrace");M(z,W,Vi,"}","\\rbrace");M(z,W,Ps,"[","\\lbrack",!0);M(at,W,ge,"[","\\lbrack",!0);M(z,W,Vi,"]","\\rbrack",!0);M(at,W,ge,"]","\\rbrack",!0);M(z,W,Ps,"(","\\lparen",!0);M(z,W,Vi,")","\\rparen",!0);M(at,W,ge,"<","\\textless",!0);M(at,W,ge,">","\\textgreater",!0);M(z,W,Ps,"","\\lfloor",!0);M(z,W,Vi,"","\\rfloor",!0);M(z,W,Ps,"","\\lceil",!0);M(z,W,Vi,"","\\rceil",!0);M(z,W,ge,"\\","\\backslash");M(z,W,ge,"","|");M(z,W,ge,"","\\vert");M(at,W,ge,"|","\\textbar",!0);M(z,W,ge,"","\\|");M(z,W,ge,"","\\Vert");M(at,W,ge,"","\\textbardbl");M(at,W,ge,"~","\\textasciitilde");M(at,W,ge,"\\","\\textbackslash");M(at,W,ge,"^","\\textasciicircum");M(z,W,le,"","\\uparrow",!0);M(z,W,le,"","\\Uparrow",!0);M(z,W,le,"","\\downarrow",!0);M(z,W,le,"","\\Downarrow",!0);M(z,W,le,"","\\updownarrow",!0);M(z,W,le,"","\\Updownarrow",!0);M(z,W,Ma,"","\\coprod");M(z,W,Ma,"","\\bigvee");M(z,W,Ma,"","\\bigwedge");M(z,W,Ma,"","\\biguplus");M(z,W,Ma,"","\\bigcap");M(z,W,Ma,"","\\bigcup");M(z,W,Ma,"","\\int");M(z,W,Ma,"","\\intop");M(z,W,Ma,"","\\iint");M(z,W,Ma,"","\\iiint");M(z,W,Ma,"","\\prod");M(z,W,Ma,"","\\sum");M(z,W,Ma,"","\\bigotimes");M(z,W,Ma,"","\\bigoplus");M(z,W,Ma,"","\\bigodot");M(z,W,Ma,"","\\oint");M(z,W,Ma,"","\\oiint");M(z,W,Ma,"","\\oiiint");M(z,W,Ma,"","\\bigsqcup");M(z,W,Ma,"","\\smallint");M(at,W,Hf,"","\\textellipsis");M(z,W,Hf,"","\\mathellipsis");M(at,W,Hf,"","\\ldots",!0);M(z,W,Hf,"","\\ldots",!0);M(z,W,Hf,"","\\@cdots",!0);M(z,W,Hf,"","\\ddots",!0);M(z,W,ge,"","\\varvdots");M(at,W,ge,"","\\varvdots");M(z,W,Kn,"","\\acute");M(z,W,Kn,"","\\grave");M(z,W,Kn,"","\\ddot");M(z,W,Kn,"~","\\tilde");M(z,W,Kn,"","\\bar");M(z,W,Kn,"","\\breve");M(z,W,Kn,"","\\check");M(z,W,Kn,"^","\\hat");M(z,W,Kn,"","\\vec");M(z,W,Kn,"","\\dot");M(z,W,Kn,"","\\mathring");M(z,W,qt,"","\\@imath");M(z,W,qt,"","\\@jmath");M(z,W,ge,"","");M(z,W,ge,"","");M(at,W,ge,"","\\i",!0);M(at,W,ge,"","\\j",!0);M(at,W,ge,"","\\ss",!0);M(at,W,ge,"","\\ae",!0);M(at,W,ge,"","\\oe",!0);M(at,W,ge,"","\\o",!0);M(at,W,ge,"","\\AE",!0);M(at,W,ge,"","\\OE",!0);M(at,W,ge,"","\\O",!0);M(at,W,Kn,"","\\'");M(at,W,Kn,"","\\`");M(at,W,Kn,"","\\^");M(at,W,Kn,"","\\~");M(at,W,Kn,"","\\=");M(at,W,Kn,"","\\u");M(at,W,Kn,"","\\.");M(at,W,Kn,"","\\c");M(at,W,Kn,"","\\r");M(at,W,Kn,"","\\v");M(at,W,Kn,"",'\\"');M(at,W,Kn,"","\\H");M(at,W,Kn,"","\\textcircled");var aG={"--":!0,"---":!0,"``":!0,"''":!0};M(at,W,ge,"","--",!0);M(at,W,ge,"","\\textendash");M(at,W,ge,"","---",!0);M(at,W,ge,"","\\textemdash");M(at,W,ge,"","`",!0);M(at,W,ge,"","\\textquoteleft");M(at,W,ge,"","'",!0);M(at,W,ge,"","\\textquoteright");M(at,W,ge,"","``",!0);M(at,W,ge,"","\\textquotedblleft");M(at,W,ge,"","''",!0);M(at,W,ge,"","\\textquotedblright");M(z,W,ge,"","\\degree",!0);M(at,W,ge,"","\\degree");M(at,W,ge,"","\\textdegree",!0);M(z,W,ge,"","\\pounds");M(z,W,ge,"","\\mathsterling",!0);M(at,W,ge,"","\\pounds");M(at,W,ge,"","\\textsterling",!0);M(z,oe,ge,"","\\maltese");M(at,oe,ge,"","\\maltese");var qR='0123456789/@."';for(var S3=0;S3<qR.length;S3++){var HR=qR.charAt(S3);M(z,W,ge,HR,HR)}var GR='0123456789!@*()-=+";:?/.,';for(var N3=0;N3<GR.length;N3++){var WR=GR.charAt(N3);M(at,W,ge,WR,WR)}var rb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _3=0;_3<rb.length;_3++){var Ty=rb.charAt(_3);M(z,W,qt,Ty,Ty),M(at,W,ge,Ty,Ty)}M(z,oe,ge,"C","");M(at,oe,ge,"C","");M(z,oe,ge,"H","");M(at,oe,ge,"H","");M(z,oe,ge,"N","");M(at,oe,ge,"N","");M(z,oe,ge,"P","");M(at,oe,ge,"P","");M(z,oe,ge,"Q","");M(at,oe,ge,"Q","");M(z,oe,ge,"R","");M(at,oe,ge,"R","");M(z,oe,ge,"Z","");M(at,oe,ge,"Z","");M(z,W,qt,"h","");M(at,W,qt,"h","");var Jt="";for(var Mi=0;Mi<rb.length;Mi++){var ia=rb.charAt(Mi);Jt=String.fromCharCode(55349,56320+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56372+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56424+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56580+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56684+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56736+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56788+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56840+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56944+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Mi<26&&(Jt=String.fromCharCode(55349,56632+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt),Jt=String.fromCharCode(55349,56476+Mi),M(z,W,qt,ia,Jt),M(at,W,ge,ia,Jt))}Jt="";M(z,W,qt,"k",Jt);M(at,W,ge,"k",Jt);for(var wd=0;wd<10;wd++){var iu=wd.toString();Jt=String.fromCharCode(55349,57294+wd),M(z,W,qt,iu,Jt),M(at,W,ge,iu,Jt),Jt=String.fromCharCode(55349,57314+wd),M(z,W,qt,iu,Jt),M(at,W,ge,iu,Jt),Jt=String.fromCharCode(55349,57324+wd),M(z,W,qt,iu,Jt),M(at,W,ge,iu,Jt),Jt=String.fromCharCode(55349,57334+wd),M(z,W,qt,iu,Jt),M(at,W,ge,iu,Jt)}var JT="";for(var T3=0;T3<JT.length;T3++){var jy=JT.charAt(T3);M(z,W,qt,jy,jy),M(at,W,ge,jy,jy)}var Ay=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],KR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Nue=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[Ay[c][2],Ay[c][o]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[KR[d][2],KR[d][o]]}else{if(i===120485||i===120486)return[Ay[0][2],Ay[0][o]];if(120486<i&&i<120782)return["",""];throw new ut("Unsupported character: "+e)}},Z2=function(e,r,n){return Pn[n][e]&&Pn[n][e].replace&&(e=Pn[n][e].replace),{value:e,metrics:fE(e,r,n)}},So=function(e,r,n,a,i){var o=Z2(e,r,n),c=o.metrics;e=o.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new so(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new so(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var m=a.getColor();m&&(d.style.color=m)}return d},_ue=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&Z2(e,"Main-Bold",r).metrics?So(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||Pn[r][e].font==="main"?So(e,"Main-Regular",r,n,a):So(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},Tue=function(e,r,n,a,i){return i!=="textord"&&Z2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},jue=function(e,r,n){var a=e.mode,i=e.text,o=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",m="";if(i.charCodeAt(0)===55349&&([h,m]=Nue(i,a)),h.length>0)return So(i,h,a,r,o.concat(m));if(d){var p,x;if(d==="boldsymbol"){var y=Tue(i,a,r,o,n);p=y.fontName,x=[y.fontClass]}else c?(p=oG[d].fontName,x=[d]):(p=Ey(d,r.fontWeight,r.fontShape),x=[d,r.fontWeight,r.fontShape]);if(Z2(i,p,a).metrics)return So(i,p,a,r,o.concat(x));if(aG.hasOwnProperty(i)&&p.slice(0,10)==="Typewriter"){for(var S=[],N=0;N<i.length;N++)S.push(So(i[N],p,a,r,o.concat(x)));return sG(S)}}if(n==="mathord")return So(i,"Math-Italic",a,r,o.concat(["mathnormal"]));if(n==="textord"){var w=Pn[a][i]&&Pn[a][i].font;if(w==="ams"){var j=Ey("amsrm",r.fontWeight,r.fontShape);return So(i,j,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var k=Ey("textrm",r.fontWeight,r.fontShape);return So(i,k,a,r,o.concat(r.fontWeight,r.fontShape))}else{var I=Ey(w,r.fontWeight,r.fontShape);return So(i,I,a,r,o.concat(I,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Aue=(t,e)=>{if(Bu(t.classes)!==Bu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},Eue=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof so&&n instanceof so&&Aue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},pE=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},Ji=function(e,r,n,a){var i=new jx(e,r,n,a);return pE(i),i},iG=(t,e,r,n)=>new jx(t,e,r,n),kue=function(e,r,n){var a=Ji([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=xt(a.height),a.maxFontSize=1,a},Cue=function(e,r,n,a){var i=new mE(e,r,n,a);return pE(i),i},sG=function(e){var r=new Tx(e);return pE(r),r},Oue=function(e,r){return e instanceof Tx?Ji([],[e],r):e},Iue=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,o=1;o<r.length;o++){var c=-r[o].shift-i-r[o].elem.depth,d=c-(r[o-1].elem.height+r[o-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[o])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var m=e.positionData,p=0;p<e.children.length;p++){var x=e.children[p];m-=x.type==="kern"?x.size:x.elem.height+x.elem.depth}h=m}else if(e.positionType==="bottom")h=-e.positionData;else{var y=e.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-y.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-y.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},Rue=function(e,r){for(var{children:n,depth:a}=Iue(e),i=0,o=0;o<n.length;o++){var c=n[o];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=Ji(["pstrut"],[]);h.style.height=xt(i);for(var m=[],p=a,x=a,y=a,S=0;S<n.length;S++){var N=n[S];if(N.type==="kern")y+=N.size;else{var w=N.elem,j=N.wrapperClasses||[],k=N.wrapperStyle||{},I=Ji(j,[h,w],void 0,k);I.style.top=xt(-i-y-w.depth),N.marginLeft&&(I.style.marginLeft=N.marginLeft),N.marginRight&&(I.style.marginRight=N.marginRight),m.push(I),y+=w.height+w.depth}p=Math.min(p,y),x=Math.max(x,y)}var L=Ji(["vlist"],m);L.style.height=xt(x);var O;if(p<0){var R=Ji([],[]),A=Ji(["vlist"],[R]);A.style.height=xt(-p);var E=Ji(["vlist-s"],[new so("")]);O=[Ji(["vlist-r"],[L,E]),Ji(["vlist-r"],[A])]}else O=[Ji(["vlist-r"],[L])];var C=Ji(["vlist-t"],O);return O.length===2&&C.classes.push("vlist-t2"),C.height=x,C.depth=-p,C},Mue=(t,e)=>{var r=Ji(["mspace"],[],e),n=Zn(t,e);return r.style.marginRight=xt(n),r},Ey=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},oG={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},lG={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Due=function(e,r){var[n,a,i]=lG[e],o=new $u(n),c=new dc([o],{width:xt(a),height:xt(i),style:"width:"+xt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=iG(["overlay"],[c],r);return d.height=i,d.style.height=xt(i),d.style.width=xt(a),d},ke={fontMap:oG,makeSymbol:So,mathsym:_ue,makeSpan:Ji,makeSvgSpan:iG,makeLineSpan:kue,makeAnchor:Cue,makeFragment:sG,wrapFragment:Oue,makeVList:Rue,makeOrd:jue,makeGlue:Mue,staticSvg:Due,svgData:lG,tryCombineChars:Eue},Xn={number:3,unit:"mu"},Sd={number:4,unit:"mu"},Ll={number:5,unit:"mu"},Pue={mord:{mop:Xn,mbin:Sd,mrel:Ll,minner:Xn},mop:{mord:Xn,mop:Xn,mrel:Ll,minner:Xn},mbin:{mord:Sd,mop:Sd,mopen:Sd,minner:Sd},mrel:{mord:Ll,mop:Ll,mopen:Ll,minner:Ll},mopen:{},mclose:{mop:Xn,mbin:Sd,mrel:Ll,minner:Xn},mpunct:{mord:Xn,mop:Xn,mrel:Ll,mopen:Xn,mclose:Xn,mpunct:Xn,minner:Xn},minner:{mord:Xn,mop:Xn,mbin:Sd,mrel:Ll,mopen:Xn,mpunct:Xn,minner:Xn}},Lue={mord:{mop:Xn},mop:{mord:Xn,mop:Xn},mbin:{},mrel:{},mopen:{},mclose:{mop:Xn},mpunct:{},minner:{mop:Xn}},cG={},nb={},ab={};function wt(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)cG[r[d]]=c;e&&(i&&(nb[e]=i),o&&(ab[e]=o))}function N0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;wt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var ib=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},xa=function(e){return e.type==="ordgroup"?e.body:[e]},hc=ke.makeSpan,Bue=["leftmost","mbin","mopen","mrel","mop","mpunct"],$ue=["rightmost","mrel","mclose","mpunct"],zue={display:Ht.DISPLAY,text:Ht.TEXT,script:Ht.SCRIPT,scriptscript:Ht.SCRIPTSCRIPT},Uue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},qa=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],o=0;o<e.length;o++){var c=zr(e[o],r);if(c instanceof Tx){var d=c.children;i.push(...d)}else i.push(c)}if(ke.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var m=e[0];m.type==="sizing"?h=r.havingSize(m.size):m.type==="styling"&&(h=r.havingStyle(zue[m.style]))}var p=hc([a[0]||"leftmost"],[],r),x=hc([a[1]||"rightmost"],[],r),y=n==="root";return QR(i,(S,N)=>{var w=N.classes[0],j=S.classes[0];w==="mbin"&&$ue.includes(j)?N.classes[0]="mord":j==="mbin"&&Bue.includes(w)&&(S.classes[0]="mord")},{node:p},x,y),QR(i,(S,N)=>{var w=ZT(N),j=ZT(S),k=w&&j?S.hasClass("mtight")?Lue[w][j]:Pue[w][j]:null;if(k)return ke.makeGlue(k,h)},{node:p},x,y),i},QR=function t(e,r,n,a,i){a&&e.push(a);for(var o=0;o<e.length;o++){var c=e[o],d=uG(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var m=r(c,n.node);m&&(n.insertAfter?n.insertAfter(m):(e.unshift(m),o++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=hc(["leftmost"])),n.insertAfter=(p=>x=>{e.splice(p+1,0,x),o++})(o)}a&&e.pop()},uG=function(e){return e instanceof Tx||e instanceof mE||e instanceof jx&&e.hasClass("enclosing")?e:null},Vue=function t(e,r){var n=uG(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},ZT=function(e,r){return e?(r&&(e=Vue(e,r)),Uue[e.classes[0]]||null):null},fg=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return hc(r.concat(n))},zr=function(e,r,n){if(!e)return hc();if(nb[e.type]){var a=nb[e.type](e,r);if(n&&r.size!==n.size){a=hc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new ut("Got group of unknown type: '"+e.type+"'")};function ky(t,e){var r=hc(["base"],t,e),n=hc(["strut"]);return n.style.height=xt(r.height+r.depth),r.depth&&(n.style.verticalAlign=xt(-r.depth)),r.children.unshift(n),r}function ej(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=qa(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],o=[],c=0;c<n.length;c++)if(o.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,o.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(ky(o,e)),o=[])}else n[c].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(ky(o,e)),o=[]),i.push(n[c]));o.length>0&&i.push(ky(o,e));var h;r?(h=ky(qa(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var m=hc(["katex-html"],i);if(m.setAttribute("aria-hidden","true"),h){var p=h.children[0];p.style.height=xt(m.height+m.depth),m.depth&&(p.style.verticalAlign=xt(-m.depth))}return m}function dG(t){return new Tx(t)}class As{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Bu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Yo&&this.children[n+1]instanceof Yo){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Yo;)a+=this.children[++n].toText();e.appendChild(new Yo(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Qr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Qr.escape(Bu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Yo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Qr.escape(this.toText())}toText(){return this.text}}class Fue{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",xt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+xt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var ct={MathNode:As,TextNode:Yo,SpaceNode:Fue,newDocumentFragment:dG},oo=function(e,r,n){return Pn[r][e]&&Pn[r][e].replace&&e.charCodeAt(0)!==55349&&!(aG.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Pn[r][e].replace),new ct.TextNode(e)},gE=function(e){return e.length===1?e[0]:new ct.MathNode("mrow",e)},xE=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;Pn[a][i]&&Pn[a][i].replace&&(i=Pn[a][i].replace);var o=ke.fontMap[n].fontName;return fE(i,o,a)?ke.fontMap[n].variant:null};function j3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Yo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Yo&&r.text===","}else return!1}var us=function(e,r,n){if(e.length===1){var a=On(e[0],r);return n&&a instanceof As&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],o,c=0;c<e.length;c++){var d=On(e[c],r);if(d instanceof As&&o instanceof As){if(d.type==="mtext"&&o.type==="mtext"&&d.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...d.children);continue}else if(d.type==="mn"&&o.type==="mn"){o.children.push(...d.children);continue}else if(j3(d)&&o.type==="mn"){o.children.push(...d.children);continue}else if(d.type==="mn"&&j3(o))d.children=[...o.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(o.type==="mn"||j3(o))){var h=d.children[0];h instanceof As&&h.type==="mn"&&(h.children=[...o.children,...h.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var m=o.children[0];if(m instanceof Yo&&m.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var p=d.children[0];p instanceof Yo&&p.text.length>0&&(p.text=p.text.slice(0,1)+""+p.text.slice(1),i.pop())}}}i.push(d),o=d}return i},zu=function(e,r,n){return gE(us(e,r,n))},On=function(e,r){if(!e)return new ct.MathNode("mrow");if(ab[e.type]){var n=ab[e.type](e,r);return n}else throw new ut("Got group of unknown type: '"+e.type+"'")};function XR(t,e,r,n,a){var i=us(t,r),o;i.length===1&&i[0]instanceof As&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new ct.MathNode("mrow",i);var c=new ct.MathNode("annotation",[new ct.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new ct.MathNode("semantics",[o,c]),h=new ct.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var m=a?"katex":"katex-mathml";return ke.makeSpan([m],[h])}var hG=function(e){return new Ul({style:e.displayMode?Ht.DISPLAY:Ht.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},fG=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=ke.makeSpan(n,[e])}return e},que=function(e,r,n){var a=hG(n),i;if(n.output==="mathml")return XR(e,r,a,n.displayMode,!0);if(n.output==="html"){var o=ej(e,a);i=ke.makeSpan(["katex"],[o])}else{var c=XR(e,r,a,n.displayMode,!1),d=ej(e,a);i=ke.makeSpan(["katex"],[c,d])}return fG(i,n)},Hue=function(e,r,n){var a=hG(n),i=ej(e,a),o=ke.makeSpan(["katex"],[i]);return fG(o,n)},Gue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Wue=function(e){var r=new ct.MathNode("mo",[new ct.TextNode(Gue[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Kue={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Que=function(e){return e.type==="ordgroup"?e.body.length:1},Xue=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,m=Que(h.base),p,x,y;if(m>5)d==="widehat"||d==="widecheck"?(p=420,c=2364,y=.42,x=d+"4"):(p=312,c=2340,y=.34,x="tilde4");else{var S=[1,1,2,2,3,3][m];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][S],p=[0,239,300,360,420][S],y=[0,.24,.3,.3,.36,.42][S],x=d+S):(c=[0,600,1033,2339,2340][S],p=[0,260,286,306,312][S],y=[0,.26,.286,.3,.306,.34][S],x="tilde"+S)}var N=new $u(x),w=new dc([N],{width:"100%",height:xt(y),viewBox:"0 0 "+c+" "+p,preserveAspectRatio:"none"});return{span:ke.makeSvgSpan([],[w],r),minWidth:0,height:y}}else{var j=[],k=Kue[d],[I,L,O]=k,R=O/1e3,A=I.length,E,C;if(A===1){var U=k[3];E=["hide-tail"],C=[U]}else if(A===2)E=["halfarrow-left","halfarrow-right"],C=["xMinYMin","xMaxYMin"];else if(A===3)E=["brace-left","brace-center","brace-right"],C=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+A+" children.");for(var P=0;P<A;P++){var $=new $u(I[P]),B=new dc([$],{width:"400em",height:xt(R),viewBox:"0 0 "+c+" "+O,preserveAspectRatio:C[P]+" slice"}),G=ke.makeSvgSpan([E[P]],[B],r);if(A===1)return{span:G,minWidth:L,height:R};G.style.height=xt(R),j.push(G)}return{span:ke.makeSpan(["stretchy"],j,r),minWidth:L,height:R}}}var{span:a,minWidth:i,height:o}=n();return a.height=o,a.style.height=xt(o),i>0&&(a.style.minWidth=xt(i)),a},Yue=function(e,r,n,a,i){var o,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(o=ke.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(o.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new YT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new YT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var m=new dc(h,{width:"100%",height:xt(c)});o=ke.makeSvgSpan([],[m],i)}return o.height=c,o.style.height=xt(c),o},fc={encloseSpan:Yue,mathMLnode:Wue,svgSpan:Xue};function xr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function yE(t){var e=ew(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function ew(t){return t&&(t.type==="atom"||Sue.hasOwnProperty(t.type))?t:null}var vE=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=xr(t.base,"accent"),r=n.base,t.base=r,a=bue(zr(t,e)),t.base=n):(n=xr(t,"accent"),r=n.base);var i=zr(r,e.havingCrampedStyle()),o=n.isShifty&&Qr.isCharacterBox(r),c=0;if(o){var d=Qr.getBaseElem(r),h=zr(d,e.havingCrampedStyle());c=FR(h).skew}var m=n.label==="\\c",p=m?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),x;if(n.isStretchy)x=fc.svgSpan(n,e),x=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:x,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+xt(2*c)+")",marginLeft:xt(2*c)}:void 0}]},e);else{var y,S;n.label==="\\vec"?(y=ke.staticSvg("vec",e),S=ke.svgData.vec[1]):(y=ke.makeOrd({mode:n.mode,text:n.label},e,"textord"),y=FR(y),y.italic=0,S=y.width,m&&(p+=y.depth)),x=ke.makeSpan(["accent-body"],[y]);var N=n.label==="\\textcircled";N&&(x.classes.push("accent-full"),p=i.height);var w=c;N||(w-=S/2),x.style.left=xt(w),n.label==="\\textcircled"&&(x.style.top=".2em"),x=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-p},{type:"elem",elem:x}]},e)}var j=ke.makeSpan(["mord","accent"],[x],e);return a?(a.children[0]=j,a.height=Math.max(j.height,a.height),a.classes[0]="mord",a):j},mG=(t,e)=>{var r=t.isStretchy?fc.mathMLnode(t.label):new ct.MathNode("mo",[oo(t.label,t.mode)]),n=new ct.MathNode("mover",[On(t.base,e),r]);return n.setAttribute("accent","true"),n},Jue=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));wt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=ib(e[0]),n=!Jue.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:vE,mathmlBuilder:mG});wt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:vE,mathmlBuilder:mG});wt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=zr(t.base,e),n=fc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=ke.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return ke.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=fc.mathMLnode(t.label),n=new ct.MathNode("munder",[On(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var Cy=t=>{var e=new ct.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};wt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=ke.wrapFragment(zr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=ke.wrapFragment(zr(t.below,n,e),e),o.classes.push(i+"-arrow-pad"));var c=fc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var m;if(o){var p=-e.fontMetrics().axisHeight+o.height+.5*c.height+.111;m=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:o,shift:p}]},e)}else m=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return m.children[0].children[0].children[1].classes.push("svg-align"),ke.makeSpan(["mrel","x-arrow"],[m],e)},mathmlBuilder(t,e){var r=fc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=Cy(On(t.body,e));if(t.below){var i=Cy(On(t.below,e));n=new ct.MathNode("munderover",[r,i,a])}else n=new ct.MathNode("mover",[r,a])}else if(t.below){var o=Cy(On(t.below,e));n=new ct.MathNode("munder",[r,o])}else n=Cy(),n=new ct.MathNode("mover",[r,n]);return n}});var Zue=ke.makeSpan;function pG(t,e){var r=qa(t.body,e,!0);return Zue([t.mclass],r,e)}function gG(t,e){var r,n=us(t.body,e);return t.mclass==="minner"?r=new ct.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new ct.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new ct.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}wt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:xa(a),isCharacterBox:Qr.isCharacterBox(a)}},htmlBuilder:pG,mathmlBuilder:gG});var tw=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};wt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:tw(e[0]),body:xa(e[1]),isCharacterBox:Qr.isCharacterBox(e[1])}}});wt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],o;n!=="\\stackrel"?o=tw(a):o="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:xa(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[d],isCharacterBox:Qr.isCharacterBox(d)}},htmlBuilder:pG,mathmlBuilder:gG});wt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:tw(e[0]),body:xa(e[0])}},htmlBuilder(t,e){var r=qa(t.body,e,!0),n=ke.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=us(t.body,e),n=new ct.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var ede={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},YR=()=>({type:"styling",body:[],mode:"math",style:"display"}),JR=t=>t.type==="textord"&&t.text==="@",tde=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function rde(t,e,r){var n=ede[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,o,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function nde(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ut("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var o=e[i],c=YR(),d=0;d<o.length;d++)if(!JR(o[d]))c.body.push(o[d]);else{n.push(c),d+=1;var h=yE(o[d]).text,m=new Array(2);if(m[0]={type:"ordgroup",mode:"math",body:[]},m[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var p=0;p<2;p++){for(var x=!0,y=d+1;y<o.length;y++){if(tde(o[y],h)){x=!1,d=y;break}if(JR(o[y]))throw new ut("Missing a "+h+" character to complete a CD arrow.",o[y]);m[p].body.push(o[y])}if(x)throw new ut("Missing a "+h+" character to complete a CD arrow.",o[d])}else throw new ut('Expected one of "<>AV=|." after @',o[d]);var S=rde(h,m,t),N={type:"styling",body:[S],mode:"math",style:"display"};n.push(N),c=YR()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}wt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=ke.wrapFragment(zr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=xt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new ct.MathNode("mrow",[On(t.label,e)]);return r=new ct.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new ct.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});wt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=ke.wrapFragment(zr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new ct.MathNode("mrow",[On(t.fragment,e)])}});wt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=xr(e[0],"ordgroup"),a=n.body,i="",o=0;o<a.length;o++){var c=xr(a[o],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new ut("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new ut("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var xG=(t,e)=>{var r=qa(t.body,e.withColor(t.color),!1);return ke.makeFragment(r)},yG=(t,e)=>{var r=us(t.body,e.withColor(t.color)),n=new ct.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};wt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=xr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:xa(a)}},htmlBuilder:xG,mathmlBuilder:yG});wt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=xr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:xG,mathmlBuilder:yG});wt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&xr(a,"size").value}},htmlBuilder(t,e){var r=ke.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=xt(Zn(t.size,e)))),r},mathmlBuilder(t,e){var r=new ct.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",xt(Zn(t.size,e)))),r}});var tj={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},vG=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ut("Expected a control sequence",t);return e},ade=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},bG=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};wt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(tj[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=tj[n.text]),xr(e.parseFunction(),"internal");throw new ut("Invalid token after macro prefix",n)}});wt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ut("Expected a control sequence",n);for(var i=0,o,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ut('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new ut('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new ut("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return o&&d.unshift(o),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===tj[r]),{type:"internal",mode:e.mode}}});wt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=vG(e.gullet.popToken());e.gullet.consumeSpaces();var a=ade(e);return bG(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});wt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=vG(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return bG(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var vp=function(e,r,n){var a=Pn.math[e]&&Pn.math[e].replace,i=fE(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},bE=function(e,r,n,a){var i=n.havingBaseStyle(r),o=ke.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return o.height*=c,o.depth*=c,o.maxFontSize=i.sizeMultiplier,o},wG=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=xt(i),e.height-=i,e.depth+=i},ide=function(e,r,n,a,i,o){var c=ke.makeSymbol(e,"Main-Regular",i,a),d=bE(c,r,a,o);return n&&wG(d,a,r),d},sde=function(e,r,n,a){return ke.makeSymbol(e,"Size"+r+"-Regular",n,a)},SG=function(e,r,n,a,i,o){var c=sde(e,r,i,a),d=bE(ke.makeSpan(["delimsizing","size"+r],[c],a),Ht.TEXT,a,o);return n&&wG(d,a,Ht.TEXT),d},A3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=ke.makeSpan(["delimsizinginner",a],[ke.makeSpan([],[ke.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},E3=function(e,r,n){var a=Xo["Size4-Regular"][e.charCodeAt(0)]?Xo["Size4-Regular"][e.charCodeAt(0)][4]:Xo["Size1-Regular"][e.charCodeAt(0)][4],i=new $u("inner",due(e,Math.round(1e3*r))),o=new dc([i],{width:xt(a),height:xt(r),style:"width:"+xt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=ke.makeSvgSpan([],[o],n);return c.height=r,c.style.height=xt(r),c.style.width=xt(a),{type:"elem",elem:c}},rj=.008,Oy={type:"kern",size:-1*rj},ode=["|","\\lvert","\\rvert","\\vert"],lde=["\\|","\\lVert","\\rVert","\\Vert"],NG=function(e,r,n,a,i,o){var c,d,h,m,p="",x=0;c=h=m=e,d=null;var y="Size1-Regular";e==="\\uparrow"?h=m="":e==="\\Uparrow"?h=m="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",m="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",m="\\Downarrow"):ode.includes(e)?(h="",p="vert",x=333):lde.includes(e)?(h="",p="doublevert",x=556):e==="["||e==="\\lbrack"?(c="",h="",m="",y="Size4-Regular",p="lbrack",x=667):e==="]"||e==="\\rbrack"?(c="",h="",m="",y="Size4-Regular",p="rbrack",x=667):e==="\\lfloor"||e===""?(h=c="",m="",y="Size4-Regular",p="lfloor",x=667):e==="\\lceil"||e===""?(c="",h=m="",y="Size4-Regular",p="lceil",x=667):e==="\\rfloor"||e===""?(h=c="",m="",y="Size4-Regular",p="rfloor",x=667):e==="\\rceil"||e===""?(c="",h=m="",y="Size4-Regular",p="rceil",x=667):e==="("||e==="\\lparen"?(c="",h="",m="",y="Size4-Regular",p="lparen",x=875):e===")"||e==="\\rparen"?(c="",h="",m="",y="Size4-Regular",p="rparen",x=875):e==="\\{"||e==="\\lbrace"?(c="",d="",m="",h="",y="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",m="",h="",y="Size4-Regular"):e==="\\lgroup"||e===""?(c="",m="",h="",y="Size4-Regular"):e==="\\rgroup"||e===""?(c="",m="",h="",y="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",m="",h="",y="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",m="",h="",y="Size4-Regular");var S=vp(c,y,i),N=S.height+S.depth,w=vp(h,y,i),j=w.height+w.depth,k=vp(m,y,i),I=k.height+k.depth,L=0,O=1;if(d!==null){var R=vp(d,y,i);L=R.height+R.depth,O=2}var A=N+I+L,E=Math.max(0,Math.ceil((r-A)/(O*j))),C=A+E*O*j,U=a.fontMetrics().axisHeight;n&&(U*=a.sizeMultiplier);var P=C/2-U,$=[];if(p.length>0){var B=C-N-I,G=Math.round(C*1e3),K=hue(p,Math.round(B*1e3)),H=new $u(p,K),Z=(x/1e3).toFixed(3)+"em",ae=(G/1e3).toFixed(3)+"em",he=new dc([H],{width:Z,height:ae,viewBox:"0 0 "+x+" "+G}),fe=ke.makeSvgSpan([],[he],a);fe.height=G/1e3,fe.style.width=Z,fe.style.height=ae,$.push({type:"elem",elem:fe})}else{if($.push(A3(m,y,i)),$.push(Oy),d===null){var Y=C-N-I+2*rj;$.push(E3(h,Y,a))}else{var ne=(C-N-I-L)/2+2*rj;$.push(E3(h,ne,a)),$.push(Oy),$.push(A3(d,y,i)),$.push(Oy),$.push(E3(h,ne,a))}$.push(Oy),$.push(A3(c,y,i))}var re=a.havingBaseStyle(Ht.TEXT),xe=ke.makeVList({positionType:"bottom",positionData:P,children:$},re);return bE(ke.makeSpan(["delimsizing","mult"],[xe],re),Ht.TEXT,a,o)},k3=80,C3=.08,O3=function(e,r,n,a,i){var o=uue(e,a,n),c=new $u(e,o),d=new dc([c],{width:"400em",height:xt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return ke.makeSvgSpan(["hide-tail"],[d],i)},cde=function(e,r){var n=r.havingBaseSizing(),a=AG("\\surd",e*n.sizeMultiplier,jG,n),i=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,m=0,p;return a.type==="small"?(m=1e3+1e3*o+k3,e<1?i=1:e<1.4&&(i=.7),d=(1+o+C3)/i,h=(1+o)/i,c=O3("sqrtMain",d,m,o,r),c.style.minWidth="0.853em",p=.833/i):a.type==="large"?(m=(1e3+k3)*Rp[a.size],h=(Rp[a.size]+o)/i,d=(Rp[a.size]+o+C3)/i,c=O3("sqrtSize"+a.size,d,m,o,r),c.style.minWidth="1.02em",p=1/i):(d=e+o+C3,h=e+o,m=Math.floor(1e3*e+o)+k3,c=O3("sqrtTall",d,m,o,r),c.style.minWidth="0.742em",p=1.056),c.height=h,c.style.height=xt(d),{span:c,advanceWidth:p,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},_G=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],ude=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],TG=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Rp=[0,1.2,1.8,2.4,3],dde=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),_G.includes(e)||TG.includes(e))return SG(e,r,!1,n,a,i);if(ude.includes(e))return NG(e,Rp[r],!1,n,a,i);throw new ut("Illegal delimiter: '"+e+"'")},hde=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],fde=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"stack"}],jG=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],mde=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},AG=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),o=i;o<n.length&&n[o].type!=="stack";o++){var c=vp(e,mde(n[o]),"math"),d=c.height+c.depth;if(n[o].type==="small"){var h=a.havingBaseStyle(n[o].style);d*=h.sizeMultiplier}if(d>r)return n[o]}return n[n.length-1]},EG=function(e,r,n,a,i,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;TG.includes(e)?c=hde:_G.includes(e)?c=jG:c=fde;var d=AG(e,r,c,a);return d.type==="small"?ide(e,d.style,n,a,i,o):d.type==="large"?SG(e,d.size,n,a,i,o):NG(e,r,n,a,i,o)},pde=function(e,r,n,a,i,o){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,m=Math.max(r-c,n+c),p=Math.max(m/500*d,2*m-h);return EG(e,p,!0,a,i,o)},tc={sqrtImage:cde,sizedDelim:dde,sizeToMaxHeight:Rp,customSizedDelim:EG,leftRightDelim:pde},ZR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},gde=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function rw(t,e){var r=ew(t);if(r&&gde.includes(r.text))return r;throw r?new ut("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ut("Invalid delimiter type '"+t.type+"'",t)}wt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=rw(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:ZR[t.funcName].size,mclass:ZR[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?ke.makeSpan([t.mclass]):tc.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(oo(t.delim,t.mode));var r=new ct.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=xt(tc.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function eM(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}wt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ut("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:rw(e[0],t).text,color:r}}});wt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=rw(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=xr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{eM(t);for(var r=qa(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(n=Math.max(r[o].height,n),a=Math.max(r[o].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=fg(e,["mopen"]):c=tc.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],m=h.isMiddle;m&&(r[d]=tc.leftRightDelim(m.delim,n,a,m.options,t.mode,[]))}var p;if(t.right===".")p=fg(e,["mclose"]);else{var x=t.rightColor?e.withColor(t.rightColor):e;p=tc.leftRightDelim(t.right,n,a,x,t.mode,["mclose"])}return r.push(p),ke.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{eM(t);var r=us(t.body,e);if(t.left!=="."){var n=new ct.MathNode("mo",[oo(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new ct.MathNode("mo",[oo(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return gE(r)}});wt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=rw(e[0],t);if(!t.parser.leftrightDepth)throw new ut("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=fg(e,[]);else{r=tc.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?oo("|","text"):oo(t.delim,t.mode),n=new ct.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var wE=(t,e)=>{var r=ke.wrapFragment(zr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,o=0,c=Qr.isCharacterBox(t.body);if(n==="sout")i=ke.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=Zn({number:.6,unit:"pt"},e),h=Zn({number:.35,unit:"ex"},e),m=e.havingBaseSizing();a=a/m.sizeMultiplier;var p=r.height+r.depth+d+h;r.style.paddingLeft=xt(p/2+d);var x=Math.floor(1e3*p*a),y=lue(x),S=new dc([new $u("phase",y)],{width:"400em",height:xt(x/1e3),viewBox:"0 0 400000 "+x,preserveAspectRatio:"xMinYMin slice"});i=ke.makeSvgSpan(["hide-tail"],[S],e),i.style.height=xt(p),o=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var N=0,w=0,j=0;/box/.test(n)?(j=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),N=e.fontMetrics().fboxsep+(n==="colorbox"?0:j),w=N):n==="angl"?(j=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),N=4*j,w=Math.max(0,.25-r.depth)):(N=c?.2:0,w=N),i=fc.encloseSpan(r,n,N,w,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=xt(j)):n==="angl"&&j!==.049&&(i.style.borderTopWidth=xt(j),i.style.borderRightWidth=xt(j)),o=r.depth+w,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var k;if(t.backgroundColor)k=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var I=/cancel|phase/.test(n)?["svg-align"]:[];k=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:I}]},e)}return/cancel/.test(n)&&(k.height=r.height,k.depth=r.depth),/cancel/.test(n)&&!c?ke.makeSpan(["mord","cancel-lap"],[k],e):ke.makeSpan(["mord"],[k],e)},SE=(t,e)=>{var r=0,n=new ct.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[On(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};wt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=xr(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:wE,mathmlBuilder:SE});wt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=xr(e[0],"color-token").color,o=xr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:c}},htmlBuilder:wE,mathmlBuilder:SE});wt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});wt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:wE,mathmlBuilder:SE});wt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var kG={};function ul(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)kG[r[d]]=c;i&&(nb[e]=i),o&&(ab[e]=o)}var CG={};function J(t,e){CG[t]=e}function tM(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var nw=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ut("{"+t.envName+"} can be used only in display mode.")};function NE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Gu(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:o,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:m,maxNumCols:p,leqno:x}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var y=t.gullet.expandMacroAsText("\\arraystretch");if(y==null)o=1;else if(o=parseFloat(y),!o||o<0)throw new ut("Invalid \\arraystretch: "+y)}t.gullet.beginGroup();var S=[],N=[S],w=[],j=[],k=d!=null?[]:void 0;function I(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){k&&(t.gullet.macros.get("\\df@tag")?(k.push(t.subparse([new Is("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):k.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(I(),j.push(tM(t));;){var O=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),O={type:"ordgroup",mode:t.mode,body:O},r&&(O={type:"styling",mode:t.mode,style:r,body:[O]}),S.push(O);var R=t.fetch().text;if(R==="&"){if(p&&S.length===p){if(h||c)throw new ut("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(R==="\\end"){L(),S.length===1&&O.type==="styling"&&O.body[0].body.length===0&&(N.length>1||!m)&&N.pop(),j.length<N.length+1&&j.push([]);break}else if(R==="\\\\"){t.consume();var A=void 0;t.gullet.future().text!==" "&&(A=t.parseSizeGroup(!0)),w.push(A?A.value:null),L(),j.push(tM(t)),S=[],N.push(S),I()}else throw new ut("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:o,body:N,cols:i,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:j,colSeparationType:c,tags:k,leqno:x}}function _E(t){return t.slice(0,1)==="d"?"display":"text"}var dl=function(e,r){var n,a,i=e.body.length,o=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],m=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),p=1/r.fontMetrics().ptPerEm,x=5*p;if(e.colSeparationType&&e.colSeparationType==="small"){var y=r.havingStyle(Ht.SCRIPT).sizeMultiplier;x=.2778*(y/r.sizeMultiplier)}var S=e.colSeparationType==="CD"?Zn({number:3,unit:"ex"},r):12*p,N=3*p,w=e.arraystretch*S,j=.7*w,k=.3*w,I=0;function L(Me){for(var lt=0;lt<Me.length;++lt)lt>0&&(I+=.25),h.push({pos:I,isDashed:Me[lt]})}for(L(o[0]),n=0;n<e.body.length;++n){var O=e.body[n],R=j,A=k;c<O.length&&(c=O.length);var E=new Array(O.length);for(a=0;a<O.length;++a){var C=zr(O[a],r);A<C.depth&&(A=C.depth),R<C.height&&(R=C.height),E[a]=C}var U=e.rowGaps[n],P=0;U&&(P=Zn(U,r),P>0&&(P+=k,A<P&&(A=P),P=0)),e.addJot&&(A+=N),E.height=R,E.depth=A,I+=R,E.pos=I,I+=A+P,d[n]=E,L(o[n+1])}var $=I/2+r.fontMetrics().axisHeight,B=e.cols||[],G=[],K,H,Z=[];if(e.tags&&e.tags.some(Me=>Me))for(n=0;n<i;++n){var ae=d[n],he=ae.pos-$,fe=e.tags[n],Y=void 0;fe===!0?Y=ke.makeSpan(["eqn-num"],[],r):fe===!1?Y=ke.makeSpan([],[],r):Y=ke.makeSpan([],qa(fe,r,!0),r),Y.depth=ae.depth,Y.height=ae.height,Z.push({type:"elem",elem:Y,shift:he})}for(a=0,H=0;a<c||H<B.length;++a,++H){for(var ne=B[H]||{},re=!0;ne.type==="separator";){if(re||(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=xt(r.fontMetrics().doubleRuleSep),G.push(K)),ne.separator==="|"||ne.separator===":"){var xe=ne.separator==="|"?"solid":"dashed",Te=ke.makeSpan(["vertical-separator"],[],r);Te.style.height=xt(I),Te.style.borderRightWidth=xt(m),Te.style.borderRightStyle=xe,Te.style.margin="0 "+xt(-m/2);var Ve=I-$;Ve&&(Te.style.verticalAlign=xt(-Ve)),G.push(Te)}else throw new ut("Invalid separator type: "+ne.separator);H++,ne=B[H]||{},re=!1}if(!(a>=c)){var Ze=void 0;(a>0||e.hskipBeforeAndAfter)&&(Ze=Qr.deflt(ne.pregap,x),Ze!==0&&(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=xt(Ze),G.push(K)));var Xe=[];for(n=0;n<i;++n){var ie=d[n],Be=ie[a];if(Be){var Q=ie.pos-$;Be.depth=ie.depth,Be.height=ie.height,Xe.push({type:"elem",elem:Be,shift:Q})}}Xe=ke.makeVList({positionType:"individualShift",children:Xe},r),Xe=ke.makeSpan(["col-align-"+(ne.align||"c")],[Xe]),G.push(Xe),(a<c-1||e.hskipBeforeAndAfter)&&(Ze=Qr.deflt(ne.postgap,x),Ze!==0&&(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=xt(Ze),G.push(K)))}}if(d=ke.makeSpan(["mtable"],G),h.length>0){for(var te=ke.makeLineSpan("hline",r,m),Ne=ke.makeLineSpan("hdashline",r,m),Se=[{type:"elem",elem:d,shift:0}];h.length>0;){var Qe=h.pop(),nt=Qe.pos-$;Qe.isDashed?Se.push({type:"elem",elem:Ne,shift:nt}):Se.push({type:"elem",elem:te,shift:nt})}d=ke.makeVList({positionType:"individualShift",children:Se},r)}if(Z.length===0)return ke.makeSpan(["mord"],[d],r);var Ot=ke.makeVList({positionType:"individualShift",children:Z},r);return Ot=ke.makeSpan(["tag"],[Ot],r),ke.makeFragment([d,Ot])},xde={c:"center ",l:"left ",r:"right "},hl=function(e,r){for(var n=[],a=new ct.MathNode("mtd",[],["mtr-glue"]),i=new ct.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var c=e.body[o],d=[],h=0;h<c.length;h++)d.push(new ct.MathNode("mtd",[On(c[h],r)]));e.tags&&e.tags[o]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new ct.MathNode("mtr",d))}var m=new ct.MathNode("mtable",n),p=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);m.setAttribute("rowspacing",xt(p));var x="",y="";if(e.cols&&e.cols.length>0){var S=e.cols,N="",w=!1,j=0,k=S.length;S[0].type==="separator"&&(x+="top ",j=1),S[S.length-1].type==="separator"&&(x+="bottom ",k-=1);for(var I=j;I<k;I++)S[I].type==="align"?(y+=xde[S[I].align],w&&(N+="none "),w=!0):S[I].type==="separator"&&w&&(N+=S[I].separator==="|"?"solid ":"dashed ",w=!1);m.setAttribute("columnalign",y.trim()),/[sd]/.test(N)&&m.setAttribute("columnlines",N.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],O="",R=1;R<L.length;R++)O+=R%2?"0em ":"1em ";m.setAttribute("columnspacing",O.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?m.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?m.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?m.setAttribute("columnspacing","0.5em"):m.setAttribute("columnspacing","1em");var A="",E=e.hLinesBeforeRow;x+=E[0].length>0?"left ":"",x+=E[E.length-1].length>0?"right ":"";for(var C=1;C<E.length-1;C++)A+=E[C].length===0?"none ":E[C][0]?"dashed ":"solid ";return/[sd]/.test(A)&&m.setAttribute("rowlines",A.trim()),x!==""&&(m=new ct.MathNode("menclose",[m]),m.setAttribute("notation",x.trim())),e.arraystretch&&e.arraystretch<1&&(m=new ct.MathNode("mstyle",[m]),m.setAttribute("scriptlevel","1")),m},OG=function(e,r){e.envName.indexOf("ed")===-1&&nw(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",o=Gu(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:NE(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var m="",p=0;p<r[0].body.length;p++){var x=xr(r[0].body[p],"textord");m+=x.text}c=Number(m),d=c*2}var y=!d;o.body.forEach(function(j){for(var k=1;k<j.length;k+=2){var I=xr(j[k],"styling"),L=xr(I.body[0],"ordgroup");L.body.unshift(h)}if(y)d<j.length&&(d=j.length);else{var O=j.length/2;if(c<O)throw new ut("Too many math in a row: "+("expected "+c+", but got "+O),j[0])}});for(var S=0;S<d;++S){var N="r",w=0;S%2===1?N="l":S>0&&y&&(w=1),n[S]={type:"align",align:N,pregap:w,postgap:0}}return o.colSeparationType=y?"align":"alignat",o};ul({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=ew(e[0]),n=r?[e[0]]:xr(e[0],"ordgroup").body,a=n.map(function(o){var c=yE(o),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ut("Unknown column alignment: "+d,o)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Gu(t.parser,i,_E(t.envName))},htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ut("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Gu(t.parser,n,_E(t.envName)),o=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Gu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=ew(e[0]),n=r?[e[0]]:xr(e[0],"ordgroup").body,a=n.map(function(o){var c=yE(o),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ut("Unknown column alignment: "+d,o)});if(a.length>1)throw new ut("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Gu(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new ut("{subarray} can contain only one column");return i},htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Gu(t.parser,e,_E(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:OG,htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&nw(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:NE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Gu(t.parser,e,"display")},htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:OG,htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){nw(t);var e={autoTag:NE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Gu(t.parser,e,"display")},htmlBuilder:dl,mathmlBuilder:hl});ul({type:"array",names:["CD"],props:{numArgs:0},handler(t){return nw(t),nde(t.parser)},htmlBuilder:dl,mathmlBuilder:hl});J("\\nonumber","\\gdef\\@eqnsw{0}");J("\\notag","\\nonumber");wt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ut(t.funcName+" valid only within array environment")}});var rM=kG;wt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ut("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=xr(a.body[o],"textord").text;if(n==="\\begin"){if(!rM.hasOwnProperty(i))throw new ut("No such environment: "+i,a);var c=rM[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),m={mode:r.mode,envName:i,parser:r},p=c.handler(m,d,h);r.expect("\\end",!1);var x=r.nextToken,y=xr(r.parseFunction(),"environment");if(y.name!==i)throw new ut("Mismatch: \\begin{"+i+"} matched by \\end{"+y.name+"}",x);return p}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var IG=(t,e)=>{var r=t.font,n=e.withFont(r);return zr(t.body,n)},RG=(t,e)=>{var r=t.font,n=e.withFont(r);return On(t.body,n)},nM={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};wt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=ib(e[0]),i=n;return i in nM&&(i=nM[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:IG,mathmlBuilder:RG});wt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Qr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:tw(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});wt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,o=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:IG,mathmlBuilder:RG});var MG=(t,e)=>{var r=e;return t==="display"?r=r.id>=Ht.SCRIPT.id?r.text():Ht.DISPLAY:t==="text"&&r.size===Ht.DISPLAY.size?r=Ht.TEXT:t==="script"?r=Ht.SCRIPT:t==="scriptscript"&&(r=Ht.SCRIPTSCRIPT),r},TE=(t,e)=>{var r=MG(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var o=zr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;o.height=o.height<c?c:o.height,o.depth=o.depth<d?d:o.depth}i=e.havingStyle(a);var h=zr(t.denom,i,e),m,p,x;t.hasBarLine?(t.barSize?(p=Zn(t.barSize,e),m=ke.makeLineSpan("frac-line",e,p)):m=ke.makeLineSpan("frac-line",e),p=m.height,x=m.height):(m=null,p=0,x=e.fontMetrics().defaultRuleThickness);var y,S,N;r.size===Ht.DISPLAY.size||t.size==="display"?(y=e.fontMetrics().num1,p>0?S=3*x:S=7*x,N=e.fontMetrics().denom1):(p>0?(y=e.fontMetrics().num2,S=x):(y=e.fontMetrics().num3,S=3*x),N=e.fontMetrics().denom2);var w;if(m){var k=e.fontMetrics().axisHeight;y-o.depth-(k+.5*p)<S&&(y+=S-(y-o.depth-(k+.5*p))),k-.5*p-(h.height-N)<S&&(N+=S-(k-.5*p-(h.height-N)));var I=-(k-.5*p);w=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:N},{type:"elem",elem:m,shift:I},{type:"elem",elem:o,shift:-y}]},e)}else{var j=y-o.depth-(h.height-N);j<S&&(y+=.5*(S-j),N+=.5*(S-j)),w=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:N},{type:"elem",elem:o,shift:-y}]},e)}i=e.havingStyle(r),w.height*=i.sizeMultiplier/e.sizeMultiplier,w.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===Ht.DISPLAY.size?L=e.fontMetrics().delim1:r.size===Ht.SCRIPTSCRIPT.size?L=e.havingStyle(Ht.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var O,R;return t.leftDelim==null?O=fg(e,["mopen"]):O=tc.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?R=ke.makeSpan([]):t.rightDelim==null?R=fg(e,["mclose"]):R=tc.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),ke.makeSpan(["mord"].concat(i.sizingClasses(e)),[O,ke.makeSpan(["mfrac"],[w]),R],e)},jE=(t,e)=>{var r=new ct.MathNode("mfrac",[On(t.numer,e),On(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=Zn(t.barSize,e);r.setAttribute("linethickness",xt(n))}var a=MG(t.size,e.style);if(a.size!==e.style.size){r=new ct.MathNode("mstyle",[r]);var i=a.size===Ht.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var c=new ct.MathNode("mo",[new ct.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}if(o.push(r),t.rightDelim!=null){var d=new ct.MathNode("mo",[new ct.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),o.push(d)}return gE(o)}return r};wt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],o,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,c="(",d=")";break;case"\\\\bracefrac":o=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":o=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:o,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:TE,mathmlBuilder:jE});wt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});wt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var aM=["display","text","script","scriptscript"],iM=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};wt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=ib(e[0]),o=i.type==="atom"&&i.family==="open"?iM(i.text):null,c=ib(e[1]),d=c.type==="atom"&&c.family==="close"?iM(c.text):null,h=xr(e[2],"size"),m,p=null;h.isBlank?m=!0:(p=h.value,m=p.number>0);var x="auto",y=e[3];if(y.type==="ordgroup"){if(y.body.length>0){var S=xr(y.body[0],"textord");x=aM[Number(S.text)]}}else y=xr(y,"textord"),x=aM[Number(y.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:m,barSize:p,leftDelim:o,rightDelim:d,size:x}},htmlBuilder:TE,mathmlBuilder:jE});wt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:xr(e[0],"size").value,token:a}}});wt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=Wce(xr(e[1],"infix").size),o=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:TE,mathmlBuilder:jE});var DG=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?zr(t.sup,e.havingStyle(r.sup()),e):zr(t.sub,e.havingStyle(r.sub()),e),a=xr(t.base,"horizBrace")):a=xr(t,"horizBrace");var i=zr(a.base,e.havingBaseStyle(Ht.DISPLAY)),o=fc.svgSpan(a,e),c;if(a.isOver?(c=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=ke.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=ke.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=ke.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return ke.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},yde=(t,e)=>{var r=fc.mathMLnode(t.label);return new ct.MathNode(t.isOver?"mover":"munder",[On(t.base,e),r])};wt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:DG,mathmlBuilder:yde});wt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=xr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:xa(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=qa(t.body,e,!1);return ke.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=zu(t.body,e);return r instanceof As||(r=new As("mrow",[r])),r.setAttribute("href",t.href),r}});wt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=xr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var o=n[i];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:xa(c)}}});wt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:xa(e[0])}},htmlBuilder(t,e){var r=qa(t.body,e,!1);return ke.makeFragment(r)},mathmlBuilder(t,e){return new ct.MathNode("mrow",us(t.body,e))}});wt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=xr(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),m=0;m<h.length;m++){var p=h[m],x=p.indexOf("=");if(x<0)throw new ut("\\htmlData key/value '"+p+"' missing equals sign");var y=p.slice(0,x),S=p.slice(x+1);d["data-"+y.trim()]=S}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:xa(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=qa(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=ke.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>zu(t.body,e)});wt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:xa(e[0]),mathml:xa(e[1])}},htmlBuilder:(t,e)=>{var r=qa(t.html,e,!1);return ke.makeFragment(r)},mathmlBuilder:(t,e)=>zu(t.mathml,e)});var I3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ut("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!eG(n))throw new ut("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};wt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},c="";if(r[0])for(var d=xr(r[0],"raw").string,h=d.split(","),m=0;m<h.length;m++){var p=h[m].split("=");if(p.length===2){var x=p[1].trim();switch(p[0].trim()){case"alt":c=x;break;case"width":a=I3(x);break;case"height":i=I3(x);break;case"totalheight":o=I3(x);break;default:throw new ut("Invalid key: '"+p[0]+"' in \\includegraphics.")}}}var y=xr(e[0],"url").url;return c===""&&(c=y,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:y})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:o,src:y}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=Zn(t.height,e),n=0;t.totalheight.number>0&&(n=Zn(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=Zn(t.width,e));var i={height:xt(r+n)};a>0&&(i.width=xt(a)),n>0&&(i.verticalAlign=xt(-n));var o=new yue(t.src,t.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Zn(t.height,e),a=0;if(t.totalheight.number>0&&(a=Zn(t.totalheight,e)-n,r.setAttribute("valign",xt(-a))),r.setAttribute("height",xt(n+a)),t.width.number>0){var i=Zn(t.width,e);r.setAttribute("width",xt(i))}return r.setAttribute("src",t.src),r}});wt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=xr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",o=a.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return ke.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=Zn(t.dimension,e);return new ct.SpaceNode(r)}});wt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=ke.makeSpan([],[zr(t.body,e)]),r=ke.makeSpan(["inner"],[r],e)):r=ke.makeSpan(["inner"],[zr(t.body,e)]);var n=ke.makeSpan(["fix"],[]),a=ke.makeSpan([t.alignment],[r,n],e),i=ke.makeSpan(["strut"]);return i.style.height=xt(a.height+a.depth),a.depth&&(i.style.verticalAlign=xt(-a.depth)),a.children.unshift(i),a=ke.makeSpan(["thinbox"],[a],e),ke.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mpadded",[On(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});wt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}});wt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ut("Mismatched "+t.funcName)}});var sM=(t,e)=>{switch(e.style.size){case Ht.DISPLAY.size:return t.display;case Ht.TEXT.size:return t.text;case Ht.SCRIPT.size:return t.script;case Ht.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};wt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:xa(e[0]),text:xa(e[1]),script:xa(e[2]),scriptscript:xa(e[3])}},htmlBuilder:(t,e)=>{var r=sM(t,e),n=qa(r,e,!1);return ke.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=sM(t,e);return zu(r,e)}});var PG=(t,e,r,n,a,i,o)=>{t=ke.makeSpan([],[t]);var c=r&&Qr.isCharacterBox(r),d,h;if(e){var m=zr(e,n.havingStyle(a.sup()),n);h={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-m.depth)}}if(r){var p=zr(r,n.havingStyle(a.sub()),n);d={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-p.height)}}var x;if(h&&d){var y=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+o;x=ke.makeVList({positionType:"bottom",positionData:y,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:xt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:xt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var S=t.height-o;x=ke.makeVList({positionType:"top",positionData:S,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:xt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var N=t.depth+o;x=ke.makeVList({positionType:"bottom",positionData:N,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:xt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[x];if(d&&i!==0&&!c){var j=ke.makeSpan(["mspace"],[],n);j.style.marginRight=xt(i),w.unshift(j)}return ke.makeSpan(["mop","op-limits"],w,n)},LG=["\\smallint"],Gf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=xr(t.base,"op"),a=!0):i=xr(t,"op");var o=e.style,c=!1;o.size===Ht.DISPLAY.size&&i.symbol&&!LG.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",m="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(m=i.name.slice(1),i.name=m==="oiint"?"\\iint":"\\iiint"),d=ke.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),m.length>0){var p=d.italic,x=ke.staticSvg(m+"Size"+(c?"2":"1"),e);d=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:x,shift:c?.08:0}]},e),i.name="\\"+m,d.classes.unshift("mop"),d.italic=p}}else if(i.body){var y=qa(i.body,e,!0);y.length===1&&y[0]instanceof so?(d=y[0],d.classes[0]="mop"):d=ke.makeSpan(["mop"],y,e)}else{for(var S=[],N=1;N<i.name.length;N++)S.push(ke.mathsym(i.name[N],i.mode,e));d=ke.makeSpan(["mop"],S,e)}var w=0,j=0;return(d instanceof so||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,j=d.italic),a?PG(d,r,n,e,o,j,w):(w&&(d.style.position="relative",d.style.top=xt(w)),d)},Ax=(t,e)=>{var r;if(t.symbol)r=new As("mo",[oo(t.name,t.mode)]),LG.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new As("mo",us(t.body,e));else{r=new As("mi",[new Yo(t.name.slice(1))]);var n=new As("mo",[oo("","text")]);t.parentIsSupSub?r=new As("mrow",[r,n]):r=dG([r,n])}return r},vde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};wt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=vde[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Gf,mathmlBuilder:Ax});wt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:xa(n)}},htmlBuilder:Gf,mathmlBuilder:Ax});var bde={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};wt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Gf,mathmlBuilder:Ax});wt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Gf,mathmlBuilder:Ax});wt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=bde[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Gf,mathmlBuilder:Ax});var BG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=xr(t.base,"operatorname"),a=!0):i=xr(t,"operatorname");var o;if(i.body.length>0){for(var c=i.body.map(p=>{var x=p.text;return typeof x=="string"?{type:"textord",mode:p.mode,text:x}:p}),d=qa(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var m=d[h];m instanceof so&&(m.text=m.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=ke.makeSpan(["mop"],d,e)}else o=ke.makeSpan(["mop"],[],e);return a?PG(o,r,n,e,e.style,0,0):o},wde=(t,e)=>{for(var r=us(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof ct.SpaceNode))if(i instanceof ct.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof ct.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(m=>m.toText()).join("");r=[new ct.TextNode(c)]}var d=new ct.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new ct.MathNode("mo",[oo("","text")]);return t.parentIsSupSub?new ct.MathNode("mrow",[d,h]):ct.newDocumentFragment([d,h])};wt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:xa(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:BG,mathmlBuilder:wde});J("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");N0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?ke.makeFragment(qa(t.body,e,!1)):ke.makeSpan(["mord"],qa(t.body,e,!0),e)},mathmlBuilder(t,e){return zu(t.body,e,!0)}});wt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=zr(t.body,e.havingCrampedStyle()),n=ke.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return ke.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[new ct.TextNode("")]);r.setAttribute("stretchy","true");var n=new ct.MathNode("mover",[On(t.body,e),r]);return n.setAttribute("accent","true"),n}});wt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:xa(n)}},htmlBuilder:(t,e)=>{var r=qa(t.body,e.withPhantom(),!1);return ke.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=us(t.body,e);return new ct.MathNode("mphantom",r)}});wt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=ke.makeSpan([],[zr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),ke.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=us(xa(t.body),e),n=new ct.MathNode("mphantom",r),a=new ct.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});wt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=ke.makeSpan(["inner"],[zr(t.body,e.withPhantom())]),n=ke.makeSpan(["fix"],[]);return ke.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=us(xa(t.body),e),n=new ct.MathNode("mphantom",r),a=new ct.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});wt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=xr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=zr(t.body,e),n=Zn(t.dy,e);return ke.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new ct.MathNode("mpadded",[On(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});wt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});wt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=xr(e[0],"size"),o=xr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&xr(a,"size").value,width:i.value,height:o.value}},htmlBuilder(t,e){var r=ke.makeSpan(["mord","rule"],[],e),n=Zn(t.width,e),a=Zn(t.height,e),i=t.shift?Zn(t.shift,e):0;return r.style.borderRightWidth=xt(n),r.style.borderTopWidth=xt(a),r.style.bottom=xt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Zn(t.width,e),n=Zn(t.height,e),a=t.shift?Zn(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new ct.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",xt(r)),o.setAttribute("height",xt(n));var c=new ct.MathNode("mpadded",[o]);return a>=0?c.setAttribute("height",xt(a)):(c.setAttribute("height",xt(a)),c.setAttribute("depth",xt(-a))),c.setAttribute("voffset",xt(a)),c}});function $G(t,e,r){for(var n=qa(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return ke.makeFragment(n)}var oM=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Sde=(t,e)=>{var r=e.havingSize(t.size);return $G(t.body,r,e)};wt({type:"sizing",names:oM,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:oM.indexOf(n)+1,body:i}},htmlBuilder:Sde,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=us(t.body,r),a=new ct.MathNode("mstyle",n);return a.setAttribute("mathsize",xt(r.sizeMultiplier)),a}});wt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,o=r[0]&&xr(r[0],"ordgroup");if(o)for(var c="",d=0;d<o.body.length;++d){var h=o.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var m=e[0];return{type:"smash",mode:n.mode,body:m,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=ke.makeSpan([],[zr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return ke.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mpadded",[On(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});wt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=zr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=ke.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Ht.TEXT.id&&(i=e.fontMetrics().xHeight);var o=a+i/4,c=r.height+r.depth+o+a,{span:d,ruleWidth:h,advanceWidth:m}=tc.sqrtImage(c,e),p=d.height-h;p>r.height+r.depth+o&&(o=(o+p-r.height-r.depth)/2);var x=d.height-r.height-o-h;r.style.paddingLeft=xt(m);var y=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+x)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var S=e.havingStyle(Ht.SCRIPTSCRIPT),N=zr(t.index,S,e),w=.6*(y.height-y.depth),j=ke.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:N}]},e),k=ke.makeSpan(["root"],[j]);return ke.makeSpan(["mord","sqrt"],[k,y],e)}else return ke.makeSpan(["mord","sqrt"],[y],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new ct.MathNode("mroot",[On(r,e),On(n,e)]):new ct.MathNode("msqrt",[On(r,e)])}});var lM={display:Ht.DISPLAY,text:Ht.TEXT,script:Ht.SCRIPT,scriptscript:Ht.SCRIPTSCRIPT};wt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(t,e){var r=lM[t.style],n=e.havingStyle(r).withFont("");return $G(t.body,n,e)},mathmlBuilder(t,e){var r=lM[t.style],n=e.havingStyle(r),a=us(t.body,n),i=new ct.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=o[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var Nde=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Ht.DISPLAY.size||n.alwaysHandleSupSub);return a?Gf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Ht.DISPLAY.size||n.limits);return i?BG:null}else{if(n.type==="accent")return Qr.isCharacterBox(n.base)?vE:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?DG:null}else return null}else return null};N0({type:"supsub",htmlBuilder(t,e){var r=Nde(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,o=zr(n,e),c,d,h=e.fontMetrics(),m=0,p=0,x=n&&Qr.isCharacterBox(n);if(a){var y=e.havingStyle(e.style.sup());c=zr(a,y,e),x||(m=o.height-y.fontMetrics().supDrop*y.sizeMultiplier/e.sizeMultiplier)}if(i){var S=e.havingStyle(e.style.sub());d=zr(i,S,e),x||(p=o.depth+S.fontMetrics().subDrop*S.sizeMultiplier/e.sizeMultiplier)}var N;e.style===Ht.DISPLAY?N=h.sup1:e.style.cramped?N=h.sup3:N=h.sup2;var w=e.sizeMultiplier,j=xt(.5/h.ptPerEm/w),k=null;if(d){var I=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof so||I)&&(k=xt(-o.italic))}var L;if(c&&d){m=Math.max(m,N,c.depth+.25*h.xHeight),p=Math.max(p,h.sub2);var O=h.defaultRuleThickness,R=4*O;if(m-c.depth-(d.height-p)<R){p=R-(m-c.depth)+d.height;var A=.8*h.xHeight-(m-c.depth);A>0&&(m+=A,p-=A)}var E=[{type:"elem",elem:d,shift:p,marginRight:j,marginLeft:k},{type:"elem",elem:c,shift:-m,marginRight:j}];L=ke.makeVList({positionType:"individualShift",children:E},e)}else if(d){p=Math.max(p,h.sub1,d.height-.8*h.xHeight);var C=[{type:"elem",elem:d,marginLeft:k,marginRight:j}];L=ke.makeVList({positionType:"shift",positionData:p,children:C},e)}else if(c)m=Math.max(m,N,c.depth+.25*h.xHeight),L=ke.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:c,marginRight:j}]},e);else throw new Error("supsub must have either sup or sub.");var U=ZT(o,"right")||"mord";return ke.makeSpan([U],[o,ke.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[On(t.base,e)];t.sub&&i.push(On(t.sub,e)),t.sup&&i.push(On(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Ht.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Ht.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Ht.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Ht.DISPLAY)?o="munder":o="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Ht.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Ht.DISPLAY)?o="mover":o="msup"}return new ct.MathNode(o,i)}});N0({type:"atom",htmlBuilder(t,e){return ke.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[oo(t.text,t.mode)]);if(t.family==="bin"){var n=xE(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var zG={mi:"italic",mn:"normal",mtext:"normal"};N0({type:"mathord",htmlBuilder(t,e){return ke.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new ct.MathNode("mi",[oo(t.text,t.mode,e)]),n=xE(t,e)||"italic";return n!==zG[r.type]&&r.setAttribute("mathvariant",n),r}});N0({type:"textord",htmlBuilder(t,e){return ke.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=oo(t.text,t.mode,e),n=xE(t,e)||"normal",a;return t.mode==="text"?a=new ct.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new ct.MathNode("mn",[r]):t.text==="\\prime"?a=new ct.MathNode("mo",[r]):a=new ct.MathNode("mi",[r]),n!==zG[a.type]&&a.setAttribute("mathvariant",n),a}});var R3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},M3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};N0({type:"spacing",htmlBuilder(t,e){if(M3.hasOwnProperty(t.text)){var r=M3[t.text].className||"";if(t.mode==="text"){var n=ke.makeOrd(t,e,"textord");return n.classes.push(r),n}else return ke.makeSpan(["mspace",r],[ke.mathsym(t.text,t.mode,e)],e)}else{if(R3.hasOwnProperty(t.text))return ke.makeSpan(["mspace",R3[t.text]],[],e);throw new ut('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(M3.hasOwnProperty(t.text))r=new ct.MathNode("mtext",[new ct.TextNode("")]);else{if(R3.hasOwnProperty(t.text))return new ct.MathNode("mspace");throw new ut('Unknown type of space "'+t.text+'"')}return r}});var cM=()=>{var t=new ct.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};N0({type:"tag",mathmlBuilder(t,e){var r=new ct.MathNode("mtable",[new ct.MathNode("mtr",[cM(),new ct.MathNode("mtd",[zu(t.body,e)]),cM(),new ct.MathNode("mtd",[zu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var uM={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},dM={"\\textbf":"textbf","\\textmd":"textmd"},_de={"\\textit":"textit","\\textup":"textup"},hM=(t,e)=>{var r=t.font;if(r){if(uM[r])return e.withTextFontFamily(uM[r]);if(dM[r])return e.withTextFontWeight(dM[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(_de[r])};wt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:xa(a),font:n}},htmlBuilder(t,e){var r=hM(t,e),n=qa(t.body,r,!0);return ke.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=hM(t,e);return zu(t.body,r)}});wt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=zr(t.body,e),n=ke.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=ke.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return ke.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[new ct.TextNode("")]);r.setAttribute("stretchy","true");var n=new ct.MathNode("munder",[On(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});wt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=zr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return ke.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new ct.MathNode("mpadded",[On(t.body,e)],["vcenter"])}});wt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ut("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=fM(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),n.push(ke.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return ke.makeSpan(["mord","text"].concat(a.sizingClasses(e)),ke.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new ct.TextNode(fM(t)),n=new ct.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var fM=t=>t.body.replace(/ /g,t.star?"":""),yu=cG,UG=`[ \r
	]`,Tde="\\\\[a-zA-Z@]+",jde="\\\\[^\uD800-\uDFFF]",Ade="("+Tde+")"+UG+"*",Ede=`\\\\(
|[ \r	]+
?)[ \r	]*`,nj="[-]",kde=new RegExp(nj+"+$"),Cde="("+UG+"+)|"+(Ede+"|")+"([!-\\[\\]---]"+(nj+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(nj+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Ade)+("|"+jde+")");class mM{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Cde,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Is("EOF",new es(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ut("Unexpected character: '"+e[r]+"'",new Is(e[r],new es(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Is(a,new es(this,r,this.tokenRegex.lastIndex))}}class Ode{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ut("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var Ide=CG;J("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});J("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});J("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});J("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});J("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});J("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");J("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var pM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};J("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ut("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=pM[e.text],n==null||n>=r)throw new ut("Invalid base-"+r+" digit "+e.text);for(var a;(a=pM[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var AE=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ut("\\newcommand's first argument must be a macro name");var i=a[0].text,o=t.isDefined(i);if(o&&!e)throw new ut("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new ut("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ut("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return o&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};J("\\newcommand",t=>AE(t,!1,!0,!1));J("\\renewcommand",t=>AE(t,!0,!1,!1));J("\\providecommand",t=>AE(t,!0,!0,!0));J("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});J("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});J("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),yu[r],Pn.math[r],Pn.text[r]),""});J("\\bgroup","{");J("\\egroup","}");J("~","\\nobreakspace");J("\\lq","`");J("\\rq","'");J("\\aa","\\r a");J("\\AA","\\r A");J("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");J("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");J("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");J("","\\mathscr{B}");J("","\\mathscr{E}");J("","\\mathscr{F}");J("","\\mathscr{H}");J("","\\mathscr{I}");J("","\\mathscr{L}");J("","\\mathscr{M}");J("","\\mathscr{R}");J("","\\mathfrak{C}");J("","\\mathfrak{H}");J("","\\mathfrak{Z}");J("\\Bbbk","\\Bbb{k}");J("","\\cdotp");J("\\llap","\\mathllap{\\textrm{#1}}");J("\\rlap","\\mathrlap{\\textrm{#1}}");J("\\clap","\\mathclap{\\textrm{#1}}");J("\\mathstrut","\\vphantom{(}");J("\\underbar","\\underline{\\text{#1}}");J("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');J("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");J("\\ne","\\neq");J("","\\neq");J("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");J("","\\notin");J("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");J("","\\perp");J("","\\mathclose{!\\mkern-0.8mu!}");J("","\\notni");J("","\\ulcorner");J("","\\urcorner");J("","\\llcorner");J("","\\lrcorner");J("","\\copyright");J("","\\textregistered");J("","\\textregistered");J("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');J("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');J("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');J("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');J("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");J("","\\vdots");J("\\varGamma","\\mathit{\\Gamma}");J("\\varDelta","\\mathit{\\Delta}");J("\\varTheta","\\mathit{\\Theta}");J("\\varLambda","\\mathit{\\Lambda}");J("\\varXi","\\mathit{\\Xi}");J("\\varPi","\\mathit{\\Pi}");J("\\varSigma","\\mathit{\\Sigma}");J("\\varUpsilon","\\mathit{\\Upsilon}");J("\\varPhi","\\mathit{\\Phi}");J("\\varPsi","\\mathit{\\Psi}");J("\\varOmega","\\mathit{\\Omega}");J("\\substack","\\begin{subarray}{c}#1\\end{subarray}");J("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");J("\\boxed","\\fbox{$\\displaystyle{#1}$}");J("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");J("\\implies","\\DOTSB\\;\\Longrightarrow\\;");J("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");J("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");J("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var gM={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};J("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in gM?e=gM[r]:(r.slice(0,4)==="\\not"||r in Pn.math&&["bin","rel"].includes(Pn.math[r].group))&&(e="\\dotsb"),e});var EE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};J("\\dotso",function(t){var e=t.future().text;return e in EE?"\\ldots\\,":"\\ldots"});J("\\dotsc",function(t){var e=t.future().text;return e in EE&&e!==","?"\\ldots\\,":"\\ldots"});J("\\cdots",function(t){var e=t.future().text;return e in EE?"\\@cdots\\,":"\\@cdots"});J("\\dotsb","\\cdots");J("\\dotsm","\\cdots");J("\\dotsi","\\!\\cdots");J("\\dotsx","\\ldots\\,");J("\\DOTSI","\\relax");J("\\DOTSB","\\relax");J("\\DOTSX","\\relax");J("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");J("\\,","\\tmspace+{3mu}{.1667em}");J("\\thinspace","\\,");J("\\>","\\mskip{4mu}");J("\\:","\\tmspace+{4mu}{.2222em}");J("\\medspace","\\:");J("\\;","\\tmspace+{5mu}{.2777em}");J("\\thickspace","\\;");J("\\!","\\tmspace-{3mu}{.1667em}");J("\\negthinspace","\\!");J("\\negmedspace","\\tmspace-{4mu}{.2222em}");J("\\negthickspace","\\tmspace-{5mu}{.277em}");J("\\enspace","\\kern.5em ");J("\\enskip","\\hskip.5em\\relax");J("\\quad","\\hskip1em\\relax");J("\\qquad","\\hskip2em\\relax");J("\\tag","\\@ifstar\\tag@literal\\tag@paren");J("\\tag@paren","\\tag@literal{({#1})}");J("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ut("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});J("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");J("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");J("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");J("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");J("\\newline","\\\\\\relax");J("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var VG=xt(Xo["Main-Regular"][84][1]-.7*Xo["Main-Regular"][65][1]);J("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+VG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");J("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+VG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");J("\\hspace","\\@ifstar\\@hspacer\\@hspace");J("\\@hspace","\\hskip #1\\relax");J("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");J("\\ordinarycolon",":");J("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");J("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');J("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');J("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');J("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');J("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');J("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');J("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');J("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');J("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');J("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');J("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');J("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');J("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');J("","\\dblcolon");J("","\\eqcolon");J("","\\coloneqq");J("","\\eqqcolon");J("","\\Coloneqq");J("\\ratio","\\vcentcolon");J("\\coloncolon","\\dblcolon");J("\\colonequals","\\coloneqq");J("\\coloncolonequals","\\Coloneqq");J("\\equalscolon","\\eqqcolon");J("\\equalscoloncolon","\\Eqqcolon");J("\\colonminus","\\coloneq");J("\\coloncolonminus","\\Coloneq");J("\\minuscolon","\\eqcolon");J("\\minuscoloncolon","\\Eqcolon");J("\\coloncolonapprox","\\Colonapprox");J("\\coloncolonsim","\\Colonsim");J("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");J("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");J("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");J("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");J("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");J("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");J("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");J("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");J("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");J("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");J("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");J("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");J("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");J("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");J("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");J("\\ngeqq","\\html@mathml{\\@ngeqq}{}");J("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");J("\\nleqq","\\html@mathml{\\@nleqq}{}");J("\\nleqslant","\\html@mathml{\\@nleqslant}{}");J("\\nshortmid","\\html@mathml{\\@nshortmid}{}");J("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");J("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");J("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");J("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");J("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");J("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");J("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");J("\\imath","\\html@mathml{\\@imath}{}");J("\\jmath","\\html@mathml{\\@jmath}{}");J("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");J("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");J("","\\llbracket");J("","\\rrbracket");J("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");J("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");J("","\\lBrace");J("","\\rBrace");J("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");J("","\\minuso");J("\\darr","\\downarrow");J("\\dArr","\\Downarrow");J("\\Darr","\\Downarrow");J("\\lang","\\langle");J("\\rang","\\rangle");J("\\uarr","\\uparrow");J("\\uArr","\\Uparrow");J("\\Uarr","\\Uparrow");J("\\N","\\mathbb{N}");J("\\R","\\mathbb{R}");J("\\Z","\\mathbb{Z}");J("\\alef","\\aleph");J("\\alefsym","\\aleph");J("\\Alpha","\\mathrm{A}");J("\\Beta","\\mathrm{B}");J("\\bull","\\bullet");J("\\Chi","\\mathrm{X}");J("\\clubs","\\clubsuit");J("\\cnums","\\mathbb{C}");J("\\Complex","\\mathbb{C}");J("\\Dagger","\\ddagger");J("\\diamonds","\\diamondsuit");J("\\empty","\\emptyset");J("\\Epsilon","\\mathrm{E}");J("\\Eta","\\mathrm{H}");J("\\exist","\\exists");J("\\harr","\\leftrightarrow");J("\\hArr","\\Leftrightarrow");J("\\Harr","\\Leftrightarrow");J("\\hearts","\\heartsuit");J("\\image","\\Im");J("\\infin","\\infty");J("\\Iota","\\mathrm{I}");J("\\isin","\\in");J("\\Kappa","\\mathrm{K}");J("\\larr","\\leftarrow");J("\\lArr","\\Leftarrow");J("\\Larr","\\Leftarrow");J("\\lrarr","\\leftrightarrow");J("\\lrArr","\\Leftrightarrow");J("\\Lrarr","\\Leftrightarrow");J("\\Mu","\\mathrm{M}");J("\\natnums","\\mathbb{N}");J("\\Nu","\\mathrm{N}");J("\\Omicron","\\mathrm{O}");J("\\plusmn","\\pm");J("\\rarr","\\rightarrow");J("\\rArr","\\Rightarrow");J("\\Rarr","\\Rightarrow");J("\\real","\\Re");J("\\reals","\\mathbb{R}");J("\\Reals","\\mathbb{R}");J("\\Rho","\\mathrm{P}");J("\\sdot","\\cdot");J("\\sect","\\S");J("\\spades","\\spadesuit");J("\\sub","\\subset");J("\\sube","\\subseteq");J("\\supe","\\supseteq");J("\\Tau","\\mathrm{T}");J("\\thetasym","\\vartheta");J("\\weierp","\\wp");J("\\Zeta","\\mathrm{Z}");J("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");J("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");J("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");J("\\bra","\\mathinner{\\langle{#1}|}");J("\\ket","\\mathinner{|{#1}\\rangle}");J("\\braket","\\mathinner{\\langle{#1}\\rangle}");J("\\Bra","\\left\\langle#1\\right|");J("\\Ket","\\left|#1\\right\\rangle");var FG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=p=>x=>{t&&(x.macros.set("|",o),a.length&&x.macros.set("\\|",c));var y=p;if(!p&&a.length){var S=x.future();S.text==="|"&&(x.popToken(),y=!0)}return{tokens:y?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,m=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:m.reverse(),numArgs:0}};J("\\bra@ket",FG(!1));J("\\bra@set",FG(!0));J("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");J("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");J("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");J("\\angln","{\\angl n}");J("\\blue","\\textcolor{##6495ed}{#1}");J("\\orange","\\textcolor{##ffa500}{#1}");J("\\pink","\\textcolor{##ff00af}{#1}");J("\\red","\\textcolor{##df0030}{#1}");J("\\green","\\textcolor{##28ae7b}{#1}");J("\\gray","\\textcolor{gray}{#1}");J("\\purple","\\textcolor{##9d38bd}{#1}");J("\\blueA","\\textcolor{##ccfaff}{#1}");J("\\blueB","\\textcolor{##80f6ff}{#1}");J("\\blueC","\\textcolor{##63d9ea}{#1}");J("\\blueD","\\textcolor{##11accd}{#1}");J("\\blueE","\\textcolor{##0c7f99}{#1}");J("\\tealA","\\textcolor{##94fff5}{#1}");J("\\tealB","\\textcolor{##26edd5}{#1}");J("\\tealC","\\textcolor{##01d1c1}{#1}");J("\\tealD","\\textcolor{##01a995}{#1}");J("\\tealE","\\textcolor{##208170}{#1}");J("\\greenA","\\textcolor{##b6ffb0}{#1}");J("\\greenB","\\textcolor{##8af281}{#1}");J("\\greenC","\\textcolor{##74cf70}{#1}");J("\\greenD","\\textcolor{##1fab54}{#1}");J("\\greenE","\\textcolor{##0d923f}{#1}");J("\\goldA","\\textcolor{##ffd0a9}{#1}");J("\\goldB","\\textcolor{##ffbb71}{#1}");J("\\goldC","\\textcolor{##ff9c39}{#1}");J("\\goldD","\\textcolor{##e07d10}{#1}");J("\\goldE","\\textcolor{##a75a05}{#1}");J("\\redA","\\textcolor{##fca9a9}{#1}");J("\\redB","\\textcolor{##ff8482}{#1}");J("\\redC","\\textcolor{##f9685d}{#1}");J("\\redD","\\textcolor{##e84d39}{#1}");J("\\redE","\\textcolor{##bc2612}{#1}");J("\\maroonA","\\textcolor{##ffbde0}{#1}");J("\\maroonB","\\textcolor{##ff92c6}{#1}");J("\\maroonC","\\textcolor{##ed5fa6}{#1}");J("\\maroonD","\\textcolor{##ca337c}{#1}");J("\\maroonE","\\textcolor{##9e034e}{#1}");J("\\purpleA","\\textcolor{##ddd7ff}{#1}");J("\\purpleB","\\textcolor{##c6b9fc}{#1}");J("\\purpleC","\\textcolor{##aa87ff}{#1}");J("\\purpleD","\\textcolor{##7854ab}{#1}");J("\\purpleE","\\textcolor{##543b78}{#1}");J("\\mintA","\\textcolor{##f5f9e8}{#1}");J("\\mintB","\\textcolor{##edf2df}{#1}");J("\\mintC","\\textcolor{##e0e5cc}{#1}");J("\\grayA","\\textcolor{##f6f7f7}{#1}");J("\\grayB","\\textcolor{##f0f1f2}{#1}");J("\\grayC","\\textcolor{##e3e5e6}{#1}");J("\\grayD","\\textcolor{##d6d8da}{#1}");J("\\grayE","\\textcolor{##babec2}{#1}");J("\\grayF","\\textcolor{##888d93}{#1}");J("\\grayG","\\textcolor{##626569}{#1}");J("\\grayH","\\textcolor{##3b3e40}{#1}");J("\\grayI","\\textcolor{##21242c}{#1}");J("\\kaBlue","\\textcolor{##314453}{#1}");J("\\kaGreen","\\textcolor{##71B307}{#1}");var qG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Rde{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Ode(Ide,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new mM(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new Is("EOF",n.loc)),this.pushTokens(a),new Is("",es.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,o=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new ut("Extra }",i)}else if(i.text==="EOF")throw new ut("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((o===0||o===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(o!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ut("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new ut("Use of the macro doesn't match its definition",i)}}for(var o=[],c=0;c<e;c++)o.push(this.consumeArg(r&&r[c+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ut("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ut("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new ut("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...o[+d.text-1]);else throw new ut("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Is(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var c=new mM(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var m={tokens:d,numArgs:i};return m}return a}isDefined(e){return this.macros.has(e)||yu.hasOwnProperty(e)||Pn.math.hasOwnProperty(e)||Pn.text.hasOwnProperty(e)||qG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:yu.hasOwnProperty(e)&&!yu[e].primitive}}var xM=/^[]/,Iy=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),D3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},yM={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class aw{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Rde(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ut("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Is("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(aw.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&yu[a.text]&&yu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ut("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,o,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?o=d[0]:o={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],o],[]):h=this.callFunction(n,[i,o],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new ut("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new ut("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new ut("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new ut("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new ut("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(Iy[i.text]){var h=xM.test(i.text),m=[];for(m.push(new Is(Iy[i.text])),this.consume();;){var p=this.fetch().text;if(!Iy[p]||xM.test(p)!==h)break;m.unshift(new Is(Iy[p])),this.consume()}var x=this.subparse(m);h?a={type:"ordgroup",mode:"math",body:x}:n={type:"ordgroup",mode:"math",body:x}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=yu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new ut("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new ut("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new ut("Can't use function '"+a+"' in math mode",n);var{args:o,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,o,c,n,e)}callFunction(e,r,n,a,i){var o={funcName:e,parser:this,token:a,breakOnTokenText:i},c=yu[e];if(c&&c.handler)return c.handler(o,r,n);throw new ut("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],o=0;o<n;o++){var c=r.argTypes&&r.argTypes[o],d=o<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new ut("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new ut("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ut("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ut("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",o;(o=this.fetch()).text!=="EOF"&&e.test(i+o.text);)a=o,i+=a.text,this.consume();if(i==="")throw new ut("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ut("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ut("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!eG(i))throw new ut("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),o}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,o),d=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:es.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!qG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ut("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:es.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:es.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:es.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ut(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}yM.hasOwnProperty(r[0])&&!Pn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=yM[r[0]]+r.slice(1));var i=kde.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if(Pn[this.mode][r]){this.settings.strict&&this.mode==="math"&&JT.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Pn[this.mode][r].group,d=es.range(e),h;if(wue.hasOwnProperty(c)){var m=c;h={type:"atom",mode:this.mode,family:m,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};o=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(ZH(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:es.range(e),text:r};else return null;if(this.consume(),i)for(var p=0;p<i[0].length;p++){var x=i[0][p];if(!D3[x])throw new ut("Unknown accent ' "+x+"'",e);var y=D3[x][this.mode]||D3[x].text;if(!y)throw new ut("Accent "+x+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:es.range(e),label:y,isStretchy:!1,isShifty:!0,base:o}}return o}}aw.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var kE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new aw(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ut("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new Is("\\df@tag")])}]}return a},HG=function(e,r,n){r.textContent="";var a=CE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),HG=function(){throw new ut("KaTeX doesn't work in quirks mode.")});var Mde=function(e,r){var n=CE(e,r).toMarkup();return n},Dde=function(e,r){var n=new dE(r);return kE(e,n)},GG=function(e,r,n){if(n.throwOnError||!(e instanceof ut))throw e;var a=ke.makeSpan(["katex-error"],[new so(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},CE=function(e,r){var n=new dE(r);try{var a=kE(e,n);return que(a,e,n)}catch(i){return GG(i,e,n)}},Pde=function(e,r){var n=new dE(r);try{var a=kE(e,n);return Hue(a,e,n)}catch(i){return GG(i,e,n)}},Lde="0.16.28",Bde={Span:jx,Anchor:mE,SymbolNode:so,SvgNode:dc,PathNode:$u,LineNode:YT},sb={version:Lde,render:HG,renderToString:Mde,ParseError:ut,SETTINGS_SCHEMA:xv,__parse:Dde,__renderToDomTree:CE,__renderToHTMLTree:Pde,__setFontMetrics:fue,__defineSymbol:M,__defineFunction:wt,__defineMacro:J,__domTree:Bde};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(t)}function aj(t,e){return aj=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},aj(t,e)}function $de(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vv(t,e,r){return $de()?vv=Reflect.construct:vv=function(a,i,o){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return o&&aj(h,o.prototype),h},vv.apply(null,arguments)}function wo(t){return zde(t)||Ude(t)||Vde(t)||Fde()}function zde(t){if(Array.isArray(t))return ij(t)}function Ude(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vde(t,e){if(t){if(typeof t=="string")return ij(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ij(t,e)}}function ij(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qde=Object.hasOwnProperty,vM=Object.setPrototypeOf,Hde=Object.isFrozen,Gde=Object.getPrototypeOf,Wde=Object.getOwnPropertyDescriptor,Ui=Object.freeze,lo=Object.seal,Kde=Object.create,WG=typeof Reflect<"u"&&Reflect,ob=WG.apply,sj=WG.construct;ob||(ob=function(e,r,n){return e.apply(r,n)});Ui||(Ui=function(e){return e});lo||(lo=function(e){return e});sj||(sj=function(e,r){return vv(e,wo(r))});var Qde=co(Array.prototype.forEach),bM=co(Array.prototype.pop),rp=co(Array.prototype.push),bv=co(String.prototype.toLowerCase),P3=co(String.prototype.toString),wM=co(String.prototype.match),vo=co(String.prototype.replace),Xde=co(String.prototype.indexOf),Yde=co(String.prototype.trim),hi=co(RegExp.prototype.test),L3=Jde(TypeError);function co(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return ob(t,e,n)}}function Jde(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return sj(t,r)}}function yr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:bv,vM&&vM(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var o=r(i);o!==i&&(Hde(e)||(e[a]=o),i=o)}t[i]=!0}return t}function Nd(t){var e=Kde(null),r;for(r in t)ob(qde,t,[r])===!0&&(e[r]=t[r]);return e}function Ry(t,e){for(;t!==null;){var r=Wde(t,e);if(r){if(r.get)return co(r.get);if(typeof r.value=="function")return co(r.value)}t=Gde(t)}function n(a){return console.warn("fallback value for",a),null}return n}var SM=Ui(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),B3=Ui(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$3=Ui(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Zde=Ui(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),z3=Ui(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),e0e=Ui(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),NM=Ui(["#text"]),_M=Ui(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),U3=Ui(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),TM=Ui(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),My=Ui(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),t0e=lo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),r0e=lo(/<%[\w\W]*|[\w\W]*%>/gm),n0e=lo(/\${[\w\W]*}/gm),a0e=lo(/^data-[\-\w.\u00B7-\uFFFF]+$/),i0e=lo(/^aria-[\-\w]+$/),s0e=lo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),o0e=lo(/^(?:\w+script|data):/i),l0e=lo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),c0e=lo(/^html$/i),u0e=lo(/^[a-z][.\w]*(-[.\w]+)+$/i),d0e=function(){return typeof window>"u"?null:window},h0e=function(e,r){if(mu(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function KG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d0e(),e=function(me){return KG(me)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,o=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,m=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,p=t.HTMLFormElement,x=t.DOMParser,y=t.trustedTypes,S=c.prototype,N=Ry(S,"cloneNode"),w=Ry(S,"nextSibling"),j=Ry(S,"childNodes"),k=Ry(S,"parentNode");if(typeof i=="function"){var I=n.createElement("template");I.content&&I.content.ownerDocument&&(n=I.content.ownerDocument)}var L=h0e(y,r),O=L?L.createHTML(""):"",R=n,A=R.implementation,E=R.createNodeIterator,C=R.createDocumentFragment,U=R.getElementsByTagName,P=r.importNode,$={};try{$=Nd(n).documentMode?n.documentMode:{}}catch{}var B={};e.isSupported=typeof k=="function"&&A&&A.createHTMLDocument!==void 0&&$!==9;var G=t0e,K=r0e,H=n0e,Z=a0e,ae=i0e,he=o0e,fe=l0e,Y=u0e,ne=s0e,re=null,xe=yr({},[].concat(wo(SM),wo(B3),wo($3),wo(z3),wo(NM))),Te=null,Ve=yr({},[].concat(wo(_M),wo(U3),wo(TM),wo(My))),Ze=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xe=null,ie=null,Be=!0,Q=!0,te=!1,Ne=!0,Se=!1,Qe=!0,nt=!1,Ot=!1,Me=!1,lt=!1,St=!1,vt=!1,et=!0,ce=!1,Ue="user-content-",Je=!0,ht=!1,dt={},Ut=null,tr=yr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ir=null,ve=yr({},["audio","video","img","source","image","track"]),st=null,At=yr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pt="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml",ar=tt,Sr=!1,Ur=null,mn=yr({},[Pt,$t,tt],P3),wr,Gt=["application/xhtml+xml","text/html"],zt="text/html",Nt,Vr=null,ln=n.createElement("form"),Yr=function(me){return me instanceof RegExp||me instanceof Function},Fr=function(me){Vr&&Vr===me||((!me||mu(me)!=="object")&&(me={}),me=Nd(me),wr=Gt.indexOf(me.PARSER_MEDIA_TYPE)===-1?wr=zt:wr=me.PARSER_MEDIA_TYPE,Nt=wr==="application/xhtml+xml"?P3:bv,re="ALLOWED_TAGS"in me?yr({},me.ALLOWED_TAGS,Nt):xe,Te="ALLOWED_ATTR"in me?yr({},me.ALLOWED_ATTR,Nt):Ve,Ur="ALLOWED_NAMESPACES"in me?yr({},me.ALLOWED_NAMESPACES,P3):mn,st="ADD_URI_SAFE_ATTR"in me?yr(Nd(At),me.ADD_URI_SAFE_ATTR,Nt):At,Ir="ADD_DATA_URI_TAGS"in me?yr(Nd(ve),me.ADD_DATA_URI_TAGS,Nt):ve,Ut="FORBID_CONTENTS"in me?yr({},me.FORBID_CONTENTS,Nt):tr,Xe="FORBID_TAGS"in me?yr({},me.FORBID_TAGS,Nt):{},ie="FORBID_ATTR"in me?yr({},me.FORBID_ATTR,Nt):{},dt="USE_PROFILES"in me?me.USE_PROFILES:!1,Be=me.ALLOW_ARIA_ATTR!==!1,Q=me.ALLOW_DATA_ATTR!==!1,te=me.ALLOW_UNKNOWN_PROTOCOLS||!1,Ne=me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Se=me.SAFE_FOR_TEMPLATES||!1,Qe=me.SAFE_FOR_XML!==!1,nt=me.WHOLE_DOCUMENT||!1,lt=me.RETURN_DOM||!1,St=me.RETURN_DOM_FRAGMENT||!1,vt=me.RETURN_TRUSTED_TYPE||!1,Me=me.FORCE_BODY||!1,et=me.SANITIZE_DOM!==!1,ce=me.SANITIZE_NAMED_PROPS||!1,Je=me.KEEP_CONTENT!==!1,ht=me.IN_PLACE||!1,ne=me.ALLOWED_URI_REGEXP||ne,ar=me.NAMESPACE||tt,Ze=me.CUSTOM_ELEMENT_HANDLING||{},me.CUSTOM_ELEMENT_HANDLING&&Yr(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ze.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&Yr(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ze.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ze.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Se&&(Q=!1),St&&(lt=!0),dt&&(re=yr({},wo(NM)),Te=[],dt.html===!0&&(yr(re,SM),yr(Te,_M)),dt.svg===!0&&(yr(re,B3),yr(Te,U3),yr(Te,My)),dt.svgFilters===!0&&(yr(re,$3),yr(Te,U3),yr(Te,My)),dt.mathMl===!0&&(yr(re,z3),yr(Te,TM),yr(Te,My))),me.ADD_TAGS&&(re===xe&&(re=Nd(re)),yr(re,me.ADD_TAGS,Nt)),me.ADD_ATTR&&(Te===Ve&&(Te=Nd(Te)),yr(Te,me.ADD_ATTR,Nt)),me.ADD_URI_SAFE_ATTR&&yr(st,me.ADD_URI_SAFE_ATTR,Nt),me.FORBID_CONTENTS&&(Ut===tr&&(Ut=Nd(Ut)),yr(Ut,me.FORBID_CONTENTS,Nt)),Je&&(re["#text"]=!0),nt&&yr(re,["html","head","body"]),re.table&&(yr(re,["tbody"]),delete Xe.tbody),Ui&&Ui(me),Vr=me)},pn=yr({},["mi","mo","mn","ms","mtext"]),dr=yr({},["annotation-xml"]),ba=yr({},["title","style","font","a","script"]),gn=yr({},B3);yr(gn,$3),yr(gn,Zde);var In=yr({},z3);yr(In,e0e);var ii=function(me){var rt=k(me);(!rt||!rt.tagName)&&(rt={namespaceURI:ar,tagName:"template"});var ft=bv(me.tagName),Xt=bv(rt.tagName);return Ur[me.namespaceURI]?me.namespaceURI===$t?rt.namespaceURI===tt?ft==="svg":rt.namespaceURI===Pt?ft==="svg"&&(Xt==="annotation-xml"||pn[Xt]):!!gn[ft]:me.namespaceURI===Pt?rt.namespaceURI===tt?ft==="math":rt.namespaceURI===$t?ft==="math"&&dr[Xt]:!!In[ft]:me.namespaceURI===tt?rt.namespaceURI===$t&&!dr[Xt]||rt.namespaceURI===Pt&&!pn[Xt]?!1:!In[ft]&&(ba[ft]||!gn[ft]):!!(wr==="application/xhtml+xml"&&Ur[me.namespaceURI]):!1},jr=function(me){rp(e.removed,{element:me});try{me.parentNode.removeChild(me)}catch{try{me.outerHTML=O}catch{me.remove()}}},xn=function(me,rt){try{rp(e.removed,{attribute:rt.getAttributeNode(me),from:rt})}catch{rp(e.removed,{attribute:null,from:rt})}if(rt.removeAttribute(me),me==="is"&&!Te[me])if(lt||St)try{jr(rt)}catch{}else try{rt.setAttribute(me,"")}catch{}},si=function(me){var rt,ft;if(Me)me="<remove></remove>"+me;else{var Xt=wM(me,/^[\r\n\t ]+/);ft=Xt&&Xt[0]}wr==="application/xhtml+xml"&&ar===tt&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");var mr=L?L.createHTML(me):me;if(ar===tt)try{rt=new x().parseFromString(mr,wr)}catch{}if(!rt||!rt.documentElement){rt=A.createDocument(ar,"template",null);try{rt.documentElement.innerHTML=Sr?O:mr}catch{}}var cn=rt.body||rt.documentElement;return me&&ft&&cn.insertBefore(n.createTextNode(ft),cn.childNodes[0]||null),ar===tt?U.call(rt,nt?"html":"body")[0]:nt?rt.documentElement:cn},Qn=function(me){return E.call(me.ownerDocument||me,me,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},nn=function(me){return me instanceof p&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof m)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function"||typeof me.hasChildNodes!="function")},yn=function(me){return mu(o)==="object"?me instanceof o:me&&mu(me)==="object"&&typeof me.nodeType=="number"&&typeof me.nodeName=="string"},An=function(me,rt,ft){B[me]&&Qde(B[me],function(Xt){Xt.call(e,rt,ft,Vr)})},oi=function(me){var rt;if(An("beforeSanitizeElements",me,null),nn(me)||hi(/[\u0080-\uFFFF]/,me.nodeName))return jr(me),!0;var ft=Nt(me.nodeName);if(An("uponSanitizeElement",me,{tagName:ft,allowedTags:re}),me.hasChildNodes()&&!yn(me.firstElementChild)&&(!yn(me.content)||!yn(me.content.firstElementChild))&&hi(/<[/\w]/g,me.innerHTML)&&hi(/<[/\w]/g,me.textContent)||ft==="select"&&hi(/<template/i,me.innerHTML)||me.nodeType===7||Qe&&me.nodeType===8&&hi(/<[/\w]/g,me.data))return jr(me),!0;if(!re[ft]||Xe[ft]){if(!Xe[ft]&&ki(ft)&&(Ze.tagNameCheck instanceof RegExp&&hi(Ze.tagNameCheck,ft)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(ft)))return!1;if(Je&&!Ut[ft]){var Xt=k(me)||me.parentNode,mr=j(me)||me.childNodes;if(mr&&Xt)for(var cn=mr.length,Jr=cn-1;Jr>=0;--Jr){var vn=N(mr[Jr],!0);vn.__removalCount=(me.__removalCount||0)+1,Xt.insertBefore(vn,w(me))}}return jr(me),!0}return me instanceof c&&!ii(me)||(ft==="noscript"||ft==="noembed"||ft==="noframes")&&hi(/<\/no(script|embed|frames)/i,me.innerHTML)?(jr(me),!0):(Se&&me.nodeType===3&&(rt=me.textContent,rt=vo(rt,G," "),rt=vo(rt,K," "),rt=vo(rt,H," "),me.textContent!==rt&&(rp(e.removed,{element:me.cloneNode()}),me.textContent=rt)),An("afterSanitizeElements",me,null),!1)},Ka=function(me,rt,ft){if(et&&(rt==="id"||rt==="name")&&(ft in n||ft in ln))return!1;if(!(Q&&!ie[rt]&&hi(Z,rt))){if(!(Be&&hi(ae,rt))){if(!Te[rt]||ie[rt]){if(!(ki(me)&&(Ze.tagNameCheck instanceof RegExp&&hi(Ze.tagNameCheck,me)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(me))&&(Ze.attributeNameCheck instanceof RegExp&&hi(Ze.attributeNameCheck,rt)||Ze.attributeNameCheck instanceof Function&&Ze.attributeNameCheck(rt))||rt==="is"&&Ze.allowCustomizedBuiltInElements&&(Ze.tagNameCheck instanceof RegExp&&hi(Ze.tagNameCheck,ft)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(ft))))return!1}else if(!st[rt]){if(!hi(ne,vo(ft,fe,""))){if(!((rt==="src"||rt==="xlink:href"||rt==="href")&&me!=="script"&&Xde(ft,"data:")===0&&Ir[me])){if(!(te&&!hi(he,vo(ft,fe,"")))){if(ft)return!1}}}}}}return!0},ki=function(me){return me!=="annotation-xml"&&wM(me,Y)},hs=function(me){var rt,ft,Xt,mr;An("beforeSanitizeAttributes",me,null);var cn=me.attributes;if(!(!cn||nn(me))){var Jr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Te};for(mr=cn.length;mr--;){rt=cn[mr];var vn=rt,Rr=vn.name,Ls=vn.namespaceURI;if(ft=Rr==="value"?rt.value:Yde(rt.value),Xt=Nt(Rr),Jr.attrName=Xt,Jr.attrValue=ft,Jr.keepAttr=!0,Jr.forceKeepAttr=void 0,An("uponSanitizeAttribute",me,Jr),ft=Jr.attrValue,!Jr.forceKeepAttr&&(xn(Rr,me),!!Jr.keepAttr)){if(!Ne&&hi(/\/>/i,ft)){xn(Rr,me);continue}Se&&(ft=vo(ft,G," "),ft=vo(ft,K," "),ft=vo(ft,H," "));var fs=Nt(me.nodeName);if(Ka(fs,Xt,ft)){if(ce&&(Xt==="id"||Xt==="name")&&(xn(Rr,me),ft=Ue+ft),Qe&&hi(/((--!?|])>)|<\/(style|title)/i,ft)){xn(Rr,me);continue}if(L&&mu(y)==="object"&&typeof y.getAttributeType=="function"&&!Ls)switch(y.getAttributeType(fs,Xt)){case"TrustedHTML":{ft=L.createHTML(ft);break}case"TrustedScriptURL":{ft=L.createScriptURL(ft);break}}try{Ls?me.setAttributeNS(Ls,Rr,ft):me.setAttribute(Rr,ft),nn(me)?jr(me):bM(e.removed)}catch{}}}}An("afterSanitizeAttributes",me,null)}},bi=function _t(me){var rt,ft=Qn(me);for(An("beforeSanitizeShadowDOM",me,null);rt=ft.nextNode();)An("uponSanitizeShadowNode",rt,null),oi(rt),hs(rt),rt.content instanceof a&&_t(rt.content);An("afterSanitizeShadowDOM",me,null)};return e.sanitize=function(_t){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt,ft,Xt,mr,cn;if(Sr=!_t,Sr&&(_t="<!-->"),typeof _t!="string"&&!yn(_t))if(typeof _t.toString=="function"){if(_t=_t.toString(),typeof _t!="string")throw L3("dirty is not a string, aborting")}else throw L3("toString is not a function");if(!e.isSupported){if(mu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof _t=="string")return t.toStaticHTML(_t);if(yn(_t))return t.toStaticHTML(_t.outerHTML)}return _t}if(Ot||Fr(me),e.removed=[],typeof _t=="string"&&(ht=!1),ht){if(_t.nodeName){var Jr=Nt(_t.nodeName);if(!re[Jr]||Xe[Jr])throw L3("root node is forbidden and cannot be sanitized in-place")}}else if(_t instanceof o)rt=si("<!---->"),ft=rt.ownerDocument.importNode(_t,!0),ft.nodeType===1&&ft.nodeName==="BODY"||ft.nodeName==="HTML"?rt=ft:rt.appendChild(ft);else{if(!lt&&!Se&&!nt&&_t.indexOf("<")===-1)return L&&vt?L.createHTML(_t):_t;if(rt=si(_t),!rt)return lt?null:vt?O:""}rt&&Me&&jr(rt.firstChild);for(var vn=Qn(ht?_t:rt);Xt=vn.nextNode();)Xt.nodeType===3&&Xt===mr||(oi(Xt),hs(Xt),Xt.content instanceof a&&bi(Xt.content),mr=Xt);if(mr=null,ht)return _t;if(lt){if(St)for(cn=C.call(rt.ownerDocument);rt.firstChild;)cn.appendChild(rt.firstChild);else cn=rt;return(Te.shadowroot||Te.shadowrootmod)&&(cn=P.call(r,cn,!0)),cn}var Rr=nt?rt.outerHTML:rt.innerHTML;return nt&&re["!doctype"]&&rt.ownerDocument&&rt.ownerDocument.doctype&&rt.ownerDocument.doctype.name&&hi(c0e,rt.ownerDocument.doctype.name)&&(Rr="<!DOCTYPE "+rt.ownerDocument.doctype.name+`>
`+Rr),Se&&(Rr=vo(Rr,G," "),Rr=vo(Rr,K," "),Rr=vo(Rr,H," ")),L&&vt?L.createHTML(Rr):Rr},e.setConfig=function(_t){Fr(_t),Ot=!0},e.clearConfig=function(){Vr=null,Ot=!1},e.isValidAttribute=function(_t,me,rt){Vr||Fr({});var ft=Nt(_t),Xt=Nt(me);return Ka(ft,Xt,rt)},e.addHook=function(_t,me){typeof me=="function"&&(B[_t]=B[_t]||[],rp(B[_t],me))},e.removeHook=function(_t){if(B[_t])return bM(B[_t])},e.removeHooks=function(_t){B[_t]&&(B[_t]=[])},e.removeAllHooks=function(){B={}},e}var QG=KG();const f0e=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i,lessonBlocks:o})=>{const c=T.useRef(Gv()),d=T.useRef(Date.now()),h=T.useRef(t),[m,p]=T.useState(!0),[x,y]=T.useState(0),[S,N]=T.useState(!1),[w,j]=T.useState(null),[k,I]=T.useState(0),[L,O]=T.useState(0),[R,A]=T.useState(!1),[E,C]=T.useState(0),[U,P]=T.useState(!1),$=T.useRef(null),B=T.useRef(null),G=T.useRef(null),K=T.useRef(new Set),H=T.useRef(null),[Z,ae]=T.useState(!1),[he,fe]=T.useState("");T.useEffect(()=>{h.current=t},[t]);const Y=T.useCallback(()=>{d.current=Date.now(),m||p(!0)},[m]);T.useEffect(()=>{const xe=setInterval(()=>{Date.now()-d.current<6e4?(c.current.engagementTime+=1,y(c.current.engagementTime),m||p(!0)):m&&p(!1)},1e3);return()=>clearInterval(xe)},[m]),T.useEffect(()=>{const xe=["mousemove","keydown","scroll","click"];return xe.forEach(Te=>window.addEventListener(Te,Y)),()=>xe.forEach(Te=>window.removeEventListener(Te,Y))},[Y]),T.useEffect(()=>()=>{h.current(c.current)},[]),T.useEffect(()=>{if(!n||!a)return;const xe=async Te=>{var Be,Q,te,Ne,Se,Qe,nt,Ot,Me,lt,St,vt;const Ve=$.current;if(!Ve)return;const Ze=Ve.src?new URL(Ve.src).origin:"";if(Te.origin!==window.location.origin&&Te.origin!==Ze)return;const Xe=Te.origin,ie=Te.data;if(!(!ie||typeof ie!="object"||!((Be=ie.type)!=null&&Be.startsWith("portal-"))))switch(Y(),ie.type){case"portal-ready":{N(!0);try{const et=await ma(ot(Ie,"practice_progress",`${n}_${a}`)),ce=et.exists()?et.data():null,Ue=(ce==null?void 0:ce.answeredQuestions)||[];Ue.forEach(dt=>K.current.add(dt)),I(Ue.length),ce&&(H.current=ce,ce.completed&&(A(!0),C(ce.totalCompletions||1)));const Je=ce?{state:ce.state||null,currentQuestion:ce.currentQuestion??0}:null,ht=ce!=null&&ce.completed?{completed:!0,completedAt:ce.completedAt,bestScore:ce.bestScore,totalCompletions:ce.totalCompletions||0,lastCompletion:((Q=ce.completionHistory)==null?void 0:Q.length)>0?ce.completionHistory[ce.completionHistory.length-1]:null}:null;(te=Ve.contentWindow)==null||te.postMessage({type:"portal-init",payload:{userId:n,savedState:Je,completionInfo:ht}},Xe)}catch(et){console.error("Bridge: Failed to load saved state",et),(Ne=Ve.contentWindow)==null||Ne.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},Xe)}break}case"portal-save":{const{state:et,currentQuestion:ce}=ie.payload||{};if(!et)break;try{const Ue=H.current,Je={userId:n,assignmentId:a,state:et,currentQuestion:ce??0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString()};Ue!=null&&Ue.completed&&(Je.completed=Ue.completed,Je.completedAt=Ue.completedAt,Je.bestScore=Ue.bestScore,Je.totalCompletions=Ue.totalCompletions,Je.completionHistory=Ue.completionHistory),await Yn(ot(Ie,"practice_progress",`${n}_${a}`),Je,{merge:!0}),H.current={...H.current,...Je},(Se=Ve.contentWindow)==null||Se.postMessage({type:"portal-save-ok"},Xe)}catch(Ue){console.error("Bridge: Save failed",Ue),(Qe=Ve.contentWindow)==null||Qe.postMessage({type:"portal-save-error"},Xe)}break}case"portal-complete":{const{score:et,totalQuestions:ce,correctAnswers:Ue}=ie.payload||{};try{const Je=H.current,ht=new Date().toISOString(),dt={completedAt:ht,score:et??0,totalQuestions:ce??0,correctAnswers:Ue??0,answeredQuestions:Array.from(K.current)},Ut=[...(Je==null?void 0:Je.completionHistory)||[],dt],tr=Math.max((Je==null?void 0:Je.bestScore)||0,et||0),Ir=((Je==null?void 0:Je.totalCompletions)||0)+1,ve={userId:n,assignmentId:a,completed:!0,completedAt:(Je==null?void 0:Je.completedAt)||ht,bestScore:tr,totalCompletions:Ir,completionHistory:Ut,answeredQuestions:Array.from(K.current),lastUpdated:ht};Je!=null&&Je.state&&(ve.state=Je.state,ve.currentQuestion=Je.currentQuestion),await Yn(ot(Ie,"practice_progress",`${n}_${a}`),ve,{merge:!0}),H.current={...H.current,...ve},A(!0),C(Ir),qn.xpGain(),j({text:"Module Complete!",type:"success"}),setTimeout(()=>j(null),3e3),(nt=Ve.contentWindow)==null||nt.postMessage({type:"portal-complete-ok",payload:{totalCompletions:Ir,bestScore:tr}},Xe)}catch(Je){console.error("Bridge: Completion save failed",Je),(Ot=Ve.contentWindow)==null||Ot.postMessage({type:"portal-complete-error"},Xe)}break}case"portal-replay":{try{const et=H.current,ce={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(et==null?void 0:et.completed)||!1,completedAt:(et==null?void 0:et.completedAt)||null,bestScore:(et==null?void 0:et.bestScore)||null,totalCompletions:(et==null?void 0:et.totalCompletions)||0,completionHistory:(et==null?void 0:et.completionHistory)||[]};await Yn(ot(Ie,"practice_progress",`${n}_${a}`),ce,{merge:!0}),H.current=ce,P(!1),(Me=Ve.contentWindow)==null||Me.postMessage({type:"portal-reset-ok"},Xe)}catch(et){console.error("Bridge: Replay reset failed",et)}break}case"portal-answer":{const{questionId:et,correct:ce,attempts:Ue}=ie.payload||{};if(!et)break;if(ce&&!K.current.has(et)){K.current.add(et),I(ht=>ht+1);const Je=Ue===1?15:10;try{const dt=(await kH({assignmentId:a,questionId:et,xpAmount:Je,classType:i||"Uncategorized"})).data;if(dt.awarded){const Ut=dt.serverXP||Je;O(tr=>tr+Ut),j({text:`+${Ut} XP`,type:"success"}),qn.xpGain(),setTimeout(()=>j(null),2e3)}(lt=Ve.contentWindow)==null||lt.postMessage({type:"portal-xp-result",payload:{questionId:et,awarded:dt.awarded,xp:dt.serverXP||Je}},Xe)}catch(ht){console.error("Bridge: XP award failed",ht),(St=Ve.contentWindow)==null||St.postMessage({type:"portal-xp-result",payload:{questionId:et,awarded:!1,xp:0}},Xe)}}else ce&&((vt=Ve.contentWindow)==null||vt.postMessage({type:"portal-xp-result",payload:{questionId:et,awarded:!1,xp:0}},Xe));break}}};return window.addEventListener("message",xe),()=>window.removeEventListener("message",xe)},[n,a,i,Y]);const ne=T.useCallback(()=>{const xe=$.current;if(!xe||!n||!a)return;const Ve=(xe.src?new URL(xe.src).origin:"")||window.location.origin;(async()=>{var Ze;try{const Xe=H.current,ie={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(Xe==null?void 0:Xe.completed)||!1,completedAt:(Xe==null?void 0:Xe.completedAt)||null,bestScore:(Xe==null?void 0:Xe.bestScore)||null,totalCompletions:(Xe==null?void 0:Xe.totalCompletions)||0,completionHistory:(Xe==null?void 0:Xe.completionHistory)||[]};await Yn(ot(Ie,"practice_progress",`${n}_${a}`),ie,{merge:!0}),H.current=ie,P(!1),(Ze=xe.contentWindow)==null||Ze.postMessage({type:"portal-reset-ok"},Ve)}catch(Xe){console.error("Replay reset failed",Xe)}})()},[n,a]),re=T.useCallback(()=>{const xe=G.current;xe&&(document.fullscreenElement?document.exitFullscreen():xe.requestFullscreen().catch(()=>{ae(Te=>!Te)}))},[]);return T.useEffect(()=>{const xe=()=>ae(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",xe),()=>document.removeEventListener("fullscreenchange",xe)},[]),T.useEffect(()=>{if(B.current&&r){const xe=r.replace(/\$(.*?)\$/g,(Te,Ve)=>{try{return sb.renderToString(Ve,{throwOnError:!1})}catch{return Ve}});B.current.innerHTML=QG.sanitize(xe,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]}),fe(B.current.textContent||"")}},[r]),s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?s.jsx(sE,{className:"w-4 h-4"}):s.jsx(io,{className:"w-4 h-4 animate-pulse"}),m?"Active Session":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(x/60),"m ",x%60,"s"]}),S&&k>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[s.jsx(Lr,{className:"w-3 h-3"})," ",k," answered"]}),S&&L>0&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[s.jsx(Vn,{className:"w-3 h-3"})," ",L," XP"]}),R&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[s.jsx(sl,{className:"w-3 h-3"}),"Completed",E>1?` (${E}x)`:""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(r||he)&&s.jsx(LR,{textContent:he,compact:!0}),R&&S&&(U?s.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[s.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),s.jsx("button",{onClick:ne,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),s.jsx("button",{onClick:()=>P(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[s.jsx($le,{className:"w-3 h-3"})," Replay"]})),e&&s.jsxs("button",{onClick:re,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:Z?"Exit full screen (Esc)":"Full screen",children:[Z?s.jsx(BH,{className:"w-3 h-3"}):s.jsx(pv,{className:"w-3 h-3"}),Z?"Exit Full Screen":"Full Screen"]}),S&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Vn,{className:"w-3 h-3"})," XP Linked"]}),!m&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Ds,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),w&&s.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${w.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[w.type==="success"?s.jsx(Lr,{className:"w-4 h-4"}):s.jsx(ao,{className:"w-4 h-4"}),w.text]})}),s.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?s.jsxs("div",{ref:G,className:"flex-1 flex flex-col bg-white relative",children:[s.jsx("iframe",{ref:$,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:Y}),s.jsx(gce,{containerRef:G})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:s.jsxs("div",{className:"text-center",children:[s.jsx(o0,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),s.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&s.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-white font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(pv,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),he&&s.jsx(LR,{textContent:he})]}),s.jsx("div",{ref:B,className:"proctor-content text-sm leading-relaxed"})]}),o&&o.length>0&&s.jsxs("div",{className:"h-2/5 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("h3",{className:"text-white font-bold mb-4 text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(pv,{className:"w-4 h-4 text-purple-400"})," Interactive Lesson"]}),s.jsx(YH,{blocks:o,showSidebar:!0,engagementTime:x,xpEarned:L})]})]})]})},m0e=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState(null),a=async()=>{e(!0),n(null);try{await Bte(HT,koe)}catch(o){console.error("Login Error:",o),n(o instanceof Error?o.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ds,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"break-words",children:[s.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[s.jsx(wle,{className:"w-4 h-4"}),"Action Required:"]}),s.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",s.jsx("code",{children:"lib/firebase.ts"})," and replace",s.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),s.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),s.jsx("span",{children:"Sign in with Google"})]})}),s.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),s.jsx("span",{children:""}),s.jsx("span",{children:"Firebase Auth"})]})]})})]})},XG=T.createContext(null),Ro=()=>{const t=T.useContext(XG);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},p0e=({children:t})=>{const[e,r]=T.useState({isOpen:!1,options:{message:""}}),n=T.useRef(null),a=T.useRef(null),i=T.useCallback(m=>new Promise(p=>{n.current=p,r({isOpen:!0,options:m})}),[]),o=T.useCallback(()=>{var m;(m=n.current)==null||m.call(n,!0),n.current=null,r(p=>({...p,isOpen:!1}))},[]),c=T.useCallback(()=>{var m;(m=n.current)==null||m.call(n,!1),n.current=null,r(p=>({...p,isOpen:!1}))},[]);T.useEffect(()=>{if(e.isOpen){const m=setTimeout(()=>{var p;(p=a.current)==null||p.focus()},50);return()=>clearTimeout(m)}},[e.isOpen]),T.useEffect(()=>{if(!e.isOpen)return;const m=p=>{p.key==="Escape"&&c(),p.key==="Enter"&&o()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[e.isOpen,c,o]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return s.jsxs(XG.Provider,{value:{confirm:i},children:[t,e.isOpen&&s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),s.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:s.jsx(Ds,{className:"w-5 h-5"})}),s.jsxs("div",{children:[e.options.title&&s.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),s.jsx("button",{ref:a,onClick:o,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),s.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},mg=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=o=>{e.includes(o)?r(e.filter(c=>c!==o)):r([...e,o])};return s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(o=>s.jsx("button",{type:"button",onClick:()=>i(o),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(o)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:o},o))]})]})},jM={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:s.jsx(K2,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:s.jsx(Ds,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:s.jsx(Dle,{className:"w-4 h-4"})}},g0e=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=Ro(),a=Ga(),[i,o]=T.useState(!1),[c,d]=T.useState(""),[h,m]=T.useState(""),[p,x]=T.useState("INFO"),[y,S]=T.useState("GLOBAL"),[N,w]=T.useState([]),j=async()=>{if(!(!c.trim()||!h.trim()))try{await Re.createAnnouncement({title:c.trim(),content:h.trim(),classType:y,priority:p,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...N.length>0?{targetSections:N}:{}}),await Re.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),m(""),w([]),o(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},k=async I=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Re.deleteAnnouncement(I)};return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Xv,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Dn,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(Xv,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):s.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(I=>{var O;const L=jM[I.priority]||jM.INFO;return s.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:I.title}),s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:I.content}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[I.classType==="GLOBAL"?"All Classes":I.classType,(O=I.targetSections)!=null&&O.length?`  ${I.targetSections.join(", ")}`:"","  ",new Date(I.createdAt).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>k(I.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},I.id)})}),s.jsx(Ei,{isOpen:i,onClose:()=>o(!1),title:"New Announcement",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:I=>d(I.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),s.jsx("textarea",{value:h,onChange:I=>m(I.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),s.jsxs("select",{value:p,onChange:I=>x(I.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"INFO",children:"Info"}),s.jsx("option",{value:"WARNING",children:"Warning"}),s.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),s.jsxs("select",{value:y,onChange:I=>S(I.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(kr).filter(I=>I!=="Uncategorized").map(I=>s.jsx("option",{value:I,children:I},I))]})]})]}),s.jsx(mg,{availableSections:r,selectedSections:N,onChange:w}),s.jsx("button",{onClick:j,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},OE=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],IE=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],x0e=t=>IE.filter(e=>!e.isSecret||t.includes(e.id)),Dy={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},YG=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],AM=(t,e)=>{const r=YG.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},y0e=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],RE=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of y0e){const a=n.itemIds.filter(o=>r.includes(o)).length,i=n.bonuses.filter(o=>a>=o.count).sort((o,c)=>c.count-o.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},v0e=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],EM=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],JG=t=>[...EM].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||EM[0],ZG=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,kM=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],b0e=["I","II","III","IV","V"],w0e=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},c0=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,kM.length-1),a=kM[n]||"Unknownium",i=b0e[r],o=n+1,c=w0e(o);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Yi={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},S0e={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},CM=(t,e,r)=>{const n=Yi.UNSOCKET_BASE,a=S0e[t],i=Math.max(1,e),o=1+r;return Math.ceil(n*a*i*o)},OM=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},ME=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},DE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([o,c])=>{e[o]+=c})}),e},u0=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let o=0;switch(n.rarity){case"COMMON":o=0;break;case"UNCOMMON":o=10;break;case"RARE":o=30;break;case"UNIQUE":o=60;break}e+=i*10+o}),Math.floor(e))},N0e=t=>{if(!t)return{};const e=Object.values(t).filter(Boolean),r=RE(e),n={};return r.forEach(({activeBonus:a})=>{a.effects.forEach(i=>{n[i.stat]=(n[i.stat]||0)+i.value})}),n},_0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{(n.gems||[]).forEach(a=>{e[a.stat]=(e[a.stat]||0)+a.value})}),e},T0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{if(!n.runewordActive)return;const a=OE.find(i=>i.id===n.runewordActive);if(a)for(const[i,o]of Object.entries(a.bonusStats))e[i]=(e[i]||0)+o}),e},IM=t=>t.runewordActive&&OE.find(e=>e.id===t.runewordActive)||null,fa=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Uu(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const j0e=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var O,R,A,E,C,U,P,$,B,G;const[i,o]=T.useState(!1),c=((O=t.gamification)==null?void 0:O.level)||1,d=((R=t.gamification)==null?void 0:R.xp)||0,h=((A=t.gamification)==null?void 0:A.currency)||0,m=c0(c),p=DE(t),x=t.enrolledClasses||(t.classType?[t.classType]:[]),y=((C=(E=t.gamification)==null?void 0:E.completedQuests)==null?void 0:C.length)||0,S=((P=(U=t.gamification)==null?void 0:U.activeQuests)==null?void 0:P.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").length)||0,N=T.useMemo(()=>x.map(K=>{var ne,re;const H=((re=(ne=t.gamification)==null?void 0:ne.classXp)==null?void 0:re[K])||0,Z=Uu(t,K),ae=u0(Z.equipped),he=Z.inventory.length,fe=e.filter(xe=>{const Te=r.find(Ve=>Ve.id===xe.assignmentId);return(Te==null?void 0:Te.classType)===K}),Y=Math.round(fe.reduce((xe,Te)=>{var Ve;return xe+(((Ve=Te.metrics)==null?void 0:Ve.engagementTime)||0)},0)/60);return{cls:K,classXp:H,gearScore:ae,inventoryCount:he,resourcesViewed:fe.length,totalTime:Y}}),[t,e,r,x]),w=T.useMemo(()=>{const K=new Map;return e.forEach(H=>{var Y,ne,re,xe,Te,Ve,Ze;const Z=r.find(Xe=>Xe.id===H.assignmentId),ae=H.assignmentId,he=K.get(ae),fe=((Y=H.metrics)==null?void 0:Y.engagementTime)||0;he?(he.visits++,he.totalTime+=fe,he.totalKeystrokes+=((ne=H.metrics)==null?void 0:ne.keystrokes)||0,he.totalClicks+=((re=H.metrics)==null?void 0:re.clickCount)||0,he.totalPastes+=((xe=H.metrics)==null?void 0:xe.pasteCount)||0,he.statuses.push(H.status),H.submittedAt&&(!he.lastVisit||H.submittedAt>he.lastVisit)&&(he.lastVisit=H.submittedAt)):K.set(ae,{title:(Z==null?void 0:Z.title)||H.assignmentTitle,classType:(Z==null?void 0:Z.classType)||"Unknown",category:(Z==null?void 0:Z.category)||"Supplemental",visits:1,totalTime:fe,totalKeystrokes:((Te=H.metrics)==null?void 0:Te.keystrokes)||0,totalClicks:((Ve=H.metrics)==null?void 0:Ve.clickCount)||0,totalPastes:((Ze=H.metrics)==null?void 0:Ze.pasteCount)||0,lastVisit:H.submittedAt||null,statuses:[H.status]})}),Array.from(K.values()).sort((H,Z)=>Z.totalTime-H.totalTime)},[e,r]),j=T.useMemo(()=>e.filter(K=>K.submittedAt).sort((K,H)=>new Date(H.submittedAt).getTime()-new Date(K.submittedAt).getTime()).slice(0,10).map(K=>{var H,Z;return{...K,assignmentTitle:((H=r.find(ae=>ae.id===K.assignmentId))==null?void 0:H.title)||K.assignmentTitle,classType:((Z=r.find(ae=>ae.id===K.assignmentId))==null?void 0:Z.classType)||"Unknown"}}),[e,r]),k=Math.round(e.reduce((K,H)=>{var Z;return K+(((Z=H.metrics)==null?void 0:Z.engagementTime)||0)},0)/60),I=T.useMemo(()=>{const K=new Set;e.forEach(Y=>{if(Y.submittedAt){const ne=new Date(Y.submittedAt),re=ne.getFullYear(),xe=new Date(re,0,1),Te=Math.ceil(((ne.getTime()-xe.getTime())/864e5+xe.getDay()+1)/7);K.add(`${re}-W${Te}`)}});const H=new Date,Z=H.getFullYear(),ae=new Date(Z,0,1),he=Math.ceil(((H.getTime()-ae.getTime())/864e5+ae.getDay()+1)/7);let fe=0;for(let Y=he;Y>0&&K.has(`${Z}-W${Y}`);Y--)fe++;return fe},[e]),L=T.useMemo(()=>{const K=[],H=new Date;for(let re=6;re>=0;re--){const xe=new Date(H);xe.setDate(xe.getDate()-re);const Te=xe.toISOString().split("T")[0],Ve=e.filter(Xe=>{var ie;return(ie=Xe.submittedAt)==null?void 0:ie.startsWith(Te)}),Ze=Ve.reduce((Xe,ie)=>{var Be;return Xe+(((Be=ie.metrics)==null?void 0:Be.engagementTime)||0)},0);K.push({label:xe.toLocaleDateString([],{weekday:"short"}),time:Math.round(Ze/60),subs:Ve.length})}const Z=K.slice(4).reduce((re,xe)=>re+xe.time,0),ae=K.slice(0,4).reduce((re,xe)=>re+xe.time,0),he=Z/3,fe=ae/4,Y=he>fe*1.2?"up":he<fe*.6?"down":"flat",ne=Math.max(1,...K.map(re=>re.time));return{days:K,trend:Y,maxTime:ne}},[e]);return xu.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),s.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:s.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${m.tierGlow} shadow-xl`,children:t.avatarUrl?s.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${m.tierColor.split(" ")[0]}`}):s.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${m.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),(($=t.gamification)==null?void 0:$.codename)&&s.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),s.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:s.jsx(Jn,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Vn,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(io,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[k,"m"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(zi,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(ku,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:y}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(WT,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:h}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Cu,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[I,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),s.jsx("div",{className:"space-y-2",children:Object.entries(p).map(([K,H])=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:K}),s.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,H)}%`}})}),s.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:H})]},K))})]}),n.length>0&&(()=>{const K=n[0],H=qo[K.bucket];return H?s.jsxs("div",{className:`border rounded-2xl p-4 ${H.borderColor} ${H.bgColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${H.color} border ${H.borderColor}`,children:H.label})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-3",children:H.description}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[s.jsxs("span",{children:["ES: ",K.engagementScore]}),s.jsxs("span",{children:["Subs: ",K.metrics.submissionCount]}),s.jsxs("span",{children:["Days Active: ",K.metrics.activityDays,"/7"]}),s.jsxs("span",{children:["Paste Ratio: ",Math.round(K.metrics.avgPasteRatio*100),"%"]}),s.jsxs("span",{children:["Time: ",Math.round(K.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[s.jsx(PH,{className:"w-3.5 h-3.5 text-amber-400"}),s.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:K.recommendation.action}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:K.recommendation.categories.map(Z=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:Z},Z))})]}),(()=>{const Z=r.filter(ae=>ae.classType===K.classType&&ae.status==="ACTIVE"&&K.recommendation.categories.includes(ae.category||"Supplemental")).slice(0,3);return Z.length===0?null:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),s.jsx("div",{className:"space-y-1",children:Z.map(ae=>s.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:ae.category}),s.jsx("span",{className:"text-white truncate",children:ae.title})]},ae.id))})]})})()]}):null})(),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),s.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&s.jsx(Y2,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&s.jsx(qle,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&s.jsx(Q2,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((K,H)=>{const Z=L.maxTime>0?Math.max(2,K.time/L.maxTime*100):2,ae=H===L.days.length-1;return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[s.jsx("div",{className:`w-full rounded-t transition-all ${K.time>0?ae?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${Z}%`}}),s.jsx("span",{className:"text-[8px] text-gray-500",children:K.label}),s.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[K.time,"m  ",K.subs," sub",K.subs!==1?"s":""]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),s.jsx("div",{className:"space-y-3",children:N.map(K=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:K.cls}),s.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[K.classXp.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[s.jsxs("span",{children:[s.jsx(os,{className:"w-3 h-3 inline mr-0.5"}),K.gearScore," GS"]}),s.jsxs("span",{children:[s.jsx(WT,{className:"w-3 h-3 inline mr-0.5"}),K.inventoryCount," items"]}),s.jsxs("span",{children:[s.jsx(zi,{className:"w-3 h-3 inline mr-0.5"}),K.resourcesViewed," viewed"]}),s.jsxs("span",{children:[s.jsx(io,{className:"w-3 h-3 inline mr-0.5"}),K.totalTime,"m"]})]})]},K.cls))})]}),w.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center justify-between w-full mb-1",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[s.jsx(Vf,{className:"w-3.5 h-3.5"})," Resource Performance",s.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",w.length,")"]})]}),i?s.jsx(Sx,{className:"w-4 h-4 text-gray-500"}):s.jsx(yi,{className:"w-4 h-4 text-gray-500"})]}),i&&s.jsx("div",{className:"space-y-2 mt-3",children:w.map((K,H)=>{const Z=Math.round(K.totalTime/60),ae=K.totalKeystrokes>20&&K.totalClicks>5?"high":K.totalClicks>2?"medium":"low",he=ae==="high"?"text-green-400":ae==="medium"?"text-yellow-400":"text-red-400",fe=ae==="high"?"bg-green-500":ae==="medium"?"bg-yellow-500":"bg-red-500";return s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.title}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[K.classType,"  ",K.category]})]}),s.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${fe}`,title:`${ae} engagement`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Time"}),s.jsxs("div",{className:"text-white font-bold",children:[Z,"m"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Visits"}),s.jsx("div",{className:"text-white font-bold",children:K.visits})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Keys"}),s.jsx("div",{className:"text-white font-bold",children:K.totalKeystrokes})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Quality"}),s.jsx("div",{className:`font-bold capitalize ${he}`,children:ae})]})]}),K.lastVisit&&s.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(K.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),j.length===0?s.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):s.jsx("div",{className:"space-y-2",children:j.map(K=>{var Z;const H=Math.round((((Z=K.metrics)==null?void 0:Z.engagementTime)||0)/60);return s.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H>=5?"bg-green-500":H>=1?"bg-yellow-500":"bg-gray-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.assignmentTitle}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[K.classType,"  ",H,"m engaged"]})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:K.submittedAt?new Date(K.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},K.id)})})]}),S>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),s.jsx("div",{className:"space-y-2",children:(G=(B=t.gamification)==null?void 0:B.activeQuests)==null?void 0:G.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").map(K=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ku,{className:`w-3.5 h-3.5 ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),s.jsx("span",{className:"text-xs text-white",children:K.questId})]}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:K.status})]},K.questId))})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[s.jsxs("div",{children:["Email: ",t.email]}),s.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),s.jsxs("div",{children:["Enrolled: ",x.join(", ")||"None"]}),s.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),s.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&s.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},A0e=({students:t,isOpen:e,onClose:r})=>{const n=Ga(),[a,i]=T.useState(""),[o,c]=T.useState(null),[d,h]=T.useState(!1),m=JJ,p=T.useMemo(()=>a?t.filter(y=>y.name.toLowerCase().includes(a.toLowerCase())).slice(0,20):t.slice(0,20),[t,a]),x=async y=>{if(o){h(!0);try{await Re.awardBehavior({studentId:o.id,studentName:o.name,categoryId:y.id,categoryName:y.name,xpAmount:y.xpAmount,fluxAmount:y.fluxAmount,classType:o.classType||"AP Physics",awardedBy:"admin",timestamp:new Date().toISOString()}),n.success(`${y.icon} +${y.xpAmount} XP awarded to ${o.name} for ${y.name}!`),c(null),i("")}catch{n.error("Failed to award.")}finally{h(!1)}}};return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:r,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl animate-in fade-in zoom-in-95 duration-300",onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(q2,{className:"w-5 h-5 text-amber-400"})," Quick Award"]}),s.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Jn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-5",children:o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-5 p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.avatarUrl?s.jsx("img",{src:o.avatarUrl,alt:"",className:"w-10 h-10 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-sm font-bold text-purple-400",children:o.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:o.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:o.classType})]}),s.jsx("button",{onClick:()=>c(null),className:"text-xs text-gray-500 hover:text-white transition",children:"Change"})]}),s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-3",children:"Select Behavior"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:m.map(y=>s.jsxs("button",{onClick:()=>x(y),disabled:d,className:`p-4 rounded-xl border text-left transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-40 bg-${y.color}-500/5 border-${y.color}-500/20 hover:border-${y.color}-500/40 hover:bg-${y.color}-500/10`,children:[s.jsx("div",{className:"text-2xl mb-1",children:y.icon}),s.jsx("div",{className:"text-sm font-bold text-white",children:y.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] text-purple-400 font-bold flex items-center gap-0.5",children:[s.jsx(Vn,{className:"w-2.5 h-2.5"}),y.xpAmount," XP"]}),s.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxAmount," Flux"]})]})]},y.id))})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Nx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search for a student...",value:a,onChange:y=>i(y.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 transition",autoFocus:!0})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar space-y-1",children:p.map(y=>s.jsxs("button",{onClick:()=>c(y),className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-left hover:bg-white/5 transition group",children:[y.avatarUrl?s.jsx("img",{src:y.avatarUrl,alt:"",className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs font-bold text-purple-400",children:y.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-white group-hover:text-amber-300 transition",children:y.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:y.classType})]})]},y.id))})]})})]})]}):null},E0e=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=Ro(),[a,i]=T.useState(null),[o,c]=T.useState([]),[d,h]=T.useState([]),[m,p]=T.useState([]),[x,y]=T.useState([]),[S,N]=T.useState(Date.now()),[w,j]=T.useState(null),[k,I]=T.useState("xp"),[L,O]=T.useState("desc"),[R,A]=T.useState(""),[E,C]=T.useState(""),[U,P]=T.useState(!1),$=Q=>{k===Q?O(te=>te==="asc"?"desc":"asc"):(I(Q),O("asc"))},B=({label:Q,col:te,className:Ne})=>s.jsx("th",{className:`cursor-pointer select-none group p-3 ${Ne??""}`,onClick:()=>$(te),children:s.jsxs("div",{className:`flex items-center gap-1 ${Ne!=null&&Ne.includes("text-center")?"justify-center":Ne!=null&&Ne.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:Q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Sx,{className:`w-2.5 h-2.5 -mb-0.5 ${k===te&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(yi,{className:`w-2.5 h-2.5 -mt-0.5 ${k===te&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});T.useEffect(()=>{const Q=Re.subscribeToChatFlags(c),te=Re.subscribeToAnnouncements(h),Ne=Re.subscribeToStudentAlerts(p),Se=Re.subscribeToStudentBuckets(y),Qe=setInterval(()=>N(Date.now()),6e4);return()=>{Q(),te(),Ne(),Se(),clearInterval(Qe)}},[]);const G=t.filter(Q=>Q.role==="STUDENT"),K=T.useMemo(()=>{const Q=new Set;return G.forEach(te=>{te.section&&Q.add(te.section)}),Array.from(Q).sort()},[G]),H=T.useMemo(()=>{const Q=new Map;for(const te of m){const Ne=Q.get(te.studentId),Se={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!Ne||(Se[te.riskLevel]||0)>(Se[Ne.riskLevel]||0))&&Q.set(te.studentId,te)}return Q},[m]),Z=T.useMemo(()=>{const Q=new Map;for(const te of x)Q.has(te.studentId)||Q.set(te.studentId,te);return Q},[x]),ae=T.useMemo(()=>{const Q={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},te=new Set;for(const Ne of x)te.has(Ne.studentId)||(te.add(Ne.studentId),Q[Ne.bucket]!==void 0&&Q[Ne.bucket]++);return Q},[x]),he=G.length,fe=Math.round(G.reduce((Q,te)=>{var Ne;return Q+(((Ne=te.stats)==null?void 0:Ne.totalTime)||0)},0)/(he||1)),Y=G.reduce((Q,te)=>{var Ne;return Q+(((Ne=te.stats)==null?void 0:Ne.problemsCompleted)||0)},0),ne=G.reduce((Q,te)=>{var Ne;return Q+(((Ne=te.gamification)==null?void 0:Ne.xp)||0)},0),re=G.filter(Q=>Q.mutedUntil&&new Date(Q.mutedUntil).getTime()>S),xe=async Q=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Re.muteUser(Q,0)},Te=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Re.INDEFINITE_MUTE}],Ve=async(Q,te)=>{await Re.muteUser(Q,te),j(null)},Ze=async(Q,te)=>{const Ne=new Date(te).getTime(),Se=new Date(Math.max(Ne,Date.now())+3600*1e3),Qe=Math.ceil((Se.getTime()-Date.now())/6e4);await Re.muteUser(Q,Qe)},Xe=({label:Q,value:te,icon:Ne,color:Se})=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[s.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${Se}`,children:Ne}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:te}),s.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:Q})]}),s.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${Se}`})]}),ie=Q=>{const Ne=new Date(Q).getTime()-S;if(Ne<=0)return"Expired";const Se=Math.ceil(Ne/6e4);return Se>60?`${Math.ceil(Se/60)} hrs`:`${Se} mins`},Be=Q=>{if(!Q)return"Never";const te=new Date(Q),Ne=Date.now()-te.getTime(),Se=Math.floor(Ne/6e4);if(Se<1)return"Just now";if(Se<60)return`${Se}m ago`;const Qe=Math.floor(Se/60);return Qe<24?`${Qe}h ago`:te.toLocaleDateString()};return s.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),s.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Xe,{label:"Total Students",value:he,icon:s.jsx(ls,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),s.jsx(Xe,{label:"Total XP Awarded",value:ne.toLocaleString(),icon:s.jsx(Vn,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),s.jsx(Xe,{label:"Resources Viewed",value:Y,icon:s.jsx(l0,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),s.jsx(Xe,{label:"Avg Active Time",value:`${fe}m`,icon:s.jsx(io,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${o.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${o.length>0?"text-red-400":"text-white"}`,children:[o.length>0?s.jsx(Ds,{className:"w-5 h-5"}):s.jsx(X2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${o.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:o.length>0?`${o.length} Issues`:"Secure"})]}),o.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(s0,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:o.map(Q=>s.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-white",children:[Q.senderName," ",s.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",Q.classType]})]}),s.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',Q.content,'"']})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(Q.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:async()=>{await Re.resolveFlag(Q.id),Q.messageId&&await Re.unflagMessage(Q.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(Ql,{className:"w-3 h-3"})," Dismiss"]}),s.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Re.resolveFlag(Q.id),Q.messageId&&await Re.deleteMessage(Q.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(Wr,{className:"w-3 h-3"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>j(w===Q.id?null:Q.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:s.jsx(Yv,{className:"w-3 h-3"})}),w===Q.id&&s.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",Q.senderName]}),Te.map(te=>s.jsx("button",{onClick:()=>Ve(Q.senderId,te.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:te.label},te.minutes))]})]})]})]},Q.id))})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Yv,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),re.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(ls,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[s.jsx("th",{className:"pb-2",children:"Operative"}),s.jsx("th",{className:"pb-2",children:"Remaining"}),s.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:re.map(Q=>s.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[s.jsxs("td",{className:"py-3",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:Q.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:Q.classType})]}),s.jsx("td",{className:"py-3",children:s.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:ie(Q.mutedUntil)})}),s.jsx("td",{className:"py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Ze(Q.id,Q.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:s.jsx(Zv,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>xe(Q.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:s.jsx(s0,{className:"w-3.5 h-3.5"})})]})})]},Q.id))})]})})]})]}),m.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(GT,{className:"w-5 h-5"}),"Early Warning System"]}),s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[m.length," Alert",m.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:m.map(Q=>{const te={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},Ne={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},Se=Q.bucket?qo[Q.bucket]:null;return s.jsx("div",{className:`border p-4 rounded-xl ${te[Q.riskLevel]||te.LOW}`,children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${Ne[Q.riskLevel]||Ne.LOW}`,children:Q.riskLevel}),Se&&s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${Se.bgColor} ${Se.color} ${Se.borderColor} border`,children:Se.label}),s.jsx("span",{className:"text-sm font-bold text-white truncate",children:Q.studentName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:Q.classType})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:Q.message}),Se&&s.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:Se.description}),s.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["ES: ",Q.engagementScore]}),s.jsxs("span",{children:["Class Avg: ",Q.classMean]}),s.jsx("span",{children:new Date(Q.createdAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{onClick:()=>i(Q.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),s.jsx("button",{onClick:async()=>{await Re.dismissAlert(Q.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},Q.id)})})]}),x.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(GT,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),s.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[x.length," profile",x.length!==1?"s":""," across classes"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(qo).map(Q=>{const te=qo[Q],Ne=ae[Q];return s.jsxs("div",{className:`border rounded-xl p-3 ${te.borderColor} ${te.bgColor} transition hover:scale-[1.02]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:`text-xs font-bold ${te.color}`,children:te.label}),s.jsx("span",{className:"text-lg font-bold text-white",children:Ne})]}),s.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:te.description})]},Q)})}),(()=>{const Q=Object.values(ae).reduce((te,Ne)=>te+Ne,0);return Q===0?null:s.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(qo).map(te=>{const Ne=ae[te]/Q*100;if(Ne===0)return null;const Se={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return s.jsx("div",{className:`${Se[te]||"bg-gray-500"} transition-all`,style:{width:`${Ne}%`},title:`${qo[te].label}: ${ae[te]} (${Math.round(Ne)}%)`},te)})})})()]}),s.jsx("div",{className:"mt-8",children:s.jsx(g0e,{announcements:d,studentIds:G.map(Q=>Q.id),availableSections:K})}),s.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Student Engagement Ranking"}),s.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(q2,{className:"w-3.5 h-3.5"})," Quick Award"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Nx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:R,onChange:Q=>A(Q.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("select",{value:E,onChange:Q=>C(Q.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{value:"",children:"All Buckets"}),Object.keys(qo).map(Q=>s.jsx("option",{value:Q,children:qo[Q].label},Q))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[s.jsx(B,{label:"Student",col:"name"}),s.jsx(B,{label:"Class",col:"class"}),s.jsx(B,{label:"Last Seen",col:"lastSeen",className:"text-center"}),s.jsx(B,{label:"Total Time",col:"time",className:"text-center"}),s.jsx(B,{label:"Resources",col:"resources",className:"text-center"}),s.jsx(B,{label:"XP",col:"xp",className:"text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const te=[...G.filter(Se=>{var Ot;const Qe=!R||Se.name.toLowerCase().includes(R.toLowerCase())||Se.email.toLowerCase().includes(R.toLowerCase()),nt=!E||((Ot=Z.get(Se.id))==null?void 0:Ot.bucket)===E;return Qe&&nt})].sort((Se,Qe)=>{var nt,Ot,Me,lt,St,vt,et,ce;switch(k){case"name":return L==="asc"?Se.name.localeCompare(Qe.name):Qe.name.localeCompare(Se.name);case"class":return L==="asc"?(Se.classType||"").localeCompare(Qe.classType||""):(Qe.classType||"").localeCompare(Se.classType||"");case"lastSeen":{const Ue=Se.lastLoginAt?new Date(Se.lastLoginAt).getTime():0,Je=Qe.lastLoginAt?new Date(Qe.lastLoginAt).getTime():0;return L==="asc"?Ue-Je:Je-Ue}case"time":{const Ue=((nt=Se.stats)==null?void 0:nt.totalTime)||0,Je=((Ot=Qe.stats)==null?void 0:Ot.totalTime)||0;return L==="asc"?Ue-Je:Je-Ue}case"resources":{const Ue=((Me=Se.stats)==null?void 0:Me.problemsCompleted)||0,Je=((lt=Qe.stats)==null?void 0:lt.problemsCompleted)||0;return L==="asc"?Ue-Je:Je-Ue}case"xp":default:{const Ue=((vt=(St=Se.gamification)==null?void 0:St.classXp)==null?void 0:vt[Se.classType||""])||0,Je=((ce=(et=Qe.gamification)==null?void 0:et.classXp)==null?void 0:ce[Qe.classType||""])||0;return L==="asc"?Ue-Je:Je-Ue}}}),Ne=Math.max(1,...G.map(Se=>{var Qe,nt;return((nt=(Qe=Se.gamification)==null?void 0:Qe.classXp)==null?void 0:nt[Se.classType||""])||0}));return te.map(Se=>{var Je,ht,dt,Ut;const Qe=((ht=(Je=Se.gamification)==null?void 0:Je.classXp)==null?void 0:ht[Se.classType||""])||0,nt=Math.round(Qe/Ne*100),Ot=Se.lastLoginAt,Me=Ot?Date.now()-new Date(Ot).getTime():1/0,lt=Me<36e5?"text-green-400":Me<864e5?"text-yellow-400":Me<1/0?"text-red-400":"text-gray-600",St=Me<36e5?"bg-green-500":Me<864e5?"bg-yellow-500":Me<1/0?"bg-red-500":"bg-gray-600",vt=H.get(Se.id),et={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},ce=Z.get(Se.id),Ue=ce?qo[ce.bucket]:null;return s.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(vt==null?void 0:vt.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(Se.id),children:[s.jsx("td",{className:"p-3 font-bold text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[Se.avatarUrl?s.jsx("img",{src:Se.avatarUrl,alt:Se.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:Se.name.charAt(0)}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${St}`})]}),s.jsx("span",{className:"truncate max-w-[120px]",children:Se.name}),vt&&et[vt.riskLevel]&&s.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${et[vt.riskLevel]}`,title:`${vt.riskLevel} risk: ${vt.reason}`}),Ue&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${Ue.bgColor} ${Ue.color} border ${Ue.borderColor}`,title:Ue.description,children:Ue.label})]})}),s.jsx("td",{className:"p-3 text-sm text-gray-400",children:Se.classType}),s.jsx("td",{className:`p-3 text-center text-xs font-mono ${lt}`,children:Be(Se.lastLoginAt)}),s.jsxs("td",{className:"p-3 text-center text-white",children:[((dt=Se.stats)==null?void 0:dt.totalTime)||0,"m"]}),s.jsx("td",{className:"p-3 text-center text-white",children:((Ut=Se.stats)==null?void 0:Ut.problemsCompleted)||0}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${nt}%`}})}),s.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Qe})]})})]},Se.id)})})()})]})})]}),a&&(()=>{const Q=G.find(te=>te.id===a);return Q?s.jsx(j0e,{student:Q,submissions:r.filter(te=>te.userId===a),assignments:e,bucketProfiles:x.filter(te=>te.studentId===a),onClose:()=>i(null)}):null})(),s.jsx(A0e,{students:G,isOpen:U,onClose:()=>P(!1)})]})},k0e=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=Ga(),{confirm:i}=Ro(),[o,c]=T.useState(new Set),[d,h]=T.useState(kr.AP_PHYSICS),[m,p]=T.useState(!1),[x,y]=T.useState(!1),[S,N]=T.useState({}),w=(ve,st)=>{N(At=>{const Pt=At[ve]||{col:"name",dir:"asc"};return{...At,[ve]:{col:st,dir:Pt.col===st&&Pt.dir==="asc"?"desc":"asc"}}})},j=({label:ve,col:st,type:At,className:Pt})=>{const $t=S[At]||{col:"name",dir:"asc"},tt=$t.col===st;return s.jsx("th",{className:`cursor-pointer select-none group p-4 ${Pt??""}`,onClick:()=>w(At,st),children:s.jsxs("div",{className:`flex items-center gap-1 ${Pt!=null&&Pt.includes("text-center")?"justify-center":"justify-start"}`,children:[s.jsx("span",{children:ve}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Sx,{className:`w-2.5 h-2.5 -mb-0.5 ${tt&&$t.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(yi,{className:`w-2.5 h-2.5 -mt-0.5 ${tt&&$t.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[k,I]=T.useState(""),[L,O]=T.useState(kr.AP_PHYSICS),[R,A]=T.useState(""),[E,C]=T.useState(""),[U,P]=T.useState(!1),[$,B]=T.useState(!1),[G,K]=T.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[H,Z]=T.useState(10),[ae,he]=T.useState("single"),[fe,Y]=T.useState([]),[ne,re]=T.useState(!1),xe=T.useRef(null),[Te,Ve]=T.useState(null),[Ze,Xe]=T.useState(""),[ie,Be]=T.useState(""),Q=t.filter(ve=>ve.role==="STUDENT"),te=T.useMemo(()=>{const ve=new Set;return Q.forEach(st=>{st.classSections&&Object.values(st.classSections).forEach(At=>{At&&ve.add(At)}),st.section&&ve.add(st.section)}),Array.from(ve).sort()},[Q]),Ne=async(ve,st,At)=>{try{At?await Re.updateUserClassSection(ve,At,st):await Re.updateUserSection(ve,st),Ve(null),Xe(""),Be(""),a.success(`Section updated to ${st||"none"}${At?` for ${At}`:""}`)}catch{a.error("Failed to update section")}},Se=async ve=>{if(o.size!==0)try{await Promise.all(Array.from(o).map(st=>Re.updateUserSection(st,ve))),c(new Set),a.success(`Set ${o.size} students to ${ve}`)}catch{a.error("Failed to bulk update sections")}},Qe=T.useMemo(()=>e.filter(ve=>!t.some(st=>st.email.toLowerCase()===ve.email.toLowerCase())),[e,t]),nt=T.useMemo(()=>[...Array.from(new Set([...Object.values(kr).filter(st=>st!==kr.UNCATEGORIZED),...r.map(st=>st.className)])).sort(),kr.UNCATEGORIZED],[r]),Ot=ve=>{const st=Q.filter($t=>{var tt,ar;return((tt=$t.enrolledClasses)==null?void 0:tt.includes(ve))||ve===kr.UNCATEGORIZED&&(((ar=$t.enrolledClasses)==null?void 0:ar.length)===0||!$t.enrolledClasses)}),At=st.every($t=>o.has($t.id)),Pt=new Set(o);st.forEach($t=>{At?Pt.delete($t.id):Pt.add($t.id)}),c(Pt)},Me=ve=>{const st=new Set(o);st.has(ve)?st.delete(ve):st.add(ve),c(st)},lt=async()=>{if(o.size>0){const ve=Array.from(o).map(async st=>{const At=t.find(Pt=>Pt.id===st);if(At){const Pt=At.enrolledClasses||[],$t=Array.from(new Set([...Pt.filter(tt=>tt!==kr.UNCATEGORIZED),d]));await Re.updateUserEnrolledClasses(st,$t)}});await Promise.all(ve),c(new Set)}},St=async ve=>{if(o.size>0){if(!await i({message:`Remove ${o.size} students from ${ve}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const st=Array.from(o).map(async At=>{const Pt=t.find($t=>$t.id===At);if(Pt){const tt=(Pt.enrolledClasses||[]).filter(ar=>ar!==ve);await Re.updateUserEnrolledClasses(At,tt)}});await Promise.all(st),c(new Set)}},vt=async(ve,st)=>{if(await i({message:`Remove ${ve.name} from ${st}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Pt=(ve.enrolledClasses||[]).filter($t=>$t!==st);await Re.updateUserEnrolledClasses(ve.id,Pt)}},et=async(ve,st)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${st}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Re.removeUser(ve)},ce=async ve=>{ve!==kr.UNCATEGORIZED&&await i({message:`Delete group config ${ve}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Re.deleteClassConfig(ve)},Ue=async ve=>{await i({message:`Cancel invite for ${ve}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Re.removeFromWhitelist(ve)},Je=(ve,st)=>{ve!==kr.UNCATEGORIZED&&(C(ve),P(!0),st?(K(st.features),Z(st.xpPerMinute||10)):(K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),Z(10)),y(!0))},ht=ve=>{ve.preventDefault(),n(k,L),R.trim()&&Re.updateWhitelistSection(k,R.trim()),I(""),A(""),p(!1)},dt=ve=>{var Pt;const st=(Pt=ve.target.files)==null?void 0:Pt[0];if(!st)return;const At=new FileReader;At.onload=$t=>{var Gt,zt;const tt=(Gt=$t.target)==null?void 0:Gt.result;if(!tt)return;const ar=tt.split(/\r?\n/).filter(Nt=>Nt.trim()),Sr=(zt=ar[0])!=null&&zt.toLowerCase().includes("email")?1:0,Ur=new Set(e.map(Nt=>Nt.email.toLowerCase())),mn=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,wr=ar.slice(Sr).map(Nt=>{const Vr=Nt.includes("	")?Nt.split("	"):Nt.split(","),ln=(Vr[0]||"").trim().toLowerCase(),Yr=(Vr[1]||"").trim()||kr.AP_PHYSICS,Fr=(Vr[2]||"").trim();let pn="pending";return mn.test(ln)?Ur.has(ln)&&(pn="duplicate"):pn="invalid",{email:ln,classType:Yr,section:Fr,status:pn}}).filter(Nt=>Nt.email.length>0);Y(wr)},At.readAsText(st),ve.target.value=""},Ut=async()=>{const ve=fe.filter(At=>At.status==="pending");if(ve.length===0)return;re(!0);let st=0;for(const At of ve)try{await Re.addToWhitelist(At.email,At.classType),At.section&&await Re.updateWhitelistSection(At.email,At.section),At.status="success",st++}catch{At.status="invalid"}Y([...fe]),re(!1),a.success(`${st} operative${st!==1?"s":""} imported successfully.`),fe.every(At=>At.status==="success"||At.status==="duplicate")&&setTimeout(()=>{p(!1),Y([]),he("single")},1500)},tr=async ve=>{if(ve.preventDefault(),!!E){B(!0);try{await Re.saveClassConfig({id:E,className:E,features:G,xpPerMinute:H}),C(""),y(!1),P(!1)}catch(st){console.error("Failed to save config:",st),a.error("Failed to save class configuration.")}finally{B(!1)}}},Ir=ve=>{const st=ve===kr.UNCATEGORIZED,At=S[ve]||{col:"name",dir:"asc"},Pt=[...Q.filter(tt=>{var ar;return((ar=tt.enrolledClasses)==null?void 0:ar.includes(ve))||st&&(!tt.enrolledClasses||tt.enrolledClasses.length===0)})].sort((tt,ar)=>{var Sr,Ur,mn,wr;switch(At.col){case"section":{const Gt=tt.section||"",zt=ar.section||"";return At.dir==="asc"?Gt.localeCompare(zt):zt.localeCompare(Gt)}case"status":{const Gt=tt.isWhitelisted?1:0,zt=ar.isWhitelisted?1:0;return At.dir==="asc"?Gt-zt:zt-Gt}case"lastSeen":{const Gt=tt.lastLoginAt?new Date(tt.lastLoginAt).getTime():0,zt=ar.lastLoginAt?new Date(ar.lastLoginAt).getTime():0;return At.dir==="asc"?Gt-zt:zt-Gt}case"xp":{const Gt=((Ur=(Sr=tt.gamification)==null?void 0:Sr.classXp)==null?void 0:Ur[ve])||0,zt=((wr=(mn=ar.gamification)==null?void 0:mn.classXp)==null?void 0:wr[ve])||0;return At.dir==="asc"?Gt-zt:zt-Gt}case"name":default:return At.dir==="asc"?tt.name.localeCompare(ar.name):ar.name.localeCompare(tt.name)}}),$t=r.find(tt=>tt.className===ve);return s.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${st?"opacity-90":""}`,children:[s.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${st?"bg-orange-500/10":"bg-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:`font-bold text-lg tracking-wide ${st?"text-orange-300":"text-white"}`,children:[st&&s.jsx(H2,{className:"w-5 h-5 inline mr-2 mb-1"}),ve]}),s.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${st?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Pt.length," Registered"]}),!st&&s.jsx("button",{onClick:()=>Je(ve,$t),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:s.jsx(dg,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[o.size>0&&Array.from(o).some(tt=>Pt.find(ar=>ar.id===tt))&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("select",{onChange:tt=>{tt.target.value&&Se(tt.target.value),tt.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),s.jsx("option",{value:"",children:"No Section"}),te.map(tt=>s.jsx("option",{value:tt,children:tt},tt))]})}),s.jsxs("button",{onClick:()=>St(ve),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[s.jsx(Kle,{className:"w-3 h-3"})," Remove Selected"]})]}),!st&&s.jsxs("button",{onClick:()=>ce(ve),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[s.jsx(Wr,{className:"w-3 h-3"}),"Config"]})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[s.jsx("th",{className:"w-12 p-4 text-center",children:Pt.length>0&&s.jsx("button",{onClick:()=>Ot(ve),className:"hover:text-purple-400 transition",children:s.jsx(RR,{className:"w-4 h-4"})})}),s.jsx(j,{label:"Operative",col:"name",type:ve}),s.jsx(j,{label:"Section",col:"section",type:ve,className:"text-center"}),s.jsx(j,{label:"System Status",col:"status",type:ve,className:"text-center"}),s.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Pt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 italic text-sm",children:st?"No restricted operatives found.":"No students registered in this roster yet."})}):Pt.map(tt=>{var ar;return s.jsxs("tr",{className:`hover:bg-white/5 transition group ${o.has(tt.id)?"bg-purple-500/10":""}`,children:[s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>Me(tt.id),className:"text-gray-500 hover:text-purple-400 transition",children:o.has(tt.id)?s.jsx(Vle,{className:"w-4 h-4 text-purple-500"}):s.jsx(RR,{className:"w-4 h-4 group-hover:text-gray-400"})})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:tt.avatarUrl,alt:tt.name,className:"w-8 h-8 rounded-full border border-white/10"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:tt.name}),s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:tt.email})]})]})}),s.jsx("td",{className:"p-4 text-center",children:Te===tt.id?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((ar=tt.enrolledClasses)!=null&&ar.length?tt.enrolledClasses:[tt.classType].filter(Boolean)).map(Sr=>{var mn;if(!Sr)return null;const Ur=((mn=tt.classSections)==null?void 0:mn[Sr])||(tt.section&&tt.classType===Sr?tt.section:"");return s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:Sr,children:Sr}),s.jsxs("select",{value:Ur,onChange:wr=>{const Gt=wr.target.value;Gt==="__custom__"?(Xe("__custom__"),Be("")):Ne(tt.id,Gt,Sr)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[s.jsx("option",{value:"",children:"None"}),te.map(wr=>s.jsx("option",{value:wr,children:wr},wr)),s.jsx("option",{value:"__custom__",children:"+ New"})]})]},Sr)}),Ze==="__custom__"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{value:ie,onChange:Sr=>Be(Sr.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:Sr=>{var Ur;if(Sr.key==="Enter"&&ie.trim()){const mn=(Ur=tt.enrolledClasses)!=null&&Ur.length?tt.enrolledClasses:[tt.classType].filter(Boolean);mn[0]&&Ne(tt.id,ie.trim(),mn[0])}},autoFocus:!0}),s.jsx("button",{onClick:()=>{var Sr;if(ie.trim()){const Ur=(Sr=tt.enrolledClasses)!=null&&Sr.length?tt.enrolledClasses:[tt.classType].filter(Boolean);Ur[0]&&Ne(tt.id,ie.trim(),Ur[0])}},className:"text-green-400 hover:text-green-300 p-1",children:s.jsx(Dn,{className:"w-3 h-3"})})]}),s.jsx("button",{onClick:()=>{Ve(null),Xe(""),Be("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):s.jsx("button",{onClick:()=>{Ve(tt.id),Xe(""),Be("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${tt.classSections&&Object.keys(tt.classSections).length>0||tt.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:tt.classSections&&Object.keys(tt.classSections).length>0?Object.values(tt.classSections).filter(Boolean).join(", ")||"Assign":tt.section||"Assign"})}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${tt.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[tt.isWhitelisted?s.jsx(OR,{className:"w-3 h-3"}):s.jsx(X2,{className:"w-3 h-3"}),tt.isWhitelisted?"Authorized":"Restricted"]})}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx("button",{onClick:()=>st?et(tt.id,tt.name):vt(tt,ve),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:st?"Permanently Delete":"Remove from this Class",children:s.jsx(Jn,{className:"w-4 h-4"})})})})]},tt.id)})})]})})]},ve)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),s.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{C(""),K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),P(!1),y(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[s.jsx(dg,{className:"w-4 h-4"}),"Class Config"]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[s.jsx(eb,{className:"w-4 h-4"}),"Invite Student"]})]})]}),Qe.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[s.jsx(kle,{className:"w-4 h-4"})," Pending Class Invitations (",Qe.length,")"]}),s.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),s.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Qe.map(ve=>s.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:ve.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(OR,{className:"w-3 h-3 text-amber-500"}),s.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(ve.classTypes||[ve.classType]).join(", ")," Access"]})]})]}),s.jsx("button",{onClick:()=>Ue(ve.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},ve.email))})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:d,onChange:ve=>h(ve.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:nt.filter(ve=>ve!==kr.UNCATEGORIZED).map(ve=>s.jsxs("option",{value:ve,children:["Apply ",ve," Access"]},ve))}),s.jsx(yi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),s.jsxs("button",{onClick:lt,disabled:o.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[s.jsx(Dn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),s.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[o.size," SELECTION ACTIVE"]})]}),s.jsx("div",{className:"pb-12",children:nt.map(ve=>Ir(ve))}),s.jsxs(Ei,{isOpen:m,onClose:()=>{p(!1),Y([]),he("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[s.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[s.jsxs("button",{onClick:()=>{he("single"),Y([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ae==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(eb,{className:"w-3.5 h-3.5"})," Single"]}),s.jsxs("button",{onClick:()=>he("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ae==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(uc,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),ae==="single"?s.jsxs("form",{onSubmit:ht,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),s.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:k,onChange:ve=>I(ve.target.value),placeholder:"student@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),s.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:ve=>O(ve.target.value),children:nt.filter(ve=>ve!==kr.UNCATEGORIZED).map(ve=>s.jsx("option",{value:ve,children:ve},ve))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),s.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:R,onChange:ve=>A(ve.target.value),placeholder:"e.g. Period 3, Block A"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[s.jsx("input",{type:"file",ref:xe,accept:".csv,.tsv,.txt",onChange:dt,className:"hidden"}),fe.length===0?s.jsxs(s.Fragment,{children:[s.jsx(uc,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),s.jsx("button",{onClick:()=>{var ve;return(ve=xe.current)==null?void 0:ve.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",s.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),s.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:s.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",s.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",s.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",s.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(l0,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm font-bold text-white",children:[fe.length," records parsed"]}),s.jsx("button",{onClick:()=>{Y([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),fe.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[s.jsx("th",{className:"p-2 pl-3",children:"Email"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Section"}),s.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:fe.map((ve,st)=>s.jsxs("tr",{className:ve.status==="invalid"?"bg-red-500/5":ve.status==="duplicate"?"bg-yellow-500/5":ve.status==="success"?"bg-green-500/5":"",children:[s.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:ve.email}),s.jsx("td",{className:"p-2 text-gray-400",children:ve.classType}),s.jsx("td",{className:"p-2 text-gray-500",children:ve.section||""}),s.jsx("td",{className:"p-2 pr-3 text-right",children:s.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${ve.status==="pending"?"bg-blue-500/20 text-blue-400":ve.status==="success"?"bg-green-500/20 text-green-400":ve.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:ve.status})})]},st))})]})}),s.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("span",{className:"text-blue-400",children:[fe.filter(ve=>ve.status==="pending").length," ready"]}),s.jsxs("span",{className:"text-yellow-400",children:[fe.filter(ve=>ve.status==="duplicate").length," duplicates"]}),s.jsxs("span",{className:"text-red-400",children:[fe.filter(ve=>ve.status==="invalid").length," invalid"]}),fe.some(ve=>ve.status==="success")&&s.jsxs("span",{className:"text-green-400",children:[fe.filter(ve=>ve.status==="success").length," imported"]})]})}),fe.filter(ve=>ve.status==="duplicate").length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[s.jsx(Ds,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),s.jsx("button",{onClick:Ut,disabled:ne||fe.filter(ve=>ve.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ne?s.jsxs(s.Fragment,{children:[s.jsx(Ai,{className:"w-4 h-4 animate-spin"})," Importing..."]}):s.jsxs(s.Fragment,{children:["Import ",fe.filter(ve=>ve.status==="pending").length," Operatives"]})})]})]})]}),s.jsx(Ei,{isOpen:x,onClose:()=>y(!1),title:U?"Edit Class Node Config":"Initialize New Class Node",children:s.jsxs("form",{onSubmit:tr,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:E,onChange:ve=>C(ve.target.value),placeholder:"e.g. AP Physics Period 4"}),U&&s.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsLab,onChange:ve=>K({...G,physicsLab:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.evidenceLocker,onChange:ve=>K({...G,evidenceLocker:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.leaderboard,onChange:ve=>K({...G,leaderboard:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsTools,onChange:ve=>K({...G,physicsTools:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.communications,onChange:ve=>K({...G,communications:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"number",min:1,max:100,value:H,onChange:ve=>Z(Math.max(1,Math.min(100,parseInt(ve.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),s.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),s.jsx("button",{type:"submit",disabled:$,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${$?"opacity-70 cursor-not-allowed":""}`,children:$?s.jsxs(s.Fragment,{children:[s.jsx(Ai,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):U?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},su={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},RM={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},C0e=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,O0e=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,I0e=({assignment:t,isOpen:e,onClose:r})=>{const n=Ga(),a=T.useRef(null),[i,o]=T.useState([]),[c,d]=T.useState(!0),[h,m]=T.useState(!1),[p,x]=T.useState(t.category==="Practice Set"?"reading":"manage"),[y,S]=T.useState(null),[N,w]=T.useState(null),[j,k]=T.useState(""),[I,L]=T.useState(null),[O,R]=T.useState(!1),[A,E]=T.useState(null),[C,U]=T.useState({}),[P,$]=T.useState(null),[B,G]=T.useState(!0),[K,H]=T.useState(null),[Z,ae]=T.useState(null),[he,fe]=T.useState(null),[Y,ne]=T.useState(!1),re=T.useRef(null),xe=t.category==="Practice Set";T.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const lt=await ma(ot(Ie,"question_banks",t.id));lt.exists()?o(lt.data().questions||[]):o([]);const St=await ma(ot(Ie,"reading_materials",t.id));St.exists()?H(St.data()):H(null)}catch(lt){console.error("Failed to load bank:",lt),o([])}finally{d(!1)}})()},[e,t.id]);const Te=async Me=>{m(!0);try{await Yn(ot(Ie,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Me,questionCount:Me.length,updatedAt:new Date().toISOString()}),o(Me)}catch(lt){n.error("Failed to save: "+(lt instanceof Error?lt.message:"Unknown error"))}finally{m(!1)}},Ve=async Me=>{const lt=i.filter(St=>St.id!==Me);await Te(lt),n.success("Question removed."),I===Me&&L(null)},Ze=async()=>{try{await Ja(ot(Ie,"question_banks",t.id)),o([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Xe=()=>{navigator.clipboard.writeText(C0e(t.title,t.classType,t.description)),R(!0),setTimeout(()=>R(!1),2e3),n.success("Prompt copied!")},ie=()=>{navigator.clipboard.writeText(O0e(t.title,t.classType,t.description)),ne(!0),setTimeout(()=>ne(!1),2e3),n.success("Reading prompt copied!")},Be=async Me=>{var St;const lt=(St=Me.target.files)==null?void 0:St[0];if(lt){fe(null),ae(null);try{let et=(await lt.text()).replace(/```json\s*|```\s*/g,"").trim();et=et.replace(/[\x00-\x1F\x7F]/g,Je=>Je===`
`||Je==="\r"||Je==="	"?" ":"");let ce;try{ce=JSON.parse(et)}catch{const Je=et.match(/\{[\s\S]*\}/);if(Je)ce=JSON.parse(Je[0]);else throw new Error("No JSON object found.")}if(!ce.title||!ce.sections||!Array.isArray(ce.sections))throw new Error("Missing required fields: title and sections array.");const Ue=ce.sections.filter(Je=>!Je.title||!Je.content);if(Ue.length>0)throw new Error(`${Ue.length} section(s) missing title or content.`);ae(ce)}catch(vt){fe(vt instanceof Error?vt.message:"Parse failed.")}re.current&&(re.current.value="")}},Q=async()=>{if(Z){m(!0);try{await Yn(ot(Ie,"reading_materials",t.id),{...Z,assignmentId:t.id,updatedAt:new Date().toISOString()}),H(Z),ae(null),n.success(`Study material uploaded: ${Z.sections.length} sections!`)}catch(Me){n.error("Failed to save: "+(Me instanceof Error?Me.message:"Unknown error"))}finally{m(!1)}}},te=async()=>{m(!0);try{await Ja(ot(Ie,"reading_materials",t.id)),H(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{m(!1)}},Ne=async Me=>{var St;const lt=(St=Me.target.files)==null?void 0:St[0];if(lt){$(null),E(null);try{let et=(await lt.text()).replace(/```json\s*|```\s*/g,"").trim();et=et.replace(/[\x00-\x1F\x7F]/g,dt=>dt===`
`||dt==="\r"||dt==="	"?" ":"");let ce;try{ce=JSON.parse(et)}catch{const dt=et.match(/\[[\s\S]*\]/);if(dt)try{ce=JSON.parse(dt[0])}catch{const Ut=dt[0];let tr=null;for(let Ir=Ut.length-1;Ir>0;Ir--)if(Ut[Ir]==="}")try{tr=JSON.parse(Ut.slice(0,Ir+1)+"]");break}catch{}if(tr)ce=tr;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Ut=null;const tr="["+et;for(let Ir=tr.length-1;Ir>0;Ir--)if(tr[Ir]==="}")try{Ut=JSON.parse(tr.slice(0,Ir+1)+"]");break}catch{}if(Ut)ce=Ut;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(ce)||ce.length===0)throw new Error("Must be a non-empty JSON array.");const Ue=ce.filter(dt=>dt.id&&dt.tier&&dt.type&&dt.stem&&dt.options&&dt.correctAnswer),Je=ce.length-Ue.length;if(Ue.length===0){$("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const ht={};Ue.forEach(dt=>{const Ut=dt.tier;ht[Ut]=(ht[Ut]||0)+1}),E(Ue),U(ht),Je>0&&n.success(`Parsed ${Ue.length} questions (${Je} skipped  missing fields).`)}catch(vt){$(vt instanceof Error?vt.message:"Parse failed.")}a.current&&(a.current.value="")}},Se=async()=>{if(!A)return;let Me;if(B&&i.length>0){const lt=new Set(i.map(vt=>vt.id)),St=A.map((vt,et)=>({...vt,id:lt.has(vt.id)?`${vt.id}_${Date.now()}_${et}`:vt.id}));Me=[...i,...St]}else Me=A;await Te(Me),n.success(`${B?"Added":"Replaced with"} ${A.length} questions. Total: ${Me.length}`),E(null),x("manage")},Qe=T.useMemo(()=>{let Me=i;if(y&&(Me=Me.filter(lt=>lt.tier===y)),N&&(Me=Me.filter(lt=>lt.type===N)),j){const lt=j.toLowerCase();Me=Me.filter(St=>St.stem.toLowerCase().includes(lt)||St.id.toLowerCase().includes(lt))}return Me},[i,y,N,j]),nt=T.useMemo(()=>{const Me={1:0,2:0,3:0};return i.forEach(lt=>{Me[lt.tier]=(Me[lt.tier]||0)+1}),Me},[i]),Ot=T.useMemo(()=>{const Me={};return i.forEach(lt=>{Me[lt.type]=(Me[lt.type]||0)+1}),Me},[i]);return e?s.jsx(Ei,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:s.jsxs("div",{className:"text-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[s.jsx(Rh,{className:"w-5 h-5 text-purple-400 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),s.jsx("div",{className:"text-xs mt-1",children:c?s.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?s.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):s.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&s.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Me=>s.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${su[Me].bg} ${su[Me].border} border`,children:[s.jsx("div",{className:`text-sm font-bold ${su[Me].text}`,children:nt[Me]}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Me]})]},Me))})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[!xe&&s.jsxs("button",{onClick:()=>x("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Rh,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!xe&&s.jsxs("button",{onClick:()=>x("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Dn,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),s.jsxs("button",{onClick:()=>x("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(zi,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",K?`(${K.sections.length})`:""]})]}),p==="manage"&&s.jsx("div",{className:"space-y-3",children:c?s.jsx("div",{className:"py-12 text-center",children:s.jsx(Ai,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx(Rh,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[s.jsx(Nx,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{value:j,onChange:Me=>k(Me.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>S(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${y?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Me=>s.jsxs("button",{onClick:()=>S(y===Me?null:Me),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${y===Me?`${su[Me].bg} ${su[Me].text} ${su[Me].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Me," (",nt[Me],")"]},Me))]})]}),Object.keys(Ot).length>1&&s.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Ot).sort((Me,lt)=>lt[1]-Me[1]).map(([Me,lt])=>s.jsxs("button",{onClick:()=>w(N===Me?null:Me),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${N===Me?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[RM[Me]||Me," (",lt,")"]},Me))}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:Qe.length===0?s.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):Qe.map(Me=>{const lt=su[Me.tier]||su[1],St=I===Me.id;return s.jsxs("div",{className:`rounded-xl border transition ${St?`${lt.border} ${lt.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>L(St?null:Me.id),children:[s.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${lt.bg} ${lt.text}`,children:["T",Me.tier]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[s.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Me.id}),s.jsx("span",{className:"text-[8px] text-gray-600",children:""}),s.jsx("span",{className:"text-[8px] text-gray-500",children:RM[Me.type]||Me.type}),s.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(Vn,{className:"w-2.5 h-2.5"}),Me.xp]})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Me.stem})]}),s.jsx(el,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${St?"rotate-90":""}`})]}),St&&s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Me.context&&s.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Me.context}),s.jsx("div",{className:"space-y-1",children:Me.options.map(vt=>{const et=Array.isArray(Me.correctAnswer)?Me.correctAnswer.includes(vt.id):Me.correctAnswer===vt.id;return s.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${et?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[s.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[vt.id.toUpperCase(),"."]}),s.jsx("span",{children:vt.text}),et&&s.jsx(Lr,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},vt.id)})}),s.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Me.explanation]}),Me.linkedFollowUp&&s.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold",children:"Follow-up: "}),Me.linkedFollowUp.stem]}),s.jsxs("button",{onClick:()=>Ve(Me.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[s.jsx(Wr,{className:"w-3 h-3"})," Delete Question"]})]})]},Me.id)})}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[s.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",Qe.length," of ",i.length]}),s.jsxs("button",{onClick:Ze,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(Wr,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),p==="add"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),s.jsx("button",{onClick:Xe,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${O?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:O?s.jsxs(s.Fragment,{children:[s.jsx(Lr,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(rf,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",s.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[s.jsx(Kv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:Ne,className:"hidden"})]})]}),P&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Ds,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:P})]}),A&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lr,{className:"w-4 h-4 text-emerald-400"}),s.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[A.length," questions parsed"]})]}),s.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Me=>s.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[s.jsx("div",{className:"text-base font-bold text-white",children:C[Me]||0}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Me]})]},Me))}),i.length>0&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>G(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[s.jsx(Dn,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",A.length,")"]}),s.jsxs("button",{onClick:()=>G(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[s.jsx(ao,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Se,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(Ai,{className:"w-4 h-4 animate-spin"}):s.jsx(uc,{className:"w-4 h-4"}),h?"Saving...":`Upload ${A.length} Questions`]}),s.jsx("button",{onClick:()=>E(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})]}),p==="reading"&&s.jsxs("div",{className:"space-y-5",children:[K?s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zi,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:K.title})]}),s.jsxs("button",{onClick:te,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(Wr,{className:"w-3 h-3"})," Remove"]})]}),K.description&&s.jsx("p",{className:"text-xs text-gray-400",children:K.description}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:[K.sections.length," sections"]}),K.estimatedMinutes&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["~",K.estimatedMinutes," min read"]})]})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:K.sections.map((Me,lt)=>s.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:lt+1}),s.jsx("span",{className:"truncate",children:Me.title})]},lt))})]}):s.jsxs("div",{className:"py-6 text-center",children:[s.jsx(zi,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),s.jsx("button",{onClick:ie,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${Y?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:Y?s.jsxs(s.Fragment,{children:[s.jsx(Lr,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(rf,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[s.jsx(Kv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:re,type:"file",accept:".json,.txt",onChange:Be,className:"hidden"})]})]}),he&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Ds,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:he})]}),Z&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lr,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Z.title})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[Z.sections.length," sections  ~",Z.estimatedMinutes||"?"," min read"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Q,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(Ai,{className:"w-4 h-4 animate-spin"}):s.jsx(uc,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),s.jsx("button",{onClick:()=>ae(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})]}),h&&s.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[s.jsx(Ai,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},MM=[{type:"TEXT",label:"Text",icon:s.jsx(Hle,{className:"w-4 h-4"}),description:"Plain text content",category:"Content"},{type:"SECTION_HEADER",label:"Section Header",icon:s.jsx(DH,{className:"w-4 h-4"}),description:"Section with title & subtitle",category:"Content"},{type:"IMAGE",label:"Image",icon:s.jsx(oE,{className:"w-4 h-4"}),description:"Image with caption",category:"Content"},{type:"VIDEO",label:"Video",icon:s.jsx(Ff,{className:"w-4 h-4"}),description:"YouTube video embed",category:"Content"},{type:"OBJECTIVES",label:"Objectives",icon:s.jsx(cs,{className:"w-4 h-4"}),description:"Learning objectives list",category:"Content"},{type:"DIVIDER",label:"Divider",icon:s.jsx(Q2,{className:"w-4 h-4"}),description:"Horizontal separator",category:"Content"},{type:"EXTERNAL_LINK",label:"External Link",icon:s.jsx(G2,{className:"w-4 h-4"}),description:"Styled link card",category:"Content"},{type:"EMBED",label:"Embed",icon:s.jsx(RH,{className:"w-4 h-4"}),description:"iFrame embed (Forms, Docs)",category:"Content"},{type:"INFO_BOX",label:"Info Box",icon:s.jsx(K2,{className:"w-4 h-4"}),description:"Tip, warning, or note",category:"Content"},{type:"VOCABULARY",label:"Vocabulary",icon:s.jsx(zi,{className:"w-4 h-4"}),description:"Term & definition card",category:"Interactive"},{type:"VOCAB_LIST",label:"Vocab List",icon:s.jsx(LH,{className:"w-4 h-4"}),description:"Multiple term/definition pairs",category:"Interactive"},{type:"ACTIVITY",label:"Activity",icon:s.jsx(Vn,{className:"w-4 h-4"}),description:"Activity instructions box",category:"Interactive"},{type:"CHECKLIST",label:"Checklist",icon:s.jsx(cE,{className:"w-4 h-4"}),description:"Completable task list",category:"Interactive"},{type:"SORTING",label:"Sorting",icon:s.jsx(iE,{className:"w-4 h-4"}),description:"Sort items into two categories",category:"Interactive"},{type:"DATA_TABLE",label:"Data Table",icon:s.jsx(qH,{className:"w-4 h-4"}),description:"Editable data table",category:"Interactive"},{type:"BAR_CHART",label:"Bar Chart",icon:s.jsx(Vf,{className:"w-4 h-4"}),description:"Interactive bar chart",category:"Interactive"},{type:"MC",label:"Multiple Choice",icon:s.jsx(H2,{className:"w-4 h-4"}),description:"Question with options",category:"Questions"},{type:"SHORT_ANSWER",label:"Short Answer",icon:s.jsx(sf,{className:"w-4 h-4"}),description:"Free-text question",category:"Questions"},{type:"RANKING",label:"Ranking",icon:s.jsx(nf,{className:"w-4 h-4"}),description:"Drag to reorder items",category:"Questions"},{type:"LINKED",label:"Linked Question",icon:s.jsx(Qv,{className:"w-4 h-4"}),description:"Follow-up referencing prior block",category:"Questions"}],PE=()=>`block_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,R0e=t=>{const e={id:PE(),type:t,content:""};switch(t){case"MC":return{...e,options:["",""],correctAnswer:0};case"SHORT_ANSWER":return{...e,acceptedAnswers:[""]};case"VOCABULARY":return{...e,term:"",definition:""};case"CHECKLIST":return{...e,items:[""]};case"INFO_BOX":return{...e,variant:"note"};case"SECTION_HEADER":return{...e,icon:"",title:"",subtitle:""};case"IMAGE":return{...e,url:"",caption:"",alt:""};case"VIDEO":return{...e,url:"",caption:""};case"OBJECTIVES":return{...e,title:"Learning Objectives",items:[""]};case"DIVIDER":return e;case"EXTERNAL_LINK":return{...e,title:"",url:"",buttonLabel:"Open",openInNewTab:!0};case"EMBED":return{...e,url:"",caption:"",height:500};case"VOCAB_LIST":return{...e,terms:[{term:"",definition:""}]};case"ACTIVITY":return{...e,icon:"",title:"",instructions:""};case"SORTING":return{...e,title:"",instructions:"",leftLabel:"Category A",rightLabel:"Category B",sortItems:[{text:"",correct:"left"}]};case"DATA_TABLE":return{...e,title:"",columns:[{key:"col1",label:"Column 1",editable:!0}],trials:3};case"BAR_CHART":return{...e,title:"",barCount:3,initialLabel:"Initial",finalLabel:"Final",deltaLabel:"Change",height:300};case"RANKING":return{...e,items:[""]};case"LINKED":return{...e,linkedBlockId:""};default:return e}},cr="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",fl="w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",ur="text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",M0e=({block:t,onUpdate:e})=>s.jsx("textarea",{value:t.content,onChange:r=>e({...t,content:r.target.value}),placeholder:"Enter text content...",className:`${fl} min-h-[80px]`,rows:3}),D0e=({block:t,onUpdate:e})=>{const r=t.options||["",""],n=()=>e({...t,options:[...r,""]}),a=o=>{if(r.length<=2)return;const c=r.filter((h,m)=>m!==o),d=t.correctAnswer===o?0:(t.correctAnswer||0)>o?(t.correctAnswer||0)-1:t.correctAnswer;e({...t,options:c,correctAnswer:d})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,options:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Enter the question...",className:fl,rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:ur,children:"Options (click radio to mark correct)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>e({...t,correctAnswer:c}),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 transition ${t.correctAnswer===c?"border-green-500 bg-green-500":"border-gray-600 hover:border-gray-400"}`,children:t.correctAnswer===c&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Option ${String.fromCharCode(65+c)}`,className:`flex-1 ${cr}`}),r.length>2&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},c)),r.length<6&&s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Option"]})]})]})},P0e=({block:t,onUpdate:e})=>{const r=t.acceptedAnswers||[""],n=()=>e({...t,acceptedAnswers:[...r,""]}),a=o=>{r.length<=1||e({...t,acceptedAnswers:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,acceptedAnswers:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Enter the question...",className:fl,rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:ur,children:"Accepted Answers (case-insensitive)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Accepted answer ${c+1}`,className:`flex-1 ${cr}`}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Accepted Answer"]})]})]})},L0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Term"}),s.jsx("input",{type:"text",value:t.term||"",onChange:r=>e({...t,term:r.target.value}),placeholder:"Term...",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Definition"}),s.jsx("input",{type:"text",value:t.definition||"",onChange:r=>e({...t,definition:r.target.value}),placeholder:"Definition...",className:cr})]})]}),B0e=({block:t,onUpdate:e})=>{const r=t.items||[""],n=()=>e({...t,items:[...r,""]}),a=o=>{r.length<=1||e({...t,items:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,items:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Checklist title/instructions...",className:fl,rows:1}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:ur,children:"Items"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-5 h-5 rounded border-2 border-gray-600 shrink-0"}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Item ${c+1}`,className:`flex-1 ${cr}`}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Item"]})]})]})},$0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Variant"}),s.jsx("div",{className:"flex gap-2",children:["tip","warning","note"].map(r=>s.jsx("button",{type:"button",onClick:()=>e({...t,variant:r}),className:`px-3 py-1.5 rounded-lg border text-xs font-bold capitalize transition ${t.variant===r?r==="tip"?"bg-green-500/20 border-green-500/30 text-green-400":r==="warning"?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-blue-500/20 border-blue-500/30 text-blue-400":"bg-black/30 border-white/10 text-gray-400 hover:text-white"}`,children:r},r))})]}),s.jsx("textarea",{value:t.content,onChange:r=>e({...t,content:r.target.value}),placeholder:"Info box content...",className:fl,rows:2})]}),z0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:r=>e({...t,icon:r.target.value}),placeholder:"",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:r=>e({...t,title:r.target.value}),placeholder:"Section title...",className:cr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Subtitle"}),s.jsx("input",{type:"text",value:t.subtitle||"",onChange:r=>e({...t,subtitle:r.target.value}),placeholder:"Optional subtitle...",className:cr})]})]}),U0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Image URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:r=>e({...t,url:r.target.value}),placeholder:"https://...",className:cr})]}),t.url&&s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 max-h-48",children:s.jsx("img",{src:t.url,alt:t.alt||"",className:"w-full h-full object-contain bg-black/30",onError:r=>r.currentTarget.style.display="none"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:r=>e({...t,caption:r.target.value}),placeholder:"Image caption...",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Alt Text"}),s.jsx("input",{type:"text",value:t.alt||"",onChange:r=>e({...t,alt:r.target.value}),placeholder:"Describe the image...",className:cr})]})]})]}),V0e=({block:t,onUpdate:e})=>{const n=(a=>{const i=a.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return i?`https://www.youtube.com/embed/${i[1]}`:""})(t.url||"");return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"YouTube URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:a=>e({...t,url:a.target.value}),placeholder:"https://youtube.com/watch?v=...",className:cr})]}),n&&s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 aspect-video",children:s.jsx("iframe",{src:n,className:"w-full h-full",allowFullScreen:!0,title:"Video preview"})}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:a=>e({...t,caption:a.target.value}),placeholder:"Video caption...",className:cr})]})]})},F0e=({block:t,onUpdate:e})=>{const r=t.items||[""],n=()=>e({...t,items:[...r,""]}),a=o=>{r.length<=1||e({...t,items:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,items:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:o=>e({...t,title:o.target.value}),placeholder:"Learning Objectives",className:cr})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:ur,children:"Objectives"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cs,{className:"w-4 h-4 text-emerald-400 shrink-0"}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Objective ${c+1}`,className:`flex-1 ${cr}`}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Objective"]})]})]})},q0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:r=>e({...t,title:r.target.value}),placeholder:"Link title...",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:r=>e({...t,url:r.target.value}),placeholder:"https://...",className:cr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Description"}),s.jsx("input",{type:"text",value:t.content,onChange:r=>e({...t,content:r.target.value}),placeholder:"Brief description...",className:cr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Button Label"}),s.jsx("input",{type:"text",value:t.buttonLabel||"",onChange:r=>e({...t,buttonLabel:r.target.value}),placeholder:"Open",className:cr})]}),s.jsx("div",{className:"flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:t.openInNewTab??!0,onChange:r=>e({...t,openInNewTab:r.target.checked}),className:"rounded"}),"Open in new tab"]})})]})]}),H0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Embed URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:r=>e({...t,url:r.target.value}),placeholder:"https://docs.google.com/...",className:cr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:r=>e({...t,caption:r.target.value}),placeholder:"Optional caption...",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||500,onChange:r=>e({...t,height:parseInt(r.target.value)||500}),className:cr})]})]})]}),G0e=({block:t,onUpdate:e})=>{const r=t.terms||[{term:"",definition:""}],n=()=>e({...t,terms:[...r,{term:"",definition:""}]}),a=o=>{r.length<=1||e({...t,terms:r.filter((c,d)=>d!==o)})},i=(o,c,d)=>{const h=[...r];h[o]={...h[o],[c]:d},e({...t,terms:h})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:ur,children:"Terms & Definitions"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 mt-2.5 w-5 text-right shrink-0",children:[c+1,"."]}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",value:o.term,onChange:d=>i(c,"term",d.target.value),placeholder:"Term",className:cr}),s.jsx("input",{type:"text",value:o.definition,onChange:d=>i(c,"definition",d.target.value),placeholder:"Definition",className:cr})]}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 mt-1.5 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Term"]})]})},W0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:r=>e({...t,icon:r.target.value}),placeholder:"",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:r=>e({...t,title:r.target.value}),placeholder:"Activity title...",className:cr})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:r=>e({...t,instructions:r.target.value}),placeholder:"Describe the activity...",className:`${fl} min-h-[80px]`,rows:3})]})]}),K0e=({block:t,onUpdate:e})=>{const r=t.sortItems||[{text:"",correct:"left"}],n=()=>e({...t,sortItems:[...r,{text:"",correct:"left"}]}),a=o=>{r.length<=1||e({...t,sortItems:r.filter((c,d)=>d!==o)})},i=(o,c,d)=>{const h=[...r];h[o]={...h[o],[c]:d},e({...t,sortItems:h})};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:o=>e({...t,title:o.target.value}),placeholder:"Sorting activity title...",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:o=>e({...t,instructions:o.target.value}),placeholder:"Explain what to sort...",className:fl,rows:2})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Left Category"}),s.jsx("input",{type:"text",value:t.leftLabel||"",onChange:o=>e({...t,leftLabel:o.target.value}),placeholder:"Category A",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Right Category"}),s.jsx("input",{type:"text",value:t.rightLabel||"",onChange:o=>e({...t,rightLabel:o.target.value}),placeholder:"Category B",className:cr})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:ur,children:"Items (select correct category)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:o.text,onChange:d=>i(c,"text",d.target.value),placeholder:`Item ${c+1}`,className:`flex-1 ${cr}`}),s.jsxs("select",{value:o.correct,onChange:d=>i(c,"correct",d.target.value),className:`w-32 ${cr}`,children:[s.jsx("option",{value:"left",children:t.leftLabel||"Left"}),s.jsx("option",{value:"right",children:t.rightLabel||"Right"})]}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Item"]})]})]})},Q0e=({block:t,onUpdate:e})=>{const r=t.columns||[{key:"col1",label:"Column 1",editable:!0}],n=()=>{const o=`col${r.length+1}`;e({...t,columns:[...r,{key:o,label:"",editable:!0}]})},a=o=>{r.length<=1||e({...t,columns:r.filter((c,d)=>d!==o)})},i=(o,c,d)=>{const h=[...r];h[o]={...h[o],[c]:d},e({...t,columns:h})};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:o=>e({...t,title:o.target.value}),placeholder:"Table title...",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Number of Rows"}),s.jsx("input",{type:"number",value:t.trials||3,onChange:o=>e({...t,trials:parseInt(o.target.value)||3}),min:1,max:20,className:cr})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:ur,children:"Columns"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:o.label,onChange:d=>i(c,"label",d.target.value),placeholder:"Column label",className:`flex-1 ${cr}`}),s.jsx("input",{type:"text",value:o.unit||"",onChange:d=>i(c,"unit",d.target.value),placeholder:"Unit",className:`w-24 ${cr}`}),s.jsxs("label",{className:"flex items-center gap-1 text-[10px] text-gray-400 whitespace-nowrap",children:[s.jsx("input",{type:"checkbox",checked:o.editable!==!1,onChange:d=>i(c,"editable",d.target.checked)}),"Editable"]}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Column"]})]})]})},X0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:r=>e({...t,title:r.target.value}),placeholder:"Chart title...",className:cr})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Number of Bars"}),s.jsx("input",{type:"number",value:t.barCount||3,onChange:r=>e({...t,barCount:parseInt(r.target.value)||3}),min:1,max:10,className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Chart Height (px)"}),s.jsx("input",{type:"number",value:t.height||300,onChange:r=>e({...t,height:parseInt(r.target.value)||300}),className:cr})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Initial Label"}),s.jsx("input",{type:"text",value:t.initialLabel||"",onChange:r=>e({...t,initialLabel:r.target.value}),placeholder:"Initial",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Delta Label"}),s.jsx("input",{type:"text",value:t.deltaLabel||"",onChange:r=>e({...t,deltaLabel:r.target.value}),placeholder:"Change",className:cr})]}),s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Final Label"}),s.jsx("input",{type:"text",value:t.finalLabel||"",onChange:r=>e({...t,finalLabel:r.target.value}),placeholder:"Final",className:cr})]})]})]}),Y0e=({block:t,onUpdate:e})=>{const r=t.items||[""],n=()=>e({...t,items:[...r,""]}),a=o=>{r.length<=1||e({...t,items:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,items:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Enter the ranking question...",className:fl,rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:ur,children:"Items (in correct order  students will see them shuffled)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5 text-right shrink-0",children:[c+1,"."]}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Item ${c+1}`,className:`flex-1 ${cr}`}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Item"]})]})]})},J0e=({block:t,allBlocks:e,onUpdate:r})=>{const n=e.filter(a=>a.id!==t.id&&["MC","SHORT_ANSWER","RANKING"].includes(a.type));return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:ur,children:"Reference Block"}),s.jsxs("select",{value:t.linkedBlockId||"",onChange:a=>r({...t,linkedBlockId:a.target.value}),className:cr,children:[s.jsx("option",{value:"",children:"Select a question block..."}),n.map(a=>s.jsxs("option",{value:a.id,children:[a.type,": ",(a.content||"").slice(0,50),(a.content||"").length>50?"...":""]},a.id))]})]}),s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Follow-up question...",className:fl,rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:ur,children:"Accepted Answers (case-insensitive)"}),(t.acceptedAnswers||[""]).map((a,i)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...t.acceptedAnswers||[""]];c[i]=o.target.value,r({...t,acceptedAnswers:c})},placeholder:`Accepted answer ${i+1}`,className:`flex-1 ${cr}`}),(t.acceptedAnswers||[]).length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:(t.acceptedAnswers||[]).filter((o,c)=>c!==i)}),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...t.acceptedAnswers||[""],""]}),className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Answer"]})]})]})},Z0e=({block:t,allBlocks:e,onUpdate:r})=>{switch(t.type){case"TEXT":return s.jsx(M0e,{block:t,onUpdate:r});case"MC":return s.jsx(D0e,{block:t,onUpdate:r});case"SHORT_ANSWER":return s.jsx(P0e,{block:t,onUpdate:r});case"VOCABULARY":return s.jsx(L0e,{block:t,onUpdate:r});case"CHECKLIST":return s.jsx(B0e,{block:t,onUpdate:r});case"INFO_BOX":return s.jsx($0e,{block:t,onUpdate:r});case"SECTION_HEADER":return s.jsx(z0e,{block:t,onUpdate:r});case"IMAGE":return s.jsx(U0e,{block:t,onUpdate:r});case"VIDEO":return s.jsx(V0e,{block:t,onUpdate:r});case"OBJECTIVES":return s.jsx(F0e,{block:t,onUpdate:r});case"DIVIDER":return s.jsx("div",{className:"text-xs text-gray-500 italic",children:"Horizontal divider  no configuration needed."});case"EXTERNAL_LINK":return s.jsx(q0e,{block:t,onUpdate:r});case"EMBED":return s.jsx(H0e,{block:t,onUpdate:r});case"VOCAB_LIST":return s.jsx(G0e,{block:t,onUpdate:r});case"ACTIVITY":return s.jsx(W0e,{block:t,onUpdate:r});case"SORTING":return s.jsx(K0e,{block:t,onUpdate:r});case"DATA_TABLE":return s.jsx(Q0e,{block:t,onUpdate:r});case"BAR_CHART":return s.jsx(X0e,{block:t,onUpdate:r});case"RANKING":return s.jsx(Y0e,{block:t,onUpdate:r});case"LINKED":return s.jsx(J0e,{block:t,allBlocks:e,onUpdate:r});default:return null}},ehe=({open:t,onClose:e,onImport:r,hasExistingBlocks:n})=>{const[a,i]=T.useState(""),[o,c]=T.useState(""),[d,h]=T.useState("append");if(!t)return null;const m=()=>{c("");try{const p=JSON.parse(a);let x;if(Array.isArray(p))x=p;else if(p&&Array.isArray(p.blocks))x=p.blocks;else{c('JSON must be an array of blocks, or an object with a "blocks" array.');return}x=x.map(y=>{if(!y.type)throw new Error(`Block missing "type" field: ${JSON.stringify(y).slice(0,80)}`);return{...y,id:y.id||PE(),content:y.content??""}}),r(x,d),i(""),c(""),e()}catch(p){c(p instanceof Error?p.message:"Invalid JSON")}};return s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:e,children:s.jsxs("div",{className:"bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[80vh] flex flex-col",onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(uc,{className:"w-5 h-5 text-purple-400"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Import Blocks from JSON"})]}),s.jsx("button",{onClick:e,className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Jn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 flex-1 overflow-auto space-y-4",children:[s.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[s.jsxs("p",{children:["Paste a JSON array of blocks, or an object with ",s.jsx("code",{className:"text-purple-300",children:"{ blocks: [...] }"}),"."]}),s.jsxs("p",{children:["Each block needs at minimum a ",s.jsx("code",{className:"text-purple-300",children:"type"})," field. IDs will be auto-generated if missing."]})]}),n&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>h("append"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition border ${d==="append"?"bg-purple-600/20 border-purple-500/30 text-purple-300":"bg-black/30 border-white/10 text-gray-400"}`,children:"Append to existing"}),s.jsx("button",{type:"button",onClick:()=>h("replace"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition border ${d==="replace"?"bg-red-600/20 border-red-500/30 text-red-300":"bg-black/30 border-white/10 text-gray-400"}`,children:"Replace all"})]}),s.jsx("textarea",{value:a,onChange:p=>{i(p.target.value),c("")},placeholder:`[
  { "type": "SECTION_HEADER", "icon": "", "title": "My Section" },
  { "type": "TEXT", "content": "Hello world" }
]`,className:`${fl} min-h-[200px] font-mono text-xs`,rows:10}),o&&s.jsx("div",{className:"text-xs text-red-400 bg-red-500/10 border border-red-500/30 rounded-xl p-3",children:o})]}),s.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-white/10",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition",children:"Cancel"}),s.jsx("button",{type:"button",onClick:m,disabled:!a.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:d==="replace"&&n?"Replace & Import":"Import Blocks"})]})]})})},the=({blocks:t,onChange:e})=>{const[r,n]=T.useState(!1),[a,i]=T.useState(!1),[o,c]=T.useState(!1),d=T.useCallback(w=>{e([...t,R0e(w)]),n(!1)},[t,e]),h=T.useCallback((w,j)=>{const k=[...t];k[w]=j,e(k)},[t,e]),m=T.useCallback(w=>{e(t.filter((j,k)=>k!==w))},[t,e]),p=T.useCallback((w,j)=>{const k=w+j;if(k<0||k>=t.length)return;const I=[...t];[I[w],I[k]]=[I[k],I[w]],e(I)},[t,e]),x=T.useCallback(w=>{const j={...t[w],id:PE()},k=[...t];k.splice(w+1,0,j),e(k)},[t,e]),y=T.useCallback((w,j)=>{j==="replace"||t.length===0?e(w):e([...t,...w])},[t,e]),S=w=>MM.find(j=>j.type===w),N=["Content","Interactive","Questions"];return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:["Lesson Blocks (",t.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>c(!0),className:"flex items-center gap-1.5 text-xs font-bold px-3 py-1.5 rounded-lg border bg-white/5 border-white/10 text-gray-400 hover:text-white transition",children:[s.jsx(uc,{className:"w-3.5 h-3.5"}),"Paste JSON"]}),t.length>0&&s.jsxs("button",{type:"button",onClick:()=>i(!a),className:`flex items-center gap-1.5 text-xs font-bold px-3 py-1.5 rounded-lg border transition ${a?"bg-purple-600/20 border-purple-500/30 text-purple-300":"bg-white/5 border-white/10 text-gray-400 hover:text-white"}`,children:[a?s.jsx(Jv,{className:"w-3.5 h-3.5"}):s.jsx(o0,{className:"w-3.5 h-3.5"}),a?"Edit":"Preview"]})]})]}),a&&t.length>0?s.jsx("div",{className:"bg-[#0f0720]/80 border border-white/10 rounded-2xl p-6",children:s.jsx(YH,{blocks:t})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-3",children:t.map((w,j)=>{const k=S(w.type);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden hover:border-white/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-black/20 border-b border-white/5",children:[s.jsx(nf,{className:"w-4 h-4 text-gray-600 shrink-0"}),s.jsx("span",{className:"text-gray-500",children:k==null?void 0:k.icon}),s.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex-1",children:[(k==null?void 0:k.label)||w.type," #",j+1]}),s.jsxs("div",{className:"flex items-center gap-0.5",children:[s.jsx("button",{type:"button",onClick:()=>p(j,-1),disabled:j===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-20 transition",title:"Move up",children:s.jsx(Sx,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>p(j,1),disabled:j===t.length-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-20 transition",title:"Move down",children:s.jsx(yi,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>x(j),className:"p-1 text-gray-500 hover:text-blue-400 transition",title:"Duplicate",children:s.jsx(rf,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>m(j),className:"p-1 text-gray-500 hover:text-red-400 transition",title:"Delete block",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]})]}),s.jsx("div",{className:"p-4",children:s.jsx(Z0e,{block:w,allBlocks:t,onUpdate:I=>h(j,I)})})]},w.id)})}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>n(!r),className:"w-full py-3 border-2 border-dashed border-white/10 rounded-2xl text-gray-500 hover:text-purple-400 hover:border-purple-500/30 transition flex items-center justify-center gap-2 text-sm font-bold",children:[s.jsx(Dn,{className:"w-4 h-4"})," Add Block"]}),r&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl p-3 z-50 max-h-[60vh] overflow-y-auto",children:N.map(w=>{const j=MM.filter(k=>k.category===w);return s.jsxs("div",{className:"mb-3 last:mb-0",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:w}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:j.map(k=>s.jsxs("button",{type:"button",onClick:()=>d(k.type),className:"flex items-center gap-3 p-3 rounded-xl text-left hover:bg-white/5 transition group",children:[s.jsx("span",{className:"text-gray-500 group-hover:text-purple-400 transition",children:k.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-gray-300",children:k.label}),s.jsx("div",{className:"text-[10px] text-gray-600",children:k.description})]})]},k.type))})]},w)})})]})]}),s.jsx(ehe,{open:o,onClose:()=>c(!1),onImport:y,hasExistingBlocks:t.length>0})]})},DM=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],rhe={Textbook:s.jsx(zi,{className:"w-4 h-4"}),Simulation:s.jsx(sE,{className:"w-4 h-4"}),"Lab Guide":s.jsx(W2,{className:"w-4 h-4"}),"Practice Set":s.jsx(cs,{className:"w-4 h-4"}),Article:s.jsx($H,{className:"w-4 h-4"}),"Video Lesson":s.jsx(HH,{className:"w-4 h-4"}),Supplemental:s.jsx(lE,{className:"w-4 h-4"})},nhe=({assignments:t,submissions:e,classConfigs:r,users:n,onCreateAssignment:a,onPreviewAssignment:i,availableSections:o=[]})=>{const c=Ga(),{confirm:d}=Ro(),[h,m]=T.useState(!1),[p,x]=T.useState(!1),[y,S]=T.useState(!1),[N,w]=T.useState("All Classes"),[j,k]=T.useState("All Categories"),[I,L]=T.useState(new Set),[O,R]=T.useState(null),[A,E]=T.useState({title:"",description:"",status:Ba.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[],lessonBlocks:[]}),[C,U]=T.useState(new Set([kr.AP_PHYSICS])),[P,$]=T.useState([]),[B,G]=T.useState(""),[K,H]=T.useState(!1),Z=T.useMemo(()=>n.filter(ie=>ie.role==="STUDENT"),[n]),ae=T.useMemo(()=>{const ie=Object.values(kr).filter(Q=>Q!==kr.UNCATEGORIZED),Be=(r||[]).map(Q=>Q.className);return Array.from(new Set(["All Classes",...ie,...Be]))},[r]),he=T.useMemo(()=>{const ie=Array.from(C)[0];if(!ie)return o;const Be=tv(Z,ie);return Be.length>0?Be:o},[C,Z,o]),fe=T.useMemo(()=>t.filter(ie=>{const Be=N==="All Classes"||ie.classType===N,Q=j==="All Categories"||ie.category===j;return Be&&Q}),[t,N,j]),Y=T.useMemo(()=>{const ie={};return fe.forEach(Be=>{const Q=N==="All Classes"?`${Be.classType.toUpperCase()}  ${Be.unit||"Unassigned"}`:Be.unit||"Unassigned";ie[Q]||(ie[Q]=[]),ie[Q].push(Be)}),Object.keys(ie).sort().reduce((Be,Q)=>(Be[Q]=ie[Q],Be),{})},[fe,N]),ne=async(ie,Be)=>{if(C.size===0){c.error("Select a target class.");return}S(!0);try{const Q=P.length>0?{targetSections:P}:{},te=Be?{scheduledAt:new Date(Be).toISOString()}:{},Ne={...A,status:ie,...Q,...te};p&&A.id?await a({...Ne,classType:Array.from(C)[0]}):await Promise.all(Array.from(C).map(Se=>a({...Ne,classType:Se}))),m(!1),x(!1),G(""),c.success(ie===Ba.DRAFT?"Draft saved.":Be?"Deployment scheduled.":"Resource deployed.")}catch(Q){console.error(Q)}finally{S(!1)}},re=async ie=>{ie.preventDefault(),await ne(Ba.ACTIVE)},xe=async ie=>{await Re.updateAssignmentStatus(ie.id,Ba.ACTIVE),c.success(`"${ie.title}" deployed.`)},Te=ie=>{E(ie),U(new Set([ie.classType])),$(ie.targetSections||[]),G(ie.scheduledAt?ie.scheduledAt.slice(0,16):""),x(!0),m(!0)},Ve=async ie=>{const Be=ie.status===Ba.ACTIVE?Ba.ARCHIVED:Ba.ACTIVE;await Re.updateAssignmentStatus(ie.id,Be)},Ze=T.useMemo(()=>[...Array.isArray(e)?e:[]].sort((Be,Q)=>{const te=new Date(Be.submittedAt||0).getTime();return new Date(Q.submittedAt||0).getTime()-te}),[e]),Xe=ie=>ie.status===Ba.DRAFT?s.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Draft"}):ie.scheduledAt&&new Date(ie.scheduledAt)>new Date?s.jsxs("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1",children:[s.jsx(AR,{className:"w-3 h-3"}),new Date(ie.scheduledAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):null;return s.jsxs("div",{className:"space-y-8 pb-12",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),s.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),s.jsxs("button",{onClick:()=>{E({title:"",description:"",status:Ba.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[],lessonBlocks:[]}),$([]),G(""),x(!1),m(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[s.jsx(Dn,{className:"w-5 h-5"})," Deploy Resource"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[s.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:N,onChange:ie=>w(ie.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:ae.map(ie=>s.jsx("option",{value:ie,children:ie},ie))}),s.jsx(yi,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:j,onChange:ie=>k(ie.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),DM.map(ie=>s.jsx("option",{value:ie,children:ie},ie))]}),s.jsx(yi,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(Y).map(([ie,Be])=>s.jsxs("div",{className:"mb-6 last:mb-0",children:[s.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[s.jsx("button",{onClick:()=>{const Q=new Set(I);Q.has(ie)?Q.delete(ie):Q.add(ie),L(Q)},className:"text-gray-400 hover:text-white transition",children:I.has(ie)?s.jsx(yi,{className:"w-4 h-4"}):s.jsx(el,{className:"w-4 h-4"})}),s.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:ie}),s.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!I.has(ie)&&s.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:Be.map(Q=>{const te=Xe(Q);return s.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${Q.status===Ba.ARCHIVED?"bg-white/2 border-white/5 opacity-60":Q.status===Ba.DRAFT?"bg-blue-900/10 border-blue-500/20":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${Q.status===Ba.DRAFT?"bg-blue-500/20 text-blue-400":Q.status===Ba.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:Q.status===Ba.DRAFT?s.jsx(l0,{className:"w-4 h-4"}):rhe[Q.category||"Supplemental"]}),s.jsxs("div",{className:"truncate flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:Q.title}),te,s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:Q.classType})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:Q.description})]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[Q.status===Ba.DRAFT&&s.jsx("button",{onClick:()=>xe(Q),className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition",title:"Deploy Now",children:s.jsx(VH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>R(Q),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:s.jsx(Co,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>i==null?void 0:i(Q.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:s.jsx(Rle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Te(Q),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:s.jsx(Jv,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ve(Q),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:Q.status===Ba.ACTIVE?s.jsx(ule,{className:"w-4 h-4"}):s.jsx(o0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:async()=>{await d({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Re.deleteAssignment(Q.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]},Q.id)})})]},ie))})]}),s.jsx("div",{className:"lg:col-span-4",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[s.jsx(io,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),s.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[Ze.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[s.jsx(io,{className:"w-10 h-10 text-gray-700 mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),Ze.map(ie=>s.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:ie.userName}),s.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:ie.assignmentTitle})]}),s.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(ie.score)," XP"]})]}),s.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[s.jsxs("span",{children:[Math.round(ie.metrics.engagementTime/60),"m active"]}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(ie.submittedAt||"").toLocaleDateString()})]})]},ie.id))]})]})})]}),s.jsx(Ei,{isOpen:h,onClose:()=>m(!1),title:p?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:s.jsxs("form",{onSubmit:re,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),s.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:A.title,onChange:ie=>E({...A,title:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),s.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:A.unit,onChange:ie=>E({...A,unit:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),s.jsx("select",{value:A.category,onChange:ie=>E({...A,category:ie.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:DM.map(ie=>s.jsx("option",{value:ie,children:ie},ie))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ae.filter(ie=>ie!=="All Classes").map(ie=>s.jsx("button",{type:"button",onClick:()=>{const Be=new Set(C);Be.has(ie)?Be.size>1&&Be.delete(ie):Be.add(ie),U(Be),$([])},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${C.has(ie)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:ie},ie))})]}),s.jsx(mg,{availableSections:he,selectedSections:P,onChange:$}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[s.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),s.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async ie=>{var Be;if((Be=ie.target.files)!=null&&Be[0]){H(!0);try{const Q=await Re.uploadHtmlResource(ie.target.files[0]);E({...A,contentUrl:Q}),c.success("File uploaded!")}catch(Q){c.error("Upload failed: "+(Q instanceof Error?Q.message:"Unknown error"))}finally{H(!1)}}}}),K&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[s.jsx(Ai,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!K&&A.contentUrl&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[s.jsx(s0,{className:"w-4 h-4"})," Resource uploaded"]})]}),s.jsx("div",{className:"bg-indigo-900/20 border border-indigo-500/30 p-5 rounded-2xl",children:s.jsx(the,{blocks:A.lessonBlocks||[],onChange:ie=>E({...A,lessonBlocks:ie})})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:A.description,onChange:ie=>E({...A,description:ie.target.value})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Schedule Deployment ",s.jsx("span",{className:"text-gray-600",children:"(optional  leave blank for immediate)"})]}),s.jsx("input",{type:"datetime-local",value:B,onChange:ie=>G(ie.target.value),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",disabled:y,onClick:()=>ne(Ba.DRAFT),className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:[s.jsx(l0,{className:"w-4 h-4"})," Save Draft"]}),B?s.jsx("button",{type:"button",disabled:y,onClick:()=>ne(Ba.ACTIVE,B),className:"flex-[2] bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:y?s.jsx(Ai,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(AR,{className:"w-4 h-4"})," Schedule Deployment"]})}):s.jsx("button",{type:"submit",disabled:y,className:"flex-[2] bg-purple-600 hover:bg-purple-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:y?s.jsx(Ai,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})]})}),O&&s.jsx(I0e,{assignment:O,isOpen:!!O,onClose:()=>R(null)})]})},eW=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),s.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),s.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),s.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:s.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),s.jsxs("g",{filter:"url(#b-glow)",children:[s.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),s.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),s.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),s.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>s.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),ahe=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),s.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:s.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),s.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>s.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[s.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),s.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),s.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),s.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),s.jsxs("g",{filter:"url(#p-glow)",children:[s.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),s.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),s.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),s.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return s.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[s.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),ihe=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),s.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),s.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),s.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),s.jsxs("g",{filter:"url(#s-glow)",children:[s.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),s.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),s.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>s.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),s.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>s.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),she={BRUTE:eW,PHANTOM:ahe,SERPENT:ihe},tW=({bossType:t,hue:e,size:r})=>{const n=she[t]||eW;return s.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:s.jsx(n,{hue:e})})},ohe=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],lhe=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var m,p;const[i,o]=T.useState(null),c=T.useMemo(()=>{var y;if(!t)return[];const x=Object.keys(((y=t.gamification)==null?void 0:y.classProfiles)||{});return x.length>0?x:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=T.useMemo(()=>{var y,S;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((y=t.gamification)==null?void 0:y.inventory)||[],equipped:((S=t.gamification)==null?void 0:S.equipped)||{}};const x=Uu(t,d);return{inventory:x.inventory,equipped:x.equipped}},[t,d]);return t?s.jsx(Ei,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:s.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((m=t.gamification)==null?void 0:m.level)||1]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-cyan-400",children:((p=t.gamification)==null?void 0:p.currency)||0})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:s.jsx(Dn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:s.jsx(Jn,{className:"w-4 h-4"})})]})]})]}),c.length>1&&s.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(x=>s.jsx("button",{onClick:()=>o(x),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===x?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:x==="_legacy"?"Global":x},x))}),s.jsxs("div",{className:"border-b border-white/5 pb-6",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&s.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:ohe.map(x=>{var S;const y=(S=h.equipped)==null?void 0:S[x];return s.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${y?fa(y.rarity).border+" "+fa(y.rarity).bg:"border-white/10 bg-black/20"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:y.name}),s.jsx("button",{onClick:()=>n(t,x,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:s.jsx(Jn,{className:"w-3 h-3"})})]}):s.jsx("span",{className:"text-[8px] text-gray-600",children:x})},x)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((x,y)=>s.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${fa(x.rarity).border}`,children:[s.jsx("div",{className:`text-[8px] font-bold ${fa(x.rarity).text} text-center truncate w-full`,children:x.name}),s.jsx("div",{className:"text-[8px] text-gray-500",children:x.slot}),s.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:s.jsx("button",{onClick:()=>r(t,x,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:s.jsx(Wr,{className:"w-4 h-4"})})})]},y)),h.inventory.length===0&&s.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},che=[10,50,100,-10,-50,-100],uhe=({user:t,onClose:e,onAdjust:r})=>{var o;const[n,a]=T.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return s.jsx(Ei,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((o=t.gamification)==null?void 0:o.xp)||0," XP"]})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:che.map(c=>s.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),s.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},dhe=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&s.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return s.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),s.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[s.jsx(cs,{className:"w-3 h-3"}),n.quest.title]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),s.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),s.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&s.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:s.jsx(xle,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),s.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:s.jsx(Ql,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:s.jsx(Jn,{className:"w-5 h-5"})})]})]})]})]},a)})]}),V3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},hhe=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:o,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return s.jsx(Ei,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:s.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),s.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),s.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),s.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),s.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),s.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),s.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),s.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"All Classes"}),Object.values(kr).filter(h=>h!=="Uncategorized").map(h=>s.jsx("option",{value:h,children:h},h))]})]})]}),s.jsx(mg,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),s.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),s.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),s.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),s.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"COMMON",children:"Common"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&s.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),s.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),s.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),s.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),s.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),s.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),s.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[i&&s.jsx("button",{type:"button",disabled:o,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),s.jsx("button",{type:"submit",disabled:o,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:o?"Transmitting...":"Broadcast Mission"})]})]})})},fhe={Operatives:"OPERATIVES","XP Protocols":"PROTOCOLS",Missions:"MISSIONS","Mission Control":"MISSION_CONTROL","Boss Ops":"BOSS_OPS",Tutoring:"TUTORING"},mhe=({users:t,initialTab:e})=>{const r=Ga(),{confirm:n}=Ro(),a=e&&fhe[e]||"OPERATIVES",[i,o]=T.useState(""),[c,d]=T.useState("All Classes"),[h,m]=T.useState("All Sections"),[p,x]=T.useState("xp"),[y,S]=T.useState("desc"),N=q=>{p===q?S(be=>be==="asc"?"desc":"asc"):(x(q),S("asc"))},w=({label:q,col:be,className:je})=>s.jsx("th",{className:`cursor-pointer select-none group pb-4 ${je??""}`,onClick:()=>N(be),children:s.jsxs("div",{className:`flex items-center gap-1 ${je!=null&&je.includes("text-center")?"justify-center":je!=null&&je.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(Sx,{className:`w-2.5 h-2.5 -mb-0.5 ${p===be&&y==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(yi,{className:`w-2.5 h-2.5 -mt-0.5 ${p===be&&y==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[j,k]=T.useState([]),[I,L]=T.useState([]),[O,R]=T.useState(null),[A,E]=T.useState(null),[C,U]=T.useState(!1),[P,$]=T.useState(!1),[B,G]=T.useState(V3),[K,H]=T.useState(!1),[Z,ae]=T.useState([]),[he,fe]=T.useState(null),[Y,ne]=T.useState(""),[re,xe]=T.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:kr.AP_PHYSICS,targetSections:[]}),[Te,Ve]=T.useState([]),[Ze,Xe]=T.useState(!1),[ie,Be]=T.useState(null),[Q,te]=T.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[Ne,Se]=T.useState(!1),Qe=T.useRef(null),[nt,Ot]=T.useState(null),[Me,lt]=T.useState([]),[St,vt]=T.useState("bosses"),[et,ce]=T.useState(!1),[Ue,Je]=T.useState(null),[ht,dt]=T.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),Ut=T.useRef(null),[tr,Ir]=T.useState(null),[ve,st]=T.useState([]),[At,Pt]=T.useState(null),[$t,tt]=T.useState([]),[ar,Sr]=T.useState(!1),[Ur,mn]=T.useState("pending"),[wr,Gt]=T.useState([]);T.useEffect(()=>{const q=Re.subscribeToXPEvents(k),be=Re.subscribeToQuests(L),je=Re.subscribeToAllBossQuizzes(Ve),Ae=Re.subscribeToAllTutoringSessions(Gt),pt=Re.subscribeToBossQuestionBanks(lt);return()=>{q(),be(),je(),Ae(),pt()}},[]),T.useEffect(()=>{const q=[];t.forEach(be=>{var je,Ae;(Ae=(je=be.gamification)==null?void 0:je.activeQuests)==null||Ae.forEach(pt=>{const It=I.find(jt=>jt.id===pt.questId);It&&(pt.status==="DEPLOYED"||pt.status==="ACCEPTED")&&q.push({user:be,quest:It,status:pt.status,roll:pt.deploymentRoll,acceptedAt:pt.acceptedAt})})}),ae(q)},[t,I,a]);const zt=T.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),Nt=T.useMemo(()=>{const q=new Set;return zt.forEach(be=>{be.classSections?Object.values(be.classSections).forEach(je=>{je&&q.add(je)}):be.section&&q.add(be.section)}),Array.from(q).sort()},[zt]),Vr=T.useMemo(()=>{if(re.type!=="CLASS_SPECIFIC"||!re.targetClass)return Nt;const q=tv(zt,re.targetClass);return q.length>0?q:Nt},[re.type,re.targetClass,zt,Nt]),ln=T.useMemo(()=>{if(!B.targetClass)return Nt;const q=tv(zt,B.targetClass);return q.length>0?q:Nt},[B.targetClass,zt,Nt]),Yr=T.useMemo(()=>{if(Q.classType==="GLOBAL"||!Q.classType)return Nt;const q=tv(zt,Q.classType);return q.length>0?q:Nt},[Q.classType,zt,Nt]),Fr=q=>{var je,Ae;const be=(je=q.gamification)==null?void 0:je.classProfiles;return be&&Object.keys(be).length>0?Object.values(be).reduce((pt,It)=>pt+u0(It.equipped),0):u0((Ae=q.gamification)==null?void 0:Ae.equipped)},pn=T.useMemo(()=>zt.filter(q=>{var It;const be=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),je=c==="All Classes"||q.classType===c||((It=q.enrolledClasses)==null?void 0:It.includes(c)),Ae=q.classSections?Object.values(q.classSections):[],pt=h==="All Sections"||q.section===h||Ae.includes(h);return be&&je&&pt}).sort((q,be)=>{var je,Ae,pt,It,jt,Yt,Nr,ue,ye,De;switch(p){case"name":return y==="asc"?q.name.localeCompare(be.name):be.name.localeCompare(q.name);case"class":return y==="asc"?(q.classType||"").localeCompare(be.classType||""):(be.classType||"").localeCompare(q.classType||"");case"level":{const Fe=((je=q.gamification)==null?void 0:je.level)||1,qe=((Ae=be.gamification)==null?void 0:Ae.level)||1;return y==="asc"?Fe-qe:qe-Fe}case"flux":{const Fe=((pt=q.gamification)==null?void 0:pt.currency)||0,qe=((It=be.gamification)==null?void 0:It.currency)||0;return y==="asc"?Fe-qe:qe-Fe}case"gear":{const Fe=Fr(q),qe=Fr(be);return y==="asc"?Fe-qe:qe-Fe}case"xp":default:{const Fe=c!=="All Classes"?((Yt=(jt=q.gamification)==null?void 0:jt.classXp)==null?void 0:Yt[c])||0:((Nr=q.gamification)==null?void 0:Nr.xp)||0,qe=c!=="All Classes"?((ye=(ue=be.gamification)==null?void 0:ue.classXp)==null?void 0:ye[c])||0:((De=be.gamification)==null?void 0:De.xp)||0;return y==="asc"?Fe-qe:qe-Fe}}}),[zt,i,c,h,p,y]),dr=async(q,be)=>{try{await Re.adjustUserXP(q.id,be,q.classType||kr.UNCATEGORIZED),r.success(`${be>0?"+":""}${be} XP applied to ${q.name}.`)}catch{r.error("Failed to adjust XP.")}R(null)},ba=async q=>{q.preventDefault();const be={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!0,type:re.type};re.type==="CLASS_SPECIFIC"&&(be.targetClass=re.targetClass),re.targetSections.length>0&&(be.targetSections=re.targetSections),await Re.saveXPEvent(be),U(!1),xe({title:"",multiplier:2,type:"GLOBAL",targetClass:kr.AP_PHYSICS,targetSections:[]})},gn=async q=>{q.preventDefault(),H(!0);try{const be={};B.techReq>0&&(be.tech=B.techReq),B.focusReq>0&&(be.focus=B.focusReq),B.analysisReq>0&&(be.analysis=B.analysisReq),B.charismaReq>0&&(be.charisma=B.charismaReq);const je=new Date;je.setHours(je.getHours()+(B.durationHours||0));const Ae={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!0,type:B.type,statRequirements:be,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:B.durationHours>0?je.toISOString():null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await Re.saveQuest(Ae),r.success(`Mission "${Ae.title}" deployed.`),G(V3),$(!1)}catch(be){console.error("Failed to issue mission:",be),r.error("Failed to issue mission.")}finally{H(!1)}},In=async q=>{await Re.saveXPEvent({...q,isActive:!q.isActive})},ii=async q=>{const be={...q,isActive:!q.isActive};be.isActive&&(be.expiresAt=null),await Re.saveQuest(be)},jr=async(q,be,je)=>{var It,jt;if(!await n({message:`Confiscate ${be.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const pt=(je?Uu(q,je):{inventory:((It=q.gamification)==null?void 0:It.inventory)||[]}).inventory.filter(Yt=>Yt.id!==be.id);await Re.adminUpdateInventory(q.id,pt,((jt=q.gamification)==null?void 0:jt.currency)||0,je),E(Yt=>{var Nr,ue;return Yt?je&&((ue=(Nr=Yt.gamification)==null?void 0:Nr.classProfiles)!=null&&ue[je])?{...Yt,gamification:{...Yt.gamification,classProfiles:{...Yt.gamification.classProfiles,[je]:{...Yt.gamification.classProfiles[je],inventory:pt}}}}:{...Yt,gamification:{...Yt.gamification,inventory:pt}}:null})},xn=async(q,be,je)=>{var It;if(!await n({message:`Force unequip ${be} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const pt={...(je?Uu(q,je):{equipped:{...(It=q.gamification)==null?void 0:It.equipped}}).equipped};delete pt[be],await Re.adminUpdateEquipped(q.id,pt,je),E(jt=>{var Yt,Nr;return jt?je&&((Nr=(Yt=jt.gamification)==null?void 0:Yt.classProfiles)!=null&&Nr[je])?{...jt,gamification:{...jt.gamification,classProfiles:{...jt.gamification.classProfiles,[je]:{...jt.gamification.classProfiles[je],equipped:pt}}}}:{...jt,gamification:{...jt.gamification,equipped:pt}}:null})},si=async(q,be)=>{var Ae,pt;const je=Math.max(0,(((Ae=q.gamification)==null?void 0:Ae.currency)||0)+be);await Re.adminUpdateInventory(q.id,((pt=q.gamification)==null?void 0:pt.inventory)||[],je),E(It=>It?{...It,gamification:{...It.gamification,currency:je}}:null)},Qn=async(q,be,je,Ae)=>{try{await Re.resolveQuest(q,be,je,Ae),r.success(je?`Mission "${be.title}" approved.`:`Mission "${be.title}" rejected.`)}catch{r.error("Failed to resolve mission.")}},nn=async q=>{const be=q.quest.rollDieSides||20,je=Math.floor(Math.random()*be)+1;r.info(`Rolled a ${je} on a D${be}. ${je===be?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Qn(q.user.id,q.quest,je===be,q.user.classType)},yn=async q=>{try{await Re.updateCodename(q,Y.trim().slice(0,24)),r.success("Code name updated.")}catch{r.error("Failed to update code name.")}fe(null)},An=async(q,be)=>{try{await Re.toggleCodenameLock(q,be),r.success(be?"Codename locked.":"Codename unlocked.")}catch{r.error("Failed to update lock.")}},oi=q=>{var be,je,Ae,pt,It;if(q)Be(q),te({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((be=q.rewards)==null?void 0:be.xp)||500,rewardFlux:((je=q.rewards)==null?void 0:je.flux)||100,rewardItemRarity:((Ae=q.rewards)==null?void 0:Ae.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(jt=>({...jt,damageBonus:jt.damageBonus||0})),targetSections:q.targetSections||[],bossType:((pt=q.bossAppearance)==null?void 0:pt.bossType)||"BRUTE",bossHue:((It=q.bossAppearance)==null?void 0:It.hue)??0}),st(q.modifiers||[]);else{Be(null);const jt=new Date;jt.setDate(jt.getDate()+7),te({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:jt.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),st([])}Xe(!0)},Ka=()=>{te(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},ki=(q,be,je)=>{te(Ae=>{const pt=[...Ae.questions];return pt[q]={...pt[q],[be]:je},{...Ae,questions:pt}})},hs=(q,be,je)=>{te(Ae=>{const pt=[...Ae.questions],It=[...pt[q].options];return It[be]=je,pt[q]={...pt[q],options:It},{...Ae,questions:pt}})},bi=q=>{te(be=>({...be,questions:be.questions.filter((je,Ae)=>Ae!==q)}))},_t=async q=>{if(q.preventDefault(),Q.questions.length===0){r.error("Add at least one question.");return}try{const be=[...new Set(Q.questions.map(Ae=>Ae.bankId).filter(Boolean))],je={id:(ie==null?void 0:ie.id)||Math.random().toString(36).substring(2,12),bossName:Q.bossName,description:Q.description,maxHp:Q.maxHp,currentHp:(ie==null?void 0:ie.currentHp)??Q.maxHp,classType:Q.classType,isActive:(ie==null?void 0:ie.isActive)??!0,deadline:new Date(Q.deadline).toISOString(),damagePerCorrect:Q.damagePerCorrect,questions:Q.questions.map(Ae=>({id:Ae.id,stem:Ae.stem,options:Ae.options.filter(pt=>pt.trim()),correctAnswer:Ae.correctAnswer,difficulty:Ae.difficulty,...Ae.damageBonus>0?{damageBonus:Ae.damageBonus}:{},...Ae.bankId?{bankId:Ae.bankId}:{}})),rewards:{xp:Q.rewardXp,flux:Q.rewardFlux,...Q.rewardItemRarity?{itemRarity:Q.rewardItemRarity}:{}},...Q.targetSections.length>0?{targetSections:Q.targetSections}:{},bossAppearance:{bossType:Q.bossType,hue:Q.bossHue},...ve.length>0?{modifiers:ve}:{},...be.length>0?{questionBankIds:be}:{}};await Re.saveBossQuiz(je),r.success(ie?"Quiz boss updated.":"Quiz boss deployed!"),Xe(!1)}catch{r.error("Failed to save quiz boss.")}},me=async q=>{await Re.toggleBossQuizActive(q.id,!q.isActive)},rt=async q=>{await n({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Re.deleteBossQuiz(q.id),r.success("Quiz boss deleted."))},ft=q=>{q?(Je(q),dt({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(be=>({...be,damageBonus:be.damageBonus||0}))})):(Je(null),dt({name:"",classType:"GLOBAL",description:"",questions:[]})),Ir(null),ce(!0)},Xt=async q=>{if(q.preventDefault(),ht.questions.length===0){r.error("Add at least one question.");return}try{const be=new Date().toISOString(),je={id:(Ue==null?void 0:Ue.id)||Math.random().toString(36).substring(2,12),name:ht.name,classType:ht.classType,description:ht.description,questions:ht.questions.map(Ae=>({id:Ae.id,stem:Ae.stem,options:Ae.options.filter(pt=>pt.trim()),correctAnswer:Ae.correctAnswer,difficulty:Ae.difficulty,...Ae.damageBonus>0?{damageBonus:Ae.damageBonus}:{}})),createdAt:(Ue==null?void 0:Ue.createdAt)||be,updatedAt:be};await Re.saveBossQuestionBank(je),r.success(Ue?"Question bank updated.":"Question bank created!"),ce(!1)}catch{r.error("Failed to save question bank.")}},mr=async q=>{await n({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Re.deleteBossQuestionBank(q.id),r.success("Question bank deleted."))},cn=async(q,be)=>{var pt;const je=(pt=q.target.files)==null?void 0:pt[0];if(!je)return;const Ae=be==="bank"?Ir:Ot;Ae(null);try{let jt=(await je.text()).replace(/```json\s*|```\s*/g,"").trim();jt=jt.replace(/[\x00-\x1F\x7F]/g,De=>De===`
`||De==="\r"||De==="	"?" ":"");let Yt;try{Yt=JSON.parse(jt)}catch{const De=jt.match(/\[[\s\S]*\]/);if(De)try{Yt=JSON.parse(De[0])}catch{let Fe=null;for(let qe=De[0].length-1;qe>0;qe--)if(De[0][qe]==="}")try{Fe=JSON.parse(De[0].slice(0,qe+1)+"]");break}catch{}if(Fe)Yt=Fe;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(Yt)||Yt.length===0)throw new Error("Must be a non-empty JSON array.");const Nr=Yt.filter(De=>De.stem&&De.options&&De.correctAnswer!==void 0);if(Nr.length===0)throw new Error("No valid questions found.");const ue=Nr.map(De=>({id:De.id||Math.random().toString(36).substring(2,10),stem:De.stem,options:De.options.slice(0,4),correctAnswer:typeof De.correctAnswer=="number"?De.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(De.difficulty)?De.difficulty:"MEDIUM",damageBonus:typeof De.damageBonus=="number"?De.damageBonus:0})),ye=Yt.length-Nr.length;be==="bank"?dt(De=>({...De,questions:[...De.questions,...ue]})):te(De=>({...De,questions:[...De.questions,...ue]})),r.success(`Imported ${ue.length} questions${ye>0?` (${ye} skipped)`:""}`)}catch(It){Ae(It instanceof Error?It.message:"Import failed."),r.error("Failed to import questions.")}be==="bank"&&Ut.current&&(Ut.current.value=""),be==="boss"&&Qe.current&&(Qe.current.value="")},Jr=q=>{const be=q.questions.map(je=>({...je,damageBonus:je.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));te(je=>({...je,questions:[...je.questions,...be]})),r.success(`Imported ${be.length} questions from "${q.name}"`)},vn=q=>{st(be=>{if(be.find(pt=>pt.type===q))return be.filter(pt=>pt.type!==q);const Ae=cT[q];return[...be,{type:q,...Ae.hasValue?{value:Ae.defaultValue}:{}}]})},Rr=(q,be)=>{st(je=>je.map(Ae=>Ae.type===q?{...Ae,value:be}:Ae))},Ls=async q=>{Pt(q),Sr(!0);try{const be=await Re.getBossQuizAllProgress(q.id);tt(be)}catch{r.error("Failed to load endgame data.")}Sr(!1)},fs=(q,be)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${be||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,fo=()=>{const q=fs(Q.bossName,Q.classType);navigator.clipboard.writeText(q),Se(!0),setTimeout(()=>Se(!1),2500),r.success("Prompt copied to clipboard!")},xl=q=>cn(q,"boss"),ms=async(q,be)=>{try{const je=await Re.completeTutoring(q,be);r.success(`Verified! Tutor earned ${je.xpAwarded} XP and ${je.fluxAwarded} Flux`)}catch{r.error("Failed to verify session")}},ps=async q=>{if(await n({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await Re.cancelTutoringSession(q),r.success("Session cancelled.")}catch{r.error("Failed to cancel session")}},Da=wr.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),wa={OPERATIVES:"Operatives",PROTOCOLS:"XP Protocols",MISSIONS:"Missions",MISSION_CONTROL:"Mission Control",BOSS_OPS:"Boss Ops",TUTORING:"Tutoring"};return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:wa[a]}),s.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="PROTOCOLS"&&s.jsxs("button",{onClick:()=>U(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[s.jsx(VH,{className:"w-4 h-4"})," Deploy Protocol"]}),a==="MISSIONS"&&s.jsxs("button",{onClick:()=>$(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[s.jsx(q2,{className:"w-4 h-4"})," Issue Mission"]}),a==="BOSS_OPS"&&s.jsxs("button",{onClick:()=>oi(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[s.jsx(Co,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:s.jsxs("div",{className:"p-6",children:[a==="OPERATIVES"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Nx,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>o(q.target.value)})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[pn.length," operatives"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Sle,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Classes"}),Object.values(kr).map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(yi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),Nt.length>0&&s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:q=>m(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Sections"}),Nt.map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(yi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[s.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),s.jsx(w,{label:"Class",col:"class"}),s.jsx(w,{label:"Level",col:"level",className:"text-center"}),s.jsx(w,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),s.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),s.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),s.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:pn.map(q=>{var pt,It,jt,Yt,Nr,ue,ye,De,Fe;const be=((pt=q.gamification)==null?void 0:pt.level)||1,je=((It=q.gamification)==null?void 0:It.currency)||0,Ae=q.enrolledClasses||(q.classType?[q.classType]:[]);return s.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"py-3 pl-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),he===q.id?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{autoFocus:!0,value:Y,onChange:qe=>ne(qe.target.value),maxLength:24,onKeyDown:qe=>{qe.key==="Enter"&&yn(q.id),qe.key==="Escape"&&fe(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),s.jsx("button",{onClick:()=>yn(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:s.jsx(Ql,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>fe(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:s.jsx(Jn,{className:"w-3 h-3"})})]}):s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:()=>{var qe;fe(q.id),ne(((qe=q.gamification)==null?void 0:qe.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((jt=q.gamification)==null?void 0:jt.codename)||"UNASSIGNED",s.jsx(y3,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),s.jsx("button",{onClick:()=>{var qe;return An(q.id,!((qe=q.gamification)!=null&&qe.codenameLocked))},className:`transition ${(Yt=q.gamification)!=null&&Yt.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Nr=q.gamification)!=null&&Nr.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(ue=q.gamification)!=null&&ue.codenameLocked?s.jsx(af,{className:"w-2.5 h-2.5"}):s.jsx(Ele,{className:"w-2.5 h-2.5"})})]})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Ae.map(qe=>s.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:qe},qe))})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-lg font-black text-white",children:be})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((De=(ye=q.gamification)==null?void 0:ye.classXp)==null?void 0:De[c])||0:((Fe=q.gamification)==null?void 0:Fe.xp)||0).toLocaleString()})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-cyan-400",children:je})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:Fr(q)})}),s.jsx("td",{className:"py-3 text-right pr-4",children:s.jsxs("div",{className:"flex justify-end gap-1.5",children:[s.jsxs("button",{onClick:()=>E(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Wv,{className:"w-3 h-3"})," Inventory"]}),s.jsxs("button",{onClick:()=>R(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Dn,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),a==="PROTOCOLS"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[j.map(q=>s.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&s.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(Vn,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>Re.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),s.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),s.jsx("button",{onClick:()=>In(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),s.jsxs("button",{onClick:()=>U(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx(Dn,{className:"w-6 h-6"})}),s.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),a==="MISSIONS"&&s.jsx("div",{className:"space-y-4",children:I.map(q=>s.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(sl,{className:"w-7 h-7"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),s.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&s.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([be,je])=>s.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[je," ",be]},be))}),s.jsxs("div",{className:"flex gap-3 mt-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("button",{onClick:()=>ii(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),s.jsx("button",{onClick:()=>Re.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]},q.id))}),a==="MISSION_CONTROL"&&s.jsx(dhe,{deployments:Z,onResolveQuest:Qn,onRollForSalvation:nn}),a==="BOSS_OPS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>vt("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${St==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Dh,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",Te.length,")"]}),s.jsxs("button",{onClick:()=>vt("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${St==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Rh,{className:"w-3 h-3 inline mr-1"})," Question Banks (",Me.length,")"]})]}),St==="bosses"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),Te.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Co,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),s.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),Te.map(q=>{var pt,It;const be=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,je=new Date(q.deadline)<new Date,Ae=(q.currentHp??q.maxHp)<=0||!q.isActive;return s.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!je?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!je?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(Co,{className:"w-7 h-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),s.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(pt=q.modifiers)!=null&&pt.length?s.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(It=q.targetSections)!=null&&It.length?s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,je&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),Ae&&s.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),s.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:s.jsx("div",{className:`h-full rounded-full transition-all ${be>50?"bg-amber-500":be>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${be}%`}})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ae&&s.jsxs("button",{onClick:()=>Ls(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(Vf,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),s.jsxs("button",{onClick:()=>oi(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(y3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>me(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("button",{onClick:()=>rt(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]},q.id)})]}),St==="banks"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),s.jsxs("button",{onClick:()=>ft(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[s.jsx(Dn,{className:"w-3 h-3"})," New Bank"]})]}),Me.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Rh,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No question banks yet."}),s.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),Me.map(q=>s.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:s.jsx(Rh,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&s.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>ft(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[s.jsx(y3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>mr(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]},q.id))]})]}),a==="TUTORING"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>mn("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Ur==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",Da.length,")"]}),s.jsxs("button",{onClick:()=>mn("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Ur==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",wr.length,")"]})]}),(Ur==="pending"?Da:wr).length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Lu,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:Ur==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(Ur==="pending"?Da:wr).map(q=>s.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ole,{className:"w-4 h-4 text-gray-500"}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),s.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["Requester: ",s.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&s.jsxs("span",{children:["Tutor: ",s.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),s.jsxs("span",{children:["Class: ",s.jsx("span",{className:"text-purple-400",children:q.classType})]}),s.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&s.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&s.jsxs("button",{onClick:()=>ms(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Lr,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>ps(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Jn,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&s.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[s.jsx(Lr,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})}),s.jsx(lhe,{user:A,onClose:()=>E(null),onDeleteItem:jr,onUnequipItem:xn,onGrantFlux:si}),s.jsx(hhe,{isOpen:P,onClose:()=>$(!1),form:B,setForm:G,onSubmit:gn,onSaveDraft:async()=>{const q={};B.techReq>0&&(q.tech=B.techReq),B.focusReq>0&&(q.focus=B.focusReq),B.analysisReq>0&&(q.analysis=B.analysisReq),B.charismaReq>0&&(q.charisma=B.charismaReq);const be={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!1,type:B.type,statRequirements:q,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await Re.saveQuest(be),r.success("Mission saved as draft (standby)."),G(V3),$(!1)},isSubmitting:K,availableSections:ln}),s.jsx(Ei,{isOpen:C,onClose:()=>U(!1),title:"New XP Protocol Deployment",children:s.jsxs("form",{onSubmit:ba,className:"space-y-4 text-gray-100 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),s.jsx("input",{value:re.title,onChange:q=>xe({...re,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),s.jsx("input",{type:"number",step:"0.5",value:re.multiplier,onChange:q=>xe({...re,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),s.jsxs("select",{value:re.type,onChange:q=>xe({...re,type:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[s.jsx("option",{value:"GLOBAL",children:"Global Node"}),s.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),re.type==="CLASS_SPECIFIC"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),s.jsx("select",{value:re.targetClass,onChange:q=>xe({...re,targetClass:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(kr).map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsx(mg,{availableSections:Vr,selectedSections:re.targetSections,onChange:q=>xe({...re,targetSections:q})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:async()=>{const q={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!1,type:re.type,...re.type==="CLASS_SPECIFIC"?{targetClass:re.targetClass}:{},...re.targetSections.length>0?{targetSections:re.targetSections}:{}};await Re.saveXPEvent(q),U(!1),xe({title:"",multiplier:2,type:"GLOBAL",targetClass:kr.AP_PHYSICS,targetSections:[]}),r.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),s.jsx(uhe,{user:O,onClose:()=>R(null),onAdjust:dr}),s.jsx(Ei,{isOpen:Ze,onClose:()=>Xe(!1),title:ie?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:_t,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),s.jsx("input",{value:Q.bossName,onChange:q=>te({...Q,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("textarea",{value:Q.description,onChange:q=>te({...Q,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:s.jsx(tW,{bossType:Q.bossType,hue:Q.bossHue})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),s.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>s.jsx("button",{type:"button",onClick:()=>te({...Q,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${Q.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",Q.bossHue,""]}),s.jsx("input",{type:"range",min:"0",max:"360",value:Q.bossHue,onChange:q=>te({...Q,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),s.jsx("input",{type:"number",value:Q.maxHp,onChange:q=>te({...Q,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),s.jsx("input",{type:"number",value:Q.damagePerCorrect,onChange:q=>te({...Q,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:Q.classType,onChange:q=>te({...Q,classType:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(kr).map(q=>s.jsx("option",{value:q,children:q},q))]})]})]}),s.jsx(mg,{availableSections:Yr,selectedSections:Q.targetSections,onChange:q=>te({...Q,targetSections:q})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),s.jsx("input",{type:"datetime-local",value:Q.deadline,onChange:q=>te({...Q,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),s.jsx("input",{type:"number",value:Q.rewardXp,onChange:q=>te({...Q,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),s.jsx("input",{type:"number",value:Q.rewardFlux,onChange:q=>te({...Q,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),s.jsxs("select",{value:Q.rewardItemRarity,onChange:q=>te({...Q,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",ve.length," active)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(cT).map(([q,be])=>{const je=ve.find(Ae=>Ae.type===q);return s.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${je?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[s.jsxs("button",{type:"button",onClick:()=>vn(q),className:"w-full text-left",children:[s.jsx("div",{className:"text-[10px] font-bold text-white",children:be.name}),s.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:be.description})]}),je&&be.hasValue&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("input",{type:"number",value:je.value??be.defaultValue,onChange:Ae=>Rr(q,parseInt(Ae.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),s.jsx("span",{className:"text-[9px] text-gray-500",children:be.unit})]})]},q)})})]}),Me.length>0&&s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Me.filter(q=>q.classType===Q.classType||q.classType==="GLOBAL"||Q.classType==="GLOBAL").map(q=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),s.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),s.jsxs("button",{type:"button",onClick:()=>Jr(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[s.jsx(Dn,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",Q.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:fo,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${Ne?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:Ne?s.jsxs(s.Fragment,{children:[s.jsx(Ql,{className:"w-3 h-3"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(rf,{className:"w-3 h-3"})," Copy AI Prompt"]})}),s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(uc,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Qe,type:"file",accept:".json,.txt",onChange:xl,className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:Ka,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Manual"]})]})]}),nt&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[s.jsx(Jn,{className:"w-4 h-4 flex-shrink-0"}),nt,s.jsx("button",{type:"button",onClick:()=>Ot(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Jn,{className:"w-3 h-3"})})]}),Q.questions.length===0&&s.jsxs("div",{className:"text-center py-6 space-y-2",children:[s.jsx(Kv,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),s.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",s.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",s.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),Q.questions.map((q,be)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",be+1]}),s.jsx("textarea",{value:q.stem,onChange:je=>ki(be,"stem",je.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),s.jsx("button",{type:"button",onClick:()=>bi(be),className:"text-gray-600 hover:text-red-400 mt-4",children:s.jsx(Wr,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((je,Ae)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>ki(be,"correctAnswer",Ae),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ae?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:s.jsx(Ql,{className:"w-3 h-3"})}),s.jsx("input",{value:je,onChange:pt=>hs(be,Ae,pt.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+Ae)}`,required:!0})]},Ae))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:q.difficulty,onChange:je=>ki(be,"difficulty",je.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:je=>ki(be,"damageBonus",parseInt(je.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),s.jsxs("div",{className:"flex gap-3",children:[!ie&&s.jsx("button",{type:"button",onClick:async()=>{if(Q.questions.length===0){r.error("Add at least one question.");return}const q=[...new Set(Q.questions.map(je=>je.bankId).filter(Boolean))],be={id:Math.random().toString(36).substring(2,12),bossName:Q.bossName,description:Q.description,maxHp:Q.maxHp,currentHp:Q.maxHp,classType:Q.classType,isActive:!1,deadline:Q.deadline?new Date(Q.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:Q.damagePerCorrect,questions:Q.questions.map(je=>({id:je.id,stem:je.stem,options:je.options.filter(Ae=>Ae.trim()),correctAnswer:je.correctAnswer,difficulty:je.difficulty,...je.damageBonus>0?{damageBonus:je.damageBonus}:{},...je.bankId?{bankId:je.bankId}:{}})),rewards:{xp:Q.rewardXp,flux:Q.rewardFlux,...Q.rewardItemRarity?{itemRarity:Q.rewardItemRarity}:{}},...Q.targetSections.length>0?{targetSections:Q.targetSections}:{},bossAppearance:{bossType:Q.bossType,hue:Q.bossHue},...ve.length>0?{modifiers:ve}:{},...q.length>0?{questionBankIds:q}:{}};await Re.saveBossQuiz(be),r.success("Quiz boss saved as draft (inactive)."),Xe(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:`${ie?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:ie?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),s.jsx(Ei,{isOpen:et,onClose:()=>ce(!1),title:Ue?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:Xt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),s.jsx("input",{value:ht.name,onChange:q=>dt({...ht,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),s.jsxs("select",{value:ht.classType,onChange:q=>dt({...ht,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(kr).map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("input",{value:ht.description,onChange:q=>dt({...ht,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",ht.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(uc,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Ut,type:"file",accept:".json,.txt",onChange:q=>cn(q,"bank"),className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:()=>dt(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Dn,{className:"w-3 h-3"})," Add Manual"]})]})]}),tr&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[s.jsx(Jn,{className:"w-4 h-4 flex-shrink-0"})," ",tr,s.jsx("button",{type:"button",onClick:()=>Ir(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Jn,{className:"w-3 h-3"})})]}),ht.questions.length===0&&s.jsxs("div",{className:"text-center py-6",children:[s.jsx(Kv,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),ht.questions.map((q,be)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:q.stem,onChange:je=>{const Ae=[...ht.questions];Ae[be]={...Ae[be],stem:je.target.value},dt({...ht,questions:Ae})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${be+1}`,required:!0})}),s.jsx("button",{type:"button",onClick:()=>dt(je=>({...je,questions:je.questions.filter((Ae,pt)=>pt!==be)})),className:"text-gray-600 hover:text-red-400 mt-2",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((je,Ae)=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>{const pt=[...ht.questions];pt[be]={...pt[be],correctAnswer:Ae},dt({...ht,questions:pt})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ae?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:s.jsx(Ql,{className:"w-2.5 h-2.5"})}),s.jsx("input",{value:je,onChange:pt=>{const It=[...ht.questions],jt=[...It[be].options];jt[Ae]=pt.target.value,It[be]={...It[be],options:jt},dt({...ht,questions:It})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+Ae)}`,required:!0})]},Ae))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:q.difficulty,onChange:je=>{const Ae=[...ht.questions];Ae[be]={...Ae[be],difficulty:je.target.value},dt({...ht,questions:Ae})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:je=>{const Ae=[...ht.questions];Ae[be]={...Ae[be],damageBonus:parseInt(je.target.value)||0},dt({...ht,questions:Ae})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:Ue?"Update Question Bank":"Create Question Bank"})]})}),s.jsx(Ei,{isOpen:!!At,onClose:()=>{Pt(null),tt([])},title:At?`Endgame: ${At.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:ar?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):At&&s.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-white",children:$t.length}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-amber-400",children:$t.reduce((q,be)=>{var je;return q+(((je=be.combatStats)==null?void 0:je.totalDamageDealt)||0)},0).toLocaleString()}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-green-400",children:$t.reduce((q,be)=>{var je;return q+(((je=be.combatStats)==null?void 0:je.questionsCorrect)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-red-400",children:$t.reduce((q,be)=>{var je;return q+(((je=be.combatStats)==null?void 0:je.criticalHits)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[s.jsx(MH,{className:"w-4 h-4"})," Top Damage Dealers"]}),s.jsx("div",{className:"space-y-2",children:[...$t].sort((q,be)=>{var je,Ae;return(((je=be.combatStats)==null?void 0:je.totalDamageDealt)||0)-(((Ae=q.combatStats)==null?void 0:Ae.totalDamageDealt)||0)}).slice(0,5).map((q,be)=>{var Nr;const je=t.find(ue=>ue.id===q.userId),Ae=q.combatStats,pt=be,It=pt<IO.length?IO[pt]:1,jt=((Ae==null?void 0:Ae.questionsAttempted)||0)>=Gp&&((Ae==null?void 0:Ae.questionsCorrect)||0)>=Wp,Yt=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${be===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[s.jsxs("div",{className:`text-xl font-black w-8 text-center ${Yt[be]||"text-gray-500"}`,children:["#",be+1]}),(je==null?void 0:je.avatarUrl)&&s.jsx("img",{src:je.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-white truncate",children:(je==null?void 0:je.name)||q.userId}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{className:"text-amber-400 font-bold",children:[((Nr=Ae==null?void 0:Ae.totalDamageDealt)==null?void 0:Nr.toLocaleString())||0," dmg"]}),s.jsxs("span",{children:[(Ae==null?void 0:Ae.questionsCorrect)||0,"/",(Ae==null?void 0:Ae.questionsAttempted)||0," correct"]}),s.jsxs("span",{children:[(Ae==null?void 0:Ae.criticalHits)||0," crits"]}),s.jsxs("span",{children:["Streak: ",(Ae==null?void 0:Ae.longestStreak)||0]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:jt?s.jsxs("span",{className:`text-xs font-bold ${be<5?Yt[be]:"text-gray-400"}`,children:[It,"x"]}):s.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[s.jsx(o0,{className:"w-4 h-4"})," All Participants"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[s.jsx("th",{className:"pb-2 pl-2",children:"#"}),s.jsx("th",{className:"pb-2",children:"Student"}),s.jsx("th",{className:"pb-2 text-center",children:"Damage"}),s.jsx("th",{className:"pb-2 text-center",children:"Correct"}),s.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),s.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),s.jsx("th",{className:"pb-2 text-center",children:"Crits"}),s.jsx("th",{className:"pb-2 text-center",children:"Streak"}),s.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),s.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:[...$t].sort((q,be)=>{var je,Ae;return(((je=be.combatStats)==null?void 0:je.totalDamageDealt)||0)-(((Ae=q.combatStats)==null?void 0:Ae.totalDamageDealt)||0)}).map((q,be)=>{const je=t.find(Nr=>Nr.id===q.userId),Ae=q.combatStats,pt=(Ae==null?void 0:Ae.questionsAttempted)||0,It=(Ae==null?void 0:Ae.questionsCorrect)||0,jt=pt>0?Math.round(It/pt*100):0,Yt=pt>=Gp&&It>=Wp;return s.jsxs("tr",{className:"hover:bg-white/5",children:[s.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:be+1}),s.jsx("td",{className:"py-2 font-bold text-white",children:(je==null?void 0:je.name)||q.userId.slice(0,8)}),s.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((Ae==null?void 0:Ae.totalDamageDealt)||0).toLocaleString()}),s.jsx("td",{className:"py-2 text-center text-green-400",children:It}),s.jsx("td",{className:"py-2 text-center text-gray-400",children:pt}),s.jsxs("td",{className:"py-2 text-center text-gray-300",children:[jt,"%"]}),s.jsx("td",{className:"py-2 text-center text-red-400",children:(Ae==null?void 0:Ae.criticalHits)||0}),s.jsx("td",{className:"py-2 text-center text-purple-400",children:(Ae==null?void 0:Ae.longestStreak)||0}),s.jsx("td",{className:"py-2 text-center text-cyan-400",children:(Ae==null?void 0:Ae.damageReduced)||0}),s.jsx("td",{className:"py-2 text-center",children:Yt?s.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):s.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const be=$t.reduce((jt,Yt)=>{var Nr,ue;return jt+(((ue=(Nr=Yt.combatStats)==null?void 0:Nr.correctByDifficulty)==null?void 0:ue[q])||0)},0),je=$t.reduce((jt,Yt)=>{var Nr,ue;return jt+(((ue=(Nr=Yt.combatStats)==null?void 0:Nr.incorrectByDifficulty)==null?void 0:ue[q])||0)},0),Ae=be+je,pt=Ae>0?Math.round(be/Ae*100):0,It=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return s.jsxs("div",{className:`bg-${It}-500/5 border border-${It}-500/20 rounded-xl p-3 text-center`,children:[s.jsx("div",{className:`text-[10px] font-bold text-${It}-400 uppercase mb-1`,children:q}),s.jsxs("div",{className:"text-lg font-black text-white",children:[pt,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[be,"/",Ae," correct"]})]},q)})})]})]})})]})},phe=({students:t,availableSections:e,fullPage:r})=>{const{confirm:n}=Ro(),a=Ga(),[i,o]=T.useState({}),[c,d]=T.useState(kr.AP_PHYSICS),[h,m]=T.useState(!1),[p,x]=T.useState(""),[y,S]=T.useState(null),[N,w]=T.useState(""),[j,k]=T.useState(""),I=T.useMemo(()=>Object.values(kr).filter(P=>P!=="Uncategorized"),[]);T.useEffect(()=>{const P=Re.subscribeToStudentGroups(c,$=>{o(B=>({...B,[c]:$}))});return()=>P()},[c]);const L=i[c]||[],O=T.useMemo(()=>t.filter(P=>{var $;return P.role==="STUDENT"&&(($=P.enrolledClasses)==null?void 0:$.includes(c))}).filter(P=>!N||P.section===N),[t,c,N]),R=async()=>{if(p.trim())try{await Re.createStudentGroup(p.trim(),c,[]),x(""),m(!1),a.success("Group created.")}catch{a.error("Failed to create group.")}},A=async P=>{await n({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await Re.deleteStudentGroup(P)},E=async(P,$)=>{if(P.members.some(G=>G.userId===$.id))return;const B=[...P.members,{userId:$.id,userName:$.name}];await Re.updateStudentGroup(P.id,{members:B})},C=async(P,$)=>{const B=P.members.filter(G=>G.userId!==$);await Re.updateStudentGroup(P.id,{members:B})},U=T.useMemo(()=>{var $;const P={};for(const B of I)P[B]=(($=i[B])==null?void 0:$.length)||0;return P},[I,i]);return r?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Student Groups"}),s.jsx("p",{className:"text-gray-400",children:"Create and manage student groups across all classes."})]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-cyan-900/20",children:[s.jsx(Dn,{className:"w-4 h-4"})," New Group"]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:I.map(P=>s.jsxs("button",{onClick:()=>d(P),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${c===P?"bg-purple-600/80 text-white border-purple-500/50 shadow-lg":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white"}`,children:[P,U[P]>0&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full ${c===P?"bg-white/20":"bg-white/10"}`,children:U[P]})]},P))}),h&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-white mb-3",children:["Create Group for ",c]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:p,onChange:P=>x(P.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-cyan-500 transition",onKeyDown:P=>P.key==="Enter"&&R(),autoFocus:!0}),s.jsx("button",{onClick:R,disabled:!p.trim(),className:"px-5 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>{m(!1),x("")},className:"p-3 text-gray-400 hover:text-white transition",children:s.jsx(Jn,{className:"w-5 h-5"})})]})]}),L.length===0?s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-12 backdrop-blur-md text-center",children:[s.jsx(ls,{className:"w-14 h-14 mx-auto mb-4 text-gray-600"}),s.jsxs("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:["No groups for ",c]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a group to get started with collaborative assignments and group chat."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:L.map(P=>s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md hover:border-white/20 transition-all",children:[s.jsx("div",{className:"p-5 border-b border-white/5",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:P.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[P.members.length," member",P.members.length!==1?"s":"",s.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),c]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>S(y===P.id?null:P.id),className:`p-2 rounded-lg transition ${y===P.id?"bg-cyan-500/20 text-cyan-400":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Add members",children:s.jsx(eb,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>A(P.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition",title:"Delete group",children:s.jsx(Wr,{className:"w-4 h-4"})})]})]})}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[P.members.map($=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/10 transition group/member",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[9px] font-bold text-purple-400",children:$.userName.charAt(0)}),$.userName,s.jsx("button",{onClick:()=>C(P,$.userId),className:"text-gray-600 hover:text-red-400 transition opacity-0 group-hover/member:opacity-100",children:s.jsx(Wle,{className:"w-3 h-3"})})]},$.userId)),P.members.length===0&&s.jsxs("p",{className:"text-xs text-gray-600 italic py-2",children:["No members yet  click the ",s.jsx(eb,{className:"w-3 h-3 inline"})," button to assign students."]})]}),y===P.id&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Nx,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:j,onChange:$=>k($.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg pl-8 pr-3 py-1.5 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"})]}),e.length>0&&s.jsxs("select",{value:N,onChange:$=>w($.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-white",children:[s.jsx("option",{value:"",children:"All Sections"}),e.map($=>s.jsx("option",{value:$,children:$},$))]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-40 overflow-y-auto custom-scrollbar",children:O.filter($=>!P.members.some(B=>B.userId===$.id)).filter($=>!j||$.name.toLowerCase().includes(j.toLowerCase())).map($=>s.jsxs("button",{onClick:()=>E(P,$),className:"px-3 py-1.5 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-xs text-cyan-300 font-medium transition",children:["+ ",$.name]},$.id))})]})]})]},P.id))})]}):s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx(ls,{className:"w-5 h-5 text-cyan-400"})," Student Groups"]}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Groups have moved to the sidebar for a better experience."})]})},ghe={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:s.jsx(zH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:s.jsx(IH,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:s.jsx(Y2,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},xhe=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!1),o=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[s.jsxs("button",{onClick:()=>o("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[s.jsx(Y2,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),s.jsxs("button",{onClick:()=>o("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[s.jsx(IH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),s.jsxs("button",{onClick:()=>o("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[s.jsx(zH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&s.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[s.jsx(sf,{className:"w-6 h-6"}),e&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=ghe[r];return s.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[s.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),s.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?s.jsx(pv,{className:"w-4 h-4"}):s.jsx(BH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:s.jsx(Jn,{className:"w-4 h-4"})})]})]}),!a&&s.jsx("div",{className:"flex-1 bg-white relative",children:s.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},yhe=["","","","","","","",""],vhe=["","","","","","","","","","","","","","","","","","","","","","","","","",""],bhe=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:o,onOpenResource:c})=>{var vt,et;const{confirm:d}=Ro(),[h,m]=T.useState([]),[p,x]=T.useState(""),[y,S]=T.useState("Main"),[N,w]=T.useState(!1),[j,k]=T.useState(!1),[I,L]=T.useState(null),[O,R]=T.useState(null),[A,E]=T.useState([]),[C,U]=T.useState([]),[P,$]=T.useState(null),[B,G]=T.useState([]),[K,H]=T.useState(null),Z=T.useRef(null),ae=T.useRef(null),he=T.useRef(null),fe=T.useMemo(()=>Object.values(kr).filter(ce=>{var dt;if(ce===kr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const Ue=a.find(Ut=>Ut.className===ce),Je=(dt=t.enrolledClasses)==null?void 0:dt.includes(ce),ht=Ue?Ue.features.communications:!0;return Je&&ht}),[a,t.role,t.enrolledClasses]),[Y,ne]=T.useState(fe[0]||"");T.useEffect(()=>{(!Y||!fe.includes(Y))&&fe.length>0&&ne(fe[0])},[fe]);const re=T.useMemo(()=>y==="Resources"&&O?`res_${O}`:y==="Resources"&&!O?"":y==="Groups"&&P?`group_${P}`:y==="Groups"&&!P||!Y?"":`class_${Y.replace(/\s+/g,"_").toLowerCase()}`,[Y,y,O,P]),xe=T.useRef(null),Te=T.useMemo(()=>n.filter(ce=>!(ce.classType!==Y||ce.status==="DRAFT"||ce.status==="ARCHIVED"||ce.scheduledAt&&new Date(ce.scheduledAt)>new Date)),[n,Y]),Ve=T.useMemo(()=>h.filter(ce=>{var Ue;return ce.isGlobalPinned||((Ue=ce.pinnedBy)==null?void 0:Ue.includes(t.id))}),[h,t.id]),Ze=T.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),Xe=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("class_")),[i]),ie=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("res_")),[i]),Be=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("group_")),[i]),Q=T.useRef(!1);T.useEffect(()=>{if(!e){Q.current=!1;return}if(Q.current||!i||i.size===0)return;Q.current=!0;const ce=Array.from(i)[0];if(ce.startsWith("class_")){S("Main");const Ue=fe.find(Je=>`class_${Je.replace(/\s+/g,"_").toLowerCase()}`===ce);Ue&&ne(Ue)}else ce.startsWith("res_")?(S("Resources"),R(ce.replace("res_",""))):ce.startsWith("group_")&&(S("Groups"),$(ce.replace("group_","")))},[e,i,fe]),T.useEffect(()=>{!e||!re||o==null||o(re)},[e,re,o]),T.useEffect(()=>{if(!e)return;const ce=t.role==="ADMIN"?Re.subscribeToStudentGroups(Y,E):Re.subscribeToMyGroups(t.id,E);return()=>ce()},[e,t.id,t.role,Y]),T.useEffect(()=>{if(!e)return;let ce="";if(y==="Resources"&&O?ce=`res_${O}`:y==="Groups"&&P?ce=`group_${P}`:(y==="Main"||y==="Bookmarks")&&(ce=`class_${Y.replace(/\s+/g,"_").toLowerCase()}`),!ce)return;w(!0);const Ue=Re.subscribeToChannelMessages(ce,Je=>{m(Je),w(!1)});return()=>{Ue()}},[e,Y,y,O,P]),T.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const ce=Re.subscribeToFlaggedMessages(Je=>{G(Je)}),Ue=Re.subscribeToAllGroups(U);return()=>{ce(),Ue()}},[e,t.role]),T.useEffect(()=>{xe.current&&(xe.current.scrollTop=xe.current.scrollHeight)},[h,N,y,O]),T.useEffect(()=>{const ce=Ue=>{Z.current&&!Z.current.contains(Ue.target)&&k(!1),ae.current&&!ae.current.contains(Ue.target)&&L(null)};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]),T.useEffect(()=>{if(!e)return;const ce=Ue=>{Ue.key==="Escape"&&r()};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[e,r]);const te=T.useCallback(async ce=>{if(ce.preventDefault(),!(!p.trim()||!re)&&!Ze)try{await Re.sendMessage(t,p,re,Y),x(""),k(!1)}catch(Ue){console.error("Failed to send message:",Ue)}},[p,re,Ze,t,Y]),Ne=T.useCallback(async(ce,Ue)=>{try{await Re.toggleReaction(ce,Ue,t.id),L(null)}catch(Je){console.error(Je)}},[t.id]),Se=T.useCallback(async ce=>{try{await Re.togglePersonalPin(ce,t.id)}catch(Ue){console.error(Ue)}},[t.id]),Qe=T.useCallback(async(ce,Ue)=>{try{await Re.toggleGlobalPin(ce,!Ue)}catch(Je){console.error(Je)}},[]),nt=async ce=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Re.deleteMessage(ce)}catch(Ue){console.error(Ue)}},Ot=async ce=>{try{await Re.unflagMessage(ce),await Re.resolveFlagByMessageId(ce)}catch(Ue){console.error(Ue)}},Me=async ce=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Re.resolveFlagByMessageId(ce),await Re.deleteMessage(ce)}catch(Ue){console.error(Ue)}},lt=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Re.INDEFINITE_MUTE}],St=async ce=>{if(K){try{await Re.muteUser(K.senderId,ce)}catch(Ue){console.error(Ue)}H(null)}};return T.useEffect(()=>{const ce=Ue=>{he.current&&!he.current.contains(Ue.target)&&H(null)};return K&&document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[K]),e?s.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[y==="Resources"&&O||y==="Groups"&&P?s.jsx("button",{onClick:()=>{R(null),$(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:s.jsx(ple,{className:"w-5 h-5"})}):s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:s.jsx(sf,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:y==="Moderation"?"Moderation Queue":y==="Groups"?P?(vt=A.find(ce=>ce.id===P))==null?void 0:vt.name:"My Groups":y==="Resources"?O?(et=Te.find(ce=>ce.id===O))==null?void 0:et.title:"Class Resources":Y}),y!=="Resources"&&y!=="Moderation"&&y!=="Groups"&&fe.length>1&&s.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:Y}),s.jsx(yi,{className:"w-3 h-3 text-gray-500 ml-1"}),s.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:Y,onChange:ce=>ne(ce.target.value),children:fe.map(ce=>s.jsx("option",{value:ce,children:ce},ce))})]})]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:s.jsx(Jn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[s.jsxs("button",{onClick:()=>S("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${y==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(sf,{className:"w-5 h-5"}),Xe&&y!=="Main"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("button",{onClick:()=>S("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${y==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(zi,{className:"w-5 h-5"}),ie&&y!=="Resources"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(A.length>0||t.role==="ADMIN")&&s.jsxs("button",{onClick:()=>{S("Groups"),$(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${y==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(ls,{className:"w-5 h-5"}),Be&&y!=="Groups"?s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):A.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:A.length})]}),s.jsx("button",{onClick:()=>S("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${y==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:s.jsx(TR,{className:"w-5 h-5"})}),t.role==="ADMIN"&&s.jsxs("button",{onClick:()=>S("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${y==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(os,{className:"w-5 h-5"}),B.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:B.length})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col relative",children:[y==="Resources"&&!O&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:Te.map(ce=>s.jsxs("div",{onClick:()=>R(ce.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${ce.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[s.jsx(jle,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${ce.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ce.title}),s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:ce.unit})]})]}),s.jsx("button",{onClick:Ue=>{Ue.stopPropagation(),c==null||c(ce.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:s.jsx(G2,{className:"w-4 h-4"})})]},ce.id))})}),y==="Groups"&&!P&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:A.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(ls,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No groups yet"}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):A.map(ce=>s.jsx("div",{onClick:()=>$(ce.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${ce.id}`)?"border-cyan-500/40":"border-white/5"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[s.jsx(ls,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${ce.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ce.name}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[ce.members.length," member",ce.members.length!==1?"s":"","  ",ce.classType]})]})]})},ce.id))})}),y==="Moderation"&&t.role==="ADMIN"&&s.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Ds,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[B.length," item",B.length!==1?"s":""]})]}),B.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(os,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):s.jsx("div",{className:"space-y-3",children:B.map(ce=>{var Ue,Je,ht;return s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300",children:ce.senderName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(ce.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-sm text-gray-200 mb-1",children:ce.content}),ce.systemNote&&s.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:ce.systemNote}),s.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(Ue=ce.channelId)!=null&&Ue.startsWith("group_")?`Group: ${((Je=C.find(dt=>dt.id===ce.channelId.replace("group_","")))==null?void 0:Je.name)||ce.channelId.replace("group_","")}`:((ht=ce.channelId)==null?void 0:ht.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>Ot(ce.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[s.jsx(Ql,{className:"w-3.5 h-3.5"})," Approve"]}),s.jsxs("button",{onClick:()=>Me(ce.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[s.jsx(Wr,{className:"w-3.5 h-3.5"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===`flag-${ce.id}`?null:{id:`flag-${ce.id}`,senderId:ce.senderId,senderName:ce.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:s.jsx(Yv,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===`flag-${ce.id}`&&s.jsxs("div",{ref:he,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ce.senderName]}),lt.map(dt=>s.jsx("button",{onClick:()=>St(dt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:dt.label},dt.minutes))]})]})]})]},ce.id)})})]}),(y==="Main"||y==="Bookmarks"||y==="Resources"&&O||y==="Groups"&&P)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:xe,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(y==="Bookmarks"?Ve:h).map((ce,Ue,Je)=>{var Ut;const ht=ce.senderId===t.id,dt=Ue>0&&Je[Ue-1].senderId===ce.senderId&&new Date(ce.timestamp).getTime()-new Date(Je[Ue-1].timestamp).getTime()<3e5;return s.jsxs("div",{className:`group flex flex-col ${ht?"items-end":"items-start"} ${dt?"mt-1":"mt-4"}`,children:[!dt&&s.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("span",{className:`text-xs font-bold ${ht?"text-indigo-400":"text-gray-300"}`,children:ce.senderName}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(ce.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),ce.isGlobalPinned&&s.jsx(CR,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),s.jsxs("div",{className:"relative max-w-[85%]",children:[s.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${ht?"right-0":"left-0"} z-30`,children:[s.jsx("button",{onClick:()=>L(ce.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:s.jsx(IR,{className:"w-3.5 h-3.5 text-yellow-400"})}),s.jsx("button",{onClick:()=>Se(ce.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Ut=ce.pinnedBy)!=null&&Ut.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:s.jsx(TR,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Qe(ce.id,!!ce.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${ce.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:s.jsx(CR,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>nt(ce.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:s.jsx(Wr,{className:"w-3.5 h-3.5"})}),ce.senderId!==t.id&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===ce.id?null:{id:ce.id,senderId:ce.senderId,senderName:ce.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:s.jsx(Yv,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===ce.id&&s.jsxs("div",{ref:he,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ce.senderName]}),lt.map(tr=>s.jsx("button",{onClick:()=>St(tr.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:tr.label},tr.minutes))]})]})]})]}),I===ce.id&&s.jsx("div",{ref:ae,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${ht?"right-0":"left-0"}`,children:yhe.map(tr=>s.jsx("button",{onClick:()=>Ne(ce.id,tr),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:tr},tr))}),s.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${ht?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${ce.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${ce.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:ce.content}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:ce.reactions&&Object.entries(ce.reactions).map(([tr,Ir])=>{const ve=Ir;return ve.length>0&&s.jsxs("button",{onClick:()=>Ne(ce.id,tr),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${ve.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[tr," ",ve.length]},tr)})})]})]},ce.id)})}),s.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:s.jsxs("form",{onSubmit:te,className:"relative flex items-center gap-2",children:[j&&s.jsx("div",{ref:Z,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:vhe.map(ce=>s.jsx("button",{type:"button",onClick:()=>x(Ue=>Ue+ce),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:ce},ce))}),s.jsx("button",{type:"button",onClick:()=>k(!j),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:s.jsx(IR,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:p,onChange:ce=>x(ce.target.value),placeholder:Ze?"Transmission Disabled":"Type message...",disabled:!re||Ze,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),s.jsx("button",{type:"submit",disabled:!re||Ze||!p.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:s.jsx(uE,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function rW(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=rW(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function gr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=rW(t))&&(n&&(n+=" "),n+=e);return n}var F3,PM;function ds(){if(PM)return F3;PM=1;var t=Array.isArray;return F3=t,F3}var q3,LM;function nW(){if(LM)return q3;LM=1;var t=typeof hy=="object"&&hy&&hy.Object===Object&&hy;return q3=t,q3}var H3,BM;function ml(){if(BM)return H3;BM=1;var t=nW(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return H3=r,H3}var G3,$M;function Ex(){if($M)return G3;$M=1;var t=ml(),e=t.Symbol;return G3=e,G3}var W3,zM;function whe(){if(zM)return W3;zM=1;var t=Ex(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var m=n.call(o);return h&&(c?o[a]=d:delete o[a]),m}return W3=i,W3}var K3,UM;function She(){if(UM)return K3;UM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return K3=r,K3}var Q3,VM;function Sc(){if(VM)return Q3;VM=1;var t=Ex(),e=whe(),r=She(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return Q3=o,Q3}var X3,FM;function Nc(){if(FM)return X3;FM=1;function t(e){return e!=null&&typeof e=="object"}return X3=t,X3}var Y3,qM;function Wf(){if(qM)return Y3;qM=1;var t=Sc(),e=Nc(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Y3=n,Y3}var J3,HM;function LE(){if(HM)return J3;HM=1;var t=ds(),e=Wf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return J3=a,J3}var Z3,GM;function Wu(){if(GM)return Z3;GM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Z3=t,Z3}var eS,WM;function BE(){if(WM)return eS;WM=1;var t=Sc(),e=Wu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return eS=o,eS}var tS,KM;function Nhe(){if(KM)return tS;KM=1;var t=ml(),e=t["__core-js_shared__"];return tS=e,tS}var rS,QM;function _he(){if(QM)return rS;QM=1;var t=Nhe(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return rS=r,rS}var nS,XM;function aW(){if(XM)return nS;XM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return nS=r,nS}var aS,YM;function The(){if(YM)return aS;YM=1;var t=BE(),e=_he(),r=Wu(),n=aW(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,m=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(x){if(!r(x)||e(x))return!1;var y=t(x)?m:i;return y.test(n(x))}return aS=p,aS}var iS,JM;function jhe(){if(JM)return iS;JM=1;function t(e,r){return e==null?void 0:e[r]}return iS=t,iS}var sS,ZM;function _0(){if(ZM)return sS;ZM=1;var t=The(),e=jhe();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return sS=r,sS}var oS,eD;function iw(){if(eD)return oS;eD=1;var t=_0(),e=t(Object,"create");return oS=e,oS}var lS,tD;function Ahe(){if(tD)return lS;tD=1;var t=iw();function e(){this.__data__=t?t(null):{},this.size=0}return lS=e,lS}var cS,rD;function Ehe(){if(rD)return cS;rD=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return cS=t,cS}var uS,nD;function khe(){if(nD)return uS;nD=1;var t=iw(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var c=o[i];return c===e?void 0:c}return n.call(o,i)?o[i]:void 0}return uS=a,uS}var dS,aD;function Che(){if(aD)return dS;aD=1;var t=iw(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return dS=n,dS}var hS,iD;function Ohe(){if(iD)return hS;iD=1;var t=iw(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return hS=r,hS}var fS,sD;function Ihe(){if(sD)return fS;sD=1;var t=Ahe(),e=Ehe(),r=khe(),n=Che(),a=Ohe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,fS=i,fS}var mS,oD;function Rhe(){if(oD)return mS;oD=1;function t(){this.__data__=[],this.size=0}return mS=t,mS}var pS,lD;function $E(){if(lD)return pS;lD=1;function t(e,r){return e===r||e!==e&&r!==r}return pS=t,pS}var gS,cD;function sw(){if(cD)return gS;cD=1;var t=$E();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return gS=e,gS}var xS,uD;function Mhe(){if(uD)return xS;uD=1;var t=sw(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():r.call(i,o,1),--this.size,!0}return xS=n,xS}var yS,dD;function Dhe(){if(dD)return yS;dD=1;var t=sw();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return yS=e,yS}var vS,hD;function Phe(){if(hD)return vS;hD=1;var t=sw();function e(r){return t(this.__data__,r)>-1}return vS=e,vS}var bS,fD;function Lhe(){if(fD)return bS;fD=1;var t=sw();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return bS=e,bS}var wS,mD;function ow(){if(mD)return wS;mD=1;var t=Rhe(),e=Mhe(),r=Dhe(),n=Phe(),a=Lhe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,wS=i,wS}var SS,pD;function zE(){if(pD)return SS;pD=1;var t=_0(),e=ml(),r=t(e,"Map");return SS=r,SS}var NS,gD;function Bhe(){if(gD)return NS;gD=1;var t=Ihe(),e=ow(),r=zE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return NS=n,NS}var _S,xD;function $he(){if(xD)return _S;xD=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return _S=t,_S}var TS,yD;function lw(){if(yD)return TS;yD=1;var t=$he();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return TS=e,TS}var jS,vD;function zhe(){if(vD)return jS;vD=1;var t=lw();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return jS=e,jS}var AS,bD;function Uhe(){if(bD)return AS;bD=1;var t=lw();function e(r){return t(this,r).get(r)}return AS=e,AS}var ES,wD;function Vhe(){if(wD)return ES;wD=1;var t=lw();function e(r){return t(this,r).has(r)}return ES=e,ES}var kS,SD;function Fhe(){if(SD)return kS;SD=1;var t=lw();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return kS=e,kS}var CS,ND;function UE(){if(ND)return CS;ND=1;var t=Bhe(),e=zhe(),r=Uhe(),n=Vhe(),a=Fhe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,CS=i,CS}var OS,_D;function iW(){if(_D)return OS;_D=1;var t=UE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,OS=r,OS}var IS,TD;function qhe(){if(TD)return IS;TD=1;var t=iW(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return IS=r,IS}var RS,jD;function Hhe(){if(jD)return RS;jD=1;var t=qhe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,c,d,h){i.push(d?h.replace(r,"$1"):c||o)}),i});return RS=n,RS}var MS,AD;function VE(){if(AD)return MS;AD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return MS=t,MS}var DS,ED;function Ghe(){if(ED)return DS;ED=1;var t=Ex(),e=VE(),r=ds(),n=Wf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return DS=o,DS}var PS,kD;function sW(){if(kD)return PS;kD=1;var t=Ghe();function e(r){return r==null?"":t(r)}return PS=e,PS}var LS,CD;function oW(){if(CD)return LS;CD=1;var t=ds(),e=LE(),r=Hhe(),n=sW();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return LS=a,LS}var BS,OD;function cw(){if(OD)return BS;OD=1;var t=Wf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return BS=e,BS}var $S,ID;function FE(){if(ID)return $S;ID=1;var t=oW(),e=cw();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return $S=r,$S}var zS,RD;function lW(){if(RD)return zS;RD=1;var t=FE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return zS=e,zS}var Whe=lW();const no=en(Whe);var US,MD;function Khe(){if(MD)return US;MD=1;function t(e){return e==null}return US=t,US}var Qhe=Khe();const hr=en(Qhe);var VS,DD;function Xhe(){if(DD)return VS;DD=1;var t=Sc(),e=ds(),r=Nc(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return VS=a,VS}var Yhe=Xhe();const d0=en(Yhe);var Jhe=BE();const rr=en(Jhe);var Zhe=Wu();const Kf=en(Zhe);var FS={exports:{}},sn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD;function efe(){if(PD)return sn;PD=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),S;S=Symbol.for("react.module.reference");function N(w){if(typeof w=="object"&&w!==null){var j=w.$$typeof;switch(j){case t:switch(w=w.type,w){case r:case a:case n:case h:case m:return w;default:switch(w=w&&w.$$typeof,w){case c:case o:case d:case x:case p:case i:return w;default:return j}}case e:return j}}}return sn.ContextConsumer=o,sn.ContextProvider=i,sn.Element=t,sn.ForwardRef=d,sn.Fragment=r,sn.Lazy=x,sn.Memo=p,sn.Portal=e,sn.Profiler=a,sn.StrictMode=n,sn.Suspense=h,sn.SuspenseList=m,sn.isAsyncMode=function(){return!1},sn.isConcurrentMode=function(){return!1},sn.isContextConsumer=function(w){return N(w)===o},sn.isContextProvider=function(w){return N(w)===i},sn.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},sn.isForwardRef=function(w){return N(w)===d},sn.isFragment=function(w){return N(w)===r},sn.isLazy=function(w){return N(w)===x},sn.isMemo=function(w){return N(w)===p},sn.isPortal=function(w){return N(w)===e},sn.isProfiler=function(w){return N(w)===a},sn.isStrictMode=function(w){return N(w)===n},sn.isSuspense=function(w){return N(w)===h},sn.isSuspenseList=function(w){return N(w)===m},sn.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===m||w===y||typeof w=="object"&&w!==null&&(w.$$typeof===x||w.$$typeof===p||w.$$typeof===i||w.$$typeof===o||w.$$typeof===d||w.$$typeof===S||w.getModuleId!==void 0)},sn.typeOf=N,sn}var LD;function tfe(){return LD||(LD=1,FS.exports=efe()),FS.exports}var rfe=tfe(),qS,BD;function cW(){if(BD)return qS;BD=1;var t=Sc(),e=Nc(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return qS=n,qS}var HS,$D;function nfe(){if($D)return HS;$D=1;var t=cW();function e(r){return t(r)&&r!=+r}return HS=e,HS}var afe=nfe();const kx=en(afe);var ife=cW();const sfe=en(ife);var To=function(e){return e===0?0:e>0?1:-1},Ld=function(e){return d0(e)&&e.indexOf("%")===e.length-1},yt=function(e){return sfe(e)&&!kx(e)},ofe=function(e){return hr(e)},Va=function(e){return yt(e)||d0(e)},lfe=0,Cx=function(e){var r=++lfe;return"".concat(e||"").concat(r)},jo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!yt(e)&&!d0(e))return n;var i;if(Ld(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return kx(i)&&(i=n),a&&i>r&&(i=r),i},pu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},cfe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},ts=function(e,r){return yt(e)&&yt(r)?function(n){return e+n*(r-e)}:function(){return r}};function lb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):no(n,e))===r})}var ufe=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,o=0,c=1/0,d=-1/0,h=0,m=0,p=0;p<r;p++)h=e[p].cx||0,m=e[p].cy||0,n+=h,a+=m,i+=h*m,o+=h*h,c=Math.min(c,h),d=Math.max(d,h);var x=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:c,xmax:d,a:x,b:(a-x*n)/r}},dfe=function(e,r){return yt(e)&&yt(r)?e-r:d0(e)&&d0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Lh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function oj(t){"@babel/helpers - typeof";return oj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oj(t)}var hfe=["viewBox","children"],ffe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],zD=["points","pathLength"],GS={svg:hfe,polygon:zD,polyline:zD},qE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],cb=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),!Kf(n))return null;var a={};return Object.keys(n).forEach(function(i){qE.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},mfe=function(e,r,n){return function(a){return e(r,n,a),null}},h0=function(e,r,n){if(!Kf(e)||oj(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];qE.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=mfe(o,r,n))}),a},pfe=["children"],gfe=["children"];function UD(t,e){if(t==null)return{};var r=xfe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var VD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},rc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},FD=null,WS=null,HE=function t(e){if(e===FD&&Array.isArray(WS))return WS;var r=[];return T.Children.forEach(e,function(n){hr(n)||(rfe.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),WS=r,FD=e,r};function Rs(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return rc(a)}):n=[rc(e)],HE(t).forEach(function(a){var i=no(a,"type.displayName")||no(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function js(t,e){var r=Rs(t,e);return r&&r[0]}var qD=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!yt(n)||n<=0||!yt(a)||a<=0)},yfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],vfe=function(e){return e&&e.type&&d0(e.type)&&yfe.indexOf(e.type)>=0},bfe=function(e,r,n,a){var i,o=(i=GS==null?void 0:GS[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!rr(e)&&(a&&o.includes(r)||ffe.includes(r))||n&&qE.includes(r)},Ft=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(T.isValidElement(e)&&(a=e.props),!Kf(a))return null;var i={};return Object.keys(a).forEach(function(o){var c;bfe((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(i[o]=a[o])}),i},lj=function t(e,r){if(e===r)return!0;var n=T.Children.count(e);if(n!==T.Children.count(r))return!1;if(n===0)return!0;if(n===1)return HD(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!HD(i,o))return!1}return!0},HD=function(e,r){if(hr(e)&&hr(r))return!0;if(!hr(e)&&!hr(r)){var n=e.props||{},a=n.children,i=UD(n,pfe),o=r.props||{},c=o.children,d=UD(o,gfe);return a&&c?Lh(i,d)&&lj(a,c):!a&&!c?Lh(i,d):!1}return!1},GD=function(e,r){var n=[],a={};return HE(e).forEach(function(i,o){if(vfe(i))n.push(i);else if(i){var c=rc(i.type),d=r[c]||{},h=d.handler,m=d.once;if(h&&(!m||!a[c])){var p=h(i,c,o);n.push(p),a[c]=!0}}}),n},wfe=function(e){var r=e&&e.type;return r&&VD[r]?VD[r]:null},Sfe=function(e,r){return HE(r).indexOf(e)},Nfe=["children","width","height","viewBox","className","style","title","desc"];function cj(){return cj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cj.apply(this,arguments)}function _fe(t,e){if(t==null)return{};var r=Tfe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Tfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function uj(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,c=t.title,d=t.desc,h=_fe(t,Nfe),m=a||{width:r,height:n,x:0,y:0},p=gr("recharts-surface",i);return se.createElement("svg",cj({},Ft(h,!0,"svg"),{className:p,width:r,height:n,style:o,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),se.createElement("title",null,c),se.createElement("desc",null,d),e)}var jfe=["children","className"];function dj(){return dj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dj.apply(this,arguments)}function Afe(t,e){if(t==null)return{};var r=Efe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Efe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Kr=se.forwardRef(function(t,e){var r=t.children,n=t.className,a=Afe(t,jfe),i=gr("recharts-layer",n);return se.createElement("g",dj({className:i},Ft(a,!0),{ref:e}),r)}),nc=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},KS,WD;function kfe(){if(WD)return KS;WD=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return KS=t,KS}var QS,KD;function Cfe(){if(KD)return QS;KD=1;var t=kfe();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return QS=e,QS}var XS,QD;function uW(){if(QD)return XS;QD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+i+"]");function d(h){return c.test(h)}return XS=d,XS}var YS,XD;function Ofe(){if(XD)return YS;XD=1;function t(e){return e.split("")}return YS=t,YS}var JS,YD;function Ife(){if(YD)return JS;YD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",m="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",S=h+"?",N="["+i+"]?",w="(?:"+y+"(?:"+[m,p,x].join("|")+")"+N+S+")*",j=N+S+w,k="(?:"+[m+c+"?",c,p,x,o].join("|")+")",I=RegExp(d+"(?="+d+")|"+k+j,"g");function L(O){return O.match(I)||[]}return JS=L,JS}var ZS,JD;function Rfe(){if(JD)return ZS;JD=1;var t=Ofe(),e=uW(),r=Ife();function n(a){return e(a)?r(a):t(a)}return ZS=n,ZS}var e6,ZD;function Mfe(){if(ZD)return e6;ZD=1;var t=Cfe(),e=uW(),r=Rfe(),n=sW();function a(i){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[i]()+h}}return e6=a,e6}var t6,eP;function Dfe(){if(eP)return t6;eP=1;var t=Mfe(),e=t("toUpperCase");return t6=e,t6}var Pfe=Dfe();const uw=en(Pfe);function Mn(t){return function(){return t}}const dW=Math.cos,ub=Math.sin,Mo=Math.sqrt,db=Math.PI,dw=2*db,hj=Math.PI,fj=2*hj,kd=1e-6,Lfe=fj-kd;function hW(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Bfe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return hW;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class $fe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?hW:Bfe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,m=o-e,p=c-r,x=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(x>kd)if(!(Math.abs(p*d-h*m)>kd)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let y=n-o,S=a-c,N=d*d+h*h,w=y*y+S*S,j=Math.sqrt(N),k=Math.sqrt(x),I=i*Math.tan((hj-Math.acos((N+x-w)/(2*j*k)))/2),L=I/k,O=I/j;Math.abs(L-1)>kd&&this._append`L${e+L*m},${r+L*p}`,this._append`A${i},${i},0,0,${+(p*y>m*S)},${this._x1=e+O*d},${this._y1=r+O*h}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,m=r+d,p=1^o,x=o?a-i:i-a;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>kd||Math.abs(this._y1-m)>kd)&&this._append`L${h},${m}`,n&&(x<0&&(x=x%fj+fj),x>Lfe?this._append`A${n},${n},0,1,${p},${e-c},${r-d}A${n},${n},0,1,${p},${this._x1=h},${this._y1=m}`:x>kd&&this._append`A${n},${n},0,${+(x>=hj)},${p},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function GE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new $fe(e)}function WE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fW(t){this._context=t}fW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function hw(t){return new fW(t)}function mW(t){return t[0]}function pW(t){return t[1]}function gW(t,e){var r=Mn(!0),n=null,a=hw,i=null,o=GE(c);t=typeof t=="function"?t:t===void 0?mW:Mn(t),e=typeof e=="function"?e:e===void 0?pW:Mn(e);function c(d){var h,m=(d=WE(d)).length,p,x=!1,y;for(n==null&&(i=a(y=o())),h=0;h<=m;++h)!(h<m&&r(p=d[h],h,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+t(p,h,d),+e(p,h,d));if(y)return i=null,y+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Mn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Mn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Mn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function Py(t,e,r){var n=null,a=Mn(!0),i=null,o=hw,c=null,d=GE(h);t=typeof t=="function"?t:t===void 0?mW:Mn(+t),e=typeof e=="function"?e:Mn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?pW:Mn(+r);function h(p){var x,y,S,N=(p=WE(p)).length,w,j=!1,k,I=new Array(N),L=new Array(N);for(i==null&&(c=o(k=d())),x=0;x<=N;++x){if(!(x<N&&a(w=p[x],x,p))===j)if(j=!j)y=x,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),S=x-1;S>=y;--S)c.point(I[S],L[S]);c.lineEnd(),c.areaEnd()}j&&(I[x]=+t(w,x,p),L[x]=+e(w,x,p),c.point(n?+n(w,x,p):I[x],r?+r(w,x,p):L[x]))}if(k)return c=null,k+""||null}function m(){return gW().defined(a).curve(o).context(i)}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:Mn(+p),n=null,h):t},h.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Mn(+p),h):t},h.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Mn(+p),h):n},h.y=function(p){return arguments.length?(e=typeof p=="function"?p:Mn(+p),r=null,h):e},h.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Mn(+p),h):e},h.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Mn(+p),h):r},h.lineX0=h.lineY0=function(){return m().x(t).y(e)},h.lineY1=function(){return m().x(t).y(r)},h.lineX1=function(){return m().x(n).y(e)},h.defined=function(p){return arguments.length?(a=typeof p=="function"?p:Mn(!!p),h):a},h.curve=function(p){return arguments.length?(o=p,i!=null&&(c=o(i)),h):o},h.context=function(p){return arguments.length?(p==null?i=c=null:c=o(i=p),h):i},h}class xW{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function zfe(t){return new xW(t,!0)}function Ufe(t){return new xW(t,!1)}const KE={draw(t,e){const r=Mo(e/db);t.moveTo(r,0),t.arc(0,0,r,0,dw)}},Vfe={draw(t,e){const r=Mo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},yW=Mo(1/3),Ffe=yW*2,qfe={draw(t,e){const r=Mo(e/Ffe),n=r*yW;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Hfe={draw(t,e){const r=Mo(e),n=-r/2;t.rect(n,n,r,r)}},Gfe=.8908130915292852,vW=ub(db/10)/ub(7*db/10),Wfe=ub(dw/10)*vW,Kfe=-dW(dw/10)*vW,Qfe={draw(t,e){const r=Mo(e*Gfe),n=Wfe*r,a=Kfe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=dw*i/5,c=dW(o),d=ub(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},r6=Mo(3),Xfe={draw(t,e){const r=-Mo(e/(r6*3));t.moveTo(0,r*2),t.lineTo(-r6*r,-r),t.lineTo(r6*r,-r),t.closePath()}},Qs=-.5,Xs=Mo(3)/2,mj=1/Mo(12),Yfe=(mj/2+1)*3,Jfe={draw(t,e){const r=Mo(e/Yfe),n=r/2,a=r*mj,i=n,o=r*mj+r,c=-i,d=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(c,d),t.lineTo(Qs*n-Xs*a,Xs*n+Qs*a),t.lineTo(Qs*i-Xs*o,Xs*i+Qs*o),t.lineTo(Qs*c-Xs*d,Xs*c+Qs*d),t.lineTo(Qs*n+Xs*a,Qs*a-Xs*n),t.lineTo(Qs*i+Xs*o,Qs*o-Xs*i),t.lineTo(Qs*c+Xs*d,Qs*d-Xs*c),t.closePath()}};function Zfe(t,e){let r=null,n=GE(a);t=typeof t=="function"?t:Mn(t||KE),e=typeof e=="function"?e:Mn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Mn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Mn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function hb(){}function fb(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function bW(t){this._context=t}bW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eme(t){return new bW(t)}function wW(t){this._context=t}wW.prototype={areaStart:hb,areaEnd:hb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:fb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tme(t){return new wW(t)}function SW(t){this._context=t}SW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:fb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rme(t){return new SW(t)}function NW(t){this._context=t}NW.prototype={areaStart:hb,areaEnd:hb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nme(t){return new NW(t)}function tP(t){return t<0?-1:1}function rP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(tP(i)+tP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function nP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function n6(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,o-c*r,i,o)}function mb(t){this._context=t}mb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:n6(this,this._t0,nP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,n6(this,nP(this,r=rP(this,t,e)),r);break;default:n6(this,this._t0,r=rP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function _W(t){this._context=new TW(t)}(_W.prototype=Object.create(mb.prototype)).point=function(t,e){mb.prototype.point.call(this,e,t)};function TW(t){this._context=t}TW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function ame(t){return new mb(t)}function ime(t){return new _W(t)}function jW(t){this._context=t}jW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=aP(t),a=aP(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function aP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function sme(t){return new jW(t)}function fw(t,e){this._context=t,this._t=e}fw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function ome(t){return new fw(t,.5)}function lme(t){return new fw(t,0)}function cme(t){return new fw(t,1)}function lf(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,c=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function pj(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function ume(t,e){return t[e]}function dme(t){const e=[];return e.key=t,e}function hme(){var t=Mn([]),e=pj,r=lf,n=ume;function a(i){var o=Array.from(t.apply(this,arguments),dme),c,d=o.length,h=-1,m;for(const p of i)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(p,o[c].key,h,i)]).data=p;for(c=0,m=WE(e(o));c<d;++c)o[m[c]].index=c;return r(o,m),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Mn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Mn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?pj:typeof i=="function"?i:Mn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??lf,a):r},a}function fme(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}lf(t,e)}}function mme(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}lf(t,e)}}function pme(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,h=0;c<o;++c){for(var m=t[e[c]],p=m[n][1]||0,x=m[n-1][1]||0,y=(p-x)/2,S=0;S<c;++S){var N=t[e[S]],w=N[n][1]||0,j=N[n-1][1]||0;y+=w-j}d+=p,h+=y*p}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,lf(t,e)}}function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}var gme=["type","size","sizeType"];function gj(){return gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gj.apply(this,arguments)}function iP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iP(Object(r),!0).forEach(function(n){xme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xme(t,e,r){return e=yme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yme(t){var e=vme(t,"string");return pg(e)=="symbol"?e:e+""}function vme(t,e){if(pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bme(t,e){if(t==null)return{};var r=wme(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var AW={symbolCircle:KE,symbolCross:Vfe,symbolDiamond:qfe,symbolSquare:Hfe,symbolStar:Qfe,symbolTriangle:Xfe,symbolWye:Jfe},Sme=Math.PI/180,Nme=function(e){var r="symbol".concat(uw(e));return AW[r]||KE},_me=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Sme;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Tme=function(e,r){AW["symbol".concat(uw(e))]=r},mw=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=bme(e,gme),h=sP(sP({},d),{},{type:n,size:i,sizeType:c}),m=function(){var w=Nme(n),j=Zfe().type(w).size(_me(i,c,n));return j()},p=h.className,x=h.cx,y=h.cy,S=Ft(h,!0);return x===+x&&y===+y&&i===+i?se.createElement("path",gj({},S,{className:gr("recharts-symbols",p),transform:"translate(".concat(x,", ").concat(y,")"),d:m()})):null};mw.registerSymbol=Tme;function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function xj(){return xj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xj.apply(this,arguments)}function oP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jme(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(r),!0).forEach(function(n){gg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ame(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eme(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kW(n.key),n)}}function kme(t,e,r){return e&&Eme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cme(t,e,r){return e=pb(e),Ome(t,EW()?Reflect.construct(e,r||[],pb(t).constructor):e.apply(t,r))}function Ome(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ime(t)}function Ime(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EW=function(){return!!t})()}function pb(t){return pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pb(t)}function Rme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yj(t,e)}function yj(t,e){return yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yj(t,e)}function gg(t,e,r){return e=kW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kW(t){var e=Mme(t,"string");return cf(e)=="symbol"?e:e+""}function Mme(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ys=32,QE=(function(t){function e(){return Ame(this,e),Cme(this,e,arguments)}return Rme(e,t),kme(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Ys/2,o=Ys/6,c=Ys/3,d=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ys,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Ys,"M").concat(2*c,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Ys/8,"h").concat(Ys,"v").concat(Ys*3/4,"h").concat(-Ys,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var h=jme({},n);return delete h.legendIcon,se.cloneElement(n.legendIcon,h)}return se.createElement(mw,{fill:d,cx:i,cy:i,size:Ys,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,m={x:0,y:0,width:Ys,height:Ys},p={display:c==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(y,S){var N=y.formatter||d,w=gr(gg(gg({"recharts-legend-item":!0},"legend-item-".concat(S),!0),"inactive",y.inactive));if(y.type==="none")return null;var j=rr(y.value)?null:y.value;nc(!rr(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var k=y.inactive?h:y.color;return se.createElement("li",xj({className:w,style:p,key:"legend-item-".concat(S)},h0(n.props,y,S)),se.createElement(uj,{width:o,height:o,viewBox:m,style:x},n.renderIcon(y)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},N?N(j,y,S):j))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(T.PureComponent);gg(QE,"displayName","Legend");gg(QE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var a6,lP;function Dme(){if(lP)return a6;lP=1;var t=ow();function e(){this.__data__=new t,this.size=0}return a6=e,a6}var i6,cP;function Pme(){if(cP)return i6;cP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return i6=t,i6}var s6,uP;function Lme(){if(uP)return s6;uP=1;function t(e){return this.__data__.get(e)}return s6=t,s6}var o6,dP;function Bme(){if(dP)return o6;dP=1;function t(e){return this.__data__.has(e)}return o6=t,o6}var l6,hP;function $me(){if(hP)return l6;hP=1;var t=ow(),e=zE(),r=UE(),n=200;function a(i,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,o),this.size=c.size,this}return l6=a,l6}var c6,fP;function CW(){if(fP)return c6;fP=1;var t=ow(),e=Dme(),r=Pme(),n=Lme(),a=Bme(),i=$me();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,c6=o,c6}var u6,mP;function zme(){if(mP)return u6;mP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return u6=e,u6}var d6,pP;function Ume(){if(pP)return d6;pP=1;function t(e){return this.__data__.has(e)}return d6=t,d6}var h6,gP;function OW(){if(gP)return h6;gP=1;var t=UE(),e=zme(),r=Ume();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,h6=n,h6}var f6,xP;function IW(){if(xP)return f6;xP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return f6=t,f6}var m6,yP;function RW(){if(yP)return m6;yP=1;function t(e,r){return e.has(r)}return m6=t,m6}var p6,vP;function MW(){if(vP)return p6;vP=1;var t=OW(),e=IW(),r=RW(),n=1,a=2;function i(o,c,d,h,m,p){var x=d&n,y=o.length,S=c.length;if(y!=S&&!(x&&S>y))return!1;var N=p.get(o),w=p.get(c);if(N&&w)return N==c&&w==o;var j=-1,k=!0,I=d&a?new t:void 0;for(p.set(o,c),p.set(c,o);++j<y;){var L=o[j],O=c[j];if(h)var R=x?h(O,L,j,c,o,p):h(L,O,j,o,c,p);if(R!==void 0){if(R)continue;k=!1;break}if(I){if(!e(c,function(A,E){if(!r(I,E)&&(L===A||m(L,A,d,h,p)))return I.push(E)})){k=!1;break}}else if(!(L===O||m(L,O,d,h,p))){k=!1;break}}return p.delete(o),p.delete(c),k}return p6=i,p6}var g6,bP;function Vme(){if(bP)return g6;bP=1;var t=ml(),e=t.Uint8Array;return g6=e,g6}var x6,wP;function Fme(){if(wP)return x6;wP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return x6=t,x6}var y6,SP;function XE(){if(SP)return y6;SP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return y6=t,y6}var v6,NP;function qme(){if(NP)return v6;NP=1;var t=Ex(),e=Vme(),r=$E(),n=MW(),a=Fme(),i=XE(),o=1,c=2,d="[object Boolean]",h="[object Date]",m="[object Error]",p="[object Map]",x="[object Number]",y="[object RegExp]",S="[object Set]",N="[object String]",w="[object Symbol]",j="[object ArrayBuffer]",k="[object DataView]",I=t?t.prototype:void 0,L=I?I.valueOf:void 0;function O(R,A,E,C,U,P,$){switch(E){case k:if(R.byteLength!=A.byteLength||R.byteOffset!=A.byteOffset)return!1;R=R.buffer,A=A.buffer;case j:return!(R.byteLength!=A.byteLength||!P(new e(R),new e(A)));case d:case h:case x:return r(+R,+A);case m:return R.name==A.name&&R.message==A.message;case y:case N:return R==A+"";case p:var B=a;case S:var G=C&o;if(B||(B=i),R.size!=A.size&&!G)return!1;var K=$.get(R);if(K)return K==A;C|=c,$.set(R,A);var H=n(B(R),B(A),C,U,P,$);return $.delete(R),H;case w:if(L)return L.call(R)==L.call(A)}return!1}return v6=O,v6}var b6,_P;function DW(){if(_P)return b6;_P=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return b6=t,b6}var w6,TP;function Hme(){if(TP)return w6;TP=1;var t=DW(),e=ds();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return w6=r,w6}var S6,jP;function Gme(){if(jP)return S6;jP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[i++]=c)}return o}return S6=t,S6}var N6,AP;function Wme(){if(AP)return N6;AP=1;function t(){return[]}return N6=t,N6}var _6,EP;function Kme(){if(EP)return _6;EP=1;var t=Gme(),e=Wme(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return _6=i,_6}var T6,kP;function Qme(){if(kP)return T6;kP=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return T6=t,T6}var j6,CP;function Xme(){if(CP)return j6;CP=1;var t=Sc(),e=Nc(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return j6=n,j6}var A6,OP;function YE(){if(OP)return A6;OP=1;var t=Xme(),e=Nc(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return A6=i,A6}var bp={exports:{}},E6,IP;function Yme(){if(IP)return E6;IP=1;function t(){return!1}return E6=t,E6}bp.exports;var RP;function PW(){return RP||(RP=1,(function(t,e){var r=ml(),n=Yme(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(bp,bp.exports)),bp.exports}var k6,MP;function JE(){if(MP)return k6;MP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return k6=r,k6}var C6,DP;function ZE(){if(DP)return C6;DP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return C6=e,C6}var O6,PP;function Jme(){if(PP)return O6;PP=1;var t=Sc(),e=ZE(),r=Nc(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",m="[object Number]",p="[object Object]",x="[object RegExp]",y="[object Set]",S="[object String]",N="[object WeakMap]",w="[object ArrayBuffer]",j="[object DataView]",k="[object Float32Array]",I="[object Float64Array]",L="[object Int8Array]",O="[object Int16Array]",R="[object Int32Array]",A="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",U="[object Uint32Array]",P={};P[k]=P[I]=P[L]=P[O]=P[R]=P[A]=P[E]=P[C]=P[U]=!0,P[n]=P[a]=P[w]=P[i]=P[j]=P[o]=P[c]=P[d]=P[h]=P[m]=P[p]=P[x]=P[y]=P[S]=P[N]=!1;function $(B){return r(B)&&e(B.length)&&!!P[t(B)]}return O6=$,O6}var I6,LP;function LW(){if(LP)return I6;LP=1;function t(e){return function(r){return e(r)}}return I6=t,I6}var wp={exports:{}};wp.exports;var BP;function Zme(){return BP||(BP=1,(function(t,e){var r=nW(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(wp,wp.exports)),wp.exports}var R6,$P;function BW(){if($P)return R6;$P=1;var t=Jme(),e=LW(),r=Zme(),n=r&&r.isTypedArray,a=n?e(n):t;return R6=a,R6}var M6,zP;function epe(){if(zP)return M6;zP=1;var t=Qme(),e=YE(),r=ds(),n=PW(),a=JE(),i=BW(),o=Object.prototype,c=o.hasOwnProperty;function d(h,m){var p=r(h),x=!p&&e(h),y=!p&&!x&&n(h),S=!p&&!x&&!y&&i(h),N=p||x||y||S,w=N?t(h.length,String):[],j=w.length;for(var k in h)(m||c.call(h,k))&&!(N&&(k=="length"||y&&(k=="offset"||k=="parent")||S&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||a(k,j)))&&w.push(k);return w}return M6=d,M6}var D6,UP;function tpe(){if(UP)return D6;UP=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return D6=e,D6}var P6,VP;function $W(){if(VP)return P6;VP=1;function t(e,r){return function(n){return e(r(n))}}return P6=t,P6}var L6,FP;function rpe(){if(FP)return L6;FP=1;var t=$W(),e=t(Object.keys,Object);return L6=e,L6}var B6,qP;function npe(){if(qP)return B6;qP=1;var t=tpe(),e=rpe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&o.push(c);return o}return B6=a,B6}var $6,HP;function Ox(){if(HP)return $6;HP=1;var t=BE(),e=ZE();function r(n){return n!=null&&e(n.length)&&!t(n)}return $6=r,$6}var z6,GP;function pw(){if(GP)return z6;GP=1;var t=epe(),e=npe(),r=Ox();function n(a){return r(a)?t(a):e(a)}return z6=n,z6}var U6,WP;function ape(){if(WP)return U6;WP=1;var t=Hme(),e=Kme(),r=pw();function n(a){return t(a,r,e)}return U6=n,U6}var V6,KP;function ipe(){if(KP)return V6;KP=1;var t=ape(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,c,d,h,m){var p=c&e,x=t(i),y=x.length,S=t(o),N=S.length;if(y!=N&&!p)return!1;for(var w=y;w--;){var j=x[w];if(!(p?j in o:n.call(o,j)))return!1}var k=m.get(i),I=m.get(o);if(k&&I)return k==o&&I==i;var L=!0;m.set(i,o),m.set(o,i);for(var O=p;++w<y;){j=x[w];var R=i[j],A=o[j];if(d)var E=p?d(A,R,j,o,i,m):d(R,A,j,i,o,m);if(!(E===void 0?R===A||h(R,A,c,d,m):E)){L=!1;break}O||(O=j=="constructor")}if(L&&!O){var C=i.constructor,U=o.constructor;C!=U&&"constructor"in i&&"constructor"in o&&!(typeof C=="function"&&C instanceof C&&typeof U=="function"&&U instanceof U)&&(L=!1)}return m.delete(i),m.delete(o),L}return V6=a,V6}var F6,QP;function spe(){if(QP)return F6;QP=1;var t=_0(),e=ml(),r=t(e,"DataView");return F6=r,F6}var q6,XP;function ope(){if(XP)return q6;XP=1;var t=_0(),e=ml(),r=t(e,"Promise");return q6=r,q6}var H6,YP;function zW(){if(YP)return H6;YP=1;var t=_0(),e=ml(),r=t(e,"Set");return H6=r,H6}var G6,JP;function lpe(){if(JP)return G6;JP=1;var t=_0(),e=ml(),r=t(e,"WeakMap");return G6=r,G6}var W6,ZP;function cpe(){if(ZP)return W6;ZP=1;var t=spe(),e=zE(),r=ope(),n=zW(),a=lpe(),i=Sc(),o=aW(),c="[object Map]",d="[object Object]",h="[object Promise]",m="[object Set]",p="[object WeakMap]",x="[object DataView]",y=o(t),S=o(e),N=o(r),w=o(n),j=o(a),k=i;return(t&&k(new t(new ArrayBuffer(1)))!=x||e&&k(new e)!=c||r&&k(r.resolve())!=h||n&&k(new n)!=m||a&&k(new a)!=p)&&(k=function(I){var L=i(I),O=L==d?I.constructor:void 0,R=O?o(O):"";if(R)switch(R){case y:return x;case S:return c;case N:return h;case w:return m;case j:return p}return L}),W6=k,W6}var K6,eL;function upe(){if(eL)return K6;eL=1;var t=CW(),e=MW(),r=qme(),n=ipe(),a=cpe(),i=ds(),o=PW(),c=BW(),d=1,h="[object Arguments]",m="[object Array]",p="[object Object]",x=Object.prototype,y=x.hasOwnProperty;function S(N,w,j,k,I,L){var O=i(N),R=i(w),A=O?m:a(N),E=R?m:a(w);A=A==h?p:A,E=E==h?p:E;var C=A==p,U=E==p,P=A==E;if(P&&o(N)){if(!o(w))return!1;O=!0,C=!1}if(P&&!C)return L||(L=new t),O||c(N)?e(N,w,j,k,I,L):r(N,w,A,j,k,I,L);if(!(j&d)){var $=C&&y.call(N,"__wrapped__"),B=U&&y.call(w,"__wrapped__");if($||B){var G=$?N.value():N,K=B?w.value():w;return L||(L=new t),I(G,K,j,k,L)}}return P?(L||(L=new t),n(N,w,j,k,I,L)):!1}return K6=S,K6}var Q6,tL;function e7(){if(tL)return Q6;tL=1;var t=upe(),e=Nc();function r(n,a,i,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,c)}return Q6=r,Q6}var X6,rL;function dpe(){if(rL)return X6;rL=1;var t=CW(),e=e7(),r=1,n=2;function a(i,o,c,d){var h=c.length,m=h,p=!d;if(i==null)return!m;for(i=Object(i);h--;){var x=c[h];if(p&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++h<m;){x=c[h];var y=x[0],S=i[y],N=x[1];if(p&&x[2]){if(S===void 0&&!(y in i))return!1}else{var w=new t;if(d)var j=d(S,N,y,i,o,w);if(!(j===void 0?e(N,S,r|n,d,w):j))return!1}}return!0}return X6=a,X6}var Y6,nL;function UW(){if(nL)return Y6;nL=1;var t=Wu();function e(r){return r===r&&!t(r)}return Y6=e,Y6}var J6,aL;function hpe(){if(aL)return J6;aL=1;var t=UW(),e=pw();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],c=n[o];a[i]=[o,c,t(c)]}return a}return J6=r,J6}var Z6,iL;function VW(){if(iL)return Z6;iL=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Z6=t,Z6}var eN,sL;function fpe(){if(sL)return eN;sL=1;var t=dpe(),e=hpe(),r=VW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return eN=n,eN}var tN,oL;function mpe(){if(oL)return tN;oL=1;function t(e,r){return e!=null&&r in Object(e)}return tN=t,tN}var rN,lL;function ppe(){if(lL)return rN;lL=1;var t=oW(),e=YE(),r=ds(),n=JE(),a=ZE(),i=cw();function o(c,d,h){d=t(d,c);for(var m=-1,p=d.length,x=!1;++m<p;){var y=i(d[m]);if(!(x=c!=null&&h(c,y)))break;c=c[y]}return x||++m!=p?x:(p=c==null?0:c.length,!!p&&a(p)&&n(y,p)&&(r(c)||e(c)))}return rN=o,rN}var nN,cL;function gpe(){if(cL)return nN;cL=1;var t=mpe(),e=ppe();function r(n,a){return n!=null&&e(n,a,t)}return nN=r,nN}var aN,uL;function xpe(){if(uL)return aN;uL=1;var t=e7(),e=lW(),r=gpe(),n=LE(),a=UW(),i=VW(),o=cw(),c=1,d=2;function h(m,p){return n(m)&&a(p)?i(o(m),p):function(x){var y=e(x,m);return y===void 0&&y===p?r(x,m):t(p,y,c|d)}}return aN=h,aN}var iN,dL;function Qf(){if(dL)return iN;dL=1;function t(e){return e}return iN=t,iN}var sN,hL;function ype(){if(hL)return sN;hL=1;function t(e){return function(r){return r==null?void 0:r[e]}}return sN=t,sN}var oN,fL;function vpe(){if(fL)return oN;fL=1;var t=FE();function e(r){return function(n){return t(n,r)}}return oN=e,oN}var lN,mL;function bpe(){if(mL)return lN;mL=1;var t=ype(),e=vpe(),r=LE(),n=cw();function a(i){return r(i)?t(n(i)):e(i)}return lN=a,lN}var cN,pL;function pl(){if(pL)return cN;pL=1;var t=fpe(),e=xpe(),r=Qf(),n=ds(),a=bpe();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return cN=i,cN}var uN,gL;function FW(){if(gL)return uN;gL=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return uN=t,uN}var dN,xL;function wpe(){if(xL)return dN;xL=1;function t(e){return e!==e}return dN=t,dN}var hN,yL;function Spe(){if(yL)return hN;yL=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return hN=t,hN}var fN,vL;function Npe(){if(vL)return fN;vL=1;var t=FW(),e=wpe(),r=Spe();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return fN=n,fN}var mN,bL;function _pe(){if(bL)return mN;bL=1;var t=Npe();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return mN=e,mN}var pN,wL;function Tpe(){if(wL)return pN;wL=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return pN=t,pN}var gN,SL;function jpe(){if(SL)return gN;SL=1;function t(){}return gN=t,gN}var xN,NL;function Ape(){if(NL)return xN;NL=1;var t=zW(),e=jpe(),r=XE(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return xN=a,xN}var yN,_L;function Epe(){if(_L)return yN;_L=1;var t=OW(),e=_pe(),r=Tpe(),n=RW(),a=Ape(),i=XE(),o=200;function c(d,h,m){var p=-1,x=e,y=d.length,S=!0,N=[],w=N;if(m)S=!1,x=r;else if(y>=o){var j=h?null:a(d);if(j)return i(j);S=!1,x=n,w=new t}else w=h?[]:N;e:for(;++p<y;){var k=d[p],I=h?h(k):k;if(k=m||k!==0?k:0,S&&I===I){for(var L=w.length;L--;)if(w[L]===I)continue e;h&&w.push(I),N.push(k)}else x(w,I,m)||(w!==N&&w.push(I),N.push(k))}return N}return yN=c,yN}var vN,TL;function kpe(){if(TL)return vN;TL=1;var t=pl(),e=Epe();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return vN=r,vN}var Cpe=kpe();const jL=en(Cpe);function qW(t,e,r){return e===!0?jL(t,r):rr(e)?jL(t,e):t}function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}var Ope=["ref"];function AL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AL(Object(r),!0).forEach(function(n){gw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ipe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GW(n.key),n)}}function Rpe(t,e,r){return e&&EL(t.prototype,e),r&&EL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mpe(t,e,r){return e=gb(e),Dpe(t,HW()?Reflect.construct(e,r||[],gb(t).constructor):e.apply(t,r))}function Dpe(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ppe(t)}function Ppe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HW=function(){return!!t})()}function gb(t){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gb(t)}function Lpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vj(t,e)}function vj(t,e){return vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vj(t,e)}function gw(t,e,r){return e=GW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GW(t){var e=Bpe(t,"string");return uf(e)=="symbol"?e:e+""}function Bpe(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $pe(t,e){if(t==null)return{};var r=zpe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Upe(t){return t.value}function Vpe(t,e){if(se.isValidElement(t))return se.cloneElement(t,e);if(typeof t=="function")return se.createElement(t,e);e.ref;var r=$pe(e,Ope);return se.createElement(QE,r)}var kL=1,Bh=(function(t){function e(){var r;Ipe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Mpe(this,e,[].concat(a)),gw(r,"lastBoundingBox",{width:-1,height:-1}),r}return Lpe(e,t),Rpe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>kL||Math.abs(a.height-this.lastBoundingBox.height)>kL)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Bl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,m=a.chartHeight,p,x;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var y=this.getBBoxSnapshot();p={left:((h||0)-y.width)/2}}else p=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var S=this.getBBoxSnapshot();x={top:((m||0)-S.height)/2}}else x=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Bl(Bl({},p),x)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,m=a.payload,p=Bl(Bl({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return se.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(y){n.wrapperNode=y}},Vpe(i,Bl(Bl({},this.props),{},{payload:qW(m,h,Upe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Bl(Bl({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&yt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(T.PureComponent);gw(Bh,"displayName","Legend");gw(Bh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var bN,CL;function Fpe(){if(CL)return bN;CL=1;var t=Ex(),e=YE(),r=ds(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return bN=a,bN}var wN,OL;function WW(){if(OL)return wN;OL=1;var t=DW(),e=Fpe();function r(n,a,i,o,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var m=n[d];a>0&&i(m)?a>1?r(m,a-1,i,o,c):t(c,m):o||(c[c.length]=m)}return c}return wN=r,wN}var SN,IL;function qpe(){if(IL)return SN;IL=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(o[h],h,o)===!1)break}return r}}return SN=t,SN}var NN,RL;function Hpe(){if(RL)return NN;RL=1;var t=qpe(),e=t();return NN=e,NN}var _N,ML;function KW(){if(ML)return _N;ML=1;var t=Hpe(),e=pw();function r(n,a){return n&&t(n,a,e)}return _N=r,_N}var TN,DL;function Gpe(){if(DL)return TN;DL=1;var t=Ox();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&i(d[c],c,d)!==!1;);return a}}return TN=e,TN}var jN,PL;function t7(){if(PL)return jN;PL=1;var t=KW(),e=Gpe(),r=e(t);return jN=r,jN}var AN,LL;function QW(){if(LL)return AN;LL=1;var t=t7(),e=Ox();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++i]=a(c,d,h)}),o}return AN=r,AN}var EN,BL;function Wpe(){if(BL)return EN;BL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return EN=t,EN}var kN,$L;function Kpe(){if($L)return kN;$L=1;var t=Wf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,m=n===n,p=t(n);if(!h&&!p&&!c&&r>n||c&&d&&m&&!h&&!p||i&&d&&m||!a&&m||!o)return 1;if(!i&&!c&&!p&&r<n||p&&a&&o&&!i&&!c||h&&a&&o||!d&&o||!m)return-1}return 0}return kN=e,kN}var CN,zL;function Qpe(){if(zL)return CN;zL=1;var t=Kpe();function e(r,n,a){for(var i=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++i<d;){var m=t(o[i],c[i]);if(m){if(i>=h)return m;var p=a[i];return m*(p=="desc"?-1:1)}}return r.index-n.index}return CN=e,CN}var ON,UL;function Xpe(){if(UL)return ON;UL=1;var t=VE(),e=FE(),r=pl(),n=QW(),a=Wpe(),i=LW(),o=Qpe(),c=Qf(),d=ds();function h(m,p,x){p.length?p=t(p,function(N){return d(N)?function(w){return e(w,N.length===1?N[0]:N)}:N}):p=[c];var y=-1;p=t(p,i(r));var S=n(m,function(N,w,j){var k=t(p,function(I){return I(N)});return{criteria:k,index:++y,value:N}});return a(S,function(N,w){return o(N,w,x)})}return ON=h,ON}var IN,VL;function Ype(){if(VL)return IN;VL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return IN=t,IN}var RN,FL;function Jpe(){if(FL)return RN;FL=1;var t=Ype(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var m=Array(a+1);++c<a;)m[c]=o[c];return m[a]=i(h),t(n,this,m)}}return RN=r,RN}var MN,qL;function Zpe(){if(qL)return MN;qL=1;function t(e){return function(){return e}}return MN=t,MN}var DN,HL;function XW(){if(HL)return DN;HL=1;var t=_0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return DN=e,DN}var PN,GL;function ege(){if(GL)return PN;GL=1;var t=Zpe(),e=XW(),r=Qf(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return PN=n,PN}var LN,WL;function tge(){if(WL)return LN;WL=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return LN=n,LN}var BN,KL;function rge(){if(KL)return BN;KL=1;var t=ege(),e=tge(),r=e(t);return BN=r,BN}var $N,QL;function nge(){if(QL)return $N;QL=1;var t=Qf(),e=Jpe(),r=rge();function n(a,i){return r(e(a,i,t),a+"")}return $N=n,$N}var zN,XL;function xw(){if(XL)return zN;XL=1;var t=$E(),e=Ox(),r=JE(),n=Wu();function a(i,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],i):!1}return zN=a,zN}var UN,YL;function age(){if(YL)return UN;YL=1;var t=WW(),e=Xpe(),r=nge(),n=xw(),a=r(function(i,o){if(i==null)return[];var c=o.length;return c>1&&n(i,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return UN=a,UN}var ige=age();const r7=en(ige);function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function bj(){return bj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bj.apply(this,arguments)}function sge(t,e){return uge(t)||cge(t,e)||lge(t,e)||oge()}function oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lge(t,e){if(t){if(typeof t=="string")return JL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JL(t,e)}}function JL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function uge(t){if(Array.isArray(t))return t}function ZL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function VN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(r),!0).forEach(function(n){dge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dge(t,e,r){return e=hge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hge(t){var e=fge(t,"string");return xg(e)=="symbol"?e:e+""}function fge(t,e){if(xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mge(t){return Array.isArray(t)&&Va(t[0])&&Va(t[1])?t.join(" ~ "):t}var pge=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,m=e.payload,p=e.formatter,x=e.itemSorter,y=e.wrapperClassName,S=e.labelClassName,N=e.label,w=e.labelFormatter,j=e.accessibilityLayer,k=j===void 0?!1:j,I=function(){if(m&&m.length){var $={padding:0,margin:0},B=(x?r7(m,x):m).map(function(G,K){if(G.type==="none")return null;var H=VN({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},c),Z=G.formatter||p||mge,ae=G.value,he=G.name,fe=ae,Y=he;if(Z&&fe!=null&&Y!=null){var ne=Z(ae,he,G,K,m);if(Array.isArray(ne)){var re=sge(ne,2);fe=re[0],Y=re[1]}else fe=ne}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:H},Va(Y)?se.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Va(Y)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},fe),se.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:$},B)}return null},L=VN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),O=VN({margin:0},h),R=!hr(N),A=R?N:"",E=gr("recharts-default-tooltip",y),C=gr("recharts-tooltip-label",S);R&&w&&m!==void 0&&m!==null&&(A=w(N,m));var U=k?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",bj({className:E,style:L},U),se.createElement("p",{className:C,style:O},se.isValidElement(A)?A:"".concat(A)),I())};function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function Ly(t,e,r){return e=gge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gge(t){var e=xge(t,"string");return yg(e)=="symbol"?e:e+""}function xge(t,e){if(yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var np="recharts-tooltip-wrapper",yge={visibility:"hidden"};function vge(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return gr(np,Ly(Ly(Ly(Ly({},"".concat(np,"-right"),yt(r)&&e&&yt(e.x)&&r>=e.x),"".concat(np,"-left"),yt(r)&&e&&yt(e.x)&&r<e.x),"".concat(np,"-bottom"),yt(n)&&e&&yt(e.y)&&n>=e.y),"".concat(np,"-top"),yt(n)&&e&&yt(e.y)&&n<e.y))}function eB(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&yt(i[n]))return i[n];var m=r[n]-c-a,p=r[n]+a;if(e[n])return o[n]?m:p;if(o[n]){var x=m,y=d[n];return x<y?Math.max(p,d[n]):Math.max(m,d[n])}var S=p+c,N=d[n]+h;return S>N?Math.max(m,d[n]):Math.max(p,d[n])}function bge(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function wge(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,m,p;return o.height>0&&o.width>0&&r?(m=eB({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),p=eB({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=bge({translateX:m,translateY:p,useTranslate3d:c})):h=yge,{cssProperties:h,cssClasses:vge({translateX:m,translateY:p,coordinate:r})}}function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function tB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(r),!0).forEach(function(n){Sj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JW(n.key),n)}}function _ge(t,e,r){return e&&Nge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tge(t,e,r){return e=xb(e),jge(t,YW()?Reflect.construct(e,r||[],xb(t).constructor):e.apply(t,r))}function jge(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Age(t)}function Age(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YW=function(){return!!t})()}function xb(t){return xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xb(t)}function Ege(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wj(t,e)}function wj(t,e){return wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wj(t,e)}function Sj(t,e,r){return e=JW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JW(t){var e=kge(t,"string");return df(e)=="symbol"?e:e+""}function kge(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nB=1,Cge=(function(t){function e(){var r;Sge(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Tge(this,e,[].concat(a)),Sj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Sj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,m;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(m=r.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&h!==void 0?h:0}})}}),r}return Ege(e,t),_ge(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>nB||Math.abs(n.height-this.state.lastBoundingBox.height)>nB)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,m=a.coordinate,p=a.hasPayload,x=a.isAnimationActive,y=a.offset,S=a.position,N=a.reverseDirection,w=a.useTranslate3d,j=a.viewBox,k=a.wrapperStyle,I=wge({allowEscapeViewBox:o,coordinate:m,offsetTopLeft:y,position:S,reverseDirection:N,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:j}),L=I.cssClasses,O=I.cssProperties,R=rB(rB({transition:x&&i?"transform ".concat(c,"ms ").concat(d):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&p?"visible":"hidden",position:"absolute",top:0,left:0},k);return se.createElement("div",{tabIndex:-1,className:L,style:R,ref:function(E){n.wrapperNode=E}},h)}}])})(T.PureComponent),Oge=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},T0={isSsr:Oge()};function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function aB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function iB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aB(Object(r),!0).forEach(function(n){n7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ige(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eK(n.key),n)}}function Mge(t,e,r){return e&&Rge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dge(t,e,r){return e=yb(e),Pge(t,ZW()?Reflect.construct(e,r||[],yb(t).constructor):e.apply(t,r))}function Pge(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lge(t)}function Lge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZW=function(){return!!t})()}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yb(t)}function Bge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nj(t,e)}function Nj(t,e){return Nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Nj(t,e)}function n7(t,e,r){return e=eK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eK(t){var e=$ge(t,"string");return hf(e)=="symbol"?e:e+""}function $ge(t,e){if(hf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zge(t){return t.dataKey}function Uge(t,e){return se.isValidElement(t)?se.cloneElement(t,e):typeof t=="function"?se.createElement(t,e):se.createElement(pge,e)}var Ho=(function(t){function e(){return Ige(this,e),Dge(this,e,arguments)}return Bge(e,t),Mge(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,m=a.coordinate,p=a.filterNull,x=a.isAnimationActive,y=a.offset,S=a.payload,N=a.payloadUniqBy,w=a.position,j=a.reverseDirection,k=a.useTranslate3d,I=a.viewBox,L=a.wrapperStyle,O=S??[];p&&O.length&&(O=qW(S.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),N,zge));var R=O.length>0;return se.createElement(Cge,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:x,active:i,coordinate:m,hasPayload:R,offset:y,position:w,reverseDirection:j,useTranslate3d:k,viewBox:I,wrapperStyle:L},Uge(h,iB(iB({},this.props),{},{payload:O})))}}])})(T.PureComponent);n7(Ho,"displayName","Tooltip");n7(Ho,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!T0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var FN,sB;function Vge(){if(sB)return FN;sB=1;var t=ml(),e=function(){return t.Date.now()};return FN=e,FN}var qN,oB;function Fge(){if(oB)return qN;oB=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return qN=e,qN}var HN,lB;function qge(){if(lB)return HN;lB=1;var t=Fge(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return HN=r,HN}var GN,cB;function tK(){if(cB)return GN;cB=1;var t=qge(),e=Wu(),r=Wf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=e(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=t(h);var p=i.test(h);return p||o.test(h)?c(h.slice(2),p?2:8):a.test(h)?n:+h}return GN=d,GN}var WN,uB;function Hge(){if(uB)return WN;uB=1;var t=Wu(),e=Vge(),r=tK(),n="Expected a function",a=Math.max,i=Math.min;function o(c,d,h){var m,p,x,y,S,N,w=0,j=!1,k=!1,I=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(j=!!h.leading,k="maxWait"in h,x=k?a(r(h.maxWait)||0,d):x,I="trailing"in h?!!h.trailing:I);function L(B){var G=m,K=p;return m=p=void 0,w=B,y=c.apply(K,G),y}function O(B){return w=B,S=setTimeout(E,d),j?L(B):y}function R(B){var G=B-N,K=B-w,H=d-G;return k?i(H,x-K):H}function A(B){var G=B-N,K=B-w;return N===void 0||G>=d||G<0||k&&K>=x}function E(){var B=e();if(A(B))return C(B);S=setTimeout(E,R(B))}function C(B){return S=void 0,I&&m?L(B):(m=p=void 0,y)}function U(){S!==void 0&&clearTimeout(S),w=0,m=N=p=S=void 0}function P(){return S===void 0?y:C(e())}function $(){var B=e(),G=A(B);if(m=arguments,p=this,N=B,G){if(S===void 0)return O(N);if(k)return clearTimeout(S),S=setTimeout(E,d),L(N)}return S===void 0&&(S=setTimeout(E,d)),y}return $.cancel=U,$.flush=P,$}return WN=o,WN}var KN,dB;function Gge(){if(dB)return KN;dB=1;var t=Hge(),e=Wu(),r="Expected a function";function n(a,i,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return KN=n,KN}var Wge=Gge();const rK=en(Wge);function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function hB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function By(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hB(Object(r),!0).forEach(function(n){Kge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kge(t,e,r){return e=Qge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qge(t){var e=Xge(t,"string");return vg(e)=="symbol"?e:e+""}function Xge(t,e){if(vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yge(t,e){return txe(t)||exe(t,e)||Zge(t,e)||Jge()}function Jge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zge(t,e){if(t){if(typeof t=="string")return fB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fB(t,e)}}function fB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function exe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function txe(t){if(Array.isArray(t))return t}var nK=T.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,m=h===void 0?0:h,p=t.minHeight,x=t.maxHeight,y=t.children,S=t.debounce,N=S===void 0?0:S,w=t.id,j=t.className,k=t.onResize,I=t.style,L=I===void 0?{}:I,O=T.useRef(null),R=T.useRef();R.current=k,T.useImperativeHandle(e,function(){return Object.defineProperty(O.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),O.current},configurable:!0})});var A=T.useState({containerWidth:a.width,containerHeight:a.height}),E=Yge(A,2),C=E[0],U=E[1],P=T.useCallback(function(B,G){U(function(K){var H=Math.round(B),Z=Math.round(G);return K.containerWidth===H&&K.containerHeight===Z?K:{containerWidth:H,containerHeight:Z}})},[]);T.useEffect(function(){var B=function(he){var fe,Y=he[0].contentRect,ne=Y.width,re=Y.height;P(ne,re),(fe=R.current)===null||fe===void 0||fe.call(R,ne,re)};N>0&&(B=rK(B,N,{trailing:!0,leading:!1}));var G=new ResizeObserver(B),K=O.current.getBoundingClientRect(),H=K.width,Z=K.height;return P(H,Z),G.observe(O.current),function(){G.disconnect()}},[P,N]);var $=T.useMemo(function(){var B=C.containerWidth,G=C.containerHeight;if(B<0||G<0)return null;nc(Ld(o)||Ld(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),nc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var K=Ld(o)?B:o,H=Ld(d)?G:d;r&&r>0&&(K?H=K/r:H&&(K=H*r),x&&H>x&&(H=x)),nc(K>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,H,o,d,m,p,r);var Z=!Array.isArray(y)&&rc(y.type).endsWith("Chart");return se.Children.map(y,function(ae){return se.isValidElement(ae)?T.cloneElement(ae,By({width:K,height:H},Z?{style:By({height:"100%",width:"100%",maxHeight:H,maxWidth:K},ae.props.style)}:{})):ae})},[r,y,d,x,p,m,C,o]);return se.createElement("div",{id:w?"".concat(w):void 0,className:gr("recharts-responsive-container",j),style:By(By({},L),{},{width:o,height:d,minWidth:m,minHeight:p,maxHeight:x}),ref:O},$)}),a7=function(e){return null};a7.displayName="Cell";function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function mB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _j(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mB(Object(r),!0).forEach(function(n){rxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rxe(t,e,r){return e=nxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nxe(t){var e=axe(t,"string");return bg(e)=="symbol"?e:e+""}function axe(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fh={widthCache:{},cacheCount:0},ixe=2e3,sxe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},pB="recharts_measurement_span";function oxe(t){var e=_j({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Mp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||T0.isSsr)return{width:0,height:0};var n=oxe(r),a=JSON.stringify({text:e,copyStyle:n});if(fh.widthCache[a])return fh.widthCache[a];try{var i=document.getElementById(pB);i||(i=document.createElement("span"),i.setAttribute("id",pB),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=_j(_j({},sxe),n);Object.assign(i.style,o),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return fh.widthCache[a]=d,++fh.cacheCount>ixe&&(fh.cacheCount=0,fh.widthCache={}),d}catch{return{width:0,height:0}}},lxe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function vb(t,e){return hxe(t)||dxe(t,e)||uxe(t,e)||cxe()}function cxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uxe(t,e){if(t){if(typeof t=="string")return gB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gB(t,e)}}function gB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function hxe(t){if(Array.isArray(t))return t}function fxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pxe(n.key),n)}}function mxe(t,e,r){return e&&xB(t.prototype,e),r&&xB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function pxe(t){var e=gxe(t,"string");return wg(e)=="symbol"?e:e+""}function gxe(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xxe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yxe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,aK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vxe=Object.keys(aK),_h="NaN";function bxe(t,e){return t*aK[e]}var $y=(function(){function t(e,r){fxe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!xxe.test(r)&&(this.num=NaN,this.unit=""),vxe.includes(r)&&(this.num=bxe(e,r),this.unit="px")}return mxe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=yxe.exec(r))!==null&&n!==void 0?n:[],i=vb(a,3),o=i[1],c=i[2];return new t(parseFloat(o),c??"")}}])})();function iK(t){if(t.includes(_h))return _h;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=yB.exec(e))!==null&&r!==void 0?r:[],a=vb(n,4),i=a[1],o=a[2],c=a[3],d=$y.parse(i??""),h=$y.parse(c??""),m=o==="*"?d.multiply(h):d.divide(h);if(m.isNaN())return _h;e=e.replace(yB,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,x=(p=vB.exec(e))!==null&&p!==void 0?p:[],y=vb(x,4),S=y[1],N=y[2],w=y[3],j=$y.parse(S??""),k=$y.parse(w??""),I=N==="+"?j.add(k):j.subtract(k);if(I.isNaN())return _h;e=e.replace(vB,I.toString())}return e}var bB=/\(([^()]*)\)/;function wxe(t){for(var e=t;e.includes("(");){var r=bB.exec(e),n=vb(r,2),a=n[1];e=e.replace(bB,iK(a))}return e}function Sxe(t){var e=t.replace(/\s+/g,"");return e=wxe(e),e=iK(e),e}function Nxe(t){try{return Sxe(t)}catch{return _h}}function QN(t){var e=Nxe(t.slice(5,-1));return e===_h?"":e}var _xe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Txe=["dx","dy","angle","className","breakAll"];function Tj(){return Tj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tj.apply(this,arguments)}function wB(t,e){if(t==null)return{};var r=jxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function SB(t,e){return Cxe(t)||kxe(t,e)||Exe(t,e)||Axe()}function Axe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Exe(t,e){if(t){if(typeof t=="string")return NB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NB(t,e)}}function NB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Cxe(t){if(Array.isArray(t))return t}var sK=/[ \f\n\r\t\v\u2028\u2029]+/,oK=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];hr(r)||(n?i=r.toString().split(""):i=r.toString().split(sK));var o=i.map(function(d){return{word:d,width:Mp(d,a).width}}),c=n?0:Mp("",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},Oxe=function(e,r,n,a,i){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,m=yt(o),p=c,x=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(H,Z){var ae=Z.word,he=Z.width,fe=H[H.length-1];if(fe&&(a==null||i||fe.width+he+n<Number(a)))fe.words.push(ae),fe.width+=he+n;else{var Y={words:[ae],width:he};H.push(Y)}return H},[])},y=x(r),S=function(K){return K.reduce(function(H,Z){return H.width>Z.width?H:Z})};if(!m)return y;for(var N="",w=function(K){var H=p.slice(0,K),Z=oK({breakAll:h,style:d,children:H+N}).wordsWithComputedWidth,ae=x(Z),he=ae.length>o||S(ae).width>Number(a);return[he,ae]},j=0,k=p.length-1,I=0,L;j<=k&&I<=p.length-1;){var O=Math.floor((j+k)/2),R=O-1,A=w(R),E=SB(A,2),C=E[0],U=E[1],P=w(O),$=SB(P,1),B=$[0];if(!C&&!B&&(j=O+1),C&&B&&(k=O-1),!C&&B){L=U;break}I++}return L||y},_B=function(e){var r=hr(e)?[]:e.toString().split(sK);return[{words:r}]},Ixe=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!T0.isSsr){var d,h,m=oK({breakAll:o,children:a,style:i});if(m){var p=m.wordsWithComputedWidth,x=m.spaceWidth;d=p,h=x}else return _B(a);return Oxe({breakAll:o,children:a,maxLines:c,style:i},d,h,r,n)}return _B(a)},TB="#808080",ff=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,m=e.scaleToFit,p=m===void 0?!1:m,x=e.textAnchor,y=x===void 0?"start":x,S=e.verticalAnchor,N=S===void 0?"end":S,w=e.fill,j=w===void 0?TB:w,k=wB(e,_xe),I=T.useMemo(function(){return Ixe({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:p,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,p,k.style,k.width]),L=k.dx,O=k.dy,R=k.angle,A=k.className,E=k.breakAll,C=wB(k,Txe);if(!Va(n)||!Va(i))return null;var U=n+(yt(L)?L:0),P=i+(yt(O)?O:0),$;switch(N){case"start":$=QN("calc(".concat(h,")"));break;case"middle":$=QN("calc(".concat((I.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:$=QN("calc(".concat(I.length-1," * -").concat(c,")"));break}var B=[];if(p){var G=I[0].width,K=k.width;B.push("scale(".concat((yt(K)?K/G:1)/G,")"))}return R&&B.push("rotate(".concat(R,", ").concat(U,", ").concat(P,")")),B.length&&(C.transform=B.join(" ")),se.createElement("text",Tj({},Ft(C,!0),{x:U,y:P,className:gr("recharts-text",A),textAnchor:y,fill:j.includes("url")?TB:j}),I.map(function(H,Z){var ae=H.words.join(E?"":" ");return se.createElement("tspan",{x:U,dy:Z===0?$:c,key:"".concat(ae,"-").concat(Z)},ae)}))};function Ou(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rxe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function i7(t){let e,r,n;t.length!==2?(e=Ou,r=(c,d)=>Ou(t(c),d),n=(c,d)=>t(c)-d):(e=t===Ou||t===Rxe?t:Mxe,r=t,n=t);function a(c,d,h=0,m=c.length){if(h<m){if(e(d,d)!==0)return m;do{const p=h+m>>>1;r(c[p],d)<0?h=p+1:m=p}while(h<m)}return h}function i(c,d,h=0,m=c.length){if(h<m){if(e(d,d)!==0)return m;do{const p=h+m>>>1;r(c[p],d)<=0?h=p+1:m=p}while(h<m)}return h}function o(c,d,h=0,m=c.length){const p=a(c,d,h,m-1);return p>h&&n(c[p-1],d)>-n(c[p],d)?p-1:p}return{left:a,center:o,right:i}}function Mxe(){return 0}function lK(t){return t===null?NaN:+t}function*Dxe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Pxe=i7(Ou),Ix=Pxe.right;i7(lK).center;class jB extends Map{constructor(e,r=$xe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(AB(this,e))}has(e){return super.has(AB(this,e))}set(e,r){return super.set(Lxe(this,e),r)}delete(e){return super.delete(Bxe(this,e))}}function AB({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Lxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Bxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function $xe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function zxe(t=Ou){if(t===Ou)return cK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function cK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Uxe=Math.sqrt(50),Vxe=Math.sqrt(10),Fxe=Math.sqrt(2);function bb(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Uxe?10:i>=Vxe?5:i>=Fxe?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?bb(t,e,r*2):[c,d,h]}function jj(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?bb(e,t,r):bb(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(i-h)/-o;else for(let h=0;h<c;++h)d[h]=(i-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function Aj(t,e,r){return e=+e,t=+t,r=+r,bb(t,e,r)[2]}function Ej(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Aj(e,t,r):Aj(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function EB(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function kB(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function uK(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?cK:zxe(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,m=Math.log(d),p=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*p*(d-p)/d)*(h-d/2<0?-1:1),y=Math.max(r,Math.floor(e-h*p/d+x)),S=Math.min(n,Math.floor(e+(d-h)*p/d+x));uK(t,e,y,S,a)}const i=t[e];let o=r,c=n;for(ap(t,r,e),a(t[n],i)>0&&ap(t,r,n);o<c;){for(ap(t,o,c),++o,--c;a(t[o],i)<0;)++o;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?ap(t,r,c):(++c,ap(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function ap(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function qxe(t,e,r){if(t=Float64Array.from(Dxe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return kB(t);if(e>=1)return EB(t);var n,a=(n-1)*e,i=Math.floor(a),o=EB(uK(t,i).subarray(0,i+1)),c=kB(t.subarray(i+1));return o+(c-o)*(a-i)}}function Hxe(t,e,r=lK){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return o+(c-o)*(a-i)}}function Gxe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function ho(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _c(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const kj=Symbol("implicit");function s7(){var t=new jB,e=[],r=[],n=kj;function a(i){let o=t.get(i);if(o===void 0){if(n!==kj)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new jB;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return s7(e,r).unknown(n)},ho.apply(a,arguments),a}function Sg(){var t=s7().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,c=!1,d=0,h=0,m=.5;delete t.unknown;function p(){var x=e().length,y=a<n,S=y?a:n,N=y?n:a;i=(N-S)/Math.max(1,x-d+h*2),c&&(i=Math.floor(i)),S+=(N-S-i*(x-d))*m,o=i*(1-d),c&&(S=Math.round(S),o=Math.round(o));var w=Gxe(x).map(function(j){return S+i*j});return r(y?w.reverse():w)}return t.domain=function(x){return arguments.length?(e(x),p()):e()},t.range=function(x){return arguments.length?([n,a]=x,n=+n,a=+a,p()):[n,a]},t.rangeRound=function(x){return[n,a]=x,n=+n,a=+a,c=!0,p()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(x){return arguments.length?(c=!!x,p()):c},t.padding=function(x){return arguments.length?(d=Math.min(1,h=+x),p()):d},t.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),p()):d},t.paddingOuter=function(x){return arguments.length?(h=+x,p()):h},t.align=function(x){return arguments.length?(m=Math.max(0,Math.min(1,x)),p()):m},t.copy=function(){return Sg(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(m)},ho.apply(p(),arguments)}function dK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return dK(e())},t}function Dp(){return dK(Sg.apply(null,arguments).paddingInner(1))}function o7(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function hK(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Rx(){}var Ng=.7,wb=1/Ng,$h="\\s*([+-]?\\d+)\\s*",_g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wxe=/^#([0-9a-f]{3,8})$/,Kxe=new RegExp(`^rgb\\(${$h},${$h},${$h}\\)$`),Qxe=new RegExp(`^rgb\\(${tl},${tl},${tl}\\)$`),Xxe=new RegExp(`^rgba\\(${$h},${$h},${$h},${_g}\\)$`),Yxe=new RegExp(`^rgba\\(${tl},${tl},${tl},${_g}\\)$`),Jxe=new RegExp(`^hsl\\(${_g},${tl},${tl}\\)$`),Zxe=new RegExp(`^hsla\\(${_g},${tl},${tl},${_g}\\)$`),CB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o7(Rx,Tg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:OB,formatHex:OB,formatHex8:e1e,formatHsl:t1e,formatRgb:IB,toString:IB});function OB(){return this.rgb().formatHex()}function e1e(){return this.rgb().formatHex8()}function t1e(){return fK(this).formatHsl()}function IB(){return this.rgb().formatRgb()}function Tg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Wxe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?RB(e):r===3?new is(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?zy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?zy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Kxe.exec(t))?new is(e[1],e[2],e[3],1):(e=Qxe.exec(t))?new is(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Xxe.exec(t))?zy(e[1],e[2],e[3],e[4]):(e=Yxe.exec(t))?zy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Jxe.exec(t))?PB(e[1],e[2]/100,e[3]/100,1):(e=Zxe.exec(t))?PB(e[1],e[2]/100,e[3]/100,e[4]):CB.hasOwnProperty(t)?RB(CB[t]):t==="transparent"?new is(NaN,NaN,NaN,0):null}function RB(t){return new is(t>>16&255,t>>8&255,t&255,1)}function zy(t,e,r,n){return n<=0&&(t=e=r=NaN),new is(t,e,r,n)}function r1e(t){return t instanceof Rx||(t=Tg(t)),t?(t=t.rgb(),new is(t.r,t.g,t.b,t.opacity)):new is}function Cj(t,e,r,n){return arguments.length===1?r1e(t):new is(t,e,r,n??1)}function is(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}o7(is,Cj,hK(Rx,{brighter(t){return t=t==null?wb:Math.pow(wb,t),new is(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ng:Math.pow(Ng,t),new is(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new is(Wd(this.r),Wd(this.g),Wd(this.b),Sb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MB,formatHex:MB,formatHex8:n1e,formatRgb:DB,toString:DB}));function MB(){return`#${Bd(this.r)}${Bd(this.g)}${Bd(this.b)}`}function n1e(){return`#${Bd(this.r)}${Bd(this.g)}${Bd(this.b)}${Bd((isNaN(this.opacity)?1:this.opacity)*255)}`}function DB(){const t=Sb(this.opacity);return`${t===1?"rgb(":"rgba("}${Wd(this.r)}, ${Wd(this.g)}, ${Wd(this.b)}${t===1?")":`, ${t})`}`}function Sb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bd(t){return t=Wd(t),(t<16?"0":"")+t.toString(16)}function PB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new _o(t,e,r,n)}function fK(t){if(t instanceof _o)return new _o(t.h,t.s,t.l,t.opacity);if(t instanceof Rx||(t=Tg(t)),!t)return new _o;if(t instanceof _o)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(e===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new _o(o,c,d,t.opacity)}function a1e(t,e,r,n){return arguments.length===1?fK(t):new _o(t,e,r,n??1)}function _o(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}o7(_o,a1e,hK(Rx,{brighter(t){return t=t==null?wb:Math.pow(wb,t),new _o(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ng:Math.pow(Ng,t),new _o(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new is(XN(t>=240?t-240:t+120,a,n),XN(t,a,n),XN(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new _o(LB(this.h),Uy(this.s),Uy(this.l),Sb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Sb(this.opacity);return`${t===1?"hsl(":"hsla("}${LB(this.h)}, ${Uy(this.s)*100}%, ${Uy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function LB(t){return t=(t||0)%360,t<0?t+360:t}function Uy(t){return Math.max(0,Math.min(1,t||0))}function XN(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const l7=t=>()=>t;function i1e(t,e){return function(r){return t+r*e}}function s1e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function o1e(t){return(t=+t)==1?mK:function(e,r){return r-e?s1e(e,r,t):l7(isNaN(e)?r:e)}}function mK(t,e){var r=e-t;return r?i1e(t,r):l7(isNaN(t)?e:t)}const BB=(function t(e){var r=o1e(e);function n(a,i){var o=r((a=Cj(a)).r,(i=Cj(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=mK(a.opacity,i.opacity);return function(m){return a.r=o(m),a.g=c(m),a.b=d(m),a.opacity=h(m),a+""}}return n.gamma=t,n})(1);function l1e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function c1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function u1e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Xf(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function d1e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Nb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function h1e(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Xf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Oj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,YN=new RegExp(Oj.source,"g");function f1e(t){return function(){return t}}function m1e(t){return function(e){return t(e)+""}}function p1e(t,e){var r=Oj.lastIndex=YN.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=Oj.exec(t))&&(a=YN.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:Nb(n,a)})),r=YN.lastIndex;return r<e.length&&(i=e.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?m1e(d[0].x):f1e(e):(e=d.length,function(h){for(var m=0,p;m<e;++m)c[(p=d[m]).i]=p.x(h);return c.join("")})}function Xf(t,e){var r=typeof e,n;return e==null||r==="boolean"?l7(e):(r==="number"?Nb:r==="string"?(n=Tg(e))?(e=n,BB):p1e:e instanceof Tg?BB:e instanceof Date?d1e:c1e(e)?l1e:Array.isArray(e)?u1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?h1e:Nb)(t,e)}function c7(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function g1e(t,e){e===void 0&&(e=t,t=Xf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function x1e(t){return function(){return t}}function _b(t){return+t}var $B=[0,1];function Bi(t){return t}function Ij(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:x1e(isNaN(e)?NaN:.5)}function y1e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function v1e(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=Ij(a,n),i=r(o,i)):(n=Ij(n,a),i=r(i,o)),function(c){return i(n(c))}}function b1e(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=Ij(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(c){var d=Ix(t,c,1,n)-1;return i[d](a[d](c))}}function Mx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yw(){var t=$B,e=$B,r=Xf,n,a,i,o=Bi,c,d,h;function m(){var x=Math.min(t.length,e.length);return o!==Bi&&(o=y1e(t[0],t[x-1])),c=x>2?b1e:v1e,d=h=null,p}function p(x){return x==null||isNaN(x=+x)?i:(d||(d=c(t.map(n),e,r)))(n(o(x)))}return p.invert=function(x){return o(a((h||(h=c(e,t.map(n),Nb)))(x)))},p.domain=function(x){return arguments.length?(t=Array.from(x,_b),m()):t.slice()},p.range=function(x){return arguments.length?(e=Array.from(x),m()):e.slice()},p.rangeRound=function(x){return e=Array.from(x),r=c7,m()},p.clamp=function(x){return arguments.length?(o=x?!0:Bi,m()):o!==Bi},p.interpolate=function(x){return arguments.length?(r=x,m()):r},p.unknown=function(x){return arguments.length?(i=x,p):i},function(x,y){return n=x,a=y,m()}}function u7(){return yw()(Bi,Bi)}function w1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Tb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function mf(t){return t=Tb(Math.abs(t)),t?t[1]:NaN}function S1e(t,e){return function(r,n){for(var a=r.length,i=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return i.reverse().join(e)}}function N1e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var _1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jg(t){if(!(e=_1e.exec(t)))throw new Error("invalid format: "+t);var e;return new d7({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}jg.prototype=d7.prototype;function d7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}d7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function T1e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var jb;function j1e(t,e){var r=Tb(t,e);if(!r)return jb=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(jb=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Tb(t,Math.max(0,e+i-1))[0]}function zB(t,e){var r=Tb(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const UB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:w1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>zB(t*100,e),r:zB,s:j1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function VB(t){return t}var FB=Array.prototype.map,qB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function A1e(t){var e=t.grouping===void 0||t.thousands===void 0?VB:S1e(FB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?VB:N1e(FB.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(p,x){p=jg(p);var y=p.fill,S=p.align,N=p.sign,w=p.symbol,j=p.zero,k=p.width,I=p.comma,L=p.precision,O=p.trim,R=p.type;R==="n"?(I=!0,R="g"):UB[R]||(L===void 0&&(L=12),O=!0,R="g"),(j||y==="0"&&S==="=")&&(j=!0,y="0",S="=");var A=(x&&x.prefix!==void 0?x.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():""),E=(w==="$"?n:/[%p]/.test(R)?o:"")+(x&&x.suffix!==void 0?x.suffix:""),C=UB[R],U=/[defgprs%]/.test(R);L=L===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function P($){var B=A,G=E,K,H,Z;if(R==="c")G=C($)+G,$="";else{$=+$;var ae=$<0||1/$<0;if($=isNaN($)?d:C(Math.abs($),L),O&&($=T1e($)),ae&&+$==0&&N!=="+"&&(ae=!1),B=(ae?N==="("?N:c:N==="-"||N==="("?"":N)+B,G=(R==="s"&&!isNaN($)&&jb!==void 0?qB[8+jb/3]:"")+G+(ae&&N==="("?")":""),U){for(K=-1,H=$.length;++K<H;)if(Z=$.charCodeAt(K),48>Z||Z>57){G=(Z===46?a+$.slice(K+1):$.slice(K))+G,$=$.slice(0,K);break}}}I&&!j&&($=e($,1/0));var he=B.length+$.length+G.length,fe=he<k?new Array(k-he+1).join(y):"";switch(I&&j&&($=e(fe+$,fe.length?k-G.length:1/0),fe=""),S){case"<":$=B+$+G+fe;break;case"=":$=B+fe+$+G;break;case"^":$=fe.slice(0,he=fe.length>>1)+B+$+G+fe.slice(he);break;default:$=fe+B+$+G;break}return i($)}return P.toString=function(){return p+""},P}function m(p,x){var y=Math.max(-8,Math.min(8,Math.floor(mf(x)/3)))*3,S=Math.pow(10,-y),N=h((p=jg(p),p.type="f",p),{suffix:qB[8+y/3]});return function(w){return N(S*w)}}return{format:h,formatPrefix:m}}var Vy,h7,pK;E1e({thousands:",",grouping:[3],currency:["$",""]});function E1e(t){return Vy=A1e(t),h7=Vy.format,pK=Vy.formatPrefix,Vy}function k1e(t){return Math.max(0,-mf(Math.abs(t)))}function C1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mf(e)/3)))*3-mf(Math.abs(t)))}function O1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mf(e)-mf(t))+1}function gK(t,e,r,n){var a=Ej(t,e,r),i;switch(n=jg(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=C1e(a,o))&&(n.precision=i),pK(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=O1e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=k1e(a))&&(n.precision=i-(n.type==="%")*2);break}}return h7(n)}function Ku(t){var e=t.domain;return t.ticks=function(r){var n=e();return jj(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return gK(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],c=n[i],d,h,m=10;for(c<o&&(h=o,o=c,c=h,h=a,a=i,i=h);m-- >0;){if(h=Aj(o,c,r),h===d)return n[a]=o,n[i]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function Ab(){var t=u7();return t.copy=function(){return Mx(t,Ab())},ho.apply(t,arguments),Ku(t)}function xK(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,_b),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return xK(t).unknown(e)},t=arguments.length?Array.from(t,_b):[0,1],Ku(r)}function yK(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function HB(t){return Math.log(t)}function GB(t){return Math.exp(t)}function I1e(t){return-Math.log(-t)}function R1e(t){return-Math.exp(-t)}function M1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function D1e(t){return t===10?M1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function P1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function WB(t){return(e,r)=>-t(-e,r)}function f7(t){const e=t(HB,GB),r=e.domain;let n=10,a,i;function o(){return a=P1e(n),i=D1e(n),r()[0]<0?(a=WB(a),i=WB(i),t(I1e,R1e)):t(HB,GB),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],m=d[d.length-1];const p=m<h;p&&([h,m]=[m,h]);let x=a(h),y=a(m),S,N;const w=c==null?10:+c;let j=[];if(!(n%1)&&y-x<w){if(x=Math.floor(x),y=Math.ceil(y),h>0){for(;x<=y;++x)for(S=1;S<n;++S)if(N=x<0?S/i(-x):S*i(x),!(N<h)){if(N>m)break;j.push(N)}}else for(;x<=y;++x)for(S=n-1;S>=1;--S)if(N=x>0?S/i(-x):S*i(x),!(N<h)){if(N>m)break;j.push(N)}j.length*2<w&&(j=jj(h,m,w))}else j=jj(x,y,Math.min(y-x,w)).map(i);return p?j.reverse():j},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=jg(d)).precision==null&&(d.trim=!0),d=h7(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return m=>{let p=m/i(Math.round(a(m)));return p*n<n-.5&&(p*=n),p<=h?d(m):""}},e.nice=()=>r(yK(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function vK(){const t=f7(yw()).domain([1,10]);return t.copy=()=>Mx(t,vK()).base(t.base()),ho.apply(t,arguments),t}function KB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function QB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function m7(t){var e=1,r=t(KB(e),QB(e));return r.constant=function(n){return arguments.length?t(KB(e=+n),QB(e)):e},Ku(r)}function bK(){var t=m7(yw());return t.copy=function(){return Mx(t,bK()).constant(t.constant())},ho.apply(t,arguments)}function XB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function L1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function B1e(t){return t<0?-t*t:t*t}function p7(t){var e=t(Bi,Bi),r=1;function n(){return r===1?t(Bi,Bi):r===.5?t(L1e,B1e):t(XB(r),XB(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Ku(e)}function g7(){var t=p7(yw());return t.copy=function(){return Mx(t,g7()).exponent(t.exponent())},ho.apply(t,arguments),t}function $1e(){return g7.apply(null,arguments).exponent(.5)}function YB(t){return Math.sign(t)*t*t}function z1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function wK(){var t=u7(),e=[0,1],r=!1,n;function a(i){var o=z1e(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(YB(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,_b)).map(YB)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return wK(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},ho.apply(a,arguments),Ku(a)}function SK(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=Hxe(t,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:e[Ix(r,o)]}return i.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Ou),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return SK().domain(t).range(e).unknown(n)},ho.apply(i,arguments)}function NK(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[Ix(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return NK().domain([t,e]).range(a).unknown(i)},ho.apply(Ku(o),arguments)}function _K(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[Ix(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return _K().domain(t).range(e).unknown(r)},ho.apply(a,arguments)}const JN=new Date,ZN=new Date;function Wa(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<o);return d},a.filter=i=>Wa(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!i(o););else for(;--c>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(JN.setTime(+i),ZN.setTime(+o),t(JN),t(ZN),Math.floor(r(JN,ZN))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Eb=Wa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Eb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wa(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Eb);Eb.range;const Xl=1e3,to=Xl*60,Yl=to*60,mc=Yl*24,x7=mc*7,JB=mc*30,e_=mc*365,$d=Wa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Xl)},(t,e)=>(e-t)/Xl,t=>t.getUTCSeconds());$d.range;const y7=Wa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xl)},(t,e)=>{t.setTime(+t+e*to)},(t,e)=>(e-t)/to,t=>t.getMinutes());y7.range;const v7=Wa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*to)},(t,e)=>(e-t)/to,t=>t.getUTCMinutes());v7.range;const b7=Wa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xl-t.getMinutes()*to)},(t,e)=>{t.setTime(+t+e*Yl)},(t,e)=>(e-t)/Yl,t=>t.getHours());b7.range;const w7=Wa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Yl)},(t,e)=>(e-t)/Yl,t=>t.getUTCHours());w7.range;const Dx=Wa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*to)/mc,t=>t.getDate()-1);Dx.range;const vw=Wa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/mc,t=>t.getUTCDate()-1);vw.range;const TK=Wa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/mc,t=>Math.floor(t/mc));TK.range;function j0(t){return Wa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*to)/x7)}const bw=j0(0),kb=j0(1),U1e=j0(2),V1e=j0(3),pf=j0(4),F1e=j0(5),q1e=j0(6);bw.range;kb.range;U1e.range;V1e.range;pf.range;F1e.range;q1e.range;function A0(t){return Wa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/x7)}const ww=A0(0),Cb=A0(1),H1e=A0(2),G1e=A0(3),gf=A0(4),W1e=A0(5),K1e=A0(6);ww.range;Cb.range;H1e.range;G1e.range;gf.range;W1e.range;K1e.range;const S7=Wa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());S7.range;const N7=Wa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());N7.range;const pc=Wa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());pc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});pc.range;const gc=Wa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});gc.range;function jK(t,e,r,n,a,i){const o=[[$d,1,Xl],[$d,5,5*Xl],[$d,15,15*Xl],[$d,30,30*Xl],[i,1,to],[i,5,5*to],[i,15,15*to],[i,30,30*to],[a,1,Yl],[a,3,3*Yl],[a,6,6*Yl],[a,12,12*Yl],[n,1,mc],[n,2,2*mc],[r,1,x7],[e,1,JB],[e,3,3*JB],[t,1,e_]];function c(h,m,p){const x=m<h;x&&([h,m]=[m,h]);const y=p&&typeof p.range=="function"?p:d(h,m,p),S=y?y.range(h,+m+1):[];return x?S.reverse():S}function d(h,m,p){const x=Math.abs(m-h)/p,y=i7(([,,w])=>w).right(o,x);if(y===o.length)return t.every(Ej(h/e_,m/e_,p));if(y===0)return Eb.every(Math.max(Ej(h,m,p),1));const[S,N]=o[x/o[y-1][2]<o[y][2]/x?y-1:y];return S.every(N)}return[c,d]}const[Q1e,X1e]=jK(gc,N7,ww,TK,w7,v7),[Y1e,J1e]=jK(pc,S7,bw,Dx,b7,y7);function t_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ip(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Z1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=sp(a),m=op(a),p=sp(i),x=op(i),y=sp(o),S=op(o),N=sp(c),w=op(c),j=sp(d),k=op(d),I={a:Z,A:ae,b:he,B:fe,c:null,d:a$,e:a$,f:Sye,g:Iye,G:Mye,H:vye,I:bye,j:wye,L:AK,m:Nye,M:_ye,p:Y,q:ne,Q:o$,s:l$,S:Tye,u:jye,U:Aye,V:Eye,w:kye,W:Cye,x:null,X:null,y:Oye,Y:Rye,Z:Dye,"%":s$},L={a:re,A:xe,b:Te,B:Ve,c:null,d:i$,e:i$,f:$ye,g:Qye,G:Yye,H:Pye,I:Lye,j:Bye,L:kK,m:zye,M:Uye,p:Ze,q:Xe,Q:o$,s:l$,S:Vye,u:Fye,U:qye,V:Hye,w:Gye,W:Wye,x:null,X:null,y:Kye,Y:Xye,Z:Jye,"%":s$},O={a:U,A:P,b:$,B,c:G,d:r$,e:r$,f:pye,g:t$,G:e$,H:n$,I:n$,j:dye,L:mye,m:uye,M:hye,p:C,q:cye,Q:xye,s:yye,S:fye,u:aye,U:iye,V:sye,w:nye,W:oye,x:K,X:H,y:t$,Y:e$,Z:lye,"%":gye};I.x=R(r,I),I.X=R(n,I),I.c=R(e,I),L.x=R(r,L),L.X=R(n,L),L.c=R(e,L);function R(ie,Be){return function(Q){var te=[],Ne=-1,Se=0,Qe=ie.length,nt,Ot,Me;for(Q instanceof Date||(Q=new Date(+Q));++Ne<Qe;)ie.charCodeAt(Ne)===37&&(te.push(ie.slice(Se,Ne)),(Ot=ZB[nt=ie.charAt(++Ne)])!=null?nt=ie.charAt(++Ne):Ot=nt==="e"?" ":"0",(Me=Be[nt])&&(nt=Me(Q,Ot)),te.push(nt),Se=Ne+1);return te.push(ie.slice(Se,Ne)),te.join("")}}function A(ie,Be){return function(Q){var te=ip(1900,void 0,1),Ne=E(te,ie,Q+="",0),Se,Qe;if(Ne!=Q.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Be&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(Se=r_(ip(te.y,0,1)),Qe=Se.getUTCDay(),Se=Qe>4||Qe===0?Cb.ceil(Se):Cb(Se),Se=vw.offset(Se,(te.V-1)*7),te.y=Se.getUTCFullYear(),te.m=Se.getUTCMonth(),te.d=Se.getUTCDate()+(te.w+6)%7):(Se=t_(ip(te.y,0,1)),Qe=Se.getDay(),Se=Qe>4||Qe===0?kb.ceil(Se):kb(Se),Se=Dx.offset(Se,(te.V-1)*7),te.y=Se.getFullYear(),te.m=Se.getMonth(),te.d=Se.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Qe="Z"in te?r_(ip(te.y,0,1)).getUTCDay():t_(ip(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Qe+5)%7:te.w+te.U*7-(Qe+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,r_(te)):t_(te)}}function E(ie,Be,Q,te){for(var Ne=0,Se=Be.length,Qe=Q.length,nt,Ot;Ne<Se;){if(te>=Qe)return-1;if(nt=Be.charCodeAt(Ne++),nt===37){if(nt=Be.charAt(Ne++),Ot=O[nt in ZB?Be.charAt(Ne++):nt],!Ot||(te=Ot(ie,Q,te))<0)return-1}else if(nt!=Q.charCodeAt(te++))return-1}return te}function C(ie,Be,Q){var te=h.exec(Be.slice(Q));return te?(ie.p=m.get(te[0].toLowerCase()),Q+te[0].length):-1}function U(ie,Be,Q){var te=y.exec(Be.slice(Q));return te?(ie.w=S.get(te[0].toLowerCase()),Q+te[0].length):-1}function P(ie,Be,Q){var te=p.exec(Be.slice(Q));return te?(ie.w=x.get(te[0].toLowerCase()),Q+te[0].length):-1}function $(ie,Be,Q){var te=j.exec(Be.slice(Q));return te?(ie.m=k.get(te[0].toLowerCase()),Q+te[0].length):-1}function B(ie,Be,Q){var te=N.exec(Be.slice(Q));return te?(ie.m=w.get(te[0].toLowerCase()),Q+te[0].length):-1}function G(ie,Be,Q){return E(ie,e,Be,Q)}function K(ie,Be,Q){return E(ie,r,Be,Q)}function H(ie,Be,Q){return E(ie,n,Be,Q)}function Z(ie){return o[ie.getDay()]}function ae(ie){return i[ie.getDay()]}function he(ie){return d[ie.getMonth()]}function fe(ie){return c[ie.getMonth()]}function Y(ie){return a[+(ie.getHours()>=12)]}function ne(ie){return 1+~~(ie.getMonth()/3)}function re(ie){return o[ie.getUTCDay()]}function xe(ie){return i[ie.getUTCDay()]}function Te(ie){return d[ie.getUTCMonth()]}function Ve(ie){return c[ie.getUTCMonth()]}function Ze(ie){return a[+(ie.getUTCHours()>=12)]}function Xe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var Be=R(ie+="",I);return Be.toString=function(){return ie},Be},parse:function(ie){var Be=A(ie+="",!1);return Be.toString=function(){return ie},Be},utcFormat:function(ie){var Be=R(ie+="",L);return Be.toString=function(){return ie},Be},utcParse:function(ie){var Be=A(ie+="",!0);return Be.toString=function(){return ie},Be}}}var ZB={"-":"",_:" ",0:"0"},ai=/^\s*\d+/,eye=/^%/,tye=/[\\^$*+?|[\]().{}]/g;function Xr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function rye(t){return t.replace(tye,"\\$&")}function sp(t){return new RegExp("^(?:"+t.map(rye).join("|")+")","i")}function op(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function nye(t,e,r){var n=ai.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function aye(t,e,r){var n=ai.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function iye(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function sye(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function oye(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function e$(t,e,r){var n=ai.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function t$(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function lye(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function cye(t,e,r){var n=ai.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function uye(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function r$(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function dye(t,e,r){var n=ai.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function n$(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function hye(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function fye(t,e,r){var n=ai.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function mye(t,e,r){var n=ai.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function pye(t,e,r){var n=ai.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function gye(t,e,r){var n=eye.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function xye(t,e,r){var n=ai.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function yye(t,e,r){var n=ai.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function a$(t,e){return Xr(t.getDate(),e,2)}function vye(t,e){return Xr(t.getHours(),e,2)}function bye(t,e){return Xr(t.getHours()%12||12,e,2)}function wye(t,e){return Xr(1+Dx.count(pc(t),t),e,3)}function AK(t,e){return Xr(t.getMilliseconds(),e,3)}function Sye(t,e){return AK(t,e)+"000"}function Nye(t,e){return Xr(t.getMonth()+1,e,2)}function _ye(t,e){return Xr(t.getMinutes(),e,2)}function Tye(t,e){return Xr(t.getSeconds(),e,2)}function jye(t){var e=t.getDay();return e===0?7:e}function Aye(t,e){return Xr(bw.count(pc(t)-1,t),e,2)}function EK(t){var e=t.getDay();return e>=4||e===0?pf(t):pf.ceil(t)}function Eye(t,e){return t=EK(t),Xr(pf.count(pc(t),t)+(pc(t).getDay()===4),e,2)}function kye(t){return t.getDay()}function Cye(t,e){return Xr(kb.count(pc(t)-1,t),e,2)}function Oye(t,e){return Xr(t.getFullYear()%100,e,2)}function Iye(t,e){return t=EK(t),Xr(t.getFullYear()%100,e,2)}function Rye(t,e){return Xr(t.getFullYear()%1e4,e,4)}function Mye(t,e){var r=t.getDay();return t=r>=4||r===0?pf(t):pf.ceil(t),Xr(t.getFullYear()%1e4,e,4)}function Dye(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xr(e/60|0,"0",2)+Xr(e%60,"0",2)}function i$(t,e){return Xr(t.getUTCDate(),e,2)}function Pye(t,e){return Xr(t.getUTCHours(),e,2)}function Lye(t,e){return Xr(t.getUTCHours()%12||12,e,2)}function Bye(t,e){return Xr(1+vw.count(gc(t),t),e,3)}function kK(t,e){return Xr(t.getUTCMilliseconds(),e,3)}function $ye(t,e){return kK(t,e)+"000"}function zye(t,e){return Xr(t.getUTCMonth()+1,e,2)}function Uye(t,e){return Xr(t.getUTCMinutes(),e,2)}function Vye(t,e){return Xr(t.getUTCSeconds(),e,2)}function Fye(t){var e=t.getUTCDay();return e===0?7:e}function qye(t,e){return Xr(ww.count(gc(t)-1,t),e,2)}function CK(t){var e=t.getUTCDay();return e>=4||e===0?gf(t):gf.ceil(t)}function Hye(t,e){return t=CK(t),Xr(gf.count(gc(t),t)+(gc(t).getUTCDay()===4),e,2)}function Gye(t){return t.getUTCDay()}function Wye(t,e){return Xr(Cb.count(gc(t)-1,t),e,2)}function Kye(t,e){return Xr(t.getUTCFullYear()%100,e,2)}function Qye(t,e){return t=CK(t),Xr(t.getUTCFullYear()%100,e,2)}function Xye(t,e){return Xr(t.getUTCFullYear()%1e4,e,4)}function Yye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?gf(t):gf.ceil(t),Xr(t.getUTCFullYear()%1e4,e,4)}function Jye(){return"+0000"}function s$(){return"%"}function o$(t){return+t}function l$(t){return Math.floor(+t/1e3)}var mh,OK,IK;Zye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zye(t){return mh=Z1e(t),OK=mh.format,mh.parse,IK=mh.utcFormat,mh.utcParse,mh}function eve(t){return new Date(t)}function tve(t){return t instanceof Date?+t:+new Date(+t)}function _7(t,e,r,n,a,i,o,c,d,h){var m=u7(),p=m.invert,x=m.domain,y=h(".%L"),S=h(":%S"),N=h("%I:%M"),w=h("%I %p"),j=h("%a %d"),k=h("%b %d"),I=h("%B"),L=h("%Y");function O(R){return(d(R)<R?y:c(R)<R?S:o(R)<R?N:i(R)<R?w:n(R)<R?a(R)<R?j:k:r(R)<R?I:L)(R)}return m.invert=function(R){return new Date(p(R))},m.domain=function(R){return arguments.length?x(Array.from(R,tve)):x().map(eve)},m.ticks=function(R){var A=x();return t(A[0],A[A.length-1],R??10)},m.tickFormat=function(R,A){return A==null?O:h(A)},m.nice=function(R){var A=x();return(!R||typeof R.range!="function")&&(R=e(A[0],A[A.length-1],R??10)),R?x(yK(A,R)):m},m.copy=function(){return Mx(m,_7(t,e,r,n,a,i,o,c,d,h))},m}function rve(){return ho.apply(_7(Y1e,J1e,pc,S7,bw,Dx,b7,y7,$d,OK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nve(){return ho.apply(_7(Q1e,X1e,gc,N7,ww,vw,w7,v7,$d,IK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sw(){var t=0,e=1,r,n,a,i,o=Bi,c=!1,d;function h(p){return p==null||isNaN(p=+p)?d:o(a===0?.5:(p=(i(p)-r)*a,c?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e]=p,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(p){return arguments.length?(c=!!p,h):c},h.interpolator=function(p){return arguments.length?(o=p,h):o};function m(p){return function(x){var y,S;return arguments.length?([y,S]=x,o=p(y,S),h):[o(0),o(1)]}}return h.range=m(Xf),h.rangeRound=m(c7),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return i=p,r=p(t),n=p(e),a=r===n?0:1/(n-r),h}}function Qu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function RK(){var t=Ku(Sw()(Bi));return t.copy=function(){return Qu(t,RK())},_c.apply(t,arguments)}function MK(){var t=f7(Sw()).domain([1,10]);return t.copy=function(){return Qu(t,MK()).base(t.base())},_c.apply(t,arguments)}function DK(){var t=m7(Sw());return t.copy=function(){return Qu(t,DK()).constant(t.constant())},_c.apply(t,arguments)}function T7(){var t=p7(Sw());return t.copy=function(){return Qu(t,T7()).exponent(t.exponent())},_c.apply(t,arguments)}function ave(){return T7.apply(null,arguments).exponent(.5)}function PK(){var t=[],e=Bi;function r(n){if(n!=null&&!isNaN(n=+n))return e((Ix(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ou),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>qxe(t,i/n))},r.copy=function(){return PK(e).domain(t)},_c.apply(r,arguments)}function Nw(){var t=0,e=.5,r=1,n=1,a,i,o,c,d,h=Bi,m,p=!1,x;function y(N){return isNaN(N=+N)?x:(N=.5+((N=+m(N))-i)*(n*N<n*i?c:d),h(p?Math.max(0,Math.min(1,N)):N))}y.domain=function(N){return arguments.length?([t,e,r]=N,a=m(t=+t),i=m(e=+e),o=m(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y):[t,e,r]},y.clamp=function(N){return arguments.length?(p=!!N,y):p},y.interpolator=function(N){return arguments.length?(h=N,y):h};function S(N){return function(w){var j,k,I;return arguments.length?([j,k,I]=w,h=g1e(N,[j,k,I]),y):[h(0),h(.5),h(1)]}}return y.range=S(Xf),y.rangeRound=S(c7),y.unknown=function(N){return arguments.length?(x=N,y):x},function(N){return m=N,a=N(t),i=N(e),o=N(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y}}function LK(){var t=Ku(Nw()(Bi));return t.copy=function(){return Qu(t,LK())},_c.apply(t,arguments)}function BK(){var t=f7(Nw()).domain([.1,1,10]);return t.copy=function(){return Qu(t,BK()).base(t.base())},_c.apply(t,arguments)}function $K(){var t=m7(Nw());return t.copy=function(){return Qu(t,$K()).constant(t.constant())},_c.apply(t,arguments)}function j7(){var t=p7(Nw());return t.copy=function(){return Qu(t,j7()).exponent(t.exponent())},_c.apply(t,arguments)}function ive(){return j7.apply(null,arguments).exponent(.5)}const c$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Sg,scaleDiverging:LK,scaleDivergingLog:BK,scaleDivergingPow:j7,scaleDivergingSqrt:ive,scaleDivergingSymlog:$K,scaleIdentity:xK,scaleImplicit:kj,scaleLinear:Ab,scaleLog:vK,scaleOrdinal:s7,scalePoint:Dp,scalePow:g7,scaleQuantile:SK,scaleQuantize:NK,scaleRadial:wK,scaleSequential:RK,scaleSequentialLog:MK,scaleSequentialPow:T7,scaleSequentialQuantile:PK,scaleSequentialSqrt:ave,scaleSequentialSymlog:DK,scaleSqrt:$1e,scaleSymlog:bK,scaleThreshold:_K,scaleTime:rve,scaleUtc:nve,tickFormat:gK},Symbol.toStringTag,{value:"Module"}));var n_,u$;function _w(){if(u$)return n_;u$=1;var t=Wf();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,m=c}return m}return n_=e,n_}var a_,d$;function zK(){if(d$)return a_;d$=1;function t(e,r){return e>r}return a_=t,a_}var i_,h$;function sve(){if(h$)return i_;h$=1;var t=_w(),e=zK(),r=Qf();function n(a){return a&&a.length?t(a,r,e):void 0}return i_=n,i_}var ove=sve();const Tw=en(ove);var s_,f$;function UK(){if(f$)return s_;f$=1;function t(e,r){return e<r}return s_=t,s_}var o_,m$;function lve(){if(m$)return o_;m$=1;var t=_w(),e=UK(),r=Qf();function n(a){return a&&a.length?t(a,r,e):void 0}return o_=n,o_}var cve=lve();const jw=en(cve);var l_,p$;function uve(){if(p$)return l_;p$=1;var t=VE(),e=pl(),r=QW(),n=ds();function a(i,o){var c=n(i)?t:r;return c(i,e(o,3))}return l_=a,l_}var c_,g$;function dve(){if(g$)return c_;g$=1;var t=WW(),e=uve();function r(n,a){return t(e(n,a),1)}return c_=r,c_}var hve=dve();const fve=en(hve);var u_,x$;function mve(){if(x$)return u_;x$=1;var t=e7();function e(r,n){return t(r,n)}return u_=e,u_}var pve=mve();const Px=en(pve);var Yf=1e9,gve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},E7,Wn=!0,uo="[DecimalError] ",Kd=uo+"Invalid argument: ",A7=uo+"Exponent out of range: ",Jf=Math.floor,Cd=Math.pow,xve=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,ei=1e7,Un=7,VK=9007199254740991,Ob=Jf(VK/Un),kt={};kt.absoluteValue=kt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kt.comparedTo=kt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Un;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kt.dividedBy=kt.div=function(t){return ac(this,new this.constructor(t))};kt.dividedToIntegerBy=kt.idiv=function(t){var e=this,r=e.constructor;return Cn(ac(e,new r(t),0,1),r.precision)};kt.equals=kt.eq=function(t){return!this.cmp(t)};kt.exponent=function(){return Ia(this)};kt.greaterThan=kt.gt=function(t){return this.cmp(t)>0};kt.greaterThanOrEqualTo=kt.gte=function(t){return this.cmp(t)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(t){return this.cmp(t)<0};kt.lessThanOrEqualTo=kt.lte=function(t){return this.cmp(t)<1};kt.logarithm=kt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Es))throw Error(uo+"NaN");if(r.s<1)throw Error(uo+(r.s?"NaN":"-Infinity"));return r.eq(Es)?new n(0):(Wn=!1,e=ac(Ag(r,i),Ag(t,i),i),Wn=!0,Cn(e,a))};kt.minus=kt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?HK(e,t):FK(e,(t.s=-t.s,t))};kt.modulo=kt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(uo+"NaN");return r.s?(Wn=!1,e=ac(r,t,0,1).times(t),Wn=!0,r.minus(e)):Cn(new n(r),a)};kt.naturalExponential=kt.exp=function(){return qK(this)};kt.naturalLogarithm=kt.ln=function(){return Ag(this)};kt.negated=kt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kt.plus=kt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?FK(e,t):HK(e,(t.s=-t.s,t))};kt.precision=kt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Kd+t);if(e=Ia(a)+1,n=a.d.length-1,r=n*Un+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kt.squareRoot=kt.sqrt=function(){var t,e,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(uo+"NaN")}for(t=Ia(c),Wn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=Jo(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Jf((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(ac(c,i,o+2)).times(.5),Jo(i.d).slice(0,o)===(e=Jo(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Cn(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;o+=4}return Wn=!0,Cn(n,r)};kt.times=kt.mul=function(t){var e,r,n,a,i,o,c,d,h,m=this,p=m.constructor,x=m.d,y=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,r=m.e+t.e,d=x.length,h=y.length,d<h&&(i=x,x=y,y=i,o=d,d=h,h=o),i=[],o=d+h,n=o;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+y[n]*x[a-n-1]+e,i[a--]=c%ei|0,e=c/ei|0;i[a]=(i[a]+e)%ei|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Wn?Cn(t,p.precision):t};kt.toDecimalPlaces=kt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(ol(t,0,Yf),e===void 0?e=n.rounding:ol(e,0,8),Cn(r,t+Ia(r)+1,e))};kt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=f0(n,!0):(ol(t,0,Yf),e===void 0?e=a.rounding:ol(e,0,8),n=Cn(new a(n),t+1,e),r=f0(n,!0,t+1)),r};kt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?f0(a):(ol(t,0,Yf),e===void 0?e=i.rounding:ol(e,0,8),n=Cn(new i(a),t+Ia(a)+1,e),r=f0(n.abs(),!1,t+Ia(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kt.toInteger=kt.toint=function(){var t=this,e=t.constructor;return Cn(new e(t),Ia(t)+1,e.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(t){var e,r,n,a,i,o,c=this,d=c.constructor,h=12,m=+(t=new d(t));if(!t.s)return new d(Es);if(c=new d(c),!c.s){if(t.s<1)throw Error(uo+"Infinity");return c}if(c.eq(Es))return c;if(n=d.precision,t.eq(Es))return Cn(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=c.s,o){if((r=m<0?-m:m)<=VK){for(a=new d(Es),e=Math.ceil(n/Un+4),Wn=!1;r%2&&(a=a.times(c),v$(a.d,e)),r=Jf(r/2),r!==0;)c=c.times(c),v$(c.d,e);return Wn=!0,t.s<0?new d(Es).div(a):Cn(a,n)}}else if(i<0)throw Error(uo+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Wn=!1,a=t.times(Ag(c,n+h)),Wn=!0,a=qK(a),a.s=i,a};kt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Ia(a),n=f0(a,r<=i.toExpNeg||r>=i.toExpPos)):(ol(t,1,Yf),e===void 0?e=i.rounding:ol(e,0,8),a=Cn(new i(a),t,e),r=Ia(a),n=f0(a,t<=r||r<=i.toExpNeg,t)),n};kt.toSignificantDigits=kt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(ol(t,1,Yf),e===void 0?e=n.rounding:ol(e,0,8)),Cn(new n(r),t,e)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ia(t),r=t.constructor;return f0(t,e<=r.toExpNeg||e>=r.toExpPos)};function FK(t,e){var r,n,a,i,o,c,d,h,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),Wn?Cn(e,p):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(p/Un),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/ei|0,d[i]%=ei;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Wn?Cn(e,p):e}function ol(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Kd+t)}function Jo(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=Un-n.length,r&&(i+=ou(r)),i+=n;o=t[e],n=o+"",r=Un-n.length,r&&(i+=ou(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ac=(function(){function t(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%ei|0,o=i/ei|0;return o&&n.unshift(o),n}function e(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*ei+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,h,m,p,x,y,S,N,w,j,k,I,L,O,R,A,E,C=n.constructor,U=n.s==a.s?1:-1,P=n.d,$=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(uo+"Division by zero");for(d=n.e-a.e,A=$.length,O=P.length,y=new C(U),S=y.d=[],h=0;$[h]==(P[h]||0);)++h;if($[h]>(P[h]||0)&&--d,i==null?k=i=C.precision:o?k=i+(Ia(n)-Ia(a))+1:k=i,k<0)return new C(0);if(k=k/Un+2|0,h=0,A==1)for(m=0,$=$[0],k++;(h<O||m)&&k--;h++)I=m*ei+(P[h]||0),S[h]=I/$|0,m=I%$|0;else{for(m=ei/($[0]+1)|0,m>1&&($=t($,m),P=t(P,m),A=$.length,O=P.length),L=A,N=P.slice(0,A),w=N.length;w<A;)N[w++]=0;E=$.slice(),E.unshift(0),R=$[0],$[1]>=ei/2&&++R;do m=0,c=e($,N,A,w),c<0?(j=N[0],A!=w&&(j=j*ei+(N[1]||0)),m=j/R|0,m>1?(m>=ei&&(m=ei-1),p=t($,m),x=p.length,w=N.length,c=e(p,N,x,w),c==1&&(m--,r(p,A<x?E:$,x))):(m==0&&(c=m=1),p=$.slice()),x=p.length,x<w&&p.unshift(0),r(N,p,w),c==-1&&(w=N.length,c=e($,N,A,w),c<1&&(m++,r(N,A<w?E:$,w))),w=N.length):c===0&&(m++,N=[0]),S[h++]=m,c&&N[0]?N[w++]=P[L]||0:(N=[P[L]],w=1);while((L++<O||N[0]!==void 0)&&k--)}return S[0]||S.shift(),y.e=d,Cn(y,o?i+Ia(y)+1:i)}})();function qK(t,e){var r,n,a,i,o,c,d=0,h=0,m=t.constructor,p=m.precision;if(Ia(t)>16)throw Error(A7+Ia(t));if(!t.s)return new m(Es);for(Wn=!1,c=p,o=new m(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(Cd(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new m(Es),m.precision=c;;){if(a=Cn(a.times(t),c),r=r.times(++d),o=i.plus(ac(a,r,c)),Jo(o.d).slice(0,c)===Jo(i.d).slice(0,c)){for(;h--;)i=Cn(i.times(i),c);return m.precision=p,e==null?(Wn=!0,Cn(i,p)):i}i=o}}function Ia(t){for(var e=t.e*Un,r=t.d[0];r>=10;r/=10)e++;return e}function d_(t,e,r){if(e>t.LN10.sd())throw Wn=!0,r&&(t.precision=r),Error(uo+"LN10 precision limit exceeded");return Cn(new t(t.LN10),e)}function ou(t){for(var e="";t--;)e+="0";return e}function Ag(t,e){var r,n,a,i,o,c,d,h,m,p=1,x=10,y=t,S=y.d,N=y.constructor,w=N.precision;if(y.s<1)throw Error(uo+(y.s?"NaN":"-Infinity"));if(y.eq(Es))return new N(0);if(e==null?(Wn=!1,h=w):h=e,y.eq(10))return e==null&&(Wn=!0),d_(N,h);if(h+=x,N.precision=h,r=Jo(S),n=r.charAt(0),i=Ia(y),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)y=y.times(t),r=Jo(y.d),n=r.charAt(0),p++;i=Ia(y),n>1?(y=new N("0."+r),i++):y=new N(n+"."+r.slice(1))}else return d=d_(N,h+2,w).times(i+""),y=Ag(new N(n+"."+r.slice(1)),h-x).plus(d),N.precision=w,e==null?(Wn=!0,Cn(y,w)):y;for(c=o=y=ac(y.minus(Es),y.plus(Es),h),m=Cn(y.times(y),h),a=3;;){if(o=Cn(o.times(m),h),d=c.plus(ac(o,new N(a),h)),Jo(d.d).slice(0,h)===Jo(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(d_(N,h+2,w).times(i+""))),c=ac(c,new N(p),h),N.precision=w,e==null?(Wn=!0,Cn(c,w)):c;c=d,a+=2}}function y$(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Jf(r/Un),t.d=[],n=(r+1)%Un,r<0&&(n+=Un),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Un;n<a;)t.d.push(+e.slice(n,n+=Un));e=e.slice(n),n=Un-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Wn&&(t.e>Ob||t.e<-Ob))throw Error(A7+r)}else t.s=0,t.e=0,t.d=[0];return t}function Cn(t,e,r){var n,a,i,o,c,d,h,m,p=t.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Un,a=e,h=p[m=0];else{if(m=Math.ceil((n+1)/Un),i=p.length,m>=i)return t;for(h=i=p[m],o=1;i>=10;i/=10)o++;n%=Un,a=n-Un+o}if(r!==void 0&&(i=Cd(10,o-a-1),c=h/i%10|0,d=e<0||p[m+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/Cd(10,o-a):0:p[m-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return d?(i=Ia(t),p.length=1,e=e-i-1,p[0]=Cd(10,(Un-e%Un)%Un),t.e=Jf(-e/Un)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=m,i=1,m--):(p.length=m+1,i=Cd(10,Un-n),p[m]=a>0?(h/Cd(10,o-a)%Cd(10,a)|0)*i:0),d)for(;;)if(m==0){(p[0]+=i)==ei&&(p[0]=1,++t.e);break}else{if(p[m]+=i,p[m]!=ei)break;p[m--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Wn&&(t.e>Ob||t.e<-Ob))throw Error(A7+Ia(t));return t}function HK(t,e){var r,n,a,i,o,c,d,h,m,p,x=t.constructor,y=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),Wn?Cn(e,y):e;if(d=t.d,p=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(m=o<0,m?(r=d,o=-o,c=p.length):(r=p,n=h,c=d.length),a=Math.max(Math.ceil(y/Un),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=p.length,m=a<c,m&&(c=a),a=0;a<c;a++)if(d[a]!=p[a]){m=d[a]<p[a];break}o=0}for(m&&(r=d,d=p,p=r,e.s=-e.s),c=d.length,a=p.length-c;a>0;--a)d[c++]=0;for(a=p.length;a>o;){if(d[--a]<p[a]){for(i=a;i&&d[--i]===0;)d[i]=ei-1;--d[i],d[a]+=ei}d[a]-=p[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Wn?Cn(e,y):e):new x(0)}function f0(t,e,r){var n,a=Ia(t),i=Jo(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+ou(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ou(-a-1)+i,r&&(n=r-o)>0&&(i+=ou(n))):a>=o?(i+=ou(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+ou(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=ou(n))),t.s<0?"-"+i:i}function v$(t,e){if(t.length>e)return t.length=e,!0}function GK(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Kd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return y$(o,i.toString())}else if(typeof i!="string")throw Error(Kd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,xve.test(i))y$(o,i);else throw Error(Kd+i)}if(a.prototype=kt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=GK,a.config=a.set=yve,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function yve(t){if(!t||typeof t!="object")throw Error(uo+"Object expected");var e,r,n,a=["precision",1,Yf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Jf(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Kd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Kd+r+": "+n);return this}var E7=GK(gve);Es=new E7(1);const Nn=E7;function vve(t){return Nve(t)||Sve(t)||wve(t)||bve()}function bve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wve(t,e){if(t){if(typeof t=="string")return Rj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rj(t,e)}}function Sve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Nve(t){if(Array.isArray(t))return Rj(t)}function Rj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _ve=function(e){return e},WK={},KK=function(e){return e===WK},b$=function(e){return function r(){return arguments.length===0||arguments.length===1&&KK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Tve=function t(e,r){return e===1?r:b$(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(c){return c!==WK}).length;return o>=e?r.apply(void 0,a):t(e-o,b$(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var m=a.map(function(p){return KK(p)?d.shift():p});return r.apply(void 0,vve(m).concat(d))}))})},Aw=function(e){return Tve(e.length,e)},Mj=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},jve=Aw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Ave=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return _ve;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},Dj=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},QK=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function Eve(t){var e;return t===0?e=1:e=Math.floor(new Nn(t).abs().log(10).toNumber())+1,e}function kve(t,e,r){for(var n=new Nn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Cve=Aw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),Ove=Aw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Ive=Aw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Ew={rangeStep:kve,getDigitCount:Eve,interpolateNumber:Cve,uninterpolateNumber:Ove,uninterpolateTruncation:Ive};function Pj(t){return Dve(t)||Mve(t)||XK(t)||Rve()}function Rve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Dve(t){if(Array.isArray(t))return Lj(t)}function Eg(t,e){return Bve(t)||Lve(t,e)||XK(t,e)||Pve()}function Pve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XK(t,e){if(t){if(typeof t=="string")return Lj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lj(t,e)}}function Lj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Bve(t){if(Array.isArray(t))return t}function YK(t){var e=Eg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function JK(t,e,r){if(t.lte(0))return new Nn(0);var n=Ew.getDigitCount(t.toNumber()),a=new Nn(10).pow(n),i=t.div(a),o=n!==1?.05:.1,c=new Nn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new Nn(Math.ceil(d))}function $ve(t,e,r){var n=1,a=new Nn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new Nn(10).pow(Ew.getDigitCount(t)-1),a=new Nn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Nn(Math.floor(t)))}else t===0?a=new Nn(Math.floor((e-1)/2)):r||(a=new Nn(Math.floor(t)));var o=Math.floor((e-1)/2),c=Ave(jve(function(d){return a.add(new Nn(d-o).mul(n)).toNumber()}),Mj);return c(0,e)}function ZK(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Nn(0),tickMin:new Nn(0),tickMax:new Nn(0)};var i=JK(new Nn(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new Nn(0):(o=new Nn(t).add(e).div(2),o=o.sub(new Nn(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),d=Math.ceil(new Nn(e).sub(o).div(i).toNumber()),h=c+d+1;return h>r?ZK(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:o.sub(new Nn(c).mul(i)),tickMax:o.add(new Nn(d).mul(i))})}function zve(t){var e=Eg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=YK([r,n]),d=Eg(c,2),h=d[0],m=d[1];if(h===-1/0||m===1/0){var p=m===1/0?[h].concat(Pj(Mj(0,a-1).map(function(){return 1/0}))):[].concat(Pj(Mj(0,a-1).map(function(){return-1/0})),[m]);return r>n?Dj(p):p}if(h===m)return $ve(h,a,i);var x=ZK(h,m,o,i),y=x.step,S=x.tickMin,N=x.tickMax,w=Ew.rangeStep(S,N.add(new Nn(.1).mul(y)),y);return r>n?Dj(w):w}function Uve(t,e){var r=Eg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=YK([n,a]),c=Eg(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var m=Math.max(e,2),p=JK(new Nn(h).sub(d).div(m-1),i,0),x=[].concat(Pj(Ew.rangeStep(new Nn(d),new Nn(h).sub(new Nn(.99).mul(p)),p)),[h]);return n>a?Dj(x):x}var Vve=QK(zve),Fve=QK(Uve),qve="Invariant failed";function m0(t,e){throw new Error(qve)}var Hve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function Ib(){return Ib=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ib.apply(this,arguments)}function Gve(t,e){return Xve(t)||Qve(t,e)||Kve(t,e)||Wve()}function Wve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kve(t,e){if(t){if(typeof t=="string")return w$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w$(t,e)}}function w$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Xve(t){if(Array.isArray(t))return t}function Yve(t,e){if(t==null)return{};var r=Jve(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Zve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ebe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rQ(n.key),n)}}function tbe(t,e,r){return e&&ebe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rbe(t,e,r){return e=Rb(e),nbe(t,eQ()?Reflect.construct(e,r||[],Rb(t).constructor):e.apply(t,r))}function nbe(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return abe(t)}function abe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eQ=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rb(t)}function ibe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bj(t,e)}function Bj(t,e){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Bj(t,e)}function tQ(t,e,r){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rQ(t){var e=sbe(t,"string");return xf(e)=="symbol"?e:e+""}function sbe(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lx=(function(t){function e(){return Zve(this,e),rbe(this,e,arguments)}return ibe(e,t),tbe(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,m=n.xAxis,p=n.yAxis,x=Yve(n,Hve),y=Ft(x,!1);this.props.direction==="x"&&m.type!=="number"&&m0();var S=d.map(function(N){var w=h(N,c),j=w.x,k=w.y,I=w.value,L=w.errorVal;if(!L)return null;var O=[],R,A;if(Array.isArray(L)){var E=Gve(L,2);R=E[0],A=E[1]}else R=A=L;if(i==="vertical"){var C=m.scale,U=k+a,P=U+o,$=U-o,B=C(I-R),G=C(I+A);O.push({x1:G,y1:P,x2:G,y2:$}),O.push({x1:B,y1:U,x2:G,y2:U}),O.push({x1:B,y1:P,x2:B,y2:$})}else if(i==="horizontal"){var K=p.scale,H=j+a,Z=H-o,ae=H+o,he=K(I-R),fe=K(I+A);O.push({x1:Z,y1:fe,x2:ae,y2:fe}),O.push({x1:H,y1:he,x2:H,y2:fe}),O.push({x1:Z,y1:he,x2:ae,y2:he})}return se.createElement(Kr,Ib({className:"recharts-errorBar",key:"bar-".concat(O.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},y),O.map(function(Y){return se.createElement("line",Ib({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return se.createElement(Kr,{className:"recharts-errorBars"},S)}}])})(se.Component);tQ(Lx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});tQ(Lx,"displayName","ErrorBar");function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function S$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _d(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S$(Object(r),!0).forEach(function(n){obe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function obe(t,e,r){return e=lbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lbe(t){var e=cbe(t,"string");return kg(e)=="symbol"?e:e+""}function cbe(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nQ=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=js(r,Bh);if(!o)return null;var c=Bh.defaultProps,d=c!==void 0?_d(_d({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:i==="children"?h=(n||[]).reduce(function(m,p){var x=p.item,y=p.props,S=y.sectors||y.data||[];return m.concat(S.map(function(N){return{type:o.props.iconType||x.props.legendType,value:N.name,color:N.fill,payload:N}}))},[]):h=(n||[]).map(function(m){var p=m.item,x=p.type.defaultProps,y=x!==void 0?_d(_d({},x),p.props):{},S=y.dataKey,N=y.name,w=y.legendType,j=y.hide;return{inactive:j,dataKey:S,type:d.iconType||w||"square",color:k7(p),value:N||S,payload:y}}),_d(_d(_d({},d),Bh.getWithHeight(o,a)),{},{payload:h,item:o})};function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function N$(t){return fbe(t)||hbe(t)||dbe(t)||ube()}function ube(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dbe(t,e){if(t){if(typeof t=="string")return $j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $j(t,e)}}function hbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fbe(t){if(Array.isArray(t))return $j(t)}function $j(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(r),!0).forEach(function(n){zh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zh(t,e,r){return e=mbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mbe(t){var e=pbe(t,"string");return Cg(e)=="symbol"?e:e+""}function pbe(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vi(t,e,r){return hr(t)||hr(e)?r:Va(e)?no(t,e,r):rr(e)?e(t):r}function Pp(t,e,r,n){var a=fve(t,function(c){return vi(c,e)});if(r==="number"){var i=a.filter(function(c){return yt(c)||parseFloat(c)});return i.length?[jw(i),Tw(i)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!hr(c)}):a;return o.map(function(c){return Va(c)||c instanceof Date?c:""})}var gbe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var m=h>0?a[h-1].coordinate:a[c-1].coordinate,p=a[h].coordinate,x=h>=c-1?a[0].coordinate:a[h+1].coordinate,y=void 0;if(To(p-m)!==To(x-p)){var S=[];if(To(x-p)===To(d[1]-d[0])){y=x;var N=p+d[1]-d[0];S[0]=Math.min(N,(N+m)/2),S[1]=Math.max(N,(N+m)/2)}else{y=m;var w=x+d[1]-d[0];S[0]=Math.min(p,(w+p)/2),S[1]=Math.max(p,(w+p)/2)}var j=[Math.min(p,(y+p)/2),Math.max(p,(y+p)/2)];if(e>j[0]&&e<=j[1]||e>=S[0]&&e<=S[1]){o=a[h].index;break}}else{var k=Math.min(m,x),I=Math.max(m,x);if(e>(k+p)/2&&e<=(I+p)/2){o=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){o=n[L].index;break}return o},k7=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?oa(oa({},e.type.defaultProps),e.props):e.props,o=i.stroke,c=i.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},xbe=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var m=i[c[d]].stackGroups,p=Object.keys(m),x=0,y=p.length;x<y;x++){var S=m[p[x]],N=S.items,w=S.cateAxisId,j=N.filter(function(A){return rc(A.type).indexOf("Bar")>=0});if(j&&j.length){var k=j[0].type.defaultProps,I=k!==void 0?oa(oa({},k),j[0].props):j[0].props,L=I.barSize,O=I[w];o[O]||(o[O]=[]);var R=hr(L)?r:L;o[O].push({item:j[0],stackList:j.slice(1),barSize:hr(R)?void 0:jo(R,n,0)})}}return o},ybe=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=jo(r,a,0,!0),m,p=[];if(o[0].barSize===+o[0].barSize){var x=!1,y=a/d,S=o.reduce(function(L,O){return L+O.barSize||0},0);S+=(d-1)*h,S>=a&&(S-=(d-1)*h,h=0),S>=a&&y>0&&(x=!0,y*=.9,S=d*y);var N=(a-S)/2>>0,w={offset:N-h,size:0};m=o.reduce(function(L,O){var R={item:O.item,position:{offset:w.offset+w.size+h,size:x?y:O.barSize}},A=[].concat(N$(L),[R]);return w=A[A.length-1].position,O.stackList&&O.stackList.length&&O.stackList.forEach(function(E){A.push({item:E,position:w})}),A},p)}else{var j=jo(n,a,0,!0);a-2*j-(d-1)*h<=0&&(h=0);var k=(a-2*j-(d-1)*h)/d;k>1&&(k>>=0);var I=c===+c?Math.min(k,c):k;m=o.reduce(function(L,O,R){var A=[].concat(N$(L),[{item:O.item,position:{offset:j+(k+h)*R+(k-I)/2,size:I}}]);return O.stackList&&O.stackList.length&&O.stackList.forEach(function(E){A.push({item:E,position:A[A.length-1].position})}),A},p)}return m},vbe=function(e,r,n,a){var i=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=nQ({children:i,legendWidth:d});if(h){var m=a||{},p=m.width,x=m.height,y=h.align,S=h.verticalAlign,N=h.layout;if((N==="vertical"||N==="horizontal"&&S==="middle")&&y!=="center"&&yt(e[y]))return oa(oa({},e),{},zh({},y,e[y]+(p||0)));if((N==="horizontal"||N==="vertical"&&y==="center")&&S!=="middle"&&yt(e[S]))return oa(oa({},e),{},zh({},S,e[S]+(x||0)))}return e},bbe=function(e,r,n){return hr(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},aQ=function(e,r,n,a,i){var o=r.props.children,c=Rs(o,Lx).filter(function(h){return bbe(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,m){var p=vi(m,n);if(hr(p))return h;var x=Array.isArray(p)?[jw(p),Tw(p)]:[p,p],y=d.reduce(function(S,N){var w=vi(m,N,0),j=x[0]-Math.abs(Array.isArray(w)?w[0]:w),k=x[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(j,S[0]),Math.max(k,S[1])]},[1/0,-1/0]);return[Math.min(y[0],h[0]),Math.max(y[1],h[1])]},[1/0,-1/0])}return null},wbe=function(e,r,n,a,i){var o=r.map(function(c){return aQ(e,c,n,i,a)}).filter(function(c){return!hr(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},iQ=function(e,r,n,a,i){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&aQ(e,d,h,a)||Pp(e,h,n,i)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var m=0,p=h.length;m<p;m++)c[h[m]]||(c[h[m]]=!0,d.push(h[m]));return d},[])},sQ=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},oQ=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,o,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||c.push(r),o||c.push(n),c},Jl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?To(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var m=(e.ticks||e.niceTicks).map(function(p){var x=i?i.indexOf(p):p;return{coordinate:a(x)+h,value:p,offset:h}});return m.filter(function(p){return!kx(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,x){return{coordinate:a(p)+h,value:p,index:x,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(p){return{coordinate:a(p)+h,value:p,offset:h}}):a.domain().map(function(p,x){return{coordinate:a(p)+h,value:i?i[p]:p,index:x,offset:h}})},h_=new WeakMap,Fy=function(e,r){if(typeof r!="function")return e;h_.has(e)||h_.set(e,new WeakMap);var n=h_.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},lQ=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:Sg(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:Ab(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Dp(),realScaleType:"point"}:i==="category"?{scale:Sg(),realScaleType:"band"}:{scale:Ab(),realScaleType:"linear"};if(d0(a)){var d="scale".concat(uw(a));return{scale:(c$[d]||Dp)(),realScaleType:c$[d]?d:"point"}}return rr(a)?{scale:a}:{scale:Dp(),realScaleType:"point"}},T$=1e-4,cQ=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-T$,o=Math.max(a[0],a[1])+T$,c=e(r[0]),d=e(r[n-1]);(c<i||c>o||d<i||d>o)&&e.domain([r[0],r[n-1]])}},Sbe=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},Nbe=function(e,r){if(!r||r.length!==2||!yt(r[0])||!yt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!yt(e[0])||e[0]<n)&&(i[0]=n),(!yt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},_be=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,c=0;c<r;++c){var d=kx(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},Tbe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var c=kx(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=i,e[o][n][1]=i+c,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},jbe={sign:_be,expand:fme,none:lf,silhouette:mme,wiggle:pme,positive:Tbe},Abe=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=jbe[n],o=hme().keys(a).value(function(c,d){return+vi(c,d,0)}).order(pj).offset(i);return o(e)},Ebe=function(e,r,n,a,i,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(p,x){var y,S=(y=x.type)!==null&&y!==void 0&&y.defaultProps?oa(oa({},x.type.defaultProps),x.props):x.props,N=S.stackId,w=S.hide;if(w)return p;var j=S[n],k=p[j]||{hasStack:!1,stackGroups:{}};if(Va(N)){var I=k.stackGroups[N]||{numericAxisId:n,cateAxisId:a,items:[]};I.items.push(x),k.hasStack=!0,k.stackGroups[N]=I}else k.stackGroups[Cx("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[x]};return oa(oa({},p),{},zh({},j,k))},d),m={};return Object.keys(h).reduce(function(p,x){var y=h[x];if(y.hasStack){var S={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(N,w){var j=y.stackGroups[w];return oa(oa({},N),{},zh({},w,{numericAxisId:n,cateAxisId:a,items:j.items,stackedData:Abe(e,j.items,i)}))},S)}return oa(oa({},p),{},zh({},x,y))},m)},uQ=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var m=Vve(h,i,c);return e.domain([jw(m),Tw(m)]),{niceTicks:m}}if(i&&a==="number"){var p=e.domain(),x=Fve(p,i,c);return{niceTicks:x}}return null};function j$(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!hr(a[e.dataKey])){var c=lb(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=vi(a,hr(o)?e.dataKey:o);return hr(d)?null:e.scale(d)}var A$=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=vi(o,r.dataKey,r.domain[c]);return hr(d)?null:r.scale(d)-i/2+a},kbe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Cbe=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?oa(oa({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(Va(i)){var o=r[i];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},Obe=function(e){return e.reduce(function(r,n){return[jw(n.concat([r[0]]).filter(yt)),Tw(n.concat([r[1]]).filter(yt))]},[1/0,-1/0])},dQ=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],c=o.stackedData,d=c.reduce(function(h,m){var p=Obe(m.slice(r,n+1));return[Math.min(h[0],p[0]),Math.max(h[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},E$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,k$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zj=function(e,r,n){if(rr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(yt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(E$.test(e[0])){var i=+E$.exec(e[0])[1];a[0]=r[0]-i}else rr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(yt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(k$.test(e[1])){var o=+k$.exec(e[1])[1];a[1]=r[1]+o}else rr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Mb=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=r7(r,function(p){return p.coordinate}),o=1/0,c=1,d=i.length;c<d;c++){var h=i[c],m=i[c-1];o=Math.min((h.coordinate||0)-(m.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},C$=function(e,r,n){return!e||!e.length||Px(e,no(n,"type.defaultProps.domain"))?r:e},hQ=function(e,r){var n=e.type.defaultProps?oa(oa({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,m=n.hide;return oa(oa({},Ft(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:i||a,color:k7(e),value:vi(r,a),type:d,payload:r,chartType:h,hide:m})};function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function O$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O$(Object(r),!0).forEach(function(n){fQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fQ(t,e,r){return e=Ibe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ibe(t){var e=Rbe(t,"string");return Og(e)=="symbol"?e:e+""}function Rbe(t,e){if(Og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mbe(t,e){return Bbe(t)||Lbe(t,e)||Pbe(t,e)||Dbe()}function Dbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pbe(t,e){if(t){if(typeof t=="string")return I$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I$(t,e)}}function I$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lbe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Bbe(t){if(Array.isArray(t))return t}var Db=Math.PI/180,$be=function(e){return e*180/Math.PI},_n=function(e,r,n,a){return{x:e+Math.cos(-Db*a)*n,y:r+Math.sin(-Db*a)*n}},zbe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Ube=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,m=jo(e.cx,o,o/2),p=jo(e.cy,c,c/2),x=zbe(o,c,n),y=jo(e.innerRadius,x,0),S=jo(e.outerRadius,x,x*.8),N=Object.keys(r);return N.reduce(function(w,j){var k=r[j],I=k.domain,L=k.reversed,O;if(hr(k.range))a==="angleAxis"?O=[d,h]:a==="radiusAxis"&&(O=[y,S]),L&&(O=[O[1],O[0]]);else{O=k.range;var R=O,A=Mbe(R,2);d=A[0],h=A[1]}var E=lQ(k,i),C=E.realScaleType,U=E.scale;U.domain(I).range(O),cQ(U);var P=uQ(U,zl(zl({},k),{},{realScaleType:C})),$=zl(zl(zl({},k),P),{},{range:O,radius:S,realScaleType:C,scale:U,cx:m,cy:p,innerRadius:y,outerRadius:S,startAngle:d,endAngle:h});return zl(zl({},w),{},fQ({},j,$))},{})},Vbe=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Fbe=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,c=Vbe({x:n,y:a},{x:i,y:o});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:$be(h),angleInRadian:h}},qbe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},Hbe=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(i,o);return e+c*360},R$=function(e,r){var n=e.x,a=e.y,i=Fbe({x:n,y:a},r),o=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var m=qbe(r),p=m.startAngle,x=m.endAngle,y=c,S;if(p<=x){for(;y>x;)y-=360;for(;y<p;)y+=360;S=y>=p&&y<=x}else{for(;y>p;)y-=360;for(;y<x;)y+=360;S=y>=x&&y<=p}return S?zl(zl({},r),{},{radius:o,angle:Hbe(y,r)}):null},mQ=function(e){return!T.isValidElement(e)&&!rr(e)&&typeof e!="boolean"?e.className:""};function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}var Gbe=["offset"];function Wbe(t){return Ybe(t)||Xbe(t)||Qbe(t)||Kbe()}function Kbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qbe(t,e){if(t){if(typeof t=="string")return Uj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uj(t,e)}}function Xbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ybe(t){if(Array.isArray(t))return Uj(t)}function Uj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jbe(t,e){if(t==null)return{};var r=Zbe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function M$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(r),!0).forEach(function(n){e2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e2e(t,e,r){return e=t2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t2e(t){var e=r2e(t,"string");return Ig(e)=="symbol"?e:e+""}function r2e(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rg(){return Rg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rg.apply(this,arguments)}var n2e=function(e){var r=e.value,n=e.formatter,a=hr(e.children)?r:e.children;return rr(n)?n(a):a},a2e=function(e,r){var n=To(r-e),a=Math.min(Math.abs(r-e),360);return n*a},i2e=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,c=e.className,d=i,h=d.cx,m=d.cy,p=d.innerRadius,x=d.outerRadius,y=d.startAngle,S=d.endAngle,N=d.clockWise,w=(p+x)/2,j=a2e(y,S),k=j>=0?1:-1,I,L;a==="insideStart"?(I=y+k*o,L=N):a==="insideEnd"?(I=S-k*o,L=!N):a==="end"&&(I=S+k*o,L=N),L=j<=0?L:!L;var O=_n(h,m,w,I),R=_n(h,m,w,I+(L?1:-1)*359),A="M".concat(O.x,",").concat(O.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(L?0:1,`,
    `).concat(R.x,",").concat(R.y),E=hr(e.id)?Cx("recharts-radial-line-"):e.id;return se.createElement("text",Rg({},n,{dominantBaseline:"central",className:gr("recharts-radial-bar-label",c)}),se.createElement("defs",null,se.createElement("path",{id:E,d:A})),se.createElement("textPath",{xlinkHref:"#".concat(E)},r))},s2e=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,m=i.startAngle,p=i.endAngle,x=(m+p)/2;if(a==="outside"){var y=_n(o,c,h+n,x),S=y.x,N=y.y;return{x:S,y:N,textAnchor:S>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,j=_n(o,c,w,x),k=j.x,I=j.y;return{x:k,y:I,textAnchor:"middle",verticalAnchor:"middle"}},o2e=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,c=o.x,d=o.y,h=o.width,m=o.height,p=m>=0?1:-1,x=p*a,y=p>0?"end":"start",S=p>0?"start":"end",N=h>=0?1:-1,w=N*a,j=N>0?"end":"start",k=N>0?"start":"end";if(i==="top"){var I={x:c+h/2,y:d-p*a,textAnchor:"middle",verticalAnchor:y};return $a($a({},I),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+m+x,textAnchor:"middle",verticalAnchor:S};return $a($a({},L),n?{height:Math.max(n.y+n.height-(d+m),0),width:h}:{})}if(i==="left"){var O={x:c-w,y:d+m/2,textAnchor:j,verticalAnchor:"middle"};return $a($a({},O),n?{width:Math.max(O.x-n.x,0),height:m}:{})}if(i==="right"){var R={x:c+h+w,y:d+m/2,textAnchor:k,verticalAnchor:"middle"};return $a($a({},R),n?{width:Math.max(n.x+n.width-R.x,0),height:m}:{})}var A=n?{width:h,height:m}:{};return i==="insideLeft"?$a({x:c+w,y:d+m/2,textAnchor:k,verticalAnchor:"middle"},A):i==="insideRight"?$a({x:c+h-w,y:d+m/2,textAnchor:j,verticalAnchor:"middle"},A):i==="insideTop"?$a({x:c+h/2,y:d+x,textAnchor:"middle",verticalAnchor:S},A):i==="insideBottom"?$a({x:c+h/2,y:d+m-x,textAnchor:"middle",verticalAnchor:y},A):i==="insideTopLeft"?$a({x:c+w,y:d+x,textAnchor:k,verticalAnchor:S},A):i==="insideTopRight"?$a({x:c+h-w,y:d+x,textAnchor:j,verticalAnchor:S},A):i==="insideBottomLeft"?$a({x:c+w,y:d+m-x,textAnchor:k,verticalAnchor:y},A):i==="insideBottomRight"?$a({x:c+h-w,y:d+m-x,textAnchor:j,verticalAnchor:y},A):Kf(i)&&(yt(i.x)||Ld(i.x))&&(yt(i.y)||Ld(i.y))?$a({x:c+jo(i.x,h),y:d+jo(i.y,m),textAnchor:"end",verticalAnchor:"end"},A):$a({x:c+h/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},A)},l2e=function(e){return"cx"in e&&yt(e.cx)};function pi(t){var e=t.offset,r=e===void 0?5:e,n=Jbe(t,Gbe),a=$a({offset:r},n),i=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,m=a.className,p=m===void 0?"":m,x=a.textBreakAll;if(!i||hr(c)&&hr(d)&&!T.isValidElement(h)&&!rr(h))return null;if(T.isValidElement(h))return T.cloneElement(h,a);var y;if(rr(h)){if(y=T.createElement(h,a),T.isValidElement(y))return y}else y=n2e(a);var S=l2e(i),N=Ft(a,!0);if(S&&(o==="insideStart"||o==="insideEnd"||o==="end"))return i2e(a,y,N);var w=S?s2e(a):o2e(a);return se.createElement(ff,Rg({className:gr("recharts-label",p)},N,w,{breakAll:x}),y)}pi.displayName="Label";var pQ=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,m=e.outerRadius,p=e.x,x=e.y,y=e.top,S=e.left,N=e.width,w=e.height,j=e.clockWise,k=e.labelViewBox;if(k)return k;if(yt(N)&&yt(w)){if(yt(p)&&yt(x))return{x:p,y:x,width:N,height:w};if(yt(y)&&yt(S))return{x:y,y:S,width:N,height:w}}return yt(p)&&yt(x)?{x:p,y:x,width:0,height:0}:yt(r)&&yt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:m||d||c||0,clockWise:j}:e.viewBox?e.viewBox:{}},c2e=function(e,r){return e?e===!0?se.createElement(pi,{key:"label-implicit",viewBox:r}):Va(e)?se.createElement(pi,{key:"label-implicit",viewBox:r,value:e}):T.isValidElement(e)?e.type===pi?T.cloneElement(e,{key:"label-implicit",viewBox:r}):se.createElement(pi,{key:"label-implicit",content:e,viewBox:r}):rr(e)?se.createElement(pi,{key:"label-implicit",content:e,viewBox:r}):Kf(e)?se.createElement(pi,Rg({viewBox:r},e,{key:"label-implicit"})):null:null},u2e=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=pQ(e),o=Rs(a,pi).map(function(d,h){return T.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return o;var c=c2e(e.label,r||i);return[c].concat(Wbe(o))};pi.parseViewBox=pQ;pi.renderCallByParent=u2e;var f_,D$;function d2e(){if(D$)return f_;D$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return f_=t,f_}var h2e=d2e();const gQ=en(h2e);function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}var f2e=["valueAccessor"],m2e=["data","dataKey","clockWise","id","textBreakAll"];function p2e(t){return v2e(t)||y2e(t)||x2e(t)||g2e()}function g2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x2e(t,e){if(t){if(typeof t=="string")return Vj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vj(t,e)}}function y2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v2e(t){if(Array.isArray(t))return Vj(t)}function Vj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pb(){return Pb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pb.apply(this,arguments)}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function L$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){b2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b2e(t,e,r){return e=w2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w2e(t){var e=S2e(t,"string");return Mg(e)=="symbol"?e:e+""}function S2e(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B$(t,e){if(t==null)return{};var r=N2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function N2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var _2e=function(e){return Array.isArray(e.value)?gQ(e.value):e.value};function ic(t){var e=t.valueAccessor,r=e===void 0?_2e:e,n=B$(t,f2e),a=n.data,i=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=B$(n,m2e);return!a||!a.length?null:se.createElement(Kr,{className:"recharts-label-list"},a.map(function(m,p){var x=hr(i)?r(m,p):vi(m&&m.payload,i),y=hr(c)?{}:{id:"".concat(c,"-").concat(p)};return se.createElement(pi,Pb({},Ft(m,!0),h,y,{parentViewBox:m.parentViewBox,value:x,textBreakAll:d,viewBox:pi.parseViewBox(hr(o)?m:L$(L$({},m),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}ic.displayName="LabelList";function T2e(t,e){return t?t===!0?se.createElement(ic,{key:"labelList-implicit",data:e}):se.isValidElement(t)||rr(t)?se.createElement(ic,{key:"labelList-implicit",data:e,content:t}):Kf(t)?se.createElement(ic,Pb({data:e},t,{key:"labelList-implicit"})):null:null}function j2e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Rs(n,ic).map(function(o,c){return T.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=T2e(t.label,e);return[i].concat(p2e(a))}ic.renderCallByParent=j2e;function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function Fj(){return Fj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fj.apply(this,arguments)}function $$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function z$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(r),!0).forEach(function(n){A2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A2e(t,e,r){return e=E2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E2e(t){var e=k2e(t,"string");return Dg(e)=="symbol"?e:e+""}function k2e(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C2e=function(e,r){var n=To(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},qy=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,m=d*(c?1:-1)+a,p=Math.asin(d/m)/Db,x=h?i:i+o*p,y=_n(r,n,m,x),S=_n(r,n,a,x),N=h?i-o*p:i,w=_n(r,n,m*Math.cos(p*Db),N);return{center:y,circleTangency:S,lineTangency:w,theta:p}},xQ=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,c=e.endAngle,d=C2e(o,c),h=o+d,m=_n(r,n,i,o),p=_n(r,n,i,h),x="M ".concat(m.x,",").concat(m.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(a>0){var y=_n(r,n,a,o),S=_n(r,n,a,h);x+="L ".concat(S.x,",").concat(S.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(y.x,",").concat(y.y," Z")}else x+="L ".concat(r,",").concat(n," Z");return x},O2e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,m=e.endAngle,p=To(m-h),x=qy({cx:r,cy:n,radius:i,angle:h,sign:p,cornerRadius:o,cornerIsExternal:d}),y=x.circleTangency,S=x.lineTangency,N=x.theta,w=qy({cx:r,cy:n,radius:i,angle:m,sign:-p,cornerRadius:o,cornerIsExternal:d}),j=w.circleTangency,k=w.lineTangency,I=w.theta,L=d?Math.abs(h-m):Math.abs(h-m)-N-I;if(L<0)return c?"M ".concat(S.x,",").concat(S.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):xQ({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:m});var O="M ".concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(p<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(k.x,",").concat(k.y,`
  `);if(a>0){var R=qy({cx:r,cy:n,radius:a,angle:h,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),A=R.circleTangency,E=R.lineTangency,C=R.theta,U=qy({cx:r,cy:n,radius:a,angle:m,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),P=U.circleTangency,$=U.lineTangency,B=U.theta,G=d?Math.abs(h-m):Math.abs(h-m)-C-B;if(G<0&&o===0)return"".concat(O,"L").concat(r,",").concat(n,"Z");O+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(G>180),",").concat(+(p>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(E.x,",").concat(E.y,"Z")}else O+="L".concat(r,",").concat(n,"Z");return O},I2e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yQ=function(e){var r=z$(z$({},I2e),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,m=r.startAngle,p=r.endAngle,x=r.className;if(o<i||m===p)return null;var y=gr("recharts-sector",x),S=o-i,N=jo(c,S,0,!0),w;return N>0&&Math.abs(m-p)<360?w=O2e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,S/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:m,endAngle:p}):w=xQ({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:m,endAngle:p}),se.createElement("path",Fj({},Ft(r,!0),{className:y,d:w,role:"img"}))};function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function qj(){return qj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qj.apply(this,arguments)}function U$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function V$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(r),!0).forEach(function(n){R2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R2e(t,e,r){return e=M2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M2e(t){var e=D2e(t,"string");return Pg(e)=="symbol"?e:e+""}function D2e(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F$={curveBasisClosed:tme,curveBasisOpen:rme,curveBasis:eme,curveBumpX:zfe,curveBumpY:Ufe,curveLinearClosed:nme,curveLinear:hw,curveMonotoneX:ame,curveMonotoneY:ime,curveNatural:sme,curveStep:ome,curveStepAfter:cme,curveStepBefore:lme},Hy=function(e){return e.x===+e.x&&e.y===+e.y},lp=function(e){return e.x},cp=function(e){return e.y},P2e=function(e,r){if(rr(e))return e;var n="curve".concat(uw(e));return(n==="curveMonotone"||n==="curveBump")&&r?F$["".concat(n).concat(r==="vertical"?"Y":"X")]:F$[n]||hw},L2e=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,m=P2e(n,c),p=h?i.filter(function(N){return Hy(N)}):i,x;if(Array.isArray(o)){var y=h?o.filter(function(N){return Hy(N)}):o,S=p.map(function(N,w){return V$(V$({},N),{},{base:y[w]})});return c==="vertical"?x=Py().y(cp).x1(lp).x0(function(N){return N.base.x}):x=Py().x(lp).y1(cp).y0(function(N){return N.base.y}),x.defined(Hy).curve(m),x(S)}return c==="vertical"&&yt(o)?x=Py().y(cp).x1(lp).x0(o):yt(o)?x=Py().x(lp).y1(cp).y0(o):x=gW().x(lp).y(cp),x.defined(Hy).curve(m),x(p)},Hj=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?L2e(e):a;return T.createElement("path",qj({},Ft(e,!1),cb(e),{className:gr("recharts-curve",r),d:o,ref:i}))},m_={exports:{}},p_,q$;function B2e(){if(q$)return p_;q$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return p_=t,p_}var g_,H$;function $2e(){if(H$)return g_;H$=1;var t=B2e();function e(){}function r(){}return r.resetWarningCache=e,g_=function(){function n(o,c,d,h,m,p){if(p!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},g_}var G$;function z2e(){return G$||(G$=1,m_.exports=$2e()()),m_.exports}var U2e=z2e();const on=en(U2e),{getOwnPropertyNames:V2e,getOwnPropertySymbols:F2e}=Object,{hasOwnProperty:q2e}=Object.prototype;function x_(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Gy(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,o=i.get(r),c=i.get(n);if(o&&c)return o===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function H2e(t){return t!=null?t[Symbol.toStringTag]:void 0}function W$(t){return V2e(t).concat(F2e(t))}const G2e=Object.hasOwn||((t,e)=>q2e.call(t,e));function E0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const W2e="__v",K2e="__o",Q2e="_owner",{getOwnPropertyDescriptor:K$,keys:Q$}=Object;function X2e(t,e){return t.byteLength===e.byteLength&&Lb(new Uint8Array(t),new Uint8Array(e))}function Y2e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function J2e(t,e){return t.byteLength===e.byteLength&&Lb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Z2e(t,e){return E0(t.getTime(),e.getTime())}function ewe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function twe(t,e){return t===e}function X$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let o,c,d=0;for(;(o=i.next())&&!o.done;){const h=e.entries();let m=!1,p=0;for(;(c=h.next())&&!c.done;){if(a[p]){p++;continue}const x=o.value,y=c.value;if(r.equals(x[0],y[0],d,p,t,e,r)&&r.equals(x[1],y[1],x[0],y[0],t,e,r)){m=a[p]=!0;break}p++}if(!m)return!1;d++}return!0}const rwe=E0;function nwe(t,e,r){const n=Q$(t);let a=n.length;if(Q$(e).length!==a)return!1;for(;a-- >0;)if(!vQ(t,e,r,n[a]))return!1;return!0}function up(t,e,r){const n=W$(t);let a=n.length;if(W$(e).length!==a)return!1;let i,o,c;for(;a-- >0;)if(i=n[a],!vQ(t,e,r,i)||(o=K$(t,i),c=K$(e,i),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function awe(t,e){return E0(t.valueOf(),e.valueOf())}function iwe(t,e){return t.source===e.source&&t.flags===e.flags}function Y$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let o,c;for(;(o=i.next())&&!o.done;){const d=e.values();let h=!1,m=0;for(;(c=d.next())&&!c.done;){if(!a[m]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[m]=!0;break}m++}if(!h)return!1}return!0}function Lb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function swe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function vQ(t,e,r,n){return(n===Q2e||n===K2e||n===W2e)&&(t.$$typeof||e.$$typeof)?!0:G2e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const owe="[object ArrayBuffer]",lwe="[object Arguments]",cwe="[object Boolean]",uwe="[object DataView]",dwe="[object Date]",hwe="[object Error]",fwe="[object Map]",mwe="[object Number]",pwe="[object Object]",gwe="[object RegExp]",xwe="[object Set]",ywe="[object String]",vwe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},bwe="[object URL]",wwe=Object.prototype.toString;function Swe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:m,areSetsEqual:p,areTypedArraysEqual:x,areUrlsEqual:y,unknownTagComparators:S}){return function(w,j,k){if(w===j)return!0;if(w==null||j==null)return!1;const I=typeof w;if(I!==typeof j)return!1;if(I!=="object")return I==="number"?c(w,j,k):I==="function"?i(w,j,k):!1;const L=w.constructor;if(L!==j.constructor)return!1;if(L===Object)return d(w,j,k);if(Array.isArray(w))return e(w,j,k);if(L===Date)return n(w,j,k);if(L===RegExp)return m(w,j,k);if(L===Map)return o(w,j,k);if(L===Set)return p(w,j,k);const O=wwe.call(w);if(O===dwe)return n(w,j,k);if(O===gwe)return m(w,j,k);if(O===fwe)return o(w,j,k);if(O===xwe)return p(w,j,k);if(O===pwe)return typeof w.then!="function"&&typeof j.then!="function"&&d(w,j,k);if(O===bwe)return y(w,j,k);if(O===hwe)return a(w,j,k);if(O===lwe)return d(w,j,k);if(vwe[O])return x(w,j,k);if(O===owe)return t(w,j,k);if(O===uwe)return r(w,j,k);if(O===cwe||O===mwe||O===ywe)return h(w,j,k);if(S){let R=S[O];if(!R){const A=H2e(w);A&&(R=S[A])}if(R)return R(w,j,k)}return!1}}function Nwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:X2e,areArraysEqual:r?up:Y2e,areDataViewsEqual:J2e,areDatesEqual:Z2e,areErrorsEqual:ewe,areFunctionsEqual:twe,areMapsEqual:r?x_(X$,up):X$,areNumbersEqual:rwe,areObjectsEqual:r?up:nwe,arePrimitiveWrappersEqual:awe,areRegExpsEqual:iwe,areSetsEqual:r?x_(Y$,up):Y$,areTypedArraysEqual:r?x_(Lb,up):Lb,areUrlsEqual:swe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Gy(n.areArraysEqual),i=Gy(n.areMapsEqual),o=Gy(n.areObjectsEqual),c=Gy(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:c})}return n}function _we(t){return function(e,r,n,a,i,o,c){return t(e,r,c)}}function Twe({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:m}=r();return e(c,d,{cache:h,equals:n,meta:m,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const jwe=Xu();Xu({strict:!0});Xu({circular:!0});Xu({circular:!0,strict:!0});Xu({createInternalComparator:()=>E0});Xu({strict:!0,createInternalComparator:()=>E0});Xu({circular:!0,createInternalComparator:()=>E0});Xu({circular:!0,createInternalComparator:()=>E0,strict:!0});function Xu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=Nwe(t),o=Swe(i),c=r?r(o):_we(o);return Twe({circular:e,comparator:o,createState:n,equals:c,strict:a})}function Awe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function J$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):Awe(a)};requestAnimationFrame(n)}function Gj(t){"@babel/helpers - typeof";return Gj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gj(t)}function Ewe(t){return Iwe(t)||Owe(t)||Cwe(t)||kwe()}function kwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cwe(t,e){if(t){if(typeof t=="string")return Z$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z$(t,e)}}function Z$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Owe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Iwe(t){if(Array.isArray(t))return t}function Rwe(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,c=Ewe(o),d=c[0],h=c.slice(1);if(typeof d=="number"){J$(a.bind(null,h),d);return}a(d),J$(a.bind(null,h));return}Gj(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(r),!0).forEach(function(n){bQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bQ(t,e,r){return e=Mwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mwe(t){var e=Dwe(t,"string");return Lg(e)==="symbol"?e:String(e)}function Dwe(t,e){if(Lg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pwe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Lwe=function(e){return e},Bwe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Lp=function(e,r){return Object.keys(r).reduce(function(n,a){return tz(tz({},n),{},bQ({},a,e(a,r[a])))},{})},rz=function(e,r,n){return e.map(function(a){return"".concat(Bwe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function $we(t,e){return Vwe(t)||Uwe(t,e)||wQ(t,e)||zwe()}function zwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Vwe(t){if(Array.isArray(t))return t}function Fwe(t){return Gwe(t)||Hwe(t)||wQ(t)||qwe()}function qwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wQ(t,e){if(t){if(typeof t=="string")return Wj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wj(t,e)}}function Hwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gwe(t){if(Array.isArray(t))return Wj(t)}function Wj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bb=1e-4,SQ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},NQ=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},nz=function(e,r){return function(n){var a=SQ(e,r);return NQ(a,n)}},Wwe=function(e,r){return function(n){var a=SQ(e,r),i=[].concat(Fwe(a.map(function(o,c){return o*c}).slice(1)),[0]);return NQ(i,n)}},az=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,c=1;break;case"ease":a=.25,i=.1,o=.25,c=1;break;case"ease-in":a=.42,i=0,o=1,c=1;break;case"ease-out":a=.42,i=0,o=.58,c=1;break;case"ease-in-out":a=0,i=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),m=$we(h,4);a=m[0],i=m[1],o=m[2],c=m[3]}}}var p=nz(a,o),x=nz(i,c),y=Wwe(a,o),S=function(j){return j>1?1:j<0?0:j},N=function(j){for(var k=j>1?1:j,I=k,L=0;L<8;++L){var O=p(I)-k,R=y(I);if(Math.abs(O-k)<Bb||R<Bb)return x(I);I=S(I-O/R)}return x(I)};return N.isStepper=!1,N},Kwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(m,p,x){var y=-(m-p)*n,S=x*i,N=x+(y-S)*c/1e3,w=x*c/1e3+m;return Math.abs(w-p)<Bb&&Math.abs(N)<Bb?[p,0]:[w,N]};return d.isStepper=!0,d.dt=c,d},Qwe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return az(a);case"spring":return Kwe();default:if(a.split("(")[0]==="cubic-bezier")return az(a)}return typeof a=="function"?a:null};function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function iz(t){return Jwe(t)||Ywe(t)||_Q(t)||Xwe()}function Xwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ywe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jwe(t){if(Array.isArray(t))return Qj(t)}function sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sz(Object(r),!0).forEach(function(n){Kj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kj(t,e,r){return e=Zwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zwe(t){var e=e4e(t,"string");return Bg(e)==="symbol"?e:String(e)}function e4e(t,e){if(Bg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t4e(t,e){return a4e(t)||n4e(t,e)||_Q(t,e)||r4e()}function r4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Q(t,e){if(t){if(typeof t=="string")return Qj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qj(t,e)}}function Qj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function a4e(t){if(Array.isArray(t))return t}var $b=function(e,r,n){return e+(r-e)*n},Xj=function(e){var r=e.from,n=e.to;return r!==n},i4e=function t(e,r,n){var a=Lp(function(i,o){if(Xj(o)){var c=e(o.from,o.to,o.velocity),d=t4e(c,2),h=d[0],m=d[1];return fi(fi({},o),{},{from:h,velocity:m})}return o},r);return n<1?Lp(function(i,o){return Xj(o)?fi(fi({},o),{},{velocity:$b(o.velocity,a[i].velocity,n),from:$b(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const s4e=(function(t,e,r,n,a){var i=Pwe(t,e),o=i.reduce(function(w,j){return fi(fi({},w),{},Kj({},j,[t[j],e[j]]))},{}),c=i.reduce(function(w,j){return fi(fi({},w),{},Kj({},j,{from:t[j],velocity:0,to:e[j]}))},{}),d=-1,h,m,p=function(){return null},x=function(){return Lp(function(j,k){return k.from},c)},y=function(){return!Object.values(c).filter(Xj).length},S=function(j){h||(h=j);var k=j-h,I=k/r.dt;c=i4e(r,c,I),a(fi(fi(fi({},t),e),x())),h=j,y()||(d=requestAnimationFrame(p))},N=function(j){m||(m=j);var k=(j-m)/n,I=Lp(function(O,R){return $b.apply(void 0,iz(R).concat([r(k)]))},o);if(a(fi(fi(fi({},t),e),I)),k<1)d=requestAnimationFrame(p);else{var L=Lp(function(O,R){return $b.apply(void 0,iz(R).concat([r(1)]))},o);a(fi(fi(fi({},t),e),L))}};return p=r.isStepper?S:N,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}});function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}var o4e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function l4e(t,e){if(t==null)return{};var r=c4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function c4e(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function y_(t){return f4e(t)||h4e(t)||d4e(t)||u4e()}function u4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d4e(t,e){if(t){if(typeof t=="string")return Yj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yj(t,e)}}function h4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function f4e(t){if(Array.isArray(t))return Yj(t)}function Yj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oz(Object(r),!0).forEach(function(n){Sp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sp(t,e,r){return e=TQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TQ(n.key),n)}}function g4e(t,e,r){return e&&p4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TQ(t){var e=x4e(t,"string");return yf(e)==="symbol"?e:String(e)}function x4e(t,e){if(yf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jj(t,e)}function Jj(t,e){return Jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jj(t,e)}function v4e(t){var e=b4e();return function(){var n=zb(t),a;if(e){var i=zb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Zj(this,a)}}function Zj(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eA(t)}function eA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(t)}var ll=(function(t){y4e(r,t);var e=v4e(r);function r(n,a){var i;m4e(this,r),i=e.call(this,n,a);var o=i.props,c=o.isActive,d=o.attributeName,h=o.from,m=o.to,p=o.steps,x=o.children,y=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(eA(i)),i.changeStyle=i.changeStyle.bind(eA(i)),!c||y<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:m}),Zj(i);if(p&&p.length)i.state={style:p[0].style};else if(h){if(typeof x=="function")return i.state={style:h},Zj(i);i.state={style:d?Sp({},d,h):h}}else i.state={style:{}};return i}return g4e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,m=i.to,p=i.from,x=this.state.style;if(c){if(!o){var y={style:d?Sp({},d,m):m};this.state&&x&&(d&&x[d]!==m||!d&&x!==m)&&this.setState(y);return}if(!(jwe(a.to,m)&&a.canBegin&&a.isActive)){var S=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var N=S||h?p:a.to;if(this.state&&x){var w={style:d?Sp({},d,N):N};(d&&x[d]!==N||!d&&x!==N)&&this.setState(w)}this.runAnimation(bo(bo({},this.props),{},{from:N,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,c=a.to,d=a.duration,h=a.easing,m=a.begin,p=a.onAnimationEnd,x=a.onAnimationStart,y=s4e(o,c,Qwe(h),d,this.changeStyle),S=function(){i.stopJSAnimation=y()};this.manager.start([x,m,S,d,p])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],m=h.style,p=h.duration,x=p===void 0?0:p,y=function(N,w,j){if(j===0)return N;var k=w.duration,I=w.easing,L=I===void 0?"ease":I,O=w.style,R=w.properties,A=w.onAnimationEnd,E=j>0?o[j-1]:w,C=R||Object.keys(O);if(typeof L=="function"||L==="spring")return[].concat(y_(N),[i.runJSAnimation.bind(i,{from:E.style,to:O,duration:k,easing:L}),k]);var U=rz(C,k,L),P=bo(bo(bo({},E.style),O),{},{transition:U});return[].concat(y_(N),[P,k,A]).filter(Lwe)};return this.manager.start([d].concat(y_(o.reduce(y,[m,Math.max(x,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Rwe());var i=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,m=a.onAnimationStart,p=a.onAnimationEnd,x=a.steps,y=a.children,S=this.manager;if(this.unSubscribe=S.subscribe(this.handleStyleChange),typeof h=="function"||typeof y=="function"||h==="spring"){this.runJSAnimation(a);return}if(x.length>1){this.runStepAnimation(a);return}var N=c?Sp({},c,d):d,w=rz(Object.keys(N),o,h);S.start([m,i,bo(bo({},N),{},{transition:w}),o,p])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=l4e(a,o4e),h=T.Children.count(i),m=this.state.style;if(typeof i=="function")return i(m);if(!c||h===0||o<=0)return i;var p=function(y){var S=y.props,N=S.style,w=N===void 0?{}:N,j=S.className,k=T.cloneElement(y,bo(bo({},d),{},{style:bo(bo({},w),m),className:j}));return k};return h===1?p(T.Children.only(i)):se.createElement("div",null,T.Children.map(i,function(x){return p(x)}))}}]),r})(T.PureComponent);ll.displayName="Animate";ll.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ll.propTypes={from:on.oneOfType([on.object,on.string]),to:on.oneOfType([on.object,on.string]),attributeName:on.string,duration:on.number,begin:on.number,easing:on.oneOfType([on.string,on.func]),steps:on.arrayOf(on.shape({duration:on.number.isRequired,style:on.object.isRequired,easing:on.oneOfType([on.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),on.func]),properties:on.arrayOf("string"),onAnimationEnd:on.func})),children:on.oneOfType([on.node,on.func]),isActive:on.bool,canBegin:on.bool,onAnimationEnd:on.func,shouldReAnimate:on.bool,onAnimationStart:on.func,onAnimationReStart:on.func};function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function Ub(){return Ub=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ub.apply(this,arguments)}function w4e(t,e){return T4e(t)||_4e(t,e)||N4e(t,e)||S4e()}function S4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N4e(t,e){if(t){if(typeof t=="string")return lz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lz(t,e)}}function lz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function T4e(t){if(Array.isArray(t))return t}function cz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cz(Object(r),!0).forEach(function(n){j4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j4e(t,e,r){return e=A4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A4e(t){var e=E4e(t,"string");return $g(e)=="symbol"?e:e+""}function E4e(t,e){if($g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dz=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,m;if(o>0&&i instanceof Array){for(var p=[0,0,0,0],x=0,y=4;x<y;x++)p[x]=i[x]>o?o:i[x];m="M".concat(e,",").concat(r+c*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(h,",").concat(e+d*p[0],",").concat(r)),m+="L ".concat(e+n-d*p[1],",").concat(r),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*p[1])),m+="L ".concat(e+n,",").concat(r+a-c*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(h,`,
        `).concat(e+n-d*p[2],",").concat(r+a)),m+="L ".concat(e+d*p[3],",").concat(r+a),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*p[3])),m+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);m="M ".concat(e,",").concat(r+c*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+d*S,",").concat(r,`
            L `).concat(e+n-d*S,",").concat(r,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*S,`
            L `).concat(e+n,",").concat(r+a-c*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+n-d*S,",").concat(r+a,`
            L `).concat(e+d*S,",").concat(r+a,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*S," Z")}else m="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return m},k4e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),m=Math.max(i,i+c),p=Math.min(o,o+d),x=Math.max(o,o+d);return n>=h&&n<=m&&a>=p&&a<=x}return!1},C4e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},C7=function(e){var r=uz(uz({},C4e),e),n=T.useRef(),a=T.useState(-1),i=w4e(a,2),o=i[0],c=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,m=r.width,p=r.height,x=r.radius,y=r.className,S=r.animationEasing,N=r.animationDuration,w=r.animationBegin,j=r.isAnimationActive,k=r.isUpdateAnimationActive;if(d!==+d||h!==+h||m!==+m||p!==+p||m===0||p===0)return null;var I=gr("recharts-rectangle",y);return k?se.createElement(ll,{canBegin:o>0,from:{width:m,height:p,x:d,y:h},to:{width:m,height:p,x:d,y:h},duration:N,animationEasing:S,isActive:k},function(L){var O=L.width,R=L.height,A=L.x,E=L.y;return se.createElement(ll,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:N,isActive:j,easing:S},se.createElement("path",Ub({},Ft(r,!0),{className:I,d:dz(A,E,O,R,x),ref:n})))}):se.createElement("path",Ub({},Ft(r,!0),{className:I,d:dz(d,h,m,p,x)}))},O4e=["points","className","baseLinePoints","connectNulls"];function Th(){return Th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Th.apply(this,arguments)}function I4e(t,e){if(t==null)return{};var r=R4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function R4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function hz(t){return L4e(t)||P4e(t)||D4e(t)||M4e()}function M4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D4e(t,e){if(t){if(typeof t=="string")return tA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tA(t,e)}}function P4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function L4e(t){if(Array.isArray(t))return tA(t)}function tA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fz=function(e){return e&&e.x===+e.x&&e.y===+e.y},B4e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){fz(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),fz(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Bp=function(e,r){var n=B4e(e);r&&(n=[n.reduce(function(i,o){return[].concat(hz(i),hz(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},$4e=function(e,r,n){var a=Bp(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Bp(r.reverse(),n).slice(1))},jQ=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=I4e(e,O4e);if(!r||!r.length)return null;var c=gr("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=$4e(r,a,i);return se.createElement("g",{className:c},se.createElement("path",Th({},Ft(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?se.createElement("path",Th({},Ft(o,!0),{fill:"none",d:Bp(r,i)})):null,d?se.createElement("path",Th({},Ft(o,!0),{fill:"none",d:Bp(a,i)})):null)}var m=Bp(r,i);return se.createElement("path",Th({},Ft(o,!0),{fill:m.slice(-1)==="Z"?o.fill:"none",className:c,d:m}))};function rA(){return rA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rA.apply(this,arguments)}var kw=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=gr("recharts-dot",i);return r===+r&&n===+n&&a===+a?T.createElement("circle",rA({},Ft(e,!1),cb(e),{className:o,cx:r,cy:n,r:a})):null};function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}var z4e=["x","y","top","left","width","height","className"];function nA(){return nA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nA.apply(this,arguments)}function mz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function U4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(r),!0).forEach(function(n){V4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V4e(t,e,r){return e=F4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F4e(t){var e=q4e(t,"string");return zg(e)=="symbol"?e:e+""}function q4e(t,e){if(zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H4e(t,e){if(t==null)return{};var r=G4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function G4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var W4e=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},K4e=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,m=e.width,p=m===void 0?0:m,x=e.height,y=x===void 0?0:x,S=e.className,N=H4e(e,z4e),w=U4e({x:n,y:i,top:c,left:h,width:p,height:y},N);return!yt(n)||!yt(i)||!yt(p)||!yt(y)||!yt(c)||!yt(h)?null:se.createElement("path",nA({},Ft(w,!0),{className:gr("recharts-cross",S),d:W4e(n,i,p,y,c,h)}))},Q4e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function X4e(t,e){if(t==null)return{};var r=Y4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Y4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xc(){return xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xc.apply(this,arguments)}function pz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(r),!0).forEach(function(n){J4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J4e(t,e,r){return e=Z4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z4e(t){var e=e5e(t,"string");return Ug(e)=="symbol"?e:e+""}function e5e(t,e){if(Ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t5e=function(e,r,n,a){var i="";return a.forEach(function(o,c){var d=_n(r,n,e,o);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},r5e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.polarAngles,c=e.radialLines;if(!o||!o.length||!c)return null;var d=Vg({stroke:"#ccc"},Ft(e,!1));return se.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(h){var m=_n(r,n,a,h),p=_n(r,n,i,h);return se.createElement("line",xc({},d,{key:"line-".concat(h),x1:m.x,y1:m.y,x2:p.x,y2:p.y}))}))},n5e=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,o=Vg(Vg({stroke:"#ccc"},Ft(e,!1)),{},{fill:"none"});return se.createElement("circle",xc({},o,{className:gr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},a5e=function(e){var r=e.radius,n=e.index,a=Vg(Vg({stroke:"#ccc"},Ft(e,!1)),{},{fill:"none"});return se.createElement("path",xc({},a,{className:gr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:t5e(r,e.cx,e.cy,e.polarAngles)}))},i5e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:se.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?se.createElement(n5e,xc({key:o},e,{radius:a,index:i})):se.createElement(a5e,xc({key:o},e,{radius:a,index:i}))}))},AQ=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,o=e.innerRadius,c=o===void 0?0:o,d=e.outerRadius,h=d===void 0?0:d,m=e.gridType,p=m===void 0?"polygon":m,x=e.radialLines,y=x===void 0?!0:x,S=X4e(e,Q4e);return h<=0?null:se.createElement("g",{className:"recharts-polar-grid"},se.createElement(r5e,xc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:p,radialLines:y},S)),se.createElement(i5e,xc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:p,radialLines:y},S)))};AQ.displayName="PolarGrid";var v_,gz;function s5e(){if(gz)return v_;gz=1;var t=_w(),e=zK(),r=pl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return v_=n,v_}var o5e=s5e();const l5e=en(o5e);var b_,xz;function c5e(){if(xz)return b_;xz=1;var t=_w(),e=pl(),r=UK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return b_=n,b_}var u5e=c5e();const d5e=en(u5e);var h5e=["cx","cy","angle","ticks","axisLine"],f5e=["ticks","tick","angle","tickFormatter","stroke"];function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function $p(){return $p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$p.apply(this,arguments)}function yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Td(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yz(Object(r),!0).forEach(function(n){Cw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vz(t,e){if(t==null)return{};var r=m5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function m5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function p5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kQ(n.key),n)}}function g5e(t,e,r){return e&&bz(t.prototype,e),r&&bz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function x5e(t,e,r){return e=Vb(e),y5e(t,EQ()?Reflect.construct(e,r||[],Vb(t).constructor):e.apply(t,r))}function y5e(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v5e(t)}function v5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EQ=function(){return!!t})()}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vb(t)}function b5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aA(t,e)}function aA(t,e){return aA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},aA(t,e)}function Cw(t,e,r){return e=kQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kQ(t){var e=w5e(t,"string");return vf(e)=="symbol"?e:e+""}function w5e(t,e){if(vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bx=(function(t){function e(){return p5e(this,e),x5e(this,e,arguments)}return b5e(e,t),g5e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,c=i.cx,d=i.cy;return _n(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=l5e(c,function(m){return m.coordinate||0}),h=d5e(c,function(m){return m.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=vz(n,h5e),m=c.reduce(function(S,N){return[Math.min(S[0],N.coordinate),Math.max(S[1],N.coordinate)]},[1/0,-1/0]),p=_n(a,i,m[0],o),x=_n(a,i,m[1],o),y=Td(Td(Td({},Ft(h,!1)),{},{fill:"none"},Ft(d,!1)),{},{x1:p.x,y1:p.y,x2:x.x,y2:x.y});return se.createElement("line",$p({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,m=vz(a,f5e),p=this.getTickTextAnchor(),x=Ft(m,!1),y=Ft(o,!1),S=i.map(function(N,w){var j=n.getTickValueCoord(N),k=Td(Td(Td(Td({textAnchor:p,transform:"rotate(".concat(90-c,", ").concat(j.x,", ").concat(j.y,")")},x),{},{stroke:"none",fill:h},y),{},{index:w},j),{},{payload:N});return se.createElement(Kr,$p({className:gr("recharts-polar-radius-axis-tick",mQ(o)),key:"tick-".concat(N.coordinate)},h0(n.props,N,w)),e.renderTickItem(o,k,d?d(N.value,w):N.value))});return se.createElement(Kr,{className:"recharts-polar-radius-axis-ticks"},S)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:se.createElement(Kr,{className:gr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),pi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):rr(n)?o=n(a):o=se.createElement(ff,$p({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(T.PureComponent);Cw(Bx,"displayName","PolarRadiusAxis");Cw(Bx,"axisType","radiusAxis");Cw(Bx,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dd.apply(this,arguments)}function wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wz(Object(r),!0).forEach(function(n){Ow(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OQ(n.key),n)}}function N5e(t,e,r){return e&&Sz(t.prototype,e),r&&Sz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _5e(t,e,r){return e=Fb(e),T5e(t,CQ()?Reflect.construct(e,r||[],Fb(t).constructor):e.apply(t,r))}function T5e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j5e(t)}function j5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CQ=function(){return!!t})()}function Fb(t){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fb(t)}function A5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iA(t,e)}function iA(t,e){return iA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iA(t,e)}function Ow(t,e,r){return e=OQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OQ(t){var e=E5e(t,"string");return bf(e)=="symbol"?e:e+""}function E5e(t,e){if(bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var k5e=Math.PI/180,Nz=1e-5,$x=(function(t){function e(){return S5e(this,e),_5e(this,e,arguments)}return A5e(e,t),N5e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,m=h||8,p=_n(i,o,c,n.coordinate),x=_n(i,o,c+(d==="inner"?-1:1)*m,n.coordinate);return{x1:p.x,y1:p.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*k5e),o;return i>Nz?o=a==="outer"?"start":"end":i<-Nz?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=jd(jd({},Ft(this.props,!1)),{},{fill:"none"},Ft(c,!1));if(d==="circle")return se.createElement(kw,Dd({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:o}));var m=this.props.ticks,p=m.map(function(x){return _n(a,i,o,x.coordinate)});return se.createElement(jQ,Dd({className:"recharts-polar-angle-axis-line"},h,{points:p}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,m=Ft(this.props,!1),p=Ft(o,!1),x=jd(jd({},m),{},{fill:"none"},Ft(c,!1)),y=i.map(function(S,N){var w=n.getTickLineCoord(S),j=n.getTickTextAnchor(S),k=jd(jd(jd({textAnchor:j},m),{},{stroke:"none",fill:h},p),{},{index:N,payload:S,x:w.x2,y:w.y2});return se.createElement(Kr,Dd({className:gr("recharts-polar-angle-axis-tick",mQ(o)),key:"tick-".concat(S.coordinate)},h0(n.props,S,N)),c&&se.createElement("line",Dd({className:"recharts-polar-angle-axis-tick-line"},x,w)),o&&e.renderTickItem(o,k,d?d(S.value,N):S.value))});return se.createElement(Kr,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(Kr,{className:gr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):rr(n)?o=n(a):o=se.createElement(ff,Dd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(T.PureComponent);Ow($x,"displayName","PolarAngleAxis");Ow($x,"axisType","angleAxis");Ow($x,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var w_,_z;function C5e(){if(_z)return w_;_z=1;var t=$W(),e=t(Object.getPrototypeOf,Object);return w_=e,w_}var S_,Tz;function O5e(){if(Tz)return S_;Tz=1;var t=Sc(),e=C5e(),r=Nc(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,c=i.hasOwnProperty,d=o.call(Object);function h(m){if(!r(m)||t(m)!=n)return!1;var p=e(m);if(p===null)return!0;var x=c.call(p,"constructor")&&p.constructor;return typeof x=="function"&&x instanceof x&&o.call(x)==d}return S_=h,S_}var I5e=O5e();const R5e=en(I5e);var N_,jz;function M5e(){if(jz)return N_;jz=1;var t=Sc(),e=Nc(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return N_=n,N_}var D5e=M5e();const P5e=en(D5e);function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function qb(){return qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qb.apply(this,arguments)}function L5e(t,e){return U5e(t)||z5e(t,e)||$5e(t,e)||B5e()}function B5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $5e(t,e){if(t){if(typeof t=="string")return Az(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Az(t,e)}}function Az(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function U5e(t){if(Array.isArray(t))return t}function Ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(r),!0).forEach(function(n){V5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V5e(t,e,r){return e=F5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F5e(t){var e=q5e(t,"string");return Fg(e)=="symbol"?e:e+""}function q5e(t,e){if(Fg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cz=function(e,r,n,a,i){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+i),c+="L ".concat(e+n-o/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},H5e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},G5e=function(e){var r=kz(kz({},H5e),e),n=T.useRef(),a=T.useState(-1),i=L5e(a,2),o=i[0],c=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var I=n.current.getTotalLength();I&&c(I)}catch{}},[]);var d=r.x,h=r.y,m=r.upperWidth,p=r.lowerWidth,x=r.height,y=r.className,S=r.animationEasing,N=r.animationDuration,w=r.animationBegin,j=r.isUpdateAnimationActive;if(d!==+d||h!==+h||m!==+m||p!==+p||x!==+x||m===0&&p===0||x===0)return null;var k=gr("recharts-trapezoid",y);return j?se.createElement(ll,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:x,x:d,y:h},to:{upperWidth:m,lowerWidth:p,height:x,x:d,y:h},duration:N,animationEasing:S,isActive:j},function(I){var L=I.upperWidth,O=I.lowerWidth,R=I.height,A=I.x,E=I.y;return se.createElement(ll,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:N,easing:S},se.createElement("path",qb({},Ft(r,!0),{className:k,d:Cz(A,E,L,O,R),ref:n})))}):se.createElement("g",null,se.createElement("path",qb({},Ft(r,!0),{className:k,d:Cz(d,h,m,p,x)})))},W5e=["option","shapeType","propTransformer","activeClassName","isActive"];function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function K5e(t,e){if(t==null)return{};var r=Q5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Q5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Oz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Oz(Object(r),!0).forEach(function(n){X5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X5e(t,e,r){return e=Y5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y5e(t){var e=J5e(t,"string");return qg(e)=="symbol"?e:e+""}function J5e(t,e){if(qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z5e(t,e){return Hb(Hb({},e),t)}function e3e(t,e){return t==="symbols"}function Iz(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return se.createElement(C7,r);case"trapezoid":return se.createElement(G5e,r);case"sector":return se.createElement(yQ,r);case"symbols":if(e3e(e))return se.createElement(mw,r);break;default:return null}}function t3e(t){return T.isValidElement(t)?t.props:t}function sA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?Z5e:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,c=t.isActive,d=K5e(t,W5e),h;if(T.isValidElement(e))h=T.cloneElement(e,Hb(Hb({},d),t3e(e)));else if(rr(e))h=e(d);else if(R5e(e)&&!P5e(e)){var m=a(e,d);h=se.createElement(Iz,{shapeType:r,elementProps:m})}else{var p=d;h=se.createElement(Iz,{shapeType:r,elementProps:p})}return c?se.createElement(Kr,{className:o},h):h}function Iw(t,e){return e!=null&&"trapezoids"in t.props}function Rw(t,e){return e!=null&&"sectors"in t.props}function Hg(t,e){return e!=null&&"points"in t.props}function r3e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function n3e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function a3e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function i3e(t,e){var r;return Iw(t,e)?r=r3e:Rw(t,e)?r=n3e:Hg(t,e)&&(r=a3e),r}function s3e(t,e){var r;return Iw(t,e)?r="trapezoids":Rw(t,e)?r="sectors":Hg(t,e)&&(r="points"),r}function o3e(t,e){if(Iw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Rw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Hg(t,e)?e.payload:{}}function l3e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=s3e(r,e),i=o3e(r,e),o=n.filter(function(d,h){var m=Px(i,d),p=r.props[a].filter(function(S){var N=i3e(r,e);return N(S,e)}),x=r.props[a].indexOf(p[p.length-1]),y=h===x;return m&&y}),c=n.indexOf(o[o.length-1]);return c}var __,Rz;function c3e(){if(Rz)return __;Rz=1;function t(e){return e&&e.length?e[0]:void 0}return __=t,__}var T_,Mz;function u3e(){return Mz||(Mz=1,T_=c3e()),T_}var d3e=u3e();const h3e=en(d3e);var f3e=["key"];function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function m3e(t,e){if(t==null)return{};var r=p3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function p3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Gb(){return Gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gb.apply(this,arguments)}function Dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(r),!0).forEach(function(n){Fl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RQ(n.key),n)}}function x3e(t,e,r){return e&&Pz(t.prototype,e),r&&Pz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y3e(t,e,r){return e=Wb(e),v3e(t,IQ()?Reflect.construct(e,r||[],Wb(t).constructor):e.apply(t,r))}function v3e(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b3e(t)}function b3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IQ=function(){return!!t})()}function Wb(t){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wb(t)}function w3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oA(t,e)}function oA(t,e){return oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oA(t,e)}function Fl(t,e,r){return e=RQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RQ(t){var e=S3e(t,"string");return wf(e)=="symbol"?e:e+""}function S3e(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zx=(function(t){function e(){var r;g3e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=y3e(this,e,[].concat(a)),Fl(r,"state",{isAnimationFinished:!1}),Fl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),rr(o)&&o()}),Fl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),rr(o)&&o()}),Fl(r,"handleMouseEnter",function(o){var c=r.props.onMouseEnter;c&&c(r.props,o)}),Fl(r,"handleMouseLeave",function(o){var c=r.props.onMouseLeave;c&&c(r.props,o)}),r}return w3e(e,t),x3e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,c=Ft(this.props,!1),d=Ft(i,!0),h=n.map(function(m,p){var x=Pi(Pi(Pi({key:"dot-".concat(p),r:3},c),d),{},{dataKey:o,cx:m.x,cy:m.y,index:p,payload:m});return e.renderDotItem(i,x)});return se.createElement(Kr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,m;return se.isValidElement(i)?m=se.cloneElement(i,Pi(Pi({},this.props),{},{points:n})):rr(i)?m=i(Pi(Pi({},this.props),{},{points:n})):m=se.createElement(jQ,Gb({},Ft(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),se.createElement(Kr,{className:"recharts-radar-polygon"},m,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,m=a.animationId,p=this.state.prevPoints;return se.createElement(ll,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,S=p&&p.length/i.length,N=i.map(function(w,j){var k=p&&p[Math.floor(j*S)];if(k){var I=ts(k.x,w.x),L=ts(k.y,w.y);return Pi(Pi({},w),{},{x:I(y),y:L(y)})}var O=ts(w.cx,w.x),R=ts(w.cy,w.y);return Pi(Pi({},w),{},{x:O(y),y:R(y)})});return n.renderPolygonStatically(N)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!o&&(!c||!Px(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,c=n.isAnimationActive;if(a||!o||!o.length)return null;var d=this.state.isAnimationFinished,h=gr("recharts-radar",i);return se.createElement(Kr,{className:h},this.renderPolygon(),(!c||d)&&ic.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(rr(n))i=n(a);else{var o=a.key,c=m3e(a,f3e);i=se.createElement(kw,Gb({},c,{key:o,className:gr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(T.PureComponent);Fl(zx,"displayName","Radar");Fl(zx,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Fl(zx,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,o=r.cx,c=r.cy,d=!1,h=[],m=r.type!=="number"?i??0:0;n.forEach(function(x,y){var S=vi(x,r.dataKey,y),N=vi(x,a),w=r.scale(S)+m,j=Array.isArray(N)?gQ(N):N,k=hr(j)?void 0:e.scale(j);Array.isArray(N)&&N.length>=2&&(d=!0),h.push(Pi(Pi({},_n(o,c,k,w)),{},{name:S,value:N,cx:o,cy:c,radius:k,angle:w,payload:x}))});var p=[];return d&&h.forEach(function(x){if(Array.isArray(x.value)){var y=h3e(x.value),S=hr(y)?void 0:e.scale(y);p.push(Pi(Pi({},x),{},{radius:S},_n(o,c,S,x.angle)))}else p.push(x)}),{points:h,isRange:d,baseLinePoints:p}});var j_,Lz;function N3e(){if(Lz)return j_;Lz=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=i;return h}return j_=r,j_}var A_,Bz;function MQ(){if(Bz)return A_;Bz=1;var t=tK(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return A_=n,A_}var E_,$z;function _3e(){if($z)return E_;$z=1;var t=N3e(),e=xw(),r=MQ();function n(a){return function(i,o,c){return c&&typeof c!="number"&&e(i,o,c)&&(o=c=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),c=c===void 0?i<o?1:-1:r(c),t(i,o,c,a)}}return E_=n,E_}var k_,zz;function T3e(){if(zz)return k_;zz=1;var t=_3e(),e=t();return k_=e,k_}var j3e=T3e();const Kb=en(j3e);function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}function Uz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uz(Object(r),!0).forEach(function(n){DQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DQ(t,e,r){return e=A3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A3e(t){var e=E3e(t,"string");return Gg(e)=="symbol"?e:e+""}function E3e(t,e){if(Gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k3e=["Webkit","Moz","O","ms"],C3e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=k3e.reduce(function(i,o){return Vz(Vz({},i),{},DQ({},o+n,r))},{});return a[e]=r,a};function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qb.apply(this,arguments)}function Fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function C_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(r),!0).forEach(function(n){Ts(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LQ(n.key),n)}}function I3e(t,e,r){return e&&qz(t.prototype,e),r&&qz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function R3e(t,e,r){return e=Xb(e),M3e(t,PQ()?Reflect.construct(e,r||[],Xb(t).constructor):e.apply(t,r))}function M3e(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D3e(t)}function D3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PQ=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xb(t)}function P3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lA(t,e)}function lA(t,e){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lA(t,e)}function Ts(t,e,r){return e=LQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LQ(t){var e=L3e(t,"string");return Sf(e)=="symbol"?e:e+""}function L3e(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var B3e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=Dp().domain(Kb(0,d)).range([i,i+o-c]),m=h.domain().map(function(p){return h(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:m}},Hz=function(e){return e.changedTouches&&!!e.changedTouches.length},Nf=(function(t){function e(r){var n;return O3e(this,e),n=R3e(this,e,[r]),Ts(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ts(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ts(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,c=a.startIndex;o==null||o({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),Ts(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ts(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ts(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ts(n,"handleSlideDragStart",function(a){var i=Hz(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return P3e(e,t),I3e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,m=h.length-1,p=Math.min(a,i),x=Math.max(a,i),y=e.getIndexInRange(o,p),S=e.getIndexInRange(o,x);return{startIndex:y-y%d,endIndex:S===m?m:S-S%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,c=a.dataKey,d=vi(i[n],c,n);return rr(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,m=d.width,p=d.travellerWidth,x=d.startIndex,y=d.endIndex,S=d.onChange,N=n.pageX-i;N>0?N=Math.min(N,h+m-p-c,h+m-p-o):N<0&&(N=Math.max(N,h-o,h-c));var w=this.getIndex({startX:o+N,endX:c+N});(w.startIndex!==x||w.endIndex!==y)&&S&&S(w),this.setState({startX:o+N,endX:c+N,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=Hz(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],m=this.props,p=m.x,x=m.width,y=m.travellerWidth,S=m.onChange,N=m.gap,w=m.data,j={startX:this.state.startX,endX:this.state.endX},k=n.pageX-i;k>0?k=Math.min(k,p+x-y-h):k<0&&(k=Math.max(k,p-h)),j[o]=h+k;var I=this.getIndex(j),L=I.startIndex,O=I.endIndex,R=function(){var E=w.length-1;return o==="startX"&&(c>d?L%N===0:O%N===0)||c<d&&O===E||o==="endX"&&(c>d?O%N===0:L%N===0)||c>d&&O===E};this.setState(Ts(Ts({},o,h+k),"brushMoveStartX",n.pageX),function(){S&&R()&&S(I)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,m=this.state[a],p=c.indexOf(m);if(p!==-1){var x=p+n;if(!(x===-1||x>=c.length)){var y=c[x];a==="startX"&&y>=h||a==="endX"&&y<=d||this.setState(Ts({},a,y),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return se.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.data,h=n.children,m=n.padding,p=T.Children.only(h);return p?se.cloneElement(p,{x:a,y:i,width:o,height:c,margin:m,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,c=this,d=this.props,h=d.y,m=d.travellerWidth,p=d.height,x=d.traveller,y=d.ariaLabel,S=d.data,N=d.startIndex,w=d.endIndex,j=Math.max(n,this.props.x),k=C_(C_({},Ft(this.props,!1)),{},{x:j,y:h,width:m,height:p}),I=y||"Min value: ".concat((i=S[N])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=S[w])===null||o===void 0?void 0:o.name);return se.createElement(Kr,{tabIndex:0,role:"slider","aria-label":I,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(O){["ArrowLeft","ArrowRight"].includes(O.key)&&(O.preventDefault(),O.stopPropagation(),c.handleTravellerMoveKeyboard(O.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(x,k))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,m=Math.min(n,a)+h,p=Math.max(Math.abs(a-n)-h,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:m,y:o,width:p,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,m=this.state,p=m.startX,x=m.endX,y=5,S={pointerEvents:"none",fill:h};return se.createElement(Kr,{className:"recharts-brush-texts"},se.createElement(ff,Qb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,x)-y,y:o+c/2},S),this.getTextOfTick(a)),se.createElement(ff,Qb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,x)+d+y,y:o+c/2},S),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,c=n.x,d=n.y,h=n.width,m=n.height,p=n.alwaysShowText,x=this.state,y=x.startX,S=x.endX,N=x.isTextActive,w=x.isSlideMoving,j=x.isTravellerMoving,k=x.isTravellerFocused;if(!a||!a.length||!yt(c)||!yt(d)||!yt(h)||!yt(m)||h<=0||m<=0)return null;var I=gr("recharts-brush",i),L=se.Children.count(o)===1,O=C3e("userSelect","none");return se.createElement(Kr,{className:I,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:O},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(y,S),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(S,"endX"),(N||w||j||k||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:o,height:c,fill:d,stroke:"none"}),se.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):rr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,m=n.startIndex,p=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return C_({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},i&&i.length?B3e({data:i,width:o,x:c,travellerWidth:d,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var x=a.scale.domain().map(function(y){return a.scale(y)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,c=i-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(T.PureComponent);Ts(Nf,"displayName","Brush");Ts(Nf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var O_,Gz;function $3e(){if(Gz)return O_;Gz=1;var t=t7();function e(r,n){var a;return t(r,function(i,o,c){return a=n(i,o,c),!a}),!!a}return O_=e,O_}var I_,Wz;function z3e(){if(Wz)return I_;Wz=1;var t=IW(),e=pl(),r=$3e(),n=ds(),a=xw();function i(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return I_=i,I_}var U3e=z3e();const V3e=en(U3e);var rl=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},R_,Kz;function F3e(){if(Kz)return R_;Kz=1;var t=XW();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return R_=e,R_}var M_,Qz;function q3e(){if(Qz)return M_;Qz=1;var t=F3e(),e=KW(),r=pl();function n(a,i){var o={};return i=r(i,3),e(a,function(c,d,h){t(o,d,i(c,d,h))}),o}return M_=n,M_}var H3e=q3e();const G3e=en(H3e);var D_,Xz;function W3e(){if(Xz)return D_;Xz=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return D_=t,D_}var P_,Yz;function K3e(){if(Yz)return P_;Yz=1;var t=t7();function e(r,n){var a=!0;return t(r,function(i,o,c){return a=!!n(i,o,c),a}),a}return P_=e,P_}var L_,Jz;function Q3e(){if(Jz)return L_;Jz=1;var t=W3e(),e=K3e(),r=pl(),n=ds(),a=xw();function i(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return L_=i,L_}var X3e=Q3e();const BQ=en(X3e);var Y3e=["x","y"];function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function cA(){return cA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cA.apply(this,arguments)}function Zz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zz(Object(r),!0).forEach(function(n){J3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J3e(t,e,r){return e=Z3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z3e(t){var e=eSe(t,"string");return Wg(e)=="symbol"?e:e+""}function eSe(t,e){if(Wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tSe(t,e){if(t==null)return{};var r=rSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function nSe(t,e){var r=t.x,n=t.y,a=tSe(t,Y3e),i="".concat(r),o=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),m=parseInt(h,10),p="".concat(e.width||a.width),x=parseInt(p,10);return dp(dp(dp(dp(dp({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:m,width:x,name:e.name,radius:e.radius})}function eU(t){return se.createElement(sA,cA({shapeType:"rectangle",propTransformer:nSe,activeClassName:"recharts-active-bar"},t))}var aSe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=yt(n)||ofe(n);return i?e(n,a):(i||m0(),r)}},iSe=["value","background"],$Q;function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function sSe(t,e){if(t==null)return{};var r=oSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function oSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Yb(){return Yb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yb.apply(this,arguments)}function tU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ca(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(r),!0).forEach(function(n){vu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UQ(n.key),n)}}function cSe(t,e,r){return e&&rU(t.prototype,e),r&&rU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function uSe(t,e,r){return e=Jb(e),dSe(t,zQ()?Reflect.construct(e,r||[],Jb(t).constructor):e.apply(t,r))}function dSe(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hSe(t)}function hSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zQ=function(){return!!t})()}function Jb(t){return Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jb(t)}function fSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uA(t,e)}function uA(t,e){return uA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uA(t,e)}function vu(t,e,r){return e=UQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UQ(t){var e=mSe(t,"string");return _f(e)=="symbol"?e:e+""}function mSe(t,e){if(_f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ux=(function(t){function e(){var r;lSe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=uSe(this,e,[].concat(a)),vu(r,"state",{isAnimationFinished:!1}),vu(r,"id",Cx("recharts-bar-")),vu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),vu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return fSe(e,t),cSe(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,m=Ft(this.props,!1);return n&&n.map(function(p,x){var y=x===d,S=y?h:o,N=Ca(Ca(Ca({},m),p),{},{isActive:y,option:S,index:x,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(Kr,Yb({className:"recharts-bar-rectangle"},h0(a.props,p,x),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(x)}),se.createElement(eU,N))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,m=a.animationEasing,p=a.animationId,x=this.state.prevData;return se.createElement(ll,{begin:d,duration:h,isActive:c,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var S=y.t,N=i.map(function(w,j){var k=x&&x[j];if(k){var I=ts(k.x,w.x),L=ts(k.y,w.y),O=ts(k.width,w.width),R=ts(k.height,w.height);return Ca(Ca({},w),{},{x:I(S),y:L(S),width:O(S),height:R(S)})}if(o==="horizontal"){var A=ts(0,w.height),E=A(S);return Ca(Ca({},w),{},{y:w.y+w.height-E,height:E})}var C=ts(0,w.width),U=C(S);return Ca(Ca({},w),{},{width:U})});return se.createElement(Kr,null,n.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Px(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,c=a.activeIndex,d=Ft(this.props.background,!1);return i.map(function(h,m){h.value;var p=h.background,x=sSe(h,iSe);if(!p)return null;var y=Ca(Ca(Ca(Ca(Ca({},x),{},{fill:"#eee"},p),d),h0(n.props,h,m)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:m,className:"recharts-bar-background-rectangle"});return se.createElement(eU,Yb({key:"background-bar-".concat(m),option:n.props.background,isActive:m===c},y))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,m=i.children,p=Rs(m,Lx);if(!p)return null;var x=h==="vertical"?o[0].height/2:o[0].width/2,y=function(w,j){var k=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:k,errorVal:vi(w,j)}},S={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(Kr,S,p.map(function(N){return se.cloneElement(N,{key:"error-bar-".concat(a,"-").concat(N.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:x,dataPointFormatter:y})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,m=n.top,p=n.width,x=n.height,y=n.isAnimationActive,S=n.background,N=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,j=gr("recharts-bar",o),k=c&&c.allowDataOverflow,I=d&&d.allowDataOverflow,L=k||I,O=hr(N)?this.id:N;return se.createElement(Kr,{className:j},k||I?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(O)},se.createElement("rect",{x:k?h:h-p/2,y:I?m:m-x/2,width:k?p:p*2,height:I?x:x*2}))):null,se.createElement(Kr,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(O,")"):null},S?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,O),(!y||w)&&ic.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(T.PureComponent);$Q=Ux;vu(Ux,"displayName","Bar");vu(Ux,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});vu(Ux,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,m=t.dataStartIndex,p=t.displayedData,x=t.offset,y=Sbe(n,r);if(!y)return null;var S=e.layout,N=r.type.defaultProps,w=N!==void 0?Ca(Ca({},N),r.props):r.props,j=w.dataKey,k=w.children,I=w.minPointSize,L=S==="horizontal"?o:i,O=h?L.scale.domain():null,R=kbe({numericAxis:L}),A=Rs(k,a7),E=p.map(function(C,U){var P,$,B,G,K,H;h?P=Nbe(h[m+U],O):(P=vi(C,j),Array.isArray(P)||(P=[R,P]));var Z=aSe(I,$Q.defaultProps.minPointSize)(P[1],U);if(S==="horizontal"){var ae,he=[o.scale(P[0]),o.scale(P[1])],fe=he[0],Y=he[1];$=A$({axis:i,ticks:c,bandSize:a,offset:y.offset,entry:C,index:U}),B=(ae=Y??fe)!==null&&ae!==void 0?ae:void 0,G=y.size;var ne=fe-Y;if(K=Number.isNaN(ne)?0:ne,H={x:$,y:o.y,width:G,height:o.height},Math.abs(Z)>0&&Math.abs(K)<Math.abs(Z)){var re=To(K||Z)*(Math.abs(Z)-Math.abs(K));B-=re,K+=re}}else{var xe=[i.scale(P[0]),i.scale(P[1])],Te=xe[0],Ve=xe[1];if($=Te,B=A$({axis:o,ticks:d,bandSize:a,offset:y.offset,entry:C,index:U}),G=Ve-Te,K=y.size,H={x:i.x,y:B,width:i.width,height:K},Math.abs(Z)>0&&Math.abs(G)<Math.abs(Z)){var Ze=To(G||Z)*(Math.abs(Z)-Math.abs(G));G+=Ze}}return Ca(Ca(Ca({},C),{},{x:$,y:B,width:G,height:K,value:h?P:P[1],payload:C,background:H},A&&A[U]&&A[U].props),{},{tooltipPayload:[hQ(r,C)],tooltipPosition:{x:$+G/2,y:B+K/2}})});return Ca({data:E,layout:S},x)});function Kg(t){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(t)}function pSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VQ(n.key),n)}}function gSe(t,e,r){return e&&nU(t.prototype,e),r&&nU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function aU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function No(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(r),!0).forEach(function(n){Mw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mw(t,e,r){return e=VQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VQ(t){var e=xSe(t,"string");return Kg(e)=="symbol"?e:e+""}function xSe(t,e){if(Kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ySe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.layout,h=e.children,m=Object.keys(r),p={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},x=!!js(h,Ux);return m.reduce(function(y,S){var N=r[S],w=N.orientation,j=N.domain,k=N.padding,I=k===void 0?{}:k,L=N.mirror,O=N.reversed,R="".concat(w).concat(L?"Mirror":""),A,E,C,U,P;if(N.type==="number"&&(N.padding==="gap"||N.padding==="no-gap")){var $=j[1]-j[0],B=1/0,G=N.categoricalDomain.sort(dfe);if(G.forEach(function(xe,Te){Te>0&&(B=Math.min((xe||0)-(G[Te-1]||0),B))}),Number.isFinite(B)){var K=B/$,H=N.layout==="vertical"?n.height:n.width;if(N.padding==="gap"&&(A=K*H/2),N.padding==="no-gap"){var Z=jo(e.barCategoryGap,K*H),ae=K*H/2;A=ae-Z-(ae-Z)/H*Z}}}a==="xAxis"?E=[n.left+(I.left||0)+(A||0),n.left+n.width-(I.right||0)-(A||0)]:a==="yAxis"?E=d==="horizontal"?[n.top+n.height-(I.bottom||0),n.top+(I.top||0)]:[n.top+(I.top||0)+(A||0),n.top+n.height-(I.bottom||0)-(A||0)]:E=N.range,O&&(E=[E[1],E[0]]);var he=lQ(N,i,x),fe=he.scale,Y=he.realScaleType;fe.domain(j).range(E),cQ(fe);var ne=uQ(fe,No(No({},N),{},{realScaleType:Y}));a==="xAxis"?(P=w==="top"&&!L||w==="bottom"&&L,C=n.left,U=p[R]-P*N.height):a==="yAxis"&&(P=w==="left"&&!L||w==="right"&&L,C=p[R]-P*N.width,U=n.top);var re=No(No(No({},N),ne),{},{realScaleType:Y,x:C,y:U,scale:fe,width:a==="xAxis"?n.width:N.width,height:a==="yAxis"?n.height:N.height});return re.bandSize=Mb(re,ne),!N.hide&&a==="xAxis"?p[R]+=(P?-1:1)*re.height:N.hide||(p[R]+=(P?-1:1)*re.width),No(No({},y),{},Mw({},S,re))},{})},FQ=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},vSe=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return FQ({x:r,y:n},{x:a,y:i})},qQ=(function(){function t(e){pSe(this,t),this.scale=e}return gSe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();Mw(qQ,"EPS",1e-4);var O7=function(e){var r=Object.keys(e).reduce(function(n,a){return No(No({},n),{},Mw({},a,qQ.create(e[a])))},{});return No(No({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,c=i.position;return G3e(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return BQ(a,function(i,o){return r[o].isInRange(i)})}})};function bSe(t){return(t%180+180)%180}var wSe=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=bSe(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},B_,iU;function SSe(){if(iU)return B_;iU=1;var t=pl(),e=Ox(),r=pw();function n(a){return function(i,o,c){var d=Object(i);if(!e(i)){var h=t(o,3);i=r(i),o=function(p){return h(d[p],p,d)}}var m=a(i,o,c);return m>-1?d[h?i[m]:m]:void 0}}return B_=n,B_}var $_,sU;function NSe(){if(sU)return $_;sU=1;var t=MQ();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return $_=e,$_}var z_,oU;function _Se(){if(oU)return z_;oU=1;var t=FW(),e=pl(),r=NSe(),n=Math.max;function a(i,o,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(o,3),h)}return z_=a,z_}var U_,lU;function TSe(){if(lU)return U_;lU=1;var t=SSe(),e=_Se(),r=t(e);return U_=r,U_}var jSe=TSe();const ASe=en(jSe);var ESe=iW();const kSe=en(ESe);var CSe=kSe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),I7=T.createContext(void 0),R7=T.createContext(void 0),HQ=T.createContext(void 0),GQ=T.createContext({}),WQ=T.createContext(void 0),KQ=T.createContext(0),QQ=T.createContext(0),cU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,m=CSe(i);return se.createElement(I7.Provider,{value:n},se.createElement(R7.Provider,{value:a},se.createElement(GQ.Provider,{value:i},se.createElement(HQ.Provider,{value:m},se.createElement(WQ.Provider,{value:o},se.createElement(KQ.Provider,{value:h},se.createElement(QQ.Provider,{value:d},c)))))))},OSe=function(){return T.useContext(WQ)},XQ=function(e){var r=T.useContext(I7);r==null&&m0();var n=r[e];return n==null&&m0(),n},ISe=function(){var e=T.useContext(I7);return pu(e)},RSe=function(){var e=T.useContext(R7),r=ASe(e,function(n){return BQ(n.domain,Number.isFinite)});return r||pu(e)},YQ=function(e){var r=T.useContext(R7);r==null&&m0();var n=r[e];return n==null&&m0(),n},MSe=function(){var e=T.useContext(HQ);return e},DSe=function(){return T.useContext(GQ)},M7=function(){return T.useContext(QQ)},D7=function(){return T.useContext(KQ)};function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function PSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZQ(n.key),n)}}function BSe(t,e,r){return e&&LSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Se(t,e,r){return e=Zb(e),zSe(t,JQ()?Reflect.construct(e,r||[],Zb(t).constructor):e.apply(t,r))}function zSe(t,e){if(e&&(Tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return USe(t)}function USe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JQ=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zb(t)}function VSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dA(t,e)}function dA(t,e){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dA(t,e)}function uU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(r),!0).forEach(function(n){P7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function P7(t,e,r){return e=ZQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZQ(t){var e=FSe(t,"string");return Tf(e)=="symbol"?e:e+""}function FSe(t,e){if(Tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function qSe(t,e){return KSe(t)||WSe(t,e)||GSe(t,e)||HSe()}function HSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GSe(t,e){if(t){if(typeof t=="string")return hU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hU(t,e)}}function hU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function WSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function KSe(t){if(Array.isArray(t))return t}function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hA.apply(this,arguments)}var QSe=function(e,r){var n;return se.isValidElement(e)?n=se.cloneElement(e,r):rr(e)?n=e(r):n=se.createElement("line",hA({},r,{className:"recharts-reference-line-line"})),n},XSe=function(e,r,n,a,i,o,c,d,h){var m=i.x,p=i.y,x=i.width,y=i.height;if(n){var S=h.y,N=e.y.apply(S,{position:o});if(rl(h,"discard")&&!e.y.isInRange(N))return null;var w=[{x:m+x,y:N},{x:m,y:N}];return d==="left"?w.reverse():w}if(r){var j=h.x,k=e.x.apply(j,{position:o});if(rl(h,"discard")&&!e.x.isInRange(k))return null;var I=[{x:k,y:p+y},{x:k,y:p}];return c==="top"?I.reverse():I}if(a){var L=h.segment,O=L.map(function(R){return e.apply(R,{position:o})});return rl(h,"discard")&&V3e(O,function(R){return!e.isInRange(R)})?null:O}return null};function YSe(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=OSe(),m=XQ(a),p=YQ(i),x=MSe();if(!h||!x)return null;nc(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=O7({x:m.scale,y:p.scale}),S=Va(e),N=Va(r),w=n&&n.length===2,j=XSe(y,S,N,w,x,t.position,m.orientation,p.orientation,t);if(!j)return null;var k=qSe(j,2),I=k[0],L=I.x,O=I.y,R=k[1],A=R.x,E=R.y,C=rl(t,"hidden")?"url(#".concat(h,")"):void 0,U=dU(dU({clipPath:C},Ft(t,!0)),{},{x1:L,y1:O,x2:A,y2:E});return se.createElement(Kr,{className:gr("recharts-reference-line",c)},QSe(o,U),pi.renderCallByParent(t,vSe({x1:L,y1:O,x2:A,y2:E})))}var L7=(function(t){function e(){return PSe(this,e),$Se(this,e,arguments)}return VSe(e,t),BSe(e,[{key:"render",value:function(){return se.createElement(YSe,this.props)}}])})(se.Component);P7(L7,"displayName","ReferenceLine");P7(L7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function fA(){return fA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fA.apply(this,arguments)}function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function fU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(r),!0).forEach(function(n){Dw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tX(n.key),n)}}function e6e(t,e,r){return e&&ZSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function t6e(t,e,r){return e=e2(e),r6e(t,eX()?Reflect.construct(e,r||[],e2(t).constructor):e.apply(t,r))}function r6e(t,e){if(e&&(jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n6e(t)}function n6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eX=function(){return!!t})()}function e2(t){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e2(t)}function a6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mA(t,e)}function mA(t,e){return mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mA(t,e)}function Dw(t,e,r){return e=tX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tX(t){var e=i6e(t,"string");return jf(e)=="symbol"?e:e+""}function i6e(t,e){if(jf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var s6e=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=O7({x:a.scale,y:i.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return rl(e,"discard")&&!o.isInRange(c)?null:c},Pw=(function(t){function e(){return JSe(this,e),t6e(this,e,arguments)}return a6e(e,t),e6e(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=Va(a),m=Va(i);if(nc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!m)return null;var p=s6e(this.props);if(!p)return null;var x=p.x,y=p.y,S=this.props,N=S.shape,w=S.className,j=rl(this.props,"hidden")?"url(#".concat(d,")"):void 0,k=mU(mU({clipPath:j},Ft(this.props,!0)),{},{cx:x,cy:y});return se.createElement(Kr,{className:gr("recharts-reference-dot",w)},e.renderDot(N,k),pi.renderCallByParent(this.props,{x:x-o,y:y-o,width:2*o,height:2*o}))}}])})(se.Component);Dw(Pw,"displayName","ReferenceDot");Dw(Pw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Dw(Pw,"renderDot",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):rr(t)?r=t(e):r=se.createElement(kw,fA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function pA(){return pA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pA.apply(this,arguments)}function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function pU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(r),!0).forEach(function(n){Lw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nX(n.key),n)}}function c6e(t,e,r){return e&&l6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u6e(t,e,r){return e=t2(e),d6e(t,rX()?Reflect.construct(e,r||[],t2(t).constructor):e.apply(t,r))}function d6e(t,e){if(e&&(Af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h6e(t)}function h6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rX=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t2(t)}function f6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gA(t,e)}function gA(t,e){return gA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gA(t,e)}function Lw(t,e,r){return e=nX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nX(t){var e=m6e(t,"string");return Af(e)=="symbol"?e:e+""}function m6e(t,e){if(Af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var p6e=function(e,r,n,a,i){var o=i.x1,c=i.x2,d=i.y1,h=i.y2,m=i.xAxis,p=i.yAxis;if(!m||!p)return null;var x=O7({x:m.scale,y:p.scale}),y={x:e?x.x.apply(o,{position:"start"}):x.x.rangeMin,y:n?x.y.apply(d,{position:"start"}):x.y.rangeMin},S={x:r?x.x.apply(c,{position:"end"}):x.x.rangeMax,y:a?x.y.apply(h,{position:"end"}):x.y.rangeMax};return rl(i,"discard")&&(!x.isInRange(y)||!x.isInRange(S))?null:FQ(y,S)},Bw=(function(t){function e(){return o6e(this,e),u6e(this,e,arguments)}return f6e(e,t),c6e(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,m=n.clipPathId;nc(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Va(a),x=Va(i),y=Va(o),S=Va(c),N=this.props.shape;if(!p&&!x&&!y&&!S&&!N)return null;var w=p6e(p,x,y,S,this.props);if(!w&&!N)return null;var j=rl(this.props,"hidden")?"url(#".concat(m,")"):void 0;return se.createElement(Kr,{className:gr("recharts-reference-area",d)},e.renderRect(N,gU(gU({clipPath:j},Ft(this.props,!0)),w)),pi.renderCallByParent(this.props,w))}}])})(se.Component);Lw(Bw,"displayName","ReferenceArea");Lw(Bw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Lw(Bw,"renderRect",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):rr(t)?r=t(e):r=se.createElement(C7,pA({},e,{className:"recharts-reference-area-rect"})),r});function aX(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function g6e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return wSe(n,r)}function x6e(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function r2(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function y6e(t,e){return aX(t,e+1)}function v6e(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,m=o,p=function(){var S=n==null?void 0:n[d];if(S===void 0)return{v:aX(n,h)};var N=d,w,j=function(){return w===void 0&&(w=r(S,N)),w},k=S.coordinate,I=d===0||r2(t,k,j,m,c);I||(d=0,m=o,h+=1),I&&(m=k+t*(j()/2+a),d+=h)},x;h<=i.length;)if(x=p(),x)return x.v;return[]}function Qg(t){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(t)}function xU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xU(Object(r),!0).forEach(function(n){b6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b6e(t,e,r){return e=w6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w6e(t){var e=S6e(t,"string");return Qg(e)=="symbol"?e:e+""}function S6e(t,e){if(Qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N6e(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,c=e.start,d=e.end,h=function(x){var y=i[x],S,N=function(){return S===void 0&&(S=r(y,x)),S};if(x===o-1){var w=t*(y.coordinate+t*N()/2-d);i[x]=y=_i(_i({},y),{},{tickCoord:w>0?y.coordinate-w*t:y.coordinate})}else i[x]=y=_i(_i({},y),{},{tickCoord:y.coordinate});var j=r2(t,y.tickCoord,N,c,d);j&&(d=y.tickCoord-t*(N()/2+a),i[x]=_i(_i({},y),{},{isShow:!0}))},m=o-1;m>=0;m--)h(m);return i}function _6e(t,e,r,n,a,i){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(i){var m=n[c-1],p=r(m,c-1),x=t*(m.coordinate+t*p/2-h);o[c-1]=m=_i(_i({},m),{},{tickCoord:x>0?m.coordinate-x*t:m.coordinate});var y=r2(t,m.tickCoord,function(){return p},d,h);y&&(h=m.tickCoord-t*(p/2+a),o[c-1]=_i(_i({},m),{},{isShow:!0}))}for(var S=i?c-1:c,N=function(k){var I=o[k],L,O=function(){return L===void 0&&(L=r(I,k)),L};if(k===0){var R=t*(I.coordinate-t*O()/2-d);o[k]=I=_i(_i({},I),{},{tickCoord:R<0?I.coordinate-R*t:I.coordinate})}else o[k]=I=_i(_i({},I),{},{tickCoord:I.coordinate});var A=r2(t,I.tickCoord,O,d,h);A&&(d=I.tickCoord+t*(O()/2+a),o[k]=_i(_i({},I),{},{isShow:!0}))},w=0;w<S;w++)N(w);return o}function B7(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,m=t.unit,p=t.angle;if(!a||!a.length||!n)return[];if(yt(d)||T0.isSsr)return y6e(a,typeof d=="number"&&yt(d)?d:0);var x=[],y=c==="top"||c==="bottom"?"width":"height",S=m&&y==="width"?Mp(m,{fontSize:e,letterSpacing:r}):{width:0,height:0},N=function(I,L){var O=rr(h)?h(I.value,L):I.value;return y==="width"?g6e(Mp(O,{fontSize:e,letterSpacing:r}),S,p):Mp(O,{fontSize:e,letterSpacing:r})[y]},w=a.length>=2?To(a[1].coordinate-a[0].coordinate):1,j=x6e(i,w,y);return d==="equidistantPreserveStart"?v6e(w,j,N,a,o):(d==="preserveStart"||d==="preserveStartEnd"?x=_6e(w,j,N,a,o,d==="preserveStartEnd"):x=N6e(w,j,N,a,o),x.filter(function(k){return k.isShow}))}var T6e=["viewBox"],j6e=["viewBox"],A6e=["ticks"];function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function jh(){return jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jh.apply(this,arguments)}function yU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function La(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(r),!0).forEach(function(n){$7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V_(t,e){if(t==null)return{};var r=E6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function E6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function k6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sX(n.key),n)}}function C6e(t,e,r){return e&&vU(t.prototype,e),r&&vU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function O6e(t,e,r){return e=n2(e),I6e(t,iX()?Reflect.construct(e,r||[],n2(t).constructor):e.apply(t,r))}function I6e(t,e){if(e&&(Ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R6e(t)}function R6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iX=function(){return!!t})()}function n2(t){return n2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n2(t)}function M6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xA(t,e)}function xA(t,e){return xA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xA(t,e)}function $7(t,e,r){return e=sX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sX(t){var e=D6e(t,"string");return Ef(e)=="symbol"?e:e+""}function D6e(t,e){if(Ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zf=(function(t){function e(r){var n;return k6e(this,e),n=O6e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return M6e(e,t),C6e(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=V_(n,T6e),c=this.props,d=c.viewBox,h=V_(c,j6e);return!Lh(i,d)||!Lh(o,h)||!Lh(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,m=a.tickSize,p=a.mirror,x=a.tickMargin,y,S,N,w,j,k,I=p?-1:1,L=n.tickSize||m,O=yt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":y=S=n.coordinate,w=o+ +!p*d,N=w-I*L,k=N-I*x,j=O;break;case"left":N=w=n.coordinate,S=i+ +!p*c,y=S-I*L,j=y-I*x,k=O;break;case"right":N=w=n.coordinate,S=i+ +p*c,y=S+I*L,j=y+I*x,k=O;break;default:y=S=n.coordinate,w=o+ +p*d,N=w+I*L,k=N+I*x,j=O;break}return{line:{x1:y,y1:N,x2:S,y2:w},tick:{x:j,y:k}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,m=n.axisLine,p=La(La(La({},Ft(this.props,!1)),Ft(m,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var x=+(d==="top"&&!h||d==="bottom"&&h);p=La(La({},p),{},{x1:a,y1:i+x*c,x2:a+o,y2:i+x*c})}else{var y=+(d==="left"&&!h||d==="right"&&h);p=La(La({},p),{},{x1:a+y*o,y1:i,x2:a+y*o,y2:i+c})}return se.createElement("line",jh({},p,{className:gr("recharts-cartesian-axis-line",no(m,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,c=this.props,d=c.tickLine,h=c.stroke,m=c.tick,p=c.tickFormatter,x=c.unit,y=B7(La(La({},this.props),{},{ticks:n}),a,i),S=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),w=Ft(this.props,!1),j=Ft(m,!1),k=La(La({},w),{},{fill:"none"},Ft(d,!1)),I=y.map(function(L,O){var R=o.getTickLineCoord(L),A=R.line,E=R.tick,C=La(La(La(La({textAnchor:S,verticalAnchor:N},w),{},{stroke:"none",fill:h},j),E),{},{index:O,payload:L,visibleTicksCount:y.length,tickFormatter:p});return se.createElement(Kr,jh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},h0(o.props,L,O)),d&&se.createElement("line",jh({},k,A,{className:gr("recharts-cartesian-axis-tick-line",no(d,"className"))})),m&&e.renderTickItem(m,C,"".concat(rr(p)?p(L.value,O):L.value).concat(x||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},I)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,m=a.hide;if(m)return null;var p=this.props,x=p.ticks,y=V_(p,A6e),S=x;return rr(d)&&(S=x&&x.length>0?d(this.props):d(y)),o<=0||c<=0||!S||!S.length?null:se.createElement(Kr,{className:gr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(S,this.state.fontSize,this.state.letterSpacing),pi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,c=gr(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?o=se.cloneElement(n,La(La({},a),{},{className:c})):rr(n)?o=n(La(La({},a),{},{className:c})):o=se.createElement(ff,jh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(T.Component);$7(Zf,"displayName","CartesianAxis");$7(Zf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var P6e=["x1","y1","x2","y2","key"],L6e=["offset"];function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}function bU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ji(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(r),!0).forEach(function(n){B6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function B6e(t,e,r){return e=$6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $6e(t){var e=z6e(t,"string");return p0(e)=="symbol"?e:e+""}function z6e(t,e){if(p0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(p0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zd.apply(this,arguments)}function wU(t,e){if(t==null)return{};var r=U6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function U6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var V6e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,c=e.height,d=e.ry;return se.createElement("rect",{x:a,y:i,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function oX(t,e){var r;if(se.isValidElement(t))r=se.cloneElement(t,e);else if(rr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,c=e.key,d=wU(e,P6e),h=Ft(d,!1);h.offset;var m=wU(h,L6e);r=se.createElement("line",zd({},m,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:c}))}return r}function F6e(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=ji(ji({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return oX(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function q6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=ji(ji({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return oX(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function H6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var m=c.map(function(x){return Math.round(x+a-a)}).sort(function(x,y){return x-y});a!==m[0]&&m.unshift(0);var p=m.map(function(x,y){var S=!m[y+1],N=S?a+o-x:m[y+1]-x;if(N<=0)return null;var w=y%e.length;return se.createElement("rect",{key:"react-".concat(y),y:x,x:n,height:N,width:i,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function G6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var m=h.map(function(x){return Math.round(x+i-i)}).sort(function(x,y){return x-y});i!==m[0]&&m.unshift(0);var p=m.map(function(x,y){var S=!m[y+1],N=S?i+c-x:m[y+1]-x;if(N<=0)return null;var w=y%n.length;return se.createElement("rect",{key:"react-".concat(y),x,y:o,width:N,height:d,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var W6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return oQ(B7(ji(ji(ji({},Zf.defaultProps),n),{},{ticks:Jl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},K6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return oQ(B7(ji(ji(ji({},Zf.defaultProps),n),{},{ticks:Jl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},ph={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function lX(t){var e,r,n,a,i,o,c=M7(),d=D7(),h=DSe(),m=ji(ji({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:ph.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:ph.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:ph.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:ph.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:ph.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:ph.verticalFill,x:yt(t.x)?t.x:h.left,y:yt(t.y)?t.y:h.top,width:yt(t.width)?t.width:h.width,height:yt(t.height)?t.height:h.height}),p=m.x,x=m.y,y=m.width,S=m.height,N=m.syncWithTicks,w=m.horizontalValues,j=m.verticalValues,k=ISe(),I=RSe();if(!yt(y)||y<=0||!yt(S)||S<=0||!yt(p)||p!==+p||!yt(x)||x!==+x)return null;var L=m.verticalCoordinatesGenerator||W6e,O=m.horizontalCoordinatesGenerator||K6e,R=m.horizontalPoints,A=m.verticalPoints;if((!R||!R.length)&&rr(O)){var E=w&&w.length,C=O({yAxis:I?ji(ji({},I),{},{ticks:E?w:I.ticks}):void 0,width:c,height:d,offset:h},E?!0:N);nc(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(p0(C),"]")),Array.isArray(C)&&(R=C)}if((!A||!A.length)&&rr(L)){var U=j&&j.length,P=L({xAxis:k?ji(ji({},k),{},{ticks:U?j:k.ticks}):void 0,width:c,height:d,offset:h},U?!0:N);nc(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(p0(P),"]")),Array.isArray(P)&&(A=P)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(V6e,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),se.createElement(F6e,zd({},m,{offset:h,horizontalPoints:R,xAxis:k,yAxis:I})),se.createElement(q6e,zd({},m,{offset:h,verticalPoints:A,xAxis:k,yAxis:I})),se.createElement(H6e,zd({},m,{horizontalPoints:R})),se.createElement(G6e,zd({},m,{verticalPoints:A})))}lX.displayName="CartesianGrid";function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function Q6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dX(n.key),n)}}function Y6e(t,e,r){return e&&X6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J6e(t,e,r){return e=a2(e),Z6e(t,cX()?Reflect.construct(e,r||[],a2(t).constructor):e.apply(t,r))}function Z6e(t,e){if(e&&(kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eNe(t)}function eNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cX=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a2(t)}function tNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yA(t,e)}function yA(t,e){return yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yA(t,e)}function uX(t,e,r){return e=dX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dX(t){var e=rNe(t,"string");return kf(e)=="symbol"?e:e+""}function rNe(t,e){if(kf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $w=(function(t){function e(){return Q6e(this,e),J6e(this,e,arguments)}return tNe(e,t),Y6e(e,[{key:"render",value:function(){return null}}])})(T.Component);uX($w,"displayName","ZAxis");uX($w,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var nNe=["option","isActive"];function zp(){return zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zp.apply(this,arguments)}function aNe(t,e){if(t==null)return{};var r=iNe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sNe(t){var e=t.option,r=t.isActive,n=aNe(t,nNe);return typeof e=="string"?T.createElement(sA,zp({option:T.createElement(mw,zp({type:e},n)),isActive:r,shapeType:"symbols"},n)):T.createElement(sA,zp({option:e,isActive:r,shapeType:"symbols"},n))}function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function Up(){return Up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Up.apply(this,arguments)}function SU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Js(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SU(Object(r),!0).forEach(function(n){bu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fX(n.key),n)}}function lNe(t,e,r){return e&&NU(t.prototype,e),r&&NU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cNe(t,e,r){return e=i2(e),uNe(t,hX()?Reflect.construct(e,r||[],i2(t).constructor):e.apply(t,r))}function uNe(t,e){if(e&&(Cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dNe(t)}function dNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hX=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i2(t)}function hNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vA(t,e)}function vA(t,e){return vA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vA(t,e)}function bu(t,e,r){return e=fX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fX(t){var e=fNe(t,"string");return Cf(e)=="symbol"?e:e+""}function fNe(t,e){if(Cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vx=(function(t){function e(){var r;oNe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=cNe(this,e,[].concat(a)),bu(r,"state",{isAnimationFinished:!1}),bu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),bu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),bu(r,"id",Cx("recharts-scatter-")),r}return hNe(e,t),lNe(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.activeShape,d=i.activeIndex,h=Ft(this.props,!1);return n.map(function(m,p){var x=d===p,y=x?c:o,S=Js(Js({},h),m);return se.createElement(Kr,Up({className:"recharts-scatter-symbol",key:"symbol-".concat(m==null?void 0:m.cx,"-").concat(m==null?void 0:m.cy,"-").concat(m==null?void 0:m.size,"-").concat(p)},h0(a.props,m,p),{role:"img"}),se.createElement(sNe,Up({option:y,isActive:x,key:"symbol-".concat(p)},S)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,m=a.animationId,p=this.state.prevPoints;return se.createElement(ll,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,S=i.map(function(N,w){var j=p&&p[w];if(j){var k=ts(j.cx,N.cx),I=ts(j.cy,N.cy),L=ts(j.size,N.size);return Js(Js({},N),{},{cx:k(y),cy:I(y),size:L(y)})}var O=ts(0,N.size);return Js(Js({},N),{},{size:O(y)})});return se.createElement(Kr,null,n.renderSymbolsStatically(S))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!Px(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,c=a.yAxis,d=a.children,h=Rs(d,Lx);return h?h.map(function(m,p){var x=m.props,y=x.direction,S=x.dataKey;return se.cloneElement(m,{key:"".concat(y,"-").concat(S,"-").concat(i[p]),data:i,xAxis:o,yAxis:c,layout:y==="x"?"vertical":"horizontal",dataPointFormatter:function(w,j){return{x:w.cx,y:w.cy,value:y==="x"?+w.node.x:+w.node.y,errorVal:vi(w,j)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,c=n.lineJointType,d=Ft(this.props,!1),h=Ft(i,!1),m,p;if(o==="joint")m=a.map(function(I){return{x:I.cx,y:I.cy}});else if(o==="fitting"){var x=ufe(a),y=x.xmin,S=x.xmax,N=x.a,w=x.b,j=function(L){return N*L+w};m=[{x:y,y:j(y)},{x:S,y:j(S)}]}var k=Js(Js(Js({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:m});return se.isValidElement(i)?p=se.cloneElement(i,k):rr(i)?p=i(k):p=se.createElement(Hj,Up({},k,{type:c})),se.createElement(Kr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,c=n.className,d=n.xAxis,h=n.yAxis,m=n.left,p=n.top,x=n.width,y=n.height,S=n.id,N=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,j=gr("recharts-scatter",c),k=d&&d.allowDataOverflow,I=h&&h.allowDataOverflow,L=k||I,O=hr(S)?this.id:S;return se.createElement(Kr,{className:j,clipPath:L?"url(#clipPath-".concat(O,")"):null},k||I?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(O)},se.createElement("rect",{x:k?m:m-x/2,y:I?p:p-y/2,width:k?x:x*2,height:I?y:y*2}))):null,o&&this.renderLine(),this.renderErrorBar(),se.createElement(Kr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!N||w)&&ic.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(T.PureComponent);bu(Vx,"displayName","Scatter");bu(Vx,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});bu(Vx,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,o=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,m=Rs(a.props.children,a7),p=hr(e.dataKey)?a.props.dataKey:e.dataKey,x=hr(r.dataKey)?a.props.dataKey:r.dataKey,y=n&&n.dataKey,S=n?n.range:$w.defaultProps.range,N=S&&S[0],w=e.scale.bandwidth?e.scale.bandwidth():0,j=r.scale.bandwidth?r.scale.bandwidth():0,k=i.map(function(I,L){var O=vi(I,p),R=vi(I,x),A=!hr(y)&&vi(I,y)||"-",E=[{name:hr(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:O,payload:I,dataKey:p,type:h},{name:hr(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:R,payload:I,dataKey:x,type:h}];A!=="-"&&E.push({name:n.name||n.dataKey,unit:n.unit||"",value:A,payload:I,dataKey:y,type:h});var C=j$({axis:e,ticks:o,bandSize:w,entry:I,index:L,dataKey:p}),U=j$({axis:r,ticks:c,bandSize:j,entry:I,index:L,dataKey:x}),P=A!=="-"?n.scale(A):N,$=Math.sqrt(Math.max(P,0)/Math.PI);return Js(Js({},I),{},{cx:C,cy:U,x:C-$,y:U-$,xAxis:e,yAxis:r,zAxis:n,width:2*$,height:2*$,size:P,node:{x:O,y:R,z:A},tooltipPayload:E,tooltipPosition:{x:C,y:U},payload:I},m&&m[L]&&m[L].props)});return Js({points:k},d)});function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function mNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gX(n.key),n)}}function gNe(t,e,r){return e&&pNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xNe(t,e,r){return e=s2(e),yNe(t,mX()?Reflect.construct(e,r||[],s2(t).constructor):e.apply(t,r))}function yNe(t,e){if(e&&(Of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vNe(t)}function vNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mX=function(){return!!t})()}function s2(t){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s2(t)}function bNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bA(t,e)}function bA(t,e){return bA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},bA(t,e)}function pX(t,e,r){return e=gX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gX(t){var e=wNe(t,"string");return Of(e)=="symbol"?e:e+""}function wNe(t,e){if(Of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function wA(){return wA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wA.apply(this,arguments)}function SNe(t){var e=t.xAxisId,r=M7(),n=D7(),a=XQ(e);return a==null?null:T.createElement(Zf,wA({},a,{className:gr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Jl(o,!0)}}))}var zw=(function(t){function e(){return mNe(this,e),xNe(this,e,arguments)}return bNe(e,t),gNe(e,[{key:"render",value:function(){return T.createElement(SNe,this.props)}}])})(T.Component);pX(zw,"displayName","XAxis");pX(zw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function NNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vX(n.key),n)}}function TNe(t,e,r){return e&&_Ne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jNe(t,e,r){return e=o2(e),ANe(t,xX()?Reflect.construct(e,r||[],o2(t).constructor):e.apply(t,r))}function ANe(t,e){if(e&&(If(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ENe(t)}function ENe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xX=function(){return!!t})()}function o2(t){return o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o2(t)}function kNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SA(t,e)}function SA(t,e){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},SA(t,e)}function yX(t,e,r){return e=vX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vX(t){var e=CNe(t,"string");return If(e)=="symbol"?e:e+""}function CNe(t,e){if(If(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NA.apply(this,arguments)}var ONe=function(e){var r=e.yAxisId,n=M7(),a=D7(),i=YQ(r);return i==null?null:T.createElement(Zf,NA({},i,{className:gr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Jl(c,!0)}}))},Uw=(function(t){function e(){return NNe(this,e),jNe(this,e,arguments)}return kNe(e,t),TNe(e,[{key:"render",value:function(){return T.createElement(ONe,this.props)}}])})(T.Component);yX(Uw,"displayName","YAxis");yX(Uw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _U(t){return DNe(t)||MNe(t)||RNe(t)||INe()}function INe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RNe(t,e){if(t){if(typeof t=="string")return _A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _A(t,e)}}function MNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DNe(t){if(Array.isArray(t))return _A(t)}function _A(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var TA=function(e,r,n,a,i){var o=Rs(e,L7),c=Rs(e,Pw),d=[].concat(_U(o),_U(c)),h=Rs(e,Bw),m="".concat(a,"Id"),p=a[0],x=r;if(d.length&&(x=d.reduce(function(N,w){if(w.props[m]===n&&rl(w.props,"extendDomain")&&yt(w.props[p])){var j=w.props[p];return[Math.min(N[0],j),Math.max(N[1],j)]}return N},x)),h.length){var y="".concat(p,"1"),S="".concat(p,"2");x=h.reduce(function(N,w){if(w.props[m]===n&&rl(w.props,"extendDomain")&&yt(w.props[y])&&yt(w.props[S])){var j=w.props[y],k=w.props[S];return[Math.min(N[0],j,k),Math.max(N[1],j,k)]}return N},x)}return i&&i.length&&(x=i.reduce(function(N,w){return yt(w)?[Math.min(N[0],w),Math.max(N[1],w)]:N},x)),x},F_={exports:{}},TU;function PNe(){return TU||(TU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,m){this.fn=d,this.context=h,this.once=m||!1}function i(d,h,m,p,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var y=new a(m,p||d,x),S=r?r+h:h;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],y]:d._events[S].push(y):(d._events[S]=y,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],m,p;if(this._eventsCount===0)return h;for(p in m=this._events)e.call(m,p)&&h.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},c.prototype.listeners=function(h){var m=r?r+h:h,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,y=p.length,S=new Array(y);x<y;x++)S[x]=p[x].fn;return S},c.prototype.listenerCount=function(h){var m=r?r+h:h,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(h,m,p,x,y,S){var N=r?r+h:h;if(!this._events[N])return!1;var w=this._events[N],j=arguments.length,k,I;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),j){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,p),!0;case 4:return w.fn.call(w.context,m,p,x),!0;case 5:return w.fn.call(w.context,m,p,x,y),!0;case 6:return w.fn.call(w.context,m,p,x,y,S),!0}for(I=1,k=new Array(j-1);I<j;I++)k[I-1]=arguments[I];w.fn.apply(w.context,k)}else{var L=w.length,O;for(I=0;I<L;I++)switch(w[I].once&&this.removeListener(h,w[I].fn,void 0,!0),j){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,m);break;case 3:w[I].fn.call(w[I].context,m,p);break;case 4:w[I].fn.call(w[I].context,m,p,x);break;default:if(!k)for(O=1,k=new Array(j-1);O<j;O++)k[O-1]=arguments[O];w[I].fn.apply(w[I].context,k)}}return!0},c.prototype.on=function(h,m,p){return i(this,h,m,p,!1)},c.prototype.once=function(h,m,p){return i(this,h,m,p,!0)},c.prototype.removeListener=function(h,m,p,x){var y=r?r+h:h;if(!this._events[y])return this;if(!m)return o(this,y),this;var S=this._events[y];if(S.fn)S.fn===m&&(!x||S.once)&&(!p||S.context===p)&&o(this,y);else{for(var N=0,w=[],j=S.length;N<j;N++)(S[N].fn!==m||x&&!S[N].once||p&&S[N].context!==p)&&w.push(S[N]);w.length?this._events[y]=w.length===1?w[0]:w:o(this,y)}return this},c.prototype.removeAllListeners=function(h){var m;return h?(m=r?r+h:h,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(F_)),F_.exports}var LNe=PNe();const BNe=en(LNe);var q_=new BNe,H_="recharts.syncMouseEvents";function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function $Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bX(n.key),n)}}function UNe(t,e,r){return e&&zNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function G_(t,e,r){return e=bX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bX(t){var e=VNe(t,"string");return Xg(e)=="symbol"?e:e+""}function VNe(t,e){if(Xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var FNe=(function(){function t(){$Ne(this,t),G_(this,"activeIndex",0),G_(this,"coordinateList",[]),G_(this,"layout","horizontal")}return UNe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,m=r.offset,p=m===void 0?null:m,x=r.mouseHandlerCallback,y=x===void 0?null:x;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,m=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=i+d+h,x=o+this.offset.top+c/2+m;this.mouseHandlerCallback({pageX:p,pageY:x})}}}])})();function qNe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&yt(n)&&yt(a))return!0}return!1}function HNe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function wX(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=_n(e,r,n,a),c=_n(e,r,n,i);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function GNe(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,m=e.outerRadius,p=e.angle,x=_n(c,d,h,p),y=_n(c,d,m,p);n=x.x,a=x.y,i=y.x,o=y.y}else return wX(e);return[{x:n,y:a},{x:i,y:o}]}function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function jU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(r),!0).forEach(function(n){WNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WNe(t,e,r){return e=KNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KNe(t){var e=QNe(t,"string");return Yg(e)=="symbol"?e:e+""}function QNe(t,e){if(Yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XNe(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,m=t.tooltipAxisBandSize,p=t.layout,x=t.chartName,y=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!y||!i||!o||x!=="ScatterChart"&&a!=="axis")return null;var S,N=Hj;if(x==="ScatterChart")S=o,N=K4e;else if(x==="BarChart")S=HNe(p,o,d,m),N=C7;else if(p==="radial"){var w=wX(o),j=w.cx,k=w.cy,I=w.radius,L=w.startAngle,O=w.endAngle;S={cx:j,cy:k,startAngle:L,endAngle:O,innerRadius:I,outerRadius:I},N=yQ}else S={points:GNe(p,o,d)},N=Hj;var R=Wy(Wy(Wy(Wy({stroke:"#ccc",pointerEvents:"none"},d),S),Ft(y,!1)),{},{payload:c,payloadIndex:h,className:gr("recharts-tooltip-cursor",y.className)});return T.isValidElement(y)?T.cloneElement(y,R):T.createElement(N,R)}var YNe=["item"],JNe=["children","className","width","height","style","compact","title","desc"];function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ah.apply(this,arguments)}function AU(t,e){return t_e(t)||e_e(t,e)||NX(t,e)||ZNe()}function ZNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e_e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function t_e(t){if(Array.isArray(t))return t}function EU(t,e){if(t==null)return{};var r=r_e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r_e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function n_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a_e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_X(n.key),n)}}function i_e(t,e,r){return e&&a_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s_e(t,e,r){return e=l2(e),o_e(t,SX()?Reflect.construct(e,r||[],l2(t).constructor):e.apply(t,r))}function o_e(t,e){if(e&&(Rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l_e(t)}function l_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SX=function(){return!!t})()}function l2(t){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l2(t)}function c_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jA(t,e)}function jA(t,e){return jA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jA(t,e)}function Mf(t){return h_e(t)||d_e(t)||NX(t)||u_e()}function u_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NX(t,e){if(t){if(typeof t=="string")return AA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AA(t,e)}}function d_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function h_e(t){if(Array.isArray(t))return AA(t)}function AA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function We(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(r),!0).forEach(function(n){Qt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qt(t,e,r){return e=_X(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _X(t){var e=f_e(t,"string");return Rf(e)=="symbol"?e:e+""}function f_e(t,e){if(Rf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m_e={xAxis:["bottom","top"],yAxis:["left","right"]},p_e={width:"100%",height:"100%"},TX={x:0,y:0};function Ky(t){return t}var g_e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},x_e=function(e,r,n,a){var i=r.find(function(m){return m&&m.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,c=a.radius;return We(We(We({},a),_n(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=i.coordinate,h=a.angle;return We(We(We({},a),_n(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return TX},Vw=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(Mf(c),Mf(h)):c},[]);return o.length>0?o:e&&e.length&&yt(a)&&yt(i)?e.slice(a,i+1):[]};function jX(t){return t==="number"?[0,"auto"]:void 0}var EA=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,c=Vw(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var m,p=(m=h.props.data)!==null&&m!==void 0?m:r;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var x;if(o.dataKey&&!o.allowDuplicatedCategory){var y=p===void 0?c:p;x=lb(y,o.dataKey,a)}else x=p&&p[n]||c[n];return x?[].concat(Mf(d),[hQ(h,x)]):d},[])},CU=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=g_e(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,m=gbe(o,c,h,d);if(m>=0&&h){var p=h[m]&&h[m].value,x=EA(e,r,m,p),y=x_e(n,c,m,i);return{activeTooltipIndex:m,activeLabel:p,activePayload:x,activeCoordinate:y}}return null},y_e=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.layout,p=e.children,x=e.stackOffset,y=sQ(m,i);return n.reduce(function(S,N){var w,j=N.type.defaultProps!==void 0?We(We({},N.type.defaultProps),N.props):N.props,k=j.type,I=j.dataKey,L=j.allowDataOverflow,O=j.allowDuplicatedCategory,R=j.scale,A=j.ticks,E=j.includeHidden,C=j[o];if(S[C])return S;var U=Vw(e.data,{graphicalItems:a.filter(function(ne){var re,xe=o in ne.props?ne.props[o]:(re=ne.type.defaultProps)===null||re===void 0?void 0:re[o];return xe===C}),dataStartIndex:d,dataEndIndex:h}),P=U.length,$,B,G;qNe(j.domain,L,k)&&($=zj(j.domain,null,L),y&&(k==="number"||R!=="auto")&&(G=Pp(U,I,"category")));var K=jX(k);if(!$||$.length===0){var H,Z=(H=j.domain)!==null&&H!==void 0?H:K;if(I){if($=Pp(U,I,k),k==="category"&&y){var ae=cfe($);O&&ae?(B=$,$=Kb(0,P)):O||($=C$(Z,$,N).reduce(function(ne,re){return ne.indexOf(re)>=0?ne:[].concat(Mf(ne),[re])},[]))}else if(k==="category")O?$=$.filter(function(ne){return ne!==""&&!hr(ne)}):$=C$(Z,$,N).reduce(function(ne,re){return ne.indexOf(re)>=0||re===""||hr(re)?ne:[].concat(Mf(ne),[re])},[]);else if(k==="number"){var he=wbe(U,a.filter(function(ne){var re,xe,Te=o in ne.props?ne.props[o]:(re=ne.type.defaultProps)===null||re===void 0?void 0:re[o],Ve="hide"in ne.props?ne.props.hide:(xe=ne.type.defaultProps)===null||xe===void 0?void 0:xe.hide;return Te===C&&(E||!Ve)}),I,i,m);he&&($=he)}y&&(k==="number"||R!=="auto")&&(G=Pp(U,I,"category"))}else y?$=Kb(0,P):c&&c[C]&&c[C].hasStack&&k==="number"?$=x==="expand"?[0,1]:dQ(c[C].stackGroups,d,h):$=iQ(U,a.filter(function(ne){var re=o in ne.props?ne.props[o]:ne.type.defaultProps[o],xe="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return re===C&&(E||!xe)}),k,m,!0);if(k==="number")$=TA(p,$,C,i,A),Z&&($=zj(Z,$,L));else if(k==="category"&&Z){var fe=Z,Y=$.every(function(ne){return fe.indexOf(ne)>=0});Y&&($=fe)}}return We(We({},S),{},Qt({},C,We(We({},j),{},{axisType:i,domain:$,categoricalDomain:G,duplicateDomain:B,originalDomain:(w=j.domain)!==null&&w!==void 0?w:K,isCategorical:y,layout:m})))},{})},v_e=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.layout,p=e.children,x=Vw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),y=x.length,S=sQ(m,i),N=-1;return n.reduce(function(w,j){var k=j.type.defaultProps!==void 0?We(We({},j.type.defaultProps),j.props):j.props,I=k[o],L=jX("number");if(!w[I]){N++;var O;return S?O=Kb(0,y):c&&c[I]&&c[I].hasStack?(O=dQ(c[I].stackGroups,d,h),O=TA(p,O,I,i)):(O=zj(L,iQ(x,n.filter(function(R){var A,E,C=o in R.props?R.props[o]:(A=R.type.defaultProps)===null||A===void 0?void 0:A[o],U="hide"in R.props?R.props.hide:(E=R.type.defaultProps)===null||E===void 0?void 0:E.hide;return C===I&&!U}),"number",m),a.defaultProps.allowDataOverflow),O=TA(p,O,I,i)),We(We({},w),{},Qt({},I,We(We({axisType:i},a.defaultProps),{},{hide:!0,orientation:no(m_e,"".concat(i,".").concat(N%2),null),domain:O,originalDomain:L,isCategorical:S,layout:m})))}return w},{})},b_e=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,m=e.children,p="".concat(a,"Id"),x=Rs(m,i),y={};return x&&x.length?y=y_e(e,{axes:x,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(y=v_e(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),y},w_e=function(e){var r=pu(e),n=Jl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:r7(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Mb(r,n)}},OU=function(e){var r=e.children,n=e.defaultShowTooltip,a=js(r,Nf),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},S_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=rc(r&&r.type);return n&&n.indexOf("Bar")>=0})},IU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},N_e=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,m=n.height,p=n.children,x=n.margin||{},y=js(p,Nf),S=js(p,Bh),N=Object.keys(d).reduce(function(O,R){var A=d[R],E=A.orientation;return!A.mirror&&!A.hide?We(We({},O),{},Qt({},E,O[E]+A.width)):O},{left:x.left||0,right:x.right||0}),w=Object.keys(o).reduce(function(O,R){var A=o[R],E=A.orientation;return!A.mirror&&!A.hide?We(We({},O),{},Qt({},E,no(O,"".concat(E))+A.height)):O},{top:x.top||0,bottom:x.bottom||0}),j=We(We({},w),N),k=j.bottom;y&&(j.bottom+=y.props.height||Nf.defaultProps.height),S&&r&&(j=vbe(j,a,n,r));var I=h-j.left-j.right,L=m-j.top-j.bottom;return We(We({brushBottom:k},j),{},{width:Math.max(I,0),height:Math.max(L,0)})},__e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},AX=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,m=e.formatAxisMap,p=e.defaultProps,x=function(j,k){var I=k.graphicalItems,L=k.stackGroups,O=k.offset,R=k.updateId,A=k.dataStartIndex,E=k.dataEndIndex,C=j.barSize,U=j.layout,P=j.barGap,$=j.barCategoryGap,B=j.maxBarSize,G=IU(U),K=G.numericAxisName,H=G.cateAxisName,Z=S_e(I),ae=[];return I.forEach(function(he,fe){var Y=Vw(j.data,{graphicalItems:[he],dataStartIndex:A,dataEndIndex:E}),ne=he.type.defaultProps!==void 0?We(We({},he.type.defaultProps),he.props):he.props,re=ne.dataKey,xe=ne.maxBarSize,Te=ne["".concat(K,"Id")],Ve=ne["".concat(H,"Id")],Ze={},Xe=d.reduce(function(vt,et){var ce=k["".concat(et.axisType,"Map")],Ue=ne["".concat(et.axisType,"Id")];ce&&ce[Ue]||et.axisType==="zAxis"||m0();var Je=ce[Ue];return We(We({},vt),{},Qt(Qt({},et.axisType,Je),"".concat(et.axisType,"Ticks"),Jl(Je)))},Ze),ie=Xe[H],Be=Xe["".concat(H,"Ticks")],Q=L&&L[Te]&&L[Te].hasStack&&Cbe(he,L[Te].stackGroups),te=rc(he.type).indexOf("Bar")>=0,Ne=Mb(ie,Be),Se=[],Qe=Z&&xbe({barSize:C,stackGroups:L,totalSize:__e(Xe,H)});if(te){var nt,Ot,Me=hr(xe)?B:xe,lt=(nt=(Ot=Mb(ie,Be,!0))!==null&&Ot!==void 0?Ot:Me)!==null&&nt!==void 0?nt:0;Se=ybe({barGap:P,barCategoryGap:$,bandSize:lt!==Ne?lt:Ne,sizeList:Qe[Ve],maxBarSize:Me}),lt!==Ne&&(Se=Se.map(function(vt){return We(We({},vt),{},{position:We(We({},vt.position),{},{offset:vt.position.offset-lt/2})})}))}var St=he&&he.type&&he.type.getComposedData;St&&ae.push({props:We(We({},St(We(We({},Xe),{},{displayedData:Y,props:j,dataKey:re,item:he,bandSize:Ne,barPosition:Se,offset:O,stackedData:Q,layout:U,dataStartIndex:A,dataEndIndex:E}))),{},Qt(Qt(Qt({key:he.key||"item-".concat(fe)},K,Xe[K]),H,Xe[H]),"animationId",R)),childIndex:Sfe(he,j.children),item:he})}),ae},y=function(j,k){var I=j.props,L=j.dataStartIndex,O=j.dataEndIndex,R=j.updateId;if(!qD({props:I}))return null;var A=I.children,E=I.layout,C=I.stackOffset,U=I.data,P=I.reverseStackOrder,$=IU(E),B=$.numericAxisName,G=$.cateAxisName,K=Rs(A,n),H=Ebe(U,K,"".concat(B,"Id"),"".concat(G,"Id"),C,P),Z=d.reduce(function(ne,re){var xe="".concat(re.axisType,"Map");return We(We({},ne),{},Qt({},xe,b_e(I,We(We({},re),{},{graphicalItems:K,stackGroups:re.axisType===B&&H,dataStartIndex:L,dataEndIndex:O}))))},{}),ae=N_e(We(We({},Z),{},{props:I,graphicalItems:K}),k==null?void 0:k.legendBBox);Object.keys(Z).forEach(function(ne){Z[ne]=m(I,Z[ne],ae,ne.replace("Map",""),r)});var he=Z["".concat(G,"Map")],fe=w_e(he),Y=x(I,We(We({},Z),{},{dataStartIndex:L,dataEndIndex:O,updateId:R,graphicalItems:K,stackGroups:H,offset:ae}));return We(We({formattedGraphicalItems:Y,graphicalItems:K,offset:ae,stackGroups:H},fe),Z)},S=(function(w){function j(k){var I,L,O;return n_e(this,j),O=s_e(this,j,[k]),Qt(O,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Qt(O,"accessibilityManager",new FNe),Qt(O,"handleLegendBBoxUpdate",function(R){if(R){var A=O.state,E=A.dataStartIndex,C=A.dataEndIndex,U=A.updateId;O.setState(We({legendBBox:R},y({props:O.props,dataStartIndex:E,dataEndIndex:C,updateId:U},We(We({},O.state),{},{legendBBox:R}))))}}),Qt(O,"handleReceiveSyncEvent",function(R,A,E){if(O.props.syncId===R){if(E===O.eventEmitterSymbol&&typeof O.props.syncMethod!="function")return;O.applySyncEvent(A)}}),Qt(O,"handleBrushChange",function(R){var A=R.startIndex,E=R.endIndex;if(A!==O.state.dataStartIndex||E!==O.state.dataEndIndex){var C=O.state.updateId;O.setState(function(){return We({dataStartIndex:A,dataEndIndex:E},y({props:O.props,dataStartIndex:A,dataEndIndex:E,updateId:C},O.state))}),O.triggerSyncEvent({dataStartIndex:A,dataEndIndex:E})}}),Qt(O,"handleMouseEnter",function(R){var A=O.getMouseInfo(R);if(A){var E=We(We({},A),{},{isTooltipActive:!0});O.setState(E),O.triggerSyncEvent(E);var C=O.props.onMouseEnter;rr(C)&&C(E,R)}}),Qt(O,"triggeredAfterMouseMove",function(R){var A=O.getMouseInfo(R),E=A?We(We({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};O.setState(E),O.triggerSyncEvent(E);var C=O.props.onMouseMove;rr(C)&&C(E,R)}),Qt(O,"handleItemMouseEnter",function(R){O.setState(function(){return{isTooltipActive:!0,activeItem:R,activePayload:R.tooltipPayload,activeCoordinate:R.tooltipPosition||{x:R.cx,y:R.cy}}})}),Qt(O,"handleItemMouseLeave",function(){O.setState(function(){return{isTooltipActive:!1}})}),Qt(O,"handleMouseMove",function(R){R.persist(),O.throttleTriggeredAfterMouseMove(R)}),Qt(O,"handleMouseLeave",function(R){O.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};O.setState(A),O.triggerSyncEvent(A);var E=O.props.onMouseLeave;rr(E)&&E(A,R)}),Qt(O,"handleOuterEvent",function(R){var A=wfe(R),E=no(O.props,"".concat(A));if(A&&rr(E)){var C,U;/.*touch.*/i.test(A)?U=O.getMouseInfo(R.changedTouches[0]):U=O.getMouseInfo(R),E((C=U)!==null&&C!==void 0?C:{},R)}}),Qt(O,"handleClick",function(R){var A=O.getMouseInfo(R);if(A){var E=We(We({},A),{},{isTooltipActive:!0});O.setState(E),O.triggerSyncEvent(E);var C=O.props.onClick;rr(C)&&C(E,R)}}),Qt(O,"handleMouseDown",function(R){var A=O.props.onMouseDown;if(rr(A)){var E=O.getMouseInfo(R);A(E,R)}}),Qt(O,"handleMouseUp",function(R){var A=O.props.onMouseUp;if(rr(A)){var E=O.getMouseInfo(R);A(E,R)}}),Qt(O,"handleTouchMove",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&O.throttleTriggeredAfterMouseMove(R.changedTouches[0])}),Qt(O,"handleTouchStart",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&O.handleMouseDown(R.changedTouches[0])}),Qt(O,"handleTouchEnd",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&O.handleMouseUp(R.changedTouches[0])}),Qt(O,"handleDoubleClick",function(R){var A=O.props.onDoubleClick;if(rr(A)){var E=O.getMouseInfo(R);A(E,R)}}),Qt(O,"handleContextMenu",function(R){var A=O.props.onContextMenu;if(rr(A)){var E=O.getMouseInfo(R);A(E,R)}}),Qt(O,"triggerSyncEvent",function(R){O.props.syncId!==void 0&&q_.emit(H_,O.props.syncId,R,O.eventEmitterSymbol)}),Qt(O,"applySyncEvent",function(R){var A=O.props,E=A.layout,C=A.syncMethod,U=O.state.updateId,P=R.dataStartIndex,$=R.dataEndIndex;if(R.dataStartIndex!==void 0||R.dataEndIndex!==void 0)O.setState(We({dataStartIndex:P,dataEndIndex:$},y({props:O.props,dataStartIndex:P,dataEndIndex:$,updateId:U},O.state)));else if(R.activeTooltipIndex!==void 0){var B=R.chartX,G=R.chartY,K=R.activeTooltipIndex,H=O.state,Z=H.offset,ae=H.tooltipTicks;if(!Z)return;if(typeof C=="function")K=C(ae,R);else if(C==="value"){K=-1;for(var he=0;he<ae.length;he++)if(ae[he].value===R.activeLabel){K=he;break}}var fe=We(We({},Z),{},{x:Z.left,y:Z.top}),Y=Math.min(B,fe.x+fe.width),ne=Math.min(G,fe.y+fe.height),re=ae[K]&&ae[K].value,xe=EA(O.state,O.props.data,K),Te=ae[K]?{x:E==="horizontal"?ae[K].coordinate:Y,y:E==="horizontal"?ne:ae[K].coordinate}:TX;O.setState(We(We({},R),{},{activeLabel:re,activeCoordinate:Te,activePayload:xe,activeTooltipIndex:K}))}else O.setState(R)}),Qt(O,"renderCursor",function(R){var A,E=O.state,C=E.isTooltipActive,U=E.activeCoordinate,P=E.activePayload,$=E.offset,B=E.activeTooltipIndex,G=E.tooltipAxisBandSize,K=O.getTooltipEventType(),H=(A=R.props.active)!==null&&A!==void 0?A:C,Z=O.props.layout,ae=R.key||"_recharts-cursor";return se.createElement(XNe,{key:ae,activeCoordinate:U,activePayload:P,activeTooltipIndex:B,chartName:r,element:R,isActive:H,layout:Z,offset:$,tooltipAxisBandSize:G,tooltipEventType:K})}),Qt(O,"renderPolarAxis",function(R,A,E){var C=no(R,"type.axisType"),U=no(O.state,"".concat(C,"Map")),P=R.type.defaultProps,$=P!==void 0?We(We({},P),R.props):R.props,B=U&&U[$["".concat(C,"Id")]];return T.cloneElement(R,We(We({},B),{},{className:gr(C,B.className),key:R.key||"".concat(A,"-").concat(E),ticks:Jl(B,!0)}))}),Qt(O,"renderPolarGrid",function(R){var A=R.props,E=A.radialLines,C=A.polarAngles,U=A.polarRadius,P=O.state,$=P.radiusAxisMap,B=P.angleAxisMap,G=pu($),K=pu(B),H=K.cx,Z=K.cy,ae=K.innerRadius,he=K.outerRadius;return T.cloneElement(R,{polarAngles:Array.isArray(C)?C:Jl(K,!0).map(function(fe){return fe.coordinate}),polarRadius:Array.isArray(U)?U:Jl(G,!0).map(function(fe){return fe.coordinate}),cx:H,cy:Z,innerRadius:ae,outerRadius:he,key:R.key||"polar-grid",radialLines:E})}),Qt(O,"renderLegend",function(){var R=O.state.formattedGraphicalItems,A=O.props,E=A.children,C=A.width,U=A.height,P=O.props.margin||{},$=C-(P.left||0)-(P.right||0),B=nQ({children:E,formattedGraphicalItems:R,legendWidth:$,legendContent:h});if(!B)return null;var G=B.item,K=EU(B,YNe);return T.cloneElement(G,We(We({},K),{},{chartWidth:C,chartHeight:U,margin:P,onBBoxUpdate:O.handleLegendBBoxUpdate}))}),Qt(O,"renderTooltip",function(){var R,A=O.props,E=A.children,C=A.accessibilityLayer,U=js(E,Ho);if(!U)return null;var P=O.state,$=P.isTooltipActive,B=P.activeCoordinate,G=P.activePayload,K=P.activeLabel,H=P.offset,Z=(R=U.props.active)!==null&&R!==void 0?R:$;return T.cloneElement(U,{viewBox:We(We({},H),{},{x:H.left,y:H.top}),active:Z,label:K,payload:Z?G:[],coordinate:B,accessibilityLayer:C})}),Qt(O,"renderBrush",function(R){var A=O.props,E=A.margin,C=A.data,U=O.state,P=U.offset,$=U.dataStartIndex,B=U.dataEndIndex,G=U.updateId;return T.cloneElement(R,{key:R.key||"_recharts-brush",onChange:Fy(O.handleBrushChange,R.props.onChange),data:C,x:yt(R.props.x)?R.props.x:P.left,y:yt(R.props.y)?R.props.y:P.top+P.height+P.brushBottom-(E.bottom||0),width:yt(R.props.width)?R.props.width:P.width,startIndex:$,endIndex:B,updateId:"brush-".concat(G)})}),Qt(O,"renderReferenceElement",function(R,A,E){if(!R)return null;var C=O,U=C.clipPathId,P=O.state,$=P.xAxisMap,B=P.yAxisMap,G=P.offset,K=R.type.defaultProps||{},H=R.props,Z=H.xAxisId,ae=Z===void 0?K.xAxisId:Z,he=H.yAxisId,fe=he===void 0?K.yAxisId:he;return T.cloneElement(R,{key:R.key||"".concat(A,"-").concat(E),xAxis:$[ae],yAxis:B[fe],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:U})}),Qt(O,"renderActivePoints",function(R){var A=R.item,E=R.activePoint,C=R.basePoint,U=R.childIndex,P=R.isRange,$=[],B=A.props.key,G=A.item.type.defaultProps!==void 0?We(We({},A.item.type.defaultProps),A.item.props):A.item.props,K=G.activeDot,H=G.dataKey,Z=We(We({index:U,dataKey:H,cx:E.x,cy:E.y,r:4,fill:k7(A.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Ft(K,!1)),cb(K));return $.push(j.renderActiveDot(K,Z,"".concat(B,"-activePoint-").concat(U))),C?$.push(j.renderActiveDot(K,We(We({},Z),{},{cx:C.x,cy:C.y}),"".concat(B,"-basePoint-").concat(U))):P&&$.push(null),$}),Qt(O,"renderGraphicChild",function(R,A,E){var C=O.filterFormatItem(R,A,E);if(!C)return null;var U=O.getTooltipEventType(),P=O.state,$=P.isTooltipActive,B=P.tooltipAxis,G=P.activeTooltipIndex,K=P.activeLabel,H=O.props.children,Z=js(H,Ho),ae=C.props,he=ae.points,fe=ae.isRange,Y=ae.baseLine,ne=C.item.type.defaultProps!==void 0?We(We({},C.item.type.defaultProps),C.item.props):C.item.props,re=ne.activeDot,xe=ne.hide,Te=ne.activeBar,Ve=ne.activeShape,Ze=!!(!xe&&$&&Z&&(re||Te||Ve)),Xe={};U!=="axis"&&Z&&Z.props.trigger==="click"?Xe={onClick:Fy(O.handleItemMouseEnter,R.props.onClick)}:U!=="axis"&&(Xe={onMouseLeave:Fy(O.handleItemMouseLeave,R.props.onMouseLeave),onMouseEnter:Fy(O.handleItemMouseEnter,R.props.onMouseEnter)});var ie=T.cloneElement(R,We(We({},C.props),Xe));function Be(et){return typeof B.dataKey=="function"?B.dataKey(et.payload):null}if(Ze)if(G>=0){var Q,te;if(B.dataKey&&!B.allowDuplicatedCategory){var Ne=typeof B.dataKey=="function"?Be:"payload.".concat(B.dataKey.toString());Q=lb(he,Ne,K),te=fe&&Y&&lb(Y,Ne,K)}else Q=he==null?void 0:he[G],te=fe&&Y&&Y[G];if(Ve||Te){var Se=R.props.activeIndex!==void 0?R.props.activeIndex:G;return[T.cloneElement(R,We(We(We({},C.props),Xe),{},{activeIndex:Se})),null,null]}if(!hr(Q))return[ie].concat(Mf(O.renderActivePoints({item:C,activePoint:Q,basePoint:te,childIndex:G,isRange:fe})))}else{var Qe,nt=(Qe=O.getItemByXY(O.state.activeCoordinate))!==null&&Qe!==void 0?Qe:{graphicalItem:ie},Ot=nt.graphicalItem,Me=Ot.item,lt=Me===void 0?R:Me,St=Ot.childIndex,vt=We(We(We({},C.props),Xe),{},{activeIndex:St});return[T.cloneElement(lt,vt),null,null]}return fe?[ie,null,null]:[ie,null]}),Qt(O,"renderCustomized",function(R,A,E){return T.cloneElement(R,We(We({key:"recharts-customized-".concat(E)},O.props),O.state))}),Qt(O,"renderMap",{CartesianGrid:{handler:Ky,once:!0},ReferenceArea:{handler:O.renderReferenceElement},ReferenceLine:{handler:Ky},ReferenceDot:{handler:O.renderReferenceElement},XAxis:{handler:Ky},YAxis:{handler:Ky},Brush:{handler:O.renderBrush,once:!0},Bar:{handler:O.renderGraphicChild},Line:{handler:O.renderGraphicChild},Area:{handler:O.renderGraphicChild},Radar:{handler:O.renderGraphicChild},RadialBar:{handler:O.renderGraphicChild},Scatter:{handler:O.renderGraphicChild},Pie:{handler:O.renderGraphicChild},Funnel:{handler:O.renderGraphicChild},Tooltip:{handler:O.renderCursor,once:!0},PolarGrid:{handler:O.renderPolarGrid,once:!0},PolarAngleAxis:{handler:O.renderPolarAxis},PolarRadiusAxis:{handler:O.renderPolarAxis},Customized:{handler:O.renderCustomized}}),O.clipPathId="".concat((I=k.id)!==null&&I!==void 0?I:Cx("recharts"),"-clip"),O.throttleTriggeredAfterMouseMove=rK(O.triggeredAfterMouseMove,(L=k.throttleDelay)!==null&&L!==void 0?L:1e3/60),O.state={},O}return c_e(j,w),i_e(j,[{key:"componentDidMount",value:function(){var I,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var I=this.props,L=I.children,O=I.data,R=I.height,A=I.layout,E=js(L,Ho);if(E){var C=E.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,P=EA(this.state,O,C,U),$=this.state.tooltipTicks[C].coordinate,B=(this.state.offset.top+R)/2,G=A==="horizontal",K=G?{x:$,y:B}:{y:$,x:B},H=this.state.formattedGraphicalItems.find(function(ae){var he=ae.item;return he.type.name==="Scatter"});H&&(K=We(We({},K),H.props.points[C].tooltipPosition),P=H.props.points[C].tooltipPayload);var Z={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:U,activePayload:P,activeCoordinate:K};this.setState(Z),this.renderCursor(E),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(I,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==I.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==I.margin){var O,R;this.accessibilityManager.setDetails({offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(R=this.props.margin.top)!==null&&R!==void 0?R:0}})}return null}},{key:"componentDidUpdate",value:function(I){lj([js(I.children,Ho)],[js(this.props.children,Ho)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var I=js(this.props.children,Ho);if(I&&typeof I.props.shared=="boolean"){var L=I.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(I){if(!this.container)return null;var L=this.container,O=L.getBoundingClientRect(),R=lxe(O),A={chartX:Math.round(I.pageX-R.left),chartY:Math.round(I.pageY-R.top)},E=O.width/L.offsetWidth||1,C=this.inRange(A.chartX,A.chartY,E);if(!C)return null;var U=this.state,P=U.xAxisMap,$=U.yAxisMap,B=this.getTooltipEventType(),G=CU(this.state,this.props.data,this.props.layout,C);if(B!=="axis"&&P&&$){var K=pu(P).scale,H=pu($).scale,Z=K&&K.invert?K.invert(A.chartX):null,ae=H&&H.invert?H.invert(A.chartY):null;return We(We({},A),{},{xValue:Z,yValue:ae},G)}return G?We(We({},A),G):null}},{key:"inRange",value:function(I,L){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=this.props.layout,A=I/O,E=L/O;if(R==="horizontal"||R==="vertical"){var C=this.state.offset,U=A>=C.left&&A<=C.left+C.width&&E>=C.top&&E<=C.top+C.height;return U?{x:A,y:E}:null}var P=this.state,$=P.angleAxisMap,B=P.radiusAxisMap;if($&&B){var G=pu($);return R$({x:A,y:E},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var I=this.props.children,L=this.getTooltipEventType(),O=js(I,Ho),R={};O&&L==="axis"&&(O.props.trigger==="click"?R={onClick:this.handleClick}:R={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=cb(this.props,this.handleOuterEvent);return We(We({},A),R)}},{key:"addListener",value:function(){q_.on(H_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){q_.removeListener(H_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(I,L,O){for(var R=this.state.formattedGraphicalItems,A=0,E=R.length;A<E;A++){var C=R[A];if(C.item===I||C.props.key===I.key||L===rc(C.item.type)&&O===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var I=this.clipPathId,L=this.state.offset,O=L.left,R=L.top,A=L.height,E=L.width;return se.createElement("defs",null,se.createElement("clipPath",{id:I},se.createElement("rect",{x:O,y:R,height:A,width:E})))}},{key:"getXScales",value:function(){var I=this.state.xAxisMap;return I?Object.entries(I).reduce(function(L,O){var R=AU(O,2),A=R[0],E=R[1];return We(We({},L),{},Qt({},A,E.scale))},{}):null}},{key:"getYScales",value:function(){var I=this.state.yAxisMap;return I?Object.entries(I).reduce(function(L,O){var R=AU(O,2),A=R[0],E=R[1];return We(We({},L),{},Qt({},A,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(I){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[I])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(I){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[I])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(I){var L=this.state,O=L.formattedGraphicalItems,R=L.activeItem;if(O&&O.length)for(var A=0,E=O.length;A<E;A++){var C=O[A],U=C.props,P=C.item,$=P.type.defaultProps!==void 0?We(We({},P.type.defaultProps),P.props):P.props,B=rc(P.type);if(B==="Bar"){var G=(U.data||[]).find(function(ae){return k4e(I,ae)});if(G)return{graphicalItem:C,payload:G}}else if(B==="RadialBar"){var K=(U.data||[]).find(function(ae){return R$(I,ae)});if(K)return{graphicalItem:C,payload:K}}else if(Iw(C,R)||Rw(C,R)||Hg(C,R)){var H=l3e({graphicalItem:C,activeTooltipItem:R,itemData:$.data}),Z=$.activeIndex===void 0?H:$.activeIndex;return{graphicalItem:We(We({},C),{},{childIndex:Z}),payload:Hg(C,R)?$.data[H]:C.props.data[H]}}}return null}},{key:"render",value:function(){var I=this;if(!qD(this))return null;var L=this.props,O=L.children,R=L.className,A=L.width,E=L.height,C=L.style,U=L.compact,P=L.title,$=L.desc,B=EU(L,JNe),G=Ft(B,!1);if(U)return se.createElement(cU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(uj,Ah({},G,{width:A,height:E,title:P,desc:$}),this.renderClipPath(),GD(O,this.renderMap)));if(this.props.accessibilityLayer){var K,H;G.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,G.role=(H=this.props.role)!==null&&H!==void 0?H:"application",G.onKeyDown=function(ae){I.accessibilityManager.keyboardEvent(ae)},G.onFocus=function(){I.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return se.createElement(cU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",Ah({className:gr("recharts-wrapper",R),style:We({position:"relative",cursor:"default",width:A,height:E},C)},Z,{ref:function(he){I.container=he}}),se.createElement(uj,Ah({},G,{width:A,height:E,title:P,desc:$,style:p_e}),this.renderClipPath(),GD(O,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(T.Component);Qt(S,"displayName",r),Qt(S,"defaultProps",We({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Qt(S,"getDerivedStateFromProps",function(w,j){var k=w.dataKey,I=w.data,L=w.children,O=w.width,R=w.height,A=w.layout,E=w.stackOffset,C=w.margin,U=j.dataStartIndex,P=j.dataEndIndex;if(j.updateId===void 0){var $=OU(w);return We(We(We({},$),{},{updateId:0},y(We(We({props:w},$),{},{updateId:0}),j)),{},{prevDataKey:k,prevData:I,prevWidth:O,prevHeight:R,prevLayout:A,prevStackOffset:E,prevMargin:C,prevChildren:L})}if(k!==j.prevDataKey||I!==j.prevData||O!==j.prevWidth||R!==j.prevHeight||A!==j.prevLayout||E!==j.prevStackOffset||!Lh(C,j.prevMargin)){var B=OU(w),G={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},K=We(We({},CU(j,I,A)),{},{updateId:j.updateId+1}),H=We(We(We({},B),G),K);return We(We(We({},H),y(We({props:w},H),j)),{},{prevDataKey:k,prevData:I,prevWidth:O,prevHeight:R,prevLayout:A,prevStackOffset:E,prevMargin:C,prevChildren:L})}if(!lj(L,j.prevChildren)){var Z,ae,he,fe,Y=js(L,Nf),ne=Y&&(Z=(ae=Y.props)===null||ae===void 0?void 0:ae.startIndex)!==null&&Z!==void 0?Z:U,re=Y&&(he=(fe=Y.props)===null||fe===void 0?void 0:fe.endIndex)!==null&&he!==void 0?he:P,xe=ne!==U||re!==P,Te=!hr(I),Ve=Te&&!xe?j.updateId:j.updateId+1;return We(We({updateId:Ve},y(We(We({props:w},j),{},{updateId:Ve,dataStartIndex:ne,dataEndIndex:re}),j)),{},{prevChildren:L,dataStartIndex:ne,dataEndIndex:re})}return null}),Qt(S,"renderActiveDot",function(w,j,k){var I;return T.isValidElement(w)?I=T.cloneElement(w,j):rr(w)?I=w(j):I=se.createElement(kw,j),se.createElement(Kr,{className:"recharts-active-dot",key:k},I)});var N=T.forwardRef(function(j,k){return se.createElement(S,Ah({},j,{ref:k}))});return N.displayName=S.displayName,N},T_e=AX({chartName:"RadarChart",GraphicalChild:zx,axisComponents:[{axisType:"angleAxis",AxisComp:$x},{axisType:"radiusAxis",AxisComp:Bx}],formatAxisMap:Ube,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),j_e=AX({chartName:"ScatterChart",GraphicalChild:Vx,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:zw},{axisType:"yAxis",AxisComp:Uw},{axisType:"zAxis",AxisComp:$w}],formatAxisMap:ySe});const Fw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function em(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function z7(t){return"nodeType"in t}function Fi(t){var e,r;return t?em(t)?t:z7(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function U7(t){const{Document:e}=Fi(t);return t instanceof e}function Fx(t){return em(t)?!1:t instanceof Fi(t).HTMLElement}function EX(t){return t instanceof Fi(t).SVGElement}function tm(t){return t?em(t)?t.document:z7(t)?U7(t)?t:Fx(t)||EX(t)?t.ownerDocument:document:document:document}const yc=Fw?T.useLayoutEffect:T.useEffect;function qw(t){const e=T.useRef(t);return yc(()=>{e.current=t}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function A_e(){const t=T.useRef(null),e=T.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Jg(t,e){e===void 0&&(e=[t]);const r=T.useRef(t);return yc(()=>{r.current!==t&&(r.current=t)},e),r}function qx(t,e){const r=T.useRef();return T.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function c2(t){const e=qw(t),r=T.useRef(null),n=T.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function u2(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let W_={};function Hw(t,e){return T.useMemo(()=>{if(e)return e;const r=W_[t]==null?0:W_[t]+1;return W_[t]=r,t+"-"+r},[t,e])}function kX(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const c=Object.entries(o);for(const[d,h]of c){const m=i[d];m!=null&&(i[d]=m+t*h)}return i},{...e})}}const Uh=kX(1),d2=kX(-1);function E_e(t){return"clientX"in t&&"clientY"in t}function V7(t){if(!t)return!1;const{KeyboardEvent:e}=Fi(t.target);return e&&t instanceof e}function k_e(t){if(!t)return!1;const{TouchEvent:e}=Fi(t.target);return e&&t instanceof e}function Zg(t){if(k_e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return E_e(t)?{x:t.clientX,y:t.clientY}:null}const ex=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[ex.Translate.toString(t),ex.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),RU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function C_e(t){return t.matches(RU)?t:t.querySelector(RU)}const O_e={display:"none"};function I_e(t){let{id:e,value:r}=t;return se.createElement("div",{id:e,style:O_e},r)}function R_e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return se.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function M_e(){const[t,e]=T.useState("");return{announce:T.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const CX=T.createContext(null);function D_e(t){const e=T.useContext(CX);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function P_e(){const[t]=T.useState(()=>new Set),e=T.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[T.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[t]),e]}const L_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},B_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function $_e(t){let{announcements:e=B_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=L_e}=t;const{announce:i,announcement:o}=M_e(),c=Hw("DndLiveRegion"),[d,h]=T.useState(!1);if(T.useEffect(()=>{h(!0)},[]),D_e(T.useMemo(()=>({onDragStart(p){let{active:x}=p;i(e.onDragStart({active:x}))},onDragMove(p){let{active:x,over:y}=p;e.onDragMove&&i(e.onDragMove({active:x,over:y}))},onDragOver(p){let{active:x,over:y}=p;i(e.onDragOver({active:x,over:y}))},onDragEnd(p){let{active:x,over:y}=p;i(e.onDragEnd({active:x,over:y}))},onDragCancel(p){let{active:x,over:y}=p;i(e.onDragCancel({active:x,over:y}))}}),[i,e])),!d)return null;const m=se.createElement(se.Fragment,null,se.createElement(I_e,{id:n,value:a.draggable}),se.createElement(R_e,{id:c,announcement:o}));return r?xu.createPortal(m,r):m}var Ua;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ua||(Ua={}));function h2(){}function MU(t,e){return T.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function z_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return T.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Oo=Object.freeze({x:0,y:0});function U_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function V_e(t,e){const r=Zg(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function F_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function q_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function H_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function DU(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const G_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=DU(e,e.left,e.top),i=[];for(const o of n){const{id:c}=o,d=r.get(c);if(d){const h=U_e(DU(d),a);i.push({id:c,data:{droppableContainer:o,value:h}})}}return i.sort(F_e)};function W_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,m=o*c,p=m/(d+h-m);return Number(p.toFixed(4))}return 0}const K_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,c=r.get(o);if(c){const d=W_e(c,e);d>0&&a.push({id:o,data:{droppableContainer:i,value:d}})}}return a.sort(q_e)};function Q_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function OX(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Oo}function X_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const Y_e=X_e(1);function IX(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function J_e(t,e,r){const n=IX(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:c}=n,d=t.left-o-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),m=a?t.width/a:t.width,p=i?t.height/i:t.height;return{width:m,height:p,top:h,right:d+m,bottom:h+p,left:d}}const Z_e={ignoreTransform:!1};function Hx(t,e){e===void 0&&(e=Z_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:m}=Fi(t).getComputedStyle(t);h&&(r=J_e(r,h,m))}const{top:n,left:a,width:i,height:o,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:o,bottom:c,right:d}}function PU(t){return Hx(t,{ignoreTransform:!0})}function eTe(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function tTe(t,e){return e===void 0&&(e=Fi(t).getComputedStyle(t)),e.position==="fixed"}function rTe(t,e){e===void 0&&(e=Fi(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function F7(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(U7(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Fx(a)||EX(a)||r.includes(a))return r;const i=Fi(t).getComputedStyle(a);return a!==t&&rTe(a,i)&&r.push(a),tTe(a,i)?r:n(a.parentNode)}return t?n(t):r}function RX(t){const[e]=F7(t,1);return e??null}function K_(t){return!Fw||!t?null:em(t)?t:z7(t)?U7(t)||t===tm(t).scrollingElement?window:Fx(t)?t:null:null}function MX(t){return em(t)?t.scrollX:t.scrollLeft}function DX(t){return em(t)?t.scrollY:t.scrollTop}function kA(t){return{x:MX(t),y:DX(t)}}var ti;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ti||(ti={}));function PX(t){return!Fw||!t?!1:t===document.scrollingElement}function LX(t){const e={x:0,y:0},r=PX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const nTe={x:.2,y:.2};function aTe(t,e,r,n,a){let{top:i,left:o,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=nTe);const{isTop:h,isBottom:m,isLeft:p,isRight:x}=LX(t),y={x:0,y:0},S={x:0,y:0},N={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+N.height?(y.y=ti.Backward,S.y=n*Math.abs((e.top+N.height-i)/N.height)):!m&&d>=e.bottom-N.height&&(y.y=ti.Forward,S.y=n*Math.abs((e.bottom-N.height-d)/N.height)),!x&&c>=e.right-N.width?(y.x=ti.Forward,S.x=n*Math.abs((e.right-N.width-c)/N.width)):!p&&o<=e.left+N.width&&(y.x=ti.Backward,S.x=n*Math.abs((e.left+N.width-o)/N.width)),{direction:y,speed:S}}function iTe(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function BX(t){return t.reduce((e,r)=>Uh(e,kA(r)),Oo)}function sTe(t){return t.reduce((e,r)=>e+MX(r),0)}function oTe(t){return t.reduce((e,r)=>e+DX(r),0)}function $X(t,e){if(e===void 0&&(e=Hx),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);RX(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const lTe=[["x",["left","right"],sTe],["y",["top","bottom"],oTe]];class q7{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=F7(r),a=BX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,c]of lTe)for(const d of o)Object.defineProperty(this,d,{get:()=>{const h=c(n),m=a[i]-h;return this.rect[d]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Vp{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function cTe(t){const{EventTarget:e}=Fi(t);return t instanceof e?t:tm(t)}function Q_(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Zs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Zs||(Zs={}));function LU(t){t.preventDefault()}function uTe(t){t.stopPropagation()}var kn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(kn||(kn={}));const zX={start:[kn.Space,kn.Enter],cancel:[kn.Esc],end:[kn.Space,kn.Enter,kn.Tab]},dTe=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case kn.Right:return{...r,x:r.x+25};case kn.Left:return{...r,x:r.x-25};case kn.Down:return{...r,y:r.y+25};case kn.Up:return{...r,y:r.y-25}}};class UX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Vp(tm(r)),this.windowListeners=new Vp(Fi(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Zs.Resize,this.handleCancel),this.windowListeners.add(Zs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Zs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&$X(n),r(Oo)}handleKeyDown(e){if(V7(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=zX,coordinateGetter:o=dTe,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,m=h?{x:h.left,y:h.top}:Oo;this.referenceCoordinates||(this.referenceCoordinates=m);const p=o(e,{active:r,context:n.current,currentCoordinates:m});if(p){const x=d2(p,m),y={x:0,y:0},{scrollableAncestors:S}=n.current;for(const N of S){const w=e.code,{isTop:j,isRight:k,isLeft:I,isBottom:L,maxScroll:O,minScroll:R}=LX(N),A=iTe(N),E={x:Math.min(w===kn.Right?A.right-A.width/2:A.right,Math.max(w===kn.Right?A.left:A.left+A.width/2,p.x)),y:Math.min(w===kn.Down?A.bottom-A.height/2:A.bottom,Math.max(w===kn.Down?A.top:A.top+A.height/2,p.y))},C=w===kn.Right&&!k||w===kn.Left&&!I,U=w===kn.Down&&!L||w===kn.Up&&!j;if(C&&E.x!==p.x){const P=N.scrollLeft+x.x,$=w===kn.Right&&P<=O.x||w===kn.Left&&P>=R.x;if($&&!x.y){N.scrollTo({left:P,behavior:c});return}$?y.x=N.scrollLeft-P:y.x=w===kn.Right?N.scrollLeft-O.x:N.scrollLeft-R.x,y.x&&N.scrollBy({left:-y.x,behavior:c});break}else if(U&&E.y!==p.y){const P=N.scrollTop+x.y,$=w===kn.Down&&P<=O.y||w===kn.Up&&P>=R.y;if($&&!x.x){N.scrollTo({top:P,behavior:c});return}$?y.y=N.scrollTop-P:y.y=w===kn.Down?N.scrollTop-O.y:N.scrollTop-R.y,y.y&&N.scrollBy({top:-y.y,behavior:c});break}}this.handleMove(e,Uh(d2(p,this.referenceCoordinates),y))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}UX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=zX,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function BU(t){return!!(t&&"distance"in t)}function $U(t){return!!(t&&"delay"in t)}class H7{constructor(e,r,n){var a;n===void 0&&(n=cTe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=tm(o),this.documentListeners=new Vp(this.document),this.listeners=new Vp(n),this.windowListeners=new Vp(Fi(o)),this.initialCoordinates=(a=Zg(i))!=null?a:Oo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Zs.Resize,this.handleCancel),this.windowListeners.add(Zs.DragStart,LU),this.windowListeners.add(Zs.VisibilityChange,this.handleCancel),this.windowListeners.add(Zs.ContextMenu,LU),this.documentListeners.add(Zs.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if($U(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(BU(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Zs.Click,uTe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Zs.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=Zg(e))!=null?r:Oo,h=d2(a,d);if(!n&&c){if(BU(c)){if(c.tolerance!=null&&Q_(h,c.tolerance))return this.handleCancel();if(Q_(h,c.distance))return this.handleStart()}if($U(c)&&Q_(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===kn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const hTe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class G7 extends H7{constructor(e){const{event:r}=e,n=tm(r.target);super(e,hTe,n)}}G7.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const fTe={move:{name:"mousemove"},end:{name:"mouseup"}};var CA;(function(t){t[t.RightClick=2]="RightClick"})(CA||(CA={}));class mTe extends H7{constructor(e){super(e,fTe,tm(e.event.target))}}mTe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===CA.RightClick?!1:(n==null||n({event:r}),!0)}}];const X_={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class VX extends H7{constructor(e){super(e,X_)}static setup(){return window.addEventListener(X_.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(X_.move.name,e)};function e(){}}}VX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Fp;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Fp||(Fp={}));var f2;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(f2||(f2={}));function pTe(t){let{acceleration:e,activator:r=Fp.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:c=f2.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:m,delta:p,threshold:x}=t;const y=xTe({delta:p,disabled:!i}),[S,N]=A_e(),w=T.useRef({x:0,y:0}),j=T.useRef({x:0,y:0}),k=T.useMemo(()=>{switch(r){case Fp.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Fp.DraggableRect:return a}},[r,a,d]),I=T.useRef(null),L=T.useCallback(()=>{const R=I.current;if(!R)return;const A=w.current.x*j.current.x,E=w.current.y*j.current.y;R.scrollBy(A,E)},[]),O=T.useMemo(()=>c===f2.TreeOrder?[...h].reverse():h,[c,h]);T.useEffect(()=>{if(!i||!h.length||!k){N();return}for(const R of O){if((n==null?void 0:n(R))===!1)continue;const A=h.indexOf(R),E=m[A];if(!E)continue;const{direction:C,speed:U}=aTe(R,E,k,e,x);for(const P of["x","y"])y[P][C[P]]||(U[P]=0,C[P]=0);if(U.x>0||U.y>0){N(),I.current=R,S(L,o),w.current=U,j.current=C;return}}w.current={x:0,y:0},j.current={x:0,y:0},N()},[e,L,n,N,i,o,JSON.stringify(k),JSON.stringify(y),S,h,O,m,JSON.stringify(x)])}const gTe={x:{[ti.Backward]:!1,[ti.Forward]:!1},y:{[ti.Backward]:!1,[ti.Forward]:!1}};function xTe(t){let{delta:e,disabled:r}=t;const n=u2(e);return qx(a=>{if(r||!n||!a)return gTe;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[ti.Backward]:a.x[ti.Backward]||i.x===-1,[ti.Forward]:a.x[ti.Forward]||i.x===1},y:{[ti.Backward]:a.y[ti.Backward]||i.y===-1,[ti.Forward]:a.y[ti.Forward]||i.y===1}}},[r,e,n])}function yTe(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return qx(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function vTe(t,e){return T.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var tx;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(tx||(tx={}));var OA;(function(t){t.Optimized="optimized"})(OA||(OA={}));const zU=new Map;function bTe(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=T.useState(null),{frequency:c,measure:d,strategy:h}=a,m=T.useRef(t),p=w(),x=Jg(p),y=T.useCallback(function(j){j===void 0&&(j=[]),!x.current&&o(k=>k===null?j:k.concat(j.filter(I=>!k.includes(I))))},[x]),S=T.useRef(null),N=qx(j=>{if(p&&!r)return zU;if(!j||j===zU||m.current!==t||i!=null){const k=new Map;for(let I of t){if(!I)continue;if(i&&i.length>0&&!i.includes(I.id)&&I.rect.current){k.set(I.id,I.rect.current);continue}const L=I.node.current,O=L?new q7(d(L),L):null;I.rect.current=O,O&&k.set(I.id,O)}return k}return j},[t,i,r,p,d]);return T.useEffect(()=>{m.current=t},[t]),T.useEffect(()=>{p||y()},[r,p]),T.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),T.useEffect(()=>{p||typeof c!="number"||S.current!==null||(S.current=setTimeout(()=>{y(),S.current=null},c))},[c,p,y,...n]),{droppableRects:N,measureDroppableContainers:y,measuringScheduled:i!=null};function w(){switch(h){case tx.Always:return!1;case tx.BeforeDragging:return r;default:return!r}}}function W7(t,e){return qx(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function wTe(t,e){return W7(t,e)}function STe(t){let{callback:e,disabled:r}=t;const n=qw(e),a=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Gw(t){let{callback:e,disabled:r}=t;const n=qw(e),a=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function NTe(t){return new q7(Hx(t),t)}function UU(t,e,r){e===void 0&&(e=NTe);const[n,a]=T.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const m=e(t);return JSON.stringify(d)===JSON.stringify(m)?d:m})}const o=STe({callback(d){if(t)for(const h of d){const{type:m,target:p}=h;if(m==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),c=Gw({callback:i});return yc(()=>{i(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),n}function _Te(t){const e=W7(t);return OX(t,e)}const VU=[];function TTe(t){const e=T.useRef(t),r=qx(n=>t?n&&n!==VU&&t&&e.current&&t.parentNode===e.current.parentNode?n:F7(t):VU,[t]);return T.useEffect(()=>{e.current=t},[t]),r}function jTe(t){const[e,r]=T.useState(null),n=T.useRef(t),a=T.useCallback(i=>{const o=K_(i.target);o&&r(c=>c?(c.set(o,kA(o)),new Map(c)):null)},[]);return T.useEffect(()=>{const i=n.current;if(t!==i){o(i);const c=t.map(d=>{const h=K_(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,kA(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(i)};function o(c){c.forEach(d=>{const h=K_(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Uh(i,o),Oo):BX(t):Oo,[t,e])}function FU(t,e){e===void 0&&(e=[]);const r=T.useRef(null);return T.useEffect(()=>{r.current=null},e),T.useEffect(()=>{const n=t!==Oo;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?d2(t,r.current):Oo}function ATe(t){T.useEffect(()=>{if(!Fw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function ETe(t,e){return T.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function FX(t){return T.useMemo(()=>t?eTe(t):null,[t])}const qU=[];function kTe(t,e){e===void 0&&(e=Hx);const[r]=t,n=FX(r?Fi(r):null),[a,i]=T.useState(qU);function o(){i(()=>t.length?t.map(d=>PX(d)?n:new q7(e(d),d)):qU)}const c=Gw({callback:o});return yc(()=>{c==null||c.disconnect(),o(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function qX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Fx(e)?e:t}function CTe(t){let{measure:e}=t;const[r,n]=T.useState(null),a=T.useCallback(h=>{for(const{target:m}of h)if(Fx(m)){n(p=>{const x=e(m);return p?{...p,width:x.width,height:x.height}:x});break}},[e]),i=Gw({callback:a}),o=T.useCallback(h=>{const m=qX(h);i==null||i.disconnect(),m&&(i==null||i.observe(m)),n(m?e(m):null)},[e,i]),[c,d]=c2(o);return T.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const OTe=[{sensor:G7,options:{}},{sensor:UX,options:{}}],ITe={current:{}},wv={draggable:{measure:PU},droppable:{measure:PU,strategy:tx.WhileDragging,frequency:OA.Optimized},dragOverlay:{measure:Hx}};class qp extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const RTe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new qp,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:h2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:wv,measureDroppableContainers:h2,windowRect:null,measuringScheduled:!1},HX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:h2,draggableNodes:new Map,over:null,measureDroppableContainers:h2},Gx=T.createContext(HX),GX=T.createContext(RTe);function MTe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new qp}}}function DTe(t,e){switch(e.type){case Ua.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ua.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ua.DragEnd:case Ua.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ua.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new qp(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Ua.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new qp(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case Ua.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new qp(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function PTe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=T.useContext(Gx),i=u2(n),o=u2(r==null?void 0:r.id);return T.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!V7(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const m of[d.current,h.current]){if(!m)continue;const p=C_e(m);if(p){p.focus();break}}})}},[n,e,a,o,i]),null}function WX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function LTe(t){return T.useMemo(()=>({draggable:{...wv.draggable,...t==null?void 0:t.draggable},droppable:{...wv.droppable,...t==null?void 0:t.droppable},dragOverlay:{...wv.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function BTe(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=T.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;yc(()=>{if(!o&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const m=r(h),p=OX(m,n);if(o||(p.x=0),c||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const x=RX(h);x&&x.scrollBy({top:p.y,left:p.x})}},[e,o,c,n,r])}const Ww=T.createContext({...Oo,scaleX:1,scaleY:1});var lu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(lu||(lu={}));const $Te=T.memo(function(e){var r,n,a,i;let{id:o,accessibility:c,autoScroll:d=!0,children:h,sensors:m=OTe,collisionDetection:p=K_e,measuring:x,modifiers:y,...S}=e;const N=T.useReducer(DTe,void 0,MTe),[w,j]=N,[k,I]=P_e(),[L,O]=T.useState(lu.Uninitialized),R=L===lu.Initialized,{draggable:{active:A,nodes:E,translate:C},droppable:{containers:U}}=w,P=A!=null?E.get(A):null,$=T.useRef({initial:null,translated:null}),B=T.useMemo(()=>{var Gt;return A!=null?{id:A,data:(Gt=P==null?void 0:P.data)!=null?Gt:ITe,rect:$}:null},[A,P]),G=T.useRef(null),[K,H]=T.useState(null),[Z,ae]=T.useState(null),he=Jg(S,Object.values(S)),fe=Hw("DndDescribedBy",o),Y=T.useMemo(()=>U.getEnabled(),[U]),ne=LTe(x),{droppableRects:re,measureDroppableContainers:xe,measuringScheduled:Te}=bTe(Y,{dragging:R,dependencies:[C.x,C.y],config:ne.droppable}),Ve=yTe(E,A),Ze=T.useMemo(()=>Z?Zg(Z):null,[Z]),Xe=wr(),ie=wTe(Ve,ne.draggable.measure);BTe({activeNode:A!=null?E.get(A):null,config:Xe.layoutShiftCompensation,initialRect:ie,measure:ne.draggable.measure});const Be=UU(Ve,ne.draggable.measure,ie),Q=UU(Ve?Ve.parentElement:null),te=T.useRef({activatorEvent:null,active:null,activeNode:Ve,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=U.getNodeFor((r=te.current.over)==null?void 0:r.id),Se=CTe({measure:ne.dragOverlay.measure}),Qe=(n=Se.nodeRef.current)!=null?n:Ve,nt=R?(a=Se.rect)!=null?a:Be:null,Ot=!!(Se.nodeRef.current&&Se.rect),Me=_Te(Ot?null:Be),lt=FX(Qe?Fi(Qe):null),St=TTe(R?Ne??Ve:null),vt=kTe(St),et=WX(y,{transform:{x:C.x-Me.x,y:C.y-Me.y,scaleX:1,scaleY:1},activatorEvent:Z,active:B,activeNodeRect:Be,containerNodeRect:Q,draggingNodeRect:nt,over:te.current.over,overlayNodeRect:Se.rect,scrollableAncestors:St,scrollableAncestorRects:vt,windowRect:lt}),ce=Ze?Uh(Ze,C):null,Ue=jTe(St),Je=FU(Ue),ht=FU(Ue,[Be]),dt=Uh(et,Je),Ut=nt?Y_e(nt,et):null,tr=B&&Ut?p({active:B,collisionRect:Ut,droppableRects:re,droppableContainers:Y,pointerCoordinates:ce}):null,Ir=H_e(tr,"id"),[ve,st]=T.useState(null),At=Ot?et:Uh(et,ht),Pt=Q_e(At,(i=ve==null?void 0:ve.rect)!=null?i:null,Be),$t=T.useRef(null),tt=T.useCallback((Gt,zt)=>{let{sensor:Nt,options:Vr}=zt;if(G.current==null)return;const ln=E.get(G.current);if(!ln)return;const Yr=Gt.nativeEvent,Fr=new Nt({active:G.current,activeNode:ln,event:Yr,options:Vr,context:te,onAbort(dr){if(!E.get(dr))return;const{onDragAbort:gn}=he.current,In={id:dr};gn==null||gn(In),k({type:"onDragAbort",event:In})},onPending(dr,ba,gn,In){if(!E.get(dr))return;const{onDragPending:jr}=he.current,xn={id:dr,constraint:ba,initialCoordinates:gn,offset:In};jr==null||jr(xn),k({type:"onDragPending",event:xn})},onStart(dr){const ba=G.current;if(ba==null)return;const gn=E.get(ba);if(!gn)return;const{onDragStart:In}=he.current,ii={activatorEvent:Yr,active:{id:ba,data:gn.data,rect:$}};xu.unstable_batchedUpdates(()=>{In==null||In(ii),O(lu.Initializing),j({type:Ua.DragStart,initialCoordinates:dr,active:ba}),k({type:"onDragStart",event:ii}),H($t.current),ae(Yr)})},onMove(dr){j({type:Ua.DragMove,coordinates:dr})},onEnd:pn(Ua.DragEnd),onCancel:pn(Ua.DragCancel)});$t.current=Fr;function pn(dr){return async function(){const{active:gn,collisions:In,over:ii,scrollAdjustedTranslate:jr}=te.current;let xn=null;if(gn&&jr){const{cancelDrop:si}=he.current;xn={activatorEvent:Yr,active:gn,collisions:In,delta:jr,over:ii},dr===Ua.DragEnd&&typeof si=="function"&&await Promise.resolve(si(xn))&&(dr=Ua.DragCancel)}G.current=null,xu.unstable_batchedUpdates(()=>{j({type:dr}),O(lu.Uninitialized),st(null),H(null),ae(null),$t.current=null;const si=dr===Ua.DragEnd?"onDragEnd":"onDragCancel";if(xn){const Qn=he.current[si];Qn==null||Qn(xn),k({type:si,event:xn})}})}}},[E]),ar=T.useCallback((Gt,zt)=>(Nt,Vr)=>{const ln=Nt.nativeEvent,Yr=E.get(Vr);if(G.current!==null||!Yr||ln.dndKit||ln.defaultPrevented)return;const Fr={active:Yr};Gt(Nt,zt.options,Fr)===!0&&(ln.dndKit={capturedBy:zt.sensor},G.current=Vr,tt(Nt,zt))},[E,tt]),Sr=vTe(m,ar);ATe(m),yc(()=>{Be&&L===lu.Initializing&&O(lu.Initialized)},[Be,L]),T.useEffect(()=>{const{onDragMove:Gt}=he.current,{active:zt,activatorEvent:Nt,collisions:Vr,over:ln}=te.current;if(!zt||!Nt)return;const Yr={active:zt,activatorEvent:Nt,collisions:Vr,delta:{x:dt.x,y:dt.y},over:ln};xu.unstable_batchedUpdates(()=>{Gt==null||Gt(Yr),k({type:"onDragMove",event:Yr})})},[dt.x,dt.y]),T.useEffect(()=>{const{active:Gt,activatorEvent:zt,collisions:Nt,droppableContainers:Vr,scrollAdjustedTranslate:ln}=te.current;if(!Gt||G.current==null||!zt||!ln)return;const{onDragOver:Yr}=he.current,Fr=Vr.get(Ir),pn=Fr&&Fr.rect.current?{id:Fr.id,rect:Fr.rect.current,data:Fr.data,disabled:Fr.disabled}:null,dr={active:Gt,activatorEvent:zt,collisions:Nt,delta:{x:ln.x,y:ln.y},over:pn};xu.unstable_batchedUpdates(()=>{st(pn),Yr==null||Yr(dr),k({type:"onDragOver",event:dr})})},[Ir]),yc(()=>{te.current={activatorEvent:Z,active:B,activeNode:Ve,collisionRect:Ut,collisions:tr,droppableRects:re,draggableNodes:E,draggingNode:Qe,draggingNodeRect:nt,droppableContainers:U,over:ve,scrollableAncestors:St,scrollAdjustedTranslate:dt},$.current={initial:nt,translated:Ut}},[B,Ve,tr,Ut,E,Qe,nt,re,U,ve,St,dt]),pTe({...Xe,delta:C,draggingRect:Ut,pointerCoordinates:ce,scrollableAncestors:St,scrollableAncestorRects:vt});const Ur=T.useMemo(()=>({active:B,activeNode:Ve,activeNodeRect:Be,activatorEvent:Z,collisions:tr,containerNodeRect:Q,dragOverlay:Se,draggableNodes:E,droppableContainers:U,droppableRects:re,over:ve,measureDroppableContainers:xe,scrollableAncestors:St,scrollableAncestorRects:vt,measuringConfiguration:ne,measuringScheduled:Te,windowRect:lt}),[B,Ve,Be,Z,tr,Q,Se,E,U,re,ve,xe,St,vt,ne,Te,lt]),mn=T.useMemo(()=>({activatorEvent:Z,activators:Sr,active:B,activeNodeRect:Be,ariaDescribedById:{draggable:fe},dispatch:j,draggableNodes:E,over:ve,measureDroppableContainers:xe}),[Z,Sr,B,Be,j,fe,E,ve,xe]);return se.createElement(CX.Provider,{value:I},se.createElement(Gx.Provider,{value:mn},se.createElement(GX.Provider,{value:Ur},se.createElement(Ww.Provider,{value:Pt},h)),se.createElement(PTe,{disabled:(c==null?void 0:c.restoreFocus)===!1})),se.createElement($_e,{...c,hiddenTextDescribedById:fe}));function wr(){const Gt=(K==null?void 0:K.autoScrollEnabled)===!1,zt=typeof d=="object"?d.enabled===!1:d===!1,Nt=R&&!Gt&&!zt;return typeof d=="object"?{...d,enabled:Nt}:{enabled:Nt}}}),zTe=T.createContext(null),HU="button",UTe="Draggable";function KX(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Hw(UTe),{activators:o,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:m,draggableNodes:p,over:x}=T.useContext(Gx),{role:y=HU,roleDescription:S="draggable",tabIndex:N=0}=a??{},w=(d==null?void 0:d.id)===e,j=T.useContext(w?Ww:zTe),[k,I]=c2(),[L,O]=c2(),R=ETe(o,e),A=Jg(r);yc(()=>(p.set(e,{id:e,key:i,node:k,activatorNode:L,data:A}),()=>{const C=p.get(e);C&&C.key===i&&p.delete(e)}),[p,e]);const E=T.useMemo(()=>({role:y,tabIndex:N,"aria-disabled":n,"aria-pressed":w&&y===HU?!0:void 0,"aria-roledescription":S,"aria-describedby":m.draggable}),[n,y,N,w,S,m.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:E,isDragging:w,listeners:n?void 0:R,node:k,over:x,setNodeRef:I,setActivatorNodeRef:O,transform:j}}function VTe(){return T.useContext(GX)}const FTe="Droppable",qTe={timeout:25};function K7(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Hw(FTe),{active:o,dispatch:c,over:d,measureDroppableContainers:h}=T.useContext(Gx),m=T.useRef({disabled:r}),p=T.useRef(!1),x=T.useRef(null),y=T.useRef(null),{disabled:S,updateMeasurementsFor:N,timeout:w}={...qTe,...a},j=Jg(N??n),k=T.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{h(Array.isArray(j.current)?j.current:[j.current]),y.current=null},w)},[w]),I=Gw({callback:k,disabled:S||!o}),L=T.useCallback((E,C)=>{I&&(C&&(I.unobserve(C),p.current=!1),E&&I.observe(E))},[I]),[O,R]=c2(L),A=Jg(e);return T.useEffect(()=>{!I||!O.current||(I.disconnect(),p.current=!1,I.observe(O.current))},[O,I]),T.useEffect(()=>(c({type:Ua.RegisterDroppable,element:{id:n,key:i,disabled:r,node:O,rect:x,data:A}}),()=>c({type:Ua.UnregisterDroppable,key:i,id:n})),[n]),T.useEffect(()=>{r!==m.current.disabled&&(c({type:Ua.SetDroppableDisabled,id:n,key:i,disabled:r}),m.current.disabled=r)},[n,i,r,c]),{active:o,rect:x,isOver:(d==null?void 0:d.id)===n,node:O,over:d,setNodeRef:R}}function HTe(t){let{animation:e,children:r}=t;const[n,a]=T.useState(null),[i,o]=T.useState(null),c=u2(r);return!r&&!n&&c&&a(c),yc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),se.createElement(se.Fragment,null,r,n?T.cloneElement(n,{ref:o}):null)}const GTe={x:0,y:0,scaleX:1,scaleY:1};function WTe(t){let{children:e}=t;return se.createElement(Gx.Provider,{value:HX},se.createElement(Ww.Provider,{value:GTe},e))}const KTe={position:"fixed",touchAction:"none"},QTe=t=>V7(t)?"transform 250ms ease":void 0,XTe=T.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:c,style:d,transform:h,transition:m=QTe}=t;if(!c)return null;const p=a?h:{...h,scaleX:1,scaleY:1},x={...KTe,width:c.width,height:c.height,top:c.top,left:c.left,transform:ex.Transform.toString(p),transformOrigin:a&&n?V_e(n,c):void 0,transition:typeof m=="function"?m(n):m,...d};return se.createElement(r,{className:o,style:x,ref:e},i)}),YTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);o!=null&&o.active&&r.node.classList.remove(o.active)}},JTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:ex.Transform.toString(e)},{transform:ex.Transform.toString(r)}]},ZTe={duration:250,easing:"ease",keyframes:JTe,sideEffects:YTe({styles:{active:{opacity:"0"}}})};function eje(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return qw((i,o)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=qX(o);if(!h)return;const{transform:m}=Fi(o).getComputedStyle(o),p=IX(m);if(!p)return;const x=typeof e=="function"?e:tje(e);return $X(d,a.draggable.measure),x({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:p})})}function tje(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...ZTe,...t};return i=>{let{active:o,dragOverlay:c,transform:d,...h}=i;if(!e)return;const m={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},p={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},x={x:d.x-m.x,y:d.y-m.y,...p},y=a({...h,active:o,dragOverlay:c,transform:{initial:d,final:x}}),[S]=y,N=y[y.length-1];if(JSON.stringify(S)===JSON.stringify(N))return;const w=n==null?void 0:n({active:o,dragOverlay:c,...h}),j=c.node.animate(y,{duration:e,easing:r,fill:"forwards"});return new Promise(k=>{j.onfinish=()=>{w==null||w(),k()}})}}let GU=0;function rje(t){return T.useMemo(()=>{if(t!=null)return GU++,GU},[t])}const nje=se.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:m,active:p,activeNodeRect:x,containerNodeRect:y,draggableNodes:S,droppableContainers:N,dragOverlay:w,over:j,measuringConfiguration:k,scrollableAncestors:I,scrollableAncestorRects:L,windowRect:O}=VTe(),R=T.useContext(Ww),A=rje(p==null?void 0:p.id),E=WX(o,{activatorEvent:m,active:p,activeNodeRect:x,containerNodeRect:y,draggingNodeRect:w.rect,over:j,overlayNodeRect:w.rect,scrollableAncestors:I,scrollableAncestorRects:L,transform:R,windowRect:O}),C=W7(x),U=eje({config:n,draggableNodes:S,droppableContainers:N,measuringConfiguration:k}),P=C?w.setRef:void 0;return se.createElement(WTe,null,se.createElement(HTe,{animation:U},p&&A?se.createElement(XTe,{key:A,id:p.id,ref:P,as:c,activatorEvent:m,adjustScale:e,className:d,transition:i,rect:C,style:{zIndex:h,...a},transform:E},r):null))});function WU(t,e=800){const[r,n]=T.useState(t),a=T.useRef(t),i=T.useRef(0);return T.useEffect(()=>{const o=a.current,c=t;if(a.current=t,o===c)return;const d=performance.now(),h=c-o,m=p=>{const x=p-d,y=Math.min(x/e,1),S=1-Math.pow(1-y,3);n(Math.round(o+h*S)),y<1&&(i.current=requestAnimationFrame(m))};return i.current=requestAnimationFrame(m),()=>cancelAnimationFrame(i.current)},[t,e]),r}const QX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],XX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],aje=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],KU={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},gh=t=>t?KU[t.rarity]||KU.COMMON:null,ije=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},rx=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,o=(e==null?void 0:e.bodyType)||"A",c=o==="B",d=o==="C",h=QX[(e==null?void 0:e.skinTone)??0],m=XX[(e==null?void 0:e.hairColor)??0],p=(e==null?void 0:e.hairStyle)??1,x=h+"99",y=t==null?void 0:t.HEAD,S=t==null?void 0:t.CHEST,N=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,j=t==null?void 0:t.BELT,k=t==null?void 0:t.AMULET,I=T.useMemo(()=>[y,S,N,w,j,k].filter(Boolean).length,[y,S,N,w,j,k]),L=T.useMemo(()=>[y,S,N,w,j,k].some(E=>(E==null?void 0:E.rarity)==="UNIQUE"),[y,S,N,w,j,k]),O=Math.min(1,.2+I*.13),R=c?23:21,A=T.useMemo(()=>ije(p,R),[p,R]);return s.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[s.jsxs("defs",{children:[s.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[s.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),s.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),s.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[s.jsx("stop",{offset:"0%",stopColor:h}),s.jsx("stop",{offset:"100%",stopColor:x})]}),s.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:O}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:O*.3}),s.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),s.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:m}),s.jsx("stop",{offset:"100%",stopColor:m+"cc"})]})]}),s.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&s.jsxs("g",{filter:"url(#av-bloom)",children:[s.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),s.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const E=gh(w);return s.jsxs("g",{filter:E.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:E.primary,stroke:E.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:E.primary,stroke:E.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:E.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),s.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:E.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),E.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:E.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:E.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),s.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),s.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),s.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),s.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),s.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),S&&(()=>{const E=gh(S);return s.jsxs("g",{filter:E.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:E.primary,fillOpacity:"0.3",stroke:E.primary,strokeWidth:"1",strokeOpacity:"0.6"}),s.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:E.primary,fillOpacity:"0.5",stroke:E.particle,strokeWidth:"0.5"}),s.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:E.primary,fillOpacity:"0.5",stroke:E.particle,strokeWidth:"0.5"}),s.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:E.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:E.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),s.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:E.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),s.jsx("circle",{cx:"100",cy:"120",r:"2",fill:E.particle,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),E.intensity>=.7&&s.jsxs("g",{children:[s.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:E.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:E.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),j?(()=>{const E=gh(j);return s.jsxs("g",{children:[s.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:E.primary,fillOpacity:"0.55",stroke:E.primary,strokeWidth:"0.8"}),s.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:E.particle,fillOpacity:"0.4"}),s.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:E.primary,fillOpacity:"0.3",stroke:E.particle,strokeWidth:"0.3"}),s.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:E.primary,fillOpacity:"0.3",stroke:E.particle,strokeWidth:"0.3"})]})})():s.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),s.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),N?(()=>{const E=gh(N);return s.jsxs("g",{filter:E.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:E.primary,fillOpacity:"0.5",stroke:E.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:E.primary,fillOpacity:"0.5",stroke:E.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:E.particle,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:E.particle,strokeWidth:"1",strokeOpacity:"0.5"}),E.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"50",cy:"168",r:"2",fill:E.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"150",cy:"168",r:"2",fill:E.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),s.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),I>0&&s.jsxs(s.Fragment,{children:[s.jsx("g",{filter:"url(#av-bloom)",children:s.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:s.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),s.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:O*.7,children:s.jsx("animate",{attributeName:"fillOpacity",values:`${O*.7};${O*.3};${O*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),I>=3&&s.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),s.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),k&&(()=>{const E=gh(k);return s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:E.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),s.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:E.primary,stroke:E.particle,strokeWidth:"0.8",children:s.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"97",r:"2",fill:E.particle,children:s.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),s.jsxs("g",{children:[A.back&&s.jsx("path",{d:A.back,fill:"url(#av-hair)",opacity:"0.8"}),s.jsx("ellipse",{cx:"100",cy:"50",rx:R,ry:"28",fill:"url(#av-face)",stroke:x,strokeWidth:"0.5"}),s.jsx("ellipse",{cx:100-R-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsx("ellipse",{cx:100+R+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsxs("g",{children:[s.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:m,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:m,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),s.jsx("path",{d:A.main,fill:"url(#av-hair)"}),A.accent&&s.jsx("path",{d:A.accent,fill:"url(#av-hair)",opacity:"0.9"}),y&&(()=>{const E=gh(y),C=y.visualId||"";return s.jsx("g",{filter:E.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:C.includes("helm")?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:`M${100-R-2} 28 Q100 10 ${100+R+2} 28 L${100+R+4} 62 Q100 72 ${100-R-4} 62 Z`,fill:E.primary,fillOpacity:"0.55",stroke:E.primary,strokeWidth:"1.2"}),s.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):C.includes("visor")?s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:E.primary,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:E.primary,strokeWidth:"1.5"}),s.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:E.primary,strokeWidth:"1.5"})]}):s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:E.primary,fillOpacity:"0.7",stroke:E.particle,strokeWidth:"0.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:E.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:E.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:E.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:E.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:E.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&s.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((E,C)=>s.jsx("polygon",{points:`${100+E},16 ${97+E},22 ${103+E},22`,fill:"#fbbf24",fillOpacity:"0.6",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+C*.2}s`,repeatCount:"indefinite"})},C))]}),L&&s.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((E,C)=>{const U=E*Math.PI/180,P=100+Math.cos(U)*50,$=145+Math.sin(U)*75;return s.jsxs("circle",{cx:P,cy:$,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-18};${$}`,dur:`${2+C*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+C*.3}s`,repeatCount:"indefinite"})]},C)})}),r>=5&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),s.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((E,C)=>{const U=C*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),P=100+Math.cos(U)*(38+C*3),$=140+Math.sin(U)*(55+C*2),B=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return s.jsxs("circle",{cx:P,cy:$,r:"1",fill:B,fillOpacity:"0.35",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-12};${$}`,dur:`${2+C*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+C*.4}s`,repeatCount:"indefinite"})]},C)})}),n&&a&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((E,C)=>{const U=60+Math.random()*80,P=20+Math.random()*260;return s.jsxs("circle",{cx:U,cy:P,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[s.jsx("animate",{attributeName:"cy",values:`${P};${P-25};${P}`,dur:`${3+C*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+C*.5}s`,repeatCount:"indefinite"})]},`c-${C}`)})})]})]})},sje={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},oje=({unlockedAchievements:t,achievementProgress:e})=>{const r=T.useMemo(()=>x0e(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=IE.filter(o=>!o.isSecret).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(sl,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),s.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(o=>{const c=r.filter(h=>h.category===o);if(c.length===0)return null;const d=sje[o];return s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[s.jsx("span",{children:d.icon})," ",d.label]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const m=t.includes(h.id),p=e[h.id]||0,x=Math.min(100,p/h.condition.target*100);return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${m?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[s.jsx("span",{className:`text-2xl ${m?"":"grayscale opacity-40"}`,children:h.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-sm font-bold ${m?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!m&&s.jsx(af,{className:"w-3 h-3 text-gray-600"})]}),s.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!m&&s.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${x}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[p,"/",h.condition.target]})]})]}),m&&s.jsxs("div",{className:"text-right shrink-0",children:[s.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&s.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},o)})]})},lje={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},cje=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=T.useState(t||null),[i,o]=T.useState(null),c=Ga(),{confirm:d}=Ro(),h=!!t,m=n||"THEORIST",p=YG.filter(S=>S.specialization===m),x=[1,2,3,4],y=async S=>{if(!i){if(!h){const N=Dy[m].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${N} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${N}`,cancelLabel:"Go Back",variant:"warning"}))return}o(S);try{await Re.unlockSkill(S,m),qn.skillUnlock(),c.success("Skill unlocked!")}catch(N){c.error(N instanceof Error?N.message:"Failed to unlock")}o(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[s.jsx(Vn,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[s.jsx(Ds,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),s.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",s.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[s.jsx(Lr,{className:"w-4 h-4 text-green-400"}),s.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",s.jsxs("span",{className:"font-bold text-white",children:[Dy[t].icon," ",Dy[t].name]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Dy).map(([S,N])=>{const w=m===S,j=h&&t!==S;return s.jsxs("button",{onClick:()=>!j&&a(S),disabled:j,className:`p-3 rounded-xl border text-left transition-all ${w?`border-white/30 bg-gradient-to-br ${lje[S]} bg-opacity-10`:j?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:N.icon}),s.jsx("span",{className:"font-bold text-sm text-white",children:N.name}),j&&s.jsx(af,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:N.description}),!h&&w&&s.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},S)})}),s.jsx("div",{className:"space-y-4",children:x.map(S=>{const N=p.filter(w=>w.tier===S);return s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",S]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(w=>{const j=r.includes(w.id),k=!j&&AM(w.id,r)&&e>=w.cost,I=AM(w.id,r);return s.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${j?"border-green-500/30 bg-green-500/10":k?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>k&&y(w.id),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-sm",children:w.icon}),s.jsx("span",{className:"text-xs font-bold text-white truncate",children:w.name}),j&&s.jsx(Lr,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!j&&!I&&s.jsx(af,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400",children:w.description}),!j&&s.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",w.cost," SP"]}),i===w.id&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},w.id)})})]},S)})})]})},Y_=25,Qy=v0e,uje=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=T.useState(!1),[i,o]=T.useState(0),[c,d]=T.useState(null),h=T.useRef(null),m=Ga(),p=new Date().toISOString().split("T")[0],x=e===p,y=!x&&t>=Y_&&!n,S=async()=>{if(y){a(!0),d(null),qn.wheelSpin();try{const j=await Re.spinFortuneWheel(r),k=Qy.findIndex(O=>O.id===j.prizeId),I=360/Qy.length,L=360*5+(360-k*I-I/2);o(O=>O+L),setTimeout(()=>{qn.wheelPrize(),d(j.rewardDescription),a(!1),j.prizeType!=="NOTHING"?m.success(`You won: ${j.rewardDescription}!`):m.info(j.rewardDescription)},4e3)}catch(j){a(!1),m.error(j instanceof Error?j.message:"Spin failed")}}},N=360/Qy.length,w=140;return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",Y_," Flux for a daily spin"]}),s.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[s.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),s.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:s.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Qy.map((j,k)=>{const I=(k*N-90)*(Math.PI/180),L=((k+1)*N-90)*(Math.PI/180),O=w*Math.cos(I),R=w*Math.sin(I),A=w*Math.cos(L),E=w*Math.sin(L),C=N>180?1:0,U=((k+.5)*N-90)*(Math.PI/180),P=w*.65*Math.cos(U),$=w*.65*Math.sin(U),B=(k+.5)*N;return s.jsxs("g",{children:[s.jsx("path",{d:`M0,0 L${O},${R} A${w},${w} 0 ${C},1 ${A},${E} Z`,fill:j.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),s.jsx("text",{x:P,y:$,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${B}, ${P}, ${$})`,children:j.label})]},j.id)}),s.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),s.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&s.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[s.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),s.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),s.jsx("button",{onClick:S,disabled:!y,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${y?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":x?"Come back tomorrow!":`Spin (${Y_} Flux)`})]})};function dje(t,e){const[r,n]=T.useState(e);return T.useEffect(()=>{const a=Re.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function hje(t){const[e,r]=T.useState([]);return T.useEffect(()=>{const n=Re.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const fje=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var S;const i=dje(t.id,t.maxHp),o=hje(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),m=o.reduce((N,w)=>(N[w.userId]||(N[w.userId]={name:w.userName,total:0}),N[w.userId].total+=w.damage,N),{}),p=Object.entries(m).sort(([,N],[,w])=>w.total-N.total).slice(0,5),x=((S=m[e])==null?void 0:S.total)||0,y=(a==null?void 0:a.bossId)===t.id;return s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[y&&s.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(io,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),y&&a&&s.jsx("div",{className:"text-center animate-bounce",children:s.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),x>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx(os,{className:"w-3 h-3"}),"Your total damage: ",s.jsx("span",{className:"text-white font-bold",children:x})]}),p.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[s.jsx(ls,{className:"w-3 h-3"})," Top Attackers"]}),p.map(([N,w],j)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:`${N===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",j+1," ",w.name]}),s.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},N))]}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Vn,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),s.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[s.jsx(ku,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),s.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},mje=({userId:t,userName:e,classType:r})=>{const[n,a]=T.useState([]),[i,o]=T.useState(null),[c,d]=T.useState(null),h=Ga();T.useEffect(()=>{let p;try{p=Re.subscribeToBossEncounters(x=>{const y=x.filter(S=>!S.classType||S.classType===r||S.classType==="GLOBAL");a(y)})}catch{}return()=>p==null?void 0:p()},[r]);const m=async p=>{if(!i){o(p);try{const x=await Re.dealBossDamage(p,e,r||"");if(qn.bossHit(),d({bossId:p,damage:x.damageDealt,isCrit:x.isCrit}),setTimeout(()=>d(null),2e3),x.bossDefeated)qn.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const y=x.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${x.damageDealt} damage!${y} (+${x.xpEarned} XP)`)}}catch(x){h.error(x instanceof Error?x.message:"Attack failed")}o(null)}};return n.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[s.jsx(Fle,{className:"w-5 h-5"})," Active Threats"]}),n.map(p=>s.jsx(fje,{boss:p,userId:t,userName:e,attacking:i,onAttack:m,lastHit:c},p.id))]})},pje=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:o,bossHpPercent:c,isCrit:d,healAmount:h,shieldBlocked:m})=>{const[p,x]=T.useState(!1),[y,S]=T.useState(!1),[N,w]=T.useState(null),[j,k]=T.useState(!1),[I,L]=T.useState(null),[O,R]=T.useState(!1),[A,E]=T.useState([]),[C,U]=T.useState(!1),P=(n==null?void 0:n.bossType)||"BRUTE",$=(n==null?void 0:n.hue)??0,B=(G,K,H)=>{const Z=G==="right"?75:25,ae=Array.from({length:H},(he,fe)=>({id:Date.now()+fe,x:Z+(Math.random()-.5)*20,y:30+(Math.random()-.5)*15,color:K,px:(Math.random()-.5)*60,py:-(Math.random()*40+10)}));E(he=>[...he,...ae]),setTimeout(()=>E(he=>he.filter(fe=>!ae.find(Y=>Y.id===fe.id))),1e3)};return T.useEffect(()=>{if(a==="player-attack"&&i){x(!0),w({value:i,side:"right",isCrit:d}),B("right",d?"#fbbf24":"#f59e0b",d?12:6),d&&(k(!0),U(!0),setTimeout(()=>k(!1),400),setTimeout(()=>U(!1),400));const G=setTimeout(()=>x(!1),500),K=setTimeout(()=>w(null),1200);return h&&h>0&&setTimeout(()=>{L(h),setTimeout(()=>L(null),1200)},400),()=>{clearTimeout(G),clearTimeout(K)}}else if(a==="boss-attack"){if(m){R(!0),B("left","#22d3ee",6),setTimeout(()=>R(!1),800);return}if(i&&i>0){S(!0),U(!0),B("left","#ef4444",8),w({value:i,side:"left"}),setTimeout(()=>U(!1),300);const G=setTimeout(()=>S(!1),500),K=setTimeout(()=>w(null),1200);return()=>{clearTimeout(G),clearTimeout(K)}}}},[a,i,d,h,m]),s.jsxs("div",{className:`relative w-full h-48 flex items-end justify-between px-4 overflow-hidden select-none ${C?"animate-[battleShake_0.3s_ease-in-out]":""}`,children:[j&&s.jsx("div",{className:"absolute inset-0 bg-amber-400/20 animate-[critFlash_0.4s_ease-out_forwards] z-10 pointer-events-none"}),O&&s.jsx("div",{className:"absolute left-10 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:s.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-cyan-400/60 bg-cyan-400/10 animate-[shieldPulse_0.8s_ease-out_forwards] flex items-center justify-center",children:s.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-cyan-400 fill-current",children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})})}),A.map(G=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full pointer-events-none animate-[particleBurst_1s_ease-out_forwards]",style:{left:`${G.x}%`,top:`${G.y}%`,backgroundColor:G.color,"--px":`${G.px}px`,"--py":`${G.py}px`}},G.id)),I!==null&&s.jsxs("div",{className:"absolute left-8 bottom-12 text-base font-black text-emerald-400 animate-[floatUp_1.2s_ease-out_forwards] z-10 pointer-events-none",children:["+",I," HP"]}),s.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),s.jsxs("div",{className:`relative w-24 h-36 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-10 scale-110":""} ${y?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2.5rem) scale(1.1)":void 0},children:[s.jsx(rx,{equipped:e,appearance:t,evolutionLevel:r}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o>50?"bg-emerald-500":o>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o}%`}})})]}),s.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),p&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[s.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),s.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),s.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),s.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),y&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[s.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),s.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),N&&s.jsxs("div",{className:`absolute font-black animate-[floatUp_1.2s_ease-out_forwards] ${N.isCrit?"text-2xl":"text-xl"} ${N.side==="right"?`right-4 ${N.isCrit?"text-yellow-300":"text-amber-400"}`:"left-4 text-red-400"}`,style:{top:"10%"},children:[N.isCrit&&s.jsx("span",{className:"text-[10px] block text-center text-yellow-300 font-black tracking-widest animate-pulse",children:"CRIT!"}),"-",N.value]})]}),s.jsxs("div",{className:`relative w-28 h-40 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-10 scale-110":""} ${p?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2.5rem) scale(1.1)":p?void 0:"scaleX(-1)",...p?{}:{filter:void 0}},children:[s.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:s.jsx(tW,{bossType:P,hue:$})}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),s.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes battleShake {
                    0%, 100% { transform: translate(0, 0); }
                    10% { transform: translate(-3px, -2px); }
                    20% { transform: translate(4px, 1px); }
                    30% { transform: translate(-2px, 3px); }
                    40% { transform: translate(3px, -1px); }
                    50% { transform: translate(-4px, 2px); }
                    60% { transform: translate(2px, -3px); }
                    70% { transform: translate(-1px, 2px); }
                    80% { transform: translate(3px, -2px); }
                    90% { transform: translate(-2px, 1px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
                @keyframes critFlash {
                    0% { opacity: 0.3; }
                    50% { opacity: 0.15; }
                    100% { opacity: 0; }
                }
                @keyframes shieldPulse {
                    0% { transform: scale(0.5); opacity: 0.9; }
                    50% { transform: scale(1.2); opacity: 0.6; }
                    100% { transform: scale(1.5); opacity: 0; }
                }
                @keyframes particleBurst {
                    0% { opacity: 1; transform: translate(0, 0) scale(1); }
                    100% { opacity: 0; transform: translate(var(--px, 20px), var(--py, -30px)) scale(0); }
                }
            `})]})},gje=({bossId:t,maxEntries:e=5})=>{const[r,n]=T.useState([]),a=T.useRef(null);return T.useEffect(()=>{const i=Re.subscribeToBossQuizDamageLog(t,o=>{const c=[...o].sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime());n(c.slice(0,e))});return()=>i()},[t,e]),T.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[r.length]),r.length===0?null:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest flex items-center gap-1",children:[s.jsx(Vn,{className:"w-2.5 h-2.5"})," Live Battle Feed"]}),s.jsx("div",{ref:a,className:"max-h-24 overflow-y-auto custom-scrollbar space-y-0.5",children:r.map((i,o)=>s.jsxs("div",{className:`flex items-center gap-2 text-[10px] py-0.5 px-2 rounded-lg ${o===0?"bg-amber-500/5 animate-in fade-in slide-in-from-top-1 duration-300":"opacity-60"}`,children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-purple-500/20 flex items-center justify-center text-[8px] font-bold text-purple-400 shrink-0",children:i.userName.charAt(0)}),s.jsx("span",{className:"text-gray-400 truncate flex-1",children:i.userName}),s.jsxs("span",{className:`font-bold ${i.isCrit?"text-yellow-300":"text-amber-400"}`,children:["-",i.damage,i.isCrit?"!":""]})]},`${i.userId}-${i.timestamp}`))})]})};function xje(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function yje(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function vje(t,e){const r=[...t],n=xje(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function bje(t,e){const[r,n]=T.useState(e);return T.useEffect(()=>{const a=Re.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const wje=({modifier:t})=>{const e=cT[t.type];return e?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[s.jsx(Cu,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&s.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},Sje=({quiz:t,progress:e})=>{var p,x;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,o=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=o>0?Math.round(c/o*100):0,h=n&&n>0?`#${n}`:null,m=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx(MH,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),s.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&s.jsxs("div",{className:`text-2xl font-black ${m[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((p=t.rewards)==null?void 0:p.xp)||0)*(a||1))," XP"]}),s.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((x=t.rewards)==null?void 0:x.flux)||0)*(a||1))," Flux"]}),a&&a>1&&s.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[s.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Gp," attempts and ",Wp," correct answer"]})]}):null,r&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Dh,{className:"w-3 h-3"})," Damage Dealt"]}),s.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Accuracy"]}),s.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",o]})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Vn,{className:"w-3 h-3"})," Critical Hits"]}),s.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(os,{className:"w-3 h-3"})," Damage Mitigated"]}),s.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Y2,{className:"w-3 h-3"})," Longest Streak"]}),s.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Mh,{className:"w-3 h-3"})," Healing Received"]}),s.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(y=>{const S=r.correctByDifficulty[y]||0,N=r.incorrectByDifficulty[y]||0,w=S+N,j=w>0?Math.round(S/w*100):0;return s.jsxs("div",{className:`rounded-lg p-2 border text-center ${y==="EASY"?"border-green-500/20 bg-green-500/5":y==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[s.jsx("div",{className:`text-[9px] font-bold uppercase ${y==="EASY"?"text-green-400":y==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:y}),s.jsxs("div",{className:"text-sm font-black text-white",children:[j,"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[S,"/",w]})]},y)})})]})},Nje=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o})=>{var Xe,ie,Be,Q;const c=bje(t.id,t.maxHp),d=c/t.maxHp*100,h=se.useMemo(()=>vje(t.questions,yje(e+t.id)),[t.questions,e,t.id]),[m,p]=T.useState(null),[x,y]=T.useState(!1);T.useEffect(()=>{const te=Re.subscribeToBossQuizProgress(e,t.id,Ne=>{p(Ne),y(!0)});return()=>te()},[e,t.id]);const S=se.useMemo(()=>n?ME(n).maxHp:100,[n]),[N,w]=T.useState(-1),[j,k]=T.useState(-1),[I,L]=T.useState(S),[O,R]=T.useState(!1),[A,E]=T.useState(null),[C,U]=T.useState(null),[P,$]=T.useState(!1),[B,G]=T.useState("idle"),[K,H]=T.useState(void 0),[Z,ae]=T.useState(!1),[he,fe]=T.useState(void 0),[Y,ne]=T.useState(!1);T.useEffect(()=>{if(x&&N===-1)if(m){const te=new Set(m.answeredQuestions||[]),Ne=h.findIndex(nt=>!te.has(nt.id));w(Ne===-1?h.length:Ne);const Se=m.currentHp,Qe=m.maxHp>0?m.maxHp:S;L(Qe),Se>=0?(k(Se),Se===0&&R(!0)):k(Qe)}else w(0),k(S),L(S)},[x]),T.useEffect(()=>{L(S)},[S]);const re=I>0?(j===-1?I:j)/I*100:100,xe=N>=0?h[N%h.length]:void 0,Te=N>=h.length,Ve=c<=0,Ze=async(te,Ne,Se)=>{P||O||($(!0),E(Se),r(te,Ne,Se,{onResult:Qe=>{Qe.playerHp!==void 0&&k(Qe.playerHp),Qe.playerMaxHp!==void 0&&L(Qe.playerMaxHp),Qe.knockedOut&&R(!0),Qe.correct?(H(Qe.damage),ae(!!Qe.isCrit),fe(Qe.healAmount),ne(!1),G("player-attack"),setTimeout(()=>G("idle"),800)):Qe.shieldBlocked?(H(0),ne(!0),ae(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)):Qe.playerDamage&&Qe.playerDamage>0&&(H(Qe.playerDamage),ne(!1),ae(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)),U(Qe),Qe.knockedOut||setTimeout(()=>{w(nt=>nt+1),E(null),U(null)},2e3),$(!1)}}))};return s.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-amber-400",children:t.bossName}),s.jsx("p",{className:"text-sm text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!Ve&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((te,Ne)=>s.jsx(wje,{modifier:te},Ne))}),Ve?s.jsx(Sje,{quiz:t,progress:m}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:s.jsx(pje,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o,bossAppearance:t.bossAppearance,attackState:B,damage:K,playerHpPercent:re,bossHpPercent:d,isCrit:Z,healAmount:he,shieldBlocked:Y})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[s.jsx(Mh,{className:"w-3 h-3"})," Your HP: ",j===-1?I:j]}),s.jsx("span",{className:"text-gray-600",children:I})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${re>50?"bg-gradient-to-r from-emerald-600 to-green-500":re>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${re}%`}})})]}),O?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ao,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):Te?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Lr,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):xe?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Question ",N+1," / ",h.length]}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${xe.difficulty==="HARD"?"bg-red-500/20 text-red-400":xe.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[xe.difficulty,xe.damageBonus?` (+${xe.damageBonus} dmg)`:""]})]}),s.jsx("p",{className:"text-base text-white font-semibold leading-relaxed",children:xe.stem}),s.jsx("div",{className:"space-y-2.5",children:xe.options.map((te,Ne)=>{const Se=A===Ne,Qe=C&&Se,nt=C==null?void 0:C.correct;return s.jsx("button",{onClick:()=>Ze(t.id,xe.id,Ne),disabled:P||!!C||O,className:`w-full text-left p-4 rounded-xl border text-base transition-all ${Qe&&nt?"border-green-500/50 bg-green-500/10 text-green-400":Qe&&!nt?"border-red-500/50 bg-red-500/10 text-red-400":Se?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm font-mono text-gray-600 w-6",children:[String.fromCharCode(65+Ne),"."]}),s.jsx("span",{children:te}),Qe&&nt&&s.jsx(Lr,{className:"w-5 h-5 text-green-400 ml-auto shrink-0"}),Qe&&!nt&&s.jsx(ao,{className:"w-5 h-5 text-red-400 ml-auto shrink-0"})]})},Ne)})}),C&&C.correct&&s.jsxs("div",{className:"text-center space-y-1",children:[s.jsxs("div",{className:"text-base text-amber-400 font-bold animate-bounce",children:[s.jsx(Vn,{className:"w-5 h-5 inline mr-1"}),C.isCrit?"CRITICAL HIT! ":"","-",C.damage," HP to boss!"]}),C.healAmount&&C.healAmount>0&&s.jsxs("div",{className:"text-sm text-emerald-400 font-bold",children:[s.jsx(Mh,{className:"w-4 h-4 inline mr-1"})," +",C.healAmount," HP healed"]})]}),C&&!C.correct&&C.shieldBlocked&&s.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[s.jsx(os,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),C&&!C.correct&&!C.shieldBlocked&&C.playerDamage&&C.playerDamage>0&&s.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[s.jsx(Mh,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",C.playerDamage," damage!"]})]}):null,m&&!Ve&&!O&&!Te&&s.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((Xe=m.combatStats)==null?void 0:Xe.questionsAttempted)||0)<Gp||(((ie=m.combatStats)==null?void 0:ie.questionsCorrect)||0)<Wp?s.jsxs("span",{children:["Rewards: ",((Be=m.combatStats)==null?void 0:Be.questionsAttempted)||0,"/",Gp," attempts"," ",""," ",((Q=m.combatStats)==null?void 0:Q.questionsCorrect)||0,"/",Wp," correct needed"]}):s.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),s.jsx(gje,{bossId:t.id,maxEntries:5}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsx("span",{children:"Defeat rewards:"}),s.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),s.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},_je=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:o,playerEvolutionLevel:c})=>{const[d,h]=T.useState([]),m=Ga();T.useEffect(()=>{let y;try{y=Re.subscribeToBossQuizzes(e,h)}catch{}return()=>y==null?void 0:y()},[e]);const p=d.filter(y=>{var S;if(y.scheduledAt&&new Date(y.scheduledAt)>new Date)return!1;if((S=y.targetSections)!=null&&S.length){const N=y.classType!=="GLOBAL"?y.classType:e,w=(n==null?void 0:n[N])||(n==null?void 0:n[e])||r||"";if(!y.targetSections.includes(w))return!1}return!0}),x=async(y,S,N,w)=>{try{const j=await Re.answerBossQuiz(y,S,N);j.alreadyAnswered?m.info("Already answered this question!"):j.correct?(qn.bossHit(),j.bossDefeated?(qn.bossDefeated(),m.success("Boss defeated! Completion rewards distributed to all contributors!")):j.isCrit?m.success(`CRITICAL HIT! Dealt ${j.damage} damage!`):m.success(`Correct! Dealt ${j.damage} damage!`)):j.shieldBlocked?m.info("Shield blocked the attack!"):j.playerDamage&&j.playerDamage>0?m.error(`Wrong! The boss hits you for ${j.playerDamage} damage!`):m.error("Incorrect. No damage dealt."),j.knockedOut&&qn.bossHit(),w.onResult(j)}catch(j){m.error(j instanceof Error?j.message:"Failed to submit answer"),w.onResult({correct:!1,damage:0})}};return p.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(Co,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),p.map(y=>s.jsx(Nje,{quiz:y,userId:t,onAnswer:x,playerStats:a,playerAppearance:i,playerEquipped:o||{},playerEvolutionLevel:c||1},y.id))]})},J_={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},QU=({value:t,onChange:e,label:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>s.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:s.jsx(_x,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),Tje=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=T.useState(0),[i,o]=T.useState(0),[c,d]=T.useState(""),h=t==="requester",m=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},p=n>0&&i>0&&c.trim().length>=20;return s.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[s.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),s.jsx(QU,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),s.jsx(QU,{value:i,onChange:o,label:h?"Tutor communication":"Student engagement"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),s.jsx("textarea",{value:c,onChange:x=>d(x.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),s.jsx("div",{className:"flex justify-between mt-1",children:s.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),s.jsxs("button",{onClick:m,disabled:!p||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[s.jsx(uE,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},jje=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(""),[m,p]=T.useState(!1),[x,y]=T.useState(null),[S,N]=T.useState(!1),w=Ga();T.useEffect(()=>{let C;try{C=Re.subscribeToTutoringSessions(r,i)}catch{}return()=>C==null?void 0:C()},[r]);const j=async()=>{if(!(!d.trim()||m)){p(!0);try{await Re.createTutoringRequest(t,e,d,r),w.success("Tutoring request posted!"),h(""),c(!1)}catch{w.error("Failed to create request")}p(!1)}},k=async C=>{try{await Re.claimTutorRole(C,t,e),w.success("You are now the tutor for this session!")}catch{w.error("Failed to claim tutor role")}},I=async C=>{try{await Re.startTutoringSession(C),w.success("Session started!")}catch{w.error("Failed to start session")}},L=async(C,U)=>{N(!0);try{const P=a.find(B=>B.id===C);if(!P)throw new Error("Session not found");const $=P.requesterId===t?"requester":"tutor";await Re.submitTutoringFeedback(C,$,U),w.success("Feedback submitted! "+($==="requester"?P.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":P.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),y(null)}catch{w.error("Failed to submit feedback")}N(!1)},O=async(C,U)=>{try{const P=await Re.completeTutoring(C,U);w.success(`Verified! Tutor earned ${P.xpAwarded} XP and ${P.fluxAwarded} Flux`)}catch{w.error("Failed to verify session")}},R=a.filter(C=>C.status==="OPEN"),A=a.filter(C=>["MATCHED","IN_PROGRESS"].includes(C.status)),E=a.filter(C=>C.status==="VERIFIED");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Lu,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),s.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Dn,{className:"w-3 h-3"})," Request Help"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),o&&s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[s.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:j,disabled:!d.trim()||m,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:m?"Posting...":"Post Request"}),s.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),R.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(Tle,{className:"w-3 h-3"})," Open Requests"]}),R.map(C=>s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",C.requesterName," - ",new Date(C.createdAt).toLocaleDateString()]})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${J_[C.status]}`,children:C.status})]}),C.requesterId!==t&&s.jsxs("button",{onClick:()=>k(C.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[s.jsx(ls,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},C.id))]}),A.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(io,{className:"w-3 h-3"})," Active Sessions"]}),A.map(C=>{const U=C.requesterId===t||C.tutorId===t,P=C.requesterId===t,$=C.tutorId===t,B=P?C.requesterFeedback:C.tutorFeedback,G=P?C.tutorFeedback:C.requesterFeedback;return s.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName||"Finding tutor..."]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${J_[C.status]}`,children:C.status}),C.status==="MATCHED"&&U&&s.jsx("button",{onClick:()=>I(C.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),C.status==="IN_PROGRESS"&&U&&!B&&s.jsxs("button",{onClick:()=>y(C.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Lr,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),C.status==="IN_PROGRESS"&&U&&B&&!G&&s.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",P?"tutor":"student"]}),n&&C.tutorId&&C.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>O(C.id,C.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[s.jsx(Lr,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),x===C.id&&C.status==="IN_PROGRESS"&&($||P)&&s.jsx(Tje,{role:P?"requester":"tutor",onSubmit:K=>L(C.id,K),submitting:S})]},C.id)})]}),a.filter(C=>C.status==="COMPLETED").length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[s.jsx(io,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(C=>C.status==="COMPLETED").map(C=>s.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),C.requesterFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),C.tutorFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&C.tutorId&&s.jsxs("button",{onClick:()=>O(C.id,C.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Lr,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},C.id))]}),E.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(Lr,{className:"w-3 h-3 text-green-400"})," Completed (",E.length,")"]}),E.slice(0,3).map(C=>s.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 truncate",children:C.topic}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${J_[C.status]}`,children:C.status})]},C.id))]}),a.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-600",children:[s.jsx(Lu,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},Aje=({item:t,onClose:e})=>{const[r,n]=T.useState("chest"),a=fa(t.rarity);T.useEffect(()=>{qn.chestOpen();const o=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(o),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:s.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&s.jsxs("div",{className:"animate-in zoom-in duration-500",children:[s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),s.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),s.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[s.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),s.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&s.jsx("div",{className:"animate-in zoom-in duration-300",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[s.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((o,c)=>s.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[s.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&s.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[s.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[s.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),s.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),s.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,o])=>o&&o>0).map(([o,c])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:o}),s.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},o))}),t.affixes.length>0&&s.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((o,c)=>s.jsxs("div",{className:"text-[10px] text-gray-400",children:[o.name,": +",o.value," ",o.stat," (T",o.tier,")"]},c))}),t.setId&&s.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&s.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((o,c)=>s.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),s.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},Eje=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],kje=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],Cje=({user:t,classType:e,onClose:r})=>{var R,A,E;const[n,a]=se.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},o=i.level||1,c=c0(o),d=JG(o),{equipped:h,appearance:m}=Uu(t,e),p=DE({gamification:{...i,equipped:h}}),x=u0(h),y=((R=i.classXp)==null?void 0:R[e])||0,S=(A=t.settings)==null?void 0:A.privacyMode,N=S?i.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),j=RE(w),k=i.unlockedAchievements||[],I=T.useMemo(()=>IE.filter(C=>k.includes(C.id)),[k]),L=Math.max(p.tech,p.focus,p.analysis,p.charisma,1),O=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(m==null?void 0:m.hue)||180}, 70%, 30%), transparent 70%)`}}),s.jsxs("div",{className:"relative flex items-center gap-6",children:[s.jsx("div",{className:"w-32 h-44 shrink-0",children:s.jsx(rx,{equipped:h,appearance:m})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h1",{className:`text-2xl font-black ${S?"text-purple-300 italic":"text-white"}`,children:N}),s.jsx("button",{onClick:O,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?s.jsx(Ql,{className:"w-4 h-4 text-green-400"}):s.jsx(rf,{className:"w-4 h-4"})})]}),s.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",o]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:y.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-yellow-400",children:x}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-purple-400",children:k.length}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&s.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:s.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Combat Stats"]}),s.jsx("div",{className:"space-y-2",children:Eje.map(({key:C,label:U,color:P,bg:$})=>{const B=p[C]||0,G=B/L*100;return s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-xs text-gray-400",children:U}),s.jsx("span",{className:`text-xs font-bold ${P}`,children:B})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${$} transition-all`,style:{width:`${G}%`}})})]},C)})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(os,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"space-y-1.5",children:kje.map(C=>{const U=h[C];if(!U)return s.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[s.jsx("span",{className:"font-mono w-12 text-[10px]",children:C}),s.jsx("span",{className:"italic",children:"Empty"})]},C);const P=fa(U.rarity);return s.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${P.border} ${P.bg}`,children:[s.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:C}),s.jsx("span",{className:`text-xs font-bold truncate ${P.text}`,children:U.name})]},C)})})]}),j.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[s.jsx(_x,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),j.map(({set:C,activeBonus:U})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[s.jsx("span",{className:"text-purple-400 font-bold",children:C.name}),s.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",U.label]})]},C.id))]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(sl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",k.length,")"]}),I.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:I.slice(0,12).map(C=>s.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[s.jsx("div",{className:"text-xl",children:C.icon}),s.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:C.title})]},C.id))}):s.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Cu,{className:"w-3.5 h-3.5 text-orange-400"}),s.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),s.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Dh,{className:"w-3.5 h-3.5 text-red-400"}),s.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),s.jsx("span",{className:"text-red-400 font-bold",children:((E=i.completedQuests)==null?void 0:E.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Lu,{className:"w-3.5 h-3.5 text-green-400"}),s.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),s.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Vn,{className:"w-3.5 h-3.5 text-cyan-400"}),s.jsx("span",{className:"text-gray-400",children:"Total XP:"}),s.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})},Xy=({label:t,value:e,max:r,color:n,icon:a,description:i})=>{const o=Math.min(e/r*100,100);return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:n,children:a}),s.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider",children:t})]}),s.jsx("span",{className:`text-sm font-black ${n}`,children:e})]}),s.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${n.replace("text-","bg-").replace("400","500/60")}`,style:{width:`${o}%`}})}),s.jsx("div",{className:"absolute -top-10 left-0 hidden group-hover:block z-20 w-56 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:i})]})},Yy=({label:t,value:e,sub:r,color:n="text-white",icon:a})=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-gray-600",children:a}),s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:t})]}),s.jsx("div",{className:`text-lg font-black ${n} leading-tight`,children:e}),r&&s.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:r})]}),Oje=({user:t,submissions:e,assignments:r,activeClass:n})=>{var P;const a=t.gamification,i=((P=a==null?void 0:a.classXp)==null?void 0:P[n])||0,o=(a==null?void 0:a.xp)||0,c=(a==null?void 0:a.level)||1,d=(a==null?void 0:a.currency)||0,h=(a==null?void 0:a.engagementStreak)||0,m=(a==null?void 0:a.loginStreak)||0,p=c0(c),y=T.useMemo(()=>Uu(t,n),[t,n]).equipped,S=T.useMemo(()=>{const $={tech:10,focus:10,analysis:10,charisma:10};return Object.values(y).filter(Boolean).forEach(G=>{G.stats&&Object.entries(G.stats).forEach(([K,H])=>{$[K]+=H})}),$},[y]),N=T.useMemo(()=>ME(S),[S]),w=T.useMemo(()=>u0(y),[y]),j=T.useMemo(()=>_0e(y),[y]),k=T.useMemo(()=>T0e(y),[y]),I=T.useMemo(()=>N0e(y),[y]),L=ZG(h),O=T.useMemo(()=>{const $=new Set(r.filter(B=>B.classType===n).map(B=>B.id));return e.filter(B=>$.has(B.assignmentId))},[e,r,n]),R=T.useMemo(()=>{var fe;const $=O.reduce((Y,ne)=>{var re;return Y+(((re=ne.metrics)==null?void 0:re.engagementTime)||0)},0),B=Math.round($/60)*10,K=(((fe=a==null?void 0:a.completedQuests)==null?void 0:fe.length)||0)*100,H=(a==null?void 0:a.bossDamageDealt)||{},Z=Object.values(H).reduce((Y,ne)=>Y+ne,0)*2,ae=(a==null?void 0:a.tutoringXpEarned)||0,he=Math.max(0,i-B-K-Z-ae);return{engagementXp:B,questXp:K,bossXp:Z,tutoringXp:ae,otherXp:he}},[O,a,i]),A=T.useMemo(()=>{const $=Date.now(),B=10080*60*1e3,G=O.filter(re=>(re.submittedAt?new Date(re.submittedAt).getTime():0)>$-B),K=new Set(G.filter(re=>re.submittedAt).map(re=>new Date(re.submittedAt).toISOString().split("T")[0])).size,H={totalTime:G.reduce((re,xe)=>{var Te;return re+(((Te=xe.metrics)==null?void 0:Te.engagementTime)||0)},0),submissionCount:G.length,totalClicks:G.reduce((re,xe)=>{var Te;return re+(((Te=xe.metrics)==null?void 0:Te.clickCount)||0)},0),totalPastes:G.reduce((re,xe)=>{var Te;return re+(((Te=xe.metrics)==null?void 0:Te.pasteCount)||0)},0),totalKeystrokes:G.reduce((re,xe)=>{var Te;return re+(((Te=xe.metrics)==null?void 0:Te.keystrokes)||0)},0),totalXP:i,activityDays:K},Z=H.totalTime/60+H.submissionCount*10,fe=ile(H,Z,150,60),Y=sle(fe),ne=qo[fe];return{bucket:fe,recommendation:Y,meta:ne,metrics:H,engagementScore:Z}},[O,i]),E=T.useMemo(()=>{const $=[];for(let B=6;B>=0;B--){const G=new Date;G.setDate(G.getDate()-B);const K=G.toISOString().split("T")[0],H=G.toLocaleDateString("en",{weekday:"short"}),Z=O.filter(ae=>{var he;return(he=ae.submittedAt)==null?void 0:he.startsWith(K)});$.push({label:H,count:Z.length,minutes:Math.round(Z.reduce((ae,he)=>{var fe;return ae+(((fe=he.metrics)==null?void 0:fe.engagementTime)||0)},0)/60)})}return $},[O]),C=Math.max(1,...E.map($=>$.minutes)),U=T.useMemo(()=>{const $={SUCCESS:0,NORMAL:0,SUPPORT_NEEDED:0,FLAGGED:0,STARTED:0};return O.forEach(B=>{B.status in $&&$[B.status]++}),$},[O]);return s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[s.jsx(Co,{className:"w-5 h-5 text-purple-400"}),"Intel Dossier"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Classified operative analysis  ",n]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-black ${p.tierColor.split(" ")[1]}`,children:p.rankName}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Level ",c]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(Yy,{label:"Class XP",value:i.toLocaleString(),sub:`${o.toLocaleString()} total across all classes`,color:"text-amber-400",icon:s.jsx(Vn,{className:"w-3.5 h-3.5"})}),s.jsx(Yy,{label:"Gear Score",value:w,sub:`${Object.values(y).filter(Boolean).length}/8 slots filled`,color:"text-purple-400",icon:s.jsx(os,{className:"w-3.5 h-3.5"})}),s.jsx(Yy,{label:"Resources Accessed",value:O.length,sub:`${U.SUCCESS} excellent`,color:"text-emerald-400",icon:s.jsx(cs,{className:"w-3.5 h-3.5"})}),s.jsx(Yy,{label:"Cyber-Flux",value:d,sub:"crafting currency",color:"text-cyan-400",icon:s.jsx(KT,{className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Dh,{className:"w-4 h-4 text-red-400"})," Combat Analysis"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your character stats translate to boss fight performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Xy,{label:"Tech",value:S.tech,max:100,color:"text-blue-400",icon:s.jsx(Vn,{className:"w-3 h-3"}),description:"Attack Power  Increases base damage dealt to bosses in quiz events."}),s.jsx(Xy,{label:"Focus",value:S.focus,max:100,color:"text-green-400",icon:s.jsx(ku,{className:"w-3 h-3"}),description:`Critical Strikes  ${(N.critChance*100).toFixed(0)}% crit chance, ${N.critMultiplier.toFixed(2)}x crit multiplier.`}),s.jsx(Xy,{label:"Analysis",value:S.analysis,max:100,color:"text-yellow-400",icon:s.jsx(os,{className:"w-3 h-3"}),description:`Armor  Reduces incoming boss damage by ${N.armorPercent.toFixed(0)}%.`}),s.jsx(Xy,{label:"Charisma",value:S.charisma,max:100,color:"text-purple-400",icon:s.jsx(Mh,{className:"w-3 h-3"}),description:`Health Pool  Gives you ${N.maxHp} HP in boss fights (base 100 + 5 per charisma above 10).`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-3 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Max HP"}),s.jsx("div",{className:"text-sm font-black text-emerald-400",children:N.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Armor"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:[N.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit %"}),s.jsxs("div",{className:"text-sm font-black text-green-400",children:[(N.critChance*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit Dmg"}),s.jsxs("div",{className:"text-sm font-black text-red-400",children:[N.critMultiplier.toFixed(2),"x"]})]})]}),(Object.keys(j).length>0||Object.keys(k).length>0||Object.keys(I).length>0)&&s.jsxs("div",{className:"pt-3 border-t border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest",children:"Stat Sources"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px]",children:[s.jsxs("div",{className:"flex justify-between text-gray-500",children:[s.jsx("span",{children:"Base Stats"}),s.jsx("span",{className:"text-gray-400",children:"10 each"})]}),Object.keys(j).length>0&&s.jsxs("div",{className:"flex justify-between text-cyan-400/70",children:[s.jsx("span",{children:"Gems"}),s.jsxs("span",{children:["+",Object.values(j).reduce(($,B)=>$+B,0)]})]}),Object.keys(k).length>0&&s.jsxs("div",{className:"flex justify-between text-orange-400/70",children:[s.jsx("span",{children:"Runewords"}),s.jsxs("span",{children:["+",Object.values(k).reduce(($,B)=>$+B,0)]})]}),Object.keys(I).length>0&&s.jsxs("div",{className:"flex justify-between text-amber-400/70",children:[s.jsx("span",{children:"Set Bonus"}),s.jsxs("span",{children:["+",Object.values(I).reduce(($,B)=>$+B,0)]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Vn,{className:"w-4 h-4 text-amber-400"})," XP Sources"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 -mt-2",children:["Where your ",i.toLocaleString()," XP in ",n," came from"]}),s.jsx("div",{className:"space-y-2",children:[{label:"Resource Engagement",xp:R.engagementXp,color:"bg-purple-500",textColor:"text-purple-400",desc:"~10 XP per minute of active engagement"},{label:"Mission Rewards",xp:R.questXp,color:"bg-indigo-500",textColor:"text-indigo-400",desc:"XP from completing contracts"},{label:"Boss Encounters",xp:R.bossXp,color:"bg-red-500",textColor:"text-red-400",desc:"XP from boss quiz damage"},{label:"Peer Tutoring",xp:R.tutoringXp,color:"bg-emerald-500",textColor:"text-emerald-400",desc:"XP earned helping other agents"},{label:"Other (Badges, Daily, Behavior)",xp:R.otherXp,color:"bg-amber-500",textColor:"text-amber-400",desc:"Login rewards, behavior awards, badge XP"}].filter($=>$.xp>0).map($=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${$.color}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-300",children:$.label}),s.jsxs("span",{className:`font-bold ${$.textColor}`,children:["~",$.xp.toLocaleString()," XP"]})]}),s.jsx("div",{className:"text-[10px] text-gray-600",children:$.desc})]})]},$.label))}),L>1&&s.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Cu,{className:"w-4 h-4 text-orange-400"}),s.jsx("span",{className:"text-orange-400 font-bold",children:"Streak Bonus Active"}),s.jsxs("span",{className:"ml-auto text-sm font-black text-yellow-400",children:["+",Math.round((L-1)*100),"%"]})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[h,"-week engagement streak  All XP earnings boosted"]})]}),m>1&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 pt-2 border-t border-white/5",children:[s.jsx(_x,{className:"w-3.5 h-3.5 text-purple-400"}),s.jsxs("span",{children:[m,"-day daily login streak"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-2xl p-5 space-y-4 ${A.meta.bgColor} ${A.meta.borderColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(GT,{className:"w-4 h-4"})," Engagement Status"]}),s.jsx("span",{className:`text-sm font-black ${A.meta.color}`,children:A.meta.label})]}),s.jsx("p",{className:"text-sm text-gray-300",children:A.meta.description}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Why this classification"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active time (7d)"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[Math.round(A.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Resources (7d)"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.submissionCount})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active days"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[A.metrics.activityDays,"/7"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Keystrokes"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.totalKeystrokes})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-1",children:"How to level up your status"}),s.jsx("p",{className:"text-sm text-gray-300",children:A.recommendation.studentTip})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommended for you"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.recommendation.categories.map($=>s.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-2.5 py-1 rounded-full text-gray-300 font-medium",children:$},$))})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Vf,{className:"w-4 h-4 text-cyan-400"})," 7-Day Activity"]}),s.jsx("div",{className:"flex items-end gap-2 h-32",children:E.map(($,B)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 font-mono",children:[$.minutes,"m"]}),s.jsx("div",{className:"w-full bg-white/5 rounded-t-lg relative flex-1 flex items-end",children:s.jsx("div",{className:`w-full rounded-t-lg transition-all duration-500 ${$.minutes>0?"bg-purple-500/50 border border-purple-500/30":"bg-white/5"}`,style:{height:`${Math.max($.minutes>0?8:0,$.minutes/C*100)}%`}})}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold",children:$.label}),$.count>0&&s.jsxs("div",{className:"text-[8px] text-gray-600",children:[$.count," res"]})]},B))}),s.jsxs("div",{className:"pt-3 border-t border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Submission Quality"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[U.SUCCESS>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-gray-400",children:"Excellent"}),s.jsx("span",{className:"text-emerald-400 font-bold ml-auto",children:U.SUCCESS})]}),U.NORMAL>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-400",children:"Normal"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:U.NORMAL})]}),U.SUPPORT_NEEDED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),s.jsx("span",{className:"text-gray-400",children:"Needs Support"}),s.jsx("span",{className:"text-amber-400 font-bold ml-auto",children:U.SUPPORT_NEEDED})]}),U.STARTED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),s.jsx("span",{className:"text-gray-400",children:"Started"}),s.jsx("span",{className:"text-gray-400 font-bold ml-auto",children:U.STARTED})]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Dh,{className:"w-4 h-4 text-red-400"})," Boss Fight Readiness"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your equipment and stats prepare you for boss quiz encounters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-red-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-red-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Dh,{className:"w-3 h-3"})," Offense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:["Your ",s.jsxs("span",{className:"text-blue-400 font-bold",children:[S.tech," Tech"]})," powers your base attack.",S.tech>20&&s.jsx("span",{className:"text-emerald-400",children:" Strong offensive capability."}),S.tech<=20&&S.tech>10&&s.jsx("span",{className:"text-yellow-400",children:" Moderate damage output."}),S.tech<=10&&s.jsx("span",{className:"text-red-400",children:" Low damage  equip Tech gear to improve."})]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Crit chance: ",s.jsxs("span",{className:"text-green-400 font-bold",children:[(N.critChance*100).toFixed(0),"%"]})," (from ",S.focus," Focus)"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-yellow-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-yellow-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(os,{className:"w-3 h-3"})," Defense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[N.armorPercent.toFixed(0),"% Armor"]})," from ",S.analysis," Analysis reduces boss damage.",N.armorPercent>=30&&s.jsx("span",{className:"text-emerald-400",children:" Excellent damage mitigation."}),N.armorPercent<30&&N.armorPercent>=15&&s.jsx("span",{className:"text-yellow-400",children:" Decent protection."}),N.armorPercent<15&&s.jsx("span",{className:"text-red-400",children:" Vulnerable  equip Analysis gear."})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-emerald-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-emerald-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Mh,{className:"w-3 h-3"})," Survivability"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-emerald-400 font-bold",children:[N.maxHp," HP"]})," from ",S.charisma," Charisma.",N.maxHp>=150&&s.jsx("span",{className:"text-emerald-400",children:" Large health pool  can absorb many hits."}),N.maxHp<150&&N.maxHp>=120&&s.jsx("span",{className:"text-yellow-400",children:" Average survivability."}),N.maxHp<120&&s.jsx("span",{className:"text-red-400",children:" Fragile  Charisma gear increases HP."})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommendations"}),s.jsxs("div",{className:"space-y-1.5",children:[w<100&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(Sy,{className:"w-3 h-3 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your Gear Score is ",s.jsx("span",{className:"text-amber-400 font-bold",children:w}),". Complete more missions and level up to earn better equipment drops."]})]}),S.tech<=15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(Sy,{className:"w-3 h-3 text-blue-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Equip items with ",s.jsx("span",{className:"text-blue-400 font-bold",children:"Tech"})," stats to increase boss damage output."]})]}),N.critChance<.1&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(Sy,{className:"w-3 h-3 text-green-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Socket ",s.jsx("span",{className:"text-green-400 font-bold",children:"Focus"})," gems to boost critical hit chance beyond ",(N.critChance*100).toFixed(0),"%."]})]}),N.armorPercent<10&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(Sy,{className:"w-3 h-3 text-yellow-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your armor is low. ",s.jsx("span",{className:"text-yellow-400 font-bold",children:"Analysis"})," items will reduce boss damage significantly."]})]}),w>=100&&N.critChance>=.1&&N.armorPercent>=10&&S.tech>15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-emerald-400",children:[s.jsx(KT,{className:"w-3 h-3 mt-0.5 shrink-0"}),s.jsx("span",{children:"Your loadout is well-balanced. Consider specializing in one stat for even greater effectiveness."})]})]})]})]})]})};function Ije(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=Zg(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const Rje={Textbook:s.jsx(zi,{className:"w-5 h-5"}),Simulation:s.jsx(Ff,{className:"w-5 h-5 fill-current"}),"Lab Guide":s.jsx(W2,{className:"w-5 h-5"}),"Practice Set":s.jsx(cs,{className:"w-5 h-5"}),Article:s.jsx($H,{className:"w-5 h-5"}),"Video Lesson":s.jsx(HH,{className:"w-5 h-5"}),Supplemental:s.jsx(lE,{className:"w-5 h-5"})};let xh=0,Z_=!1,eT=!1,XU="";const Mje=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:a,onStartAssignment:i,studentTab:o="RESOURCES"})=>{var Ka,ki,hs,bi,_t,me,rt,ft,Xt,mr,cn,Jr,vn,Rr,Ls,fs,fo,xl,ms,ps,Da,wa,q,be,je,Ae,pt,It,jt,Yt,Nr;const c=Ga(),{confirm:d}=Ro(),[h,m]=T.useState(new Set),[p,x]=T.useState(t.classType||((Ka=t.enrolledClasses)==null?void 0:Ka[0])||"Unassigned"),[y,S]=T.useState(null),[N,w]=T.useState([]),[j,k]=T.useState({}),[I,L]=T.useState(!1),[O,R]=T.useState(null);XU!==t.id&&(XU=t.id,xh=((ki=t.gamification)==null?void 0:ki.lastLevelSeen)||1,Z_=!1,eT=!1),xh===0&&(xh=((hs=t.gamification)==null?void 0:hs.lastLevelSeen)||1);const A=o,[E,C]=T.useState(!1),[U,P]=T.useState(null),[$,B]=T.useState(!1),[G,K]=T.useState(null),[H,Z]=T.useState(null),[ae,he]=T.useState(null),[fe,Y]=T.useState(null),[ne,re]=T.useState(null),[xe,Te]=T.useState(null),[Ve,Ze]=T.useState(!1),[Xe,ie]=T.useState(null),[Be,Q]=T.useState(!1);T.useEffect(()=>{var De,Fe,qe;const ue=((De=t.gamification)==null?void 0:De.level)||1,ye=Math.max(((Fe=t.gamification)==null?void 0:Fe.lastLevelSeen)||1,xh);if(ue>ye){xh=ue;const sr=((qe=t.gamification)==null?void 0:qe.inventory)||[],Kt=sr.length>0?sr[sr.length-1]:null;R(Kt),L(!0),qn.levelUp()}},[(bi=t.gamification)==null?void 0:bi.level,(_t=t.gamification)==null?void 0:_t.lastLevelSeen,(me=t.gamification)==null?void 0:me.inventory]),T.useEffect(()=>{const ue=[];try{ue.push(Re.subscribeToXPEvents(ye=>{const De=ye.find(Fe=>{var qe,sr,Kt;if(!Fe.isActive||Fe.type!=="GLOBAL"&&Fe.targetClass!==p||Fe.scheduledAt&&new Date(Fe.scheduledAt)>new Date)return!1;if((qe=Fe.targetSections)!=null&&qe.length){const Rn=Fe.type!=="GLOBAL"&&Fe.targetClass?Fe.targetClass:p,ua=((sr=t.classSections)==null?void 0:sr[Rn])||((Kt=t.classSections)==null?void 0:Kt[p])||t.section||"";if(!Fe.targetSections.includes(ua))return!1}return!0});S(De||null)}))}catch{}try{ue.push(Re.subscribeToQuests(ye=>{const De=t.enrolledClasses||(t.classType?[t.classType]:[]);w(ye.filter(Fe=>{var sr,Kt;if(!Fe.isActive)return!1;const qe=new Date;if(Fe.startsAt&&new Date(Fe.startsAt)>qe||Fe.expiresAt&&new Date(Fe.expiresAt)<qe||Fe.targetClass&&!De.includes(Fe.targetClass))return!1;if((sr=Fe.targetSections)!=null&&sr.length){const Rn=((Kt=t.classSections)==null?void 0:Kt[Fe.targetClass||p])||t.section||"";if(!Fe.targetSections.includes(Rn))return!1}return!0}))}))}catch{}try{ue.push(Re.subscribeToStudentPracticeProgress(t.id,k))}catch{}return()=>ue.forEach(ye=>ye())},[p]);const te=((ft=(rt=t.gamification)==null?void 0:rt.classXp)==null?void 0:ft[p])||0,Ne=se.useRef(te),Se=se.useRef(p);T.useEffect(()=>{if(Se.current!==p){Se.current=p,Ne.current=te;return}if(te>Ne.current&&Ne.current>=0){const ue=te-Ne.current;if(ue>0&&ue<500){Te(ue),qn.xpGain();const ye=setTimeout(()=>Te(null),2e3);return()=>clearTimeout(ye)}}Ne.current=te},[te]),T.useEffect(()=>{var De;if(Z_)return;Z_=!0;const ue=new Date().toISOString().split("T")[0];((De=t.gamification)==null?void 0:De.lastLoginRewardDate)!==ue&&!Be&&Re.claimDailyLogin().then(Fe=>{Fe.alreadyClaimed||(Q(!0),qn.dailyReward(),c.success(`Daily login: +${Fe.xpReward} XP, +${Fe.fluxReward} Flux (${Fe.streak}-day streak!)`))}).catch(()=>{})},[]),T.useEffect(()=>{eT||(eT=!0,Re.updateEngagementStreak().catch(()=>{}))},[]);const[Qe,nt]=T.useState([]);T.useEffect(()=>{let ue;try{ue=Re.subscribeToAnnouncements(nt)}catch{}return()=>ue==null?void 0:ue()},[]);const Ot=T.useMemo(()=>{var ye;const ue=((ye=t.gamification)==null?void 0:ye.dismissedAnnouncements)||[];return Qe.filter(De=>{var Fe,qe,sr;if(ue.includes(De.id)||De.classType!=="GLOBAL"&&De.classType!==p)return!1;if((Fe=De.targetSections)!=null&&Fe.length){const Kt=De.classType!=="GLOBAL"?De.classType:p,Rn=((qe=t.classSections)==null?void 0:qe[Kt])||((sr=t.classSections)==null?void 0:sr[p])||t.section||"";if(!De.targetSections.includes(Rn))return!1}return!0})},[Qe,(Xt=t.gamification)==null?void 0:Xt.dismissedAnnouncements,p,t.classSections,t.section]),Me=async ue=>{await Re.dismissAnnouncement(t.id,ue)},lt=()=>{var ye;const ue=((ye=t.gamification)==null?void 0:ye.level)||1;xh=ue,L(!1),R(null),Re.updateUserLastLevelSeen(t.id,ue).catch(()=>{})},St=async ue=>{try{await Re.updateUserAppearance(t.id,ue,p),c.success("Profile updated!"),C(!1),K(null),Z(null),he(null),Y(null),re(null)}catch{c.error("Failed to save  try again")}},vt=t.enrolledClasses||(t.classType?[t.classType]:[]),et=T.useMemo(()=>Uu(t,p),[t,p]),ce=et.equipped,Ue=et.inventory,Je=T.useMemo(()=>{const ue={tech:10,focus:10,analysis:10,charisma:10};return Object.values(ce).filter(Boolean).forEach(De=>{De.stats&&Object.entries(De.stats).forEach(([Fe,qe])=>{ue[Fe]+=qe})}),ue},[ce]),ht=T.useMemo(()=>u0(ce),[ce]),dt=T.useMemo(()=>{const ue=t.gamification||{},De={...ue.achievementProgress||{}},Fe=ue.xp||0,qe=ue.level||1,sr=ue.inventory||[],Kt=ue.completedQuests||[],Rn=ue.engagementStreak||0,ua=ue.loginStreak||0,Bs=ue.tutoringSessionsCompleted||0,Sa=ue.bossesDefeated||0,Na=ue.challengesCompleted||0,ra=ue.itemsCrafted||0,Mr=(Po,$s)=>{(!De[Po]||$s>De[Po])&&(De[Po]=$s)};return Mr("first_steps",Fe),Mr("xp_5k",Fe),Mr("xp_25k",Fe),Mr("rising_star",qe),Mr("veteran",qe),Mr("elite",qe),Mr("legend",qe),Mr("collector_10",sr.length),Mr("collector_50",sr.length),Mr("gear_score_100",ht),Mr("gear_score_500",ht),Mr("first_mission",Kt.length),Mr("mission_5",Kt.length),Mr("mission_20",Kt.length),Mr("boss_slayer",Sa),Mr("streak_3",Rn),Mr("streak_8",Rn),Mr("streak_16",Rn),Mr("login_7",ua),Mr("login_30",ua),Mr("challenges_10",Na),Mr("tutor_1",Bs),Mr("tutor_10",Bs),Mr("tech_50",Je.tech),Mr("focus_50",Je.focus),Mr("analysis_50",Je.analysis),Mr("charisma_50",Je.charisma),Mr("craft_10",ra),De},[t,ht,Je]),Ut=[{subject:"Tech",A:Je.tech,fullMark:100},{subject:"Focus",A:Je.focus,fullMark:100},{subject:"Analysis",A:Je.analysis,fullMark:100},{subject:"Charisma",A:Je.charisma,fullMark:100}],tr=T.useMemo(()=>{const ue={};return e.filter(ye=>{var De,Fe;if(ye.classType!==p||ye.status==="DRAFT"||ye.status==="ARCHIVED"||ye.scheduledAt&&new Date(ye.scheduledAt)>new Date)return!1;if((De=ye.targetSections)!=null&&De.length){const qe=((Fe=t.classSections)==null?void 0:Fe[p])||t.section||"";if(!ye.targetSections.includes(qe))return!1}return!0}).forEach(ye=>{var qe;const De=r.find(sr=>sr.assignmentId===ye.id),Fe=ye.unit||"General Resources";ue[Fe]||(ue[Fe]=[]),ue[Fe].push({...ye,lastEngagement:De&&De.submittedAt||null,engagementTime:((qe=De==null?void 0:De.metrics)==null?void 0:qe.engagementTime)||0})}),ue},[e,r,p]),Ir=ue=>{const ye=new Set(h);ye.has(ue)?ye.delete(ue):ye.add(ue),m(ye)},ve=((mr=t.gamification)==null?void 0:mr.level)||1,st=((cn=t.gamification)==null?void 0:cn.currency)||0,At=te,Pt=At%1e3/1e3*100,$t=WU(At),tt=WU(st),ar=c0(ve),Sr=async ue=>{const ye=ue.target.value;x(ye),await Re.switchUserView(t.id,ye)},Ur=async ue=>{if(!$){B(!0);try{await Re.equipItem(t.id,ue,p),P(null),qn.equip(),c.success(`${ue.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{B(!1)}}},mn=async ue=>{B(!0);try{await Re.unequipItem(t.id,ue,p),P(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{B(!1)}},wr=async()=>{if(!U)return;if(Object.values(ce).some(De=>De&&De.id===U.id)){c.error("Unequip this item before salvaging.");return}const ye=OM(U);if(await d({message:`Salvage ${U.name} for ${ye} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){B(!0);try{await Re.disenchantItem(t.id,U,p),P(null),qn.salvage(),c.success(`Salvaged for ${ye} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{B(!1)}}},Gt=async ue=>{if(!U)return;const ye=Yi[ue];if(st<ye)return c.error("Insufficient Cyber-Flux.");B(!0);try{await Re.craftItem(t.id,U,ue,p),P(null),qn.craft(),c.success(`${ue.charAt(0)+ue.slice(1).toLowerCase()} complete.`)}catch(De){const Fe=(De==null?void 0:De.message)||(De==null?void 0:De.code)||"Unknown error";c.error(`Fabrication failed: ${Fe}`)}finally{B(!1)}},zt=((Jr=t.gamification)==null?void 0:Jr.gemsInventory)||[],Nt=async()=>{if(!(!U||$)){if(st<Yi.SOCKET)return c.error("Insufficient Cyber-Flux.");if((U.sockets||0)>=3)return c.error("Maximum sockets reached.");B(!0);try{const ue=await Re.addSocket(U.id,p);P(ue.item),qn.craft(),c.success("Socket added!")}catch(ue){c.error((ue==null?void 0:ue.message)||"Failed to add socket.")}finally{B(!1)}}},Vr=async ue=>{if(!(!U||$)){if(st<Yi.ENCHANT)return c.error("Insufficient Cyber-Flux.");B(!0);try{const ye=await Re.socketGem(U.id,ue,p);P(ye.item),qn.craft(),ye.runewordActivated?(qn.levelUp(),c.success(`RUNEWORD ACTIVATED: ${ye.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(ye){c.error((ye==null?void 0:ye.message)||"Failed to socket gem.")}finally{B(!1)}}},ln=async ue=>{var Fe;if(!U||$)return;const ye=(Fe=U.gems)==null?void 0:Fe[ue];if(!ye)return;const De=CM(U.rarity,ye.tier,U.unsocketCount||0);if(st<De)return c.error(`Insufficient Cyber-Flux. Need ${De}.`);B(!0);try{const qe=await Re.unsocketGem(U.id,ue,p);P(qe.item),qn.craft(),c.success(`Gem removed! -${qe.cost} Flux`)}catch(qe){c.error((qe==null?void 0:qe.message)||"Failed to unsocket gem.")}finally{B(!1)}},Yr=((vn=t.gamification)==null?void 0:vn.activeQuests)||[],Fr=((Rr=t.gamification)==null?void 0:Rr.completedQuests)||[],pn=N.filter(ue=>Yr.some(ye=>ye.questId===ue.id)),dr=N.filter(ue=>!Yr.some(ye=>ye.questId===ue.id)&&!Fr.includes(ue.id)),ba=async ue=>{try{await Re.acceptQuest(t.id,ue.id),qn.questAccept(),c.success(`Contract accepted: ${ue.title}`)}catch{c.error("Failed to accept contract.")}},gn=async ue=>{const ye=ue.type==="CUSTOM";if(await d({message:ye?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:ye?"Submit":"Deploy",variant:"info"}))try{await Re.deployMission(t.id,ue),qn.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},In=["HEAD","HANDS","RING1","AMULET"],ii=["CHEST","BELT","FEET","RING2"],[jr,xn]=T.useState(null),si=z_e(MU(G7,{activationConstraint:{distance:8}}),MU(VX,{activationConstraint:{delay:150,tolerance:5}})),Qn=ue=>ue==="RING1"||ue==="RING2"?["RING"]:[ue],nn=ue=>{const{active:ye}=ue,De=Ue.find(Fe=>Fe.id===ye.id)||Object.values(ce).find(Fe=>Fe&&Fe.id===ye.id);xn(De||null)},yn=ue=>{const{active:ye,over:De}=ue;if(xn(null),!De)return;const Fe=ye.id,qe=De.id;if(qe.startsWith("slot-")){const sr=qe.replace("slot-",""),Kt=Ue.find(ua=>ua.id===Fe);if(!Kt||!Qn(sr).includes(Kt.slot))return;Ur(Kt)}if(Fe.startsWith("equipped-")&&(qe==="inventory-zone"||qe.startsWith("storage-cell-"))){const sr=Fe.replace("equipped-","");mn(sr)}},An=(ue,ye,De="w-5 h-5")=>{const Fe=`${De} ${ye}`,qe={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(ue){case"HEAD":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),s.jsx("path",{d:"M5 11v2h14v-2"}),s.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),s.jsx("path",{d:"M6 4h12"}),s.jsx("path",{d:"M12 4v5"}),s.jsx("path",{d:"M9 9h6"})]});case"HANDS":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),s.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),s.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),s.jsx("path",{d:"M4 19h16"}),s.jsx("path",{d:"M11 3v4"})]});case"BELT":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),s.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),s.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),s.jsx("path",{d:"M12 7v3"}),s.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),s.jsx("path",{d:"M12 9V6"}),s.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return s.jsx(Wv,{className:Fe})}},oi=({slot:ue})=>{const ye=ce[ue],De=ye?fa(ye.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:Fe,isOver:qe}=K7({id:`slot-${ue}`}),{attributes:sr,listeners:Kt,setNodeRef:Rn,isDragging:ua}=KX({id:ye?`equipped-${ue}`:`empty-slot-${ue}`,disabled:!ye}),Bs=jr&&Qn(ue).includes(jr.slot),Sa=qe&&Bs?"ring-2 ring-purple-500 scale-110":jr&&Bs?"ring-1 ring-purple-500/40 animate-pulse":"";return s.jsx("div",{ref:Fe,className:"relative",children:s.jsx("div",{ref:Rn,...sr,...Kt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${ua?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${De.border} ${De.bg} ${De.shimmer} ${De.glow} ${Sa}`,onClick:()=>!ua&&ye&&P(ye),children:ye?s.jsxs(s.Fragment,{children:[An(ue.replace(/\d/,""),De.text),s.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${De.text}`,children:ye.baseName||ye.name.split(" ").slice(-1)[0]}),!ua&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${De.text}`,children:ye.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[ye.rarity," ",ue]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(ye.stats).map(([Na,ra])=>`+${ra} ${Na.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):s.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:ue.slice(0,4)})})})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[Ot.length>0&&s.jsx("div",{className:"lg:col-span-12 space-y-2",children:Ot.map(ue=>{const ye={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return s.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${ye[ue.priority]}`,children:[s.jsx(Xv,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white",children:ue.title}),s.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:ue.content})]}),s.jsx("button",{onClick:()=>Me(ue.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Jn,{className:"w-4 h-4"})})]},ue.id)})}),y&&s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:s.jsx(Vn,{className:"w-5 h-5 fill-current"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[y.title," ACTIVE"]}),s.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",y.multiplier,"x XP on all tasks."]})]})]}),s.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[y.multiplier,"x"]})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${ar.tierColor.split(" ")[0]} border-opacity-30`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${ar.tierGlow} shadow-xl`,children:s.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${ar.tierColor.split(" ")[0]}`})}),s.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Ls=t.gamification)==null?void 0:Ls.codename)||t.name}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${ar.tierColor.split(" ")[1]}`,children:[ar.rankName," (Lvl ",ve,")"]}),s.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",ht]})]}),vt.length>1&&s.jsxs("div",{className:"mt-4 relative w-full",children:[s.jsx("select",{value:p,onChange:Sr,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:vt.map(ue=>s.jsx("option",{value:ue,children:ue},ue))}),s.jsx(yi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),s.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Pt}%`}})}),s.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[s.jsxs("span",{children:[$t.toLocaleString()," XP (",p,")"]}),s.jsx("span",{children:"Next Rank"}),xe&&s.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",xe," XP"]})]})]})]}),s.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:s.jsx(x3,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-white leading-none",children:tt})]})]})}),(((fs=t.gamification)==null?void 0:fs.engagementStreak)||0)>0&&(()=>{var De;const ue=((De=t.gamification)==null?void 0:De.engagementStreak)||0,ye=ZG(ue);return s.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:s.jsx(Cu,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),s.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[ue,"w"]})]}),ye>1&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((ye-1)*100),"%"]})]})]})})})(),(((fo=t.gamification)==null?void 0:fo.loginStreak)||0)>1&&s.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[s.jsx(KT,{className:"w-5 h-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),s.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((xl=t.gamification)==null?void 0:xl.loginStreak)||0," day streak"]})]})]}),s.jsxs("button",{onClick:()=>Ze(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[s.jsx(o0,{className:"w-4 h-4"})," View Profile"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&s.jsxs("button",{onClick:()=>a("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:s.jsx(W2,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),s.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),s.jsx(el,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&s.jsxs("button",{onClick:()=>a("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:s.jsx(Ile,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),s.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),s.jsx(el,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),s.jsx("div",{className:"lg:col-span-9 space-y-6",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[A==="MISSIONS"&&s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[dr.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),dr.map(ue=>s.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:ue.title}),s.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:ue.type.replace("_"," ")})]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:ue.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[ue.statRequirements&&s.jsx("div",{className:"flex gap-2",children:Object.entries(ue.statRequirements).map(([ye,De])=>s.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[De," ",ye]},ye))}),ue.expiresAt&&s.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[s.jsx(Ds,{className:"w-3 h-3"})," Expires: ",new Date(ue.expiresAt).toLocaleDateString()]})]}),s.jsxs("button",{onClick:()=>ba(ue),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[s.jsx(ku,{className:"w-4 h-4"})," Accept Contract"]})]},ue.id))]}),s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[pn.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),pn.map(ue=>{var qe,sr;const ye=((qe=Yr.find(Kt=>Kt.questId===ue.id))==null?void 0:qe.status)||"ACCEPTED",De=(sr=Yr.find(Kt=>Kt.questId===ue.id))==null?void 0:sr.deploymentRoll,Fe=ue.type==="CUSTOM";return s.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:s.jsx(cs,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:ue.title}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[ue.type," MISSION"]})]})]}),s.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${ye==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":ye==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":ye==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:ye})]}),ye==="ACCEPTED"?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:ue.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>gn(ue),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[s.jsx(UH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),Fe?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),ue.isGroupQuest&&s.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:s.jsx(ls,{className:"w-5 h-5"})})]})]}):ye==="DEPLOYED"?s.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),s.jsx(Vn,{className:"w-6 h-6 text-purple-400"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),s.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:Fe?"AWAITING_HQ_SIG_VERIFICATION":De===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),s.jsx("div",{className:"h-10 w-px bg-white/5"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),s.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),s.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),s.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:Fe?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},ue.id)})]})]},"missions"),A==="RESOURCES"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(tr).length===0?s.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):s.jsx("div",{className:"space-y-4",children:Object.entries(tr).sort().map(([ue,ye])=>s.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[s.jsxs("button",{onClick:()=>Ir(ue),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h.has(ue)?s.jsx(yi,{className:"w-4 h-4 text-purple-400"}):s.jsx(el,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:ue})]}),s.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[ye.length," Files"]})]}),h.has(ue)&&s.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:ye.map(De=>{const Fe=!!De.dueDate,qe=De.dueDate?new Date(De.dueDate):null,sr=new Date,Kt=qe?Math.ceil((qe.getTime()-sr.getTime())/864e5):1/0,Rn=Kt<=0?"text-red-400":Kt<=2?"text-yellow-400":"text-gray-500",ua=Math.floor(De.engagementTime/60),Bs=ua>=5,Sa=j[De.id],Na=Sa==null?void 0:Sa.completed;return s.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${Na?"border-green-500/20":"border-white/5"}`,onClick:()=>i&&i(De.id),children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${Na||Bs?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":De.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:Na?s.jsx(Lr,{className:"w-6 h-6"}):Bs?s.jsx(Lr,{className:"w-6 h-6"}):De.lastEngagement?s.jsx(Lr,{className:"w-5 h-5 opacity-60"}):Rje[De.category||"Supplemental"]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:De.category}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:De.title}),Na&&s.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[s.jsx(Lr,{className:"w-2.5 h-2.5"}),"COMPLETED",((Sa==null?void 0:Sa.totalCompletions)||0)>1?` (${Sa.totalCompletions}x)`:""]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:s.jsx("p",{className:"text-xs text-gray-500 truncate",children:De.description})}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[De.lastEngagement&&s.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[ua,"m engaged"]}),Na&&(Sa==null?void 0:Sa.bestScore)!=null&&Sa.bestScore>0&&s.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",Sa.bestScore,"%"]}),Fe&&s.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Rn}`,children:[s.jsx(io,{className:"w-3 h-3"}),Kt<=0?"Overdue":Kt===1?"Due tomorrow":`Due in ${Kt}d`]})]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:s.jsx(Ff,{className:"w-4 h-4 text-purple-400 fill-current"})})]},De.id)})})]},ue))})},"resources"),A==="LOADOUT"&&s.jsxs($Te,{sensors:si,collisionDetection:G_e,modifiers:[Ije],onDragStart:nn,onDragEnd:yn,children:[s.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[s.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((ms=et.appearance)==null?void 0:ms.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),s.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[s.jsx("div",{className:"flex flex-col gap-4",children:In.map(ue=>s.jsx(oi,{slot:ue},ue))}),s.jsx("div",{className:"w-40 h-full relative",children:s.jsx(rx,{equipped:ce,appearance:et.appearance,evolutionLevel:ve})}),s.jsx("div",{className:"flex flex-col gap-4",children:ii.map(ue=>s.jsx(oi,{slot:ue},ue))})]}),s.jsxs("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),C(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[s.jsx(Qle,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),s.jsx("div",{className:"h-[200px]",children:s.jsx(nK,{width:"100%",height:"100%",children:s.jsxs(T_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:Ut,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),s.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),s.jsx(AQ,{stroke:"rgba(255,255,255,0.08)"}),s.jsx($x,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),s.jsx(Bx,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),s.jsx(zx,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const ue=ME(Je);return s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),s.jsx("span",{className:"text-gray-500",children:"Tech"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:Je.tech}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),s.jsx("br",{}),"Increases damage dealt to bosses."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),s.jsx("span",{className:"text-gray-500",children:"Focus"}),s.jsx("span",{className:"text-green-400 font-bold ml-auto",children:Je.focus}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),s.jsx("br",{}),"Crit chance: ",(ue.critChance*100).toFixed(0),"%  Crit damage: ",ue.critMultiplier.toFixed(2),"x"]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),s.jsx("span",{className:"text-gray-500",children:"Analysis"}),s.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:Je.analysis}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),s.jsx("br",{}),"Reduces boss damage by ",ue.armorPercent.toFixed(0),"%."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),s.jsx("span",{className:"text-gray-500",children:"Charisma"}),s.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:Je.charisma}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),s.jsx("br",{}),"Max HP: ",ue.maxHp]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"HP"}),s.jsx("span",{className:"text-emerald-400 font-bold",children:ue.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Armor"}),s.jsxs("span",{className:"text-yellow-400 font-bold",children:[ue.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Crit"}),s.jsxs("span",{className:"text-green-400 font-bold",children:[(ue.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),s.jsx(Dje,{inventory:Ue,equipped:ce,draggedItem:jr,onInspect:P,getSlotIcon:An})]},"loadout"),s.jsx(nje,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:jr&&(()=>{const ue=fa(jr.rarity);return s.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:s.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${ue.bg} ${ue.border} ${ue.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[An(jr.slot,ue.text,"w-7 h-7"),s.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${ue.text} drop-shadow-lg`,children:jr.baseName||jr.name.split(" ").slice(-1)[0]})]})})})()})]}),A==="ACHIEVEMENTS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(oje,{unlockedAchievements:((ps=t.gamification)==null?void 0:ps.unlockedAchievements)||[],achievementProgress:dt})},"achievements"),A==="SKILLS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(cje,{specialization:(Da=t.gamification)==null?void 0:Da.specialization,skillPoints:((wa=t.gamification)==null?void 0:wa.skillPoints)||0,unlockedSkills:((q=t.gamification)==null?void 0:q.unlockedSkills)||[]})},"skills"),A==="FORTUNE"&&s.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(uje,{currency:st,lastSpin:(be=t.gamification)==null?void 0:be.lastWheelSpin,classType:p})},"fortune"),A==="TUTORING"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(jje,{userId:t.id,userName:t.name,classType:p})},"tutoring"),A==="INTEL"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(Oje,{user:t,submissions:r,assignments:e,activeClass:p})},"intel")]})}),s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[s.jsx(mje,{userId:t.id,userName:t.name,classType:p}),s.jsx(_je,{userId:t.id,classType:p,userSection:((je=t.classSections)==null?void 0:je[p])||t.section,userClassSections:t.classSections,playerStats:Je,playerAppearance:et.appearance,playerEquipped:ce,playerEvolutionLevel:ve})]})}),s.jsx(Ei,{isOpen:E,onClose:()=>{C(!1),K(null),Z(null),he(null),Y(null),re(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:s.jsx(rx,{equipped:ce,appearance:{...et.appearance,hue:G??((Ae=et.appearance)==null?void 0:Ae.hue)??0,bodyType:H??((pt=et.appearance)==null?void 0:pt.bodyType)??"A",skinTone:ae??((It=et.appearance)==null?void 0:It.skinTone)??0,hairStyle:fe??((jt=et.appearance)==null?void 0:jt.hairStyle)??1,hairColor:ne??((Yt=et.appearance)==null?void 0:Yt.hairColor)??0}})})}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),s.jsx("div",{className:"flex justify-center gap-2",children:QX.map((ue,ye)=>{var Fe;const De=(ae??((Fe=et.appearance)==null?void 0:Fe.skinTone)??0)===ye;return s.jsx("button",{onClick:()=>he(ye),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${De?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ue}},ye)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:aje.map((ue,ye)=>{var Fe;const De=(fe??((Fe=et.appearance)==null?void 0:Fe.hairStyle)??1)===ye;return s.jsx("button",{onClick:()=>Y(ye),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${De?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:ue},ye)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),s.jsx("div",{className:"flex justify-center gap-2",children:XX.map((ue,ye)=>{var Fe;const De=(ne??((Fe=et.appearance)==null?void 0:Fe.hairColor)??0)===ye;return s.jsx("button",{onClick:()=>re(ye),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${De?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ue}},ye)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),s.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(ue=>{var De;const ye=(H??((De=et.appearance)==null?void 0:De.bodyType)??"A")===ue;return s.jsx("button",{onClick:()=>Z(ue),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${ye?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:ue==="A"?"Alpha":ue==="B"?"Beta":"Femme"},ue)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(ue=>{var De;const ye=(G??((De=et.appearance)==null?void 0:De.hue)??0)===ue;return s.jsx("button",{onClick:()=>K(ue),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${ye?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${ue}, 60%, 45%)`}},ue)})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{C(!1),K(null),Z(null),he(null),Y(null),re(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:()=>{var ue,ye,De,Fe,qe;return St({hue:G??((ue=et.appearance)==null?void 0:ue.hue)??0,bodyType:H??((ye=et.appearance)==null?void 0:ye.bodyType)??"A",skinTone:ae??((De=et.appearance)==null?void 0:De.skinTone)??0,hairStyle:fe??((Fe=et.appearance)==null?void 0:Fe.hairStyle)??1,hairColor:ne??((qe=et.appearance)==null?void 0:qe.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),s.jsx(Ei,{isOpen:!!U,onClose:()=>P(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:U&&s.jsxs("div",{className:"space-y-6 text-gray-100",children:[s.jsxs("div",{className:`p-5 rounded-xl border ${U.runewordActive?"border-amber-500/40 runeword-active":fa(U.rarity).border} ${fa(U.rarity).bg} ${fa(U.rarity).shimmer} relative overflow-hidden`,children:[s.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${U.runewordActive?"border-amber-500/50":fa(U.rarity).border} ${fa(U.rarity).bg}`,style:{boxShadow:U.runewordActive?"0 0 20px rgba(245,158,11,0.3)":U.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":U.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:An(U.slot,U.runewordActive?"text-amber-400":fa(U.rarity).text,"w-7 h-7")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`text-lg font-bold ${U.runewordActive?"text-amber-300":fa(U.rarity).text}`,children:U.name}),s.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[U.rarity," ",U.slot]}),U.runewordActive&&s.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(Nr=IM(U))==null?void 0:Nr.name})]})]}),s.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(U.stats).map(([ue,ye])=>s.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[s.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:ue}),s.jsxs("span",{className:"font-mono font-bold",children:["+",ye]})]},ue))}),s.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:U.affixes.map((ue,ye)=>s.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[ue.name," (T",ue.tier,")"]},ye))})]}),(U.sockets||0)>0&&(()=>{const ue=U.sockets||0,ye=U.gems||[],De=ue-ye.length,Fe=IM(U);return s.jsxs("div",{className:`p-4 rounded-xl border ${Fe?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[Fe&&s.jsxs("div",{className:"mb-3 text-center",children:[s.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),s.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:Fe.name}),s.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:Fe.lore}),s.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(Fe.bonusStats).map(([qe,sr])=>s.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",sr," ",qe.slice(0,3).toUpperCase()]},qe))}),Fe.bonusEffects&&Fe.bonusEffects.length>0&&s.jsx("div",{className:"mt-1",children:Fe.bonusEffects.map(qe=>s.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:qe.description},qe.id))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[s.jsx(x3,{className:"w-3 h-3"})," Gem Sockets (",ye.length,"/",ue,")"]}),s.jsxs("div",{className:"flex gap-2",children:[ye.map((qe,sr)=>{const Kt=CM(U.rarity,qe.tier,U.unsocketCount||0);return s.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:qe.color,backgroundColor:`${qe.color}20`,boxShadow:`0 0 8px ${qe.color}40`},children:s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:qe.color}})}),s.jsx("span",{className:"text-[9px] text-gray-400",children:qe.name}),s.jsxs("button",{onClick:()=>ln(sr),disabled:$||st<Kt,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${Kt} Flux`,children:["Remove (",Kt," F)"]})]},sr)}),Array.from({length:De}).map((qe,sr)=>s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${sr}`))]}),De>0&&zt.length>0&&s.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Yi.ENCHANT," Flux)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:zt.map(qe=>s.jsxs("button",{onClick:()=>Vr(qe.id),disabled:$||st<Yi.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:qe.color}}),s.jsx("span",{className:"text-gray-300",children:qe.name}),s.jsxs("span",{className:"text-gray-600 font-mono",children:["+",qe.value]})]},qe.id))}),ye.length>0&&!Fe&&(()=>{const qe=ye.map(Kt=>Kt.name),sr=OE.filter(Kt=>Kt.requiredSockets===ue&&Kt.pattern.slice(0,qe.length).every((Rn,ua)=>Rn===qe[ua]));return sr.length===0?null:s.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:sr.map(Kt=>s.jsxs("div",{children:["Possible: ",s.jsx("span",{className:"font-bold text-amber-400/80",children:Kt.name}),"  needs [",Kt.pattern.join("  "),"]"]},Kt.id))})})()]})]})})(),(U.sockets||0)<3&&s.jsxs("button",{onClick:Nt,disabled:$||st<Yi.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(x3,{className:"w-4 h-4"}),"Add Socket (",Yi.SOCKET," Flux)  ",U.sockets||0,"/3"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const ue=U.slot==="RING"?"RING1":U.slot,ye=ce[ue]||(U.slot==="RING"?ce.RING2:null);if(!ye||ye.id===U.id)return null;const De=fa(ye.rarity),Fe=new Set([...Object.keys(U.stats),...Object.keys(ye.stats)]);return s.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-xs font-bold ${De.text}`,children:ye.name}),s.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:ye.rarity})]}),s.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(Fe).map(qe=>{const sr=U.stats[qe]||0,Kt=ye.stats[qe]||0,Rn=sr-Kt;return Rn===0?s.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[qe.slice(0,3).toUpperCase(),": 0"]},qe):s.jsxs("span",{className:`text-[10px] font-mono font-bold ${Rn>0?"text-green-400":"text-red-400"}`,children:[qe.slice(0,3).toUpperCase(),": ",Rn>0?"":"",Math.abs(Rn)]},qe)})})]})})(),(()=>{var ye;const ue=(ye=Object.entries(ce).find(([,De])=>De&&De.id===U.id))==null?void 0:ye[0];return ue?s.jsx("button",{onClick:()=>mn(ue),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:$,children:"Unequip Gear"}):s.jsx("button",{onClick:()=>Ur(U),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:$,children:"Equip Gear"})})(),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),s.jsxs("button",{onClick:()=>Gt("RECALIBRATE"),disabled:$||st<Yi.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.RECALIBRATE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),s.jsxs("button",{onClick:()=>Gt("REFORGE"),disabled:$||st<Yi.REFORGE||U.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.REFORGE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),s.jsxs("button",{onClick:()=>Gt("OPTIMIZE"),disabled:$||st<Yi.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.OPTIMIZE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsxs("button",{onClick:wr,disabled:$,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[s.jsx(Wr,{className:"w-4 h-4"}),"Salvage for ",OM(U)," Flux"]})]})]})}),Ve&&s.jsx(Cje,{user:t,classType:p,onClose:()=>Ze(!1)}),Xe&&s.jsx(Aje,{item:Xe,onClose:()=>ie(null)}),s.jsx(Ei,{isOpen:I,onClose:lt,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:s.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((ue,ye)=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][ye%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},ye))}),s.jsxs("div",{className:"relative inline-block mb-6",children:[s.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),s.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),s.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:s.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:ve})})]}),s.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:s.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:ar.rankName})}),s.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),O&&s.jsxs("div",{className:`${fa(O.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${fa(O.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),s.jsx("div",{className:`text-xl font-bold ${fa(O.rarity).text}`,children:O.name}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[O.rarity," ",O.slot]}),s.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(O.stats).map(([ue,ye])=>s.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",ye," ",ue.toUpperCase()]},ue))})]})]}),s.jsx("button",{onClick:lt,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},Dje=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:o}=K7({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return s.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":o?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[s.jsxs("span",{children:["Gear Storage (",t.length,")"]}),s.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[s.jsx(nf,{className:"w-3 h-3"})," Drag to equip"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>s.jsx(Lje,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>s.jsx(Pje,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},Pje=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=K7({id:`storage-cell-${t}`});return s.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},Lje=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:o,isDragging:c}=KX({id:t.id}),d=Object.values(e).some(m=>(m==null?void 0:m.id)===t.id),h=fa(t.rarity);return s.jsxs("div",{ref:o,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([m,p])=>`+${p} ${m.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var Kw=typeof self<"u"?self:global;const nx=typeof navigator<"u",Bje=nx&&typeof HTMLImageElement>"u",m2=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Qw=Kw.Buffer,Jy=Kw.BigInt,Xw=!!Qw,$je=t=>t;function p2(t,e=$je){if(m2)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let Q7=Kw.fetch;const zje=t=>Q7=t;if(!Kw.fetch){const t=p2("http",(n=>n)),e=p2("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,o)=>{let{port:c,hostname:d,pathname:h,protocol:m,search:p}=new URL(n);const x={method:"GET",hostname:d,path:encodeURI(h)+p,headers:a};c!==""&&(x.port=Number(c));const y=(m==="https:"?await e:await t).request(x,(S=>{if(S.statusCode===301||S.statusCode===302){let N=new URL(S.headers.location,n).toString();return r(N,{headers:a}).then(i).catch(o)}i({status:S.statusCode,arrayBuffer:()=>new Promise((N=>{let w=[];S.on("data",(j=>w.push(j))),S.on("end",(()=>N(Buffer.concat(w))))}))})}));y.on("error",o),y.end()}));zje(r)}function Zt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const g2=t=>YX(t)?void 0:t,Uje=t=>t!==void 0;function YX(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(Uje).length===0)}function Ra(t){let e=new Error(t);throw delete e.stack,e}function Ud(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function IA(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const RA=t=>String.fromCharCode.apply(null,t),YU=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function JX(t){return YU?YU.decode(t):Xw?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(RA(t)))}class rs{static from(e,r){return e instanceof this&&e.le===r?e:new rs(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof rs){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Ra("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Ra("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=rs){return e instanceof DataView||e instanceof rs?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Ra("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new rs(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return JX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return RA(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return RA(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function MA(t,e){Ra(`${t} '${e}' was not loaded, try using full build of exifr.`)}class X7 extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||MA(this.kind,e),r&&(e in r||(function(n,a){Ra(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||MA(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var cl=new X7("file parser"),Oa=new X7("segment parser"),gl=new X7("file reader");function Vje(t,e){return typeof t=="string"?JU(t,e):nx&&!Bje&&t instanceof HTMLImageElement?JU(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new rs(t):nx&&t instanceof Blob?DA(t,e,"blob",x0):void Ra("Invalid input argument")}function JU(t,e){return(r=t).startsWith("data:")||r.length>1e4?PA(t,e,"base64"):m2&&t.includes("://")?DA(t,e,"url",g0):m2?PA(t,e,"fs"):nx?DA(t,e,"url",g0):void Ra("Invalid input argument");var r}async function DA(t,e,r,n){return gl.has(r)?PA(t,e,r):n?(async function(a,i){let o=await i(a);return new rs(o)})(t,n):void Ra(`Parser ${r} is not loaded`)}async function PA(t,e,r){let n=new(gl.get(r))(t,e);return await n.read(),n}const g0=t=>Q7(t).then((e=>e.arrayBuffer())),x0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class Fje extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function ya(t,e,r){let n=new Fje;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function y0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const ni=new Map,Do=new Map,Iu=new Map,wu=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],rm=["jfif","xmp","icc","iptc","ihdr"],v0=["tiff",...rm],sa=["ifd0","ifd1","exif","gps","interop"],Su=[...v0,...sa],Nu=["makerNote","userComment"],nm=["translateKeys","translateValues","reviveValues","multiSegment"],_u=[...nm,"sanitize","mergeOutput","silentErrors"];class ZX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class hp extends ZX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),Zt(this,"enabled",!1),Zt(this,"skip",new Set),Zt(this,"pick",new Set),Zt(this,"deps",new Set),Zt(this,"translateKeys",!1),Zt(this,"translateValues",!1),Zt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=sa.includes(e),this.canBeFiltered&&(this.dict=ni.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Ra(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of nm)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of e)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,x2(this.pick,this.deps)):this.enabled&&this.pick.size>0&&x2(this.pick,this.deps)}}var Di={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},ZU=new Map;class k0 extends ZX{static useCached(e){let r=ZU.get(e);return r!==void 0||(r=new this(e),ZU.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Ra(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=nx?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of wu)this[e]=Di[e];for(e of _u)this[e]=Di[e];for(e of Nu)this[e]=Di[e];for(e of Su)this[e]=new hp(e,Di[e],void 0,this)}setupFromTrue(){let e;for(e of wu)this[e]=Di[e];for(e of _u)this[e]=Di[e];for(e of Nu)this[e]=!0;for(e of Su)this[e]=new hp(e,!0,void 0,this)}setupFromArray(e){let r;for(r of wu)this[r]=Di[r];for(r of _u)this[r]=Di[r];for(r of Nu)this[r]=Di[r];for(r of Su)this[r]=new hp(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,sa)}setupFromObject(e){let r;for(r of(sa.ifd0=sa.ifd0||sa.image,sa.ifd1=sa.ifd1||sa.thumbnail,Object.assign(this,e),wu))this[r]=tT(e[r],Di[r]);for(r of _u)this[r]=tT(e[r],Di[r]);for(r of Nu)this[r]=tT(e[r],Di[r]);for(r of v0)this[r]=new hp(r,Di[r],e[r],this);for(r of sa)this[r]=new hp(r,Di[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,sa,Su),e.tiff===!0?this.batchEnableWithBool(sa,!0):e.tiff===!1?this.batchEnableWithUserValue(sa,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,sa):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,sa)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let o of a)this[o].enabled=!1;let i=eV(e,n);for(let[o,c]of i)x2(this[o].pick,c),this[o].enabled=!0}else if(r&&r.length){let i=eV(r,n);for(let[o,c]of i)x2(this[o].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=sa.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of sa)this[i].finalizeFilters()}get onlyTiff(){return!rm.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of v0)this[e].enabled&&!Oa.has(e)&&MA("segment parser",e)}}function eV(t,e){let r,n,a,i,o=[];for(a of e){for(i of(r=ni.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function tT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function x2(t,e){for(let r of e)t.add(r)}Zt(k0,"default",Di);class Yu{constructor(e){Zt(this,"parsers",{}),Zt(this,"output",{}),Zt(this,"errors",[]),Zt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=k0.useCached(e)}async read(e){this.file=await Vje(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of cl)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Ra("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),g2(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Oa.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,e,r),c=await o.extractThumbnail();return r.close&&r.close(),c}}async function Yw(t,e){let r=new Yu(e);return await r.read(t),r.parse()}var qje=Object.freeze({__proto__:null,parse:Yw,Exifr:Yu,fileParsers:cl,segmentParsers:Oa,fileReaders:gl,tagKeys:ni,tagValues:Do,tagRevivers:Iu,createDictionary:ya,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:wu,otherSegments:rm,segments:v0,tiffBlocks:sa,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:nm,allFormatters:_u,Options:k0});class Jw{constructor(e,r,n){Zt(this,"errors",[]),Zt(this,"ensureSegmentChunk",(async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(c){Ra(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Ra("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Oa.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class Ao{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(e,r={}){return new this(e,new k0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof rs?e:new rs(e)}constructor(e,r={},n){Zt(this,"errors",[]),Zt(this,"raw",new Map),Zt(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Iu.get(r),a=Do.get(r),i=ni.get(r),o=this.options[r],c=o.reviveValues&&!!n,d=o.translateValues&&!!a,h=o.translateKeys&&!!i,m={};for(let[p,x]of e)c&&n.has(p)?x=n.get(p)(x):d&&a.has(p)&&(x=this.translateValue(x,a.get(p))),h&&i.has(p)&&(p=i.get(p)||p),m[p]=x;return m}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}Zt(Ao,"headerLength",4),Zt(Ao,"type",void 0),Zt(Ao,"multiSegment",!1),Zt(Ao,"canHandle",(()=>!1));function Hje(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function Gje(t){return t>=224&&t<=239}function Wje(t,e,r){for(let[n,a]of Oa)if(a.canHandle(t,e,r))return n}class tV extends Jw{constructor(...e){super(...e),Zt(this,"appSegments",[]),Zt(this,"jpegSegments",[]),Zt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Oa.keyList())):(e=e===void 0?Oa.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Oa.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Oa.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;o.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((m=>!this.file.available(m.offset||m.start,m.length||m.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,o,c,d,{file:h,findAll:m,wanted:p,remaining:x,options:y}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),Gje(n)){if(a=h.getUint16(e+2),i=Wje(h,e,a),i&&p.has(i)&&(o=Oa.get(i),c=o.findPosition(h,e),d=y[i],c.type=i,this.appSegments.push(c),!m&&(o.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||x.delete(i)):x.delete(i),x.size===0)))break;y.recordUnknownSegments&&(c=Ao.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(Hje(n)){if(a=h.getUint16(e+2),n===218&&y.stopAfterSos!==!1)return;y.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,o,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?o=c.get(i):c.set(i,o=[]),o.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Oa.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}Zt(tV,"type","jpeg"),cl.set("jpeg",tV);const Kje=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Qje extends Ao{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let m=this.chunk.getUint16(e);if(o){if(a.has(m)&&(n.set(m,this.parseTag(e,m,r)),a.delete(m),a.size===0))break}else!c&&i.has(m)||n.set(m,this.parseTag(e,m,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),o=a.getUint32(e+4),c=Kje[i];if(c*o<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Ra(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Ra(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,o);if(i===2)return Ud(a.getString(e,o));if(i===7)return a.getUint8Array(e,o);if(o===1)return this.parseTagValue(i,e);{let d=new((function(m){switch(m){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(o),h=c;for(let m=0;m<o;m++)d[m]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Ra(`Invalid tiff type ${e}`)}}}class rT extends Qje{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ra("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Ra(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,IA(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,IA(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",rV(...e.get(2),e.get(1))),e.set("longitude",rV(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of sa)if(e=this[r],!YX(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function rV(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Zt(rT,"type","tiff"),Zt(rT,"headerLength",10),Oa.set("tiff",rT);var Xje=Object.freeze({__proto__:null,default:qje,Exifr:Yu,fileParsers:cl,segmentParsers:Oa,fileReaders:gl,tagKeys:ni,tagValues:Do,tagRevivers:Iu,createDictionary:ya,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:wu,otherSegments:rm,segments:v0,tiffBlocks:sa,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:nm,allFormatters:_u,Options:k0,parse:Yw});const Y7={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},J7=Object.assign({},Y7,{firstChunkSize:4e4,gps:[1,2,3,4]});async function eY(t){let e=new Yu(J7);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const Z7=Object.assign({},Y7,{tiff:!1,ifd1:!0,mergeOutput:!1});async function tY(t){let e=new Yu(Z7);await e.read(t);let r=await e.extractThumbnail();return r&&Xw?Qw.from(r):r}async function rY(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const ek=Object.assign({},Y7,{firstChunkSize:4e4,ifd0:[274]});async function tk(t){let e=new Yu(ek);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const rk=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Vd=!0,Fd=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Vd=Number(r)+.1*Number(n)<13.4,Fd=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Vd=Fd=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Vd=Fd=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Vd=Fd=Number(e)<77}}async function nY(t){let e=await tk(t);return Object.assign({canvas:Vd,css:Fd},rk[e])}class Yje extends rs{constructor(...e){super(...e),Zt(this,"ranges",new Jje),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=Xw?Qw.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class Jje{constructor(){Zt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((o=>nV(e,o.offset,a)||nV(e,o.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let o=i.shift();o.offset=e,o.length=r,o.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function nV(t,e,r){return t<=e&&e<=r}class Zw extends Yje{constructor(e,r){super(0),Zt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}gl.set("blob",class extends Zw{async readWhole(){this.chunked=!1;let t=await x0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await x0(n);return this.set(a,t,!0)}});var Zje=Object.freeze({__proto__:null,default:Xje,Exifr:Yu,fileParsers:cl,segmentParsers:Oa,fileReaders:gl,tagKeys:ni,tagValues:Do,tagRevivers:Iu,createDictionary:ya,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:wu,otherSegments:rm,segments:v0,tiffBlocks:sa,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:nm,allFormatters:_u,Options:k0,parse:Yw,gpsOnlyOptions:J7,gps:eY,thumbnailOnlyOptions:Z7,thumbnail:tY,thumbnailUrl:rY,orientationOnlyOptions:ek,orientation:tk,rotations:rk,get rotateCanvas(){return Vd},get rotateCss(){return Fd},rotation:nY});gl.set("url",class extends Zw{async readWhole(){this.chunked=!1;let t=await g0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await Q7(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==e&&(this.size=t+o),this.set(i,t,!0)}});rs.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Jy!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Jy(e)<<Jy(32)|Jy(r)):void Ra("Trying to read 64b value but JS can only handle 53b numbers.")};class eAe extends Jw{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class aY extends eAe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,c]=i;await this.file.ensureChunk(o,c);let d=4+this.file.getUint32(o);o+=d,c-=d,await this.registerSegment("tiff",o,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,o=e.start,c=this.file.getUint16(o);for(o+=2;c--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[o,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,m=c+a+i,p=e.version===2?4:2,x=this.file.getUintBytes(n,p);for(n+=p;x--;){let y=this.file.getUintBytes(n,d);n+=d+h+2+o;let S=this.file.getUint16(n);if(n+=2,y===r)return S>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=S*m}}}class iY extends aY{}Zt(iY,"type","heic");class aV extends aY{}Zt(aV,"type","avif"),cl.set("heic",iY),cl.set("avif",aV),ya(ni,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ya(ni,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ya(ni,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ya(Do,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Hp=ya(Do,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const iV={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Hp.set(37392,iV),Hp.set(41488,iV);const nT={0:"Normal",1:"Low",2:"High"};function sV(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function oV(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function aT(t){if(typeof t=="string"){var[e,r,n,a,i,o]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(c.setHours(a),c.setMinutes(i),c.setSeconds(o)),Number.isNaN(+c)?t:c}}function fp(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(lV(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(lV(t[r],t[r+1]));return Ud(String.fromCodePoint(...e))}function lV(t,e){return t<<8|e}Hp.set(41992,nT),Hp.set(41993,nT),Hp.set(41994,nT),ya(Iu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?JX(t):t}],[306,aT],[40091,fp],[40092,fp],[40093,fp],[40094,fp],[40095,fp]]),ya(Iu,"exif",[[40960,oV],[36864,oV],[36867,aT],[36868,aT],[40962,sV],[40963,sV]]),ya(Iu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class iT extends Ao{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:rs.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let o={},c={};for(let d of cY)o[d]=[],c[d]=0;return i.replace(aAe,((d,h,m)=>{if(h==="<"){let p=++c[m];return o[m].push(p),`${d}#${p}`}return`${d}#${o[m].pop()}`}))})(e);let r=Vh.findAll(e,"rdf","Description");r.length===0&&r.push(new Vh("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let o of i.properties)n=nAe(o.ns,a),sY(o,n);return(function(i){let o;for(let c in i)o=i[c]=g2(i[c]),o===void 0&&delete i[c];return g2(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}Zt(iT,"type","xmp"),Zt(iT,"multiSegment",!0),Oa.set("xmp",iT);class y2{static findAll(e){return oY(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(y2.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=lY(a),new y2(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Vh{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return oY(e,a).map(Vh.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new Vh(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=y2.findAll(n),this.children=Vh.findAll(a),this.value=this.children.length===0?lY(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return rAe(this.children.map(tAe));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)sY(r,e);return this.value!==void 0&&(e.value=this.value),g2(e)}}function sY(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var tAe=t=>t.serialize(),rAe=t=>t.length===1?t[0]:t,nAe=(t,e)=>e[t]?e[t]:e[t]={};function oY(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function lY(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const cY=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],aAe=new RegExp(`(<|\\/)(${cY.join("|")})`,"g");var iAe=Object.freeze({__proto__:null,default:Zje,Exifr:Yu,fileParsers:cl,segmentParsers:Oa,fileReaders:gl,tagKeys:ni,tagValues:Do,tagRevivers:Iu,createDictionary:ya,extendDictionary:y0,fetchUrlAsArrayBuffer:g0,readBlobAsArrayBuffer:x0,chunkedProps:wu,otherSegments:rm,segments:v0,tiffBlocks:sa,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:nm,allFormatters:_u,Options:k0,parse:Yw,gpsOnlyOptions:J7,gps:eY,thumbnailOnlyOptions:Z7,thumbnail:tY,thumbnailUrl:rY,orientationOnlyOptions:ek,orientation:tk,rotations:rk,get rotateCanvas(){return Vd},get rotateCss(){return Fd},rotation:nY});let cV=p2("fs",(t=>t.promises));gl.set("fs",class extends Zw{async readWhole(){this.chunked=!1,this.fs=await cV;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await cV,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});gl.set("base64",class extends Zw{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let c=Math.min(e,this.size-t);if(Xw){let d=Qw.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),m=d.toUint8();for(let p=0;p<c;p++)m[p]=h.charCodeAt(n+p);return d}}});class uV extends Jw{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(IA(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}Zt(uV,"type","tiff"),cl.set("tiff",uV);let sAe=p2("zlib");const oAe=["ihdr","iccp","text","itxt","exif"];class dV extends Jw{constructor(...e){super(...e),Zt(this,"catchError",(r=>this.errors.push(r))),Zt(this,"metaChunks",[]),Zt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),o=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:o,offset:e,length:c,start:e+4+4,size:a,marker:i};oAe.includes(o)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),m2){let c=await sAe,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}Zt(dV,"type","png"),cl.set("png",dV),ya(ni,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),y0(ni,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let hV=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];y0(ni,"ifd0",hV),y0(ni,"exif",hV),ya(Do,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class sT extends Ao{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Zt(sT,"type","jfif"),Zt(sT,"headerLength",9),Oa.set("jfif",sT),ya(ni,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class fV extends Ao{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Zt(fV,"type","ihdr"),Oa.set("ihdr",fV),ya(ni,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ya(Do,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Sv extends Ao{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,o=0;for(let h of a)o+=h.length;let c=new i(o),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new rs(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Ra("ICC header is too short");for(let[r,n]of Object.entries(lAe)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:o}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Ud(this.chunk.getString(e+12,r))}parseText(e,r){return Ud(this.chunk.getString(e+8,r-8))}parseSig(e){return Ud(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,o=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),m=r.getUint32(i+4),p=r.getUint32(i+8)+e,x=Ud(r.getUnicodeString(p,m));o.push({lang:d,country:h,text:x}),i+=a}return n===1?o[0].text:o}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}Zt(Sv,"type","icc"),Zt(Sv,"multiSegment",!0),Zt(Sv,"headerLength",18);const lAe={4:$l,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:$l,16:$l,20:$l,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),o=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,o,c))},36:$l,40:$l,48:$l,52:$l,64:(t,e)=>t.getUint32(e),80:$l};function $l(t,e){return Ud(t.getString(e,4))}Oa.set("icc",Sv),ya(ni,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Zy={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},mV={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ya(Do,"icc",[[4,Zy],[12,mV],[40,Object.assign({},Zy,mV)],[48,Zy],[80,Zy],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class ev extends Ao{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(o,this.pluralizeValue(e.get(o),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}Zt(ev,"type","iptc"),Zt(ev,"translateValues",!1),Zt(ev,"reviveValues",!1),Oa.set("iptc",ev),ya(ni,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ya(Do,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const mp=["Monday","Tuesday","Wednesday","Thursday","Friday"],cAe=({user:t})=>{const e=Ga(),{confirm:r}=Ro(),n=T.useMemo(()=>Re.getWeekId(),[]),[a,i]=T.useState([]),[o,c]=T.useState("Monday"),[d,h]=T.useState(!1),m=T.useRef(null),[p,x]=T.useState(!1),y=t.enrolledClasses||(t.classType?[t.classType]:[]),[S,N]=T.useState(t.classType||y[0]||"Uncategorized");T.useEffect(()=>{const A=new Date().toLocaleDateString("en-US",{weekday:"long"});mp.includes(A)&&c(A)},[]),T.useEffect(()=>{const A=Re.subscribeToEvidence(t.id,n,i);return()=>A()},[t.id,n]);const w=T.useMemo(()=>{const A=y[0]||"Uncategorized";return a.filter(E=>E.classType?E.classType===S:S===A)},[a,S,y]),j=A=>w.find(E=>E.dayOfWeek===A),k=A=>A?new Date(A).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,I=async A=>{var C;const E=(C=A.target.files)==null?void 0:C[0];if(E){h(!0);try{let U=null;if(E.type.startsWith("image/"))try{const ae=await iAe.parse(E,["DateTimeOriginal"])||{};ae.DateTimeOriginal&&(U=ae.DateTimeOriginal.toISOString())}catch(ae){console.warn("EXIF extraction failed",ae)}const P=S.replace(/[^a-zA-Z0-9]/g,"_"),$=Math.random().toString(36).substring(2,9),B=Op(Ip,`evidence/${t.id}/${n}/${P}_${o}_${$}`);await VT(B,E);const G=await qv(B),K=j(o),Z={id:`${t.id}_${n}_${o}_${P}`,studentId:t.id,weekId:n,classType:S,dayOfWeek:o,imageUrl:G,timestamp:new Date().toISOString(),exifDate:U,reflection:(K==null?void 0:K.reflection)||""};await Re.uploadEvidence(Z)}catch(U){e.error("Upload failed: "+(U instanceof Error?U.message:"Unknown error"))}finally{h(!1),m.current&&(m.current.value="")}}},L=async(A,E)=>{const C=j(A);C&&C.reflection!==E&&await Re.uploadEvidence({...C,reflection:E})},O=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${S} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){x(!0);try{const E=new zJ,C=E.internal.pageSize.getWidth(),U=E.internal.pageSize.getHeight(),P=20,$=C-P*2,B=U-P;E.setFillColor(15,7,32),E.rect(0,0,C,40,"F"),E.setTextColor(255,255,255),E.setFontSize(22),E.setFont("helvetica","bold"),E.text("WEEKLY PROGRESS REPORT",P,18),E.setFontSize(10),E.setFont("helvetica","normal"),E.text(`Operative: ${t.name.toUpperCase()}`,P,28),E.text(`Class: ${S}`,P,33),E.text(`Cycle ID: ${n}`,P,38),E.text(`Generated: ${new Date().toLocaleDateString()}`,C-P,33,{align:"right"});let G=55;const K=[...w].sort((H,Z)=>mp.indexOf(H.dayOfWeek)-mp.indexOf(Z.dayOfWeek));for(const H of K){let Z=null,ae="JPEG",he=0,fe=0,Y=!1;try{const ie=await fetch(H.imageUrl);if(!ie.ok)throw new Error(`Image fetch failed: ${ie.statusText}`);const Be=await ie.blob();Z=await new Promise((Se,Qe)=>{const nt=new FileReader;nt.onloadend=()=>Se(nt.result),nt.onerror=Qe,nt.readAsDataURL(Be)}),Be.type==="image/png"&&(ae="PNG"),Be.type==="image/webp"&&(ae="WEBP");const Q=E.getImageProperties(Z),te=Q.width/Q.height,Ne=100;he=$,fe=he/te,fe>Ne&&(fe=Ne,he=fe*te)}catch(ie){console.warn("Image processing error for PDF",ie),Y=!0,fe=15}const xe=20+fe+12;G+xe>B&&(E.addPage(),G=P),E.setDrawColor(200,200,200),E.setLineWidth(.5),E.line(P,G,C-P,G),G+=6,E.setTextColor(15,7,32),E.setFontSize(16),E.setFont("helvetica","bold"),E.text(H.dayOfWeek.toUpperCase(),P,G);const Te=k(H.exifDate)||k(H.timestamp);if(E.setFontSize(9),E.setFont("helvetica","italic"),E.setTextColor(100,100,100),E.text(`Captured: ${Te}`,C-P,G,{align:"right"}),G+=10,!Y&&Z){const ie=(C-he)/2;E.addImage(Z,ae,ie,G,he,fe),G+=fe+12}else E.setTextColor(255,0,0),E.setFontSize(8),E.text("[Image Error]",P,G),G+=15;E.setFont("helvetica","normal"),E.setFontSize(10);const Ve=H.reflection||"No reflection logged for this cycle.",Ze=E.splitTextToSize(Ve,$),Xe=Ze.length*5+15;G+Xe>B&&(E.addPage(),G=P),E.setTextColor(15,7,32),E.setFontSize(11),E.setFont("helvetica","bold"),E.text("DAILY REFLECTION:",P,G),G+=6,E.setFont("helvetica","normal"),E.setFontSize(10),E.setTextColor(60,60,60),E.text(Ze,P,G),G+=Ze.length*5+25}E.save(`Report_${S.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Re.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(E){console.error("PDF generation failed:",E),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{x(!1)}}},R=j(o);return s.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[s.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[s.jsx(ER,{className:"w-7 h-7"})," Weekly Evidence Log"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.length>1?s.jsxs("div",{className:"relative group",children:[s.jsx("select",{value:S,onChange:A=>N(A.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:y.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsx(yi,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):s.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:S}),s.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),s.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),s.jsxs("button",{onClick:O,disabled:p||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[p?s.jsx(Ai,{className:"w-5 h-5 animate-spin"}):s.jsx(vle,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),s.jsx("input",{type:"file",ref:m,onChange:I,className:"hidden",accept:"image/*"}),s.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:mp.map(A=>{const E=j(A),C=o===A;return s.jsxs("button",{onClick:()=>c(A),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${C?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${C?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",mp.indexOf(A)+1]}),s.jsx("span",{className:"font-bold text-sm",children:A}),E&&s.jsx("div",{className:`absolute top-2 right-2 ${C?"text-emerald-200":"text-emerald-500"}`,children:s.jsx(s0,{className:"w-3 h-3"})})]},A)})}),s.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(oE,{className:"w-4 h-4"})," Evidence Capture (",S,")"]}),R&&s.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[s.jsx(io,{className:"w-3 h-3"}),k(R.exifDate)||k(R.timestamp)]})]}),s.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:R?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:R.imageUrl,alt:o,className:"w-full h-full object-contain bg-black/20"}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},children:[s.jsx(uc,{className:"w-8 h-8 text-emerald-400"}),s.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):s.jsxs("button",{onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?s.jsx(Ai,{className:"w-10 h-10 animate-spin text-emerald-500"}):s.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:s.jsx(ER,{className:"w-8 h-8"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),s.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),s.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[s.jsx("div",{className:"mb-2",children:s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(l0,{className:"w-4 h-4"})," Daily Reflection"]})}),R?s.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${o} in ${S}...`,defaultValue:R.reflection,onBlur:A=>L(o,A.target.value)},o):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[s.jsx("div",{className:"mb-2 opacity-30",children:s.jsx(el,{className:"w-6 h-6"})}),s.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),s.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},uAe=({user:t})=>{const e=Ga(),[r,n]=T.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=T.useState(""),[o,c]=T.useState(""),[d,h]=T.useState("");T.useEffect(()=>{const x=r.content.replace(/\$(.*?)\$/g,(y,S)=>{try{return sb.renderToString(S,{throwOnError:!1})}catch{return S}}).replace(/\n/g,"<br/>");i(x)},[r.content]);const m=async()=>{await Re.saveLabReport(r),await Re.awardXP(t.id,25),e.success("Report saved!")},p=()=>{const x=parseFloat(o),y=parseFloat(d);!isNaN(x)&&!isNaN(y)&&(n(S=>({...S,dataPoints:[...S.dataPoints,{x,y}].sort((N,w)=>N.x-w.x)})),c(""),h(""))};return s.jsxs("div",{className:"h-full flex flex-col gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[s.jsx(W2,{className:"w-6 h-6"})," Physics Laboratory"]}),s.jsxs("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[s.jsx(FH,{className:"w-4 h-4"})," Save Report"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:s.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),s.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[s.jsxs("div",{className:"w-1/3",children:[s.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"number",placeholder:"X",value:o,onChange:x=>c(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),s.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:x=>h(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),s.jsx("button",{onClick:p,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(nK,{width:"100%",height:"100%",children:s.jsxs(j_e,{children:[s.jsx(lX,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx(zw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),s.jsx(Uw,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),s.jsx(Ho,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),s.jsx(Vx,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),s.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:s.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[s.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:x=>n(y=>({...y,content:x.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),s.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:QG.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},dAe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],hAe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],fAe=({userId:t,classType:e,onClose:r})=>{var L,O,R,A,E;const[n,a]=T.useState(null),[i,o]=T.useState(!0);if(T.useEffect(()=>{(async()=>{const U=await Re.getPublicProfile(t);a(U),o(!1)})()},[t]),i)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,m=c.level||1,p=c0(m),x=JG(m),{equipped:y,appearance:S}=Uu(n,e),N=DE({gamification:{...c,equipped:y}}),w=u0(y),j=((O=c.classXp)==null?void 0:O[e])||0,k=Object.values(y).filter(Boolean),I=RE(k);return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:s.jsx(Jn,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-32 shrink-0",children:s.jsx(rx,{equipped:y,appearance:S})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),s.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[x.name," - Level ",m]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vn,{className:"w-3 h-3 text-cyan-400"}),s.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[j.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(os,{className:"w-3 h-3 text-yellow-400"}),s.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Stats"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:dAe.map(({key:C,label:U,color:P,icon:$})=>{const B=N[C]||0;return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:$}),s.jsx("span",{className:"text-xs text-gray-400",children:U}),s.jsx("span",{className:`text-sm font-bold ${P} ml-auto`,children:B})]},C)})})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(os,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:hAe.map(C=>{const U=y[C];if(!U)return s.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[s.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:C}),s.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},C);const P=fa(U.rarity);return s.jsxs("div",{className:`p-2 rounded-lg border ${P.border} ${P.bg}`,children:[s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:C}),s.jsx("div",{className:`text-xs font-bold truncate ${P.text}`,children:U.name}),s.jsx("div",{className:"text-[9px] text-gray-500",children:U.rarity})]},C)})})]}),I.length>0&&s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(_x,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),I.map(({set:C,activeBonus:U})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[s.jsx("div",{className:"text-xs font-bold text-purple-400",children:C.name}),s.jsxs("div",{className:"text-[10px] text-gray-400",children:[U.label,": ",U.effects.map(P=>`+${P.value} ${P.stat}`).join(", ")]})]},C.id))]}),(((R=c.unlockedAchievements)==null?void 0:R.length)||0)>0&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(sl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(A=c.unlockedAchievements)==null?void 0:A.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(E=c.unlockedAchievements)==null?void 0:E.slice(0,12).map(C=>s.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:C.replace(/_/g," ")},C))})]})]})})},mAe=()=>s.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>s.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[s.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),s.jsxs("div",{className:"space-y-2 text-right",children:[s.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),pAe=({user:t})=>{var p;const[e,r]=T.useState([]),[n,a]=T.useState(t.classType||((p=t.enrolledClasses)==null?void 0:p[0])||kr.AP_PHYSICS),[i,o]=T.useState(!0),[c,d]=T.useState(null);T.useEffect(()=>{const x=Re.subscribeToLeaderboard(y=>{r(y),o(!1)});return()=>x()},[]);const h=T.useMemo(()=>{const x=t.enrolledClasses||[];if(x.length>0)return x.sort();const y=new Set;return e.forEach(S=>{var N;return(N=S.enrolledClasses)==null?void 0:N.forEach(w=>y.add(w))}),Array.from(y).sort()},[t.enrolledClasses,e]),m=T.useMemo(()=>e.filter(x=>{var y;return(y=x.enrolledClasses)==null?void 0:y.includes(n)}).sort((x,y)=>{var w,j,k,I;const S=((j=(w=x.gamification)==null?void 0:w.classXp)==null?void 0:j[n])||0;return(((I=(k=y.gamification)==null?void 0:k.classXp)==null?void 0:I[n])||0)-S}).slice(0,10),[e,n]);return s.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),s.jsxs("div",{className:"inline-block relative",children:[s.jsxs("select",{value:n,onChange:x=>a(x.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(x=>s.jsx("option",{value:x,children:x},x)),h.length===0&&s.jsx("option",{children:n})]}),s.jsx(yi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?s.jsx(mAe,{}):s.jsxs(s.Fragment,{children:[m.length>=3&&s.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(x=>{var A,E,C,U;const y=m[x];if(!y)return null;const S=(A=y.settings)==null?void 0:A.privacyMode,N=S?((E=y.gamification)==null?void 0:E.codename)||"Unknown Agent":y.name,w=((U=(C=y.gamification)==null?void 0:C.classXp)==null?void 0:U[n])||0,j=Math.floor(w/1e3)+1,k=c0(j),I=x===0,L=["h-28","h-20","h-16"],O=["w-20 h-20","w-14 h-14","w-14 h-14"],R=[{icon:s.jsx(sl,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:s.jsx(Ny,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:s.jsx(Ny,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return s.jsxs("div",{className:`flex flex-col items-center ${I?"order-2":x===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+x*.15}s both`},children:[s.jsxs("div",{className:`relative mb-2 ${I?"mb-3":""}`,children:[s.jsx("div",{className:`${O[x]} rounded-full p-0.5 bg-white/10 ring-2 ${R[x].ring} relative ${I?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:s.jsx("img",{src:y.avatarUrl,alt:N,className:`w-full h-full rounded-full border-2 ${k.tierColor.split(" ")[0]} object-cover`})}),s.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${R[x].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:R[x].icon})]}),s.jsxs("div",{className:`text-center ${I?"mt-2":"mt-1"}`,children:[s.jsx("div",{className:`font-bold truncate max-w-[100px] ${I?"text-sm text-white":"text-xs text-gray-300"} ${S?"italic":""}`,children:N}),s.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${I?"text-xl":"text-base"}`,children:w.toLocaleString()}),s.jsx("div",{className:`text-[9px] font-mono uppercase ${k.tierColor.split(" ")[1]}`,children:k.rankName}),s.jsxs("button",{onClick:()=>d(y.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[s.jsx(o0,{className:"w-3 h-3"})," Inspect"]})]}),s.jsx("div",{className:`${L[x]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${x===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":x===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},y.id)})}),s.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[m.slice(m.length>=3?3:0).map((x,y)=>{var L,O,R,A;const S=m.length>=3?y+3:y,N=(L=x.settings)==null?void 0:L.privacyMode,w=N?((O=x.gamification)==null?void 0:O.codename)||"Unknown Agent":x.name,j=((A=(R=x.gamification)==null?void 0:R.classXp)==null?void 0:A[n])||0,k=Math.floor(j/1e3)+1,I=c0(k);return s.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*S}s both`},children:[s.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[S<3&&S===0&&s.jsx(sl,{className:"w-6 h-6 text-yellow-400 mx-auto"}),S<3&&S===1&&s.jsx(Ny,{className:"w-6 h-6 text-gray-300 mx-auto"}),S<3&&S===2&&s.jsx(Ny,{className:"w-6 h-6 text-amber-600 mx-auto"}),S>=3&&`#${S+1}`]}),s.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[s.jsx("img",{src:x.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${I.tierColor.split(" ")[0]}`}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:k})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:`text-base font-bold truncate ${N?"text-purple-300 italic":"text-white"}`,children:[w,N&&s.jsx(af,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${I.tierColor.split(" ")[1]}`,children:I.rankName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:j.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),s.jsx("button",{onClick:()=>d(x.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:s.jsx(o0,{className:"w-4 h-4"})})]},x.id)}),m.length===0&&s.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[s.jsx(ls,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&s.jsx(fAe,{userId:c,classType:n,onClose:()=>d(null)})]})};class gAe extends se.Component{constructor(r){super(r);wO(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),s.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&s.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),s.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[s.jsx(Zv,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const pV={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:s.jsx(Co,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:s.jsx(PH,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:s.jsx(_x,{className:"w-4 h-4"})}},xAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},oT=3;function lT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const yAe=({assignment:t})=>{const e=Ga(),[r,n]=T.useState([]),[a,i]=T.useState([]),[o,c]=T.useState(!0),[d,h]=T.useState(!1),[m,p]=T.useState({}),[x,y]=T.useState(1),[S,N]=T.useState(null),[w,j]=T.useState(new Set),k=T.useRef({engagementTime:0}),I=T.useRef(Date.now());T.useEffect(()=>{const G=setInterval(()=>{Date.now()-I.current<6e4&&(k.current.engagementTime+=1)},1e3);return()=>clearInterval(G)},[]),T.useEffect(()=>{const G=()=>{I.current=Date.now()},K=["mousemove","keydown","scroll","click"];return K.forEach(H=>window.addEventListener(H,G)),()=>K.forEach(H=>window.removeEventListener(H,G))},[]),T.useEffect(()=>()=>{var K;const G=k.current.engagementTime;if(G>=5){const H=(K=yT().currentUser)==null?void 0:K.uid;H&&Re.submitReviewEngagement(H,t.id,t.title,t.classType,G).catch(()=>{})}},[t.id,t.title,t.classType]);const L=T.useCallback(G=>{const K=lT(G.filter(ae=>ae.tier===1),oT),H=lT(G.filter(ae=>ae.tier===2),oT),Z=lT(G.filter(ae=>ae.tier===3),oT);i([...K,...H,...Z]),p({}),N(null)},[]);T.useEffect(()=>{(async()=>{var K;c(!0),h(!1);try{const H=await ma(ot(Ie,"question_banks",t.id));if(!H.exists()){h(!0);return}const Z=H.data().questions||[];n(Z),L(Z)}catch(H){console.error("Failed to load question bank:",H),h(!0);return}finally{c(!1)}try{const H=(K=yT().currentUser)==null?void 0:K.uid;if(H){const Z=await ma(ot(Ie,"review_progress",`${H}_${t.id}`));Z.exists()&&j(new Set(Z.data().answeredQuestions||[]))}}catch(H){console.warn("Could not load review progress:",H)}})()},[t.id,L]);const O=()=>{r.length>0&&L(r)},R=(G,K,H)=>{const Z=m[G];if(!(Z!=null&&Z.submitted))if(H==="multiple_select"||H==="ranking"){const ae=(Z==null?void 0:Z.selected)||[],he=ae.includes(K)?ae.filter(fe=>fe!==K):[...ae,K];p(fe=>({...fe,[G]:{...fe[G],selected:he,submitted:!1,correct:!1,xpAwarded:!1}}))}else p(ae=>({...ae,[G]:{selected:K,submitted:!1,correct:!1,xpAwarded:!1}}))},A=(G,K)=>{var H;(H=m[G])!=null&&H.submitted||p(Z=>({...Z,[G]:{...Z[G],linkedSelected:K}}))},E=async G=>{const K=m[G.id];if(!(K!=null&&K.selected))return;let H=!1;if(G.type==="multiple_select"||G.type==="ranking"){const Z=K.selected,ae=G.correctAnswer;H=Z.length===ae.length&&Z.every((he,fe)=>he===ae[fe])}else G.type==="linked_mc"?H=K.selected===G.correctAnswer&&(!G.linkedFollowUp||K.linkedSelected===G.linkedFollowUp.correctAnswer):H=K.selected===G.correctAnswer;if(H)if(w.has(G.id))p(Z=>({...Z,[G.id]:{...Z[G.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{p(Z=>({...Z,[G.id]:{...Z[G.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await kH({assignmentId:t.id,questionId:G.id,xpAmount:G.xp,classType:t.classType})).data.awarded?(e.success(`+${G.xp} XP earned!`),p(he=>({...he,[G.id]:{...he[G.id],submitted:!0,correct:!0,xpAwarded:!0}})),j(he=>new Set([...he,G.id]))):e.success("Correct! (XP already claimed)")}catch(Z){console.error("XP award error:",Z)}}else{const Z=Math.ceil(G.xp/2);p(ae=>({...ae,[G.id]:{...ae[G.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:Z}})),e.error(`-${Z} XP penalty`);try{await Voe({assignmentId:t.id,questionId:G.id,classType:t.classType})}catch(ae){console.error("Penalty error:",ae)}}},C=T.useMemo(()=>a.filter(G=>G.tier===x),[a,x]),U=T.useMemo(()=>Object.entries(m).filter(([,G])=>G.correct&&G.xpAwarded).reduce((G,[K])=>{var H;return G+(((H=a.find(Z=>Z.id===K))==null?void 0:H.xp)||0)},0),[m,a]),P=T.useMemo(()=>Object.values(m).reduce((G,K)=>G+(K.penalty||0),0),[m]),$=T.useMemo(()=>a.reduce((G,K)=>G+K.xp,0),[a]),B=T.useMemo(()=>a.length>0&&a.every(G=>{var K;return(K=m[G.id])==null?void 0:K.submitted}),[a,m]);return o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Ai,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Co,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Co,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),s.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-4 h-4 text-yellow-400"}),s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:U}),P>0&&s.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",P]}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",$," XP"]})]}),s.jsxs("button",{onClick:O,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[s.jsx(Zv,{className:"w-3 h-3"})," New Set"]})]})]}),s.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(G=>{const K=pV[G],H=a.filter(he=>he.tier===G),Z=H.filter(he=>{var fe;return(fe=m[he.id])==null?void 0:fe.submitted}).length,ae=H.filter(he=>{var fe;return(fe=m[he.id])==null?void 0:fe.correct}).length;return s.jsxs("button",{onClick:()=>y(G),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${x===G?`${K.bg} ${K.color} ${K.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[K.icon,s.jsx("span",{className:"hidden sm:inline",children:K.name}),s.jsxs("span",{className:"sm:hidden",children:["Tier ",G]}),Z>0&&s.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ae===H.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ae,"/",H.length]})]},G)})}),B&&s.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),s.jsxs("button",{onClick:O,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[s.jsx(Zv,{className:"w-3 h-3"})," New Questions"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[C.map((G,K)=>{const H=m[G.id],Z=S===G.id,ae=H==null?void 0:H.submitted,he=H==null?void 0:H.correct,fe=pV[G.tier];return s.jsxs("div",{className:`rounded-2xl border transition-all ${ae?he?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Z?`${fe.border} ${fe.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[s.jsxs("button",{onClick:()=>N(Z?null:G.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ae?he?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${fe.bg} ${fe.color}`}`,children:ae?he?s.jsx(Lr,{className:"w-4 h-4"}):s.jsx(ao,{className:"w-4 h-4"}):K+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${fe.color}`,children:G.bloomsLevel}),s.jsx("span",{className:"text-[9px] text-gray-600",children:""}),s.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:xAe[G.type]||G.type}),s.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(Vn,{className:"w-3 h-3"}),G.xp," XP"]}),s.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(G.xp/2)," if wrong"]})]}),s.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:G.stem})]}),s.jsx(el,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Z?"rotate-90":""}`})]}),Z&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[G.context&&s.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:G.context}),G.type==="ranking"?s.jsx(wAe,{question:G,answer:H,onSelect:R}):G.type==="multiple_select"?s.jsx(bAe,{question:G,answer:H,onSelect:R}):s.jsx(vAe,{question:G,answer:H,onSelect:R}),G.type==="linked_mc"&&G.linkedFollowUp&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[s.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),s.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:G.linkedFollowUp.stem}),s.jsx("div",{className:"space-y-2",children:G.linkedFollowUp.options.map(Y=>{const ne=(H==null?void 0:H.linkedSelected)===Y.id,re=ae,xe=Y.id===G.linkedFollowUp.correctAnswer;return s.jsxs("button",{onClick:()=>A(G.id,Y.id),disabled:ae,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${re?xe?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ne?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ne?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Y.id.toUpperCase(),"."]})," ",Y.text]},Y.id)})})]}),ae?s.jsxs("div",{className:`p-4 rounded-xl border ${he?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[he?s.jsx(Lr,{className:"w-5 h-5 text-emerald-400"}):s.jsx(ao,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:`font-bold text-sm ${he?"text-emerald-400":"text-red-400"}`,children:he?`Correct! +${G.xp} XP`:`Incorrect  ${(H==null?void 0:H.penalty)||Math.ceil(G.xp/2)} XP penalty`})]}),s.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:G.explanation})]}):s.jsx("button",{onClick:()=>E(G),disabled:!(H!=null&&H.selected)||Array.isArray(H==null?void 0:H.selected)&&H.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},G.id)}),C.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[s.jsx(af,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},vAe=({question:t,answer:e,onSelect:r})=>s.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,o=n.id===t.correctAnswer;return s.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?o?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),bAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const o=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return s.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":o?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":o?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${o?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:o&&s.jsx(Lr,{className:"w-3 h-3 text-white"})}),s.jsxs("span",{children:[s.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},wAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[s.jsx(iE,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&s.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((o,c)=>{const d=t.options.find(m=>m.id===o),h=a&&i[c]===o;return s.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},o)})}),t.options.map(o=>{const c=n.includes(o.id),d=n.indexOf(o.id);return s.jsxs("button",{onClick:()=>r(t.id,o.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?s.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):s.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),o.text]},o.id)})]})};function SAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${sb.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return sb.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const NAe=({assignment:t,onComplete:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!0),[o,c]=T.useState(!1),d=T.useRef(Gv()),h=T.useRef(Date.now()),m=T.useRef(e),[p,x]=T.useState(!0),[y,S]=T.useState(0);T.useEffect(()=>{m.current=e},[e]);const N=T.useCallback(()=>{h.current=Date.now(),p||x(!0)},[p]);T.useEffect(()=>{const j=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,S(d.current.engagementTime),p||x(!0)):p&&x(!1)},1e3);return()=>clearInterval(j)},[p]),T.useEffect(()=>{const j=["mousemove","keydown","scroll","click"];return j.forEach(k=>window.addEventListener(k,N)),()=>{j.forEach(k=>window.removeEventListener(k,N))}},[N]),T.useEffect(()=>()=>{m.current(d.current)},[]),T.useEffect(()=>{(async()=>{i(!0);try{const k=await ma(ot(Ie,"reading_materials",t.id));k.exists()?n(k.data()):c(!0)}catch(k){console.error("Failed to load reading material:",k),c(!0)}finally{i(!1)}})()},[t.id]);const w=T.useMemo(()=>r?r.sections.map(j=>({title:j.title,html:SAe(j.content)})):[],[r]);return a?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(Ai,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):o||!r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(zi,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?s.jsx(sE,{className:"w-4 h-4"}):s.jsx(io,{className:"w-4 h-4 animate-pulse"}),p?"Reading Active":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(y/60),"m ",y%60,"s"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!p&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Ds,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:N,children:s.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),s.jsx("div",{className:"space-y-10",children:w.map((j,k)=>s.jsxs("div",{className:"group",children:[s.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[s.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:k+1}),j.title]}),s.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:j.html}})]},k))}),s.jsx("div",{className:"mt-12 mb-4 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[s.jsx(zi,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},_Ae=({user:t})=>{const[e,r]=T.useState(!1),[n,a]=T.useState(""),[i,o]=T.useState("bug"),[c,d]=T.useState(!1),[h,m]=T.useState(!1),p=async()=>{if(n.trim()){d(!0);try{await Re.submitBugReport({userId:t.id,userName:t.name,userEmail:t.email,category:i,description:n.trim(),page:window.location.pathname,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}),m(!0),setTimeout(()=>{m(!1),r(!1),a("")},2e3)}catch{}finally{d(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 left-4 z-40 p-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-full text-gray-400 hover:text-white transition-all shadow-lg backdrop-blur-md group",title:"Report a bug",children:s.jsx(jR,{className:"w-4 h-4 group-hover:text-amber-400 transition"})}),e&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:()=>r(!1),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsx("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-md shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-300",onClick:x=>x.stopPropagation(),children:h?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(s0,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Report Submitted"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Thanks for helping improve Porter Portal!"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(jR,{className:"w-5 h-5 text-amber-400"})," Report an Issue"]}),s.jsx("button",{onClick:()=>r(!1),className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Jn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:["bug","feature","other"].map(x=>s.jsx("button",{onClick:()=>o(x),className:`flex-1 px-3 py-2 rounded-xl text-xs font-bold transition border ${i===x?"bg-purple-600/60 text-white border-purple-500/50":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10"}`,children:x==="bug"?"Bug":x==="feature"?"Feature Request":"Other"},x))}),s.jsx("textarea",{value:n,onChange:x=>a(x.target.value),placeholder:"Describe what happened or what you'd like to see...",rows:4,maxLength:1e3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("p",{className:"text-[10px] text-gray-600 text-right",children:[n.length,"/1000"]}),s.jsxs("button",{onClick:p,disabled:!n.trim()||c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl font-bold transition",children:[s.jsx(uE,{className:"w-4 h-4"}),c?"Submitting...":"Submit Report"]})]})]})})]})]})},TAe={3:"text-blue-400",7:"text-green-400",14:"text-purple-400",21:"text-amber-400",30:"text-red-400",50:"text-pink-400",100:"text-cyan-400"},jAe=({userId:t,streakData:e,compact:r})=>{var h,m;const[n,a]=T.useState(e||null),[i,o]=T.useState(null);if(T.useEffect(()=>{(async()=>{try{const x=await Re.updateDailyStreak(t);x.freezeUsed?(o({message:"Streak Freeze used! Streak saved.",type:"freeze"}),setTimeout(()=>o(null),3e3)):x.newMilestone&&(o({message:`${x.newMilestone}-day streak milestone!`,type:"milestone"}),setTimeout(()=>o(null),3e3))}catch{}})()},[t]),T.useEffect(()=>{e&&a(e)},[e]),!n)return null;const c=n.currentStreak>=30?"text-red-400 animate-pulse":n.currentStreak>=14?"text-orange-400":n.currentStreak>=7?"text-amber-400":n.currentStreak>=3?"text-yellow-400":"text-gray-500";if(r)return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Cu,{className:`w-4 h-4 ${c}`}),s.jsx("span",{className:`text-sm font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-500"}`,children:n.currentStreak}),n.freezeTokens>0&&s.jsx("div",{className:"flex items-center gap-0.5 ml-1",title:`${n.freezeTokens} streak freeze${n.freezeTokens!==1?"s":""}`,children:Array.from({length:n.freezeTokens}).map((p,x)=>s.jsx(v3,{className:"w-3 h-3 text-cyan-400"},x))})]});const d=Array.from({length:7}).map((p,x)=>{var j;const y=new Date(Date.now()-(6-x)*864e5).toISOString().split("T")[0],S=(j=n.streakHistory)==null?void 0:j.includes(y),N=y===new Date().toISOString().split("T")[0],w=new Date(y).toLocaleDateString("en-US",{weekday:"narrow"});return{date:y,isActive:S,isToday:N,dayLabel:w}});return s.jsxs("div",{className:"relative",children:[i&&s.jsxs("div",{className:`absolute -top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-xl text-xs font-bold animate-in slide-in-from-bottom-2 fade-in duration-300 whitespace-nowrap ${i.type==="freeze"?"bg-cyan-600/90 text-white":i.type==="milestone"?"bg-amber-600/90 text-white":"bg-orange-600/90 text-white"}`,children:[i.type==="freeze"&&s.jsx(v3,{className:"w-3 h-3 inline mr-1"}),i.type==="milestone"&&s.jsx(sl,{className:"w-3 h-3 inline mr-1"}),i.message]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cu,{className:`w-7 h-7 ${c}`}),s.jsxs("div",{children:[s.jsxs("div",{className:`text-2xl font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-400"}`,children:[n.currentStreak," Day",n.currentStreak!==1?"s":""]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold",children:["Current Streak | Best: ",n.longestStreak]})]})]}),s.jsx("div",{className:"flex items-center gap-1",title:`${n.freezeTokens} / ${n.maxFreezeTokens} freeze tokens`,children:Array.from({length:n.maxFreezeTokens}).map((p,x)=>s.jsx(v3,{className:`w-5 h-5 ${x<n.freezeTokens?"text-cyan-400":"text-gray-700"}`},x))})]}),s.jsx("div",{className:"flex gap-1.5",children:d.map(p=>s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-500 mb-1",children:p.dayLabel}),s.jsx("div",{className:`w-full aspect-square rounded-lg flex items-center justify-center text-xs font-bold transition ${p.isActive?"bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-500/20":p.isToday?"border-2 border-dashed border-amber-500/40 text-amber-500/40":"bg-white/5 text-gray-700"}`,children:p.isActive?s.jsx(Cu,{className:"w-3.5 h-3.5"}):""})]},p.date))}),(((h=n.milestones)==null?void 0:h.length)||0)>0&&s.jsx("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/5",children:(m=n.milestones)==null?void 0:m.map(p=>s.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full bg-white/5 border border-white/10 ${TAe[p]||"text-white"}`,children:[p,"d"]},p))})]})]})},AAe=({classConfigs:t,availableSections:e})=>{const r=Ga(),{confirm:n}=Ro(),[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(kr.AP_PHYSICS),[m,p]=T.useState(""),[x,y]=T.useState(""),[S,N]=T.useState(null);T.useEffect(()=>{const R=Re.subscribeToEnrollmentCodes(i);return()=>R()},[]);const w=async()=>{const R=await Re.createEnrollmentCode(d,m||void 0,x?parseInt(x):void 0);r.success(`Code created: ${R}`),c(!1),p(""),y("")},j=(R,A)=>{navigator.clipboard.writeText(R),N(A),setTimeout(()=>N(null),2e3)},k=async R=>{await n({message:"Deactivate this enrollment code?",confirmLabel:"Deactivate"})&&await Re.deactivateEnrollmentCode(R)},I=t&&t.length>0?t.map(R=>R.className):Object.values(kr).filter(R=>R!=="Uncategorized"),L=a.filter(R=>R.isActive),O=a.filter(R=>!R.isActive);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(ug,{className:"w-5 h-5 text-emerald-400"}),"Enrollment Codes"]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Dn,{className:"w-3.5 h-3.5"})," Generate Code"]})]}),o&&s.jsxs("div",{className:"mb-5 p-4 bg-black/20 border border-white/10 rounded-xl space-y-3 animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("select",{value:d,onChange:R=>h(R.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:I.map(R=>s.jsx("option",{value:R,children:R},R))}),s.jsxs("select",{value:m,onChange:R=>p(R.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"",children:"No Section"}),e.map(R=>s.jsx("option",{value:R,children:R},R))]})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("input",{type:"number",min:"1",placeholder:"Max uses (unlimited if empty)",value:x,onChange:R=>y(R.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50"}),s.jsx("button",{onClick:w,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx(Jn,{className:"w-4 h-4"})})]})]}),L.length===0&&!o?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(ug,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active enrollment codes. Generate one to let students self-enroll."]}):s.jsx("div",{className:"space-y-2",children:L.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 border border-white/10 rounded-xl group hover:border-emerald-500/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("code",{className:"text-lg font-mono font-bold text-emerald-400 tracking-widest",children:R.code}),s.jsx("span",{className:"text-xs text-gray-500",children:R.classType}),R.section&&s.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded",children:R.section})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-[10px] text-gray-500",children:[R.usedCount," used",R.maxUses?` / ${R.maxUses}`:""]}),s.jsx("button",{onClick:()=>j(R.code,R.id),className:"p-1.5 text-gray-500 hover:text-white transition",title:"Copy code",children:S===R.id?s.jsx(Ql,{className:"w-3.5 h-3.5 text-green-400"}):s.jsx(rf,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>k(R.id),className:"p-1.5 text-gray-500 hover:text-red-400 transition",title:"Deactivate",children:s.jsx(fle,{className:"w-3.5 h-3.5"})})]})]},R.id))}),O.length>0&&s.jsxs("details",{className:"mt-4",children:[s.jsxs("summary",{className:"text-[10px] text-gray-500 cursor-pointer hover:text-gray-300 uppercase tracking-widest font-bold",children:[O.length," expired code",O.length!==1?"s":""]}),s.jsx("div",{className:"mt-2 space-y-1",children:O.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/10 border border-white/5 rounded-lg opacity-50",children:[s.jsx("code",{className:"text-sm font-mono text-gray-500",children:R.code}),s.jsxs("span",{className:"text-[10px] text-gray-600",children:[R.classType," | ",R.usedCount," used"]})]},R.id))})]})]})},EAe=({userName:t,userId:e,onLogout:r})=>{const[n,a]=T.useState(""),[i,o]=T.useState(!1),[c,d]=T.useState(null),[h,m]=T.useState(null),p=y=>{const S=y.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);a(S.length>4?S.slice(0,4)+"-"+S.slice(4):S),d(null)},x=async()=>{if(n.replace("-","").length<4){d("Please enter a valid enrollment code.");return}o(!0),d(null);try{const y=await Re.redeemEnrollmentCode(n,e);y.success?m(`Enrolled in ${y.classType}! Refreshing...`):d(y.error||"Failed to redeem code.")}catch{d("Something went wrong. Please try again.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[s.jsx(X2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:["Hi ",t,"! Your account is not yet enrolled in a class."]}),s.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-2xl p-6 mb-6 text-left",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-white mb-3",children:[s.jsx(ug,{className:"w-4 h-4 text-emerald-400"}),"Have an enrollment code?"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:n,onChange:y=>p(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!i&&x()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-center text-lg font-mono font-bold text-emerald-400 tracking-[0.2em] placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:i||!!h}),s.jsx("button",{onClick:x,disabled:i||!!h||n.replace("-","").length<4,className:"px-5 py-3 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl font-bold transition flex items-center gap-2",children:i?s.jsx(Ai,{className:"w-4 h-4 animate-spin"}):"Join"})]}),c&&s.jsx("p",{className:"mt-3 text-sm text-red-400 animate-in fade-in slide-in-from-top-1 duration-200",children:c}),h&&s.jsxs("p",{className:"mt-3 text-sm text-emerald-400 flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[s.jsx(s0,{className:"w-4 h-4"})," ",h]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["No code? Ask ",WH," for one, or wait for manual authorization."]}),s.jsx("button",{onClick:r,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})})},gV={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING","Intel Dossier":"INTEL"},kAe=()=>{var ie,Be;const[t,e]=T.useState(null),[r,n]=T.useState("Dashboard"),[a,i]=T.useState([]),[o,c]=T.useState([]),[d,h]=T.useState([]),[m,p]=T.useState([]),[x,y]=T.useState([]),[S,N]=T.useState(null),[w,j]=T.useState("STUDENT"),[k,I]=T.useState("WORK"),[L,O]=T.useState(!1),[R,A]=T.useState(!1),[E,C]=T.useState(!0),[U,P]=T.useState(!1),[$,B]=T.useState(new Set),G=T.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),K=T.useRef(new Set);T.useEffect(()=>{if(!(t!=null&&t.id)||t.role===za.ADMIN)return;const Q=Re.subscribeToMyGroups(t.id,te=>{K.current=new Set(te.map(Ne=>Ne.id))});return()=>Q()},[t==null?void 0:t.id,t==null?void 0:t.role]);const H=T.useCallback(Q=>{const te=Date.now();G.current[Q]=te,localStorage.setItem("chatChannelLastSeen",JSON.stringify(G.current)),B(Ne=>{if(!Ne.has(Q))return Ne;const Se=new Set(Ne);return Se.delete(Q),Se})},[]);T.useEffect(()=>{const Q=Re.subscribeToRecentMessages(te=>{const Ne=new Set,Se=G.current,Qe=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(nt=>`class_${nt.replace(/\s+/g,"_").toLowerCase()}`));for(const nt of te){if(!nt.channelId||nt.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==za.ADMIN){if(nt.channelId.startsWith("group_")){const lt=nt.channelId.slice(6);if(!K.current.has(lt))continue}else if(nt.channelId.startsWith("class_")&&!Qe.has(nt.channelId))continue}const Ot=new Date(nt.timestamp).getTime(),Me=Se[nt.channelId]||0;Ot>Me&&Ne.add(nt.channelId)}B(Ne)});return()=>Q()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const Z=T.useMemo(()=>{const Q=new Map;return o.forEach(te=>{const Ne=Q.get(te.userId)||[];Ne.push(te),Q.set(te.userId,Ne)}),d.map(te=>{const Ne=Q.get(te.id)||[],Se=Ne.length,Qe=Math.round(Ne.reduce((nt,Ot)=>{var Me;return nt+(((Me=Ot.metrics)==null?void 0:Me.engagementTime)||0)},0)/60);return{...te,stats:{problemsCompleted:Se,avgScore:0,rawAccuracy:0,totalTime:Qe}}})},[d,o]),ae=T.useMemo(()=>{const Q=new Set;return d.forEach(te=>{te.section&&Q.add(te.section)}),Array.from(Q).sort()},[d]),he=T.useMemo(()=>a.find(Q=>Q.id===S)||null,[a,S]);T.useEffect(()=>{if(O(!1),A(!1),!S)return;const Q=ma(ot(Ie,"question_banks",S)).then(Ne=>{Ne.exists()&&(Ne.data().questions||[]).length>0&&O(!0)}).catch(()=>{}),te=ma(ot(Ie,"reading_materials",S)).then(Ne=>{Ne.exists()&&A(!0)}).catch(()=>{});Promise.all([Q,te]).then(()=>{})},[S]),T.useEffect(()=>{let Q=null;const te=xte(HT,async Ne=>{Ne?(await fe(Ne),Q=$r(ot(Ie,"users",Ne.uid),Se=>{Se.exists()&&e(Qe=>({...Qe||{},...Se.data(),id:Ne.uid}))})):(e(null),Q&&Q(),C(!1))});return()=>{te(),Q&&Q()}},[]),T.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===za.ADMIN)){const Q=Re.subscribeToAssignments(i),te=Re.subscribeToClassConfigs(y),Ne=[Q,te];return t.role===za.ADMIN?(Ne.push(Re.subscribeToSubmissions(c)),Ne.push(Re.subscribeToUsers(h)),Ne.push(Re.subscribeToWhitelist(p))):Ne.push(Re.subscribeToUserSubmissions(t.id,c)),()=>Ne.forEach(Se=>Se())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),T.useEffect(()=>{(t==null?void 0:t.role)===za.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),T.useEffect(()=>{var Q;cce(((Q=t==null?void 0:t.settings)==null?void 0:Q.soundEffects)!==!1)},[(ie=t==null?void 0:t.settings)==null?void 0:ie.soundEffects]),sce((t==null?void 0:t.id)||null,((Be=t==null?void 0:t.settings)==null?void 0:Be.pushNotifications)===!0);const fe=async Q=>{try{const te=ot(Ie,"users",Q.uid),Ne=await ma(te),Se=await ma(ot(Ie,"allowed_emails",Q.email||"")),nt=(await Q.getIdTokenResult()).claims.admin===!0||Q.email===Zle,Ot=Se.exists()||nt,Me=Se.exists()?Se.data():null,lt=(Me==null?void 0:Me.classType)||kr.UNCATEGORIZED,St=(Me==null?void 0:Me.classTypes)||(lt!==kr.UNCATEGORIZED?[lt]:[]);if(Ne.exists()){const vt=Ne.data(),et={lastLoginAt:new Date().toISOString(),isWhitelisted:Ot};if(nt&&(et.role="ADMIN"),!Ot&&!nt&&(et.enrolledClasses=[]),Ot&&St.length>0){const ce=vt.enrolledClasses||[],Ue=Array.from(new Set([...ce,...St]));Ue.length!==ce.length&&(et.enrolledClasses=Ue,(!vt.classType||vt.classType===kr.UNCATEGORIZED)&&(et.classType=St[0]))}await ir(te,et)}else{const vt={email:Q.email,name:Q.displayName||"Student",avatarUrl:Q.photoURL||"",role:nt?"ADMIN":"STUDENT",classType:lt,enrolledClasses:Ot?St:[],isWhitelisted:Ot,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Yn(te,vt)}}catch(te){console.error(te)}finally{C(!1)}},Y=async()=>{await yte(HT),e(null),N(null)},ne=Q=>{I("WORK"),N(Q)},re=T.useRef(he),xe=T.useRef(t);T.useEffect(()=>{re.current=he},[he]),T.useEffect(()=>{xe.current=t},[t]);const Te=async Q=>{const te=xe.current,Ne=re.current;if(!(!te||!Ne||te.role===za.ADMIN)&&!(Q.engagementTime<10))try{await Re.submitEngagement(te.id,te.name,Ne.id,Ne.title,Q,Ne.classType)}catch(Se){console.error("Engagement submission failed:",Se)}},Ve=T.useMemo(()=>{const Q={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const te=x.find(Ne=>Ne.className===t.classType);if(te)return te.features}return Q},[t==null?void 0:t.role,t==null?void 0:t.classType,x]);if(E)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return s.jsx(m0e,{});if(!t.isWhitelisted&&t.role!==za.ADMIN)return s.jsx(EAe,{userName:t.name,userId:t.id,onLogout:Y});const Ze=t.role===za.ADMIN||Ve.physicsTools,Xe=t.role===za.ADMIN||Ve.communications;return s.jsx(gAe,{children:s.jsx(p0e,{children:s.jsx(rce,{children:s.jsxs(s.Fragment,{children:[s.jsx(nce,{}),Ze&&s.jsx(xhe,{onToggleChat:Xe?()=>P(!U):void 0,hasUnreadChat:$.size>0}),Xe&&s.jsx(bhe,{user:t,isOpen:U,onClose:()=>P(!1),assignments:a,classConfigs:x,unreadChannels:$,onMarkChannelRead:H,onOpenResource:Q=>{ne(Q)}}),s.jsx(hce,{user:t,onLogout:Y,activeTab:r,setActiveTab:n,children:he?s.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[he.title,t.role===za.ADMIN&&s.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),s.jsxs("div",{className:"flex gap-4 mt-2",children:[s.jsx("button",{onClick:()=>I("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${k==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),L&&s.jsxs("button",{onClick:()=>I("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${k==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Co,{className:"w-3.5 h-3.5"})," Review"]}),R&&s.jsxs("button",{onClick:()=>I("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${k==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(zi,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&s.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[s.jsx("button",{onClick:()=>j("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),s.jsx("button",{onClick:()=>j("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),s.jsxs("button",{onClick:()=>{N(null),I("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[s.jsx(dle,{className:"w-4 h-4"})," Exit"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[k==="WORK"&&s.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(f0e,{onComplete:Te,contentUrl:he.contentUrl,htmlContent:he.htmlContent,userId:t.id,assignmentId:he.id,classType:he.classType,lessonBlocks:he.lessonBlocks})}),w==="ADMIN"&&t.role===za.ADMIN&&s.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(dg,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:s.jsx(ls,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o.filter(Q=>Q.assignmentId===he.id&&!Q.isArchived).length}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),s.jsx("button",{onClick:()=>P(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),k==="REVIEW"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(yAe,{assignment:he})}),k==="STUDY"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(NAe,{assignment:he,onComplete:Te})})]})]}):s.jsx("div",{className:"h-full",children:s.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===za.ADMIN&&s.jsxs(s.Fragment,{children:[r==="Dashboard"&&s.jsx(E0e,{users:Z,assignments:a,submissions:o}),r==="User Management"&&s.jsx(k0e,{users:Z,whitelistedEmails:m,classConfigs:x,onWhitelist:async(Q,te)=>Re.addToWhitelist(Q,te)}),r==="Admin Panel"&&s.jsx(nhe,{assignments:a,submissions:o,users:d,onCreateAssignment:async Q=>{Q.title&&await Re.addAssignment(Q)},classConfigs:x,availableSections:ae,onPreviewAssignment:Q=>{j("STUDENT"),ne(Q)}}),r==="Student Groups"&&s.jsx(phe,{students:Z.filter(Q=>Q.role==="STUDENT"),availableSections:ae,fullPage:!0}),r==="Enrollment Codes"&&s.jsx(AAe,{classConfigs:x,availableSections:ae}),r.startsWith("XP Command:")&&s.jsx(mhe,{users:d,initialTab:r.split(":")[1]})]}),t.role===za.STUDENT&&s.jsxs(s.Fragment,{children:[r in gV&&s.jsx(Mje,{user:t,assignments:a,submissions:o,enabledFeatures:Ve,onNavigate:n,onStartAssignment:ne,studentTab:gV[r]}),r==="Forensics"&&Ve.evidenceLocker&&s.jsx(cAe,{user:t}),r==="Physics Lab"&&Ve.physicsLab&&s.jsx(uAe,{user:t}),r==="Leaderboard"&&Ve.leaderboard&&s.jsx(pAe,{user:t})]})]},r)})}),s.jsx(_Ae,{user:t}),t.role===za.STUDENT&&s.jsx("div",{className:"fixed top-3 right-48 z-30",children:s.jsx(jAe,{userId:t.id,compact:!0})})]})})})})},uY=document.getElementById("root");if(!uY)throw new Error("Could not find root element to mount to");const CAe=XJ.createRoot(uY);CAe.render(s.jsx(se.StrictMode,{children:s.jsx(kAe,{})}));
