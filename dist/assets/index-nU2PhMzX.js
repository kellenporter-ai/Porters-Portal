var AZ=Object.defineProperty;var jZ=(t,e,r)=>e in t?AZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var uO=(t,e,r)=>jZ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as EZ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U5={exports:{}},Up={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dO;function kZ(){if(dO)return Up;dO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Up.Fragment=e,Up.jsx=r,Up.jsxs=r,Up}var hO;function CZ(){return hO||(hO=1,U5.exports=kZ()),U5.exports}var s=CZ(),z5={exports:{}},or={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fO;function OZ(){if(fO)return or;fO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(Y){return Y===null||typeof Y!="object"?null:(Y=y&&Y[y]||Y["@@iterator"],typeof Y=="function"?Y:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function E(Y,ne,re){this.props=Y,this.context=ne,this.refs=w,this.updater=re||_}E.prototype.isReactComponent={},E.prototype.setState=function(Y,ne){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ne,"setState")},E.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function I(){}I.prototype=E.prototype;function R(Y,ne,re){this.props=Y,this.context=ne,this.refs=w,this.updater=re||_}var L=R.prototype=new I;L.constructor=R,S(L,E.prototype),L.isPureReactComponent=!0;var C=Array.isArray;function O(){}var A={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function k(Y,ne,re){var ye=re.ref;return{$$typeof:t,type:Y,key:ne,ref:ye!==void 0?ye:null,props:re}}function z(Y,ne){return k(Y.type,ne,Y.props)}function D(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function $(Y){var ne={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(re){return ne[re]})}var B=/\/+/g;function G(Y,ne){return typeof Y=="object"&&Y!==null&&Y.key!=null?$(""+Y.key):ne.toString(36)}function K(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(O,O):(Y.status="pending",Y.then(function(ne){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ne)},function(ne){Y.status==="pending"&&(Y.status="rejected",Y.reason=ne)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function H(Y,ne,re,ye,Te){var Ve=typeof Y;(Ve==="undefined"||Ve==="boolean")&&(Y=null);var Je=!1;if(Y===null)Je=!0;else switch(Ve){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(Y.$$typeof){case t:case e:Je=!0;break;case p:return Je=Y._init,H(Je(Y._payload),ne,re,ye,Te)}}if(Je)return Te=Te(Y),Je=ye===""?"."+G(Y,0):ye,C(Te)?(re="",Je!=null&&(re=Je.replace(B,"$&/")+"/"),H(Te,ne,re,"",function(Be){return Be})):Te!=null&&(D(Te)&&(Te=z(Te,re+(Te.key==null||Y&&Y.key===Te.key?"":(""+Te.key).replace(B,"$&/")+"/")+Je)),ne.push(Te)),1;Je=0;var Xe=ye===""?".":ye+":";if(C(Y))for(var ie=0;ie<Y.length;ie++)ye=Y[ie],Ve=Xe+G(ye,ie),Je+=H(ye,ne,re,Ve,Te);else if(ie=x(Y),typeof ie=="function")for(Y=ie.call(Y),ie=0;!(ye=Y.next()).done;)ye=ye.value,Ve=Xe+G(ye,ie++),Je+=H(ye,ne,re,Ve,Te);else if(Ve==="object"){if(typeof Y.then=="function")return H(K(Y),ne,re,ye,Te);throw ne=String(Y),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Je}function J(Y,ne,re){if(Y==null)return Y;var ye=[],Te=0;return H(Y,ye,"","",function(Ve){return ne.call(re,Ve,Te++)}),ye}function ae(Y){if(Y._status===-1){var ne=Y._result;ne=ne(),ne.then(function(re){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=re)},function(re){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=re)}),Y._status===-1&&(Y._status=0,Y._result=ne)}if(Y._status===1)return Y._result.default;throw Y._result}var he=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},fe={map:J,forEach:function(Y,ne,re){J(Y,function(){ne.apply(this,arguments)},re)},count:function(Y){var ne=0;return J(Y,function(){ne++}),ne},toArray:function(Y){return J(Y,function(ne){return ne})||[]},only:function(Y){if(!D(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return or.Activity=m,or.Children=fe,or.Component=E,or.Fragment=r,or.Profiler=a,or.PureComponent=R,or.StrictMode=n,or.Suspense=d,or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,or.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return A.H.useMemoCache(Y)}},or.cache=function(Y){return function(){return Y.apply(null,arguments)}},or.cacheSignal=function(){return null},or.cloneElement=function(Y,ne,re){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var ye=S({},Y.props),Te=Y.key;if(ne!=null)for(Ve in ne.key!==void 0&&(Te=""+ne.key),ne)!j.call(ne,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ne.ref===void 0||(ye[Ve]=ne[Ve]);var Ve=arguments.length-2;if(Ve===1)ye.children=re;else if(1<Ve){for(var Je=Array(Ve),Xe=0;Xe<Ve;Xe++)Je[Xe]=arguments[Xe+2];ye.children=Je}return k(Y.type,Te,ye)},or.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:i,_context:Y},Y},or.createElement=function(Y,ne,re){var ye,Te={},Ve=null;if(ne!=null)for(ye in ne.key!==void 0&&(Ve=""+ne.key),ne)j.call(ne,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Te[ye]=ne[ye]);var Je=arguments.length-2;if(Je===1)Te.children=re;else if(1<Je){for(var Xe=Array(Je),ie=0;ie<Je;ie++)Xe[ie]=arguments[ie+2];Te.children=Xe}if(Y&&Y.defaultProps)for(ye in Je=Y.defaultProps,Je)Te[ye]===void 0&&(Te[ye]=Je[ye]);return k(Y,Ve,Te)},or.createRef=function(){return{current:null}},or.forwardRef=function(Y){return{$$typeof:c,render:Y}},or.isValidElement=D,or.lazy=function(Y){return{$$typeof:p,_payload:{_status:-1,_result:Y},_init:ae}},or.memo=function(Y,ne){return{$$typeof:h,type:Y,compare:ne===void 0?null:ne}},or.startTransition=function(Y){var ne=A.T,re={};A.T=re;try{var ye=Y(),Te=A.S;Te!==null&&Te(re,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(O,he)}catch(Ve){he(Ve)}finally{ne!==null&&re.types!==null&&(ne.types=re.types),A.T=ne}},or.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},or.use=function(Y){return A.H.use(Y)},or.useActionState=function(Y,ne,re){return A.H.useActionState(Y,ne,re)},or.useCallback=function(Y,ne){return A.H.useCallback(Y,ne)},or.useContext=function(Y){return A.H.useContext(Y)},or.useDebugValue=function(){},or.useDeferredValue=function(Y,ne){return A.H.useDeferredValue(Y,ne)},or.useEffect=function(Y,ne){return A.H.useEffect(Y,ne)},or.useEffectEvent=function(Y){return A.H.useEffectEvent(Y)},or.useId=function(){return A.H.useId()},or.useImperativeHandle=function(Y,ne,re){return A.H.useImperativeHandle(Y,ne,re)},or.useInsertionEffect=function(Y,ne){return A.H.useInsertionEffect(Y,ne)},or.useLayoutEffect=function(Y,ne){return A.H.useLayoutEffect(Y,ne)},or.useMemo=function(Y,ne){return A.H.useMemo(Y,ne)},or.useOptimistic=function(Y,ne){return A.H.useOptimistic(Y,ne)},or.useReducer=function(Y,ne,re){return A.H.useReducer(Y,ne,re)},or.useRef=function(Y){return A.H.useRef(Y)},or.useState=function(Y){return A.H.useState(Y)},or.useSyncExternalStore=function(Y,ne,re){return A.H.useSyncExternalStore(Y,ne,re)},or.useTransition=function(){return A.H.useTransition()},or.version="19.2.4",or}var pO;function kj(){return pO||(pO=1,z5.exports=OZ()),z5.exports}var T=kj();const se=Xr(T);var V5={exports:{}},zp={},F5={exports:{}},q5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mO;function IZ(){return mO||(mO=1,(function(t){function e(H,J){var ae=H.length;H.push(J);e:for(;0<ae;){var he=ae-1>>>1,fe=H[he];if(0<a(fe,J))H[he]=J,H[ae]=fe,ae=he;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var J=H[0],ae=H.pop();if(ae!==J){H[0]=ae;e:for(var he=0,fe=H.length,Y=fe>>>1;he<Y;){var ne=2*(he+1)-1,re=H[ne],ye=ne+1,Te=H[ye];if(0>a(re,ae))ye<fe&&0>a(Te,re)?(H[he]=Te,H[ye]=ae,he=ye):(H[he]=re,H[ne]=ae,he=ne);else if(ye<fe&&0>a(Te,ae))H[he]=Te,H[ye]=ae,he=ye;else break e}}return J}function a(H,J){var ae=H.sortIndex-J.sortIndex;return ae!==0?ae:H.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],p=1,m=null,y=3,x=!1,_=!1,S=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var J=r(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=H)n(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=r(h)}}function C(H){if(S=!1,L(H),!_)if(r(d)!==null)_=!0,O||(O=!0,$());else{var J=r(h);J!==null&&K(C,J.startTime-H)}}var O=!1,A=-1,j=5,k=-1;function z(){return w?!0:!(t.unstable_now()-k<j)}function D(){if(w=!1,O){var H=t.unstable_now();k=H;var J=!0;try{e:{_=!1,S&&(S=!1,I(A),A=-1),x=!0;var ae=y;try{t:{for(L(H),m=r(d);m!==null&&!(m.expirationTime>H&&z());){var he=m.callback;if(typeof he=="function"){m.callback=null,y=m.priorityLevel;var fe=he(m.expirationTime<=H);if(H=t.unstable_now(),typeof fe=="function"){m.callback=fe,L(H),J=!0;break t}m===r(d)&&n(d),L(H)}else n(d);m=r(d)}if(m!==null)J=!0;else{var Y=r(h);Y!==null&&K(C,Y.startTime-H),J=!1}}break e}finally{m=null,y=ae,x=!1}J=void 0}}finally{J?$():O=!1}}}var $;if(typeof R=="function")$=function(){R(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=D,$=function(){G.postMessage(null)}}else $=function(){E(D,0)};function K(H,J){A=E(function(){H(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var ae=y;y=J;try{return H()}finally{y=ae}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ae=y;y=H;try{return J()}finally{y=ae}},t.unstable_scheduleCallback=function(H,J,ae){var he=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?he+ae:he):ae=he,H){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ae+fe,H={id:p++,callback:J,priorityLevel:H,startTime:ae,expirationTime:fe,sortIndex:-1},ae>he?(H.sortIndex=ae,e(h,H),r(d)===null&&H===r(h)&&(S?(I(A),A=-1):S=!0,K(C,ae-he))):(H.sortIndex=fe,e(d,H),_||x||(_=!0,O||(O=!0,$()))),H},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(H){var J=y;return function(){var ae=y;y=J;try{return H.apply(this,arguments)}finally{y=ae}}}})(q5)),q5}var gO;function RZ(){return gO||(gO=1,F5.exports=IZ()),F5.exports}var H5={exports:{}},bi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yO;function MZ(){if(yO)return bi;yO=1;var t=kj();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return bi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,bi.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},bi.flushSync=function(d){var h=o.T,p=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=h,n.p=p,n.d.f()}},bi.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},bi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},bi.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},bi.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},bi.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},bi.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},bi.requestFormReset=function(d){n.d.r(d)},bi.unstable_batchedUpdates=function(d,h){return d(h)},bi.useFormState=function(d,h,p){return o.H.useFormState(d,h,p)},bi.useFormStatus=function(){return o.H.useHostTransitionStatus()},bi.version="19.2.4",bi}var xO;function iV(){if(xO)return H5.exports;xO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),H5.exports=MZ(),H5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vO;function PZ(){if(vO)return zp;vO=1;var t=RZ(),e=kj(),r=iV();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var N=b.alternate;if(N===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===f)return d(b),l;if(N===g)return d(b),u;N=N.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=N;else{for(var V=!1,X=b.child;X;){if(X===f){V=!0,f=b,g=N;break}if(X===g){V=!0,g=b,f=N;break}X=X.sibling}if(!V){for(X=N.child;X;){if(X===f){V=!0,f=N,g=b;break}if(X===g){V=!0,g=N,f=b;break}X=X.sibling}if(!V)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),R=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=D&&l[D]||l["@@iterator"],typeof l=="function"?l:null)}var B=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===B?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case C:return"Suspense";case O:return"SuspenseList";case k:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case _:return"Portal";case R:return l.displayName||"Context";case I:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case A:return u=l.displayName||null,u!==null?u:G(l.type)||"Memo";case j:u=l._payload,l=l._init;try{return G(l(u))}catch{}}return null}var K=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},he=[],fe=-1;function Y(l){return{current:l}}function ne(l){0>fe||(l.current=he[fe],he[fe]=null,fe--)}function re(l,u){fe++,he[fe]=l.current,l.current=u}var ye=Y(null),Te=Y(null),Ve=Y(null),Je=Y(null);function Xe(l,u){switch(re(Ve,u),re(Te,l),re(ye,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?R9(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=R9(u),l=M9(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(ye),re(ye,l)}function ie(){ne(ye),ne(Te),ne(Ve)}function Be(l){l.memoizedState!==null&&re(Je,l);var u=ye.current,f=M9(u,l.type);u!==f&&(re(Te,l),re(ye,f))}function Q(l){Te.current===l&&(ne(ye),ne(Te)),Je.current===l&&(ne(Je),Dp._currentValue=ae)}var te,_e;function Se(l){if(te===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);te=u&&u[1]||"",_e=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+_e}var Qe=!1;function nt(l,u){if(!l||Qe)return"";Qe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Le){var De=Le}Reflect.construct(l,[],Ye)}else{try{Ye.call()}catch(Le){De=Le}l.call(Ye.prototype)}}else{try{throw Error()}catch(Le){De=Le}(Ye=l())&&typeof Ye.catch=="function"&&Ye.catch(function(){})}}catch(Le){if(Le&&De&&typeof Le.stack=="string")return[Le.stack,De.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=g.DetermineComponentFrameRoot(),V=N[0],X=N[1];if(V&&X){var de=V.split(`
`),Ce=X.split(`
`);for(b=g=0;g<de.length&&!de[g].includes("DetermineComponentFrameRoot");)g++;for(;b<Ce.length&&!Ce[b].includes("DetermineComponentFrameRoot");)b++;if(g===de.length||b===Ce.length)for(g=de.length-1,b=Ce.length-1;1<=g&&0<=b&&de[g]!==Ce[b];)b--;for(;1<=g&&0<=b;g--,b--)if(de[g]!==Ce[b]){if(g!==1||b!==1)do if(g--,b--,0>b||de[g]!==Ce[b]){var Ge=`
`+de[g].replace(" at new "," at ");return l.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",l.displayName)),Ge}while(1<=g&&0<=b);break}}}finally{Qe=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Se(f):""}function Ot(l,u){switch(l.tag){case 26:case 27:case 5:return Se(l.type);case 16:return Se("Lazy");case 13:return l.child!==u&&u!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return nt(l.type,!1);case 11:return nt(l.type.render,!1);case 1:return nt(l.type,!0);case 31:return Se("Activity");default:return""}}function Me(l){try{var u="",f=null;do u+=Ot(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var lt=Object.prototype.hasOwnProperty,St=t.unstable_scheduleCallback,vt=t.unstable_cancelCallback,et=t.unstable_shouldYield,ce=t.unstable_requestPaint,Ue=t.unstable_now,Ze=t.unstable_getCurrentPriorityLevel,ht=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,zt=t.unstable_NormalPriority,tr=t.unstable_LowPriority,Cr=t.unstable_IdlePriority,ve=t.log,st=t.unstable_setDisableYieldValue,jt=null,Dt=null;function $t(l){if(typeof ve=="function"&&st(l),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(jt,l)}catch{}}var tt=Math.clz32?Math.clz32:Br,ar=Math.log,br=Math.LN2;function Br(l){return l>>>=0,l===0?32:31-(ar(l)/br|0)|0}var dn=256,vr=262144,Gt=4194304;function Ut(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function _t(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,N=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var X=g&134217727;return X!==0?(g=X&~N,g!==0?b=Ut(g):(V&=X,V!==0?b=Ut(V):f||(f=X&~l,f!==0&&(b=Ut(f))))):(X=g&~N,X!==0?b=Ut(X):V!==0?b=Ut(V):f||(f=g&~l,f!==0&&(b=Ut(f)))),b===0?0:u!==0&&u!==b&&(u&N)===0&&(N=b&-b,f=u&-u,N>=f||N===32&&(f&4194048)!==0)?u:b}function $r(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function an(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(){var l=Gt;return Gt<<=1,(Gt&62914560)===0&&(Gt=4194304),l}function Ur(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function hn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function cr(l,u,f,g,b,N){var V=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var X=l.entanglements,de=l.expirationTimes,Ce=l.hiddenUpdates;for(f=V&~f;0<f;){var Ge=31-tt(f),Ye=1<<Ge;X[Ge]=0,de[Ge]=-1;var De=Ce[Ge];if(De!==null)for(Ce[Ge]=null,Ge=0;Ge<De.length;Ge++){var Le=De[Ge];Le!==null&&(Le.lane&=-536870913)}f&=~Ye}g!==0&&ya(l,g,0),N!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=N&~(V&~u))}function ya(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-tt(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function fn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-tt(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function kn(l,u){var f=u&-u;return f=(f&42)!==0?1:ni(f),(f&(l.suspendedLanes|u))!==0?0:f}function ni(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Nr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function pn(){var l=J.p;return l!==0?l:(l=window.event,l===void 0?32:nO(l.type))}function ai(l,u){var f=J.p;try{return J.p=l,u()}finally{J.p=f}}var Hn=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Hn,mn="__reactProps$"+Hn,Nn="__reactContainer$"+Hn,ii="__reactEvents$"+Hn,Ga="__reactListeners$"+Hn,ji="__reactHandles$"+Hn,cs="__reactResources$"+Hn,xi="__reactMarker$"+Hn;function Nt(l){delete l[Jr],delete l[mn],delete l[ii],delete l[Ga],delete l[ji]}function pe(l){var u=l[Jr];if(u)return u;for(var f=l.parentNode;f;){if(u=f[Nn]||f[Jr]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=z9(l);l!==null;){if(f=l[Jr])return f;l=z9(l)}return u}l=f,f=l.parentNode}return null}function rt(l){if(l=l[Jr]||l[Nn]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function ft(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Xt(l){var u=l[cs];return u||(u=l[cs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function hr(l){l[xi]=!0}var sn=new Set,Kr={};function gn(l,u){Or(l,u),Or(l+"Capture",u)}function Or(l,u){for(Kr[l]=u,l=0;l<u.length;l++)sn.add(u[l])}var Ms=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},lo={};function hl(l){return lt.call(lo,l)?!0:lt.call(us,l)?!1:Ms.test(l)?lo[l]=!0:(us[l]=!0,!1)}function ds(l,u,f){if(hl(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function hs(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function Ra(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function xa(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function be(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,N=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(V){f=""+V,N.call(this,V)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(V){f=""+V},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Ae(l){if(!l._valueTracker){var u=q(l)?"checked":"value";l._valueTracker=be(l,u,""+l[u])}}function je(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=q(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function mt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var It=/[\n"\\]/g;function At(l){return l.replace(It,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Yt(l,u,f,g,b,N,V,X){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),u!=null?V==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+xa(u)):l.value!==""+xa(u)&&(l.value=""+xa(u)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),u!=null?ue(l,V,xa(u)):f!=null?ue(l,V,xa(f)):g!=null&&l.removeAttribute("value"),b==null&&N!=null&&(l.defaultChecked=!!N),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?l.name=""+xa(X):l.removeAttribute("name")}function wr(l,u,f,g,b,N,V,X){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(l.type=N),u!=null||f!=null){if(!(N!=="submit"&&N!=="reset"||u!=null)){Ae(l);return}f=f!=null?""+xa(f):"",u=u!=null?""+xa(u):f,X||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=X?l.checked:!!g,l.defaultChecked=!!g,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Ae(l)}function ue(l,u,f){u==="number"&&mt(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function xe(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+xa(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function Pe(l,u,f){if(u!=null&&(u=""+xa(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+xa(f):""}function Fe(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(K(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=xa(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Ae(l)}function qe(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var sr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kt(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||sr.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function Cn(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&Kt(l,b,g)}else for(var N in u)u.hasOwnProperty(N)&&Kt(l,N,u[N])}function oa(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ps=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(l){return va.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Zn(){}var Ir=null;function Io(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ds=null,fs=null;function z1(l){var u=rt(l);if(u&&(l=u.stateNode)){var f=l[mn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Yt(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+At(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[mn]||null;if(!b)throw Error(n(90));Yt(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&je(g)}break e;case"textarea":Pe(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&xe(l,!!f.multiple,u,!1)}}}var Zf=!1;function V1(l,u,f){if(Zf)return l(u,f);Zf=!0;try{var g=l(u);return g}finally{if(Zf=!1,(Ds!==null||fs!==null)&&(By(),Ds&&(u=Ds,l=fs,fs=Ds=null,z1(u),l)))for(u=0;u<l.length;u++)z1(l[u])}}function zi(l,u){var f=l.stateNode;if(f===null)return null;var g=f[mn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jf=!1;if(co)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Jf=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Jf=!1}var ps=null,j0=null,Mo=null;function vc(){if(Mo)return Mo;var l,u=j0,f=u.length,g,b="value"in ps?ps.value:ps.textContent,N=b.length;for(l=0;l<f&&u[l]===b[l];l++);var V=f-l;for(g=1;g<=V&&u[f-g]===b[N-g];g++);return Mo=b.slice(l,1<g?1-g:void 0)}function Ku(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function bc(){return!0}function Pn(){return!1}function vi(l){function u(f,g,b,N,V){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=N,this.target=V,this.currentTarget=null;for(var X in l)l.hasOwnProperty(X)&&(f=l[X],this[X]=f?f(N):N[X]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?bc:Pn,this.isPropagationStopped=Pn,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=bc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=bc)},persist:function(){},isPersistent:bc}),u}var fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=vi(fl),wc=m({},fl,{view:0,detail:0}),F1=vi(wc),Sc,E0,Ei,Xu=m({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ei&&(Ei&&l.type==="mousemove"?(Sc=l.screenX-Ei.screenX,E0=l.screenY-Ei.screenY):E0=Sc=0,Ei=l),Sc)},movementY:function(l){return"movementY"in l?l.movementY:E0}}),q1=vi(Xu),Yu=m({},Xu,{dataTransfer:0}),H1=vi(Yu),ep=m({},wc,{relatedTarget:0}),_c=vi(ep),G1=m({},fl,{animationName:0,elapsedTime:0,pseudoElement:0}),k0=vi(G1),Gw=m({},fl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),W1=vi(Gw),Zu=m({},fl,{data:0}),tp=vi(Zu),K1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},np={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=np[l])?!!u[l]:!1}function Nc(){return Q1}var X1=m({},wc,{key:function(l){if(l.key){var u=K1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Ku(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?rp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(l){return l.type==="keypress"?Ku(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ku(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Y1=vi(X1),pl=m({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ap=vi(pl),Z1=m({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),J1=vi(Z1),ey=m({},fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),C0=vi(ey),ki=m({},Xu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ty=vi(ki),ry=m({},fl,{newState:0,oldState:0}),Tc=vi(ry),v=[9,13,27,32],P=co&&"CompositionEvent"in window,F=null;co&&"documentMode"in document&&(F=document.documentMode);var ee=co&&"TextEvent"in window&&!F,Ne=co&&(!P||F&&8<F&&11>=F),$e=" ",gt=!1;function en(l,u){switch(l){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wa(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var yr=!1;function Wa(l,u){switch(l){case"compositionend":return wa(u);case"keypress":return u.which!==32?null:(gt=!0,$e);case"textInput":return l=u.data,l===$e&&gt?null:l;default:return null}}function Ka(l,u){if(yr)return l==="compositionend"||!P&&en(l,u)?(l=vc(),Mo=j0=ps=null,yr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Ne&&u.locale!=="ko"?null:u.data;default:return null}}var Ac={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Ac[l.type]:u==="textarea"}function Ju(l,u,f,g){Ds?fs?fs.push(g):fs=[g]:Ds=g,u=Hy(u,"onChange"),0<u.length&&(f=new Qu("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var ml=null,ip=null;function JX(l){j9(l,0)}function ny(l){var u=ft(l);if(je(u))return l}function G7(l,u){if(l==="change")return u}var W7=!1;if(co){var Ww;if(co){var Kw="oninput"in document;if(!Kw){var K7=document.createElement("div");K7.setAttribute("oninput","return;"),Kw=typeof K7.oninput=="function"}Ww=Kw}else Ww=!1;W7=Ww&&(!document.documentMode||9<document.documentMode)}function Q7(){ml&&(ml.detachEvent("onpropertychange",X7),ip=ml=null)}function X7(l){if(l.propertyName==="value"&&ny(ip)){var u=[];Ju(u,ip,l,Io(l)),V1(JX,u)}}function eY(l,u,f){l==="focusin"?(Q7(),ml=u,ip=f,ml.attachEvent("onpropertychange",X7)):l==="focusout"&&Q7()}function tY(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ny(ip)}function rY(l,u){if(l==="click")return ny(u)}function nY(l,u){if(l==="input"||l==="change")return ny(u)}function aY(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var ms=typeof Object.is=="function"?Object.is:aY;function sp(l,u){if(ms(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!lt.call(u,b)||!ms(l[b],u[b]))return!1}return!0}function Y7(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Z7(l,u){var f=Y7(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Y7(f)}}function J7(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?J7(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function ek(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=mt(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=mt(l.document)}return u}function Qw(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var iY=co&&"documentMode"in document&&11>=document.documentMode,O0=null,Xw=null,op=null,Yw=!1;function tk(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Yw||O0==null||O0!==mt(g)||(g=O0,"selectionStart"in g&&Qw(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),op&&sp(op,g)||(op=g,g=Hy(Xw,"onSelect"),0<g.length&&(u=new Qu("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=O0)))}function ed(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var I0={animationend:ed("Animation","AnimationEnd"),animationiteration:ed("Animation","AnimationIteration"),animationstart:ed("Animation","AnimationStart"),transitionrun:ed("Transition","TransitionRun"),transitionstart:ed("Transition","TransitionStart"),transitioncancel:ed("Transition","TransitionCancel"),transitionend:ed("Transition","TransitionEnd")},Zw={},rk={};co&&(rk=document.createElement("div").style,"AnimationEvent"in window||(delete I0.animationend.animation,delete I0.animationiteration.animation,delete I0.animationstart.animation),"TransitionEvent"in window||delete I0.transitionend.transition);function td(l){if(Zw[l])return Zw[l];if(!I0[l])return l;var u=I0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in rk)return Zw[l]=u[f];return l}var nk=td("animationend"),ak=td("animationiteration"),ik=td("animationstart"),sY=td("transitionrun"),oY=td("transitionstart"),lY=td("transitioncancel"),sk=td("transitionend"),ok=new Map,Jw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jw.push("scrollEnd");function uo(l,u){ok.set(l,u),gn(u,[l])}var ay=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ls=[],R0=0,e4=0;function iy(){for(var l=R0,u=e4=R0=0;u<l;){var f=Ls[u];Ls[u++]=null;var g=Ls[u];Ls[u++]=null;var b=Ls[u];Ls[u++]=null;var N=Ls[u];if(Ls[u++]=null,g!==null&&b!==null){var V=g.pending;V===null?b.next=b:(b.next=V.next,V.next=b),g.pending=b}N!==0&&lk(f,b,N)}}function sy(l,u,f,g){Ls[R0++]=l,Ls[R0++]=u,Ls[R0++]=f,Ls[R0++]=g,e4|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function t4(l,u,f,g){return sy(l,u,f,g),oy(l)}function rd(l,u){return sy(l,null,null,u),oy(l)}function lk(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,N=l.return;N!==null;)N.childLanes|=f,g=N.alternate,g!==null&&(g.childLanes|=f),N.tag===22&&(l=N.stateNode,l===null||l._visibility&1||(b=!0)),l=N,N=N.return;return l.tag===3?(N=l.stateNode,b&&u!==null&&(b=31-tt(f),l=N.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),N):null}function oy(l){if(50<kp)throw kp=0,u5=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var M0={};function cY(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(l,u,f,g){return new cY(l,u,f,g)}function r4(l){return l=l.prototype,!(!l||!l.isReactComponent)}function gl(l,u){var f=l.alternate;return f===null?(f=gs(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function ck(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function ly(l,u,f,g,b,N){var V=0;if(g=l,typeof l=="function")r4(l)&&(V=1);else if(typeof l=="string")V=pZ(l,f,ye.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case k:return l=gs(31,f,u,b),l.elementType=k,l.lanes=N,l;case S:return nd(f.children,b,N,u);case w:V=8,b|=24;break;case E:return l=gs(12,f,u,b|2),l.elementType=E,l.lanes=N,l;case C:return l=gs(13,f,u,b),l.elementType=C,l.lanes=N,l;case O:return l=gs(19,f,u,b),l.elementType=O,l.lanes=N,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case R:V=10;break e;case I:V=9;break e;case L:V=11;break e;case A:V=14;break e;case j:V=16,g=null;break e}V=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=gs(V,f,u,b),u.elementType=l,u.type=g,u.lanes=N,u}function nd(l,u,f,g){return l=gs(7,l,g,u),l.lanes=f,l}function n4(l,u,f){return l=gs(6,l,null,u),l.lanes=f,l}function uk(l){var u=gs(18,null,null,0);return u.stateNode=l,u}function a4(l,u,f){return u=gs(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var dk=new WeakMap;function Bs(l,u){if(typeof l=="object"&&l!==null){var f=dk.get(l);return f!==void 0?f:(u={value:l,source:u,stack:Me(u)},dk.set(l,u),u)}return{value:l,source:u,stack:Me(u)}}var P0=[],D0=0,cy=null,lp=0,$s=[],Us=0,jc=null,Po=1,Do="";function yl(l,u){P0[D0++]=lp,P0[D0++]=cy,cy=l,lp=u}function hk(l,u,f){$s[Us++]=Po,$s[Us++]=Do,$s[Us++]=jc,jc=l;var g=Po;l=Do;var b=32-tt(g)-1;g&=~(1<<b),f+=1;var N=32-tt(u)+b;if(30<N){var V=b-b%5;N=(g&(1<<V)-1).toString(32),g>>=V,b-=V,Po=1<<32-tt(u)+b|f<<b|g,Do=N+l}else Po=1<<N|f<<b|g,Do=l}function i4(l){l.return!==null&&(yl(l,1),hk(l,1,0))}function s4(l){for(;l===cy;)cy=P0[--D0],P0[D0]=null,lp=P0[--D0],P0[D0]=null;for(;l===jc;)jc=$s[--Us],$s[Us]=null,Do=$s[--Us],$s[Us]=null,Po=$s[--Us],$s[Us]=null}function fk(l,u){$s[Us++]=Po,$s[Us++]=Do,$s[Us++]=jc,Po=u.id,Do=u.overflow,jc=l}var si=null,Dn=null,Rr=!1,Ec=null,zs=!1,o4=Error(n(519));function kc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cp(Bs(u,l)),o4}function pk(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[Jr]=l,u[mn]=g,f){case"dialog":_r("cancel",u),_r("close",u);break;case"iframe":case"object":case"embed":_r("load",u);break;case"video":case"audio":for(f=0;f<Op.length;f++)_r(Op[f],u);break;case"source":_r("error",u);break;case"img":case"image":case"link":_r("error",u),_r("load",u);break;case"details":_r("toggle",u);break;case"input":_r("invalid",u),wr(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":_r("invalid",u);break;case"textarea":_r("invalid",u),Fe(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||O9(u.textContent,f)?(g.popover!=null&&(_r("beforetoggle",u),_r("toggle",u)),g.onScroll!=null&&_r("scroll",u),g.onScrollEnd!=null&&_r("scrollend",u),g.onClick!=null&&(u.onclick=Zn),u=!0):u=!1,u||kc(l,!0)}function mk(l){for(si=l.return;si;)switch(si.tag){case 5:case 31:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:si=si.return}}function L0(l){if(l!==si)return!1;if(!Rr)return mk(l),Rr=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||T5(l.type,l.memoizedProps)),f=!f),f&&Dn&&kc(l),mk(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Dn=U9(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Dn=U9(l)}else u===27?(u=Dn,Fc(l.type)?(l=C5,C5=null,Dn=l):Dn=u):Dn=si?Fs(l.stateNode.nextSibling):null;return!0}function ad(){Dn=si=null,Rr=!1}function l4(){var l=Ec;return l!==null&&(Gi===null?Gi=l:Gi.push.apply(Gi,l),Ec=null),l}function cp(l){Ec===null?Ec=[l]:Ec.push(l)}var c4=Y(null),id=null,xl=null;function Cc(l,u,f){re(c4,u._currentValue),u._currentValue=f}function vl(l){l._currentValue=c4.current,ne(c4)}function u4(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function d4(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var N=b.dependencies;if(N!==null){var V=b.child;N=N.firstContext;e:for(;N!==null;){var X=N;N=b;for(var de=0;de<u.length;de++)if(X.context===u[de]){N.lanes|=f,X=N.alternate,X!==null&&(X.lanes|=f),u4(N.return,f,l),g||(V=null);break e}N=X.next}}else if(b.tag===18){if(V=b.return,V===null)throw Error(n(341));V.lanes|=f,N=V.alternate,N!==null&&(N.lanes|=f),u4(V,f,l),V=null}else V=b.child;if(V!==null)V.return=b;else for(V=b;V!==null;){if(V===l){V=null;break}if(b=V.sibling,b!==null){b.return=V.return,V=b;break}V=V.return}b=V}}function B0(l,u,f,g){l=null;for(var b=u,N=!1;b!==null;){if(!N){if((b.flags&524288)!==0)N=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var V=b.alternate;if(V===null)throw Error(n(387));if(V=V.memoizedProps,V!==null){var X=b.type;ms(b.pendingProps.value,V.value)||(l!==null?l.push(X):l=[X])}}else if(b===Je.current){if(V=b.alternate,V===null)throw Error(n(387));V.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Dp):l=[Dp])}b=b.return}l!==null&&d4(u,l,f,g),u.flags|=262144}function uy(l){for(l=l.firstContext;l!==null;){if(!ms(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function sd(l){id=l,xl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function oi(l){return gk(id,l)}function dy(l,u){return id===null&&sd(l),gk(l,u)}function gk(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},xl===null){if(l===null)throw Error(n(308));xl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else xl=xl.next=u;return f}var uY=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},dY=t.unstable_scheduleCallback,hY=t.unstable_NormalPriority,Sa={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function h4(){return{controller:new uY,data:new Map,refCount:0}}function up(l){l.refCount--,l.refCount===0&&dY(hY,function(){l.controller.abort()})}var dp=null,f4=0,$0=0,U0=null;function fY(l,u){if(dp===null){var f=dp=[];f4=0,$0=g5(),U0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return f4++,u.then(yk,yk),u}function yk(){if(--f4===0&&dp!==null){U0!==null&&(U0.status="fulfilled");var l=dp;dp=null,$0=0,U0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function pY(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var xk=H.S;H.S=function(l,u){t9=Ue(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&fY(l,u),xk!==null&&xk(l,u)};var od=Y(null);function p4(){var l=od.current;return l!==null?l:Tn.pooledCache}function hy(l,u){u===null?re(od,od.current):re(od,u.pool)}function vk(){var l=p4();return l===null?null:{parent:Sa._currentValue,pool:l}}var z0=Error(n(460)),m4=Error(n(474)),fy=Error(n(542)),py={then:function(){}};function bk(l){return l=l.status,l==="fulfilled"||l==="rejected"}function wk(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(Zn,Zn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,_k(l),l;default:if(typeof u.status=="string")u.then(Zn,Zn);else{if(l=Tn,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,_k(l),l}throw cd=u,z0}}function ld(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(cd=f,z0):f}}var cd=null;function Sk(){if(cd===null)throw Error(n(459));var l=cd;return cd=null,l}function _k(l){if(l===z0||l===fy)throw Error(n(483))}var V0=null,hp=0;function my(l){var u=hp;return hp+=1,V0===null&&(V0=[]),wk(V0,l,u)}function fp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function gy(l,u){throw u.$$typeof===y?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Nk(l){function u(we,me){if(l){var Ee=we.deletions;Ee===null?(we.deletions=[me],we.flags|=16):Ee.push(me)}}function f(we,me){if(!l)return null;for(;me!==null;)u(we,me),me=me.sibling;return null}function g(we){for(var me=new Map;we!==null;)we.key!==null?me.set(we.key,we):me.set(we.index,we),we=we.sibling;return me}function b(we,me){return we=gl(we,me),we.index=0,we.sibling=null,we}function N(we,me,Ee){return we.index=Ee,l?(Ee=we.alternate,Ee!==null?(Ee=Ee.index,Ee<me?(we.flags|=67108866,me):Ee):(we.flags|=67108866,me)):(we.flags|=1048576,me)}function V(we){return l&&we.alternate===null&&(we.flags|=67108866),we}function X(we,me,Ee,Ke){return me===null||me.tag!==6?(me=n4(Ee,we.mode,Ke),me.return=we,me):(me=b(me,Ee),me.return=we,me)}function de(we,me,Ee,Ke){var Vt=Ee.type;return Vt===S?Ge(we,me,Ee.props.children,Ke,Ee.key):me!==null&&(me.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===j&&ld(Vt)===me.type)?(me=b(me,Ee.props),fp(me,Ee),me.return=we,me):(me=ly(Ee.type,Ee.key,Ee.props,null,we.mode,Ke),fp(me,Ee),me.return=we,me)}function Ce(we,me,Ee,Ke){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ee.containerInfo||me.stateNode.implementation!==Ee.implementation?(me=a4(Ee,we.mode,Ke),me.return=we,me):(me=b(me,Ee.children||[]),me.return=we,me)}function Ge(we,me,Ee,Ke,Vt){return me===null||me.tag!==7?(me=nd(Ee,we.mode,Ke,Vt),me.return=we,me):(me=b(me,Ee),me.return=we,me)}function Ye(we,me,Ee){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=n4(""+me,we.mode,Ee),me.return=we,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case x:return Ee=ly(me.type,me.key,me.props,null,we.mode,Ee),fp(Ee,me),Ee.return=we,Ee;case _:return me=a4(me,we.mode,Ee),me.return=we,me;case j:return me=ld(me),Ye(we,me,Ee)}if(K(me)||$(me))return me=nd(me,we.mode,Ee,null),me.return=we,me;if(typeof me.then=="function")return Ye(we,my(me),Ee);if(me.$$typeof===R)return Ye(we,dy(we,me),Ee);gy(we,me)}return null}function De(we,me,Ee,Ke){var Vt=me!==null?me.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Vt!==null?null:X(we,me,""+Ee,Ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case x:return Ee.key===Vt?de(we,me,Ee,Ke):null;case _:return Ee.key===Vt?Ce(we,me,Ee,Ke):null;case j:return Ee=ld(Ee),De(we,me,Ee,Ke)}if(K(Ee)||$(Ee))return Vt!==null?null:Ge(we,me,Ee,Ke,null);if(typeof Ee.then=="function")return De(we,me,my(Ee),Ke);if(Ee.$$typeof===R)return De(we,me,dy(we,Ee),Ke);gy(we,Ee)}return null}function Le(we,me,Ee,Ke,Vt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return we=we.get(Ee)||null,X(me,we,""+Ke,Vt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case x:return we=we.get(Ke.key===null?Ee:Ke.key)||null,de(me,we,Ke,Vt);case _:return we=we.get(Ke.key===null?Ee:Ke.key)||null,Ce(me,we,Ke,Vt);case j:return Ke=ld(Ke),Le(we,me,Ee,Ke,Vt)}if(K(Ke)||$(Ke))return we=we.get(Ee)||null,Ge(me,we,Ke,Vt,null);if(typeof Ke.then=="function")return Le(we,me,Ee,my(Ke),Vt);if(Ke.$$typeof===R)return Le(we,me,Ee,dy(me,Ke),Vt);gy(me,Ke)}return null}function Ct(we,me,Ee,Ke){for(var Vt=null,zr=null,Pt=me,fr=me=0,Ar=null;Pt!==null&&fr<Ee.length;fr++){Pt.index>fr?(Ar=Pt,Pt=null):Ar=Pt.sibling;var Vr=De(we,Pt,Ee[fr],Ke);if(Vr===null){Pt===null&&(Pt=Ar);break}l&&Pt&&Vr.alternate===null&&u(we,Pt),me=N(Vr,me,fr),zr===null?Vt=Vr:zr.sibling=Vr,zr=Vr,Pt=Ar}if(fr===Ee.length)return f(we,Pt),Rr&&yl(we,fr),Vt;if(Pt===null){for(;fr<Ee.length;fr++)Pt=Ye(we,Ee[fr],Ke),Pt!==null&&(me=N(Pt,me,fr),zr===null?Vt=Pt:zr.sibling=Pt,zr=Pt);return Rr&&yl(we,fr),Vt}for(Pt=g(Pt);fr<Ee.length;fr++)Ar=Le(Pt,we,fr,Ee[fr],Ke),Ar!==null&&(l&&Ar.alternate!==null&&Pt.delete(Ar.key===null?fr:Ar.key),me=N(Ar,me,fr),zr===null?Vt=Ar:zr.sibling=Ar,zr=Ar);return l&&Pt.forEach(function(Kc){return u(we,Kc)}),Rr&&yl(we,fr),Vt}function Wt(we,me,Ee,Ke){if(Ee==null)throw Error(n(151));for(var Vt=null,zr=null,Pt=me,fr=me=0,Ar=null,Vr=Ee.next();Pt!==null&&!Vr.done;fr++,Vr=Ee.next()){Pt.index>fr?(Ar=Pt,Pt=null):Ar=Pt.sibling;var Kc=De(we,Pt,Vr.value,Ke);if(Kc===null){Pt===null&&(Pt=Ar);break}l&&Pt&&Kc.alternate===null&&u(we,Pt),me=N(Kc,me,fr),zr===null?Vt=Kc:zr.sibling=Kc,zr=Kc,Pt=Ar}if(Vr.done)return f(we,Pt),Rr&&yl(we,fr),Vt;if(Pt===null){for(;!Vr.done;fr++,Vr=Ee.next())Vr=Ye(we,Vr.value,Ke),Vr!==null&&(me=N(Vr,me,fr),zr===null?Vt=Vr:zr.sibling=Vr,zr=Vr);return Rr&&yl(we,fr),Vt}for(Pt=g(Pt);!Vr.done;fr++,Vr=Ee.next())Vr=Le(Pt,we,fr,Vr.value,Ke),Vr!==null&&(l&&Vr.alternate!==null&&Pt.delete(Vr.key===null?fr:Vr.key),me=N(Vr,me,fr),zr===null?Vt=Vr:zr.sibling=Vr,zr=Vr);return l&&Pt.forEach(function(TZ){return u(we,TZ)}),Rr&&yl(we,fr),Vt}function vn(we,me,Ee,Ke){if(typeof Ee=="object"&&Ee!==null&&Ee.type===S&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case x:e:{for(var Vt=Ee.key;me!==null;){if(me.key===Vt){if(Vt=Ee.type,Vt===S){if(me.tag===7){f(we,me.sibling),Ke=b(me,Ee.props.children),Ke.return=we,we=Ke;break e}}else if(me.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===j&&ld(Vt)===me.type){f(we,me.sibling),Ke=b(me,Ee.props),fp(Ke,Ee),Ke.return=we,we=Ke;break e}f(we,me);break}else u(we,me);me=me.sibling}Ee.type===S?(Ke=nd(Ee.props.children,we.mode,Ke,Ee.key),Ke.return=we,we=Ke):(Ke=ly(Ee.type,Ee.key,Ee.props,null,we.mode,Ke),fp(Ke,Ee),Ke.return=we,we=Ke)}return V(we);case _:e:{for(Vt=Ee.key;me!==null;){if(me.key===Vt)if(me.tag===4&&me.stateNode.containerInfo===Ee.containerInfo&&me.stateNode.implementation===Ee.implementation){f(we,me.sibling),Ke=b(me,Ee.children||[]),Ke.return=we,we=Ke;break e}else{f(we,me);break}else u(we,me);me=me.sibling}Ke=a4(Ee,we.mode,Ke),Ke.return=we,we=Ke}return V(we);case j:return Ee=ld(Ee),vn(we,me,Ee,Ke)}if(K(Ee))return Ct(we,me,Ee,Ke);if($(Ee)){if(Vt=$(Ee),typeof Vt!="function")throw Error(n(150));return Ee=Vt.call(Ee),Wt(we,me,Ee,Ke)}if(typeof Ee.then=="function")return vn(we,me,my(Ee),Ke);if(Ee.$$typeof===R)return vn(we,me,dy(we,Ee),Ke);gy(we,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,me!==null&&me.tag===6?(f(we,me.sibling),Ke=b(me,Ee),Ke.return=we,we=Ke):(f(we,me),Ke=n4(Ee,we.mode,Ke),Ke.return=we,we=Ke),V(we)):f(we,me)}return function(we,me,Ee,Ke){try{hp=0;var Vt=vn(we,me,Ee,Ke);return V0=null,Vt}catch(Pt){if(Pt===z0||Pt===fy)throw Pt;var zr=gs(29,Pt,null,we.mode);return zr.lanes=Ke,zr.return=we,zr}finally{}}}var ud=Nk(!0),Tk=Nk(!1),Oc=!1;function g4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function y4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ic(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Rc(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(Qr&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=oy(l),lk(l,null,f),u}return sy(l,g,u,f),oy(l)}function pp(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,fn(l,f)}}function x4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var V={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};N===null?b=N=V:N=N.next=V,f=f.next}while(f!==null);N===null?b=N=u:N=N.next=u}else b=N=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var v4=!1;function mp(){if(v4){var l=U0;if(l!==null)throw l}}function gp(l,u,f,g){v4=!1;var b=l.updateQueue;Oc=!1;var N=b.firstBaseUpdate,V=b.lastBaseUpdate,X=b.shared.pending;if(X!==null){b.shared.pending=null;var de=X,Ce=de.next;de.next=null,V===null?N=Ce:V.next=Ce,V=de;var Ge=l.alternate;Ge!==null&&(Ge=Ge.updateQueue,X=Ge.lastBaseUpdate,X!==V&&(X===null?Ge.firstBaseUpdate=Ce:X.next=Ce,Ge.lastBaseUpdate=de))}if(N!==null){var Ye=b.baseState;V=0,Ge=Ce=de=null,X=N;do{var De=X.lane&-536870913,Le=De!==X.lane;if(Le?(Tr&De)===De:(g&De)===De){De!==0&&De===$0&&(v4=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var Ct=l,Wt=X;De=u;var vn=f;switch(Wt.tag){case 1:if(Ct=Wt.payload,typeof Ct=="function"){Ye=Ct.call(vn,Ye,De);break e}Ye=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Wt.payload,De=typeof Ct=="function"?Ct.call(vn,Ye,De):Ct,De==null)break e;Ye=m({},Ye,De);break e;case 2:Oc=!0}}De=X.callback,De!==null&&(l.flags|=64,Le&&(l.flags|=8192),Le=b.callbacks,Le===null?b.callbacks=[De]:Le.push(De))}else Le={lane:De,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Ge===null?(Ce=Ge=Le,de=Ye):Ge=Ge.next=Le,V|=De;if(X=X.next,X===null){if(X=b.shared.pending,X===null)break;Le=X,X=Le.next,Le.next=null,b.lastBaseUpdate=Le,b.shared.pending=null}}while(!0);Ge===null&&(de=Ye),b.baseState=de,b.firstBaseUpdate=Ce,b.lastBaseUpdate=Ge,N===null&&(b.shared.lanes=0),Bc|=V,l.lanes=V,l.memoizedState=Ye}}function Ak(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function jk(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)Ak(f[l],u)}var F0=Y(null),yy=Y(0);function Ek(l,u){l=El,re(yy,l),re(F0,u),El=l|u.baseLanes}function b4(){re(yy,El),re(F0,F0.current)}function w4(){El=yy.current,ne(F0),ne(yy)}var ys=Y(null),Vs=null;function Mc(l){var u=l.alternate;re(la,la.current&1),re(ys,l),Vs===null&&(u===null||F0.current!==null||u.memoizedState!==null)&&(Vs=l)}function S4(l){re(la,la.current),re(ys,l),Vs===null&&(Vs=l)}function kk(l){l.tag===22?(re(la,la.current),re(ys,l),Vs===null&&(Vs=l)):Pc()}function Pc(){re(la,la.current),re(ys,ys.current)}function xs(l){ne(ys),Vs===l&&(Vs=null),ne(la)}var la=Y(0);function xy(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||E5(f)||k5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var bl=0,dr=null,yn=null,_a=null,vy=!1,q0=!1,dd=!1,by=0,yp=0,H0=null,mY=0;function Jn(){throw Error(n(321))}function _4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!ms(l[f],u[f]))return!1;return!0}function N4(l,u,f,g,b,N){return bl=N,dr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?hC:$4,dd=!1,N=f(g,b),dd=!1,q0&&(N=Ok(u,f,g,b)),Ck(l),N}function Ck(l){H.H=bp;var u=yn!==null&&yn.next!==null;if(bl=0,_a=yn=dr=null,vy=!1,yp=0,H0=null,u)throw Error(n(300));l===null||Na||(l=l.dependencies,l!==null&&uy(l)&&(Na=!0))}function Ok(l,u,f,g){dr=l;var b=0;do{if(q0&&(H0=null),yp=0,q0=!1,25<=b)throw Error(n(301));if(b+=1,_a=yn=null,l.updateQueue!=null){var N=l.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}H.H=fC,N=u(f,g)}while(q0);return N}function gY(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?xp(u):u,l=l.useState()[0],(yn!==null?yn.memoizedState:null)!==l&&(dr.flags|=1024),u}function T4(){var l=by!==0;return by=0,l}function A4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function j4(l){if(vy){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}vy=!1}bl=0,_a=yn=dr=null,q0=!1,yp=by=0,H0=null}function Ci(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _a===null?dr.memoizedState=_a=l:_a=_a.next=l,_a}function ca(){if(yn===null){var l=dr.alternate;l=l!==null?l.memoizedState:null}else l=yn.next;var u=_a===null?dr.memoizedState:_a.next;if(u!==null)_a=u,yn=l;else{if(l===null)throw dr.alternate===null?Error(n(467)):Error(n(310));yn=l,l={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},_a===null?dr.memoizedState=_a=l:_a=_a.next=l}return _a}function wy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xp(l){var u=yp;return yp+=1,H0===null&&(H0=[]),l=wk(H0,l,u),u=dr,(_a===null?u.memoizedState:_a.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?hC:$4),l}function Sy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return xp(l);if(l.$$typeof===R)return oi(l)}throw Error(n(438,String(l)))}function E4(l){var u=null,f=dr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=dr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=wy(),dr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=z;return u.index++,f}function wl(l,u){return typeof u=="function"?u(l):u}function _y(l){var u=ca();return k4(u,yn,l)}function k4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,N=g.pending;if(N!==null){if(b!==null){var V=b.next;b.next=N.next,N.next=V}u.baseQueue=b=N,g.pending=null}if(N=l.baseState,b===null)l.memoizedState=N;else{u=b.next;var X=V=null,de=null,Ce=u,Ge=!1;do{var Ye=Ce.lane&-536870913;if(Ye!==Ce.lane?(Tr&Ye)===Ye:(bl&Ye)===Ye){var De=Ce.revertLane;if(De===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),Ye===$0&&(Ge=!0);else if((bl&De)===De){Ce=Ce.next,De===$0&&(Ge=!0);continue}else Ye={lane:0,revertLane:Ce.revertLane,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},de===null?(X=de=Ye,V=N):de=de.next=Ye,dr.lanes|=De,Bc|=De;Ye=Ce.action,dd&&f(N,Ye),N=Ce.hasEagerState?Ce.eagerState:f(N,Ye)}else De={lane:Ye,revertLane:Ce.revertLane,gesture:Ce.gesture,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},de===null?(X=de=De,V=N):de=de.next=De,dr.lanes|=Ye,Bc|=Ye;Ce=Ce.next}while(Ce!==null&&Ce!==u);if(de===null?V=N:de.next=X,!ms(N,l.memoizedState)&&(Na=!0,Ge&&(f=U0,f!==null)))throw f;l.memoizedState=N,l.baseState=V,l.baseQueue=de,g.lastRenderedState=N}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function C4(l){var u=ca(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,N=u.memoizedState;if(b!==null){f.pending=null;var V=b=b.next;do N=l(N,V.action),V=V.next;while(V!==b);ms(N,u.memoizedState)||(Na=!0),u.memoizedState=N,u.baseQueue===null&&(u.baseState=N),f.lastRenderedState=N}return[N,g]}function Ik(l,u,f){var g=dr,b=ca(),N=Rr;if(N){if(f===void 0)throw Error(n(407));f=f()}else f=u();var V=!ms((yn||b).memoizedState,f);if(V&&(b.memoizedState=f,Na=!0),b=b.queue,R4(Pk.bind(null,g,b,l),[l]),b.getSnapshot!==u||V||_a!==null&&_a.memoizedState.tag&1){if(g.flags|=2048,G0(9,{destroy:void 0},Mk.bind(null,g,b,f,u),null),Tn===null)throw Error(n(349));N||(bl&127)!==0||Rk(g,u,f)}return f}function Rk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=dr.updateQueue,u===null?(u=wy(),dr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function Mk(l,u,f,g){u.value=f,u.getSnapshot=g,Dk(u)&&Lk(l)}function Pk(l,u,f){return f(function(){Dk(u)&&Lk(l)})}function Dk(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!ms(l,f)}catch{return!0}}function Lk(l){var u=rd(l,2);u!==null&&Wi(u,l,2)}function O4(l){var u=Ci();if(typeof l=="function"){var f=l;if(l=f(),dd){$t(!0);try{f()}finally{$t(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:l},u}function Bk(l,u,f,g){return l.baseState=f,k4(l,yn,typeof g=="function"?g:wl)}function yY(l,u,f,g,b){if(Ay(l))throw Error(n(485));if(l=u.action,l!==null){var N={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){N.listeners.push(V)}};H.T!==null?f(!0):N.isTransition=!1,g(N),f=u.pending,f===null?(N.next=u.pending=N,$k(u,N)):(N.next=f.next,u.pending=f.next=N)}}function $k(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var N=H.T,V={};H.T=V;try{var X=f(b,g),de=H.S;de!==null&&de(V,X),Uk(l,u,X)}catch(Ce){I4(l,u,Ce)}finally{N!==null&&V.types!==null&&(N.types=V.types),H.T=N}}else try{N=f(b,g),Uk(l,u,N)}catch(Ce){I4(l,u,Ce)}}function Uk(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){zk(l,u,g)},function(g){return I4(l,u,g)}):zk(l,u,f)}function zk(l,u,f){u.status="fulfilled",u.value=f,Vk(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,$k(l,f)))}function I4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,Vk(u),u=u.next;while(u!==g)}l.action=null}function Vk(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Fk(l,u){return u}function qk(l,u){if(Rr){var f=Tn.formState;if(f!==null){e:{var g=dr;if(Rr){if(Dn){t:{for(var b=Dn,N=zs;b.nodeType!==8;){if(!N){b=null;break t}if(b=Fs(b.nextSibling),b===null){b=null;break t}}N=b.data,b=N==="F!"||N==="F"?b:null}if(b){Dn=Fs(b.nextSibling),g=b.data==="F!";break e}}kc(g)}g=!1}g&&(u=f[0])}}return f=Ci(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fk,lastRenderedState:u},f.queue=g,f=cC.bind(null,dr,g),g.dispatch=f,g=O4(!1),N=B4.bind(null,dr,!1,g.queue),g=Ci(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=yY.bind(null,dr,b,N,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function Hk(l){var u=ca();return Gk(u,yn,l)}function Gk(l,u,f){if(u=k4(l,u,Fk)[0],l=_y(wl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=xp(u)}catch(V){throw V===z0?fy:V}else g=u;u=ca();var b=u.queue,N=b.dispatch;return f!==u.memoizedState&&(dr.flags|=2048,G0(9,{destroy:void 0},xY.bind(null,b,f),null)),[g,N,l]}function xY(l,u){l.action=u}function Wk(l){var u=ca(),f=yn;if(f!==null)return Gk(u,f,l);ca(),u=u.memoizedState,f=ca();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function G0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=dr.updateQueue,u===null&&(u=wy(),dr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function Kk(){return ca().memoizedState}function Ny(l,u,f,g){var b=Ci();dr.flags|=l,b.memoizedState=G0(1|u,{destroy:void 0},f,g===void 0?null:g)}function Ty(l,u,f,g){var b=ca();g=g===void 0?null:g;var N=b.memoizedState.inst;yn!==null&&g!==null&&_4(g,yn.memoizedState.deps)?b.memoizedState=G0(u,N,f,g):(dr.flags|=l,b.memoizedState=G0(1|u,N,f,g))}function Qk(l,u){Ny(8390656,8,l,u)}function R4(l,u){Ty(2048,8,l,u)}function vY(l){dr.flags|=4;var u=dr.updateQueue;if(u===null)u=wy(),dr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function Xk(l){var u=ca().memoizedState;return vY({ref:u,nextImpl:l}),function(){if((Qr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function Yk(l,u){return Ty(4,2,l,u)}function Zk(l,u){return Ty(4,4,l,u)}function Jk(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function eC(l,u,f){f=f!=null?f.concat([l]):null,Ty(4,4,Jk.bind(null,u,l),f)}function M4(){}function tC(l,u){var f=ca();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&_4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function rC(l,u){var f=ca();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&_4(u,g[1]))return g[0];if(g=l(),dd){$t(!0);try{l()}finally{$t(!1)}}return f.memoizedState=[g,u],g}function P4(l,u,f){return f===void 0||(bl&1073741824)!==0&&(Tr&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=n9(),dr.lanes|=l,Bc|=l,f)}function nC(l,u,f,g){return ms(f,u)?f:F0.current!==null?(l=P4(l,f,g),ms(l,u)||(Na=!0),l):(bl&42)===0||(bl&1073741824)!==0&&(Tr&261930)===0?(Na=!0,l.memoizedState=f):(l=n9(),dr.lanes|=l,Bc|=l,u)}function aC(l,u,f,g,b){var N=J.p;J.p=N!==0&&8>N?N:8;var V=H.T,X={};H.T=X,B4(l,!1,u,f);try{var de=b(),Ce=H.S;if(Ce!==null&&Ce(X,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var Ge=pY(de,g);vp(l,u,Ge,ws(l))}else vp(l,u,g,ws(l))}catch(Ye){vp(l,u,{then:function(){},status:"rejected",reason:Ye},ws())}finally{J.p=N,V!==null&&X.types!==null&&(V.types=X.types),H.T=V}}function bY(){}function D4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=iC(l).queue;aC(l,b,u,ae,f===null?bY:function(){return sC(l),f(g)})}function iC(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:ae},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function sC(l){var u=iC(l);u.next===null&&(u=l.alternate.memoizedState),vp(l,u.next.queue,{},ws())}function L4(){return oi(Dp)}function oC(){return ca().memoizedState}function lC(){return ca().memoizedState}function wY(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=ws();l=Ic(f);var g=Rc(u,l,f);g!==null&&(Wi(g,u,f),pp(g,u,f)),u={cache:h4()},l.payload=u;return}u=u.return}}function SY(l,u,f){var g=ws();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ay(l)?uC(u,f):(f=t4(l,u,f,g),f!==null&&(Wi(f,l,g),dC(f,u,g)))}function cC(l,u,f){var g=ws();vp(l,u,f,g)}function vp(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ay(l))uC(u,b);else{var N=l.alternate;if(l.lanes===0&&(N===null||N.lanes===0)&&(N=u.lastRenderedReducer,N!==null))try{var V=u.lastRenderedState,X=N(V,f);if(b.hasEagerState=!0,b.eagerState=X,ms(X,V))return sy(l,u,b,0),Tn===null&&iy(),!1}catch{}finally{}if(f=t4(l,u,b,g),f!==null)return Wi(f,l,g),dC(f,u,g),!0}return!1}function B4(l,u,f,g){if(g={lane:2,revertLane:g5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ay(l)){if(u)throw Error(n(479))}else u=t4(l,f,g,2),u!==null&&Wi(u,l,2)}function Ay(l){var u=l.alternate;return l===dr||u!==null&&u===dr}function uC(l,u){q0=vy=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function dC(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,fn(l,f)}}var bp={readContext:oi,use:Sy,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn,useHostTransitionStatus:Jn,useFormState:Jn,useActionState:Jn,useOptimistic:Jn,useMemoCache:Jn,useCacheRefresh:Jn};bp.useEffectEvent=Jn;var hC={readContext:oi,use:Sy,useCallback:function(l,u){return Ci().memoizedState=[l,u===void 0?null:u],l},useContext:oi,useEffect:Qk,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,Ny(4194308,4,Jk.bind(null,u,l),f)},useLayoutEffect:function(l,u){return Ny(4194308,4,l,u)},useInsertionEffect:function(l,u){Ny(4,2,l,u)},useMemo:function(l,u){var f=Ci();u=u===void 0?null:u;var g=l();if(dd){$t(!0);try{l()}finally{$t(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Ci();if(f!==void 0){var b=f(u);if(dd){$t(!0);try{f(u)}finally{$t(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=SY.bind(null,dr,l),[g.memoizedState,l]},useRef:function(l){var u=Ci();return l={current:l},u.memoizedState=l},useState:function(l){l=O4(l);var u=l.queue,f=cC.bind(null,dr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:M4,useDeferredValue:function(l,u){var f=Ci();return P4(f,l,u)},useTransition:function(){var l=O4(!1);return l=aC.bind(null,dr,l.queue,!0,!1),Ci().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=dr,b=Ci();if(Rr){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),Tn===null)throw Error(n(349));(Tr&127)!==0||Rk(g,u,f)}b.memoizedState=f;var N={value:f,getSnapshot:u};return b.queue=N,Qk(Pk.bind(null,g,N,l),[l]),g.flags|=2048,G0(9,{destroy:void 0},Mk.bind(null,g,N,f,u),null),f},useId:function(){var l=Ci(),u=Tn.identifierPrefix;if(Rr){var f=Do,g=Po;f=(g&~(1<<32-tt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=by++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=mY++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:L4,useFormState:qk,useActionState:qk,useOptimistic:function(l){var u=Ci();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=B4.bind(null,dr,!0,f),f.dispatch=u,[l,u]},useMemoCache:E4,useCacheRefresh:function(){return Ci().memoizedState=wY.bind(null,dr)},useEffectEvent:function(l){var u=Ci(),f={impl:l};return u.memoizedState=f,function(){if((Qr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},$4={readContext:oi,use:Sy,useCallback:tC,useContext:oi,useEffect:R4,useImperativeHandle:eC,useInsertionEffect:Yk,useLayoutEffect:Zk,useMemo:rC,useReducer:_y,useRef:Kk,useState:function(){return _y(wl)},useDebugValue:M4,useDeferredValue:function(l,u){var f=ca();return nC(f,yn.memoizedState,l,u)},useTransition:function(){var l=_y(wl)[0],u=ca().memoizedState;return[typeof l=="boolean"?l:xp(l),u]},useSyncExternalStore:Ik,useId:oC,useHostTransitionStatus:L4,useFormState:Hk,useActionState:Hk,useOptimistic:function(l,u){var f=ca();return Bk(f,yn,l,u)},useMemoCache:E4,useCacheRefresh:lC};$4.useEffectEvent=Xk;var fC={readContext:oi,use:Sy,useCallback:tC,useContext:oi,useEffect:R4,useImperativeHandle:eC,useInsertionEffect:Yk,useLayoutEffect:Zk,useMemo:rC,useReducer:C4,useRef:Kk,useState:function(){return C4(wl)},useDebugValue:M4,useDeferredValue:function(l,u){var f=ca();return yn===null?P4(f,l,u):nC(f,yn.memoizedState,l,u)},useTransition:function(){var l=C4(wl)[0],u=ca().memoizedState;return[typeof l=="boolean"?l:xp(l),u]},useSyncExternalStore:Ik,useId:oC,useHostTransitionStatus:L4,useFormState:Wk,useActionState:Wk,useOptimistic:function(l,u){var f=ca();return yn!==null?Bk(f,yn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:E4,useCacheRefresh:lC};fC.useEffectEvent=Xk;function U4(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var z4={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=ws(),b=Ic(g);b.payload=u,f!=null&&(b.callback=f),u=Rc(l,b,g),u!==null&&(Wi(u,l,g),pp(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=ws(),b=Ic(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=Rc(l,b,g),u!==null&&(Wi(u,l,g),pp(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=ws(),g=Ic(f);g.tag=2,u!=null&&(g.callback=u),u=Rc(l,g,f),u!==null&&(Wi(u,l,f),pp(u,l,f))}};function pC(l,u,f,g,b,N,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,N,V):u.prototype&&u.prototype.isPureReactComponent?!sp(f,g)||!sp(b,N):!0}function mC(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&z4.enqueueReplaceState(u,u.state,null)}function hd(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function gC(l){ay(l)}function yC(l){console.error(l)}function xC(l){ay(l)}function jy(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function vC(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function V4(l,u,f){return f=Ic(f),f.tag=3,f.payload={element:null},f.callback=function(){jy(l,u)},f}function bC(l){return l=Ic(l),l.tag=3,l}function wC(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var N=g.value;l.payload=function(){return b(N)},l.callback=function(){vC(u,f,g)}}var V=f.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){vC(u,f,g),typeof b!="function"&&($c===null?$c=new Set([this]):$c.add(this));var X=g.stack;this.componentDidCatch(g.value,{componentStack:X!==null?X:""})})}function _Y(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&B0(u,f,b,!0),f=ys.current,f!==null){switch(f.tag){case 31:case 13:return Vs===null?$y():f.alternate===null&&ea===0&&(ea=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===py?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),f5(l,g,b)),!1;case 22:return f.flags|=65536,g===py?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),f5(l,g,b)),!1}throw Error(n(435,f.tag))}return f5(l,g,b),$y(),!1}if(Rr)return u=ys.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==o4&&(l=Error(n(422),{cause:g}),cp(Bs(l,f)))):(g!==o4&&(u=Error(n(423),{cause:g}),cp(Bs(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Bs(g,f),b=V4(l.stateNode,g,b),x4(l,b),ea!==4&&(ea=2)),!1;var N=Error(n(520),{cause:g});if(N=Bs(N,f),Ep===null?Ep=[N]:Ep.push(N),ea!==4&&(ea=2),u===null)return!0;g=Bs(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=V4(f.stateNode,g,l),x4(f,l),!1;case 1:if(u=f.type,N=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&($c===null||!$c.has(N))))return f.flags|=65536,b&=-b,f.lanes|=b,b=bC(b),wC(b,l,f,g),x4(f,b),!1}f=f.return}while(f!==null);return!1}var F4=Error(n(461)),Na=!1;function li(l,u,f,g){u.child=l===null?Tk(u,null,f,g):ud(u,l.child,f,g)}function SC(l,u,f,g,b){f=f.render;var N=u.ref;if("ref"in g){var V={};for(var X in g)X!=="ref"&&(V[X]=g[X])}else V=g;return sd(u),g=N4(l,u,f,V,N,b),X=T4(),l!==null&&!Na?(A4(l,u,b),Sl(l,u,b)):(Rr&&X&&i4(u),u.flags|=1,li(l,u,g,b),u.child)}function _C(l,u,f,g,b){if(l===null){var N=f.type;return typeof N=="function"&&!r4(N)&&N.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=N,NC(l,u,N,g,b)):(l=ly(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(N=l.child,!Y4(l,b)){var V=N.memoizedProps;if(f=f.compare,f=f!==null?f:sp,f(V,g)&&l.ref===u.ref)return Sl(l,u,b)}return u.flags|=1,l=gl(N,g),l.ref=u.ref,l.return=u,u.child=l}function NC(l,u,f,g,b){if(l!==null){var N=l.memoizedProps;if(sp(N,g)&&l.ref===u.ref)if(Na=!1,u.pendingProps=g=N,Y4(l,b))(l.flags&131072)!==0&&(Na=!0);else return u.lanes=l.lanes,Sl(l,u,b)}return q4(l,u,f,g,b)}function TC(l,u,f,g){var b=g.children,N=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(N=N!==null?N.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~N}else g=0,u.child=null;return AC(l,u,N,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&hy(u,N!==null?N.cachePool:null),N!==null?Ek(u,N):b4(),kk(u);else return g=u.lanes=536870912,AC(l,u,N!==null?N.baseLanes|f:f,f,g)}else N!==null?(hy(u,N.cachePool),Ek(u,N),Pc(),u.memoizedState=null):(l!==null&&hy(u,null),b4(),Pc());return li(l,u,b,f),u.child}function wp(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function AC(l,u,f,g,b){var N=p4();return N=N===null?null:{parent:Sa._currentValue,pool:N},u.memoizedState={baseLanes:f,cachePool:N},l!==null&&hy(u,null),b4(),kk(u),l!==null&&B0(l,u,g,!0),u.childLanes=b,null}function Ey(l,u){return u=Cy({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function jC(l,u,f){return ud(u,l.child,null,f),l=Ey(u,u.pendingProps),l.flags|=2,xs(u),u.memoizedState=null,l}function NY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Rr){if(g.mode==="hidden")return l=Ey(u,g),u.lanes=536870912,wp(null,l);if(S4(u),(l=Dn)?(l=$9(l,zs),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:jc!==null?{id:Po,overflow:Do}:null,retryLane:536870912,hydrationErrors:null},f=uk(l),f.return=u,u.child=f,si=u,Dn=null)):l=null,l===null)throw kc(u);return u.lanes=536870912,null}return Ey(u,g)}var N=l.memoizedState;if(N!==null){var V=N.dehydrated;if(S4(u),b)if(u.flags&256)u.flags&=-257,u=jC(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(Na||B0(l,u,f,!1),b=(f&l.childLanes)!==0,Na||b){if(g=Tn,g!==null&&(V=kn(g,f),V!==0&&V!==N.retryLane))throw N.retryLane=V,rd(l,V),Wi(g,l,V),F4;$y(),u=jC(l,u,f)}else l=N.treeContext,Dn=Fs(V.nextSibling),si=u,Rr=!0,Ec=null,zs=!1,l!==null&&fk(u,l),u=Ey(u,g),u.flags|=4096;return u}return l=gl(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function ky(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function q4(l,u,f,g,b){return sd(u),f=N4(l,u,f,g,void 0,b),g=T4(),l!==null&&!Na?(A4(l,u,b),Sl(l,u,b)):(Rr&&g&&i4(u),u.flags|=1,li(l,u,f,b),u.child)}function EC(l,u,f,g,b,N){return sd(u),u.updateQueue=null,f=Ok(u,g,f,b),Ck(l),g=T4(),l!==null&&!Na?(A4(l,u,N),Sl(l,u,N)):(Rr&&g&&i4(u),u.flags|=1,li(l,u,f,N),u.child)}function kC(l,u,f,g,b){if(sd(u),u.stateNode===null){var N=M0,V=f.contextType;typeof V=="object"&&V!==null&&(N=oi(V)),N=new f(g,N),u.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=z4,u.stateNode=N,N._reactInternals=u,N=u.stateNode,N.props=g,N.state=u.memoizedState,N.refs={},g4(u),V=f.contextType,N.context=typeof V=="object"&&V!==null?oi(V):M0,N.state=u.memoizedState,V=f.getDerivedStateFromProps,typeof V=="function"&&(U4(u,f,V,g),N.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(V=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),V!==N.state&&z4.enqueueReplaceState(N,N.state,null),gp(u,g,N,b),mp(),N.state=u.memoizedState),typeof N.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){N=u.stateNode;var X=u.memoizedProps,de=hd(f,X);N.props=de;var Ce=N.context,Ge=f.contextType;V=M0,typeof Ge=="object"&&Ge!==null&&(V=oi(Ge));var Ye=f.getDerivedStateFromProps;Ge=typeof Ye=="function"||typeof N.getSnapshotBeforeUpdate=="function",X=u.pendingProps!==X,Ge||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(X||Ce!==V)&&mC(u,N,g,V),Oc=!1;var De=u.memoizedState;N.state=De,gp(u,g,N,b),mp(),Ce=u.memoizedState,X||De!==Ce||Oc?(typeof Ye=="function"&&(U4(u,f,Ye,g),Ce=u.memoizedState),(de=Oc||pC(u,f,de,g,De,Ce,V))?(Ge||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(u.flags|=4194308)):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Ce),N.props=g,N.state=Ce,N.context=V,g=de):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{N=u.stateNode,y4(l,u),V=u.memoizedProps,Ge=hd(f,V),N.props=Ge,Ye=u.pendingProps,De=N.context,Ce=f.contextType,de=M0,typeof Ce=="object"&&Ce!==null&&(de=oi(Ce)),X=f.getDerivedStateFromProps,(Ce=typeof X=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V!==Ye||De!==de)&&mC(u,N,g,de),Oc=!1,De=u.memoizedState,N.state=De,gp(u,g,N,b),mp();var Le=u.memoizedState;V!==Ye||De!==Le||Oc||l!==null&&l.dependencies!==null&&uy(l.dependencies)?(typeof X=="function"&&(U4(u,f,X,g),Le=u.memoizedState),(Ge=Oc||pC(u,f,Ge,g,De,Le,de)||l!==null&&l.dependencies!==null&&uy(l.dependencies))?(Ce||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(g,Le,de),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(g,Le,de)),typeof N.componentDidUpdate=="function"&&(u.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof N.componentDidUpdate!="function"||V===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Le),N.props=g,N.state=Le,N.context=de,g=Ge):(typeof N.componentDidUpdate!="function"||V===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),g=!1)}return N=g,ky(l,u),g=(u.flags&128)!==0,N||g?(N=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:N.render(),u.flags|=1,l!==null&&g?(u.child=ud(u,l.child,null,b),u.child=ud(u,null,f,b)):li(l,u,f,b),u.memoizedState=N.state,l=u.child):l=Sl(l,u,b),l}function CC(l,u,f,g){return ad(),u.flags|=256,li(l,u,f,g),u.child}var H4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function G4(l){return{baseLanes:l,cachePool:vk()}}function W4(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=bs),l}function OC(l,u,f){var g=u.pendingProps,b=!1,N=(u.flags&128)!==0,V;if((V=N)||(V=l!==null&&l.memoizedState===null?!1:(la.current&2)!==0),V&&(b=!0,u.flags&=-129),V=(u.flags&32)!==0,u.flags&=-33,l===null){if(Rr){if(b?Mc(u):Pc(),(l=Dn)?(l=$9(l,zs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:jc!==null?{id:Po,overflow:Do}:null,retryLane:536870912,hydrationErrors:null},f=uk(l),f.return=u,u.child=f,si=u,Dn=null)):l=null,l===null)throw kc(u);return k5(l)?u.lanes=32:u.lanes=536870912,null}var X=g.children;return g=g.fallback,b?(Pc(),b=u.mode,X=Cy({mode:"hidden",children:X},b),g=nd(g,b,f,null),X.return=u,g.return=u,X.sibling=g,u.child=X,g=u.child,g.memoizedState=G4(f),g.childLanes=W4(l,V,f),u.memoizedState=H4,wp(null,g)):(Mc(u),K4(u,X))}var de=l.memoizedState;if(de!==null&&(X=de.dehydrated,X!==null)){if(N)u.flags&256?(Mc(u),u.flags&=-257,u=Q4(l,u,f)):u.memoizedState!==null?(Pc(),u.child=l.child,u.flags|=128,u=null):(Pc(),X=g.fallback,b=u.mode,g=Cy({mode:"visible",children:g.children},b),X=nd(X,b,f,null),X.flags|=2,g.return=u,X.return=u,g.sibling=X,u.child=g,ud(u,l.child,null,f),g=u.child,g.memoizedState=G4(f),g.childLanes=W4(l,V,f),u.memoizedState=H4,u=wp(null,g));else if(Mc(u),k5(X)){if(V=X.nextSibling&&X.nextSibling.dataset,V)var Ce=V.dgst;V=Ce,g=Error(n(419)),g.stack="",g.digest=V,cp({value:g,source:null,stack:null}),u=Q4(l,u,f)}else if(Na||B0(l,u,f,!1),V=(f&l.childLanes)!==0,Na||V){if(V=Tn,V!==null&&(g=kn(V,f),g!==0&&g!==de.retryLane))throw de.retryLane=g,rd(l,g),Wi(V,l,g),F4;E5(X)||$y(),u=Q4(l,u,f)}else E5(X)?(u.flags|=192,u.child=l.child,u=null):(l=de.treeContext,Dn=Fs(X.nextSibling),si=u,Rr=!0,Ec=null,zs=!1,l!==null&&fk(u,l),u=K4(u,g.children),u.flags|=4096);return u}return b?(Pc(),X=g.fallback,b=u.mode,de=l.child,Ce=de.sibling,g=gl(de,{mode:"hidden",children:g.children}),g.subtreeFlags=de.subtreeFlags&65011712,Ce!==null?X=gl(Ce,X):(X=nd(X,b,f,null),X.flags|=2),X.return=u,g.return=u,g.sibling=X,u.child=g,wp(null,g),g=u.child,X=l.child.memoizedState,X===null?X=G4(f):(b=X.cachePool,b!==null?(de=Sa._currentValue,b=b.parent!==de?{parent:de,pool:de}:b):b=vk(),X={baseLanes:X.baseLanes|f,cachePool:b}),g.memoizedState=X,g.childLanes=W4(l,V,f),u.memoizedState=H4,wp(l.child,g)):(Mc(u),f=l.child,l=f.sibling,f=gl(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(V=u.deletions,V===null?(u.deletions=[l],u.flags|=16):V.push(l)),u.child=f,u.memoizedState=null,f)}function K4(l,u){return u=Cy({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Cy(l,u){return l=gs(22,l,null,u),l.lanes=0,l}function Q4(l,u,f){return ud(u,l.child,null,f),l=K4(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function IC(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),u4(l.return,u,f)}function X4(l,u,f,g,b,N){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:N}:(V.isBackwards=u,V.rendering=null,V.renderingStartTime=0,V.last=g,V.tail=f,V.tailMode=b,V.treeForkCount=N)}function RC(l,u,f){var g=u.pendingProps,b=g.revealOrder,N=g.tail;g=g.children;var V=la.current,X=(V&2)!==0;if(X?(V=V&1|2,u.flags|=128):V&=1,re(la,V),li(l,u,g,f),g=Rr?lp:0,!X&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&IC(l,f,u);else if(l.tag===19)IC(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&xy(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),X4(u,!1,b,f,N,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&xy(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}X4(u,!0,f,null,N,g);break;case"together":X4(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function Sl(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Bc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(B0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=gl(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=gl(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function Y4(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&uy(l)))}function TY(l,u,f){switch(u.tag){case 3:Xe(u,u.stateNode.containerInfo),Cc(u,Sa,l.memoizedState.cache),ad();break;case 27:case 5:Be(u);break;case 4:Xe(u,u.stateNode.containerInfo);break;case 10:Cc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,S4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Mc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?OC(l,u,f):(Mc(u),l=Sl(l,u,f),l!==null?l.sibling:null);Mc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(B0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return RC(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),re(la,la.current),g)break;return null;case 22:return u.lanes=0,TC(l,u,f,u.pendingProps);case 24:Cc(u,Sa,l.memoizedState.cache)}return Sl(l,u,f)}function MC(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)Na=!0;else{if(!Y4(l,f)&&(u.flags&128)===0)return Na=!1,TY(l,u,f);Na=(l.flags&131072)!==0}else Na=!1,Rr&&(u.flags&1048576)!==0&&hk(u,lp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=ld(u.elementType),u.type=l,typeof l=="function")r4(l)?(g=hd(l,g),u.tag=1,u=kC(null,u,l,g,f)):(u.tag=0,u=q4(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=SC(null,u,l,g,f);break e}else if(b===A){u.tag=14,u=_C(null,u,l,g,f);break e}}throw u=G(l)||l,Error(n(306,u,""))}}return u;case 0:return q4(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=hd(g,u.pendingProps),kC(l,u,g,b,f);case 3:e:{if(Xe(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var N=u.memoizedState;b=N.element,y4(l,u),gp(u,g,null,f);var V=u.memoizedState;if(g=V.cache,Cc(u,Sa,g),g!==N.cache&&d4(u,[Sa],f,!0),mp(),g=V.element,N.isDehydrated)if(N={element:g,isDehydrated:!1,cache:V.cache},u.updateQueue.baseState=N,u.memoizedState=N,u.flags&256){u=CC(l,u,g,f);break e}else if(g!==b){b=Bs(Error(n(424)),u),cp(b),u=CC(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Dn=Fs(l.firstChild),si=u,Rr=!0,Ec=null,zs=!0,f=Tk(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ad(),g===b){u=Sl(l,u,f);break e}li(l,u,g,f)}u=u.child}return u;case 26:return ky(l,u),l===null?(f=H9(u.type,null,u.pendingProps,null))?u.memoizedState=f:Rr||(f=u.type,l=u.pendingProps,g=Gy(Ve.current).createElement(f),g[Jr]=u,g[mn]=l,ci(g,f,l),hr(g),u.stateNode=g):u.memoizedState=H9(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Be(u),l===null&&Rr&&(g=u.stateNode=V9(u.type,u.pendingProps,Ve.current),si=u,zs=!0,b=Dn,Fc(u.type)?(C5=b,Dn=Fs(g.firstChild)):Dn=b),li(l,u,u.pendingProps.children,f),ky(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Rr&&((b=g=Dn)&&(g=tZ(g,u.type,u.pendingProps,zs),g!==null?(u.stateNode=g,si=u,Dn=Fs(g.firstChild),zs=!1,b=!0):b=!1),b||kc(u)),Be(u),b=u.type,N=u.pendingProps,V=l!==null?l.memoizedProps:null,g=N.children,T5(b,N)?g=null:V!==null&&T5(b,V)&&(u.flags|=32),u.memoizedState!==null&&(b=N4(l,u,gY,null,null,f),Dp._currentValue=b),ky(l,u),li(l,u,g,f),u.child;case 6:return l===null&&Rr&&((l=f=Dn)&&(f=rZ(f,u.pendingProps,zs),f!==null?(u.stateNode=f,si=u,Dn=null,l=!0):l=!1),l||kc(u)),null;case 13:return OC(l,u,f);case 4:return Xe(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=ud(u,null,g,f):li(l,u,g,f),u.child;case 11:return SC(l,u,u.type,u.pendingProps,f);case 7:return li(l,u,u.pendingProps,f),u.child;case 8:return li(l,u,u.pendingProps.children,f),u.child;case 12:return li(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Cc(u,u.type,g.value),li(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,sd(u),b=oi(b),g=g(b),u.flags|=1,li(l,u,g,f),u.child;case 14:return _C(l,u,u.type,u.pendingProps,f);case 15:return NC(l,u,u.type,u.pendingProps,f);case 19:return RC(l,u,f);case 31:return NY(l,u,f);case 22:return TC(l,u,f,u.pendingProps);case 24:return sd(u),g=oi(Sa),l===null?(b=p4(),b===null&&(b=Tn,N=h4(),b.pooledCache=N,N.refCount++,N!==null&&(b.pooledCacheLanes|=f),b=N),u.memoizedState={parent:g,cache:b},g4(u),Cc(u,Sa,b)):((l.lanes&f)!==0&&(y4(l,u),gp(u,null,null,f),mp()),b=l.memoizedState,N=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Cc(u,Sa,g)):(g=N.cache,Cc(u,Sa,g),g!==b.cache&&d4(u,[Sa],f,!0))),li(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function _l(l){l.flags|=4}function Z4(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(o9())l.flags|=8192;else throw cd=py,m4}else l.flags&=-16777217}function PC(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!X9(u))if(o9())l.flags|=8192;else throw cd=py,m4}function Oy(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Wr():536870912,l.lanes|=u,X0|=u)}function Sp(l,u){if(!Rr)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Ln(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function AY(l,u,f){var g=u.pendingProps;switch(s4(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(u),null;case 1:return Ln(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),vl(Sa),ie(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(L0(u)?_l(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,l4())),Ln(u),null;case 26:var b=u.type,N=u.memoizedState;return l===null?(_l(u),N!==null?(Ln(u),PC(u,N)):(Ln(u),Z4(u,b,null,g,f))):N?N!==l.memoizedState?(_l(u),Ln(u),PC(u,N)):(Ln(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&_l(u),Ln(u),Z4(u,b,l,g,f)),null;case 27:if(Q(u),f=Ve.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&_l(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Ln(u),null}l=ye.current,L0(u)?pk(u):(l=V9(b,g,f),u.stateNode=l,_l(u))}return Ln(u),null;case 5:if(Q(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&_l(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Ln(u),null}if(N=ye.current,L0(u))pk(u);else{var V=Gy(Ve.current);switch(N){case 1:N=V.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:N=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":N=V.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":N=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":N=V.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof g.is=="string"?V.createElement("select",{is:g.is}):V.createElement("select"),g.multiple?N.multiple=!0:g.size&&(N.size=g.size);break;default:N=typeof g.is=="string"?V.createElement(b,{is:g.is}):V.createElement(b)}}N[Jr]=u,N[mn]=g;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)N.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=N;e:switch(ci(N,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&_l(u)}}return Ln(u),Z4(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&_l(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=Ve.current,L0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=si,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[Jr]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||O9(l.nodeValue,f)),l||kc(u,!0)}else l=Gy(l).createTextNode(g),l[Jr]=u,u.stateNode=l}return Ln(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=L0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Jr]=u}else ad(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ln(u),l=!1}else f=l4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(xs(u),u):(xs(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Ln(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=L0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Jr]=u}else ad(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ln(u),b=!1}else b=l4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(xs(u),u):(xs(u),null)}return xs(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),N=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(N=g.memoizedState.cachePool.pool),N!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),Oy(u,u.updateQueue),Ln(u),null);case 4:return ie(),l===null&&b5(u.stateNode.containerInfo),Ln(u),null;case 10:return vl(u.type),Ln(u),null;case 19:if(ne(la),g=u.memoizedState,g===null)return Ln(u),null;if(b=(u.flags&128)!==0,N=g.rendering,N===null)if(b)Sp(g,!1);else{if(ea!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(N=xy(l),N!==null){for(u.flags|=128,Sp(g,!1),l=N.updateQueue,u.updateQueue=l,Oy(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)ck(f,l),f=f.sibling;return re(la,la.current&1|2),Rr&&yl(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&Ue()>Dy&&(u.flags|=128,b=!0,Sp(g,!1),u.lanes=4194304)}else{if(!b)if(l=xy(N),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,Oy(u,l),Sp(g,!0),g.tail===null&&g.tailMode==="hidden"&&!N.alternate&&!Rr)return Ln(u),null}else 2*Ue()-g.renderingStartTime>Dy&&f!==536870912&&(u.flags|=128,b=!0,Sp(g,!1),u.lanes=4194304);g.isBackwards?(N.sibling=u.child,u.child=N):(l=g.last,l!==null?l.sibling=N:u.child=N,g.last=N)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Ue(),l.sibling=null,f=la.current,re(la,b?f&1|2:f&1),Rr&&yl(u,g.treeForkCount),l):(Ln(u),null);case 22:case 23:return xs(u),w4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Ln(u),u.subtreeFlags&6&&(u.flags|=8192)):Ln(u),f=u.updateQueue,f!==null&&Oy(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ne(od),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),vl(Sa),Ln(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function jY(l,u){switch(s4(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return vl(Sa),ie(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Q(u),null;case 31:if(u.memoizedState!==null){if(xs(u),u.alternate===null)throw Error(n(340));ad()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(xs(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));ad()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ne(la),null;case 4:return ie(),null;case 10:return vl(u.type),null;case 22:case 23:return xs(u),w4(),l!==null&&ne(od),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return vl(Sa),null;case 25:return null;default:return null}}function DC(l,u){switch(s4(u),u.tag){case 3:vl(Sa),ie();break;case 26:case 27:case 5:Q(u);break;case 4:ie();break;case 31:u.memoizedState!==null&&xs(u);break;case 13:xs(u);break;case 19:ne(la);break;case 10:vl(u.type);break;case 22:case 23:xs(u),w4(),l!==null&&ne(od);break;case 24:vl(Sa)}}function _p(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var N=f.create,V=f.inst;g=N(),V.destroy=g}f=f.next}while(f!==b)}}catch(X){ln(u,u.return,X)}}function Dc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var N=b.next;g=N;do{if((g.tag&l)===l){var V=g.inst,X=V.destroy;if(X!==void 0){V.destroy=void 0,b=u;var de=f,Ce=X;try{Ce()}catch(Ge){ln(b,de,Ge)}}}g=g.next}while(g!==N)}}catch(Ge){ln(u,u.return,Ge)}}function LC(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{jk(u,f)}catch(g){ln(l,l.return,g)}}}function BC(l,u,f){f.props=hd(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){ln(l,u,g)}}function Np(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){ln(l,u,b)}}function Lo(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){ln(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){ln(l,u,b)}else f.current=null}function $C(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){ln(l,l.return,b)}}function J4(l,u,f){try{var g=l.stateNode;QY(g,l.type,f,u),g[mn]=u}catch(b){ln(l,l.return,b)}}function UC(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Fc(l.type)||l.tag===4}function e5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||UC(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Fc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function t5(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Zn));else if(g!==4&&(g===27&&Fc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(t5(l,u,f),l=l.sibling;l!==null;)t5(l,u,f),l=l.sibling}function Iy(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Fc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(Iy(l,u,f),l=l.sibling;l!==null;)Iy(l,u,f),l=l.sibling}function zC(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);ci(u,g,f),u[Jr]=l,u[mn]=f}catch(N){ln(l,l.return,N)}}var Nl=!1,Ta=!1,r5=!1,VC=typeof WeakSet=="function"?WeakSet:Set,Qa=null;function EY(l,u){if(l=l.containerInfo,_5=Jy,l=ek(l),Qw(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,N=g.focusNode;g=g.focusOffset;try{f.nodeType,N.nodeType}catch{f=null;break e}var V=0,X=-1,de=-1,Ce=0,Ge=0,Ye=l,De=null;t:for(;;){for(var Le;Ye!==f||b!==0&&Ye.nodeType!==3||(X=V+b),Ye!==N||g!==0&&Ye.nodeType!==3||(de=V+g),Ye.nodeType===3&&(V+=Ye.nodeValue.length),(Le=Ye.firstChild)!==null;)De=Ye,Ye=Le;for(;;){if(Ye===l)break t;if(De===f&&++Ce===b&&(X=V),De===N&&++Ge===g&&(de=V),(Le=Ye.nextSibling)!==null)break;Ye=De,De=Ye.parentNode}Ye=Le}f=X===-1||de===-1?null:{start:X,end:de}}else f=null}f=f||{start:0,end:0}}else f=null;for(N5={focusedElem:l,selectionRange:f},Jy=!1,Qa=u;Qa!==null;)if(u=Qa,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Qa=l;else for(;Qa!==null;){switch(u=Qa,N=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&N!==null){l=void 0,f=u,b=N.memoizedProps,N=N.memoizedState,g=f.stateNode;try{var Ct=hd(f.type,b);l=g.getSnapshotBeforeUpdate(Ct,N),g.__reactInternalSnapshotBeforeUpdate=l}catch(Wt){ln(f,f.return,Wt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)j5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":j5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Qa=l;break}Qa=u.return}}function FC(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Al(l,f),g&4&&_p(5,f);break;case 1:if(Al(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(V){ln(f,f.return,V)}else{var b=hd(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(V){ln(f,f.return,V)}}g&64&&LC(f),g&512&&Np(f,f.return);break;case 3:if(Al(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{jk(l,u)}catch(V){ln(f,f.return,V)}}break;case 27:u===null&&g&4&&zC(f);case 26:case 5:Al(l,f),u===null&&g&4&&$C(f),g&512&&Np(f,f.return);break;case 12:Al(l,f);break;case 31:Al(l,f),g&4&&GC(l,f);break;case 13:Al(l,f),g&4&&WC(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=LY.bind(null,f),nZ(l,f))));break;case 22:if(g=f.memoizedState!==null||Nl,!g){u=u!==null&&u.memoizedState!==null||Ta,b=Nl;var N=Ta;Nl=g,(Ta=u)&&!N?jl(l,f,(f.subtreeFlags&8772)!==0):Al(l,f),Nl=b,Ta=N}break;case 30:break;default:Al(l,f)}}function qC(l){var u=l.alternate;u!==null&&(l.alternate=null,qC(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Nt(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var $n=null,Fi=!1;function Tl(l,u,f){for(f=f.child;f!==null;)HC(l,u,f),f=f.sibling}function HC(l,u,f){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(jt,f)}catch{}switch(f.tag){case 26:Ta||Lo(f,u),Tl(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ta||Lo(f,u);var g=$n,b=Fi;Fc(f.type)&&($n=f.stateNode,Fi=!1),Tl(l,u,f),Rp(f.stateNode),$n=g,Fi=b;break;case 5:Ta||Lo(f,u);case 6:if(g=$n,b=Fi,$n=null,Tl(l,u,f),$n=g,Fi=b,$n!==null)if(Fi)try{($n.nodeType===9?$n.body:$n.nodeName==="HTML"?$n.ownerDocument.body:$n).removeChild(f.stateNode)}catch(N){ln(f,u,N)}else try{$n.removeChild(f.stateNode)}catch(N){ln(f,u,N)}break;case 18:$n!==null&&(Fi?(l=$n,L9(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),ah(l)):L9($n,f.stateNode));break;case 4:g=$n,b=Fi,$n=f.stateNode.containerInfo,Fi=!0,Tl(l,u,f),$n=g,Fi=b;break;case 0:case 11:case 14:case 15:Dc(2,f,u),Ta||Dc(4,f,u),Tl(l,u,f);break;case 1:Ta||(Lo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&BC(f,u,g)),Tl(l,u,f);break;case 21:Tl(l,u,f);break;case 22:Ta=(g=Ta)||f.memoizedState!==null,Tl(l,u,f),Ta=g;break;default:Tl(l,u,f)}}function GC(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{ah(l)}catch(f){ln(u,u.return,f)}}}function WC(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{ah(l)}catch(f){ln(u,u.return,f)}}function kY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new VC),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new VC),u;default:throw Error(n(435,l.tag))}}function Ry(l,u){var f=kY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=BY.bind(null,l,g);g.then(b,b)}})}function qi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],N=l,V=u,X=V;e:for(;X!==null;){switch(X.tag){case 27:if(Fc(X.type)){$n=X.stateNode,Fi=!1;break e}break;case 5:$n=X.stateNode,Fi=!1;break e;case 3:case 4:$n=X.stateNode.containerInfo,Fi=!0;break e}X=X.return}if($n===null)throw Error(n(160));HC(N,V,b),$n=null,Fi=!1,N=b.alternate,N!==null&&(N.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)KC(u,l),u=u.sibling}var ho=null;function KC(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:qi(u,l),Hi(l),g&4&&(Dc(3,l,l.return),_p(3,l),Dc(5,l,l.return));break;case 1:qi(u,l),Hi(l),g&512&&(Ta||f===null||Lo(f,f.return)),g&64&&Nl&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=ho;if(qi(u,l),Hi(l),g&512&&(Ta||f===null||Lo(f,f.return)),g&4){var N=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":N=b.getElementsByTagName("title")[0],(!N||N[xi]||N[Jr]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=b.createElement(g),b.head.insertBefore(N,b.querySelector("head > title"))),ci(N,g,f),N[Jr]=l,hr(N),g=N;break e;case"link":var V=K9("link","href",b).get(g+(f.href||""));if(V){for(var X=0;X<V.length;X++)if(N=V[X],N.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&N.getAttribute("rel")===(f.rel==null?null:f.rel)&&N.getAttribute("title")===(f.title==null?null:f.title)&&N.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){V.splice(X,1);break t}}N=b.createElement(g),ci(N,g,f),b.head.appendChild(N);break;case"meta":if(V=K9("meta","content",b).get(g+(f.content||""))){for(X=0;X<V.length;X++)if(N=V[X],N.getAttribute("content")===(f.content==null?null:""+f.content)&&N.getAttribute("name")===(f.name==null?null:f.name)&&N.getAttribute("property")===(f.property==null?null:f.property)&&N.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&N.getAttribute("charset")===(f.charSet==null?null:f.charSet)){V.splice(X,1);break t}}N=b.createElement(g),ci(N,g,f),b.head.appendChild(N);break;default:throw Error(n(468,g))}N[Jr]=l,hr(N),g=N}l.stateNode=g}else Q9(b,l.type,l.stateNode);else l.stateNode=W9(b,g,l.memoizedProps);else N!==g?(N===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):N.count--,g===null?Q9(b,l.type,l.stateNode):W9(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&J4(l,l.memoizedProps,f.memoizedProps)}break;case 27:qi(u,l),Hi(l),g&512&&(Ta||f===null||Lo(f,f.return)),f!==null&&g&4&&J4(l,l.memoizedProps,f.memoizedProps);break;case 5:if(qi(u,l),Hi(l),g&512&&(Ta||f===null||Lo(f,f.return)),l.flags&32){b=l.stateNode;try{qe(b,"")}catch(Ct){ln(l,l.return,Ct)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,J4(l,b,f!==null?f.memoizedProps:b)),g&1024&&(r5=!0);break;case 6:if(qi(u,l),Hi(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Ct){ln(l,l.return,Ct)}}break;case 3:if(Qy=null,b=ho,ho=Wy(u.containerInfo),qi(u,l),ho=b,Hi(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{ah(u.containerInfo)}catch(Ct){ln(l,l.return,Ct)}r5&&(r5=!1,QC(l));break;case 4:g=ho,ho=Wy(l.stateNode.containerInfo),qi(u,l),Hi(l),ho=g;break;case 12:qi(u,l),Hi(l);break;case 31:qi(u,l),Hi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Ry(l,g)));break;case 13:qi(u,l),Hi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Py=Ue()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Ry(l,g)));break;case 22:b=l.memoizedState!==null;var de=f!==null&&f.memoizedState!==null,Ce=Nl,Ge=Ta;if(Nl=Ce||b,Ta=Ge||de,qi(u,l),Ta=Ge,Nl=Ce,Hi(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||de||Nl||Ta||fd(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){de=f=u;try{if(N=de.stateNode,b)V=N.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{X=de.stateNode;var Ye=de.memoizedProps.style,De=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null;X.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Ct){ln(de,de.return,Ct)}}}else if(u.tag===6){if(f===null){de=u;try{de.stateNode.nodeValue=b?"":de.memoizedProps}catch(Ct){ln(de,de.return,Ct)}}}else if(u.tag===18){if(f===null){de=u;try{var Le=de.stateNode;b?B9(Le,!0):B9(de.stateNode,!1)}catch(Ct){ln(de,de.return,Ct)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Ry(l,f))));break;case 19:qi(u,l),Hi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Ry(l,g)));break;case 30:break;case 21:break;default:qi(u,l),Hi(l)}}function Hi(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(UC(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,N=e5(l);Iy(l,N,b);break;case 5:var V=f.stateNode;f.flags&32&&(qe(V,""),f.flags&=-33);var X=e5(l);Iy(l,X,V);break;case 3:case 4:var de=f.stateNode.containerInfo,Ce=e5(l);t5(l,Ce,de);break;default:throw Error(n(161))}}catch(Ge){ln(l,l.return,Ge)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function QC(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;QC(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Al(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)FC(l,u.alternate,u),u=u.sibling}function fd(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Dc(4,u,u.return),fd(u);break;case 1:Lo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&BC(u,u.return,f),fd(u);break;case 27:Rp(u.stateNode);case 26:case 5:Lo(u,u.return),fd(u);break;case 22:u.memoizedState===null&&fd(u);break;case 30:fd(u);break;default:fd(u)}l=l.sibling}}function jl(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,N=u,V=N.flags;switch(N.tag){case 0:case 11:case 15:jl(b,N,f),_p(4,N);break;case 1:if(jl(b,N,f),g=N,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ce){ln(g,g.return,Ce)}if(g=N,b=g.updateQueue,b!==null){var X=g.stateNode;try{var de=b.shared.hiddenCallbacks;if(de!==null)for(b.shared.hiddenCallbacks=null,b=0;b<de.length;b++)Ak(de[b],X)}catch(Ce){ln(g,g.return,Ce)}}f&&V&64&&LC(N),Np(N,N.return);break;case 27:zC(N);case 26:case 5:jl(b,N,f),f&&g===null&&V&4&&$C(N),Np(N,N.return);break;case 12:jl(b,N,f);break;case 31:jl(b,N,f),f&&V&4&&GC(b,N);break;case 13:jl(b,N,f),f&&V&4&&WC(b,N);break;case 22:N.memoizedState===null&&jl(b,N,f),Np(N,N.return);break;case 30:break;default:jl(b,N,f)}u=u.sibling}}function n5(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&up(f))}function a5(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&up(l))}function fo(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)XC(l,u,f,g),u=u.sibling}function XC(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:fo(l,u,f,g),b&2048&&_p(9,u);break;case 1:fo(l,u,f,g);break;case 3:fo(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&up(l)));break;case 12:if(b&2048){fo(l,u,f,g),l=u.stateNode;try{var N=u.memoizedProps,V=N.id,X=N.onPostCommit;typeof X=="function"&&X(V,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(de){ln(u,u.return,de)}}else fo(l,u,f,g);break;case 31:fo(l,u,f,g);break;case 13:fo(l,u,f,g);break;case 23:break;case 22:N=u.stateNode,V=u.alternate,u.memoizedState!==null?N._visibility&2?fo(l,u,f,g):Tp(l,u):N._visibility&2?fo(l,u,f,g):(N._visibility|=2,W0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&n5(V,u);break;case 24:fo(l,u,f,g),b&2048&&a5(u.alternate,u);break;default:fo(l,u,f,g)}}function W0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var N=l,V=u,X=f,de=g,Ce=V.flags;switch(V.tag){case 0:case 11:case 15:W0(N,V,X,de,b),_p(8,V);break;case 23:break;case 22:var Ge=V.stateNode;V.memoizedState!==null?Ge._visibility&2?W0(N,V,X,de,b):Tp(N,V):(Ge._visibility|=2,W0(N,V,X,de,b)),b&&Ce&2048&&n5(V.alternate,V);break;case 24:W0(N,V,X,de,b),b&&Ce&2048&&a5(V.alternate,V);break;default:W0(N,V,X,de,b)}u=u.sibling}}function Tp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:Tp(f,g),b&2048&&n5(g.alternate,g);break;case 24:Tp(f,g),b&2048&&a5(g.alternate,g);break;default:Tp(f,g)}u=u.sibling}}var Ap=8192;function K0(l,u,f){if(l.subtreeFlags&Ap)for(l=l.child;l!==null;)YC(l,u,f),l=l.sibling}function YC(l,u,f){switch(l.tag){case 26:K0(l,u,f),l.flags&Ap&&l.memoizedState!==null&&mZ(f,ho,l.memoizedState,l.memoizedProps);break;case 5:K0(l,u,f);break;case 3:case 4:var g=ho;ho=Wy(l.stateNode.containerInfo),K0(l,u,f),ho=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=Ap,Ap=16777216,K0(l,u,f),Ap=g):K0(l,u,f));break;default:K0(l,u,f)}}function ZC(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function jp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Qa=g,e9(g,l)}ZC(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)JC(l),l=l.sibling}function JC(l){switch(l.tag){case 0:case 11:case 15:jp(l),l.flags&2048&&Dc(9,l,l.return);break;case 3:jp(l);break;case 12:jp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,My(l)):jp(l);break;default:jp(l)}}function My(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Qa=g,e9(g,l)}ZC(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Dc(8,u,u.return),My(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,My(u));break;default:My(u)}l=l.sibling}}function e9(l,u){for(;Qa!==null;){var f=Qa;switch(f.tag){case 0:case 11:case 15:Dc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:up(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Qa=g;else e:for(f=l;Qa!==null;){g=Qa;var b=g.sibling,N=g.return;if(qC(g),g===f){Qa=null;break e}if(b!==null){b.return=N,Qa=b;break e}Qa=N}}}var CY={getCacheForType:function(l){var u=oi(Sa),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return oi(Sa).controller.signal}},OY=typeof WeakMap=="function"?WeakMap:Map,Qr=0,Tn=null,Sr=null,Tr=0,on=0,vs=null,Lc=!1,Q0=!1,i5=!1,El=0,ea=0,Bc=0,pd=0,s5=0,bs=0,X0=0,Ep=null,Gi=null,o5=!1,Py=0,t9=0,Dy=1/0,Ly=null,$c=null,Ma=0,Uc=null,Y0=null,kl=0,l5=0,c5=null,r9=null,kp=0,u5=null;function ws(){return(Qr&2)!==0&&Tr!==0?Tr&-Tr:H.T!==null?g5():pn()}function n9(){if(bs===0)if((Tr&536870912)===0||Rr){var l=vr;vr<<=1,(vr&3932160)===0&&(vr=262144),bs=l}else bs=536870912;return l=ys.current,l!==null&&(l.flags|=32),bs}function Wi(l,u,f){(l===Tn&&(on===2||on===9)||l.cancelPendingCommit!==null)&&(Z0(l,0),zc(l,Tr,bs,!1)),hn(l,f),((Qr&2)===0||l!==Tn)&&(l===Tn&&((Qr&2)===0&&(pd|=f),ea===4&&zc(l,Tr,bs,!1)),Bo(l))}function a9(l,u,f){if((Qr&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||$r(l,u),b=g?MY(l,u):h5(l,u,!0),N=g;do{if(b===0){Q0&&!g&&zc(l,u,0,!1);break}else{if(f=l.current.alternate,N&&!IY(f)){b=h5(l,u,!1),N=!1;continue}if(b===2){if(N=u,l.errorRecoveryDisabledLanes&N)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){u=V;e:{var X=l;b=Ep;var de=X.current.memoizedState.isDehydrated;if(de&&(Z0(X,V).flags|=256),V=h5(X,V,!1),V!==2){if(i5&&!de){X.errorRecoveryDisabledLanes|=N,pd|=N,b=4;break e}N=Gi,Gi=b,N!==null&&(Gi===null?Gi=N:Gi.push.apply(Gi,N))}b=V}if(N=!1,b!==2)continue}}if(b===1){Z0(l,0),zc(l,u,0,!0);break}e:{switch(g=l,N=b,N){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:zc(g,u,bs,!Lc);break e;case 2:Gi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=Py+300-Ue(),10<b)){if(zc(g,u,bs,!Lc),_t(g,0,!0)!==0)break e;kl=u,g.timeoutHandle=P9(i9.bind(null,g,f,Gi,Ly,o5,u,bs,pd,X0,Lc,N,"Throttled",-0,0),b);break e}i9(g,f,Gi,Ly,o5,u,bs,pd,X0,Lc,N,null,-0,0)}}break}while(!0);Bo(l)}function i9(l,u,f,g,b,N,V,X,de,Ce,Ge,Ye,De,Le){if(l.timeoutHandle=-1,Ye=u.subtreeFlags,Ye&8192||(Ye&16785408)===16785408){Ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},YC(u,N,Ye);var Ct=(N&62914560)===N?Py-Ue():(N&4194048)===N?t9-Ue():0;if(Ct=gZ(Ye,Ct),Ct!==null){kl=N,l.cancelPendingCommit=Ct(f9.bind(null,l,u,N,f,g,b,V,X,de,Ge,Ye,null,De,Le)),zc(l,N,V,!Ce);return}}f9(l,u,N,f,g,b,V,X,de)}function IY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],N=b.getSnapshot;b=b.value;try{if(!ms(N(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function zc(l,u,f,g){u&=~s5,u&=~pd,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var N=31-tt(b),V=1<<N;g[N]=-1,b&=~V}f!==0&&ya(l,f,u)}function By(){return(Qr&6)===0?(Cp(0),!1):!0}function d5(){if(Sr!==null){if(on===0)var l=Sr.return;else l=Sr,xl=id=null,j4(l),V0=null,hp=0,l=Sr;for(;l!==null;)DC(l.alternate,l),l=l.return;Sr=null}}function Z0(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,ZY(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),kl=0,d5(),Tn=l,Sr=f=gl(l.current,null),Tr=u,on=0,vs=null,Lc=!1,Q0=$r(l,u),i5=!1,X0=bs=s5=pd=Bc=ea=0,Gi=Ep=null,o5=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-tt(g),N=1<<b;u|=l[b],g&=~N}return El=u,iy(),f}function s9(l,u){dr=null,H.H=bp,u===z0||u===fy?(u=Sk(),on=3):u===m4?(u=Sk(),on=4):on=u===F4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,vs=u,Sr===null&&(ea=1,jy(l,Bs(u,l.current)))}function o9(){var l=ys.current;return l===null?!0:(Tr&4194048)===Tr?Vs===null:(Tr&62914560)===Tr||(Tr&536870912)!==0?l===Vs:!1}function l9(){var l=H.H;return H.H=bp,l===null?bp:l}function c9(){var l=H.A;return H.A=CY,l}function $y(){ea=4,Lc||(Tr&4194048)!==Tr&&ys.current!==null||(Q0=!0),(Bc&134217727)===0&&(pd&134217727)===0||Tn===null||zc(Tn,Tr,bs,!1)}function h5(l,u,f){var g=Qr;Qr|=2;var b=l9(),N=c9();(Tn!==l||Tr!==u)&&(Ly=null,Z0(l,u)),u=!1;var V=ea;e:do try{if(on!==0&&Sr!==null){var X=Sr,de=vs;switch(on){case 8:d5(),V=6;break e;case 3:case 2:case 9:case 6:ys.current===null&&(u=!0);var Ce=on;if(on=0,vs=null,J0(l,X,de,Ce),f&&Q0){V=0;break e}break;default:Ce=on,on=0,vs=null,J0(l,X,de,Ce)}}RY(),V=ea;break}catch(Ge){s9(l,Ge)}while(!0);return u&&l.shellSuspendCounter++,xl=id=null,Qr=g,H.H=b,H.A=N,Sr===null&&(Tn=null,Tr=0,iy()),V}function RY(){for(;Sr!==null;)u9(Sr)}function MY(l,u){var f=Qr;Qr|=2;var g=l9(),b=c9();Tn!==l||Tr!==u?(Ly=null,Dy=Ue()+500,Z0(l,u)):Q0=$r(l,u);e:do try{if(on!==0&&Sr!==null){u=Sr;var N=vs;t:switch(on){case 1:on=0,vs=null,J0(l,u,N,1);break;case 2:case 9:if(bk(N)){on=0,vs=null,d9(u);break}u=function(){on!==2&&on!==9||Tn!==l||(on=7),Bo(l)},N.then(u,u);break e;case 3:on=7;break e;case 4:on=5;break e;case 7:bk(N)?(on=0,vs=null,d9(u)):(on=0,vs=null,J0(l,u,N,7));break;case 5:var V=null;switch(Sr.tag){case 26:V=Sr.memoizedState;case 5:case 27:var X=Sr;if(V?X9(V):X.stateNode.complete){on=0,vs=null;var de=X.sibling;if(de!==null)Sr=de;else{var Ce=X.return;Ce!==null?(Sr=Ce,Uy(Ce)):Sr=null}break t}}on=0,vs=null,J0(l,u,N,5);break;case 6:on=0,vs=null,J0(l,u,N,6);break;case 8:d5(),ea=6;break e;default:throw Error(n(462))}}PY();break}catch(Ge){s9(l,Ge)}while(!0);return xl=id=null,H.H=g,H.A=b,Qr=f,Sr!==null?0:(Tn=null,Tr=0,iy(),ea)}function PY(){for(;Sr!==null&&!et();)u9(Sr)}function u9(l){var u=MC(l.alternate,l,El);l.memoizedProps=l.pendingProps,u===null?Uy(l):Sr=u}function d9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=EC(f,u,u.pendingProps,u.type,void 0,Tr);break;case 11:u=EC(f,u,u.pendingProps,u.type.render,u.ref,Tr);break;case 5:j4(u);default:DC(f,u),u=Sr=ck(u,El),u=MC(f,u,El)}l.memoizedProps=l.pendingProps,u===null?Uy(l):Sr=u}function J0(l,u,f,g){xl=id=null,j4(u),V0=null,hp=0;var b=u.return;try{if(_Y(l,b,u,f,Tr)){ea=1,jy(l,Bs(f,l.current)),Sr=null;return}}catch(N){if(b!==null)throw Sr=b,N;ea=1,jy(l,Bs(f,l.current)),Sr=null;return}u.flags&32768?(Rr||g===1?l=!0:Q0||(Tr&536870912)!==0?l=!1:(Lc=l=!0,(g===2||g===9||g===3||g===6)&&(g=ys.current,g!==null&&g.tag===13&&(g.flags|=16384))),h9(u,l)):Uy(u)}function Uy(l){var u=l;do{if((u.flags&32768)!==0){h9(u,Lc);return}l=u.return;var f=AY(u.alternate,u,El);if(f!==null){Sr=f;return}if(u=u.sibling,u!==null){Sr=u;return}Sr=u=l}while(u!==null);ea===0&&(ea=5)}function h9(l,u){do{var f=jY(l.alternate,l);if(f!==null){f.flags&=32767,Sr=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){Sr=l;return}Sr=l=f}while(l!==null);ea=6,Sr=null}function f9(l,u,f,g,b,N,V,X,de){l.cancelPendingCommit=null;do zy();while(Ma!==0);if((Qr&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(N=u.lanes|u.childLanes,N|=e4,cr(l,f,N,V,X,de),l===Tn&&(Sr=Tn=null,Tr=0),Y0=u,Uc=l,kl=f,l5=N,c5=b,r9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,$Y(zt,function(){return x9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=J.p,J.p=2,V=Qr,Qr|=4;try{EY(l,u,f)}finally{Qr=V,J.p=b,H.T=g}}Ma=1,p9(),m9(),g9()}}function p9(){if(Ma===1){Ma=0;var l=Uc,u=Y0,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=J.p;J.p=2;var b=Qr;Qr|=4;try{KC(u,l);var N=N5,V=ek(l.containerInfo),X=N.focusedElem,de=N.selectionRange;if(V!==X&&X&&X.ownerDocument&&J7(X.ownerDocument.documentElement,X)){if(de!==null&&Qw(X)){var Ce=de.start,Ge=de.end;if(Ge===void 0&&(Ge=Ce),"selectionStart"in X)X.selectionStart=Ce,X.selectionEnd=Math.min(Ge,X.value.length);else{var Ye=X.ownerDocument||document,De=Ye&&Ye.defaultView||window;if(De.getSelection){var Le=De.getSelection(),Ct=X.textContent.length,Wt=Math.min(de.start,Ct),vn=de.end===void 0?Wt:Math.min(de.end,Ct);!Le.extend&&Wt>vn&&(V=vn,vn=Wt,Wt=V);var we=Z7(X,Wt),me=Z7(X,vn);if(we&&me&&(Le.rangeCount!==1||Le.anchorNode!==we.node||Le.anchorOffset!==we.offset||Le.focusNode!==me.node||Le.focusOffset!==me.offset)){var Ee=Ye.createRange();Ee.setStart(we.node,we.offset),Le.removeAllRanges(),Wt>vn?(Le.addRange(Ee),Le.extend(me.node,me.offset)):(Ee.setEnd(me.node,me.offset),Le.addRange(Ee))}}}}for(Ye=[],Le=X;Le=Le.parentNode;)Le.nodeType===1&&Ye.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<Ye.length;X++){var Ke=Ye[X];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}Jy=!!_5,N5=_5=null}finally{Qr=b,J.p=g,H.T=f}}l.current=u,Ma=2}}function m9(){if(Ma===2){Ma=0;var l=Uc,u=Y0,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=J.p;J.p=2;var b=Qr;Qr|=4;try{FC(l,u.alternate,u)}finally{Qr=b,J.p=g,H.T=f}}Ma=3}}function g9(){if(Ma===4||Ma===3){Ma=0,ce();var l=Uc,u=Y0,f=kl,g=r9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ma=5:(Ma=0,Y0=Uc=null,y9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&($c=null),Nr(f),u=u.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(jt,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=H.T,b=J.p,J.p=2,H.T=null;try{for(var N=l.onRecoverableError,V=0;V<g.length;V++){var X=g[V];N(X.value,{componentStack:X.stack})}}finally{H.T=u,J.p=b}}(kl&3)!==0&&zy(),Bo(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===u5?kp++:(kp=0,u5=l):kp=0,Cp(0)}}function y9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,up(u)))}function zy(){return p9(),m9(),g9(),x9()}function x9(){if(Ma!==5)return!1;var l=Uc,u=l5;l5=0;var f=Nr(kl),g=H.T,b=J.p;try{J.p=32>f?32:f,H.T=null,f=c5,c5=null;var N=Uc,V=kl;if(Ma=0,Y0=Uc=null,kl=0,(Qr&6)!==0)throw Error(n(331));var X=Qr;if(Qr|=4,JC(N.current),XC(N,N.current,V,f),Qr=X,Cp(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(jt,N)}catch{}return!0}finally{J.p=b,H.T=g,y9(l,u)}}function v9(l,u,f){u=Bs(f,u),u=V4(l.stateNode,u,2),l=Rc(l,u,2),l!==null&&(hn(l,2),Bo(l))}function ln(l,u,f){if(l.tag===3)v9(l,l,f);else for(;u!==null;){if(u.tag===3){v9(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&($c===null||!$c.has(g))){l=Bs(f,l),f=bC(2),g=Rc(u,f,2),g!==null&&(wC(f,g,u,l),hn(g,2),Bo(g));break}}u=u.return}}function f5(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new OY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(i5=!0,b.add(f),l=DY.bind(null,l,u,f),u.then(l,l))}function DY(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,Tn===l&&(Tr&f)===f&&(ea===4||ea===3&&(Tr&62914560)===Tr&&300>Ue()-Py?(Qr&2)===0&&Z0(l,0):s5|=f,X0===Tr&&(X0=0)),Bo(l)}function b9(l,u){u===0&&(u=Wr()),l=rd(l,u),l!==null&&(hn(l,u),Bo(l))}function LY(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),b9(l,f)}function BY(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),b9(l,f)}function $Y(l,u){return St(l,u)}var Vy=null,eh=null,p5=!1,Fy=!1,m5=!1,Vc=0;function Bo(l){l!==eh&&l.next===null&&(eh===null?Vy=eh=l:eh=eh.next=l),Fy=!0,p5||(p5=!0,zY())}function Cp(l,u){if(!m5&&Fy){m5=!0;do for(var f=!1,g=Vy;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var N=0;else{var V=g.suspendedLanes,X=g.pingedLanes;N=(1<<31-tt(42|l)+1)-1,N&=b&~(V&~X),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(f=!0,N9(g,N))}else N=Tr,N=_t(g,g===Tn?N:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(N&3)===0||$r(g,N)||(f=!0,N9(g,N));g=g.next}while(f);m5=!1}}function UY(){w9()}function w9(){Fy=p5=!1;var l=0;Vc!==0&&YY()&&(l=Vc);for(var u=Ue(),f=null,g=Vy;g!==null;){var b=g.next,N=S9(g,u);N===0?(g.next=null,f===null?Vy=b:f.next=b,b===null&&(eh=f)):(f=g,(l!==0||(N&3)!==0)&&(Fy=!0)),g=b}Ma!==0&&Ma!==5||Cp(l),Vc!==0&&(Vc=0)}function S9(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,N=l.pendingLanes&-62914561;0<N;){var V=31-tt(N),X=1<<V,de=b[V];de===-1?((X&f)===0||(X&g)!==0)&&(b[V]=an(X,u)):de<=u&&(l.expiredLanes|=X),N&=~X}if(u=Tn,f=Tr,f=_t(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(on===2||on===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&vt(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||$r(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&vt(g),Nr(f)){case 2:case 8:f=dt;break;case 32:f=zt;break;case 268435456:f=Cr;break;default:f=zt}return g=_9.bind(null,l),f=St(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&vt(g),l.callbackPriority=2,l.callbackNode=null,2}function _9(l,u){if(Ma!==0&&Ma!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(zy()&&l.callbackNode!==f)return null;var g=Tr;return g=_t(l,l===Tn?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(a9(l,g,u),S9(l,Ue()),l.callbackNode!=null&&l.callbackNode===f?_9.bind(null,l):null)}function N9(l,u){if(zy())return null;a9(l,u,!0)}function zY(){JY(function(){(Qr&6)!==0?St(ht,UY):w9()})}function g5(){if(Vc===0){var l=$0;l===0&&(l=dn,dn<<=1,(dn&261888)===0&&(dn=256)),Vc=l}return Vc}function T9(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ba(""+l)}function A9(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function VY(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var N=T9((b[mn]||null).action),V=g.submitter;V&&(u=(u=V[mn]||null)?T9(u.formAction):V.getAttribute("formAction"),u!==null&&(N=u,V=null));var X=new Qu("action","action",null,g,b);l.push({event:X,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Vc!==0){var de=V?A9(b,V):new FormData(b);D4(f,{pending:!0,data:de,method:b.method,action:N},null,de)}}else typeof N=="function"&&(X.preventDefault(),de=V?A9(b,V):new FormData(b),D4(f,{pending:!0,data:de,method:b.method,action:N},N,de))},currentTarget:b}]})}}for(var y5=0;y5<Jw.length;y5++){var x5=Jw[y5],FY=x5.toLowerCase(),qY=x5[0].toUpperCase()+x5.slice(1);uo(FY,"on"+qY)}uo(nk,"onAnimationEnd"),uo(ak,"onAnimationIteration"),uo(ik,"onAnimationStart"),uo("dblclick","onDoubleClick"),uo("focusin","onFocus"),uo("focusout","onBlur"),uo(sY,"onTransitionRun"),uo(oY,"onTransitionStart"),uo(lY,"onTransitionCancel"),uo(sk,"onTransitionEnd"),Or("onMouseEnter",["mouseout","mouseover"]),Or("onMouseLeave",["mouseout","mouseover"]),Or("onPointerEnter",["pointerout","pointerover"]),Or("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Op="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Op));function j9(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var N=void 0;if(u)for(var V=g.length-1;0<=V;V--){var X=g[V],de=X.instance,Ce=X.currentTarget;if(X=X.listener,de!==N&&b.isPropagationStopped())break e;N=X,b.currentTarget=Ce;try{N(b)}catch(Ge){ay(Ge)}b.currentTarget=null,N=de}else for(V=0;V<g.length;V++){if(X=g[V],de=X.instance,Ce=X.currentTarget,X=X.listener,de!==N&&b.isPropagationStopped())break e;N=X,b.currentTarget=Ce;try{N(b)}catch(Ge){ay(Ge)}b.currentTarget=null,N=de}}}}function _r(l,u){var f=u[ii];f===void 0&&(f=u[ii]=new Set);var g=l+"__bubble";f.has(g)||(E9(u,l,2,!1),f.add(g))}function v5(l,u,f){var g=0;u&&(g|=4),E9(f,l,g,u)}var qy="_reactListening"+Math.random().toString(36).slice(2);function b5(l){if(!l[qy]){l[qy]=!0,sn.forEach(function(f){f!=="selectionchange"&&(HY.has(f)||v5(f,!1,l),v5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[qy]||(u[qy]=!0,v5("selectionchange",!1,u))}}function E9(l,u,f,g){switch(nO(u)){case 2:var b=vZ;break;case 8:b=bZ;break;default:b=P5}f=b.bind(null,u,f,l),b=void 0,!Jf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function w5(l,u,f,g,b){var N=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var X=g.stateNode.containerInfo;if(X===b)break;if(V===4)for(V=g.return;V!==null;){var de=V.tag;if((de===3||de===4)&&V.stateNode.containerInfo===b)return;V=V.return}for(;X!==null;){if(V=pe(X),V===null)return;if(de=V.tag,de===5||de===6||de===26||de===27){g=N=V;continue e}X=X.parentNode}}g=g.return}V1(function(){var Ce=N,Ge=Io(f),Ye=[];e:{var De=ok.get(l);if(De!==void 0){var Le=Qu,Ct=l;switch(l){case"keypress":if(Ku(f)===0)break e;case"keydown":case"keyup":Le=Y1;break;case"focusin":Ct="focus",Le=_c;break;case"focusout":Ct="blur",Le=_c;break;case"beforeblur":case"afterblur":Le=_c;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=q1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=H1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=J1;break;case nk:case ak:case ik:Le=k0;break;case sk:Le=C0;break;case"scroll":case"scrollend":Le=F1;break;case"wheel":Le=ty;break;case"copy":case"cut":case"paste":Le=W1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=ap;break;case"toggle":case"beforetoggle":Le=Tc}var Wt=(u&4)!==0,vn=!Wt&&(l==="scroll"||l==="scrollend"),we=Wt?De!==null?De+"Capture":null:De;Wt=[];for(var me=Ce,Ee;me!==null;){var Ke=me;if(Ee=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Ee===null||we===null||(Ke=zi(me,we),Ke!=null&&Wt.push(Ip(me,Ke,Ee))),vn)break;me=me.return}0<Wt.length&&(De=new Le(De,Ct,null,f,Ge),Ye.push({event:De,listeners:Wt}))}}if((u&7)===0){e:{if(De=l==="mouseover"||l==="pointerover",Le=l==="mouseout"||l==="pointerout",De&&f!==Ir&&(Ct=f.relatedTarget||f.fromElement)&&(pe(Ct)||Ct[Nn]))break e;if((Le||De)&&(De=Ge.window===Ge?Ge:(De=Ge.ownerDocument)?De.defaultView||De.parentWindow:window,Le?(Ct=f.relatedTarget||f.toElement,Le=Ce,Ct=Ct?pe(Ct):null,Ct!==null&&(vn=i(Ct),Wt=Ct.tag,Ct!==vn||Wt!==5&&Wt!==27&&Wt!==6)&&(Ct=null)):(Le=null,Ct=Ce),Le!==Ct)){if(Wt=q1,Ke="onMouseLeave",we="onMouseEnter",me="mouse",(l==="pointerout"||l==="pointerover")&&(Wt=ap,Ke="onPointerLeave",we="onPointerEnter",me="pointer"),vn=Le==null?De:ft(Le),Ee=Ct==null?De:ft(Ct),De=new Wt(Ke,me+"leave",Le,f,Ge),De.target=vn,De.relatedTarget=Ee,Ke=null,pe(Ge)===Ce&&(Wt=new Wt(we,me+"enter",Ct,f,Ge),Wt.target=Ee,Wt.relatedTarget=vn,Ke=Wt),vn=Ke,Le&&Ct)t:{for(Wt=GY,we=Le,me=Ct,Ee=0,Ke=we;Ke;Ke=Wt(Ke))Ee++;Ke=0;for(var Vt=me;Vt;Vt=Wt(Vt))Ke++;for(;0<Ee-Ke;)we=Wt(we),Ee--;for(;0<Ke-Ee;)me=Wt(me),Ke--;for(;Ee--;){if(we===me||me!==null&&we===me.alternate){Wt=we;break t}we=Wt(we),me=Wt(me)}Wt=null}else Wt=null;Le!==null&&k9(Ye,De,Le,Wt,!1),Ct!==null&&vn!==null&&k9(Ye,vn,Ct,Wt,!0)}}e:{if(De=Ce?ft(Ce):window,Le=De.nodeName&&De.nodeName.toLowerCase(),Le==="select"||Le==="input"&&De.type==="file")var zr=G7;else if(Vi(De))if(W7)zr=nY;else{zr=tY;var Pt=eY}else Le=De.nodeName,!Le||Le.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Ce&&oa(Ce.elementType)&&(zr=G7):zr=rY;if(zr&&(zr=zr(l,Ce))){Ju(Ye,zr,f,Ge);break e}Pt&&Pt(l,De,Ce),l==="focusout"&&Ce&&De.type==="number"&&Ce.memoizedProps.value!=null&&ue(De,"number",De.value)}switch(Pt=Ce?ft(Ce):window,l){case"focusin":(Vi(Pt)||Pt.contentEditable==="true")&&(O0=Pt,Xw=Ce,op=null);break;case"focusout":op=Xw=O0=null;break;case"mousedown":Yw=!0;break;case"contextmenu":case"mouseup":case"dragend":Yw=!1,tk(Ye,f,Ge);break;case"selectionchange":if(iY)break;case"keydown":case"keyup":tk(Ye,f,Ge)}var fr;if(P)e:{switch(l){case"compositionstart":var Ar="onCompositionStart";break e;case"compositionend":Ar="onCompositionEnd";break e;case"compositionupdate":Ar="onCompositionUpdate";break e}Ar=void 0}else yr?en(l,f)&&(Ar="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Ar="onCompositionStart");Ar&&(Ne&&f.locale!=="ko"&&(yr||Ar!=="onCompositionStart"?Ar==="onCompositionEnd"&&yr&&(fr=vc()):(ps=Ge,j0="value"in ps?ps.value:ps.textContent,yr=!0)),Pt=Hy(Ce,Ar),0<Pt.length&&(Ar=new tp(Ar,l,null,f,Ge),Ye.push({event:Ar,listeners:Pt}),fr?Ar.data=fr:(fr=wa(f),fr!==null&&(Ar.data=fr)))),(fr=ee?Wa(l,f):Ka(l,f))&&(Ar=Hy(Ce,"onBeforeInput"),0<Ar.length&&(Pt=new tp("onBeforeInput","beforeinput",null,f,Ge),Ye.push({event:Pt,listeners:Ar}),Pt.data=fr)),VY(Ye,l,Ce,f,Ge)}j9(Ye,u)})}function Ip(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Hy(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,N=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||N===null||(b=zi(l,f),b!=null&&g.unshift(Ip(l,b,N)),b=zi(l,u),b!=null&&g.push(Ip(l,b,N))),l.tag===3)return g;l=l.return}return[]}function GY(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function k9(l,u,f,g,b){for(var N=u._reactName,V=[];f!==null&&f!==g;){var X=f,de=X.alternate,Ce=X.stateNode;if(X=X.tag,de!==null&&de===g)break;X!==5&&X!==26&&X!==27||Ce===null||(de=Ce,b?(Ce=zi(f,N),Ce!=null&&V.unshift(Ip(f,Ce,de))):b||(Ce=zi(f,N),Ce!=null&&V.push(Ip(f,Ce,de)))),f=f.return}V.length!==0&&l.push({event:u,listeners:V})}var WY=/\r\n?/g,KY=/\u0000|\uFFFD/g;function C9(l){return(typeof l=="string"?l:""+l).replace(WY,`
`).replace(KY,"")}function O9(l,u){return u=C9(u),C9(l)===u}function xn(l,u,f,g,b,N){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||qe(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&qe(l,""+g);break;case"className":hs(l,"class",g);break;case"tabIndex":hs(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(l,f,g);break;case"style":Cn(l,g,N);break;case"data":if(u!=="object"){hs(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=ba(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(f==="formAction"?(u!=="input"&&xn(l,u,"name",b.name,b,null),xn(l,u,"formEncType",b.formEncType,b,null),xn(l,u,"formMethod",b.formMethod,b,null),xn(l,u,"formTarget",b.formTarget,b,null)):(xn(l,u,"encType",b.encType,b,null),xn(l,u,"method",b.method,b,null),xn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=ba(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=Zn);break;case"onScroll":g!=null&&_r("scroll",l);break;case"onScrollEnd":g!=null&&_r("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=ba(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":_r("beforetoggle",l),_r("toggle",l),ds(l,"popover",g);break;case"xlinkActuate":Ra(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ra(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ra(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ra(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ra(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ra(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ra(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ra(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ra(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ds(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ps.get(f)||f,ds(l,f,g))}}function S5(l,u,f,g,b,N){switch(f){case"style":Cn(l,g,N);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?qe(l,g):(typeof g=="number"||typeof g=="bigint")&&qe(l,""+g);break;case"onScroll":g!=null&&_r("scroll",l);break;case"onScrollEnd":g!=null&&_r("scrollend",l);break;case"onClick":g!=null&&(l.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),N=l[mn]||null,N=N!=null?N[f]:null,typeof N=="function"&&l.removeEventListener(u,N,b),typeof g=="function")){typeof N!="function"&&N!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):ds(l,f,g)}}}function ci(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_r("error",l),_r("load",l);var g=!1,b=!1,N;for(N in f)if(f.hasOwnProperty(N)){var V=f[N];if(V!=null)switch(N){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:xn(l,u,N,V,f,null)}}b&&xn(l,u,"srcSet",f.srcSet,f,null),g&&xn(l,u,"src",f.src,f,null);return;case"input":_r("invalid",l);var X=N=V=b=null,de=null,Ce=null;for(g in f)if(f.hasOwnProperty(g)){var Ge=f[g];if(Ge!=null)switch(g){case"name":b=Ge;break;case"type":V=Ge;break;case"checked":de=Ge;break;case"defaultChecked":Ce=Ge;break;case"value":N=Ge;break;case"defaultValue":X=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(n(137,u));break;default:xn(l,u,g,Ge,f,null)}}wr(l,N,X,de,Ce,V,b,!1);return;case"select":_r("invalid",l),g=V=N=null;for(b in f)if(f.hasOwnProperty(b)&&(X=f[b],X!=null))switch(b){case"value":N=X;break;case"defaultValue":V=X;break;case"multiple":g=X;default:xn(l,u,b,X,f,null)}u=N,f=V,l.multiple=!!g,u!=null?xe(l,!!g,u,!1):f!=null&&xe(l,!!g,f,!0);return;case"textarea":_r("invalid",l),N=b=g=null;for(V in f)if(f.hasOwnProperty(V)&&(X=f[V],X!=null))switch(V){case"value":g=X;break;case"defaultValue":b=X;break;case"children":N=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(91));break;default:xn(l,u,V,X,f,null)}Fe(l,g,b,N);return;case"option":for(de in f)if(f.hasOwnProperty(de)&&(g=f[de],g!=null))switch(de){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:xn(l,u,de,g,f,null)}return;case"dialog":_r("beforetoggle",l),_r("toggle",l),_r("cancel",l),_r("close",l);break;case"iframe":case"object":_r("load",l);break;case"video":case"audio":for(g=0;g<Op.length;g++)_r(Op[g],l);break;case"image":_r("error",l),_r("load",l);break;case"details":_r("toggle",l);break;case"embed":case"source":case"link":_r("error",l),_r("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ce in f)if(f.hasOwnProperty(Ce)&&(g=f[Ce],g!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:xn(l,u,Ce,g,f,null)}return;default:if(oa(u)){for(Ge in f)f.hasOwnProperty(Ge)&&(g=f[Ge],g!==void 0&&S5(l,u,Ge,g,f,void 0));return}}for(X in f)f.hasOwnProperty(X)&&(g=f[X],g!=null&&xn(l,u,X,g,f,null))}function QY(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,N=null,V=null,X=null,de=null,Ce=null,Ge=null;for(Le in f){var Ye=f[Le];if(f.hasOwnProperty(Le)&&Ye!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":de=Ye;default:g.hasOwnProperty(Le)||xn(l,u,Le,null,g,Ye)}}for(var De in g){var Le=g[De];if(Ye=f[De],g.hasOwnProperty(De)&&(Le!=null||Ye!=null))switch(De){case"type":N=Le;break;case"name":b=Le;break;case"checked":Ce=Le;break;case"defaultChecked":Ge=Le;break;case"value":V=Le;break;case"defaultValue":X=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,u));break;default:Le!==Ye&&xn(l,u,De,Le,g,Ye)}}Yt(l,V,X,de,Ce,Ge,N,b);return;case"select":Le=V=X=De=null;for(N in f)if(de=f[N],f.hasOwnProperty(N)&&de!=null)switch(N){case"value":break;case"multiple":Le=de;default:g.hasOwnProperty(N)||xn(l,u,N,null,g,de)}for(b in g)if(N=g[b],de=f[b],g.hasOwnProperty(b)&&(N!=null||de!=null))switch(b){case"value":De=N;break;case"defaultValue":X=N;break;case"multiple":V=N;default:N!==de&&xn(l,u,b,N,g,de)}u=X,f=V,g=Le,De!=null?xe(l,!!f,De,!1):!!g!=!!f&&(u!=null?xe(l,!!f,u,!0):xe(l,!!f,f?[]:"",!1));return;case"textarea":Le=De=null;for(X in f)if(b=f[X],f.hasOwnProperty(X)&&b!=null&&!g.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:xn(l,u,X,null,g,b)}for(V in g)if(b=g[V],N=f[V],g.hasOwnProperty(V)&&(b!=null||N!=null))switch(V){case"value":De=b;break;case"defaultValue":Le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==N&&xn(l,u,V,b,g,N)}Pe(l,De,Le);return;case"option":for(var Ct in f)if(De=f[Ct],f.hasOwnProperty(Ct)&&De!=null&&!g.hasOwnProperty(Ct))switch(Ct){case"selected":l.selected=!1;break;default:xn(l,u,Ct,null,g,De)}for(de in g)if(De=g[de],Le=f[de],g.hasOwnProperty(de)&&De!==Le&&(De!=null||Le!=null))switch(de){case"selected":l.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:xn(l,u,de,De,g,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in f)De=f[Wt],f.hasOwnProperty(Wt)&&De!=null&&!g.hasOwnProperty(Wt)&&xn(l,u,Wt,null,g,De);for(Ce in g)if(De=g[Ce],Le=f[Ce],g.hasOwnProperty(Ce)&&De!==Le&&(De!=null||Le!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,u));break;default:xn(l,u,Ce,De,g,Le)}return;default:if(oa(u)){for(var vn in f)De=f[vn],f.hasOwnProperty(vn)&&De!==void 0&&!g.hasOwnProperty(vn)&&S5(l,u,vn,void 0,g,De);for(Ge in g)De=g[Ge],Le=f[Ge],!g.hasOwnProperty(Ge)||De===Le||De===void 0&&Le===void 0||S5(l,u,Ge,De,g,Le);return}}for(var we in f)De=f[we],f.hasOwnProperty(we)&&De!=null&&!g.hasOwnProperty(we)&&xn(l,u,we,null,g,De);for(Ye in g)De=g[Ye],Le=f[Ye],!g.hasOwnProperty(Ye)||De===Le||De==null&&Le==null||xn(l,u,Ye,De,g,Le)}function I9(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XY(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],N=b.transferSize,V=b.initiatorType,X=b.duration;if(N&&X&&I9(V)){for(V=0,X=b.responseEnd,g+=1;g<f.length;g++){var de=f[g],Ce=de.startTime;if(Ce>X)break;var Ge=de.transferSize,Ye=de.initiatorType;Ge&&I9(Ye)&&(de=de.responseEnd,V+=Ge*(de<X?1:(X-Ce)/(de-Ce)))}if(--g,u+=8*(N+V)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var _5=null,N5=null;function Gy(l){return l.nodeType===9?l:l.ownerDocument}function R9(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M9(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function T5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var A5=null;function YY(){var l=window.event;return l&&l.type==="popstate"?l===A5?!1:(A5=l,!0):(A5=null,!1)}var P9=typeof setTimeout=="function"?setTimeout:void 0,ZY=typeof clearTimeout=="function"?clearTimeout:void 0,D9=typeof Promise=="function"?Promise:void 0,JY=typeof queueMicrotask=="function"?queueMicrotask:typeof D9<"u"?function(l){return D9.resolve(null).then(l).catch(eZ)}:P9;function eZ(l){setTimeout(function(){throw l})}function Fc(l){return l==="head"}function L9(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),ah(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Rp(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Rp(f);for(var N=f.firstChild;N;){var V=N.nextSibling,X=N.nodeName;N[xi]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&N.rel.toLowerCase()==="stylesheet"||f.removeChild(N),N=V}}else f==="body"&&Rp(l.ownerDocument.body);f=b}while(f);ah(u)}function B9(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function j5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":j5(f),Nt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function tZ(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[xi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(N=l.getAttribute("rel"),N==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(N!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(N=l.getAttribute("src"),(N!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&N&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var N=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===N)return l}else return l;if(l=Fs(l.nextSibling),l===null)break}return null}function rZ(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Fs(l.nextSibling),l===null))return null;return l}function $9(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Fs(l.nextSibling),l===null))return null;return l}function E5(l){return l.data==="$?"||l.data==="$~"}function k5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function nZ(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Fs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var C5=null;function U9(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return Fs(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function z9(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function V9(l,u,f){switch(u=Gy(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Rp(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Nt(l)}var qs=new Map,F9=new Set;function Wy(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Cl=J.d;J.d={f:aZ,r:iZ,D:sZ,C:oZ,L:lZ,m:cZ,X:dZ,S:uZ,M:hZ};function aZ(){var l=Cl.f(),u=By();return l||u}function iZ(l){var u=rt(l);u!==null&&u.tag===5&&u.type==="form"?sC(u):Cl.r(l)}var th=typeof document>"u"?null:document;function q9(l,u,f){var g=th;if(g&&typeof u=="string"&&u){var b=At(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),F9.has(b)||(F9.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),ci(u,"link",l),hr(u),g.head.appendChild(u)))}}function sZ(l){Cl.D(l),q9("dns-prefetch",l,null)}function oZ(l,u){Cl.C(l,u),q9("preconnect",l,u)}function lZ(l,u,f){Cl.L(l,u,f);var g=th;if(g&&l&&u){var b='link[rel="preload"][as="'+At(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+At(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+At(f.imageSizes)+'"]')):b+='[href="'+At(l)+'"]';var N=b;switch(u){case"style":N=rh(l);break;case"script":N=nh(l)}qs.has(N)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),qs.set(N,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(Mp(N))||u==="script"&&g.querySelector(Pp(N))||(u=g.createElement("link"),ci(u,"link",l),hr(u),g.head.appendChild(u)))}}function cZ(l,u){Cl.m(l,u);var f=th;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+At(g)+'"][href="'+At(l)+'"]',N=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=nh(l)}if(!qs.has(N)&&(l=m({rel:"modulepreload",href:l},u),qs.set(N,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Pp(N)))return}g=f.createElement("link"),ci(g,"link",l),hr(g),f.head.appendChild(g)}}}function uZ(l,u,f){Cl.S(l,u,f);var g=th;if(g&&l){var b=Xt(g).hoistableStyles,N=rh(l);u=u||"default";var V=b.get(N);if(!V){var X={loading:0,preload:null};if(V=g.querySelector(Mp(N)))X.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=qs.get(N))&&O5(l,f);var de=V=g.createElement("link");hr(de),ci(de,"link",l),de._p=new Promise(function(Ce,Ge){de.onload=Ce,de.onerror=Ge}),de.addEventListener("load",function(){X.loading|=1}),de.addEventListener("error",function(){X.loading|=2}),X.loading|=4,Ky(V,u,g)}V={type:"stylesheet",instance:V,count:1,state:X},b.set(N,V)}}}function dZ(l,u){Cl.X(l,u);var f=th;if(f&&l){var g=Xt(f).hoistableScripts,b=nh(l),N=g.get(b);N||(N=f.querySelector(Pp(b)),N||(l=m({src:l,async:!0},u),(u=qs.get(b))&&I5(l,u),N=f.createElement("script"),hr(N),ci(N,"link",l),f.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},g.set(b,N))}}function hZ(l,u){Cl.M(l,u);var f=th;if(f&&l){var g=Xt(f).hoistableScripts,b=nh(l),N=g.get(b);N||(N=f.querySelector(Pp(b)),N||(l=m({src:l,async:!0,type:"module"},u),(u=qs.get(b))&&I5(l,u),N=f.createElement("script"),hr(N),ci(N,"link",l),f.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},g.set(b,N))}}function H9(l,u,f,g){var b=(b=Ve.current)?Wy(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=rh(f.href),f=Xt(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=rh(f.href);var N=Xt(b).hoistableStyles,V=N.get(l);if(V||(b=b.ownerDocument||b,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(l,V),(N=b.querySelector(Mp(l)))&&!N._p&&(V.instance=N,V.state.loading=5),qs.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},qs.set(l,f),N||fZ(b,l,f,V.state))),u&&g===null)throw Error(n(528,""));return V}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=nh(f),f=Xt(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function rh(l){return'href="'+At(l)+'"'}function Mp(l){return'link[rel="stylesheet"]['+l+"]"}function G9(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function fZ(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),ci(u,"link",f),hr(u),l.head.appendChild(u))}function nh(l){return'[src="'+At(l)+'"]'}function Pp(l){return"script[async]"+l}function W9(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+At(f.href)+'"]');if(g)return u.instance=g,hr(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),hr(g),ci(g,"style",b),Ky(g,f.precedence,l),u.instance=g;case"stylesheet":b=rh(f.href);var N=l.querySelector(Mp(b));if(N)return u.state.loading|=4,u.instance=N,hr(N),N;g=G9(f),(b=qs.get(b))&&O5(g,b),N=(l.ownerDocument||l).createElement("link"),hr(N);var V=N;return V._p=new Promise(function(X,de){V.onload=X,V.onerror=de}),ci(N,"link",g),u.state.loading|=4,Ky(N,f.precedence,l),u.instance=N;case"script":return N=nh(f.src),(b=l.querySelector(Pp(N)))?(u.instance=b,hr(b),b):(g=f,(b=qs.get(N))&&(g=m({},f),I5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),hr(b),ci(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Ky(g,f.precedence,l));return u.instance}function Ky(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,N=b,V=0;V<g.length;V++){var X=g[V];if(X.dataset.precedence===u)N=X;else if(N!==b)break}N?N.parentNode.insertBefore(l,N.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function O5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function I5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Qy=null;function K9(l,u,f){if(Qy===null){var g=new Map,b=Qy=new Map;b.set(f,g)}else b=Qy,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var N=f[b];if(!(N[xi]||N[Jr]||l==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var V=N.getAttribute(u)||"";V=l+V;var X=g.get(V);X?X.push(N):g.set(V,[N])}}return g}function Q9(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function pZ(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function X9(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function mZ(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=rh(g.href),N=u.querySelector(Mp(b));if(N){u=N._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=Xy.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=N,hr(N);return}N=u.ownerDocument||u,g=G9(g),(b=qs.get(b))&&O5(g,b),N=N.createElement("link"),hr(N);var V=N;V._p=new Promise(function(X,de){V.onload=X,V.onerror=de}),ci(N,"link",g),f.instance=N}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=Xy.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var R5=0;function gZ(l,u){return l.stylesheets&&l.count===0&&Zy(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&Zy(l,l.stylesheets),l.unsuspend){var N=l.unsuspend;l.unsuspend=null,N()}},6e4+u);0<l.imgBytes&&R5===0&&(R5=62500*XY());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Zy(l,l.stylesheets),l.unsuspend)){var N=l.unsuspend;l.unsuspend=null,N()}},(l.imgBytes>R5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function Xy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zy(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Yy=null;function Zy(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Yy=new Map,u.forEach(yZ,l),Yy=null,Xy.call(l))}function yZ(l,u){if(!(u.state.loading&4)){var f=Yy.get(l);if(f)var g=f.get(null);else{f=new Map,Yy.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<b.length;N++){var V=b[N];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(f.set(V.dataset.precedence,V),g=V)}g&&f.set(null,g)}b=u.instance,V=b.getAttribute("data-precedence"),N=f.get(V)||g,N===g&&f.set(null,b),f.set(V,b),this.count++,g=Xy.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),N?N.parentNode.insertBefore(b,N.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var Dp={$$typeof:R,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function xZ(l,u,f,g,b,N,V,X,de){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=N,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function Y9(l,u,f,g,b,N,V,X,de,Ce,Ge,Ye){return l=new xZ(l,u,f,V,de,Ce,Ge,Ye,X),u=1,N===!0&&(u|=24),N=gs(3,null,null,u),l.current=N,N.stateNode=l,u=h4(),u.refCount++,l.pooledCache=u,u.refCount++,N.memoizedState={element:g,isDehydrated:f,cache:u},g4(N),l}function Z9(l){return l?(l=M0,l):M0}function J9(l,u,f,g,b,N){b=Z9(b),g.context===null?g.context=b:g.pendingContext=b,g=Ic(u),g.payload={element:f},N=N===void 0?null:N,N!==null&&(g.callback=N),f=Rc(l,g,u),f!==null&&(Wi(f,l,u),pp(f,l,u))}function eO(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function M5(l,u){eO(l,u),(l=l.alternate)&&eO(l,u)}function tO(l){if(l.tag===13||l.tag===31){var u=rd(l,67108864);u!==null&&Wi(u,l,67108864),M5(l,67108864)}}function rO(l){if(l.tag===13||l.tag===31){var u=ws();u=ni(u);var f=rd(l,u);f!==null&&Wi(f,l,u),M5(l,u)}}var Jy=!0;function vZ(l,u,f,g){var b=H.T;H.T=null;var N=J.p;try{J.p=2,P5(l,u,f,g)}finally{J.p=N,H.T=b}}function bZ(l,u,f,g){var b=H.T;H.T=null;var N=J.p;try{J.p=8,P5(l,u,f,g)}finally{J.p=N,H.T=b}}function P5(l,u,f,g){if(Jy){var b=D5(g);if(b===null)w5(l,u,g,ex,f),aO(l,g);else if(SZ(b,l,u,f,g))g.stopPropagation();else if(aO(l,g),u&4&&-1<wZ.indexOf(l)){for(;b!==null;){var N=rt(b);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var V=Ut(N.pendingLanes);if(V!==0){var X=N;for(X.pendingLanes|=2,X.entangledLanes|=2;V;){var de=1<<31-tt(V);X.entanglements[1]|=de,V&=~de}Bo(N),(Qr&6)===0&&(Dy=Ue()+500,Cp(0))}}break;case 31:case 13:X=rd(N,2),X!==null&&Wi(X,N,2),By(),M5(N,2)}if(N=D5(g),N===null&&w5(l,u,g,ex,f),N===b)break;b=N}b!==null&&g.stopPropagation()}else w5(l,u,g,null,f)}}function D5(l){return l=Io(l),L5(l)}var ex=null;function L5(l){if(ex=null,l=pe(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return ex=l,null}function nO(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case ht:return 2;case dt:return 8;case zt:case tr:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var B5=!1,qc=null,Hc=null,Gc=null,Lp=new Map,Bp=new Map,Wc=[],wZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aO(l,u){switch(l){case"focusin":case"focusout":qc=null;break;case"dragenter":case"dragleave":Hc=null;break;case"mouseover":case"mouseout":Gc=null;break;case"pointerover":case"pointerout":Lp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bp.delete(u.pointerId)}}function $p(l,u,f,g,b,N){return l===null||l.nativeEvent!==N?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:N,targetContainers:[b]},u!==null&&(u=rt(u),u!==null&&tO(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function SZ(l,u,f,g,b){switch(u){case"focusin":return qc=$p(qc,l,u,f,g,b),!0;case"dragenter":return Hc=$p(Hc,l,u,f,g,b),!0;case"mouseover":return Gc=$p(Gc,l,u,f,g,b),!0;case"pointerover":var N=b.pointerId;return Lp.set(N,$p(Lp.get(N)||null,l,u,f,g,b)),!0;case"gotpointercapture":return N=b.pointerId,Bp.set(N,$p(Bp.get(N)||null,l,u,f,g,b)),!0}return!1}function iO(l){var u=pe(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,ai(l.priority,function(){rO(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,ai(l.priority,function(){rO(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function tx(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=D5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Ir=g,f.target.dispatchEvent(g),Ir=null}else return u=rt(f),u!==null&&tO(u),l.blockedOn=f,!1;u.shift()}return!0}function sO(l,u,f){tx(l)&&f.delete(u)}function _Z(){B5=!1,qc!==null&&tx(qc)&&(qc=null),Hc!==null&&tx(Hc)&&(Hc=null),Gc!==null&&tx(Gc)&&(Gc=null),Lp.forEach(sO),Bp.forEach(sO)}function rx(l,u){l.blockedOn===u&&(l.blockedOn=null,B5||(B5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_Z)))}var nx=null;function oO(l){nx!==l&&(nx=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){nx===l&&(nx=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(L5(g||f)===null)continue;break}var N=rt(f);N!==null&&(l.splice(u,3),u-=3,D4(N,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function ah(l){function u(de){return rx(de,l)}qc!==null&&rx(qc,l),Hc!==null&&rx(Hc,l),Gc!==null&&rx(Gc,l),Lp.forEach(u),Bp.forEach(u);for(var f=0;f<Wc.length;f++){var g=Wc[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<Wc.length&&(f=Wc[0],f.blockedOn===null);)iO(f),f.blockedOn===null&&Wc.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],N=f[g+1],V=b[mn]||null;if(typeof N=="function")V||oO(f);else if(V){var X=null;if(N&&N.hasAttribute("formAction")){if(b=N,V=N[mn]||null)X=V.formAction;else if(L5(b)!==null)continue}else X=V.action;typeof X=="function"?f[g+1]=X:(f.splice(g,3),g-=3),oO(f)}}}function lO(){function l(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(V){return b=V})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function $5(l){this._internalRoot=l}ax.prototype.render=$5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=ws();J9(f,g,l,u,null,null)},ax.prototype.unmount=$5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;J9(l.current,2,null,l,null,null),By(),u[Nn]=null}};function ax(l){this._internalRoot=l}ax.prototype.unstable_scheduleHydration=function(l){if(l){var u=pn();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Wc.length&&u!==0&&u<Wc[f].priority;f++);Wc.splice(f,0,l),f===0&&iO(l)}};var cO=e.version;if(cO!=="19.2.4")throw Error(n(527,cO,"19.2.4"));J.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var NZ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ix=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ix.isDisabled&&ix.supportsFiber)try{jt=ix.inject(NZ),Dt=ix}catch{}}return zp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=gC,N=yC,V=xC;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError)),u=Y9(l,1,!1,null,null,f,g,null,b,N,V,lO),l[Nn]=u.current,b5(l),new $5(u)},zp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",N=gC,V=yC,X=xC,de=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(N=f.onUncaughtError),f.onCaughtError!==void 0&&(V=f.onCaughtError),f.onRecoverableError!==void 0&&(X=f.onRecoverableError),f.formState!==void 0&&(de=f.formState)),u=Y9(l,1,!0,u,f??null,g,b,de,N,V,X,lO),u.context=Z9(null),f=u.current,g=ws(),g=ni(g),b=Ic(g),b.callback=null,Rc(f,b,g),f=g,u.current.lanes=f,hn(u,f),Bo(u),l[Nn]=u.current,b5(l),new ax(u)},zp.version="19.2.4",zp}var bO;function DZ(){if(bO)return V5.exports;bO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),V5.exports=PZ(),V5.exports}var LZ=DZ();const BZ=Xr(LZ);var Ba=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Ba||{});const jr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Da=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(Da||{});const tT={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},wO=[1.5,1.4,1.3,1.2,1.1],Um=5,zm=1;function $Z(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function Qx(t,e){const r=new Set;return t.forEach(n=>{const a=$Z(n,e);a&&r.add(a)}),Array.from(r).sort()}const UZ=[{id:"participation",name:"Participation",icon:"",xpAmount:25,fluxAmount:5,color:"blue"},{id:"helping",name:"Helping Others",icon:"",xpAmount:30,fluxAmount:10,color:"green"},{id:"leadership",name:"Leadership",icon:"",xpAmount:35,fluxAmount:10,color:"amber"},{id:"focus",name:"Great Focus",icon:"",xpAmount:20,fluxAmount:5,color:"purple"},{id:"creativity",name:"Creativity",icon:"",xpAmount:30,fluxAmount:8,color:"pink"},{id:"perseverance",name:"Perseverance",icon:"",xpAmount:25,fluxAmount:5,color:"orange"}];var SO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},zZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},oV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let y=(c&15)<<2|h>>6,x=h&63;d||(x=64,o||(y=64)),n.push(r[p],r[m],r[y],r[x])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new VZ;const y=i<<2|c>>4;if(n.push(y),h!==64){const x=c<<4&240|h>>2;if(n.push(x),m!==64){const _=h<<6&192|m;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FZ=function(t){const e=sV(t);return oV.encodeByteArray(e,!0)},yv=function(t){return FZ(t).replace(/\./g,"")},lV=function(t){try{return oV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HZ=()=>qZ().__FIREBASE_DEFAULTS__,GZ=()=>{if(typeof process>"u"||typeof SO>"u")return;const t=SO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lV(t[1]);return e&&JSON.parse(e)},h2=()=>{try{return HZ()||GZ()||WZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cV=t=>{var e,r;return(r=(e=h2())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},uV=t=>{const e=cV(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},dV=()=>{var t;return(t=h2())===null||t===void 0?void 0:t.config},hV=t=>{var e;return(e=h2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yv(JSON.stringify(r)),yv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(za())}function YZ(){var t;const e=(t=h2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eJ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tJ(){const t=za();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fV(){return!YZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pV(){try{return typeof indexedDB=="object"}catch{return!1}}function rJ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nJ="FirebaseError";class Eo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=nJ,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zg.prototype.create)}}class Zg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?aJ(i,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new Eo(a,c,n)}}function aJ(t,e){return t.replace(iJ,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const iJ=/\{\$([^}]+)}/g;function sJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=e[a];if(_O(i)&&_O(o)){if(!Uh(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function _O(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function oJ(t,e){const r=new lJ(t,e);return r.subscribe.bind(r)}class lJ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");cJ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=G5),a.error===void 0&&(a.error=G5),a.complete===void 0&&(a.complete=G5);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cJ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function G5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class tc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new KZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hJ(e))try{this.getOrInitializeService({instanceIdentifier:_d})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=_d){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_d){return this.instances.has(e)}getOptions(e=_d){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:dJ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=_d){return this.component?this.component.multipleInstances?e:_d:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dJ(t){return t===_d?void 0:t}function hJ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fJ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new uJ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Er||(Er={}));const pJ={debug:Er.DEBUG,verbose:Er.VERBOSE,info:Er.INFO,warn:Er.WARN,error:Er.ERROR,silent:Er.SILENT},mJ=Er.INFO,gJ={[Er.DEBUG]:"log",[Er.VERBOSE]:"log",[Er.INFO]:"info",[Er.WARN]:"warn",[Er.ERROR]:"error"},yJ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=gJ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cj{constructor(e){this.name=e,this._logLevel=mJ,this._logHandler=yJ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Er))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pJ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Er.DEBUG,...e),this._logHandler(this,Er.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Er.VERBOSE,...e),this._logHandler(this,Er.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Er.INFO,...e),this._logHandler(this,Er.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Er.WARN,...e),this._logHandler(this,Er.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Er.ERROR,...e),this._logHandler(this,Er.ERROR,...e)}}const xJ=(t,e)=>e.some(r=>t instanceof r);let NO,TO;function vJ(){return NO||(NO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bJ(){return TO||(TO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mV=new WeakMap,rT=new WeakMap,gV=new WeakMap,W5=new WeakMap,Oj=new WeakMap;function wJ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(vu(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&mV.set(r,t)}).catch(()=>{}),Oj.set(e,t),e}function SJ(t){if(rT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});rT.set(t,e)}let nT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return rT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gV.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return vu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _J(t){nT=t(nT)}function NJ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(K5(this),e,...r);return gV.set(n,e.sort?e.sort():[e]),vu(n)}:bJ().includes(t)?function(...e){return t.apply(K5(this),e),vu(mV.get(this))}:function(...e){return vu(t.apply(K5(this),e))}}function TJ(t){return typeof t=="function"?NJ(t):(t instanceof IDBTransaction&&SJ(t),xJ(t,vJ())?new Proxy(t,nT):t)}function vu(t){if(t instanceof IDBRequest)return wJ(t);if(W5.has(t))return W5.get(t);const e=TJ(t);return e!==t&&(W5.set(t,e),Oj.set(e,t)),e}const K5=t=>Oj.get(t);function AJ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),c=vu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(vu(o.result),d.oldVersion,d.newVersion,vu(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const jJ=["get","getKey","getAll","getAllKeys","count"],EJ=["put","add","delete","clear"],Q5=new Map;function AO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Q5.get(e))return Q5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=EJ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||jJ.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return Q5.set(e,i),i}_J(t=>({...t,get:(e,r,n)=>AO(e,r)||t.get(e,r,n),has:(e,r)=>!!AO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(CJ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function CJ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const aT="@firebase/app",jO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Cj("@firebase/app"),OJ="@firebase/app-compat",IJ="@firebase/analytics-compat",RJ="@firebase/analytics",MJ="@firebase/app-check-compat",PJ="@firebase/app-check",DJ="@firebase/auth",LJ="@firebase/auth-compat",BJ="@firebase/database",$J="@firebase/data-connect",UJ="@firebase/database-compat",zJ="@firebase/functions",VJ="@firebase/functions-compat",FJ="@firebase/installations",qJ="@firebase/installations-compat",HJ="@firebase/messaging",GJ="@firebase/messaging-compat",WJ="@firebase/performance",KJ="@firebase/performance-compat",QJ="@firebase/remote-config",XJ="@firebase/remote-config-compat",YJ="@firebase/storage",ZJ="@firebase/storage-compat",JJ="@firebase/firestore",eee="@firebase/vertexai-preview",tee="@firebase/firestore-compat",ree="firebase",nee="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="[DEFAULT]",aee={[aT]:"fire-core",[OJ]:"fire-core-compat",[RJ]:"fire-analytics",[IJ]:"fire-analytics-compat",[PJ]:"fire-app-check",[MJ]:"fire-app-check-compat",[DJ]:"fire-auth",[LJ]:"fire-auth-compat",[BJ]:"fire-rtdb",[$J]:"fire-data-connect",[UJ]:"fire-rtdb-compat",[zJ]:"fire-fn",[VJ]:"fire-fn-compat",[FJ]:"fire-iid",[qJ]:"fire-iid-compat",[HJ]:"fire-fcm",[GJ]:"fire-fcm-compat",[WJ]:"fire-perf",[KJ]:"fire-perf-compat",[QJ]:"fire-rc",[XJ]:"fire-rc-compat",[YJ]:"fire-gcs",[ZJ]:"fire-gcs-compat",[JJ]:"fire-fst",[tee]:"fire-fst-compat",[eee]:"fire-vertex","fire-js":"fire-js",[ree]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map,iee=new Map,sT=new Map;function EO(t,e){try{t.container.addComponent(e)}catch(r){rc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Eu(t){const e=t.name;if(sT.has(e))return rc.debug(`There were multiple attempts to register component ${e}.`),!1;sT.set(e,t);for(const r of xv.values())EO(r,t);for(const r of iee.values())EO(r,t);return!0}function e1(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function $l(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const see={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bu=new Zg("app","Firebase",see);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oee{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new tc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=nee;function yV(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:iT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw bu.create("bad-app-name",{appName:String(a)});if(r||(r=dV()),!r)throw bu.create("no-options");const i=xv.get(a);if(i){if(Uh(r,i.options)&&Uh(n,i.config))return i;throw bu.create("duplicate-app",{appName:a})}const o=new fJ(a);for(const d of sT.values())o.addComponent(d);const c=new oee(r,n,o);return xv.set(a,c),c}function Ij(t=iT){const e=xv.get(t);if(!e&&t===iT&&dV())return yV();if(!e)throw bu.create("no-app",{appName:t});return e}function Js(t,e,r){var n;let a=(n=aee[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rc.warn(c.join(" "));return}Eu(new tc(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lee="firebase-heartbeat-database",cee=1,Vm="firebase-heartbeat-store";let X5=null;function xV(){return X5||(X5=AJ(lee,cee,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vm)}catch(r){console.warn(r)}}}}).catch(t=>{throw bu.create("idb-open",{originalErrorMessage:t.message})})),X5}async function uee(t){try{const r=(await xV()).transaction(Vm),n=await r.objectStore(Vm).get(vV(t));return await r.done,n}catch(e){if(e instanceof Eo)rc.warn(e.message);else{const r=bu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rc.warn(r.message)}}}async function kO(t,e){try{const n=(await xV()).transaction(Vm,"readwrite");await n.objectStore(Vm).put(e,vV(t)),await n.done}catch(r){if(r instanceof Eo)rc.warn(r.message);else{const n=bu.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});rc.warn(n.message)}}}function vV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dee=1024,hee=720*60*60*1e3;class fee{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new mee(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=CO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=hee}),this._storage.overwrite(this._heartbeatsCache))}catch(n){rc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=CO(),{heartbeatsToSend:n,unsentEntries:a}=pee(this._heartbeatsCache.heartbeats),i=yv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return rc.warn(r),""}}}function CO(){return new Date().toISOString().substring(0,10)}function pee(t,e=dee){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),OO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),OO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class mee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pV()?rJ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await uee(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return kO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return kO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function OO(t){return yv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gee(t){Eu(new tc("platform-logger",e=>new kJ(e),"PRIVATE")),Eu(new tc("heartbeat",e=>new fee(e),"PRIVATE")),Js(aT,jO,t),Js(aT,jO,"esm2017"),Js("fire-js","")}gee("");var yee="firebase",xee="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Js(yee,xee,"app");function Rj(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function bV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vee=bV,wV=new Zg("auth","Firebase",bV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Cj("@firebase/auth");function bee(t,...e){vv.logLevel<=Er.WARN&&vv.warn(`Auth (${y0}): ${t}`,...e)}function Xx(t,...e){vv.logLevel<=Er.ERROR&&vv.error(`Auth (${y0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t,...e){throw Pj(t,...e)}function No(t,...e){return Pj(t,...e)}function Mj(t,e,r){const n=Object.assign(Object.assign({},vee()),{[e]:r});return new Zg("auth","Firebase",n).create(e,{appName:t.name})}function Ud(t){return Mj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wee(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Zo(t,"argument-error"),Mj(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pj(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return wV.create(t,...e)}function nr(t,e,...r){if(!t)throw Pj(e,...r)}function Ul(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xx(e),new Error(e)}function nc(t,e){t||Ul(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function See(){return IO()==="http:"||IO()==="https:"}function IO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(See()||JZ()||"connection"in navigator)?navigator.onLine:!0}function Nee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,r){this.shortDelay=e,this.longDelay=r,nc(r>e,"Short delay should be less than long delay!"),this.isMobile=XZ()||eJ()}get(){return _ee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t,e){nc(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ul("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ul("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ul("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee=new t1(3e4,6e4);function Lj(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Of(t,e,r,n,a={}){return _V(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=Jg(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return ZZ()||(h.referrerPolicy="no-referrer"),SV.fetch()(NV(t,t.config.apiHost,r,c),h)})}async function _V(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Tee),e);try{const a=new Eee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ox(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ox(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw ox(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw ox(t,"user-disabled",o);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Mj(t,p,h);Zo(t,p)}}catch(a){if(a instanceof Eo)throw a;Zo(t,"network-request-failed",{message:String(a)})}}async function jee(t,e,r,n,a={}){const i=await Of(t,e,r,n,a);return"mfaPendingCredential"in i&&Zo(t,"multi-factor-auth-required",{_serverResponse:i}),i}function NV(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?Dj(t.config,a):`${t.config.apiScheme}://${a}`}class Eee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(No(this.auth,"network-request-failed")),Aee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ox(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=No(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kee(t,e){return Of(t,"POST","/v1/accounts:delete",e)}async function TV(t,e){return Of(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Cee(t,e=!1){const r=_n(t),n=await r.getIdToken(e),a=Bj(n);nr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:ym(Y5(a.auth_time)),issuedAtTime:ym(Y5(a.iat)),expirationTime:ym(Y5(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Y5(t){return Number(t)*1e3}function Bj(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Xx("JWT malformed, contained fewer than 3 sections"),null;try{const a=lV(r);return a?JSON.parse(a):(Xx("Failed to decode base64 JWT payload"),null)}catch(a){return Xx("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function RO(t){const e=Bj(t);return nr(e,"internal-error"),nr(typeof e.exp<"u","internal-error"),nr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Eo&&Oee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Oee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ym(this.lastLoginAt),this.creationTime=ym(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bv(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Fm(t,TV(r,{idToken:n}));nr(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?AV(i.providerUserInfo):[],c=Mee(t.providerData,o),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new lT(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Ree(t){const e=_n(t);await bv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function AV(t){return t.map(e=>{var{providerId:r}=e,n=Rj(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pee(t,e){const r=await _V(t,{},async()=>{const n=Jg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=NV(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",SV.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Dee(t,e){return Of(t,"POST","/v2/accounts:revokeToken",Lj(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nr(e.idToken,"internal-error"),nr(typeof e.idToken<"u","internal-error"),nr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){nr(e.length!==0,"internal-error");const r=RO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(nr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await Pee(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,o=new Th;return n&&(nr(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(nr(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(nr(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Th,this.toJSON())}_performRefresh(){return Ul("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t,e){nr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=Rj(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Iee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Fm(this,this.stsTokenManager.getToken(this.auth,e));return nr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Cee(this,e)}reload(){return Ree(this)}_assign(e){this!==e&&(nr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new zl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await bv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($l(this.auth.app))return Promise.reject(Ud(this.auth));const e=await this.getIdToken();return await Fm(this,kee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,o,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(a=r.email)!==null&&a!==void 0?a:void 0,x=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=r.photoURL)!==null&&o!==void 0?o:void 0,S=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,E=(h=r.createdAt)!==null&&h!==void 0?h:void 0,I=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:R,emailVerified:L,isAnonymous:C,providerData:O,stsTokenManager:A}=r;nr(R&&A,e,"internal-error");const j=Th.fromJSON(this.name,A);nr(typeof R=="string",e,"internal-error"),Qc(m,e.name),Qc(y,e.name),nr(typeof L=="boolean",e,"internal-error"),nr(typeof C=="boolean",e,"internal-error"),Qc(x,e.name),Qc(_,e.name),Qc(S,e.name),Qc(w,e.name),Qc(E,e.name),Qc(I,e.name);const k=new zl({uid:R,auth:e,email:y,emailVerified:L,displayName:m,isAnonymous:C,photoURL:_,phoneNumber:x,tenantId:S,stsTokenManager:j,createdAt:E,lastLoginAt:I});return O&&Array.isArray(O)&&(k.providerData=O.map(z=>Object.assign({},z))),w&&(k._redirectEventId=w),k}static async _fromIdTokenResponse(e,r,n=!1){const a=new Th;a.updateFromServerResponse(r);const i=new zl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await bv(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];nr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?AV(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new Th;c.updateFromIdToken(n);const d=new zl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new lT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new Map;function Vl(t){nc(t instanceof Function,"Expected a class definition");let e=MO.get(t);return e?(nc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,MO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}jV.type="NONE";const PO=jV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t,e,r){return`firebase:${t}:${e}:${r}`}class Ah{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=Yx(this.userKey,a.apiKey,i),this.fullPersistenceKey=Yx("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ah(Vl(PO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Vl(PO);const o=Yx(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(o);if(p){const m=zl._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Ah(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ah(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RV(e))return"Blackberry";if(MV(e))return"Webos";if(kV(e))return"Safari";if((e.includes("chrome/")||CV(e))&&!e.includes("edge/"))return"Chrome";if(IV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function EV(t=za()){return/firefox\//i.test(t)}function kV(t=za()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CV(t=za()){return/crios\//i.test(t)}function OV(t=za()){return/iemobile/i.test(t)}function IV(t=za()){return/android/i.test(t)}function RV(t=za()){return/blackberry/i.test(t)}function MV(t=za()){return/webos/i.test(t)}function $j(t=za()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Lee(t=za()){var e;return $j(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Bee(){return tJ()&&document.documentMode===10}function PV(t=za()){return $j(t)||IV(t)||MV(t)||RV(t)||/windows phone/i.test(t)||OV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t,e=[]){let r;switch(t){case"Browser":r=DO(za());break;case"Worker":r=`${DO(za())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${y0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uee(t,e={}){return Of(t,"GET","/v2/passwordPolicy",Lj(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zee=6;class Vee{constructor(e){var r,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:zee,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fee{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LO(this),this.idTokenSubscription=new LO(this),this.beforeStateQueue=new $ee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Vl(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Ah.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await TV(this,{idToken:e}),n=await zl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if($l(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return nr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await bv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($l(this.app))return Promise.reject(Ud(this));const r=e?_n(e):null;return r&&nr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&nr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $l(this.app)?Promise.reject(Ud(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $l(this.app)?Promise.reject(Ud(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Uee(this),r=new Vee(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Dee(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Vl(e)||this._popupRedirectResolver;nr(r,this,"argument-error"),this.redirectPersistenceManager=await Ah.create(this,[Vl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(nr(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&bee(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function f2(t){return _n(t)}class LO{constructor(e){this.auth=e,this.observer=null,this.addObserver=oJ(r=>this.observer=r)}get next(){return nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uj={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qee(t){Uj=t}function Hee(t){return Uj.loadJS(t)}function Gee(){return Uj.gapiScript}function Wee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kee(t,e){const r=e1(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(Uh(i,e??{}))return a;Zo(a,"already-initialized")}return r.initialize({options:e})}function Qee(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Vl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Xee(t,e,r){const n=f2(t);nr(n._canInitEmulator,n,"emulator-config-failed"),nr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=LV(e),{host:o,port:c}=Yee(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),Zee()}function LV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Yee(t){const e=LV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:BO(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:BO(o)}}}function BO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Zee(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ul("not implemented")}_getIdTokenResponse(e){return Ul("not implemented")}_linkToIdToken(e,r){return Ul("not implemented")}_getReauthenticationResolver(e){return Ul("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(t,e){return jee(t,"POST","/v1/accounts:signInWithIdp",Lj(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jee="http://localhost";class Hd extends BV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Hd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Zo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=Rj(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Hd(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return jh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,jh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,jh(e,r)}buildRequest(){const e={requestUri:Jee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Jg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1 extends zj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends r1{constructor(){super("facebook.com")}static credential(e){return Hd._fromParams({providerId:nu.PROVIDER_ID,signInMethod:nu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nu.credentialFromTaggedObject(e)}static credentialFromError(e){return nu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nu.credential(e.oauthAccessToken)}catch{return null}}}nu.FACEBOOK_SIGN_IN_METHOD="facebook.com";nu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends r1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Hd._fromParams({providerId:Ll.PROVIDER_ID,signInMethod:Ll.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ll.credentialFromTaggedObject(e)}static credentialFromError(e){return Ll.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ll.credential(r,n)}catch{return null}}}Ll.GOOGLE_SIGN_IN_METHOD="google.com";Ll.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends r1{constructor(){super("github.com")}static credential(e){return Hd._fromParams({providerId:au.PROVIDER_ID,signInMethod:au.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return au.credentialFromTaggedObject(e)}static credentialFromError(e){return au.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return au.credential(e.oauthAccessToken)}catch{return null}}}au.GITHUB_SIGN_IN_METHOD="github.com";au.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends r1{constructor(){super("twitter.com")}static credential(e,r){return Hd._fromParams({providerId:iu.PROVIDER_ID,signInMethod:iu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return iu.credentialFromTaggedObject(e)}static credentialFromError(e){return iu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return iu.credential(r,n)}catch{return null}}}iu.TWITTER_SIGN_IN_METHOD="twitter.com";iu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await zl._fromIdTokenResponse(e,n,a),o=$O(n);return new zh({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=$O(n);return new zh({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function $O(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends Eo{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,wv.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new wv(e,r,n,a)}}function $V(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?wv._fromErrorAndOperation(t,i,e,n):i})}async function ete(t,e,r=!1){const n=await Fm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return zh._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tte(t,e,r=!1){const{auth:n}=t;if($l(n.app))return Promise.reject(Ud(n));const a="reauthenticate";try{const i=await Fm(t,$V(n,a,e,t),r);nr(i.idToken,n,"internal-error");const o=Bj(i.idToken);nr(o,n,"internal-error");const{sub:c}=o;return nr(t.uid===c,n,"user-mismatch"),zh._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zo(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rte(t,e,r=!1){if($l(t.app))return Promise.reject(Ud(t));const n="signIn",a=await $V(t,n,e),i=await zh._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function nte(t,e,r,n){return _n(t).onIdTokenChanged(e,r,n)}function ate(t,e,r){return _n(t).beforeAuthStateChanged(e,r)}function ite(t,e,r,n){return _n(t).onAuthStateChanged(e,r,n)}function ste(t){return _n(t).signOut()}const Sv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Sv,"1"),this.storage.removeItem(Sv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote=1e3,lte=10;class zV extends UV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);Bee()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,lte):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},ote)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}zV.type="LOCAL";const cte=zV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV extends UV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}VV.type="SESSION";const FV=VV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ute(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new p2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,i)),d=await ute(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}p2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=Vj("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(y.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(){return window}function hte(t){Qo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(){return typeof Qo().WorkerGlobalScope<"u"&&typeof Qo().importScripts=="function"}async function fte(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pte(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mte(){return qV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="firebaseLocalStorageDb",gte=1,_v="firebaseLocalStorage",GV="fbase_key";class n1{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function m2(t,e){return t.transaction([_v],e?"readwrite":"readonly").objectStore(_v)}function yte(){const t=indexedDB.deleteDatabase(HV);return new n1(t).toPromise()}function cT(){const t=indexedDB.open(HV,gte);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(_v,{keyPath:GV})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(_v)?e(n):(n.close(),await yte(),e(await cT()))})})}async function UO(t,e,r){const n=m2(t,!0).put({[GV]:e,value:r});return new n1(n).toPromise()}async function xte(t,e){const r=m2(t,!1).get(e),n=await new n1(r).toPromise();return n===void 0?null:n.value}function zO(t,e){const r=m2(t,!0).delete(e);return new n1(r).toPromise()}const vte=800,bte=3;class WV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>bte)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p2._getInstance(mte()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await fte(),!this.activeServiceWorker)return;this.sender=new dte(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pte()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cT();return await UO(e,Sv,"1"),await zO(e,Sv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>UO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>xte(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>zO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=m2(a,!1).getAll();return new n1(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WV.type="LOCAL";const wte=WV;new t1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t,e){return e?Vl(e):(nr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj extends BV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return jh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return jh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Ste(t){return rte(t.auth,new Fj(t),t.bypassAuthState)}function _te(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),tte(r,new Fj(t),t.bypassAuthState)}async function Nte(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),ete(r,new Fj(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ste;case"linkViaPopup":case"linkViaRedirect":return Nte;case"reauthViaPopup":case"reauthViaRedirect":return _te;default:Zo(this.auth,"internal-error")}}resolve(e){nc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tte=new t1(2e3,1e4);async function Ate(t,e,r){if($l(t.app))return Promise.reject(No(t,"operation-not-supported-in-this-environment"));const n=f2(t);wee(t,e,zj);const a=KV(n,r);return new Id(n,"signInViaPopup",e,a).executeNotNull()}class Id extends QV{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Id.currentPopupAction&&Id.currentPopupAction.cancel(),Id.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nr(e,this.auth,"internal-error"),e}async onExecution(){nc(this.filter.length===1,"Popup operations only handle one event");const e=Vj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(No(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(No(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Id.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(No(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tte.get())};e()}}Id.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jte="pendingRedirect",Zx=new Map;class Ete extends QV{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Zx.get(this.auth._key());if(!e){try{const n=await kte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Zx.set(this.auth._key(),e)}return this.bypassAuthState||Zx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kte(t,e){const r=Ite(e),n=Ote(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Cte(t,e){Zx.set(t._key(),e)}function Ote(t){return Vl(t._redirectPersistence)}function Ite(t){return Yx(jte,t.config.apiKey,t.name)}async function Rte(t,e,r=!1){if($l(t.app))return Promise.reject(Ud(t));const n=f2(t),a=KV(n,e),o=await new Ete(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mte=600*1e3;class Pte{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dte(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!XV(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(No(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Mte&&this.cachedEventUids.clear(),this.cachedEventUids.has(VO(e))}saveEventToCache(e){this.cachedEventUids.add(VO(e)),this.lastProcessedEventTime=Date.now()}}function VO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Dte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lte(t,e={}){return Of(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bte=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$te=/^https?/;async function Ute(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Lte(t);for(const r of e)try{if(zte(r))return}catch{}Zo(t,"unauthorized-domain")}function zte(t){const e=oT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!$te.test(r))return!1;if(Bte.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vte=new t1(3e4,6e4);function FO(){const t=Qo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Fte(t){return new Promise((e,r)=>{var n,a,i;function o(){FO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FO(),r(No(t,"network-request-failed"))},timeout:Vte.get()})}if(!((a=(n=Qo().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Qo().gapi)===null||i===void 0)&&i.load)o();else{const c=Wee("iframefcb");return Qo()[c]=()=>{gapi.load?o():r(No(t,"network-request-failed"))},Hee(`${Gee()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw Jx=null,e})}let Jx=null;function qte(t){return Jx=Jx||Fte(t),Jx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hte=new t1(5e3,15e3),Gte="__/auth/iframe",Wte="emulator/auth/iframe",Kte={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qte=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xte(t){const e=t.config;nr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Dj(e,Wte):`https://${t.config.authDomain}/${Gte}`,n={apiKey:e.apiKey,appName:t.name,v:y0},a=Qte.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Jg(n).slice(1)}`}async function Yte(t){const e=await qte(t),r=Qo().gapi;return nr(r,t,"internal-error"),e.open({where:document.body,url:Xte(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kte,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=No(t,"network-request-failed"),c=Qo().setTimeout(()=>{i(o)},Hte.get());function d(){Qo().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zte={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jte=500,ere=600,tre="_blank",rre="http://localhost";class qO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nre(t,e,r,n=Jte,a=ere){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},Zte),{width:n.toString(),height:a.toString(),top:i,left:o}),h=za().toLowerCase();r&&(c=CV(h)?tre:r),EV(h)&&(e=e||rre,d.scrollbars="yes");const p=Object.entries(d).reduce((y,[x,_])=>`${y}${x}=${_},`,"");if(Lee(h)&&c!=="_self")return are(e||"",c),new qO(null);const m=window.open(e||"",c,p);nr(m,t,"popup-blocked");try{m.focus()}catch{}return new qO(m)}function are(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ire="__/auth/handler",sre="emulator/auth/handler",ore=encodeURIComponent("fac");async function HO(t,e,r,n,a,i){nr(t.config.authDomain,t,"auth-domain-config-required"),nr(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:y0,eventId:a};if(e instanceof zj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sJ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof r1){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${ore}=${encodeURIComponent(d)}`:"";return`${lre(t)}?${Jg(c).slice(1)}${h}`}function lre({config:t}){return t.emulator?Dj(t,sre):`https://${t.authDomain}/${ire}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5="webStorageSupport";class cre{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FV,this._completeRedirectFn=Rte,this._overrideRedirectResult=Cte}async _openPopup(e,r,n,a){var i;nc((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await HO(e,r,n,oT(),a);return nre(e,o,Vj())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await HO(e,r,n,oT(),a);return hte(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(nc(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Yte(e),n=new Pte(e);return r.register("authEvent",a=>(nr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Z5,{type:Z5},a=>{var i;const o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[Z5];o!==void 0&&r(!!o),Zo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Ute(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return PV()||kV()||$j()}}const ure=cre;var GO="@firebase/auth",WO="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dre{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hre(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fre(t){Eu(new tc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;nr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DV(t)},h=new Fee(n,a,i,d);return Qee(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Eu(new tc("auth-internal",e=>{const r=f2(e.getProvider("auth").getImmediate());return(n=>new dre(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Js(GO,WO,hre(t)),Js(GO,WO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pre=300,mre=hV("authIdTokenMaxAge")||pre;let KO=null;const gre=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>mre)return;const a=r==null?void 0:r.token;KO!==a&&(KO=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uT(t=Ij()){const e=e1(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Kee(t,{popupRedirectResolver:ure,persistence:[wte,cte,FV]}),n=hV("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=gre(i.toString());ate(r,o,()=>o(r.currentUser)),nte(r,c=>o(c))}}const a=cV("auth");return a&&Xee(r,`http://${a}`),r}function yre(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qee({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=No("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",yre().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fre("Browser");var QO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zd,YV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,j){function k(){}k.prototype=j.prototype,A.D=j.prototype,A.prototype=new k,A.prototype.constructor=A,A.C=function(z,D,$){for(var B=Array(arguments.length-2),G=2;G<arguments.length;G++)B[G-2]=arguments[G];return j.prototype[D].apply(z,B)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,j,k){k||(k=0);var z=Array(16);if(typeof j=="string")for(var D=0;16>D;++D)z[D]=j.charCodeAt(k++)|j.charCodeAt(k++)<<8|j.charCodeAt(k++)<<16|j.charCodeAt(k++)<<24;else for(D=0;16>D;++D)z[D]=j[k++]|j[k++]<<8|j[k++]<<16|j[k++]<<24;j=A.g[0],k=A.g[1],D=A.g[2];var $=A.g[3],B=j+($^k&(D^$))+z[0]+3614090360&4294967295;j=k+(B<<7&4294967295|B>>>25),B=$+(D^j&(k^D))+z[1]+3905402710&4294967295,$=j+(B<<12&4294967295|B>>>20),B=D+(k^$&(j^k))+z[2]+606105819&4294967295,D=$+(B<<17&4294967295|B>>>15),B=k+(j^D&($^j))+z[3]+3250441966&4294967295,k=D+(B<<22&4294967295|B>>>10),B=j+($^k&(D^$))+z[4]+4118548399&4294967295,j=k+(B<<7&4294967295|B>>>25),B=$+(D^j&(k^D))+z[5]+1200080426&4294967295,$=j+(B<<12&4294967295|B>>>20),B=D+(k^$&(j^k))+z[6]+2821735955&4294967295,D=$+(B<<17&4294967295|B>>>15),B=k+(j^D&($^j))+z[7]+4249261313&4294967295,k=D+(B<<22&4294967295|B>>>10),B=j+($^k&(D^$))+z[8]+1770035416&4294967295,j=k+(B<<7&4294967295|B>>>25),B=$+(D^j&(k^D))+z[9]+2336552879&4294967295,$=j+(B<<12&4294967295|B>>>20),B=D+(k^$&(j^k))+z[10]+4294925233&4294967295,D=$+(B<<17&4294967295|B>>>15),B=k+(j^D&($^j))+z[11]+2304563134&4294967295,k=D+(B<<22&4294967295|B>>>10),B=j+($^k&(D^$))+z[12]+1804603682&4294967295,j=k+(B<<7&4294967295|B>>>25),B=$+(D^j&(k^D))+z[13]+4254626195&4294967295,$=j+(B<<12&4294967295|B>>>20),B=D+(k^$&(j^k))+z[14]+2792965006&4294967295,D=$+(B<<17&4294967295|B>>>15),B=k+(j^D&($^j))+z[15]+1236535329&4294967295,k=D+(B<<22&4294967295|B>>>10),B=j+(D^$&(k^D))+z[1]+4129170786&4294967295,j=k+(B<<5&4294967295|B>>>27),B=$+(k^D&(j^k))+z[6]+3225465664&4294967295,$=j+(B<<9&4294967295|B>>>23),B=D+(j^k&($^j))+z[11]+643717713&4294967295,D=$+(B<<14&4294967295|B>>>18),B=k+($^j&(D^$))+z[0]+3921069994&4294967295,k=D+(B<<20&4294967295|B>>>12),B=j+(D^$&(k^D))+z[5]+3593408605&4294967295,j=k+(B<<5&4294967295|B>>>27),B=$+(k^D&(j^k))+z[10]+38016083&4294967295,$=j+(B<<9&4294967295|B>>>23),B=D+(j^k&($^j))+z[15]+3634488961&4294967295,D=$+(B<<14&4294967295|B>>>18),B=k+($^j&(D^$))+z[4]+3889429448&4294967295,k=D+(B<<20&4294967295|B>>>12),B=j+(D^$&(k^D))+z[9]+568446438&4294967295,j=k+(B<<5&4294967295|B>>>27),B=$+(k^D&(j^k))+z[14]+3275163606&4294967295,$=j+(B<<9&4294967295|B>>>23),B=D+(j^k&($^j))+z[3]+4107603335&4294967295,D=$+(B<<14&4294967295|B>>>18),B=k+($^j&(D^$))+z[8]+1163531501&4294967295,k=D+(B<<20&4294967295|B>>>12),B=j+(D^$&(k^D))+z[13]+2850285829&4294967295,j=k+(B<<5&4294967295|B>>>27),B=$+(k^D&(j^k))+z[2]+4243563512&4294967295,$=j+(B<<9&4294967295|B>>>23),B=D+(j^k&($^j))+z[7]+1735328473&4294967295,D=$+(B<<14&4294967295|B>>>18),B=k+($^j&(D^$))+z[12]+2368359562&4294967295,k=D+(B<<20&4294967295|B>>>12),B=j+(k^D^$)+z[5]+4294588738&4294967295,j=k+(B<<4&4294967295|B>>>28),B=$+(j^k^D)+z[8]+2272392833&4294967295,$=j+(B<<11&4294967295|B>>>21),B=D+($^j^k)+z[11]+1839030562&4294967295,D=$+(B<<16&4294967295|B>>>16),B=k+(D^$^j)+z[14]+4259657740&4294967295,k=D+(B<<23&4294967295|B>>>9),B=j+(k^D^$)+z[1]+2763975236&4294967295,j=k+(B<<4&4294967295|B>>>28),B=$+(j^k^D)+z[4]+1272893353&4294967295,$=j+(B<<11&4294967295|B>>>21),B=D+($^j^k)+z[7]+4139469664&4294967295,D=$+(B<<16&4294967295|B>>>16),B=k+(D^$^j)+z[10]+3200236656&4294967295,k=D+(B<<23&4294967295|B>>>9),B=j+(k^D^$)+z[13]+681279174&4294967295,j=k+(B<<4&4294967295|B>>>28),B=$+(j^k^D)+z[0]+3936430074&4294967295,$=j+(B<<11&4294967295|B>>>21),B=D+($^j^k)+z[3]+3572445317&4294967295,D=$+(B<<16&4294967295|B>>>16),B=k+(D^$^j)+z[6]+76029189&4294967295,k=D+(B<<23&4294967295|B>>>9),B=j+(k^D^$)+z[9]+3654602809&4294967295,j=k+(B<<4&4294967295|B>>>28),B=$+(j^k^D)+z[12]+3873151461&4294967295,$=j+(B<<11&4294967295|B>>>21),B=D+($^j^k)+z[15]+530742520&4294967295,D=$+(B<<16&4294967295|B>>>16),B=k+(D^$^j)+z[2]+3299628645&4294967295,k=D+(B<<23&4294967295|B>>>9),B=j+(D^(k|~$))+z[0]+4096336452&4294967295,j=k+(B<<6&4294967295|B>>>26),B=$+(k^(j|~D))+z[7]+1126891415&4294967295,$=j+(B<<10&4294967295|B>>>22),B=D+(j^($|~k))+z[14]+2878612391&4294967295,D=$+(B<<15&4294967295|B>>>17),B=k+($^(D|~j))+z[5]+4237533241&4294967295,k=D+(B<<21&4294967295|B>>>11),B=j+(D^(k|~$))+z[12]+1700485571&4294967295,j=k+(B<<6&4294967295|B>>>26),B=$+(k^(j|~D))+z[3]+2399980690&4294967295,$=j+(B<<10&4294967295|B>>>22),B=D+(j^($|~k))+z[10]+4293915773&4294967295,D=$+(B<<15&4294967295|B>>>17),B=k+($^(D|~j))+z[1]+2240044497&4294967295,k=D+(B<<21&4294967295|B>>>11),B=j+(D^(k|~$))+z[8]+1873313359&4294967295,j=k+(B<<6&4294967295|B>>>26),B=$+(k^(j|~D))+z[15]+4264355552&4294967295,$=j+(B<<10&4294967295|B>>>22),B=D+(j^($|~k))+z[6]+2734768916&4294967295,D=$+(B<<15&4294967295|B>>>17),B=k+($^(D|~j))+z[13]+1309151649&4294967295,k=D+(B<<21&4294967295|B>>>11),B=j+(D^(k|~$))+z[4]+4149444226&4294967295,j=k+(B<<6&4294967295|B>>>26),B=$+(k^(j|~D))+z[11]+3174756917&4294967295,$=j+(B<<10&4294967295|B>>>22),B=D+(j^($|~k))+z[2]+718787259&4294967295,D=$+(B<<15&4294967295|B>>>17),B=k+($^(D|~j))+z[9]+3951481745&4294967295,A.g[0]=A.g[0]+j&4294967295,A.g[1]=A.g[1]+(D+(B<<21&4294967295|B>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+$&4294967295}n.prototype.u=function(A,j){j===void 0&&(j=A.length);for(var k=j-this.blockSize,z=this.B,D=this.h,$=0;$<j;){if(D==0)for(;$<=k;)a(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<j;)if(z[D++]=A.charCodeAt($++),D==this.blockSize){a(this,z),D=0;break}}else for(;$<j;)if(z[D++]=A[$++],D==this.blockSize){a(this,z),D=0;break}}this.h=D,this.o+=j},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var j=1;j<A.length-8;++j)A[j]=0;var k=8*this.o;for(j=A.length-8;j<A.length;++j)A[j]=k&255,k/=256;for(this.u(A),A=Array(16),j=k=0;4>j;++j)for(var z=0;32>z;z+=8)A[k++]=this.g[j]>>>z&255;return A};function i(A,j){var k=c;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=j(A)}function o(A,j){this.h=j;for(var k=[],z=!0,D=A.length-1;0<=D;D--){var $=A[D]|0;z&&$==j||(k[D]=$,z=!1)}this.g=k}var c={};function d(A){return-128<=A&&128>A?i(A,function(j){return new o([j|0],0>j?-1:0)}):new o([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return w(h(-A));for(var j=[],k=1,z=0;A>=k;z++)j[z]=A/k|0,k*=4294967296;return new o(j,0)}function p(A,j){if(A.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(A.charAt(0)=="-")return w(p(A.substring(1),j));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=h(Math.pow(j,8)),z=m,D=0;D<A.length;D+=8){var $=Math.min(8,A.length-D),B=parseInt(A.substring(D,D+$),j);8>$?($=h(Math.pow(j,$)),z=z.j($).add(h(B))):(z=z.j(k),z=z.add(h(B)))}return z}var m=d(0),y=d(1),x=d(16777216);t=o.prototype,t.m=function(){if(S(this))return-w(this).m();for(var A=0,j=1,k=0;k<this.g.length;k++){var z=this.i(k);A+=(0<=z?z:4294967296+z)*j,j*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(S(this))return"-"+w(this).toString(A);for(var j=h(Math.pow(A,6)),k=this,z="";;){var D=L(k,j).g;k=E(k,D.j(j));var $=((0<k.g.length?k.g[0]:k.h)>>>0).toString(A);if(k=D,_(k))return $+z;for(;6>$.length;)$="0"+$;z=$+z}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(var j=0;j<A.g.length;j++)if(A.g[j]!=0)return!1;return!0}function S(A){return A.h==-1}t.l=function(A){return A=E(this,A),S(A)?-1:_(A)?0:1};function w(A){for(var j=A.g.length,k=[],z=0;z<j;z++)k[z]=~A.g[z];return new o(k,~A.h).add(y)}t.abs=function(){return S(this)?w(this):this},t.add=function(A){for(var j=Math.max(this.g.length,A.g.length),k=[],z=0,D=0;D<=j;D++){var $=z+(this.i(D)&65535)+(A.i(D)&65535),B=($>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);z=B>>>16,$&=65535,B&=65535,k[D]=B<<16|$}return new o(k,k[k.length-1]&-2147483648?-1:0)};function E(A,j){return A.add(w(j))}t.j=function(A){if(_(this)||_(A))return m;if(S(this))return S(A)?w(this).j(w(A)):w(w(this).j(A));if(S(A))return w(this.j(w(A)));if(0>this.l(x)&&0>A.l(x))return h(this.m()*A.m());for(var j=this.g.length+A.g.length,k=[],z=0;z<2*j;z++)k[z]=0;for(z=0;z<this.g.length;z++)for(var D=0;D<A.g.length;D++){var $=this.i(z)>>>16,B=this.i(z)&65535,G=A.i(D)>>>16,K=A.i(D)&65535;k[2*z+2*D]+=B*K,I(k,2*z+2*D),k[2*z+2*D+1]+=$*K,I(k,2*z+2*D+1),k[2*z+2*D+1]+=B*G,I(k,2*z+2*D+1),k[2*z+2*D+2]+=$*G,I(k,2*z+2*D+2)}for(z=0;z<j;z++)k[z]=k[2*z+1]<<16|k[2*z];for(z=j;z<2*j;z++)k[z]=0;return new o(k,0)};function I(A,j){for(;(A[j]&65535)!=A[j];)A[j+1]+=A[j]>>>16,A[j]&=65535,j++}function R(A,j){this.g=A,this.h=j}function L(A,j){if(_(j))throw Error("division by zero");if(_(A))return new R(m,m);if(S(A))return j=L(w(A),j),new R(w(j.g),w(j.h));if(S(j))return j=L(A,w(j)),new R(w(j.g),j.h);if(30<A.g.length){if(S(A)||S(j))throw Error("slowDivide_ only works with positive integers.");for(var k=y,z=j;0>=z.l(A);)k=C(k),z=C(z);var D=O(k,1),$=O(z,1);for(z=O(z,2),k=O(k,2);!_(z);){var B=$.add(z);0>=B.l(A)&&(D=D.add(k),$=B),z=O(z,1),k=O(k,1)}return j=E(A,D.j(j)),new R(D,j)}for(D=m;0<=A.l(j);){for(k=Math.max(1,Math.floor(A.m()/j.m())),z=Math.ceil(Math.log(k)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),$=h(k),B=$.j(j);S(B)||0<B.l(A);)k-=z,$=h(k),B=$.j(j);_($)&&($=y),D=D.add($),A=E(A,B)}return new R(D,A)}t.A=function(A){return L(this,A).h},t.and=function(A){for(var j=Math.max(this.g.length,A.g.length),k=[],z=0;z<j;z++)k[z]=this.i(z)&A.i(z);return new o(k,this.h&A.h)},t.or=function(A){for(var j=Math.max(this.g.length,A.g.length),k=[],z=0;z<j;z++)k[z]=this.i(z)|A.i(z);return new o(k,this.h|A.h)},t.xor=function(A){for(var j=Math.max(this.g.length,A.g.length),k=[],z=0;z<j;z++)k[z]=this.i(z)^A.i(z);return new o(k,this.h^A.h)};function C(A){for(var j=A.g.length+1,k=[],z=0;z<j;z++)k[z]=A.i(z)<<1|A.i(z-1)>>>31;return new o(k,A.h)}function O(A,j){var k=j>>5;j%=32;for(var z=A.g.length-k,D=[],$=0;$<z;$++)D[$]=0<j?A.i($+k)>>>j|A.i($+k+1)<<32-j:A.i($+k);return new o(D,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,YV=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,zd=o}).apply(typeof QO<"u"?QO:typeof self<"u"?self:typeof window<"u"?window:{});var lx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZV,cm,JV,ev,dT,eF,tF,rF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,P,F){return v==Array.prototype||v==Object.prototype||(v[P]=F.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof lx=="object"&&lx];for(var P=0;P<v.length;++P){var F=v[P];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var n=r(this);function a(v,P){if(P)e:{var F=n;v=v.split(".");for(var ee=0;ee<v.length-1;ee++){var Ne=v[ee];if(!(Ne in F))break e;F=F[Ne]}v=v[v.length-1],ee=F[v],P=P(ee),P!=ee&&P!=null&&e(F,v,{configurable:!0,writable:!0,value:P})}}function i(v,P){v instanceof String&&(v+="");var F=0,ee=!1,Ne={next:function(){if(!ee&&F<v.length){var $e=F++;return{value:P($e,v[$e]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return Ne[Symbol.iterator]=function(){return Ne},Ne}a("Array.prototype.values",function(v){return v||function(){return i(this,function(P,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(v){var P=typeof v;return P=P!="object"?P:v?Array.isArray(v)?"array":P:"null",P=="array"||P=="object"&&typeof v.length=="number"}function h(v){var P=typeof v;return P=="object"&&v!=null||P=="function"}function p(v,P,F){return v.call.apply(v.bind,arguments)}function m(v,P,F){if(!v)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var Ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ne,ee),v.apply(P,Ne)}}return function(){return v.apply(P,arguments)}}function y(v,P,F){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function x(v,P){var F=Array.prototype.slice.call(arguments,1);return function(){var ee=F.slice();return ee.push.apply(ee,arguments),v.apply(this,ee)}}function _(v,P){function F(){}F.prototype=P.prototype,v.aa=P.prototype,v.prototype=new F,v.prototype.constructor=v,v.Qb=function(ee,Ne,$e){for(var gt=Array(arguments.length-2),en=2;en<arguments.length;en++)gt[en-2]=arguments[en];return P.prototype[Ne].apply(ee,gt)}}function S(v){const P=v.length;if(0<P){const F=Array(P);for(let ee=0;ee<P;ee++)F[ee]=v[ee];return F}return[]}function w(v,P){for(let F=1;F<arguments.length;F++){const ee=arguments[F];if(d(ee)){const Ne=v.length||0,$e=ee.length||0;v.length=Ne+$e;for(let gt=0;gt<$e;gt++)v[Ne+gt]=ee[gt]}else v.push(ee)}}class E{constructor(P,F){this.i=P,this.j=F,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function I(v){return/^[\s\xa0]*$/.test(v)}function R(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function L(v){return L[" "](v),v}L[" "]=function(){};var C=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function O(v,P,F){for(const ee in v)P.call(F,v[ee],ee,v)}function A(v,P){for(const F in v)P.call(void 0,v[F],F,v)}function j(v){const P={};for(const F in v)P[F]=v[F];return P}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(v,P){let F,ee;for(let Ne=1;Ne<arguments.length;Ne++){ee=arguments[Ne];for(F in ee)v[F]=ee[F];for(let $e=0;$e<k.length;$e++)F=k[$e],Object.prototype.hasOwnProperty.call(ee,F)&&(v[F]=ee[F])}}function D(v){var P=1;v=v.split(":");const F=[];for(;0<P&&v.length;)F.push(v.shift()),P--;return v.length&&F.push(v.join(":")),F}function $(v){c.setTimeout(()=>{throw v},0)}function B(){var v=he;let P=null;return v.g&&(P=v.g,v.g=v.g.next,v.g||(v.h=null),P.next=null),P}class G{constructor(){this.h=this.g=null}add(P,F){const ee=K.get();ee.set(P,F),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var K=new E(()=>new H,v=>v.reset());class H{constructor(){this.next=this.g=this.h=null}set(P,F){this.h=P,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ae=!1,he=new G,fe=()=>{const v=c.Promise.resolve(void 0);J=()=>{v.then(Y)}};var Y=()=>{for(var v;v=B();){try{v.h.call(v.g)}catch(F){$(F)}var P=K;P.j(v),100>P.h&&(P.h++,v.next=P.g,P.g=v)}ae=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(v,P){this.type=v,this.g=this.target=P,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ye=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,P=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const F=()=>{};c.addEventListener("test",F,P),c.removeEventListener("test",F,P)}catch{}return v})();function Te(v,P){if(re.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var F=this.type=v.type,ee=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=P,P=v.relatedTarget){if(C){e:{try{L(P.nodeName);var Ne=!0;break e}catch{}Ne=!1}Ne||(P=null)}}else F=="mouseover"?P=v.fromElement:F=="mouseout"&&(P=v.toElement);this.relatedTarget=P,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Ve[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&Te.aa.h.call(this)}}_(Te,re);var Ve={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Je="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function ie(v,P,F,ee,Ne){this.listener=v,this.proxy=null,this.src=P,this.type=F,this.capture=!!ee,this.ha=Ne,this.key=++Xe,this.da=this.fa=!1}function Be(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Q(v){this.src=v,this.g={},this.h=0}Q.prototype.add=function(v,P,F,ee,Ne){var $e=v.toString();v=this.g[$e],v||(v=this.g[$e]=[],this.h++);var gt=_e(v,P,ee,Ne);return-1<gt?(P=v[gt],F||(P.fa=!1)):(P=new ie(P,this.src,$e,!!ee,Ne),P.fa=F,v.push(P)),P};function te(v,P){var F=P.type;if(F in v.g){var ee=v.g[F],Ne=Array.prototype.indexOf.call(ee,P,void 0),$e;($e=0<=Ne)&&Array.prototype.splice.call(ee,Ne,1),$e&&(Be(P),v.g[F].length==0&&(delete v.g[F],v.h--))}}function _e(v,P,F,ee){for(var Ne=0;Ne<v.length;++Ne){var $e=v[Ne];if(!$e.da&&$e.listener==P&&$e.capture==!!F&&$e.ha==ee)return Ne}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),Qe={};function nt(v,P,F,ee,Ne){if(Array.isArray(P)){for(var $e=0;$e<P.length;$e++)nt(v,P[$e],F,ee,Ne);return null}return F=Ze(F),v&&v[Je]?v.K(P,F,h(ee)?!!ee.capture:!1,Ne):Ot(v,P,F,!1,ee,Ne)}function Ot(v,P,F,ee,Ne,$e){if(!P)throw Error("Invalid event type");var gt=h(Ne)?!!Ne.capture:!!Ne,en=ce(v);if(en||(v[Se]=en=new Q(v)),F=en.add(P,F,ee,gt,$e),F.proxy)return F;if(ee=Me(),F.proxy=ee,ee.src=v,ee.listener=F,v.addEventListener)ye||(Ne=gt),Ne===void 0&&(Ne=!1),v.addEventListener(P.toString(),ee,Ne);else if(v.attachEvent)v.attachEvent(vt(P.toString()),ee);else if(v.addListener&&v.removeListener)v.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Me(){function v(F){return P.call(v.src,v.listener,F)}const P=et;return v}function lt(v,P,F,ee,Ne){if(Array.isArray(P))for(var $e=0;$e<P.length;$e++)lt(v,P[$e],F,ee,Ne);else ee=h(ee)?!!ee.capture:!!ee,F=Ze(F),v&&v[Je]?(v=v.i,P=String(P).toString(),P in v.g&&($e=v.g[P],F=_e($e,F,ee,Ne),-1<F&&(Be($e[F]),Array.prototype.splice.call($e,F,1),$e.length==0&&(delete v.g[P],v.h--)))):v&&(v=ce(v))&&(P=v.g[P.toString()],v=-1,P&&(v=_e(P,F,ee,Ne)),(F=-1<v?P[v]:null)&&St(F))}function St(v){if(typeof v!="number"&&v&&!v.da){var P=v.src;if(P&&P[Je])te(P.i,v);else{var F=v.type,ee=v.proxy;P.removeEventListener?P.removeEventListener(F,ee,v.capture):P.detachEvent?P.detachEvent(vt(F),ee):P.addListener&&P.removeListener&&P.removeListener(ee),(F=ce(P))?(te(F,v),F.h==0&&(F.src=null,P[Se]=null)):Be(v)}}}function vt(v){return v in Qe?Qe[v]:Qe[v]="on"+v}function et(v,P){if(v.da)v=!0;else{P=new Te(P,this);var F=v.listener,ee=v.ha||v.src;v.fa&&St(v),v=F.call(ee,P)}return v}function ce(v){return v=v[Se],v instanceof Q?v:null}var Ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ze(v){return typeof v=="function"?v:(v[Ue]||(v[Ue]=function(P){return v.handleEvent(P)}),v[Ue])}function ht(){ne.call(this),this.i=new Q(this),this.M=this,this.F=null}_(ht,ne),ht.prototype[Je]=!0,ht.prototype.removeEventListener=function(v,P,F,ee){lt(this,v,P,F,ee)};function dt(v,P){var F,ee=v.F;if(ee)for(F=[];ee;ee=ee.F)F.push(ee);if(v=v.M,ee=P.type||P,typeof P=="string")P=new re(P,v);else if(P instanceof re)P.target=P.target||v;else{var Ne=P;P=new re(ee,v),z(P,Ne)}if(Ne=!0,F)for(var $e=F.length-1;0<=$e;$e--){var gt=P.g=F[$e];Ne=zt(gt,ee,!0,P)&&Ne}if(gt=P.g=v,Ne=zt(gt,ee,!0,P)&&Ne,Ne=zt(gt,ee,!1,P)&&Ne,F)for($e=0;$e<F.length;$e++)gt=P.g=F[$e],Ne=zt(gt,ee,!1,P)&&Ne}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var v=this.i,P;for(P in v.g){for(var F=v.g[P],ee=0;ee<F.length;ee++)Be(F[ee]);delete v.g[P],v.h--}}this.F=null},ht.prototype.K=function(v,P,F,ee){return this.i.add(String(v),P,!1,F,ee)},ht.prototype.L=function(v,P,F,ee){return this.i.add(String(v),P,!0,F,ee)};function zt(v,P,F,ee){if(P=v.i.g[String(P)],!P)return!0;P=P.concat();for(var Ne=!0,$e=0;$e<P.length;++$e){var gt=P[$e];if(gt&&!gt.da&&gt.capture==F){var en=gt.listener,wa=gt.ha||gt.src;gt.fa&&te(v.i,gt),Ne=en.call(wa,ee)!==!1&&Ne}}return Ne&&!ee.defaultPrevented}function tr(v,P,F){if(typeof v=="function")F&&(v=y(v,F));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:c.setTimeout(v,P||0)}function Cr(v){v.g=tr(()=>{v.g=null,v.i&&(v.i=!1,Cr(v))},v.l);const P=v.h;v.h=null,v.m.apply(null,P)}class ve extends ne{constructor(P,F){super(),this.m=P,this.l=F,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(v){ne.call(this),this.h=v,this.g={}}_(st,ne);var jt=[];function Dt(v){O(v.g,function(P,F){this.g.hasOwnProperty(F)&&St(P)},v),v.g={}}st.prototype.N=function(){st.aa.N.call(this),Dt(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,tt=c.JSON.parse,ar=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function br(){}br.prototype.h=null;function Br(v){return v.h||(v.h=v.i())}function dn(){}var vr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gt(){re.call(this,"d")}_(Gt,re);function Ut(){re.call(this,"c")}_(Ut,re);var _t={},$r=null;function an(){return $r=$r||new ht}_t.La="serverreachability";function Wr(v){re.call(this,_t.La,v)}_(Wr,re);function Ur(v){const P=an();dt(P,new Wr(P))}_t.STAT_EVENT="statevent";function hn(v,P){re.call(this,_t.STAT_EVENT,v),this.stat=P}_(hn,re);function cr(v){const P=an();dt(P,new hn(P,v))}_t.Ma="timingevent";function ya(v,P){re.call(this,_t.Ma,v),this.size=P}_(ya,re);function fn(v,P){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},P)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function ni(v,P,F,ee,Ne,$e){v.info(function(){if(v.g)if($e)for(var gt="",en=$e.split("&"),wa=0;wa<en.length;wa++){var yr=en[wa].split("=");if(1<yr.length){var Wa=yr[0];yr=yr[1];var Ka=Wa.split("_");gt=2<=Ka.length&&Ka[1]=="type"?gt+(Wa+"="+yr+"&"):gt+(Wa+"=redacted&")}}else gt=null;else gt=$e;return"XMLHTTP REQ ("+ee+") [attempt "+Ne+"]: "+P+`
`+F+`
`+gt})}function Nr(v,P,F,ee,Ne,$e,gt){v.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+Ne+"]: "+P+`
`+F+`
`+$e+" "+gt})}function pn(v,P,F,ee){v.info(function(){return"XMLHTTP TEXT ("+P+"): "+Hn(v,F)+(ee?" "+ee:"")})}function ai(v,P){v.info(function(){return"TIMEOUT: "+P})}kn.prototype.info=function(){};function Hn(v,P){if(!v.g)return P;if(!P)return null;try{var F=JSON.parse(P);if(F){for(v=0;v<F.length;v++)if(Array.isArray(F[v])){var ee=F[v];if(!(2>ee.length)){var Ne=ee[1];if(Array.isArray(Ne)&&!(1>Ne.length)){var $e=Ne[0];if($e!="noop"&&$e!="stop"&&$e!="close")for(var gt=1;gt<Ne.length;gt++)Ne[gt]=""}}}}return $t(F)}catch{return P}}var Jr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function ii(){}_(ii,br),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},Nn=new ii;function Ga(v,P,F,ee){this.j=v,this.i=P,this.l=F,this.R=ee||1,this.U=new st(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ji}function ji(){this.i=null,this.g="",this.h=!1}var cs={},xi={};function Nt(v,P,F){v.L=1,v.v=Pe(At(P)),v.m=F,v.P=!0,pe(v,null)}function pe(v,P){v.F=Date.now(),Xt(v),v.A=At(v.v);var F=v.A,ee=v.R;Array.isArray(ee)||(ee=[String(ee)]),Ds(F.i,"t",ee),v.C=0,F=v.j.J,v.h=new ji,v.g=J1(v.j,F?P:null,!v.m),0<v.O&&(v.M=new ve(y(v.Y,v,v.g),v.O)),P=v.U,F=v.g,ee=v.ca;var Ne="readystatechange";Array.isArray(Ne)||(Ne&&(jt[0]=Ne.toString()),Ne=jt);for(var $e=0;$e<Ne.length;$e++){var gt=nt(F,Ne[$e],ee||P.handleEvent,!1,P.h||P);if(!gt)break;P.g[gt.key]=gt}P=v.H?j(v.H):{},v.m?(v.u||(v.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,P)):(v.u="GET",v.g.ea(v.A,v.u,null,P)),Ur(),ni(v.i,v.u,v.A,v.l,v.R,v.m)}Ga.prototype.ca=function(v){v=v.target;const P=this.M;P&&Ei(v)==3?P.j():this.Y(v)},Ga.prototype.Y=function(v){try{if(v==this.g)e:{const Ka=Ei(this.g);var P=this.g.Ba();const Ac=this.g.Z();if(!(3>Ka)&&(Ka!=3||this.g&&(this.h.h||this.g.oa()||Xu(this.g)))){this.J||Ka!=4||P==7||(P==8||0>=Ac?Ur(3):Ur(2)),sn(this);var F=this.g.Z();this.X=F;t:if(rt(this)){var ee=Xu(this.g);v="";var Ne=ee.length,$e=Ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Kr(this);var gt="";break t}this.h.i=new c.TextDecoder}for(P=0;P<Ne;P++)this.h.h=!0,v+=this.h.i.decode(ee[P],{stream:!($e&&P==Ne-1)});ee.length=0,this.h.g+=v,this.C=0,gt=this.h.g}else gt=this.g.oa();if(this.o=F==200,Nr(this.i,this.u,this.A,this.l,this.R,Ka,F),this.o){if(this.T&&!this.K){t:{if(this.g){var en,wa=this.g;if((en=wa.g?wa.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(en)){var yr=en;break t}}yr=null}if(F=yr)pn(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Or(this,F);else{this.o=!1,this.s=3,cr(12),gn(this),Kr(this);break e}}if(this.P){F=!0;let Vi;for(;!this.J&&this.C<gt.length;)if(Vi=ft(this,gt),Vi==xi){Ka==4&&(this.s=4,cr(14),F=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Vi==cs){this.s=4,cr(15),pn(this.i,this.l,gt,"[Invalid Chunk]"),F=!1;break}else pn(this.i,this.l,Vi,null),Or(this,Vi);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ka!=4||gt.length!=0||this.h.h||(this.s=1,cr(16),F=!1),this.o=this.o&&F,!F)pn(this.i,this.l,gt,"[Invalid Chunked Response]"),gn(this),Kr(this);else if(0<gt.length&&!this.W){this.W=!0;var Wa=this.j;Wa.g==this&&Wa.ba&&!Wa.M&&(Wa.j.info("Great, no buffering proxy detected. Bytes received: "+gt.length),np(Wa),Wa.M=!0,cr(11))}}else pn(this.i,this.l,gt,null),Or(this,gt);Ka==4&&gn(this),this.o&&!this.J&&(Ka==4?X1(this.j,this):(this.o=!1,Xt(this)))}else q1(this.g),F==400&&0<gt.indexOf("Unknown SID")?(this.s=3,cr(12)):(this.s=0,cr(13)),gn(this),Kr(this)}}}catch{}finally{}};function rt(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function ft(v,P){var F=v.C,ee=P.indexOf(`
`,F);return ee==-1?xi:(F=Number(P.substring(F,ee)),isNaN(F)?cs:(ee+=1,ee+F>P.length?xi:(P=P.slice(ee,ee+F),v.C=ee+F,P)))}Ga.prototype.cancel=function(){this.J=!0,gn(this)};function Xt(v){v.S=Date.now()+v.I,hr(v,v.I)}function hr(v,P){if(v.B!=null)throw Error("WatchDog timer not null");v.B=fn(y(v.ba,v),P)}function sn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Ga.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(ai(this.i,this.A),this.L!=2&&(Ur(),cr(17)),gn(this),this.s=2,Kr(this)):hr(this,this.S-v)};function Kr(v){v.j.G==0||v.J||X1(v.j,v)}function gn(v){sn(v);var P=v.M;P&&typeof P.ma=="function"&&P.ma(),v.M=null,Dt(v.U),v.g&&(P=v.g,v.g=null,P.abort(),P.ma())}function Or(v,P){try{var F=v.j;if(F.G!=0&&(F.g==v||ds(F.h,v))){if(!v.K&&ds(F.h,v)&&F.G==3){try{var ee=F.Da.g.parse(P)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var Ne=ee;if(Ne[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<v.F)Nc(F),_c(F);else break e;rp(F),cr(18)}}else F.za=Ne[1],0<F.za-F.T&&37500>Ne[2]&&F.F&&F.v==0&&!F.C&&(F.C=fn(y(F.Za,F),6e3));if(1>=hl(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else pl(F,11)}else if((v.K||F.g==v)&&Nc(F),!I(P))for(Ne=F.Da.g.parse(P),P=0;P<Ne.length;P++){let yr=Ne[P];if(F.T=yr[0],yr=yr[1],F.G==2)if(yr[0]=="c"){F.K=yr[1],F.ia=yr[2];const Wa=yr[3];Wa!=null&&(F.la=Wa,F.j.info("VER="+F.la));const Ka=yr[4];Ka!=null&&(F.Aa=Ka,F.j.info("SVER="+F.Aa));const Ac=yr[5];Ac!=null&&typeof Ac=="number"&&0<Ac&&(ee=1.5*Ac,F.L=ee,F.j.info("backChannelRequestTimeoutMs_="+ee)),ee=F;const Vi=v.g;if(Vi){const Ju=Vi.g?Vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ju){var $e=ee.h;$e.g||Ju.indexOf("spdy")==-1&&Ju.indexOf("quic")==-1&&Ju.indexOf("h2")==-1||($e.j=$e.l,$e.g=new Set,$e.h&&(hs($e,$e.h),$e.h=null))}if(ee.D){const ml=Vi.g?Vi.g.getResponseHeader("X-HTTP-Session-Id"):null;ml&&(ee.ya=ml,xe(ee.I,ee.D,ml))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-v.F,F.j.info("Handshake RTT: "+F.R+"ms")),ee=F;var gt=v;if(ee.qa=Z1(ee,ee.J?ee.ia:null,ee.W),gt.K){Ra(ee.h,gt);var en=gt,wa=ee.L;wa&&(en.I=wa),en.B&&(sn(en),Xt(en)),ee.g=gt}else K1(ee);0<F.i.length&&k0(F)}else yr[0]!="stop"&&yr[0]!="close"||pl(F,7);else F.G==3&&(yr[0]=="stop"||yr[0]=="close"?yr[0]=="stop"?pl(F,7):ep(F):yr[0]!="noop"&&F.l&&F.l.ta(yr),F.v=0)}}Ur(4)}catch{}}var Ms=class{constructor(v,P){this.g=v,this.map=P}};function us(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lo(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function hl(v){return v.h?1:v.g?v.g.size:0}function ds(v,P){return v.h?v.h==P:v.g?v.g.has(P):!1}function hs(v,P){v.g?v.g.add(P):v.h=P}function Ra(v,P){v.h&&v.h==P?v.h=null:v.g&&v.g.has(P)&&v.g.delete(P)}us.prototype.cancel=function(){if(this.i=xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function xa(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let P=v.i;for(const F of v.g.values())P=P.concat(F.D);return P}return S(v.i)}function q(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var P=[],F=v.length,ee=0;ee<F;ee++)P.push(v[ee]);return P}P=[],F=0;for(ee in v)P[F++]=v[ee];return P}function be(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var P=[];v=v.length;for(var F=0;F<v;F++)P.push(F);return P}P=[],F=0;for(const ee in v)P[F++]=ee;return P}}}function Ae(v,P){if(v.forEach&&typeof v.forEach=="function")v.forEach(P,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,P,void 0);else for(var F=be(v),ee=q(v),Ne=ee.length,$e=0;$e<Ne;$e++)P.call(void 0,ee[$e],F&&F[$e],v)}var je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(v,P){if(v){v=v.split("&");for(var F=0;F<v.length;F++){var ee=v[F].indexOf("="),Ne=null;if(0<=ee){var $e=v[F].substring(0,ee);Ne=v[F].substring(ee+1)}else $e=v[F];P($e,Ne?decodeURIComponent(Ne.replace(/\+/g," ")):"")}}}function It(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof It){this.h=v.h,Yt(this,v.j),this.o=v.o,this.g=v.g,wr(this,v.s),this.l=v.l;var P=v.i,F=new ba;F.i=P.i,P.g&&(F.g=new Map(P.g),F.h=P.h),ue(this,F),this.m=v.m}else v&&(P=String(v).match(je))?(this.h=!1,Yt(this,P[1]||"",!0),this.o=Fe(P[2]||""),this.g=Fe(P[3]||"",!0),wr(this,P[4]),this.l=Fe(P[5]||"",!0),ue(this,P[6]||"",!0),this.m=Fe(P[7]||"")):(this.h=!1,this.i=new ba(null,this.h))}It.prototype.toString=function(){var v=[],P=this.j;P&&v.push(qe(P,Kt,!0),":");var F=this.g;return(F||P=="file")&&(v.push("//"),(P=this.o)&&v.push(qe(P,Kt,!0),"@"),v.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&v.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&v.push("/"),v.push(qe(F,F.charAt(0)=="/"?oa:Cn,!0))),(F=this.i.toString())&&v.push("?",F),(F=this.m)&&v.push("#",qe(F,va)),v.join("")};function At(v){return new It(v)}function Yt(v,P,F){v.j=F?Fe(P,!0):P,v.j&&(v.j=v.j.replace(/:$/,""))}function wr(v,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);v.s=P}else v.s=null}function ue(v,P,F){P instanceof ba?(v.i=P,z1(v.i,v.h)):(F||(P=qe(P,Ps)),v.i=new ba(P,v.h))}function xe(v,P,F){v.i.set(P,F)}function Pe(v){return xe(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Fe(v,P){return v?P?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function qe(v,P,F){return typeof v=="string"?(v=encodeURI(v).replace(P,sr),F&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function sr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Kt=/[#\/\?@]/g,Cn=/[#\?:]/g,oa=/[#\?]/g,Ps=/[#\?@]/g,va=/#/g;function ba(v,P){this.h=this.g=null,this.i=v||null,this.j=!!P}function Zn(v){v.g||(v.g=new Map,v.h=0,v.i&&mt(v.i,function(P,F){v.add(decodeURIComponent(P.replace(/\+/g," ")),F)}))}t=ba.prototype,t.add=function(v,P){Zn(this),this.i=null,v=fs(this,v);var F=this.g.get(v);return F||this.g.set(v,F=[]),F.push(P),this.h+=1,this};function Ir(v,P){Zn(v),P=fs(v,P),v.g.has(P)&&(v.i=null,v.h-=v.g.get(P).length,v.g.delete(P))}function Io(v,P){return Zn(v),P=fs(v,P),v.g.has(P)}t.forEach=function(v,P){Zn(this),this.g.forEach(function(F,ee){F.forEach(function(Ne){v.call(P,Ne,ee,this)},this)},this)},t.na=function(){Zn(this);const v=Array.from(this.g.values()),P=Array.from(this.g.keys()),F=[];for(let ee=0;ee<P.length;ee++){const Ne=v[ee];for(let $e=0;$e<Ne.length;$e++)F.push(P[ee])}return F},t.V=function(v){Zn(this);let P=[];if(typeof v=="string")Io(this,v)&&(P=P.concat(this.g.get(fs(this,v))));else{v=Array.from(this.g.values());for(let F=0;F<v.length;F++)P=P.concat(v[F])}return P},t.set=function(v,P){return Zn(this),this.i=null,v=fs(this,v),Io(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[P]),this.h+=1,this},t.get=function(v,P){return v?(v=this.V(v),0<v.length?String(v[0]):P):P};function Ds(v,P,F){Ir(v,P),0<F.length&&(v.i=null,v.g.set(fs(v,P),S(F)),v.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],P=Array.from(this.g.keys());for(var F=0;F<P.length;F++){var ee=P[F];const $e=encodeURIComponent(String(ee)),gt=this.V(ee);for(ee=0;ee<gt.length;ee++){var Ne=$e;gt[ee]!==""&&(Ne+="="+encodeURIComponent(String(gt[ee]))),v.push(Ne)}}return this.i=v.join("&")};function fs(v,P){return P=String(P),v.j&&(P=P.toLowerCase()),P}function z1(v,P){P&&!v.j&&(Zn(v),v.i=null,v.g.forEach(function(F,ee){var Ne=ee.toLowerCase();ee!=Ne&&(Ir(this,ee),Ds(this,Ne,F))},v)),v.j=P}function Zf(v,P){const F=new kn;if(c.Image){const ee=new Image;ee.onload=x(zi,F,"TestLoadImage: loaded",!0,P,ee),ee.onerror=x(zi,F,"TestLoadImage: error",!1,P,ee),ee.onabort=x(zi,F,"TestLoadImage: abort",!1,P,ee),ee.ontimeout=x(zi,F,"TestLoadImage: timeout",!1,P,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=v}else P(!1)}function V1(v,P){const F=new kn,ee=new AbortController,Ne=setTimeout(()=>{ee.abort(),zi(F,"TestPingServer: timeout",!1,P)},1e4);fetch(v,{signal:ee.signal}).then($e=>{clearTimeout(Ne),$e.ok?zi(F,"TestPingServer: ok",!0,P):zi(F,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(Ne),zi(F,"TestPingServer: error",!1,P)})}function zi(v,P,F,ee,Ne){try{Ne&&(Ne.onload=null,Ne.onerror=null,Ne.onabort=null,Ne.ontimeout=null),ee(F)}catch{}}function co(){this.g=new ar}function Jf(v,P,F){const ee=F||"";try{Ae(v,function(Ne,$e){let gt=Ne;h(Ne)&&(gt=$t(Ne)),P.push(ee+$e+"="+encodeURIComponent(gt))})}catch(Ne){throw P.push(ee+"type="+encodeURIComponent("_badmap")),Ne}}function Ro(v){this.l=v.Ub||null,this.j=v.eb||!1}_(Ro,br),Ro.prototype.g=function(){return new ps(this.l,this.j)},Ro.prototype.i=(function(v){return function(){return v}})({});function ps(v,P){ht.call(this),this.D=v,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ps,ht),t=ps.prototype,t.open=function(v,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=P,this.readyState=1,vc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(P.body=v),(this.D||c).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,vc(this)),this.g&&(this.readyState=3,vc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;j0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function j0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var P=v.value?v.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!v.done}))&&(this.response=this.responseText+=P)}v.done?Mo(this):vc(this),this.readyState==3&&j0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Mo(this))},t.Qa=function(v){this.g&&(this.response=v,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,vc(v)}t.setRequestHeader=function(v,P){this.u.append(v,P)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],P=this.h.entries();for(var F=P.next();!F.done;)F=F.value,v.push(F[0]+": "+F[1]),F=P.next();return v.join(`\r
`)};function vc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ku(v){let P="";return O(v,function(F,ee){P+=ee,P+=":",P+=F,P+=`\r
`}),P}function bc(v,P,F){e:{for(ee in F){var ee=!1;break e}ee=!0}ee||(F=Ku(F),typeof v=="string"?F!=null&&encodeURIComponent(String(F)):xe(v,P,F))}function Pn(v){ht.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Pn,ht);var vi=/^https?$/i,fl=["POST","PUT"];t=Pn.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,P,F,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);P=P?P.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?Br(this.o):Br(Nn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(P,String(v),!0),this.B=!1}catch($e){Qu(this,$e);return}if(v=F||"",F=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var Ne in ee)F.set(Ne,ee[Ne]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const $e of ee.keys())F.set($e,ee.get($e));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(F.keys()).find($e=>$e.toLowerCase()=="content-type"),Ne=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fl,P,void 0))||ee||Ne||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,gt]of F)this.g.setRequestHeader($e,gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{E0(this),this.u=!0,this.g.send(v),this.u=!1}catch($e){Qu(this,$e)}};function Qu(v,P){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=P,v.m=5,wc(v),Sc(v)}function wc(v){v.A||(v.A=!0,dt(v,"complete"),dt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,dt(this,"complete"),dt(this,"abort"),Sc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sc(this,!0)),Pn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?F1(this):this.bb())},t.bb=function(){F1(this)};function F1(v){if(v.h&&typeof o<"u"&&(!v.v[1]||Ei(v)!=4||v.Z()!=2)){if(v.u&&Ei(v)==4)tr(v.Ea,0,v);else if(dt(v,"readystatechange"),Ei(v)==4){v.h=!1;try{const gt=v.Z();e:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var F;if(!(F=P)){var ee;if(ee=gt===0){var Ne=String(v.D).match(je)[1]||null;!Ne&&c.self&&c.self.location&&(Ne=c.self.location.protocol.slice(0,-1)),ee=!vi.test(Ne?Ne.toLowerCase():"")}F=ee}if(F)dt(v,"complete"),dt(v,"success");else{v.m=6;try{var $e=2<Ei(v)?v.g.statusText:""}catch{$e=""}v.l=$e+" ["+v.Z()+"]",wc(v)}}finally{Sc(v)}}}}function Sc(v,P){if(v.g){E0(v);const F=v.g,ee=v.v[0]?()=>{}:null;v.g=null,v.v=null,P||dt(v,"ready");try{F.onreadystatechange=ee}catch{}}}function E0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Ei(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var P=this.g.responseText;return v&&P.indexOf(v)==0&&(P=P.substring(v.length)),tt(P)}};function Xu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function q1(v){const P={};v=(v.g&&2<=Ei(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<v.length;ee++){if(I(v[ee]))continue;var F=D(v[ee]);const Ne=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const $e=P[Ne]||[];P[Ne]=$e,$e.push(F)}A(P,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yu(v,P,F){return F&&F.internalChannelParams&&F.internalChannelParams[v]||P}function H1(v){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yu("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yu("baseRetryDelayMs",5e3,v),this.cb=Yu("retryDelaySeedMs",1e4,v),this.Wa=Yu("forwardChannelMaxRetries",2,v),this.wa=Yu("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new us(v&&v.concurrentRequestLimit),this.Da=new co,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=H1.prototype,t.la=8,t.G=1,t.connect=function(v,P,F,ee){cr(0),this.W=v,this.H=P||{},F&&ee!==void 0&&(this.H.OSID=F,this.H.OAID=ee),this.F=this.X,this.I=Z1(this,null,this.W),k0(this)};function ep(v){if(G1(v),v.G==3){var P=v.U++,F=At(v.I);if(xe(F,"SID",v.K),xe(F,"RID",P),xe(F,"TYPE","terminate"),Zu(v,F),P=new Ga(v,v.j,P),P.L=2,P.v=Pe(At(F)),F=!1,c.navigator&&c.navigator.sendBeacon)try{F=c.navigator.sendBeacon(P.v.toString(),"")}catch{}!F&&c.Image&&(new Image().src=P.v,F=!0),F||(P.g=J1(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Xt(P)}ap(v)}function _c(v){v.g&&(np(v),v.g.cancel(),v.g=null)}function G1(v){_c(v),v.u&&(c.clearTimeout(v.u),v.u=null),Nc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function k0(v){if(!lo(v.h)&&!v.s){v.s=!0;var P=v.Ga;J||fe(),ae||(J(),ae=!0),he.add(P,v),v.B=0}}function Gw(v,P){return hl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=P.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=fn(y(v.Ga,v,P),Y1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const Ne=new Ga(this,this.j,v);let $e=this.o;if(this.S&&($e?($e=j($e),z($e,this.S)):$e=this.S),this.m!==null||this.O||(Ne.H=$e,$e=null),this.P)e:{for(var P=0,F=0;F<this.i.length;F++){t:{var ee=this.i[F];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(P+=ee,4096<P){P=F;break e}if(P===4096||F===this.i.length-1){P=F+1;break e}}P=1e3}else P=1e3;P=tp(this,Ne,P),F=At(this.I),xe(F,"RID",v),xe(F,"CVER",22),this.D&&xe(F,"X-HTTP-Session-Id",this.D),Zu(this,F),$e&&(this.O?P="headers="+encodeURIComponent(String(Ku($e)))+"&"+P:this.m&&bc(F,this.m,$e)),hs(this.h,Ne),this.Ua&&xe(F,"TYPE","init"),this.P?(xe(F,"$req",P),xe(F,"SID","null"),Ne.T=!0,Nt(Ne,F,null)):Nt(Ne,F,P),this.G=2}}else this.G==3&&(v?W1(this,v):this.i.length==0||lo(this.h)||W1(this))};function W1(v,P){var F;P?F=P.l:F=v.U++;const ee=At(v.I);xe(ee,"SID",v.K),xe(ee,"RID",F),xe(ee,"AID",v.T),Zu(v,ee),v.m&&v.o&&bc(ee,v.m,v.o),F=new Ga(v,v.j,F,v.B+1),v.m===null&&(F.H=v.o),P&&(v.i=P.D.concat(v.i)),P=tp(v,F,1e3),F.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),hs(v.h,F),Nt(F,ee,P)}function Zu(v,P){v.H&&O(v.H,function(F,ee){xe(P,ee,F)}),v.l&&Ae({},function(F,ee){xe(P,ee,F)})}function tp(v,P,F){F=Math.min(v.i.length,F);var ee=v.l?y(v.l.Na,v.l,v):null;e:{var Ne=v.i;let $e=-1;for(;;){const gt=["count="+F];$e==-1?0<F?($e=Ne[0].g,gt.push("ofs="+$e)):$e=0:gt.push("ofs="+$e);let en=!0;for(let wa=0;wa<F;wa++){let yr=Ne[wa].g;const Wa=Ne[wa].map;if(yr-=$e,0>yr)$e=Math.max(0,Ne[wa].g-100),en=!1;else try{Jf(Wa,gt,"req"+yr+"_")}catch{ee&&ee(Wa)}}if(en){ee=gt.join("&");break e}}}return v=v.i.splice(0,F),P.D=v,ee}function K1(v){if(!v.g&&!v.u){v.Y=1;var P=v.Fa;J||fe(),ae||(J(),ae=!0),he.add(P,v),v.v=0}}function rp(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=fn(y(v.Fa,v),Y1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,Q1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=fn(y(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cr(10),_c(this),Q1(this))};function np(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function Q1(v){v.g=new Ga(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var P=At(v.qa);xe(P,"RID","rpc"),xe(P,"SID",v.K),xe(P,"AID",v.T),xe(P,"CI",v.F?"0":"1"),!v.F&&v.ja&&xe(P,"TO",v.ja),xe(P,"TYPE","xmlhttp"),Zu(v,P),v.m&&v.o&&bc(P,v.m,v.o),v.L&&(v.g.I=v.L);var F=v.g;v=v.ia,F.L=1,F.v=Pe(At(P)),F.m=null,F.P=!0,pe(F,v)}t.Za=function(){this.C!=null&&(this.C=null,_c(this),rp(this),cr(19))};function Nc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function X1(v,P){var F=null;if(v.g==P){Nc(v),np(v),v.g=null;var ee=2}else if(ds(v.h,P))F=P.D,Ra(v.h,P),ee=1;else return;if(v.G!=0){if(P.o)if(ee==1){F=P.m?P.m.length:0,P=Date.now()-P.F;var Ne=v.B;ee=an(),dt(ee,new ya(ee,F)),k0(v)}else K1(v);else if(Ne=P.s,Ne==3||Ne==0&&0<P.X||!(ee==1&&Gw(v,P)||ee==2&&rp(v)))switch(F&&0<F.length&&(P=v.h,P.i=P.i.concat(F)),Ne){case 1:pl(v,5);break;case 4:pl(v,10);break;case 3:pl(v,6);break;default:pl(v,2)}}}function Y1(v,P){let F=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(F*=2),F*P}function pl(v,P){if(v.j.info("Error code "+P),P==2){var F=y(v.fb,v),ee=v.Xa;const Ne=!ee;ee=new It(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yt(ee,"https"),Pe(ee),Ne?Zf(ee.toString(),F):V1(ee.toString(),F)}else cr(2);v.G=0,v.l&&v.l.sa(P),ap(v),G1(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),cr(2)):(this.j.info("Failed to ping google.com"),cr(1))};function ap(v){if(v.G=0,v.ka=[],v.l){const P=xa(v.h);(P.length!=0||v.i.length!=0)&&(w(v.ka,P),w(v.ka,v.i),v.h.i.length=0,S(v.i),v.i.length=0),v.l.ra()}}function Z1(v,P,F){var ee=F instanceof It?At(F):new It(F);if(ee.g!="")P&&(ee.g=P+"."+ee.g),wr(ee,ee.s);else{var Ne=c.location;ee=Ne.protocol,P=P?P+"."+Ne.hostname:Ne.hostname,Ne=+Ne.port;var $e=new It(null);ee&&Yt($e,ee),P&&($e.g=P),Ne&&wr($e,Ne),F&&($e.l=F),ee=$e}return F=v.D,P=v.ya,F&&P&&xe(ee,F,P),xe(ee,"VER",v.la),Zu(v,ee),ee}function J1(v,P,F){if(P&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=v.Ca&&!v.pa?new Pn(new Ro({eb:F})):new Pn(v.pa),P.Ha(v.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ey(){}t=ey.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function C0(){}C0.prototype.g=function(v,P){return new ki(v,P)};function ki(v,P){ht.call(this),this.g=new H1(P),this.l=v,this.h=P&&P.messageUrlParams||null,v=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(v?v["X-WebChannel-Content-Type"]=P.messageContentType:v={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(v?v["X-WebChannel-Client-Profile"]=P.va:v={"X-WebChannel-Client-Profile":P.va}),this.g.S=v,(v=P&&P.Sb)&&!I(v)&&(this.g.m=v),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!I(P)&&(this.g.D=P,v=this.h,v!==null&&P in v&&(v=this.h,P in v&&delete v[P])),this.j=new Tc(this)}_(ki,ht),ki.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ki.prototype.close=function(){ep(this.g)},ki.prototype.o=function(v){var P=this.g;if(typeof v=="string"){var F={};F.__data__=v,v=F}else this.u&&(F={},F.__data__=$t(v),v=F);P.i.push(new Ms(P.Ya++,v)),P.G==3&&k0(P)},ki.prototype.N=function(){this.g.l=null,delete this.j,ep(this.g),delete this.g,ki.aa.N.call(this)};function ty(v){Gt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var P=v.__sm__;if(P){e:{for(const F in P){v=F;break e}v=void 0}(this.i=v)&&(v=this.i,P=P!==null&&v in P?P[v]:void 0),this.data=P}else this.data=v}_(ty,Gt);function ry(){Ut.call(this),this.status=1}_(ry,Ut);function Tc(v){this.g=v}_(Tc,ey),Tc.prototype.ua=function(){dt(this.g,"a")},Tc.prototype.ta=function(v){dt(this.g,new ty(v))},Tc.prototype.sa=function(v){dt(this.g,new ry)},Tc.prototype.ra=function(){dt(this.g,"b")},C0.prototype.createWebChannel=C0.prototype.g,ki.prototype.send=ki.prototype.o,ki.prototype.open=ki.prototype.m,ki.prototype.close=ki.prototype.close,rF=function(){return new C0},tF=function(){return an()},eF=_t,dT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jr.NO_ERROR=0,Jr.TIMEOUT=8,Jr.HTTP_ERROR=6,ev=Jr,mn.COMPLETE="complete",JV=mn,dn.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,cm=dn,Pn.prototype.listenOnce=Pn.prototype.L,Pn.prototype.getLastError=Pn.prototype.Ka,Pn.prototype.getLastErrorCode=Pn.prototype.Ba,Pn.prototype.getStatus=Pn.prototype.Z,Pn.prototype.getResponseJson=Pn.prototype.Oa,Pn.prototype.getResponseText=Pn.prototype.oa,Pn.prototype.send=Pn.prototype.ea,Pn.prototype.setWithCredentials=Pn.prototype.Ha,ZV=Pn}).apply(typeof lx<"u"?lx:typeof self<"u"?self:typeof window<"u"?window:{});const XO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_i.UNAUTHENTICATED=new _i(null),_i.GOOGLE_CREDENTIALS=new _i("google-credentials-uid"),_i.FIRST_PARTY=new _i("first-party-uid"),_i.MOCK_USER=new _i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new Cj("@firebase/firestore");function mh(){return Gd.logLevel}function it(t,...e){if(Gd.logLevel<=Er.DEBUG){const r=e.map(qj);Gd.debug(`Firestore (${If}): ${t}`,...r)}}function ha(t,...e){if(Gd.logLevel<=Er.ERROR){const r=e.map(qj);Gd.error(`Firestore (${If}): ${t}`,...r)}}function qm(t,...e){if(Gd.logLevel<=Er.WARN){const r=e.map(qj);Gd.warn(`Firestore (${If}): ${t}`,...r)}}function qj(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t="Unexpected state"){const e=`FIRESTORE (${If}) INTERNAL ASSERTION FAILED: `+t;throw ha(e),new Error(e)}function Mt(t,e){t||Et()}function Rt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends Eo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xre{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(_i.UNAUTHENTICATED)))}shutdown(){}}class bre{constructor(e){this.t=e,this.currentUser=_i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Mt(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new To;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new To,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new To)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Mt(typeof n.accessToken=="string"),new xre(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string"),new _i(e)}}class wre{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=_i.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Sre{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new wre(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(_i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _re{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Mt(this.o===void 0);const n=i=>{i.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,it("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Mt(typeof r.token=="string"),this.R=r.token,new _re(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Tre(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function lr(t,e){return t<e?-1:t>e?1:0}function Vh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function aF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new pt(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new pt(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new pt(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pt(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Xn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bt(e)}static min(){return new Bt(new Xn(0,0))}static max(){return new Bt(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,r,n){r===void 0?r=0:r>e.length&&Et(),n===void 0?n=e.length-r:n>e.length-r&&Et(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Hm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Hm?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),o=r.get(a);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Fr extends Hm{construct(e,r,n){return new Fr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new pt(He.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Fr(r)}static emptyPath(){return new Fr([])}}const Are=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends Hm{construct(e,r,n){return new Qn(e,r,n)}static isValidIdentifier(e){return Are.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qn(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new pt(He.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new pt(He.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pt(He.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(i(),a++)}if(i(),o)throw new pt(He.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(r)}static emptyPath(){return new Qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.path=e}static fromPath(e){return new bt(Fr.fromString(e))}static fromName(e){return new bt(Fr.fromString(e).popFirst(5))}static empty(){return new bt(Fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Fr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new Fr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function hT(t){return t.fields.find((e=>e.kind===2))}function Nd(t){return t.fields.filter((e=>e.kind!==2))}Nv.UNKNOWN_ID=-1;class tv{constructor(e,r){this.fieldPath=e,this.kind=r}}class Gm{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Gm(0,Os.min())}}function iF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Bt.fromTimestamp(n===1e9?new Xn(r+1,0):new Xn(r,n));return new Os(a,bt.empty(),e)}function sF(t){return new Os(t.readTime,t.key,-1)}class Os{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Os(Bt.min(),bt.empty(),-1)}static max(){return new Os(Bt.max(),bt.empty(),-1)}}function Hj(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=bt.comparator(t.documentKey,e.documentKey),r!==0?r:lr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(t){if(t.code!==He.FAILED_PRECONDITION||t.message!==oF)throw t;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Oe(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Oe?r:Oe.resolve(r)}catch(r){return Oe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Oe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Oe.reject(r)}static resolve(e){return new Oe(((r,n)=>{r(e)}))}static reject(e){return new Oe(((r,n)=>{n(e)}))}static waitFor(e){return new Oe(((r,n)=>{let a=0,i=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++i,o&&i===a&&r()}),(d=>n(d)))})),o=!0,i===a&&r()}))}static or(e){let r=Oe.resolve(!1);for(const n of e)r=r.next((a=>a?Oe.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new Oe(((n,a)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{o[h]=p,++c,c===i&&n(o)}),(p=>a(p)))}}))}static doWhile(e,r){return new Oe(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new To,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new xm(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=Gj(n.target.error);this.V.reject(new xm(e,a))}}static open(e,r,n,a){try{return new g2(r,e.transaction(a,n))}catch(i){throw new xm(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(it("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Ere(r)}}class wu{constructor(e,r,n){this.name=e,this.version=r,this.p=n,wu.S(za())===12.2&&ha("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return it("SimpleDb","Removing database:",e),jd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pV())return!1;if(wu.v())return!0;const e=za(),r=wu.S(e),n=0<r&&r<10,a=cF(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(it("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const o=i.target.result;r(o)},a.onblocked=()=>{n(new xm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const o=i.target.error;o.name==="VersionError"?n(new pt(He.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new pt(He.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new xm(e,o))},a.onupgradeneeded=i=>{it("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,a.transaction,i.oldVersion,this.version).next((()=>{it("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const c=g2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Oe.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&o<3;if(it("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function cF(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class jre{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return jd(this.B.delete())}}class xm extends pt{constructor(e,r){super(He.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function $u(t){return t.name==="IndexedDbTransactionError"}class Ere{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(it("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(it("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),jd(n)}add(e){return it("SimpleDb","ADD",this.store.name,e,e),jd(this.store.add(e))}get(e){return jd(this.store.get(e)).next((r=>(r===void 0&&(r=null),it("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return it("SimpleDb","DELETE",this.store.name,e),jd(this.store.delete(e))}count(){return it("SimpleDb","COUNT",this.store.name),jd(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new Oe(((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}}))}{const i=this.cursor(n),o=[];return this.W(i,((c,d)=>{o.push(d)})).next((()=>o))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Oe(((a,i)=>{n.onerror=o=>{i(o.target.error)},n.onsuccess=o=>{a(o.target.result)}}))}j(e,r){it("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,o,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Oe(((n,a)=>{r.onerror=i=>{const o=Gj(i.target.error);a(o)},r.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():n()})):n()}}))}W(e,r){const n=[];return new Oe(((a,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void a();const d=new jre(c),h=r(c.primaryKey,c.value,d);if(h instanceof Oe){const p=h.catch((m=>(d.done(),Oe.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Oe.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function jd(t){return new Oe(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=Gj(n.target.error);r(a)}}))}let YO=!1;function Gj(t){const e=wu.S(za());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YO||(YO=!0,setTimeout((()=>{throw n}),0)),n}}return t}class kre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){it("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{it("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){$u(r)?it("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Bu(r)}await this.X(6e4)}))}}class Cre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return Oe.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!n.has(o))return it("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next((c=>{a-=c,n.add(o)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(a,i))).next((c=>(it("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>o.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const o=sF(i);Hj(o,n)>0&&(n=o)})),new Os(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}es.oe=-1;function a1(t){return t==null}function Wm(t){return t===0&&1/t==-1/0}function uF(t){return typeof t=="number"&&Number.isInteger(t)&&!Wm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=ZO(e)),e=Ore(t.get(r),e);return ZO(e)}function Ore(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function ZO(t){return t+""}function Fo(t){const e=t.length;if(Mt(e>=2),e===2)return Mt(t.charAt(0)===""&&t.charAt(1)===""),Fr.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>r)&&Et(),t.charAt(o+1)){case"":const c=t.substring(i,o);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,o),a+="\0";break;case"":a+=t.substring(i,o+1);break;default:Et()}i=o+2}return new Fr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){return[t,Li(e)]}function dF(t,e,r){return[t,Li(e),r]}const Ire={},Rre=["prefixPath","collectionGroup","readTime","documentId"],Mre=["prefixPath","collectionGroup","documentId"],Pre=["collectionGroup","readTime","prefixPath","documentId"],Dre=["canonicalId","targetId"],Lre=["targetId","path"],Bre=["path","targetId"],$re=["collectionId","parent"],Ure=["indexId","uid"],zre=["uid","sequenceNumber"],Vre=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fre=["indexId","uid","orderedDocumentKey"],qre=["userId","collectionPath","documentId"],Hre=["userId","collectionPath","largestBatchId"],Gre=["userId","collectionGroup","largestBatchId"],hF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wre=[...hF,"documentOverlays"],fF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pF=fF,Wj=[...pF,"indexConfiguration","indexState","indexEntries"],Kre=Wj,Qre=[...Wj,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends lF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Fa(t,e){const r=Rt(t);return wu.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function x0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function mF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,r){this.comparator=e,this.root=r||hi.EMPTY}insert(e,r){return new Mn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cx(this.root,e,this.comparator,!1)}getReverseIterator(){return new cx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cx(this.root,e,this.comparator,!0)}}class cx{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hi{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??hi.RED,this.left=a??hi.EMPTY,this.right=i??hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new hi(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return hi.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const e=this.left.check();if(e!==this.right.check())throw Et();return e+(this.isRed()?0:1)}}hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1;hi.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(e,r,n,a,i){return this}insert(e,r,n){return new hi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new tI(this.data.getIterator())}getIteratorFrom(e){return new tI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Sn(this.comparator);return r.data=e,r}}class tI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ih(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new ts([])}unionWith(e){let r=new Sn(Qn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ts(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Vh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new gF("Invalid base64 string: "+i):i}})(e);return new ga(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i})(e);return new ga(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ga.EMPTY_BYTE_STRING=new ga("");const Xre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ac(t){if(Mt(!!t),typeof t=="string"){let e=0;const r=Xre.exec(t);if(Mt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:zn(t.seconds),nanos:zn(t.nanos)}}function zn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ku(t){return typeof t=="string"?ga.fromBase64String(t):ga.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Qj(t){const e=t.mapValue.fields.__previous_value__;return Kj(e)?Qj(e):e}function Km(t){const e=ac(t.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yre{constructor(e,r,n,a,i,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Wd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Wd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nv={nullValue:"NULL_VALUE"};function Kd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kj(t)?4:yF(t)?9007199254740991:y2(t)?10:11:Et()}function Jo(t,e){if(t===e)return!0;const r=Kd(t);if(r!==Kd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Km(t).isEqual(Km(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=ac(a.timestampValue),c=ac(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return ku(a.bytesValue).isEqual(ku(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return zn(a.geoPointValue.latitude)===zn(i.geoPointValue.latitude)&&zn(a.geoPointValue.longitude)===zn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return zn(a.integerValue)===zn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=zn(a.doubleValue),c=zn(i.doubleValue);return o===c?Wm(o)===Wm(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Vh(t.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:case 11:return(function(a,i){const o=a.mapValue.fields||{},c=i.mapValue.fields||{};if(eI(o)!==eI(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!Jo(o[d],c[d])))return!1;return!0})(t,e);default:return Et()}}function Qm(t,e){return(t.values||[]).find((r=>Jo(r,e)))!==void 0}function Cu(t,e){if(t===e)return 0;const r=Kd(t),n=Kd(e);if(r!==n)return lr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return lr(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=zn(i.integerValue||i.doubleValue),d=zn(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return rI(t.timestampValue,e.timestampValue);case 4:return rI(Km(t),Km(e));case 5:return lr(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=ku(i),d=ku(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=lr(c[h],d[h]);if(p!==0)return p}return lr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=lr(zn(i.latitude),zn(o.latitude));return c!==0?c:lr(zn(i.longitude),zn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return nI(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var c,d,h,p;const m=i.fields||{},y=o.fields||{},x=(c=m.value)===null||c===void 0?void 0:c.arrayValue,_=(d=y.value)===null||d===void 0?void 0:d.arrayValue,S=lr(((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0,((p=_==null?void 0:_.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:nI(x,_)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===uu.mapValue&&o===uu.mapValue)return 0;if(i===uu.mapValue)return 1;if(o===uu.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const y=lr(d[m],p[m]);if(y!==0)return y;const x=Cu(c[d[m]],h[p[m]]);if(x!==0)return x}return lr(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Et()}}function rI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lr(t,e);const r=ac(t),n=ac(e),a=lr(r.seconds,n.seconds);return a!==0?a:lr(r.nanos,n.nanos)}function nI(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Cu(r[a],n[a]);if(i)return i}return lr(r.length,n.length)}function Fh(t){return pT(t)}function pT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=ac(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return ku(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return bt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=pT(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const o of n)i?i=!1:a+=",",a+=`${o}:${pT(r.fields[o])}`;return a+"}"})(t.mapValue):Et()}function Xm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mT(t){return!!t&&"integerValue"in t}function Ym(t){return!!t&&"arrayValue"in t}function aI(t){return!!t&&"nullValue"in t}function iI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function av(t){return!!t&&"mapValue"in t}function y2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function vm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return x0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=vm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=vm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function yF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const xF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Zre(t){return"nullValue"in t?nv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xm(Wd.empty(),bt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?y2(t)?xF:{mapValue:{}}:Et()}function Jre(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xm(Wd.empty(),bt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?xF:"mapValue"in t?y2(t)?{mapValue:{}}:uu:Et()}function sI(t,e){const r=Cu(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function oI(t,e){const r=Cu(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!av(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=vm(r)}setAll(e){let r=Qn.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=vm(o):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());av(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];av(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){x0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new pi(vm(this.value))}}function vF(t){const e=[];return x0(t.fields,((r,n)=>{const a=new Qn([r]);if(av(n)){const i=vF(n.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,r,n,a,i,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Vn(e,0,Bt.min(),Bt.min(),Bt.min(),pi.empty(),0)}static newFoundDocument(e,r,n,a){return new Vn(e,1,r,Bt.min(),n,a,0)}static newNoDocument(e,r){return new Vn(e,2,r,Bt.min(),Bt.min(),pi.empty(),0)}static newUnknownDocument(e,r){return new Vn(e,3,r,Bt.min(),Bt.min(),pi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,r){this.position=e,this.inclusive=r}}function lI(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?n=bt.comparator(bt.fromName(o.referenceValue),r.key):n=Cu(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function cI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Jo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,r="asc"){this.field=e,this.dir=r}}function ene(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bF=class{};class kr extends bF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new tne(e,r,n):r==="array-contains"?new ane(e,n):r==="in"?new AF(e,n):r==="not-in"?new ine(e,n):r==="array-contains-any"?new sne(e,n):new kr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new rne(e,n):new nne(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Cu(r,this.value)):r!==null&&Kd(this.value)===Kd(r)&&this.matchesComparison(Cu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends bF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new un(e,r)}matches(e){return Hh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hh(t){return t.op==="and"}function gT(t){return t.op==="or"}function Xj(t){return wF(t)&&Hh(t)}function wF(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function yT(t){if(t instanceof kr)return t.field.canonicalString()+t.op.toString()+Fh(t.value);if(Xj(t))return t.filters.map((e=>yT(e))).join(",");{const e=t.filters.map((r=>yT(r))).join(",");return`${t.op}(${e})`}}function SF(t,e){return t instanceof kr?(function(n,a){return a instanceof kr&&n.op===a.op&&n.field.isEqual(a.field)&&Jo(n.value,a.value)})(t,e):t instanceof un?(function(n,a){return a instanceof un&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,o,c)=>i&&SF(o,a.filters[c])),!0):!1})(t,e):void Et()}function _F(t,e){const r=t.filters.concat(e);return un.create(r,t.op)}function NF(t){return t instanceof kr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Fh(r.value)}`})(t):t instanceof un?(function(r){return r.op.toString()+" {"+r.getFilters().map(NF).join(" ,")+"}"})(t):"Filter"}class tne extends kr{constructor(e,r,n){super(e,r,n),this.key=bt.fromName(n.referenceValue)}matches(e){const r=bt.comparator(e.key,this.key);return this.matchesComparison(r)}}class rne extends kr{constructor(e,r){super(e,"in",r),this.keys=TF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class nne extends kr{constructor(e,r){super(e,"not-in",r),this.keys=TF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function TF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>bt.fromName(n.referenceValue)))}class ane extends kr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Ym(r)&&Qm(r.arrayValue,this.value)}}class AF extends kr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Qm(this.value.arrayValue,r)}}class ine extends kr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Qm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Qm(this.value.arrayValue,r)}}class sne extends kr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Ym(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>Qm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class one{constructor(e,r=null,n=[],a=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function xT(t,e=null,r=[],n=[],a=null,i=null,o=null){return new one(t,e,r,n,a,i,o)}function Qd(t){const e=Rt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>yT(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),a1(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Fh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Fh(n))).join(",")),e.ue=r}return e.ue}function i1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!ene(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!SF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cI(t.startAt,e.startAt)&&cI(t.endAt,e.endAt)}function Tv(t){return bt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Av(t,e){return t.filters.filter((r=>r instanceof kr&&r.field.isEqual(e)))}function uI(t,e,r){let n=nv,a=!0;for(const i of Av(t,e)){let o=nv,c=!0;switch(i.op){case"<":case"<=":o=Zre(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,c=!1;break;case"!=":case"not-in":o=nv}sI({value:n,inclusive:a},{value:o,inclusive:c})<0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];sI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function dI(t,e,r){let n=uu,a=!0;for(const i of Av(t,e)){let o=uu,c=!0;switch(i.op){case">=":case">":o=Jre(i.value),c=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,c=!1;break;case"!=":case"not-in":o=uu}oI({value:n,inclusive:a},{value:o,inclusive:c})>0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];oI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,r=null,n=[],a=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jF(t,e,r,n,a,i,o,c){return new Rf(t,e,r,n,a,i,o,c)}function s1(t){return new Rf(t)}function hI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EF(t){return t.collectionGroup!==null}function bm(t){const e=Rt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Sn(Qn.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Zm(i,n))})),r.has(Qn.keyField().canonicalString())||e.ce.push(new Zm(Qn.keyField(),n))}return e.ce}function Es(t){const e=Rt(t);return e.le||(e.le=lne(e,bm(t))),e.le}function lne(t,e){if(t.limitType==="F")return xT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new Zm(a.field,i)}));const r=t.endAt?new qh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new qh(t.startAt.position,t.startAt.inclusive):null;return xT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function vT(t,e){const r=t.filters.concat([e]);return new Rf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function jv(t,e,r){return new Rf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function x2(t,e){return i1(Es(t),Es(e))&&t.limitType===e.limitType}function kF(t){return`${Qd(Es(t))}|lt:${t.limitType}`}function gh(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>NF(a))).join(", ")}]`),a1(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>Fh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>Fh(a))).join(",")),`Target(${n})`})(Es(t))}; limitType=${t.limitType})`}function o1(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):bt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of bm(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=lI(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,bm(n),a)||n.endAt&&!(function(o,c,d){const h=lI(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,bm(n),a))})(t,e)}function CF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OF(t){return(e,r)=>{let n=!1;for(const a of bm(t)){const i=cne(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function cne(t,e,r){const n=t.field.isKeyField()?bt.comparator(e.key,r.key):(function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?Cu(d,h):Et()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Et()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){x0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return mF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const une=new Mn(bt.comparator);function As(){return une}const IF=new Mn(bt.comparator);function um(...t){let e=IF;for(const r of t)e=e.insert(r.key,r);return e}function RF(t){let e=IF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function qo(){return wm()}function MF(){return wm()}function wm(){return new Uu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const dne=new Mn(bt.comparator),hne=new Sn(bt.comparator);function xr(...t){let e=hne;for(const r of t)e=e.add(r);return e}const fne=new Sn(lr);function Yj(){return fne}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wm(e)?"-0":e}}function PF(t){return{integerValue:""+t}}function DF(t,e){return uF(e)?PF(e):Zj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this._=void 0}}function pne(t,e,r){return t instanceof Jm?(function(a,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&Kj(i)&&(i=Qj(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(r,e):t instanceof Xd?BF(t,e):t instanceof Gh?$F(t,e):(function(a,i){const o=LF(a,i),c=fI(o)+fI(a.Pe);return mT(o)&&mT(a.Pe)?PF(c):Zj(a.serializer,c)})(t,e)}function mne(t,e,r){return t instanceof Xd?BF(t,e):t instanceof Gh?$F(t,e):r}function LF(t,e){return t instanceof Wh?(function(n){return mT(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class Jm extends v2{}class Xd extends v2{constructor(e){super(),this.elements=e}}function BF(t,e){const r=UF(e);for(const n of t.elements)r.some((a=>Jo(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Gh extends v2{constructor(e){super(),this.elements=e}}function $F(t,e){let r=UF(e);for(const n of t.elements)r=r.filter((a=>!Jo(a,n)));return{arrayValue:{values:r}}}class Wh extends v2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function fI(t){return zn(t.integerValue||t.doubleValue)}function UF(t){return Ym(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,r){this.field=e,this.transform=r}}function gne(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof Xd&&a instanceof Xd||n instanceof Gh&&a instanceof Gh?Vh(n.elements,a.elements,Jo):n instanceof Wh&&a instanceof Wh?Jo(n.Pe,a.Pe):n instanceof Jm&&a instanceof Jm})(t.transform,e.transform)}class yne{constructor(e,r){this.version=e,this.transformResults=r}}class fa{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new fa}static exists(e){return new fa(void 0,e)}static updateTime(e){return new fa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class b2{}function zF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new l1(t.key,fa.none()):new Mf(t.key,t.data,fa.none());{const r=t.data,n=pi.empty();let a=new Sn(Qn.comparator);for(let i of e.fields)if(!a.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),a=a.add(i)}return new fc(t.key,n,new ts(a.toArray()),fa.none())}}function xne(t,e,r){t instanceof Mf?(function(a,i,o){const c=a.value.clone(),d=mI(a.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof fc?(function(a,i,o){if(!iv(a.precondition,i))return void i.convertToUnknownDocument(o.version);const c=mI(a.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(VF(a)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Sm(t,e,r,n){return t instanceof Mf?(function(i,o,c,d){if(!iv(i.precondition,o))return c;const h=i.value.clone(),p=gI(i.fieldTransforms,d,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof fc?(function(i,o,c,d){if(!iv(i.precondition,o))return c;const h=gI(i.fieldTransforms,d,o),p=o.data;return p.setAll(VF(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,o,c){return iv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function vne(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=LF(n.transform,a||null);i!=null&&(r===null&&(r=pi.empty()),r.set(n.field,i))}return r||null}function pI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Vh(n,a,((i,o)=>gne(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mf extends b2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class fc extends b2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VF(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function mI(t,e,r){const n=new Map;Mt(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],o=i.transform,c=e.data.field(i.field);n.set(i.field,mne(o,c,r[a]))}return n}function gI(t,e,r){const n=new Map;for(const a of t){const i=a.transform,o=r.data.field(a.field);n.set(a.field,pne(i,o,e))}return n}class l1 extends b2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e8 extends b2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&xne(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Sm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Sm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=MF();return this.mutations.forEach((a=>{const i=e.get(a.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=r.has(a.key)?null:c;const d=zF(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Bt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),xr())}isEqual(e){return this.batchId===e.batchId&&Vh(this.mutations,e.mutations,((r,n)=>pI(r,n)))&&Vh(this.baseMutations,e.baseMutations,((r,n)=>pI(r,n)))}}class r8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Mt(e.mutations.length===n.length);let a=(function(){return dne})();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,n[o].version);return new r8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bne{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aa,Mr;function FF(t){switch(t){default:return Et();case He.CANCELLED:case He.UNKNOWN:case He.DEADLINE_EXCEEDED:case He.RESOURCE_EXHAUSTED:case He.INTERNAL:case He.UNAVAILABLE:case He.UNAUTHENTICATED:return!1;case He.INVALID_ARGUMENT:case He.NOT_FOUND:case He.ALREADY_EXISTS:case He.PERMISSION_DENIED:case He.FAILED_PRECONDITION:case He.ABORTED:case He.OUT_OF_RANGE:case He.UNIMPLEMENTED:case He.DATA_LOSS:return!0}}function qF(t){if(t===void 0)return ha("GRPC error has no .code"),He.UNKNOWN;switch(t){case Aa.OK:return He.OK;case Aa.CANCELLED:return He.CANCELLED;case Aa.UNKNOWN:return He.UNKNOWN;case Aa.DEADLINE_EXCEEDED:return He.DEADLINE_EXCEEDED;case Aa.RESOURCE_EXHAUSTED:return He.RESOURCE_EXHAUSTED;case Aa.INTERNAL:return He.INTERNAL;case Aa.UNAVAILABLE:return He.UNAVAILABLE;case Aa.UNAUTHENTICATED:return He.UNAUTHENTICATED;case Aa.INVALID_ARGUMENT:return He.INVALID_ARGUMENT;case Aa.NOT_FOUND:return He.NOT_FOUND;case Aa.ALREADY_EXISTS:return He.ALREADY_EXISTS;case Aa.PERMISSION_DENIED:return He.PERMISSION_DENIED;case Aa.FAILED_PRECONDITION:return He.FAILED_PRECONDITION;case Aa.ABORTED:return He.ABORTED;case Aa.OUT_OF_RANGE:return He.OUT_OF_RANGE;case Aa.UNIMPLEMENTED:return He.UNIMPLEMENTED;case Aa.DATA_LOSS:return He.DATA_LOSS;default:return Et()}}(Mr=Aa||(Aa={}))[Mr.OK=0]="OK",Mr[Mr.CANCELLED=1]="CANCELLED",Mr[Mr.UNKNOWN=2]="UNKNOWN",Mr[Mr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mr[Mr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mr[Mr.NOT_FOUND=5]="NOT_FOUND",Mr[Mr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mr[Mr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mr[Mr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mr[Mr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mr[Mr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mr[Mr.ABORTED=10]="ABORTED",Mr[Mr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mr[Mr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mr[Mr.INTERNAL=13]="INTERNAL",Mr[Mr.UNAVAILABLE=14]="UNAVAILABLE",Mr[Mr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wne(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sne=new zd([4294967295,4294967295],0);function yI(t){const e=wne().encode(t),r=new YV;return r.update(e),new Uint8Array(r.digest())}function xI(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new zd([r,n],0),new zd([a,i],0)]}class a8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new dm(`Invalid padding: ${r}`);if(n<0)throw new dm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new dm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new dm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=zd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(zd.fromNumber(n)));return a.compare(Sne)===1&&(a=new zd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=yI(e),[n,a]=xI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new a8(i,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=yI(e),[n,a]=xI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class dm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,u1.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new c1(Bt.min(),a,new Mn(lr),As(),xr())}}class u1{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new u1(n,r,xr(),xr(),xr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class HF{constructor(e,r){this.targetId=e,this.me=r}}class GF{constructor(e,r,n=ga.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class vI{constructor(){this.fe=0,this.ge=wI(),this.pe=ga.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xr(),r=xr(),n=xr();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Et()}})),new u1(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=wI()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _ne{constructor(e){this.Le=e,this.Be=new Map,this.ke=As(),this.qe=bI(),this.Qe=new Mn(lr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Et()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(Tv(i))if(n===0){const o=new bt(i.path);this.Ue(r,o,Vn.newNoDocument(o,Bt.min()))}else Mt(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let o,c;try{o=ku(n).toUint8Array()}catch(d){if(d instanceof gF)return qm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new a8(o,a,i)}catch(d){return qm(d instanceof dm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Tv(c.target)){const d=new bt(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Vn.newNoDocument(d,e))}i.be&&(r.set(o,i.ve()),i.Ce())}}));let n=xr();this.qe.forEach(((i,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const a=new c1(e,r,this.Qe,this.ke,n);return this.ke=As(),this.qe=bI(),this.Qe=new Mn(lr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new vI,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Sn(lr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||it("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vI),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function bI(){return new Mn(bt.comparator)}function wI(){return new Mn(bt.comparator)}const Nne={asc:"ASCENDING",desc:"DESCENDING"},Tne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ane={and:"AND",or:"OR"};class jne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function bT(t,e){return t.useProto3Json||a1(e)?e:{value:e}}function Kh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ene(t,e){return Kh(t,e.toTimestamp())}function ei(t){return Mt(!!t),Bt.fromTimestamp((function(r){const n=ac(r);return new Xn(n.seconds,n.nanos)})(t))}function i8(t,e){return wT(t,e).canonicalString()}function wT(t,e){const r=(function(a){return new Fr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function KF(t){const e=Fr.fromString(t);return Mt(nq(e)),e}function eg(t,e){return i8(t.databaseId,e.path)}function Kl(t,e){const r=KF(e);if(r.get(1)!==t.databaseId.projectId)throw new pt(He.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new pt(He.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new bt(YF(r))}function QF(t,e){return i8(t.databaseId,e)}function XF(t){const e=KF(t);return e.length===4?Fr.emptyPath():YF(e)}function ST(t){return new Fr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YF(t){return Mt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function SI(t,e,r){return{name:eg(t,e),fields:r.value.mapValue.fields}}function kne(t,e,r){const n=Kl(t,e.name),a=ei(e.updateTime),i=e.createTime?ei(e.createTime):Bt.min(),o=new pi({mapValue:{fields:e.fields}}),c=Vn.newFoundDocument(n,a,i,o);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Cne(t,e){return"found"in e?(function(n,a){Mt(!!a.found),a.found.name,a.found.updateTime;const i=Kl(n,a.found.name),o=ei(a.found.updateTime),c=a.found.createTime?ei(a.found.createTime):Bt.min(),d=new pi({mapValue:{fields:a.found.fields}});return Vn.newFoundDocument(i,o,c,d)})(t,e):"missing"in e?(function(n,a){Mt(!!a.missing),Mt(!!a.readTime);const i=Kl(n,a.missing),o=ei(a.readTime);return Vn.newNoDocument(i,o)})(t,e):Et()}function One(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Et()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Mt(p===void 0||typeof p=="string"),ga.fromBase64String(p||"")):(Mt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ga.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?He.UNKNOWN:qF(h.code);return new pt(p,h.message||"")})(o);r=new GF(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Kl(t,n.document.name),i=ei(n.document.updateTime),o=n.document.createTime?ei(n.document.createTime):Bt.min(),c=new pi({mapValue:{fields:n.document.fields}}),d=Vn.newFoundDocument(a,i,o,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new sv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Kl(t,n.document),i=n.readTime?ei(n.readTime):Bt.min(),o=Vn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new sv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Kl(t,n.document),i=n.removedTargetIds||[];r=new sv([],i,a,null)}else{if(!("filter"in e))return Et();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,o=new bne(a,i),c=n.targetId;r=new HF(c,o)}}return r}function tg(t,e){let r;if(e instanceof Mf)r={update:SI(t,e.key,e.value)};else if(e instanceof l1)r={delete:eg(t,e.key)};else if(e instanceof fc)r={update:SI(t,e.key,e.data),updateMask:Lne(e.fieldMask)};else{if(!(e instanceof e8))return Et();r={verify:eg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const c=o.transform;if(c instanceof Jm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Xd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Gh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wh)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Et()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:Ene(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Et()})(t,e.precondition)),r}function _T(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?fa.updateTime(ei(i.updateTime)):i.exists!==void 0?fa.exists(i.exists):fa.none()})(e.currentDocument):fa.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(o,c){let d=null;if("setToServerValue"in c)Mt(c.setToServerValue==="REQUEST_TIME"),d=new Jm;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new Xd(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new Gh(p)}else"increment"in c?d=new Wh(o,c.increment):Et();const h=Qn.fromServerFormat(c.fieldPath);return new Jj(h,d)})(t,a))):[];if(e.update){e.update.name;const a=Kl(t,e.update.name),i=new pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(d){const h=d.fieldPaths||[];return new ts(h.map((p=>Qn.fromServerFormat(p))))})(e.updateMask);return new fc(a,i,o,r,n)}return new Mf(a,i,r,n)}if(e.delete){const a=Kl(t,e.delete);return new l1(a,r)}if(e.verify){const a=Kl(t,e.verify);return new e8(a,r)}return Et()}function Ine(t,e){return t&&t.length>0?(Mt(e!==void 0),t.map((r=>(function(a,i){let o=a.updateTime?ei(a.updateTime):ei(i);return o.isEqual(Bt.min())&&(o=ei(i)),new yne(o,a.transformResults||[])})(r,e)))):[]}function ZF(t,e){return{documents:[QF(t,e.path)]}}function JF(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=QF(t,a);const i=(function(h){if(h.length!==0)return rq(un.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:yh(y.field),direction:Mne(y.dir)}})(p)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=bT(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function eq(t){let e=XF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Mt(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const y=tq(m);return y instanceof un&&Xj(y)?y.getFilters():[y]})(r.where));let o=[];r.orderBy&&(o=(function(m){return m.map((y=>(function(_){return new Zm(xh(_.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let y;return y=typeof m=="object"?m.value:m,a1(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(m){const y=!!m.before,x=m.values||[];return new qh(x,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const y=!m.before,x=m.values||[];return new qh(x,y)})(r.endAt)),jF(e,a,o,i,c,"F",d,h)}function Rne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function tq(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=xh(r.unaryFilter.field);return kr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=xh(r.unaryFilter.field);return kr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xh(r.unaryFilter.field);return kr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xh(r.unaryFilter.field);return kr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Et()}})(t):t.fieldFilter!==void 0?(function(r){return kr.create(xh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return un.create(r.compositeFilter.filters.map((n=>tq(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Et()}})(r.compositeFilter.op))})(t):Et()}function Mne(t){return Nne[t]}function Pne(t){return Tne[t]}function Dne(t){return Ane[t]}function yh(t){return{fieldPath:t.canonicalString()}}function xh(t){return Qn.fromServerFormat(t.fieldPath)}function rq(t){return t instanceof kr?(function(r){if(r.op==="=="){if(iI(r.value))return{unaryFilter:{field:yh(r.field),op:"IS_NAN"}};if(aI(r.value))return{unaryFilter:{field:yh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(iI(r.value))return{unaryFilter:{field:yh(r.field),op:"IS_NOT_NAN"}};if(aI(r.value))return{unaryFilter:{field:yh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yh(r.field),op:Pne(r.op),value:r.value}}})(t):t instanceof un?(function(r){const n=r.getFilters().map((a=>rq(a)));return n.length===1?n[0]:{compositeFilter:{op:Dne(r.op),filters:n}}})(t):Et()}function Lne(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function nq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,r,n,a,i=Bt.min(),o=Bt.min(),c=ga.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e){this.ct=e}}function Bne(t,e){let r;if(e.document)r=kne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=bt.fromSegments(e.noDocument.path),a=Zd(e.noDocument.readTime);r=Vn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et();{const n=bt.fromSegments(e.unknownDocument.path),a=Zd(e.unknownDocument.version);r=Vn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new Xn(a[0],a[1]);return Bt.fromTimestamp(i)})(e.readTime)),r}function _I(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Ev(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,o){return{name:eg(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Kh(i,o.version.toTimestamp()),createTime:Kh(i,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Yd(e.version)};else{if(!e.isUnknownDocument())return Et();n.unknownDocument={path:r.path.toArray(),version:Yd(e.version)}}return n}function Ev(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Yd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zd(t){const e=new Xn(t.seconds,t.nanoseconds);return Bt.fromTimestamp(e)}function Ed(t,e){const r=(e.baseMutations||[]).map((i=>_T(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>_T(t.ct,i))),a=Xn.fromMillis(e.localWriteTimeMs);return new t8(e.batchId,a,r,n)}function hm(t){const e=Zd(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Zd(t.lastLimboFreeSnapshotVersion):Bt.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Mt(i.documents.length===1),Es(s1(XF(i.documents[0])))})(t.query):(function(i){return Es(eq(i))})(t.query),new Fl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ga.fromBase64String(t.resumeToken))}function iq(t,e){const r=Yd(e.snapshotVersion),n=Yd(e.lastLimboFreeSnapshotVersion);let a;a=Tv(e.target)?ZF(t.ct,e.target):JF(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qd(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function sq(t){const e=eq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jv(e,e.limit,"L"):e}function J5(t,e){return new n8(e.largestBatchId,_T(t.ct,e.overlayMutation))}function NI(t,e){const r=e.path.lastSegment();return[t,Li(e.path.popLast()),r]}function TI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Yd(n.readTime),documentKey:Li(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ne{getBundleMetadata(e,r){return AI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:Zd(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return AI(e).put((function(a){return{bundleId:a.id,createTime:Yd(ei(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return jI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:sq(i.bundledQuery),readTime:Zd(i.readTime)}})(n)}))}saveNamedQuery(e,r){return jI(e).put((function(a){return{name:a.name,readTime:Yd(ei(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function AI(t){return Fa(t,"bundles")}function jI(t){return Fa(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new w2(e,n)}getOverlay(e,r){return Vp(e).get(NI(this.userId,r)).next((n=>n?J5(this.serializer,n):null))}getOverlays(e,r){const n=qo();return Oe.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,o)=>{const c=new n8(r,o);a.push(this.ht(e,c))})),Oe.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((o=>a.add(Li(o.getCollectionPath()))));const i=[];return a.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);i.push(Vp(e).j("collectionPathOverlayIndex",c))})),Oe.waitFor(i)}getOverlaysForCollection(e,r,n){const a=qo(),i=Li(r),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Vp(e).U("collectionPathOverlayIndex",o).next((c=>{for(const d of c){const h=J5(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=qo();let o;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Vp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=J5(this.serializer,h);i.size()<a||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Vp(e).put((function(a,i,o){const[c,d,h]=NI(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:tg(a.ct,o.mutation)}})(this.serializer,this.userId,r))}}function Vp(t){return Fa(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{Pt(e){return Fa(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?ga.fromUint8Array(n):ga.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(zn(e.integerValue));else if("doubleValue"in e){const n=zn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Wm(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=ac(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(ku(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?yF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):y2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Et()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const o="value",c=((a=(n=i[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(zn(c)),this.Vt(o,r),this.Tt(i[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),bt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}kd.vt=new kd;function zne(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function EI(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const o=zne(255&n[i]);if(a+=o,o!==8)break}return a})(t);return Math.ceil(e/8)}class Vne{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=EI(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=EI(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Fne{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class qne{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Fp{constructor(){this.jt=new Vne,this.Ht=new Fne(this.jt),this.Jt=new qne(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Cd(this.indexId,this.documentKey,this.arrayValue,n)}}function Xc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=kI(t.arrayValue,e.arrayValue),r!==0?r:(r=kI(t.directionalValue,e.directionalValue),r!==0?r:bt.comparator(t.documentKey,e.documentKey)))}function kI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.Xt=new Sn(((r,n)=>Qn.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Mt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=hT(e);if(r!==void 0&&!this.sn(r))return!1;const n=Nd(e);let a=new Set,i=0,o=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[o++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(o>=this.en.length||!this._n(this.en[o++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Sn(Qn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new tv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new tv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new tv(n.field,n.dir==="asc"?0:1)));return new Nv(Nv.UNKNOWN_ID,this.collectionId,r,Gm.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(t){var e,r;if(Mt(t instanceof kr||t instanceof un),t instanceof kr){if(t instanceof AF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>kr.create(t.field,"==",i))))||[];return un.create(a,"or")}return t}const n=t.filters.map((a=>oq(a)));return un.create(n,t.op)}function Hne(t){if(t.getFilters().length===0)return[];const e=AT(oq(t));return Mt(lq(e)),NT(e)||TT(e)?[e]:e.getFilters()}function NT(t){return t instanceof kr}function TT(t){return t instanceof un&&Xj(t)}function lq(t){return NT(t)||TT(t)||(function(r){if(r instanceof un&&gT(r)){for(const n of r.getFilters())if(!NT(n)&&!TT(n))return!1;return!0}return!1})(t)}function AT(t){if(Mt(t instanceof kr||t instanceof un),t instanceof kr)return t;if(t.filters.length===1)return AT(t.filters[0]);const e=t.filters.map((n=>AT(n)));let r=un.create(e,t.op);return r=kv(r),lq(r)?r:(Mt(r instanceof un),Mt(Hh(r)),Mt(r.filters.length>1),r.filters.reduce(((n,a)=>s8(n,a))))}function s8(t,e){let r;return Mt(t instanceof kr||t instanceof un),Mt(e instanceof kr||e instanceof un),r=t instanceof kr?e instanceof kr?(function(a,i){return un.create([a,i],"and")})(t,e):OI(t,e):e instanceof kr?OI(e,t):(function(a,i){if(Mt(a.filters.length>0&&i.filters.length>0),Hh(a)&&Hh(i))return _F(a,i.getFilters());const o=gT(a)?a:i,c=gT(a)?i:a,d=o.filters.map((h=>s8(h,c)));return un.create(d,"or")})(t,e),kv(r)}function OI(t,e){if(Hh(e))return _F(e,t.getFilters());{const r=e.filters.map((n=>s8(t,n)));return un.create(r,"or")}}function kv(t){if(Mt(t instanceof kr||t instanceof un),t instanceof kr)return t;const e=t.getFilters();if(e.length===1)return kv(e[0]);if(wF(t))return t;const r=e.map((a=>kv(a))),n=[];return r.forEach((a=>{a instanceof kr?n.push(a):a instanceof un&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:un.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gne{constructor(){this.un=new o8}addToCollectionParentIndex(e,r){return this.un.add(r),Oe.resolve()}getCollectionParents(e,r){return Oe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Oe.resolve()}deleteFieldIndex(e,r){return Oe.resolve()}deleteAllFieldIndexes(e){return Oe.resolve()}createTargetIndexes(e,r){return Oe.resolve()}getDocumentsMatchingTarget(e,r){return Oe.resolve(null)}getIndexType(e,r){return Oe.resolve(0)}getFieldIndexes(e,r){return Oe.resolve([])}getNextCollectionGroupToUpdate(e){return Oe.resolve(null)}getMinOffset(e,r){return Oe.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,r){return Oe.resolve(Os.min())}updateCollectionGroup(e,r,n){return Oe.resolve()}updateIndexEntries(e,r){return Oe.resolve()}}class o8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Sn(Fr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Sn(Fr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=new Uint8Array(0);class Wne{constructor(e,r){this.databaseId=r,this.cn=new o8,this.ln=new Uu((n=>Qd(n)),((n,a)=>i1(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:Li(a)};return II(e).put(i)}return Oe.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[aF(r),""],!1,!0);return II(e).U(a).next((i=>{for(const o of i){if(o.collectionId!==r)break;n.push(Fo(o.parent))}return n}))}addFieldIndex(e,r){const n=qp(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const o=oh(e);return i.next((c=>{o.put(TI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=qp(e),a=oh(e),i=sh(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=qp(e),n=sh(e),a=oh(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return Oe.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new CI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=sh(e);let a=!0;const i=new Map;return Oe.forEach(this.hn(r),(o=>this.Pn(e,o).next((c=>{a&&(a=!!c),i.set(o,c)})))).next((()=>{if(a){let o=xr();const c=[];return Oe.forEach(i,((d,h)=>{it("IndexedDbIndexManager",`Using index ${(function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${Qd(r)}`);const p=(function(R,L){const C=hT(L);if(C===void 0)return null;for(const O of Av(R,C.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null})(h,d),m=(function(R,L){const C=new Map;for(const O of Nd(L))for(const A of Av(R,O.fieldPath))switch(A.op){case"==":case"in":C.set(O.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return C.set(O.fieldPath.canonicalString(),A.value),Array.from(C.values())}return null})(h,d),y=(function(R,L){const C=[];let O=!0;for(const A of Nd(L)){const j=A.kind===0?uI(R,A.fieldPath,R.startAt):dI(R,A.fieldPath,R.startAt);C.push(j.value),O&&(O=j.inclusive)}return new qh(C,O)})(h,d),x=(function(R,L){const C=[];let O=!0;for(const A of Nd(L)){const j=A.kind===0?dI(R,A.fieldPath,R.endAt):uI(R,A.fieldPath,R.endAt);C.push(j.value),O&&(O=j.inclusive)}return new qh(C,O)})(h,d),_=this.In(d,h,y),S=this.In(d,h,x),w=this.Tn(d,h,m),E=this.En(d.indexId,p,_,y.inclusive,S,x.inclusive,w);return Oe.forEach(E,(I=>n.G(I,r.limit).next((R=>{R.forEach((L=>{const C=bt.fromSegments(L.documentKey);o.has(C)||(o=o.add(C),c.push(C))}))}))))})).next((()=>c))}return Oe.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Hne(un.create(e.filters,"and")).map((n=>xT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,o,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const y=r?this.dn(r[m/h]):ux,x=this.An(e,y,n[m%h],a),_=this.Rn(e,y,i[m%h],o),S=c.map((w=>this.An(e,y,w,!0)));p.push(...this.createRange(x,_,S))}return p}An(e,r,n,a){const i=new Cd(e,bt.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Cd(e,bt.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new CI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let o=null;for(const c of i)n.rn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,r){let n=2;const a=this.hn(r);return Oe.forEach(a,(i=>this.Pn(e,i).next((o=>{o?n!==0&&o.fields.length<(function(d){let h=new Sn(Qn.comparator),p=!1;for(const m of d.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?p=!0:h=h.add(y.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(o){return o.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Fp;for(const a of Nd(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const o=n.Yt(a.kind);kd.vt.It(i,o)}return n.zt()}dn(e){const r=new Fp;return kd.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Fp;return kd.vt.It(Xm(this.databaseId,r),n.Yt((function(i){const o=Nd(i);return o.length===0?0:o[o.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Fp);let i=0;for(const o of Nd(e)){const c=n[i++];for(const d of a)if(this.fn(r,o.fieldPath)&&Ym(c))a=this.gn(a,o,c);else{const h=d.Yt(o.kind);kd.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const o of n.arrayValue.values||[])for(const c of a){const d=new Fp;d.seed(c.zt()),kd.vt.It(o,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof kr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=qp(e),a=oh(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const o=[];return Oe.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{o.push((function(p,m){const y=m?new Gm(m.sequenceNumber,new Os(Zd(m.readTime),new bt(Fo(m.documentKey)),m.largestBatchId)):Gm.empty(),x=p.fields.map((([_,S])=>new tv(Qn.fromServerFormat(_),S)));return new Nv(p.indexId,p.collectionGroup,x,y)})(c,d))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:lr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=qp(e),i=oh(e);return this.yn(e).next((o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Oe.forEach(c,(d=>i.put(TI(d.indexId,this.uid,o,n))))))))}updateIndexEntries(e,r){const n=new Map;return Oe.forEach(r,((a,i)=>{const o=n.get(a.collectionGroup);return(o?Oe.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),Oe.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?Oe.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return sh(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return sh(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=sh(e);let i=new Sn(Xc);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((o,c)=>{i=i.add(new Cd(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new Sn(Xc);const a=this.Vn(r,e);if(a==null)return n;const i=hT(r);if(i!=null){const o=e.data.field(i.fieldPath);if(Ym(o))for(const c of o.arrayValue.values||[])n=n.add(new Cd(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Cd(r.indexId,e.key,ux,a));return n}bn(e,r,n,a,i){it("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return(function(d,h,p,m,y){const x=d.getIterator(),_=h.getIterator();let S=ih(x),w=ih(_);for(;S||w;){let E=!1,I=!1;if(S&&w){const R=p(S,w);R<0?I=!0:R>0&&(E=!0)}else S!=null?I=!0:E=!0;E?(m(w),w=ih(_)):I?(y(S),S=ih(x)):(S=ih(x),w=ih(_))}})(a,i,Xc,(c=>{o.push(this.Dn(e,r,n,c))}),(c=>{o.push(this.vn(e,r,n,c))})),Oe.waitFor(o)}yn(e){let r=1;return oh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((o,c)=>Xc(o,c))).filter(((o,c,d)=>!c||Xc(o,d[c-1])!==0));const a=[];a.push(e);for(const o of n){const c=Xc(o,e),d=Xc(o,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(o),a.push(o.Zt());else if(d>0)break}a.push(r);const i=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const c=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,ux,[]],d=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,ux,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return Xc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(RI)}getMinOffset(e,r){return Oe.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||Et())))).next(RI)}}function II(t){return Fa(t,"collectionParents")}function sh(t){return Fa(t,"indexEntries")}function qp(t){return Fa(t,"indexConfiguration")}function oh(t){return Fa(t,"indexState")}function RI(t){Mt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;Hj(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Os(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],o=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:o},((p,m,y)=>(c++,y.delete())));i.push(d.next((()=>{Mt(c===1)})));const h=[];for(const p of r.mutations){const m=dF(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return Oe.waitFor(i).next((()=>h))}function Cv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Et();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class S2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Mt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new S2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yc(e).J({index:"userMutationsIndex",range:n},((a,i,o)=>{r=!1,o.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=vh(e),o=Yc(e);return o.add({}).next((c=>{Mt(typeof c=="number");const d=new t8(c,r,n,a),h=(function(x,_,S){const w=S.baseMutations.map((I=>tg(x.ct,I))),E=S.mutations.map((I=>tg(x.ct,I)));return{userId:_,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:w,mutations:E}})(this.serializer,this.userId,d),p=[];let m=new Sn(((y,x)=>lr(y.canonicalString(),x.canonicalString())));for(const y of a){const x=dF(this.userId,y.key.path,c);m=m.add(y.key.path.popLast()),p.push(o.put(h)),p.push(i.put(x,Ire))}return m.forEach((y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Oe.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return Yc(e).get(r).next((n=>n?(Mt(n.userId===this.userId),Ed(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Oe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Yc(e).J({index:"userMutationsIndex",range:a},((o,c,d)=>{c.userId===this.userId&&(Mt(c.batchId>=n),i=Ed(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Yc(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,o)=>{n=i.batchId,o.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yc(e).U("userMutationsIndex",r).next((n=>n.map((a=>Ed(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=rv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return vh(e).J({range:a},((o,c,d)=>{const[h,p,m]=o,y=Fo(p);if(h===this.userId&&r.path.isEqual(y))return Yc(e).get(m).next((x=>{if(!x)throw Et();Mt(x.userId===this.userId),i.push(Ed(this.serializer,x))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Sn(lr);const a=[];return r.forEach((i=>{const o=rv(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=vh(e).J({range:c},((h,p,m)=>{const[y,x,_]=h,S=Fo(x);y===this.userId&&i.path.isEqual(S)?n=n.add(_):m.done()}));a.push(d)})),Oe.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=rv(this.userId,n),o=IDBKeyRange.lowerBound(i);let c=new Sn(lr);return vh(e).J({range:o},((d,h,p)=>{const[m,y,x]=d,_=Fo(y);m===this.userId&&n.isPrefixOf(_)?_.length===a&&(c=c.add(x)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(Yc(e).get(i).next((o=>{if(o===null)throw Et();Mt(o.userId===this.userId),n.push(Ed(this.serializer,o))})))})),Oe.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return cq(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Oe.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Oe.resolve();const n=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),a=[];return vh(e).J({range:n},((i,o,c)=>{if(i[0]===this.userId){const d=Fo(i[1]);a.push(d)}else c.done()})).next((()=>{Mt(a.length===0)}))}))}containsKey(e,r){return uq(e,this.userId,r)}Nn(e){return dq(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function uq(t,e,r){const n=rv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let o=!1;return vh(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,y]=c;p===e&&m===a&&(o=!0),h.done()})).next((()=>o))}function Yc(t){return Fa(t,"mutations")}function vh(t){return Fa(t,"documentMutations")}function dq(t){return Fa(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Jd(0)}static kn(){return new Jd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kne{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new Jd(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Bt.fromTimestamp(new Xn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>lh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Mt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return lh(e).J(((o,c)=>{const d=hm(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>Oe.waitFor(i))).next((()=>a))}forEachTarget(e,r){return lh(e).J(((n,a)=>{const i=hm(a);r(i)}))}qn(e){return PI(e).get("targetGlobalKey").next((r=>(Mt(r!==null),r)))}Qn(e,r){return PI(e).put("targetGlobalKey",r)}Kn(e,r){return lh(e).put(iq(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Qd(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return lh(e).J({range:a,index:"queryTargetsIndex"},((o,c,d)=>{const h=hm(c);i1(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=su(e);return r.forEach((o=>{const c=Li(o.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,o))})),Oe.waitFor(a)}removeMatchingKeys(e,r,n){const a=su(e);return Oe.forEach(r,(i=>{const o=Li(i.path);return Oe.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=su(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=su(e);let i=xr();return a.J({range:n,H:!0},((o,c,d)=>{const h=Fo(o[1]),p=new bt(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=Li(r.path),a=IDBKeyRange.bound([n],[aF(n)],!1,!0);let i=0;return su(e).J({index:"documentTargetsIndex",H:!0,range:a},(([o,c],d,h)=>{o!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return lh(e).get(r).next((n=>n?hm(n):null))}}function lh(t){return Fa(t,"targets")}function PI(t){return Fa(t,"targetGlobal")}function su(t){return Fa(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI([t,e],[r,n]){const a=lr(t,r);return a===0?lr(e,n):a}class Qne{constructor(e){this.Un=e,this.buffer=new Sn(DI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();DI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Xne{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){it("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){$u(r)?it("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Bu(r)}await this.Hn(3e5)}))}}class Yne{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Oe.resolve(es.oe);const n=new Qne(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(MI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,o,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,o=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),mh()<=Er.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${a} in `+(c-o)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function Zne(t,e){return new Yne(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jne{constructor(e,r){this.db=e,this.garbageCollector=Zne(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return dx(e,n)}removeReference(e,r,n){return dx(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return dx(e,r)}nr(e,r){return(function(a,i){let o=!1;return dq(a).Y((c=>uq(a,c,i).next((d=>(d&&(o=!0),Oe.resolve(!d)))))).next((()=>o))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((o,c)=>{if(c<=r){const d=this.nr(e,o).next((h=>{if(!h)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Bt.min()),su(e).delete((function(m){return[0,Li(m.path)]})(o)))))}));a.push(d)}})).next((()=>Oe.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return dx(e,r)}tr(e,r){const n=su(e);let a,i=es.oe;return n.J({index:"documentTargetsIndex"},(([o,c],{path:d,sequenceNumber:h})=>{o===0?(i!==es.oe&&r(new bt(Fo(a)),i),i=h,a=d):i=es.oe})).next((()=>{i!==es.oe&&r(new bt(Fo(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dx(t,e){return su(t).put((function(n,a){return{targetId:0,path:Li(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(){this.changes=new Uu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Oe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return md(e).put(n)}removeEntry(e,r,n){return md(e).delete((function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Ev(o),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Vn.newInvalidDocument(r);return md(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hp(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Vn.newInvalidDocument(r)};return md(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hp(r))},((a,i)=>{n={document:this.ir(r,i),size:Cv(i)}})).next((()=>n))}getEntries(e,r){let n=As();return this._r(e,r,((a,i)=>{const o=this.ir(a,i);n=n.insert(a,o)})).next((()=>n))}ar(e,r){let n=As(),a=new Mn(bt.comparator);return this._r(e,r,((i,o)=>{const c=this.ir(i,o);n=n.insert(i,c),a=a.insert(i,Cv(o))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return Oe.resolve();let a=new Sn($I);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(Hp(a.first()),Hp(a.last())),o=a.getIterator();let c=o.getNext();return md(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=bt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&$I(c,m)<0;)n(c,null),c=o.getNext();c&&c.isEqual(m)&&(n(c,h),c=o.hasNext()?o.getNext():null),c?p.$(Hp(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const o=r.path,c=[o.popLast().toArray(),o.lastSegment(),Ev(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return md(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=As();for(const m of h){const y=this.ir(bt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(o1(r,y)||a.has(y.key))&&(p=p.insert(y.key,y))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=As();const o=BI(r,n),c=BI(r,Os.max());return md(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},((d,h,p)=>{const m=this.ir(bt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new tae(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return LI(e).get("remoteDocumentGlobalKey").next((r=>(Mt(!!r),r)))}rr(e,r){return LI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Bne(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Bt.min())))return n}return Vn.newInvalidDocument(e)}}function fq(t){return new eae(t)}class tae extends hq{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Uu((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new Sn(((i,o)=>lr(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),o.isValidDocument()){const d=_I(this.cr.serializer,o);a=a.add(i.path.popLast());const h=Cv(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=_I(this.cr.serializer,o.convertToNoDocument(Bt.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),Oe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,o)=>{this.lr.set(i,{size:o,readTime:n.get(i).readTime})})),n)))}}function LI(t){return Fa(t,"remoteDocumentGlobal")}function md(t){return Fa(t,"remoteDocumentsV14")}function Hp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BI(t,e){const r=e.documentKey.path.toArray();return[t,Ev(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function $I(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=lr(r[i],n[i]),a)return a;return a=lr(r.length,n.length),a||(a=lr(r[r.length-2],n[n.length-2]),a||lr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rae{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&Sm(n.mutation,a,ts.empty(),Xn.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,xr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=xr()){const a=qo();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let o=um();return i.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=qo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,xr())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let i=As();const o=wm(),c=(function(){return wm()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof fc)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Sm(p.mutation,h,p.mutation.getFieldMask(),Xn.now())):o.set(h.key,ts.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>o.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new rae(p,(m=o.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=wm();let a=new Mn(((o,c)=>o-c)),i=xr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||ts.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||xr()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=MF();p.forEach((y=>{if(!i.has(y)){const x=zF(r.get(y),n.get(y));x!==null&&m.set(y,x),i=i.add(y)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Oe.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):EF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Oe.resolve(qo());let c=-1,d=i;return o.next((h=>Oe.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Oe.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{d=d.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,xr()))).next((p=>({batchId:c,changes:RF(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new bt(r)).next((n=>{let a=um();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let o=um();return this.indexManager.getCollectionParents(e,i).next((c=>Oe.forEach(c,(d=>{const h=(function(m,y){return new Rf(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,y)=>{o=o.insert(m,y)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((o=>{i.forEach(((d,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Vn.newInvalidDocument(p)))}));let c=um();return o.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&Sm(p.mutation,h,ts.empty(),Xn.now()),o1(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Oe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:ei(a.createTime)}})(r)),Oe.resolve()}getNamedQuery(e,r){return Oe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:sq(a.bundledQuery),readTime:ei(a.readTime)}})(r)),Oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{constructor(){this.overlays=new Mn(bt.comparator),this.Ir=new Map}getOverlay(e,r){return Oe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=qo();return Oe.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),Oe.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Oe.resolve()}getOverlaysForCollection(e,r,n){const a=qo(),i=r.length+1,o=new bt(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return Oe.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new Mn(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=qo(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=qo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return Oe.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new n8(r,n));let i=this.Ir.get(r);i===void 0&&(i=xr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iae{constructor(){this.sessionToken=ga.EMPTY_BYTE_STRING}getSessionToken(e){return Oe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(){this.Tr=new Sn(Ya.Er),this.dr=new Sn(Ya.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Ya(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Ya(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new bt(new Fr([])),n=new Ya(r,e),a=new Ya(r,e+1),i=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new bt(new Fr([])),n=new Ya(r,e),a=new Ya(r,e+1);let i=xr();return this.dr.forEachInRange([n,a],(o=>{i=i.add(o.key)})),i}containsKey(e){const r=new Ya(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ya{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return bt.comparator(e.key,r.key)||lr(e.wr,r.wr)}static Ar(e,r){return lr(e.wr,r.wr)||bt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sae{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Sn(Ya.Er)}checkEmpty(e){return Oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new t8(i,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new Ya(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Oe.resolve(o)}lookupMutationBatch(e,r){return Oe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return Oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ya(r,0),a=new Ya(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);i.push(c)})),Oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Sn(lr);return r.forEach((a=>{const i=new Ya(a,0),o=new Ya(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(c=>{n=n.add(c.wr)}))})),Oe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;bt.isDocumentKey(i)||(i=i.child(""));const o=new Ya(new bt(i),0);let c=new Sn(lr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),Oe.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Mt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Oe.forEach(r.mutations,(a=>{const i=new Ya(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Ya(r,0),a=this.br.firstAfterOrEqual(n);return Oe.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Oe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oae{constructor(e){this.Mr=e,this.docs=(function(){return new Mn(bt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Oe.resolve(n?n.document.mutableCopy():Vn.newInvalidDocument(r))}getEntries(e,r){let n=As();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Vn.newInvalidDocument(a))})),Oe.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=As();const o=r.path,c=new bt(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Hj(sF(p),n)<=0||(a.has(p.key)||o1(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Oe.resolve(i)}getAllFromCollectionGroup(e,r,n,a){Et()}Or(e,r){return Oe.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new lae(this)}getSize(e){return Oe.resolve(this.size)}}class lae extends hq{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),Oe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cae{constructor(e){this.persistence=e,this.Nr=new Uu((r=>Qd(r)),i1),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new l8,this.targetCount=0,this.kr=Jd.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),Oe.resolve()}getLastRemoteSnapshotVersion(e){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Oe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Jd(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Oe.resolve()}updateTargetData(e,r){return this.Kn(r),Oe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),Oe.waitFor(i).next((()=>a))}getTargetCount(e){return Oe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Oe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Oe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((o=>{i.push(a.markPotentiallyOrphaned(e,o))})),Oe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Oe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Oe.resolve(n)}containsKey(e,r){return Oe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,r){this.qr={},this.overlays={},this.Qr=new es(0),this.Kr=!1,this.Kr=!0,this.$r=new iae,this.referenceDelegate=e(this),this.Ur=new cae(this),this.indexManager=new Gne,this.remoteDocumentCache=(function(a){return new oae(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new aq(r),this.Gr=new nae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new aae,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new sae(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){it("MemoryPersistence","Starting transaction:",e);const a=new uae(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return Oe.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class uae extends lF{constructor(e){super(),this.currentSequenceNumber=e}}class _2{constructor(e){this.persistence=e,this.Jr=new l8,this.Yr=null}static Zr(e){return new _2(e)}get Xr(){if(this.Yr)return this.Yr;throw Et()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Oe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Oe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Oe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Xr,(n=>{const a=bt.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Bt.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Oe.or([()=>Oe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dae{constructor(e){this.serializer=e}O(e,r,n,a){const i=new g2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",JO,{unique:!0}),d.createObjectStore("documentMutations")})(e),UI(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let o=Oe.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),UI(e)),o=o.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(o=o.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",JO,{unique:!0});const m=h.store("mutations"),y=p.map((x=>m.put(x)));return Oe.waitFor(y)}))})(e,i)))),o=o.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(o=o.next((()=>this.ni(i)))),n<6&&a>=6&&(o=o.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(o=o.next((()=>this.ii(i)))),n<8&&a>=8&&(o=o.next((()=>this.si(e,i)))),n<9&&a>=9&&(o=o.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(o=o.next((()=>this.oi(i)))),n<11&&a>=11&&(o=o.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(o=o.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:qre});h.createIndex("collectionPathOverlayIndex",Hre,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",Gre,{unique:!1})})(e)}))),n<13&&a>=13&&(o=o.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Rre});h.createIndex("documentKeyIndex",Mre),h.createIndex("collectionGroupIndex",Pre)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(o=o.next((()=>this.ai(e,i)))),n<15&&a>=15&&(o=o.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Ure}).createIndex("sequenceNumberIndex",zre,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Vre}).createIndex("documentKeyIndex",Fre,{unique:!1})})(e)))),n<16&&a>=16&&(o=o.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(o=o.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=Cv(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>Oe.forEach(a,(i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next((c=>Oe.forEach(c,(d=>{Mt(d.userId===i.userId);const h=Ed(this.serializer,d);return cq(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((o,c)=>{const d=new Fr(o),h=(function(m){return[0,Li(m)]})(d);i.push(r.get(h).next((p=>p?Oe.resolve():(m=>r.put({targetId:0,path:Li(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>Oe.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:$re});const n=r.store("collectionParents"),a=new o8,i=o=>{if(a.add(o)){const c=o.lastSegment(),d=o.popLast();return n.put({collectionId:c,parent:Li(d)})}};return r.store("remoteDocuments").J({H:!0},((o,c)=>{const d=new Fr(o);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([o,c,d],h)=>{const p=Fo(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=hm(a),o=iq(this.serializer,i);return r.put(o)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,o)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new bt(Fr.fromString(m.document.name).popFirst(5)):m.noDocument?bt.fromSegments(m.noDocument.path):m.unknownDocument?bt.fromSegments(m.unknownDocument.path):Et()})(o).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(c.put(h))})).next((()=>Oe.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=fq(this.serializer),i=new mq(_2.Zr,this.serializer.ct);return n.U().next((o=>{const c=new Map;return o.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:xr();Ed(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),Oe.forEach(c,((d,h)=>{const p=new _i(h),m=w2.lt(this.serializer,p),y=i.getIndexManager(p),x=S2.lt(p,this.serializer,y,i.referenceDelegate);return new pq(a,x,m,y).recalculateAndSaveOverlaysForDocumentKeys(new fT(r,es.oe),d).next()}))}))}}function UI(t){t.createObjectStore("targetDocuments",{keyPath:Lre}).createIndex("documentTargetsIndex",Bre,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Dre,{unique:!0}),t.createObjectStore("targetGlobal")}const e3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class c8{constructor(e,r,n,a,i,o,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=o,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!c8.D())throw new pt(He.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jne(this,a),this.Ai=r+"main",this.serializer=new aq(d),this.Ri=new wu(this.Ai,this.hi,new dae(this.serializer)),this.$r=new Une,this.Ur=new Kne(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fq(this.serializer),this.Gr=new $ne,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&ha("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pt(He.FAILED_PRECONDITION,e3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new es(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if($u(e))return it("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return it("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Gp(e).get("owner").next((r=>Oe.resolve(this.vi(r))))}Ci(e){return hx(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Fa(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),o=a.filter((c=>i.indexOf(c)===-1));return Oe.forEach(o,(c=>n.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Oe.resolve(!0):Gp(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new pt(He.FAILED_PRECONDITION,e3);return!1}}return!(!this.networkEnabled||!this.inForeground)||hx(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||o&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&it("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new fT(e,es.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>hx(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return S2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wne(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return w2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){it("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?Qre:d===16?Kre:d===15?Wj:d===14?pF:d===13?fF:d===12?Wre:d===11?hF:void Et()})(this.hi);let o;return this.Ri.runTransaction(e,a,i,(c=>(o=new fT(c,this.Qr?this.Qr.next():es.oe),r==="readwrite-primary"?this.wi(o).next((d=>!!d||this.Si(o))).next((d=>{if(!d)throw ha(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new pt(He.FAILED_PRECONDITION,oF);return n(o)})).next((d=>this.Di(o).next((()=>d)))):this.Ki(o).next((()=>n(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Ki(e){return Gp(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new pt(He.FAILED_PRECONDITION,e3)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gp(e).put("owner",r)}static D(){return wu.D()}bi(e){const r=Gp(e);return r.get("owner").next((n=>this.vi(n)?(it("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Oe.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ha(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;fV()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return it("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ha("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ha("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gp(t){return Fa(t,"owner")}function hx(t){return Fa(t,"clientMetadata")}function gq(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=xr(),a=xr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new u8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return fV()?8:cF(za())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new hae;return this.Xi(e,r,o).next((c=>{if(i.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(mh()<=Er.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",gh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Oe.resolve()):(mh()<=Er.DEBUG&&it("QueryEngine","Query:",gh(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(mh()<=Er.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",gh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(r))):Oe.resolve())}Yi(e,r){if(hI(r))return Oe.resolve(null);let n=Es(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=jv(r,null,"F"),n=Es(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=xr(...i);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,jv(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return hI(r)||a.isEqual(Bt.min())?Oe.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(r,i);return this.ns(r,o,n,a)?Oe.resolve(null):(mh()<=Er.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),gh(r)),this.rs(e,o,r,iF(a,-1)).next((c=>c)))}))}ts(e,r){let n=new Sn(OF(e));return r.forEach(((a,i)=>{o1(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return mh()<=Er.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",gh(r)),this.Ji.getDocumentsMatchingQuery(e,r,Os.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fae{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Mn(lr),this._s=new Uu((i=>Qd(i)),i1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function xq(t,e,r,n){return new fae(t,e,r,n)}async function vq(t,e){const r=Rt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],c=[];let d=xr();for(const h of a){o.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function pae(t,e){const r=Rt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,y=m.keys();let x=Oe.resolve();return y.forEach((_=>{x=x.next((()=>p.getEntry(d,_))).next((S=>{const w=h.docVersions.get(_);Mt(w!==null),S.version.compareTo(w)<0&&(m.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=xr();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function bq(t){const e=Rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function mae(t,e){const r=Rt(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const y=a.get(m);if(!y)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let x=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(ga.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,n)),a=a.insert(m,x),(function(S,w,E){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(y,x,p)&&c.push(r.Ur.updateTargetData(i,x))}));let d=As(),h=xr();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(gae(i,o,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Bt.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return Oe.waitFor(c).next((()=>o.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function gae(t,e,r){let n=xr(),a=xr();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let o=As();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Bt.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):it("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function yae(t,e){const r=Rt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function Ov(t,e){const r=Rt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,Oe.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new Fl(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Qh(t,e,r){const n=Rt(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!$u(o))throw o;it("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function jT(t,e,r){const n=Rt(t);let a=Bt.min(),i=xr();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,p){const m=Rt(d),y=m._s.get(p);return y!==void 0?Oe.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)})(n,o,Es(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Bt.min(),r?i:xr()))).next((c=>(_q(n,CF(e),c),{documents:c,Ts:i})))))}function wq(t,e){const r=Rt(t),n=Rt(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((o=>o?o.target:null))))}function Sq(t,e){const r=Rt(t),n=r.us.get(e)||Bt.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,iF(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(_q(r,e,a),a)))}function _q(t,e,r){let n=t.us.get(e)||Bt.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function zI(t,e){return`firestore_clients_${t}_${e}`}function VI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function t3(t,e){return`firestore_targets_${t}_${e}`}class Iv{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,o=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return o&&a.error&&(o=typeof a.error.message=="string"&&typeof a.error.code=="string",o&&(i=new pt(a.error.code,a.error.message))),o?new Iv(e,r,a.state,i):(ha("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _m{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new pt(n.error.code,n.error.message))),i?new _m(e,n.state,a):(ha("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rv{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=Yj();for(let o=0;a&&o<n.activeTargetIds.length;++o)a=uF(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return a?new Rv(e,i):(ha("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class d8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new d8(r.clientId,r.onlineState):(ha("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ET{constructor(){this.activeTargetIds=Yj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r3{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Mn(lr),this.started=!1,this.bs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=zI(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ET),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(zI(this.persistenceKey,n));if(a){const i=Rv.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(t3(this.persistenceKey,e));if(a){const i=_m.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(t3(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return it("SharedClientState","READ",e,r),r}setItem(e,r){it("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){it("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(it("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ha("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let o=es.oe;if(i!=null)try{const c=JSON.parse(i);Mt(typeof c=="number"),o=c}catch(c){ha("SharedClientState","Failed to read sequence number from WebStorage",c)}return o})(r.newValue);n!==es.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new Iv(this.currentUser,e,r,n),i=VI(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=VI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=t3(this.persistenceKey,e),i=new _m(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Rv.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return Iv.Rs(new _i(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return _m.Rs(a,r)}Ls(e){return d8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);it("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),o=[],c=[];return i.forEach((d=>{a.has(d)||o.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(o,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Yj();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class Nq{constructor(){this.so=new ET,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ET,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xae{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fx=null;function n3(){return fx===null?fx=(function(){return 268435456+Math.round(2147483648*Math.random())})():fx++,"0x"+fx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="WebChannelConnection";class wae extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,o){const c=n3(),d=this.xo(r,n.toUriEncodedString());it("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(r,d,h,a).then((p=>(it("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw qm("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,o,c){return this.Mo(r,n,a,i,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+If})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>r[o]=i)),a&&a.headers.forEach(((i,o)=>r[o]=i))}xo(r,n){const a=vae[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=n3();return new Promise(((o,c)=>{const d=new ZV;d.setWithCredentials(!0),d.listenOnce(JV.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case ev.NO_ERROR:const p=d.getResponseJson();it(wi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case ev.TIMEOUT:it(wi,`RPC '${e}' ${i} timed out`),c(new pt(He.DEADLINE_EXCEEDED,"Request time out"));break;case ev.HTTP_ERROR:const m=d.getStatus();if(it(wi,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const _=(function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(He).indexOf(E)>=0?E:He.UNKNOWN})(x.status);c(new pt(_,x.message))}else c(new pt(He.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new pt(He.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{it(wi,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);it(wi,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=n3(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rF(),c=tF(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");it(wi,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=o.createWebChannel(p,d);let y=!1,x=!1;const _=new bae({Io:w=>{x?it(wi,`Not sending because RPC '${e}' stream ${a} is closed:`,w):(y||(it(wi,`Opening RPC '${e}' stream ${a} transport.`),m.open(),y=!0),it(wi,`RPC '${e}' stream ${a} sending:`,w),m.send(w))},To:()=>m.close()}),S=(w,E,I)=>{w.listen(E,(R=>{try{I(R)}catch(L){setTimeout((()=>{throw L}),0)}}))};return S(m,cm.EventType.OPEN,(()=>{x||(it(wi,`RPC '${e}' stream ${a} transport opened.`),_.yo())})),S(m,cm.EventType.CLOSE,(()=>{x||(x=!0,it(wi,`RPC '${e}' stream ${a} transport closed`),_.So())})),S(m,cm.EventType.ERROR,(w=>{x||(x=!0,qm(wi,`RPC '${e}' stream ${a} transport errored:`,w),_.So(new pt(He.UNAVAILABLE,"The operation could not be completed")))})),S(m,cm.EventType.MESSAGE,(w=>{var E;if(!x){const I=w.data[0];Mt(!!I);const R=I,L=R.error||((E=R[0])===null||E===void 0?void 0:E.error);if(L){it(wi,`RPC '${e}' stream ${a} received error:`,L);const C=L.status;let O=(function(k){const z=Aa[k];if(z!==void 0)return qF(z)})(C),A=L.message;O===void 0&&(O=He.INTERNAL,A="Unknown error status: "+C+" with message "+L.message),x=!0,_.So(new pt(O,A)),m.close()}else it(wi,`RPC '${e}' stream ${a} received:`,I),_.bo(I)}})),S(c,eF.STAT_EVENT,(w=>{w.stat===dT.PROXY?it(wi,`RPC '${e}' stream ${a} detected buffering proxy`):w.stat===dT.NOPROXY&&it(wi,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{_.wo()}),0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(){return typeof window<"u"?window:null}function ov(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){return new jne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&it("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e,r,n,a,i,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new h8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===He.RESOURCE_EXHAUSTED?(ha(r.toString()),ha("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===He.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new pt(He.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return it("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sae extends Aq{constructor(e,r,n,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=One(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Bt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Bt.min():o.readTime?ei(o.readTime):Bt.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=ST(this.serializer),r.addTarget=(function(i,o){let c;const d=o.target;if(c=Tv(d)?{documents:ZF(i,d)}:{query:JF(i,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=WF(i,o.resumeToken);const h=bT(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Bt.min())>0){c.readTime=Kh(i,o.snapshotVersion.toTimestamp());const h=bT(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=Rne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=ST(this.serializer),r.removeTarget=e,this.a_(r)}}class _ae extends Aq{constructor(e,r,n,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Ine(e.writeResults,e.commitTime),n=ei(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=ST(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>tg(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new pt(He.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,wT(r,n),a,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new pt(He.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,wT(r,n),a,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pt(He.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Tae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ha(r),this.D_=!1):it("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{n.enqueueAndForget((async()=>{v0(this)&&(it("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Rt(d);h.L_.add(4),await d1(h),h.q_.set("Unknown"),h.L_.delete(4),await T2(h)})(this))}))})),this.q_=new Tae(n,a)}}async function T2(t){if(v0(t))for(const e of t.B_)await e(!0)}async function d1(t){for(const e of t.B_)await e(!1)}function A2(t,e){const r=Rt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),m8(r)?p8(r):Df(r).r_()&&f8(r,e))}function Xh(t,e){const r=Rt(t),n=Df(r);r.N_.delete(e),n.r_()&&jq(r,e),r.N_.size===0&&(n.r_()?n.o_():v0(r)&&r.q_.set("Unknown"))}function f8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Bt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Df(t).A_(e)}function jq(t,e){t.Q_.xe(e),Df(t).R_(e)}function p8(t){t.Q_=new _ne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Df(t).start(),t.q_.v_()}function m8(t){return v0(t)&&!Df(t).n_()&&t.N_.size>0}function v0(t){return Rt(t).L_.size===0}function Eq(t){t.Q_=void 0}async function jae(t){t.q_.set("Online")}async function Eae(t){t.N_.forEach(((e,r)=>{f8(t,e)}))}async function kae(t,e){Eq(t),m8(t)?(t.q_.M_(e),p8(t)):t.q_.set("Unknown")}async function Cae(t,e,r){if(t.q_.set("Online"),e instanceof GF&&e.state===2&&e.cause)try{await(async function(a,i){const o=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){it("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Mv(t,n)}else if(e instanceof sv?t.Q_.Ke(e):e instanceof HF?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Bt.min()))try{const n=await bq(t.localStore);r.compareTo(n)>=0&&await(function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(ga.EMPTY_BYTE_STRING,p.snapshotVersion)),jq(i,d);const m=new Fl(p.target,d,h,p.sequenceNumber);f8(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){it("RemoteStore","Failed to raise snapshot:",n),await Mv(t,n)}}async function Mv(t,e,r){if(!$u(e))throw e;t.L_.add(1),await d1(t),t.q_.set("Offline"),r||(r=()=>bq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{it("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await T2(t)}))}function kq(t,e){return e().catch((r=>Mv(t,r,e)))}async function Pf(t){const e=Rt(t),r=Ou(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Oae(e);)try{const a=await yae(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Iae(e,a)}catch(a){await Mv(e,a)}Cq(e)&&Oq(e)}function Oae(t){return v0(t)&&t.O_.length<10}function Iae(t,e){t.O_.push(e);const r=Ou(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Cq(t){return v0(t)&&!Ou(t).n_()&&t.O_.length>0}function Oq(t){Ou(t).start()}async function Rae(t){Ou(t).p_()}async function Mae(t){const e=Ou(t);for(const r of t.O_)e.m_(r.mutations)}async function Pae(t,e,r){const n=t.O_.shift(),a=r8.from(n,e,r);await kq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Pf(t)}async function Dae(t,e){e&&Ou(t).V_&&await(async function(n,a){if((function(o){return FF(o)&&o!==He.ABORTED})(a.code)){const i=n.O_.shift();Ou(n).s_(),await kq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await Pf(n)}})(t,e),Cq(t)&&Oq(t)}async function qI(t,e){const r=Rt(t);r.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const n=v0(r);r.L_.add(3),await d1(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await T2(r)}async function kT(t,e){const r=Rt(t);e?(r.L_.delete(2),await T2(r)):e||(r.L_.add(2),await d1(r),r.q_.set("Unknown"))}function Df(t){return t.K_||(t.K_=(function(r,n,a){const i=Rt(r);return i.w_(),new Sae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:jae.bind(null,t),Ro:Eae.bind(null,t),mo:kae.bind(null,t),d_:Cae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),m8(t)?p8(t):t.q_.set("Unknown")):(await t.K_.stop(),Eq(t))}))),t.K_}function Ou(t){return t.U_||(t.U_=(function(r,n,a){const i=Rt(r);return i.w_(),new _ae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Rae.bind(null,t),mo:Dae.bind(null,t),f_:Mae.bind(null,t),g_:Pae.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Pf(t)):(await t.U_.stop(),t.O_.length>0&&(it("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new To,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const o=Date.now()+n,c=new g8(e,r,o,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(He.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y8(t,e){if(ha("AsyncQueue",`${e}: ${t}`),$u(t))return new pt(He.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.comparator=e?(r,n)=>e(r,n)||bt.comparator(r.key,n.key):(r,n)=>bt.comparator(r.key,n.key),this.keyedMap=um(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new Eh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Eh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Eh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.W_=new Mn(bt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Et():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Yh{constructor(e,r,n,a,i,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new Yh(e,r,Eh.emptySet(r),o,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&x2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Bae{constructor(){this.queries=GI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Rt(r),i=a.queries;a.queries=GI(),i.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new pt(He.ABORTED,"Firestore shutting down"))}}function GI(){return new Uu((t=>kF(t)),x2)}async function x8(t,e){const r=Rt(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new Lae,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=y8(o,`Initialization of query '${gh(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&b8(r)}async function v8(t,e){const r=Rt(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function $ae(t,e){const r=Rt(t);let n=!1;for(const a of e){const i=a.query,o=r.queries.get(i);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&b8(r)}function Uae(t,e,r){const n=Rt(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function b8(t){t.Y_.forEach((e=>{e.next()}))}var CT,WI;(WI=CT||(CT={})).ea="default",WI.Cache="cache";class w8{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Yh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Yh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==CT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e){this.key=e}}class Rq{constructor(e){this.key=e}}class zae{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xr(),this.mutatedKeys=xr(),this.Aa=OF(e),this.Ra=new Eh(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new HI,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const y=a.get(p),x=o1(this.query,m)?m:null,_=!!y&&this.mutatedKeys.has(y.key),S=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let w=!1;y&&x?y.data.isEqual(x.data)?_!==S&&(n.track({type:3,doc:x}),w=!0):this.ga(y,x)||(n.track({type:2,doc:x}),w=!0,(d&&this.Aa(x,d)>0||h&&this.Aa(x,h)<0)&&(c=!0)):!y&&x?(n.track({type:0,doc:x}),w=!0):y&&!x&&(n.track({type:1,doc:y}),w=!0,(d||h)&&(c=!0)),w&&(x?(o=o.add(x),i=S?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:o,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((p,m)=>(function(x,_){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return S(x)-S(_)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new Yh(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new HI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new Rq(n))})),this.da.forEach((n=>{e.has(n)||r.push(new Iq(n))})),r}ba(e){this.Ta=e.Ts,this.da=xr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Yh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Vae{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Fae{constructor(e){this.key=e,this.va=!1}}class qae{constructor(e,r,n,a,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Uu((c=>kF(c)),x2),this.Ma=new Map,this.xa=new Set,this.Oa=new Mn(bt.comparator),this.Na=new Map,this.La=new l8,this.Ba={},this.ka=new Map,this.qa=Jd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Hae(t,e,r=!0){const n=j2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await Mq(n,e,r,!0),a}async function Gae(t,e){const r=j2(t);await Mq(r,e,!0,!1)}async function Mq(t,e,r,n){const a=await Ov(t.localStore,Es(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await S8(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&A2(t.remoteStore,a),c}async function S8(t,e,r,n,a){t.Ka=(m,y,x)=>(async function(S,w,E,I){let R=w.view.ma(E);R.ns&&(R=await jT(S.localStore,w.query,!1).then((({documents:A})=>w.view.ma(A,R))));const L=I&&I.targetChanges.get(w.targetId),C=I&&I.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(R,S.isPrimaryClient,L,C);return OT(S,w.targetId,O.wa),O.snapshot})(t,m,y,x);const i=await jT(t.localStore,e,!0),o=new zae(e,i.Ts),c=o.ma(i.documents),d=u1.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);OT(t,r,h.wa);const p=new Vae(e,r,o);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function Wae(t,e,r){const n=Rt(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((o=>!x2(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Qh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&Xh(n.remoteStore,a.targetId),Zh(n,a.targetId)})).catch(Bu)):(Zh(n,a.targetId),await Qh(n.localStore,a.targetId,!0))}async function Kae(t,e){const r=Rt(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Xh(r.remoteStore,n.targetId))}async function Qae(t,e,r){const n=A8(t);try{const a=await(function(o,c){const d=Rt(o),h=Xn.now(),p=c.reduce(((x,_)=>x.add(_.key)),xr());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let _=As(),S=xr();return d.cs.getEntries(x,p).next((w=>{_=w,_.forEach(((E,I)=>{I.isValidDocument()||(S=S.add(E))}))})).next((()=>d.localDocuments.getOverlayedDocuments(x,_))).next((w=>{m=w;const E=[];for(const I of c){const R=vne(I,m.get(I.key).overlayedDocument);R!=null&&E.push(new fc(I.key,R,vF(R.value.mapValue),fa.exists(!0)))}return d.mutationQueue.addMutationBatch(x,h,E,c)})).next((w=>{y=w;const E=w.applyToLocalDocumentSet(m,S);return d.documentOverlayCache.saveOverlays(x,w.batchId,E)}))})).then((()=>({batchId:y.batchId,changes:RF(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new Mn(lr)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await zu(n,a.changes),await Pf(n.remoteStore)}catch(a){const i=y8(a,"Failed to persist write");r.reject(i)}}async function Pq(t,e){const r=Rt(t);try{const n=await mae(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const o=r.Na.get(i);o&&(Mt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Mt(o.va):a.removedDocuments.size>0&&(Mt(o.va),o.va=!1))})),await zu(r,n,e)}catch(n){await Bu(n)}}function KI(t,e,r){const n=Rt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=Rt(o);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const y of m.j_)y.Z_(c)&&(h=!0)})),h&&b8(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Xae(t,e,r){const n=Rt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let o=new Mn(bt.comparator);o=o.insert(i,Vn.newNoDocument(i,Bt.min()));const c=xr().add(i),d=new c1(Bt.min(),new Map,new Mn(lr),o,c);await Pq(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),T8(n)}else await Qh(n.localStore,e,!1).then((()=>Zh(n,e,r))).catch(Bu)}async function Yae(t,e){const r=Rt(t),n=e.batch.batchId;try{const a=await pae(r.localStore,e);N8(r,n,null),_8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await zu(r,a)}catch(a){await Bu(a)}}async function Zae(t,e,r){const n=Rt(t);try{const a=await(function(o,c){const d=Rt(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Mt(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);N8(n,e,r),_8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await zu(n,a)}catch(a){await Bu(a)}}function _8(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function N8(t,e,r){const n=Rt(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function Zh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||Dq(t,n)}))}function Dq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Xh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),T8(t))}function OT(t,e,r){for(const n of r)n instanceof Iq?(t.La.addReference(n.key,e),Jae(t,n)):n instanceof Rq?(it("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Dq(t,n.key)):Et()}function Jae(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(it("SyncEngine","New document in limbo: "+r),t.xa.add(n),T8(t))}function T8(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new bt(Fr.fromString(e)),n=t.qa.next();t.Na.set(n,new Fae(r)),t.Oa=t.Oa.insert(r,n),A2(t.remoteStore,new Fl(Es(s1(r.path)),n,"TargetPurposeLimboResolution",es.oe))}}async function zu(t,e,r){const n=Rt(t),a=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=u8.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const p=Rt(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Oe.forEach(h,(y=>Oe.forEach(y.$i,(x=>p.persistence.referenceDelegate.addReference(m,y.targetId,x))).next((()=>Oe.forEach(y.Ui,(x=>p.persistence.referenceDelegate.removeReference(m,y.targetId,x)))))))))}catch(m){if(!$u(m))throw m;it("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const x=p.os.get(y),_=x.snapshotVersion,S=x.withLastLimboFreeSnapshotVersion(_);p.os=p.os.insert(y,S)}}})(n.localStore,i))}async function eie(t,e){const r=Rt(t);if(!r.currentUser.isEqual(e)){it("SyncEngine","User change. New user:",e.toKey());const n=await vq(r.localStore,e);r.currentUser=e,(function(i,o){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new pt(He.CANCELLED,o))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await zu(r,n.hs)}}function tie(t,e){const r=Rt(t),n=r.Na.get(e);if(n&&n.va)return xr().add(n.key);{let a=xr();const i=r.Ma.get(e);if(!i)return a;for(const o of i){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}async function rie(t,e){const r=Rt(t),n=await jT(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&OT(r,e.targetId,a.wa),a}async function nie(t,e){const r=Rt(t);return Sq(r.localStore,e).then((n=>zu(r,n)))}async function aie(t,e,r,n){const a=Rt(t),i=await(function(c,d){const h=Rt(c),p=Rt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((y=>y?h.localDocuments.getDocuments(m,y):Oe.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await Pf(a.remoteStore):r==="acknowledged"||r==="rejected"?(N8(a,e,n||null),_8(a,e),(function(c,d){Rt(Rt(c).mutationQueue).On(d)})(a.localStore,e)):Et(),await zu(a,i)):it("SyncEngine","Cannot apply mutation batch with id: "+e)}async function iie(t,e){const r=Rt(t);if(j2(r),A8(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await QI(r,n.toArray());r.Qa=!0,await kT(r.remoteStore,!0);for(const i of a)A2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,o)=>{r.sharedClientState.isLocalQueryTarget(o)?n.push(o):a=a.then((()=>(Zh(r,o),Qh(r.localStore,o,!0)))),Xh(r.remoteStore,o)})),await a,await QI(r,n),(function(o){const c=Rt(o);c.Na.forEach(((d,h)=>{Xh(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new Mn(bt.comparator)})(r),r.Qa=!1,await kT(r.remoteStore,!1)}}async function QI(t,e,r){const n=Rt(t),a=[],i=[];for(const o of e){let c;const d=n.Ma.get(o);if(d&&d.length!==0){c=await Ov(n.localStore,Es(d[0]));for(const h of d){const p=n.Fa.get(h),m=await rie(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await wq(n.localStore,o);c=await Ov(n.localStore,h),await S8(n,Lq(h),o,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function Lq(t){return jF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function sie(t){return(function(r){return Rt(Rt(r).persistence).Qi()})(Rt(t).localStore)}async function oie(t,e,r,n){const a=Rt(t);if(a.Qa)return void it("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const o=await Sq(a.localStore,CF(i[0])),c=c1.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ga.EMPTY_BYTE_STRING);await zu(a,o,c);break}case"rejected":await Qh(a.localStore,e,!0),Zh(a,e,n);break;default:Et()}}async function lie(t,e,r){const n=j2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){it("SyncEngine","Adding an already active target "+a);continue}const i=await wq(n.localStore,a),o=await Ov(n.localStore,i);await S8(n,Lq(i),o.targetId,!1,o.resumeToken),A2(n.remoteStore,o)}for(const a of r)n.Ma.has(a)&&await Qh(n.localStore,a,!1).then((()=>{Xh(n.remoteStore,a),Zh(n,a)})).catch(Bu)}}function j2(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xae.bind(null,e),e.Ca.d_=$ae.bind(null,e.eventManager),e.Ca.$a=Uae.bind(null,e.eventManager),e}function A8(t){const e=Rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zae.bind(null,e),e}class rg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=N2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return xq(this.persistence,new yq,e.initialUser,this.serializer)}Ga(e){return new mq(_2.Zr,this.serializer)}Wa(e){return new Nq}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rg.provider={build:()=>new rg};class Bq extends rg{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await A8(this.Ja.syncEngine),await Pf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return xq(this.persistence,new yq,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new Xne(n,e.asyncQueue,r)}Ha(e,r){const n=new Cre(r,this.persistence);return new kre(e.asyncQueue,n)}Ga(e){const r=gq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new c8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Tq(),ov(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Nq}}class cie extends Bq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof r3&&(this.sharedClientState.syncEngine={no:aie.bind(null,r),ro:oie.bind(null,r),io:lie.bind(null,r),Qi:sie.bind(null,r),eo:nie.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await iie(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=Tq();if(!r3.D(r))throw new pt(He.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=gq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new r3(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class ng{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>KI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=eie.bind(null,this.syncEngine),await kT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Bae})()}createDatastore(e){const r=N2(e.databaseInfo.databaseId),n=(function(i){return new wae(i)})(e.databaseInfo);return(function(i,o,c,d){return new Nae(i,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,o,c){return new Aae(n,a,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>KI(this.syncEngine,r,0)),(function(){return FI.D()?new FI:new xae})())}createSyncEngine(e,r){return(function(a,i,o,c,d,h,p){const m=new qae(a,i,o,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=Rt(a);it("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await d1(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ha("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pt(He.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const o=Rt(a),c={documents:i.map((m=>eg(o.serializer,m)))},d=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Fr.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const y=Cne(o.serializer,m);h.set(y.key.toString(),y)}));const p=[];return i.forEach((m=>{const y=h.get(m.toString());Mt(!!y),p.push(y)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new l1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=bt.fromPath(n);this.mutations.push(new e8(a,this.precondition(a)))})),await(async function(n,a){const i=Rt(n),o={writes:a.map((c=>tg(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,Fr.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Et();r=Bt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new pt(He.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Bt.min())?fa.exists(!1):fa.updateTime(r):fa.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Bt.min()))throw new pt(He.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fa.updateTime(r)}return fa.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class die{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new h8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new uie(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!a1(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!FF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hie{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=_i.UNAUTHENTICATED,this.clientId=nF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{it("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(it("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new To;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=y8(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function a3(t,e){t.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await vq(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function XI(t,e){t.asyncQueue.verifyOperationInProgress();const r=await fie(t);it("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>qI(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>qI(e.remoteStore,a))),t._onlineComponents=e}async function fie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){it("FirestoreClient","Using user provided OfflineComponentProvider");try{await a3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===He.FAILED_PRECONDITION||a.code===He.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;qm("Error using user provided cache. Falling back to memory cache: "+r),await a3(t,new rg)}}else it("FirestoreClient","Using default OfflineComponentProvider"),await a3(t,new rg);return t._offlineComponents}async function E8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(it("FirestoreClient","Using user provided OnlineComponentProvider"),await XI(t,t._uninitializedComponentsProvider._online)):(it("FirestoreClient","Using default OnlineComponentProvider"),await XI(t,new ng))),t._onlineComponents}function pie(t){return E8(t).then((e=>e.syncEngine))}function mie(t){return E8(t).then((e=>e.datastore))}async function Pv(t){const e=await E8(t),r=e.eventManager;return r.onListen=Hae.bind(null,e.syncEngine),r.onUnlisten=Wae.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Gae.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Kae.bind(null,e.syncEngine),r}function gie(t,e,r={}){const n=new To;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new j8({next:y=>{p.Za(),o.enqueueAndForget((()=>v8(i,m)));const x=y.docs.has(c);!x&&y.fromCache?h.reject(new pt(He.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&d&&d.source==="server"?h.reject(new pt(He.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new w8(s1(c.path),p,{includeMetadataChanges:!0,_a:!0});return x8(i,m)})(await Pv(t),t.asyncQueue,e,r,n))),n.promise}function yie(t,e,r={}){const n=new To;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new j8({next:y=>{p.Za(),o.enqueueAndForget((()=>v8(i,m))),y.fromCache&&d.source==="server"?h.reject(new pt(He.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new w8(c,p,{includeMetadataChanges:!0,_a:!0});return x8(i,m)})(await Pv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uq(t,e,r){if(!r)throw new pt(He.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xie(t,e,r,n){if(e===!0&&n===!0)throw new pt(He.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function ZI(t){if(!bt.isDocumentKey(t))throw new pt(He.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JI(t){if(bt.isDocumentKey(t))throw new pt(He.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function E2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Et()}function ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pt(He.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=E2(t);throw new pt(He.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function vie(t,e){if(e<=0)throw new pt(He.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new pt(He.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pt(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$q((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class k8{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(He.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pt(He.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eR(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new vre;switch(n.type){case"firstParty":return new Sre(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new pt(He.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=YI.get(r);n&&(it("ComponentProvider","Removing Datastore"),YI.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pc(this.firestore,e,this._query)}}class mi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mi(this.firestore,e,this._key)}}class Su extends pc{constructor(e,r,n){super(e,r,s1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mi(this.firestore,null,new bt(e))}withConverter(e){return new Su(this.firestore,e,this._path)}}function Lt(t,e,...r){if(t=_n(t),Uq("collection","path",e),t instanceof k8){const n=Fr.fromString(e,...r);return JI(n),new Su(t,null,n)}{if(!(t instanceof mi||t instanceof Su))throw new pt(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Fr.fromString(e,...r));return JI(n),new Su(t.firestore,null,n)}}function ot(t,e,...r){if(t=_n(t),arguments.length===1&&(e=nF.newId()),Uq("doc","path",e),t instanceof k8){const n=Fr.fromString(e,...r);return ZI(n),new mi(t,null,new bt(n))}{if(!(t instanceof mi||t instanceof Su))throw new pt(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Fr.fromString(e,...r));return ZI(n),new mi(t.firestore,t instanceof Su?t.converter:null,new bt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new h8(this,"async_queue_retry"),this.Vu=()=>{const n=ov();n&&it("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=ov();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=ov();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new To;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$u(e))throw e;it("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw ha("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=g8.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&Et()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function rR(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class el extends k8{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new tR,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tR(e),this._firestoreClient=void 0,await e}}}function bie(t,e,r){r||(r="(default)");const n=e1(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Uh(i,e))return a;throw new pt(He.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new pt(He.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pt(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function h1(t){if(t._terminated)throw new pt(He.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wie(t),t._firestoreClient}function wie(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new Yre(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,$q(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new hie(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new e0(ga.fromBase64String(e))}catch(r){throw new pt(He.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new e0(ga.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new pt(He.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new pt(He.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new pt(He.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sie=/^__.*__$/;class _ie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new fc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Mf(e,this.data,r,this.fieldTransforms)}}class zq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new fc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Vq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class k2{constructor(e,r,n,a,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new k2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Vq(this.Cu)&&Sie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Nie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||N2(e)}Qu(e,r,n,a=!1){return new k2({Cu:e,methodName:r,qu:n,path:Qn.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function m1(t){const e=t._freezeSettings(),r=N2(t._databaseId);return new Nie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function I8(t,e,r,n,a,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);P8("Data must be an object, but it was:",o,n);const c=Hq(n,o);let d,h;if(i.merge)d=new ts(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=IT(e,m,r);if(!o.contains(y))throw new pt(He.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Wq(p,y)||p.push(y)}d=new ts(p),h=o.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=o.fieldTransforms;return new _ie(new pi(c),d,h)}class C2 extends p1{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof C2}}function Tie(t,e,r){return new k2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class R8 extends p1{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Tie(this,e,!0),n=this.Ku.map((i=>Lf(i,r))),a=new Xd(n);return new Jj(e.path,a)}isEqual(e){return e instanceof R8&&Uh(this.Ku,e.Ku)}}class M8 extends p1{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Wh(e.serializer,DF(e.serializer,this.$u));return new Jj(e.path,r)}isEqual(e){return e instanceof M8&&this.$u===e.$u}}function Fq(t,e,r,n){const a=t.Qu(1,e,r);P8("Data must be an object, but it was:",a,n);const i=[],o=pi.empty();x0(n,((d,h)=>{const p=D8(e,d,r);h=_n(h);const m=a.Nu(p);if(h instanceof C2)i.push(p);else{const y=Lf(h,m);y!=null&&(i.push(p),o.set(p,y))}}));const c=new ts(i);return new zq(o,c,a.fieldTransforms)}function qq(t,e,r,n,a,i){const o=t.Qu(1,e,r),c=[IT(e,n,r)],d=[a];if(i.length%2!=0)throw new pt(He.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)c.push(IT(e,i[y])),d.push(i[y+1]);const h=[],p=pi.empty();for(let y=c.length-1;y>=0;--y)if(!Wq(h,c[y])){const x=c[y];let _=d[y];_=_n(_);const S=o.Nu(x);if(_ instanceof C2)h.push(x);else{const w=Lf(_,S);w!=null&&(h.push(x),p.set(x,w))}}const m=new ts(h);return new zq(p,m,o.fieldTransforms)}function Aie(t,e,r,n=!1){return Lf(r,t.Qu(n?4:3,e))}function Lf(t,e){if(Gq(t=_n(t)))return P8("Unsupported field value:",e,t),Hq(t,e);if(t instanceof p1)return(function(n,a){if(!Vq(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let o=0;for(const c of n){let d=Lf(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=_n(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return DF(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Xn.fromDate(n);return{timestampValue:Kh(a.serializer,i)}}if(n instanceof Xn){const i=new Xn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Kh(a.serializer,i)}}if(n instanceof C8)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof e0)return{bytesValue:WF(a.serializer,n._byteString)};if(n instanceof mi){const i=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:i8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof O8)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return Zj(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${E2(n)}`)})(t,e)}function Hq(t,e){const r={};return mF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):x0(t,((n,a)=>{const i=Lf(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function Gq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xn||t instanceof C8||t instanceof e0||t instanceof mi||t instanceof p1||t instanceof O8)}function P8(t,e,r){if(!Gq(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=E2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function IT(t,e,r){if((e=_n(e))instanceof f1)return e._internalPath;if(typeof e=="string")return D8(t,e);throw Dv("Field path arguments must be of type string or ",t,!1,void 0,r)}const jie=new RegExp("[~\\*/\\[\\]]");function D8(t,e,r){if(e.search(jie)>=0)throw Dv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new f1(...e.split("."))._internalPath}catch{throw Dv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Dv(t,e,r,n,a){const i=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new pt(He.INVALID_ARGUMENT,c+t+d)}function Wq(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Eie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(O2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Eie extends Lv{data(){return super.data()}}function O2(t,e){return typeof e=="string"?D8(t,e):e instanceof f1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pt(He.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L8{}class B8 extends L8{}function Pr(t,e,...r){let n=[];e instanceof L8&&n.push(e),n=n.concat(r),(function(i){const o=i.filter((d=>d instanceof $8)).length,c=i.filter((d=>d instanceof I2)).length;if(o>1||o>0&&c>0)throw new pt(He.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class I2 extends B8{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new I2(e,r,n)}_apply(e){const r=this._parse(e);return Qq(e._query,r),new pc(e.firestore,e.converter,vT(e._query,r))}_parse(e){const r=m1(e.firestore);return(function(i,o,c,d,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new pt(He.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){aR(m,p);const x=[];for(const _ of m)x.push(nR(d,i,_));y={arrayValue:{values:x}}}else y=nR(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||aR(m,p),y=Aie(c,o,m,p==="in"||p==="not-in");return kr.create(h,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function cn(t,e,r){const n=e,a=O2("where",t);return I2._create(a,n,r)}class $8 extends L8{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new $8(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:un.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let o=a;const c=i.getFlattenedFilters();for(const d of c)Qq(o,d),o=vT(o,d)})(e._query,r),new pc(e.firestore,e.converter,vT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class U8 extends B8{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new U8(e,r)}_apply(e){const r=(function(a,i,o){if(a.startAt!==null)throw new pt(He.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pt(He.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zm(i,o)})(e._query,this._field,this._direction);return new pc(e.firestore,e.converter,(function(a,i){const o=a.explicitOrderBy.concat([i]);return new Rf(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function $o(t,e="asc"){const r=e,n=O2("orderBy",t);return U8._create(n,r)}class z8 extends B8{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new z8(e,r,n)}_apply(e){return new pc(e.firestore,e.converter,jv(e._query,this._limit,this._limitType))}}function po(t){return vie("limit",t),z8._create("limit",t,"F")}function nR(t,e,r){if(typeof(r=_n(r))=="string"){if(r==="")throw new pt(He.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EF(e)&&r.indexOf("/")!==-1)throw new pt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Fr.fromString(r));if(!bt.isDocumentKey(n))throw new pt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Xm(t,new bt(n))}if(r instanceof mi)return Xm(t,r._key);throw new pt(He.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${E2(r)}.`)}function aR(t,e){if(!Array.isArray(t)||t.length===0)throw new pt(He.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qq(t,e){const r=(function(a,i){for(const o of a)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new pt(He.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pt(He.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Xq{convertValue(e,r="none"){switch(Kd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Et()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return x0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>zn(o.doubleValue)));return new O8(i)}convertGeoPoint(e){return new C8(zn(e.latitude),zn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Qj(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Km(e));default:return null}}convertTimestamp(e){const r=ac(e);return new Xn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Fr.fromString(e);Mt(nq(n));const a=new Wd(n.get(1),n.get(3)),i=new bt(n.popFirst(5));return a.isEqual(r)||ha(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class kie extends Xq{constructor(e){super(),this.firestore=e}convertBytes(e){return new e0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new mi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class F8 extends Lv{constructor(e,r,n,a,i,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new lv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(O2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class lv extends F8{data(e={}){return super.data(e)}}class Yq{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new bh(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new lv(this._firestore,this._userDataWriter,n.key,n,new bh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new pt(He.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new lv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new bh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new lv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new bh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:Cie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Cie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){t=ns(t,mi);const e=ns(t.firestore,el);return gie(h1(e),t._key).then((r=>Zq(e,t,r)))}class R2 extends Xq{constructor(e){super(),this.firestore=e}convertBytes(e){return new e0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new mi(this.firestore,null,r)}}function gd(t){t=ns(t,pc);const e=ns(t.firestore,el),r=h1(e),n=new R2(e);return Kq(t._query),yie(r,t._query).then((a=>new Yq(e,n,t,a)))}function Wn(t,e,r){t=ns(t,mi);const n=ns(t.firestore,el),a=V8(t.converter,e,r);return M2(n,[I8(m1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,fa.none())])}function ir(t,e,r,...n){t=ns(t,mi);const a=ns(t.firestore,el),i=m1(a);let o;return o=typeof(e=_n(e))=="string"||e instanceof f1?qq(i,"updateDoc",t._key,e,r,n):Fq(i,"updateDoc",t._key,e),M2(a,[o.toMutation(t._key,fa.exists(!0))])}function Xa(t){return M2(ns(t.firestore,el),[new l1(t._key,fa.none())])}function Ol(t,e){const r=ns(t.firestore,el),n=ot(t),a=V8(t.converter,e);return M2(r,[I8(m1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,fa.exists(!1))]).then((()=>n))}function Dr(t,...e){var r,n,a;t=_n(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||rR(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(rR(e[o])){const m=e[o];e[o]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof mi)h=ns(t.firestore,el),p=s1(t._key.path),d={next:m=>{e[o]&&e[o](Zq(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=ns(t,pc);h=ns(m.firestore,el),p=m._query;const y=new R2(h);d={next:x=>{e[o]&&e[o](new Yq(h,y,m,x))},error:e[o+1],complete:e[o+2]},Kq(t._query)}return(function(y,x,_,S){const w=new j8(S),E=new w8(x,w,_);return y.asyncQueue.enqueueAndForget((async()=>x8(await Pv(y),E))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>v8(await Pv(y),E)))}})(h1(h),p,c,d)}function M2(t,e){return(function(n,a){const i=new To;return n.asyncQueue.enqueueAndForget((async()=>Qae(await pie(n),a,i))),i.promise})(h1(t),e)}function Zq(t,e,r){const n=r.docs.get(e._key),a=new R2(t);return new F8(t,a,e._key,n,new bh(r.hasPendingWrites,r.fromCache),e.converter)}class Oie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=Pie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Iie(t){return new Oie(t)}class Rie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ng.provider,this._offlineComponentProvider={build:r=>new Bq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Mie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ng.provider,this._offlineComponentProvider={build:r=>new cie(r,e==null?void 0:e.cacheSizeBytes)}}}function Pie(t){return new Rie(void 0)}function Die(){return new Mie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lie={maxAttempts:5};function Wp(t,e){if((t=_n(t)).firestore!==e)throw new pt(He.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=m1(r)}get(r){const n=Wp(r,this._firestore),a=new kie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Et();const o=i[0];if(o.isFoundDocument())return new Lv(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new Lv(this._firestore,a,n._key,null,n.converter);throw Et()}))}set(r,n,a){const i=Wp(r,this._firestore),o=V8(i.converter,n,a),c=I8(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const o=Wp(r,this._firestore);let c;return c=typeof(n=_n(n))=="string"||n instanceof f1?qq(this._dataReader,"Transaction.update",o._key,n,a,i):Fq(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(r){const n=Wp(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Wp(e,this._firestore),n=new R2(this._firestore);return super.get(e).then((a=>new F8(this._firestore,n,r._key,a._document,new bh(!1,!1),r.converter)))}}function i3(t,e,r){t=ns(t,el);const n=Object.assign(Object.assign({},Lie),r);return(function(i){if(i.maxAttempts<1)throw new pt(He.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,o,c){const d=new To;return i.asyncQueue.enqueueAndForget((async()=>{const h=await mie(i);new die(i.asyncQueue,h,c,o,d).au()})),d.promise})(h1(t),(a=>e(new Bie(t,a))),n)}function iR(...t){return new R8("arrayUnion",t)}function Kp(t){return new M8("increment",t)}(function(e,r=!0){(function(a){If=a})(y0),Eu(new tc("firestore",((n,{instanceIdentifier:a,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new el(new bre(n.getProvider("auth-internal")),new Nre(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new pt(He.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wd(h.options.projectId,p)})(o,a),o);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Js(XO,"4.7.3",e),Js(XO,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq="firebasestorage.googleapis.com",eH="storageBucket",$ie=120*1e3,Uie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Eo{constructor(e,r,n=0){super(s3(e),`Firebase Storage: ${r} (${s3(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return s3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ia;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ia||(ia={}));function s3(t){return"storage/"+t}function q8(){const t="An unknown error occurred, please check the error payload for server response.";return new sa(ia.UNKNOWN,t)}function zie(t){return new sa(ia.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Vie(t){return new sa(ia.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Fie(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new sa(ia.UNAUTHENTICATED,t)}function qie(){return new sa(ia.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Hie(t){return new sa(ia.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Gie(){return new sa(ia.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wie(){return new sa(ia.CANCELED,"User canceled the upload/download.")}function Kie(t){return new sa(ia.INVALID_URL,"Invalid URL '"+t+"'.")}function Qie(t){return new sa(ia.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Xie(){return new sa(ia.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eH+"' property when initializing the app?")}function Yie(){return new sa(ia.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zie(){return new sa(ia.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Jie(t){return new sa(ia.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function RT(t){return new sa(ia.INVALID_ARGUMENT,t)}function tH(){return new sa(ia.APP_DELETED,"The Firebase app was deleted.")}function ese(t){return new sa(ia.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nm(t,e){return new sa(ia.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qp(t){throw new sa(ia.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=js.makeFromUrl(e,r)}catch{return new js(e,"")}if(n.path==="")return n;throw Qie(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${p}/b/${a}/o${y}`,"i"),_={bucket:1,path:3},S=r===Jq?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",E=new RegExp(`^https?://${S}/${a}/${w}`,"i"),R=[{regex:c,indices:d,postModify:i},{regex:x,indices:_,postModify:h},{regex:E,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<R.length;L++){const C=R[L],O=C.regex.exec(e);if(O){const A=O[C.indices.bucket];let j=O[C.indices.path];j||(j=""),n=new js(A,j),C.postModify(n);break}}if(n==null)throw Kie(e);return n}}class tse{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rse(t,e,r){let n=1,a=null,i=null,o=!1,c=0;function d(){return c===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){a=setTimeout(()=>{a=null,t(x,d())},w)}function y(){i&&clearTimeout(i)}function x(w,...E){if(h){y();return}if(w){y(),p.call(null,w,...E);return}if(d()||o){y(),p.call(null,w,...E);return}n<64&&(n*=2);let R;c===1?(c=2,R=0):R=(n+Math.random())*1e3,m(R)}let _=!1;function S(w){_||(_=!0,y(),!h&&(a!==null?(w||(c=2),clearTimeout(a),m(0)):w||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,S(!0)},r),S}function nse(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ase(t){return t!==void 0}function ise(t){return typeof t=="object"&&!Array.isArray(t)}function H8(t){return typeof t=="string"||t instanceof String}function sR(t){return G8()&&t instanceof Blob}function G8(){return typeof Blob<"u"}function oR(t,e,r,n){if(n<e)throw RT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw RT(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function rH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Vd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vd||(Vd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sse(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ose{constructor(e,r,n,a,i,o,c,d,h,p,m,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,_)=>{this.resolve_=x,this.reject_=_,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new px(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Vd.NO_ERROR,d=i.getStatus();if(!c||sse(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Vd.ABORT;n(!1,new px(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new px(h,i))})},r=(n,a)=>{const i=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());ase(d)?i(d):i()}catch(d){o(d)}else if(c!==null){const d=q8();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?tH():Wie();o(d)}else{const d=Gie();o(d)}};this.canceled_?r(!1,new px(!1,null,!0)):this.backoffId_=rse(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nse(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class px{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function lse(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function cse(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function use(t,e){e&&(t["X-Firebase-GMPID"]=e)}function dse(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function hse(t,e,r,n,a,i,o=!0){const c=rH(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return use(h,e),lse(h,r),cse(h,i),dse(h,n),new ose(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fse(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pse(...t){const e=fse();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(G8())return new Blob(t);throw new sa(ia.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mse(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gse(t){if(typeof atob>"u")throw Jie("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class o3{constructor(e,r){this.data=e,this.contentType=r||null}}function yse(t,e){switch(t){case Ho.RAW:return new o3(nH(e));case Ho.BASE64:case Ho.BASE64URL:return new o3(aH(t,e));case Ho.DATA_URL:return new o3(vse(e),bse(e))}throw q8()}function nH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function xse(t){let e;try{e=decodeURIComponent(t)}catch{throw Nm(Ho.DATA_URL,"Malformed data URL.")}return nH(e)}function aH(t,e){switch(t){case Ho.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw Nm(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ho.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw Nm(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=gse(e)}catch(a){throw a.message.includes("polyfill")?a:Nm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class iH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Nm(Ho.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=wse(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function vse(t){const e=new iH(t);return e.base64?aH(Ho.BASE64,e.rest):xse(e.rest)}function bse(t){return new iH(t).contentType}function wse(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,r){let n=0,a="";sR(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(sR(this.data_)){const n=this.data_,a=mse(n,e,r);return a===null?null:new ou(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new ou(n,!0)}}static getBlob(...e){if(G8()){const r=e.map(n=>n instanceof ou?n.data_:n);return new ou(pse.apply(null,r))}else{const r=e.map(o=>H8(o)?yse(Ho.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[i++]=o[c]}),new ou(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t){let e;try{e=JSON.parse(t)}catch{return null}return ise(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sse(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _se(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function oH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nse(t,e){return e}class Oi{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||Nse}}let mx=null;function Tse(t){return!H8(t)||t.length<2?t:oH(t)}function lH(){if(mx)return mx;const t=[];t.push(new Oi("bucket")),t.push(new Oi("generation")),t.push(new Oi("metageneration")),t.push(new Oi("name","fullPath",!0));function e(i,o){return Tse(o)}const r=new Oi("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const a=new Oi("size");return a.xform=n,t.push(a),t.push(new Oi("timeCreated")),t.push(new Oi("updated")),t.push(new Oi("md5Hash",null,!0)),t.push(new Oi("cacheControl",null,!0)),t.push(new Oi("contentDisposition",null,!0)),t.push(new Oi("contentEncoding",null,!0)),t.push(new Oi("contentLanguage",null,!0)),t.push(new Oi("contentType",null,!0)),t.push(new Oi("metadata","customMetadata",!0)),mx=t,mx}function Ase(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new js(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function jse(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return Ase(n,t),n}function cH(t,e,r){const n=sH(e);return n===null?null:jse(t,n,r)}function Ese(t,e,r,n){const a=sH(e);if(a===null||!H8(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+o(p)+"/o/"+o(m),x=P2(y,r,n),_=rH({alt:"media",token:h});return x+_})[0]}function kse(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class W8{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(t){if(!t)throw q8()}function Cse(t,e){function r(n,a){const i=cH(t,a,e);return uH(i!==null),i}return r}function Ose(t,e){function r(n,a){const i=cH(t,a,e);return uH(i!==null),Ese(i,a,t.host,t._protocol)}return r}function dH(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=qie():a=Fie():r.getStatus()===402?a=Vie(t.bucket):r.getStatus()===403?a=Hie(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function hH(t){const e=dH(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=zie(t.path)),i.serverResponse=a.serverResponse,i}return r}function Ise(t,e,r){const n=e.fullServerUrl(),a=P2(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new W8(a,i,Ose(t,r),o);return c.errorHandler=hH(e),c}function Rse(t,e){const r=e.fullServerUrl(),n=P2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function o(d,h){}const c=new W8(n,a,o,i);return c.successCodes=[200,204],c.errorHandler=hH(e),c}function Mse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Pse(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Mse(null,e)),n}function Dse(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let R="";for(let L=0;L<2;L++)R=R+Math.random().toString().slice(2);return R}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=Pse(e,n,a),p=kse(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",x=ou.getBlob(m,n,y);if(x===null)throw Yie();const _={name:h.fullPath},S=P2(i,t.host,t._protocol),w="POST",E=t.maxUploadRetryTime,I=new W8(S,w,Cse(t,r),E);return I.urlParams=_,I.headers=o,I.body=x.uploadData(),I.errorHandler=dH(e),I}class Lse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw Qp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Bse extends Lse{initXhr(){this.xhr_.responseType="text"}}function K8(){return new Bse}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,r){this._service=e,r instanceof js?this._location=r:this._location=js.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new t0(e,r)}get root(){const e=new js(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oH(this._location.path)}get storage(){return this._service}get parent(){const e=Sse(this._location.path);if(e===null)return null;const r=new js(this._location.bucket,e);return new t0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw ese(e)}}function $se(t,e,r){t._throwIfRoot("uploadBytes");const n=Dse(t.storage,t._location,lH(),new ou(e,!0),r);return t.storage.makeRequestWithTokens(n,K8).then(a=>({metadata:a,ref:t}))}function Use(t){t._throwIfRoot("getDownloadURL");const e=Ise(t.storage,t._location,lH());return t.storage.makeRequestWithTokens(e,K8).then(r=>{if(r===null)throw Zie();return r})}function zse(t){t._throwIfRoot("deleteObject");const e=Rse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,K8)}function Vse(t,e){const r=_se(t._location.path,e),n=new js(t._location.bucket,r);return new t0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fse(t){return/^[A-Za-z]+:\/\//.test(t)}function qse(t,e){return new t0(t,e)}function fH(t,e){if(t instanceof Q8){const r=t;if(r._bucket==null)throw Xie();const n=new t0(r,r._bucket);return e!=null?fH(n,e):n}else return e!==void 0?Vse(t,e):t}function Hse(t,e){if(e&&Fse(e)){if(t instanceof Q8)return qse(t,e);throw RT("To use ref(service, url), the first argument must be a Storage instance.")}else return fH(t,e)}function lR(t,e){const r=e==null?void 0:e[eH];return r==null?null:js.makeFromBucketSpec(r,t)}function Gse(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:QZ(a,t.app.options.projectId))}class Q8{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=Jq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$ie,this._maxUploadRetryTime=Uie,this._requests=new Set,a!=null?this._bucket=js.makeFromBucketSpec(a,this._host):this._bucket=lR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=js.makeFromBucketSpec(this._url,e):this._bucket=lR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new t0(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new tse(tH());{const o=hse(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const cR="@firebase/storage",uR="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH="storage";function MT(t,e,r){return t=_n(t),$se(t,e,r)}function Bv(t){return t=_n(t),Use(t)}function Wse(t){return t=_n(t),zse(t)}function Tm(t,e){return t=_n(t),Hse(t,e)}function Kse(t=Ij(),e){t=_n(t);const n=e1(t,pH).getImmediate({identifier:e}),a=uV("storage");return a&&Qse(n,...a),n}function Qse(t,e,r,n={}){Gse(t,e,r,n)}function Xse(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Q8(r,n,a,e,y0)}function Yse(){Eu(new tc(pH,Xse,"PUBLIC").setMultipleInstances(!0)),Js(cR,uR,""),Js(cR,uR,"esm2017")}Yse();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zse="type.googleapis.com/google.protobuf.Int64Value",Jse="type.googleapis.com/google.protobuf.UInt64Value";function mH(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function PT(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>PT(e));if(typeof t=="function"||typeof t=="object")return mH(t,e=>PT(e));throw new Error("Data cannot be encoded in JSON: "+t)}function $v(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Zse:case Jse:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>$v(e)):typeof t=="function"||typeof t=="object"?mH(t,e=>$v(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kh extends Eo{constructor(e,r,n){super(`${X8}/${e}`,r||""),this.details=n}}function eoe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function toe(t,e){let r=eoe(t),n=r,a;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!dR[o])return new kh("internal","internal");r=dR[o],n=o}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=$v(a))}}catch{}return r==="ok"?null:new kh(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class roe{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="us-central1";function noe(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new kh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class aoe{constructor(e,r,n,a,i=DT,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new roe(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=DT}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function ioe(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function soe(t,e,r){return(n=>loe(t,e,n,{}))}async function ooe(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function loe(t,e,r,n){const a=t._url(e);return coe(t,a,r,n)}async function coe(t,e,r,n){r=PT(r);const a={data:r},i={},o=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=n.timeout||7e4,d=noe(c),h=await Promise.race([ooe(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new kh("cancelled","Firebase Functions instance was deleted.");const p=toe(h.status,h.json);if(p)throw p;if(!h.json)throw new kh("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new kh("internal","Response is missing data field.");return{data:$v(m)}}const hR="@firebase/functions",fR="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uoe="auth-internal",doe="app-check-internal",hoe="messaging-internal";function foe(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(uoe),c=n.getProvider(hoe),d=n.getProvider(doe);return new aoe(i,o,c,d,a,t)};Eu(new tc(X8,r,"PUBLIC").setMultipleInstances(!0)),Js(hR,fR,e),Js(hR,fR,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function poe(t=Ij(),e=DT){const n=e1(_n(t),X8).getImmediate({identifier:e}),a=uV("functions");return a&&moe(n,...a),n}function moe(t,e,r){ioe(_n(t),e,r)}function Yr(t,e,r){return soe(_n(t),e)}foe(fetch.bind(self));const gH={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},goe=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of goe)if(!gH[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const D2=yV(gH),LT=uT(D2),yoe=new Ll,Ie=bie(D2,{localCache:Iie({tabManager:Die()})}),Am=Kse(D2),Zr=poe(D2),xoe=Yr(Zr,"awardXP"),voe=Yr(Zr,"acceptQuest"),boe=Yr(Zr,"deployMission"),woe=Yr(Zr,"resolveQuest"),Soe=Yr(Zr,"equipItem"),_oe=Yr(Zr,"unequipItem"),Noe=Yr(Zr,"disenchantItem"),Toe=Yr(Zr,"craftItem"),Aoe=Yr(Zr,"adminUpdateInventory"),joe=Yr(Zr,"adminUpdateEquipped"),Eoe=Yr(Zr,"submitEngagement"),koe=Yr(Zr,"sendClassMessage");Yr(Zr,"uploadQuestionBank");const yH=Yr(Zr,"awardQuestionXP"),Coe=Yr(Zr,"penalizeWrongAnswer"),Ooe=Yr(Zr,"updateStreak"),Ioe=Yr(Zr,"claimDailyLogin"),Roe=Yr(Zr,"spinFortuneWheel"),Moe=Yr(Zr,"unlockSkill"),Poe=Yr(Zr,"addSocket"),Doe=Yr(Zr,"socketGem"),Loe=Yr(Zr,"unsocketGem"),Boe=Yr(Zr,"dealBossDamage"),$oe=Yr(Zr,"answerBossQuiz"),Uoe=Yr(Zr,"createParty"),zoe=Yr(Zr,"joinParty"),Voe=Yr(Zr,"completeTutoring"),Foe=Yr(Zr,"claimKnowledgeLoot"),qoe=Yr(Zr,"purchaseCosmetic"),Hoe=Yr(Zr,"claimDailyChallenge"),Goe=Yr(Zr,"dismissAlert"),Uv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()});function Woe(t,e,r,n){const{totalTime:a,submissionCount:i,totalPastes:o,totalKeystrokes:c,totalXP:d,activityDays:h}=t,p=(e-r)/n,m=c+o>0?o/(c+o):0;return i===0&&a<60?"INACTIVE":m>.4&&i>=2&&o>8?"COPYING":a>1800&&i>=2&&d<50?"STRUGGLING":p<-.5&&h<=2&&i>=1&&i<=3?"DISENGAGING":a>1800&&h<=2&&i>=3?"SPRINTING":p<-.5&&p>=-1.5?"COASTING":p>.75&&i>=4&&m<.15&&h>=3?"THRIVING":"ON_TRACK"}const Uo={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};function Koe(t){switch(t){case"THRIVING":return{categories:["Simulation","Supplemental","Article"],action:"Challenge with advanced or supplemental material. Consider peer-tutoring role.",studentTip:"You're crushing it! Try the simulations and supplemental resources to push further."};case"ON_TRACK":return{categories:["Practice Set","Textbook","Video Lesson"],action:"Continue current approach. Provide enrichment if interest is shown.",studentTip:"Solid work  keep the momentum going with practice sets and readings."};case"COASTING":return{categories:["Practice Set","Simulation","Video Lesson"],action:"Increase engagement with interactive resources. Check in on motivation.",studentTip:"Try a simulation or practice set to boost your skills  small steps add up!"};case"SPRINTING":return{categories:["Textbook","Video Lesson","Practice Set"],action:"Encourage consistent daily engagement instead of cramming. Set micro-goals.",studentTip:"Spreading your study across the week helps retention  try a bit each day."};case"STRUGGLING":return{categories:["Video Lesson","Lab Guide","Practice Set"],action:"Offer direct support. Recommend foundational resources and check understanding.",studentTip:"Your effort shows! Try video lessons for a fresh perspective on tricky topics."};case"DISENGAGING":return{categories:["Video Lesson","Simulation","Article"],action:"Reach out personally. Low-friction resources to re-establish habit.",studentTip:"We miss seeing you active  a quick video or sim is a great way to jump back in."};case"INACTIVE":return{categories:["Video Lesson","Article"],action:"Immediate outreach required. Check for external factors. Lowest-barrier resources.",studentTip:"Start small  even watching one video lesson counts. We're here to help!"};case"COPYING":return{categories:["Practice Set","Textbook","Lab Guide"],action:"Discuss academic integrity. Redirect to original-work resources.",studentTip:"Working through problems yourself builds the strongest understanding  give it a try!"}}}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xH=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xoe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>T.createElement("svg",{ref:d,...Xoe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:xH("lucide",a),...c},[...o.map(([h,p])=>T.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(Yoe,{ref:i,iconNode:e,className:xH(`lucide-${Qoe(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=ze("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=ze("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=ze("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=ze("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=ze("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=ze("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=ze("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=ze("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=ze("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ze("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=ze("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=ze("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=ze("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=ze("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=ze("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ze("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=ze("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=ze("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wH=ze("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=ze("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=ze("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cle=ze("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=ze("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=ze("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=ze("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=ze("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=ze("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=ze("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=ze("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=ze("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=ze("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=ze("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=ze("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=ze("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=ze("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=ze("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=ze("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=ze("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=ze("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=ze("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=ze("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=ze("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=ze("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=ze("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=ze("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=ze("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=ze("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=ze("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=ze("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=ze("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=ze("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=ze("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=ze("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jle=ze("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ele=ze("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kle=ze("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=ze("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=ze("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=ze("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=ze("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=ze("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=ze("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=ze("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=ze("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ole=ze("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=ze("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=ze("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=ze("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=ze("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=ze("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=ze("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=ze("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mle=ze("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ze("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=ze("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ze("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dle=ze("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lle=ze("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ble=ze("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $le=ze("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ule=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=ze("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zle=ze("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vle=ze("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fle=ze("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ze("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),qle="kellporter2@paps.net",RH="Mr. Porter",_R=[{name:"Dashboard",icon:s.jsx(xle,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:s.jsx(V2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:s.jsx(ss,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Student Groups",icon:s.jsx(ss,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Enrollment Codes",icon:s.jsx(ag,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:s.jsx(tl,{className:"w-5 h-5"}),role:"ADMIN",children:[{name:"Operatives",icon:s.jsx(is,{className:"w-4 h-4"})},{name:"XP Protocols",icon:s.jsx(Yn,{className:"w-4 h-4"})},{name:"Missions",icon:s.jsx(L2,{className:"w-4 h-4"})},{name:"Mission Control",icon:s.jsx(zv,{className:"w-4 h-4"})},{name:"Boss Ops",icon:s.jsx(Ao,{className:"w-4 h-4"})},{name:"Tutoring",icon:s.jsx(Ru,{className:"w-4 h-4"})}]},{name:"Resources",icon:s.jsx(Z8,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:s.jsx(zv,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:s.jsx(tl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:s.jsx(rl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:s.jsx(ple,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:s.jsx(ole,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Intel Dossier",icon:s.jsx(B2,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:s.jsx(rl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:s.jsx(Ru,{className:"w-5 h-5"}),role:"STUDENT"}],NR=new Set,Hs=(t,e,r)=>NR.has(t)?()=>{}:Dr(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&NR.add(t)}),Re={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Hs("xp_events",Lt(Ie,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await Wn(ot(Ie,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Xa(ot(Ie,"xp_events",t))},subscribeToQuests:t=>Hs("quests",Lt(Ie,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await Wn(ot(Ie,"quests",t.id),t)},deleteQuest:async t=>{await Xa(ot(Ie,"quests",t))},acceptQuest:async(t,e)=>{await voe({questId:e})},deployMission:async(t,e)=>{await boe({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await woe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Re.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Soe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await _oe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Noe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Toe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await Aoe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await joe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ot(Ie,"users",t);r?await ir(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await ir(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await koe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=ot(Ie,"class_messages",t);await i3(Ie,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ot(Ie,"class_messages",t);await i3(Ie,async n=>{const a=await n.get(r);if(!a.exists())return;const o=[...a.data().pinnedBy||[]];o.includes(e)?n.update(r,{pinnedBy:o.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...o,e]})})},toggleGlobalPin:async(t,e)=>{const r=ot(Ie,"class_messages",t);await ir(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Xa(ot(Ie,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=Pr(Lt(Ie,"class_messages"),cn("isFlagged","==",!0),po(50));return Dr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ot(Ie,"class_messages",t);await ir(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Re.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await ir(ot(Ie,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await Ol(Lt(Ie,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await ir(ot(Ie,"student_groups",t),r)},deleteStudentGroup:async t=>{await Xa(ot(Ie,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=Pr(Lt(Ie,"student_groups"),cn("classType","==",t));return Dr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>Dr(Lt(Ie,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=Pr(Lt(Ie,"student_groups"),cn("memberIds","array-contains",t));return Dr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=Pr(Lt(Ie,"class_messages"),cn("channelId","==",t),po(100));return Dr(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(i.timestamp).getTime()-new Date(o.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=Pr(Lt(Ie,"class_messages"),$o("timestamp","desc"),po(20));return Hs("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=Pr(Lt(Ie,"conversations"),$o("lastMessageAt","desc"));return Dr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=Pr(Lt(Ie,`conversations/${t}/messages`),$o("timestamp","asc"));return Dr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Ba.ADMIN?RH:e.name,content:r,timestamp:new Date().toISOString()};await Ol(Lt(Ie,`conversations/${t}/messages`),n),await ir(ot(Ie,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await ir(ot(Ie,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=Pr(Lt(Ie,"chat_flags"),cn("isResolved","==",!1));return Dr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await ir(ot(Ie,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=Pr(Lt(Ie,"chat_flags"),cn("messageId","==",t),cn("isResolved","==",!1)),n=(await gd(e)).docs.map(a=>ir(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=Pr(Lt(Ie,"evidence"),cn("studentId","==",t),cn("weekId","==",e));return Dr(n,a=>{const i=a.docs.map(o=>({id:o.id,...o.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await Wn(ot(Ie,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=Tm(Am,n.imageUrl);return Wse(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>Xa(ot(Ie,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await Wn(ot(Ie,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ot(Ie,"users",t);await ir(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await ir(ot(Ie,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await ir(ot(Ie,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=Lt(Ie,"users");return Dr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=Lt(Ie,"assignments");return Dr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0,lessonBlocks:i.lessonBlocks||[]}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=Pr(Lt(Ie,"submissions"),$o("submittedAt","desc"),po(200));return Dr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Uv(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=Pr(Lt(Ie,"submissions"),cn("userId","==",t),po(50));return Dr(r,n=>{const a=n.docs.map(i=>{const o=i.data();return{id:i.id,userId:o.userId,userName:o.userName,assignmentId:o.assignmentId,assignmentTitle:o.assignmentTitle,metrics:o.metrics||Uv(),submittedAt:o.submittedAt,status:o.status,score:o.score,hasUnreadAdmin:o.hasUnreadAdmin||!1,hasUnreadStudent:o.hasUnreadStudent||!1,isPinned:o.isPinned||!1,isArchived:o.isArchived||!1,privateComments:(o.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,o)=>new Date(o.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=Lt(Ie,"allowed_emails");return Dr(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=Lt(Ie,"class_configs");return Dr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null,lessonBlocks:t.lessonBlocks&&t.lessonBlocks.length>0?t.lessonBlocks:[]};t.id?await Wn(ot(Ie,"assignments",t.id),e,{merge:!0}):await Ol(Lt(Ie,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await ir(ot(Ie,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Xa(ot(Ie,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ot(Ie,"allowed_emails",t),n=await da(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await Wn(r,{classType:e,classTypes:i});const o=Pr(Lt(Ie,"users"),cn("email","==",t)),c=await gd(o);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await ir(ot(Ie,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await ir(ot(Ie,"allowed_emails",t),{section:e});const r=Pr(Lt(Ie,"users"),cn("email","==",t)),n=await gd(r);await Promise.all(n.docs.map(async a=>{await ir(ot(Ie,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await ir(ot(Ie,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await ir(ot(Ie,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await Xa(ot(Ie,"allowed_emails",t));const e=Pr(Lt(Ie,"users"),cn("email","==",t)),r=await gd(e);await Promise.all(r.docs.map(async n=>{await ir(ot(Ie,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ot(Ie,"users",t),n=await da(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),o=Array.from(new Set([...i,e]));await ir(r,{isWhitelisted:!0,classType:e,enrolledClasses:o});const c=a.email;if(c){const d=await da(ot(Ie,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await Wn(ot(Ie,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await da(ot(Ie,"users",t));if(e.exists()){const r=e.data().email;await Xa(ot(Ie,"allowed_emails",r))}await Xa(ot(Ie,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await Wn(ot(Ie,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,o=ot(Ie,"submissions",i);(await da(o)).exists()?await ir(o,{"metrics.engagementTime":Kp(a),"metrics.lastActive":Date.now()}):await Wn(o,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ot(Ie,"users",t),n=await da(r);if(!n.exists())return;const i=n.data().email,o={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(o.isWhitelisted=!1,i&&await Xa(ot(Ie,"allowed_emails",i))):(o.isWhitelisted=!0,i&&await Wn(ot(Ie,"allowed_emails",i),{classType:e[0],classTypes:e})),await ir(r,o)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ot(Ie,"users",t),n=await da(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await ir(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const o=n.data().email;o&&await Wn(ot(Ie,"allowed_emails",o),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await ir(ot(Ie,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await xoe({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await Eoe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=Pr(Lt(Ie,"users"),cn("role","==","STUDENT"));return Dr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await Wn(ot(Ie,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Xa(ot(Ie,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Tm(Am,`resources/${e}_${t.name}`);return await MT(r,t),await Bv(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Tm(Am,`resources/html/${e}_${t.name}`);return await MT(r,t),await Bv(r)},subscribeToAnnouncements:t=>{const e=Pr(Lt(Ie,"announcements"),$o("createdAt","desc"),po(20));return Hs("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await Ol(Lt(Ie,"announcements"),t)},deleteAnnouncement:async t=>{await Xa(ot(Ie,"announcements",t))},dismissAnnouncement:async(t,e)=>{await ir(ot(Ie,"users",t),{"gamification.dismissedAnnouncements":iR(e)})},subscribeToNotifications:(t,e)=>{const r=Pr(Lt(Ie,"notifications"),cn("userId","==",t),$o("timestamp","desc"),po(50));return Dr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await ir(ot(Ie,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=Pr(Lt(Ie,"notifications"),cn("userId","==",t),cn("isRead","==",!1)),n=(await gd(e)).docs.map(a=>ir(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await Ol(Lt(Ie,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(o=>Ol(Lt(Ie,"notifications"),{userId:o,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await ir(ot(Ie,"users",t),n)},toggleCodenameLock:async(t,e)=>{await ir(ot(Ie,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await Ooe({})).data,claimDailyLogin:async()=>(await Ioe({})).data,spinFortuneWheel:async t=>(await Roe({classType:t})).data,unlockSkill:async(t,e)=>(await Moe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await Poe({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await Doe({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await Loe({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=Pr(Lt(Ie,"boss_encounters"),cn("isActive","==",!0));return Hs("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=Lt(Ie,"boss_encounters");return Dr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ot(Ie,"boss_encounters",t.id);await Wn(e,t)},toggleBossActive:async(t,e)=>{const r=ot(Ie,"boss_encounters",t);await ir(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ot(Ie,"boss_encounters",t);await Xa(e)},subscribeToBossShards:(t,e)=>{const r=Lt(Ie,`boss_encounters/${t}/shards`);return Dr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=Lt(Ie,`boss_encounters/${t}/damage_log`);return Dr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await Boe({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=Pr(Lt(Ie,"boss_quizzes"),cn("isActive","==",!0));return Hs("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=Lt(Ie,`boss_quizzes/${t}/shards`);return Dr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossQuizDamageLog:(t,e)=>{const r=Lt(Ie,`boss_quizzes/${t}/damage_log`);return Dr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await $oe({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=Lt(Ie,"boss_quizzes");return Dr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=ot(Ie,"boss_quizzes",t.id);await Wn(e,t)},toggleBossQuizActive:async(t,e)=>{const r=ot(Ie,"boss_quizzes",t);await ir(r,{isActive:e})},deleteBossQuiz:async t=>{const e=ot(Ie,"boss_quizzes",t);await Xa(e)},subscribeToBossQuestionBanks:t=>Dr(Lt(Ie,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=ot(Ie,"boss_question_banks",t.id);await Wn(e,t)},deleteBossQuestionBank:async t=>{await Xa(ot(Ie,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=Pr(Lt(Ie,"boss_quiz_progress"),cn("quizId","==",t));return(await gd(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=ot(Ie,"boss_quiz_progress",`${t}_${e}`);return Dr(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await Uoe({questId:t,userName:e})).data,joinParty:async(t,e)=>(await zoe({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>Dr(ot(Ie,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await Ol(Lt(Ie,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await ir(ot(Ie,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await ir(ot(Ie,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await ir(ot(Ie,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=ot(Ie,"tutoring_sessions",t),a=await da(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),o=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[o]:r};i[c]&&(d.status="COMPLETED"),await ir(n,d)},subscribeToAllTutoringSessions:t=>{const e=Pr(Lt(Ie,"tutoring_sessions"),$o("createdAt","desc"),po(100));return Dr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await Xa(ot(Ie,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=Pr(Lt(Ie,"tutoring_sessions"),cn("classType","==",t),po(50));return Hs("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await Voe({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=Pr(Lt(Ie,"knowledge_gates"),cn("isActive","==",!0));return Hs("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await Foe({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=Pr(Lt(Ie,"seasonal_cosmetics"),cn("isAvailable","==",!0));return Hs("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await qoe({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await ir(ot(Ie,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=Pr(Lt(Ie,"daily_challenges"),cn("date","==",e));return Hs("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await Hoe({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=ot(Ie,"users",t);await i3(Ie,async i=>{var h;const o=await i.get(a);if(!o.exists())return;const c=((h=o.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await da(ot(Ie,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=Pr(Lt(Ie,"student_alerts"),cn("isDismissed","==",!1));return Hs("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const o={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(o[i.riskLevel]||0)-(o[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await Goe({alertId:t})},subscribeToStudentBuckets:t=>Hs("student_buckets",Lt(Ie,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=Pr(Lt(Ie,"practice_progress"),cn("userId","==",t));return Dr(r,n=>{const a={};n.forEach(i=>{const o=i.data();o.assignmentId&&o.completed&&(a[o.assignmentId]={completed:o.completed||!1,totalCompletions:o.totalCompletions||0,bestScore:o.bestScore??null,completedAt:o.completedAt??null})}),e(a)},()=>{})},submitBugReport:async t=>{await Ol(Lt(Ie,"bug_reports"),{...t,resolved:!1})},subscribeToBugReports:t=>{const e=Pr(Lt(Ie,"bug_reports"),$o("timestamp","desc"),po(100));return Dr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},resolveBugReport:async t=>{await ir(ot(Ie,"bug_reports",t),{resolved:!0})},createEnrollmentCode:async(t,e,r)=>{const n=[Math.random().toString(36).substring(2,6),Math.random().toString(36).substring(2,6)].join("-").toUpperCase(),a=ot(Lt(Ie,"enrollment_codes"));return await Wn(a,{code:n,classType:t,section:e||null,createdAt:new Date().toISOString(),createdBy:"admin",usedCount:0,maxUses:r||null,isActive:!0}),n},subscribeToEnrollmentCodes:t=>{const e=Pr(Lt(Ie,"enrollment_codes"),$o("createdAt","desc"));return Dr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},deactivateEnrollmentCode:async t=>{await ir(ot(Ie,"enrollment_codes",t),{isActive:!1})},redeemEnrollmentCode:async(t,e)=>{const r=Pr(Lt(Ie,"enrollment_codes"),cn("code","==",t.toUpperCase()),cn("isActive","==",!0)),n=await gd(r);if(n.empty)return{success:!1,error:"Invalid or expired code."};const a=n.docs[0],i=a.data();if(i.maxUses&&i.usedCount>=i.maxUses)return{success:!1,error:"This code has reached its usage limit."};const o=ot(Ie,"users",e),c=await da(o);return c.exists()?(c.data().enrolledClasses||[]).includes(i.classType)?{success:!1,error:"Already enrolled in this class."}:(await ir(o,{enrolledClasses:iR(i.classType),isWhitelisted:!0}),i.section&&await ir(o,{[`classSections.${i.classType}`]:i.section}),await ir(a.ref,{usedCount:Kp(1)}),{success:!0,classType:i.classType}):{success:!1,error:"User not found."}},awardBehavior:async t=>{await Ol(Lt(Ie,"behavior_awards"),t);const e=ot(Ie,"users",t.studentId);await ir(e,{"gamification.xp":Kp(t.xpAmount),[`gamification.classXp.${t.classType}`]:Kp(t.xpAmount),"gamification.currency":Kp(t.fluxAmount)})},subscribeToBehaviorAwards:(t,e)=>{const r=Pr(Lt(Ie,"behavior_awards"),cn("classType","==",t),$o("timestamp","desc"),po(50));return Dr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},()=>{})},updateDailyStreak:async t=>{const e=ot(Ie,"users",t),r=await da(e);if(!r.exists())return{currentStreak:0,freezeUsed:!1};const a=r.data().streakData||{currentStreak:0,longestStreak:0,lastActiveDate:"",freezeTokens:0,maxFreezeTokens:3,streakHistory:[],milestones:[]},i=new Date().toISOString().split("T")[0];if(a.lastActiveDate===i)return{currentStreak:a.currentStreak,freezeUsed:!1};const o=new Date(Date.now()-864e5).toISOString().split("T")[0];let c=a.currentStreak,d=!1;a.lastActiveDate===o?c+=1:a.lastActiveDate&&Math.floor((new Date(i).getTime()-new Date(a.lastActiveDate).getTime())/864e5)===2&&a.freezeTokens>0?(c+=1,d=!0):c=1;const h=Math.max(a.longestStreak,c),p=[3,7,14,21,30,50,100],m=a.milestones||[],y=p.find(w=>c>=w&&!m.includes(w)),x=y?[...m,y]:m;let _=d?a.freezeTokens-1:a.freezeTokens;c>0&&c%7===0&&(_=Math.min(_+1,a.maxFreezeTokens));const S=[...a.streakHistory||[],i].slice(-30);return await ir(e,{streakData:{currentStreak:c,longestStreak:h,lastActiveDate:i,freezeTokens:_,maxFreezeTokens:3,streakHistory:S,milestones:x}}),{currentStreak:c,freezeUsed:d,newMilestone:y}}},MH=T.createContext(null),qa=()=>{const t=T.useContext(MH);if(!t)throw new Error("useToast must be used within ToastProvider");return t},Hle={success:s.jsx(nn,{className:"w-5 h-5 text-green-400 shrink-0"}),error:s.jsx(Is,{className:"w-5 h-5 text-red-400 shrink-0"}),info:s.jsx(z2,{className:"w-5 h-5 text-blue-400 shrink-0"})},Gle={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},Wle=({children:t})=>{const[e,r]=T.useState([]),n=T.useCallback((o,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:o,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=T.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i={success:o=>n(o,"success"),error:o=>n(o,"error"),info:o=>n(o,"info")};return s.jsxs(MH.Provider,{value:i,children:[t,s.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(o=>s.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${Gle[o.type]}`,children:[Hle[o.type],s.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:o.message}),s.jsx("button",{onClick:()=>a(o.id),className:"text-gray-500 hover:text-white transition shrink-0",children:s.jsx(aa,{className:"w-4 h-4"})})]},o.id))})]})},Kle=()=>{const[t,e]=T.useState(navigator.onLine),[r,n]=T.useState(!1);return T.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:s.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?s.jsxs(s.Fragment,{children:[s.jsx(Fle,{className:"w-4 h-4"}),"Connection restored"]}):s.jsxs(s.Fragment,{children:[s.jsx(Vle,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var du=iV();const Ai=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(T.useEffect(()=>{const i=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?du.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[s.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:s.jsx(aa,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),Qle="/favicon.svg";function Bf(){return typeof window<"u"&&"Notification"in window}function uv(){return Bf()?Notification.permission:"unsupported"}async function PH(){return Bf()?await Notification.requestPermission():"unsupported"}function Xle(t,e,r){if(!(!Bf()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:Qle,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function Yle(t,e){const r=T.useRef(new Set),n=T.useRef(!0),a=T.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const o=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of o.slice(0,3))Xle(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);T.useEffect(()=>{if(!t||!e||!Bf())return;n.current=!0,r.current=new Set;const i=Re.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const Zle=({userId:t})=>{const[e,r]=se.useState(""),[n,a]=se.useState(!1),[i,o]=se.useState(null),[c,d]=se.useState(null),h=qa(),p=y=>{const x=y.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);r(x.length>4?x.slice(0,4)+"-"+x.slice(4):x),o(null),d(null)},m=async()=>{if(e.replace("-","").length<4){o("Enter a valid code.");return}a(!0),o(null);try{const y=await Re.redeemEnrollmentCode(e,t);y.success?(d(`Enrolled in ${y.classType}!`),h.success(`Joined ${y.classType}!`),r("")):o(y.error||"Failed to redeem code.")}catch{o("Something went wrong. Please try again.")}finally{a(!1)}};return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Enrollment"}),s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-white mb-2",children:[s.jsx(ag,{className:"w-3.5 h-3.5 text-emerald-400"}),"Join Another Class"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:y=>p(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!n&&m()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm font-mono font-bold text-emerald-400 tracking-widest placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:n}),s.jsx("button",{onClick:m,disabled:n||e.replace("-","").length<4,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl text-xs font-bold transition flex items-center gap-1.5",children:n?s.jsx(Ti,{className:"w-3.5 h-3.5 animate-spin"}):"Join"})]}),i&&s.jsx("p",{className:"mt-2 text-xs text-red-400",children:i}),c&&s.jsxs("p",{className:"mt-2 text-xs text-emerald-400 flex items-center gap-1.5",children:[s.jsx(r0,{className:"w-3.5 h-3.5"})," ",c]})]})]})},Jle=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var _;const[a,i]=se.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[o,c]=se.useState(((_=r.gamification)==null?void 0:_.codename)||""),[d,h]=se.useState(!1),p=qa(),m=S=>{i(w=>({...w,[S]:!w[S]}))},y=async()=>{var S;h(!0);try{await n(a),o!==(((S=r.gamification)==null?void 0:S.codename)||"")&&await Re.updateCodename(r.id,o.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},x=({icon:S,title:w,description:E,value:I,onToggle:R})=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${I?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(S,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:w}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:E})]})]}),s.jsx("button",{onClick:R,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${I?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${I?"translate-x-5":"translate-x-0"}`})})]});return s.jsx(Ai,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(x,{icon:Tle,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),s.jsx(x,{icon:ile,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(x,{icon:is,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),s.jsx("input",{type:"text",value:o,onChange:S=>c(S.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[o.length,"/24 characters"]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(x,{icon:Ele,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),s.jsx(x,{icon:IH,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(S=>({...S,soundEffects:S.soundEffects===!1}))})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),s.jsx("div",{className:"space-y-2",children:Bf()?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(vH,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:uv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),s.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(S=>({...S,pushNotifications:!1}));else{const S=await PH();S==="granted"?(i(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):S==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:uv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${uv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):s.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),r.role==="STUDENT"&&s.jsx(Zle,{userId:r.id}),s.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?s.jsx(Ti,{className:"w-5 h-5 animate-spin"}):s.jsx(CH,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let h3=null,DH=!0;function ece(t){DH=t}function tce(){if(!h3){const t=window.AudioContext||window.webkitAudioContext;h3=new t}return h3}function er(t,e,r="sine",n=.15){if(DH)try{const a=tce(),i=a.createOscillator(),o=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),o.gain.setValueAtTime(n,a.currentTime),o.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(o),o.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const Un={xpGain:()=>{er(600,.1,"sine",.1),setTimeout(()=>er(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{er(1200,.15,"sine",.08),setTimeout(()=>er(1500,.12,"sine",.06),100),setTimeout(()=>er(1800,.2,"triangle",.05),180)},questAccept:()=>{er(440,.15,"square",.06),setTimeout(()=>er(660,.2,"square",.06),120)},questDeploy:()=>{er(880,.12,"sawtooth",.05),setTimeout(()=>er(660,.12,"sawtooth",.05),100),setTimeout(()=>er(550,.2,"sawtooth",.04),200)},equip:()=>{er(200,.05,"square",.1),setTimeout(()=>er(400,.08,"sine",.08),50)},salvage:()=>{er(300,.15,"sawtooth",.06),setTimeout(()=>er(200,.2,"sawtooth",.04),100),setTimeout(()=>er(100,.3,"sawtooth",.03),200)},craft:()=>{er(150,.08,"square",.1),setTimeout(()=>er(800,.2,"triangle",.08),60)},error:()=>{er(200,.15,"square",.08),setTimeout(()=>er(150,.2,"square",.06),120)},messageSend:()=>{er(500,.06,"sine",.05)},notification:()=>{er(800,.1,"sine",.06),setTimeout(()=>er(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>er(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{er(523,.12,"sine",.08),setTimeout(()=>er(659,.12,"sine",.07),100),setTimeout(()=>er(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>er(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{er(523,.15,"triangle",.1),setTimeout(()=>er(784,.15,"triangle",.1),120),setTimeout(()=>er(1047,.3,"sine",.12),240)},skillUnlock:()=>{er(300,.1,"sawtooth",.06),setTimeout(()=>er(600,.1,"sawtooth",.06),80),setTimeout(()=>er(900,.15,"sine",.08),160)},bossHit:()=>{er(100,.1,"square",.12),setTimeout(()=>er(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{er(1200,.08,"sine",.08),setTimeout(()=>er(1600,.1,"sine",.06),60),setTimeout(()=>er(2e3,.15,"triangle",.04),120)},partyJoin:()=>{er(440,.1,"sine",.06),setTimeout(()=>er(554,.1,"sine",.06),80),setTimeout(()=>er(659,.15,"sine",.05),160)},chestOpen:()=>{er(200,.15,"square",.06),setTimeout(()=>er(300,.1,"square",.05),100),setTimeout(()=>er(500,.1,"triangle",.06),200),setTimeout(()=>er(800,.2,"sine",.08),350)}},rce={QUEST_APPROVED:s.jsx(Nu,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:s.jsx(Nu,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:s.jsx($T,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:s.jsx(Nu,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:s.jsx(EH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:s.jsx(tle,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:s.jsx(Fv,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:s.jsx(Yn,{className:"w-4 h-4 text-cyan-400"})},TR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(!1),[p,m]=T.useState({}),y=T.useRef(null),x=T.useRef(null),_=T.useRef(0),S=T.useCallback(()=>{if(!y.current)return;const C=y.current.getBoundingClientRect(),O=320;if(n){const A=Math.max(8,C.left),j=A+O>window.innerWidth-8?void 0:A,k=j==null?8:void 0;m({bottom:window.innerHeight-C.top+8,left:j,right:k})}else m({top:C.bottom+8,right:Math.max(8,window.innerWidth-C.right)})},[n]);T.useEffect(()=>{o&&Bf()&&uv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[o,e==null?void 0:e.pushNotifications]),T.useEffect(()=>{const C=Re.subscribeToNotifications(t,O=>{const A=O.filter(j=>!j.isRead).length;A>_.current&&_.current>=0&&Un.notification(),_.current=A,i(O)});return()=>C()},[t]),T.useEffect(()=>{const C=O=>{var j,k;const A=O.target;(j=y.current)!=null&&j.contains(A)||(k=x.current)!=null&&k.contains(A)||c(!1)};return o&&document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[o]),T.useEffect(()=>{if(o)return S(),window.addEventListener("resize",S),window.addEventListener("scroll",S,!0),()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",S,!0)}},[o,S]);const w=a.filter(C=>!C.isRead).length,E=async()=>{await Re.markAllNotificationsRead(t)},I=async C=>{C.isRead||await Re.markNotificationRead(C.id)},R=C=>{const O=Date.now()-new Date(C).getTime();return O<6e4?"just now":O<36e5?`${Math.floor(O/6e4)}m ago`:O<864e5?`${Math.floor(O/36e5)}h ago`:`${Math.floor(O/864e5)}d ago`},L=()=>{o||S(),c(!o)};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:y,onClick:L,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[s.jsx(l3,{className:"w-5 h-5"}),w>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:w>9?"9+":w})]}),o&&du.createPortal(s.jsxs("div",{ref:x,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...p.top!=null?{top:p.top}:{},...p.bottom!=null?{bottom:p.bottom}:{},...p.left!=null?{left:p.left}:{},...p.right!=null?{right:p.right}:{}},children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),w>0&&s.jsxs("button",{onClick:E,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[s.jsx(nle,{className:"w-3 h-3"})," Mark all read"]})]}),d&&s.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(vH,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:async()=>{await PH()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),s.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),s.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(l3,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(C=>s.jsxs("div",{onClick:()=>I(C),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${C.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[s.jsx("div",{className:"mt-0.5 shrink-0",children:rce[C.type]||s.jsx(l3,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-bold text-white truncate",children:C.title}),s.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:C.message}),s.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:R(C.timestamp)})]}),!C.isRead&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},C.id))})]}),document.body)]})},nce=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var w,E;const[i,o]=T.useState(""),[c,d]=T.useState(!1),[h,p]=T.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};T.useEffect(()=>{if(!m.liveBackground){o("");return}(async()=>{try{const R=Tm(Am,"public/background.mp4"),L=await Bv(R);o(L)}catch{console.warn("Firebase background not found, using local fallback."),o("/background.mp4")}})()},[m.liveBackground]);const y=async I=>{await Re.updateUserSettings(t.id,I)},[x,_]=T.useState(null);T.useEffect(()=>{const I=_R.find(R=>{var L;return(L=R.children)==null?void 0:L.some(C=>r===`${R.name}:${C.name}`)});I&&_(I.name)},[r]);const S=()=>{const I=_R.filter(L=>!(L.role==="ADMIN"&&t.role!==Ba.ADMIN||L.role==="STUDENT"&&t.role!==Ba.STUDENT)),R=L=>{var C;return(C=L.children)==null?void 0:C.some(O=>r===`${L.name}:${O.name}`)};return s.jsx(s.Fragment,{children:I.map(L=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{L.children?x===L.name?_(null):(_(L.name),R(L)||(n(`${L.name}:${L.children[0].name}`),p(!1))):(n(L.name),p(!1))},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===L.name||R(L)?L.children?"bg-purple-500/10 text-white border border-purple-500/20":"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[s.jsx("span",{className:`${r===L.name||R(L)?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:L.icon}),s.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:L.name}),L.children&&s.jsx(gi,{className:`w-3.5 h-3.5 transition-transform ${x===L.name?"rotate-180":""} ${R(L)?"text-purple-400":"text-gray-600"}`})]}),L.children&&x===L.name&&s.jsx("div",{className:"ml-6 mt-1 space-y-0.5 border-l border-white/10 pl-3",children:L.children.map(C=>{const O=`${L.name}:${C.name}`;return s.jsxs("button",{onClick:()=>{n(O),p(!1)},className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-xs font-medium transition-all ${r===O?"bg-purple-600/60 text-white":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[s.jsx("span",{className:r===O?"text-white":"text-gray-600",children:C.icon}),C.name]},C.name)})})]},L.name))})};return s.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[s.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:s.jsx("source",{src:i,type:"video/mp4"})},i)}),s.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),s.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:s.jsx(Ru,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(TR,{userId:t.id,settings:m,onUpdateSettings:y}),s.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:s.jsx(wle,{className:"w-6 h-6"})})]})]}),h&&s.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),s.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((w=t.gamification)==null?void 0:w.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:s.jsx(aa,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:s.jsx(S,{})}),s.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[s.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[s.jsx(ig,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[s.jsx(xR,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),s.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:s.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[s.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[s.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:s.jsx(Ru,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),s.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Ba.ADMIN?"Admin System":"Operative Terminal"})]})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:s.jsx(S,{})}),s.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((E=t.gamification)==null?void 0:E.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(TR,{userId:t.id,settings:m,onUpdateSettings:y,dropUp:!0}),s.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:s.jsx(ig,{className:"w-4 h-4"})})]})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[s.jsx(xR,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),s.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),s.jsx(Jle,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:y})]})},ace=[.75,1,1.25,1.5,2],AR=({textContent:t,compact:e})=>{const[r,n]=T.useState(!1),[a,i]=T.useState(1),[o,c]=T.useState(0),[d,h]=T.useState(!1),p=T.useRef(null),m=T.useRef([]);T.useEffect(()=>{if(!t){m.current=[];return}const L=t.replace(/\n+/g,". ").split(new RegExp("(?<=[.!?])\\s+")).map(C=>C.trim()).filter(C=>C.length>2);m.current=L,c(0)},[t]);const y=T.useCallback(()=>{window.speechSynthesis.cancel(),n(!1)},[]),x=T.useCallback(L=>{const C=m.current;if(L<0||L>=C.length){n(!1);return}window.speechSynthesis.cancel();const O=new SpeechSynthesisUtterance(C[L]);O.rate=a,O.onend=()=>{const A=L+1;A<C.length?(c(A),x(A)):n(!1)},O.onerror=()=>{n(!1)},p.current=O,c(L),window.speechSynthesis.speak(O)},[a]),_=T.useCallback(()=>{r?y():(n(!0),x(o))},[r,o,x,y]),S=T.useCallback(()=>{const L=Math.max(0,o-1);c(L),r&&x(L)},[o,r,x]),w=T.useCallback(()=>{const L=Math.min(m.current.length-1,o+1);c(L),r&&x(L)},[o,r,x]),E=T.useCallback(L=>{if(i(L),h(!1),r){window.speechSynthesis.cancel();const C=new SpeechSynthesisUtterance(m.current[o]);C.rate=L,C.onend=()=>{const O=o+1;O<m.current.length?(c(O),x(O)):n(!1)},p.current=C,window.speechSynthesis.speak(C)}},[r,o,x]);if(T.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),!t||m.current.length===0)return null;if(e)return s.jsxs("button",{onClick:_,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${r?"text-amber-300 bg-amber-500/20 border-amber-500/30 hover:bg-amber-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:r?"Stop Reading":"Read Aloud",children:[r?s.jsx(zle,{className:"w-3 h-3"}):s.jsx(IH,{className:"w-3 h-3"}),r?"Stop Reading":"Read Aloud"]});const I=m.current.length,R=I>0?(o+1)/I*100:0;return s.jsxs("div",{className:"flex items-center gap-2 bg-black/40 rounded-xl px-3 py-2 border border-white/10",children:[s.jsx("button",{onClick:_,className:`p-1.5 rounded-lg transition ${r?"bg-amber-500/20 text-amber-400":"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20"}`,children:r?s.jsx(kle,{className:"w-4 h-4"}):s.jsx(eE,{className:"w-4 h-4"})}),s.jsx("button",{onClick:S,disabled:o===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Ole,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:w,disabled:o>=I-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Ile,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-300",style:{width:`${R}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-500 font-mono min-w-[3rem] text-center",children:[o+1,"/",I]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-1 text-[10px] text-gray-400 hover:text-white bg-white/5 px-2 py-1 rounded-lg border border-white/10 transition",children:[s.jsx(fle,{className:"w-3 h-3"}),a,"x"]}),d&&s.jsx("div",{className:"absolute bottom-full right-0 mb-1 bg-[#1a1b26] border border-white/10 rounded-lg shadow-lg overflow-hidden z-50",children:ace.map(L=>s.jsxs("button",{onClick:()=>E(L),className:`block w-full text-left px-3 py-1.5 text-xs transition ${a===L?"bg-purple-600/30 text-purple-300":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[L,"x"]},L))})]})]})},ice=["#ef4444","#f59e0b","#22c55e","#3b82f6","#a855f7","#ffffff"],sce=[2,4,6,8],oce=({containerRef:t,onAnnotationsChange:e})=>{const r=T.useRef(null),[n,a]=T.useState(!1),[i,o]=T.useState("pen"),[c,d]=T.useState("#ef4444"),[h,p]=T.useState(4),[m,y]=T.useState(!1),[x,_]=T.useState(!1),S=T.useRef([]),w=T.useRef(!1),E=T.useRef([]),I=T.useCallback(()=>{const D=r.current,$=t.current;if(!D||!$)return;const B=$.getBoundingClientRect();D.width=B.width,D.height=B.height,D.style.width=`${B.width}px`,D.style.height=`${B.height}px`,R()},[t]);T.useEffect(()=>{if(!n)return;I();const D=new ResizeObserver(I);return t.current&&D.observe(t.current),()=>D.disconnect()},[n,I,t]);const R=T.useCallback(()=>{const D=r.current;if(!D)return;const $=D.getContext("2d");if($){$.clearRect(0,0,D.width,D.height);for(const B of S.current)if(!(B.points.length<2)){$.beginPath(),$.strokeStyle=B.tool==="eraser"?"rgba(0,0,0,0)":B.color,$.lineWidth=B.width,$.lineCap="round",$.lineJoin="round",B.tool==="eraser"?$.globalCompositeOperation="destination-out":$.globalCompositeOperation="source-over",$.moveTo(B.points[0].x,B.points[0].y);for(let G=1;G<B.points.length;G++)$.lineTo(B.points[G].x,B.points[G].y);$.stroke()}$.globalCompositeOperation="source-over"}},[]),L=T.useCallback(D=>{const $=r.current;if(!$)return null;const B=$.getBoundingClientRect();if("touches"in D){const G=D.touches[0];return{x:G.clientX-B.left,y:G.clientY-B.top}}return{x:D.clientX-B.left,y:D.clientY-B.top}},[]),C=T.useCallback(D=>{if(!n)return;D.preventDefault();const $=L(D);$&&(w.current=!0,E.current=[$])},[n,L]),O=T.useCallback(D=>{if(!w.current||!n)return;D.preventDefault();const $=L(D);if(!$)return;E.current.push($);const B=r.current;if(!B)return;const G=B.getContext("2d");if(!G)return;const K=E.current;if(K.length<2)return;G.beginPath(),i==="eraser"?(G.globalCompositeOperation="destination-out",G.strokeStyle="rgba(0,0,0,1)"):(G.globalCompositeOperation="source-over",G.strokeStyle=c),G.lineWidth=i==="eraser"?h*4:h,G.lineCap="round",G.lineJoin="round";const H=K[K.length-2],J=K[K.length-1];G.moveTo(H.x,H.y),G.lineTo(J.x,J.y),G.stroke(),G.globalCompositeOperation="source-over"},[n,L,i,c,h]),A=T.useCallback(()=>{w.current&&(w.current=!1,E.current.length>1&&(S.current.push({points:[...E.current],color:c,width:i==="eraser"?h*4:h,tool:i}),e==null||e(S.current.length>0)),E.current=[])},[c,h,i,e]),j=T.useCallback(()=>{S.current.pop(),R(),e==null||e(S.current.length>0)},[R,e]),k=T.useCallback(()=>{S.current=[],R(),e==null||e(!1)},[R,e]),z=T.useCallback(()=>{a(D=>!D),y(!1),_(!1)},[]);return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:z,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${n?"text-red-300 bg-red-500/20 border-red-500/30 hover:bg-red-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:"Annotate",children:[s.jsx(Hv,{className:"w-3 h-3"}),n?"Clear Annotations":"Annotate"]}),n&&s.jsx("canvas",{ref:r,className:"absolute inset-0 z-30",style:{cursor:"crosshair",touchAction:"none"},onMouseDown:C,onMouseMove:O,onMouseUp:A,onMouseLeave:A,onTouchStart:C,onTouchMove:O,onTouchEnd:A}),n&&s.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-[#1a1b26]/95 backdrop-blur-md px-4 py-2 rounded-xl border border-white/10 shadow-2xl",children:[s.jsx("button",{onClick:()=>o("pen"),className:`p-2 rounded-lg transition ${i==="pen"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Pen",children:s.jsx(Hv,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>o("eraser"),className:`p-2 rounded-lg transition ${i==="eraser"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Eraser",children:s.jsx(cle,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{y(!m),_(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Color",children:[s.jsx(jle,{className:"w-4 h-4"}),s.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-2 h-2 rounded-full",style:{backgroundColor:c}})]}),m&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-1.5 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:ice.map(D=>s.jsx("button",{onClick:()=>{d(D),y(!1)},className:`w-6 h-6 rounded-full border-2 transition ${c===D?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:D}},D))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>{_(!x),y(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Line width",children:s.jsx(TH,{className:"w-4 h-4"})}),x&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-2 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:sce.map(D=>s.jsx("button",{onClick:()=>{p(D),_(!1)},className:`flex items-center justify-center w-8 h-8 rounded-lg transition ${h===D?"bg-purple-600/30 border border-purple-500/30":"hover:bg-white/5"}`,children:s.jsx("div",{className:"rounded-full bg-white",style:{width:D*2,height:D*2}})},D))})]}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsx("button",{onClick:j,disabled:S.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 disabled:opacity-30 transition",title:"Undo",children:s.jsx(Lle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:k,disabled:S.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-red-400 hover:bg-red-500/10 disabled:opacity-30 transition",title:"Clear all",children:s.jsx(In,{className:"w-4 h-4"})})]})]})},lce={TEXT:s.jsx(a0,{className:"w-3.5 h-3.5"}),MC:s.jsx($2,{className:"w-3.5 h-3.5"}),SHORT_ANSWER:s.jsx(tf,{className:"w-3.5 h-3.5"}),CHECKLIST:s.jsx(J8,{className:"w-3.5 h-3.5"}),VOCABULARY:s.jsx(as,{className:"w-3.5 h-3.5"}),INFO_BOX:s.jsx(z2,{className:"w-3.5 h-3.5"})},cce={TEXT:"Reading",MC:"Question",SHORT_ANSWER:"Response",CHECKLIST:"Checklist",VOCABULARY:"Vocabulary",INFO_BOX:"Info"},uce=({blocks:t,currentBlockIndex:e,completedBlocks:r,onNavigateToBlock:n,engagementTime:a=0,xpEarned:i=0})=>{const o=t.filter(E=>["MC","SHORT_ANSWER","CHECKLIST"].includes(E.type)),c=o.filter(E=>r.has(E.id)).length,d=o.length,h=d>0?Math.round(c/d*100):e>=t.length-1?100:Math.round((e+1)/t.length*100),p=100,m=8,y=(p-m)/2,x=2*Math.PI*y,_=x-h/100*x,S=Math.floor(a/60),w=a%60;return s.jsxs("div",{className:"w-56 flex-shrink-0 flex flex-col gap-4 overflow-y-auto custom-scrollbar pr-1",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 bg-black/30 rounded-2xl p-4 border border-white/5",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{width:p,height:p,className:"transform -rotate-90",children:[s.jsx("circle",{cx:p/2,cy:p/2,r:y,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:m}),s.jsx("circle",{cx:p/2,cy:p/2,r:y,fill:"none",stroke:h===100?"#34d399":"#a855f7",strokeWidth:m,strokeLinecap:"round",strokeDasharray:x,strokeDashoffset:_,className:"transition-all duration-700 ease-out"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("span",{className:`text-xl font-black ${h===100?"text-emerald-400":"text-white"}`,children:[h,"%"]})})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[c,"/",d," questions"]}),s.jsxs("div",{className:"flex gap-3 text-[10px] text-gray-500 font-mono",children:[s.jsxs("span",{children:[S,":",String(w).padStart(2,"0")]}),i>0&&s.jsxs("span",{className:"text-amber-400",children:["+",i," XP"]})]})]}),s.jsxs("div",{className:"bg-black/30 rounded-2xl p-3 border border-white/5 flex flex-col gap-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:"Sections"}),t.map((E,I)=>{const R=I===e,L=r.has(E.id),C=["MC","SHORT_ANSWER","CHECKLIST"].includes(E.type);return s.jsxs("button",{onClick:()=>n(I),className:`flex items-center gap-2 px-2 py-1.5 rounded-lg text-left transition-all text-[11px] ${R?"bg-purple-500/20 text-purple-300 border border-purple-500/30":L?"text-emerald-400/80 hover:bg-emerald-500/10":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx("span",{className:"shrink-0 w-4 h-4 flex items-center justify-center",children:L?s.jsx(nn,{className:"w-3.5 h-3.5 text-emerald-400"}):s.jsx("span",{className:R?"text-purple-400":"text-gray-600",children:lce[E.type]||s.jsx(a0,{className:"w-3.5 h-3.5"})})}),s.jsxs("span",{className:"truncate flex-1 font-medium",children:[cce[E.type]||E.type,C&&!L&&s.jsx("span",{className:"ml-1 text-[9px] text-amber-400/60",children:"*"})]}),s.jsx("span",{className:`text-[9px] font-mono ${R?"text-purple-400":"text-gray-600"}`,children:I+1})]},E.id)})]})]})},dce=({block:t})=>s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:t.content}),hce=({block:t})=>{const r={tip:"border-green-500/30 bg-green-500/5 text-green-400",warning:"border-amber-500/30 bg-amber-500/5 text-amber-400",note:"border-blue-500/30 bg-blue-500/5 text-blue-400"}[t.variant||"note"];return s.jsxs("div",{className:`border rounded-xl p-4 text-sm ${r}`,children:[s.jsx("div",{className:"font-bold text-xs uppercase tracking-widest mb-1",children:t.variant==="tip"?"Tip":t.variant==="warning"?"Warning":"Note"}),s.jsx("div",{className:"text-gray-300",children:t.content})]})},fce=({block:t,onComplete:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!1),o=r===t.correctAnswer,c=()=>{r!==null&&(i(!0),e(r===t.correctAnswer))};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx($2,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.options||[]).map((d,h)=>s.jsx("button",{onClick:()=>!a&&n(h),disabled:a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a&&h===t.correctAnswer?"border-green-500/50 bg-green-500/10 text-green-400":a&&h===r&&!o?"border-red-500/50 bg-red-500/10 text-red-400":r===h?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+h),"."]}),s.jsx("span",{children:d}),a&&h===t.correctAnswer&&s.jsx(nn,{className:"w-4 h-4 text-green-400 ml-auto"}),a&&h===r&&!o&&s.jsx(Iu,{className:"w-4 h-4 text-red-400 ml-auto"})]})},h))}),!a&&s.jsx("button",{onClick:c,disabled:r===null,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Check Answer"}),a&&s.jsx("div",{className:`text-xs font-bold ${o?"text-green-400":"text-red-400"}`,children:o?"Correct!":"Incorrect  review the material above."})]})},pce=({block:t,onComplete:e})=>{const[r,n]=T.useState(""),[a,i]=T.useState(!1),[o,c]=T.useState(!1),d=()=>{if(!r.trim())return;const p=(t.acceptedAnswers||[]).map(m=>m.toLowerCase().trim()).includes(r.toLowerCase().trim());c(p),i(!0),e(p)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(tf,{className:"w-4 h-4 text-cyan-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),disabled:a,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:h=>h.key==="Enter"&&d()}),!a&&s.jsx("button",{onClick:d,disabled:!r.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),a&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${o?"text-green-400":"text-amber-400"}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx(nn,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Iu,{className:"w-3 h-3"})," Accepted answers: ",(t.acceptedAnswers||[]).join(", ")]})})]})},mce=({block:t})=>{const[e,r]=T.useState(!1);return s.jsx("button",{onClick:()=>r(!e),className:"w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(as,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:t.term}),e?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:t.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal definition"})]})]})})},gce=({block:t,onComplete:e})=>{const[r,n]=T.useState(new Set),a=(t.items||[]).length>0&&r.size===(t.items||[]).length,i=o=>{const c=new Set(r);c.has(o)?c.delete(o):c.add(o),n(c),c.size===(t.items||[]).length&&e(!0)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(J8,{className:"w-4 h-4 text-green-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.items||[]).map((o,c)=>s.jsxs("button",{onClick:()=>i(c),className:`w-full text-left flex items-center gap-3 p-3 rounded-xl border text-sm transition ${r.has(c)?"border-green-500/30 bg-green-500/5 text-green-400 line-through":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition ${r.has(c)?"border-green-500 bg-green-500":"border-gray-600"}`,children:r.has(c)&&s.jsx(nn,{className:"w-3 h-3 text-white"})}),o]},c))}),a&&s.jsxs("div",{className:"text-xs font-bold text-green-400 flex items-center gap-1",children:[s.jsx(nn,{className:"w-3 h-3"})," All items completed!"]})]})},LH=({blocks:t,onBlockComplete:e,onAllComplete:r,showSidebar:n=!1,engagementTime:a,xpEarned:i})=>{const[o,c]=T.useState(new Set),[d,h]=T.useState(0),p=T.useCallback((E,I)=>{e==null||e(E,I),c(R=>{const L=new Set(R);return L.add(E),t.filter(O=>["MC","SHORT_ANSWER","CHECKLIST"].includes(O.type)).every(O=>L.has(O.id))&&(r==null||r()),L})},[t,e,r]),m=()=>{d<t.length-1&&h(E=>E+1)},y=()=>{d>0&&h(E=>E-1)};if(t.length===0)return null;const x=t[d],_=["MC","SHORT_ANSWER","CHECKLIST"].includes(x.type),S=o.has(x.id),w=s.jsxs("div",{className:"space-y-4 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-500",style:{width:`${(d+1)/t.length*100}%`}})}),s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[d+1,"/",t.length]})]}),s.jsxs("div",{className:"animate-in fade-in slide-in-from-right-2 duration-200",children:[x.type==="TEXT"&&s.jsx(dce,{block:x}),x.type==="INFO_BOX"&&s.jsx(hce,{block:x}),x.type==="MC"&&s.jsx(fce,{block:x,onComplete:E=>p(x.id,E)}),x.type==="SHORT_ANSWER"&&s.jsx(pce,{block:x,onComplete:E=>p(x.id,E)}),x.type==="VOCABULARY"&&s.jsx(mce,{block:x}),x.type==="CHECKLIST"&&s.jsx(gce,{block:x,onComplete:E=>p(x.id,E)})]},x.id),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/5",children:[s.jsx("button",{onClick:y,disabled:d===0,className:"text-xs text-gray-500 hover:text-white disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-white/5",children:"Previous"}),s.jsx("div",{className:"flex gap-1",children:t.map((E,I)=>s.jsx("button",{onClick:()=>h(I),className:`w-2 h-2 rounded-full transition ${I===d?"bg-purple-500 scale-125":o.has(E.id)?"bg-green-500":"bg-white/10 hover:bg-white/20"}`},E.id))}),s.jsxs("button",{onClick:m,disabled:d>=t.length-1||_&&!S,className:"flex items-center gap-1 text-xs text-purple-400 hover:text-purple-300 disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-purple-500/10",children:["Next ",s.jsx(_u,{className:"w-3 h-3"})]})]})]});return n&&t.length>=3?s.jsxs("div",{className:"flex gap-4",children:[w,s.jsx(uce,{blocks:t,currentBlockIndex:d,completedBlocks:o,onNavigateToBlock:h,engagementTime:a,xpEarned:i})]}):w};class Yi{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Yi(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class ks{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new ks(r,Yi.range(this,e))}}class ut{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,o=r&&r.loc;if(o&&o.start<=o.end){var c=o.lexer.input;a=o.start,i=o.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=ut.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}ut.prototype.__proto__=Error.prototype;var yce=function(e,r){return e===void 0?r:e},xce=/([A-Z])/g,vce=function(e){return e.replace(xce,"-$1").toLowerCase()},bce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},wce=/[&><"']/g;function Sce(t){return String(t).replace(wce,e=>bce[e])}var BH=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},_ce=function(e){var r=BH(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Nce=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Tce=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Hr={deflt:yce,escape:Sce,hyphenate:vce,getBaseElem:BH,isCharacterBox:_ce,protocolFromUrl:Tce},dv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Ace(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class rE{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in dv)if(dv.hasOwnProperty(r)){var n=dv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:Ace(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ut("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Hr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Zc{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Vo[jce[this.id]]}sub(){return Vo[Ece[this.id]]}fracNum(){return Vo[kce[this.id]]}fracDen(){return Vo[Cce[this.id]]}cramp(){return Vo[Oce[this.id]]}text(){return Vo[Ice[this.id]]}isTight(){return this.size>=2}}var nE=0,Kv=1,Rh=2,Ql=3,sg=4,Ys=5,rf=6,Pi=7,Vo=[new Zc(nE,0,!1),new Zc(Kv,0,!0),new Zc(Rh,1,!1),new Zc(Ql,1,!0),new Zc(sg,2,!1),new Zc(Ys,2,!0),new Zc(rf,3,!1),new Zc(Pi,3,!0)],jce=[sg,Ys,sg,Ys,rf,Pi,rf,Pi],Ece=[Ys,Ys,Ys,Ys,Pi,Pi,Pi,Pi],kce=[Rh,Ql,sg,Ys,rf,Pi,rf,Pi],Cce=[Ql,Ql,Ys,Ys,Pi,Pi,Pi,Pi],Oce=[Kv,Kv,Ql,Ql,Ys,Ys,Pi,Pi],Ice=[nE,Kv,Rh,Ql,Rh,Ql,Rh,Ql],Ht={DISPLAY:Vo[nE],TEXT:Vo[Rh],SCRIPT:Vo[sg],SCRIPTSCRIPT:Vo[rf]},zT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Rce(t){for(var e=0;e<zT.length;e++)for(var r=zT[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var hv=[];zT.forEach(t=>t.blocks.forEach(e=>hv.push(...e)));function $H(t){for(var e=0;e<hv.length;e+=2)if(t>=hv[e]&&t<=hv[e+1])return!0;return!1}var ch=80,Mce=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Pce=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Dce=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Lce=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},Bce=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},$ce=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},Uce=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},zce=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=Mce(r,ch);break;case"sqrtSize1":a=Pce(r,ch);break;case"sqrtSize2":a=Dce(r,ch);break;case"sqrtSize3":a=Lce(r,ch);break;case"sqrtSize4":a=Bce(r,ch);break;case"sqrtTall":a=Uce(r,ch,n)}return a},Vce=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},jR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Fce=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class v1{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Go={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},xx={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},ER={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function qce(t,e){Go[t]=e}function aE(t,e,r){if(!Go[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Go[e][n];if(!a&&t[0]in ER&&(n=ER[t[0]].charCodeAt(0),a=Go[e][n]),!a&&r==="text"&&$H(n)&&(a=Go[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var f3={};function Hce(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!f3[e]){var r=f3[e]={cssEmPerMu:xx.quad[e]/18};for(var n in xx)xx.hasOwnProperty(n)&&(r[n]=xx[n][e])}return f3[e]}var Gce=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],kR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],CR=function(e,r){return r.size<2?e:Gce[e-1][r.size-1]};class Dl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Dl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=kR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Dl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:CR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:kR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=CR(Dl.BASESIZE,e);return this.size===r&&this.textSize===Dl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Dl.BASESIZE?["sizing","reset-size"+this.size,"size"+Dl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Hce(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Dl.BASESIZE=6;var VT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Wce={ex:!0,em:!0,mu:!0},UH=function(e){return typeof e!="string"&&(e=e.unit),e in VT||e in Wce||e==="ex"},Kn=function(e,r){var n;if(e.unit in VT)n=VT[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ut("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},yt=function(e){return+e.toFixed(4)+"em"},Mu=function(e){return e.filter(r=>r).join(" ")},zH=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},VH=function(e){var r=document.createElement(e);r.className=Mu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},Kce=/[\s"'>/=\x00-\x1f]/,FH=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Hr.escape(Mu(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Hr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Hr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(Kce.test(i))throw new ut("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Hr.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class b1{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,zH.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return VH.call(this,"span")}toMarkup(){return FH.call(this,"span")}}class iE{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,zH.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return VH.call(this,"a")}toMarkup(){return FH.call(this,"a")}}class Qce{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Hr.escape(this.src)+'"'+(' alt="'+Hr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Hr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Hr.escape(r)+'"'),e+="'/>",e}}var Xce={:"",:"",:"",:""};class ro{constructor(e,r,n,a,i,o,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=o||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=Rce(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=Xce[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=yt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Mu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Hr.escape(Mu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Hr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Hr.escape(n)+'"');var i=Hr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class ic{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Hr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Pu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",jR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Hr.escape(this.alternate)+'"/>':'<path d="'+Hr.escape(jR[this.pathName])+'"/>'}}class FT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Hr.escape(this.attributes[r])+'"');return e+="/>",e}}function OR(t){if(t instanceof ro)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Yce(t){if(t instanceof b1)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Zce={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Jce={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Rn={math:{},text:{}};function M(t,e,r,n,a,i){Rn[t][a]={font:e,group:r,replace:n},i&&n&&(Rn[t][n]=Rn[t][a])}var U="math",at="text",W="main",oe="ams",qn="accent-token",Tt="bin",$i="close",$f="inner",qt="mathord",Ia="op-token",Rs="open",q2="punct",le="rel",mc="spacing",ge="textord";M(U,W,le,"","\\equiv",!0);M(U,W,le,"","\\prec",!0);M(U,W,le,"","\\succ",!0);M(U,W,le,"","\\sim",!0);M(U,W,le,"","\\perp");M(U,W,le,"","\\preceq",!0);M(U,W,le,"","\\succeq",!0);M(U,W,le,"","\\simeq",!0);M(U,W,le,"","\\mid",!0);M(U,W,le,"","\\ll",!0);M(U,W,le,"","\\gg",!0);M(U,W,le,"","\\asymp",!0);M(U,W,le,"","\\parallel");M(U,W,le,"","\\bowtie",!0);M(U,W,le,"","\\smile",!0);M(U,W,le,"","\\sqsubseteq",!0);M(U,W,le,"","\\sqsupseteq",!0);M(U,W,le,"","\\doteq",!0);M(U,W,le,"","\\frown",!0);M(U,W,le,"","\\ni",!0);M(U,W,le,"","\\propto",!0);M(U,W,le,"","\\vdash",!0);M(U,W,le,"","\\dashv",!0);M(U,W,le,"","\\owns");M(U,W,q2,".","\\ldotp");M(U,W,q2,"","\\cdotp");M(U,W,ge,"#","\\#");M(at,W,ge,"#","\\#");M(U,W,ge,"&","\\&");M(at,W,ge,"&","\\&");M(U,W,ge,"","\\aleph",!0);M(U,W,ge,"","\\forall",!0);M(U,W,ge,"","\\hbar",!0);M(U,W,ge,"","\\exists",!0);M(U,W,ge,"","\\nabla",!0);M(U,W,ge,"","\\flat",!0);M(U,W,ge,"","\\ell",!0);M(U,W,ge,"","\\natural",!0);M(U,W,ge,"","\\clubsuit",!0);M(U,W,ge,"","\\wp",!0);M(U,W,ge,"","\\sharp",!0);M(U,W,ge,"","\\diamondsuit",!0);M(U,W,ge,"","\\Re",!0);M(U,W,ge,"","\\heartsuit",!0);M(U,W,ge,"","\\Im",!0);M(U,W,ge,"","\\spadesuit",!0);M(U,W,ge,"","\\S",!0);M(at,W,ge,"","\\S");M(U,W,ge,"","\\P",!0);M(at,W,ge,"","\\P");M(U,W,ge,"","\\dag");M(at,W,ge,"","\\dag");M(at,W,ge,"","\\textdagger");M(U,W,ge,"","\\ddag");M(at,W,ge,"","\\ddag");M(at,W,ge,"","\\textdaggerdbl");M(U,W,$i,"","\\rmoustache",!0);M(U,W,Rs,"","\\lmoustache",!0);M(U,W,$i,"","\\rgroup",!0);M(U,W,Rs,"","\\lgroup",!0);M(U,W,Tt,"","\\mp",!0);M(U,W,Tt,"","\\ominus",!0);M(U,W,Tt,"","\\uplus",!0);M(U,W,Tt,"","\\sqcap",!0);M(U,W,Tt,"","\\ast");M(U,W,Tt,"","\\sqcup",!0);M(U,W,Tt,"","\\bigcirc",!0);M(U,W,Tt,"","\\bullet",!0);M(U,W,Tt,"","\\ddagger");M(U,W,Tt,"","\\wr",!0);M(U,W,Tt,"","\\amalg");M(U,W,Tt,"&","\\And");M(U,W,le,"","\\longleftarrow",!0);M(U,W,le,"","\\Leftarrow",!0);M(U,W,le,"","\\Longleftarrow",!0);M(U,W,le,"","\\longrightarrow",!0);M(U,W,le,"","\\Rightarrow",!0);M(U,W,le,"","\\Longrightarrow",!0);M(U,W,le,"","\\leftrightarrow",!0);M(U,W,le,"","\\longleftrightarrow",!0);M(U,W,le,"","\\Leftrightarrow",!0);M(U,W,le,"","\\Longleftrightarrow",!0);M(U,W,le,"","\\mapsto",!0);M(U,W,le,"","\\longmapsto",!0);M(U,W,le,"","\\nearrow",!0);M(U,W,le,"","\\hookleftarrow",!0);M(U,W,le,"","\\hookrightarrow",!0);M(U,W,le,"","\\searrow",!0);M(U,W,le,"","\\leftharpoonup",!0);M(U,W,le,"","\\rightharpoonup",!0);M(U,W,le,"","\\swarrow",!0);M(U,W,le,"","\\leftharpoondown",!0);M(U,W,le,"","\\rightharpoondown",!0);M(U,W,le,"","\\nwarrow",!0);M(U,W,le,"","\\rightleftharpoons",!0);M(U,oe,le,"","\\nless",!0);M(U,oe,le,"","\\@nleqslant");M(U,oe,le,"","\\@nleqq");M(U,oe,le,"","\\lneq",!0);M(U,oe,le,"","\\lneqq",!0);M(U,oe,le,"","\\@lvertneqq");M(U,oe,le,"","\\lnsim",!0);M(U,oe,le,"","\\lnapprox",!0);M(U,oe,le,"","\\nprec",!0);M(U,oe,le,"","\\npreceq",!0);M(U,oe,le,"","\\precnsim",!0);M(U,oe,le,"","\\precnapprox",!0);M(U,oe,le,"","\\nsim",!0);M(U,oe,le,"","\\@nshortmid");M(U,oe,le,"","\\nmid",!0);M(U,oe,le,"","\\nvdash",!0);M(U,oe,le,"","\\nvDash",!0);M(U,oe,le,"","\\ntriangleleft");M(U,oe,le,"","\\ntrianglelefteq",!0);M(U,oe,le,"","\\subsetneq",!0);M(U,oe,le,"","\\@varsubsetneq");M(U,oe,le,"","\\subsetneqq",!0);M(U,oe,le,"","\\@varsubsetneqq");M(U,oe,le,"","\\ngtr",!0);M(U,oe,le,"","\\@ngeqslant");M(U,oe,le,"","\\@ngeqq");M(U,oe,le,"","\\gneq",!0);M(U,oe,le,"","\\gneqq",!0);M(U,oe,le,"","\\@gvertneqq");M(U,oe,le,"","\\gnsim",!0);M(U,oe,le,"","\\gnapprox",!0);M(U,oe,le,"","\\nsucc",!0);M(U,oe,le,"","\\nsucceq",!0);M(U,oe,le,"","\\succnsim",!0);M(U,oe,le,"","\\succnapprox",!0);M(U,oe,le,"","\\ncong",!0);M(U,oe,le,"","\\@nshortparallel");M(U,oe,le,"","\\nparallel",!0);M(U,oe,le,"","\\nVDash",!0);M(U,oe,le,"","\\ntriangleright");M(U,oe,le,"","\\ntrianglerighteq",!0);M(U,oe,le,"","\\@nsupseteqq");M(U,oe,le,"","\\supsetneq",!0);M(U,oe,le,"","\\@varsupsetneq");M(U,oe,le,"","\\supsetneqq",!0);M(U,oe,le,"","\\@varsupsetneqq");M(U,oe,le,"","\\nVdash",!0);M(U,oe,le,"","\\precneqq",!0);M(U,oe,le,"","\\succneqq",!0);M(U,oe,le,"","\\@nsubseteqq");M(U,oe,Tt,"","\\unlhd");M(U,oe,Tt,"","\\unrhd");M(U,oe,le,"","\\nleftarrow",!0);M(U,oe,le,"","\\nrightarrow",!0);M(U,oe,le,"","\\nLeftarrow",!0);M(U,oe,le,"","\\nRightarrow",!0);M(U,oe,le,"","\\nleftrightarrow",!0);M(U,oe,le,"","\\nLeftrightarrow",!0);M(U,oe,le,"","\\vartriangle");M(U,oe,ge,"","\\hslash");M(U,oe,ge,"","\\triangledown");M(U,oe,ge,"","\\lozenge");M(U,oe,ge,"","\\circledS");M(U,oe,ge,"","\\circledR");M(at,oe,ge,"","\\circledR");M(U,oe,ge,"","\\measuredangle",!0);M(U,oe,ge,"","\\nexists");M(U,oe,ge,"","\\mho");M(U,oe,ge,"","\\Finv",!0);M(U,oe,ge,"","\\Game",!0);M(U,oe,ge,"","\\backprime");M(U,oe,ge,"","\\blacktriangle");M(U,oe,ge,"","\\blacktriangledown");M(U,oe,ge,"","\\blacksquare");M(U,oe,ge,"","\\blacklozenge");M(U,oe,ge,"","\\bigstar");M(U,oe,ge,"","\\sphericalangle",!0);M(U,oe,ge,"","\\complement",!0);M(U,oe,ge,"","\\eth",!0);M(at,W,ge,"","");M(U,oe,ge,"","\\diagup");M(U,oe,ge,"","\\diagdown");M(U,oe,ge,"","\\square");M(U,oe,ge,"","\\Box");M(U,oe,ge,"","\\Diamond");M(U,oe,ge,"","\\yen",!0);M(at,oe,ge,"","\\yen",!0);M(U,oe,ge,"","\\checkmark",!0);M(at,oe,ge,"","\\checkmark");M(U,oe,ge,"","\\beth",!0);M(U,oe,ge,"","\\daleth",!0);M(U,oe,ge,"","\\gimel",!0);M(U,oe,ge,"","\\digamma",!0);M(U,oe,ge,"","\\varkappa");M(U,oe,Rs,"","\\@ulcorner",!0);M(U,oe,$i,"","\\@urcorner",!0);M(U,oe,Rs,"","\\@llcorner",!0);M(U,oe,$i,"","\\@lrcorner",!0);M(U,oe,le,"","\\leqq",!0);M(U,oe,le,"","\\leqslant",!0);M(U,oe,le,"","\\eqslantless",!0);M(U,oe,le,"","\\lesssim",!0);M(U,oe,le,"","\\lessapprox",!0);M(U,oe,le,"","\\approxeq",!0);M(U,oe,Tt,"","\\lessdot");M(U,oe,le,"","\\lll",!0);M(U,oe,le,"","\\lessgtr",!0);M(U,oe,le,"","\\lesseqgtr",!0);M(U,oe,le,"","\\lesseqqgtr",!0);M(U,oe,le,"","\\doteqdot");M(U,oe,le,"","\\risingdotseq",!0);M(U,oe,le,"","\\fallingdotseq",!0);M(U,oe,le,"","\\backsim",!0);M(U,oe,le,"","\\backsimeq",!0);M(U,oe,le,"","\\subseteqq",!0);M(U,oe,le,"","\\Subset",!0);M(U,oe,le,"","\\sqsubset",!0);M(U,oe,le,"","\\preccurlyeq",!0);M(U,oe,le,"","\\curlyeqprec",!0);M(U,oe,le,"","\\precsim",!0);M(U,oe,le,"","\\precapprox",!0);M(U,oe,le,"","\\vartriangleleft");M(U,oe,le,"","\\trianglelefteq");M(U,oe,le,"","\\vDash",!0);M(U,oe,le,"","\\Vvdash",!0);M(U,oe,le,"","\\smallsmile");M(U,oe,le,"","\\smallfrown");M(U,oe,le,"","\\bumpeq",!0);M(U,oe,le,"","\\Bumpeq",!0);M(U,oe,le,"","\\geqq",!0);M(U,oe,le,"","\\geqslant",!0);M(U,oe,le,"","\\eqslantgtr",!0);M(U,oe,le,"","\\gtrsim",!0);M(U,oe,le,"","\\gtrapprox",!0);M(U,oe,Tt,"","\\gtrdot");M(U,oe,le,"","\\ggg",!0);M(U,oe,le,"","\\gtrless",!0);M(U,oe,le,"","\\gtreqless",!0);M(U,oe,le,"","\\gtreqqless",!0);M(U,oe,le,"","\\eqcirc",!0);M(U,oe,le,"","\\circeq",!0);M(U,oe,le,"","\\triangleq",!0);M(U,oe,le,"","\\thicksim");M(U,oe,le,"","\\thickapprox");M(U,oe,le,"","\\supseteqq",!0);M(U,oe,le,"","\\Supset",!0);M(U,oe,le,"","\\sqsupset",!0);M(U,oe,le,"","\\succcurlyeq",!0);M(U,oe,le,"","\\curlyeqsucc",!0);M(U,oe,le,"","\\succsim",!0);M(U,oe,le,"","\\succapprox",!0);M(U,oe,le,"","\\vartriangleright");M(U,oe,le,"","\\trianglerighteq");M(U,oe,le,"","\\Vdash",!0);M(U,oe,le,"","\\shortmid");M(U,oe,le,"","\\shortparallel");M(U,oe,le,"","\\between",!0);M(U,oe,le,"","\\pitchfork",!0);M(U,oe,le,"","\\varpropto");M(U,oe,le,"","\\blacktriangleleft");M(U,oe,le,"","\\therefore",!0);M(U,oe,le,"","\\backepsilon");M(U,oe,le,"","\\blacktriangleright");M(U,oe,le,"","\\because",!0);M(U,oe,le,"","\\llless");M(U,oe,le,"","\\gggtr");M(U,oe,Tt,"","\\lhd");M(U,oe,Tt,"","\\rhd");M(U,oe,le,"","\\eqsim",!0);M(U,W,le,"","\\Join");M(U,oe,le,"","\\Doteq",!0);M(U,oe,Tt,"","\\dotplus",!0);M(U,oe,Tt,"","\\smallsetminus");M(U,oe,Tt,"","\\Cap",!0);M(U,oe,Tt,"","\\Cup",!0);M(U,oe,Tt,"","\\doublebarwedge",!0);M(U,oe,Tt,"","\\boxminus",!0);M(U,oe,Tt,"","\\boxplus",!0);M(U,oe,Tt,"","\\divideontimes",!0);M(U,oe,Tt,"","\\ltimes",!0);M(U,oe,Tt,"","\\rtimes",!0);M(U,oe,Tt,"","\\leftthreetimes",!0);M(U,oe,Tt,"","\\rightthreetimes",!0);M(U,oe,Tt,"","\\curlywedge",!0);M(U,oe,Tt,"","\\curlyvee",!0);M(U,oe,Tt,"","\\circleddash",!0);M(U,oe,Tt,"","\\circledast",!0);M(U,oe,Tt,"","\\centerdot");M(U,oe,Tt,"","\\intercal",!0);M(U,oe,Tt,"","\\doublecap");M(U,oe,Tt,"","\\doublecup");M(U,oe,Tt,"","\\boxtimes",!0);M(U,oe,le,"","\\dashrightarrow",!0);M(U,oe,le,"","\\dashleftarrow",!0);M(U,oe,le,"","\\leftleftarrows",!0);M(U,oe,le,"","\\leftrightarrows",!0);M(U,oe,le,"","\\Lleftarrow",!0);M(U,oe,le,"","\\twoheadleftarrow",!0);M(U,oe,le,"","\\leftarrowtail",!0);M(U,oe,le,"","\\looparrowleft",!0);M(U,oe,le,"","\\leftrightharpoons",!0);M(U,oe,le,"","\\curvearrowleft",!0);M(U,oe,le,"","\\circlearrowleft",!0);M(U,oe,le,"","\\Lsh",!0);M(U,oe,le,"","\\upuparrows",!0);M(U,oe,le,"","\\upharpoonleft",!0);M(U,oe,le,"","\\downharpoonleft",!0);M(U,W,le,"","\\origof",!0);M(U,W,le,"","\\imageof",!0);M(U,oe,le,"","\\multimap",!0);M(U,oe,le,"","\\leftrightsquigarrow",!0);M(U,oe,le,"","\\rightrightarrows",!0);M(U,oe,le,"","\\rightleftarrows",!0);M(U,oe,le,"","\\twoheadrightarrow",!0);M(U,oe,le,"","\\rightarrowtail",!0);M(U,oe,le,"","\\looparrowright",!0);M(U,oe,le,"","\\curvearrowright",!0);M(U,oe,le,"","\\circlearrowright",!0);M(U,oe,le,"","\\Rsh",!0);M(U,oe,le,"","\\downdownarrows",!0);M(U,oe,le,"","\\upharpoonright",!0);M(U,oe,le,"","\\downharpoonright",!0);M(U,oe,le,"","\\rightsquigarrow",!0);M(U,oe,le,"","\\leadsto");M(U,oe,le,"","\\Rrightarrow",!0);M(U,oe,le,"","\\restriction");M(U,W,ge,"","`");M(U,W,ge,"$","\\$");M(at,W,ge,"$","\\$");M(at,W,ge,"$","\\textdollar");M(U,W,ge,"%","\\%");M(at,W,ge,"%","\\%");M(U,W,ge,"_","\\_");M(at,W,ge,"_","\\_");M(at,W,ge,"_","\\textunderscore");M(U,W,ge,"","\\angle",!0);M(U,W,ge,"","\\infty",!0);M(U,W,ge,"","\\prime");M(U,W,ge,"","\\triangle");M(U,W,ge,"","\\Gamma",!0);M(U,W,ge,"","\\Delta",!0);M(U,W,ge,"","\\Theta",!0);M(U,W,ge,"","\\Lambda",!0);M(U,W,ge,"","\\Xi",!0);M(U,W,ge,"","\\Pi",!0);M(U,W,ge,"","\\Sigma",!0);M(U,W,ge,"","\\Upsilon",!0);M(U,W,ge,"","\\Phi",!0);M(U,W,ge,"","\\Psi",!0);M(U,W,ge,"","\\Omega",!0);M(U,W,ge,"A","");M(U,W,ge,"B","");M(U,W,ge,"E","");M(U,W,ge,"Z","");M(U,W,ge,"H","");M(U,W,ge,"I","");M(U,W,ge,"K","");M(U,W,ge,"M","");M(U,W,ge,"N","");M(U,W,ge,"O","");M(U,W,ge,"P","");M(U,W,ge,"T","");M(U,W,ge,"X","");M(U,W,ge,"","\\neg",!0);M(U,W,ge,"","\\lnot");M(U,W,ge,"","\\top");M(U,W,ge,"","\\bot");M(U,W,ge,"","\\emptyset");M(U,oe,ge,"","\\varnothing");M(U,W,qt,"","\\alpha",!0);M(U,W,qt,"","\\beta",!0);M(U,W,qt,"","\\gamma",!0);M(U,W,qt,"","\\delta",!0);M(U,W,qt,"","\\epsilon",!0);M(U,W,qt,"","\\zeta",!0);M(U,W,qt,"","\\eta",!0);M(U,W,qt,"","\\theta",!0);M(U,W,qt,"","\\iota",!0);M(U,W,qt,"","\\kappa",!0);M(U,W,qt,"","\\lambda",!0);M(U,W,qt,"","\\mu",!0);M(U,W,qt,"","\\nu",!0);M(U,W,qt,"","\\xi",!0);M(U,W,qt,"","\\omicron",!0);M(U,W,qt,"","\\pi",!0);M(U,W,qt,"","\\rho",!0);M(U,W,qt,"","\\sigma",!0);M(U,W,qt,"","\\tau",!0);M(U,W,qt,"","\\upsilon",!0);M(U,W,qt,"","\\phi",!0);M(U,W,qt,"","\\chi",!0);M(U,W,qt,"","\\psi",!0);M(U,W,qt,"","\\omega",!0);M(U,W,qt,"","\\varepsilon",!0);M(U,W,qt,"","\\vartheta",!0);M(U,W,qt,"","\\varpi",!0);M(U,W,qt,"","\\varrho",!0);M(U,W,qt,"","\\varsigma",!0);M(U,W,qt,"","\\varphi",!0);M(U,W,Tt,"","*",!0);M(U,W,Tt,"+","+");M(U,W,Tt,"","-",!0);M(U,W,Tt,"","\\cdot",!0);M(U,W,Tt,"","\\circ",!0);M(U,W,Tt,"","\\div",!0);M(U,W,Tt,"","\\pm",!0);M(U,W,Tt,"","\\times",!0);M(U,W,Tt,"","\\cap",!0);M(U,W,Tt,"","\\cup",!0);M(U,W,Tt,"","\\setminus",!0);M(U,W,Tt,"","\\land");M(U,W,Tt,"","\\lor");M(U,W,Tt,"","\\wedge",!0);M(U,W,Tt,"","\\vee",!0);M(U,W,ge,"","\\surd");M(U,W,Rs,"","\\langle",!0);M(U,W,Rs,"","\\lvert");M(U,W,Rs,"","\\lVert");M(U,W,$i,"?","?");M(U,W,$i,"!","!");M(U,W,$i,"","\\rangle",!0);M(U,W,$i,"","\\rvert");M(U,W,$i,"","\\rVert");M(U,W,le,"=","=");M(U,W,le,":",":");M(U,W,le,"","\\approx",!0);M(U,W,le,"","\\cong",!0);M(U,W,le,"","\\ge");M(U,W,le,"","\\geq",!0);M(U,W,le,"","\\gets");M(U,W,le,">","\\gt",!0);M(U,W,le,"","\\in",!0);M(U,W,le,"","\\@not");M(U,W,le,"","\\subset",!0);M(U,W,le,"","\\supset",!0);M(U,W,le,"","\\subseteq",!0);M(U,W,le,"","\\supseteq",!0);M(U,oe,le,"","\\nsubseteq",!0);M(U,oe,le,"","\\nsupseteq",!0);M(U,W,le,"","\\models");M(U,W,le,"","\\leftarrow",!0);M(U,W,le,"","\\le");M(U,W,le,"","\\leq",!0);M(U,W,le,"<","\\lt",!0);M(U,W,le,"","\\rightarrow",!0);M(U,W,le,"","\\to");M(U,oe,le,"","\\ngeq",!0);M(U,oe,le,"","\\nleq",!0);M(U,W,mc,"","\\ ");M(U,W,mc,"","\\space");M(U,W,mc,"","\\nobreakspace");M(at,W,mc,"","\\ ");M(at,W,mc,""," ");M(at,W,mc,"","\\space");M(at,W,mc,"","\\nobreakspace");M(U,W,mc,null,"\\nobreak");M(U,W,mc,null,"\\allowbreak");M(U,W,q2,",",",");M(U,W,q2,";",";");M(U,oe,Tt,"","\\barwedge",!0);M(U,oe,Tt,"","\\veebar",!0);M(U,W,Tt,"","\\odot",!0);M(U,W,Tt,"","\\oplus",!0);M(U,W,Tt,"","\\otimes",!0);M(U,W,ge,"","\\partial",!0);M(U,W,Tt,"","\\oslash",!0);M(U,oe,Tt,"","\\circledcirc",!0);M(U,oe,Tt,"","\\boxdot",!0);M(U,W,Tt,"","\\bigtriangleup");M(U,W,Tt,"","\\bigtriangledown");M(U,W,Tt,"","\\dagger");M(U,W,Tt,"","\\diamond");M(U,W,Tt,"","\\star");M(U,W,Tt,"","\\triangleleft");M(U,W,Tt,"","\\triangleright");M(U,W,Rs,"{","\\{");M(at,W,ge,"{","\\{");M(at,W,ge,"{","\\textbraceleft");M(U,W,$i,"}","\\}");M(at,W,ge,"}","\\}");M(at,W,ge,"}","\\textbraceright");M(U,W,Rs,"{","\\lbrace");M(U,W,$i,"}","\\rbrace");M(U,W,Rs,"[","\\lbrack",!0);M(at,W,ge,"[","\\lbrack",!0);M(U,W,$i,"]","\\rbrack",!0);M(at,W,ge,"]","\\rbrack",!0);M(U,W,Rs,"(","\\lparen",!0);M(U,W,$i,")","\\rparen",!0);M(at,W,ge,"<","\\textless",!0);M(at,W,ge,">","\\textgreater",!0);M(U,W,Rs,"","\\lfloor",!0);M(U,W,$i,"","\\rfloor",!0);M(U,W,Rs,"","\\lceil",!0);M(U,W,$i,"","\\rceil",!0);M(U,W,ge,"\\","\\backslash");M(U,W,ge,"","|");M(U,W,ge,"","\\vert");M(at,W,ge,"|","\\textbar",!0);M(U,W,ge,"","\\|");M(U,W,ge,"","\\Vert");M(at,W,ge,"","\\textbardbl");M(at,W,ge,"~","\\textasciitilde");M(at,W,ge,"\\","\\textbackslash");M(at,W,ge,"^","\\textasciicircum");M(U,W,le,"","\\uparrow",!0);M(U,W,le,"","\\Uparrow",!0);M(U,W,le,"","\\downarrow",!0);M(U,W,le,"","\\Downarrow",!0);M(U,W,le,"","\\updownarrow",!0);M(U,W,le,"","\\Updownarrow",!0);M(U,W,Ia,"","\\coprod");M(U,W,Ia,"","\\bigvee");M(U,W,Ia,"","\\bigwedge");M(U,W,Ia,"","\\biguplus");M(U,W,Ia,"","\\bigcap");M(U,W,Ia,"","\\bigcup");M(U,W,Ia,"","\\int");M(U,W,Ia,"","\\intop");M(U,W,Ia,"","\\iint");M(U,W,Ia,"","\\iiint");M(U,W,Ia,"","\\prod");M(U,W,Ia,"","\\sum");M(U,W,Ia,"","\\bigotimes");M(U,W,Ia,"","\\bigoplus");M(U,W,Ia,"","\\bigodot");M(U,W,Ia,"","\\oint");M(U,W,Ia,"","\\oiint");M(U,W,Ia,"","\\oiiint");M(U,W,Ia,"","\\bigsqcup");M(U,W,Ia,"","\\smallint");M(at,W,$f,"","\\textellipsis");M(U,W,$f,"","\\mathellipsis");M(at,W,$f,"","\\ldots",!0);M(U,W,$f,"","\\ldots",!0);M(U,W,$f,"","\\@cdots",!0);M(U,W,$f,"","\\ddots",!0);M(U,W,ge,"","\\varvdots");M(at,W,ge,"","\\varvdots");M(U,W,qn,"","\\acute");M(U,W,qn,"","\\grave");M(U,W,qn,"","\\ddot");M(U,W,qn,"~","\\tilde");M(U,W,qn,"","\\bar");M(U,W,qn,"","\\breve");M(U,W,qn,"","\\check");M(U,W,qn,"^","\\hat");M(U,W,qn,"","\\vec");M(U,W,qn,"","\\dot");M(U,W,qn,"","\\mathring");M(U,W,qt,"","\\@imath");M(U,W,qt,"","\\@jmath");M(U,W,ge,"","");M(U,W,ge,"","");M(at,W,ge,"","\\i",!0);M(at,W,ge,"","\\j",!0);M(at,W,ge,"","\\ss",!0);M(at,W,ge,"","\\ae",!0);M(at,W,ge,"","\\oe",!0);M(at,W,ge,"","\\o",!0);M(at,W,ge,"","\\AE",!0);M(at,W,ge,"","\\OE",!0);M(at,W,ge,"","\\O",!0);M(at,W,qn,"","\\'");M(at,W,qn,"","\\`");M(at,W,qn,"","\\^");M(at,W,qn,"","\\~");M(at,W,qn,"","\\=");M(at,W,qn,"","\\u");M(at,W,qn,"","\\.");M(at,W,qn,"","\\c");M(at,W,qn,"","\\r");M(at,W,qn,"","\\v");M(at,W,qn,"",'\\"');M(at,W,qn,"","\\H");M(at,W,qn,"","\\textcircled");var qH={"--":!0,"---":!0,"``":!0,"''":!0};M(at,W,ge,"","--",!0);M(at,W,ge,"","\\textendash");M(at,W,ge,"","---",!0);M(at,W,ge,"","\\textemdash");M(at,W,ge,"","`",!0);M(at,W,ge,"","\\textquoteleft");M(at,W,ge,"","'",!0);M(at,W,ge,"","\\textquoteright");M(at,W,ge,"","``",!0);M(at,W,ge,"","\\textquotedblleft");M(at,W,ge,"","''",!0);M(at,W,ge,"","\\textquotedblright");M(U,W,ge,"","\\degree",!0);M(at,W,ge,"","\\degree");M(at,W,ge,"","\\textdegree",!0);M(U,W,ge,"","\\pounds");M(U,W,ge,"","\\mathsterling",!0);M(at,W,ge,"","\\pounds");M(at,W,ge,"","\\textsterling",!0);M(U,oe,ge,"","\\maltese");M(at,oe,ge,"","\\maltese");var IR='0123456789/@."';for(var p3=0;p3<IR.length;p3++){var RR=IR.charAt(p3);M(U,W,ge,RR,RR)}var MR='0123456789!@*()-=+";:?/.,';for(var m3=0;m3<MR.length;m3++){var PR=MR.charAt(m3);M(at,W,ge,PR,PR)}var Qv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var g3=0;g3<Qv.length;g3++){var vx=Qv.charAt(g3);M(U,W,qt,vx,vx),M(at,W,ge,vx,vx)}M(U,oe,ge,"C","");M(at,oe,ge,"C","");M(U,oe,ge,"H","");M(at,oe,ge,"H","");M(U,oe,ge,"N","");M(at,oe,ge,"N","");M(U,oe,ge,"P","");M(at,oe,ge,"P","");M(U,oe,ge,"Q","");M(at,oe,ge,"Q","");M(U,oe,ge,"R","");M(at,oe,ge,"R","");M(U,oe,ge,"Z","");M(at,oe,ge,"Z","");M(U,W,qt,"h","");M(at,W,qt,"h","");var Zt="";for(var Ii=0;Ii<Qv.length;Ii++){var ta=Qv.charAt(Ii);Zt=String.fromCharCode(55349,56320+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56372+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56424+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56580+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56684+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56736+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56788+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56840+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56944+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Ii<26&&(Zt=String.fromCharCode(55349,56632+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt),Zt=String.fromCharCode(55349,56476+Ii),M(U,W,qt,ta,Zt),M(at,W,ge,ta,Zt))}Zt="";M(U,W,qt,"k",Zt);M(at,W,ge,"k",Zt);for(var yd=0;yd<10;yd++){var Jc=yd.toString();Zt=String.fromCharCode(55349,57294+yd),M(U,W,qt,Jc,Zt),M(at,W,ge,Jc,Zt),Zt=String.fromCharCode(55349,57314+yd),M(U,W,qt,Jc,Zt),M(at,W,ge,Jc,Zt),Zt=String.fromCharCode(55349,57324+yd),M(U,W,qt,Jc,Zt),M(at,W,ge,Jc,Zt),Zt=String.fromCharCode(55349,57334+yd),M(U,W,qt,Jc,Zt),M(at,W,ge,Jc,Zt)}var qT="";for(var y3=0;y3<qT.length;y3++){var bx=qT.charAt(y3);M(U,W,qt,bx,bx),M(at,W,ge,bx,bx)}var wx=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],DR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],eue=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[wx[c][2],wx[c][o]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[DR[d][2],DR[d][o]]}else{if(i===120485||i===120486)return[wx[0][2],wx[0][o]];if(120486<i&&i<120782)return["",""];throw new ut("Unsupported character: "+e)}},H2=function(e,r,n){return Rn[n][e]&&Rn[n][e].replace&&(e=Rn[n][e].replace),{value:e,metrics:aE(e,r,n)}},xo=function(e,r,n,a,i){var o=H2(e,r,n),c=o.metrics;e=o.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new ro(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new ro(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},tue=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&H2(e,"Main-Bold",r).metrics?xo(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||Rn[r][e].font==="main"?xo(e,"Main-Regular",r,n,a):xo(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},rue=function(e,r,n,a,i){return i!=="textord"&&H2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},nue=function(e,r,n){var a=e.mode,i=e.text,o=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=eue(i,a)),h.length>0)return xo(i,h,a,r,o.concat(p));if(d){var m,y;if(d==="boldsymbol"){var x=rue(i,a,r,o,n);m=x.fontName,y=[x.fontClass]}else c?(m=WH[d].fontName,y=[d]):(m=Sx(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(H2(i,m,a).metrics)return xo(i,m,a,r,o.concat(y));if(qH.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var _=[],S=0;S<i.length;S++)_.push(xo(i[S],m,a,r,o.concat(y)));return GH(_)}}if(n==="mathord")return xo(i,"Math-Italic",a,r,o.concat(["mathnormal"]));if(n==="textord"){var w=Rn[a][i]&&Rn[a][i].font;if(w==="ams"){var E=Sx("amsrm",r.fontWeight,r.fontShape);return xo(i,E,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var I=Sx("textrm",r.fontWeight,r.fontShape);return xo(i,I,a,r,o.concat(r.fontWeight,r.fontShape))}else{var R=Sx(w,r.fontWeight,r.fontShape);return xo(i,R,a,r,o.concat(R,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},aue=(t,e)=>{if(Mu(t.classes)!==Mu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},iue=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof ro&&n instanceof ro&&aue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},sE=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},Qi=function(e,r,n,a){var i=new b1(e,r,n,a);return sE(i),i},HH=(t,e,r,n)=>new b1(t,e,r,n),sue=function(e,r,n){var a=Qi([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=yt(a.height),a.maxFontSize=1,a},oue=function(e,r,n,a){var i=new iE(e,r,n,a);return sE(i),i},GH=function(e){var r=new v1(e);return sE(r),r},lue=function(e,r){return e instanceof v1?Qi([],[e],r):e},cue=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,o=1;o<r.length;o++){var c=-r[o].shift-i-r[o].elem.depth,d=c-(r[o-1].elem.height+r[o-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[o])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var y=e.children[m];p-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var x=e.children[0];if(x.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-x.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-x.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},uue=function(e,r){for(var{children:n,depth:a}=cue(e),i=0,o=0;o<n.length;o++){var c=n[o];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=Qi(["pstrut"],[]);h.style.height=yt(i);for(var p=[],m=a,y=a,x=a,_=0;_<n.length;_++){var S=n[_];if(S.type==="kern")x+=S.size;else{var w=S.elem,E=S.wrapperClasses||[],I=S.wrapperStyle||{},R=Qi(E,[h,w],void 0,I);R.style.top=yt(-i-x-w.depth),S.marginLeft&&(R.style.marginLeft=S.marginLeft),S.marginRight&&(R.style.marginRight=S.marginRight),p.push(R),x+=w.height+w.depth}m=Math.min(m,x),y=Math.max(y,x)}var L=Qi(["vlist"],p);L.style.height=yt(y);var C;if(m<0){var O=Qi([],[]),A=Qi(["vlist"],[O]);A.style.height=yt(-m);var j=Qi(["vlist-s"],[new ro("")]);C=[Qi(["vlist-r"],[L,j]),Qi(["vlist-r"],[A])]}else C=[Qi(["vlist-r"],[L])];var k=Qi(["vlist-t"],C);return C.length===2&&k.classes.push("vlist-t2"),k.height=y,k.depth=-m,k},due=(t,e)=>{var r=Qi(["mspace"],[],e),n=Kn(t,e);return r.style.marginRight=yt(n),r},Sx=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},WH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},KH={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},hue=function(e,r){var[n,a,i]=KH[e],o=new Pu(n),c=new ic([o],{width:yt(a),height:yt(i),style:"width:"+yt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=HH(["overlay"],[c],r);return d.height=i,d.style.height=yt(i),d.style.width=yt(a),d},ke={fontMap:WH,makeSymbol:xo,mathsym:tue,makeSpan:Qi,makeSvgSpan:HH,makeLineSpan:sue,makeAnchor:oue,makeFragment:GH,wrapFragment:lue,makeVList:uue,makeOrd:nue,makeGlue:due,staticSvg:hue,svgData:KH,tryCombineChars:iue},Gn={number:3,unit:"mu"},xd={number:4,unit:"mu"},Il={number:5,unit:"mu"},fue={mord:{mop:Gn,mbin:xd,mrel:Il,minner:Gn},mop:{mord:Gn,mop:Gn,mrel:Il,minner:Gn},mbin:{mord:xd,mop:xd,mopen:xd,minner:xd},mrel:{mord:Il,mop:Il,mopen:Il,minner:Il},mopen:{},mclose:{mop:Gn,mbin:xd,mrel:Il,minner:Gn},mpunct:{mord:Gn,mop:Gn,mrel:Il,mopen:Gn,mclose:Gn,mpunct:Gn,minner:Gn},minner:{mord:Gn,mop:Gn,mbin:xd,mrel:Il,mopen:Gn,mpunct:Gn,minner:Gn}},pue={mord:{mop:Gn},mop:{mord:Gn,mop:Gn},mbin:{},mrel:{},mopen:{},mclose:{mop:Gn},mpunct:{},minner:{mop:Gn}},QH={},Xv={},Yv={};function wt(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)QH[r[d]]=c;e&&(i&&(Xv[e]=i),o&&(Yv[e]=o))}function b0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;wt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Zv=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},pa=function(e){return e.type==="ordgroup"?e.body:[e]},sc=ke.makeSpan,mue=["leftmost","mbin","mopen","mrel","mop","mpunct"],gue=["rightmost","mrel","mclose","mpunct"],yue={display:Ht.DISPLAY,text:Ht.TEXT,script:Ht.SCRIPT,scriptscript:Ht.SCRIPTSCRIPT},xue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Va=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],o=0;o<e.length;o++){var c=Lr(e[o],r);if(c instanceof v1){var d=c.children;i.push(...d)}else i.push(c)}if(ke.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(yue[p.style]))}var m=sc([a[0]||"leftmost"],[],r),y=sc([a[1]||"rightmost"],[],r),x=n==="root";return LR(i,(_,S)=>{var w=S.classes[0],E=_.classes[0];w==="mbin"&&gue.includes(E)?S.classes[0]="mord":E==="mbin"&&mue.includes(w)&&(_.classes[0]="mord")},{node:m},y,x),LR(i,(_,S)=>{var w=HT(S),E=HT(_),I=w&&E?_.hasClass("mtight")?pue[w][E]:fue[w][E]:null;if(I)return ke.makeGlue(I,h)},{node:m},y,x),i},LR=function t(e,r,n,a,i){a&&e.push(a);for(var o=0;o<e.length;o++){var c=e[o],d=XH(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),o++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=sc(["leftmost"])),n.insertAfter=(m=>y=>{e.splice(m+1,0,y),o++})(o)}a&&e.pop()},XH=function(e){return e instanceof v1||e instanceof iE||e instanceof b1&&e.hasClass("enclosing")?e:null},vue=function t(e,r){var n=XH(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},HT=function(e,r){return e?(r&&(e=vue(e,r)),xue[e.classes[0]]||null):null},og=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return sc(r.concat(n))},Lr=function(e,r,n){if(!e)return sc();if(Xv[e.type]){var a=Xv[e.type](e,r);if(n&&r.size!==n.size){a=sc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new ut("Got group of unknown type: '"+e.type+"'")};function _x(t,e){var r=sc(["base"],t,e),n=sc(["strut"]);return n.style.height=yt(r.height+r.depth),r.depth&&(n.style.verticalAlign=yt(-r.depth)),r.children.unshift(n),r}function GT(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Va(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],o=[],c=0;c<n.length;c++)if(o.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,o.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(_x(o,e)),o=[])}else n[c].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(_x(o,e)),o=[]),i.push(n[c]));o.length>0&&i.push(_x(o,e));var h;r?(h=_x(Va(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=sc(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=yt(p.height+p.depth),p.depth&&(m.style.verticalAlign=yt(-p.depth))}return p}function YH(t){return new v1(t)}class Ns{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Mu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Wo&&this.children[n+1]instanceof Wo){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Wo;)a+=this.children[++n].toText();e.appendChild(new Wo(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Hr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Hr.escape(Mu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Wo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Hr.escape(this.toText())}toText(){return this.text}}class bue{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",yt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+yt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var ct={MathNode:Ns,TextNode:Wo,SpaceNode:bue,newDocumentFragment:YH},no=function(e,r,n){return Rn[r][e]&&Rn[r][e].replace&&e.charCodeAt(0)!==55349&&!(qH.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Rn[r][e].replace),new ct.TextNode(e)},oE=function(e){return e.length===1?e[0]:new ct.MathNode("mrow",e)},lE=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;Rn[a][i]&&Rn[a][i].replace&&(i=Rn[a][i].replace);var o=ke.fontMap[n].fontName;return aE(i,o,a)?ke.fontMap[n].variant:null};function x3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Wo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Wo&&r.text===","}else return!1}var os=function(e,r,n){if(e.length===1){var a=En(e[0],r);return n&&a instanceof Ns&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],o,c=0;c<e.length;c++){var d=En(e[c],r);if(d instanceof Ns&&o instanceof Ns){if(d.type==="mtext"&&o.type==="mtext"&&d.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...d.children);continue}else if(d.type==="mn"&&o.type==="mn"){o.children.push(...d.children);continue}else if(x3(d)&&o.type==="mn"){o.children.push(...d.children);continue}else if(d.type==="mn"&&x3(o))d.children=[...o.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(o.type==="mn"||x3(o))){var h=d.children[0];h instanceof Ns&&h.type==="mn"&&(h.children=[...o.children,...h.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var p=o.children[0];if(p instanceof Wo&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof Wo&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),o=d}return i},Du=function(e,r,n){return oE(os(e,r,n))},En=function(e,r){if(!e)return new ct.MathNode("mrow");if(Yv[e.type]){var n=Yv[e.type](e,r);return n}else throw new ut("Got group of unknown type: '"+e.type+"'")};function BR(t,e,r,n,a){var i=os(t,r),o;i.length===1&&i[0]instanceof Ns&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new ct.MathNode("mrow",i);var c=new ct.MathNode("annotation",[new ct.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new ct.MathNode("semantics",[o,c]),h=new ct.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return ke.makeSpan([p],[h])}var ZH=function(e){return new Dl({style:e.displayMode?Ht.DISPLAY:Ht.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},JH=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=ke.makeSpan(n,[e])}return e},wue=function(e,r,n){var a=ZH(n),i;if(n.output==="mathml")return BR(e,r,a,n.displayMode,!0);if(n.output==="html"){var o=GT(e,a);i=ke.makeSpan(["katex"],[o])}else{var c=BR(e,r,a,n.displayMode,!1),d=GT(e,a);i=ke.makeSpan(["katex"],[c,d])}return JH(i,n)},Sue=function(e,r,n){var a=ZH(n),i=GT(e,a),o=ke.makeSpan(["katex"],[i]);return JH(o,n)},_ue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Nue=function(e){var r=new ct.MathNode("mo",[new ct.TextNode(_ue[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Tue={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Aue=function(e){return e.type==="ordgroup"?e.body.length:1},jue=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=Aue(h.base),m,y,x;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,x=.42,y=d+"4"):(m=312,c=2340,x=.34,y="tilde4");else{var _=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][_],m=[0,239,300,360,420][_],x=[0,.24,.3,.3,.36,.42][_],y=d+_):(c=[0,600,1033,2339,2340][_],m=[0,260,286,306,312][_],x=[0,.26,.286,.3,.306,.34][_],y="tilde"+_)}var S=new Pu(y),w=new ic([S],{width:"100%",height:yt(x),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:ke.makeSvgSpan([],[w],r),minWidth:0,height:x}}else{var E=[],I=Tue[d],[R,L,C]=I,O=C/1e3,A=R.length,j,k;if(A===1){var z=I[3];j=["hide-tail"],k=[z]}else if(A===2)j=["halfarrow-left","halfarrow-right"],k=["xMinYMin","xMaxYMin"];else if(A===3)j=["brace-left","brace-center","brace-right"],k=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+A+" children.");for(var D=0;D<A;D++){var $=new Pu(R[D]),B=new ic([$],{width:"400em",height:yt(O),viewBox:"0 0 "+c+" "+C,preserveAspectRatio:k[D]+" slice"}),G=ke.makeSvgSpan([j[D]],[B],r);if(A===1)return{span:G,minWidth:L,height:O};G.style.height=yt(O),E.push(G)}return{span:ke.makeSpan(["stretchy"],E,r),minWidth:L,height:O}}}var{span:a,minWidth:i,height:o}=n();return a.height=o,a.style.height=yt(o),i>0&&(a.style.minWidth=yt(i)),a},Eue=function(e,r,n,a,i){var o,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(o=ke.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(o.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new FT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new FT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new ic(h,{width:"100%",height:yt(c)});o=ke.makeSvgSpan([],[p],i)}return o.height=c,o.style.height=yt(c),o},oc={encloseSpan:Eue,mathMLnode:Nue,svgSpan:jue};function mr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function cE(t){var e=G2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function G2(t){return t&&(t.type==="atom"||Jce.hasOwnProperty(t.type))?t:null}var uE=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=mr(t.base,"accent"),r=n.base,t.base=r,a=Yce(Lr(t,e)),t.base=n):(n=mr(t,"accent"),r=n.base);var i=Lr(r,e.havingCrampedStyle()),o=n.isShifty&&Hr.isCharacterBox(r),c=0;if(o){var d=Hr.getBaseElem(r),h=Lr(d,e.havingCrampedStyle());c=OR(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=oc.svgSpan(n,e),y=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+yt(2*c)+")",marginLeft:yt(2*c)}:void 0}]},e);else{var x,_;n.label==="\\vec"?(x=ke.staticSvg("vec",e),_=ke.svgData.vec[1]):(x=ke.makeOrd({mode:n.mode,text:n.label},e,"textord"),x=OR(x),x.italic=0,_=x.width,p&&(m+=x.depth)),y=ke.makeSpan(["accent-body"],[x]);var S=n.label==="\\textcircled";S&&(y.classes.push("accent-full"),m=i.height);var w=c;S||(w-=_/2),y.style.left=yt(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:y}]},e)}var E=ke.makeSpan(["mord","accent"],[y],e);return a?(a.children[0]=E,a.height=Math.max(E.height,a.height),a.classes[0]="mord",a):E},eG=(t,e)=>{var r=t.isStretchy?oc.mathMLnode(t.label):new ct.MathNode("mo",[no(t.label,t.mode)]),n=new ct.MathNode("mover",[En(t.base,e),r]);return n.setAttribute("accent","true"),n},kue=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));wt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Zv(e[0]),n=!kue.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:uE,mathmlBuilder:eG});wt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:uE,mathmlBuilder:eG});wt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=Lr(t.base,e),n=oc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=ke.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return ke.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=oc.mathMLnode(t.label),n=new ct.MathNode("munder",[En(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var Nx=t=>{var e=new ct.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};wt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=ke.wrapFragment(Lr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=ke.wrapFragment(Lr(t.below,n,e),e),o.classes.push(i+"-arrow-pad"));var c=oc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(o){var m=-e.fontMetrics().axisHeight+o.height+.5*c.height+.111;p=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:o,shift:m}]},e)}else p=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),ke.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=oc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=Nx(En(t.body,e));if(t.below){var i=Nx(En(t.below,e));n=new ct.MathNode("munderover",[r,i,a])}else n=new ct.MathNode("mover",[r,a])}else if(t.below){var o=Nx(En(t.below,e));n=new ct.MathNode("munder",[r,o])}else n=Nx(),n=new ct.MathNode("mover",[r,n]);return n}});var Cue=ke.makeSpan;function tG(t,e){var r=Va(t.body,e,!0);return Cue([t.mclass],r,e)}function rG(t,e){var r,n=os(t.body,e);return t.mclass==="minner"?r=new ct.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new ct.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new ct.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}wt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:pa(a),isCharacterBox:Hr.isCharacterBox(a)}},htmlBuilder:tG,mathmlBuilder:rG});var W2=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};wt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:W2(e[0]),body:pa(e[1]),isCharacterBox:Hr.isCharacterBox(e[1])}}});wt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],o;n!=="\\stackrel"?o=W2(a):o="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:pa(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[d],isCharacterBox:Hr.isCharacterBox(d)}},htmlBuilder:tG,mathmlBuilder:rG});wt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:W2(e[0]),body:pa(e[0])}},htmlBuilder(t,e){var r=Va(t.body,e,!0),n=ke.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=os(t.body,e),n=new ct.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Oue={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},$R=()=>({type:"styling",body:[],mode:"math",style:"display"}),UR=t=>t.type==="textord"&&t.text==="@",Iue=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Rue(t,e,r){var n=Oue[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,o,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Mue(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ut("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var o=e[i],c=$R(),d=0;d<o.length;d++)if(!UR(o[d]))c.body.push(o[d]);else{n.push(c),d+=1;var h=cE(o[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var y=!0,x=d+1;x<o.length;x++){if(Iue(o[x],h)){y=!1,d=x;break}if(UR(o[x]))throw new ut("Missing a "+h+" character to complete a CD arrow.",o[x]);p[m].body.push(o[x])}if(y)throw new ut("Missing a "+h+" character to complete a CD arrow.",o[d])}else throw new ut('Expected one of "<>AV=|." after @',o[d]);var _=Rue(h,p,t),S={type:"styling",body:[_],mode:"math",style:"display"};n.push(S),c=$R()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}wt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=ke.wrapFragment(Lr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=yt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new ct.MathNode("mrow",[En(t.label,e)]);return r=new ct.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new ct.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});wt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=ke.wrapFragment(Lr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new ct.MathNode("mrow",[En(t.fragment,e)])}});wt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=mr(e[0],"ordgroup"),a=n.body,i="",o=0;o<a.length;o++){var c=mr(a[o],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new ut("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new ut("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var nG=(t,e)=>{var r=Va(t.body,e.withColor(t.color),!1);return ke.makeFragment(r)},aG=(t,e)=>{var r=os(t.body,e.withColor(t.color)),n=new ct.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};wt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=mr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:pa(a)}},htmlBuilder:nG,mathmlBuilder:aG});wt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=mr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:nG,mathmlBuilder:aG});wt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&mr(a,"size").value}},htmlBuilder(t,e){var r=ke.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=yt(Kn(t.size,e)))),r},mathmlBuilder(t,e){var r=new ct.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",yt(Kn(t.size,e)))),r}});var WT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},iG=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ut("Expected a control sequence",t);return e},Pue=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},sG=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};wt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(WT[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=WT[n.text]),mr(e.parseFunction(),"internal");throw new ut("Invalid token after macro prefix",n)}});wt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ut("Expected a control sequence",n);for(var i=0,o,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ut('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new ut('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new ut("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return o&&d.unshift(o),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===WT[r]),{type:"internal",mode:e.mode}}});wt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=iG(e.gullet.popToken());e.gullet.consumeSpaces();var a=Pue(e);return sG(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});wt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=iG(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return sG(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var fm=function(e,r,n){var a=Rn.math[e]&&Rn.math[e].replace,i=aE(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},dE=function(e,r,n,a){var i=n.havingBaseStyle(r),o=ke.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return o.height*=c,o.depth*=c,o.maxFontSize=i.sizeMultiplier,o},oG=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=yt(i),e.height-=i,e.depth+=i},Due=function(e,r,n,a,i,o){var c=ke.makeSymbol(e,"Main-Regular",i,a),d=dE(c,r,a,o);return n&&oG(d,a,r),d},Lue=function(e,r,n,a){return ke.makeSymbol(e,"Size"+r+"-Regular",n,a)},lG=function(e,r,n,a,i,o){var c=Lue(e,r,i,a),d=dE(ke.makeSpan(["delimsizing","size"+r],[c],a),Ht.TEXT,a,o);return n&&oG(d,a,Ht.TEXT),d},v3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=ke.makeSpan(["delimsizinginner",a],[ke.makeSpan([],[ke.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},b3=function(e,r,n){var a=Go["Size4-Regular"][e.charCodeAt(0)]?Go["Size4-Regular"][e.charCodeAt(0)][4]:Go["Size1-Regular"][e.charCodeAt(0)][4],i=new Pu("inner",Vce(e,Math.round(1e3*r))),o=new ic([i],{width:yt(a),height:yt(r),style:"width:"+yt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=ke.makeSvgSpan([],[o],n);return c.height=r,c.style.height=yt(r),c.style.width=yt(a),{type:"elem",elem:c}},KT=.008,Tx={type:"kern",size:-1*KT},Bue=["|","\\lvert","\\rvert","\\vert"],$ue=["\\|","\\lVert","\\rVert","\\Vert"],cG=function(e,r,n,a,i,o){var c,d,h,p,m="",y=0;c=h=p=e,d=null;var x="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):Bue.includes(e)?(h="",m="vert",y=333):$ue.includes(e)?(h="",m="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",h="",p="",x="Size4-Regular",m="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",x="Size4-Regular",m="rbrack",y=667):e==="\\lfloor"||e===""?(h=c="",p="",x="Size4-Regular",m="lfloor",y=667):e==="\\lceil"||e===""?(c="",h=p="",x="Size4-Regular",m="lceil",y=667):e==="\\rfloor"||e===""?(h=c="",p="",x="Size4-Regular",m="rfloor",y=667):e==="\\rceil"||e===""?(c="",h=p="",x="Size4-Regular",m="rceil",y=667):e==="("||e==="\\lparen"?(c="",h="",p="",x="Size4-Regular",m="lparen",y=875):e===")"||e==="\\rparen"?(c="",h="",p="",x="Size4-Regular",m="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",x="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",x="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",x="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",x="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",x="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",x="Size4-Regular");var _=fm(c,x,i),S=_.height+_.depth,w=fm(h,x,i),E=w.height+w.depth,I=fm(p,x,i),R=I.height+I.depth,L=0,C=1;if(d!==null){var O=fm(d,x,i);L=O.height+O.depth,C=2}var A=S+R+L,j=Math.max(0,Math.ceil((r-A)/(C*E))),k=A+j*C*E,z=a.fontMetrics().axisHeight;n&&(z*=a.sizeMultiplier);var D=k/2-z,$=[];if(m.length>0){var B=k-S-R,G=Math.round(k*1e3),K=Fce(m,Math.round(B*1e3)),H=new Pu(m,K),J=(y/1e3).toFixed(3)+"em",ae=(G/1e3).toFixed(3)+"em",he=new ic([H],{width:J,height:ae,viewBox:"0 0 "+y+" "+G}),fe=ke.makeSvgSpan([],[he],a);fe.height=G/1e3,fe.style.width=J,fe.style.height=ae,$.push({type:"elem",elem:fe})}else{if($.push(v3(p,x,i)),$.push(Tx),d===null){var Y=k-S-R+2*KT;$.push(b3(h,Y,a))}else{var ne=(k-S-R-L)/2+2*KT;$.push(b3(h,ne,a)),$.push(Tx),$.push(v3(d,x,i)),$.push(Tx),$.push(b3(h,ne,a))}$.push(Tx),$.push(v3(c,x,i))}var re=a.havingBaseStyle(Ht.TEXT),ye=ke.makeVList({positionType:"bottom",positionData:D,children:$},re);return dE(ke.makeSpan(["delimsizing","mult"],[ye],re),Ht.TEXT,a,o)},w3=80,S3=.08,_3=function(e,r,n,a,i){var o=zce(e,a,n),c=new Pu(e,o),d=new ic([c],{width:"400em",height:yt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return ke.makeSvgSpan(["hide-tail"],[d],i)},Uue=function(e,r){var n=r.havingBaseSizing(),a=fG("\\surd",e*n.sizeMultiplier,hG,n),i=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*o+w3,e<1?i=1:e<1.4&&(i=.7),d=(1+o+S3)/i,h=(1+o)/i,c=_3("sqrtMain",d,p,o,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+w3)*jm[a.size],h=(jm[a.size]+o)/i,d=(jm[a.size]+o+S3)/i,c=_3("sqrtSize"+a.size,d,p,o,r),c.style.minWidth="1.02em",m=1/i):(d=e+o+S3,h=e+o,p=Math.floor(1e3*e+o)+w3,c=_3("sqrtTall",d,p,o,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=yt(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},uG=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],zue=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],dG=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],jm=[0,1.2,1.8,2.4,3],Vue=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),uG.includes(e)||dG.includes(e))return lG(e,r,!1,n,a,i);if(zue.includes(e))return cG(e,jm[r],!1,n,a,i);throw new ut("Illegal delimiter: '"+e+"'")},Fue=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],que=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"stack"}],hG=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Hue=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},fG=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),o=i;o<n.length&&n[o].type!=="stack";o++){var c=fm(e,Hue(n[o]),"math"),d=c.height+c.depth;if(n[o].type==="small"){var h=a.havingBaseStyle(n[o].style);d*=h.sizeMultiplier}if(d>r)return n[o]}return n[n.length-1]},pG=function(e,r,n,a,i,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;dG.includes(e)?c=Fue:uG.includes(e)?c=hG:c=que;var d=fG(e,r,c,a);return d.type==="small"?Due(e,d.style,n,a,i,o):d.type==="large"?lG(e,d.size,n,a,i,o):cG(e,r,n,a,i,o)},Gue=function(e,r,n,a,i,o){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return pG(e,m,!0,a,i,o)},Xl={sqrtImage:Uue,sizedDelim:Vue,sizeToMaxHeight:jm,customSizedDelim:pG,leftRightDelim:Gue},zR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Wue=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function K2(t,e){var r=G2(t);if(r&&Wue.includes(r.text))return r;throw r?new ut("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ut("Invalid delimiter type '"+t.type+"'",t)}wt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=K2(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:zR[t.funcName].size,mclass:zR[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?ke.makeSpan([t.mclass]):Xl.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(no(t.delim,t.mode));var r=new ct.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=yt(Xl.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function VR(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}wt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ut("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:K2(e[0],t).text,color:r}}});wt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=K2(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=mr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{VR(t);for(var r=Va(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(n=Math.max(r[o].height,n),a=Math.max(r[o].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=og(e,["mopen"]):c=Xl.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=Xl.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=og(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;m=Xl.leftRightDelim(t.right,n,a,y,t.mode,["mclose"])}return r.push(m),ke.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{VR(t);var r=os(t.body,e);if(t.left!=="."){var n=new ct.MathNode("mo",[no(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new ct.MathNode("mo",[no(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return oE(r)}});wt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=K2(e[0],t);if(!t.parser.leftrightDepth)throw new ut("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=og(e,[]);else{r=Xl.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?no("|","text"):no(t.delim,t.mode),n=new ct.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var hE=(t,e)=>{var r=ke.wrapFragment(Lr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,o=0,c=Hr.isCharacterBox(t.body);if(n==="sout")i=ke.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=Kn({number:.6,unit:"pt"},e),h=Kn({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=yt(m/2+d);var y=Math.floor(1e3*m*a),x=$ce(y),_=new ic([new Pu("phase",x)],{width:"400em",height:yt(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});i=ke.makeSvgSpan(["hide-tail"],[_],e),i.style.height=yt(m),o=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var S=0,w=0,E=0;/box/.test(n)?(E=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(n==="colorbox"?0:E),w=S):n==="angl"?(E=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*E,w=Math.max(0,.25-r.depth)):(S=c?.2:0,w=S),i=oc.encloseSpan(r,n,S,w,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=yt(E)):n==="angl"&&E!==.049&&(i.style.borderTopWidth=yt(E),i.style.borderRightWidth=yt(E)),o=r.depth+w,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var I;if(t.backgroundColor)I=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var R=/cancel|phase/.test(n)?["svg-align"]:[];I=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:R}]},e)}return/cancel/.test(n)&&(I.height=r.height,I.depth=r.depth),/cancel/.test(n)&&!c?ke.makeSpan(["mord","cancel-lap"],[I],e):ke.makeSpan(["mord"],[I],e)},fE=(t,e)=>{var r=0,n=new ct.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[En(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};wt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=mr(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:hE,mathmlBuilder:fE});wt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=mr(e[0],"color-token").color,o=mr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:c}},htmlBuilder:hE,mathmlBuilder:fE});wt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});wt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:hE,mathmlBuilder:fE});wt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var mG={};function sl(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)mG[r[d]]=c;i&&(Xv[e]=i),o&&(Yv[e]=o)}var gG={};function Z(t,e){gG[t]=e}function FR(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var Q2=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ut("{"+t.envName+"} can be used only in display mode.")};function pE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Vu(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:o,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:y}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var x=t.gullet.expandMacroAsText("\\arraystretch");if(x==null)o=1;else if(o=parseFloat(x),!o||o<0)throw new ut("Invalid \\arraystretch: "+x)}t.gullet.beginGroup();var _=[],S=[_],w=[],E=[],I=d!=null?[]:void 0;function R(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){I&&(t.gullet.macros.get("\\df@tag")?(I.push(t.subparse([new ks("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):I.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(R(),E.push(FR(t));;){var C=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),C={type:"ordgroup",mode:t.mode,body:C},r&&(C={type:"styling",mode:t.mode,style:r,body:[C]}),_.push(C);var O=t.fetch().text;if(O==="&"){if(m&&_.length===m){if(h||c)throw new ut("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(O==="\\end"){L(),_.length===1&&C.type==="styling"&&C.body[0].body.length===0&&(S.length>1||!p)&&S.pop(),E.length<S.length+1&&E.push([]);break}else if(O==="\\\\"){t.consume();var A=void 0;t.gullet.future().text!==" "&&(A=t.parseSizeGroup(!0)),w.push(A?A.value:null),L(),E.push(FR(t)),_=[],S.push(_),R()}else throw new ut("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:o,body:S,cols:i,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:E,colSeparationType:c,tags:I,leqno:y}}function mE(t){return t.slice(0,1)==="d"?"display":"text"}var ol=function(e,r){var n,a,i=e.body.length,o=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,y=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var x=r.havingStyle(Ht.SCRIPT).sizeMultiplier;y=.2778*(x/r.sizeMultiplier)}var _=e.colSeparationType==="CD"?Kn({number:3,unit:"ex"},r):12*m,S=3*m,w=e.arraystretch*_,E=.7*w,I=.3*w,R=0;function L(Me){for(var lt=0;lt<Me.length;++lt)lt>0&&(R+=.25),h.push({pos:R,isDashed:Me[lt]})}for(L(o[0]),n=0;n<e.body.length;++n){var C=e.body[n],O=E,A=I;c<C.length&&(c=C.length);var j=new Array(C.length);for(a=0;a<C.length;++a){var k=Lr(C[a],r);A<k.depth&&(A=k.depth),O<k.height&&(O=k.height),j[a]=k}var z=e.rowGaps[n],D=0;z&&(D=Kn(z,r),D>0&&(D+=I,A<D&&(A=D),D=0)),e.addJot&&(A+=S),j.height=O,j.depth=A,R+=O,j.pos=R,R+=A+D,d[n]=j,L(o[n+1])}var $=R/2+r.fontMetrics().axisHeight,B=e.cols||[],G=[],K,H,J=[];if(e.tags&&e.tags.some(Me=>Me))for(n=0;n<i;++n){var ae=d[n],he=ae.pos-$,fe=e.tags[n],Y=void 0;fe===!0?Y=ke.makeSpan(["eqn-num"],[],r):fe===!1?Y=ke.makeSpan([],[],r):Y=ke.makeSpan([],Va(fe,r,!0),r),Y.depth=ae.depth,Y.height=ae.height,J.push({type:"elem",elem:Y,shift:he})}for(a=0,H=0;a<c||H<B.length;++a,++H){for(var ne=B[H]||{},re=!0;ne.type==="separator";){if(re||(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=yt(r.fontMetrics().doubleRuleSep),G.push(K)),ne.separator==="|"||ne.separator===":"){var ye=ne.separator==="|"?"solid":"dashed",Te=ke.makeSpan(["vertical-separator"],[],r);Te.style.height=yt(R),Te.style.borderRightWidth=yt(p),Te.style.borderRightStyle=ye,Te.style.margin="0 "+yt(-p/2);var Ve=R-$;Ve&&(Te.style.verticalAlign=yt(-Ve)),G.push(Te)}else throw new ut("Invalid separator type: "+ne.separator);H++,ne=B[H]||{},re=!1}if(!(a>=c)){var Je=void 0;(a>0||e.hskipBeforeAndAfter)&&(Je=Hr.deflt(ne.pregap,y),Je!==0&&(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=yt(Je),G.push(K)));var Xe=[];for(n=0;n<i;++n){var ie=d[n],Be=ie[a];if(Be){var Q=ie.pos-$;Be.depth=ie.depth,Be.height=ie.height,Xe.push({type:"elem",elem:Be,shift:Q})}}Xe=ke.makeVList({positionType:"individualShift",children:Xe},r),Xe=ke.makeSpan(["col-align-"+(ne.align||"c")],[Xe]),G.push(Xe),(a<c-1||e.hskipBeforeAndAfter)&&(Je=Hr.deflt(ne.postgap,y),Je!==0&&(K=ke.makeSpan(["arraycolsep"],[]),K.style.width=yt(Je),G.push(K)))}}if(d=ke.makeSpan(["mtable"],G),h.length>0){for(var te=ke.makeLineSpan("hline",r,p),_e=ke.makeLineSpan("hdashline",r,p),Se=[{type:"elem",elem:d,shift:0}];h.length>0;){var Qe=h.pop(),nt=Qe.pos-$;Qe.isDashed?Se.push({type:"elem",elem:_e,shift:nt}):Se.push({type:"elem",elem:te,shift:nt})}d=ke.makeVList({positionType:"individualShift",children:Se},r)}if(J.length===0)return ke.makeSpan(["mord"],[d],r);var Ot=ke.makeVList({positionType:"individualShift",children:J},r);return Ot=ke.makeSpan(["tag"],[Ot],r),ke.makeFragment([d,Ot])},Kue={c:"center ",l:"left ",r:"right "},ll=function(e,r){for(var n=[],a=new ct.MathNode("mtd",[],["mtr-glue"]),i=new ct.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var c=e.body[o],d=[],h=0;h<c.length;h++)d.push(new ct.MathNode("mtd",[En(c[h],r)]));e.tags&&e.tags[o]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new ct.MathNode("mtr",d))}var p=new ct.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",yt(m));var y="",x="";if(e.cols&&e.cols.length>0){var _=e.cols,S="",w=!1,E=0,I=_.length;_[0].type==="separator"&&(y+="top ",E=1),_[_.length-1].type==="separator"&&(y+="bottom ",I-=1);for(var R=E;R<I;R++)_[R].type==="align"?(x+=Kue[_[R].align],w&&(S+="none "),w=!0):_[R].type==="separator"&&w&&(S+=_[R].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",x.trim()),/[sd]/.test(S)&&p.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],C="",O=1;O<L.length;O++)C+=O%2?"0em ":"1em ";p.setAttribute("columnspacing",C.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var A="",j=e.hLinesBeforeRow;y+=j[0].length>0?"left ":"",y+=j[j.length-1].length>0?"right ":"";for(var k=1;k<j.length-1;k++)A+=j[k].length===0?"none ":j[k][0]?"dashed ":"solid ";return/[sd]/.test(A)&&p.setAttribute("rowlines",A.trim()),y!==""&&(p=new ct.MathNode("menclose",[p]),p.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(p=new ct.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},yG=function(e,r){e.envName.indexOf("ed")===-1&&Q2(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",o=Vu(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:pE(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var y=mr(r[0].body[m],"textord");p+=y.text}c=Number(p),d=c*2}var x=!d;o.body.forEach(function(E){for(var I=1;I<E.length;I+=2){var R=mr(E[I],"styling"),L=mr(R.body[0],"ordgroup");L.body.unshift(h)}if(x)d<E.length&&(d=E.length);else{var C=E.length/2;if(c<C)throw new ut("Too many math in a row: "+("expected "+c+", but got "+C),E[0])}});for(var _=0;_<d;++_){var S="r",w=0;_%2===1?S="l":_>0&&x&&(w=1),n[_]={type:"align",align:S,pregap:w,postgap:0}}return o.colSeparationType=x?"align":"alignat",o};sl({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=G2(e[0]),n=r?[e[0]]:mr(e[0],"ordgroup").body,a=n.map(function(o){var c=cE(o),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ut("Unknown column alignment: "+d,o)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Vu(t.parser,i,mE(t.envName))},htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ut("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Vu(t.parser,n,mE(t.envName)),o=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Vu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=G2(e[0]),n=r?[e[0]]:mr(e[0],"ordgroup").body,a=n.map(function(o){var c=cE(o),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ut("Unknown column alignment: "+d,o)});if(a.length>1)throw new ut("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Vu(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new ut("{subarray} can contain only one column");return i},htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Vu(t.parser,e,mE(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:yG,htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&Q2(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:pE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Vu(t.parser,e,"display")},htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:yG,htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Q2(t);var e={autoTag:pE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Vu(t.parser,e,"display")},htmlBuilder:ol,mathmlBuilder:ll});sl({type:"array",names:["CD"],props:{numArgs:0},handler(t){return Q2(t),Mue(t.parser)},htmlBuilder:ol,mathmlBuilder:ll});Z("\\nonumber","\\gdef\\@eqnsw{0}");Z("\\notag","\\nonumber");wt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ut(t.funcName+" valid only within array environment")}});var qR=mG;wt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ut("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=mr(a.body[o],"textord").text;if(n==="\\begin"){if(!qR.hasOwnProperty(i))throw new ut("No such environment: "+i,a);var c=qR[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var y=r.nextToken,x=mr(r.parseFunction(),"environment");if(x.name!==i)throw new ut("Mismatch: \\begin{"+i+"} matched by \\end{"+x.name+"}",y);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var xG=(t,e)=>{var r=t.font,n=e.withFont(r);return Lr(t.body,n)},vG=(t,e)=>{var r=t.font,n=e.withFont(r);return En(t.body,n)},HR={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};wt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=Zv(e[0]),i=n;return i in HR&&(i=HR[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:xG,mathmlBuilder:vG});wt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Hr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:W2(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});wt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,o=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:xG,mathmlBuilder:vG});var bG=(t,e)=>{var r=e;return t==="display"?r=r.id>=Ht.SCRIPT.id?r.text():Ht.DISPLAY:t==="text"&&r.size===Ht.DISPLAY.size?r=Ht.TEXT:t==="script"?r=Ht.SCRIPT:t==="scriptscript"&&(r=Ht.SCRIPTSCRIPT),r},gE=(t,e)=>{var r=bG(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var o=Lr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;o.height=o.height<c?c:o.height,o.depth=o.depth<d?d:o.depth}i=e.havingStyle(a);var h=Lr(t.denom,i,e),p,m,y;t.hasBarLine?(t.barSize?(m=Kn(t.barSize,e),p=ke.makeLineSpan("frac-line",e,m)):p=ke.makeLineSpan("frac-line",e),m=p.height,y=p.height):(p=null,m=0,y=e.fontMetrics().defaultRuleThickness);var x,_,S;r.size===Ht.DISPLAY.size||t.size==="display"?(x=e.fontMetrics().num1,m>0?_=3*y:_=7*y,S=e.fontMetrics().denom1):(m>0?(x=e.fontMetrics().num2,_=y):(x=e.fontMetrics().num3,_=3*y),S=e.fontMetrics().denom2);var w;if(p){var I=e.fontMetrics().axisHeight;x-o.depth-(I+.5*m)<_&&(x+=_-(x-o.depth-(I+.5*m))),I-.5*m-(h.height-S)<_&&(S+=_-(I-.5*m-(h.height-S)));var R=-(I-.5*m);w=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:p,shift:R},{type:"elem",elem:o,shift:-x}]},e)}else{var E=x-o.depth-(h.height-S);E<_&&(x+=.5*(_-E),S+=.5*(_-E)),w=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:o,shift:-x}]},e)}i=e.havingStyle(r),w.height*=i.sizeMultiplier/e.sizeMultiplier,w.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===Ht.DISPLAY.size?L=e.fontMetrics().delim1:r.size===Ht.SCRIPTSCRIPT.size?L=e.havingStyle(Ht.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var C,O;return t.leftDelim==null?C=og(e,["mopen"]):C=Xl.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?O=ke.makeSpan([]):t.rightDelim==null?O=og(e,["mclose"]):O=Xl.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),ke.makeSpan(["mord"].concat(i.sizingClasses(e)),[C,ke.makeSpan(["mfrac"],[w]),O],e)},yE=(t,e)=>{var r=new ct.MathNode("mfrac",[En(t.numer,e),En(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=Kn(t.barSize,e);r.setAttribute("linethickness",yt(n))}var a=bG(t.size,e.style);if(a.size!==e.style.size){r=new ct.MathNode("mstyle",[r]);var i=a.size===Ht.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var c=new ct.MathNode("mo",[new ct.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}if(o.push(r),t.rightDelim!=null){var d=new ct.MathNode("mo",[new ct.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),o.push(d)}return oE(o)}return r};wt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],o,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,c="(",d=")";break;case"\\\\bracefrac":o=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":o=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:o,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:gE,mathmlBuilder:yE});wt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});wt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var GR=["display","text","script","scriptscript"],WR=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};wt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=Zv(e[0]),o=i.type==="atom"&&i.family==="open"?WR(i.text):null,c=Zv(e[1]),d=c.type==="atom"&&c.family==="close"?WR(c.text):null,h=mr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var y="auto",x=e[3];if(x.type==="ordgroup"){if(x.body.length>0){var _=mr(x.body[0],"textord");y=GR[Number(_.text)]}}else x=mr(x,"textord"),y=GR[Number(x.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:o,rightDelim:d,size:y}},htmlBuilder:gE,mathmlBuilder:yE});wt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:mr(e[0],"size").value,token:a}}});wt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=Nce(mr(e[1],"infix").size),o=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:gE,mathmlBuilder:yE});var wG=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?Lr(t.sup,e.havingStyle(r.sup()),e):Lr(t.sub,e.havingStyle(r.sub()),e),a=mr(t.base,"horizBrace")):a=mr(t,"horizBrace");var i=Lr(a.base,e.havingBaseStyle(Ht.DISPLAY)),o=oc.svgSpan(a,e),c;if(a.isOver?(c=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=ke.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=ke.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=ke.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return ke.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},Que=(t,e)=>{var r=oc.mathMLnode(t.label);return new ct.MathNode(t.isOver?"mover":"munder",[En(t.base,e),r])};wt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:wG,mathmlBuilder:Que});wt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=mr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:pa(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Va(t.body,e,!1);return ke.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=Du(t.body,e);return r instanceof Ns||(r=new Ns("mrow",[r])),r.setAttribute("href",t.href),r}});wt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=mr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var o=n[i];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:pa(c)}}});wt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:pa(e[0])}},htmlBuilder(t,e){var r=Va(t.body,e,!1);return ke.makeFragment(r)},mathmlBuilder(t,e){return new ct.MathNode("mrow",os(t.body,e))}});wt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=mr(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],y=m.indexOf("=");if(y<0)throw new ut("\\htmlData key/value '"+m+"' missing equals sign");var x=m.slice(0,y),_=m.slice(y+1);d["data-"+x.trim()]=_}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:pa(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Va(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=ke.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>Du(t.body,e)});wt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:pa(e[0]),mathml:pa(e[1])}},htmlBuilder:(t,e)=>{var r=Va(t.html,e,!1);return ke.makeFragment(r)},mathmlBuilder:(t,e)=>Du(t.mathml,e)});var N3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ut("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!UH(n))throw new ut("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};wt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},c="";if(r[0])for(var d=mr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var y=m[1].trim();switch(m[0].trim()){case"alt":c=y;break;case"width":a=N3(y);break;case"height":i=N3(y);break;case"totalheight":o=N3(y);break;default:throw new ut("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var x=mr(e[0],"url").url;return c===""&&(c=x,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:x})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:o,src:x}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=Kn(t.height,e),n=0;t.totalheight.number>0&&(n=Kn(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=Kn(t.width,e));var i={height:yt(r+n)};a>0&&(i.width=yt(a)),n>0&&(i.verticalAlign=yt(-n));var o=new Qce(t.src,t.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Kn(t.height,e),a=0;if(t.totalheight.number>0&&(a=Kn(t.totalheight,e)-n,r.setAttribute("valign",yt(-a))),r.setAttribute("height",yt(n+a)),t.width.number>0){var i=Kn(t.width,e);r.setAttribute("width",yt(i))}return r.setAttribute("src",t.src),r}});wt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=mr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",o=a.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return ke.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=Kn(t.dimension,e);return new ct.SpaceNode(r)}});wt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=ke.makeSpan([],[Lr(t.body,e)]),r=ke.makeSpan(["inner"],[r],e)):r=ke.makeSpan(["inner"],[Lr(t.body,e)]);var n=ke.makeSpan(["fix"],[]),a=ke.makeSpan([t.alignment],[r,n],e),i=ke.makeSpan(["strut"]);return i.style.height=yt(a.height+a.depth),a.depth&&(i.style.verticalAlign=yt(-a.depth)),a.children.unshift(i),a=ke.makeSpan(["thinbox"],[a],e),ke.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mpadded",[En(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});wt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}});wt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ut("Mismatched "+t.funcName)}});var KR=(t,e)=>{switch(e.style.size){case Ht.DISPLAY.size:return t.display;case Ht.TEXT.size:return t.text;case Ht.SCRIPT.size:return t.script;case Ht.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};wt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:pa(e[0]),text:pa(e[1]),script:pa(e[2]),scriptscript:pa(e[3])}},htmlBuilder:(t,e)=>{var r=KR(t,e),n=Va(r,e,!1);return ke.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=KR(t,e);return Du(r,e)}});var SG=(t,e,r,n,a,i,o)=>{t=ke.makeSpan([],[t]);var c=r&&Hr.isCharacterBox(r),d,h;if(e){var p=Lr(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Lr(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var y;if(h&&d){var x=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+o;y=ke.makeVList({positionType:"bottom",positionData:x,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:yt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:yt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var _=t.height-o;y=ke.makeVList({positionType:"top",positionData:_,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:yt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var S=t.depth+o;y=ke.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:yt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&i!==0&&!c){var E=ke.makeSpan(["mspace"],[],n);E.style.marginRight=yt(i),w.unshift(E)}return ke.makeSpan(["mop","op-limits"],w,n)},_G=["\\smallint"],Uf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=mr(t.base,"op"),a=!0):i=mr(t,"op");var o=e.style,c=!1;o.size===Ht.DISPLAY.size&&i.symbol&&!_G.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=ke.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,y=ke.staticSvg(p+"Size"+(c?"2":"1"),e);d=ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var x=Va(i.body,e,!0);x.length===1&&x[0]instanceof ro?(d=x[0],d.classes[0]="mop"):d=ke.makeSpan(["mop"],x,e)}else{for(var _=[],S=1;S<i.name.length;S++)_.push(ke.mathsym(i.name[S],i.mode,e));d=ke.makeSpan(["mop"],_,e)}var w=0,E=0;return(d instanceof ro||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,E=d.italic),a?SG(d,r,n,e,o,E,w):(w&&(d.style.position="relative",d.style.top=yt(w)),d)},w1=(t,e)=>{var r;if(t.symbol)r=new Ns("mo",[no(t.name,t.mode)]),_G.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new Ns("mo",os(t.body,e));else{r=new Ns("mi",[new Wo(t.name.slice(1))]);var n=new Ns("mo",[no("","text")]);t.parentIsSupSub?r=new Ns("mrow",[r,n]):r=YH([r,n])}return r},Xue={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};wt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=Xue[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Uf,mathmlBuilder:w1});wt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:pa(n)}},htmlBuilder:Uf,mathmlBuilder:w1});var Yue={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};wt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Uf,mathmlBuilder:w1});wt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Uf,mathmlBuilder:w1});wt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Yue[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Uf,mathmlBuilder:w1});var NG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=mr(t.base,"operatorname"),a=!0):i=mr(t,"operatorname");var o;if(i.body.length>0){for(var c=i.body.map(m=>{var y=m.text;return typeof y=="string"?{type:"textord",mode:m.mode,text:y}:m}),d=Va(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof ro&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=ke.makeSpan(["mop"],d,e)}else o=ke.makeSpan(["mop"],[],e);return a?SG(o,r,n,e,e.style,0,0):o},Zue=(t,e)=>{for(var r=os(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof ct.SpaceNode))if(i instanceof ct.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof ct.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new ct.TextNode(c)]}var d=new ct.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new ct.MathNode("mo",[no("","text")]);return t.parentIsSupSub?new ct.MathNode("mrow",[d,h]):ct.newDocumentFragment([d,h])};wt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:pa(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:NG,mathmlBuilder:Zue});Z("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");b0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?ke.makeFragment(Va(t.body,e,!1)):ke.makeSpan(["mord"],Va(t.body,e,!0),e)},mathmlBuilder(t,e){return Du(t.body,e,!0)}});wt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Lr(t.body,e.havingCrampedStyle()),n=ke.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return ke.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[new ct.TextNode("")]);r.setAttribute("stretchy","true");var n=new ct.MathNode("mover",[En(t.body,e),r]);return n.setAttribute("accent","true"),n}});wt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:pa(n)}},htmlBuilder:(t,e)=>{var r=Va(t.body,e.withPhantom(),!1);return ke.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=os(t.body,e);return new ct.MathNode("mphantom",r)}});wt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=ke.makeSpan([],[Lr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),ke.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=os(pa(t.body),e),n=new ct.MathNode("mphantom",r),a=new ct.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});wt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=ke.makeSpan(["inner"],[Lr(t.body,e.withPhantom())]),n=ke.makeSpan(["fix"],[]);return ke.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=os(pa(t.body),e),n=new ct.MathNode("mphantom",r),a=new ct.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});wt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=mr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=Lr(t.body,e),n=Kn(t.dy,e);return ke.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new ct.MathNode("mpadded",[En(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});wt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});wt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=mr(e[0],"size"),o=mr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&mr(a,"size").value,width:i.value,height:o.value}},htmlBuilder(t,e){var r=ke.makeSpan(["mord","rule"],[],e),n=Kn(t.width,e),a=Kn(t.height,e),i=t.shift?Kn(t.shift,e):0;return r.style.borderRightWidth=yt(n),r.style.borderTopWidth=yt(a),r.style.bottom=yt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Kn(t.width,e),n=Kn(t.height,e),a=t.shift?Kn(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new ct.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",yt(r)),o.setAttribute("height",yt(n));var c=new ct.MathNode("mpadded",[o]);return a>=0?c.setAttribute("height",yt(a)):(c.setAttribute("height",yt(a)),c.setAttribute("depth",yt(-a))),c.setAttribute("voffset",yt(a)),c}});function TG(t,e,r){for(var n=Va(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return ke.makeFragment(n)}var QR=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Jue=(t,e)=>{var r=e.havingSize(t.size);return TG(t.body,r,e)};wt({type:"sizing",names:QR,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:QR.indexOf(n)+1,body:i}},htmlBuilder:Jue,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=os(t.body,r),a=new ct.MathNode("mstyle",n);return a.setAttribute("mathsize",yt(r.sizeMultiplier)),a}});wt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,o=r[0]&&mr(r[0],"ordgroup");if(o)for(var c="",d=0;d<o.body.length;++d){var h=o.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=ke.makeSpan([],[Lr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return ke.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new ct.MathNode("mpadded",[En(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});wt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=Lr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=ke.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Ht.TEXT.id&&(i=e.fontMetrics().xHeight);var o=a+i/4,c=r.height+r.depth+o+a,{span:d,ruleWidth:h,advanceWidth:p}=Xl.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+o&&(o=(o+m-r.height-r.depth)/2);var y=d.height-r.height-o-h;r.style.paddingLeft=yt(p);var x=ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var _=e.havingStyle(Ht.SCRIPTSCRIPT),S=Lr(t.index,_,e),w=.6*(x.height-x.depth),E=ke.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:S}]},e),I=ke.makeSpan(["root"],[E]);return ke.makeSpan(["mord","sqrt"],[I,x],e)}else return ke.makeSpan(["mord","sqrt"],[x],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new ct.MathNode("mroot",[En(r,e),En(n,e)]):new ct.MathNode("msqrt",[En(r,e)])}});var XR={display:Ht.DISPLAY,text:Ht.TEXT,script:Ht.SCRIPT,scriptscript:Ht.SCRIPTSCRIPT};wt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(t,e){var r=XR[t.style],n=e.havingStyle(r).withFont("");return TG(t.body,n,e)},mathmlBuilder(t,e){var r=XR[t.style],n=e.havingStyle(r),a=os(t.body,n),i=new ct.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=o[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var ede=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Ht.DISPLAY.size||n.alwaysHandleSupSub);return a?Uf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Ht.DISPLAY.size||n.limits);return i?NG:null}else{if(n.type==="accent")return Hr.isCharacterBox(n.base)?uE:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?wG:null}else return null}else return null};b0({type:"supsub",htmlBuilder(t,e){var r=ede(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,o=Lr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,y=n&&Hr.isCharacterBox(n);if(a){var x=e.havingStyle(e.style.sup());c=Lr(a,x,e),y||(p=o.height-x.fontMetrics().supDrop*x.sizeMultiplier/e.sizeMultiplier)}if(i){var _=e.havingStyle(e.style.sub());d=Lr(i,_,e),y||(m=o.depth+_.fontMetrics().subDrop*_.sizeMultiplier/e.sizeMultiplier)}var S;e.style===Ht.DISPLAY?S=h.sup1:e.style.cramped?S=h.sup3:S=h.sup2;var w=e.sizeMultiplier,E=yt(.5/h.ptPerEm/w),I=null;if(d){var R=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof ro||R)&&(I=yt(-o.italic))}var L;if(c&&d){p=Math.max(p,S,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var C=h.defaultRuleThickness,O=4*C;if(p-c.depth-(d.height-m)<O){m=O-(p-c.depth)+d.height;var A=.8*h.xHeight-(p-c.depth);A>0&&(p+=A,m-=A)}var j=[{type:"elem",elem:d,shift:m,marginRight:E,marginLeft:I},{type:"elem",elem:c,shift:-p,marginRight:E}];L=ke.makeVList({positionType:"individualShift",children:j},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var k=[{type:"elem",elem:d,marginLeft:I,marginRight:E}];L=ke.makeVList({positionType:"shift",positionData:m,children:k},e)}else if(c)p=Math.max(p,S,c.depth+.25*h.xHeight),L=ke.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:E}]},e);else throw new Error("supsub must have either sup or sub.");var z=HT(o,"right")||"mord";return ke.makeSpan([z],[o,ke.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[En(t.base,e)];t.sub&&i.push(En(t.sub,e)),t.sup&&i.push(En(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Ht.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Ht.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Ht.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Ht.DISPLAY)?o="munder":o="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Ht.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Ht.DISPLAY)?o="mover":o="msup"}return new ct.MathNode(o,i)}});b0({type:"atom",htmlBuilder(t,e){return ke.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[no(t.text,t.mode)]);if(t.family==="bin"){var n=lE(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var AG={mi:"italic",mn:"normal",mtext:"normal"};b0({type:"mathord",htmlBuilder(t,e){return ke.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new ct.MathNode("mi",[no(t.text,t.mode,e)]),n=lE(t,e)||"italic";return n!==AG[r.type]&&r.setAttribute("mathvariant",n),r}});b0({type:"textord",htmlBuilder(t,e){return ke.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=no(t.text,t.mode,e),n=lE(t,e)||"normal",a;return t.mode==="text"?a=new ct.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new ct.MathNode("mn",[r]):t.text==="\\prime"?a=new ct.MathNode("mo",[r]):a=new ct.MathNode("mi",[r]),n!==AG[a.type]&&a.setAttribute("mathvariant",n),a}});var T3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},A3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};b0({type:"spacing",htmlBuilder(t,e){if(A3.hasOwnProperty(t.text)){var r=A3[t.text].className||"";if(t.mode==="text"){var n=ke.makeOrd(t,e,"textord");return n.classes.push(r),n}else return ke.makeSpan(["mspace",r],[ke.mathsym(t.text,t.mode,e)],e)}else{if(T3.hasOwnProperty(t.text))return ke.makeSpan(["mspace",T3[t.text]],[],e);throw new ut('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(A3.hasOwnProperty(t.text))r=new ct.MathNode("mtext",[new ct.TextNode("")]);else{if(T3.hasOwnProperty(t.text))return new ct.MathNode("mspace");throw new ut('Unknown type of space "'+t.text+'"')}return r}});var YR=()=>{var t=new ct.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};b0({type:"tag",mathmlBuilder(t,e){var r=new ct.MathNode("mtable",[new ct.MathNode("mtr",[YR(),new ct.MathNode("mtd",[Du(t.body,e)]),YR(),new ct.MathNode("mtd",[Du(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var ZR={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},JR={"\\textbf":"textbf","\\textmd":"textmd"},tde={"\\textit":"textit","\\textup":"textup"},eM=(t,e)=>{var r=t.font;if(r){if(ZR[r])return e.withTextFontFamily(ZR[r]);if(JR[r])return e.withTextFontWeight(JR[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(tde[r])};wt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:pa(a),font:n}},htmlBuilder(t,e){var r=eM(t,e),n=Va(t.body,r,!0);return ke.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=eM(t,e);return Du(t.body,r)}});wt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Lr(t.body,e),n=ke.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=ke.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return ke.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new ct.MathNode("mo",[new ct.TextNode("")]);r.setAttribute("stretchy","true");var n=new ct.MathNode("munder",[En(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});wt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Lr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return ke.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new ct.MathNode("mpadded",[En(t.body,e)],["vcenter"])}});wt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ut("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=tM(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),n.push(ke.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return ke.makeSpan(["mord","text"].concat(a.sizingClasses(e)),ke.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new ct.TextNode(tM(t)),n=new ct.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var tM=t=>t.body.replace(/ /g,t.star?"":""),hu=QH,jG=`[ \r
	]`,rde="\\\\[a-zA-Z@]+",nde="\\\\[^\uD800-\uDFFF]",ade="("+rde+")"+jG+"*",ide=`\\\\(
|[ \r	]+
?)[ \r	]*`,QT="[-]",sde=new RegExp(QT+"+$"),ode="("+jG+"+)|"+(ide+"|")+"([!-\\[\\]---]"+(QT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(QT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+ade)+("|"+nde+")");class rM{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(ode,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new ks("EOF",new Yi(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ut("Unexpected character: '"+e[r]+"'",new ks(e[r],new Yi(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new ks(a,new Yi(this,r,this.tokenRegex.lastIndex))}}class lde{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ut("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var cde=gG;Z("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});Z("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});Z("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});Z("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});Z("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});Z("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Z("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var nM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Z("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ut("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=nM[e.text],n==null||n>=r)throw new ut("Invalid base-"+r+" digit "+e.text);for(var a;(a=nM[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var xE=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ut("\\newcommand's first argument must be a macro name");var i=a[0].text,o=t.isDefined(i);if(o&&!e)throw new ut("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new ut("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ut("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return o&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};Z("\\newcommand",t=>xE(t,!1,!0,!1));Z("\\renewcommand",t=>xE(t,!0,!1,!1));Z("\\providecommand",t=>xE(t,!0,!0,!0));Z("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});Z("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});Z("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),hu[r],Rn.math[r],Rn.text[r]),""});Z("\\bgroup","{");Z("\\egroup","}");Z("~","\\nobreakspace");Z("\\lq","`");Z("\\rq","'");Z("\\aa","\\r a");Z("\\AA","\\r A");Z("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Z("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Z("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Z("","\\mathscr{B}");Z("","\\mathscr{E}");Z("","\\mathscr{F}");Z("","\\mathscr{H}");Z("","\\mathscr{I}");Z("","\\mathscr{L}");Z("","\\mathscr{M}");Z("","\\mathscr{R}");Z("","\\mathfrak{C}");Z("","\\mathfrak{H}");Z("","\\mathfrak{Z}");Z("\\Bbbk","\\Bbb{k}");Z("","\\cdotp");Z("\\llap","\\mathllap{\\textrm{#1}}");Z("\\rlap","\\mathrlap{\\textrm{#1}}");Z("\\clap","\\mathclap{\\textrm{#1}}");Z("\\mathstrut","\\vphantom{(}");Z("\\underbar","\\underline{\\text{#1}}");Z("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Z("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Z("\\ne","\\neq");Z("","\\neq");Z("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Z("","\\notin");Z("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Z("","\\perp");Z("","\\mathclose{!\\mkern-0.8mu!}");Z("","\\notni");Z("","\\ulcorner");Z("","\\urcorner");Z("","\\llcorner");Z("","\\lrcorner");Z("","\\copyright");Z("","\\textregistered");Z("","\\textregistered");Z("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Z("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Z("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Z("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Z("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Z("","\\vdots");Z("\\varGamma","\\mathit{\\Gamma}");Z("\\varDelta","\\mathit{\\Delta}");Z("\\varTheta","\\mathit{\\Theta}");Z("\\varLambda","\\mathit{\\Lambda}");Z("\\varXi","\\mathit{\\Xi}");Z("\\varPi","\\mathit{\\Pi}");Z("\\varSigma","\\mathit{\\Sigma}");Z("\\varUpsilon","\\mathit{\\Upsilon}");Z("\\varPhi","\\mathit{\\Phi}");Z("\\varPsi","\\mathit{\\Psi}");Z("\\varOmega","\\mathit{\\Omega}");Z("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Z("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Z("\\boxed","\\fbox{$\\displaystyle{#1}$}");Z("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Z("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Z("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Z("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Z("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var aM={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Z("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in aM?e=aM[r]:(r.slice(0,4)==="\\not"||r in Rn.math&&["bin","rel"].includes(Rn.math[r].group))&&(e="\\dotsb"),e});var vE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Z("\\dotso",function(t){var e=t.future().text;return e in vE?"\\ldots\\,":"\\ldots"});Z("\\dotsc",function(t){var e=t.future().text;return e in vE&&e!==","?"\\ldots\\,":"\\ldots"});Z("\\cdots",function(t){var e=t.future().text;return e in vE?"\\@cdots\\,":"\\@cdots"});Z("\\dotsb","\\cdots");Z("\\dotsm","\\cdots");Z("\\dotsi","\\!\\cdots");Z("\\dotsx","\\ldots\\,");Z("\\DOTSI","\\relax");Z("\\DOTSB","\\relax");Z("\\DOTSX","\\relax");Z("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Z("\\,","\\tmspace+{3mu}{.1667em}");Z("\\thinspace","\\,");Z("\\>","\\mskip{4mu}");Z("\\:","\\tmspace+{4mu}{.2222em}");Z("\\medspace","\\:");Z("\\;","\\tmspace+{5mu}{.2777em}");Z("\\thickspace","\\;");Z("\\!","\\tmspace-{3mu}{.1667em}");Z("\\negthinspace","\\!");Z("\\negmedspace","\\tmspace-{4mu}{.2222em}");Z("\\negthickspace","\\tmspace-{5mu}{.277em}");Z("\\enspace","\\kern.5em ");Z("\\enskip","\\hskip.5em\\relax");Z("\\quad","\\hskip1em\\relax");Z("\\qquad","\\hskip2em\\relax");Z("\\tag","\\@ifstar\\tag@literal\\tag@paren");Z("\\tag@paren","\\tag@literal{({#1})}");Z("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ut("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Z("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Z("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Z("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Z("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Z("\\newline","\\\\\\relax");Z("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var EG=yt(Go["Main-Regular"][84][1]-.7*Go["Main-Regular"][65][1]);Z("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+EG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Z("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+EG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Z("\\hspace","\\@ifstar\\@hspacer\\@hspace");Z("\\@hspace","\\hskip #1\\relax");Z("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Z("\\ordinarycolon",":");Z("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Z("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Z("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Z("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Z("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Z("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Z("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Z("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Z("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Z("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Z("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Z("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Z("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Z("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Z("","\\dblcolon");Z("","\\eqcolon");Z("","\\coloneqq");Z("","\\eqqcolon");Z("","\\Coloneqq");Z("\\ratio","\\vcentcolon");Z("\\coloncolon","\\dblcolon");Z("\\colonequals","\\coloneqq");Z("\\coloncolonequals","\\Coloneqq");Z("\\equalscolon","\\eqqcolon");Z("\\equalscoloncolon","\\Eqqcolon");Z("\\colonminus","\\coloneq");Z("\\coloncolonminus","\\Coloneq");Z("\\minuscolon","\\eqcolon");Z("\\minuscoloncolon","\\Eqcolon");Z("\\coloncolonapprox","\\Colonapprox");Z("\\coloncolonsim","\\Colonsim");Z("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Z("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Z("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Z("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Z("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Z("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Z("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Z("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Z("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Z("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Z("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Z("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Z("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Z("\\nleqq","\\html@mathml{\\@nleqq}{}");Z("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Z("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Z("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Z("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Z("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Z("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Z("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Z("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Z("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Z("\\imath","\\html@mathml{\\@imath}{}");Z("\\jmath","\\html@mathml{\\@jmath}{}");Z("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Z("","\\llbracket");Z("","\\rrbracket");Z("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Z("","\\lBrace");Z("","\\rBrace");Z("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Z("","\\minuso");Z("\\darr","\\downarrow");Z("\\dArr","\\Downarrow");Z("\\Darr","\\Downarrow");Z("\\lang","\\langle");Z("\\rang","\\rangle");Z("\\uarr","\\uparrow");Z("\\uArr","\\Uparrow");Z("\\Uarr","\\Uparrow");Z("\\N","\\mathbb{N}");Z("\\R","\\mathbb{R}");Z("\\Z","\\mathbb{Z}");Z("\\alef","\\aleph");Z("\\alefsym","\\aleph");Z("\\Alpha","\\mathrm{A}");Z("\\Beta","\\mathrm{B}");Z("\\bull","\\bullet");Z("\\Chi","\\mathrm{X}");Z("\\clubs","\\clubsuit");Z("\\cnums","\\mathbb{C}");Z("\\Complex","\\mathbb{C}");Z("\\Dagger","\\ddagger");Z("\\diamonds","\\diamondsuit");Z("\\empty","\\emptyset");Z("\\Epsilon","\\mathrm{E}");Z("\\Eta","\\mathrm{H}");Z("\\exist","\\exists");Z("\\harr","\\leftrightarrow");Z("\\hArr","\\Leftrightarrow");Z("\\Harr","\\Leftrightarrow");Z("\\hearts","\\heartsuit");Z("\\image","\\Im");Z("\\infin","\\infty");Z("\\Iota","\\mathrm{I}");Z("\\isin","\\in");Z("\\Kappa","\\mathrm{K}");Z("\\larr","\\leftarrow");Z("\\lArr","\\Leftarrow");Z("\\Larr","\\Leftarrow");Z("\\lrarr","\\leftrightarrow");Z("\\lrArr","\\Leftrightarrow");Z("\\Lrarr","\\Leftrightarrow");Z("\\Mu","\\mathrm{M}");Z("\\natnums","\\mathbb{N}");Z("\\Nu","\\mathrm{N}");Z("\\Omicron","\\mathrm{O}");Z("\\plusmn","\\pm");Z("\\rarr","\\rightarrow");Z("\\rArr","\\Rightarrow");Z("\\Rarr","\\Rightarrow");Z("\\real","\\Re");Z("\\reals","\\mathbb{R}");Z("\\Reals","\\mathbb{R}");Z("\\Rho","\\mathrm{P}");Z("\\sdot","\\cdot");Z("\\sect","\\S");Z("\\spades","\\spadesuit");Z("\\sub","\\subset");Z("\\sube","\\subseteq");Z("\\supe","\\supseteq");Z("\\Tau","\\mathrm{T}");Z("\\thetasym","\\vartheta");Z("\\weierp","\\wp");Z("\\Zeta","\\mathrm{Z}");Z("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Z("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Z("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Z("\\bra","\\mathinner{\\langle{#1}|}");Z("\\ket","\\mathinner{|{#1}\\rangle}");Z("\\braket","\\mathinner{\\langle{#1}\\rangle}");Z("\\Bra","\\left\\langle#1\\right|");Z("\\Ket","\\left|#1\\right\\rangle");var kG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>y=>{t&&(y.macros.set("|",o),a.length&&y.macros.set("\\|",c));var x=m;if(!m&&a.length){var _=y.future();_.text==="|"&&(y.popToken(),x=!0)}return{tokens:x?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};Z("\\bra@ket",kG(!1));Z("\\bra@set",kG(!0));Z("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Z("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Z("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Z("\\angln","{\\angl n}");Z("\\blue","\\textcolor{##6495ed}{#1}");Z("\\orange","\\textcolor{##ffa500}{#1}");Z("\\pink","\\textcolor{##ff00af}{#1}");Z("\\red","\\textcolor{##df0030}{#1}");Z("\\green","\\textcolor{##28ae7b}{#1}");Z("\\gray","\\textcolor{gray}{#1}");Z("\\purple","\\textcolor{##9d38bd}{#1}");Z("\\blueA","\\textcolor{##ccfaff}{#1}");Z("\\blueB","\\textcolor{##80f6ff}{#1}");Z("\\blueC","\\textcolor{##63d9ea}{#1}");Z("\\blueD","\\textcolor{##11accd}{#1}");Z("\\blueE","\\textcolor{##0c7f99}{#1}");Z("\\tealA","\\textcolor{##94fff5}{#1}");Z("\\tealB","\\textcolor{##26edd5}{#1}");Z("\\tealC","\\textcolor{##01d1c1}{#1}");Z("\\tealD","\\textcolor{##01a995}{#1}");Z("\\tealE","\\textcolor{##208170}{#1}");Z("\\greenA","\\textcolor{##b6ffb0}{#1}");Z("\\greenB","\\textcolor{##8af281}{#1}");Z("\\greenC","\\textcolor{##74cf70}{#1}");Z("\\greenD","\\textcolor{##1fab54}{#1}");Z("\\greenE","\\textcolor{##0d923f}{#1}");Z("\\goldA","\\textcolor{##ffd0a9}{#1}");Z("\\goldB","\\textcolor{##ffbb71}{#1}");Z("\\goldC","\\textcolor{##ff9c39}{#1}");Z("\\goldD","\\textcolor{##e07d10}{#1}");Z("\\goldE","\\textcolor{##a75a05}{#1}");Z("\\redA","\\textcolor{##fca9a9}{#1}");Z("\\redB","\\textcolor{##ff8482}{#1}");Z("\\redC","\\textcolor{##f9685d}{#1}");Z("\\redD","\\textcolor{##e84d39}{#1}");Z("\\redE","\\textcolor{##bc2612}{#1}");Z("\\maroonA","\\textcolor{##ffbde0}{#1}");Z("\\maroonB","\\textcolor{##ff92c6}{#1}");Z("\\maroonC","\\textcolor{##ed5fa6}{#1}");Z("\\maroonD","\\textcolor{##ca337c}{#1}");Z("\\maroonE","\\textcolor{##9e034e}{#1}");Z("\\purpleA","\\textcolor{##ddd7ff}{#1}");Z("\\purpleB","\\textcolor{##c6b9fc}{#1}");Z("\\purpleC","\\textcolor{##aa87ff}{#1}");Z("\\purpleD","\\textcolor{##7854ab}{#1}");Z("\\purpleE","\\textcolor{##543b78}{#1}");Z("\\mintA","\\textcolor{##f5f9e8}{#1}");Z("\\mintB","\\textcolor{##edf2df}{#1}");Z("\\mintC","\\textcolor{##e0e5cc}{#1}");Z("\\grayA","\\textcolor{##f6f7f7}{#1}");Z("\\grayB","\\textcolor{##f0f1f2}{#1}");Z("\\grayC","\\textcolor{##e3e5e6}{#1}");Z("\\grayD","\\textcolor{##d6d8da}{#1}");Z("\\grayE","\\textcolor{##babec2}{#1}");Z("\\grayF","\\textcolor{##888d93}{#1}");Z("\\grayG","\\textcolor{##626569}{#1}");Z("\\grayH","\\textcolor{##3b3e40}{#1}");Z("\\grayI","\\textcolor{##21242c}{#1}");Z("\\kaBlue","\\textcolor{##314453}{#1}");Z("\\kaGreen","\\textcolor{##71B307}{#1}");var CG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class ude{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new lde(cde,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new rM(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new ks("EOF",n.loc)),this.pushTokens(a),new ks("",Yi.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,o=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new ut("Extra }",i)}else if(i.text==="EOF")throw new ut("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((o===0||o===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(o!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ut("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new ut("Use of the macro doesn't match its definition",i)}}for(var o=[],c=0;c<e;c++)o.push(this.consumeArg(r&&r[c+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ut("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ut("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new ut("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...o[+d.text-1]);else throw new ut("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new ks(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var c=new rM(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||hu.hasOwnProperty(e)||Rn.math.hasOwnProperty(e)||Rn.text.hasOwnProperty(e)||CG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:hu.hasOwnProperty(e)&&!hu[e].primitive}}var iM=/^[]/,Ax=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),j3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},sM={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class X2{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new ude(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ut("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new ks("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(X2.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&hu[a.text]&&hu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ut("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,o,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?o=d[0]:o={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],o],[]):h=this.callFunction(n,[i,o],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new ut("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new ut("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new ut("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new ut("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new ut("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(Ax[i.text]){var h=iM.test(i.text),p=[];for(p.push(new ks(Ax[i.text])),this.consume();;){var m=this.fetch().text;if(!Ax[m]||iM.test(m)!==h)break;p.unshift(new ks(Ax[m])),this.consume()}var y=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=hu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new ut("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new ut("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new ut("Can't use function '"+a+"' in math mode",n);var{args:o,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,o,c,n,e)}callFunction(e,r,n,a,i){var o={funcName:e,parser:this,token:a,breakOnTokenText:i},c=hu[e];if(c&&c.handler)return c.handler(o,r,n);throw new ut("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],o=0;o<n;o++){var c=r.argTypes&&r.argTypes[o],d=o<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new ut("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new ut("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ut("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ut("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",o;(o=this.fetch()).text!=="EOF"&&e.test(i+o.text);)a=o,i+=a.text,this.consume();if(i==="")throw new ut("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ut("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ut("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!UH(i))throw new ut("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),o}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,o),d=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:Yi.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!CG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ut("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Yi.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Yi.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:Yi.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ut(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}sM.hasOwnProperty(r[0])&&!Rn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=sM[r[0]]+r.slice(1));var i=sde.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if(Rn[this.mode][r]){this.settings.strict&&this.mode==="math"&&qT.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Rn[this.mode][r].group,d=Yi.range(e),h;if(Zce.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};o=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&($H(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:Yi.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var y=i[0][m];if(!j3[y])throw new ut("Unknown accent ' "+y+"'",e);var x=j3[y][this.mode]||j3[y].text;if(!x)throw new ut("Accent "+y+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:Yi.range(e),label:x,isStretchy:!1,isShifty:!0,base:o}}return o}}X2.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var bE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new X2(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ut("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new ks("\\df@tag")])}]}return a},OG=function(e,r,n){r.textContent="";var a=wE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),OG=function(){throw new ut("KaTeX doesn't work in quirks mode.")});var dde=function(e,r){var n=wE(e,r).toMarkup();return n},hde=function(e,r){var n=new rE(r);return bE(e,n)},IG=function(e,r,n){if(n.throwOnError||!(e instanceof ut))throw e;var a=ke.makeSpan(["katex-error"],[new ro(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},wE=function(e,r){var n=new rE(r);try{var a=bE(e,n);return wue(a,e,n)}catch(i){return IG(i,e,n)}},fde=function(e,r){var n=new rE(r);try{var a=bE(e,n);return Sue(a,e,n)}catch(i){return IG(i,e,n)}},pde="0.16.28",mde={Span:b1,Anchor:iE,SymbolNode:ro,SvgNode:ic,PathNode:Pu,LineNode:FT},Jv={version:pde,render:OG,renderToString:dde,ParseError:ut,SETTINGS_SCHEMA:dv,__parse:hde,__renderToDomTree:wE,__renderToHTMLTree:fde,__setFontMetrics:qce,__defineSymbol:M,__defineFunction:wt,__defineMacro:Z,__domTree:mde};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function lu(t){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(t)}function XT(t,e){return XT=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},XT(t,e)}function gde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fv(t,e,r){return gde()?fv=Reflect.construct:fv=function(a,i,o){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return o&&XT(h,o.prototype),h},fv.apply(null,arguments)}function yo(t){return yde(t)||xde(t)||vde(t)||bde()}function yde(t){if(Array.isArray(t))return YT(t)}function xde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vde(t,e){if(t){if(typeof t=="string")return YT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YT(t,e)}}function YT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wde=Object.hasOwnProperty,oM=Object.setPrototypeOf,Sde=Object.isFrozen,_de=Object.getPrototypeOf,Nde=Object.getOwnPropertyDescriptor,Bi=Object.freeze,ao=Object.seal,Tde=Object.create,RG=typeof Reflect<"u"&&Reflect,eb=RG.apply,ZT=RG.construct;eb||(eb=function(e,r,n){return e.apply(r,n)});Bi||(Bi=function(e){return e});ao||(ao=function(e){return e});ZT||(ZT=function(e,r){return fv(e,yo(r))});var Ade=io(Array.prototype.forEach),lM=io(Array.prototype.pop),Xp=io(Array.prototype.push),pv=io(String.prototype.toLowerCase),E3=io(String.prototype.toString),cM=io(String.prototype.match),mo=io(String.prototype.replace),jde=io(String.prototype.indexOf),Ede=io(String.prototype.trim),ui=io(RegExp.prototype.test),k3=kde(TypeError);function io(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return eb(t,e,n)}}function kde(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ZT(t,r)}}function gr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:pv,oM&&oM(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var o=r(i);o!==i&&(Sde(e)||(e[a]=o),i=o)}t[i]=!0}return t}function vd(t){var e=Tde(null),r;for(r in t)eb(wde,t,[r])===!0&&(e[r]=t[r]);return e}function jx(t,e){for(;t!==null;){var r=Nde(t,e);if(r){if(r.get)return io(r.get);if(typeof r.value=="function")return io(r.value)}t=_de(t)}function n(a){return console.warn("fallback value for",a),null}return n}var uM=Bi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),C3=Bi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),O3=Bi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Cde=Bi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),I3=Bi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Ode=Bi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dM=Bi(["#text"]),hM=Bi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R3=Bi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fM=Bi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ex=Bi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ide=ao(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Rde=ao(/<%[\w\W]*|[\w\W]*%>/gm),Mde=ao(/\${[\w\W]*}/gm),Pde=ao(/^data-[\-\w.\u00B7-\uFFFF]+$/),Dde=ao(/^aria-[\-\w]+$/),Lde=ao(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Bde=ao(/^(?:\w+script|data):/i),$de=ao(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ude=ao(/^html$/i),zde=ao(/^[a-z][.\w]*(-[.\w]+)+$/i),Vde=function(){return typeof window>"u"?null:window},Fde=function(e,r){if(lu(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function MG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vde(),e=function(pe){return MG(pe)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,o=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,y=t.DOMParser,x=t.trustedTypes,_=c.prototype,S=jx(_,"cloneNode"),w=jx(_,"nextSibling"),E=jx(_,"childNodes"),I=jx(_,"parentNode");if(typeof i=="function"){var R=n.createElement("template");R.content&&R.content.ownerDocument&&(n=R.content.ownerDocument)}var L=Fde(x,r),C=L?L.createHTML(""):"",O=n,A=O.implementation,j=O.createNodeIterator,k=O.createDocumentFragment,z=O.getElementsByTagName,D=r.importNode,$={};try{$=vd(n).documentMode?n.documentMode:{}}catch{}var B={};e.isSupported=typeof I=="function"&&A&&A.createHTMLDocument!==void 0&&$!==9;var G=Ide,K=Rde,H=Mde,J=Pde,ae=Dde,he=Bde,fe=$de,Y=zde,ne=Lde,re=null,ye=gr({},[].concat(yo(uM),yo(C3),yo(O3),yo(I3),yo(dM))),Te=null,Ve=gr({},[].concat(yo(hM),yo(R3),yo(fM),yo(Ex))),Je=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xe=null,ie=null,Be=!0,Q=!0,te=!1,_e=!0,Se=!1,Qe=!0,nt=!1,Ot=!1,Me=!1,lt=!1,St=!1,vt=!1,et=!0,ce=!1,Ue="user-content-",Ze=!0,ht=!1,dt={},zt=null,tr=gr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Cr=null,ve=gr({},["audio","video","img","source","image","track"]),st=null,jt=gr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml",ar=tt,br=!1,Br=null,dn=gr({},[Dt,$t,tt],E3),vr,Gt=["application/xhtml+xml","text/html"],Ut="text/html",_t,$r=null,an=n.createElement("form"),Wr=function(pe){return pe instanceof RegExp||pe instanceof Function},Ur=function(pe){$r&&$r===pe||((!pe||lu(pe)!=="object")&&(pe={}),pe=vd(pe),vr=Gt.indexOf(pe.PARSER_MEDIA_TYPE)===-1?vr=Ut:vr=pe.PARSER_MEDIA_TYPE,_t=vr==="application/xhtml+xml"?E3:pv,re="ALLOWED_TAGS"in pe?gr({},pe.ALLOWED_TAGS,_t):ye,Te="ALLOWED_ATTR"in pe?gr({},pe.ALLOWED_ATTR,_t):Ve,Br="ALLOWED_NAMESPACES"in pe?gr({},pe.ALLOWED_NAMESPACES,E3):dn,st="ADD_URI_SAFE_ATTR"in pe?gr(vd(jt),pe.ADD_URI_SAFE_ATTR,_t):jt,Cr="ADD_DATA_URI_TAGS"in pe?gr(vd(ve),pe.ADD_DATA_URI_TAGS,_t):ve,zt="FORBID_CONTENTS"in pe?gr({},pe.FORBID_CONTENTS,_t):tr,Xe="FORBID_TAGS"in pe?gr({},pe.FORBID_TAGS,_t):{},ie="FORBID_ATTR"in pe?gr({},pe.FORBID_ATTR,_t):{},dt="USE_PROFILES"in pe?pe.USE_PROFILES:!1,Be=pe.ALLOW_ARIA_ATTR!==!1,Q=pe.ALLOW_DATA_ATTR!==!1,te=pe.ALLOW_UNKNOWN_PROTOCOLS||!1,_e=pe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Se=pe.SAFE_FOR_TEMPLATES||!1,Qe=pe.SAFE_FOR_XML!==!1,nt=pe.WHOLE_DOCUMENT||!1,lt=pe.RETURN_DOM||!1,St=pe.RETURN_DOM_FRAGMENT||!1,vt=pe.RETURN_TRUSTED_TYPE||!1,Me=pe.FORCE_BODY||!1,et=pe.SANITIZE_DOM!==!1,ce=pe.SANITIZE_NAMED_PROPS||!1,Ze=pe.KEEP_CONTENT!==!1,ht=pe.IN_PLACE||!1,ne=pe.ALLOWED_URI_REGEXP||ne,ar=pe.NAMESPACE||tt,Je=pe.CUSTOM_ELEMENT_HANDLING||{},pe.CUSTOM_ELEMENT_HANDLING&&Wr(pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Je.tagNameCheck=pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&Wr(pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Je.attributeNameCheck=pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&typeof pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Je.allowCustomizedBuiltInElements=pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Se&&(Q=!1),St&&(lt=!0),dt&&(re=gr({},yo(dM)),Te=[],dt.html===!0&&(gr(re,uM),gr(Te,hM)),dt.svg===!0&&(gr(re,C3),gr(Te,R3),gr(Te,Ex)),dt.svgFilters===!0&&(gr(re,O3),gr(Te,R3),gr(Te,Ex)),dt.mathMl===!0&&(gr(re,I3),gr(Te,fM),gr(Te,Ex))),pe.ADD_TAGS&&(re===ye&&(re=vd(re)),gr(re,pe.ADD_TAGS,_t)),pe.ADD_ATTR&&(Te===Ve&&(Te=vd(Te)),gr(Te,pe.ADD_ATTR,_t)),pe.ADD_URI_SAFE_ATTR&&gr(st,pe.ADD_URI_SAFE_ATTR,_t),pe.FORBID_CONTENTS&&(zt===tr&&(zt=vd(zt)),gr(zt,pe.FORBID_CONTENTS,_t)),Ze&&(re["#text"]=!0),nt&&gr(re,["html","head","body"]),re.table&&(gr(re,["tbody"]),delete Xe.tbody),Bi&&Bi(pe),$r=pe)},hn=gr({},["mi","mo","mn","ms","mtext"]),cr=gr({},["annotation-xml"]),ya=gr({},["title","style","font","a","script"]),fn=gr({},C3);gr(fn,O3),gr(fn,Cde);var kn=gr({},I3);gr(kn,Ode);var ni=function(pe){var rt=I(pe);(!rt||!rt.tagName)&&(rt={namespaceURI:ar,tagName:"template"});var ft=pv(pe.tagName),Xt=pv(rt.tagName);return Br[pe.namespaceURI]?pe.namespaceURI===$t?rt.namespaceURI===tt?ft==="svg":rt.namespaceURI===Dt?ft==="svg"&&(Xt==="annotation-xml"||hn[Xt]):!!fn[ft]:pe.namespaceURI===Dt?rt.namespaceURI===tt?ft==="math":rt.namespaceURI===$t?ft==="math"&&cr[Xt]:!!kn[ft]:pe.namespaceURI===tt?rt.namespaceURI===$t&&!cr[Xt]||rt.namespaceURI===Dt&&!hn[Xt]?!1:!kn[ft]&&(ya[ft]||!fn[ft]):!!(vr==="application/xhtml+xml"&&Br[pe.namespaceURI]):!1},Nr=function(pe){Xp(e.removed,{element:pe});try{pe.parentNode.removeChild(pe)}catch{try{pe.outerHTML=C}catch{pe.remove()}}},pn=function(pe,rt){try{Xp(e.removed,{attribute:rt.getAttributeNode(pe),from:rt})}catch{Xp(e.removed,{attribute:null,from:rt})}if(rt.removeAttribute(pe),pe==="is"&&!Te[pe])if(lt||St)try{Nr(rt)}catch{}else try{rt.setAttribute(pe,"")}catch{}},ai=function(pe){var rt,ft;if(Me)pe="<remove></remove>"+pe;else{var Xt=cM(pe,/^[\r\n\t ]+/);ft=Xt&&Xt[0]}vr==="application/xhtml+xml"&&ar===tt&&(pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+pe+"</body></html>");var hr=L?L.createHTML(pe):pe;if(ar===tt)try{rt=new y().parseFromString(hr,vr)}catch{}if(!rt||!rt.documentElement){rt=A.createDocument(ar,"template",null);try{rt.documentElement.innerHTML=br?C:hr}catch{}}var sn=rt.body||rt.documentElement;return pe&&ft&&sn.insertBefore(n.createTextNode(ft),sn.childNodes[0]||null),ar===tt?z.call(rt,nt?"html":"body")[0]:nt?rt.documentElement:sn},Hn=function(pe){return j.call(pe.ownerDocument||pe,pe,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Jr=function(pe){return pe instanceof m&&(typeof pe.nodeName!="string"||typeof pe.textContent!="string"||typeof pe.removeChild!="function"||!(pe.attributes instanceof p)||typeof pe.removeAttribute!="function"||typeof pe.setAttribute!="function"||typeof pe.namespaceURI!="string"||typeof pe.insertBefore!="function"||typeof pe.hasChildNodes!="function")},mn=function(pe){return lu(o)==="object"?pe instanceof o:pe&&lu(pe)==="object"&&typeof pe.nodeType=="number"&&typeof pe.nodeName=="string"},Nn=function(pe,rt,ft){B[pe]&&Ade(B[pe],function(Xt){Xt.call(e,rt,ft,$r)})},ii=function(pe){var rt;if(Nn("beforeSanitizeElements",pe,null),Jr(pe)||ui(/[\u0080-\uFFFF]/,pe.nodeName))return Nr(pe),!0;var ft=_t(pe.nodeName);if(Nn("uponSanitizeElement",pe,{tagName:ft,allowedTags:re}),pe.hasChildNodes()&&!mn(pe.firstElementChild)&&(!mn(pe.content)||!mn(pe.content.firstElementChild))&&ui(/<[/\w]/g,pe.innerHTML)&&ui(/<[/\w]/g,pe.textContent)||ft==="select"&&ui(/<template/i,pe.innerHTML)||pe.nodeType===7||Qe&&pe.nodeType===8&&ui(/<[/\w]/g,pe.data))return Nr(pe),!0;if(!re[ft]||Xe[ft]){if(!Xe[ft]&&ji(ft)&&(Je.tagNameCheck instanceof RegExp&&ui(Je.tagNameCheck,ft)||Je.tagNameCheck instanceof Function&&Je.tagNameCheck(ft)))return!1;if(Ze&&!zt[ft]){var Xt=I(pe)||pe.parentNode,hr=E(pe)||pe.childNodes;if(hr&&Xt)for(var sn=hr.length,Kr=sn-1;Kr>=0;--Kr){var gn=S(hr[Kr],!0);gn.__removalCount=(pe.__removalCount||0)+1,Xt.insertBefore(gn,w(pe))}}return Nr(pe),!0}return pe instanceof c&&!ni(pe)||(ft==="noscript"||ft==="noembed"||ft==="noframes")&&ui(/<\/no(script|embed|frames)/i,pe.innerHTML)?(Nr(pe),!0):(Se&&pe.nodeType===3&&(rt=pe.textContent,rt=mo(rt,G," "),rt=mo(rt,K," "),rt=mo(rt,H," "),pe.textContent!==rt&&(Xp(e.removed,{element:pe.cloneNode()}),pe.textContent=rt)),Nn("afterSanitizeElements",pe,null),!1)},Ga=function(pe,rt,ft){if(et&&(rt==="id"||rt==="name")&&(ft in n||ft in an))return!1;if(!(Q&&!ie[rt]&&ui(J,rt))){if(!(Be&&ui(ae,rt))){if(!Te[rt]||ie[rt]){if(!(ji(pe)&&(Je.tagNameCheck instanceof RegExp&&ui(Je.tagNameCheck,pe)||Je.tagNameCheck instanceof Function&&Je.tagNameCheck(pe))&&(Je.attributeNameCheck instanceof RegExp&&ui(Je.attributeNameCheck,rt)||Je.attributeNameCheck instanceof Function&&Je.attributeNameCheck(rt))||rt==="is"&&Je.allowCustomizedBuiltInElements&&(Je.tagNameCheck instanceof RegExp&&ui(Je.tagNameCheck,ft)||Je.tagNameCheck instanceof Function&&Je.tagNameCheck(ft))))return!1}else if(!st[rt]){if(!ui(ne,mo(ft,fe,""))){if(!((rt==="src"||rt==="xlink:href"||rt==="href")&&pe!=="script"&&jde(ft,"data:")===0&&Cr[pe])){if(!(te&&!ui(he,mo(ft,fe,"")))){if(ft)return!1}}}}}}return!0},ji=function(pe){return pe!=="annotation-xml"&&cM(pe,Y)},cs=function(pe){var rt,ft,Xt,hr;Nn("beforeSanitizeAttributes",pe,null);var sn=pe.attributes;if(!(!sn||Jr(pe))){var Kr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Te};for(hr=sn.length;hr--;){rt=sn[hr];var gn=rt,Or=gn.name,Ms=gn.namespaceURI;if(ft=Or==="value"?rt.value:Ede(rt.value),Xt=_t(Or),Kr.attrName=Xt,Kr.attrValue=ft,Kr.keepAttr=!0,Kr.forceKeepAttr=void 0,Nn("uponSanitizeAttribute",pe,Kr),ft=Kr.attrValue,!Kr.forceKeepAttr&&(pn(Or,pe),!!Kr.keepAttr)){if(!_e&&ui(/\/>/i,ft)){pn(Or,pe);continue}Se&&(ft=mo(ft,G," "),ft=mo(ft,K," "),ft=mo(ft,H," "));var us=_t(pe.nodeName);if(Ga(us,Xt,ft)){if(ce&&(Xt==="id"||Xt==="name")&&(pn(Or,pe),ft=Ue+ft),Qe&&ui(/((--!?|])>)|<\/(style|title)/i,ft)){pn(Or,pe);continue}if(L&&lu(x)==="object"&&typeof x.getAttributeType=="function"&&!Ms)switch(x.getAttributeType(us,Xt)){case"TrustedHTML":{ft=L.createHTML(ft);break}case"TrustedScriptURL":{ft=L.createScriptURL(ft);break}}try{Ms?pe.setAttributeNS(Ms,Or,ft):pe.setAttribute(Or,ft),Jr(pe)?Nr(pe):lM(e.removed)}catch{}}}}Nn("afterSanitizeAttributes",pe,null)}},xi=function Nt(pe){var rt,ft=Hn(pe);for(Nn("beforeSanitizeShadowDOM",pe,null);rt=ft.nextNode();)Nn("uponSanitizeShadowNode",rt,null),ii(rt),cs(rt),rt.content instanceof a&&Nt(rt.content);Nn("afterSanitizeShadowDOM",pe,null)};return e.sanitize=function(Nt){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt,ft,Xt,hr,sn;if(br=!Nt,br&&(Nt="<!-->"),typeof Nt!="string"&&!mn(Nt))if(typeof Nt.toString=="function"){if(Nt=Nt.toString(),typeof Nt!="string")throw k3("dirty is not a string, aborting")}else throw k3("toString is not a function");if(!e.isSupported){if(lu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Nt=="string")return t.toStaticHTML(Nt);if(mn(Nt))return t.toStaticHTML(Nt.outerHTML)}return Nt}if(Ot||Ur(pe),e.removed=[],typeof Nt=="string"&&(ht=!1),ht){if(Nt.nodeName){var Kr=_t(Nt.nodeName);if(!re[Kr]||Xe[Kr])throw k3("root node is forbidden and cannot be sanitized in-place")}}else if(Nt instanceof o)rt=ai("<!---->"),ft=rt.ownerDocument.importNode(Nt,!0),ft.nodeType===1&&ft.nodeName==="BODY"||ft.nodeName==="HTML"?rt=ft:rt.appendChild(ft);else{if(!lt&&!Se&&!nt&&Nt.indexOf("<")===-1)return L&&vt?L.createHTML(Nt):Nt;if(rt=ai(Nt),!rt)return lt?null:vt?C:""}rt&&Me&&Nr(rt.firstChild);for(var gn=Hn(ht?Nt:rt);Xt=gn.nextNode();)Xt.nodeType===3&&Xt===hr||(ii(Xt),cs(Xt),Xt.content instanceof a&&xi(Xt.content),hr=Xt);if(hr=null,ht)return Nt;if(lt){if(St)for(sn=k.call(rt.ownerDocument);rt.firstChild;)sn.appendChild(rt.firstChild);else sn=rt;return(Te.shadowroot||Te.shadowrootmod)&&(sn=D.call(r,sn,!0)),sn}var Or=nt?rt.outerHTML:rt.innerHTML;return nt&&re["!doctype"]&&rt.ownerDocument&&rt.ownerDocument.doctype&&rt.ownerDocument.doctype.name&&ui(Ude,rt.ownerDocument.doctype.name)&&(Or="<!DOCTYPE "+rt.ownerDocument.doctype.name+`>
`+Or),Se&&(Or=mo(Or,G," "),Or=mo(Or,K," "),Or=mo(Or,H," ")),L&&vt?L.createHTML(Or):Or},e.setConfig=function(Nt){Ur(Nt),Ot=!0},e.clearConfig=function(){$r=null,Ot=!1},e.isValidAttribute=function(Nt,pe,rt){$r||Ur({});var ft=_t(Nt),Xt=_t(pe);return Ga(ft,Xt,rt)},e.addHook=function(Nt,pe){typeof pe=="function"&&(B[Nt]=B[Nt]||[],Xp(B[Nt],pe))},e.removeHook=function(Nt){if(B[Nt])return lM(B[Nt])},e.removeHooks=function(Nt){B[Nt]&&(B[Nt]=[])},e.removeAllHooks=function(){B={}},e}var PG=MG();const qde=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i,lessonBlocks:o})=>{const c=T.useRef(Uv()),d=T.useRef(Date.now()),h=T.useRef(t),[p,m]=T.useState(!0),[y,x]=T.useState(0),[_,S]=T.useState(!1),[w,E]=T.useState(null),[I,R]=T.useState(0),[L,C]=T.useState(0),[O,A]=T.useState(!1),[j,k]=T.useState(0),[z,D]=T.useState(!1),$=T.useRef(null),B=T.useRef(null),G=T.useRef(null),K=T.useRef(new Set),H=T.useRef(null),[J,ae]=T.useState(!1),[he,fe]=T.useState("");T.useEffect(()=>{h.current=t},[t]);const Y=T.useCallback(()=>{d.current=Date.now(),p||m(!0)},[p]);T.useEffect(()=>{const ye=setInterval(()=>{Date.now()-d.current<6e4?(c.current.engagementTime+=1,x(c.current.engagementTime),p||m(!0)):p&&m(!1)},1e3);return()=>clearInterval(ye)},[p]),T.useEffect(()=>{const ye=["mousemove","keydown","scroll","click"];return ye.forEach(Te=>window.addEventListener(Te,Y)),()=>ye.forEach(Te=>window.removeEventListener(Te,Y))},[Y]),T.useEffect(()=>()=>{h.current(c.current)},[]),T.useEffect(()=>{if(!n||!a)return;const ye=async Te=>{var Be,Q,te,_e,Se,Qe,nt,Ot,Me,lt,St,vt;const Ve=$.current;if(!Ve)return;const Je=Ve.src?new URL(Ve.src).origin:"";if(Te.origin!==window.location.origin&&Te.origin!==Je)return;const Xe=Te.origin,ie=Te.data;if(!(!ie||typeof ie!="object"||!((Be=ie.type)!=null&&Be.startsWith("portal-"))))switch(Y(),ie.type){case"portal-ready":{S(!0);try{const et=await da(ot(Ie,"practice_progress",`${n}_${a}`)),ce=et.exists()?et.data():null,Ue=(ce==null?void 0:ce.answeredQuestions)||[];Ue.forEach(dt=>K.current.add(dt)),R(Ue.length),ce&&(H.current=ce,ce.completed&&(A(!0),k(ce.totalCompletions||1)));const Ze=ce?{state:ce.state||null,currentQuestion:ce.currentQuestion??0}:null,ht=ce!=null&&ce.completed?{completed:!0,completedAt:ce.completedAt,bestScore:ce.bestScore,totalCompletions:ce.totalCompletions||0,lastCompletion:((Q=ce.completionHistory)==null?void 0:Q.length)>0?ce.completionHistory[ce.completionHistory.length-1]:null}:null;(te=Ve.contentWindow)==null||te.postMessage({type:"portal-init",payload:{userId:n,savedState:Ze,completionInfo:ht}},Xe)}catch(et){console.error("Bridge: Failed to load saved state",et),(_e=Ve.contentWindow)==null||_e.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},Xe)}break}case"portal-save":{const{state:et,currentQuestion:ce}=ie.payload||{};if(!et)break;try{const Ue=H.current,Ze={userId:n,assignmentId:a,state:et,currentQuestion:ce??0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString()};Ue!=null&&Ue.completed&&(Ze.completed=Ue.completed,Ze.completedAt=Ue.completedAt,Ze.bestScore=Ue.bestScore,Ze.totalCompletions=Ue.totalCompletions,Ze.completionHistory=Ue.completionHistory),await Wn(ot(Ie,"practice_progress",`${n}_${a}`),Ze,{merge:!0}),H.current={...H.current,...Ze},(Se=Ve.contentWindow)==null||Se.postMessage({type:"portal-save-ok"},Xe)}catch(Ue){console.error("Bridge: Save failed",Ue),(Qe=Ve.contentWindow)==null||Qe.postMessage({type:"portal-save-error"},Xe)}break}case"portal-complete":{const{score:et,totalQuestions:ce,correctAnswers:Ue}=ie.payload||{};try{const Ze=H.current,ht=new Date().toISOString(),dt={completedAt:ht,score:et??0,totalQuestions:ce??0,correctAnswers:Ue??0,answeredQuestions:Array.from(K.current)},zt=[...(Ze==null?void 0:Ze.completionHistory)||[],dt],tr=Math.max((Ze==null?void 0:Ze.bestScore)||0,et||0),Cr=((Ze==null?void 0:Ze.totalCompletions)||0)+1,ve={userId:n,assignmentId:a,completed:!0,completedAt:(Ze==null?void 0:Ze.completedAt)||ht,bestScore:tr,totalCompletions:Cr,completionHistory:zt,answeredQuestions:Array.from(K.current),lastUpdated:ht};Ze!=null&&Ze.state&&(ve.state=Ze.state,ve.currentQuestion=Ze.currentQuestion),await Wn(ot(Ie,"practice_progress",`${n}_${a}`),ve,{merge:!0}),H.current={...H.current,...ve},A(!0),k(Cr),Un.xpGain(),E({text:"Module Complete!",type:"success"}),setTimeout(()=>E(null),3e3),(nt=Ve.contentWindow)==null||nt.postMessage({type:"portal-complete-ok",payload:{totalCompletions:Cr,bestScore:tr}},Xe)}catch(Ze){console.error("Bridge: Completion save failed",Ze),(Ot=Ve.contentWindow)==null||Ot.postMessage({type:"portal-complete-error"},Xe)}break}case"portal-replay":{try{const et=H.current,ce={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(et==null?void 0:et.completed)||!1,completedAt:(et==null?void 0:et.completedAt)||null,bestScore:(et==null?void 0:et.bestScore)||null,totalCompletions:(et==null?void 0:et.totalCompletions)||0,completionHistory:(et==null?void 0:et.completionHistory)||[]};await Wn(ot(Ie,"practice_progress",`${n}_${a}`),ce,{merge:!0}),H.current=ce,D(!1),(Me=Ve.contentWindow)==null||Me.postMessage({type:"portal-reset-ok"},Xe)}catch(et){console.error("Bridge: Replay reset failed",et)}break}case"portal-answer":{const{questionId:et,correct:ce,attempts:Ue}=ie.payload||{};if(!et)break;if(ce&&!K.current.has(et)){K.current.add(et),R(ht=>ht+1);const Ze=Ue===1?15:10;try{const dt=(await yH({assignmentId:a,questionId:et,xpAmount:Ze,classType:i||"Uncategorized"})).data;if(dt.awarded){const zt=dt.serverXP||Ze;C(tr=>tr+zt),E({text:`+${zt} XP`,type:"success"}),Un.xpGain(),setTimeout(()=>E(null),2e3)}(lt=Ve.contentWindow)==null||lt.postMessage({type:"portal-xp-result",payload:{questionId:et,awarded:dt.awarded,xp:dt.serverXP||Ze}},Xe)}catch(ht){console.error("Bridge: XP award failed",ht),(St=Ve.contentWindow)==null||St.postMessage({type:"portal-xp-result",payload:{questionId:et,awarded:!1,xp:0}},Xe)}}else ce&&((vt=Ve.contentWindow)==null||vt.postMessage({type:"portal-xp-result",payload:{questionId:et,awarded:!1,xp:0}},Xe));break}}};return window.addEventListener("message",ye),()=>window.removeEventListener("message",ye)},[n,a,i,Y]);const ne=T.useCallback(()=>{const ye=$.current;if(!ye||!n||!a)return;const Ve=(ye.src?new URL(ye.src).origin:"")||window.location.origin;(async()=>{var Je;try{const Xe=H.current,ie={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(Xe==null?void 0:Xe.completed)||!1,completedAt:(Xe==null?void 0:Xe.completedAt)||null,bestScore:(Xe==null?void 0:Xe.bestScore)||null,totalCompletions:(Xe==null?void 0:Xe.totalCompletions)||0,completionHistory:(Xe==null?void 0:Xe.completionHistory)||[]};await Wn(ot(Ie,"practice_progress",`${n}_${a}`),ie,{merge:!0}),H.current=ie,D(!1),(Je=ye.contentWindow)==null||Je.postMessage({type:"portal-reset-ok"},Ve)}catch(Xe){console.error("Replay reset failed",Xe)}})()},[n,a]),re=T.useCallback(()=>{const ye=G.current;ye&&(document.fullscreenElement?document.exitFullscreen():ye.requestFullscreen().catch(()=>{ae(Te=>!Te)}))},[]);return T.useEffect(()=>{const ye=()=>ae(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",ye),()=>document.removeEventListener("fullscreenchange",ye)},[]),T.useEffect(()=>{if(B.current&&r){const ye=r.replace(/\$(.*?)\$/g,(Te,Ve)=>{try{return Jv.renderToString(Ve,{throwOnError:!1})}catch{return Ve}});B.current.innerHTML=PG.sanitize(ye,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]}),fe(B.current.textContent||"")}},[r]),s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?s.jsx(Y8,{className:"w-4 h-4"}):s.jsx(to,{className:"w-4 h-4 animate-pulse"}),p?"Active Session":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(y/60),"m ",y%60,"s"]}),_&&I>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[s.jsx(nn,{className:"w-3 h-3"})," ",I," answered"]}),_&&L>0&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[s.jsx(Yn,{className:"w-3 h-3"})," ",L," XP"]}),O&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[s.jsx(rl,{className:"w-3 h-3"}),"Completed",j>1?` (${j}x)`:""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(r||he)&&s.jsx(AR,{textContent:he,compact:!0}),O&&_&&(z?s.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[s.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),s.jsx("button",{onClick:ne,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),s.jsx("button",{onClick:()=>D(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[s.jsx(Cle,{className:"w-3 h-3"})," Replay"]})),e&&s.jsxs("button",{onClick:re,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:J?"Exit full screen (Esc)":"Full screen",children:[J?s.jsx(NH,{className:"w-3 h-3"}):s.jsx(cv,{className:"w-3 h-3"}),J?"Exit Full Screen":"Full Screen"]}),_&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Yn,{className:"w-3 h-3"})," XP Linked"]}),!p&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Is,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),w&&s.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${w.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[w.type==="success"?s.jsx(nn,{className:"w-4 h-4"}):s.jsx(Iu,{className:"w-4 h-4"}),w.text]})}),s.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?s.jsxs("div",{ref:G,className:"flex-1 flex flex-col bg-white relative",children:[s.jsx("iframe",{ref:$,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:Y}),s.jsx(oce,{containerRef:G})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:s.jsxs("div",{className:"text-center",children:[s.jsx(n0,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),s.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&s.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-white font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(cv,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),he&&s.jsx(AR,{textContent:he})]}),s.jsx("div",{ref:B,className:"proctor-content text-sm leading-relaxed"})]}),o&&o.length>0&&s.jsxs("div",{className:"h-2/5 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("h3",{className:"text-white font-bold mb-4 text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(cv,{className:"w-4 h-4 text-purple-400"})," Interactive Lesson"]}),s.jsx(LH,{blocks:o,showSidebar:!0,engagementTime:y,xpEarned:L})]})]})]})},Hde=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState(null),a=async()=>{e(!0),n(null);try{await Ate(LT,yoe)}catch(o){console.error("Login Error:",o),n(o instanceof Error?o.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Is,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"break-words",children:[s.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[s.jsx(dle,{className:"w-4 h-4"}),"Action Required:"]}),s.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",s.jsx("code",{children:"lib/firebase.ts"})," and replace",s.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),s.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),s.jsx("span",{children:"Sign in with Google"})]})}),s.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),s.jsx("span",{children:""}),s.jsx("span",{children:"Firebase Auth"})]})]})})]})},DG=T.createContext(null),ko=()=>{const t=T.useContext(DG);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},Gde=({children:t})=>{const[e,r]=T.useState({isOpen:!1,options:{message:""}}),n=T.useRef(null),a=T.useRef(null),i=T.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),o=T.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=T.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);T.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),T.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&o()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,o]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return s.jsxs(DG.Provider,{value:{confirm:i},children:[t,e.isOpen&&s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),s.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:s.jsx(Is,{className:"w-5 h-5"})}),s.jsxs("div",{children:[e.options.title&&s.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),s.jsx("button",{ref:a,onClick:o,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),s.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},lg=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=o=>{e.includes(o)?r(e.filter(c=>c!==o)):r([...e,o])};return s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(o=>s.jsx("button",{type:"button",onClick:()=>i(o),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(o)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:o},o))]})]})},pM={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:s.jsx(z2,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:s.jsx(Is,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:s.jsx(Ale,{className:"w-4 h-4"})}},Wde=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=ko(),a=qa(),[i,o]=T.useState(!1),[c,d]=T.useState(""),[h,p]=T.useState(""),[m,y]=T.useState("INFO"),[x,_]=T.useState("GLOBAL"),[S,w]=T.useState([]),E=async()=>{if(!(!c.trim()||!h.trim()))try{await Re.createAnnouncement({title:c.trim(),content:h.trim(),classType:x,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...S.length>0?{targetSections:S}:{}}),await Re.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),w([]),o(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},I=async R=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Re.deleteAnnouncement(R)};return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Fv,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Ea,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(Fv,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):s.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(R=>{var C;const L=pM[R.priority]||pM.INFO;return s.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:R.title}),s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:R.content}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[R.classType==="GLOBAL"?"All Classes":R.classType,(C=R.targetSections)!=null&&C.length?`  ${R.targetSections.join(", ")}`:"","  ",new Date(R.createdAt).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>I(R.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:s.jsx(In,{className:"w-3.5 h-3.5"})})]},R.id)})}),s.jsx(Ai,{isOpen:i,onClose:()=>o(!1),title:"New Announcement",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:R=>d(R.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),s.jsx("textarea",{value:h,onChange:R=>p(R.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),s.jsxs("select",{value:m,onChange:R=>y(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"INFO",children:"Info"}),s.jsx("option",{value:"WARNING",children:"Warning"}),s.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),s.jsxs("select",{value:x,onChange:R=>_(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(jr).filter(R=>R!=="Uncategorized").map(R=>s.jsx("option",{value:R,children:R},R))]})]})]}),s.jsx(lg,{availableSections:r,selectedSections:S,onChange:w}),s.jsx("button",{onClick:E,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},SE=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],mM=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],Kde=["I","II","III","IV","V"],Qde=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},s0=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,mM.length-1),a=mM[n]||"Unknownium",i=Kde[r],o=n+1,c=Qde(o);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Ki={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},Xde={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},gM=(t,e,r)=>{const n=Ki.UNSOCKET_BASE,a=Xde[t],i=Math.max(1,e),o=1+r;return Math.ceil(n*a*i*o)},yM=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},_E=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},NE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([o,c])=>{e[o]+=c})}),e},o0=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let o=0;switch(n.rarity){case"COMMON":o=0;break;case"UNCOMMON":o=10;break;case"RARE":o=30;break;case"UNIQUE":o=60;break}e+=i*10+o}),Math.floor(e))},Yde=t=>{if(!t)return{};const{getActiveSetBonuses:e}=require("./achievements"),r=Object.values(t).filter(Boolean),n=e(r),a={};return n.forEach(({activeBonus:i})=>{i.effects.forEach(o=>{a[o.stat]=(a[o.stat]||0)+o.value})}),a},Zde=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{(n.gems||[]).forEach(a=>{e[a.stat]=(e[a.stat]||0)+a.value})}),e},Jde=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{if(!n.runewordActive)return;const a=SE.find(i=>i.id===n.runewordActive);if(a)for(const[i,o]of Object.entries(a.bonusStats))e[i]=(e[i]||0)+o}),e},xM=t=>t.runewordActive&&SE.find(e=>e.id===t.runewordActive)||null,ua=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Lu(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const e0e=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var C,O,A,j,k,z,D,$,B,G;const[i,o]=T.useState(!1),c=((C=t.gamification)==null?void 0:C.level)||1,d=((O=t.gamification)==null?void 0:O.xp)||0,h=((A=t.gamification)==null?void 0:A.currency)||0,p=s0(c),m=NE(t),y=t.enrolledClasses||(t.classType?[t.classType]:[]),x=((k=(j=t.gamification)==null?void 0:j.completedQuests)==null?void 0:k.length)||0,_=((D=(z=t.gamification)==null?void 0:z.activeQuests)==null?void 0:D.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").length)||0,S=T.useMemo(()=>y.map(K=>{var ne,re;const H=((re=(ne=t.gamification)==null?void 0:ne.classXp)==null?void 0:re[K])||0,J=Lu(t,K),ae=o0(J.equipped),he=J.inventory.length,fe=e.filter(ye=>{const Te=r.find(Ve=>Ve.id===ye.assignmentId);return(Te==null?void 0:Te.classType)===K}),Y=Math.round(fe.reduce((ye,Te)=>{var Ve;return ye+(((Ve=Te.metrics)==null?void 0:Ve.engagementTime)||0)},0)/60);return{cls:K,classXp:H,gearScore:ae,inventoryCount:he,resourcesViewed:fe.length,totalTime:Y}}),[t,e,r,y]),w=T.useMemo(()=>{const K=new Map;return e.forEach(H=>{var Y,ne,re,ye,Te,Ve,Je;const J=r.find(Xe=>Xe.id===H.assignmentId),ae=H.assignmentId,he=K.get(ae),fe=((Y=H.metrics)==null?void 0:Y.engagementTime)||0;he?(he.visits++,he.totalTime+=fe,he.totalKeystrokes+=((ne=H.metrics)==null?void 0:ne.keystrokes)||0,he.totalClicks+=((re=H.metrics)==null?void 0:re.clickCount)||0,he.totalPastes+=((ye=H.metrics)==null?void 0:ye.pasteCount)||0,he.statuses.push(H.status),H.submittedAt&&(!he.lastVisit||H.submittedAt>he.lastVisit)&&(he.lastVisit=H.submittedAt)):K.set(ae,{title:(J==null?void 0:J.title)||H.assignmentTitle,classType:(J==null?void 0:J.classType)||"Unknown",category:(J==null?void 0:J.category)||"Supplemental",visits:1,totalTime:fe,totalKeystrokes:((Te=H.metrics)==null?void 0:Te.keystrokes)||0,totalClicks:((Ve=H.metrics)==null?void 0:Ve.clickCount)||0,totalPastes:((Je=H.metrics)==null?void 0:Je.pasteCount)||0,lastVisit:H.submittedAt||null,statuses:[H.status]})}),Array.from(K.values()).sort((H,J)=>J.totalTime-H.totalTime)},[e,r]),E=T.useMemo(()=>e.filter(K=>K.submittedAt).sort((K,H)=>new Date(H.submittedAt).getTime()-new Date(K.submittedAt).getTime()).slice(0,10).map(K=>{var H,J;return{...K,assignmentTitle:((H=r.find(ae=>ae.id===K.assignmentId))==null?void 0:H.title)||K.assignmentTitle,classType:((J=r.find(ae=>ae.id===K.assignmentId))==null?void 0:J.classType)||"Unknown"}}),[e,r]),I=Math.round(e.reduce((K,H)=>{var J;return K+(((J=H.metrics)==null?void 0:J.engagementTime)||0)},0)/60),R=T.useMemo(()=>{const K=new Set;e.forEach(Y=>{if(Y.submittedAt){const ne=new Date(Y.submittedAt),re=ne.getFullYear(),ye=new Date(re,0,1),Te=Math.ceil(((ne.getTime()-ye.getTime())/864e5+ye.getDay()+1)/7);K.add(`${re}-W${Te}`)}});const H=new Date,J=H.getFullYear(),ae=new Date(J,0,1),he=Math.ceil(((H.getTime()-ae.getTime())/864e5+ae.getDay()+1)/7);let fe=0;for(let Y=he;Y>0&&K.has(`${J}-W${Y}`);Y--)fe++;return fe},[e]),L=T.useMemo(()=>{const K=[],H=new Date;for(let re=6;re>=0;re--){const ye=new Date(H);ye.setDate(ye.getDate()-re);const Te=ye.toISOString().split("T")[0],Ve=e.filter(Xe=>{var ie;return(ie=Xe.submittedAt)==null?void 0:ie.startsWith(Te)}),Je=Ve.reduce((Xe,ie)=>{var Be;return Xe+(((Be=ie.metrics)==null?void 0:Be.engagementTime)||0)},0);K.push({label:ye.toLocaleDateString([],{weekday:"short"}),time:Math.round(Je/60),subs:Ve.length})}const J=K.slice(4).reduce((re,ye)=>re+ye.time,0),ae=K.slice(0,4).reduce((re,ye)=>re+ye.time,0),he=J/3,fe=ae/4,Y=he>fe*1.2?"up":he<fe*.6?"down":"flat",ne=Math.max(1,...K.map(re=>re.time));return{days:K,trend:Y,maxTime:ne}},[e]);return du.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),s.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:s.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?s.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):s.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),(($=t.gamification)==null?void 0:$.codename)&&s.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),s.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:s.jsx(aa,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Yn,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(to,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[I,"m"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(as,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Nu,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:x}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx($T,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:h}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Tu,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[R,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),s.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([K,H])=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:K}),s.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,H)}%`}})}),s.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:H})]},K))})]}),n.length>0&&(()=>{const K=n[0],H=Uo[K.bucket];return H?s.jsxs("div",{className:`border rounded-2xl p-4 ${H.borderColor} ${H.bgColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${H.color} border ${H.borderColor}`,children:H.label})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-3",children:H.description}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[s.jsxs("span",{children:["ES: ",K.engagementScore]}),s.jsxs("span",{children:["Subs: ",K.metrics.submissionCount]}),s.jsxs("span",{children:["Days Active: ",K.metrics.activityDays,"/7"]}),s.jsxs("span",{children:["Paste Ratio: ",Math.round(K.metrics.avgPasteRatio*100),"%"]}),s.jsxs("span",{children:["Time: ",Math.round(K.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[s.jsx(_H,{className:"w-3.5 h-3.5 text-amber-400"}),s.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:K.recommendation.action}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:K.recommendation.categories.map(J=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:J},J))})]}),(()=>{const J=r.filter(ae=>ae.classType===K.classType&&ae.status==="ACTIVE"&&K.recommendation.categories.includes(ae.category||"Supplemental")).slice(0,3);return J.length===0?null:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),s.jsx("div",{className:"space-y-1",children:J.map(ae=>s.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:ae.category}),s.jsx("span",{className:"text-white truncate",children:ae.title})]},ae.id))})]})})()]}):null})(),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),s.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&s.jsx(F2,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&s.jsx(Ple,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&s.jsx(TH,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((K,H)=>{const J=L.maxTime>0?Math.max(2,K.time/L.maxTime*100):2,ae=H===L.days.length-1;return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[s.jsx("div",{className:`w-full rounded-t transition-all ${K.time>0?ae?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${J}%`}}),s.jsx("span",{className:"text-[8px] text-gray-500",children:K.label}),s.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[K.time,"m  ",K.subs," sub",K.subs!==1?"s":""]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),s.jsx("div",{className:"space-y-3",children:S.map(K=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:K.cls}),s.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[K.classXp.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[s.jsxs("span",{children:[s.jsx(is,{className:"w-3 h-3 inline mr-0.5"}),K.gearScore," GS"]}),s.jsxs("span",{children:[s.jsx($T,{className:"w-3 h-3 inline mr-0.5"}),K.inventoryCount," items"]}),s.jsxs("span",{children:[s.jsx(as,{className:"w-3 h-3 inline mr-0.5"}),K.resourcesViewed," viewed"]}),s.jsxs("span",{children:[s.jsx(to,{className:"w-3 h-3 inline mr-0.5"}),K.totalTime,"m"]})]})]},K.cls))})]}),w.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center justify-between w-full mb-1",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[s.jsx(B2,{className:"w-3.5 h-3.5"})," Resource Performance",s.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",w.length,")"]})]}),i?s.jsx(g1,{className:"w-4 h-4 text-gray-500"}):s.jsx(gi,{className:"w-4 h-4 text-gray-500"})]}),i&&s.jsx("div",{className:"space-y-2 mt-3",children:w.map((K,H)=>{const J=Math.round(K.totalTime/60),ae=K.totalKeystrokes>20&&K.totalClicks>5?"high":K.totalClicks>2?"medium":"low",he=ae==="high"?"text-green-400":ae==="medium"?"text-yellow-400":"text-red-400",fe=ae==="high"?"bg-green-500":ae==="medium"?"bg-yellow-500":"bg-red-500";return s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.title}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[K.classType,"  ",K.category]})]}),s.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${fe}`,title:`${ae} engagement`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Time"}),s.jsxs("div",{className:"text-white font-bold",children:[J,"m"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Visits"}),s.jsx("div",{className:"text-white font-bold",children:K.visits})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Keys"}),s.jsx("div",{className:"text-white font-bold",children:K.totalKeystrokes})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Quality"}),s.jsx("div",{className:`font-bold capitalize ${he}`,children:ae})]})]}),K.lastVisit&&s.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(K.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),E.length===0?s.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):s.jsx("div",{className:"space-y-2",children:E.map(K=>{var J;const H=Math.round((((J=K.metrics)==null?void 0:J.engagementTime)||0)/60);return s.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H>=5?"bg-green-500":H>=1?"bg-yellow-500":"bg-gray-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.assignmentTitle}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[K.classType,"  ",H,"m engaged"]})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:K.submittedAt?new Date(K.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},K.id)})})]}),_>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),s.jsx("div",{className:"space-y-2",children:(G=(B=t.gamification)==null?void 0:B.activeQuests)==null?void 0:G.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").map(K=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nu,{className:`w-3.5 h-3.5 ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),s.jsx("span",{className:"text-xs text-white",children:K.questId})]}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:K.status})]},K.questId))})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[s.jsxs("div",{children:["Email: ",t.email]}),s.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),s.jsxs("div",{children:["Enrolled: ",y.join(", ")||"None"]}),s.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),s.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&s.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},t0e=({students:t,isOpen:e,onClose:r})=>{const n=qa(),[a,i]=T.useState(""),[o,c]=T.useState(null),[d,h]=T.useState(!1),p=UZ,m=T.useMemo(()=>a?t.filter(x=>x.name.toLowerCase().includes(a.toLowerCase())).slice(0,20):t.slice(0,20),[t,a]),y=async x=>{if(o){h(!0);try{await Re.awardBehavior({studentId:o.id,studentName:o.name,categoryId:x.id,categoryName:x.name,xpAmount:x.xpAmount,fluxAmount:x.fluxAmount,classType:o.classType||"AP Physics",awardedBy:"admin",timestamp:new Date().toISOString()}),n.success(`${x.icon} +${x.xpAmount} XP awarded to ${o.name} for ${x.name}!`),c(null),i("")}catch{n.error("Failed to award.")}finally{h(!1)}}};return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:r,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl animate-in fade-in zoom-in-95 duration-300",onClick:x=>x.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(L2,{className:"w-5 h-5 text-amber-400"})," Quick Award"]}),s.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(aa,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-5",children:o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-5 p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.avatarUrl?s.jsx("img",{src:o.avatarUrl,alt:"",className:"w-10 h-10 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-sm font-bold text-purple-400",children:o.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:o.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:o.classType})]}),s.jsx("button",{onClick:()=>c(null),className:"text-xs text-gray-500 hover:text-white transition",children:"Change"})]}),s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-3",children:"Select Behavior"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(x=>s.jsxs("button",{onClick:()=>y(x),disabled:d,className:`p-4 rounded-xl border text-left transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-40 bg-${x.color}-500/5 border-${x.color}-500/20 hover:border-${x.color}-500/40 hover:bg-${x.color}-500/10`,children:[s.jsx("div",{className:"text-2xl mb-1",children:x.icon}),s.jsx("div",{className:"text-sm font-bold text-white",children:x.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] text-purple-400 font-bold flex items-center gap-0.5",children:[s.jsx(Yn,{className:"w-2.5 h-2.5"}),x.xpAmount," XP"]}),s.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",x.fluxAmount," Flux"]})]})]},x.id))})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(y1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search for a student...",value:a,onChange:x=>i(x.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 transition",autoFocus:!0})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar space-y-1",children:m.map(x=>s.jsxs("button",{onClick:()=>c(x),className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-left hover:bg-white/5 transition group",children:[x.avatarUrl?s.jsx("img",{src:x.avatarUrl,alt:"",className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs font-bold text-purple-400",children:x.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-white group-hover:text-amber-300 transition",children:x.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:x.classType})]})]},x.id))})]})})]})]}):null},r0e=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=ko(),[a,i]=T.useState(null),[o,c]=T.useState([]),[d,h]=T.useState([]),[p,m]=T.useState([]),[y,x]=T.useState([]),[_,S]=T.useState(Date.now()),[w,E]=T.useState(null),[I,R]=T.useState("xp"),[L,C]=T.useState("desc"),[O,A]=T.useState(""),[j,k]=T.useState(""),[z,D]=T.useState(!1),$=Q=>{I===Q?C(te=>te==="asc"?"desc":"asc"):(R(Q),C("asc"))},B=({label:Q,col:te,className:_e})=>s.jsx("th",{className:`cursor-pointer select-none group p-3 ${_e??""}`,onClick:()=>$(te),children:s.jsxs("div",{className:`flex items-center gap-1 ${_e!=null&&_e.includes("text-center")?"justify-center":_e!=null&&_e.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:Q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(g1,{className:`w-2.5 h-2.5 -mb-0.5 ${I===te&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(gi,{className:`w-2.5 h-2.5 -mt-0.5 ${I===te&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});T.useEffect(()=>{const Q=Re.subscribeToChatFlags(c),te=Re.subscribeToAnnouncements(h),_e=Re.subscribeToStudentAlerts(m),Se=Re.subscribeToStudentBuckets(x),Qe=setInterval(()=>S(Date.now()),6e4);return()=>{Q(),te(),_e(),Se(),clearInterval(Qe)}},[]);const G=t.filter(Q=>Q.role==="STUDENT"),K=T.useMemo(()=>{const Q=new Set;return G.forEach(te=>{te.section&&Q.add(te.section)}),Array.from(Q).sort()},[G]),H=T.useMemo(()=>{const Q=new Map;for(const te of p){const _e=Q.get(te.studentId),Se={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!_e||(Se[te.riskLevel]||0)>(Se[_e.riskLevel]||0))&&Q.set(te.studentId,te)}return Q},[p]),J=T.useMemo(()=>{const Q=new Map;for(const te of y)Q.has(te.studentId)||Q.set(te.studentId,te);return Q},[y]),ae=T.useMemo(()=>{const Q={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},te=new Set;for(const _e of y)te.has(_e.studentId)||(te.add(_e.studentId),Q[_e.bucket]!==void 0&&Q[_e.bucket]++);return Q},[y]),he=G.length,fe=Math.round(G.reduce((Q,te)=>{var _e;return Q+(((_e=te.stats)==null?void 0:_e.totalTime)||0)},0)/(he||1)),Y=G.reduce((Q,te)=>{var _e;return Q+(((_e=te.stats)==null?void 0:_e.problemsCompleted)||0)},0),ne=G.reduce((Q,te)=>{var _e;return Q+(((_e=te.gamification)==null?void 0:_e.xp)||0)},0),re=G.filter(Q=>Q.mutedUntil&&new Date(Q.mutedUntil).getTime()>_),ye=async Q=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Re.muteUser(Q,0)},Te=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Re.INDEFINITE_MUTE}],Ve=async(Q,te)=>{await Re.muteUser(Q,te),E(null)},Je=async(Q,te)=>{const _e=new Date(te).getTime(),Se=new Date(Math.max(_e,Date.now())+3600*1e3),Qe=Math.ceil((Se.getTime()-Date.now())/6e4);await Re.muteUser(Q,Qe)},Xe=({label:Q,value:te,icon:_e,color:Se})=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[s.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${Se}`,children:_e}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:te}),s.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:Q})]}),s.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${Se}`})]}),ie=Q=>{const _e=new Date(Q).getTime()-_;if(_e<=0)return"Expired";const Se=Math.ceil(_e/6e4);return Se>60?`${Math.ceil(Se/60)} hrs`:`${Se} mins`},Be=Q=>{if(!Q)return"Never";const te=new Date(Q),_e=Date.now()-te.getTime(),Se=Math.floor(_e/6e4);if(Se<1)return"Just now";if(Se<60)return`${Se}m ago`;const Qe=Math.floor(Se/60);return Qe<24?`${Qe}h ago`:te.toLocaleDateString()};return s.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),s.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Xe,{label:"Total Students",value:he,icon:s.jsx(ss,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),s.jsx(Xe,{label:"Total XP Awarded",value:ne.toLocaleString(),icon:s.jsx(Yn,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),s.jsx(Xe,{label:"Resources Viewed",value:Y,icon:s.jsx(a0,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),s.jsx(Xe,{label:"Avg Active Time",value:`${fe}m`,icon:s.jsx(to,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${o.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${o.length>0?"text-red-400":"text-white"}`,children:[o.length>0?s.jsx(Is,{className:"w-5 h-5"}):s.jsx(V2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${o.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:o.length>0?`${o.length} Issues`:"Secure"})]}),o.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(r0,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:o.map(Q=>s.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-white",children:[Q.senderName," ",s.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",Q.classType]})]}),s.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',Q.content,'"']})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(Q.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:async()=>{await Re.resolveFlag(Q.id),Q.messageId&&await Re.unflagMessage(Q.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(ql,{className:"w-3 h-3"})," Dismiss"]}),s.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Re.resolveFlag(Q.id),Q.messageId&&await Re.deleteMessage(Q.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(In,{className:"w-3 h-3"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>E(w===Q.id?null:Q.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:s.jsx(qv,{className:"w-3 h-3"})}),w===Q.id&&s.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",Q.senderName]}),Te.map(te=>s.jsx("button",{onClick:()=>Ve(Q.senderId,te.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:te.label},te.minutes))]})]})]})]},Q.id))})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(qv,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),re.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(ss,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[s.jsx("th",{className:"pb-2",children:"Operative"}),s.jsx("th",{className:"pb-2",children:"Remaining"}),s.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:re.map(Q=>s.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[s.jsxs("td",{className:"py-3",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:Q.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:Q.classType})]}),s.jsx("td",{className:"py-3",children:s.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:ie(Q.mutedUntil)})}),s.jsx("td",{className:"py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Je(Q.id,Q.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:s.jsx(Gv,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>ye(Q.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:s.jsx(r0,{className:"w-3.5 h-3.5"})})]})})]},Q.id))})]})})]})]}),p.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(BT,{className:"w-5 h-5"}),"Early Warning System"]}),s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(Q=>{const te={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},_e={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},Se=Q.bucket?Uo[Q.bucket]:null;return s.jsx("div",{className:`border p-4 rounded-xl ${te[Q.riskLevel]||te.LOW}`,children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${_e[Q.riskLevel]||_e.LOW}`,children:Q.riskLevel}),Se&&s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${Se.bgColor} ${Se.color} ${Se.borderColor} border`,children:Se.label}),s.jsx("span",{className:"text-sm font-bold text-white truncate",children:Q.studentName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:Q.classType})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:Q.message}),Se&&s.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:Se.description}),s.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["ES: ",Q.engagementScore]}),s.jsxs("span",{children:["Class Avg: ",Q.classMean]}),s.jsx("span",{children:new Date(Q.createdAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{onClick:()=>i(Q.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),s.jsx("button",{onClick:async()=>{await Re.dismissAlert(Q.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},Q.id)})})]}),y.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(BT,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),s.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[y.length," profile",y.length!==1?"s":""," across classes"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(Uo).map(Q=>{const te=Uo[Q],_e=ae[Q];return s.jsxs("div",{className:`border rounded-xl p-3 ${te.borderColor} ${te.bgColor} transition hover:scale-[1.02]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:`text-xs font-bold ${te.color}`,children:te.label}),s.jsx("span",{className:"text-lg font-bold text-white",children:_e})]}),s.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:te.description})]},Q)})}),(()=>{const Q=Object.values(ae).reduce((te,_e)=>te+_e,0);return Q===0?null:s.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(Uo).map(te=>{const _e=ae[te]/Q*100;if(_e===0)return null;const Se={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return s.jsx("div",{className:`${Se[te]||"bg-gray-500"} transition-all`,style:{width:`${_e}%`},title:`${Uo[te].label}: ${ae[te]} (${Math.round(_e)}%)`},te)})})})()]}),s.jsx("div",{className:"mt-8",children:s.jsx(Wde,{announcements:d,studentIds:G.map(Q=>Q.id),availableSections:K})}),s.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Student Engagement Ranking"}),s.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(L2,{className:"w-3.5 h-3.5"})," Quick Award"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(y1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:O,onChange:Q=>A(Q.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("select",{value:j,onChange:Q=>k(Q.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{value:"",children:"All Buckets"}),Object.keys(Uo).map(Q=>s.jsx("option",{value:Q,children:Uo[Q].label},Q))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[s.jsx(B,{label:"Student",col:"name"}),s.jsx(B,{label:"Class",col:"class"}),s.jsx(B,{label:"Last Seen",col:"lastSeen",className:"text-center"}),s.jsx(B,{label:"Total Time",col:"time",className:"text-center"}),s.jsx(B,{label:"Resources",col:"resources",className:"text-center"}),s.jsx(B,{label:"XP",col:"xp",className:"text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const te=[...G.filter(Se=>{var Ot;const Qe=!O||Se.name.toLowerCase().includes(O.toLowerCase())||Se.email.toLowerCase().includes(O.toLowerCase()),nt=!j||((Ot=J.get(Se.id))==null?void 0:Ot.bucket)===j;return Qe&&nt})].sort((Se,Qe)=>{var nt,Ot,Me,lt,St,vt,et,ce;switch(I){case"name":return L==="asc"?Se.name.localeCompare(Qe.name):Qe.name.localeCompare(Se.name);case"class":return L==="asc"?(Se.classType||"").localeCompare(Qe.classType||""):(Qe.classType||"").localeCompare(Se.classType||"");case"lastSeen":{const Ue=Se.lastLoginAt?new Date(Se.lastLoginAt).getTime():0,Ze=Qe.lastLoginAt?new Date(Qe.lastLoginAt).getTime():0;return L==="asc"?Ue-Ze:Ze-Ue}case"time":{const Ue=((nt=Se.stats)==null?void 0:nt.totalTime)||0,Ze=((Ot=Qe.stats)==null?void 0:Ot.totalTime)||0;return L==="asc"?Ue-Ze:Ze-Ue}case"resources":{const Ue=((Me=Se.stats)==null?void 0:Me.problemsCompleted)||0,Ze=((lt=Qe.stats)==null?void 0:lt.problemsCompleted)||0;return L==="asc"?Ue-Ze:Ze-Ue}case"xp":default:{const Ue=((vt=(St=Se.gamification)==null?void 0:St.classXp)==null?void 0:vt[Se.classType||""])||0,Ze=((ce=(et=Qe.gamification)==null?void 0:et.classXp)==null?void 0:ce[Qe.classType||""])||0;return L==="asc"?Ue-Ze:Ze-Ue}}}),_e=Math.max(1,...G.map(Se=>{var Qe,nt;return((nt=(Qe=Se.gamification)==null?void 0:Qe.classXp)==null?void 0:nt[Se.classType||""])||0}));return te.map(Se=>{var Ze,ht,dt,zt;const Qe=((ht=(Ze=Se.gamification)==null?void 0:Ze.classXp)==null?void 0:ht[Se.classType||""])||0,nt=Math.round(Qe/_e*100),Ot=Se.lastLoginAt,Me=Ot?Date.now()-new Date(Ot).getTime():1/0,lt=Me<36e5?"text-green-400":Me<864e5?"text-yellow-400":Me<1/0?"text-red-400":"text-gray-600",St=Me<36e5?"bg-green-500":Me<864e5?"bg-yellow-500":Me<1/0?"bg-red-500":"bg-gray-600",vt=H.get(Se.id),et={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},ce=J.get(Se.id),Ue=ce?Uo[ce.bucket]:null;return s.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(vt==null?void 0:vt.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(Se.id),children:[s.jsx("td",{className:"p-3 font-bold text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[Se.avatarUrl?s.jsx("img",{src:Se.avatarUrl,alt:Se.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:Se.name.charAt(0)}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${St}`})]}),s.jsx("span",{className:"truncate max-w-[120px]",children:Se.name}),vt&&et[vt.riskLevel]&&s.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${et[vt.riskLevel]}`,title:`${vt.riskLevel} risk: ${vt.reason}`}),Ue&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${Ue.bgColor} ${Ue.color} border ${Ue.borderColor}`,title:Ue.description,children:Ue.label})]})}),s.jsx("td",{className:"p-3 text-sm text-gray-400",children:Se.classType}),s.jsx("td",{className:`p-3 text-center text-xs font-mono ${lt}`,children:Be(Se.lastLoginAt)}),s.jsxs("td",{className:"p-3 text-center text-white",children:[((dt=Se.stats)==null?void 0:dt.totalTime)||0,"m"]}),s.jsx("td",{className:"p-3 text-center text-white",children:((zt=Se.stats)==null?void 0:zt.problemsCompleted)||0}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${nt}%`}})}),s.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Qe})]})})]},Se.id)})})()})]})})]}),a&&(()=>{const Q=G.find(te=>te.id===a);return Q?s.jsx(e0e,{student:Q,submissions:r.filter(te=>te.userId===a),assignments:e,bucketProfiles:y.filter(te=>te.studentId===a),onClose:()=>i(null)}):null})(),s.jsx(t0e,{students:G,isOpen:z,onClose:()=>D(!1)})]})},n0e=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=qa(),{confirm:i}=ko(),[o,c]=T.useState(new Set),[d,h]=T.useState(jr.AP_PHYSICS),[p,m]=T.useState(!1),[y,x]=T.useState(!1),[_,S]=T.useState({}),w=(ve,st)=>{S(jt=>{const Dt=jt[ve]||{col:"name",dir:"asc"};return{...jt,[ve]:{col:st,dir:Dt.col===st&&Dt.dir==="asc"?"desc":"asc"}}})},E=({label:ve,col:st,type:jt,className:Dt})=>{const $t=_[jt]||{col:"name",dir:"asc"},tt=$t.col===st;return s.jsx("th",{className:`cursor-pointer select-none group p-4 ${Dt??""}`,onClick:()=>w(jt,st),children:s.jsxs("div",{className:`flex items-center gap-1 ${Dt!=null&&Dt.includes("text-center")?"justify-center":"justify-start"}`,children:[s.jsx("span",{children:ve}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(g1,{className:`w-2.5 h-2.5 -mb-0.5 ${tt&&$t.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(gi,{className:`w-2.5 h-2.5 -mt-0.5 ${tt&&$t.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[I,R]=T.useState(""),[L,C]=T.useState(jr.AP_PHYSICS),[O,A]=T.useState(""),[j,k]=T.useState(""),[z,D]=T.useState(!1),[$,B]=T.useState(!1),[G,K]=T.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[H,J]=T.useState(10),[ae,he]=T.useState("single"),[fe,Y]=T.useState([]),[ne,re]=T.useState(!1),ye=T.useRef(null),[Te,Ve]=T.useState(null),[Je,Xe]=T.useState(""),[ie,Be]=T.useState(""),Q=t.filter(ve=>ve.role==="STUDENT"),te=T.useMemo(()=>{const ve=new Set;return Q.forEach(st=>{st.classSections&&Object.values(st.classSections).forEach(jt=>{jt&&ve.add(jt)}),st.section&&ve.add(st.section)}),Array.from(ve).sort()},[Q]),_e=async(ve,st,jt)=>{try{jt?await Re.updateUserClassSection(ve,jt,st):await Re.updateUserSection(ve,st),Ve(null),Xe(""),Be(""),a.success(`Section updated to ${st||"none"}${jt?` for ${jt}`:""}`)}catch{a.error("Failed to update section")}},Se=async ve=>{if(o.size!==0)try{await Promise.all(Array.from(o).map(st=>Re.updateUserSection(st,ve))),c(new Set),a.success(`Set ${o.size} students to ${ve}`)}catch{a.error("Failed to bulk update sections")}},Qe=T.useMemo(()=>e.filter(ve=>!t.some(st=>st.email.toLowerCase()===ve.email.toLowerCase())),[e,t]),nt=T.useMemo(()=>[...Array.from(new Set([...Object.values(jr).filter(st=>st!==jr.UNCATEGORIZED),...r.map(st=>st.className)])).sort(),jr.UNCATEGORIZED],[r]),Ot=ve=>{const st=Q.filter($t=>{var tt,ar;return((tt=$t.enrolledClasses)==null?void 0:tt.includes(ve))||ve===jr.UNCATEGORIZED&&(((ar=$t.enrolledClasses)==null?void 0:ar.length)===0||!$t.enrolledClasses)}),jt=st.every($t=>o.has($t.id)),Dt=new Set(o);st.forEach($t=>{jt?Dt.delete($t.id):Dt.add($t.id)}),c(Dt)},Me=ve=>{const st=new Set(o);st.has(ve)?st.delete(ve):st.add(ve),c(st)},lt=async()=>{if(o.size>0){const ve=Array.from(o).map(async st=>{const jt=t.find(Dt=>Dt.id===st);if(jt){const Dt=jt.enrolledClasses||[],$t=Array.from(new Set([...Dt.filter(tt=>tt!==jr.UNCATEGORIZED),d]));await Re.updateUserEnrolledClasses(st,$t)}});await Promise.all(ve),c(new Set)}},St=async ve=>{if(o.size>0){if(!await i({message:`Remove ${o.size} students from ${ve}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const st=Array.from(o).map(async jt=>{const Dt=t.find($t=>$t.id===jt);if(Dt){const tt=(Dt.enrolledClasses||[]).filter(ar=>ar!==ve);await Re.updateUserEnrolledClasses(jt,tt)}});await Promise.all(st),c(new Set)}},vt=async(ve,st)=>{if(await i({message:`Remove ${ve.name} from ${st}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Dt=(ve.enrolledClasses||[]).filter($t=>$t!==st);await Re.updateUserEnrolledClasses(ve.id,Dt)}},et=async(ve,st)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${st}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Re.removeUser(ve)},ce=async ve=>{ve!==jr.UNCATEGORIZED&&await i({message:`Delete group config ${ve}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Re.deleteClassConfig(ve)},Ue=async ve=>{await i({message:`Cancel invite for ${ve}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Re.removeFromWhitelist(ve)},Ze=(ve,st)=>{ve!==jr.UNCATEGORIZED&&(k(ve),D(!0),st?(K(st.features),J(st.xpPerMinute||10)):(K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),J(10)),x(!0))},ht=ve=>{ve.preventDefault(),n(I,L),O.trim()&&Re.updateWhitelistSection(I,O.trim()),R(""),A(""),m(!1)},dt=ve=>{var Dt;const st=(Dt=ve.target.files)==null?void 0:Dt[0];if(!st)return;const jt=new FileReader;jt.onload=$t=>{var Gt,Ut;const tt=(Gt=$t.target)==null?void 0:Gt.result;if(!tt)return;const ar=tt.split(/\r?\n/).filter(_t=>_t.trim()),br=(Ut=ar[0])!=null&&Ut.toLowerCase().includes("email")?1:0,Br=new Set(e.map(_t=>_t.email.toLowerCase())),dn=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,vr=ar.slice(br).map(_t=>{const $r=_t.includes("	")?_t.split("	"):_t.split(","),an=($r[0]||"").trim().toLowerCase(),Wr=($r[1]||"").trim()||jr.AP_PHYSICS,Ur=($r[2]||"").trim();let hn="pending";return dn.test(an)?Br.has(an)&&(hn="duplicate"):hn="invalid",{email:an,classType:Wr,section:Ur,status:hn}}).filter(_t=>_t.email.length>0);Y(vr)},jt.readAsText(st),ve.target.value=""},zt=async()=>{const ve=fe.filter(jt=>jt.status==="pending");if(ve.length===0)return;re(!0);let st=0;for(const jt of ve)try{await Re.addToWhitelist(jt.email,jt.classType),jt.section&&await Re.updateWhitelistSection(jt.email,jt.section),jt.status="success",st++}catch{jt.status="invalid"}Y([...fe]),re(!1),a.success(`${st} operative${st!==1?"s":""} imported successfully.`),fe.every(jt=>jt.status==="success"||jt.status==="duplicate")&&setTimeout(()=>{m(!1),Y([]),he("single")},1500)},tr=async ve=>{if(ve.preventDefault(),!!j){B(!0);try{await Re.saveClassConfig({id:j,className:j,features:G,xpPerMinute:H}),k(""),x(!1),D(!1)}catch(st){console.error("Failed to save config:",st),a.error("Failed to save class configuration.")}finally{B(!1)}}},Cr=ve=>{const st=ve===jr.UNCATEGORIZED,jt=_[ve]||{col:"name",dir:"asc"},Dt=[...Q.filter(tt=>{var ar;return((ar=tt.enrolledClasses)==null?void 0:ar.includes(ve))||st&&(!tt.enrolledClasses||tt.enrolledClasses.length===0)})].sort((tt,ar)=>{var br,Br,dn,vr;switch(jt.col){case"section":{const Gt=tt.section||"",Ut=ar.section||"";return jt.dir==="asc"?Gt.localeCompare(Ut):Ut.localeCompare(Gt)}case"status":{const Gt=tt.isWhitelisted?1:0,Ut=ar.isWhitelisted?1:0;return jt.dir==="asc"?Gt-Ut:Ut-Gt}case"lastSeen":{const Gt=tt.lastLoginAt?new Date(tt.lastLoginAt).getTime():0,Ut=ar.lastLoginAt?new Date(ar.lastLoginAt).getTime():0;return jt.dir==="asc"?Gt-Ut:Ut-Gt}case"xp":{const Gt=((Br=(br=tt.gamification)==null?void 0:br.classXp)==null?void 0:Br[ve])||0,Ut=((vr=(dn=ar.gamification)==null?void 0:dn.classXp)==null?void 0:vr[ve])||0;return jt.dir==="asc"?Gt-Ut:Ut-Gt}case"name":default:return jt.dir==="asc"?tt.name.localeCompare(ar.name):ar.name.localeCompare(tt.name)}}),$t=r.find(tt=>tt.className===ve);return s.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${st?"opacity-90":""}`,children:[s.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${st?"bg-orange-500/10":"bg-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:`font-bold text-lg tracking-wide ${st?"text-orange-300":"text-white"}`,children:[st&&s.jsx($2,{className:"w-5 h-5 inline mr-2 mb-1"}),ve]}),s.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${st?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Dt.length," Registered"]}),!st&&s.jsx("button",{onClick:()=>Ze(ve,$t),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:s.jsx(ig,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[o.size>0&&Array.from(o).some(tt=>Dt.find(ar=>ar.id===tt))&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("select",{onChange:tt=>{tt.target.value&&Se(tt.target.value),tt.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),s.jsx("option",{value:"",children:"No Section"}),te.map(tt=>s.jsx("option",{value:tt,children:tt},tt))]})}),s.jsxs("button",{onClick:()=>St(ve),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[s.jsx($le,{className:"w-3 h-3"})," Remove Selected"]})]}),!st&&s.jsxs("button",{onClick:()=>ce(ve),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[s.jsx(In,{className:"w-3 h-3"}),"Config"]})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[s.jsx("th",{className:"w-12 p-4 text-center",children:Dt.length>0&&s.jsx("button",{onClick:()=>Ot(ve),className:"hover:text-purple-400 transition",children:s.jsx(SR,{className:"w-4 h-4"})})}),s.jsx(E,{label:"Operative",col:"name",type:ve}),s.jsx(E,{label:"Section",col:"section",type:ve,className:"text-center"}),s.jsx(E,{label:"System Status",col:"status",type:ve,className:"text-center"}),s.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Dt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 italic text-sm",children:st?"No restricted operatives found.":"No students registered in this roster yet."})}):Dt.map(tt=>{var ar;return s.jsxs("tr",{className:`hover:bg-white/5 transition group ${o.has(tt.id)?"bg-purple-500/10":""}`,children:[s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>Me(tt.id),className:"text-gray-500 hover:text-purple-400 transition",children:o.has(tt.id)?s.jsx(Rle,{className:"w-4 h-4 text-purple-500"}):s.jsx(SR,{className:"w-4 h-4 group-hover:text-gray-400"})})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:tt.avatarUrl,alt:tt.name,className:"w-8 h-8 rounded-full border border-white/10"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:tt.name}),s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:tt.email})]})]})}),s.jsx("td",{className:"p-4 text-center",children:Te===tt.id?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((ar=tt.enrolledClasses)!=null&&ar.length?tt.enrolledClasses:[tt.classType].filter(Boolean)).map(br=>{var dn;if(!br)return null;const Br=((dn=tt.classSections)==null?void 0:dn[br])||(tt.section&&tt.classType===br?tt.section:"");return s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:br,children:br}),s.jsxs("select",{value:Br,onChange:vr=>{const Gt=vr.target.value;Gt==="__custom__"?(Xe("__custom__"),Be("")):_e(tt.id,Gt,br)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[s.jsx("option",{value:"",children:"None"}),te.map(vr=>s.jsx("option",{value:vr,children:vr},vr)),s.jsx("option",{value:"__custom__",children:"+ New"})]})]},br)}),Je==="__custom__"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{value:ie,onChange:br=>Be(br.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:br=>{var Br;if(br.key==="Enter"&&ie.trim()){const dn=(Br=tt.enrolledClasses)!=null&&Br.length?tt.enrolledClasses:[tt.classType].filter(Boolean);dn[0]&&_e(tt.id,ie.trim(),dn[0])}},autoFocus:!0}),s.jsx("button",{onClick:()=>{var br;if(ie.trim()){const Br=(br=tt.enrolledClasses)!=null&&br.length?tt.enrolledClasses:[tt.classType].filter(Boolean);Br[0]&&_e(tt.id,ie.trim(),Br[0])}},className:"text-green-400 hover:text-green-300 p-1",children:s.jsx(Ea,{className:"w-3 h-3"})})]}),s.jsx("button",{onClick:()=>{Ve(null),Xe(""),Be("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):s.jsx("button",{onClick:()=>{Ve(tt.id),Xe(""),Be("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${tt.classSections&&Object.keys(tt.classSections).length>0||tt.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:tt.classSections&&Object.keys(tt.classSections).length>0?Object.values(tt.classSections).filter(Boolean).join(", ")||"Assign":tt.section||"Assign"})}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${tt.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[tt.isWhitelisted?s.jsx(bR,{className:"w-3 h-3"}):s.jsx(V2,{className:"w-3 h-3"}),tt.isWhitelisted?"Authorized":"Restricted"]})}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx("button",{onClick:()=>st?et(tt.id,tt.name):vt(tt,ve),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:st?"Permanently Delete":"Remove from this Class",children:s.jsx(aa,{className:"w-4 h-4"})})})})]},tt.id)})})]})})]},ve)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),s.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{k(""),K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),D(!1),x(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[s.jsx(ig,{className:"w-4 h-4"}),"Class Config"]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[s.jsx(Wv,{className:"w-4 h-4"}),"Invite Student"]})]})]}),Qe.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[s.jsx(ble,{className:"w-4 h-4"})," Pending Class Invitations (",Qe.length,")"]}),s.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),s.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Qe.map(ve=>s.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:ve.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(bR,{className:"w-3 h-3 text-amber-500"}),s.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(ve.classTypes||[ve.classType]).join(", ")," Access"]})]})]}),s.jsx("button",{onClick:()=>Ue(ve.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:s.jsx(In,{className:"w-3.5 h-3.5"})})]},ve.email))})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:d,onChange:ve=>h(ve.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:nt.filter(ve=>ve!==jr.UNCATEGORIZED).map(ve=>s.jsxs("option",{value:ve,children:["Apply ",ve," Access"]},ve))}),s.jsx(gi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),s.jsxs("button",{onClick:lt,disabled:o.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[s.jsx(Ea,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),s.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[o.size," SELECTION ACTIVE"]})]}),s.jsx("div",{className:"pb-12",children:nt.map(ve=>Cr(ve))}),s.jsxs(Ai,{isOpen:p,onClose:()=>{m(!1),Y([]),he("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[s.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[s.jsxs("button",{onClick:()=>{he("single"),Y([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ae==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(Wv,{className:"w-3.5 h-3.5"})," Single"]}),s.jsxs("button",{onClick:()=>he("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ae==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(i0,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),ae==="single"?s.jsxs("form",{onSubmit:ht,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),s.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:I,onChange:ve=>R(ve.target.value),placeholder:"student@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),s.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:ve=>C(ve.target.value),children:nt.filter(ve=>ve!==jr.UNCATEGORIZED).map(ve=>s.jsx("option",{value:ve,children:ve},ve))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),s.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:O,onChange:ve=>A(ve.target.value),placeholder:"e.g. Period 3, Block A"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[s.jsx("input",{type:"file",ref:ye,accept:".csv,.tsv,.txt",onChange:dt,className:"hidden"}),fe.length===0?s.jsxs(s.Fragment,{children:[s.jsx(i0,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),s.jsx("button",{onClick:()=>{var ve;return(ve=ye.current)==null?void 0:ve.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",s.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),s.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:s.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",s.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",s.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",s.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(a0,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm font-bold text-white",children:[fe.length," records parsed"]}),s.jsx("button",{onClick:()=>{Y([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),fe.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[s.jsx("th",{className:"p-2 pl-3",children:"Email"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Section"}),s.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:fe.map((ve,st)=>s.jsxs("tr",{className:ve.status==="invalid"?"bg-red-500/5":ve.status==="duplicate"?"bg-yellow-500/5":ve.status==="success"?"bg-green-500/5":"",children:[s.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:ve.email}),s.jsx("td",{className:"p-2 text-gray-400",children:ve.classType}),s.jsx("td",{className:"p-2 text-gray-500",children:ve.section||""}),s.jsx("td",{className:"p-2 pr-3 text-right",children:s.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${ve.status==="pending"?"bg-blue-500/20 text-blue-400":ve.status==="success"?"bg-green-500/20 text-green-400":ve.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:ve.status})})]},st))})]})}),s.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("span",{className:"text-blue-400",children:[fe.filter(ve=>ve.status==="pending").length," ready"]}),s.jsxs("span",{className:"text-yellow-400",children:[fe.filter(ve=>ve.status==="duplicate").length," duplicates"]}),s.jsxs("span",{className:"text-red-400",children:[fe.filter(ve=>ve.status==="invalid").length," invalid"]}),fe.some(ve=>ve.status==="success")&&s.jsxs("span",{className:"text-green-400",children:[fe.filter(ve=>ve.status==="success").length," imported"]})]})}),fe.filter(ve=>ve.status==="duplicate").length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[s.jsx(Is,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),s.jsx("button",{onClick:zt,disabled:ne||fe.filter(ve=>ve.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ne?s.jsxs(s.Fragment,{children:[s.jsx(Ti,{className:"w-4 h-4 animate-spin"})," Importing..."]}):s.jsxs(s.Fragment,{children:["Import ",fe.filter(ve=>ve.status==="pending").length," Operatives"]})})]})]})]}),s.jsx(Ai,{isOpen:y,onClose:()=>x(!1),title:z?"Edit Class Node Config":"Initialize New Class Node",children:s.jsxs("form",{onSubmit:tr,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:j,onChange:ve=>k(ve.target.value),placeholder:"e.g. AP Physics Period 4"}),z&&s.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsLab,onChange:ve=>K({...G,physicsLab:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.evidenceLocker,onChange:ve=>K({...G,evidenceLocker:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.leaderboard,onChange:ve=>K({...G,leaderboard:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.physicsTools,onChange:ve=>K({...G,physicsTools:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:G.communications,onChange:ve=>K({...G,communications:ve.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"number",min:1,max:100,value:H,onChange:ve=>J(Math.max(1,Math.min(100,parseInt(ve.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),s.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),s.jsx("button",{type:"submit",disabled:$,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${$?"opacity-70 cursor-not-allowed":""}`,children:$?s.jsxs(s.Fragment,{children:[s.jsx(Ti,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):z?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},eu={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},vM={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},a0e=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,i0e=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,s0e=({assignment:t,isOpen:e,onClose:r})=>{const n=qa(),a=T.useRef(null),[i,o]=T.useState([]),[c,d]=T.useState(!0),[h,p]=T.useState(!1),[m,y]=T.useState(t.category==="Practice Set"?"reading":"manage"),[x,_]=T.useState(null),[S,w]=T.useState(null),[E,I]=T.useState(""),[R,L]=T.useState(null),[C,O]=T.useState(!1),[A,j]=T.useState(null),[k,z]=T.useState({}),[D,$]=T.useState(null),[B,G]=T.useState(!0),[K,H]=T.useState(null),[J,ae]=T.useState(null),[he,fe]=T.useState(null),[Y,ne]=T.useState(!1),re=T.useRef(null),ye=t.category==="Practice Set";T.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const lt=await da(ot(Ie,"question_banks",t.id));lt.exists()?o(lt.data().questions||[]):o([]);const St=await da(ot(Ie,"reading_materials",t.id));St.exists()?H(St.data()):H(null)}catch(lt){console.error("Failed to load bank:",lt),o([])}finally{d(!1)}})()},[e,t.id]);const Te=async Me=>{p(!0);try{await Wn(ot(Ie,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Me,questionCount:Me.length,updatedAt:new Date().toISOString()}),o(Me)}catch(lt){n.error("Failed to save: "+(lt instanceof Error?lt.message:"Unknown error"))}finally{p(!1)}},Ve=async Me=>{const lt=i.filter(St=>St.id!==Me);await Te(lt),n.success("Question removed."),R===Me&&L(null)},Je=async()=>{try{await Xa(ot(Ie,"question_banks",t.id)),o([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Xe=()=>{navigator.clipboard.writeText(a0e(t.title,t.classType,t.description)),O(!0),setTimeout(()=>O(!1),2e3),n.success("Prompt copied!")},ie=()=>{navigator.clipboard.writeText(i0e(t.title,t.classType,t.description)),ne(!0),setTimeout(()=>ne(!1),2e3),n.success("Reading prompt copied!")},Be=async Me=>{var St;const lt=(St=Me.target.files)==null?void 0:St[0];if(lt){fe(null),ae(null);try{let et=(await lt.text()).replace(/```json\s*|```\s*/g,"").trim();et=et.replace(/[\x00-\x1F\x7F]/g,Ze=>Ze===`
`||Ze==="\r"||Ze==="	"?" ":"");let ce;try{ce=JSON.parse(et)}catch{const Ze=et.match(/\{[\s\S]*\}/);if(Ze)ce=JSON.parse(Ze[0]);else throw new Error("No JSON object found.")}if(!ce.title||!ce.sections||!Array.isArray(ce.sections))throw new Error("Missing required fields: title and sections array.");const Ue=ce.sections.filter(Ze=>!Ze.title||!Ze.content);if(Ue.length>0)throw new Error(`${Ue.length} section(s) missing title or content.`);ae(ce)}catch(vt){fe(vt instanceof Error?vt.message:"Parse failed.")}re.current&&(re.current.value="")}},Q=async()=>{if(J){p(!0);try{await Wn(ot(Ie,"reading_materials",t.id),{...J,assignmentId:t.id,updatedAt:new Date().toISOString()}),H(J),ae(null),n.success(`Study material uploaded: ${J.sections.length} sections!`)}catch(Me){n.error("Failed to save: "+(Me instanceof Error?Me.message:"Unknown error"))}finally{p(!1)}}},te=async()=>{p(!0);try{await Xa(ot(Ie,"reading_materials",t.id)),H(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},_e=async Me=>{var St;const lt=(St=Me.target.files)==null?void 0:St[0];if(lt){$(null),j(null);try{let et=(await lt.text()).replace(/```json\s*|```\s*/g,"").trim();et=et.replace(/[\x00-\x1F\x7F]/g,dt=>dt===`
`||dt==="\r"||dt==="	"?" ":"");let ce;try{ce=JSON.parse(et)}catch{const dt=et.match(/\[[\s\S]*\]/);if(dt)try{ce=JSON.parse(dt[0])}catch{const zt=dt[0];let tr=null;for(let Cr=zt.length-1;Cr>0;Cr--)if(zt[Cr]==="}")try{tr=JSON.parse(zt.slice(0,Cr+1)+"]");break}catch{}if(tr)ce=tr;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let zt=null;const tr="["+et;for(let Cr=tr.length-1;Cr>0;Cr--)if(tr[Cr]==="}")try{zt=JSON.parse(tr.slice(0,Cr+1)+"]");break}catch{}if(zt)ce=zt;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(ce)||ce.length===0)throw new Error("Must be a non-empty JSON array.");const Ue=ce.filter(dt=>dt.id&&dt.tier&&dt.type&&dt.stem&&dt.options&&dt.correctAnswer),Ze=ce.length-Ue.length;if(Ue.length===0){$("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const ht={};Ue.forEach(dt=>{const zt=dt.tier;ht[zt]=(ht[zt]||0)+1}),j(Ue),z(ht),Ze>0&&n.success(`Parsed ${Ue.length} questions (${Ze} skipped  missing fields).`)}catch(vt){$(vt instanceof Error?vt.message:"Parse failed.")}a.current&&(a.current.value="")}},Se=async()=>{if(!A)return;let Me;if(B&&i.length>0){const lt=new Set(i.map(vt=>vt.id)),St=A.map((vt,et)=>({...vt,id:lt.has(vt.id)?`${vt.id}_${Date.now()}_${et}`:vt.id}));Me=[...i,...St]}else Me=A;await Te(Me),n.success(`${B?"Added":"Replaced with"} ${A.length} questions. Total: ${Me.length}`),j(null),y("manage")},Qe=T.useMemo(()=>{let Me=i;if(x&&(Me=Me.filter(lt=>lt.tier===x)),S&&(Me=Me.filter(lt=>lt.type===S)),E){const lt=E.toLowerCase();Me=Me.filter(St=>St.stem.toLowerCase().includes(lt)||St.id.toLowerCase().includes(lt))}return Me},[i,x,S,E]),nt=T.useMemo(()=>{const Me={1:0,2:0,3:0};return i.forEach(lt=>{Me[lt.tier]=(Me[lt.tier]||0)+1}),Me},[i]),Ot=T.useMemo(()=>{const Me={};return i.forEach(lt=>{Me[lt.type]=(Me[lt.type]||0)+1}),Me},[i]);return e?s.jsx(Ai,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:s.jsxs("div",{className:"text-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[s.jsx(Ch,{className:"w-5 h-5 text-purple-400 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),s.jsx("div",{className:"text-xs mt-1",children:c?s.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?s.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):s.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&s.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Me=>s.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${eu[Me].bg} ${eu[Me].border} border`,children:[s.jsx("div",{className:`text-sm font-bold ${eu[Me].text}`,children:nt[Me]}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Me]})]},Me))})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[!ye&&s.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Ch,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!ye&&s.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Ea,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),s.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(as,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",K?`(${K.sections.length})`:""]})]}),m==="manage"&&s.jsx("div",{className:"space-y-3",children:c?s.jsx("div",{className:"py-12 text-center",children:s.jsx(Ti,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx(Ch,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[s.jsx(y1,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{value:E,onChange:Me=>I(Me.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>_(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${x?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Me=>s.jsxs("button",{onClick:()=>_(x===Me?null:Me),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${x===Me?`${eu[Me].bg} ${eu[Me].text} ${eu[Me].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Me," (",nt[Me],")"]},Me))]})]}),Object.keys(Ot).length>1&&s.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Ot).sort((Me,lt)=>lt[1]-Me[1]).map(([Me,lt])=>s.jsxs("button",{onClick:()=>w(S===Me?null:Me),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${S===Me?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[vM[Me]||Me," (",lt,")"]},Me))}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:Qe.length===0?s.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):Qe.map(Me=>{const lt=eu[Me.tier]||eu[1],St=R===Me.id;return s.jsxs("div",{className:`rounded-xl border transition ${St?`${lt.border} ${lt.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>L(St?null:Me.id),children:[s.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${lt.bg} ${lt.text}`,children:["T",Me.tier]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[s.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Me.id}),s.jsx("span",{className:"text-[8px] text-gray-600",children:""}),s.jsx("span",{className:"text-[8px] text-gray-500",children:vM[Me.type]||Me.type}),s.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(Yn,{className:"w-2.5 h-2.5"}),Me.xp]})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Me.stem})]}),s.jsx(_u,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${St?"rotate-90":""}`})]}),St&&s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Me.context&&s.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Me.context}),s.jsx("div",{className:"space-y-1",children:Me.options.map(vt=>{const et=Array.isArray(Me.correctAnswer)?Me.correctAnswer.includes(vt.id):Me.correctAnswer===vt.id;return s.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${et?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[s.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[vt.id.toUpperCase(),"."]}),s.jsx("span",{children:vt.text}),et&&s.jsx(nn,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},vt.id)})}),s.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Me.explanation]}),Me.linkedFollowUp&&s.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold",children:"Follow-up: "}),Me.linkedFollowUp.stem]}),s.jsxs("button",{onClick:()=>Ve(Me.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[s.jsx(In,{className:"w-3 h-3"})," Delete Question"]})]})]},Me.id)})}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[s.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",Qe.length," of ",i.length]}),s.jsxs("button",{onClick:Je,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(In,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),s.jsx("button",{onClick:Xe,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${C?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:C?s.jsxs(s.Fragment,{children:[s.jsx(nn,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Jh,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",s.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[s.jsx(Vv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:_e,className:"hidden"})]})]}),D&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Is,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:D})]}),A&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nn,{className:"w-4 h-4 text-emerald-400"}),s.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[A.length," questions parsed"]})]}),s.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Me=>s.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[s.jsx("div",{className:"text-base font-bold text-white",children:k[Me]||0}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Me]})]},Me))}),i.length>0&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>G(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[s.jsx(Ea,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",A.length,")"]}),s.jsxs("button",{onClick:()=>G(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${B?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[s.jsx(Iu,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Se,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(Ti,{className:"w-4 h-4 animate-spin"}):s.jsx(i0,{className:"w-4 h-4"}),h?"Saving...":`Upload ${A.length} Questions`]}),s.jsx("button",{onClick:()=>j(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(In,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&s.jsxs("div",{className:"space-y-5",children:[K?s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(as,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:K.title})]}),s.jsxs("button",{onClick:te,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(In,{className:"w-3 h-3"})," Remove"]})]}),K.description&&s.jsx("p",{className:"text-xs text-gray-400",children:K.description}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:[K.sections.length," sections"]}),K.estimatedMinutes&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["~",K.estimatedMinutes," min read"]})]})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:K.sections.map((Me,lt)=>s.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:lt+1}),s.jsx("span",{className:"truncate",children:Me.title})]},lt))})]}):s.jsxs("div",{className:"py-6 text-center",children:[s.jsx(as,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),s.jsx("button",{onClick:ie,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${Y?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:Y?s.jsxs(s.Fragment,{children:[s.jsx(nn,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Jh,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[s.jsx(Vv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:re,type:"file",accept:".json,.txt",onChange:Be,className:"hidden"})]})]}),he&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Is,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:he})]}),J&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nn,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:J.title})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[J.sections.length," sections  ~",J.estimatedMinutes||"?"," min read"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Q,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(Ti,{className:"w-4 h-4 animate-spin"}):s.jsx(i0,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),s.jsx("button",{onClick:()=>ae(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(In,{className:"w-4 h-4"})})]})]})]}),h&&s.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[s.jsx(Ti,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},bM=[{type:"TEXT",label:"Text",icon:s.jsx(Dle,{className:"w-4 h-4"}),description:"Plain text content"},{type:"MC",label:"Multiple Choice",icon:s.jsx($2,{className:"w-4 h-4"}),description:"Question with options"},{type:"SHORT_ANSWER",label:"Short Answer",icon:s.jsx(tf,{className:"w-4 h-4"}),description:"Free-text question"},{type:"VOCABULARY",label:"Vocabulary",icon:s.jsx(as,{className:"w-4 h-4"}),description:"Term & definition card"},{type:"CHECKLIST",label:"Checklist",icon:s.jsx(J8,{className:"w-4 h-4"}),description:"Completable task list"},{type:"INFO_BOX",label:"Info Box",icon:s.jsx(z2,{className:"w-4 h-4"}),description:"Tip, warning, or note"}],LG=()=>`block_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,o0e=t=>{const e={id:LG(),type:t,content:""};switch(t){case"MC":return{...e,options:["",""],correctAnswer:0};case"SHORT_ANSWER":return{...e,acceptedAnswers:[""]};case"VOCABULARY":return{...e,term:"",definition:""};case"CHECKLIST":return{...e,items:[""]};case"INFO_BOX":return{...e,variant:"note"};default:return e}},l0e=({block:t,onUpdate:e})=>s.jsx("textarea",{value:t.content,onChange:r=>e({...t,content:r.target.value}),placeholder:"Enter text content...",className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none min-h-[80px] focus:outline-none focus:border-purple-500/50 transition",rows:3}),c0e=({block:t,onUpdate:e})=>{const r=t.options||["",""],n=()=>e({...t,options:[...r,""]}),a=o=>{if(r.length<=2)return;const c=r.filter((h,p)=>p!==o),d=t.correctAnswer===o?0:(t.correctAnswer||0)>o?(t.correctAnswer||0)-1:t.correctAnswer;e({...t,options:c,correctAnswer:d})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,options:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Enter the question...",className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Options (click radio to mark correct)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>e({...t,correctAnswer:c}),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 transition ${t.correctAnswer===c?"border-green-500 bg-green-500":"border-gray-600 hover:border-gray-400"}`,children:t.correctAnswer===c&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Option ${String.fromCharCode(65+c)}`,className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"}),r.length>2&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(In,{className:"w-3.5 h-3.5"})})]},c)),r.length<6&&s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Ea,{className:"w-3 h-3"})," Add Option"]})]})]})},u0e=({block:t,onUpdate:e})=>{const r=t.acceptedAnswers||[""],n=()=>e({...t,acceptedAnswers:[...r,""]}),a=o=>{r.length<=1||e({...t,acceptedAnswers:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,acceptedAnswers:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Enter the question...",className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",rows:2}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Accepted Answers (case-insensitive)"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Accepted answer ${c+1}`,className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(In,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Ea,{className:"w-3 h-3"})," Add Accepted Answer"]})]})]})},d0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",children:"Term"}),s.jsx("input",{type:"text",value:t.term||"",onChange:r=>e({...t,term:r.target.value}),placeholder:"Term...",className:"w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",children:"Definition"}),s.jsx("input",{type:"text",value:t.definition||"",onChange:r=>e({...t,definition:r.target.value}),placeholder:"Definition...",className:"w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"})]})]}),h0e=({block:t,onUpdate:e})=>{const r=t.items||[""],n=()=>e({...t,items:[...r,""]}),a=o=>{r.length<=1||e({...t,items:r.filter((c,d)=>d!==o)})},i=(o,c)=>{const d=[...r];d[o]=c,e({...t,items:d})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:t.content,onChange:o=>e({...t,content:o.target.value}),placeholder:"Checklist title/instructions...",className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",rows:1}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Items"}),r.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-5 h-5 rounded border-2 border-gray-600 shrink-0"}),s.jsx("input",{type:"text",value:o,onChange:d=>i(c,d.target.value),placeholder:`Item ${c+1}`,className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"}),r.length>1&&s.jsx("button",{type:"button",onClick:()=>a(c),className:"p-1 text-red-400 hover:bg-red-500/10 rounded transition",children:s.jsx(In,{className:"w-3.5 h-3.5"})})]},c)),s.jsxs("button",{type:"button",onClick:n,className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1 transition",children:[s.jsx(Ea,{className:"w-3 h-3"})," Add Item"]})]})]})},f0e=({block:t,onUpdate:e})=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",children:"Variant"}),s.jsx("div",{className:"flex gap-2",children:["tip","warning","note"].map(r=>s.jsx("button",{type:"button",onClick:()=>e({...t,variant:r}),className:`px-3 py-1.5 rounded-lg border text-xs font-bold capitalize transition ${t.variant===r?r==="tip"?"bg-green-500/20 border-green-500/30 text-green-400":r==="warning"?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-blue-500/20 border-blue-500/30 text-blue-400":"bg-black/30 border-white/10 text-gray-400 hover:text-white"}`,children:r},r))})]}),s.jsx("textarea",{value:t.content,onChange:r=>e({...t,content:r.target.value}),placeholder:"Info box content...",className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",rows:2})]}),p0e=({block:t,onUpdate:e})=>{switch(t.type){case"TEXT":return s.jsx(l0e,{block:t,onUpdate:e});case"MC":return s.jsx(c0e,{block:t,onUpdate:e});case"SHORT_ANSWER":return s.jsx(u0e,{block:t,onUpdate:e});case"VOCABULARY":return s.jsx(d0e,{block:t,onUpdate:e});case"CHECKLIST":return s.jsx(h0e,{block:t,onUpdate:e});case"INFO_BOX":return s.jsx(f0e,{block:t,onUpdate:e});default:return null}},m0e=({blocks:t,onChange:e})=>{const[r,n]=T.useState(!1),[a,i]=T.useState(!1),o=T.useCallback(y=>{e([...t,o0e(y)]),n(!1)},[t,e]),c=T.useCallback((y,x)=>{const _=[...t];_[y]=x,e(_)},[t,e]),d=T.useCallback(y=>{e(t.filter((x,_)=>_!==y))},[t,e]),h=T.useCallback((y,x)=>{const _=y+x;if(_<0||_>=t.length)return;const S=[...t];[S[y],S[_]]=[S[_],S[y]],e(S)},[t,e]),p=T.useCallback(y=>{const x={...t[y],id:LG()},_=[...t];_.splice(y+1,0,x),e(_)},[t,e]),m=y=>bM.find(x=>x.type===y);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:["Lesson Blocks (",t.length,")"]}),t.length>0&&s.jsxs("button",{type:"button",onClick:()=>i(!a),className:`flex items-center gap-1.5 text-xs font-bold px-3 py-1.5 rounded-lg border transition ${a?"bg-purple-600/20 border-purple-500/30 text-purple-300":"bg-white/5 border-white/10 text-gray-400 hover:text-white"}`,children:[a?s.jsx(Hv,{className:"w-3.5 h-3.5"}):s.jsx(n0,{className:"w-3.5 h-3.5"}),a?"Edit":"Preview"]})]}),a&&t.length>0?s.jsx("div",{className:"bg-[#0f0720]/80 border border-white/10 rounded-2xl p-6",children:s.jsx(LH,{blocks:t})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-3",children:t.map((y,x)=>{const _=m(y.type);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden hover:border-white/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-black/20 border-b border-white/5",children:[s.jsx(SH,{className:"w-4 h-4 text-gray-600 shrink-0"}),s.jsx("span",{className:"text-gray-500",children:_==null?void 0:_.icon}),s.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex-1",children:[_==null?void 0:_.label," #",x+1]}),s.jsxs("div",{className:"flex items-center gap-0.5",children:[s.jsx("button",{type:"button",onClick:()=>h(x,-1),disabled:x===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-20 transition",title:"Move up",children:s.jsx(g1,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>h(x,1),disabled:x===t.length-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-20 transition",title:"Move down",children:s.jsx(gi,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>p(x),className:"p-1 text-gray-500 hover:text-blue-400 transition",title:"Duplicate",children:s.jsx(Jh,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>d(x),className:"p-1 text-gray-500 hover:text-red-400 transition",title:"Delete block",children:s.jsx(In,{className:"w-3.5 h-3.5"})})]})]}),s.jsx("div",{className:"p-4",children:s.jsx(p0e,{block:y,onUpdate:S=>c(x,S)})})]},y.id)})}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>n(!r),className:"w-full py-3 border-2 border-dashed border-white/10 rounded-2xl text-gray-500 hover:text-purple-400 hover:border-purple-500/30 transition flex items-center justify-center gap-2 text-sm font-bold",children:[s.jsx(Ea,{className:"w-4 h-4"})," Add Block"]}),r&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl p-2 z-50 grid grid-cols-2 gap-1",children:bM.map(y=>s.jsxs("button",{type:"button",onClick:()=>o(y.type),className:"flex items-center gap-3 p-3 rounded-xl text-left hover:bg-white/5 transition group",children:[s.jsx("span",{className:"text-gray-500 group-hover:text-purple-400 transition",children:y.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-bold text-gray-300",children:y.label}),s.jsx("div",{className:"text-[10px] text-gray-600",children:y.description})]})]},y.type))})]})]})]})},wM=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],g0e={Textbook:s.jsx(as,{className:"w-4 h-4"}),Simulation:s.jsx(Y8,{className:"w-4 h-4"}),"Lab Guide":s.jsx(U2,{className:"w-4 h-4"}),"Practice Set":s.jsx(tl,{className:"w-4 h-4"}),Article:s.jsx(AH,{className:"w-4 h-4"}),"Video Lesson":s.jsx(OH,{className:"w-4 h-4"}),Supplemental:s.jsx(Z8,{className:"w-4 h-4"})},y0e=({assignments:t,submissions:e,classConfigs:r,users:n,onCreateAssignment:a,onPreviewAssignment:i,availableSections:o=[]})=>{const c=qa(),{confirm:d}=ko(),[h,p]=T.useState(!1),[m,y]=T.useState(!1),[x,_]=T.useState(!1),[S,w]=T.useState("All Classes"),[E,I]=T.useState("All Categories"),[R,L]=T.useState(new Set),[C,O]=T.useState(null),[A,j]=T.useState({title:"",description:"",status:Da.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[],lessonBlocks:[]}),[k,z]=T.useState(new Set([jr.AP_PHYSICS])),[D,$]=T.useState([]),[B,G]=T.useState(""),[K,H]=T.useState(!1),J=T.useMemo(()=>n.filter(ie=>ie.role==="STUDENT"),[n]),ae=T.useMemo(()=>{const ie=Object.values(jr).filter(Q=>Q!==jr.UNCATEGORIZED),Be=(r||[]).map(Q=>Q.className);return Array.from(new Set(["All Classes",...ie,...Be]))},[r]),he=T.useMemo(()=>{const ie=Array.from(k)[0];if(!ie)return o;const Be=Qx(J,ie);return Be.length>0?Be:o},[k,J,o]),fe=T.useMemo(()=>t.filter(ie=>{const Be=S==="All Classes"||ie.classType===S,Q=E==="All Categories"||ie.category===E;return Be&&Q}),[t,S,E]),Y=T.useMemo(()=>{const ie={};return fe.forEach(Be=>{const Q=S==="All Classes"?`${Be.classType.toUpperCase()}  ${Be.unit||"Unassigned"}`:Be.unit||"Unassigned";ie[Q]||(ie[Q]=[]),ie[Q].push(Be)}),Object.keys(ie).sort().reduce((Be,Q)=>(Be[Q]=ie[Q],Be),{})},[fe,S]),ne=async(ie,Be)=>{if(k.size===0){c.error("Select a target class.");return}_(!0);try{const Q=D.length>0?{targetSections:D}:{},te=Be?{scheduledAt:new Date(Be).toISOString()}:{},_e={...A,status:ie,...Q,...te};m&&A.id?await a({..._e,classType:Array.from(k)[0]}):await Promise.all(Array.from(k).map(Se=>a({..._e,classType:Se}))),p(!1),y(!1),G(""),c.success(ie===Da.DRAFT?"Draft saved.":Be?"Deployment scheduled.":"Resource deployed.")}catch(Q){console.error(Q)}finally{_(!1)}},re=async ie=>{ie.preventDefault(),await ne(Da.ACTIVE)},ye=async ie=>{await Re.updateAssignmentStatus(ie.id,Da.ACTIVE),c.success(`"${ie.title}" deployed.`)},Te=ie=>{j(ie),z(new Set([ie.classType])),$(ie.targetSections||[]),G(ie.scheduledAt?ie.scheduledAt.slice(0,16):""),y(!0),p(!0)},Ve=async ie=>{const Be=ie.status===Da.ACTIVE?Da.ARCHIVED:Da.ACTIVE;await Re.updateAssignmentStatus(ie.id,Be)},Je=T.useMemo(()=>[...Array.isArray(e)?e:[]].sort((Be,Q)=>{const te=new Date(Be.submittedAt||0).getTime();return new Date(Q.submittedAt||0).getTime()-te}),[e]),Xe=ie=>ie.status===Da.DRAFT?s.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Draft"}):ie.scheduledAt&&new Date(ie.scheduledAt)>new Date?s.jsxs("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1",children:[s.jsx(gR,{className:"w-3 h-3"}),new Date(ie.scheduledAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):null;return s.jsxs("div",{className:"space-y-8 pb-12",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),s.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),s.jsxs("button",{onClick:()=>{j({title:"",description:"",status:Da.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[],lessonBlocks:[]}),$([]),G(""),y(!1),p(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[s.jsx(Ea,{className:"w-5 h-5"})," Deploy Resource"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[s.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:S,onChange:ie=>w(ie.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:ae.map(ie=>s.jsx("option",{value:ie,children:ie},ie))}),s.jsx(gi,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:E,onChange:ie=>I(ie.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),wM.map(ie=>s.jsx("option",{value:ie,children:ie},ie))]}),s.jsx(gi,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(Y).map(([ie,Be])=>s.jsxs("div",{className:"mb-6 last:mb-0",children:[s.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[s.jsx("button",{onClick:()=>{const Q=new Set(R);Q.has(ie)?Q.delete(ie):Q.add(ie),L(Q)},className:"text-gray-400 hover:text-white transition",children:R.has(ie)?s.jsx(gi,{className:"w-4 h-4"}):s.jsx(_u,{className:"w-4 h-4"})}),s.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:ie}),s.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!R.has(ie)&&s.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:Be.map(Q=>{const te=Xe(Q);return s.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${Q.status===Da.ARCHIVED?"bg-white/2 border-white/5 opacity-60":Q.status===Da.DRAFT?"bg-blue-900/10 border-blue-500/20":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${Q.status===Da.DRAFT?"bg-blue-500/20 text-blue-400":Q.status===Da.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:Q.status===Da.DRAFT?s.jsx(a0,{className:"w-4 h-4"}):g0e[Q.category||"Supplemental"]}),s.jsxs("div",{className:"truncate flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:Q.title}),te,s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:Q.classType})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:Q.description})]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[Q.status===Da.DRAFT&&s.jsx("button",{onClick:()=>ye(Q),className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition",title:"Deploy Now",children:s.jsx(kH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>O(Q),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:s.jsx(Ao,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>i==null?void 0:i(Q.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:s.jsx(Nle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Te(Q),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:s.jsx(Hv,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ve(Q),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:Q.status===Da.ACTIVE?s.jsx(Zoe,{className:"w-4 h-4"}):s.jsx(n0,{className:"w-4 h-4"})}),s.jsx("button",{onClick:async()=>{await d({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Re.deleteAssignment(Q.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:s.jsx(In,{className:"w-4 h-4"})})]})]},Q.id)})})]},ie))})]}),s.jsx("div",{className:"lg:col-span-4",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[s.jsx(to,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),s.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[Je.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[s.jsx(to,{className:"w-10 h-10 text-gray-700 mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),Je.map(ie=>s.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:ie.userName}),s.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:ie.assignmentTitle})]}),s.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(ie.score)," XP"]})]}),s.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[s.jsxs("span",{children:[Math.round(ie.metrics.engagementTime/60),"m active"]}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(ie.submittedAt||"").toLocaleDateString()})]})]},ie.id))]})]})})]}),s.jsx(Ai,{isOpen:h,onClose:()=>p(!1),title:m?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:s.jsxs("form",{onSubmit:re,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),s.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:A.title,onChange:ie=>j({...A,title:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),s.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:A.unit,onChange:ie=>j({...A,unit:ie.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),s.jsx("select",{value:A.category,onChange:ie=>j({...A,category:ie.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:wM.map(ie=>s.jsx("option",{value:ie,children:ie},ie))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ae.filter(ie=>ie!=="All Classes").map(ie=>s.jsx("button",{type:"button",onClick:()=>{const Be=new Set(k);Be.has(ie)?Be.size>1&&Be.delete(ie):Be.add(ie),z(Be),$([])},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${k.has(ie)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:ie},ie))})]}),s.jsx(lg,{availableSections:he,selectedSections:D,onChange:$}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[s.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),s.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async ie=>{var Be;if((Be=ie.target.files)!=null&&Be[0]){H(!0);try{const Q=await Re.uploadHtmlResource(ie.target.files[0]);j({...A,contentUrl:Q}),c.success("File uploaded!")}catch(Q){c.error("Upload failed: "+(Q instanceof Error?Q.message:"Unknown error"))}finally{H(!1)}}}}),K&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[s.jsx(Ti,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!K&&A.contentUrl&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[s.jsx(r0,{className:"w-4 h-4"})," Resource uploaded"]})]}),s.jsx("div",{className:"bg-indigo-900/20 border border-indigo-500/30 p-5 rounded-2xl",children:s.jsx(m0e,{blocks:A.lessonBlocks||[],onChange:ie=>j({...A,lessonBlocks:ie})})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:A.description,onChange:ie=>j({...A,description:ie.target.value})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Schedule Deployment ",s.jsx("span",{className:"text-gray-600",children:"(optional  leave blank for immediate)"})]}),s.jsx("input",{type:"datetime-local",value:B,onChange:ie=>G(ie.target.value),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",disabled:x,onClick:()=>ne(Da.DRAFT),className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:[s.jsx(a0,{className:"w-4 h-4"})," Save Draft"]}),B?s.jsx("button",{type:"button",disabled:x,onClick:()=>ne(Da.ACTIVE,B),className:"flex-[2] bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:x?s.jsx(Ti,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(gR,{className:"w-4 h-4"})," Schedule Deployment"]})}):s.jsx("button",{type:"submit",disabled:x,className:"flex-[2] bg-purple-600 hover:bg-purple-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:x?s.jsx(Ti,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})]})}),C&&s.jsx(s0e,{assignment:C,isOpen:!!C,onClose:()=>O(null)})]})},BG=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),s.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),s.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),s.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:s.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),s.jsxs("g",{filter:"url(#b-glow)",children:[s.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),s.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),s.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),s.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>s.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),x0e=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),s.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:s.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),s.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>s.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[s.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),s.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),s.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),s.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),s.jsxs("g",{filter:"url(#p-glow)",children:[s.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),s.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),s.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),s.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return s.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[s.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),v0e=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),s.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),s.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),s.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),s.jsxs("g",{filter:"url(#s-glow)",children:[s.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),s.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),s.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>s.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),s.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>s.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),b0e={BRUTE:BG,PHANTOM:x0e,SERPENT:v0e},$G=({bossType:t,hue:e,size:r})=>{const n=b0e[t]||BG;return s.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:s.jsx(n,{hue:e})})},w0e=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],S0e=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,o]=T.useState(null),c=T.useMemo(()=>{var x;if(!t)return[];const y=Object.keys(((x=t.gamification)==null?void 0:x.classProfiles)||{});return y.length>0?y:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=T.useMemo(()=>{var x,_;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((x=t.gamification)==null?void 0:x.inventory)||[],equipped:((_=t.gamification)==null?void 0:_.equipped)||{}};const y=Lu(t,d);return{inventory:y.inventory,equipped:y.equipped}},[t,d]);return t?s.jsx(Ai,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:s.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:s.jsx(Ea,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:s.jsx(aa,{className:"w-4 h-4"})})]})]})]}),c.length>1&&s.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(y=>s.jsx("button",{onClick:()=>o(y),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===y?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:y==="_legacy"?"Global":y},y))}),s.jsxs("div",{className:"border-b border-white/5 pb-6",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&s.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:w0e.map(y=>{var _;const x=(_=h.equipped)==null?void 0:_[y];return s.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${x?ua(x.rarity).border+" "+ua(x.rarity).bg:"border-white/10 bg-black/20"}`,children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:x.name}),s.jsx("button",{onClick:()=>n(t,y,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:s.jsx(aa,{className:"w-3 h-3"})})]}):s.jsx("span",{className:"text-[8px] text-gray-600",children:y})},y)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((y,x)=>s.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${ua(y.rarity).border}`,children:[s.jsx("div",{className:`text-[8px] font-bold ${ua(y.rarity).text} text-center truncate w-full`,children:y.name}),s.jsx("div",{className:"text-[8px] text-gray-500",children:y.slot}),s.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:s.jsx("button",{onClick:()=>r(t,y,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:s.jsx(In,{className:"w-4 h-4"})})})]},x)),h.inventory.length===0&&s.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},_0e=[10,50,100,-10,-50,-100],N0e=({user:t,onClose:e,onAdjust:r})=>{var o;const[n,a]=T.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return s.jsx(Ai,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((o=t.gamification)==null?void 0:o.xp)||0," XP"]})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:_0e.map(c=>s.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),s.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},T0e=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&s.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return s.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),s.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[s.jsx(tl,{className:"w-3 h-3"}),n.quest.title]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),s.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),s.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&s.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:s.jsx(sle,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),s.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:s.jsx(ql,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:s.jsx(aa,{className:"w-5 h-5"})})]})]})]})]},a)})]}),M3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},A0e=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:o,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return s.jsx(Ai,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:s.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),s.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),s.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),s.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),s.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),s.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),s.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),s.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"All Classes"}),Object.values(jr).filter(h=>h!=="Uncategorized").map(h=>s.jsx("option",{value:h,children:h},h))]})]})]}),s.jsx(lg,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),s.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),s.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),s.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),s.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"COMMON",children:"Common"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&s.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),s.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),s.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),s.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),s.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),s.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),s.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[i&&s.jsx("button",{type:"button",disabled:o,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),s.jsx("button",{type:"submit",disabled:o,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:o?"Transmitting...":"Broadcast Mission"})]})]})})},j0e={Operatives:"OPERATIVES","XP Protocols":"PROTOCOLS",Missions:"MISSIONS","Mission Control":"MISSION_CONTROL","Boss Ops":"BOSS_OPS",Tutoring:"TUTORING"},E0e=({users:t,initialTab:e})=>{const r=qa(),{confirm:n}=ko(),a=e&&j0e[e]||"OPERATIVES",[i,o]=T.useState(""),[c,d]=T.useState("All Classes"),[h,p]=T.useState("All Sections"),[m,y]=T.useState("xp"),[x,_]=T.useState("desc"),S=q=>{m===q?_(be=>be==="asc"?"desc":"asc"):(y(q),_("asc"))},w=({label:q,col:be,className:Ae})=>s.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Ae??""}`,onClick:()=>S(be),children:s.jsxs("div",{className:`flex items-center gap-1 ${Ae!=null&&Ae.includes("text-center")?"justify-center":Ae!=null&&Ae.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(g1,{className:`w-2.5 h-2.5 -mb-0.5 ${m===be&&x==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(gi,{className:`w-2.5 h-2.5 -mt-0.5 ${m===be&&x==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[E,I]=T.useState([]),[R,L]=T.useState([]),[C,O]=T.useState(null),[A,j]=T.useState(null),[k,z]=T.useState(!1),[D,$]=T.useState(!1),[B,G]=T.useState(M3),[K,H]=T.useState(!1),[J,ae]=T.useState([]),[he,fe]=T.useState(null),[Y,ne]=T.useState(""),[re,ye]=T.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:jr.AP_PHYSICS,targetSections:[]}),[Te,Ve]=T.useState([]),[Je,Xe]=T.useState(!1),[ie,Be]=T.useState(null),[Q,te]=T.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[_e,Se]=T.useState(!1),Qe=T.useRef(null),[nt,Ot]=T.useState(null),[Me,lt]=T.useState([]),[St,vt]=T.useState("bosses"),[et,ce]=T.useState(!1),[Ue,Ze]=T.useState(null),[ht,dt]=T.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),zt=T.useRef(null),[tr,Cr]=T.useState(null),[ve,st]=T.useState([]),[jt,Dt]=T.useState(null),[$t,tt]=T.useState([]),[ar,br]=T.useState(!1),[Br,dn]=T.useState("pending"),[vr,Gt]=T.useState([]);T.useEffect(()=>{const q=Re.subscribeToXPEvents(I),be=Re.subscribeToQuests(L),Ae=Re.subscribeToAllBossQuizzes(Ve),je=Re.subscribeToAllTutoringSessions(Gt),mt=Re.subscribeToBossQuestionBanks(lt);return()=>{q(),be(),Ae(),je(),mt()}},[]),T.useEffect(()=>{const q=[];t.forEach(be=>{var Ae,je;(je=(Ae=be.gamification)==null?void 0:Ae.activeQuests)==null||je.forEach(mt=>{const It=R.find(At=>At.id===mt.questId);It&&(mt.status==="DEPLOYED"||mt.status==="ACCEPTED")&&q.push({user:be,quest:It,status:mt.status,roll:mt.deploymentRoll,acceptedAt:mt.acceptedAt})})}),ae(q)},[t,R,a]);const Ut=T.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),_t=T.useMemo(()=>{const q=new Set;return Ut.forEach(be=>{be.classSections?Object.values(be.classSections).forEach(Ae=>{Ae&&q.add(Ae)}):be.section&&q.add(be.section)}),Array.from(q).sort()},[Ut]),$r=T.useMemo(()=>{if(re.type!=="CLASS_SPECIFIC"||!re.targetClass)return _t;const q=Qx(Ut,re.targetClass);return q.length>0?q:_t},[re.type,re.targetClass,Ut,_t]),an=T.useMemo(()=>{if(!B.targetClass)return _t;const q=Qx(Ut,B.targetClass);return q.length>0?q:_t},[B.targetClass,Ut,_t]),Wr=T.useMemo(()=>{if(Q.classType==="GLOBAL"||!Q.classType)return _t;const q=Qx(Ut,Q.classType);return q.length>0?q:_t},[Q.classType,Ut,_t]),Ur=q=>{var Ae,je;const be=(Ae=q.gamification)==null?void 0:Ae.classProfiles;return be&&Object.keys(be).length>0?Object.values(be).reduce((mt,It)=>mt+o0(It.equipped),0):o0((je=q.gamification)==null?void 0:je.equipped)},hn=T.useMemo(()=>Ut.filter(q=>{var It;const be=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),Ae=c==="All Classes"||q.classType===c||((It=q.enrolledClasses)==null?void 0:It.includes(c)),je=q.classSections?Object.values(q.classSections):[],mt=h==="All Sections"||q.section===h||je.includes(h);return be&&Ae&&mt}).sort((q,be)=>{var Ae,je,mt,It,At,Yt,wr,ue,xe,Pe;switch(m){case"name":return x==="asc"?q.name.localeCompare(be.name):be.name.localeCompare(q.name);case"class":return x==="asc"?(q.classType||"").localeCompare(be.classType||""):(be.classType||"").localeCompare(q.classType||"");case"level":{const Fe=((Ae=q.gamification)==null?void 0:Ae.level)||1,qe=((je=be.gamification)==null?void 0:je.level)||1;return x==="asc"?Fe-qe:qe-Fe}case"flux":{const Fe=((mt=q.gamification)==null?void 0:mt.currency)||0,qe=((It=be.gamification)==null?void 0:It.currency)||0;return x==="asc"?Fe-qe:qe-Fe}case"gear":{const Fe=Ur(q),qe=Ur(be);return x==="asc"?Fe-qe:qe-Fe}case"xp":default:{const Fe=c!=="All Classes"?((Yt=(At=q.gamification)==null?void 0:At.classXp)==null?void 0:Yt[c])||0:((wr=q.gamification)==null?void 0:wr.xp)||0,qe=c!=="All Classes"?((xe=(ue=be.gamification)==null?void 0:ue.classXp)==null?void 0:xe[c])||0:((Pe=be.gamification)==null?void 0:Pe.xp)||0;return x==="asc"?Fe-qe:qe-Fe}}}),[Ut,i,c,h,m,x]),cr=async(q,be)=>{try{await Re.adjustUserXP(q.id,be,q.classType||jr.UNCATEGORIZED),r.success(`${be>0?"+":""}${be} XP applied to ${q.name}.`)}catch{r.error("Failed to adjust XP.")}O(null)},ya=async q=>{q.preventDefault();const be={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!0,type:re.type};re.type==="CLASS_SPECIFIC"&&(be.targetClass=re.targetClass),re.targetSections.length>0&&(be.targetSections=re.targetSections),await Re.saveXPEvent(be),z(!1),ye({title:"",multiplier:2,type:"GLOBAL",targetClass:jr.AP_PHYSICS,targetSections:[]})},fn=async q=>{q.preventDefault(),H(!0);try{const be={};B.techReq>0&&(be.tech=B.techReq),B.focusReq>0&&(be.focus=B.focusReq),B.analysisReq>0&&(be.analysis=B.analysisReq),B.charismaReq>0&&(be.charisma=B.charismaReq);const Ae=new Date;Ae.setHours(Ae.getHours()+(B.durationHours||0));const je={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!0,type:B.type,statRequirements:be,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:B.durationHours>0?Ae.toISOString():null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await Re.saveQuest(je),r.success(`Mission "${je.title}" deployed.`),G(M3),$(!1)}catch(be){console.error("Failed to issue mission:",be),r.error("Failed to issue mission.")}finally{H(!1)}},kn=async q=>{await Re.saveXPEvent({...q,isActive:!q.isActive})},ni=async q=>{const be={...q,isActive:!q.isActive};be.isActive&&(be.expiresAt=null),await Re.saveQuest(be)},Nr=async(q,be,Ae)=>{var It,At;if(!await n({message:`Confiscate ${be.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const mt=(Ae?Lu(q,Ae):{inventory:((It=q.gamification)==null?void 0:It.inventory)||[]}).inventory.filter(Yt=>Yt.id!==be.id);await Re.adminUpdateInventory(q.id,mt,((At=q.gamification)==null?void 0:At.currency)||0,Ae),j(Yt=>{var wr,ue;return Yt?Ae&&((ue=(wr=Yt.gamification)==null?void 0:wr.classProfiles)!=null&&ue[Ae])?{...Yt,gamification:{...Yt.gamification,classProfiles:{...Yt.gamification.classProfiles,[Ae]:{...Yt.gamification.classProfiles[Ae],inventory:mt}}}}:{...Yt,gamification:{...Yt.gamification,inventory:mt}}:null})},pn=async(q,be,Ae)=>{var It;if(!await n({message:`Force unequip ${be} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const mt={...(Ae?Lu(q,Ae):{equipped:{...(It=q.gamification)==null?void 0:It.equipped}}).equipped};delete mt[be],await Re.adminUpdateEquipped(q.id,mt,Ae),j(At=>{var Yt,wr;return At?Ae&&((wr=(Yt=At.gamification)==null?void 0:Yt.classProfiles)!=null&&wr[Ae])?{...At,gamification:{...At.gamification,classProfiles:{...At.gamification.classProfiles,[Ae]:{...At.gamification.classProfiles[Ae],equipped:mt}}}}:{...At,gamification:{...At.gamification,equipped:mt}}:null})},ai=async(q,be)=>{var je,mt;const Ae=Math.max(0,(((je=q.gamification)==null?void 0:je.currency)||0)+be);await Re.adminUpdateInventory(q.id,((mt=q.gamification)==null?void 0:mt.inventory)||[],Ae),j(It=>It?{...It,gamification:{...It.gamification,currency:Ae}}:null)},Hn=async(q,be,Ae,je)=>{try{await Re.resolveQuest(q,be,Ae,je),r.success(Ae?`Mission "${be.title}" approved.`:`Mission "${be.title}" rejected.`)}catch{r.error("Failed to resolve mission.")}},Jr=async q=>{const be=q.quest.rollDieSides||20,Ae=Math.floor(Math.random()*be)+1;r.info(`Rolled a ${Ae} on a D${be}. ${Ae===be?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Hn(q.user.id,q.quest,Ae===be,q.user.classType)},mn=async q=>{try{await Re.updateCodename(q,Y.trim().slice(0,24)),r.success("Code name updated.")}catch{r.error("Failed to update code name.")}fe(null)},Nn=async(q,be)=>{try{await Re.toggleCodenameLock(q,be),r.success(be?"Codename locked.":"Codename unlocked.")}catch{r.error("Failed to update lock.")}},ii=q=>{var be,Ae,je,mt,It;if(q)Be(q),te({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((be=q.rewards)==null?void 0:be.xp)||500,rewardFlux:((Ae=q.rewards)==null?void 0:Ae.flux)||100,rewardItemRarity:((je=q.rewards)==null?void 0:je.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(At=>({...At,damageBonus:At.damageBonus||0})),targetSections:q.targetSections||[],bossType:((mt=q.bossAppearance)==null?void 0:mt.bossType)||"BRUTE",bossHue:((It=q.bossAppearance)==null?void 0:It.hue)??0}),st(q.modifiers||[]);else{Be(null);const At=new Date;At.setDate(At.getDate()+7),te({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:At.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),st([])}Xe(!0)},Ga=()=>{te(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},ji=(q,be,Ae)=>{te(je=>{const mt=[...je.questions];return mt[q]={...mt[q],[be]:Ae},{...je,questions:mt}})},cs=(q,be,Ae)=>{te(je=>{const mt=[...je.questions],It=[...mt[q].options];return It[be]=Ae,mt[q]={...mt[q],options:It},{...je,questions:mt}})},xi=q=>{te(be=>({...be,questions:be.questions.filter((Ae,je)=>je!==q)}))},Nt=async q=>{if(q.preventDefault(),Q.questions.length===0){r.error("Add at least one question.");return}try{const be=[...new Set(Q.questions.map(je=>je.bankId).filter(Boolean))],Ae={id:(ie==null?void 0:ie.id)||Math.random().toString(36).substring(2,12),bossName:Q.bossName,description:Q.description,maxHp:Q.maxHp,currentHp:(ie==null?void 0:ie.currentHp)??Q.maxHp,classType:Q.classType,isActive:(ie==null?void 0:ie.isActive)??!0,deadline:new Date(Q.deadline).toISOString(),damagePerCorrect:Q.damagePerCorrect,questions:Q.questions.map(je=>({id:je.id,stem:je.stem,options:je.options.filter(mt=>mt.trim()),correctAnswer:je.correctAnswer,difficulty:je.difficulty,...je.damageBonus>0?{damageBonus:je.damageBonus}:{},...je.bankId?{bankId:je.bankId}:{}})),rewards:{xp:Q.rewardXp,flux:Q.rewardFlux,...Q.rewardItemRarity?{itemRarity:Q.rewardItemRarity}:{}},...Q.targetSections.length>0?{targetSections:Q.targetSections}:{},bossAppearance:{bossType:Q.bossType,hue:Q.bossHue},...ve.length>0?{modifiers:ve}:{},...be.length>0?{questionBankIds:be}:{}};await Re.saveBossQuiz(Ae),r.success(ie?"Quiz boss updated.":"Quiz boss deployed!"),Xe(!1)}catch{r.error("Failed to save quiz boss.")}},pe=async q=>{await Re.toggleBossQuizActive(q.id,!q.isActive)},rt=async q=>{await n({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Re.deleteBossQuiz(q.id),r.success("Quiz boss deleted."))},ft=q=>{q?(Ze(q),dt({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(be=>({...be,damageBonus:be.damageBonus||0}))})):(Ze(null),dt({name:"",classType:"GLOBAL",description:"",questions:[]})),Cr(null),ce(!0)},Xt=async q=>{if(q.preventDefault(),ht.questions.length===0){r.error("Add at least one question.");return}try{const be=new Date().toISOString(),Ae={id:(Ue==null?void 0:Ue.id)||Math.random().toString(36).substring(2,12),name:ht.name,classType:ht.classType,description:ht.description,questions:ht.questions.map(je=>({id:je.id,stem:je.stem,options:je.options.filter(mt=>mt.trim()),correctAnswer:je.correctAnswer,difficulty:je.difficulty,...je.damageBonus>0?{damageBonus:je.damageBonus}:{}})),createdAt:(Ue==null?void 0:Ue.createdAt)||be,updatedAt:be};await Re.saveBossQuestionBank(Ae),r.success(Ue?"Question bank updated.":"Question bank created!"),ce(!1)}catch{r.error("Failed to save question bank.")}},hr=async q=>{await n({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Re.deleteBossQuestionBank(q.id),r.success("Question bank deleted."))},sn=async(q,be)=>{var mt;const Ae=(mt=q.target.files)==null?void 0:mt[0];if(!Ae)return;const je=be==="bank"?Cr:Ot;je(null);try{let At=(await Ae.text()).replace(/```json\s*|```\s*/g,"").trim();At=At.replace(/[\x00-\x1F\x7F]/g,Pe=>Pe===`
`||Pe==="\r"||Pe==="	"?" ":"");let Yt;try{Yt=JSON.parse(At)}catch{const Pe=At.match(/\[[\s\S]*\]/);if(Pe)try{Yt=JSON.parse(Pe[0])}catch{let Fe=null;for(let qe=Pe[0].length-1;qe>0;qe--)if(Pe[0][qe]==="}")try{Fe=JSON.parse(Pe[0].slice(0,qe+1)+"]");break}catch{}if(Fe)Yt=Fe;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(Yt)||Yt.length===0)throw new Error("Must be a non-empty JSON array.");const wr=Yt.filter(Pe=>Pe.stem&&Pe.options&&Pe.correctAnswer!==void 0);if(wr.length===0)throw new Error("No valid questions found.");const ue=wr.map(Pe=>({id:Pe.id||Math.random().toString(36).substring(2,10),stem:Pe.stem,options:Pe.options.slice(0,4),correctAnswer:typeof Pe.correctAnswer=="number"?Pe.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(Pe.difficulty)?Pe.difficulty:"MEDIUM",damageBonus:typeof Pe.damageBonus=="number"?Pe.damageBonus:0})),xe=Yt.length-wr.length;be==="bank"?dt(Pe=>({...Pe,questions:[...Pe.questions,...ue]})):te(Pe=>({...Pe,questions:[...Pe.questions,...ue]})),r.success(`Imported ${ue.length} questions${xe>0?` (${xe} skipped)`:""}`)}catch(It){je(It instanceof Error?It.message:"Import failed."),r.error("Failed to import questions.")}be==="bank"&&zt.current&&(zt.current.value=""),be==="boss"&&Qe.current&&(Qe.current.value="")},Kr=q=>{const be=q.questions.map(Ae=>({...Ae,damageBonus:Ae.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));te(Ae=>({...Ae,questions:[...Ae.questions,...be]})),r.success(`Imported ${be.length} questions from "${q.name}"`)},gn=q=>{st(be=>{if(be.find(mt=>mt.type===q))return be.filter(mt=>mt.type!==q);const je=tT[q];return[...be,{type:q,...je.hasValue?{value:je.defaultValue}:{}}]})},Or=(q,be)=>{st(Ae=>Ae.map(je=>je.type===q?{...je,value:be}:je))},Ms=async q=>{Dt(q),br(!0);try{const be=await Re.getBossQuizAllProgress(q.id);tt(be)}catch{r.error("Failed to load endgame data.")}br(!1)},us=(q,be)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${be||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,lo=()=>{const q=us(Q.bossName,Q.classType);navigator.clipboard.writeText(q),Se(!0),setTimeout(()=>Se(!1),2500),r.success("Prompt copied to clipboard!")},hl=q=>sn(q,"boss"),ds=async(q,be)=>{try{const Ae=await Re.completeTutoring(q,be);r.success(`Verified! Tutor earned ${Ae.xpAwarded} XP and ${Ae.fluxAwarded} Flux`)}catch{r.error("Failed to verify session")}},hs=async q=>{if(await n({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await Re.cancelTutoringSession(q),r.success("Session cancelled.")}catch{r.error("Failed to cancel session")}},Ra=vr.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),xa={OPERATIVES:"Operatives",PROTOCOLS:"XP Protocols",MISSIONS:"Missions",MISSION_CONTROL:"Mission Control",BOSS_OPS:"Boss Ops",TUTORING:"Tutoring"};return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:xa[a]}),s.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="PROTOCOLS"&&s.jsxs("button",{onClick:()=>z(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[s.jsx(kH,{className:"w-4 h-4"})," Deploy Protocol"]}),a==="MISSIONS"&&s.jsxs("button",{onClick:()=>$(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[s.jsx(L2,{className:"w-4 h-4"})," Issue Mission"]}),a==="BOSS_OPS"&&s.jsxs("button",{onClick:()=>ii(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[s.jsx(Ao,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:s.jsxs("div",{className:"p-6",children:[a==="OPERATIVES"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(y1,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>o(q.target.value)})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[hn.length," operatives"]}),s.jsxs("div",{className:"relative",children:[s.jsx(hle,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Classes"}),Object.values(jr).map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(gi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),_t.length>0&&s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Sections"}),_t.map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(gi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[s.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),s.jsx(w,{label:"Class",col:"class"}),s.jsx(w,{label:"Level",col:"level",className:"text-center"}),s.jsx(w,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),s.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),s.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),s.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:hn.map(q=>{var mt,It,At,Yt,wr,ue,xe,Pe,Fe;const be=((mt=q.gamification)==null?void 0:mt.level)||1,Ae=((It=q.gamification)==null?void 0:It.currency)||0,je=q.enrolledClasses||(q.classType?[q.classType]:[]);return s.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"py-3 pl-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),he===q.id?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{autoFocus:!0,value:Y,onChange:qe=>ne(qe.target.value),maxLength:24,onKeyDown:qe=>{qe.key==="Enter"&&mn(q.id),qe.key==="Escape"&&fe(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),s.jsx("button",{onClick:()=>mn(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:s.jsx(ql,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>fe(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:s.jsx(aa,{className:"w-3 h-3"})})]}):s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:()=>{var qe;fe(q.id),ne(((qe=q.gamification)==null?void 0:qe.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((At=q.gamification)==null?void 0:At.codename)||"UNASSIGNED",s.jsx(u3,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),s.jsx("button",{onClick:()=>{var qe;return Nn(q.id,!((qe=q.gamification)!=null&&qe.codenameLocked))},className:`transition ${(Yt=q.gamification)!=null&&Yt.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(wr=q.gamification)!=null&&wr.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(ue=q.gamification)!=null&&ue.codenameLocked?s.jsx(ef,{className:"w-2.5 h-2.5"}):s.jsx(vle,{className:"w-2.5 h-2.5"})})]})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:je.map(qe=>s.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:qe},qe))})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-lg font-black text-white",children:be})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((Pe=(xe=q.gamification)==null?void 0:xe.classXp)==null?void 0:Pe[c])||0:((Fe=q.gamification)==null?void 0:Fe.xp)||0).toLocaleString()})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Ae})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:Ur(q)})}),s.jsx("td",{className:"py-3 text-right pr-4",children:s.jsxs("div",{className:"flex justify-end gap-1.5",children:[s.jsxs("button",{onClick:()=>j(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(zv,{className:"w-3 h-3"})," Inventory"]}),s.jsxs("button",{onClick:()=>O(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Ea,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),a==="PROTOCOLS"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[E.map(q=>s.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&s.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(Yn,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>Re.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(In,{className:"w-4 h-4"})})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),s.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),s.jsx("button",{onClick:()=>kn(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),s.jsxs("button",{onClick:()=>z(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx(Ea,{className:"w-6 h-6"})}),s.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),a==="MISSIONS"&&s.jsx("div",{className:"space-y-4",children:R.map(q=>s.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(rl,{className:"w-7 h-7"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),s.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&s.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([be,Ae])=>s.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Ae," ",be]},be))}),s.jsxs("div",{className:"flex gap-3 mt-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("button",{onClick:()=>ni(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),s.jsx("button",{onClick:()=>Re.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(In,{className:"w-4 h-4"})})]})]},q.id))}),a==="MISSION_CONTROL"&&s.jsx(T0e,{deployments:J,onResolveQuest:Hn,onRollForSalvation:Jr}),a==="BOSS_OPS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>vt("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${St==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Ih,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",Te.length,")"]}),s.jsxs("button",{onClick:()=>vt("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${St==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Ch,{className:"w-3 h-3 inline mr-1"})," Question Banks (",Me.length,")"]})]}),St==="bosses"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),Te.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Ao,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),s.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),Te.map(q=>{var mt,It;const be=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,Ae=new Date(q.deadline)<new Date,je=(q.currentHp??q.maxHp)<=0||!q.isActive;return s.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!Ae?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!Ae?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(Ao,{className:"w-7 h-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),s.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(mt=q.modifiers)!=null&&mt.length?s.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(It=q.targetSections)!=null&&It.length?s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,Ae&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),je&&s.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),s.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:s.jsx("div",{className:`h-full rounded-full transition-all ${be>50?"bg-amber-500":be>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${be}%`}})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[je&&s.jsxs("button",{onClick:()=>Ms(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(B2,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),s.jsxs("button",{onClick:()=>ii(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(u3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>pe(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("button",{onClick:()=>rt(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(In,{className:"w-4 h-4"})})]})]},q.id)})]}),St==="banks"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),s.jsxs("button",{onClick:()=>ft(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[s.jsx(Ea,{className:"w-3 h-3"})," New Bank"]})]}),Me.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Ch,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No question banks yet."}),s.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),Me.map(q=>s.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:s.jsx(Ch,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&s.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>ft(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[s.jsx(u3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>hr(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(In,{className:"w-4 h-4"})})]})]},q.id))]})]}),a==="TUTORING"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>dn("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Br==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",Ra.length,")"]}),s.jsxs("button",{onClick:()=>dn("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Br==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",vr.length,")"]})]}),(Br==="pending"?Ra:vr).length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Ru,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:Br==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(Br==="pending"?Ra:vr).map(q=>s.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Sle,{className:"w-4 h-4 text-gray-500"}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),s.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["Requester: ",s.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&s.jsxs("span",{children:["Tutor: ",s.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),s.jsxs("span",{children:["Class: ",s.jsx("span",{className:"text-purple-400",children:q.classType})]}),s.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&s.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&s.jsxs("button",{onClick:()=>ds(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(nn,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>hs(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(aa,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&s.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[s.jsx(nn,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})}),s.jsx(S0e,{user:A,onClose:()=>j(null),onDeleteItem:Nr,onUnequipItem:pn,onGrantFlux:ai}),s.jsx(A0e,{isOpen:D,onClose:()=>$(!1),form:B,setForm:G,onSubmit:fn,onSaveDraft:async()=>{const q={};B.techReq>0&&(q.tech=B.techReq),B.focusReq>0&&(q.focus=B.focusReq),B.analysisReq>0&&(q.analysis=B.analysisReq),B.charismaReq>0&&(q.charisma=B.charismaReq);const be={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!1,type:B.type,statRequirements:q,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await Re.saveQuest(be),r.success("Mission saved as draft (standby)."),G(M3),$(!1)},isSubmitting:K,availableSections:an}),s.jsx(Ai,{isOpen:k,onClose:()=>z(!1),title:"New XP Protocol Deployment",children:s.jsxs("form",{onSubmit:ya,className:"space-y-4 text-gray-100 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),s.jsx("input",{value:re.title,onChange:q=>ye({...re,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),s.jsx("input",{type:"number",step:"0.5",value:re.multiplier,onChange:q=>ye({...re,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),s.jsxs("select",{value:re.type,onChange:q=>ye({...re,type:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[s.jsx("option",{value:"GLOBAL",children:"Global Node"}),s.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),re.type==="CLASS_SPECIFIC"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),s.jsx("select",{value:re.targetClass,onChange:q=>ye({...re,targetClass:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(jr).map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsx(lg,{availableSections:$r,selectedSections:re.targetSections,onChange:q=>ye({...re,targetSections:q})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:async()=>{const q={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!1,type:re.type,...re.type==="CLASS_SPECIFIC"?{targetClass:re.targetClass}:{},...re.targetSections.length>0?{targetSections:re.targetSections}:{}};await Re.saveXPEvent(q),z(!1),ye({title:"",multiplier:2,type:"GLOBAL",targetClass:jr.AP_PHYSICS,targetSections:[]}),r.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),s.jsx(N0e,{user:C,onClose:()=>O(null),onAdjust:cr}),s.jsx(Ai,{isOpen:Je,onClose:()=>Xe(!1),title:ie?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:Nt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),s.jsx("input",{value:Q.bossName,onChange:q=>te({...Q,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("textarea",{value:Q.description,onChange:q=>te({...Q,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:s.jsx($G,{bossType:Q.bossType,hue:Q.bossHue})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),s.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>s.jsx("button",{type:"button",onClick:()=>te({...Q,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${Q.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",Q.bossHue,""]}),s.jsx("input",{type:"range",min:"0",max:"360",value:Q.bossHue,onChange:q=>te({...Q,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),s.jsx("input",{type:"number",value:Q.maxHp,onChange:q=>te({...Q,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),s.jsx("input",{type:"number",value:Q.damagePerCorrect,onChange:q=>te({...Q,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:Q.classType,onChange:q=>te({...Q,classType:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(jr).map(q=>s.jsx("option",{value:q,children:q},q))]})]})]}),s.jsx(lg,{availableSections:Wr,selectedSections:Q.targetSections,onChange:q=>te({...Q,targetSections:q})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),s.jsx("input",{type:"datetime-local",value:Q.deadline,onChange:q=>te({...Q,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),s.jsx("input",{type:"number",value:Q.rewardXp,onChange:q=>te({...Q,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),s.jsx("input",{type:"number",value:Q.rewardFlux,onChange:q=>te({...Q,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),s.jsxs("select",{value:Q.rewardItemRarity,onChange:q=>te({...Q,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",ve.length," active)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(tT).map(([q,be])=>{const Ae=ve.find(je=>je.type===q);return s.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${Ae?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[s.jsxs("button",{type:"button",onClick:()=>gn(q),className:"w-full text-left",children:[s.jsx("div",{className:"text-[10px] font-bold text-white",children:be.name}),s.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:be.description})]}),Ae&&be.hasValue&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("input",{type:"number",value:Ae.value??be.defaultValue,onChange:je=>Or(q,parseInt(je.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),s.jsx("span",{className:"text-[9px] text-gray-500",children:be.unit})]})]},q)})})]}),Me.length>0&&s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Me.filter(q=>q.classType===Q.classType||q.classType==="GLOBAL"||Q.classType==="GLOBAL").map(q=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),s.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),s.jsxs("button",{type:"button",onClick:()=>Kr(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[s.jsx(Ea,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",Q.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:lo,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${_e?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:_e?s.jsxs(s.Fragment,{children:[s.jsx(ql,{className:"w-3 h-3"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Jh,{className:"w-3 h-3"})," Copy AI Prompt"]})}),s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(i0,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Qe,type:"file",accept:".json,.txt",onChange:hl,className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:Ga,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Ea,{className:"w-3 h-3"})," Add Manual"]})]})]}),nt&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[s.jsx(aa,{className:"w-4 h-4 flex-shrink-0"}),nt,s.jsx("button",{type:"button",onClick:()=>Ot(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(aa,{className:"w-3 h-3"})})]}),Q.questions.length===0&&s.jsxs("div",{className:"text-center py-6 space-y-2",children:[s.jsx(Vv,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),s.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",s.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",s.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),Q.questions.map((q,be)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",be+1]}),s.jsx("textarea",{value:q.stem,onChange:Ae=>ji(be,"stem",Ae.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),s.jsx("button",{type:"button",onClick:()=>xi(be),className:"text-gray-600 hover:text-red-400 mt-4",children:s.jsx(In,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((Ae,je)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>ji(be,"correctAnswer",je),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===je?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:s.jsx(ql,{className:"w-3 h-3"})}),s.jsx("input",{value:Ae,onChange:mt=>cs(be,je,mt.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+je)}`,required:!0})]},je))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:q.difficulty,onChange:Ae=>ji(be,"difficulty",Ae.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Ae=>ji(be,"damageBonus",parseInt(Ae.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),s.jsxs("div",{className:"flex gap-3",children:[!ie&&s.jsx("button",{type:"button",onClick:async()=>{if(Q.questions.length===0){r.error("Add at least one question.");return}const q=[...new Set(Q.questions.map(Ae=>Ae.bankId).filter(Boolean))],be={id:Math.random().toString(36).substring(2,12),bossName:Q.bossName,description:Q.description,maxHp:Q.maxHp,currentHp:Q.maxHp,classType:Q.classType,isActive:!1,deadline:Q.deadline?new Date(Q.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:Q.damagePerCorrect,questions:Q.questions.map(Ae=>({id:Ae.id,stem:Ae.stem,options:Ae.options.filter(je=>je.trim()),correctAnswer:Ae.correctAnswer,difficulty:Ae.difficulty,...Ae.damageBonus>0?{damageBonus:Ae.damageBonus}:{},...Ae.bankId?{bankId:Ae.bankId}:{}})),rewards:{xp:Q.rewardXp,flux:Q.rewardFlux,...Q.rewardItemRarity?{itemRarity:Q.rewardItemRarity}:{}},...Q.targetSections.length>0?{targetSections:Q.targetSections}:{},bossAppearance:{bossType:Q.bossType,hue:Q.bossHue},...ve.length>0?{modifiers:ve}:{},...q.length>0?{questionBankIds:q}:{}};await Re.saveBossQuiz(be),r.success("Quiz boss saved as draft (inactive)."),Xe(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:`${ie?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:ie?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),s.jsx(Ai,{isOpen:et,onClose:()=>ce(!1),title:Ue?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:Xt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),s.jsx("input",{value:ht.name,onChange:q=>dt({...ht,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),s.jsxs("select",{value:ht.classType,onChange:q=>dt({...ht,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(jr).map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("input",{value:ht.description,onChange:q=>dt({...ht,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",ht.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(i0,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:zt,type:"file",accept:".json,.txt",onChange:q=>sn(q,"bank"),className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:()=>dt(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Ea,{className:"w-3 h-3"})," Add Manual"]})]})]}),tr&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[s.jsx(aa,{className:"w-4 h-4 flex-shrink-0"})," ",tr,s.jsx("button",{type:"button",onClick:()=>Cr(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(aa,{className:"w-3 h-3"})})]}),ht.questions.length===0&&s.jsxs("div",{className:"text-center py-6",children:[s.jsx(Vv,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),ht.questions.map((q,be)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:q.stem,onChange:Ae=>{const je=[...ht.questions];je[be]={...je[be],stem:Ae.target.value},dt({...ht,questions:je})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${be+1}`,required:!0})}),s.jsx("button",{type:"button",onClick:()=>dt(Ae=>({...Ae,questions:Ae.questions.filter((je,mt)=>mt!==be)})),className:"text-gray-600 hover:text-red-400 mt-2",children:s.jsx(In,{className:"w-3.5 h-3.5"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((Ae,je)=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>{const mt=[...ht.questions];mt[be]={...mt[be],correctAnswer:je},dt({...ht,questions:mt})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===je?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:s.jsx(ql,{className:"w-2.5 h-2.5"})}),s.jsx("input",{value:Ae,onChange:mt=>{const It=[...ht.questions],At=[...It[be].options];At[je]=mt.target.value,It[be]={...It[be],options:At},dt({...ht,questions:It})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+je)}`,required:!0})]},je))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:q.difficulty,onChange:Ae=>{const je=[...ht.questions];je[be]={...je[be],difficulty:Ae.target.value},dt({...ht,questions:je})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Ae=>{const je=[...ht.questions];je[be]={...je[be],damageBonus:parseInt(Ae.target.value)||0},dt({...ht,questions:je})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:Ue?"Update Question Bank":"Create Question Bank"})]})}),s.jsx(Ai,{isOpen:!!jt,onClose:()=>{Dt(null),tt([])},title:jt?`Endgame: ${jt.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:ar?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):jt&&s.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-white",children:$t.length}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-amber-400",children:$t.reduce((q,be)=>{var Ae;return q+(((Ae=be.combatStats)==null?void 0:Ae.totalDamageDealt)||0)},0).toLocaleString()}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-green-400",children:$t.reduce((q,be)=>{var Ae;return q+(((Ae=be.combatStats)==null?void 0:Ae.questionsCorrect)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-red-400",children:$t.reduce((q,be)=>{var Ae;return q+(((Ae=be.combatStats)==null?void 0:Ae.criticalHits)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[s.jsx(wH,{className:"w-4 h-4"})," Top Damage Dealers"]}),s.jsx("div",{className:"space-y-2",children:[...$t].sort((q,be)=>{var Ae,je;return(((Ae=be.combatStats)==null?void 0:Ae.totalDamageDealt)||0)-(((je=q.combatStats)==null?void 0:je.totalDamageDealt)||0)}).slice(0,5).map((q,be)=>{var wr;const Ae=t.find(ue=>ue.id===q.userId),je=q.combatStats,mt=be,It=mt<wO.length?wO[mt]:1,At=((je==null?void 0:je.questionsAttempted)||0)>=Um&&((je==null?void 0:je.questionsCorrect)||0)>=zm,Yt=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${be===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[s.jsxs("div",{className:`text-xl font-black w-8 text-center ${Yt[be]||"text-gray-500"}`,children:["#",be+1]}),(Ae==null?void 0:Ae.avatarUrl)&&s.jsx("img",{src:Ae.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-white truncate",children:(Ae==null?void 0:Ae.name)||q.userId}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{className:"text-amber-400 font-bold",children:[((wr=je==null?void 0:je.totalDamageDealt)==null?void 0:wr.toLocaleString())||0," dmg"]}),s.jsxs("span",{children:[(je==null?void 0:je.questionsCorrect)||0,"/",(je==null?void 0:je.questionsAttempted)||0," correct"]}),s.jsxs("span",{children:[(je==null?void 0:je.criticalHits)||0," crits"]}),s.jsxs("span",{children:["Streak: ",(je==null?void 0:je.longestStreak)||0]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:At?s.jsxs("span",{className:`text-xs font-bold ${be<5?Yt[be]:"text-gray-400"}`,children:[It,"x"]}):s.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[s.jsx(n0,{className:"w-4 h-4"})," All Participants"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[s.jsx("th",{className:"pb-2 pl-2",children:"#"}),s.jsx("th",{className:"pb-2",children:"Student"}),s.jsx("th",{className:"pb-2 text-center",children:"Damage"}),s.jsx("th",{className:"pb-2 text-center",children:"Correct"}),s.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),s.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),s.jsx("th",{className:"pb-2 text-center",children:"Crits"}),s.jsx("th",{className:"pb-2 text-center",children:"Streak"}),s.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),s.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:[...$t].sort((q,be)=>{var Ae,je;return(((Ae=be.combatStats)==null?void 0:Ae.totalDamageDealt)||0)-(((je=q.combatStats)==null?void 0:je.totalDamageDealt)||0)}).map((q,be)=>{const Ae=t.find(wr=>wr.id===q.userId),je=q.combatStats,mt=(je==null?void 0:je.questionsAttempted)||0,It=(je==null?void 0:je.questionsCorrect)||0,At=mt>0?Math.round(It/mt*100):0,Yt=mt>=Um&&It>=zm;return s.jsxs("tr",{className:"hover:bg-white/5",children:[s.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:be+1}),s.jsx("td",{className:"py-2 font-bold text-white",children:(Ae==null?void 0:Ae.name)||q.userId.slice(0,8)}),s.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((je==null?void 0:je.totalDamageDealt)||0).toLocaleString()}),s.jsx("td",{className:"py-2 text-center text-green-400",children:It}),s.jsx("td",{className:"py-2 text-center text-gray-400",children:mt}),s.jsxs("td",{className:"py-2 text-center text-gray-300",children:[At,"%"]}),s.jsx("td",{className:"py-2 text-center text-red-400",children:(je==null?void 0:je.criticalHits)||0}),s.jsx("td",{className:"py-2 text-center text-purple-400",children:(je==null?void 0:je.longestStreak)||0}),s.jsx("td",{className:"py-2 text-center text-cyan-400",children:(je==null?void 0:je.damageReduced)||0}),s.jsx("td",{className:"py-2 text-center",children:Yt?s.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):s.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const be=$t.reduce((At,Yt)=>{var wr,ue;return At+(((ue=(wr=Yt.combatStats)==null?void 0:wr.correctByDifficulty)==null?void 0:ue[q])||0)},0),Ae=$t.reduce((At,Yt)=>{var wr,ue;return At+(((ue=(wr=Yt.combatStats)==null?void 0:wr.incorrectByDifficulty)==null?void 0:ue[q])||0)},0),je=be+Ae,mt=je>0?Math.round(be/je*100):0,It=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return s.jsxs("div",{className:`bg-${It}-500/5 border border-${It}-500/20 rounded-xl p-3 text-center`,children:[s.jsx("div",{className:`text-[10px] font-bold text-${It}-400 uppercase mb-1`,children:q}),s.jsxs("div",{className:"text-lg font-black text-white",children:[mt,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[be,"/",je," correct"]})]},q)})})]})]})})]})},k0e=({students:t,availableSections:e,fullPage:r})=>{const{confirm:n}=ko(),a=qa(),[i,o]=T.useState({}),[c,d]=T.useState(jr.AP_PHYSICS),[h,p]=T.useState(!1),[m,y]=T.useState(""),[x,_]=T.useState(null),[S,w]=T.useState(""),[E,I]=T.useState(""),R=T.useMemo(()=>Object.values(jr).filter(D=>D!=="Uncategorized"),[]);T.useEffect(()=>{const D=Re.subscribeToStudentGroups(c,$=>{o(B=>({...B,[c]:$}))});return()=>D()},[c]);const L=i[c]||[],C=T.useMemo(()=>t.filter(D=>{var $;return D.role==="STUDENT"&&(($=D.enrolledClasses)==null?void 0:$.includes(c))}).filter(D=>!S||D.section===S),[t,c,S]),O=async()=>{if(m.trim())try{await Re.createStudentGroup(m.trim(),c,[]),y(""),p(!1),a.success("Group created.")}catch{a.error("Failed to create group.")}},A=async D=>{await n({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await Re.deleteStudentGroup(D)},j=async(D,$)=>{if(D.members.some(G=>G.userId===$.id))return;const B=[...D.members,{userId:$.id,userName:$.name}];await Re.updateStudentGroup(D.id,{members:B})},k=async(D,$)=>{const B=D.members.filter(G=>G.userId!==$);await Re.updateStudentGroup(D.id,{members:B})},z=T.useMemo(()=>{var $;const D={};for(const B of R)D[B]=(($=i[B])==null?void 0:$.length)||0;return D},[R,i]);return r?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Student Groups"}),s.jsx("p",{className:"text-gray-400",children:"Create and manage student groups across all classes."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-cyan-900/20",children:[s.jsx(Ea,{className:"w-4 h-4"})," New Group"]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:R.map(D=>s.jsxs("button",{onClick:()=>d(D),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${c===D?"bg-purple-600/80 text-white border-purple-500/50 shadow-lg":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white"}`,children:[D,z[D]>0&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full ${c===D?"bg-white/20":"bg-white/10"}`,children:z[D]})]},D))}),h&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-white mb-3",children:["Create Group for ",c]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:m,onChange:D=>y(D.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-cyan-500 transition",onKeyDown:D=>D.key==="Enter"&&O(),autoFocus:!0}),s.jsx("button",{onClick:O,disabled:!m.trim(),className:"px-5 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>{p(!1),y("")},className:"p-3 text-gray-400 hover:text-white transition",children:s.jsx(aa,{className:"w-5 h-5"})})]})]}),L.length===0?s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-12 backdrop-blur-md text-center",children:[s.jsx(ss,{className:"w-14 h-14 mx-auto mb-4 text-gray-600"}),s.jsxs("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:["No groups for ",c]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a group to get started with collaborative assignments and group chat."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:L.map(D=>s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md hover:border-white/20 transition-all",children:[s.jsx("div",{className:"p-5 border-b border-white/5",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:D.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[D.members.length," member",D.members.length!==1?"s":"",s.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),c]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>_(x===D.id?null:D.id),className:`p-2 rounded-lg transition ${x===D.id?"bg-cyan-500/20 text-cyan-400":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Add members",children:s.jsx(Wv,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>A(D.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition",title:"Delete group",children:s.jsx(In,{className:"w-4 h-4"})})]})]})}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[D.members.map($=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/10 transition group/member",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[9px] font-bold text-purple-400",children:$.userName.charAt(0)}),$.userName,s.jsx("button",{onClick:()=>k(D,$.userId),className:"text-gray-600 hover:text-red-400 transition opacity-0 group-hover/member:opacity-100",children:s.jsx(Ble,{className:"w-3 h-3"})})]},$.userId)),D.members.length===0&&s.jsxs("p",{className:"text-xs text-gray-600 italic py-2",children:["No members yet  click the ",s.jsx(Wv,{className:"w-3 h-3 inline"})," button to assign students."]})]}),x===D.id&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(y1,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:E,onChange:$=>I($.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg pl-8 pr-3 py-1.5 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"})]}),e.length>0&&s.jsxs("select",{value:S,onChange:$=>w($.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-white",children:[s.jsx("option",{value:"",children:"All Sections"}),e.map($=>s.jsx("option",{value:$,children:$},$))]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-40 overflow-y-auto custom-scrollbar",children:C.filter($=>!D.members.some(B=>B.userId===$.id)).filter($=>!E||$.name.toLowerCase().includes(E.toLowerCase())).map($=>s.jsxs("button",{onClick:()=>j(D,$),className:"px-3 py-1.5 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-xs text-cyan-300 font-medium transition",children:["+ ",$.name]},$.id))})]})]})]},D.id))})]}):s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx(ss,{className:"w-5 h-5 text-cyan-400"})," Student Groups"]}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Groups have moved to the sidebar for a better experience."})]})},C0e={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:s.jsx(jH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:s.jsx(bH,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:s.jsx(F2,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},O0e=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!1),o=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[s.jsxs("button",{onClick:()=>o("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[s.jsx(F2,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),s.jsxs("button",{onClick:()=>o("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[s.jsx(bH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),s.jsxs("button",{onClick:()=>o("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[s.jsx(jH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&s.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[s.jsx(tf,{className:"w-6 h-6"}),e&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=C0e[r];return s.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[s.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),s.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?s.jsx(cv,{className:"w-4 h-4"}):s.jsx(NH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:s.jsx(aa,{className:"w-4 h-4"})})]})]}),!a&&s.jsx("div",{className:"flex-1 bg-white relative",children:s.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},I0e=["","","","","","","",""],R0e=["","","","","","","","","","","","","","","","","","","","","","","","","",""],M0e=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:o,onOpenResource:c})=>{var vt,et;const{confirm:d}=ko(),[h,p]=T.useState([]),[m,y]=T.useState(""),[x,_]=T.useState("Main"),[S,w]=T.useState(!1),[E,I]=T.useState(!1),[R,L]=T.useState(null),[C,O]=T.useState(null),[A,j]=T.useState([]),[k,z]=T.useState([]),[D,$]=T.useState(null),[B,G]=T.useState([]),[K,H]=T.useState(null),J=T.useRef(null),ae=T.useRef(null),he=T.useRef(null),fe=T.useMemo(()=>Object.values(jr).filter(ce=>{var dt;if(ce===jr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const Ue=a.find(zt=>zt.className===ce),Ze=(dt=t.enrolledClasses)==null?void 0:dt.includes(ce),ht=Ue?Ue.features.communications:!0;return Ze&&ht}),[a,t.role,t.enrolledClasses]),[Y,ne]=T.useState(fe[0]||"");T.useEffect(()=>{(!Y||!fe.includes(Y))&&fe.length>0&&ne(fe[0])},[fe]);const re=T.useMemo(()=>x==="Resources"&&C?`res_${C}`:x==="Resources"&&!C?"":x==="Groups"&&D?`group_${D}`:x==="Groups"&&!D||!Y?"":`class_${Y.replace(/\s+/g,"_").toLowerCase()}`,[Y,x,C,D]),ye=T.useRef(null),Te=T.useMemo(()=>n.filter(ce=>!(ce.classType!==Y||ce.status==="DRAFT"||ce.status==="ARCHIVED"||ce.scheduledAt&&new Date(ce.scheduledAt)>new Date)),[n,Y]),Ve=T.useMemo(()=>h.filter(ce=>{var Ue;return ce.isGlobalPinned||((Ue=ce.pinnedBy)==null?void 0:Ue.includes(t.id))}),[h,t.id]),Je=T.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),Xe=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("class_")),[i]),ie=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("res_")),[i]),Be=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("group_")),[i]),Q=T.useRef(!1);T.useEffect(()=>{if(!e){Q.current=!1;return}if(Q.current||!i||i.size===0)return;Q.current=!0;const ce=Array.from(i)[0];if(ce.startsWith("class_")){_("Main");const Ue=fe.find(Ze=>`class_${Ze.replace(/\s+/g,"_").toLowerCase()}`===ce);Ue&&ne(Ue)}else ce.startsWith("res_")?(_("Resources"),O(ce.replace("res_",""))):ce.startsWith("group_")&&(_("Groups"),$(ce.replace("group_","")))},[e,i,fe]),T.useEffect(()=>{!e||!re||o==null||o(re)},[e,re,o]),T.useEffect(()=>{if(!e)return;const ce=t.role==="ADMIN"?Re.subscribeToStudentGroups(Y,j):Re.subscribeToMyGroups(t.id,j);return()=>ce()},[e,t.id,t.role,Y]),T.useEffect(()=>{if(!e)return;let ce="";if(x==="Resources"&&C?ce=`res_${C}`:x==="Groups"&&D?ce=`group_${D}`:(x==="Main"||x==="Bookmarks")&&(ce=`class_${Y.replace(/\s+/g,"_").toLowerCase()}`),!ce)return;w(!0);const Ue=Re.subscribeToChannelMessages(ce,Ze=>{p(Ze),w(!1)});return()=>{Ue()}},[e,Y,x,C,D]),T.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const ce=Re.subscribeToFlaggedMessages(Ze=>{G(Ze)}),Ue=Re.subscribeToAllGroups(z);return()=>{ce(),Ue()}},[e,t.role]),T.useEffect(()=>{ye.current&&(ye.current.scrollTop=ye.current.scrollHeight)},[h,S,x,C]),T.useEffect(()=>{const ce=Ue=>{J.current&&!J.current.contains(Ue.target)&&I(!1),ae.current&&!ae.current.contains(Ue.target)&&L(null)};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]),T.useEffect(()=>{if(!e)return;const ce=Ue=>{Ue.key==="Escape"&&r()};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[e,r]);const te=T.useCallback(async ce=>{if(ce.preventDefault(),!(!m.trim()||!re)&&!Je)try{await Re.sendMessage(t,m,re,Y),y(""),I(!1)}catch(Ue){console.error("Failed to send message:",Ue)}},[m,re,Je,t,Y]),_e=T.useCallback(async(ce,Ue)=>{try{await Re.toggleReaction(ce,Ue,t.id),L(null)}catch(Ze){console.error(Ze)}},[t.id]),Se=T.useCallback(async ce=>{try{await Re.togglePersonalPin(ce,t.id)}catch(Ue){console.error(Ue)}},[t.id]),Qe=T.useCallback(async(ce,Ue)=>{try{await Re.toggleGlobalPin(ce,!Ue)}catch(Ze){console.error(Ze)}},[]),nt=async ce=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Re.deleteMessage(ce)}catch(Ue){console.error(Ue)}},Ot=async ce=>{try{await Re.unflagMessage(ce),await Re.resolveFlagByMessageId(ce)}catch(Ue){console.error(Ue)}},Me=async ce=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Re.resolveFlagByMessageId(ce),await Re.deleteMessage(ce)}catch(Ue){console.error(Ue)}},lt=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Re.INDEFINITE_MUTE}],St=async ce=>{if(K){try{await Re.muteUser(K.senderId,ce)}catch(Ue){console.error(Ue)}H(null)}};return T.useEffect(()=>{const ce=Ue=>{he.current&&!he.current.contains(Ue.target)&&H(null)};return K&&document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[K]),e?s.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[x==="Resources"&&C||x==="Groups"&&D?s.jsx("button",{onClick:()=>{O(null),$(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:s.jsx(ale,{className:"w-5 h-5"})}):s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:s.jsx(tf,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:x==="Moderation"?"Moderation Queue":x==="Groups"?D?(vt=A.find(ce=>ce.id===D))==null?void 0:vt.name:"My Groups":x==="Resources"?C?(et=Te.find(ce=>ce.id===C))==null?void 0:et.title:"Class Resources":Y}),x!=="Resources"&&x!=="Moderation"&&x!=="Groups"&&fe.length>1&&s.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:Y}),s.jsx(gi,{className:"w-3 h-3 text-gray-500 ml-1"}),s.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:Y,onChange:ce=>ne(ce.target.value),children:fe.map(ce=>s.jsx("option",{value:ce,children:ce},ce))})]})]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:s.jsx(aa,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[s.jsxs("button",{onClick:()=>_("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${x==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(tf,{className:"w-5 h-5"}),Xe&&x!=="Main"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("button",{onClick:()=>_("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${x==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(as,{className:"w-5 h-5"}),ie&&x!=="Resources"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(A.length>0||t.role==="ADMIN")&&s.jsxs("button",{onClick:()=>{_("Groups"),$(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${x==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(ss,{className:"w-5 h-5"}),Be&&x!=="Groups"?s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):A.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:A.length})]}),s.jsx("button",{onClick:()=>_("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${x==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:s.jsx(pR,{className:"w-5 h-5"})}),t.role==="ADMIN"&&s.jsxs("button",{onClick:()=>_("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${x==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(is,{className:"w-5 h-5"}),B.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:B.length})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col relative",children:[x==="Resources"&&!C&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:Te.map(ce=>s.jsxs("div",{onClick:()=>O(ce.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${ce.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[s.jsx(gle,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${ce.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ce.title}),s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:ce.unit})]})]}),s.jsx("button",{onClick:Ue=>{Ue.stopPropagation(),c==null||c(ce.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:s.jsx(ule,{className:"w-4 h-4"})})]},ce.id))})}),x==="Groups"&&!D&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:A.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(ss,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No groups yet"}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):A.map(ce=>s.jsx("div",{onClick:()=>$(ce.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${ce.id}`)?"border-cyan-500/40":"border-white/5"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[s.jsx(ss,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${ce.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ce.name}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[ce.members.length," member",ce.members.length!==1?"s":"","  ",ce.classType]})]})]})},ce.id))})}),x==="Moderation"&&t.role==="ADMIN"&&s.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Is,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[B.length," item",B.length!==1?"s":""]})]}),B.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(is,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):s.jsx("div",{className:"space-y-3",children:B.map(ce=>{var Ue,Ze,ht;return s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300",children:ce.senderName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(ce.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-sm text-gray-200 mb-1",children:ce.content}),ce.systemNote&&s.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:ce.systemNote}),s.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(Ue=ce.channelId)!=null&&Ue.startsWith("group_")?`Group: ${((Ze=k.find(dt=>dt.id===ce.channelId.replace("group_","")))==null?void 0:Ze.name)||ce.channelId.replace("group_","")}`:((ht=ce.channelId)==null?void 0:ht.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>Ot(ce.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[s.jsx(ql,{className:"w-3.5 h-3.5"})," Approve"]}),s.jsxs("button",{onClick:()=>Me(ce.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[s.jsx(In,{className:"w-3.5 h-3.5"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===`flag-${ce.id}`?null:{id:`flag-${ce.id}`,senderId:ce.senderId,senderName:ce.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:s.jsx(qv,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===`flag-${ce.id}`&&s.jsxs("div",{ref:he,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ce.senderName]}),lt.map(dt=>s.jsx("button",{onClick:()=>St(dt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:dt.label},dt.minutes))]})]})]})]},ce.id)})})]}),(x==="Main"||x==="Bookmarks"||x==="Resources"&&C||x==="Groups"&&D)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:ye,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(x==="Bookmarks"?Ve:h).map((ce,Ue,Ze)=>{var zt;const ht=ce.senderId===t.id,dt=Ue>0&&Ze[Ue-1].senderId===ce.senderId&&new Date(ce.timestamp).getTime()-new Date(Ze[Ue-1].timestamp).getTime()<3e5;return s.jsxs("div",{className:`group flex flex-col ${ht?"items-end":"items-start"} ${dt?"mt-1":"mt-4"}`,children:[!dt&&s.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("span",{className:`text-xs font-bold ${ht?"text-indigo-400":"text-gray-300"}`,children:ce.senderName}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(ce.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),ce.isGlobalPinned&&s.jsx(vR,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),s.jsxs("div",{className:"relative max-w-[85%]",children:[s.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${ht?"right-0":"left-0"} z-30`,children:[s.jsx("button",{onClick:()=>L(ce.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:s.jsx(wR,{className:"w-3.5 h-3.5 text-yellow-400"})}),s.jsx("button",{onClick:()=>Se(ce.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(zt=ce.pinnedBy)!=null&&zt.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:s.jsx(pR,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Qe(ce.id,!!ce.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${ce.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:s.jsx(vR,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>nt(ce.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:s.jsx(In,{className:"w-3.5 h-3.5"})}),ce.senderId!==t.id&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===ce.id?null:{id:ce.id,senderId:ce.senderId,senderName:ce.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:s.jsx(qv,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===ce.id&&s.jsxs("div",{ref:he,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ce.senderName]}),lt.map(tr=>s.jsx("button",{onClick:()=>St(tr.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:tr.label},tr.minutes))]})]})]})]}),R===ce.id&&s.jsx("div",{ref:ae,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${ht?"right-0":"left-0"}`,children:I0e.map(tr=>s.jsx("button",{onClick:()=>_e(ce.id,tr),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:tr},tr))}),s.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${ht?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${ce.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${ce.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:ce.content}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:ce.reactions&&Object.entries(ce.reactions).map(([tr,Cr])=>{const ve=Cr;return ve.length>0&&s.jsxs("button",{onClick:()=>_e(ce.id,tr),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${ve.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[tr," ",ve.length]},tr)})})]})]},ce.id)})}),s.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:s.jsxs("form",{onSubmit:te,className:"relative flex items-center gap-2",children:[E&&s.jsx("div",{ref:J,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:R0e.map(ce=>s.jsx("button",{type:"button",onClick:()=>y(Ue=>Ue+ce),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:ce},ce))}),s.jsx("button",{type:"button",onClick:()=>I(!E),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:s.jsx(wR,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:m,onChange:ce=>y(ce.target.value),placeholder:Je?"Transmission Disabled":"Type message...",disabled:!re||Je,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),s.jsx("button",{type:"submit",disabled:!re||Je||!m.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:s.jsx(tE,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function UG(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=UG(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function pr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=UG(t))&&(n&&(n+=" "),n+=e);return n}var P3,SM;function ls(){if(SM)return P3;SM=1;var t=Array.isArray;return P3=t,P3}var D3,_M;function zG(){if(_M)return D3;_M=1;var t=typeof sx=="object"&&sx&&sx.Object===Object&&sx;return D3=t,D3}var L3,NM;function cl(){if(NM)return L3;NM=1;var t=zG(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return L3=r,L3}var B3,TM;function S1(){if(TM)return B3;TM=1;var t=cl(),e=t.Symbol;return B3=e,B3}var $3,AM;function P0e(){if(AM)return $3;AM=1;var t=S1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var p=n.call(o);return h&&(c?o[a]=d:delete o[a]),p}return $3=i,$3}var U3,jM;function D0e(){if(jM)return U3;jM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return U3=r,U3}var z3,EM;function gc(){if(EM)return z3;EM=1;var t=S1(),e=P0e(),r=D0e(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return z3=o,z3}var V3,kM;function yc(){if(kM)return V3;kM=1;function t(e){return e!=null&&typeof e=="object"}return V3=t,V3}var F3,CM;function zf(){if(CM)return F3;CM=1;var t=gc(),e=yc(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return F3=n,F3}var q3,OM;function TE(){if(OM)return q3;OM=1;var t=ls(),e=zf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return q3=a,q3}var H3,IM;function Fu(){if(IM)return H3;IM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return H3=t,H3}var G3,RM;function AE(){if(RM)return G3;RM=1;var t=gc(),e=Fu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return G3=o,G3}var W3,MM;function L0e(){if(MM)return W3;MM=1;var t=cl(),e=t["__core-js_shared__"];return W3=e,W3}var K3,PM;function B0e(){if(PM)return K3;PM=1;var t=L0e(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return K3=r,K3}var Q3,DM;function VG(){if(DM)return Q3;DM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Q3=r,Q3}var X3,LM;function $0e(){if(LM)return X3;LM=1;var t=AE(),e=B0e(),r=Fu(),n=VG(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(y){if(!r(y)||e(y))return!1;var x=t(y)?p:i;return x.test(n(y))}return X3=m,X3}var Y3,BM;function U0e(){if(BM)return Y3;BM=1;function t(e,r){return e==null?void 0:e[r]}return Y3=t,Y3}var Z3,$M;function w0(){if($M)return Z3;$M=1;var t=$0e(),e=U0e();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Z3=r,Z3}var J3,UM;function Y2(){if(UM)return J3;UM=1;var t=w0(),e=t(Object,"create");return J3=e,J3}var eS,zM;function z0e(){if(zM)return eS;zM=1;var t=Y2();function e(){this.__data__=t?t(null):{},this.size=0}return eS=e,eS}var tS,VM;function V0e(){if(VM)return tS;VM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return tS=t,tS}var rS,FM;function F0e(){if(FM)return rS;FM=1;var t=Y2(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var c=o[i];return c===e?void 0:c}return n.call(o,i)?o[i]:void 0}return rS=a,rS}var nS,qM;function q0e(){if(qM)return nS;qM=1;var t=Y2(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return nS=n,nS}var aS,HM;function H0e(){if(HM)return aS;HM=1;var t=Y2(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return aS=r,aS}var iS,GM;function G0e(){if(GM)return iS;GM=1;var t=z0e(),e=V0e(),r=F0e(),n=q0e(),a=H0e();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,iS=i,iS}var sS,WM;function W0e(){if(WM)return sS;WM=1;function t(){this.__data__=[],this.size=0}return sS=t,sS}var oS,KM;function jE(){if(KM)return oS;KM=1;function t(e,r){return e===r||e!==e&&r!==r}return oS=t,oS}var lS,QM;function Z2(){if(QM)return lS;QM=1;var t=jE();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return lS=e,lS}var cS,XM;function K0e(){if(XM)return cS;XM=1;var t=Z2(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():r.call(i,o,1),--this.size,!0}return cS=n,cS}var uS,YM;function Q0e(){if(YM)return uS;YM=1;var t=Z2();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return uS=e,uS}var dS,ZM;function X0e(){if(ZM)return dS;ZM=1;var t=Z2();function e(r){return t(this.__data__,r)>-1}return dS=e,dS}var hS,JM;function Y0e(){if(JM)return hS;JM=1;var t=Z2();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return hS=e,hS}var fS,eP;function J2(){if(eP)return fS;eP=1;var t=W0e(),e=K0e(),r=Q0e(),n=X0e(),a=Y0e();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,fS=i,fS}var pS,tP;function EE(){if(tP)return pS;tP=1;var t=w0(),e=cl(),r=t(e,"Map");return pS=r,pS}var mS,rP;function Z0e(){if(rP)return mS;rP=1;var t=G0e(),e=J2(),r=EE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return mS=n,mS}var gS,nP;function J0e(){if(nP)return gS;nP=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return gS=t,gS}var yS,aP;function ew(){if(aP)return yS;aP=1;var t=J0e();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return yS=e,yS}var xS,iP;function ehe(){if(iP)return xS;iP=1;var t=ew();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return xS=e,xS}var vS,sP;function the(){if(sP)return vS;sP=1;var t=ew();function e(r){return t(this,r).get(r)}return vS=e,vS}var bS,oP;function rhe(){if(oP)return bS;oP=1;var t=ew();function e(r){return t(this,r).has(r)}return bS=e,bS}var wS,lP;function nhe(){if(lP)return wS;lP=1;var t=ew();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return wS=e,wS}var SS,cP;function kE(){if(cP)return SS;cP=1;var t=Z0e(),e=ehe(),r=the(),n=rhe(),a=nhe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,SS=i,SS}var _S,uP;function FG(){if(uP)return _S;uP=1;var t=kE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,_S=r,_S}var NS,dP;function ahe(){if(dP)return NS;dP=1;var t=FG(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return NS=r,NS}var TS,hP;function ihe(){if(hP)return TS;hP=1;var t=ahe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,c,d,h){i.push(d?h.replace(r,"$1"):c||o)}),i});return TS=n,TS}var AS,fP;function CE(){if(fP)return AS;fP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return AS=t,AS}var jS,pP;function she(){if(pP)return jS;pP=1;var t=S1(),e=CE(),r=ls(),n=zf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return jS=o,jS}var ES,mP;function qG(){if(mP)return ES;mP=1;var t=she();function e(r){return r==null?"":t(r)}return ES=e,ES}var kS,gP;function HG(){if(gP)return kS;gP=1;var t=ls(),e=TE(),r=ihe(),n=qG();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return kS=a,kS}var CS,yP;function tw(){if(yP)return CS;yP=1;var t=zf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return CS=e,CS}var OS,xP;function OE(){if(xP)return OS;xP=1;var t=HG(),e=tw();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return OS=r,OS}var IS,vP;function GG(){if(vP)return IS;vP=1;var t=OE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return IS=e,IS}var ohe=GG();const eo=Xr(ohe);var RS,bP;function lhe(){if(bP)return RS;bP=1;function t(e){return e==null}return RS=t,RS}var che=lhe();const ur=Xr(che);var MS,wP;function uhe(){if(wP)return MS;wP=1;var t=gc(),e=ls(),r=yc(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return MS=a,MS}var dhe=uhe();const l0=Xr(dhe);var hhe=AE();const rr=Xr(hhe);var fhe=Fu();const Vf=Xr(fhe);var PS={exports:{}},tn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP;function phe(){if(SP)return tn;SP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),_;_=Symbol.for("react.module.reference");function S(w){if(typeof w=="object"&&w!==null){var E=w.$$typeof;switch(E){case t:switch(w=w.type,w){case r:case a:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case o:case d:case y:case m:case i:return w;default:return E}}case e:return E}}}return tn.ContextConsumer=o,tn.ContextProvider=i,tn.Element=t,tn.ForwardRef=d,tn.Fragment=r,tn.Lazy=y,tn.Memo=m,tn.Portal=e,tn.Profiler=a,tn.StrictMode=n,tn.Suspense=h,tn.SuspenseList=p,tn.isAsyncMode=function(){return!1},tn.isConcurrentMode=function(){return!1},tn.isContextConsumer=function(w){return S(w)===o},tn.isContextProvider=function(w){return S(w)===i},tn.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},tn.isForwardRef=function(w){return S(w)===d},tn.isFragment=function(w){return S(w)===r},tn.isLazy=function(w){return S(w)===y},tn.isMemo=function(w){return S(w)===m},tn.isPortal=function(w){return S(w)===e},tn.isProfiler=function(w){return S(w)===a},tn.isStrictMode=function(w){return S(w)===n},tn.isSuspense=function(w){return S(w)===h},tn.isSuspenseList=function(w){return S(w)===p},tn.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===p||w===x||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===m||w.$$typeof===i||w.$$typeof===o||w.$$typeof===d||w.$$typeof===_||w.getModuleId!==void 0)},tn.typeOf=S,tn}var _P;function mhe(){return _P||(_P=1,PS.exports=phe()),PS.exports}var ghe=mhe(),DS,NP;function WG(){if(NP)return DS;NP=1;var t=gc(),e=yc(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return DS=n,DS}var LS,TP;function yhe(){if(TP)return LS;TP=1;var t=WG();function e(r){return t(r)&&r!=+r}return LS=e,LS}var xhe=yhe();const _1=Xr(xhe);var vhe=WG();const bhe=Xr(vhe);var wo=function(e){return e===0?0:e>0?1:-1},Rd=function(e){return l0(e)&&e.indexOf("%")===e.length-1},xt=function(e){return bhe(e)&&!_1(e)},whe=function(e){return ur(e)},Ua=function(e){return xt(e)||l0(e)},She=0,N1=function(e){var r=++She;return"".concat(e||"").concat(r)},So=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xt(e)&&!l0(e))return n;var i;if(Rd(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return _1(i)&&(i=n),a&&i>r&&(i=r),i},cu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},_he=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},Zi=function(e,r){return xt(e)&&xt(r)?function(n){return e+n*(r-e)}:function(){return r}};function tb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):eo(n,e))===r})}var Nhe=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,o=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,o+=h*h,c=Math.min(c,h),d=Math.max(d,h);var y=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:c,xmax:d,a:y,b:(a-y*n)/r}},The=function(e,r){return xt(e)&&xt(r)?e-r:l0(e)&&l0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Mh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function JT(t){"@babel/helpers - typeof";return JT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JT(t)}var Ahe=["viewBox","children"],jhe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],AP=["points","pathLength"],BS={svg:Ahe,polygon:AP,polyline:AP},IE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],rb=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),!Vf(n))return null;var a={};return Object.keys(n).forEach(function(i){IE.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Ehe=function(e,r,n){return function(a){return e(r,n,a),null}},c0=function(e,r,n){if(!Vf(e)||JT(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];IE.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Ehe(o,r,n))}),a},khe=["children"],Che=["children"];function jP(t,e){if(t==null)return{};var r=Ohe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ohe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var EP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Yl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},kP=null,$S=null,RE=function t(e){if(e===kP&&Array.isArray($S))return $S;var r=[];return T.Children.forEach(e,function(n){ur(n)||(ghe.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),$S=r,kP=e,r};function Cs(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Yl(a)}):n=[Yl(e)],RE(t).forEach(function(a){var i=eo(a,"type.displayName")||eo(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function _s(t,e){var r=Cs(t,e);return r&&r[0]}var CP=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!xt(n)||n<=0||!xt(a)||a<=0)},Ihe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Rhe=function(e){return e&&e.type&&l0(e.type)&&Ihe.indexOf(e.type)>=0},Mhe=function(e,r,n,a){var i,o=(i=BS==null?void 0:BS[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!rr(e)&&(a&&o.includes(r)||jhe.includes(r))||n&&IE.includes(r)},Ft=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(T.isValidElement(e)&&(a=e.props),!Vf(a))return null;var i={};return Object.keys(a).forEach(function(o){var c;Mhe((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(i[o]=a[o])}),i},eA=function t(e,r){if(e===r)return!0;var n=T.Children.count(e);if(n!==T.Children.count(r))return!1;if(n===0)return!0;if(n===1)return OP(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!OP(i,o))return!1}return!0},OP=function(e,r){if(ur(e)&&ur(r))return!0;if(!ur(e)&&!ur(r)){var n=e.props||{},a=n.children,i=jP(n,khe),o=r.props||{},c=o.children,d=jP(o,Che);return a&&c?Mh(i,d)&&eA(a,c):!a&&!c?Mh(i,d):!1}return!1},IP=function(e,r){var n=[],a={};return RE(e).forEach(function(i,o){if(Rhe(i))n.push(i);else if(i){var c=Yl(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,o);n.push(m),a[c]=!0}}}),n},Phe=function(e){var r=e&&e.type;return r&&EP[r]?EP[r]:null},Dhe=function(e,r){return RE(r).indexOf(e)},Lhe=["children","width","height","viewBox","className","style","title","desc"];function tA(){return tA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tA.apply(this,arguments)}function Bhe(t,e){if(t==null)return{};var r=$he(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $he(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function rA(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,c=t.title,d=t.desc,h=Bhe(t,Lhe),p=a||{width:r,height:n,x:0,y:0},m=pr("recharts-surface",i);return se.createElement("svg",tA({},Ft(h,!0,"svg"),{className:m,width:r,height:n,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),se.createElement("title",null,c),se.createElement("desc",null,d),e)}var Uhe=["children","className"];function nA(){return nA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nA.apply(this,arguments)}function zhe(t,e){if(t==null)return{};var r=Vhe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qr=se.forwardRef(function(t,e){var r=t.children,n=t.className,a=zhe(t,Uhe),i=pr("recharts-layer",n);return se.createElement("g",nA({className:i},Ft(a,!0),{ref:e}),r)}),Zl=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},US,RP;function Fhe(){if(RP)return US;RP=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return US=t,US}var zS,MP;function qhe(){if(MP)return zS;MP=1;var t=Fhe();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return zS=e,zS}var VS,PP;function KG(){if(PP)return VS;PP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+i+"]");function d(h){return c.test(h)}return VS=d,VS}var FS,DP;function Hhe(){if(DP)return FS;DP=1;function t(e){return e.split("")}return FS=t,FS}var qS,LP;function Ghe(){if(LP)return qS;LP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",_=h+"?",S="["+i+"]?",w="(?:"+x+"(?:"+[p,m,y].join("|")+")"+S+_+")*",E=S+_+w,I="(?:"+[p+c+"?",c,m,y,o].join("|")+")",R=RegExp(d+"(?="+d+")|"+I+E,"g");function L(C){return C.match(R)||[]}return qS=L,qS}var HS,BP;function Whe(){if(BP)return HS;BP=1;var t=Hhe(),e=KG(),r=Ghe();function n(a){return e(a)?r(a):t(a)}return HS=n,HS}var GS,$P;function Khe(){if($P)return GS;$P=1;var t=qhe(),e=KG(),r=Whe(),n=qG();function a(i){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[i]()+h}}return GS=a,GS}var WS,UP;function Qhe(){if(UP)return WS;UP=1;var t=Khe(),e=t("toUpperCase");return WS=e,WS}var Xhe=Qhe();const rw=Xr(Xhe);function On(t){return function(){return t}}const QG=Math.cos,nb=Math.sin,Co=Math.sqrt,ab=Math.PI,nw=2*ab,aA=Math.PI,iA=2*aA,Td=1e-6,Yhe=iA-Td;function XG(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Zhe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return XG;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Jhe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?XG:Zhe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,p=o-e,m=c-r,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>Td)if(!(Math.abs(m*d-h*p)>Td)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let x=n-o,_=a-c,S=d*d+h*h,w=x*x+_*_,E=Math.sqrt(S),I=Math.sqrt(y),R=i*Math.tan((aA-Math.acos((S+y-w)/(2*E*I)))/2),L=R/I,C=R/E;Math.abs(L-1)>Td&&this._append`L${e+L*p},${r+L*m}`,this._append`A${i},${i},0,0,${+(m*x>p*_)},${this._x1=e+C*d},${this._y1=r+C*h}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^o,y=o?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Td||Math.abs(this._y1-p)>Td)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%iA+iA),y>Yhe?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:y>Td&&this._append`A${n},${n},0,${+(y>=aA)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function ME(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Jhe(e)}function PE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function YG(t){this._context=t}YG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function aw(t){return new YG(t)}function ZG(t){return t[0]}function JG(t){return t[1]}function eW(t,e){var r=On(!0),n=null,a=aw,i=null,o=ME(c);t=typeof t=="function"?t:t===void 0?ZG:On(t),e=typeof e=="function"?e:e===void 0?JG:On(e);function c(d){var h,p=(d=PE(d)).length,m,y=!1,x;for(n==null&&(i=a(x=o())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+t(m,h,d),+e(m,h,d));if(x)return i=null,x+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:On(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:On(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:On(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function kx(t,e,r){var n=null,a=On(!0),i=null,o=aw,c=null,d=ME(h);t=typeof t=="function"?t:t===void 0?ZG:On(+t),e=typeof e=="function"?e:On(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?JG:On(+r);function h(m){var y,x,_,S=(m=PE(m)).length,w,E=!1,I,R=new Array(S),L=new Array(S);for(i==null&&(c=o(I=d())),y=0;y<=S;++y){if(!(y<S&&a(w=m[y],y,m))===E)if(E=!E)x=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),_=y-1;_>=x;--_)c.point(R[_],L[_]);c.lineEnd(),c.areaEnd()}E&&(R[y]=+t(w,y,m),L[y]=+e(w,y,m),c.point(n?+n(w,y,m):R[y],r?+r(w,y,m):L[y]))}if(I)return c=null,I+""||null}function p(){return eW().defined(a).curve(o).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:On(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:On(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:On(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:On(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:On(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:On(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:On(!!m),h):a},h.curve=function(m){return arguments.length?(o=m,i!=null&&(c=o(i)),h):o},h.context=function(m){return arguments.length?(m==null?i=c=null:c=o(i=m),h):i},h}class tW{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function efe(t){return new tW(t,!0)}function tfe(t){return new tW(t,!1)}const DE={draw(t,e){const r=Co(e/ab);t.moveTo(r,0),t.arc(0,0,r,0,nw)}},rfe={draw(t,e){const r=Co(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},rW=Co(1/3),nfe=rW*2,afe={draw(t,e){const r=Co(e/nfe),n=r*rW;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},ife={draw(t,e){const r=Co(e),n=-r/2;t.rect(n,n,r,r)}},sfe=.8908130915292852,nW=nb(ab/10)/nb(7*ab/10),ofe=nb(nw/10)*nW,lfe=-QG(nw/10)*nW,cfe={draw(t,e){const r=Co(e*sfe),n=ofe*r,a=lfe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=nw*i/5,c=QG(o),d=nb(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},KS=Co(3),ufe={draw(t,e){const r=-Co(e/(KS*3));t.moveTo(0,r*2),t.lineTo(-KS*r,-r),t.lineTo(KS*r,-r),t.closePath()}},Gs=-.5,Ws=Co(3)/2,sA=1/Co(12),dfe=(sA/2+1)*3,hfe={draw(t,e){const r=Co(e/dfe),n=r/2,a=r*sA,i=n,o=r*sA+r,c=-i,d=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(c,d),t.lineTo(Gs*n-Ws*a,Ws*n+Gs*a),t.lineTo(Gs*i-Ws*o,Ws*i+Gs*o),t.lineTo(Gs*c-Ws*d,Ws*c+Gs*d),t.lineTo(Gs*n+Ws*a,Gs*a-Ws*n),t.lineTo(Gs*i+Ws*o,Gs*o-Ws*i),t.lineTo(Gs*c+Ws*d,Gs*d-Ws*c),t.closePath()}};function ffe(t,e){let r=null,n=ME(a);t=typeof t=="function"?t:On(t||DE),e=typeof e=="function"?e:On(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:On(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:On(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function ib(){}function sb(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function aW(t){this._context=t}aW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pfe(t){return new aW(t)}function iW(t){this._context=t}iW.prototype={areaStart:ib,areaEnd:ib,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:sb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mfe(t){return new iW(t)}function sW(t){this._context=t}sW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:sb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gfe(t){return new sW(t)}function oW(t){this._context=t}oW.prototype={areaStart:ib,areaEnd:ib,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function yfe(t){return new oW(t)}function zP(t){return t<0?-1:1}function VP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(zP(i)+zP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function FP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function QS(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,o-c*r,i,o)}function ob(t){this._context=t}ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:QS(this,this._t0,FP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,QS(this,FP(this,r=VP(this,t,e)),r);break;default:QS(this,this._t0,r=VP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function lW(t){this._context=new cW(t)}(lW.prototype=Object.create(ob.prototype)).point=function(t,e){ob.prototype.point.call(this,e,t)};function cW(t){this._context=t}cW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function xfe(t){return new ob(t)}function vfe(t){return new lW(t)}function uW(t){this._context=t}uW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=qP(t),a=qP(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function qP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function bfe(t){return new uW(t)}function iw(t,e){this._context=t,this._t=e}iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function wfe(t){return new iw(t,.5)}function Sfe(t){return new iw(t,0)}function _fe(t){return new iw(t,1)}function nf(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,c=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function oA(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Nfe(t,e){return t[e]}function Tfe(t){const e=[];return e.key=t,e}function Afe(){var t=On([]),e=oA,r=nf,n=Nfe;function a(i){var o=Array.from(t.apply(this,arguments),Tfe),c,d=o.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(m,o[c].key,h,i)]).data=m;for(c=0,p=PE(e(o));c<d;++c)o[p[c]].index=c;return r(o,p),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:On(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:On(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?oA:typeof i=="function"?i:On(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??nf,a):r},a}function jfe(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}nf(t,e)}}function Efe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}nf(t,e)}}function kfe(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,h=0;c<o;++c){for(var p=t[e[c]],m=p[n][1]||0,y=p[n-1][1]||0,x=(m-y)/2,_=0;_<c;++_){var S=t[e[_]],w=S[n][1]||0,E=S[n-1][1]||0;x+=w-E}d+=m,h+=x*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,nf(t,e)}}function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}var Cfe=["type","size","sizeType"];function lA(){return lA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lA.apply(this,arguments)}function HP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(r),!0).forEach(function(n){Ofe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ofe(t,e,r){return e=Ife(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ife(t){var e=Rfe(t,"string");return cg(e)=="symbol"?e:e+""}function Rfe(t,e){if(cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mfe(t,e){if(t==null)return{};var r=Pfe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var dW={symbolCircle:DE,symbolCross:rfe,symbolDiamond:afe,symbolSquare:ife,symbolStar:cfe,symbolTriangle:ufe,symbolWye:hfe},Dfe=Math.PI/180,Lfe=function(e){var r="symbol".concat(rw(e));return dW[r]||DE},Bfe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Dfe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},$fe=function(e,r){dW["symbol".concat(rw(e))]=r},sw=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=Mfe(e,Cfe),h=GP(GP({},d),{},{type:n,size:i,sizeType:c}),p=function(){var w=Lfe(n),E=ffe().type(w).size(Bfe(i,c,n));return E()},m=h.className,y=h.cx,x=h.cy,_=Ft(h,!0);return y===+y&&x===+x&&i===+i?se.createElement("path",lA({},_,{className:pr("recharts-symbols",m),transform:"translate(".concat(y,", ").concat(x,")"),d:p()})):null};sw.registerSymbol=$fe;function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function cA(){return cA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cA.apply(this,arguments)}function WP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ufe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(r),!0).forEach(function(n){ug(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fW(n.key),n)}}function Ffe(t,e,r){return e&&Vfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qfe(t,e,r){return e=lb(e),Hfe(t,hW()?Reflect.construct(e,r||[],lb(t).constructor):e.apply(t,r))}function Hfe(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gfe(t)}function Gfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hW=function(){return!!t})()}function lb(t){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lb(t)}function Wfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uA(t,e)}function uA(t,e){return uA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uA(t,e)}function ug(t,e,r){return e=fW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fW(t){var e=Kfe(t,"string");return af(e)=="symbol"?e:e+""}function Kfe(t,e){if(af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ks=32,LE=(function(t){function e(){return zfe(this,e),qfe(this,e,arguments)}return Wfe(e,t),Ffe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Ks/2,o=Ks/6,c=Ks/3,d=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ks,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Ks,"M").concat(2*c,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Ks/8,"h").concat(Ks,"v").concat(Ks*3/4,"h").concat(-Ks,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var h=Ufe({},n);return delete h.legendIcon,se.cloneElement(n.legendIcon,h)}return se.createElement(sw,{fill:d,cx:i,cy:i,size:Ks,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Ks,height:Ks},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,_){var S=x.formatter||d,w=pr(ug(ug({"recharts-legend-item":!0},"legend-item-".concat(_),!0),"inactive",x.inactive));if(x.type==="none")return null;var E=rr(x.value)?null:x.value;Zl(!rr(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var I=x.inactive?h:x.color;return se.createElement("li",cA({className:w,style:m,key:"legend-item-".concat(_)},c0(n.props,x,_)),se.createElement(rA,{width:o,height:o,viewBox:p,style:y},n.renderIcon(x)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},S?S(E,x,_):E))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(T.PureComponent);ug(LE,"displayName","Legend");ug(LE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var XS,KP;function Qfe(){if(KP)return XS;KP=1;var t=J2();function e(){this.__data__=new t,this.size=0}return XS=e,XS}var YS,QP;function Xfe(){if(QP)return YS;QP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return YS=t,YS}var ZS,XP;function Yfe(){if(XP)return ZS;XP=1;function t(e){return this.__data__.get(e)}return ZS=t,ZS}var JS,YP;function Zfe(){if(YP)return JS;YP=1;function t(e){return this.__data__.has(e)}return JS=t,JS}var e6,ZP;function Jfe(){if(ZP)return e6;ZP=1;var t=J2(),e=EE(),r=kE(),n=200;function a(i,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,o),this.size=c.size,this}return e6=a,e6}var t6,JP;function pW(){if(JP)return t6;JP=1;var t=J2(),e=Qfe(),r=Xfe(),n=Yfe(),a=Zfe(),i=Jfe();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,t6=o,t6}var r6,eD;function epe(){if(eD)return r6;eD=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return r6=e,r6}var n6,tD;function tpe(){if(tD)return n6;tD=1;function t(e){return this.__data__.has(e)}return n6=t,n6}var a6,rD;function mW(){if(rD)return a6;rD=1;var t=kE(),e=epe(),r=tpe();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,a6=n,a6}var i6,nD;function gW(){if(nD)return i6;nD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return i6=t,i6}var s6,aD;function yW(){if(aD)return s6;aD=1;function t(e,r){return e.has(r)}return s6=t,s6}var o6,iD;function xW(){if(iD)return o6;iD=1;var t=mW(),e=gW(),r=yW(),n=1,a=2;function i(o,c,d,h,p,m){var y=d&n,x=o.length,_=c.length;if(x!=_&&!(y&&_>x))return!1;var S=m.get(o),w=m.get(c);if(S&&w)return S==c&&w==o;var E=-1,I=!0,R=d&a?new t:void 0;for(m.set(o,c),m.set(c,o);++E<x;){var L=o[E],C=c[E];if(h)var O=y?h(C,L,E,c,o,m):h(L,C,E,o,c,m);if(O!==void 0){if(O)continue;I=!1;break}if(R){if(!e(c,function(A,j){if(!r(R,j)&&(L===A||p(L,A,d,h,m)))return R.push(j)})){I=!1;break}}else if(!(L===C||p(L,C,d,h,m))){I=!1;break}}return m.delete(o),m.delete(c),I}return o6=i,o6}var l6,sD;function rpe(){if(sD)return l6;sD=1;var t=cl(),e=t.Uint8Array;return l6=e,l6}var c6,oD;function npe(){if(oD)return c6;oD=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return c6=t,c6}var u6,lD;function BE(){if(lD)return u6;lD=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return u6=t,u6}var d6,cD;function ape(){if(cD)return d6;cD=1;var t=S1(),e=rpe(),r=jE(),n=xW(),a=npe(),i=BE(),o=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",y="[object Number]",x="[object RegExp]",_="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",I="[object DataView]",R=t?t.prototype:void 0,L=R?R.valueOf:void 0;function C(O,A,j,k,z,D,$){switch(j){case I:if(O.byteLength!=A.byteLength||O.byteOffset!=A.byteOffset)return!1;O=O.buffer,A=A.buffer;case E:return!(O.byteLength!=A.byteLength||!D(new e(O),new e(A)));case d:case h:case y:return r(+O,+A);case p:return O.name==A.name&&O.message==A.message;case x:case S:return O==A+"";case m:var B=a;case _:var G=k&o;if(B||(B=i),O.size!=A.size&&!G)return!1;var K=$.get(O);if(K)return K==A;k|=c,$.set(O,A);var H=n(B(O),B(A),k,z,D,$);return $.delete(O),H;case w:if(L)return L.call(O)==L.call(A)}return!1}return d6=C,d6}var h6,uD;function vW(){if(uD)return h6;uD=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return h6=t,h6}var f6,dD;function ipe(){if(dD)return f6;dD=1;var t=vW(),e=ls();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return f6=r,f6}var p6,hD;function spe(){if(hD)return p6;hD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[i++]=c)}return o}return p6=t,p6}var m6,fD;function ope(){if(fD)return m6;fD=1;function t(){return[]}return m6=t,m6}var g6,pD;function lpe(){if(pD)return g6;pD=1;var t=spe(),e=ope(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return g6=i,g6}var y6,mD;function cpe(){if(mD)return y6;mD=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return y6=t,y6}var x6,gD;function upe(){if(gD)return x6;gD=1;var t=gc(),e=yc(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return x6=n,x6}var v6,yD;function $E(){if(yD)return v6;yD=1;var t=upe(),e=yc(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return v6=i,v6}var pm={exports:{}},b6,xD;function dpe(){if(xD)return b6;xD=1;function t(){return!1}return b6=t,b6}pm.exports;var vD;function bW(){return vD||(vD=1,(function(t,e){var r=cl(),n=dpe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(pm,pm.exports)),pm.exports}var w6,bD;function UE(){if(bD)return w6;bD=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return w6=r,w6}var S6,wD;function zE(){if(wD)return S6;wD=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return S6=e,S6}var _6,SD;function hpe(){if(SD)return _6;SD=1;var t=gc(),e=zE(),r=yc(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",y="[object RegExp]",x="[object Set]",_="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",I="[object Float32Array]",R="[object Float64Array]",L="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",A="[object Uint8Array]",j="[object Uint8ClampedArray]",k="[object Uint16Array]",z="[object Uint32Array]",D={};D[I]=D[R]=D[L]=D[C]=D[O]=D[A]=D[j]=D[k]=D[z]=!0,D[n]=D[a]=D[w]=D[i]=D[E]=D[o]=D[c]=D[d]=D[h]=D[p]=D[m]=D[y]=D[x]=D[_]=D[S]=!1;function $(B){return r(B)&&e(B.length)&&!!D[t(B)]}return _6=$,_6}var N6,_D;function wW(){if(_D)return N6;_D=1;function t(e){return function(r){return e(r)}}return N6=t,N6}var mm={exports:{}};mm.exports;var ND;function fpe(){return ND||(ND=1,(function(t,e){var r=zG(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(mm,mm.exports)),mm.exports}var T6,TD;function SW(){if(TD)return T6;TD=1;var t=hpe(),e=wW(),r=fpe(),n=r&&r.isTypedArray,a=n?e(n):t;return T6=a,T6}var A6,AD;function ppe(){if(AD)return A6;AD=1;var t=cpe(),e=$E(),r=ls(),n=bW(),a=UE(),i=SW(),o=Object.prototype,c=o.hasOwnProperty;function d(h,p){var m=r(h),y=!m&&e(h),x=!m&&!y&&n(h),_=!m&&!y&&!x&&i(h),S=m||y||x||_,w=S?t(h.length,String):[],E=w.length;for(var I in h)(p||c.call(h,I))&&!(S&&(I=="length"||x&&(I=="offset"||I=="parent")||_&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||a(I,E)))&&w.push(I);return w}return A6=d,A6}var j6,jD;function mpe(){if(jD)return j6;jD=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return j6=e,j6}var E6,ED;function _W(){if(ED)return E6;ED=1;function t(e,r){return function(n){return e(r(n))}}return E6=t,E6}var k6,kD;function gpe(){if(kD)return k6;kD=1;var t=_W(),e=t(Object.keys,Object);return k6=e,k6}var C6,CD;function ype(){if(CD)return C6;CD=1;var t=mpe(),e=gpe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&o.push(c);return o}return C6=a,C6}var O6,OD;function T1(){if(OD)return O6;OD=1;var t=AE(),e=zE();function r(n){return n!=null&&e(n.length)&&!t(n)}return O6=r,O6}var I6,ID;function ow(){if(ID)return I6;ID=1;var t=ppe(),e=ype(),r=T1();function n(a){return r(a)?t(a):e(a)}return I6=n,I6}var R6,RD;function xpe(){if(RD)return R6;RD=1;var t=ipe(),e=lpe(),r=ow();function n(a){return t(a,r,e)}return R6=n,R6}var M6,MD;function vpe(){if(MD)return M6;MD=1;var t=xpe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,c,d,h,p){var m=c&e,y=t(i),x=y.length,_=t(o),S=_.length;if(x!=S&&!m)return!1;for(var w=x;w--;){var E=y[w];if(!(m?E in o:n.call(o,E)))return!1}var I=p.get(i),R=p.get(o);if(I&&R)return I==o&&R==i;var L=!0;p.set(i,o),p.set(o,i);for(var C=m;++w<x;){E=y[w];var O=i[E],A=o[E];if(d)var j=m?d(A,O,E,o,i,p):d(O,A,E,i,o,p);if(!(j===void 0?O===A||h(O,A,c,d,p):j)){L=!1;break}C||(C=E=="constructor")}if(L&&!C){var k=i.constructor,z=o.constructor;k!=z&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof z=="function"&&z instanceof z)&&(L=!1)}return p.delete(i),p.delete(o),L}return M6=a,M6}var P6,PD;function bpe(){if(PD)return P6;PD=1;var t=w0(),e=cl(),r=t(e,"DataView");return P6=r,P6}var D6,DD;function wpe(){if(DD)return D6;DD=1;var t=w0(),e=cl(),r=t(e,"Promise");return D6=r,D6}var L6,LD;function NW(){if(LD)return L6;LD=1;var t=w0(),e=cl(),r=t(e,"Set");return L6=r,L6}var B6,BD;function Spe(){if(BD)return B6;BD=1;var t=w0(),e=cl(),r=t(e,"WeakMap");return B6=r,B6}var $6,$D;function _pe(){if($D)return $6;$D=1;var t=bpe(),e=EE(),r=wpe(),n=NW(),a=Spe(),i=gc(),o=VG(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",y="[object DataView]",x=o(t),_=o(e),S=o(r),w=o(n),E=o(a),I=i;return(t&&I(new t(new ArrayBuffer(1)))!=y||e&&I(new e)!=c||r&&I(r.resolve())!=h||n&&I(new n)!=p||a&&I(new a)!=m)&&(I=function(R){var L=i(R),C=L==d?R.constructor:void 0,O=C?o(C):"";if(O)switch(O){case x:return y;case _:return c;case S:return h;case w:return p;case E:return m}return L}),$6=I,$6}var U6,UD;function Npe(){if(UD)return U6;UD=1;var t=pW(),e=xW(),r=ape(),n=vpe(),a=_pe(),i=ls(),o=bW(),c=SW(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",y=Object.prototype,x=y.hasOwnProperty;function _(S,w,E,I,R,L){var C=i(S),O=i(w),A=C?p:a(S),j=O?p:a(w);A=A==h?m:A,j=j==h?m:j;var k=A==m,z=j==m,D=A==j;if(D&&o(S)){if(!o(w))return!1;C=!0,k=!1}if(D&&!k)return L||(L=new t),C||c(S)?e(S,w,E,I,R,L):r(S,w,A,E,I,R,L);if(!(E&d)){var $=k&&x.call(S,"__wrapped__"),B=z&&x.call(w,"__wrapped__");if($||B){var G=$?S.value():S,K=B?w.value():w;return L||(L=new t),R(G,K,E,I,L)}}return D?(L||(L=new t),n(S,w,E,I,R,L)):!1}return U6=_,U6}var z6,zD;function VE(){if(zD)return z6;zD=1;var t=Npe(),e=yc();function r(n,a,i,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,c)}return z6=r,z6}var V6,VD;function Tpe(){if(VD)return V6;VD=1;var t=pW(),e=VE(),r=1,n=2;function a(i,o,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var y=c[h];if(m&&y[2]?y[1]!==i[y[0]]:!(y[0]in i))return!1}for(;++h<p;){y=c[h];var x=y[0],_=i[x],S=y[1];if(m&&y[2]){if(_===void 0&&!(x in i))return!1}else{var w=new t;if(d)var E=d(_,S,x,i,o,w);if(!(E===void 0?e(S,_,r|n,d,w):E))return!1}}return!0}return V6=a,V6}var F6,FD;function TW(){if(FD)return F6;FD=1;var t=Fu();function e(r){return r===r&&!t(r)}return F6=e,F6}var q6,qD;function Ape(){if(qD)return q6;qD=1;var t=TW(),e=ow();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],c=n[o];a[i]=[o,c,t(c)]}return a}return q6=r,q6}var H6,HD;function AW(){if(HD)return H6;HD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return H6=t,H6}var G6,GD;function jpe(){if(GD)return G6;GD=1;var t=Tpe(),e=Ape(),r=AW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return G6=n,G6}var W6,WD;function Epe(){if(WD)return W6;WD=1;function t(e,r){return e!=null&&r in Object(e)}return W6=t,W6}var K6,KD;function kpe(){if(KD)return K6;KD=1;var t=HG(),e=$E(),r=ls(),n=UE(),a=zE(),i=tw();function o(c,d,h){d=t(d,c);for(var p=-1,m=d.length,y=!1;++p<m;){var x=i(d[p]);if(!(y=c!=null&&h(c,x)))break;c=c[x]}return y||++p!=m?y:(m=c==null?0:c.length,!!m&&a(m)&&n(x,m)&&(r(c)||e(c)))}return K6=o,K6}var Q6,QD;function Cpe(){if(QD)return Q6;QD=1;var t=Epe(),e=kpe();function r(n,a){return n!=null&&e(n,a,t)}return Q6=r,Q6}var X6,XD;function Ope(){if(XD)return X6;XD=1;var t=VE(),e=GG(),r=Cpe(),n=TE(),a=TW(),i=AW(),o=tw(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(o(p),m):function(y){var x=e(y,p);return x===void 0&&x===m?r(y,p):t(m,x,c|d)}}return X6=h,X6}var Y6,YD;function Ff(){if(YD)return Y6;YD=1;function t(e){return e}return Y6=t,Y6}var Z6,ZD;function Ipe(){if(ZD)return Z6;ZD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return Z6=t,Z6}var J6,JD;function Rpe(){if(JD)return J6;JD=1;var t=OE();function e(r){return function(n){return t(n,r)}}return J6=e,J6}var e_,eL;function Mpe(){if(eL)return e_;eL=1;var t=Ipe(),e=Rpe(),r=TE(),n=tw();function a(i){return r(i)?t(n(i)):e(i)}return e_=a,e_}var t_,tL;function ul(){if(tL)return t_;tL=1;var t=jpe(),e=Ope(),r=Ff(),n=ls(),a=Mpe();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return t_=i,t_}var r_,rL;function jW(){if(rL)return r_;rL=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return r_=t,r_}var n_,nL;function Ppe(){if(nL)return n_;nL=1;function t(e){return e!==e}return n_=t,n_}var a_,aL;function Dpe(){if(aL)return a_;aL=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return a_=t,a_}var i_,iL;function Lpe(){if(iL)return i_;iL=1;var t=jW(),e=Ppe(),r=Dpe();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return i_=n,i_}var s_,sL;function Bpe(){if(sL)return s_;sL=1;var t=Lpe();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return s_=e,s_}var o_,oL;function $pe(){if(oL)return o_;oL=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return o_=t,o_}var l_,lL;function Upe(){if(lL)return l_;lL=1;function t(){}return l_=t,l_}var c_,cL;function zpe(){if(cL)return c_;cL=1;var t=NW(),e=Upe(),r=BE(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return c_=a,c_}var u_,uL;function Vpe(){if(uL)return u_;uL=1;var t=mW(),e=Bpe(),r=$pe(),n=yW(),a=zpe(),i=BE(),o=200;function c(d,h,p){var m=-1,y=e,x=d.length,_=!0,S=[],w=S;if(p)_=!1,y=r;else if(x>=o){var E=h?null:a(d);if(E)return i(E);_=!1,y=n,w=new t}else w=h?[]:S;e:for(;++m<x;){var I=d[m],R=h?h(I):I;if(I=p||I!==0?I:0,_&&R===R){for(var L=w.length;L--;)if(w[L]===R)continue e;h&&w.push(R),S.push(I)}else y(w,R,p)||(w!==S&&w.push(R),S.push(I))}return S}return u_=c,u_}var d_,dL;function Fpe(){if(dL)return d_;dL=1;var t=ul(),e=Vpe();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return d_=r,d_}var qpe=Fpe();const hL=Xr(qpe);function EW(t,e,r){return e===!0?hL(t,r):rr(e)?hL(t,e):t}function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}var Hpe=["ref"];function fL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fL(Object(r),!0).forEach(function(n){lw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CW(n.key),n)}}function Wpe(t,e,r){return e&&pL(t.prototype,e),r&&pL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kpe(t,e,r){return e=cb(e),Qpe(t,kW()?Reflect.construct(e,r||[],cb(t).constructor):e.apply(t,r))}function Qpe(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xpe(t)}function Xpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kW=function(){return!!t})()}function cb(t){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cb(t)}function Ype(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dA(t,e)}function dA(t,e){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dA(t,e)}function lw(t,e,r){return e=CW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CW(t){var e=Zpe(t,"string");return sf(e)=="symbol"?e:e+""}function Zpe(t,e){if(sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Jpe(t,e){if(t==null)return{};var r=eme(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function eme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function tme(t){return t.value}function rme(t,e){if(se.isValidElement(t))return se.cloneElement(t,e);if(typeof t=="function")return se.createElement(t,e);e.ref;var r=Jpe(e,Hpe);return se.createElement(LE,r)}var mL=1,Ph=(function(t){function e(){var r;Gpe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kpe(this,e,[].concat(a)),lw(r,"lastBoundingBox",{width:-1,height:-1}),r}return Ype(e,t),Wpe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>mL||Math.abs(a.height-this.lastBoundingBox.height)>mL)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Rl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((h||0)-x.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var _=this.getBBoxSnapshot();y={top:((p||0)-_.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Rl(Rl({},m),y)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=Rl(Rl({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return se.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){n.wrapperNode=x}},rme(i,Rl(Rl({},this.props),{},{payload:EW(p,h,tme)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Rl(Rl({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&xt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(T.PureComponent);lw(Ph,"displayName","Legend");lw(Ph,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var h_,gL;function nme(){if(gL)return h_;gL=1;var t=S1(),e=$E(),r=ls(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return h_=a,h_}var f_,yL;function OW(){if(yL)return f_;yL=1;var t=vW(),e=nme();function r(n,a,i,o,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,o,c):t(c,p):o||(c[c.length]=p)}return c}return f_=r,f_}var p_,xL;function ame(){if(xL)return p_;xL=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(o[h],h,o)===!1)break}return r}}return p_=t,p_}var m_,vL;function ime(){if(vL)return m_;vL=1;var t=ame(),e=t();return m_=e,m_}var g_,bL;function IW(){if(bL)return g_;bL=1;var t=ime(),e=ow();function r(n,a){return n&&t(n,a,e)}return g_=r,g_}var y_,wL;function sme(){if(wL)return y_;wL=1;var t=T1();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&i(d[c],c,d)!==!1;);return a}}return y_=e,y_}var x_,SL;function FE(){if(SL)return x_;SL=1;var t=IW(),e=sme(),r=e(t);return x_=r,x_}var v_,_L;function RW(){if(_L)return v_;_L=1;var t=FE(),e=T1();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++i]=a(c,d,h)}),o}return v_=r,v_}var b_,NL;function ome(){if(NL)return b_;NL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return b_=t,b_}var w_,TL;function lme(){if(TL)return w_;TL=1;var t=zf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!o)return 1;if(!i&&!c&&!m&&r<n||m&&a&&o&&!i&&!c||h&&a&&o||!d&&o||!p)return-1}return 0}return w_=e,w_}var S_,AL;function cme(){if(AL)return S_;AL=1;var t=lme();function e(r,n,a){for(var i=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++i<d;){var p=t(o[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return S_=e,S_}var __,jL;function ume(){if(jL)return __;jL=1;var t=CE(),e=OE(),r=ul(),n=RW(),a=ome(),i=wW(),o=cme(),c=Ff(),d=ls();function h(p,m,y){m.length?m=t(m,function(S){return d(S)?function(w){return e(w,S.length===1?S[0]:S)}:S}):m=[c];var x=-1;m=t(m,i(r));var _=n(p,function(S,w,E){var I=t(m,function(R){return R(S)});return{criteria:I,index:++x,value:S}});return a(_,function(S,w){return o(S,w,y)})}return __=h,__}var N_,EL;function dme(){if(EL)return N_;EL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return N_=t,N_}var T_,kL;function hme(){if(kL)return T_;kL=1;var t=dme(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=o[c];return p[a]=i(h),t(n,this,p)}}return T_=r,T_}var A_,CL;function fme(){if(CL)return A_;CL=1;function t(e){return function(){return e}}return A_=t,A_}var j_,OL;function MW(){if(OL)return j_;OL=1;var t=w0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return j_=e,j_}var E_,IL;function pme(){if(IL)return E_;IL=1;var t=fme(),e=MW(),r=Ff(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return E_=n,E_}var k_,RL;function mme(){if(RL)return k_;RL=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return k_=n,k_}var C_,ML;function gme(){if(ML)return C_;ML=1;var t=pme(),e=mme(),r=e(t);return C_=r,C_}var O_,PL;function yme(){if(PL)return O_;PL=1;var t=Ff(),e=hme(),r=gme();function n(a,i){return r(e(a,i,t),a+"")}return O_=n,O_}var I_,DL;function cw(){if(DL)return I_;DL=1;var t=jE(),e=T1(),r=UE(),n=Fu();function a(i,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],i):!1}return I_=a,I_}var R_,LL;function xme(){if(LL)return R_;LL=1;var t=OW(),e=ume(),r=yme(),n=cw(),a=r(function(i,o){if(i==null)return[];var c=o.length;return c>1&&n(i,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return R_=a,R_}var vme=xme();const qE=Xr(vme);function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hA.apply(this,arguments)}function bme(t,e){return Nme(t)||_me(t,e)||Sme(t,e)||wme()}function wme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sme(t,e){if(t){if(typeof t=="string")return BL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BL(t,e)}}function BL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _me(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Nme(t){if(Array.isArray(t))return t}function $L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function M_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$L(Object(r),!0).forEach(function(n){Tme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$L(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tme(t,e,r){return e=Ame(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ame(t){var e=jme(t,"string");return dg(e)=="symbol"?e:e+""}function jme(t,e){if(dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eme(t){return Array.isArray(t)&&Ua(t[0])&&Ua(t[1])?t.join(" ~ "):t}var kme=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,y=e.itemSorter,x=e.wrapperClassName,_=e.labelClassName,S=e.label,w=e.labelFormatter,E=e.accessibilityLayer,I=E===void 0?!1:E,R=function(){if(p&&p.length){var $={padding:0,margin:0},B=(y?qE(p,y):p).map(function(G,K){if(G.type==="none")return null;var H=M_({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},c),J=G.formatter||m||Eme,ae=G.value,he=G.name,fe=ae,Y=he;if(J&&fe!=null&&Y!=null){var ne=J(ae,he,G,K,p);if(Array.isArray(ne)){var re=bme(ne,2);fe=re[0],Y=re[1]}else fe=ne}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:H},Ua(Y)?se.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Ua(Y)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},fe),se.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:$},B)}return null},L=M_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=M_({margin:0},h),O=!ur(S),A=O?S:"",j=pr("recharts-default-tooltip",x),k=pr("recharts-tooltip-label",_);O&&w&&p!==void 0&&p!==null&&(A=w(S,p));var z=I?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",hA({className:j,style:L},z),se.createElement("p",{className:k,style:C},se.isValidElement(A)?A:"".concat(A)),R())};function hg(t){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(t)}function Cx(t,e,r){return e=Cme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cme(t){var e=Ome(t,"string");return hg(e)=="symbol"?e:e+""}function Ome(t,e){if(hg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yp="recharts-tooltip-wrapper",Ime={visibility:"hidden"};function Rme(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return pr(Yp,Cx(Cx(Cx(Cx({},"".concat(Yp,"-right"),xt(r)&&e&&xt(e.x)&&r>=e.x),"".concat(Yp,"-left"),xt(r)&&e&&xt(e.x)&&r<e.x),"".concat(Yp,"-bottom"),xt(n)&&e&&xt(e.y)&&n>=e.y),"".concat(Yp,"-top"),xt(n)&&e&&xt(e.y)&&n<e.y))}function UL(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&xt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return o[n]?p:m;if(o[n]){var y=p,x=d[n];return y<x?Math.max(m,d[n]):Math.max(p,d[n])}var _=m+c,S=d[n]+h;return _>S?Math.max(p,d[n]):Math.max(m,d[n])}function Mme(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Pme(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return o.height>0&&o.width>0&&r?(p=UL({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=UL({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=Mme({translateX:p,translateY:m,useTranslate3d:c})):h=Ime,{cssProperties:h,cssClasses:Rme({translateX:p,translateY:m,coordinate:r})}}function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function zL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function VL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zL(Object(r),!0).forEach(function(n){pA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lme(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DW(n.key),n)}}function Bme(t,e,r){return e&&Lme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $me(t,e,r){return e=ub(e),Ume(t,PW()?Reflect.construct(e,r||[],ub(t).constructor):e.apply(t,r))}function Ume(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zme(t)}function zme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PW=function(){return!!t})()}function ub(t){return ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ub(t)}function Vme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fA(t,e)}function fA(t,e){return fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fA(t,e)}function pA(t,e,r){return e=DW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DW(t){var e=Fme(t,"string");return of(e)=="symbol"?e:e+""}function Fme(t,e){if(of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var FL=1,qme=(function(t){function e(){var r;Dme(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$me(this,e,[].concat(a)),pA(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),pA(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return Vme(e,t),Bme(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>FL||Math.abs(n.height-this.state.lastBoundingBox.height)>FL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,y=a.isAnimationActive,x=a.offset,_=a.position,S=a.reverseDirection,w=a.useTranslate3d,E=a.viewBox,I=a.wrapperStyle,R=Pme({allowEscapeViewBox:o,coordinate:p,offsetTopLeft:x,position:_,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:E}),L=R.cssClasses,C=R.cssProperties,O=VL(VL({transition:y&&i?"transform ".concat(c,"ms ").concat(d):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},I);return se.createElement("div",{tabIndex:-1,className:L,style:O,ref:function(j){n.wrapperNode=j}},h)}}])})(T.PureComponent),Hme=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},S0={isSsr:Hme()};function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function qL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qL(Object(r),!0).forEach(function(n){HE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wme(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BW(n.key),n)}}function Kme(t,e,r){return e&&Wme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qme(t,e,r){return e=db(e),Xme(t,LW()?Reflect.construct(e,r||[],db(t).constructor):e.apply(t,r))}function Xme(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yme(t)}function Yme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LW=function(){return!!t})()}function db(t){return db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},db(t)}function Zme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mA(t,e)}function mA(t,e){return mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mA(t,e)}function HE(t,e,r){return e=BW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BW(t){var e=Jme(t,"string");return lf(e)=="symbol"?e:e+""}function Jme(t,e){if(lf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ege(t){return t.dataKey}function tge(t,e){return se.isValidElement(t)?se.cloneElement(t,e):typeof t=="function"?se.createElement(t,e):se.createElement(kme,e)}var zo=(function(t){function e(){return Gme(this,e),Qme(this,e,arguments)}return Zme(e,t),Kme(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,y=a.isAnimationActive,x=a.offset,_=a.payload,S=a.payloadUniqBy,w=a.position,E=a.reverseDirection,I=a.useTranslate3d,R=a.viewBox,L=a.wrapperStyle,C=_??[];m&&C.length&&(C=EW(_.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),S,ege));var O=C.length>0;return se.createElement(qme,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:y,active:i,coordinate:p,hasPayload:O,offset:x,position:w,reverseDirection:E,useTranslate3d:I,viewBox:R,wrapperStyle:L},tge(h,HL(HL({},this.props),{},{payload:C})))}}])})(T.PureComponent);HE(zo,"displayName","Tooltip");HE(zo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!S0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var P_,GL;function rge(){if(GL)return P_;GL=1;var t=cl(),e=function(){return t.Date.now()};return P_=e,P_}var D_,WL;function nge(){if(WL)return D_;WL=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return D_=e,D_}var L_,KL;function age(){if(KL)return L_;KL=1;var t=nge(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return L_=r,L_}var B_,QL;function $W(){if(QL)return B_;QL=1;var t=age(),e=Fu(),r=zf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||o.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return B_=d,B_}var $_,XL;function ige(){if(XL)return $_;XL=1;var t=Fu(),e=rge(),r=$W(),n="Expected a function",a=Math.max,i=Math.min;function o(c,d,h){var p,m,y,x,_,S,w=0,E=!1,I=!1,R=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(E=!!h.leading,I="maxWait"in h,y=I?a(r(h.maxWait)||0,d):y,R="trailing"in h?!!h.trailing:R);function L(B){var G=p,K=m;return p=m=void 0,w=B,x=c.apply(K,G),x}function C(B){return w=B,_=setTimeout(j,d),E?L(B):x}function O(B){var G=B-S,K=B-w,H=d-G;return I?i(H,y-K):H}function A(B){var G=B-S,K=B-w;return S===void 0||G>=d||G<0||I&&K>=y}function j(){var B=e();if(A(B))return k(B);_=setTimeout(j,O(B))}function k(B){return _=void 0,R&&p?L(B):(p=m=void 0,x)}function z(){_!==void 0&&clearTimeout(_),w=0,p=S=m=_=void 0}function D(){return _===void 0?x:k(e())}function $(){var B=e(),G=A(B);if(p=arguments,m=this,S=B,G){if(_===void 0)return C(S);if(I)return clearTimeout(_),_=setTimeout(j,d),L(S)}return _===void 0&&(_=setTimeout(j,d)),x}return $.cancel=z,$.flush=D,$}return $_=o,$_}var U_,YL;function sge(){if(YL)return U_;YL=1;var t=ige(),e=Fu(),r="Expected a function";function n(a,i,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return U_=n,U_}var oge=sge();const UW=Xr(oge);function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}function ZL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ox(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(r),!0).forEach(function(n){lge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lge(t,e,r){return e=cge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cge(t){var e=uge(t,"string");return fg(e)=="symbol"?e:e+""}function uge(t,e){if(fg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dge(t,e){return mge(t)||pge(t,e)||fge(t,e)||hge()}function hge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fge(t,e){if(t){if(typeof t=="string")return JL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JL(t,e)}}function JL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function mge(t){if(Array.isArray(t))return t}var zW=T.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,y=t.maxHeight,x=t.children,_=t.debounce,S=_===void 0?0:_,w=t.id,E=t.className,I=t.onResize,R=t.style,L=R===void 0?{}:R,C=T.useRef(null),O=T.useRef();O.current=I,T.useImperativeHandle(e,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var A=T.useState({containerWidth:a.width,containerHeight:a.height}),j=dge(A,2),k=j[0],z=j[1],D=T.useCallback(function(B,G){z(function(K){var H=Math.round(B),J=Math.round(G);return K.containerWidth===H&&K.containerHeight===J?K:{containerWidth:H,containerHeight:J}})},[]);T.useEffect(function(){var B=function(he){var fe,Y=he[0].contentRect,ne=Y.width,re=Y.height;D(ne,re),(fe=O.current)===null||fe===void 0||fe.call(O,ne,re)};S>0&&(B=UW(B,S,{trailing:!0,leading:!1}));var G=new ResizeObserver(B),K=C.current.getBoundingClientRect(),H=K.width,J=K.height;return D(H,J),G.observe(C.current),function(){G.disconnect()}},[D,S]);var $=T.useMemo(function(){var B=k.containerWidth,G=k.containerHeight;if(B<0||G<0)return null;Zl(Rd(o)||Rd(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),Zl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var K=Rd(o)?B:o,H=Rd(d)?G:d;r&&r>0&&(K?H=K/r:H&&(K=H*r),y&&H>y&&(H=y)),Zl(K>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,H,o,d,p,m,r);var J=!Array.isArray(x)&&Yl(x.type).endsWith("Chart");return se.Children.map(x,function(ae){return se.isValidElement(ae)?T.cloneElement(ae,Ox({width:K,height:H},J?{style:Ox({height:"100%",width:"100%",maxHeight:H,maxWidth:K},ae.props.style)}:{})):ae})},[r,x,d,y,m,p,k,o]);return se.createElement("div",{id:w?"".concat(w):void 0,className:pr("recharts-responsive-container",E),style:Ox(Ox({},L),{},{width:o,height:d,minWidth:p,minHeight:m,maxHeight:y}),ref:C},$)}),GE=function(e){return null};GE.displayName="Cell";function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}function eB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eB(Object(r),!0).forEach(function(n){gge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gge(t,e,r){return e=yge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yge(t){var e=xge(t,"string");return pg(e)=="symbol"?e:e+""}function xge(t,e){if(pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uh={widthCache:{},cacheCount:0},vge=2e3,bge={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tB="recharts_measurement_span";function wge(t){var e=gA({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Em=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||S0.isSsr)return{width:0,height:0};var n=wge(r),a=JSON.stringify({text:e,copyStyle:n});if(uh.widthCache[a])return uh.widthCache[a];try{var i=document.getElementById(tB);i||(i=document.createElement("span"),i.setAttribute("id",tB),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=gA(gA({},bge),n);Object.assign(i.style,o),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return uh.widthCache[a]=d,++uh.cacheCount>vge&&(uh.cacheCount=0,uh.widthCache={}),d}catch{return{width:0,height:0}}},Sge=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function hb(t,e){return Age(t)||Tge(t,e)||Nge(t,e)||_ge()}function _ge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nge(t,e){if(t){if(typeof t=="string")return rB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rB(t,e)}}function rB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Age(t){if(Array.isArray(t))return t}function jge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kge(n.key),n)}}function Ege(t,e,r){return e&&nB(t.prototype,e),r&&nB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kge(t){var e=Cge(t,"string");return mg(e)=="symbol"?e:e+""}function Cge(t,e){if(mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var aB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Oge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ige=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,VW={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Rge=Object.keys(VW),wh="NaN";function Mge(t,e){return t*VW[e]}var Ix=(function(){function t(e,r){jge(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Oge.test(r)&&(this.num=NaN,this.unit=""),Rge.includes(r)&&(this.num=Mge(e,r),this.unit="px")}return Ege(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Ige.exec(r))!==null&&n!==void 0?n:[],i=hb(a,3),o=i[1],c=i[2];return new t(parseFloat(o),c??"")}}])})();function FW(t){if(t.includes(wh))return wh;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=aB.exec(e))!==null&&r!==void 0?r:[],a=hb(n,4),i=a[1],o=a[2],c=a[3],d=Ix.parse(i??""),h=Ix.parse(c??""),p=o==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return wh;e=e.replace(aB,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,y=(m=iB.exec(e))!==null&&m!==void 0?m:[],x=hb(y,4),_=x[1],S=x[2],w=x[3],E=Ix.parse(_??""),I=Ix.parse(w??""),R=S==="+"?E.add(I):E.subtract(I);if(R.isNaN())return wh;e=e.replace(iB,R.toString())}return e}var sB=/\(([^()]*)\)/;function Pge(t){for(var e=t;e.includes("(");){var r=sB.exec(e),n=hb(r,2),a=n[1];e=e.replace(sB,FW(a))}return e}function Dge(t){var e=t.replace(/\s+/g,"");return e=Pge(e),e=FW(e),e}function Lge(t){try{return Dge(t)}catch{return wh}}function z_(t){var e=Lge(t.slice(5,-1));return e===wh?"":e}var Bge=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$ge=["dx","dy","angle","className","breakAll"];function yA(){return yA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yA.apply(this,arguments)}function oB(t,e){if(t==null)return{};var r=Uge(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Uge(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function lB(t,e){return qge(t)||Fge(t,e)||Vge(t,e)||zge()}function zge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vge(t,e){if(t){if(typeof t=="string")return cB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cB(t,e)}}function cB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function qge(t){if(Array.isArray(t))return t}var qW=/[ \f\n\r\t\v\u2028\u2029]+/,HW=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];ur(r)||(n?i=r.toString().split(""):i=r.toString().split(qW));var o=i.map(function(d){return{word:d,width:Em(d,a).width}}),c=n?0:Em("",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},Hge=function(e,r,n,a,i){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=xt(o),m=c,y=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(H,J){var ae=J.word,he=J.width,fe=H[H.length-1];if(fe&&(a==null||i||fe.width+he+n<Number(a)))fe.words.push(ae),fe.width+=he+n;else{var Y={words:[ae],width:he};H.push(Y)}return H},[])},x=y(r),_=function(K){return K.reduce(function(H,J){return H.width>J.width?H:J})};if(!p)return x;for(var S="",w=function(K){var H=m.slice(0,K),J=HW({breakAll:h,style:d,children:H+S}).wordsWithComputedWidth,ae=y(J),he=ae.length>o||_(ae).width>Number(a);return[he,ae]},E=0,I=m.length-1,R=0,L;E<=I&&R<=m.length-1;){var C=Math.floor((E+I)/2),O=C-1,A=w(O),j=lB(A,2),k=j[0],z=j[1],D=w(C),$=lB(D,1),B=$[0];if(!k&&!B&&(E=C+1),k&&B&&(I=C-1),!k&&B){L=z;break}R++}return L||x},uB=function(e){var r=ur(e)?[]:e.toString().split(qW);return[{words:r}]},Gge=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!S0.isSsr){var d,h,p=HW({breakAll:o,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,y=p.spaceWidth;d=m,h=y}else return uB(a);return Hge({breakAll:o,children:a,maxLines:c,style:i},d,h,r,n)}return uB(a)},dB="#808080",cf=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,y=e.textAnchor,x=y===void 0?"start":y,_=e.verticalAnchor,S=_===void 0?"end":_,w=e.fill,E=w===void 0?dB:w,I=oB(e,Bge),R=T.useMemo(function(){return Gge({breakAll:I.breakAll,children:I.children,maxLines:I.maxLines,scaleToFit:m,style:I.style,width:I.width})},[I.breakAll,I.children,I.maxLines,m,I.style,I.width]),L=I.dx,C=I.dy,O=I.angle,A=I.className,j=I.breakAll,k=oB(I,$ge);if(!Ua(n)||!Ua(i))return null;var z=n+(xt(L)?L:0),D=i+(xt(C)?C:0),$;switch(S){case"start":$=z_("calc(".concat(h,")"));break;case"middle":$=z_("calc(".concat((R.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:$=z_("calc(".concat(R.length-1," * -").concat(c,")"));break}var B=[];if(m){var G=R[0].width,K=I.width;B.push("scale(".concat((xt(K)?K/G:1)/G,")"))}return O&&B.push("rotate(".concat(O,", ").concat(z,", ").concat(D,")")),B.length&&(k.transform=B.join(" ")),se.createElement("text",yA({},Ft(k,!0),{x:z,y:D,className:pr("recharts-text",A),textAnchor:x,fill:E.includes("url")?dB:E}),R.map(function(H,J){var ae=H.words.join(j?"":" ");return se.createElement("tspan",{x:z,dy:J===0?$:c,key:"".concat(ae,"-").concat(J)},ae)}))};function Au(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wge(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WE(t){let e,r,n;t.length!==2?(e=Au,r=(c,d)=>Au(t(c),d),n=(c,d)=>t(c)-d):(e=t===Au||t===Wge?t:Kge,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function o(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:o,right:i}}function Kge(){return 0}function GW(t){return t===null?NaN:+t}function*Qge(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Xge=WE(Au),A1=Xge.right;WE(GW).center;class hB extends Map{constructor(e,r=Jge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(fB(this,e))}has(e){return super.has(fB(this,e))}set(e,r){return super.set(Yge(this,e),r)}delete(e){return super.delete(Zge(this,e))}}function fB({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Yge({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Zge({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Jge(t){return t!==null&&typeof t=="object"?t.valueOf():t}function e1e(t=Au){if(t===Au)return WW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function WW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const t1e=Math.sqrt(50),r1e=Math.sqrt(10),n1e=Math.sqrt(2);function fb(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=t1e?10:i>=r1e?5:i>=n1e?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?fb(t,e,r*2):[c,d,h]}function xA(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?fb(e,t,r):fb(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(i-h)/-o;else for(let h=0;h<c;++h)d[h]=(i-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function vA(t,e,r){return e=+e,t=+t,r=+r,fb(t,e,r)[2]}function bA(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?vA(e,t,r):vA(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function pB(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function mB(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function KW(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?WW:e1e(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),x=Math.max(r,Math.floor(e-h*m/d+y)),_=Math.min(n,Math.floor(e+(d-h)*m/d+y));KW(t,e,x,_,a)}const i=t[e];let o=r,c=n;for(Zp(t,r,e),a(t[n],i)>0&&Zp(t,r,n);o<c;){for(Zp(t,o,c),++o,--c;a(t[o],i)<0;)++o;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?Zp(t,r,c):(++c,Zp(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function Zp(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function a1e(t,e,r){if(t=Float64Array.from(Qge(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return mB(t);if(e>=1)return pB(t);var n,a=(n-1)*e,i=Math.floor(a),o=pB(KW(t,i).subarray(0,i+1)),c=mB(t.subarray(i+1));return o+(c-o)*(a-i)}}function i1e(t,e,r=GW){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return o+(c-o)*(a-i)}}function s1e(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function oo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function xc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const wA=Symbol("implicit");function KE(){var t=new hB,e=[],r=[],n=wA;function a(i){let o=t.get(i);if(o===void 0){if(n!==wA)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new hB;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return KE(e,r).unknown(n)},oo.apply(a,arguments),a}function gg(){var t=KE().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var y=e().length,x=a<n,_=x?a:n,S=x?n:a;i=(S-_)/Math.max(1,y-d+h*2),c&&(i=Math.floor(i)),_+=(S-_-i*(y-d))*p,o=i*(1-d),c&&(_=Math.round(_),o=Math.round(o));var w=s1e(y).map(function(E){return _+i*E});return r(x?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),m()):e()},t.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(y){return arguments.length?(c=!!y,m()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},t.copy=function(){return gg(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},oo.apply(m(),arguments)}function QW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return QW(e())},t}function km(){return QW(gg.apply(null,arguments).paddingInner(1))}function QE(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function XW(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function j1(){}var yg=.7,pb=1/yg,Dh="\\s*([+-]?\\d+)\\s*",xg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o1e=/^#([0-9a-f]{3,8})$/,l1e=new RegExp(`^rgb\\(${Dh},${Dh},${Dh}\\)$`),c1e=new RegExp(`^rgb\\(${Xo},${Xo},${Xo}\\)$`),u1e=new RegExp(`^rgba\\(${Dh},${Dh},${Dh},${xg}\\)$`),d1e=new RegExp(`^rgba\\(${Xo},${Xo},${Xo},${xg}\\)$`),h1e=new RegExp(`^hsl\\(${xg},${Xo},${Xo}\\)$`),f1e=new RegExp(`^hsla\\(${xg},${Xo},${Xo},${xg}\\)$`),gB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};QE(j1,vg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:yB,formatHex:yB,formatHex8:p1e,formatHsl:m1e,formatRgb:xB,toString:xB});function yB(){return this.rgb().formatHex()}function p1e(){return this.rgb().formatHex8()}function m1e(){return YW(this).formatHsl()}function xB(){return this.rgb().formatRgb()}function vg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=o1e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?vB(e):r===3?new rs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Rx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Rx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=l1e.exec(t))?new rs(e[1],e[2],e[3],1):(e=c1e.exec(t))?new rs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=u1e.exec(t))?Rx(e[1],e[2],e[3],e[4]):(e=d1e.exec(t))?Rx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=h1e.exec(t))?SB(e[1],e[2]/100,e[3]/100,1):(e=f1e.exec(t))?SB(e[1],e[2]/100,e[3]/100,e[4]):gB.hasOwnProperty(t)?vB(gB[t]):t==="transparent"?new rs(NaN,NaN,NaN,0):null}function vB(t){return new rs(t>>16&255,t>>8&255,t&255,1)}function Rx(t,e,r,n){return n<=0&&(t=e=r=NaN),new rs(t,e,r,n)}function g1e(t){return t instanceof j1||(t=vg(t)),t?(t=t.rgb(),new rs(t.r,t.g,t.b,t.opacity)):new rs}function SA(t,e,r,n){return arguments.length===1?g1e(t):new rs(t,e,r,n??1)}function rs(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}QE(rs,SA,XW(j1,{brighter(t){return t=t==null?pb:Math.pow(pb,t),new rs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yg:Math.pow(yg,t),new rs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new rs(Fd(this.r),Fd(this.g),Fd(this.b),mb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bB,formatHex:bB,formatHex8:y1e,formatRgb:wB,toString:wB}));function bB(){return`#${Md(this.r)}${Md(this.g)}${Md(this.b)}`}function y1e(){return`#${Md(this.r)}${Md(this.g)}${Md(this.b)}${Md((isNaN(this.opacity)?1:this.opacity)*255)}`}function wB(){const t=mb(this.opacity);return`${t===1?"rgb(":"rgba("}${Fd(this.r)}, ${Fd(this.g)}, ${Fd(this.b)}${t===1?")":`, ${t})`}`}function mb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Fd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Md(t){return t=Fd(t),(t<16?"0":"")+t.toString(16)}function SB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new bo(t,e,r,n)}function YW(t){if(t instanceof bo)return new bo(t.h,t.s,t.l,t.opacity);if(t instanceof j1||(t=vg(t)),!t)return new bo;if(t instanceof bo)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(e===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new bo(o,c,d,t.opacity)}function x1e(t,e,r,n){return arguments.length===1?YW(t):new bo(t,e,r,n??1)}function bo(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}QE(bo,x1e,XW(j1,{brighter(t){return t=t==null?pb:Math.pow(pb,t),new bo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yg:Math.pow(yg,t),new bo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new rs(V_(t>=240?t-240:t+120,a,n),V_(t,a,n),V_(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new bo(_B(this.h),Mx(this.s),Mx(this.l),mb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=mb(this.opacity);return`${t===1?"hsl(":"hsla("}${_B(this.h)}, ${Mx(this.s)*100}%, ${Mx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _B(t){return t=(t||0)%360,t<0?t+360:t}function Mx(t){return Math.max(0,Math.min(1,t||0))}function V_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const XE=t=>()=>t;function v1e(t,e){return function(r){return t+r*e}}function b1e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function w1e(t){return(t=+t)==1?ZW:function(e,r){return r-e?b1e(e,r,t):XE(isNaN(e)?r:e)}}function ZW(t,e){var r=e-t;return r?v1e(t,r):XE(isNaN(t)?e:t)}const NB=(function t(e){var r=w1e(e);function n(a,i){var o=r((a=SA(a)).r,(i=SA(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=ZW(a.opacity,i.opacity);return function(p){return a.r=o(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function S1e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function _1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function N1e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=qf(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function T1e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function gb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function A1e(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=qf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var _A=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,F_=new RegExp(_A.source,"g");function j1e(t){return function(){return t}}function E1e(t){return function(e){return t(e)+""}}function k1e(t,e){var r=_A.lastIndex=F_.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=_A.exec(t))&&(a=F_.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:gb(n,a)})),r=F_.lastIndex;return r<e.length&&(i=e.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?E1e(d[0].x):j1e(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function qf(t,e){var r=typeof e,n;return e==null||r==="boolean"?XE(e):(r==="number"?gb:r==="string"?(n=vg(e))?(e=n,NB):k1e:e instanceof vg?NB:e instanceof Date?T1e:_1e(e)?S1e:Array.isArray(e)?N1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?A1e:gb)(t,e)}function YE(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function C1e(t,e){e===void 0&&(e=t,t=qf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function O1e(t){return function(){return t}}function yb(t){return+t}var TB=[0,1];function Di(t){return t}function NA(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:O1e(isNaN(e)?NaN:.5)}function I1e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function R1e(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=NA(a,n),i=r(o,i)):(n=NA(n,a),i=r(i,o)),function(c){return i(n(c))}}function M1e(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=NA(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(c){var d=A1(t,c,1,n)-1;return i[d](a[d](c))}}function E1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function uw(){var t=TB,e=TB,r=qf,n,a,i,o=Di,c,d,h;function p(){var y=Math.min(t.length,e.length);return o!==Di&&(o=I1e(t[0],t[y-1])),c=y>2?M1e:R1e,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?i:(d||(d=c(t.map(n),e,r)))(n(o(y)))}return m.invert=function(y){return o(a((h||(h=c(e,t.map(n),gb)))(y)))},m.domain=function(y){return arguments.length?(t=Array.from(y,yb),p()):t.slice()},m.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},m.rangeRound=function(y){return e=Array.from(y),r=YE,p()},m.clamp=function(y){return arguments.length?(o=y?!0:Di,p()):o!==Di},m.interpolate=function(y){return arguments.length?(r=y,p()):r},m.unknown=function(y){return arguments.length?(i=y,m):i},function(y,x){return n=y,a=x,p()}}function ZE(){return uw()(Di,Di)}function P1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function uf(t){return t=xb(Math.abs(t)),t?t[1]:NaN}function D1e(t,e){return function(r,n){for(var a=r.length,i=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return i.reverse().join(e)}}function L1e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var B1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bg(t){if(!(e=B1e.exec(t)))throw new Error("invalid format: "+t);var e;return new JE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bg.prototype=JE.prototype;function JE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}JE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $1e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var vb;function U1e(t,e){var r=xb(t,e);if(!r)return vb=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(vb=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+xb(t,Math.max(0,e+i-1))[0]}function AB(t,e){var r=xb(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const jB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:P1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>AB(t*100,e),r:AB,s:U1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function EB(t){return t}var kB=Array.prototype.map,CB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function z1e(t){var e=t.grouping===void 0||t.thousands===void 0?EB:D1e(kB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?EB:L1e(kB.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,y){m=bg(m);var x=m.fill,_=m.align,S=m.sign,w=m.symbol,E=m.zero,I=m.width,R=m.comma,L=m.precision,C=m.trim,O=m.type;O==="n"?(R=!0,O="g"):jB[O]||(L===void 0&&(L=12),C=!0,O="g"),(E||x==="0"&&_==="=")&&(E=!0,x="0",_="=");var A=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():""),j=(w==="$"?n:/[%p]/.test(O)?o:"")+(y&&y.suffix!==void 0?y.suffix:""),k=jB[O],z=/[defgprs%]/.test(O);L=L===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function D($){var B=A,G=j,K,H,J;if(O==="c")G=k($)+G,$="";else{$=+$;var ae=$<0||1/$<0;if($=isNaN($)?d:k(Math.abs($),L),C&&($=$1e($)),ae&&+$==0&&S!=="+"&&(ae=!1),B=(ae?S==="("?S:c:S==="-"||S==="("?"":S)+B,G=(O==="s"&&!isNaN($)&&vb!==void 0?CB[8+vb/3]:"")+G+(ae&&S==="("?")":""),z){for(K=-1,H=$.length;++K<H;)if(J=$.charCodeAt(K),48>J||J>57){G=(J===46?a+$.slice(K+1):$.slice(K))+G,$=$.slice(0,K);break}}}R&&!E&&($=e($,1/0));var he=B.length+$.length+G.length,fe=he<I?new Array(I-he+1).join(x):"";switch(R&&E&&($=e(fe+$,fe.length?I-G.length:1/0),fe=""),_){case"<":$=B+$+G+fe;break;case"=":$=B+fe+$+G;break;case"^":$=fe.slice(0,he=fe.length>>1)+B+$+G+fe.slice(he);break;default:$=fe+B+$+G;break}return i($)}return D.toString=function(){return m+""},D}function p(m,y){var x=Math.max(-8,Math.min(8,Math.floor(uf(y)/3)))*3,_=Math.pow(10,-x),S=h((m=bg(m),m.type="f",m),{suffix:CB[8+x/3]});return function(w){return S(_*w)}}return{format:h,formatPrefix:p}}var Px,e7,JW;V1e({thousands:",",grouping:[3],currency:["$",""]});function V1e(t){return Px=z1e(t),e7=Px.format,JW=Px.formatPrefix,Px}function F1e(t){return Math.max(0,-uf(Math.abs(t)))}function q1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(uf(e)/3)))*3-uf(Math.abs(t)))}function H1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,uf(e)-uf(t))+1}function eK(t,e,r,n){var a=bA(t,e,r),i;switch(n=bg(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=q1e(a,o))&&(n.precision=i),JW(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=H1e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=F1e(a))&&(n.precision=i-(n.type==="%")*2);break}}return e7(n)}function qu(t){var e=t.domain;return t.ticks=function(r){var n=e();return xA(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return eK(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],c=n[i],d,h,p=10;for(c<o&&(h=o,o=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=vA(o,c,r),h===d)return n[a]=o,n[i]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function bb(){var t=ZE();return t.copy=function(){return E1(t,bb())},oo.apply(t,arguments),qu(t)}function tK(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,yb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return tK(t).unknown(e)},t=arguments.length?Array.from(t,yb):[0,1],qu(r)}function rK(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function OB(t){return Math.log(t)}function IB(t){return Math.exp(t)}function G1e(t){return-Math.log(-t)}function W1e(t){return-Math.exp(-t)}function K1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Q1e(t){return t===10?K1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function X1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function RB(t){return(e,r)=>-t(-e,r)}function t7(t){const e=t(OB,IB),r=e.domain;let n=10,a,i;function o(){return a=X1e(n),i=Q1e(n),r()[0]<0?(a=RB(a),i=RB(i),t(G1e,W1e)):t(OB,IB),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=a(h),x=a(p),_,S;const w=c==null?10:+c;let E=[];if(!(n%1)&&x-y<w){if(y=Math.floor(y),x=Math.ceil(x),h>0){for(;y<=x;++y)for(_=1;_<n;++_)if(S=y<0?_/i(-y):_*i(y),!(S<h)){if(S>p)break;E.push(S)}}else for(;y<=x;++y)for(_=n-1;_>=1;--_)if(S=y>0?_/i(-y):_*i(y),!(S<h)){if(S>p)break;E.push(S)}E.length*2<w&&(E=xA(h,p,w))}else E=xA(y,x,Math.min(x-y,w)).map(i);return m?E.reverse():E},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=bg(d)).precision==null&&(d.trim=!0),d=e7(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(rK(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function nK(){const t=t7(uw()).domain([1,10]);return t.copy=()=>E1(t,nK()).base(t.base()),oo.apply(t,arguments),t}function MB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function PB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function r7(t){var e=1,r=t(MB(e),PB(e));return r.constant=function(n){return arguments.length?t(MB(e=+n),PB(e)):e},qu(r)}function aK(){var t=r7(uw());return t.copy=function(){return E1(t,aK()).constant(t.constant())},oo.apply(t,arguments)}function DB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Y1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Z1e(t){return t<0?-t*t:t*t}function n7(t){var e=t(Di,Di),r=1;function n(){return r===1?t(Di,Di):r===.5?t(Y1e,Z1e):t(DB(r),DB(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},qu(e)}function a7(){var t=n7(uw());return t.copy=function(){return E1(t,a7()).exponent(t.exponent())},oo.apply(t,arguments),t}function J1e(){return a7.apply(null,arguments).exponent(.5)}function LB(t){return Math.sign(t)*t*t}function eye(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function iK(){var t=ZE(),e=[0,1],r=!1,n;function a(i){var o=eye(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(LB(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,yb)).map(LB)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return iK(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},oo.apply(a,arguments),qu(a)}function sK(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=i1e(t,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:e[A1(r,o)]}return i.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Au),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return sK().domain(t).range(e).unknown(n)},oo.apply(i,arguments)}function oK(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[A1(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return oK().domain([t,e]).range(a).unknown(i)},oo.apply(qu(o),arguments)}function lK(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[A1(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return lK().domain(t).range(e).unknown(r)},oo.apply(a,arguments)}const q_=new Date,H_=new Date;function Ha(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<o);return d},a.filter=i=>Ha(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!i(o););else for(;--c>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(q_.setTime(+i),H_.setTime(+o),t(q_),t(H_),Math.floor(r(q_,H_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const wb=Ha(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);wb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ha(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):wb);wb.range;const Hl=1e3,Zs=Hl*60,Gl=Zs*60,lc=Gl*24,i7=lc*7,BB=lc*30,G_=lc*365,Pd=Ha(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Hl)},(t,e)=>(e-t)/Hl,t=>t.getUTCSeconds());Pd.range;const s7=Ha(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hl)},(t,e)=>{t.setTime(+t+e*Zs)},(t,e)=>(e-t)/Zs,t=>t.getMinutes());s7.range;const o7=Ha(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Zs)},(t,e)=>(e-t)/Zs,t=>t.getUTCMinutes());o7.range;const l7=Ha(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hl-t.getMinutes()*Zs)},(t,e)=>{t.setTime(+t+e*Gl)},(t,e)=>(e-t)/Gl,t=>t.getHours());l7.range;const c7=Ha(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Gl)},(t,e)=>(e-t)/Gl,t=>t.getUTCHours());c7.range;const k1=Ha(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Zs)/lc,t=>t.getDate()-1);k1.range;const dw=Ha(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/lc,t=>t.getUTCDate()-1);dw.range;const cK=Ha(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/lc,t=>Math.floor(t/lc));cK.range;function _0(t){return Ha(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Zs)/i7)}const hw=_0(0),Sb=_0(1),tye=_0(2),rye=_0(3),df=_0(4),nye=_0(5),aye=_0(6);hw.range;Sb.range;tye.range;rye.range;df.range;nye.range;aye.range;function N0(t){return Ha(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/i7)}const fw=N0(0),_b=N0(1),iye=N0(2),sye=N0(3),hf=N0(4),oye=N0(5),lye=N0(6);fw.range;_b.range;iye.range;sye.range;hf.range;oye.range;lye.range;const u7=Ha(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());u7.range;const d7=Ha(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());d7.range;const cc=Ha(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());cc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ha(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});cc.range;const uc=Ha(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());uc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ha(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});uc.range;function uK(t,e,r,n,a,i){const o=[[Pd,1,Hl],[Pd,5,5*Hl],[Pd,15,15*Hl],[Pd,30,30*Hl],[i,1,Zs],[i,5,5*Zs],[i,15,15*Zs],[i,30,30*Zs],[a,1,Gl],[a,3,3*Gl],[a,6,6*Gl],[a,12,12*Gl],[n,1,lc],[n,2,2*lc],[r,1,i7],[e,1,BB],[e,3,3*BB],[t,1,G_]];function c(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const x=m&&typeof m.range=="function"?m:d(h,p,m),_=x?x.range(h,+p+1):[];return y?_.reverse():_}function d(h,p,m){const y=Math.abs(p-h)/m,x=WE(([,,w])=>w).right(o,y);if(x===o.length)return t.every(bA(h/G_,p/G_,m));if(x===0)return wb.every(Math.max(bA(h,p,m),1));const[_,S]=o[y/o[x-1][2]<o[x][2]/y?x-1:x];return _.every(S)}return[c,d]}const[cye,uye]=uK(uc,d7,fw,cK,c7,o7),[dye,hye]=uK(cc,u7,hw,k1,l7,s7);function W_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function K_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jp(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function fye(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=em(a),p=tm(a),m=em(i),y=tm(i),x=em(o),_=tm(o),S=em(c),w=tm(c),E=em(d),I=tm(d),R={a:J,A:ae,b:he,B:fe,c:null,d:qB,e:qB,f:Dye,g:Gye,G:Kye,H:Rye,I:Mye,j:Pye,L:dK,m:Lye,M:Bye,p:Y,q:ne,Q:WB,s:KB,S:$ye,u:Uye,U:zye,V:Vye,w:Fye,W:qye,x:null,X:null,y:Hye,Y:Wye,Z:Qye,"%":GB},L={a:re,A:ye,b:Te,B:Ve,c:null,d:HB,e:HB,f:Jye,g:cxe,G:dxe,H:Xye,I:Yye,j:Zye,L:fK,m:exe,M:txe,p:Je,q:Xe,Q:WB,s:KB,S:rxe,u:nxe,U:axe,V:ixe,w:sxe,W:oxe,x:null,X:null,y:lxe,Y:uxe,Z:hxe,"%":GB},C={a:z,A:D,b:$,B,c:G,d:VB,e:VB,f:kye,g:zB,G:UB,H:FB,I:FB,j:Tye,L:Eye,m:Nye,M:Aye,p:k,q:_ye,Q:Oye,s:Iye,S:jye,u:xye,U:vye,V:bye,w:yye,W:wye,x:K,X:H,y:zB,Y:UB,Z:Sye,"%":Cye};R.x=O(r,R),R.X=O(n,R),R.c=O(e,R),L.x=O(r,L),L.X=O(n,L),L.c=O(e,L);function O(ie,Be){return function(Q){var te=[],_e=-1,Se=0,Qe=ie.length,nt,Ot,Me;for(Q instanceof Date||(Q=new Date(+Q));++_e<Qe;)ie.charCodeAt(_e)===37&&(te.push(ie.slice(Se,_e)),(Ot=$B[nt=ie.charAt(++_e)])!=null?nt=ie.charAt(++_e):Ot=nt==="e"?" ":"0",(Me=Be[nt])&&(nt=Me(Q,Ot)),te.push(nt),Se=_e+1);return te.push(ie.slice(Se,_e)),te.join("")}}function A(ie,Be){return function(Q){var te=Jp(1900,void 0,1),_e=j(te,ie,Q+="",0),Se,Qe;if(_e!=Q.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Be&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(Se=K_(Jp(te.y,0,1)),Qe=Se.getUTCDay(),Se=Qe>4||Qe===0?_b.ceil(Se):_b(Se),Se=dw.offset(Se,(te.V-1)*7),te.y=Se.getUTCFullYear(),te.m=Se.getUTCMonth(),te.d=Se.getUTCDate()+(te.w+6)%7):(Se=W_(Jp(te.y,0,1)),Qe=Se.getDay(),Se=Qe>4||Qe===0?Sb.ceil(Se):Sb(Se),Se=k1.offset(Se,(te.V-1)*7),te.y=Se.getFullYear(),te.m=Se.getMonth(),te.d=Se.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Qe="Z"in te?K_(Jp(te.y,0,1)).getUTCDay():W_(Jp(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Qe+5)%7:te.w+te.U*7-(Qe+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,K_(te)):W_(te)}}function j(ie,Be,Q,te){for(var _e=0,Se=Be.length,Qe=Q.length,nt,Ot;_e<Se;){if(te>=Qe)return-1;if(nt=Be.charCodeAt(_e++),nt===37){if(nt=Be.charAt(_e++),Ot=C[nt in $B?Be.charAt(_e++):nt],!Ot||(te=Ot(ie,Q,te))<0)return-1}else if(nt!=Q.charCodeAt(te++))return-1}return te}function k(ie,Be,Q){var te=h.exec(Be.slice(Q));return te?(ie.p=p.get(te[0].toLowerCase()),Q+te[0].length):-1}function z(ie,Be,Q){var te=x.exec(Be.slice(Q));return te?(ie.w=_.get(te[0].toLowerCase()),Q+te[0].length):-1}function D(ie,Be,Q){var te=m.exec(Be.slice(Q));return te?(ie.w=y.get(te[0].toLowerCase()),Q+te[0].length):-1}function $(ie,Be,Q){var te=E.exec(Be.slice(Q));return te?(ie.m=I.get(te[0].toLowerCase()),Q+te[0].length):-1}function B(ie,Be,Q){var te=S.exec(Be.slice(Q));return te?(ie.m=w.get(te[0].toLowerCase()),Q+te[0].length):-1}function G(ie,Be,Q){return j(ie,e,Be,Q)}function K(ie,Be,Q){return j(ie,r,Be,Q)}function H(ie,Be,Q){return j(ie,n,Be,Q)}function J(ie){return o[ie.getDay()]}function ae(ie){return i[ie.getDay()]}function he(ie){return d[ie.getMonth()]}function fe(ie){return c[ie.getMonth()]}function Y(ie){return a[+(ie.getHours()>=12)]}function ne(ie){return 1+~~(ie.getMonth()/3)}function re(ie){return o[ie.getUTCDay()]}function ye(ie){return i[ie.getUTCDay()]}function Te(ie){return d[ie.getUTCMonth()]}function Ve(ie){return c[ie.getUTCMonth()]}function Je(ie){return a[+(ie.getUTCHours()>=12)]}function Xe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var Be=O(ie+="",R);return Be.toString=function(){return ie},Be},parse:function(ie){var Be=A(ie+="",!1);return Be.toString=function(){return ie},Be},utcFormat:function(ie){var Be=O(ie+="",L);return Be.toString=function(){return ie},Be},utcParse:function(ie){var Be=A(ie+="",!0);return Be.toString=function(){return ie},Be}}}var $B={"-":"",_:" ",0:"0"},ri=/^\s*\d+/,pye=/^%/,mye=/[\\^$*+?|[\]().{}]/g;function Gr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function gye(t){return t.replace(mye,"\\$&")}function em(t){return new RegExp("^(?:"+t.map(gye).join("|")+")","i")}function tm(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function yye(t,e,r){var n=ri.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function xye(t,e,r){var n=ri.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function vye(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function bye(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function wye(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function UB(t,e,r){var n=ri.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function zB(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Sye(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function _ye(t,e,r){var n=ri.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Nye(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function VB(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Tye(t,e,r){var n=ri.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function FB(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Aye(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function jye(t,e,r){var n=ri.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Eye(t,e,r){var n=ri.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function kye(t,e,r){var n=ri.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Cye(t,e,r){var n=pye.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Oye(t,e,r){var n=ri.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Iye(t,e,r){var n=ri.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function qB(t,e){return Gr(t.getDate(),e,2)}function Rye(t,e){return Gr(t.getHours(),e,2)}function Mye(t,e){return Gr(t.getHours()%12||12,e,2)}function Pye(t,e){return Gr(1+k1.count(cc(t),t),e,3)}function dK(t,e){return Gr(t.getMilliseconds(),e,3)}function Dye(t,e){return dK(t,e)+"000"}function Lye(t,e){return Gr(t.getMonth()+1,e,2)}function Bye(t,e){return Gr(t.getMinutes(),e,2)}function $ye(t,e){return Gr(t.getSeconds(),e,2)}function Uye(t){var e=t.getDay();return e===0?7:e}function zye(t,e){return Gr(hw.count(cc(t)-1,t),e,2)}function hK(t){var e=t.getDay();return e>=4||e===0?df(t):df.ceil(t)}function Vye(t,e){return t=hK(t),Gr(df.count(cc(t),t)+(cc(t).getDay()===4),e,2)}function Fye(t){return t.getDay()}function qye(t,e){return Gr(Sb.count(cc(t)-1,t),e,2)}function Hye(t,e){return Gr(t.getFullYear()%100,e,2)}function Gye(t,e){return t=hK(t),Gr(t.getFullYear()%100,e,2)}function Wye(t,e){return Gr(t.getFullYear()%1e4,e,4)}function Kye(t,e){var r=t.getDay();return t=r>=4||r===0?df(t):df.ceil(t),Gr(t.getFullYear()%1e4,e,4)}function Qye(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gr(e/60|0,"0",2)+Gr(e%60,"0",2)}function HB(t,e){return Gr(t.getUTCDate(),e,2)}function Xye(t,e){return Gr(t.getUTCHours(),e,2)}function Yye(t,e){return Gr(t.getUTCHours()%12||12,e,2)}function Zye(t,e){return Gr(1+dw.count(uc(t),t),e,3)}function fK(t,e){return Gr(t.getUTCMilliseconds(),e,3)}function Jye(t,e){return fK(t,e)+"000"}function exe(t,e){return Gr(t.getUTCMonth()+1,e,2)}function txe(t,e){return Gr(t.getUTCMinutes(),e,2)}function rxe(t,e){return Gr(t.getUTCSeconds(),e,2)}function nxe(t){var e=t.getUTCDay();return e===0?7:e}function axe(t,e){return Gr(fw.count(uc(t)-1,t),e,2)}function pK(t){var e=t.getUTCDay();return e>=4||e===0?hf(t):hf.ceil(t)}function ixe(t,e){return t=pK(t),Gr(hf.count(uc(t),t)+(uc(t).getUTCDay()===4),e,2)}function sxe(t){return t.getUTCDay()}function oxe(t,e){return Gr(_b.count(uc(t)-1,t),e,2)}function lxe(t,e){return Gr(t.getUTCFullYear()%100,e,2)}function cxe(t,e){return t=pK(t),Gr(t.getUTCFullYear()%100,e,2)}function uxe(t,e){return Gr(t.getUTCFullYear()%1e4,e,4)}function dxe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?hf(t):hf.ceil(t),Gr(t.getUTCFullYear()%1e4,e,4)}function hxe(){return"+0000"}function GB(){return"%"}function WB(t){return+t}function KB(t){return Math.floor(+t/1e3)}var dh,mK,gK;fxe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fxe(t){return dh=fye(t),mK=dh.format,dh.parse,gK=dh.utcFormat,dh.utcParse,dh}function pxe(t){return new Date(t)}function mxe(t){return t instanceof Date?+t:+new Date(+t)}function h7(t,e,r,n,a,i,o,c,d,h){var p=ZE(),m=p.invert,y=p.domain,x=h(".%L"),_=h(":%S"),S=h("%I:%M"),w=h("%I %p"),E=h("%a %d"),I=h("%b %d"),R=h("%B"),L=h("%Y");function C(O){return(d(O)<O?x:c(O)<O?_:o(O)<O?S:i(O)<O?w:n(O)<O?a(O)<O?E:I:r(O)<O?R:L)(O)}return p.invert=function(O){return new Date(m(O))},p.domain=function(O){return arguments.length?y(Array.from(O,mxe)):y().map(pxe)},p.ticks=function(O){var A=y();return t(A[0],A[A.length-1],O??10)},p.tickFormat=function(O,A){return A==null?C:h(A)},p.nice=function(O){var A=y();return(!O||typeof O.range!="function")&&(O=e(A[0],A[A.length-1],O??10)),O?y(rK(A,O)):p},p.copy=function(){return E1(p,h7(t,e,r,n,a,i,o,c,d,h))},p}function gxe(){return oo.apply(h7(dye,hye,cc,u7,hw,k1,l7,s7,Pd,mK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yxe(){return oo.apply(h7(cye,uye,uc,d7,fw,dw,c7,o7,Pd,gK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pw(){var t=0,e=1,r,n,a,i,o=Di,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:o(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(o=m,h):o};function p(m){return function(y){var x,_;return arguments.length?([x,_]=y,o=m(x,_),h):[o(0),o(1)]}}return h.range=p(qf),h.rangeRound=p(YE),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Hu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function yK(){var t=qu(pw()(Di));return t.copy=function(){return Hu(t,yK())},xc.apply(t,arguments)}function xK(){var t=t7(pw()).domain([1,10]);return t.copy=function(){return Hu(t,xK()).base(t.base())},xc.apply(t,arguments)}function vK(){var t=r7(pw());return t.copy=function(){return Hu(t,vK()).constant(t.constant())},xc.apply(t,arguments)}function f7(){var t=n7(pw());return t.copy=function(){return Hu(t,f7()).exponent(t.exponent())},xc.apply(t,arguments)}function xxe(){return f7.apply(null,arguments).exponent(.5)}function bK(){var t=[],e=Di;function r(n){if(n!=null&&!isNaN(n=+n))return e((A1(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Au),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>a1e(t,i/n))},r.copy=function(){return bK(e).domain(t)},xc.apply(r,arguments)}function mw(){var t=0,e=.5,r=1,n=1,a,i,o,c,d,h=Di,p,m=!1,y;function x(S){return isNaN(S=+S)?y:(S=.5+((S=+p(S))-i)*(n*S<n*i?c:d),h(m?Math.max(0,Math.min(1,S)):S))}x.domain=function(S){return arguments.length?([t,e,r]=S,a=p(t=+t),i=p(e=+e),o=p(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,x):[t,e,r]},x.clamp=function(S){return arguments.length?(m=!!S,x):m},x.interpolator=function(S){return arguments.length?(h=S,x):h};function _(S){return function(w){var E,I,R;return arguments.length?([E,I,R]=w,h=C1e(S,[E,I,R]),x):[h(0),h(.5),h(1)]}}return x.range=_(qf),x.rangeRound=_(YE),x.unknown=function(S){return arguments.length?(y=S,x):y},function(S){return p=S,a=S(t),i=S(e),o=S(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,x}}function wK(){var t=qu(mw()(Di));return t.copy=function(){return Hu(t,wK())},xc.apply(t,arguments)}function SK(){var t=t7(mw()).domain([.1,1,10]);return t.copy=function(){return Hu(t,SK()).base(t.base())},xc.apply(t,arguments)}function _K(){var t=r7(mw());return t.copy=function(){return Hu(t,_K()).constant(t.constant())},xc.apply(t,arguments)}function p7(){var t=n7(mw());return t.copy=function(){return Hu(t,p7()).exponent(t.exponent())},xc.apply(t,arguments)}function vxe(){return p7.apply(null,arguments).exponent(.5)}const QB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gg,scaleDiverging:wK,scaleDivergingLog:SK,scaleDivergingPow:p7,scaleDivergingSqrt:vxe,scaleDivergingSymlog:_K,scaleIdentity:tK,scaleImplicit:wA,scaleLinear:bb,scaleLog:nK,scaleOrdinal:KE,scalePoint:km,scalePow:a7,scaleQuantile:sK,scaleQuantize:oK,scaleRadial:iK,scaleSequential:yK,scaleSequentialLog:xK,scaleSequentialPow:f7,scaleSequentialQuantile:bK,scaleSequentialSqrt:xxe,scaleSequentialSymlog:vK,scaleSqrt:J1e,scaleSymlog:aK,scaleThreshold:lK,scaleTime:gxe,scaleUtc:yxe,tickFormat:eK},Symbol.toStringTag,{value:"Module"}));var Q_,XB;function gw(){if(XB)return Q_;XB=1;var t=zf();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return Q_=e,Q_}var X_,YB;function NK(){if(YB)return X_;YB=1;function t(e,r){return e>r}return X_=t,X_}var Y_,ZB;function bxe(){if(ZB)return Y_;ZB=1;var t=gw(),e=NK(),r=Ff();function n(a){return a&&a.length?t(a,r,e):void 0}return Y_=n,Y_}var wxe=bxe();const yw=Xr(wxe);var Z_,JB;function TK(){if(JB)return Z_;JB=1;function t(e,r){return e<r}return Z_=t,Z_}var J_,e$;function Sxe(){if(e$)return J_;e$=1;var t=gw(),e=TK(),r=Ff();function n(a){return a&&a.length?t(a,r,e):void 0}return J_=n,J_}var _xe=Sxe();const xw=Xr(_xe);var eN,t$;function Nxe(){if(t$)return eN;t$=1;var t=CE(),e=ul(),r=RW(),n=ls();function a(i,o){var c=n(i)?t:r;return c(i,e(o,3))}return eN=a,eN}var tN,r$;function Txe(){if(r$)return tN;r$=1;var t=OW(),e=Nxe();function r(n,a){return t(e(n,a),1)}return tN=r,tN}var Axe=Txe();const jxe=Xr(Axe);var rN,n$;function Exe(){if(n$)return rN;n$=1;var t=VE();function e(r,n){return t(r,n)}return rN=e,rN}var kxe=Exe();const C1=Xr(kxe);var Hf=1e9,Cxe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},g7,Fn=!0,so="[DecimalError] ",qd=so+"Invalid argument: ",m7=so+"Exponent out of range: ",Gf=Math.floor,Ad=Math.pow,Oxe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ts,Za=1e7,Bn=7,AK=9007199254740991,Nb=Gf(AK/Bn),kt={};kt.absoluteValue=kt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kt.comparedTo=kt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Bn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kt.dividedBy=kt.div=function(t){return Jl(this,new this.constructor(t))};kt.dividedToIntegerBy=kt.idiv=function(t){var e=this,r=e.constructor;return jn(Jl(e,new r(t),0,1),r.precision)};kt.equals=kt.eq=function(t){return!this.cmp(t)};kt.exponent=function(){return Ca(this)};kt.greaterThan=kt.gt=function(t){return this.cmp(t)>0};kt.greaterThanOrEqualTo=kt.gte=function(t){return this.cmp(t)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(t){return this.cmp(t)<0};kt.lessThanOrEqualTo=kt.lte=function(t){return this.cmp(t)<1};kt.logarithm=kt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Ts))throw Error(so+"NaN");if(r.s<1)throw Error(so+(r.s?"NaN":"-Infinity"));return r.eq(Ts)?new n(0):(Fn=!1,e=Jl(wg(r,i),wg(t,i),i),Fn=!0,jn(e,a))};kt.minus=kt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?kK(e,t):jK(e,(t.s=-t.s,t))};kt.modulo=kt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(so+"NaN");return r.s?(Fn=!1,e=Jl(r,t,0,1).times(t),Fn=!0,r.minus(e)):jn(new n(r),a)};kt.naturalExponential=kt.exp=function(){return EK(this)};kt.naturalLogarithm=kt.ln=function(){return wg(this)};kt.negated=kt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kt.plus=kt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?jK(e,t):kK(e,(t.s=-t.s,t))};kt.precision=kt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(qd+t);if(e=Ca(a)+1,n=a.d.length-1,r=n*Bn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kt.squareRoot=kt.sqrt=function(){var t,e,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(so+"NaN")}for(t=Ca(c),Fn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=Ko(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Gf((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(Jl(c,i,o+2)).times(.5),Ko(i.d).slice(0,o)===(e=Ko(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(jn(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;o+=4}return Fn=!0,jn(n,r)};kt.times=kt.mul=function(t){var e,r,n,a,i,o,c,d,h,p=this,m=p.constructor,y=p.d,x=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=y.length,h=x.length,d<h&&(i=y,y=x,x=i,o=d,d=h,h=o),i=[],o=d+h,n=o;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+x[n]*y[a-n-1]+e,i[a--]=c%Za|0,e=c/Za|0;i[a]=(i[a]+e)%Za|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Fn?jn(t,m.precision):t};kt.toDecimalPlaces=kt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(nl(t,0,Hf),e===void 0?e=n.rounding:nl(e,0,8),jn(r,t+Ca(r)+1,e))};kt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=u0(n,!0):(nl(t,0,Hf),e===void 0?e=a.rounding:nl(e,0,8),n=jn(new a(n),t+1,e),r=u0(n,!0,t+1)),r};kt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?u0(a):(nl(t,0,Hf),e===void 0?e=i.rounding:nl(e,0,8),n=jn(new i(a),t+Ca(a)+1,e),r=u0(n.abs(),!1,t+Ca(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kt.toInteger=kt.toint=function(){var t=this,e=t.constructor;return jn(new e(t),Ca(t)+1,e.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(t){var e,r,n,a,i,o,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(Ts);if(c=new d(c),!c.s){if(t.s<1)throw Error(so+"Infinity");return c}if(c.eq(Ts))return c;if(n=d.precision,t.eq(Ts))return jn(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=c.s,o){if((r=p<0?-p:p)<=AK){for(a=new d(Ts),e=Math.ceil(n/Bn+4),Fn=!1;r%2&&(a=a.times(c),i$(a.d,e)),r=Gf(r/2),r!==0;)c=c.times(c),i$(c.d,e);return Fn=!0,t.s<0?new d(Ts).div(a):jn(a,n)}}else if(i<0)throw Error(so+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Fn=!1,a=t.times(wg(c,n+h)),Fn=!0,a=EK(a),a.s=i,a};kt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Ca(a),n=u0(a,r<=i.toExpNeg||r>=i.toExpPos)):(nl(t,1,Hf),e===void 0?e=i.rounding:nl(e,0,8),a=jn(new i(a),t,e),r=Ca(a),n=u0(a,t<=r||r<=i.toExpNeg,t)),n};kt.toSignificantDigits=kt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(nl(t,1,Hf),e===void 0?e=n.rounding:nl(e,0,8)),jn(new n(r),t,e)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ca(t),r=t.constructor;return u0(t,e<=r.toExpNeg||e>=r.toExpPos)};function jK(t,e){var r,n,a,i,o,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Fn?jn(e,m):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(m/Bn),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/Za|0,d[i]%=Za;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Fn?jn(e,m):e}function nl(t,e,r){if(t!==~~t||t<e||t>r)throw Error(qd+t)}function Ko(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=Bn-n.length,r&&(i+=tu(r)),i+=n;o=t[e],n=o+"",r=Bn-n.length,r&&(i+=tu(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Jl=(function(){function t(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%Za|0,o=i/Za|0;return o&&n.unshift(o),n}function e(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Za+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,h,p,m,y,x,_,S,w,E,I,R,L,C,O,A,j,k=n.constructor,z=n.s==a.s?1:-1,D=n.d,$=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(so+"Division by zero");for(d=n.e-a.e,A=$.length,C=D.length,x=new k(z),_=x.d=[],h=0;$[h]==(D[h]||0);)++h;if($[h]>(D[h]||0)&&--d,i==null?I=i=k.precision:o?I=i+(Ca(n)-Ca(a))+1:I=i,I<0)return new k(0);if(I=I/Bn+2|0,h=0,A==1)for(p=0,$=$[0],I++;(h<C||p)&&I--;h++)R=p*Za+(D[h]||0),_[h]=R/$|0,p=R%$|0;else{for(p=Za/($[0]+1)|0,p>1&&($=t($,p),D=t(D,p),A=$.length,C=D.length),L=A,S=D.slice(0,A),w=S.length;w<A;)S[w++]=0;j=$.slice(),j.unshift(0),O=$[0],$[1]>=Za/2&&++O;do p=0,c=e($,S,A,w),c<0?(E=S[0],A!=w&&(E=E*Za+(S[1]||0)),p=E/O|0,p>1?(p>=Za&&(p=Za-1),m=t($,p),y=m.length,w=S.length,c=e(m,S,y,w),c==1&&(p--,r(m,A<y?j:$,y))):(p==0&&(c=p=1),m=$.slice()),y=m.length,y<w&&m.unshift(0),r(S,m,w),c==-1&&(w=S.length,c=e($,S,A,w),c<1&&(p++,r(S,A<w?j:$,w))),w=S.length):c===0&&(p++,S=[0]),_[h++]=p,c&&S[0]?S[w++]=D[L]||0:(S=[D[L]],w=1);while((L++<C||S[0]!==void 0)&&I--)}return _[0]||_.shift(),x.e=d,jn(x,o?i+Ca(x)+1:i)}})();function EK(t,e){var r,n,a,i,o,c,d=0,h=0,p=t.constructor,m=p.precision;if(Ca(t)>16)throw Error(m7+Ca(t));if(!t.s)return new p(Ts);for(Fn=!1,c=m,o=new p(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(Ad(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(Ts),p.precision=c;;){if(a=jn(a.times(t),c),r=r.times(++d),o=i.plus(Jl(a,r,c)),Ko(o.d).slice(0,c)===Ko(i.d).slice(0,c)){for(;h--;)i=jn(i.times(i),c);return p.precision=m,e==null?(Fn=!0,jn(i,m)):i}i=o}}function Ca(t){for(var e=t.e*Bn,r=t.d[0];r>=10;r/=10)e++;return e}function nN(t,e,r){if(e>t.LN10.sd())throw Fn=!0,r&&(t.precision=r),Error(so+"LN10 precision limit exceeded");return jn(new t(t.LN10),e)}function tu(t){for(var e="";t--;)e+="0";return e}function wg(t,e){var r,n,a,i,o,c,d,h,p,m=1,y=10,x=t,_=x.d,S=x.constructor,w=S.precision;if(x.s<1)throw Error(so+(x.s?"NaN":"-Infinity"));if(x.eq(Ts))return new S(0);if(e==null?(Fn=!1,h=w):h=e,x.eq(10))return e==null&&(Fn=!0),nN(S,h);if(h+=y,S.precision=h,r=Ko(_),n=r.charAt(0),i=Ca(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(t),r=Ko(x.d),n=r.charAt(0),m++;i=Ca(x),n>1?(x=new S("0."+r),i++):x=new S(n+"."+r.slice(1))}else return d=nN(S,h+2,w).times(i+""),x=wg(new S(n+"."+r.slice(1)),h-y).plus(d),S.precision=w,e==null?(Fn=!0,jn(x,w)):x;for(c=o=x=Jl(x.minus(Ts),x.plus(Ts),h),p=jn(x.times(x),h),a=3;;){if(o=jn(o.times(p),h),d=c.plus(Jl(o,new S(a),h)),Ko(d.d).slice(0,h)===Ko(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(nN(S,h+2,w).times(i+""))),c=Jl(c,new S(m),h),S.precision=w,e==null?(Fn=!0,jn(c,w)):c;c=d,a+=2}}function a$(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Gf(r/Bn),t.d=[],n=(r+1)%Bn,r<0&&(n+=Bn),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Bn;n<a;)t.d.push(+e.slice(n,n+=Bn));e=e.slice(n),n=Bn-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Fn&&(t.e>Nb||t.e<-Nb))throw Error(m7+r)}else t.s=0,t.e=0,t.d=[0];return t}function jn(t,e,r){var n,a,i,o,c,d,h,p,m=t.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Bn,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/Bn),i=m.length,p>=i)return t;for(h=i=m[p],o=1;i>=10;i/=10)o++;n%=Bn,a=n-Bn+o}if(r!==void 0&&(i=Ad(10,o-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/Ad(10,o-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Ca(t),m.length=1,e=e-i-1,m[0]=Ad(10,(Bn-e%Bn)%Bn),t.e=Gf(-e/Bn)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=Ad(10,Bn-n),m[p]=a>0?(h/Ad(10,o-a)%Ad(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==Za&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=Za)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Fn&&(t.e>Nb||t.e<-Nb))throw Error(m7+Ca(t));return t}function kK(t,e){var r,n,a,i,o,c,d,h,p,m,y=t.constructor,x=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Fn?jn(e,x):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(p=o<0,p?(r=d,o=-o,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(x/Bn),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}o=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>o;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=Za-1;--d[i],d[a]+=Za}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Fn?jn(e,x):e):new y(0)}function u0(t,e,r){var n,a=Ca(t),i=Ko(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+tu(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+tu(-a-1)+i,r&&(n=r-o)>0&&(i+=tu(n))):a>=o?(i+=tu(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+tu(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=tu(n))),t.s<0?"-"+i:i}function i$(t,e){if(t.length>e)return t.length=e,!0}function CK(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(qd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return a$(o,i.toString())}else if(typeof i!="string")throw Error(qd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Oxe.test(i))a$(o,i);else throw Error(qd+i)}if(a.prototype=kt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=CK,a.config=a.set=Ixe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Ixe(t){if(!t||typeof t!="object")throw Error(so+"Object expected");var e,r,n,a=["precision",1,Hf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Gf(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(qd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(qd+r+": "+n);return this}var g7=CK(Cxe);Ts=new g7(1);const bn=g7;function Rxe(t){return Lxe(t)||Dxe(t)||Pxe(t)||Mxe()}function Mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pxe(t,e){if(t){if(typeof t=="string")return TA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TA(t,e)}}function Dxe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Lxe(t){if(Array.isArray(t))return TA(t)}function TA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bxe=function(e){return e},OK={},IK=function(e){return e===OK},s$=function(e){return function r(){return arguments.length===0||arguments.length===1&&IK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},$xe=function t(e,r){return e===1?r:s$(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(c){return c!==OK}).length;return o>=e?r.apply(void 0,a):t(e-o,s$(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return IK(m)?d.shift():m});return r.apply(void 0,Rxe(p).concat(d))}))})},vw=function(e){return $xe(e.length,e)},AA=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},Uxe=vw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),zxe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Bxe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},jA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},RK=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function Vxe(t){var e;return t===0?e=1:e=Math.floor(new bn(t).abs().log(10).toNumber())+1,e}function Fxe(t,e,r){for(var n=new bn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var qxe=vw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),Hxe=vw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Gxe=vw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const bw={rangeStep:Fxe,getDigitCount:Vxe,interpolateNumber:qxe,uninterpolateNumber:Hxe,uninterpolateTruncation:Gxe};function EA(t){return Qxe(t)||Kxe(t)||MK(t)||Wxe()}function Wxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kxe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Qxe(t){if(Array.isArray(t))return kA(t)}function Sg(t,e){return Zxe(t)||Yxe(t,e)||MK(t,e)||Xxe()}function Xxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MK(t,e){if(t){if(typeof t=="string")return kA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kA(t,e)}}function kA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yxe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Zxe(t){if(Array.isArray(t))return t}function PK(t){var e=Sg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function DK(t,e,r){if(t.lte(0))return new bn(0);var n=bw.getDigitCount(t.toNumber()),a=new bn(10).pow(n),i=t.div(a),o=n!==1?.05:.1,c=new bn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new bn(Math.ceil(d))}function Jxe(t,e,r){var n=1,a=new bn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new bn(10).pow(bw.getDigitCount(t)-1),a=new bn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new bn(Math.floor(t)))}else t===0?a=new bn(Math.floor((e-1)/2)):r||(a=new bn(Math.floor(t)));var o=Math.floor((e-1)/2),c=zxe(Uxe(function(d){return a.add(new bn(d-o).mul(n)).toNumber()}),AA);return c(0,e)}function LK(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new bn(0),tickMin:new bn(0),tickMax:new bn(0)};var i=DK(new bn(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new bn(0):(o=new bn(t).add(e).div(2),o=o.sub(new bn(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),d=Math.ceil(new bn(e).sub(o).div(i).toNumber()),h=c+d+1;return h>r?LK(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:o.sub(new bn(c).mul(i)),tickMax:o.add(new bn(d).mul(i))})}function eve(t){var e=Sg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=PK([r,n]),d=Sg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(EA(AA(0,a-1).map(function(){return 1/0}))):[].concat(EA(AA(0,a-1).map(function(){return-1/0})),[p]);return r>n?jA(m):m}if(h===p)return Jxe(h,a,i);var y=LK(h,p,o,i),x=y.step,_=y.tickMin,S=y.tickMax,w=bw.rangeStep(_,S.add(new bn(.1).mul(x)),x);return r>n?jA(w):w}function tve(t,e){var r=Sg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=PK([n,a]),c=Sg(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=DK(new bn(h).sub(d).div(p-1),i,0),y=[].concat(EA(bw.rangeStep(new bn(d),new bn(h).sub(new bn(.99).mul(m)),m)),[h]);return n>a?jA(y):y}var rve=RK(eve),nve=RK(tve),ave="Invariant failed";function d0(t,e){throw new Error(ave)}var ive=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function Tb(){return Tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tb.apply(this,arguments)}function sve(t,e){return uve(t)||cve(t,e)||lve(t,e)||ove()}function ove(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lve(t,e){if(t){if(typeof t=="string")return o$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o$(t,e)}}function o$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function uve(t){if(Array.isArray(t))return t}function dve(t,e){if(t==null)return{};var r=hve(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UK(n.key),n)}}function mve(t,e,r){return e&&pve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gve(t,e,r){return e=Ab(e),yve(t,BK()?Reflect.construct(e,r||[],Ab(t).constructor):e.apply(t,r))}function yve(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xve(t)}function xve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BK=function(){return!!t})()}function Ab(t){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ab(t)}function vve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CA(t,e)}function CA(t,e){return CA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},CA(t,e)}function $K(t,e,r){return e=UK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UK(t){var e=bve(t,"string");return ff(e)=="symbol"?e:e+""}function bve(t,e){if(ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var O1=(function(t){function e(){return fve(this,e),gve(this,e,arguments)}return vve(e,t),mve(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,y=dve(n,ive),x=Ft(y,!1);this.props.direction==="x"&&p.type!=="number"&&d0();var _=d.map(function(S){var w=h(S,c),E=w.x,I=w.y,R=w.value,L=w.errorVal;if(!L)return null;var C=[],O,A;if(Array.isArray(L)){var j=sve(L,2);O=j[0],A=j[1]}else O=A=L;if(i==="vertical"){var k=p.scale,z=I+a,D=z+o,$=z-o,B=k(R-O),G=k(R+A);C.push({x1:G,y1:D,x2:G,y2:$}),C.push({x1:B,y1:z,x2:G,y2:z}),C.push({x1:B,y1:D,x2:B,y2:$})}else if(i==="horizontal"){var K=m.scale,H=E+a,J=H-o,ae=H+o,he=K(R-O),fe=K(R+A);C.push({x1:J,y1:fe,x2:ae,y2:fe}),C.push({x1:H,y1:he,x2:H,y2:fe}),C.push({x1:J,y1:he,x2:ae,y2:he})}return se.createElement(qr,Tb({className:"recharts-errorBar",key:"bar-".concat(C.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},x),C.map(function(Y){return se.createElement("line",Tb({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return se.createElement(qr,{className:"recharts-errorBars"},_)}}])})(se.Component);$K(O1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});$K(O1,"displayName","ErrorBar");function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function l$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l$(Object(r),!0).forEach(function(n){wve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wve(t,e,r){return e=Sve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sve(t){var e=_ve(t,"string");return _g(e)=="symbol"?e:e+""}function _ve(t,e){if(_g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zK=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=_s(r,Ph);if(!o)return null;var c=Ph.defaultProps,d=c!==void 0?bd(bd({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var y=m.item,x=m.props,_=x.sectors||x.data||[];return p.concat(_.map(function(S){return{type:o.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):h=(n||[]).map(function(p){var m=p.item,y=m.type.defaultProps,x=y!==void 0?bd(bd({},y),m.props):{},_=x.dataKey,S=x.name,w=x.legendType,E=x.hide;return{inactive:E,dataKey:_,type:d.iconType||w||"square",color:y7(m),value:S||_,payload:x}}),bd(bd(bd({},d),Ph.getWithHeight(o,a)),{},{payload:h,item:o})};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function c$(t){return jve(t)||Ave(t)||Tve(t)||Nve()}function Nve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tve(t,e){if(t){if(typeof t=="string")return OA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OA(t,e)}}function Ave(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jve(t){if(Array.isArray(t))return OA(t)}function OA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function na(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(r),!0).forEach(function(n){Lh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lh(t,e,r){return e=Eve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Eve(t){var e=kve(t,"string");return Ng(e)=="symbol"?e:e+""}function kve(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yi(t,e,r){return ur(t)||ur(e)?r:Ua(e)?eo(t,e,r):rr(e)?e(t):r}function Cm(t,e,r,n){var a=jxe(t,function(c){return yi(c,e)});if(r==="number"){var i=a.filter(function(c){return xt(c)||parseFloat(c)});return i.length?[xw(i),yw(i)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!ur(c)}):a;return o.map(function(c){return Ua(c)||c instanceof Date?c:""})}var Cve=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,y=h>=c-1?a[0].coordinate:a[h+1].coordinate,x=void 0;if(wo(m-p)!==wo(y-m)){var _=[];if(wo(y-m)===wo(d[1]-d[0])){x=y;var S=m+d[1]-d[0];_[0]=Math.min(S,(S+p)/2),_[1]=Math.max(S,(S+p)/2)}else{x=p;var w=y+d[1]-d[0];_[0]=Math.min(m,(w+m)/2),_[1]=Math.max(m,(w+m)/2)}var E=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(e>E[0]&&e<=E[1]||e>=_[0]&&e<=_[1]){o=a[h].index;break}}else{var I=Math.min(p,y),R=Math.max(p,y);if(e>(I+m)/2&&e<=(R+m)/2){o=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){o=n[L].index;break}return o},y7=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,o=i.stroke,c=i.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},Ove=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),y=0,x=m.length;y<x;y++){var _=p[m[y]],S=_.items,w=_.cateAxisId,E=S.filter(function(A){return Yl(A.type).indexOf("Bar")>=0});if(E&&E.length){var I=E[0].type.defaultProps,R=I!==void 0?na(na({},I),E[0].props):E[0].props,L=R.barSize,C=R[w];o[C]||(o[C]=[]);var O=ur(L)?r:L;o[C].push({item:E[0],stackList:E.slice(1),barSize:ur(O)?void 0:So(O,n,0)})}}return o},Ive=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=So(r,a,0,!0),p,m=[];if(o[0].barSize===+o[0].barSize){var y=!1,x=a/d,_=o.reduce(function(L,C){return L+C.barSize||0},0);_+=(d-1)*h,_>=a&&(_-=(d-1)*h,h=0),_>=a&&x>0&&(y=!0,x*=.9,_=d*x);var S=(a-_)/2>>0,w={offset:S-h,size:0};p=o.reduce(function(L,C){var O={item:C.item,position:{offset:w.offset+w.size+h,size:y?x:C.barSize}},A=[].concat(c$(L),[O]);return w=A[A.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(j){A.push({item:j,position:w})}),A},m)}else{var E=So(n,a,0,!0);a-2*E-(d-1)*h<=0&&(h=0);var I=(a-2*E-(d-1)*h)/d;I>1&&(I>>=0);var R=c===+c?Math.min(I,c):I;p=o.reduce(function(L,C,O){var A=[].concat(c$(L),[{item:C.item,position:{offset:E+(I+h)*O+(I-R)/2,size:R}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(j){A.push({item:j,position:A[A.length-1].position})}),A},m)}return p},Rve=function(e,r,n,a){var i=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=zK({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,y=p.height,x=h.align,_=h.verticalAlign,S=h.layout;if((S==="vertical"||S==="horizontal"&&_==="middle")&&x!=="center"&&xt(e[x]))return na(na({},e),{},Lh({},x,e[x]+(m||0)));if((S==="horizontal"||S==="vertical"&&x==="center")&&_!=="middle"&&xt(e[_]))return na(na({},e),{},Lh({},_,e[_]+(y||0)))}return e},Mve=function(e,r,n){return ur(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},VK=function(e,r,n,a,i){var o=r.props.children,c=Cs(o,O1).filter(function(h){return Mve(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=yi(p,n);if(ur(m))return h;var y=Array.isArray(m)?[xw(m),yw(m)]:[m,m],x=d.reduce(function(_,S){var w=yi(p,S,0),E=y[0]-Math.abs(Array.isArray(w)?w[0]:w),I=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(E,_[0]),Math.max(I,_[1])]},[1/0,-1/0]);return[Math.min(x[0],h[0]),Math.max(x[1],h[1])]},[1/0,-1/0])}return null},Pve=function(e,r,n,a,i){var o=r.map(function(c){return VK(e,c,n,i,a)}).filter(function(c){return!ur(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},FK=function(e,r,n,a,i){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&VK(e,d,h,a)||Cm(e,h,n,i)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},qK=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},HK=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,o,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||c.push(r),o||c.push(n),c},Wl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?wo(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var y=i?i.indexOf(m):m;return{coordinate:a(y)+h,value:m,offset:h}});return p.filter(function(m){return!_1(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,y){return{coordinate:a(m)+h,value:m,index:y,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,y){return{coordinate:a(m)+h,value:i?i[m]:m,index:y,offset:h}})},aN=new WeakMap,Dx=function(e,r){if(typeof r!="function")return e;aN.has(e)||aN.set(e,new WeakMap);var n=aN.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},GK=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:gg(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:bb(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:km(),realScaleType:"point"}:i==="category"?{scale:gg(),realScaleType:"band"}:{scale:bb(),realScaleType:"linear"};if(l0(a)){var d="scale".concat(rw(a));return{scale:(QB[d]||km)(),realScaleType:QB[d]?d:"point"}}return rr(a)?{scale:a}:{scale:km(),realScaleType:"point"}},d$=1e-4,WK=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-d$,o=Math.max(a[0],a[1])+d$,c=e(r[0]),d=e(r[n-1]);(c<i||c>o||d<i||d>o)&&e.domain([r[0],r[n-1]])}},Dve=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},Lve=function(e,r){if(!r||r.length!==2||!xt(r[0])||!xt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!xt(e[0])||e[0]<n)&&(i[0]=n),(!xt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},Bve=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,c=0;c<r;++c){var d=_1(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},$ve=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var c=_1(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=i,e[o][n][1]=i+c,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},Uve={sign:Bve,expand:jfe,none:nf,silhouette:Efe,wiggle:kfe,positive:$ve},zve=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=Uve[n],o=Afe().keys(a).value(function(c,d){return+yi(c,d,0)}).order(oA).offset(i);return o(e)},Vve=function(e,r,n,a,i,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(m,y){var x,_=(x=y.type)!==null&&x!==void 0&&x.defaultProps?na(na({},y.type.defaultProps),y.props):y.props,S=_.stackId,w=_.hide;if(w)return m;var E=_[n],I=m[E]||{hasStack:!1,stackGroups:{}};if(Ua(S)){var R=I.stackGroups[S]||{numericAxisId:n,cateAxisId:a,items:[]};R.items.push(y),I.hasStack=!0,I.stackGroups[S]=R}else I.stackGroups[N1("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[y]};return na(na({},m),{},Lh({},E,I))},d),p={};return Object.keys(h).reduce(function(m,y){var x=h[y];if(x.hasStack){var _={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(S,w){var E=x.stackGroups[w];return na(na({},S),{},Lh({},w,{numericAxisId:n,cateAxisId:a,items:E.items,stackedData:zve(e,E.items,i)}))},_)}return na(na({},m),{},Lh({},y,x))},p)},KK=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=rve(h,i,c);return e.domain([xw(p),yw(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),y=nve(m,i,c);return{niceTicks:y}}return null};function h$(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ur(a[e.dataKey])){var c=tb(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=yi(a,ur(o)?e.dataKey:o);return ur(d)?null:e.scale(d)}var f$=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=yi(o,r.dataKey,r.domain[c]);return ur(d)?null:r.scale(d)-i/2+a},Fve=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},qve=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(Ua(i)){var o=r[i];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},Hve=function(e){return e.reduce(function(r,n){return[xw(n.concat([r[0]]).filter(xt)),yw(n.concat([r[1]]).filter(xt))]},[1/0,-1/0])},QK=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],c=o.stackedData,d=c.reduce(function(h,p){var m=Hve(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},p$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,m$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IA=function(e,r,n){if(rr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(xt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(p$.test(e[0])){var i=+p$.exec(e[0])[1];a[0]=r[0]-i}else rr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(xt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(m$.test(e[1])){var o=+m$.exec(e[1])[1];a[1]=r[1]+o}else rr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},jb=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=qE(r,function(m){return m.coordinate}),o=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];o=Math.min((h.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},g$=function(e,r,n){return!e||!e.length||C1(e,eo(n,"type.defaultProps.domain"))?r:e},XK=function(e,r){var n=e.type.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return na(na({},Ft(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:i||a,color:y7(e),value:yi(r,a),type:d,payload:r,chartType:h,hide:p})};function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function y$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(r),!0).forEach(function(n){YK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YK(t,e,r){return e=Gve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gve(t){var e=Wve(t,"string");return Tg(e)=="symbol"?e:e+""}function Wve(t,e){if(Tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kve(t,e){return Zve(t)||Yve(t,e)||Xve(t,e)||Qve()}function Qve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xve(t,e){if(t){if(typeof t=="string")return x$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x$(t,e)}}function x$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Zve(t){if(Array.isArray(t))return t}var Eb=Math.PI/180,Jve=function(e){return e*180/Math.PI},wn=function(e,r,n,a){return{x:e+Math.cos(-Eb*a)*n,y:r+Math.sin(-Eb*a)*n}},ebe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},tbe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=So(e.cx,o,o/2),m=So(e.cy,c,c/2),y=ebe(o,c,n),x=So(e.innerRadius,y,0),_=So(e.outerRadius,y,y*.8),S=Object.keys(r);return S.reduce(function(w,E){var I=r[E],R=I.domain,L=I.reversed,C;if(ur(I.range))a==="angleAxis"?C=[d,h]:a==="radiusAxis"&&(C=[x,_]),L&&(C=[C[1],C[0]]);else{C=I.range;var O=C,A=Kve(O,2);d=A[0],h=A[1]}var j=GK(I,i),k=j.realScaleType,z=j.scale;z.domain(R).range(C),WK(z);var D=KK(z,Pl(Pl({},I),{},{realScaleType:k})),$=Pl(Pl(Pl({},I),D),{},{range:C,radius:_,realScaleType:k,scale:z,cx:p,cy:m,innerRadius:x,outerRadius:_,startAngle:d,endAngle:h});return Pl(Pl({},w),{},YK({},E,$))},{})},rbe=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},nbe=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,c=rbe({x:n,y:a},{x:i,y:o});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:Jve(h),angleInRadian:h}},abe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},ibe=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(i,o);return e+c*360},v$=function(e,r){var n=e.x,a=e.y,i=nbe({x:n,y:a},r),o=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var p=abe(r),m=p.startAngle,y=p.endAngle,x=c,_;if(m<=y){for(;x>y;)x-=360;for(;x<m;)x+=360;_=x>=m&&x<=y}else{for(;x>m;)x-=360;for(;x<y;)x+=360;_=x>=y&&x<=m}return _?Pl(Pl({},r),{},{radius:o,angle:ibe(x,r)}):null},ZK=function(e){return!T.isValidElement(e)&&!rr(e)&&typeof e!="boolean"?e.className:""};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}var sbe=["offset"];function obe(t){return dbe(t)||ube(t)||cbe(t)||lbe()}function lbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cbe(t,e){if(t){if(typeof t=="string")return RA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RA(t,e)}}function ube(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dbe(t){if(Array.isArray(t))return RA(t)}function RA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hbe(t,e){if(t==null)return{};var r=fbe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function b$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function La(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(r),!0).forEach(function(n){pbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pbe(t,e,r){return e=mbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mbe(t){var e=gbe(t,"string");return Ag(e)=="symbol"?e:e+""}function gbe(t,e){if(Ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jg(){return jg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jg.apply(this,arguments)}var ybe=function(e){var r=e.value,n=e.formatter,a=ur(e.children)?r:e.children;return rr(n)?n(a):a},xbe=function(e,r){var n=wo(r-e),a=Math.min(Math.abs(r-e),360);return n*a},vbe=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,y=d.outerRadius,x=d.startAngle,_=d.endAngle,S=d.clockWise,w=(m+y)/2,E=xbe(x,_),I=E>=0?1:-1,R,L;a==="insideStart"?(R=x+I*o,L=S):a==="insideEnd"?(R=_-I*o,L=!S):a==="end"&&(R=_+I*o,L=S),L=E<=0?L:!L;var C=wn(h,p,w,R),O=wn(h,p,w,R+(L?1:-1)*359),A="M".concat(C.x,",").concat(C.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(L?0:1,`,
    `).concat(O.x,",").concat(O.y),j=ur(e.id)?N1("recharts-radial-line-"):e.id;return se.createElement("text",jg({},n,{dominantBaseline:"central",className:pr("recharts-radial-bar-label",c)}),se.createElement("defs",null,se.createElement("path",{id:j,d:A})),se.createElement("textPath",{xlinkHref:"#".concat(j)},r))},bbe=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,y=(p+m)/2;if(a==="outside"){var x=wn(o,c,h+n,y),_=x.x,S=x.y;return{x:_,y:S,textAnchor:_>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,E=wn(o,c,w,y),I=E.x,R=E.y;return{x:I,y:R,textAnchor:"middle",verticalAnchor:"middle"}},wbe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,c=o.x,d=o.y,h=o.width,p=o.height,m=p>=0?1:-1,y=m*a,x=m>0?"end":"start",_=m>0?"start":"end",S=h>=0?1:-1,w=S*a,E=S>0?"end":"start",I=S>0?"start":"end";if(i==="top"){var R={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:x};return La(La({},R),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+p+y,textAnchor:"middle",verticalAnchor:_};return La(La({},L),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var C={x:c-w,y:d+p/2,textAnchor:E,verticalAnchor:"middle"};return La(La({},C),n?{width:Math.max(C.x-n.x,0),height:p}:{})}if(i==="right"){var O={x:c+h+w,y:d+p/2,textAnchor:I,verticalAnchor:"middle"};return La(La({},O),n?{width:Math.max(n.x+n.width-O.x,0),height:p}:{})}var A=n?{width:h,height:p}:{};return i==="insideLeft"?La({x:c+w,y:d+p/2,textAnchor:I,verticalAnchor:"middle"},A):i==="insideRight"?La({x:c+h-w,y:d+p/2,textAnchor:E,verticalAnchor:"middle"},A):i==="insideTop"?La({x:c+h/2,y:d+y,textAnchor:"middle",verticalAnchor:_},A):i==="insideBottom"?La({x:c+h/2,y:d+p-y,textAnchor:"middle",verticalAnchor:x},A):i==="insideTopLeft"?La({x:c+w,y:d+y,textAnchor:I,verticalAnchor:_},A):i==="insideTopRight"?La({x:c+h-w,y:d+y,textAnchor:E,verticalAnchor:_},A):i==="insideBottomLeft"?La({x:c+w,y:d+p-y,textAnchor:I,verticalAnchor:x},A):i==="insideBottomRight"?La({x:c+h-w,y:d+p-y,textAnchor:E,verticalAnchor:x},A):Vf(i)&&(xt(i.x)||Rd(i.x))&&(xt(i.y)||Rd(i.y))?La({x:c+So(i.x,h),y:d+So(i.y,p),textAnchor:"end",verticalAnchor:"end"},A):La({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},A)},Sbe=function(e){return"cx"in e&&xt(e.cx)};function fi(t){var e=t.offset,r=e===void 0?5:e,n=hbe(t,sbe),a=La({offset:r},n),i=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,y=a.textBreakAll;if(!i||ur(c)&&ur(d)&&!T.isValidElement(h)&&!rr(h))return null;if(T.isValidElement(h))return T.cloneElement(h,a);var x;if(rr(h)){if(x=T.createElement(h,a),T.isValidElement(x))return x}else x=ybe(a);var _=Sbe(i),S=Ft(a,!0);if(_&&(o==="insideStart"||o==="insideEnd"||o==="end"))return vbe(a,x,S);var w=_?bbe(a):wbe(a);return se.createElement(cf,jg({className:pr("recharts-label",m)},S,w,{breakAll:y}),x)}fi.displayName="Label";var JK=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,y=e.y,x=e.top,_=e.left,S=e.width,w=e.height,E=e.clockWise,I=e.labelViewBox;if(I)return I;if(xt(S)&&xt(w)){if(xt(m)&&xt(y))return{x:m,y,width:S,height:w};if(xt(x)&&xt(_))return{x,y:_,width:S,height:w}}return xt(m)&&xt(y)?{x:m,y,width:0,height:0}:xt(r)&&xt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:E}:e.viewBox?e.viewBox:{}},_be=function(e,r){return e?e===!0?se.createElement(fi,{key:"label-implicit",viewBox:r}):Ua(e)?se.createElement(fi,{key:"label-implicit",viewBox:r,value:e}):T.isValidElement(e)?e.type===fi?T.cloneElement(e,{key:"label-implicit",viewBox:r}):se.createElement(fi,{key:"label-implicit",content:e,viewBox:r}):rr(e)?se.createElement(fi,{key:"label-implicit",content:e,viewBox:r}):Vf(e)?se.createElement(fi,jg({viewBox:r},e,{key:"label-implicit"})):null:null},Nbe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=JK(e),o=Cs(a,fi).map(function(d,h){return T.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return o;var c=_be(e.label,r||i);return[c].concat(obe(o))};fi.parseViewBox=JK;fi.renderCallByParent=Nbe;var iN,w$;function Tbe(){if(w$)return iN;w$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return iN=t,iN}var Abe=Tbe();const eQ=Xr(Abe);function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}var jbe=["valueAccessor"],Ebe=["data","dataKey","clockWise","id","textBreakAll"];function kbe(t){return Rbe(t)||Ibe(t)||Obe(t)||Cbe()}function Cbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Obe(t,e){if(t){if(typeof t=="string")return MA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MA(t,e)}}function Ibe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rbe(t){if(Array.isArray(t))return MA(t)}function MA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kb.apply(this,arguments)}function S$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S$(Object(r),!0).forEach(function(n){Mbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mbe(t,e,r){return e=Pbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pbe(t){var e=Dbe(t,"string");return Eg(e)=="symbol"?e:e+""}function Dbe(t,e){if(Eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N$(t,e){if(t==null)return{};var r=Lbe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Bbe=function(e){return Array.isArray(e.value)?eQ(e.value):e.value};function ec(t){var e=t.valueAccessor,r=e===void 0?Bbe:e,n=N$(t,jbe),a=n.data,i=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=N$(n,Ebe);return!a||!a.length?null:se.createElement(qr,{className:"recharts-label-list"},a.map(function(p,m){var y=ur(i)?r(p,m):yi(p&&p.payload,i),x=ur(c)?{}:{id:"".concat(c,"-").concat(m)};return se.createElement(fi,kb({},Ft(p,!0),h,x,{parentViewBox:p.parentViewBox,value:y,textBreakAll:d,viewBox:fi.parseViewBox(ur(o)?p:_$(_$({},p),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}ec.displayName="LabelList";function $be(t,e){return t?t===!0?se.createElement(ec,{key:"labelList-implicit",data:e}):se.isValidElement(t)||rr(t)?se.createElement(ec,{key:"labelList-implicit",data:e,content:t}):Vf(t)?se.createElement(ec,kb({data:e},t,{key:"labelList-implicit"})):null:null}function Ube(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Cs(n,ec).map(function(o,c){return T.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=$be(t.label,e);return[i].concat(kbe(a))}ec.renderCallByParent=Ube;function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function PA(){return PA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PA.apply(this,arguments)}function T$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function A$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(r),!0).forEach(function(n){zbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zbe(t,e,r){return e=Vbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vbe(t){var e=Fbe(t,"string");return kg(e)=="symbol"?e:e+""}function Fbe(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qbe=function(e,r){var n=wo(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Lx=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/Eb,y=h?i:i+o*m,x=wn(r,n,p,y),_=wn(r,n,a,y),S=h?i-o*m:i,w=wn(r,n,p*Math.cos(m*Eb),S);return{center:x,circleTangency:_,lineTangency:w,theta:m}},tQ=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,c=e.endAngle,d=qbe(o,c),h=o+d,p=wn(r,n,i,o),m=wn(r,n,i,h),y="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var x=wn(r,n,a,o),_=wn(r,n,a,h);y+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(x.x,",").concat(x.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},Hbe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=wo(p-h),y=Lx({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:o,cornerIsExternal:d}),x=y.circleTangency,_=y.lineTangency,S=y.theta,w=Lx({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:o,cornerIsExternal:d}),E=w.circleTangency,I=w.lineTangency,R=w.theta,L=d?Math.abs(h-p):Math.abs(h-p)-S-R;if(L<0)return c?"M ".concat(_.x,",").concat(_.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):tQ({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var C="M ".concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(I.x,",").concat(I.y,`
  `);if(a>0){var O=Lx({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),A=O.circleTangency,j=O.lineTangency,k=O.theta,z=Lx({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),D=z.circleTangency,$=z.lineTangency,B=z.theta,G=d?Math.abs(h-p):Math.abs(h-p)-k-B;if(G<0&&o===0)return"".concat(C,"L").concat(r,",").concat(n,"Z");C+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(G>180),",").concat(+(m>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(j.x,",").concat(j.y,"Z")}else C+="L".concat(r,",").concat(n,"Z");return C},Gbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rQ=function(e){var r=A$(A$({},Gbe),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,y=r.className;if(o<i||p===m)return null;var x=pr("recharts-sector",y),_=o-i,S=So(c,_,0,!0),w;return S>0&&Math.abs(p-m)<360?w=Hbe({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(S,_/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=tQ({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:p,endAngle:m}),se.createElement("path",PA({},Ft(r,!0),{className:x,d:w,role:"img"}))};function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function DA(){return DA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DA.apply(this,arguments)}function j$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function E$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(r),!0).forEach(function(n){Wbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wbe(t,e,r){return e=Kbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kbe(t){var e=Qbe(t,"string");return Cg(e)=="symbol"?e:e+""}function Qbe(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k$={curveBasisClosed:mfe,curveBasisOpen:gfe,curveBasis:pfe,curveBumpX:efe,curveBumpY:tfe,curveLinearClosed:yfe,curveLinear:aw,curveMonotoneX:xfe,curveMonotoneY:vfe,curveNatural:bfe,curveStep:wfe,curveStepAfter:_fe,curveStepBefore:Sfe},Bx=function(e){return e.x===+e.x&&e.y===+e.y},rm=function(e){return e.x},nm=function(e){return e.y},Xbe=function(e,r){if(rr(e))return e;var n="curve".concat(rw(e));return(n==="curveMonotone"||n==="curveBump")&&r?k$["".concat(n).concat(r==="vertical"?"Y":"X")]:k$[n]||aw},Ybe=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=Xbe(n,c),m=h?i.filter(function(S){return Bx(S)}):i,y;if(Array.isArray(o)){var x=h?o.filter(function(S){return Bx(S)}):o,_=m.map(function(S,w){return E$(E$({},S),{},{base:x[w]})});return c==="vertical"?y=kx().y(nm).x1(rm).x0(function(S){return S.base.x}):y=kx().x(rm).y1(nm).y0(function(S){return S.base.y}),y.defined(Bx).curve(p),y(_)}return c==="vertical"&&xt(o)?y=kx().y(nm).x1(rm).x0(o):xt(o)?y=kx().x(rm).y1(nm).y0(o):y=eW().x(rm).y(nm),y.defined(Bx).curve(p),y(m)},LA=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?Ybe(e):a;return T.createElement("path",DA({},Ft(e,!1),rb(e),{className:pr("recharts-curve",r),d:o,ref:i}))},sN={exports:{}},oN,C$;function Zbe(){if(C$)return oN;C$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return oN=t,oN}var lN,O$;function Jbe(){if(O$)return lN;O$=1;var t=Zbe();function e(){}function r(){}return r.resetWarningCache=e,lN=function(){function n(o,c,d,h,p,m){if(m!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},lN}var I$;function e2e(){return I$||(I$=1,sN.exports=Jbe()()),sN.exports}var t2e=e2e();const rn=Xr(t2e),{getOwnPropertyNames:r2e,getOwnPropertySymbols:n2e}=Object,{hasOwnProperty:a2e}=Object.prototype;function cN(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function $x(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,o=i.get(r),c=i.get(n);if(o&&c)return o===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function i2e(t){return t!=null?t[Symbol.toStringTag]:void 0}function R$(t){return r2e(t).concat(n2e(t))}const s2e=Object.hasOwn||((t,e)=>a2e.call(t,e));function T0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const o2e="__v",l2e="__o",c2e="_owner",{getOwnPropertyDescriptor:M$,keys:P$}=Object;function u2e(t,e){return t.byteLength===e.byteLength&&Cb(new Uint8Array(t),new Uint8Array(e))}function d2e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function h2e(t,e){return t.byteLength===e.byteLength&&Cb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function f2e(t,e){return T0(t.getTime(),e.getTime())}function p2e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function m2e(t,e){return t===e}function D$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let o,c,d=0;for(;(o=i.next())&&!o.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const y=o.value,x=c.value;if(r.equals(y[0],x[0],d,m,t,e,r)&&r.equals(y[1],x[1],y[0],x[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const g2e=T0;function y2e(t,e,r){const n=P$(t);let a=n.length;if(P$(e).length!==a)return!1;for(;a-- >0;)if(!nQ(t,e,r,n[a]))return!1;return!0}function am(t,e,r){const n=R$(t);let a=n.length;if(R$(e).length!==a)return!1;let i,o,c;for(;a-- >0;)if(i=n[a],!nQ(t,e,r,i)||(o=M$(t,i),c=M$(e,i),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function x2e(t,e){return T0(t.valueOf(),e.valueOf())}function v2e(t,e){return t.source===e.source&&t.flags===e.flags}function L$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let o,c;for(;(o=i.next())&&!o.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function Cb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function b2e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function nQ(t,e,r,n){return(n===c2e||n===l2e||n===o2e)&&(t.$$typeof||e.$$typeof)?!0:s2e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const w2e="[object ArrayBuffer]",S2e="[object Arguments]",_2e="[object Boolean]",N2e="[object DataView]",T2e="[object Date]",A2e="[object Error]",j2e="[object Map]",E2e="[object Number]",k2e="[object Object]",C2e="[object RegExp]",O2e="[object Set]",I2e="[object String]",R2e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},M2e="[object URL]",P2e=Object.prototype.toString;function D2e({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:x,unknownTagComparators:_}){return function(w,E,I){if(w===E)return!0;if(w==null||E==null)return!1;const R=typeof w;if(R!==typeof E)return!1;if(R!=="object")return R==="number"?c(w,E,I):R==="function"?i(w,E,I):!1;const L=w.constructor;if(L!==E.constructor)return!1;if(L===Object)return d(w,E,I);if(Array.isArray(w))return e(w,E,I);if(L===Date)return n(w,E,I);if(L===RegExp)return p(w,E,I);if(L===Map)return o(w,E,I);if(L===Set)return m(w,E,I);const C=P2e.call(w);if(C===T2e)return n(w,E,I);if(C===C2e)return p(w,E,I);if(C===j2e)return o(w,E,I);if(C===O2e)return m(w,E,I);if(C===k2e)return typeof w.then!="function"&&typeof E.then!="function"&&d(w,E,I);if(C===M2e)return x(w,E,I);if(C===A2e)return a(w,E,I);if(C===S2e)return d(w,E,I);if(R2e[C])return y(w,E,I);if(C===w2e)return t(w,E,I);if(C===N2e)return r(w,E,I);if(C===_2e||C===E2e||C===I2e)return h(w,E,I);if(_){let O=_[C];if(!O){const A=i2e(w);A&&(O=_[A])}if(O)return O(w,E,I)}return!1}}function L2e({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:u2e,areArraysEqual:r?am:d2e,areDataViewsEqual:h2e,areDatesEqual:f2e,areErrorsEqual:p2e,areFunctionsEqual:m2e,areMapsEqual:r?cN(D$,am):D$,areNumbersEqual:g2e,areObjectsEqual:r?am:y2e,arePrimitiveWrappersEqual:x2e,areRegExpsEqual:v2e,areSetsEqual:r?cN(L$,am):L$,areTypedArraysEqual:r?cN(Cb,am):Cb,areUrlsEqual:b2e,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=$x(n.areArraysEqual),i=$x(n.areMapsEqual),o=$x(n.areObjectsEqual),c=$x(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:c})}return n}function B2e(t){return function(e,r,n,a,i,o,c){return t(e,r,c)}}function $2e({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const U2e=Gu();Gu({strict:!0});Gu({circular:!0});Gu({circular:!0,strict:!0});Gu({createInternalComparator:()=>T0});Gu({strict:!0,createInternalComparator:()=>T0});Gu({circular:!0,createInternalComparator:()=>T0});Gu({circular:!0,createInternalComparator:()=>T0,strict:!0});function Gu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=L2e(t),o=D2e(i),c=r?r(o):B2e(o);return $2e({circular:e,comparator:o,createState:n,equals:c,strict:a})}function z2e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function B$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):z2e(a)};requestAnimationFrame(n)}function BA(t){"@babel/helpers - typeof";return BA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BA(t)}function V2e(t){return G2e(t)||H2e(t)||q2e(t)||F2e()}function F2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q2e(t,e){if(t){if(typeof t=="string")return $$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $$(t,e)}}function $$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function H2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G2e(t){if(Array.isArray(t))return t}function W2e(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,c=V2e(o),d=c[0],h=c.slice(1);if(typeof d=="number"){B$(a.bind(null,h),d);return}a(d),B$(a.bind(null,h));return}BA(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function U$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function z$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(r),!0).forEach(function(n){aQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aQ(t,e,r){return e=K2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function K2e(t){var e=Q2e(t,"string");return Og(e)==="symbol"?e:String(e)}function Q2e(t,e){if(Og(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Og(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X2e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Y2e=function(e){return e},Z2e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Om=function(e,r){return Object.keys(r).reduce(function(n,a){return z$(z$({},n),{},aQ({},a,e(a,r[a])))},{})},V$=function(e,r,n){return e.map(function(a){return"".concat(Z2e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function J2e(t,e){return rwe(t)||twe(t,e)||iQ(t,e)||ewe()}function ewe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function twe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function rwe(t){if(Array.isArray(t))return t}function nwe(t){return swe(t)||iwe(t)||iQ(t)||awe()}function awe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iQ(t,e){if(t){if(typeof t=="string")return $A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $A(t,e)}}function iwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function swe(t){if(Array.isArray(t))return $A(t)}function $A(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ob=1e-4,sQ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},oQ=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},F$=function(e,r){return function(n){var a=sQ(e,r);return oQ(a,n)}},owe=function(e,r){return function(n){var a=sQ(e,r),i=[].concat(nwe(a.map(function(o,c){return o*c}).slice(1)),[0]);return oQ(i,n)}},q$=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,c=1;break;case"ease":a=.25,i=.1,o=.25,c=1;break;case"ease-in":a=.42,i=0,o=1,c=1;break;case"ease-out":a=.42,i=0,o=.58,c=1;break;case"ease-in-out":a=0,i=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=J2e(h,4);a=p[0],i=p[1],o=p[2],c=p[3]}}}var m=F$(a,o),y=F$(i,c),x=owe(a,o),_=function(E){return E>1?1:E<0?0:E},S=function(E){for(var I=E>1?1:E,R=I,L=0;L<8;++L){var C=m(R)-I,O=x(R);if(Math.abs(C-I)<Ob||O<Ob)return y(R);R=_(R-C/O)}return y(R)};return S.isStepper=!1,S},lwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(p,m,y){var x=-(p-m)*n,_=y*i,S=y+(x-_)*c/1e3,w=y*c/1e3+p;return Math.abs(w-m)<Ob&&Math.abs(S)<Ob?[m,0]:[w,S]};return d.isStepper=!0,d.dt=c,d},cwe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return q$(a);case"spring":return lwe();default:if(a.split("(")[0]==="cubic-bezier")return q$(a)}return typeof a=="function"?a:null};function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function H$(t){return hwe(t)||dwe(t)||lQ(t)||uwe()}function uwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hwe(t){if(Array.isArray(t))return zA(t)}function G$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function di(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(r),!0).forEach(function(n){UA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function UA(t,e,r){return e=fwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fwe(t){var e=pwe(t,"string");return Ig(e)==="symbol"?e:String(e)}function pwe(t,e){if(Ig(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mwe(t,e){return xwe(t)||ywe(t,e)||lQ(t,e)||gwe()}function gwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lQ(t,e){if(t){if(typeof t=="string")return zA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zA(t,e)}}function zA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ywe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function xwe(t){if(Array.isArray(t))return t}var Ib=function(e,r,n){return e+(r-e)*n},VA=function(e){var r=e.from,n=e.to;return r!==n},vwe=function t(e,r,n){var a=Om(function(i,o){if(VA(o)){var c=e(o.from,o.to,o.velocity),d=mwe(c,2),h=d[0],p=d[1];return di(di({},o),{},{from:h,velocity:p})}return o},r);return n<1?Om(function(i,o){return VA(o)?di(di({},o),{},{velocity:Ib(o.velocity,a[i].velocity,n),from:Ib(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const bwe=(function(t,e,r,n,a){var i=X2e(t,e),o=i.reduce(function(w,E){return di(di({},w),{},UA({},E,[t[E],e[E]]))},{}),c=i.reduce(function(w,E){return di(di({},w),{},UA({},E,{from:t[E],velocity:0,to:e[E]}))},{}),d=-1,h,p,m=function(){return null},y=function(){return Om(function(E,I){return I.from},c)},x=function(){return!Object.values(c).filter(VA).length},_=function(E){h||(h=E);var I=E-h,R=I/r.dt;c=vwe(r,c,R),a(di(di(di({},t),e),y())),h=E,x()||(d=requestAnimationFrame(m))},S=function(E){p||(p=E);var I=(E-p)/n,R=Om(function(C,O){return Ib.apply(void 0,H$(O).concat([r(I)]))},o);if(a(di(di(di({},t),e),R)),I<1)d=requestAnimationFrame(m);else{var L=Om(function(C,O){return Ib.apply(void 0,H$(O).concat([r(1)]))},o);a(di(di(di({},t),e),L))}};return m=r.isStepper?_:S,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}var wwe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Swe(t,e){if(t==null)return{};var r=_we(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _we(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function uN(t){return jwe(t)||Awe(t)||Twe(t)||Nwe()}function Nwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Twe(t,e){if(t){if(typeof t=="string")return FA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FA(t,e)}}function Awe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jwe(t){if(Array.isArray(t))return FA(t)}function FA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function W$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function go(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(r),!0).forEach(function(n){gm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gm(t,e,r){return e=cQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ewe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cQ(n.key),n)}}function Cwe(t,e,r){return e&&kwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cQ(t){var e=Owe(t,"string");return pf(e)==="symbol"?e:String(e)}function Owe(t,e){if(pf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qA(t,e)}function qA(t,e){return qA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qA(t,e)}function Rwe(t){var e=Mwe();return function(){var n=Rb(t),a;if(e){var i=Rb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return HA(this,a)}}function HA(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GA(t)}function GA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rb(t)}var al=(function(t){Iwe(r,t);var e=Rwe(r);function r(n,a){var i;Ewe(this,r),i=e.call(this,n,a);var o=i.props,c=o.isActive,d=o.attributeName,h=o.from,p=o.to,m=o.steps,y=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(GA(i)),i.changeStyle=i.changeStyle.bind(GA(i)),!c||x<=0)return i.state={style:{}},typeof y=="function"&&(i.state={style:p}),HA(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof y=="function")return i.state={style:h},HA(i);i.state={style:d?gm({},d,h):h}}else i.state={style:{}};return i}return Cwe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,y=this.state.style;if(c){if(!o){var x={style:d?gm({},d,p):p};this.state&&y&&(d&&y[d]!==p||!d&&y!==p)&&this.setState(x);return}if(!(U2e(a.to,p)&&a.canBegin&&a.isActive)){var _=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=_||h?m:a.to;if(this.state&&y){var w={style:d?gm({},d,S):S};(d&&y[d]!==S||!d&&y!==S)&&this.setState(w)}this.runAnimation(go(go({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,y=a.onAnimationStart,x=bwe(o,c,cwe(h),d,this.changeStyle),_=function(){i.stopJSAnimation=x()};this.manager.start([y,p,_,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],p=h.style,m=h.duration,y=m===void 0?0:m,x=function(S,w,E){if(E===0)return S;var I=w.duration,R=w.easing,L=R===void 0?"ease":R,C=w.style,O=w.properties,A=w.onAnimationEnd,j=E>0?o[E-1]:w,k=O||Object.keys(C);if(typeof L=="function"||L==="spring")return[].concat(uN(S),[i.runJSAnimation.bind(i,{from:j.style,to:C,duration:I,easing:L}),I]);var z=V$(k,I,L),D=go(go(go({},j.style),C),{},{transition:z});return[].concat(uN(S),[D,I,A]).filter(Y2e)};return this.manager.start([d].concat(uN(o.reduce(x,[p,Math.max(y,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=W2e());var i=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,y=a.steps,x=a.children,_=this.manager;if(this.unSubscribe=_.subscribe(this.handleStyleChange),typeof h=="function"||typeof x=="function"||h==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var S=c?gm({},c,d):d,w=V$(Object.keys(S),o,h);_.start([p,i,go(go({},S),{},{transition:w}),o,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=Swe(a,wwe),h=T.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||o<=0)return i;var m=function(x){var _=x.props,S=_.style,w=S===void 0?{}:S,E=_.className,I=T.cloneElement(x,go(go({},d),{},{style:go(go({},w),p),className:E}));return I};return h===1?m(T.Children.only(i)):se.createElement("div",null,T.Children.map(i,function(y){return m(y)}))}}]),r})(T.PureComponent);al.displayName="Animate";al.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};al.propTypes={from:rn.oneOfType([rn.object,rn.string]),to:rn.oneOfType([rn.object,rn.string]),attributeName:rn.string,duration:rn.number,begin:rn.number,easing:rn.oneOfType([rn.string,rn.func]),steps:rn.arrayOf(rn.shape({duration:rn.number.isRequired,style:rn.object.isRequired,easing:rn.oneOfType([rn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),rn.func]),properties:rn.arrayOf("string"),onAnimationEnd:rn.func})),children:rn.oneOfType([rn.node,rn.func]),isActive:rn.bool,canBegin:rn.bool,onAnimationEnd:rn.func,shouldReAnimate:rn.bool,onAnimationStart:rn.func,onAnimationReStart:rn.func};function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function Mb(){return Mb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mb.apply(this,arguments)}function Pwe(t,e){return $we(t)||Bwe(t,e)||Lwe(t,e)||Dwe()}function Dwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lwe(t,e){if(t){if(typeof t=="string")return K$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K$(t,e)}}function K$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function $we(t){if(Array.isArray(t))return t}function Q$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function X$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q$(Object(r),!0).forEach(function(n){Uwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uwe(t,e,r){return e=zwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zwe(t){var e=Vwe(t,"string");return Rg(e)=="symbol"?e:e+""}function Vwe(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y$=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],y=0,x=4;y<x;y++)m[y]=i[y]>o?o:i[y];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(o>0&&i===+i&&i>0){var _=Math.min(o,i);p="M ".concat(e,",").concat(r+c*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+d*_,",").concat(r,`
            L `).concat(e+n-d*_,",").concat(r,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*_,`
            L `).concat(e+n,",").concat(r+a-c*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+n-d*_,",").concat(r+a,`
            L `).concat(e+d*_,",").concat(r+a,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*_," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},Fwe=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(o,o+d),y=Math.max(o,o+d);return n>=h&&n<=p&&a>=m&&a<=y}return!1},qwe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},x7=function(e){var r=X$(X$({},qwe),e),n=T.useRef(),a=T.useState(-1),i=Pwe(a,2),o=i[0],c=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,y=r.radius,x=r.className,_=r.animationEasing,S=r.animationDuration,w=r.animationBegin,E=r.isAnimationActive,I=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var R=pr("recharts-rectangle",x);return I?se.createElement(al,{canBegin:o>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:S,animationEasing:_,isActive:I},function(L){var C=L.width,O=L.height,A=L.x,j=L.y;return se.createElement(al,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,isActive:E,easing:_},se.createElement("path",Mb({},Ft(r,!0),{className:R,d:Y$(A,j,C,O,y),ref:n})))}):se.createElement("path",Mb({},Ft(r,!0),{className:R,d:Y$(d,h,p,m,y)}))},Hwe=["points","className","baseLinePoints","connectNulls"];function Sh(){return Sh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sh.apply(this,arguments)}function Gwe(t,e){if(t==null)return{};var r=Wwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Wwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Z$(t){return Ywe(t)||Xwe(t)||Qwe(t)||Kwe()}function Kwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qwe(t,e){if(t){if(typeof t=="string")return WA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WA(t,e)}}function Xwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ywe(t){if(Array.isArray(t))return WA(t)}function WA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var J$=function(e){return e&&e.x===+e.x&&e.y===+e.y},Zwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){J$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),J$(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Im=function(e,r){var n=Zwe(e);r&&(n=[n.reduce(function(i,o){return[].concat(Z$(i),Z$(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Jwe=function(e,r,n){var a=Im(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Im(r.reverse(),n).slice(1))},uQ=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=Gwe(e,Hwe);if(!r||!r.length)return null;var c=pr("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=Jwe(r,a,i);return se.createElement("g",{className:c},se.createElement("path",Sh({},Ft(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?se.createElement("path",Sh({},Ft(o,!0),{fill:"none",d:Im(r,i)})):null,d?se.createElement("path",Sh({},Ft(o,!0),{fill:"none",d:Im(a,i)})):null)}var p=Im(r,i);return se.createElement("path",Sh({},Ft(o,!0),{fill:p.slice(-1)==="Z"?o.fill:"none",className:c,d:p}))};function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KA.apply(this,arguments)}var ww=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=pr("recharts-dot",i);return r===+r&&n===+n&&a===+a?T.createElement("circle",KA({},Ft(e,!1),rb(e),{className:o,cx:r,cy:n,r:a})):null};function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}var e4e=["x","y","top","left","width","height","className"];function QA(){return QA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QA.apply(this,arguments)}function eU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function t4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eU(Object(r),!0).forEach(function(n){r4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r4e(t,e,r){return e=n4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n4e(t){var e=a4e(t,"string");return Mg(e)=="symbol"?e:e+""}function a4e(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i4e(t,e){if(t==null)return{};var r=s4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function s4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var o4e=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},l4e=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,y=e.height,x=y===void 0?0:y,_=e.className,S=i4e(e,e4e),w=t4e({x:n,y:i,top:c,left:h,width:m,height:x},S);return!xt(n)||!xt(i)||!xt(m)||!xt(x)||!xt(c)||!xt(h)?null:se.createElement("path",QA({},Ft(w,!0),{className:pr("recharts-cross",_),d:o4e(n,i,m,x,c,h)}))},c4e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function u4e(t,e){if(t==null)return{};var r=d4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function d4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dc(){return dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dc.apply(this,arguments)}function tU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Dg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(r),!0).forEach(function(n){h4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h4e(t,e,r){return e=f4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f4e(t){var e=p4e(t,"string");return Pg(e)=="symbol"?e:e+""}function p4e(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m4e=function(e,r,n,a){var i="";return a.forEach(function(o,c){var d=wn(r,n,e,o);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},g4e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.polarAngles,c=e.radialLines;if(!o||!o.length||!c)return null;var d=Dg({stroke:"#ccc"},Ft(e,!1));return se.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(h){var p=wn(r,n,a,h),m=wn(r,n,i,h);return se.createElement("line",dc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},y4e=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,o=Dg(Dg({stroke:"#ccc"},Ft(e,!1)),{},{fill:"none"});return se.createElement("circle",dc({},o,{className:pr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},x4e=function(e){var r=e.radius,n=e.index,a=Dg(Dg({stroke:"#ccc"},Ft(e,!1)),{},{fill:"none"});return se.createElement("path",dc({},a,{className:pr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:m4e(r,e.cx,e.cy,e.polarAngles)}))},v4e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:se.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?se.createElement(y4e,dc({key:o},e,{radius:a,index:i})):se.createElement(x4e,dc({key:o},e,{radius:a,index:i}))}))},dQ=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,o=e.innerRadius,c=o===void 0?0:o,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,y=e.radialLines,x=y===void 0?!0:y,_=u4e(e,c4e);return h<=0?null:se.createElement("g",{className:"recharts-polar-grid"},se.createElement(g4e,dc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:x},_)),se.createElement(v4e,dc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:x},_)))};dQ.displayName="PolarGrid";var dN,rU;function b4e(){if(rU)return dN;rU=1;var t=gw(),e=NK(),r=ul();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return dN=n,dN}var w4e=b4e();const S4e=Xr(w4e);var hN,nU;function _4e(){if(nU)return hN;nU=1;var t=gw(),e=ul(),r=TK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return hN=n,hN}var N4e=_4e();const T4e=Xr(N4e);var A4e=["cx","cy","angle","ticks","axisLine"],j4e=["ticks","tick","angle","tickFormatter","stroke"];function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function Rm(){return Rm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rm.apply(this,arguments)}function aU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(r),!0).forEach(function(n){Sw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iU(t,e){if(t==null)return{};var r=E4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function E4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function k4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fQ(n.key),n)}}function C4e(t,e,r){return e&&sU(t.prototype,e),r&&sU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function O4e(t,e,r){return e=Pb(e),I4e(t,hQ()?Reflect.construct(e,r||[],Pb(t).constructor):e.apply(t,r))}function I4e(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R4e(t)}function R4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hQ=function(){return!!t})()}function Pb(t){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pb(t)}function M4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XA(t,e)}function XA(t,e){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XA(t,e)}function Sw(t,e,r){return e=fQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fQ(t){var e=P4e(t,"string");return mf(e)=="symbol"?e:e+""}function P4e(t,e){if(mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var I1=(function(t){function e(){return k4e(this,e),O4e(this,e,arguments)}return M4e(e,t),C4e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,c=i.cx,d=i.cy;return wn(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=S4e(c,function(p){return p.coordinate||0}),h=T4e(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=iU(n,A4e),p=c.reduce(function(_,S){return[Math.min(_[0],S.coordinate),Math.max(_[1],S.coordinate)]},[1/0,-1/0]),m=wn(a,i,p[0],o),y=wn(a,i,p[1],o),x=wd(wd(wd({},Ft(h,!1)),{},{fill:"none"},Ft(d,!1)),{},{x1:m.x,y1:m.y,x2:y.x,y2:y.y});return se.createElement("line",Rm({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=iU(a,j4e),m=this.getTickTextAnchor(),y=Ft(p,!1),x=Ft(o,!1),_=i.map(function(S,w){var E=n.getTickValueCoord(S),I=wd(wd(wd(wd({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(E.x,", ").concat(E.y,")")},y),{},{stroke:"none",fill:h},x),{},{index:w},E),{},{payload:S});return se.createElement(qr,Rm({className:pr("recharts-polar-radius-axis-tick",ZK(o)),key:"tick-".concat(S.coordinate)},c0(n.props,S,w)),e.renderTickItem(o,I,d?d(S.value,w):S.value))});return se.createElement(qr,{className:"recharts-polar-radius-axis-ticks"},_)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:se.createElement(qr,{className:pr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),fi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):rr(n)?o=n(a):o=se.createElement(cf,Rm({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(T.PureComponent);Sw(I1,"displayName","PolarRadiusAxis");Sw(I1,"axisType","radiusAxis");Sw(I1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Od.apply(this,arguments)}function oU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Sd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(r),!0).forEach(function(n){_w(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mQ(n.key),n)}}function L4e(t,e,r){return e&&lU(t.prototype,e),r&&lU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function B4e(t,e,r){return e=Db(e),$4e(t,pQ()?Reflect.construct(e,r||[],Db(t).constructor):e.apply(t,r))}function $4e(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U4e(t)}function U4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pQ=function(){return!!t})()}function Db(t){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Db(t)}function z4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YA(t,e)}function YA(t,e){return YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YA(t,e)}function _w(t,e,r){return e=mQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mQ(t){var e=V4e(t,"string");return gf(e)=="symbol"?e:e+""}function V4e(t,e){if(gf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var F4e=Math.PI/180,cU=1e-5,R1=(function(t){function e(){return D4e(this,e),B4e(this,e,arguments)}return z4e(e,t),L4e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=wn(i,o,c,n.coordinate),y=wn(i,o,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*F4e),o;return i>cU?o=a==="outer"?"start":"end":i<-cU?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=Sd(Sd({},Ft(this.props,!1)),{},{fill:"none"},Ft(c,!1));if(d==="circle")return se.createElement(ww,Od({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:o}));var p=this.props.ticks,m=p.map(function(y){return wn(a,i,o,y.coordinate)});return se.createElement(uQ,Od({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=Ft(this.props,!1),m=Ft(o,!1),y=Sd(Sd({},p),{},{fill:"none"},Ft(c,!1)),x=i.map(function(_,S){var w=n.getTickLineCoord(_),E=n.getTickTextAnchor(_),I=Sd(Sd(Sd({textAnchor:E},p),{},{stroke:"none",fill:h},m),{},{index:S,payload:_,x:w.x2,y:w.y2});return se.createElement(qr,Od({className:pr("recharts-polar-angle-axis-tick",ZK(o)),key:"tick-".concat(_.coordinate)},c0(n.props,_,S)),c&&se.createElement("line",Od({className:"recharts-polar-angle-axis-tick-line"},y,w)),o&&e.renderTickItem(o,I,d?d(_.value,S):_.value))});return se.createElement(qr,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(qr,{className:pr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):rr(n)?o=n(a):o=se.createElement(cf,Od({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(T.PureComponent);_w(R1,"displayName","PolarAngleAxis");_w(R1,"axisType","angleAxis");_w(R1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var fN,uU;function q4e(){if(uU)return fN;uU=1;var t=_W(),e=t(Object.getPrototypeOf,Object);return fN=e,fN}var pN,dU;function H4e(){if(dU)return pN;dU=1;var t=gc(),e=q4e(),r=yc(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,c=i.hasOwnProperty,d=o.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var y=c.call(m,"constructor")&&m.constructor;return typeof y=="function"&&y instanceof y&&o.call(y)==d}return pN=h,pN}var G4e=H4e();const W4e=Xr(G4e);var mN,hU;function K4e(){if(hU)return mN;hU=1;var t=gc(),e=yc(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return mN=n,mN}var Q4e=K4e();const X4e=Xr(Q4e);function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lb.apply(this,arguments)}function Y4e(t,e){return t5e(t)||e5e(t,e)||J4e(t,e)||Z4e()}function Z4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J4e(t,e){if(t){if(typeof t=="string")return fU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fU(t,e)}}function fU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function e5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function t5e(t){if(Array.isArray(t))return t}function pU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(r),!0).forEach(function(n){r5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r5e(t,e,r){return e=n5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n5e(t){var e=a5e(t,"string");return Lg(e)=="symbol"?e:e+""}function a5e(t,e){if(Lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gU=function(e,r,n,a,i){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+i),c+="L ".concat(e+n-o/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},i5e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},s5e=function(e){var r=mU(mU({},i5e),e),n=T.useRef(),a=T.useState(-1),i=Y4e(a,2),o=i[0],c=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var R=n.current.getTotalLength();R&&c(R)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,y=r.height,x=r.className,_=r.animationEasing,S=r.animationDuration,w=r.animationBegin,E=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||y!==+y||p===0&&m===0||y===0)return null;var I=pr("recharts-trapezoid",x);return E?se.createElement(al,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:y,x:d,y:h},duration:S,animationEasing:_,isActive:E},function(R){var L=R.upperWidth,C=R.lowerWidth,O=R.height,A=R.x,j=R.y;return se.createElement(al,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,easing:_},se.createElement("path",Lb({},Ft(r,!0),{className:I,d:gU(A,j,L,C,O),ref:n})))}):se.createElement("g",null,se.createElement("path",Lb({},Ft(r,!0),{className:I,d:gU(d,h,p,m,y)})))},o5e=["option","shapeType","propTransformer","activeClassName","isActive"];function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function l5e(t,e){if(t==null)return{};var r=c5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function c5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(r),!0).forEach(function(n){u5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u5e(t,e,r){return e=d5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d5e(t){var e=h5e(t,"string");return Bg(e)=="symbol"?e:e+""}function h5e(t,e){if(Bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f5e(t,e){return Bb(Bb({},e),t)}function p5e(t,e){return t==="symbols"}function xU(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return se.createElement(x7,r);case"trapezoid":return se.createElement(s5e,r);case"sector":return se.createElement(rQ,r);case"symbols":if(p5e(e))return se.createElement(sw,r);break;default:return null}}function m5e(t){return T.isValidElement(t)?t.props:t}function ZA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?f5e:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,c=t.isActive,d=l5e(t,o5e),h;if(T.isValidElement(e))h=T.cloneElement(e,Bb(Bb({},d),m5e(e)));else if(rr(e))h=e(d);else if(W4e(e)&&!X4e(e)){var p=a(e,d);h=se.createElement(xU,{shapeType:r,elementProps:p})}else{var m=d;h=se.createElement(xU,{shapeType:r,elementProps:m})}return c?se.createElement(qr,{className:o},h):h}function Nw(t,e){return e!=null&&"trapezoids"in t.props}function Tw(t,e){return e!=null&&"sectors"in t.props}function $g(t,e){return e!=null&&"points"in t.props}function g5e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function y5e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function x5e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function v5e(t,e){var r;return Nw(t,e)?r=g5e:Tw(t,e)?r=y5e:$g(t,e)&&(r=x5e),r}function b5e(t,e){var r;return Nw(t,e)?r="trapezoids":Tw(t,e)?r="sectors":$g(t,e)&&(r="points"),r}function w5e(t,e){if(Nw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Tw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return $g(t,e)?e.payload:{}}function S5e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=b5e(r,e),i=w5e(r,e),o=n.filter(function(d,h){var p=C1(i,d),m=r.props[a].filter(function(_){var S=v5e(r,e);return S(_,e)}),y=r.props[a].indexOf(m[m.length-1]),x=h===y;return p&&x}),c=n.indexOf(o[o.length-1]);return c}var gN,vU;function _5e(){if(vU)return gN;vU=1;function t(e){return e&&e.length?e[0]:void 0}return gN=t,gN}var yN,bU;function N5e(){return bU||(bU=1,yN=_5e()),yN}var T5e=N5e();const A5e=Xr(T5e);var j5e=["key"];function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function E5e(t,e){if(t==null)return{};var r=k5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function k5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $b(){return $b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$b.apply(this,arguments)}function wU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Mi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(r),!0).forEach(function(n){Bl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yQ(n.key),n)}}function O5e(t,e,r){return e&&SU(t.prototype,e),r&&SU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function I5e(t,e,r){return e=Ub(e),R5e(t,gQ()?Reflect.construct(e,r||[],Ub(t).constructor):e.apply(t,r))}function R5e(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M5e(t)}function M5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gQ=function(){return!!t})()}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}function P5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JA(t,e)}function JA(t,e){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JA(t,e)}function Bl(t,e,r){return e=yQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yQ(t){var e=D5e(t,"string");return yf(e)=="symbol"?e:e+""}function D5e(t,e){if(yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var M1=(function(t){function e(){var r;C5e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=I5e(this,e,[].concat(a)),Bl(r,"state",{isAnimationFinished:!1}),Bl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),rr(o)&&o()}),Bl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),rr(o)&&o()}),Bl(r,"handleMouseEnter",function(o){var c=r.props.onMouseEnter;c&&c(r.props,o)}),Bl(r,"handleMouseLeave",function(o){var c=r.props.onMouseLeave;c&&c(r.props,o)}),r}return P5e(e,t),O5e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,c=Ft(this.props,!1),d=Ft(i,!0),h=n.map(function(p,m){var y=Mi(Mi(Mi({key:"dot-".concat(m),r:3},c),d),{},{dataKey:o,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,y)});return se.createElement(qr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return se.isValidElement(i)?p=se.cloneElement(i,Mi(Mi({},this.props),{},{points:n})):rr(i)?p=i(Mi(Mi({},this.props),{},{points:n})):p=se.createElement(uQ,$b({},Ft(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),se.createElement(qr,{className:"recharts-radar-polygon"},p,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(al,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t,_=m&&m.length/i.length,S=i.map(function(w,E){var I=m&&m[Math.floor(E*_)];if(I){var R=Zi(I.x,w.x),L=Zi(I.y,w.y);return Mi(Mi({},w),{},{x:R(x),y:L(x)})}var C=Zi(w.cx,w.x),O=Zi(w.cy,w.y);return Mi(Mi({},w),{},{x:C(x),y:O(x)})});return n.renderPolygonStatically(S)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!o&&(!c||!C1(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,c=n.isAnimationActive;if(a||!o||!o.length)return null;var d=this.state.isAnimationFinished,h=pr("recharts-radar",i);return se.createElement(qr,{className:h},this.renderPolygon(),(!c||d)&&ec.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(rr(n))i=n(a);else{var o=a.key,c=E5e(a,j5e);i=se.createElement(ww,$b({},c,{key:o,className:pr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(T.PureComponent);Bl(M1,"displayName","Radar");Bl(M1,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!S0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Bl(M1,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,o=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(y,x){var _=yi(y,r.dataKey,x),S=yi(y,a),w=r.scale(_)+p,E=Array.isArray(S)?eQ(S):S,I=ur(E)?void 0:e.scale(E);Array.isArray(S)&&S.length>=2&&(d=!0),h.push(Mi(Mi({},wn(o,c,I,w)),{},{name:_,value:S,cx:o,cy:c,radius:I,angle:w,payload:y}))});var m=[];return d&&h.forEach(function(y){if(Array.isArray(y.value)){var x=A5e(y.value),_=ur(x)?void 0:e.scale(x);m.push(Mi(Mi({},y),{},{radius:_},wn(o,c,_,y.angle)))}else m.push(y)}),{points:h,isRange:d,baseLinePoints:m}});var xN,_U;function L5e(){if(_U)return xN;_U=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=i;return h}return xN=r,xN}var vN,NU;function xQ(){if(NU)return vN;NU=1;var t=$W(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return vN=n,vN}var bN,TU;function B5e(){if(TU)return bN;TU=1;var t=L5e(),e=cw(),r=xQ();function n(a){return function(i,o,c){return c&&typeof c!="number"&&e(i,o,c)&&(o=c=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),c=c===void 0?i<o?1:-1:r(c),t(i,o,c,a)}}return bN=n,bN}var wN,AU;function $5e(){if(AU)return wN;AU=1;var t=B5e(),e=t();return wN=e,wN}var U5e=$5e();const zb=Xr(U5e);function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function jU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(r),!0).forEach(function(n){vQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vQ(t,e,r){return e=z5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z5e(t){var e=V5e(t,"string");return Ug(e)=="symbol"?e:e+""}function V5e(t,e){if(Ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F5e=["Webkit","Moz","O","ms"],q5e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=F5e.reduce(function(i,o){return EU(EU({},i),{},vQ({},o+n,r))},{});return a[e]=r,a};function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vb.apply(this,arguments)}function kU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function SN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(r),!0).forEach(function(n){Ss(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function H5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wQ(n.key),n)}}function G5e(t,e,r){return e&&CU(t.prototype,e),r&&CU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function W5e(t,e,r){return e=Fb(e),K5e(t,bQ()?Reflect.construct(e,r||[],Fb(t).constructor):e.apply(t,r))}function K5e(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q5e(t)}function Q5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bQ=function(){return!!t})()}function Fb(t){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fb(t)}function X5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ej(t,e)}function ej(t,e){return ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ej(t,e)}function Ss(t,e,r){return e=wQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wQ(t){var e=Y5e(t,"string");return xf(e)=="symbol"?e:e+""}function Y5e(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Z5e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=km().domain(zb(0,d)).range([i,i+o-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},OU=function(e){return e.changedTouches&&!!e.changedTouches.length},vf=(function(t){function e(r){var n;return H5e(this,e),n=W5e(this,e,[r]),Ss(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ss(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ss(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,c=a.startIndex;o==null||o({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),Ss(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ss(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ss(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ss(n,"handleSlideDragStart",function(a){var i=OU(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return X5e(e,t),G5e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),y=Math.max(a,i),x=e.getIndexInRange(o,m),_=e.getIndexInRange(o,y);return{startIndex:x-x%d,endIndex:_===p?p:_-_%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,c=a.dataKey,d=yi(i[n],c,n);return rr(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,y=d.startIndex,x=d.endIndex,_=d.onChange,S=n.pageX-i;S>0?S=Math.min(S,h+p-m-c,h+p-m-o):S<0&&(S=Math.max(S,h-o,h-c));var w=this.getIndex({startX:o+S,endX:c+S});(w.startIndex!==y||w.endIndex!==x)&&_&&_(w),this.setState({startX:o+S,endX:c+S,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=OU(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],p=this.props,m=p.x,y=p.width,x=p.travellerWidth,_=p.onChange,S=p.gap,w=p.data,E={startX:this.state.startX,endX:this.state.endX},I=n.pageX-i;I>0?I=Math.min(I,m+y-x-h):I<0&&(I=Math.max(I,m-h)),E[o]=h+I;var R=this.getIndex(E),L=R.startIndex,C=R.endIndex,O=function(){var j=w.length-1;return o==="startX"&&(c>d?L%S===0:C%S===0)||c<d&&C===j||o==="endX"&&(c>d?C%S===0:L%S===0)||c>d&&C===j};this.setState(Ss(Ss({},o,h+I),"brushMoveStartX",n.pageX),function(){_&&O()&&_(R)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var y=m+n;if(!(y===-1||y>=c.length)){var x=c[y];a==="startX"&&x>=h||a==="endX"&&x<=d||this.setState(Ss({},a,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return se.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=T.Children.only(h);return m?se.cloneElement(m,{x:a,y:i,width:o,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,y=d.traveller,x=d.ariaLabel,_=d.data,S=d.startIndex,w=d.endIndex,E=Math.max(n,this.props.x),I=SN(SN({},Ft(this.props,!1)),{},{x:E,y:h,width:p,height:m}),R=x||"Min value: ".concat((i=_[S])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=_[w])===null||o===void 0?void 0:o.name);return se.createElement(qr,{tabIndex:0,role:"slider","aria-label":R,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),c.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,I))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:o,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,y=p.endX,x=5,_={pointerEvents:"none",fill:h};return se.createElement(qr,{className:"recharts-brush-texts"},se.createElement(cf,Vb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,y)-x,y:o+c/2},_),this.getTextOfTick(a)),se.createElement(cf,Vb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,y)+d+x,y:o+c/2},_),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,y=this.state,x=y.startX,_=y.endX,S=y.isTextActive,w=y.isSlideMoving,E=y.isTravellerMoving,I=y.isTravellerFocused;if(!a||!a.length||!xt(c)||!xt(d)||!xt(h)||!xt(p)||h<=0||p<=0)return null;var R=pr("recharts-brush",i),L=se.Children.count(o)===1,C=q5e("userSelect","none");return se.createElement(qr,{className:R,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(x,_),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(_,"endX"),(S||w||E||I||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:o,height:c,fill:d,stroke:"none"}),se.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):rr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return SN({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},i&&i.length?Z5e({data:i,width:o,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var y=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,c=i-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(T.PureComponent);Ss(vf,"displayName","Brush");Ss(vf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var _N,IU;function J5e(){if(IU)return _N;IU=1;var t=FE();function e(r,n){var a;return t(r,function(i,o,c){return a=n(i,o,c),!a}),!!a}return _N=e,_N}var NN,RU;function e3e(){if(RU)return NN;RU=1;var t=gW(),e=ul(),r=J5e(),n=ls(),a=cw();function i(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return NN=i,NN}var t3e=e3e();const r3e=Xr(t3e);var Yo=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},TN,MU;function n3e(){if(MU)return TN;MU=1;var t=MW();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return TN=e,TN}var AN,PU;function a3e(){if(PU)return AN;PU=1;var t=n3e(),e=IW(),r=ul();function n(a,i){var o={};return i=r(i,3),e(a,function(c,d,h){t(o,d,i(c,d,h))}),o}return AN=n,AN}var i3e=a3e();const s3e=Xr(i3e);var jN,DU;function o3e(){if(DU)return jN;DU=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return jN=t,jN}var EN,LU;function l3e(){if(LU)return EN;LU=1;var t=FE();function e(r,n){var a=!0;return t(r,function(i,o,c){return a=!!n(i,o,c),a}),a}return EN=e,EN}var kN,BU;function c3e(){if(BU)return kN;BU=1;var t=o3e(),e=l3e(),r=ul(),n=ls(),a=cw();function i(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return kN=i,kN}var u3e=c3e();const SQ=Xr(u3e);var d3e=["x","y"];function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function tj(){return tj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tj.apply(this,arguments)}function $U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function im(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$U(Object(r),!0).forEach(function(n){h3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h3e(t,e,r){return e=f3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f3e(t){var e=p3e(t,"string");return zg(e)=="symbol"?e:e+""}function p3e(t,e){if(zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m3e(t,e){if(t==null)return{};var r=g3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function g3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function y3e(t,e){var r=t.x,n=t.y,a=m3e(t,d3e),i="".concat(r),o=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),y=parseInt(m,10);return im(im(im(im(im({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:p,width:y,name:e.name,radius:e.radius})}function UU(t){return se.createElement(ZA,tj({shapeType:"rectangle",propTransformer:y3e,activeClassName:"recharts-active-bar"},t))}var x3e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=xt(n)||whe(n);return i?e(n,a):(i||d0(),r)}},v3e=["value","background"],_Q;function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function b3e(t,e){if(t==null)return{};var r=w3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function w3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function qb(){return qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qb.apply(this,arguments)}function zU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ja(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(r),!0).forEach(function(n){fu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TQ(n.key),n)}}function _3e(t,e,r){return e&&VU(t.prototype,e),r&&VU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function N3e(t,e,r){return e=Hb(e),T3e(t,NQ()?Reflect.construct(e,r||[],Hb(t).constructor):e.apply(t,r))}function T3e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A3e(t)}function A3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NQ=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hb(t)}function j3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rj(t,e)}function rj(t,e){return rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rj(t,e)}function fu(t,e,r){return e=TQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TQ(t){var e=E3e(t,"string");return bf(e)=="symbol"?e:e+""}function E3e(t,e){if(bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var P1=(function(t){function e(){var r;S3e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=N3e(this,e,[].concat(a)),fu(r,"state",{isAnimationFinished:!1}),fu(r,"id",N1("recharts-bar-")),fu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),fu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return j3e(e,t),_3e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=Ft(this.props,!1);return n&&n.map(function(m,y){var x=y===d,_=x?h:o,S=ja(ja(ja({},p),m),{},{isActive:x,option:_,index:y,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(qr,qb({className:"recharts-bar-rectangle"},c0(a.props,m,y),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(y)}),se.createElement(UU,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=this.state.prevData;return se.createElement(al,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var _=x.t,S=i.map(function(w,E){var I=y&&y[E];if(I){var R=Zi(I.x,w.x),L=Zi(I.y,w.y),C=Zi(I.width,w.width),O=Zi(I.height,w.height);return ja(ja({},w),{},{x:R(_),y:L(_),width:C(_),height:O(_)})}if(o==="horizontal"){var A=Zi(0,w.height),j=A(_);return ja(ja({},w),{},{y:w.y+w.height-j,height:j})}var k=Zi(0,w.width),z=k(_);return ja(ja({},w),{},{width:z})});return se.createElement(qr,null,n.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!C1(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,c=a.activeIndex,d=Ft(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,y=b3e(h,v3e);if(!m)return null;var x=ja(ja(ja(ja(ja({},y),{},{fill:"#eee"},m),d),c0(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:p,className:"recharts-bar-background-rectangle"});return se.createElement(UU,qb({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},x))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=Cs(p,O1);if(!m)return null;var y=h==="vertical"?o[0].height/2:o[0].width/2,x=function(w,E){var I=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:I,errorVal:yi(w,E)}},_={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(qr,_,m.map(function(S){return se.cloneElement(S,{key:"error-bar-".concat(a,"-").concat(S.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:y,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,y=n.height,x=n.isAnimationActive,_=n.background,S=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,E=pr("recharts-bar",o),I=c&&c.allowDataOverflow,R=d&&d.allowDataOverflow,L=I||R,C=ur(S)?this.id:S;return se.createElement(qr,{className:E},I||R?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(C)},se.createElement("rect",{x:I?h:h-m/2,y:R?p:p-y/2,width:I?m:m*2,height:R?y:y*2}))):null,se.createElement(qr,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(C,")"):null},_?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,C),(!x||w)&&ec.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(T.PureComponent);_Q=P1;fu(P1,"displayName","Bar");fu(P1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!S0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});fu(P1,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,y=t.offset,x=Dve(n,r);if(!x)return null;var _=e.layout,S=r.type.defaultProps,w=S!==void 0?ja(ja({},S),r.props):r.props,E=w.dataKey,I=w.children,R=w.minPointSize,L=_==="horizontal"?o:i,C=h?L.scale.domain():null,O=Fve({numericAxis:L}),A=Cs(I,GE),j=m.map(function(k,z){var D,$,B,G,K,H;h?D=Lve(h[p+z],C):(D=yi(k,E),Array.isArray(D)||(D=[O,D]));var J=x3e(R,_Q.defaultProps.minPointSize)(D[1],z);if(_==="horizontal"){var ae,he=[o.scale(D[0]),o.scale(D[1])],fe=he[0],Y=he[1];$=f$({axis:i,ticks:c,bandSize:a,offset:x.offset,entry:k,index:z}),B=(ae=Y??fe)!==null&&ae!==void 0?ae:void 0,G=x.size;var ne=fe-Y;if(K=Number.isNaN(ne)?0:ne,H={x:$,y:o.y,width:G,height:o.height},Math.abs(J)>0&&Math.abs(K)<Math.abs(J)){var re=wo(K||J)*(Math.abs(J)-Math.abs(K));B-=re,K+=re}}else{var ye=[i.scale(D[0]),i.scale(D[1])],Te=ye[0],Ve=ye[1];if($=Te,B=f$({axis:o,ticks:d,bandSize:a,offset:x.offset,entry:k,index:z}),G=Ve-Te,K=x.size,H={x:i.x,y:B,width:i.width,height:K},Math.abs(J)>0&&Math.abs(G)<Math.abs(J)){var Je=wo(G||J)*(Math.abs(J)-Math.abs(G));G+=Je}}return ja(ja(ja({},k),{},{x:$,y:B,width:G,height:K,value:h?D:D[1],payload:k,background:H},A&&A[z]&&A[z].props),{},{tooltipPayload:[XK(r,k)],tooltipPosition:{x:$+G/2,y:B+K/2}})});return ja({data:j,layout:_},y)});function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function k3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AQ(n.key),n)}}function C3e(t,e,r){return e&&FU(t.prototype,e),r&&FU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(r),!0).forEach(function(n){Aw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Aw(t,e,r){return e=AQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AQ(t){var e=O3e(t,"string");return Vg(e)=="symbol"?e:e+""}function O3e(t,e){if(Vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I3e=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!_s(h,P1);return p.reduce(function(x,_){var S=r[_],w=S.orientation,E=S.domain,I=S.padding,R=I===void 0?{}:I,L=S.mirror,C=S.reversed,O="".concat(w).concat(L?"Mirror":""),A,j,k,z,D;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var $=E[1]-E[0],B=1/0,G=S.categoricalDomain.sort(The);if(G.forEach(function(ye,Te){Te>0&&(B=Math.min((ye||0)-(G[Te-1]||0),B))}),Number.isFinite(B)){var K=B/$,H=S.layout==="vertical"?n.height:n.width;if(S.padding==="gap"&&(A=K*H/2),S.padding==="no-gap"){var J=So(e.barCategoryGap,K*H),ae=K*H/2;A=ae-J-(ae-J)/H*J}}}a==="xAxis"?j=[n.left+(R.left||0)+(A||0),n.left+n.width-(R.right||0)-(A||0)]:a==="yAxis"?j=d==="horizontal"?[n.top+n.height-(R.bottom||0),n.top+(R.top||0)]:[n.top+(R.top||0)+(A||0),n.top+n.height-(R.bottom||0)-(A||0)]:j=S.range,C&&(j=[j[1],j[0]]);var he=GK(S,i,y),fe=he.scale,Y=he.realScaleType;fe.domain(E).range(j),WK(fe);var ne=KK(fe,vo(vo({},S),{},{realScaleType:Y}));a==="xAxis"?(D=w==="top"&&!L||w==="bottom"&&L,k=n.left,z=m[O]-D*S.height):a==="yAxis"&&(D=w==="left"&&!L||w==="right"&&L,k=m[O]-D*S.width,z=n.top);var re=vo(vo(vo({},S),ne),{},{realScaleType:Y,x:k,y:z,scale:fe,width:a==="xAxis"?n.width:S.width,height:a==="yAxis"?n.height:S.height});return re.bandSize=jb(re,ne),!S.hide&&a==="xAxis"?m[O]+=(D?-1:1)*re.height:S.hide||(m[O]+=(D?-1:1)*re.width),vo(vo({},x),{},Aw({},_,re))},{})},jQ=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},R3e=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return jQ({x:r,y:n},{x:a,y:i})},EQ=(function(){function t(e){k3e(this,t),this.scale=e}return C3e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();Aw(EQ,"EPS",1e-4);var v7=function(e){var r=Object.keys(e).reduce(function(n,a){return vo(vo({},n),{},Aw({},a,EQ.create(e[a])))},{});return vo(vo({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,c=i.position;return s3e(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return SQ(a,function(i,o){return r[o].isInRange(i)})}})};function M3e(t){return(t%180+180)%180}var P3e=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=M3e(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},CN,HU;function D3e(){if(HU)return CN;HU=1;var t=ul(),e=T1(),r=ow();function n(a){return function(i,o,c){var d=Object(i);if(!e(i)){var h=t(o,3);i=r(i),o=function(m){return h(d[m],m,d)}}var p=a(i,o,c);return p>-1?d[h?i[p]:p]:void 0}}return CN=n,CN}var ON,GU;function L3e(){if(GU)return ON;GU=1;var t=xQ();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return ON=e,ON}var IN,WU;function B3e(){if(WU)return IN;WU=1;var t=jW(),e=ul(),r=L3e(),n=Math.max;function a(i,o,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(o,3),h)}return IN=a,IN}var RN,KU;function $3e(){if(KU)return RN;KU=1;var t=D3e(),e=B3e(),r=t(e);return RN=r,RN}var U3e=$3e();const z3e=Xr(U3e);var V3e=FG();const F3e=Xr(V3e);var q3e=F3e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),b7=T.createContext(void 0),w7=T.createContext(void 0),kQ=T.createContext(void 0),CQ=T.createContext({}),OQ=T.createContext(void 0),IQ=T.createContext(0),RQ=T.createContext(0),QU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,p=q3e(i);return se.createElement(b7.Provider,{value:n},se.createElement(w7.Provider,{value:a},se.createElement(CQ.Provider,{value:i},se.createElement(kQ.Provider,{value:p},se.createElement(OQ.Provider,{value:o},se.createElement(IQ.Provider,{value:h},se.createElement(RQ.Provider,{value:d},c)))))))},H3e=function(){return T.useContext(OQ)},MQ=function(e){var r=T.useContext(b7);r==null&&d0();var n=r[e];return n==null&&d0(),n},G3e=function(){var e=T.useContext(b7);return cu(e)},W3e=function(){var e=T.useContext(w7),r=z3e(e,function(n){return SQ(n.domain,Number.isFinite)});return r||cu(e)},PQ=function(e){var r=T.useContext(w7);r==null&&d0();var n=r[e];return n==null&&d0(),n},K3e=function(){var e=T.useContext(kQ);return e},Q3e=function(){return T.useContext(CQ)},S7=function(){return T.useContext(RQ)},_7=function(){return T.useContext(IQ)};function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function X3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LQ(n.key),n)}}function Z3e(t,e,r){return e&&Y3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J3e(t,e,r){return e=Gb(e),eSe(t,DQ()?Reflect.construct(e,r||[],Gb(t).constructor):e.apply(t,r))}function eSe(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tSe(t)}function tSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DQ=function(){return!!t})()}function Gb(t){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gb(t)}function rSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nj(t,e)}function nj(t,e){return nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nj(t,e)}function XU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function YU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(r),!0).forEach(function(n){N7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function N7(t,e,r){return e=LQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LQ(t){var e=nSe(t,"string");return wf(e)=="symbol"?e:e+""}function nSe(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function aSe(t,e){return lSe(t)||oSe(t,e)||sSe(t,e)||iSe()}function iSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sSe(t,e){if(t){if(typeof t=="string")return ZU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZU(t,e)}}function ZU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function lSe(t){if(Array.isArray(t))return t}function aj(){return aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aj.apply(this,arguments)}var cSe=function(e,r){var n;return se.isValidElement(e)?n=se.cloneElement(e,r):rr(e)?n=e(r):n=se.createElement("line",aj({},r,{className:"recharts-reference-line-line"})),n},uSe=function(e,r,n,a,i,o,c,d,h){var p=i.x,m=i.y,y=i.width,x=i.height;if(n){var _=h.y,S=e.y.apply(_,{position:o});if(Yo(h,"discard")&&!e.y.isInRange(S))return null;var w=[{x:p+y,y:S},{x:p,y:S}];return d==="left"?w.reverse():w}if(r){var E=h.x,I=e.x.apply(E,{position:o});if(Yo(h,"discard")&&!e.x.isInRange(I))return null;var R=[{x:I,y:m+x},{x:I,y:m}];return c==="top"?R.reverse():R}if(a){var L=h.segment,C=L.map(function(O){return e.apply(O,{position:o})});return Yo(h,"discard")&&r3e(C,function(O){return!e.isInRange(O)})?null:C}return null};function dSe(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=H3e(),p=MQ(a),m=PQ(i),y=K3e();if(!h||!y)return null;Zl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=v7({x:p.scale,y:m.scale}),_=Ua(e),S=Ua(r),w=n&&n.length===2,E=uSe(x,_,S,w,y,t.position,p.orientation,m.orientation,t);if(!E)return null;var I=aSe(E,2),R=I[0],L=R.x,C=R.y,O=I[1],A=O.x,j=O.y,k=Yo(t,"hidden")?"url(#".concat(h,")"):void 0,z=YU(YU({clipPath:k},Ft(t,!0)),{},{x1:L,y1:C,x2:A,y2:j});return se.createElement(qr,{className:pr("recharts-reference-line",c)},cSe(o,z),fi.renderCallByParent(t,R3e({x1:L,y1:C,x2:A,y2:j})))}var T7=(function(t){function e(){return X3e(this,e),J3e(this,e,arguments)}return rSe(e,t),Z3e(e,[{key:"render",value:function(){return se.createElement(dSe,this.props)}}])})(se.Component);N7(T7,"displayName","ReferenceLine");N7(T7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ij(){return ij=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ij.apply(this,arguments)}function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function JU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ez(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(r),!0).forEach(function(n){jw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$Q(n.key),n)}}function pSe(t,e,r){return e&&fSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mSe(t,e,r){return e=Wb(e),gSe(t,BQ()?Reflect.construct(e,r||[],Wb(t).constructor):e.apply(t,r))}function gSe(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ySe(t)}function ySe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BQ=function(){return!!t})()}function Wb(t){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wb(t)}function xSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sj(t,e)}function sj(t,e){return sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sj(t,e)}function jw(t,e,r){return e=$Q(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Q(t){var e=vSe(t,"string");return Sf(e)=="symbol"?e:e+""}function vSe(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bSe=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=v7({x:a.scale,y:i.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return Yo(e,"discard")&&!o.isInRange(c)?null:c},Ew=(function(t){function e(){return hSe(this,e),mSe(this,e,arguments)}return xSe(e,t),pSe(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=Ua(a),p=Ua(i);if(Zl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=bSe(this.props);if(!m)return null;var y=m.x,x=m.y,_=this.props,S=_.shape,w=_.className,E=Yo(this.props,"hidden")?"url(#".concat(d,")"):void 0,I=ez(ez({clipPath:E},Ft(this.props,!0)),{},{cx:y,cy:x});return se.createElement(qr,{className:pr("recharts-reference-dot",w)},e.renderDot(S,I),fi.renderCallByParent(this.props,{x:y-o,y:x-o,width:2*o,height:2*o}))}}])})(se.Component);jw(Ew,"displayName","ReferenceDot");jw(Ew,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});jw(Ew,"renderDot",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):rr(t)?r=t(e):r=se.createElement(ww,ij({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function oj(){return oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oj.apply(this,arguments)}function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(r),!0).forEach(function(n){kw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zQ(n.key),n)}}function _Se(t,e,r){return e&&SSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NSe(t,e,r){return e=Kb(e),TSe(t,UQ()?Reflect.construct(e,r||[],Kb(t).constructor):e.apply(t,r))}function TSe(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ASe(t)}function ASe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UQ=function(){return!!t})()}function Kb(t){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(t)}function jSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lj(t,e)}function lj(t,e){return lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lj(t,e)}function kw(t,e,r){return e=zQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zQ(t){var e=ESe(t,"string");return _f(e)=="symbol"?e:e+""}function ESe(t,e){if(_f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kSe=function(e,r,n,a,i){var o=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var y=v7({x:p.scale,y:m.scale}),x={x:e?y.x.apply(o,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},_={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(h,{position:"end"}):y.y.rangeMax};return Yo(i,"discard")&&(!y.isInRange(x)||!y.isInRange(_))?null:jQ(x,_)},Cw=(function(t){function e(){return wSe(this,e),NSe(this,e,arguments)}return jSe(e,t),_Se(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;Zl(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Ua(a),y=Ua(i),x=Ua(o),_=Ua(c),S=this.props.shape;if(!m&&!y&&!x&&!_&&!S)return null;var w=kSe(m,y,x,_,this.props);if(!w&&!S)return null;var E=Yo(this.props,"hidden")?"url(#".concat(p,")"):void 0;return se.createElement(qr,{className:pr("recharts-reference-area",d)},e.renderRect(S,rz(rz({clipPath:E},Ft(this.props,!0)),w)),fi.renderCallByParent(this.props,w))}}])})(se.Component);kw(Cw,"displayName","ReferenceArea");kw(Cw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});kw(Cw,"renderRect",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):rr(t)?r=t(e):r=se.createElement(x7,oj({},e,{className:"recharts-reference-area-rect"})),r});function VQ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function CSe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return P3e(n,r)}function OSe(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function Qb(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function ISe(t,e){return VQ(t,e+1)}function RSe(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,p=o,m=function(){var _=n==null?void 0:n[d];if(_===void 0)return{v:VQ(n,h)};var S=d,w,E=function(){return w===void 0&&(w=r(_,S)),w},I=_.coordinate,R=d===0||Qb(t,I,E,p,c);R||(d=0,p=o,h+=1),R&&(p=I+t*(E()/2+a),d+=h)},y;h<=i.length;)if(y=m(),y)return y.v;return[]}function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Si(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nz(Object(r),!0).forEach(function(n){MSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MSe(t,e,r){return e=PSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PSe(t){var e=DSe(t,"string");return Fg(e)=="symbol"?e:e+""}function DSe(t,e){if(Fg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LSe(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,c=e.start,d=e.end,h=function(y){var x=i[y],_,S=function(){return _===void 0&&(_=r(x,y)),_};if(y===o-1){var w=t*(x.coordinate+t*S()/2-d);i[y]=x=Si(Si({},x),{},{tickCoord:w>0?x.coordinate-w*t:x.coordinate})}else i[y]=x=Si(Si({},x),{},{tickCoord:x.coordinate});var E=Qb(t,x.tickCoord,S,c,d);E&&(d=x.tickCoord-t*(S()/2+a),i[y]=Si(Si({},x),{},{isShow:!0}))},p=o-1;p>=0;p--)h(p);return i}function BSe(t,e,r,n,a,i){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),y=t*(p.coordinate+t*m/2-h);o[c-1]=p=Si(Si({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate});var x=Qb(t,p.tickCoord,function(){return m},d,h);x&&(h=p.tickCoord-t*(m/2+a),o[c-1]=Si(Si({},p),{},{isShow:!0}))}for(var _=i?c-1:c,S=function(I){var R=o[I],L,C=function(){return L===void 0&&(L=r(R,I)),L};if(I===0){var O=t*(R.coordinate-t*C()/2-d);o[I]=R=Si(Si({},R),{},{tickCoord:O<0?R.coordinate-O*t:R.coordinate})}else o[I]=R=Si(Si({},R),{},{tickCoord:R.coordinate});var A=Qb(t,R.tickCoord,C,d,h);A&&(d=R.tickCoord+t*(C()/2+a),o[I]=Si(Si({},R),{},{isShow:!0}))},w=0;w<_;w++)S(w);return o}function A7(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(xt(d)||S0.isSsr)return ISe(a,typeof d=="number"&&xt(d)?d:0);var y=[],x=c==="top"||c==="bottom"?"width":"height",_=p&&x==="width"?Em(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},S=function(R,L){var C=rr(h)?h(R.value,L):R.value;return x==="width"?CSe(Em(C,{fontSize:e,letterSpacing:r}),_,m):Em(C,{fontSize:e,letterSpacing:r})[x]},w=a.length>=2?wo(a[1].coordinate-a[0].coordinate):1,E=OSe(i,w,x);return d==="equidistantPreserveStart"?RSe(w,E,S,a,o):(d==="preserveStart"||d==="preserveStartEnd"?y=BSe(w,E,S,a,o,d==="preserveStartEnd"):y=LSe(w,E,S,a,o),y.filter(function(I){return I.isShow}))}var $Se=["viewBox"],USe=["viewBox"],zSe=["ticks"];function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_h.apply(this,arguments)}function az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?az(Object(r),!0).forEach(function(n){j7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MN(t,e){if(t==null)return{};var r=VSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function VSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function FSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qQ(n.key),n)}}function qSe(t,e,r){return e&&iz(t.prototype,e),r&&iz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function HSe(t,e,r){return e=Xb(e),GSe(t,FQ()?Reflect.construct(e,r||[],Xb(t).constructor):e.apply(t,r))}function GSe(t,e){if(e&&(Nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WSe(t)}function WSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FQ=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xb(t)}function KSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cj(t,e)}function cj(t,e){return cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cj(t,e)}function j7(t,e,r){return e=qQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qQ(t){var e=QSe(t,"string");return Nf(e)=="symbol"?e:e+""}function QSe(t,e){if(Nf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wf=(function(t){function e(r){var n;return FSe(this,e),n=HSe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return KSe(e,t),qSe(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=MN(n,$Se),c=this.props,d=c.viewBox,h=MN(c,USe);return!Mh(i,d)||!Mh(o,h)||!Mh(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,y=a.tickMargin,x,_,S,w,E,I,R=m?-1:1,L=n.tickSize||p,C=xt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":x=_=n.coordinate,w=o+ +!m*d,S=w-R*L,I=S-R*y,E=C;break;case"left":S=w=n.coordinate,_=i+ +!m*c,x=_-R*L,E=x-R*y,I=C;break;case"right":S=w=n.coordinate,_=i+ +m*c,x=_+R*L,E=x+R*y,I=C;break;default:x=_=n.coordinate,w=o+ +m*d,S=w+R*L,I=S+R*y,E=C;break}return{line:{x1:x,y1:S,x2:_,y2:w},tick:{x:E,y:I}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=Pa(Pa(Pa({},Ft(this.props,!1)),Ft(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);m=Pa(Pa({},m),{},{x1:a,y1:i+y*c,x2:a+o,y2:i+y*c})}else{var x=+(d==="left"&&!h||d==="right"&&h);m=Pa(Pa({},m),{},{x1:a+x*o,y1:i,x2:a+x*o,y2:i+c})}return se.createElement("line",_h({},m,{className:pr("recharts-cartesian-axis-line",eo(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,y=c.unit,x=A7(Pa(Pa({},this.props),{},{ticks:n}),a,i),_=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),w=Ft(this.props,!1),E=Ft(p,!1),I=Pa(Pa({},w),{},{fill:"none"},Ft(d,!1)),R=x.map(function(L,C){var O=o.getTickLineCoord(L),A=O.line,j=O.tick,k=Pa(Pa(Pa(Pa({textAnchor:_,verticalAnchor:S},w),{},{stroke:"none",fill:h},E),j),{},{index:C,payload:L,visibleTicksCount:x.length,tickFormatter:m});return se.createElement(qr,_h({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},c0(o.props,L,C)),d&&se.createElement("line",_h({},I,A,{className:pr("recharts-cartesian-axis-tick-line",eo(d,"className"))})),p&&e.renderTickItem(p,k,"".concat(rr(m)?m(L.value,C):L.value).concat(y||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},R)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,y=m.ticks,x=MN(m,zSe),_=y;return rr(d)&&(_=y&&y.length>0?d(this.props):d(x)),o<=0||c<=0||!_||!_.length?null:se.createElement(qr,{className:pr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(_,this.state.fontSize,this.state.letterSpacing),fi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,c=pr(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?o=se.cloneElement(n,Pa(Pa({},a),{},{className:c})):rr(n)?o=n(Pa(Pa({},a),{},{className:c})):o=se.createElement(cf,_h({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(T.Component);j7(Wf,"displayName","CartesianAxis");j7(Wf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var XSe=["x1","y1","x2","y2","key"],YSe=["offset"];function h0(t){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(t)}function sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ni(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sz(Object(r),!0).forEach(function(n){ZSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZSe(t,e,r){return e=JSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JSe(t){var e=e6e(t,"string");return h0(e)=="symbol"?e:e+""}function e6e(t,e){if(h0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(h0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dd.apply(this,arguments)}function oz(t,e){if(t==null)return{};var r=t6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function t6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var r6e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,c=e.height,d=e.ry;return se.createElement("rect",{x:a,y:i,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function HQ(t,e){var r;if(se.isValidElement(t))r=se.cloneElement(t,e);else if(rr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,c=e.key,d=oz(e,XSe),h=Ft(d,!1);h.offset;var p=oz(h,YSe);r=se.createElement("line",Dd({},p,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:c}))}return r}function n6e(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Ni(Ni({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return HQ(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function a6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Ni(Ni({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return HQ(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function i6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(y){return Math.round(y+a-a)}).sort(function(y,x){return y-x});a!==p[0]&&p.unshift(0);var m=p.map(function(y,x){var _=!p[x+1],S=_?a+o-y:p[x+1]-y;if(S<=0)return null;var w=x%e.length;return se.createElement("rect",{key:"react-".concat(x),y,x:n,height:S,width:i,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function s6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(y){return Math.round(y+i-i)}).sort(function(y,x){return y-x});i!==p[0]&&p.unshift(0);var m=p.map(function(y,x){var _=!p[x+1],S=_?i+c-y:p[x+1]-y;if(S<=0)return null;var w=x%n.length;return se.createElement("rect",{key:"react-".concat(x),x:y,y:o,width:S,height:d,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var o6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return HK(A7(Ni(Ni(Ni({},Wf.defaultProps),n),{},{ticks:Wl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},l6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return HK(A7(Ni(Ni(Ni({},Wf.defaultProps),n),{},{ticks:Wl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},hh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function GQ(t){var e,r,n,a,i,o,c=S7(),d=_7(),h=Q3e(),p=Ni(Ni({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:hh.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:hh.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:hh.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:hh.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:hh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:hh.verticalFill,x:xt(t.x)?t.x:h.left,y:xt(t.y)?t.y:h.top,width:xt(t.width)?t.width:h.width,height:xt(t.height)?t.height:h.height}),m=p.x,y=p.y,x=p.width,_=p.height,S=p.syncWithTicks,w=p.horizontalValues,E=p.verticalValues,I=G3e(),R=W3e();if(!xt(x)||x<=0||!xt(_)||_<=0||!xt(m)||m!==+m||!xt(y)||y!==+y)return null;var L=p.verticalCoordinatesGenerator||o6e,C=p.horizontalCoordinatesGenerator||l6e,O=p.horizontalPoints,A=p.verticalPoints;if((!O||!O.length)&&rr(C)){var j=w&&w.length,k=C({yAxis:R?Ni(Ni({},R),{},{ticks:j?w:R.ticks}):void 0,width:c,height:d,offset:h},j?!0:S);Zl(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(h0(k),"]")),Array.isArray(k)&&(O=k)}if((!A||!A.length)&&rr(L)){var z=E&&E.length,D=L({xAxis:I?Ni(Ni({},I),{},{ticks:z?E:I.ticks}):void 0,width:c,height:d,offset:h},z?!0:S);Zl(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(h0(D),"]")),Array.isArray(D)&&(A=D)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(r6e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),se.createElement(n6e,Dd({},p,{offset:h,horizontalPoints:O,xAxis:I,yAxis:R})),se.createElement(a6e,Dd({},p,{offset:h,verticalPoints:A,xAxis:I,yAxis:R})),se.createElement(i6e,Dd({},p,{horizontalPoints:O})),se.createElement(s6e,Dd({},p,{verticalPoints:A})))}GQ.displayName="CartesianGrid";function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function c6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QQ(n.key),n)}}function d6e(t,e,r){return e&&u6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function h6e(t,e,r){return e=Yb(e),f6e(t,WQ()?Reflect.construct(e,r||[],Yb(t).constructor):e.apply(t,r))}function f6e(t,e){if(e&&(Tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p6e(t)}function p6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WQ=function(){return!!t})()}function Yb(t){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yb(t)}function m6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uj(t,e)}function uj(t,e){return uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uj(t,e)}function KQ(t,e,r){return e=QQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QQ(t){var e=g6e(t,"string");return Tf(e)=="symbol"?e:e+""}function g6e(t,e){if(Tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ow=(function(t){function e(){return c6e(this,e),h6e(this,e,arguments)}return m6e(e,t),d6e(e,[{key:"render",value:function(){return null}}])})(T.Component);KQ(Ow,"displayName","ZAxis");KQ(Ow,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var y6e=["option","isActive"];function Mm(){return Mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mm.apply(this,arguments)}function x6e(t,e){if(t==null)return{};var r=v6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function v6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function b6e(t){var e=t.option,r=t.isActive,n=x6e(t,y6e);return typeof e=="string"?T.createElement(ZA,Mm({option:T.createElement(sw,Mm({type:e},n)),isActive:r,shapeType:"symbols"},n)):T.createElement(ZA,Mm({option:e,isActive:r,shapeType:"symbols"},n))}function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function Pm(){return Pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pm.apply(this,arguments)}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Qs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){pu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YQ(n.key),n)}}function S6e(t,e,r){return e&&cz(t.prototype,e),r&&cz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _6e(t,e,r){return e=Zb(e),N6e(t,XQ()?Reflect.construct(e,r||[],Zb(t).constructor):e.apply(t,r))}function N6e(t,e){if(e&&(Af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T6e(t)}function T6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XQ=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zb(t)}function A6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dj(t,e)}function dj(t,e){return dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dj(t,e)}function pu(t,e,r){return e=YQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YQ(t){var e=j6e(t,"string");return Af(e)=="symbol"?e:e+""}function j6e(t,e){if(Af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var D1=(function(t){function e(){var r;w6e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=_6e(this,e,[].concat(a)),pu(r,"state",{isAnimationFinished:!1}),pu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),pu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),pu(r,"id",N1("recharts-scatter-")),r}return A6e(e,t),S6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.activeShape,d=i.activeIndex,h=Ft(this.props,!1);return n.map(function(p,m){var y=d===m,x=y?c:o,_=Qs(Qs({},h),p);return se.createElement(qr,Pm({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},c0(a.props,p,m),{role:"img"}),se.createElement(b6e,Pm({option:x,isActive:y,key:"symbol-".concat(m)},_)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(al,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t,_=i.map(function(S,w){var E=m&&m[w];if(E){var I=Zi(E.cx,S.cx),R=Zi(E.cy,S.cy),L=Zi(E.size,S.size);return Qs(Qs({},S),{},{cx:I(x),cy:R(x),size:L(x)})}var C=Zi(0,S.size);return Qs(Qs({},S),{},{size:C(x)})});return se.createElement(qr,null,n.renderSymbolsStatically(_))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!C1(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,c=a.yAxis,d=a.children,h=Cs(d,O1);return h?h.map(function(p,m){var y=p.props,x=y.direction,_=y.dataKey;return se.cloneElement(p,{key:"".concat(x,"-").concat(_,"-").concat(i[m]),data:i,xAxis:o,yAxis:c,layout:x==="x"?"vertical":"horizontal",dataPointFormatter:function(w,E){return{x:w.cx,y:w.cy,value:x==="x"?+w.node.x:+w.node.y,errorVal:yi(w,E)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,c=n.lineJointType,d=Ft(this.props,!1),h=Ft(i,!1),p,m;if(o==="joint")p=a.map(function(R){return{x:R.cx,y:R.cy}});else if(o==="fitting"){var y=Nhe(a),x=y.xmin,_=y.xmax,S=y.a,w=y.b,E=function(L){return S*L+w};p=[{x,y:E(x)},{x:_,y:E(_)}]}var I=Qs(Qs(Qs({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return se.isValidElement(i)?m=se.cloneElement(i,I):rr(i)?m=i(I):m=se.createElement(LA,Pm({},I,{type:c})),se.createElement(qr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,y=n.width,x=n.height,_=n.id,S=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,E=pr("recharts-scatter",c),I=d&&d.allowDataOverflow,R=h&&h.allowDataOverflow,L=I||R,C=ur(_)?this.id:_;return se.createElement(qr,{className:E,clipPath:L?"url(#clipPath-".concat(C,")"):null},I||R?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(C)},se.createElement("rect",{x:I?p:p-y/2,y:R?m:m-x/2,width:I?y:y*2,height:R?x:x*2}))):null,o&&this.renderLine(),this.renderErrorBar(),se.createElement(qr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||w)&&ec.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(T.PureComponent);pu(D1,"displayName","Scatter");pu(D1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!S0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});pu(D1,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,o=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=Cs(a.props.children,GE),m=ur(e.dataKey)?a.props.dataKey:e.dataKey,y=ur(r.dataKey)?a.props.dataKey:r.dataKey,x=n&&n.dataKey,_=n?n.range:Ow.defaultProps.range,S=_&&_[0],w=e.scale.bandwidth?e.scale.bandwidth():0,E=r.scale.bandwidth?r.scale.bandwidth():0,I=i.map(function(R,L){var C=yi(R,m),O=yi(R,y),A=!ur(x)&&yi(R,x)||"-",j=[{name:ur(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:C,payload:R,dataKey:m,type:h},{name:ur(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:O,payload:R,dataKey:y,type:h}];A!=="-"&&j.push({name:n.name||n.dataKey,unit:n.unit||"",value:A,payload:R,dataKey:x,type:h});var k=h$({axis:e,ticks:o,bandSize:w,entry:R,index:L,dataKey:m}),z=h$({axis:r,ticks:c,bandSize:E,entry:R,index:L,dataKey:y}),D=A!=="-"?n.scale(A):S,$=Math.sqrt(Math.max(D,0)/Math.PI);return Qs(Qs({},R),{},{cx:k,cy:z,x:k-$,y:z-$,xAxis:e,yAxis:r,zAxis:n,width:2*$,height:2*$,size:D,node:{x:C,y:O,z:A},tooltipPayload:j,tooltipPosition:{x:k,y:z},payload:R},p&&p[L]&&p[L].props)});return Qs({points:I},d)});function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function E6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eX(n.key),n)}}function C6e(t,e,r){return e&&k6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function O6e(t,e,r){return e=Jb(e),I6e(t,ZQ()?Reflect.construct(e,r||[],Jb(t).constructor):e.apply(t,r))}function I6e(t,e){if(e&&(jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R6e(t)}function R6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZQ=function(){return!!t})()}function Jb(t){return Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jb(t)}function M6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hj(t,e)}function hj(t,e){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hj(t,e)}function JQ(t,e,r){return e=eX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eX(t){var e=P6e(t,"string");return jf(e)=="symbol"?e:e+""}function P6e(t,e){if(jf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fj(){return fj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fj.apply(this,arguments)}function D6e(t){var e=t.xAxisId,r=S7(),n=_7(),a=MQ(e);return a==null?null:T.createElement(Wf,fj({},a,{className:pr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Wl(o,!0)}}))}var Iw=(function(t){function e(){return E6e(this,e),O6e(this,e,arguments)}return M6e(e,t),C6e(e,[{key:"render",value:function(){return T.createElement(D6e,this.props)}}])})(T.Component);JQ(Iw,"displayName","XAxis");JQ(Iw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function L6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nX(n.key),n)}}function $6e(t,e,r){return e&&B6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function U6e(t,e,r){return e=e2(e),z6e(t,tX()?Reflect.construct(e,r||[],e2(t).constructor):e.apply(t,r))}function z6e(t,e){if(e&&(Ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V6e(t)}function V6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tX=function(){return!!t})()}function e2(t){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e2(t)}function F6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pj(t,e)}function pj(t,e){return pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pj(t,e)}function rX(t,e,r){return e=nX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nX(t){var e=q6e(t,"string");return Ef(e)=="symbol"?e:e+""}function q6e(t,e){if(Ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function mj(){return mj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mj.apply(this,arguments)}var H6e=function(e){var r=e.yAxisId,n=S7(),a=_7(),i=PQ(r);return i==null?null:T.createElement(Wf,mj({},i,{className:pr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Wl(c,!0)}}))},Rw=(function(t){function e(){return L6e(this,e),U6e(this,e,arguments)}return F6e(e,t),$6e(e,[{key:"render",value:function(){return T.createElement(H6e,this.props)}}])})(T.Component);rX(Rw,"displayName","YAxis");rX(Rw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function uz(t){return Q6e(t)||K6e(t)||W6e(t)||G6e()}function G6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W6e(t,e){if(t){if(typeof t=="string")return gj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gj(t,e)}}function K6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Q6e(t){if(Array.isArray(t))return gj(t)}function gj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var yj=function(e,r,n,a,i){var o=Cs(e,T7),c=Cs(e,Ew),d=[].concat(uz(o),uz(c)),h=Cs(e,Cw),p="".concat(a,"Id"),m=a[0],y=r;if(d.length&&(y=d.reduce(function(S,w){if(w.props[p]===n&&Yo(w.props,"extendDomain")&&xt(w.props[m])){var E=w.props[m];return[Math.min(S[0],E),Math.max(S[1],E)]}return S},y)),h.length){var x="".concat(m,"1"),_="".concat(m,"2");y=h.reduce(function(S,w){if(w.props[p]===n&&Yo(w.props,"extendDomain")&&xt(w.props[x])&&xt(w.props[_])){var E=w.props[x],I=w.props[_];return[Math.min(S[0],E,I),Math.max(S[1],E,I)]}return S},y)}return i&&i.length&&(y=i.reduce(function(S,w){return xt(w)?[Math.min(S[0],w),Math.max(S[1],w)]:S},y)),y},PN={exports:{}},dz;function X6e(){return dz||(dz=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new a(p,m||d,y),_=r?r+h:h;return d._events[_]?d._events[_].fn?d._events[_]=[d._events[_],x]:d._events[_].push(x):(d._events[_]=x,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,x=m.length,_=new Array(x);y<x;y++)_[y]=m[y].fn;return _},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,y,x,_){var S=r?r+h:h;if(!this._events[S])return!1;var w=this._events[S],E=arguments.length,I,R;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,y),!0;case 5:return w.fn.call(w.context,p,m,y,x),!0;case 6:return w.fn.call(w.context,p,m,y,x,_),!0}for(R=1,I=new Array(E-1);R<E;R++)I[R-1]=arguments[R];w.fn.apply(w.context,I)}else{var L=w.length,C;for(R=0;R<L;R++)switch(w[R].once&&this.removeListener(h,w[R].fn,void 0,!0),E){case 1:w[R].fn.call(w[R].context);break;case 2:w[R].fn.call(w[R].context,p);break;case 3:w[R].fn.call(w[R].context,p,m);break;case 4:w[R].fn.call(w[R].context,p,m,y);break;default:if(!I)for(C=1,I=new Array(E-1);C<E;C++)I[C-1]=arguments[C];w[R].fn.apply(w[R].context,I)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,y){var x=r?r+h:h;if(!this._events[x])return this;if(!p)return o(this,x),this;var _=this._events[x];if(_.fn)_.fn===p&&(!y||_.once)&&(!m||_.context===m)&&o(this,x);else{for(var S=0,w=[],E=_.length;S<E;S++)(_[S].fn!==p||y&&!_[S].once||m&&_[S].context!==m)&&w.push(_[S]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(PN)),PN.exports}var Y6e=X6e();const Z6e=Xr(Y6e);var DN=new Z6e,LN="recharts.syncMouseEvents";function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function J6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e_e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aX(n.key),n)}}function t_e(t,e,r){return e&&e_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BN(t,e,r){return e=aX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aX(t){var e=r_e(t,"string");return qg(e)=="symbol"?e:e+""}function r_e(t,e){if(qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var n_e=(function(){function t(){J6e(this,t),BN(this,"activeIndex",0),BN(this,"coordinateList",[]),BN(this,"layout","horizontal")}return t_e(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,y=r.mouseHandlerCallback,x=y===void 0?null:y;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,y=o+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:y})}}}])})();function a_e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&xt(n)&&xt(a))return!0}return!1}function i_e(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function iX(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=wn(e,r,n,a),c=wn(e,r,n,i);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function s_e(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,y=wn(c,d,h,m),x=wn(c,d,p,m);n=y.x,a=y.y,i=x.x,o=x.y}else return iX(e);return[{x:n,y:a},{x:i,y:o}]}function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function hz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ux(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hz(Object(r),!0).forEach(function(n){o_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o_e(t,e,r){return e=l_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l_e(t){var e=c_e(t,"string");return Hg(e)=="symbol"?e:e+""}function c_e(t,e){if(Hg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u_e(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,y=t.chartName,x=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!o||y!=="ScatterChart"&&a!=="axis")return null;var _,S=LA;if(y==="ScatterChart")_=o,S=l4e;else if(y==="BarChart")_=i_e(m,o,d,p),S=x7;else if(m==="radial"){var w=iX(o),E=w.cx,I=w.cy,R=w.radius,L=w.startAngle,C=w.endAngle;_={cx:E,cy:I,startAngle:L,endAngle:C,innerRadius:R,outerRadius:R},S=rQ}else _={points:s_e(m,o,d)},S=LA;var O=Ux(Ux(Ux(Ux({stroke:"#ccc",pointerEvents:"none"},d),_),Ft(x,!1)),{},{payload:c,payloadIndex:h,className:pr("recharts-tooltip-cursor",x.className)});return T.isValidElement(x)?T.cloneElement(x,O):T.createElement(S,O)}var d_e=["item"],h_e=["children","className","width","height","style","compact","title","desc"];function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function Nh(){return Nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nh.apply(this,arguments)}function fz(t,e){return m_e(t)||p_e(t,e)||oX(t,e)||f_e()}function f_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p_e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function m_e(t){if(Array.isArray(t))return t}function pz(t,e){if(t==null)return{};var r=g_e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function g_e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function y_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x_e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lX(n.key),n)}}function v_e(t,e,r){return e&&x_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function b_e(t,e,r){return e=t2(e),w_e(t,sX()?Reflect.construct(e,r||[],t2(t).constructor):e.apply(t,r))}function w_e(t,e){if(e&&(kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S_e(t)}function S_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t2(t)}function __e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xj(t,e)}function xj(t,e){return xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xj(t,e)}function Cf(t){return A_e(t)||T_e(t)||oX(t)||N_e()}function N_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oX(t,e){if(t){if(typeof t=="string")return vj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vj(t,e)}}function T_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A_e(t){if(Array.isArray(t))return vj(t)}function vj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function We(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(r),!0).forEach(function(n){Qt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qt(t,e,r){return e=lX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lX(t){var e=j_e(t,"string");return kf(e)=="symbol"?e:e+""}function j_e(t,e){if(kf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E_e={xAxis:["bottom","top"],yAxis:["left","right"]},k_e={width:"100%",height:"100%"},cX={x:0,y:0};function zx(t){return t}var C_e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},O_e=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,c=a.radius;return We(We(We({},a),wn(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=i.coordinate,h=a.angle;return We(We(We({},a),wn(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return cX},Mw=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(Cf(c),Cf(h)):c},[]);return o.length>0?o:e&&e.length&&xt(a)&&xt(i)?e.slice(a,i+1):[]};function uX(t){return t==="number"?[0,"auto"]:void 0}var bj=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,c=Mw(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(o.dataKey&&!o.allowDuplicatedCategory){var x=m===void 0?c:m;y=tb(x,o.dataKey,a)}else y=m&&m[n]||c[n];return y?[].concat(Cf(d),[XK(h,y)]):d},[])},gz=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=C_e(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=Cve(o,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,y=bj(e,r,p,m),x=O_e(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:y,activeCoordinate:x}}return null},I_e=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=e.stackOffset,x=qK(p,i);return n.reduce(function(_,S){var w,E=S.type.defaultProps!==void 0?We(We({},S.type.defaultProps),S.props):S.props,I=E.type,R=E.dataKey,L=E.allowDataOverflow,C=E.allowDuplicatedCategory,O=E.scale,A=E.ticks,j=E.includeHidden,k=E[o];if(_[k])return _;var z=Mw(e.data,{graphicalItems:a.filter(function(ne){var re,ye=o in ne.props?ne.props[o]:(re=ne.type.defaultProps)===null||re===void 0?void 0:re[o];return ye===k}),dataStartIndex:d,dataEndIndex:h}),D=z.length,$,B,G;a_e(E.domain,L,I)&&($=IA(E.domain,null,L),x&&(I==="number"||O!=="auto")&&(G=Cm(z,R,"category")));var K=uX(I);if(!$||$.length===0){var H,J=(H=E.domain)!==null&&H!==void 0?H:K;if(R){if($=Cm(z,R,I),I==="category"&&x){var ae=_he($);C&&ae?(B=$,$=zb(0,D)):C||($=g$(J,$,S).reduce(function(ne,re){return ne.indexOf(re)>=0?ne:[].concat(Cf(ne),[re])},[]))}else if(I==="category")C?$=$.filter(function(ne){return ne!==""&&!ur(ne)}):$=g$(J,$,S).reduce(function(ne,re){return ne.indexOf(re)>=0||re===""||ur(re)?ne:[].concat(Cf(ne),[re])},[]);else if(I==="number"){var he=Pve(z,a.filter(function(ne){var re,ye,Te=o in ne.props?ne.props[o]:(re=ne.type.defaultProps)===null||re===void 0?void 0:re[o],Ve="hide"in ne.props?ne.props.hide:(ye=ne.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return Te===k&&(j||!Ve)}),R,i,p);he&&($=he)}x&&(I==="number"||O!=="auto")&&(G=Cm(z,R,"category"))}else x?$=zb(0,D):c&&c[k]&&c[k].hasStack&&I==="number"?$=y==="expand"?[0,1]:QK(c[k].stackGroups,d,h):$=FK(z,a.filter(function(ne){var re=o in ne.props?ne.props[o]:ne.type.defaultProps[o],ye="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return re===k&&(j||!ye)}),I,p,!0);if(I==="number")$=yj(m,$,k,i,A),J&&($=IA(J,$,L));else if(I==="category"&&J){var fe=J,Y=$.every(function(ne){return fe.indexOf(ne)>=0});Y&&($=fe)}}return We(We({},_),{},Qt({},k,We(We({},E),{},{axisType:i,domain:$,categoricalDomain:G,duplicateDomain:B,originalDomain:(w=E.domain)!==null&&w!==void 0?w:K,isCategorical:x,layout:p})))},{})},R_e=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=Mw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),x=y.length,_=qK(p,i),S=-1;return n.reduce(function(w,E){var I=E.type.defaultProps!==void 0?We(We({},E.type.defaultProps),E.props):E.props,R=I[o],L=uX("number");if(!w[R]){S++;var C;return _?C=zb(0,x):c&&c[R]&&c[R].hasStack?(C=QK(c[R].stackGroups,d,h),C=yj(m,C,R,i)):(C=IA(L,FK(y,n.filter(function(O){var A,j,k=o in O.props?O.props[o]:(A=O.type.defaultProps)===null||A===void 0?void 0:A[o],z="hide"in O.props?O.props.hide:(j=O.type.defaultProps)===null||j===void 0?void 0:j.hide;return k===R&&!z}),"number",p),a.defaultProps.allowDataOverflow),C=yj(m,C,R,i)),We(We({},w),{},Qt({},R,We(We({axisType:i},a.defaultProps),{},{hide:!0,orientation:eo(E_e,"".concat(i,".").concat(S%2),null),domain:C,originalDomain:L,isCategorical:_,layout:p})))}return w},{})},M_e=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),y=Cs(p,i),x={};return y&&y.length?x=I_e(e,{axes:y,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(x=R_e(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),x},P_e=function(e){var r=cu(e),n=Wl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:qE(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:jb(r,n)}},yz=function(e){var r=e.children,n=e.defaultShowTooltip,a=_s(r,vf),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},D_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=Yl(r&&r.type);return n&&n.indexOf("Bar")>=0})},xz=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},L_e=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,y=n.margin||{},x=_s(m,vf),_=_s(m,Ph),S=Object.keys(d).reduce(function(C,O){var A=d[O],j=A.orientation;return!A.mirror&&!A.hide?We(We({},C),{},Qt({},j,C[j]+A.width)):C},{left:y.left||0,right:y.right||0}),w=Object.keys(o).reduce(function(C,O){var A=o[O],j=A.orientation;return!A.mirror&&!A.hide?We(We({},C),{},Qt({},j,eo(C,"".concat(j))+A.height)):C},{top:y.top||0,bottom:y.bottom||0}),E=We(We({},w),S),I=E.bottom;x&&(E.bottom+=x.props.height||vf.defaultProps.height),_&&r&&(E=Rve(E,a,n,r));var R=h-E.left-E.right,L=p-E.top-E.bottom;return We(We({brushBottom:I},E),{},{width:Math.max(R,0),height:Math.max(L,0)})},B_e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},dX=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,y=function(E,I){var R=I.graphicalItems,L=I.stackGroups,C=I.offset,O=I.updateId,A=I.dataStartIndex,j=I.dataEndIndex,k=E.barSize,z=E.layout,D=E.barGap,$=E.barCategoryGap,B=E.maxBarSize,G=xz(z),K=G.numericAxisName,H=G.cateAxisName,J=D_e(R),ae=[];return R.forEach(function(he,fe){var Y=Mw(E.data,{graphicalItems:[he],dataStartIndex:A,dataEndIndex:j}),ne=he.type.defaultProps!==void 0?We(We({},he.type.defaultProps),he.props):he.props,re=ne.dataKey,ye=ne.maxBarSize,Te=ne["".concat(K,"Id")],Ve=ne["".concat(H,"Id")],Je={},Xe=d.reduce(function(vt,et){var ce=I["".concat(et.axisType,"Map")],Ue=ne["".concat(et.axisType,"Id")];ce&&ce[Ue]||et.axisType==="zAxis"||d0();var Ze=ce[Ue];return We(We({},vt),{},Qt(Qt({},et.axisType,Ze),"".concat(et.axisType,"Ticks"),Wl(Ze)))},Je),ie=Xe[H],Be=Xe["".concat(H,"Ticks")],Q=L&&L[Te]&&L[Te].hasStack&&qve(he,L[Te].stackGroups),te=Yl(he.type).indexOf("Bar")>=0,_e=jb(ie,Be),Se=[],Qe=J&&Ove({barSize:k,stackGroups:L,totalSize:B_e(Xe,H)});if(te){var nt,Ot,Me=ur(ye)?B:ye,lt=(nt=(Ot=jb(ie,Be,!0))!==null&&Ot!==void 0?Ot:Me)!==null&&nt!==void 0?nt:0;Se=Ive({barGap:D,barCategoryGap:$,bandSize:lt!==_e?lt:_e,sizeList:Qe[Ve],maxBarSize:Me}),lt!==_e&&(Se=Se.map(function(vt){return We(We({},vt),{},{position:We(We({},vt.position),{},{offset:vt.position.offset-lt/2})})}))}var St=he&&he.type&&he.type.getComposedData;St&&ae.push({props:We(We({},St(We(We({},Xe),{},{displayedData:Y,props:E,dataKey:re,item:he,bandSize:_e,barPosition:Se,offset:C,stackedData:Q,layout:z,dataStartIndex:A,dataEndIndex:j}))),{},Qt(Qt(Qt({key:he.key||"item-".concat(fe)},K,Xe[K]),H,Xe[H]),"animationId",O)),childIndex:Dhe(he,E.children),item:he})}),ae},x=function(E,I){var R=E.props,L=E.dataStartIndex,C=E.dataEndIndex,O=E.updateId;if(!CP({props:R}))return null;var A=R.children,j=R.layout,k=R.stackOffset,z=R.data,D=R.reverseStackOrder,$=xz(j),B=$.numericAxisName,G=$.cateAxisName,K=Cs(A,n),H=Vve(z,K,"".concat(B,"Id"),"".concat(G,"Id"),k,D),J=d.reduce(function(ne,re){var ye="".concat(re.axisType,"Map");return We(We({},ne),{},Qt({},ye,M_e(R,We(We({},re),{},{graphicalItems:K,stackGroups:re.axisType===B&&H,dataStartIndex:L,dataEndIndex:C}))))},{}),ae=L_e(We(We({},J),{},{props:R,graphicalItems:K}),I==null?void 0:I.legendBBox);Object.keys(J).forEach(function(ne){J[ne]=p(R,J[ne],ae,ne.replace("Map",""),r)});var he=J["".concat(G,"Map")],fe=P_e(he),Y=y(R,We(We({},J),{},{dataStartIndex:L,dataEndIndex:C,updateId:O,graphicalItems:K,stackGroups:H,offset:ae}));return We(We({formattedGraphicalItems:Y,graphicalItems:K,offset:ae,stackGroups:H},fe),J)},_=(function(w){function E(I){var R,L,C;return y_e(this,E),C=b_e(this,E,[I]),Qt(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Qt(C,"accessibilityManager",new n_e),Qt(C,"handleLegendBBoxUpdate",function(O){if(O){var A=C.state,j=A.dataStartIndex,k=A.dataEndIndex,z=A.updateId;C.setState(We({legendBBox:O},x({props:C.props,dataStartIndex:j,dataEndIndex:k,updateId:z},We(We({},C.state),{},{legendBBox:O}))))}}),Qt(C,"handleReceiveSyncEvent",function(O,A,j){if(C.props.syncId===O){if(j===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(A)}}),Qt(C,"handleBrushChange",function(O){var A=O.startIndex,j=O.endIndex;if(A!==C.state.dataStartIndex||j!==C.state.dataEndIndex){var k=C.state.updateId;C.setState(function(){return We({dataStartIndex:A,dataEndIndex:j},x({props:C.props,dataStartIndex:A,dataEndIndex:j,updateId:k},C.state))}),C.triggerSyncEvent({dataStartIndex:A,dataEndIndex:j})}}),Qt(C,"handleMouseEnter",function(O){var A=C.getMouseInfo(O);if(A){var j=We(We({},A),{},{isTooltipActive:!0});C.setState(j),C.triggerSyncEvent(j);var k=C.props.onMouseEnter;rr(k)&&k(j,O)}}),Qt(C,"triggeredAfterMouseMove",function(O){var A=C.getMouseInfo(O),j=A?We(We({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(j),C.triggerSyncEvent(j);var k=C.props.onMouseMove;rr(k)&&k(j,O)}),Qt(C,"handleItemMouseEnter",function(O){C.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),Qt(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),Qt(C,"handleMouseMove",function(O){O.persist(),C.throttleTriggeredAfterMouseMove(O)}),Qt(C,"handleMouseLeave",function(O){C.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};C.setState(A),C.triggerSyncEvent(A);var j=C.props.onMouseLeave;rr(j)&&j(A,O)}),Qt(C,"handleOuterEvent",function(O){var A=Phe(O),j=eo(C.props,"".concat(A));if(A&&rr(j)){var k,z;/.*touch.*/i.test(A)?z=C.getMouseInfo(O.changedTouches[0]):z=C.getMouseInfo(O),j((k=z)!==null&&k!==void 0?k:{},O)}}),Qt(C,"handleClick",function(O){var A=C.getMouseInfo(O);if(A){var j=We(We({},A),{},{isTooltipActive:!0});C.setState(j),C.triggerSyncEvent(j);var k=C.props.onClick;rr(k)&&k(j,O)}}),Qt(C,"handleMouseDown",function(O){var A=C.props.onMouseDown;if(rr(A)){var j=C.getMouseInfo(O);A(j,O)}}),Qt(C,"handleMouseUp",function(O){var A=C.props.onMouseUp;if(rr(A)){var j=C.getMouseInfo(O);A(j,O)}}),Qt(C,"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),Qt(C,"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&C.handleMouseDown(O.changedTouches[0])}),Qt(C,"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&C.handleMouseUp(O.changedTouches[0])}),Qt(C,"handleDoubleClick",function(O){var A=C.props.onDoubleClick;if(rr(A)){var j=C.getMouseInfo(O);A(j,O)}}),Qt(C,"handleContextMenu",function(O){var A=C.props.onContextMenu;if(rr(A)){var j=C.getMouseInfo(O);A(j,O)}}),Qt(C,"triggerSyncEvent",function(O){C.props.syncId!==void 0&&DN.emit(LN,C.props.syncId,O,C.eventEmitterSymbol)}),Qt(C,"applySyncEvent",function(O){var A=C.props,j=A.layout,k=A.syncMethod,z=C.state.updateId,D=O.dataStartIndex,$=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)C.setState(We({dataStartIndex:D,dataEndIndex:$},x({props:C.props,dataStartIndex:D,dataEndIndex:$,updateId:z},C.state)));else if(O.activeTooltipIndex!==void 0){var B=O.chartX,G=O.chartY,K=O.activeTooltipIndex,H=C.state,J=H.offset,ae=H.tooltipTicks;if(!J)return;if(typeof k=="function")K=k(ae,O);else if(k==="value"){K=-1;for(var he=0;he<ae.length;he++)if(ae[he].value===O.activeLabel){K=he;break}}var fe=We(We({},J),{},{x:J.left,y:J.top}),Y=Math.min(B,fe.x+fe.width),ne=Math.min(G,fe.y+fe.height),re=ae[K]&&ae[K].value,ye=bj(C.state,C.props.data,K),Te=ae[K]?{x:j==="horizontal"?ae[K].coordinate:Y,y:j==="horizontal"?ne:ae[K].coordinate}:cX;C.setState(We(We({},O),{},{activeLabel:re,activeCoordinate:Te,activePayload:ye,activeTooltipIndex:K}))}else C.setState(O)}),Qt(C,"renderCursor",function(O){var A,j=C.state,k=j.isTooltipActive,z=j.activeCoordinate,D=j.activePayload,$=j.offset,B=j.activeTooltipIndex,G=j.tooltipAxisBandSize,K=C.getTooltipEventType(),H=(A=O.props.active)!==null&&A!==void 0?A:k,J=C.props.layout,ae=O.key||"_recharts-cursor";return se.createElement(u_e,{key:ae,activeCoordinate:z,activePayload:D,activeTooltipIndex:B,chartName:r,element:O,isActive:H,layout:J,offset:$,tooltipAxisBandSize:G,tooltipEventType:K})}),Qt(C,"renderPolarAxis",function(O,A,j){var k=eo(O,"type.axisType"),z=eo(C.state,"".concat(k,"Map")),D=O.type.defaultProps,$=D!==void 0?We(We({},D),O.props):O.props,B=z&&z[$["".concat(k,"Id")]];return T.cloneElement(O,We(We({},B),{},{className:pr(k,B.className),key:O.key||"".concat(A,"-").concat(j),ticks:Wl(B,!0)}))}),Qt(C,"renderPolarGrid",function(O){var A=O.props,j=A.radialLines,k=A.polarAngles,z=A.polarRadius,D=C.state,$=D.radiusAxisMap,B=D.angleAxisMap,G=cu($),K=cu(B),H=K.cx,J=K.cy,ae=K.innerRadius,he=K.outerRadius;return T.cloneElement(O,{polarAngles:Array.isArray(k)?k:Wl(K,!0).map(function(fe){return fe.coordinate}),polarRadius:Array.isArray(z)?z:Wl(G,!0).map(function(fe){return fe.coordinate}),cx:H,cy:J,innerRadius:ae,outerRadius:he,key:O.key||"polar-grid",radialLines:j})}),Qt(C,"renderLegend",function(){var O=C.state.formattedGraphicalItems,A=C.props,j=A.children,k=A.width,z=A.height,D=C.props.margin||{},$=k-(D.left||0)-(D.right||0),B=zK({children:j,formattedGraphicalItems:O,legendWidth:$,legendContent:h});if(!B)return null;var G=B.item,K=pz(B,d_e);return T.cloneElement(G,We(We({},K),{},{chartWidth:k,chartHeight:z,margin:D,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),Qt(C,"renderTooltip",function(){var O,A=C.props,j=A.children,k=A.accessibilityLayer,z=_s(j,zo);if(!z)return null;var D=C.state,$=D.isTooltipActive,B=D.activeCoordinate,G=D.activePayload,K=D.activeLabel,H=D.offset,J=(O=z.props.active)!==null&&O!==void 0?O:$;return T.cloneElement(z,{viewBox:We(We({},H),{},{x:H.left,y:H.top}),active:J,label:K,payload:J?G:[],coordinate:B,accessibilityLayer:k})}),Qt(C,"renderBrush",function(O){var A=C.props,j=A.margin,k=A.data,z=C.state,D=z.offset,$=z.dataStartIndex,B=z.dataEndIndex,G=z.updateId;return T.cloneElement(O,{key:O.key||"_recharts-brush",onChange:Dx(C.handleBrushChange,O.props.onChange),data:k,x:xt(O.props.x)?O.props.x:D.left,y:xt(O.props.y)?O.props.y:D.top+D.height+D.brushBottom-(j.bottom||0),width:xt(O.props.width)?O.props.width:D.width,startIndex:$,endIndex:B,updateId:"brush-".concat(G)})}),Qt(C,"renderReferenceElement",function(O,A,j){if(!O)return null;var k=C,z=k.clipPathId,D=C.state,$=D.xAxisMap,B=D.yAxisMap,G=D.offset,K=O.type.defaultProps||{},H=O.props,J=H.xAxisId,ae=J===void 0?K.xAxisId:J,he=H.yAxisId,fe=he===void 0?K.yAxisId:he;return T.cloneElement(O,{key:O.key||"".concat(A,"-").concat(j),xAxis:$[ae],yAxis:B[fe],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:z})}),Qt(C,"renderActivePoints",function(O){var A=O.item,j=O.activePoint,k=O.basePoint,z=O.childIndex,D=O.isRange,$=[],B=A.props.key,G=A.item.type.defaultProps!==void 0?We(We({},A.item.type.defaultProps),A.item.props):A.item.props,K=G.activeDot,H=G.dataKey,J=We(We({index:z,dataKey:H,cx:j.x,cy:j.y,r:4,fill:y7(A.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},Ft(K,!1)),rb(K));return $.push(E.renderActiveDot(K,J,"".concat(B,"-activePoint-").concat(z))),k?$.push(E.renderActiveDot(K,We(We({},J),{},{cx:k.x,cy:k.y}),"".concat(B,"-basePoint-").concat(z))):D&&$.push(null),$}),Qt(C,"renderGraphicChild",function(O,A,j){var k=C.filterFormatItem(O,A,j);if(!k)return null;var z=C.getTooltipEventType(),D=C.state,$=D.isTooltipActive,B=D.tooltipAxis,G=D.activeTooltipIndex,K=D.activeLabel,H=C.props.children,J=_s(H,zo),ae=k.props,he=ae.points,fe=ae.isRange,Y=ae.baseLine,ne=k.item.type.defaultProps!==void 0?We(We({},k.item.type.defaultProps),k.item.props):k.item.props,re=ne.activeDot,ye=ne.hide,Te=ne.activeBar,Ve=ne.activeShape,Je=!!(!ye&&$&&J&&(re||Te||Ve)),Xe={};z!=="axis"&&J&&J.props.trigger==="click"?Xe={onClick:Dx(C.handleItemMouseEnter,O.props.onClick)}:z!=="axis"&&(Xe={onMouseLeave:Dx(C.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:Dx(C.handleItemMouseEnter,O.props.onMouseEnter)});var ie=T.cloneElement(O,We(We({},k.props),Xe));function Be(et){return typeof B.dataKey=="function"?B.dataKey(et.payload):null}if(Je)if(G>=0){var Q,te;if(B.dataKey&&!B.allowDuplicatedCategory){var _e=typeof B.dataKey=="function"?Be:"payload.".concat(B.dataKey.toString());Q=tb(he,_e,K),te=fe&&Y&&tb(Y,_e,K)}else Q=he==null?void 0:he[G],te=fe&&Y&&Y[G];if(Ve||Te){var Se=O.props.activeIndex!==void 0?O.props.activeIndex:G;return[T.cloneElement(O,We(We(We({},k.props),Xe),{},{activeIndex:Se})),null,null]}if(!ur(Q))return[ie].concat(Cf(C.renderActivePoints({item:k,activePoint:Q,basePoint:te,childIndex:G,isRange:fe})))}else{var Qe,nt=(Qe=C.getItemByXY(C.state.activeCoordinate))!==null&&Qe!==void 0?Qe:{graphicalItem:ie},Ot=nt.graphicalItem,Me=Ot.item,lt=Me===void 0?O:Me,St=Ot.childIndex,vt=We(We(We({},k.props),Xe),{},{activeIndex:St});return[T.cloneElement(lt,vt),null,null]}return fe?[ie,null,null]:[ie,null]}),Qt(C,"renderCustomized",function(O,A,j){return T.cloneElement(O,We(We({key:"recharts-customized-".concat(j)},C.props),C.state))}),Qt(C,"renderMap",{CartesianGrid:{handler:zx,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:zx},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:zx},YAxis:{handler:zx},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((R=I.id)!==null&&R!==void 0?R:N1("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=UW(C.triggeredAfterMouseMove,(L=I.throttleDelay)!==null&&L!==void 0?L:1e3/60),C.state={},C}return __e(E,w),v_e(E,[{key:"componentDidMount",value:function(){var R,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var R=this.props,L=R.children,C=R.data,O=R.height,A=R.layout,j=_s(L,zo);if(j){var k=j.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,D=bj(this.state,C,k,z),$=this.state.tooltipTicks[k].coordinate,B=(this.state.offset.top+O)/2,G=A==="horizontal",K=G?{x:$,y:B}:{y:$,x:B},H=this.state.formattedGraphicalItems.find(function(ae){var he=ae.item;return he.type.name==="Scatter"});H&&(K=We(We({},K),H.props.points[k].tooltipPosition),D=H.props.points[k].tooltipPayload);var J={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:z,activePayload:D,activeCoordinate:K};this.setState(J),this.renderCursor(j),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(R,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==R.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==R.margin){var C,O;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(R){eA([_s(R.children,zo)],[_s(this.props.children,zo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var R=_s(this.props.children,zo);if(R&&typeof R.props.shared=="boolean"){var L=R.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(R){if(!this.container)return null;var L=this.container,C=L.getBoundingClientRect(),O=Sge(C),A={chartX:Math.round(R.pageX-O.left),chartY:Math.round(R.pageY-O.top)},j=C.width/L.offsetWidth||1,k=this.inRange(A.chartX,A.chartY,j);if(!k)return null;var z=this.state,D=z.xAxisMap,$=z.yAxisMap,B=this.getTooltipEventType(),G=gz(this.state,this.props.data,this.props.layout,k);if(B!=="axis"&&D&&$){var K=cu(D).scale,H=cu($).scale,J=K&&K.invert?K.invert(A.chartX):null,ae=H&&H.invert?H.invert(A.chartY):null;return We(We({},A),{},{xValue:J,yValue:ae},G)}return G?We(We({},A),G):null}},{key:"inRange",value:function(R,L){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,A=R/C,j=L/C;if(O==="horizontal"||O==="vertical"){var k=this.state.offset,z=A>=k.left&&A<=k.left+k.width&&j>=k.top&&j<=k.top+k.height;return z?{x:A,y:j}:null}var D=this.state,$=D.angleAxisMap,B=D.radiusAxisMap;if($&&B){var G=cu($);return v$({x:A,y:j},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var R=this.props.children,L=this.getTooltipEventType(),C=_s(R,zo),O={};C&&L==="axis"&&(C.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=rb(this.props,this.handleOuterEvent);return We(We({},A),O)}},{key:"addListener",value:function(){DN.on(LN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){DN.removeListener(LN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(R,L,C){for(var O=this.state.formattedGraphicalItems,A=0,j=O.length;A<j;A++){var k=O[A];if(k.item===R||k.props.key===R.key||L===Yl(k.item.type)&&C===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var R=this.clipPathId,L=this.state.offset,C=L.left,O=L.top,A=L.height,j=L.width;return se.createElement("defs",null,se.createElement("clipPath",{id:R},se.createElement("rect",{x:C,y:O,height:A,width:j})))}},{key:"getXScales",value:function(){var R=this.state.xAxisMap;return R?Object.entries(R).reduce(function(L,C){var O=fz(C,2),A=O[0],j=O[1];return We(We({},L),{},Qt({},A,j.scale))},{}):null}},{key:"getYScales",value:function(){var R=this.state.yAxisMap;return R?Object.entries(R).reduce(function(L,C){var O=fz(C,2),A=O[0],j=O[1];return We(We({},L),{},Qt({},A,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(R){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[R])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(R){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[R])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(R){var L=this.state,C=L.formattedGraphicalItems,O=L.activeItem;if(C&&C.length)for(var A=0,j=C.length;A<j;A++){var k=C[A],z=k.props,D=k.item,$=D.type.defaultProps!==void 0?We(We({},D.type.defaultProps),D.props):D.props,B=Yl(D.type);if(B==="Bar"){var G=(z.data||[]).find(function(ae){return Fwe(R,ae)});if(G)return{graphicalItem:k,payload:G}}else if(B==="RadialBar"){var K=(z.data||[]).find(function(ae){return v$(R,ae)});if(K)return{graphicalItem:k,payload:K}}else if(Nw(k,O)||Tw(k,O)||$g(k,O)){var H=S5e({graphicalItem:k,activeTooltipItem:O,itemData:$.data}),J=$.activeIndex===void 0?H:$.activeIndex;return{graphicalItem:We(We({},k),{},{childIndex:J}),payload:$g(k,O)?$.data[H]:k.props.data[H]}}}return null}},{key:"render",value:function(){var R=this;if(!CP(this))return null;var L=this.props,C=L.children,O=L.className,A=L.width,j=L.height,k=L.style,z=L.compact,D=L.title,$=L.desc,B=pz(L,h_e),G=Ft(B,!1);if(z)return se.createElement(QU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(rA,Nh({},G,{width:A,height:j,title:D,desc:$}),this.renderClipPath(),IP(C,this.renderMap)));if(this.props.accessibilityLayer){var K,H;G.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,G.role=(H=this.props.role)!==null&&H!==void 0?H:"application",G.onKeyDown=function(ae){R.accessibilityManager.keyboardEvent(ae)},G.onFocus=function(){R.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return se.createElement(QU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",Nh({className:pr("recharts-wrapper",O),style:We({position:"relative",cursor:"default",width:A,height:j},k)},J,{ref:function(he){R.container=he}}),se.createElement(rA,Nh({},G,{width:A,height:j,title:D,desc:$,style:k_e}),this.renderClipPath(),IP(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(T.Component);Qt(_,"displayName",r),Qt(_,"defaultProps",We({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Qt(_,"getDerivedStateFromProps",function(w,E){var I=w.dataKey,R=w.data,L=w.children,C=w.width,O=w.height,A=w.layout,j=w.stackOffset,k=w.margin,z=E.dataStartIndex,D=E.dataEndIndex;if(E.updateId===void 0){var $=yz(w);return We(We(We({},$),{},{updateId:0},x(We(We({props:w},$),{},{updateId:0}),E)),{},{prevDataKey:I,prevData:R,prevWidth:C,prevHeight:O,prevLayout:A,prevStackOffset:j,prevMargin:k,prevChildren:L})}if(I!==E.prevDataKey||R!==E.prevData||C!==E.prevWidth||O!==E.prevHeight||A!==E.prevLayout||j!==E.prevStackOffset||!Mh(k,E.prevMargin)){var B=yz(w),G={chartX:E.chartX,chartY:E.chartY,isTooltipActive:E.isTooltipActive},K=We(We({},gz(E,R,A)),{},{updateId:E.updateId+1}),H=We(We(We({},B),G),K);return We(We(We({},H),x(We({props:w},H),E)),{},{prevDataKey:I,prevData:R,prevWidth:C,prevHeight:O,prevLayout:A,prevStackOffset:j,prevMargin:k,prevChildren:L})}if(!eA(L,E.prevChildren)){var J,ae,he,fe,Y=_s(L,vf),ne=Y&&(J=(ae=Y.props)===null||ae===void 0?void 0:ae.startIndex)!==null&&J!==void 0?J:z,re=Y&&(he=(fe=Y.props)===null||fe===void 0?void 0:fe.endIndex)!==null&&he!==void 0?he:D,ye=ne!==z||re!==D,Te=!ur(R),Ve=Te&&!ye?E.updateId:E.updateId+1;return We(We({updateId:Ve},x(We(We({props:w},E),{},{updateId:Ve,dataStartIndex:ne,dataEndIndex:re}),E)),{},{prevChildren:L,dataStartIndex:ne,dataEndIndex:re})}return null}),Qt(_,"renderActiveDot",function(w,E,I){var R;return T.isValidElement(w)?R=T.cloneElement(w,E):rr(w)?R=w(E):R=se.createElement(ww,E),se.createElement(qr,{className:"recharts-active-dot",key:I},R)});var S=T.forwardRef(function(E,I){return se.createElement(_,Nh({},E,{ref:I}))});return S.displayName=_.displayName,S},$_e=dX({chartName:"RadarChart",GraphicalChild:M1,axisComponents:[{axisType:"angleAxis",AxisComp:R1},{axisType:"radiusAxis",AxisComp:I1}],formatAxisMap:tbe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),U_e=dX({chartName:"ScatterChart",GraphicalChild:D1,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Iw},{axisType:"yAxis",AxisComp:Rw},{axisType:"zAxis",AxisComp:Ow}],formatAxisMap:I3e});const Pw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Kf(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function E7(t){return"nodeType"in t}function Ui(t){var e,r;return t?Kf(t)?t:E7(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function k7(t){const{Document:e}=Ui(t);return t instanceof e}function L1(t){return Kf(t)?!1:t instanceof Ui(t).HTMLElement}function hX(t){return t instanceof Ui(t).SVGElement}function Qf(t){return t?Kf(t)?t.document:E7(t)?k7(t)?t:L1(t)||hX(t)?t.ownerDocument:document:document:document}const hc=Pw?T.useLayoutEffect:T.useEffect;function Dw(t){const e=T.useRef(t);return hc(()=>{e.current=t}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function z_e(){const t=T.useRef(null),e=T.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Gg(t,e){e===void 0&&(e=[t]);const r=T.useRef(t);return hc(()=>{r.current!==t&&(r.current=t)},e),r}function B1(t,e){const r=T.useRef();return T.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function r2(t){const e=Dw(t),r=T.useRef(null),n=T.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function n2(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let $N={};function Lw(t,e){return T.useMemo(()=>{if(e)return e;const r=$N[t]==null?0:$N[t]+1;return $N[t]=r,t+"-"+r},[t,e])}function fX(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const c=Object.entries(o);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const Bh=fX(1),a2=fX(-1);function V_e(t){return"clientX"in t&&"clientY"in t}function C7(t){if(!t)return!1;const{KeyboardEvent:e}=Ui(t.target);return e&&t instanceof e}function F_e(t){if(!t)return!1;const{TouchEvent:e}=Ui(t.target);return e&&t instanceof e}function Wg(t){if(F_e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return V_e(t)?{x:t.clientX,y:t.clientY}:null}const Kg=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Kg.Translate.toString(t),Kg.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),vz="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function q_e(t){return t.matches(vz)?t:t.querySelector(vz)}const H_e={display:"none"};function G_e(t){let{id:e,value:r}=t;return se.createElement("div",{id:e,style:H_e},r)}function W_e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return se.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function K_e(){const[t,e]=T.useState("");return{announce:T.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const pX=T.createContext(null);function Q_e(t){const e=T.useContext(pX);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function X_e(){const[t]=T.useState(()=>new Set),e=T.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[T.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[t]),e]}const Y_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Z_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function J_e(t){let{announcements:e=Z_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=Y_e}=t;const{announce:i,announcement:o}=K_e(),c=Lw("DndLiveRegion"),[d,h]=T.useState(!1);if(T.useEffect(()=>{h(!0)},[]),Q_e(T.useMemo(()=>({onDragStart(m){let{active:y}=m;i(e.onDragStart({active:y}))},onDragMove(m){let{active:y,over:x}=m;e.onDragMove&&i(e.onDragMove({active:y,over:x}))},onDragOver(m){let{active:y,over:x}=m;i(e.onDragOver({active:y,over:x}))},onDragEnd(m){let{active:y,over:x}=m;i(e.onDragEnd({active:y,over:x}))},onDragCancel(m){let{active:y,over:x}=m;i(e.onDragCancel({active:y,over:x}))}}),[i,e])),!d)return null;const p=se.createElement(se.Fragment,null,se.createElement(G_e,{id:n,value:a.draggable}),se.createElement(W_e,{id:c,announcement:o}));return r?du.createPortal(p,r):p}var $a;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})($a||($a={}));function i2(){}function bz(t,e){return T.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function eNe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return T.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const jo=Object.freeze({x:0,y:0});function tNe(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function rNe(t,e){const r=Wg(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function nNe(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function aNe(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function iNe(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function wz(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const sNe=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=wz(e,e.left,e.top),i=[];for(const o of n){const{id:c}=o,d=r.get(c);if(d){const h=tNe(wz(d),a);i.push({id:c,data:{droppableContainer:o,value:h}})}}return i.sort(nNe)};function oNe(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=o*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const lNe=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,c=r.get(o);if(c){const d=oNe(c,e);d>0&&a.push({id:o,data:{droppableContainer:i,value:d}})}}return a.sort(aNe)};function cNe(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function mX(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:jo}function uNe(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const dNe=uNe(1);function gX(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function hNe(t,e,r){const n=gX(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:c}=n,d=t.left-o-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const fNe={ignoreTransform:!1};function $1(t,e){e===void 0&&(e=fNe);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Ui(t).getComputedStyle(t);h&&(r=hNe(r,h,p))}const{top:n,left:a,width:i,height:o,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:o,bottom:c,right:d}}function Sz(t){return $1(t,{ignoreTransform:!0})}function pNe(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function mNe(t,e){return e===void 0&&(e=Ui(t).getComputedStyle(t)),e.position==="fixed"}function gNe(t,e){e===void 0&&(e=Ui(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function O7(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(k7(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!L1(a)||hX(a)||r.includes(a))return r;const i=Ui(t).getComputedStyle(a);return a!==t&&gNe(a,i)&&r.push(a),mNe(a,i)?r:n(a.parentNode)}return t?n(t):r}function yX(t){const[e]=O7(t,1);return e??null}function UN(t){return!Pw||!t?null:Kf(t)?t:E7(t)?k7(t)||t===Qf(t).scrollingElement?window:L1(t)?t:null:null}function xX(t){return Kf(t)?t.scrollX:t.scrollLeft}function vX(t){return Kf(t)?t.scrollY:t.scrollTop}function wj(t){return{x:xX(t),y:vX(t)}}var Ja;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ja||(Ja={}));function bX(t){return!Pw||!t?!1:t===document.scrollingElement}function wX(t){const e={x:0,y:0},r=bX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const yNe={x:.2,y:.2};function xNe(t,e,r,n,a){let{top:i,left:o,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=yNe);const{isTop:h,isBottom:p,isLeft:m,isRight:y}=wX(t),x={x:0,y:0},_={x:0,y:0},S={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+S.height?(x.y=Ja.Backward,_.y=n*Math.abs((e.top+S.height-i)/S.height)):!p&&d>=e.bottom-S.height&&(x.y=Ja.Forward,_.y=n*Math.abs((e.bottom-S.height-d)/S.height)),!y&&c>=e.right-S.width?(x.x=Ja.Forward,_.x=n*Math.abs((e.right-S.width-c)/S.width)):!m&&o<=e.left+S.width&&(x.x=Ja.Backward,_.x=n*Math.abs((e.left+S.width-o)/S.width)),{direction:x,speed:_}}function vNe(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function SX(t){return t.reduce((e,r)=>Bh(e,wj(r)),jo)}function bNe(t){return t.reduce((e,r)=>e+xX(r),0)}function wNe(t){return t.reduce((e,r)=>e+vX(r),0)}function _X(t,e){if(e===void 0&&(e=$1),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);yX(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const SNe=[["x",["left","right"],bNe],["y",["top","bottom"],wNe]];class I7{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=O7(r),a=SX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,c]of SNe)for(const d of o)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Dm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function _Ne(t){const{EventTarget:e}=Ui(t);return t instanceof e?t:Qf(t)}function zN(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Xs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Xs||(Xs={}));function _z(t){t.preventDefault()}function NNe(t){t.stopPropagation()}var An;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(An||(An={}));const NX={start:[An.Space,An.Enter],cancel:[An.Esc],end:[An.Space,An.Enter,An.Tab]},TNe=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case An.Right:return{...r,x:r.x+25};case An.Left:return{...r,x:r.x-25};case An.Down:return{...r,y:r.y+25};case An.Up:return{...r,y:r.y-25}}};class TX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Dm(Qf(r)),this.windowListeners=new Dm(Ui(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xs.Resize,this.handleCancel),this.windowListeners.add(Xs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&_X(n),r(jo)}handleKeyDown(e){if(C7(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=NX,coordinateGetter:o=TNe,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:jo;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:r,context:n.current,currentCoordinates:p});if(m){const y=a2(m,p),x={x:0,y:0},{scrollableAncestors:_}=n.current;for(const S of _){const w=e.code,{isTop:E,isRight:I,isLeft:R,isBottom:L,maxScroll:C,minScroll:O}=wX(S),A=vNe(S),j={x:Math.min(w===An.Right?A.right-A.width/2:A.right,Math.max(w===An.Right?A.left:A.left+A.width/2,m.x)),y:Math.min(w===An.Down?A.bottom-A.height/2:A.bottom,Math.max(w===An.Down?A.top:A.top+A.height/2,m.y))},k=w===An.Right&&!I||w===An.Left&&!R,z=w===An.Down&&!L||w===An.Up&&!E;if(k&&j.x!==m.x){const D=S.scrollLeft+y.x,$=w===An.Right&&D<=C.x||w===An.Left&&D>=O.x;if($&&!y.y){S.scrollTo({left:D,behavior:c});return}$?x.x=S.scrollLeft-D:x.x=w===An.Right?S.scrollLeft-C.x:S.scrollLeft-O.x,x.x&&S.scrollBy({left:-x.x,behavior:c});break}else if(z&&j.y!==m.y){const D=S.scrollTop+y.y,$=w===An.Down&&D<=C.y||w===An.Up&&D>=O.y;if($&&!y.x){S.scrollTo({top:D,behavior:c});return}$?x.y=S.scrollTop-D:x.y=w===An.Down?S.scrollTop-C.y:S.scrollTop-O.y,x.y&&S.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(e,Bh(a2(m,this.referenceCoordinates),x))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}TX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=NX,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function Nz(t){return!!(t&&"distance"in t)}function Tz(t){return!!(t&&"delay"in t)}class R7{constructor(e,r,n){var a;n===void 0&&(n=_Ne(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=Qf(o),this.documentListeners=new Dm(this.document),this.listeners=new Dm(n),this.windowListeners=new Dm(Ui(o)),this.initialCoordinates=(a=Wg(i))!=null?a:jo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Xs.Resize,this.handleCancel),this.windowListeners.add(Xs.DragStart,_z),this.windowListeners.add(Xs.VisibilityChange,this.handleCancel),this.windowListeners.add(Xs.ContextMenu,_z),this.documentListeners.add(Xs.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Tz(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Nz(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Xs.Click,NNe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xs.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=Wg(e))!=null?r:jo,h=a2(a,d);if(!n&&c){if(Nz(c)){if(c.tolerance!=null&&zN(h,c.tolerance))return this.handleCancel();if(zN(h,c.distance))return this.handleStart()}if(Tz(c)&&zN(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===An.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const ANe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class M7 extends R7{constructor(e){const{event:r}=e,n=Qf(r.target);super(e,ANe,n)}}M7.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const jNe={move:{name:"mousemove"},end:{name:"mouseup"}};var Sj;(function(t){t[t.RightClick=2]="RightClick"})(Sj||(Sj={}));class ENe extends R7{constructor(e){super(e,jNe,Qf(e.event.target))}}ENe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===Sj.RightClick?!1:(n==null||n({event:r}),!0)}}];const VN={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class AX extends R7{constructor(e){super(e,VN)}static setup(){return window.addEventListener(VN.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(VN.move.name,e)};function e(){}}}AX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Lm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Lm||(Lm={}));var s2;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(s2||(s2={}));function kNe(t){let{acceleration:e,activator:r=Lm.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:c=s2.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:y}=t;const x=ONe({delta:m,disabled:!i}),[_,S]=z_e(),w=T.useRef({x:0,y:0}),E=T.useRef({x:0,y:0}),I=T.useMemo(()=>{switch(r){case Lm.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Lm.DraggableRect:return a}},[r,a,d]),R=T.useRef(null),L=T.useCallback(()=>{const O=R.current;if(!O)return;const A=w.current.x*E.current.x,j=w.current.y*E.current.y;O.scrollBy(A,j)},[]),C=T.useMemo(()=>c===s2.TreeOrder?[...h].reverse():h,[c,h]);T.useEffect(()=>{if(!i||!h.length||!I){S();return}for(const O of C){if((n==null?void 0:n(O))===!1)continue;const A=h.indexOf(O),j=p[A];if(!j)continue;const{direction:k,speed:z}=xNe(O,j,I,e,y);for(const D of["x","y"])x[D][k[D]]||(z[D]=0,k[D]=0);if(z.x>0||z.y>0){S(),R.current=O,_(L,o),w.current=z,E.current=k;return}}w.current={x:0,y:0},E.current={x:0,y:0},S()},[e,L,n,S,i,o,JSON.stringify(I),JSON.stringify(x),_,h,C,p,JSON.stringify(y)])}const CNe={x:{[Ja.Backward]:!1,[Ja.Forward]:!1},y:{[Ja.Backward]:!1,[Ja.Forward]:!1}};function ONe(t){let{delta:e,disabled:r}=t;const n=n2(e);return B1(a=>{if(r||!n||!a)return CNe;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ja.Backward]:a.x[Ja.Backward]||i.x===-1,[Ja.Forward]:a.x[Ja.Forward]||i.x===1},y:{[Ja.Backward]:a.y[Ja.Backward]||i.y===-1,[Ja.Forward]:a.y[Ja.Forward]||i.y===1}}},[r,e,n])}function INe(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return B1(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function RNe(t,e){return T.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var Qg;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Qg||(Qg={}));var _j;(function(t){t.Optimized="optimized"})(_j||(_j={}));const Az=new Map;function MNe(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=T.useState(null),{frequency:c,measure:d,strategy:h}=a,p=T.useRef(t),m=w(),y=Gg(m),x=T.useCallback(function(E){E===void 0&&(E=[]),!y.current&&o(I=>I===null?E:I.concat(E.filter(R=>!I.includes(R))))},[y]),_=T.useRef(null),S=B1(E=>{if(m&&!r)return Az;if(!E||E===Az||p.current!==t||i!=null){const I=new Map;for(let R of t){if(!R)continue;if(i&&i.length>0&&!i.includes(R.id)&&R.rect.current){I.set(R.id,R.rect.current);continue}const L=R.node.current,C=L?new I7(d(L),L):null;R.rect.current=C,C&&I.set(R.id,C)}return I}return E},[t,i,r,m,d]);return T.useEffect(()=>{p.current=t},[t]),T.useEffect(()=>{m||x()},[r,m]),T.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),T.useEffect(()=>{m||typeof c!="number"||_.current!==null||(_.current=setTimeout(()=>{x(),_.current=null},c))},[c,m,x,...n]),{droppableRects:S,measureDroppableContainers:x,measuringScheduled:i!=null};function w(){switch(h){case Qg.Always:return!1;case Qg.BeforeDragging:return r;default:return!r}}}function P7(t,e){return B1(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function PNe(t,e){return P7(t,e)}function DNe(t){let{callback:e,disabled:r}=t;const n=Dw(e),a=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Bw(t){let{callback:e,disabled:r}=t;const n=Dw(e),a=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function LNe(t){return new I7($1(t),t)}function jz(t,e,r){e===void 0&&(e=LNe);const[n,a]=T.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const o=DNe({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=Bw({callback:i});return hc(()=>{i(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),n}function BNe(t){const e=P7(t);return mX(t,e)}const Ez=[];function $Ne(t){const e=T.useRef(t),r=B1(n=>t?n&&n!==Ez&&t&&e.current&&t.parentNode===e.current.parentNode?n:O7(t):Ez,[t]);return T.useEffect(()=>{e.current=t},[t]),r}function UNe(t){const[e,r]=T.useState(null),n=T.useRef(t),a=T.useCallback(i=>{const o=UN(i.target);o&&r(c=>c?(c.set(o,wj(o)),new Map(c)):null)},[]);return T.useEffect(()=>{const i=n.current;if(t!==i){o(i);const c=t.map(d=>{const h=UN(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,wj(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(i)};function o(c){c.forEach(d=>{const h=UN(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Bh(i,o),jo):SX(t):jo,[t,e])}function kz(t,e){e===void 0&&(e=[]);const r=T.useRef(null);return T.useEffect(()=>{r.current=null},e),T.useEffect(()=>{const n=t!==jo;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?a2(t,r.current):jo}function zNe(t){T.useEffect(()=>{if(!Pw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function VNe(t,e){return T.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function jX(t){return T.useMemo(()=>t?pNe(t):null,[t])}const Cz=[];function FNe(t,e){e===void 0&&(e=$1);const[r]=t,n=jX(r?Ui(r):null),[a,i]=T.useState(Cz);function o(){i(()=>t.length?t.map(d=>bX(d)?n:new I7(e(d),d)):Cz)}const c=Bw({callback:o});return hc(()=>{c==null||c.disconnect(),o(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function EX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return L1(e)?e:t}function qNe(t){let{measure:e}=t;const[r,n]=T.useState(null),a=T.useCallback(h=>{for(const{target:p}of h)if(L1(p)){n(m=>{const y=e(p);return m?{...m,width:y.width,height:y.height}:y});break}},[e]),i=Bw({callback:a}),o=T.useCallback(h=>{const p=EX(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=r2(o);return T.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const HNe=[{sensor:M7,options:{}},{sensor:TX,options:{}}],GNe={current:{}},mv={draggable:{measure:Sz},droppable:{measure:Sz,strategy:Qg.WhileDragging,frequency:_j.Optimized},dragOverlay:{measure:$1}};class Bm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const WNe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Bm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:i2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:mv,measureDroppableContainers:i2,windowRect:null,measuringScheduled:!1},kX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:i2,draggableNodes:new Map,over:null,measureDroppableContainers:i2},U1=T.createContext(kX),CX=T.createContext(WNe);function KNe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Bm}}}function QNe(t,e){switch(e.type){case $a.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case $a.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case $a.DragEnd:case $a.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case $a.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Bm(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case $a.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new Bm(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case $a.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Bm(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function XNe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=T.useContext(U1),i=n2(n),o=n2(r==null?void 0:r.id);return T.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!C7(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=q_e(p);if(m){m.focus();break}}})}},[n,e,a,o,i]),null}function OX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function YNe(t){return T.useMemo(()=>({draggable:{...mv.draggable,...t==null?void 0:t.draggable},droppable:{...mv.droppable,...t==null?void 0:t.droppable},dragOverlay:{...mv.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function ZNe(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=T.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;hc(()=>{if(!o&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=mX(p,n);if(o||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=yX(h);y&&y.scrollBy({top:m.y,left:m.x})}},[e,o,c,n,r])}const $w=T.createContext({...jo,scaleX:1,scaleY:1});var ru;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ru||(ru={}));const JNe=T.memo(function(e){var r,n,a,i;let{id:o,accessibility:c,autoScroll:d=!0,children:h,sensors:p=HNe,collisionDetection:m=lNe,measuring:y,modifiers:x,..._}=e;const S=T.useReducer(QNe,void 0,KNe),[w,E]=S,[I,R]=X_e(),[L,C]=T.useState(ru.Uninitialized),O=L===ru.Initialized,{draggable:{active:A,nodes:j,translate:k},droppable:{containers:z}}=w,D=A!=null?j.get(A):null,$=T.useRef({initial:null,translated:null}),B=T.useMemo(()=>{var Gt;return A!=null?{id:A,data:(Gt=D==null?void 0:D.data)!=null?Gt:GNe,rect:$}:null},[A,D]),G=T.useRef(null),[K,H]=T.useState(null),[J,ae]=T.useState(null),he=Gg(_,Object.values(_)),fe=Lw("DndDescribedBy",o),Y=T.useMemo(()=>z.getEnabled(),[z]),ne=YNe(y),{droppableRects:re,measureDroppableContainers:ye,measuringScheduled:Te}=MNe(Y,{dragging:O,dependencies:[k.x,k.y],config:ne.droppable}),Ve=INe(j,A),Je=T.useMemo(()=>J?Wg(J):null,[J]),Xe=vr(),ie=PNe(Ve,ne.draggable.measure);ZNe({activeNode:A!=null?j.get(A):null,config:Xe.layoutShiftCompensation,initialRect:ie,measure:ne.draggable.measure});const Be=jz(Ve,ne.draggable.measure,ie),Q=jz(Ve?Ve.parentElement:null),te=T.useRef({activatorEvent:null,active:null,activeNode:Ve,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_e=z.getNodeFor((r=te.current.over)==null?void 0:r.id),Se=qNe({measure:ne.dragOverlay.measure}),Qe=(n=Se.nodeRef.current)!=null?n:Ve,nt=O?(a=Se.rect)!=null?a:Be:null,Ot=!!(Se.nodeRef.current&&Se.rect),Me=BNe(Ot?null:Be),lt=jX(Qe?Ui(Qe):null),St=$Ne(O?_e??Ve:null),vt=FNe(St),et=OX(x,{transform:{x:k.x-Me.x,y:k.y-Me.y,scaleX:1,scaleY:1},activatorEvent:J,active:B,activeNodeRect:Be,containerNodeRect:Q,draggingNodeRect:nt,over:te.current.over,overlayNodeRect:Se.rect,scrollableAncestors:St,scrollableAncestorRects:vt,windowRect:lt}),ce=Je?Bh(Je,k):null,Ue=UNe(St),Ze=kz(Ue),ht=kz(Ue,[Be]),dt=Bh(et,Ze),zt=nt?dNe(nt,et):null,tr=B&&zt?m({active:B,collisionRect:zt,droppableRects:re,droppableContainers:Y,pointerCoordinates:ce}):null,Cr=iNe(tr,"id"),[ve,st]=T.useState(null),jt=Ot?et:Bh(et,ht),Dt=cNe(jt,(i=ve==null?void 0:ve.rect)!=null?i:null,Be),$t=T.useRef(null),tt=T.useCallback((Gt,Ut)=>{let{sensor:_t,options:$r}=Ut;if(G.current==null)return;const an=j.get(G.current);if(!an)return;const Wr=Gt.nativeEvent,Ur=new _t({active:G.current,activeNode:an,event:Wr,options:$r,context:te,onAbort(cr){if(!j.get(cr))return;const{onDragAbort:fn}=he.current,kn={id:cr};fn==null||fn(kn),I({type:"onDragAbort",event:kn})},onPending(cr,ya,fn,kn){if(!j.get(cr))return;const{onDragPending:Nr}=he.current,pn={id:cr,constraint:ya,initialCoordinates:fn,offset:kn};Nr==null||Nr(pn),I({type:"onDragPending",event:pn})},onStart(cr){const ya=G.current;if(ya==null)return;const fn=j.get(ya);if(!fn)return;const{onDragStart:kn}=he.current,ni={activatorEvent:Wr,active:{id:ya,data:fn.data,rect:$}};du.unstable_batchedUpdates(()=>{kn==null||kn(ni),C(ru.Initializing),E({type:$a.DragStart,initialCoordinates:cr,active:ya}),I({type:"onDragStart",event:ni}),H($t.current),ae(Wr)})},onMove(cr){E({type:$a.DragMove,coordinates:cr})},onEnd:hn($a.DragEnd),onCancel:hn($a.DragCancel)});$t.current=Ur;function hn(cr){return async function(){const{active:fn,collisions:kn,over:ni,scrollAdjustedTranslate:Nr}=te.current;let pn=null;if(fn&&Nr){const{cancelDrop:ai}=he.current;pn={activatorEvent:Wr,active:fn,collisions:kn,delta:Nr,over:ni},cr===$a.DragEnd&&typeof ai=="function"&&await Promise.resolve(ai(pn))&&(cr=$a.DragCancel)}G.current=null,du.unstable_batchedUpdates(()=>{E({type:cr}),C(ru.Uninitialized),st(null),H(null),ae(null),$t.current=null;const ai=cr===$a.DragEnd?"onDragEnd":"onDragCancel";if(pn){const Hn=he.current[ai];Hn==null||Hn(pn),I({type:ai,event:pn})}})}}},[j]),ar=T.useCallback((Gt,Ut)=>(_t,$r)=>{const an=_t.nativeEvent,Wr=j.get($r);if(G.current!==null||!Wr||an.dndKit||an.defaultPrevented)return;const Ur={active:Wr};Gt(_t,Ut.options,Ur)===!0&&(an.dndKit={capturedBy:Ut.sensor},G.current=$r,tt(_t,Ut))},[j,tt]),br=RNe(p,ar);zNe(p),hc(()=>{Be&&L===ru.Initializing&&C(ru.Initialized)},[Be,L]),T.useEffect(()=>{const{onDragMove:Gt}=he.current,{active:Ut,activatorEvent:_t,collisions:$r,over:an}=te.current;if(!Ut||!_t)return;const Wr={active:Ut,activatorEvent:_t,collisions:$r,delta:{x:dt.x,y:dt.y},over:an};du.unstable_batchedUpdates(()=>{Gt==null||Gt(Wr),I({type:"onDragMove",event:Wr})})},[dt.x,dt.y]),T.useEffect(()=>{const{active:Gt,activatorEvent:Ut,collisions:_t,droppableContainers:$r,scrollAdjustedTranslate:an}=te.current;if(!Gt||G.current==null||!Ut||!an)return;const{onDragOver:Wr}=he.current,Ur=$r.get(Cr),hn=Ur&&Ur.rect.current?{id:Ur.id,rect:Ur.rect.current,data:Ur.data,disabled:Ur.disabled}:null,cr={active:Gt,activatorEvent:Ut,collisions:_t,delta:{x:an.x,y:an.y},over:hn};du.unstable_batchedUpdates(()=>{st(hn),Wr==null||Wr(cr),I({type:"onDragOver",event:cr})})},[Cr]),hc(()=>{te.current={activatorEvent:J,active:B,activeNode:Ve,collisionRect:zt,collisions:tr,droppableRects:re,draggableNodes:j,draggingNode:Qe,draggingNodeRect:nt,droppableContainers:z,over:ve,scrollableAncestors:St,scrollAdjustedTranslate:dt},$.current={initial:nt,translated:zt}},[B,Ve,tr,zt,j,Qe,nt,re,z,ve,St,dt]),kNe({...Xe,delta:k,draggingRect:zt,pointerCoordinates:ce,scrollableAncestors:St,scrollableAncestorRects:vt});const Br=T.useMemo(()=>({active:B,activeNode:Ve,activeNodeRect:Be,activatorEvent:J,collisions:tr,containerNodeRect:Q,dragOverlay:Se,draggableNodes:j,droppableContainers:z,droppableRects:re,over:ve,measureDroppableContainers:ye,scrollableAncestors:St,scrollableAncestorRects:vt,measuringConfiguration:ne,measuringScheduled:Te,windowRect:lt}),[B,Ve,Be,J,tr,Q,Se,j,z,re,ve,ye,St,vt,ne,Te,lt]),dn=T.useMemo(()=>({activatorEvent:J,activators:br,active:B,activeNodeRect:Be,ariaDescribedById:{draggable:fe},dispatch:E,draggableNodes:j,over:ve,measureDroppableContainers:ye}),[J,br,B,Be,E,fe,j,ve,ye]);return se.createElement(pX.Provider,{value:R},se.createElement(U1.Provider,{value:dn},se.createElement(CX.Provider,{value:Br},se.createElement($w.Provider,{value:Dt},h)),se.createElement(XNe,{disabled:(c==null?void 0:c.restoreFocus)===!1})),se.createElement(J_e,{...c,hiddenTextDescribedById:fe}));function vr(){const Gt=(K==null?void 0:K.autoScrollEnabled)===!1,Ut=typeof d=="object"?d.enabled===!1:d===!1,_t=O&&!Gt&&!Ut;return typeof d=="object"?{...d,enabled:_t}:{enabled:_t}}}),eTe=T.createContext(null),Oz="button",tTe="Draggable";function IX(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Lw(tTe),{activators:o,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:y}=T.useContext(U1),{role:x=Oz,roleDescription:_="draggable",tabIndex:S=0}=a??{},w=(d==null?void 0:d.id)===e,E=T.useContext(w?$w:eTe),[I,R]=r2(),[L,C]=r2(),O=VNe(o,e),A=Gg(r);hc(()=>(m.set(e,{id:e,key:i,node:I,activatorNode:L,data:A}),()=>{const k=m.get(e);k&&k.key===i&&m.delete(e)}),[m,e]);const j=T.useMemo(()=>({role:x,tabIndex:S,"aria-disabled":n,"aria-pressed":w&&x===Oz?!0:void 0,"aria-roledescription":_,"aria-describedby":p.draggable}),[n,x,S,w,_,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:j,isDragging:w,listeners:n?void 0:O,node:I,over:y,setNodeRef:R,setActivatorNodeRef:C,transform:E}}function rTe(){return T.useContext(CX)}const nTe="Droppable",aTe={timeout:25};function D7(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Lw(nTe),{active:o,dispatch:c,over:d,measureDroppableContainers:h}=T.useContext(U1),p=T.useRef({disabled:r}),m=T.useRef(!1),y=T.useRef(null),x=T.useRef(null),{disabled:_,updateMeasurementsFor:S,timeout:w}={...aTe,...a},E=Gg(S??n),I=T.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),x.current=null},w)},[w]),R=Bw({callback:I,disabled:_||!o}),L=T.useCallback((j,k)=>{R&&(k&&(R.unobserve(k),m.current=!1),j&&R.observe(j))},[R]),[C,O]=r2(L),A=Gg(e);return T.useEffect(()=>{!R||!C.current||(R.disconnect(),m.current=!1,R.observe(C.current))},[C,R]),T.useEffect(()=>(c({type:$a.RegisterDroppable,element:{id:n,key:i,disabled:r,node:C,rect:y,data:A}}),()=>c({type:$a.UnregisterDroppable,key:i,id:n})),[n]),T.useEffect(()=>{r!==p.current.disabled&&(c({type:$a.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:o,rect:y,isOver:(d==null?void 0:d.id)===n,node:C,over:d,setNodeRef:O}}function iTe(t){let{animation:e,children:r}=t;const[n,a]=T.useState(null),[i,o]=T.useState(null),c=n2(r);return!r&&!n&&c&&a(c),hc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),se.createElement(se.Fragment,null,r,n?T.cloneElement(n,{ref:o}):null)}const sTe={x:0,y:0,scaleX:1,scaleY:1};function oTe(t){let{children:e}=t;return se.createElement(U1.Provider,{value:kX},se.createElement($w.Provider,{value:sTe},e))}const lTe={position:"fixed",touchAction:"none"},cTe=t=>C7(t)?"transform 250ms ease":void 0,uTe=T.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:c,style:d,transform:h,transition:p=cTe}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},y={...lTe,width:c.width,height:c.height,top:c.top,left:c.left,transform:Kg.Transform.toString(m),transformOrigin:a&&n?rNe(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return se.createElement(r,{className:o,style:y,ref:e},i)}),dTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);o!=null&&o.active&&r.node.classList.remove(o.active)}},hTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Kg.Transform.toString(e)},{transform:Kg.Transform.toString(r)}]},fTe={duration:250,easing:"ease",keyframes:hTe,sideEffects:dTe({styles:{active:{opacity:"0"}}})};function pTe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return Dw((i,o)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=EX(o);if(!h)return;const{transform:p}=Ui(o).getComputedStyle(o),m=gX(p);if(!m)return;const y=typeof e=="function"?e:mTe(e);return _X(d,a.draggable.measure),y({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function mTe(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...fTe,...t};return i=>{let{active:o,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},m={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...m},x=a({...h,active:o,dragOverlay:c,transform:{initial:d,final:y}}),[_]=x,S=x[x.length-1];if(JSON.stringify(_)===JSON.stringify(S))return;const w=n==null?void 0:n({active:o,dragOverlay:c,...h}),E=c.node.animate(x,{duration:e,easing:r,fill:"forwards"});return new Promise(I=>{E.onfinish=()=>{w==null||w(),I()}})}}let Iz=0;function gTe(t){return T.useMemo(()=>{if(t!=null)return Iz++,Iz},[t])}const yTe=se.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:x,draggableNodes:_,droppableContainers:S,dragOverlay:w,over:E,measuringConfiguration:I,scrollableAncestors:R,scrollableAncestorRects:L,windowRect:C}=rTe(),O=T.useContext($w),A=gTe(m==null?void 0:m.id),j=OX(o,{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:x,draggingNodeRect:w.rect,over:E,overlayNodeRect:w.rect,scrollableAncestors:R,scrollableAncestorRects:L,transform:O,windowRect:C}),k=P7(y),z=pTe({config:n,draggableNodes:_,droppableContainers:S,measuringConfiguration:I}),D=k?w.setRef:void 0;return se.createElement(oTe,null,se.createElement(iTe,{animation:z},m&&A?se.createElement(uTe,{key:A,id:m.id,ref:D,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:k,style:{zIndex:h,...a},transform:j},r):null))});function Rz(t,e=800){const[r,n]=T.useState(t),a=T.useRef(t),i=T.useRef(0);return T.useEffect(()=>{const o=a.current,c=t;if(a.current=t,o===c)return;const d=performance.now(),h=c-o,p=m=>{const y=m-d,x=Math.min(y/e,1),_=1-Math.pow(1-x,3);n(Math.round(o+h*_)),x<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const RX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],MX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],xTe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],Mz={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},fh=t=>t?Mz[t.rarity]||Mz.COMMON:null,vTe=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},Xg=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,o=(e==null?void 0:e.bodyType)||"A",c=o==="B",d=o==="C",h=RX[(e==null?void 0:e.skinTone)??0],p=MX[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,y=h+"99",x=t==null?void 0:t.HEAD,_=t==null?void 0:t.CHEST,S=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,E=t==null?void 0:t.BELT,I=t==null?void 0:t.AMULET,R=T.useMemo(()=>[x,_,S,w,E,I].filter(Boolean).length,[x,_,S,w,E,I]),L=T.useMemo(()=>[x,_,S,w,E,I].some(j=>(j==null?void 0:j.rarity)==="UNIQUE"),[x,_,S,w,E,I]),C=Math.min(1,.2+R*.13),O=c?23:21,A=T.useMemo(()=>vTe(m,O),[m,O]);return s.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[s.jsxs("defs",{children:[s.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[s.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),s.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),s.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[s.jsx("stop",{offset:"0%",stopColor:h}),s.jsx("stop",{offset:"100%",stopColor:y})]}),s.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:C}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:C*.3}),s.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),s.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:p}),s.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),s.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&s.jsxs("g",{filter:"url(#av-bloom)",children:[s.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),s.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const j=fh(w);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:j.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),s.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:j.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),j.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:j.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:j.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),s.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),s.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),s.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),s.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),s.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),_&&(()=>{const j=fh(_);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:j.primary,fillOpacity:"0.3",stroke:j.primary,strokeWidth:"1",strokeOpacity:"0.6"}),s.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:j.primary,fillOpacity:"0.5",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:j.primary,fillOpacity:"0.5",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),s.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:j.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),s.jsx("circle",{cx:"100",cy:"120",r:"2",fill:j.particle,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),j.intensity>=.7&&s.jsxs("g",{children:[s.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:j.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:j.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),E?(()=>{const j=fh(E);return s.jsxs("g",{children:[s.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:j.primary,fillOpacity:"0.55",stroke:j.primary,strokeWidth:"0.8"}),s.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:j.particle,fillOpacity:"0.4"}),s.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:j.primary,fillOpacity:"0.3",stroke:j.particle,strokeWidth:"0.3"}),s.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:j.primary,fillOpacity:"0.3",stroke:j.particle,strokeWidth:"0.3"})]})})():s.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),s.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),S?(()=>{const j=fh(S);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:j.primary,fillOpacity:"0.5",stroke:j.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:j.primary,fillOpacity:"0.5",stroke:j.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:j.particle,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:j.particle,strokeWidth:"1",strokeOpacity:"0.5"}),j.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"50",cy:"168",r:"2",fill:j.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"150",cy:"168",r:"2",fill:j.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),s.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),R>0&&s.jsxs(s.Fragment,{children:[s.jsx("g",{filter:"url(#av-bloom)",children:s.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:s.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),s.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:C*.7,children:s.jsx("animate",{attributeName:"fillOpacity",values:`${C*.7};${C*.3};${C*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),R>=3&&s.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),s.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),I&&(()=>{const j=fh(I);return s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:j.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),s.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",children:s.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"97",r:"2",fill:j.particle,children:s.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),s.jsxs("g",{children:[A.back&&s.jsx("path",{d:A.back,fill:"url(#av-hair)",opacity:"0.8"}),s.jsx("ellipse",{cx:"100",cy:"50",rx:O,ry:"28",fill:"url(#av-face)",stroke:y,strokeWidth:"0.5"}),s.jsx("ellipse",{cx:100-O-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),s.jsx("ellipse",{cx:100+O+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),s.jsxs("g",{children:[s.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),s.jsx("path",{d:A.main,fill:"url(#av-hair)"}),A.accent&&s.jsx("path",{d:A.accent,fill:"url(#av-hair)",opacity:"0.9"}),x&&(()=>{const j=fh(x),k=x.visualId||"";return s.jsx("g",{filter:j.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:k.includes("helm")?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:`M${100-O-2} 28 Q100 10 ${100+O+2} 28 L${100+O+4} 62 Q100 72 ${100-O-4} 62 Z`,fill:j.primary,fillOpacity:"0.55",stroke:j.primary,strokeWidth:"1.2"}),s.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):k.includes("visor")?s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:j.primary,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:j.primary,strokeWidth:"1.5"})]}):s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:j.primary,fillOpacity:"0.7",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:j.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:j.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:j.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&s.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((j,k)=>s.jsx("polygon",{points:`${100+j},16 ${97+j},22 ${103+j},22`,fill:"#fbbf24",fillOpacity:"0.6",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+k*.2}s`,repeatCount:"indefinite"})},k))]}),L&&s.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((j,k)=>{const z=j*Math.PI/180,D=100+Math.cos(z)*50,$=145+Math.sin(z)*75;return s.jsxs("circle",{cx:D,cy:$,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-18};${$}`,dur:`${2+k*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+k*.3}s`,repeatCount:"indefinite"})]},k)})}),r>=5&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),s.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((j,k)=>{const z=k*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),D=100+Math.cos(z)*(38+k*3),$=140+Math.sin(z)*(55+k*2),B=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return s.jsxs("circle",{cx:D,cy:$,r:"1",fill:B,fillOpacity:"0.35",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-12};${$}`,dur:`${2+k*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+k*.4}s`,repeatCount:"indefinite"})]},k)})}),n&&a&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((j,k)=>{const z=60+Math.random()*80,D=20+Math.random()*260;return s.jsxs("circle",{cx:z,cy:D,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[s.jsx("animate",{attributeName:"cy",values:`${D};${D-25};${D}`,dur:`${3+k*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+k*.5}s`,repeatCount:"indefinite"})]},`c-${k}`)})})]})]})},L7=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],bTe=t=>L7.filter(e=>!e.isSecret||t.includes(e.id)),Vx={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},PX=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],Pz=(t,e)=>{const r=PX.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},wTe=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],DX=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of wTe){const a=n.itemIds.filter(o=>r.includes(o)).length,i=n.bonuses.filter(o=>a>=o.count).sort((o,c)=>c.count-o.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},STe=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],Dz=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],LX=t=>[...Dz].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||Dz[0],BX=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,_Te={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},NTe=({unlockedAchievements:t,achievementProgress:e})=>{const r=T.useMemo(()=>bTe(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=L7.filter(o=>!o.isSecret).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(rl,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),s.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(o=>{const c=r.filter(h=>h.category===o);if(c.length===0)return null;const d=_Te[o];return s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[s.jsx("span",{children:d.icon})," ",d.label]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,y=Math.min(100,m/h.condition.target*100);return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[s.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&s.jsx(ef,{className:"w-3 h-3 text-gray-600"})]}),s.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&s.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&s.jsxs("div",{className:"text-right shrink-0",children:[s.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&s.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},o)})]})},TTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},ATe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=T.useState(t||null),[i,o]=T.useState(null),c=qa(),{confirm:d}=ko(),h=!!t,p=n||"THEORIST",m=PX.filter(_=>_.specialization===p),y=[1,2,3,4],x=async _=>{if(!i){if(!h){const S=Vx[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${S} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${S}`,cancelLabel:"Go Back",variant:"warning"}))return}o(_);try{await Re.unlockSkill(_,p),Un.skillUnlock(),c.success("Skill unlocked!")}catch(S){c.error(S instanceof Error?S.message:"Failed to unlock")}o(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[s.jsx(Yn,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[s.jsx(Is,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),s.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",s.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[s.jsx(nn,{className:"w-4 h-4 text-green-400"}),s.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",s.jsxs("span",{className:"font-bold text-white",children:[Vx[t].icon," ",Vx[t].name]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Vx).map(([_,S])=>{const w=p===_,E=h&&t!==_;return s.jsxs("button",{onClick:()=>!E&&a(_),disabled:E,className:`p-3 rounded-xl border text-left transition-all ${w?`border-white/30 bg-gradient-to-br ${TTe[_]} bg-opacity-10`:E?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:S.icon}),s.jsx("span",{className:"font-bold text-sm text-white",children:S.name}),E&&s.jsx(ef,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:S.description}),!h&&w&&s.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},_)})}),s.jsx("div",{className:"space-y-4",children:y.map(_=>{const S=m.filter(w=>w.tier===_);return s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",_]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map(w=>{const E=r.includes(w.id),I=!E&&Pz(w.id,r)&&e>=w.cost,R=Pz(w.id,r);return s.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${E?"border-green-500/30 bg-green-500/10":I?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>I&&x(w.id),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-sm",children:w.icon}),s.jsx("span",{className:"text-xs font-bold text-white truncate",children:w.name}),E&&s.jsx(nn,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!E&&!R&&s.jsx(ef,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400",children:w.description}),!E&&s.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",w.cost," SP"]}),i===w.id&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},w.id)})})]},_)})})]})},FN=25,Fx=STe,jTe=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=T.useState(!1),[i,o]=T.useState(0),[c,d]=T.useState(null),h=T.useRef(null),p=qa(),m=new Date().toISOString().split("T")[0],y=e===m,x=!y&&t>=FN&&!n,_=async()=>{if(x){a(!0),d(null),Un.wheelSpin();try{const E=await Re.spinFortuneWheel(r),I=Fx.findIndex(C=>C.id===E.prizeId),R=360/Fx.length,L=360*5+(360-I*R-R/2);o(C=>C+L),setTimeout(()=>{Un.wheelPrize(),d(E.rewardDescription),a(!1),E.prizeType!=="NOTHING"?p.success(`You won: ${E.rewardDescription}!`):p.info(E.rewardDescription)},4e3)}catch(E){a(!1),p.error(E instanceof Error?E.message:"Spin failed")}}},S=360/Fx.length,w=140;return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",FN," Flux for a daily spin"]}),s.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[s.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),s.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:s.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Fx.map((E,I)=>{const R=(I*S-90)*(Math.PI/180),L=((I+1)*S-90)*(Math.PI/180),C=w*Math.cos(R),O=w*Math.sin(R),A=w*Math.cos(L),j=w*Math.sin(L),k=S>180?1:0,z=((I+.5)*S-90)*(Math.PI/180),D=w*.65*Math.cos(z),$=w*.65*Math.sin(z),B=(I+.5)*S;return s.jsxs("g",{children:[s.jsx("path",{d:`M0,0 L${C},${O} A${w},${w} 0 ${k},1 ${A},${j} Z`,fill:E.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),s.jsx("text",{x:D,y:$,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${B}, ${D}, ${$})`,children:E.label})]},E.id)}),s.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),s.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&s.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[s.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),s.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),s.jsx("button",{onClick:_,disabled:!x,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${x?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${FN} Flux)`})]})};function ETe(t,e){const[r,n]=T.useState(e);return T.useEffect(()=>{const a=Re.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function kTe(t){const[e,r]=T.useState([]);return T.useEffect(()=>{const n=Re.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const CTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var _;const i=ETe(t.id,t.maxHp),o=kTe(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=o.reduce((S,w)=>(S[w.userId]||(S[w.userId]={name:w.userName,total:0}),S[w.userId].total+=w.damage,S),{}),m=Object.entries(p).sort(([,S],[,w])=>w.total-S.total).slice(0,5),y=((_=p[e])==null?void 0:_.total)||0,x=(a==null?void 0:a.bossId)===t.id;return s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[x&&s.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(to,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),x&&a&&s.jsx("div",{className:"text-center animate-bounce",children:s.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),y>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx(is,{className:"w-3 h-3"}),"Your total damage: ",s.jsx("span",{className:"text-white font-bold",children:y})]}),m.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[s.jsx(ss,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([S,w],E)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:`${S===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",E+1," ",w.name]}),s.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},S))]}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Yn,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),s.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[s.jsx(Nu,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),s.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},OTe=({userId:t,userName:e,classType:r})=>{const[n,a]=T.useState([]),[i,o]=T.useState(null),[c,d]=T.useState(null),h=qa();T.useEffect(()=>{let m;try{m=Re.subscribeToBossEncounters(y=>{const x=y.filter(_=>!_.classType||_.classType===r||_.classType==="GLOBAL");a(x)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){o(m);try{const y=await Re.dealBossDamage(m,e,r||"");if(Un.bossHit(),d({bossId:m,damage:y.damageDealt,isCrit:y.isCrit}),setTimeout(()=>d(null),2e3),y.bossDefeated)Un.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const x=y.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${y.damageDealt} damage!${x} (+${y.xpEarned} XP)`)}}catch(y){h.error(y instanceof Error?y.message:"Attack failed")}o(null)}};return n.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[s.jsx(Mle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>s.jsx(CTe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},ITe=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:o,bossHpPercent:c,isCrit:d,healAmount:h,shieldBlocked:p})=>{const[m,y]=T.useState(!1),[x,_]=T.useState(!1),[S,w]=T.useState(null),[E,I]=T.useState(!1),[R,L]=T.useState(null),[C,O]=T.useState(!1),[A,j]=T.useState([]),[k,z]=T.useState(!1),D=(n==null?void 0:n.bossType)||"BRUTE",$=(n==null?void 0:n.hue)??0,B=(G,K,H)=>{const J=G==="right"?75:25,ae=Array.from({length:H},(he,fe)=>({id:Date.now()+fe,x:J+(Math.random()-.5)*20,y:30+(Math.random()-.5)*15,color:K,px:(Math.random()-.5)*60,py:-(Math.random()*40+10)}));j(he=>[...he,...ae]),setTimeout(()=>j(he=>he.filter(fe=>!ae.find(Y=>Y.id===fe.id))),1e3)};return T.useEffect(()=>{if(a==="player-attack"&&i){y(!0),w({value:i,side:"right",isCrit:d}),B("right",d?"#fbbf24":"#f59e0b",d?12:6),d&&(I(!0),z(!0),setTimeout(()=>I(!1),400),setTimeout(()=>z(!1),400));const G=setTimeout(()=>y(!1),500),K=setTimeout(()=>w(null),1200);return h&&h>0&&setTimeout(()=>{L(h),setTimeout(()=>L(null),1200)},400),()=>{clearTimeout(G),clearTimeout(K)}}else if(a==="boss-attack"){if(p){O(!0),B("left","#22d3ee",6),setTimeout(()=>O(!1),800);return}if(i&&i>0){_(!0),z(!0),B("left","#ef4444",8),w({value:i,side:"left"}),setTimeout(()=>z(!1),300);const G=setTimeout(()=>_(!1),500),K=setTimeout(()=>w(null),1200);return()=>{clearTimeout(G),clearTimeout(K)}}}},[a,i,d,h,p]),s.jsxs("div",{className:`relative w-full h-48 flex items-end justify-between px-4 overflow-hidden select-none ${k?"animate-[battleShake_0.3s_ease-in-out]":""}`,children:[E&&s.jsx("div",{className:"absolute inset-0 bg-amber-400/20 animate-[critFlash_0.4s_ease-out_forwards] z-10 pointer-events-none"}),C&&s.jsx("div",{className:"absolute left-10 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:s.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-cyan-400/60 bg-cyan-400/10 animate-[shieldPulse_0.8s_ease-out_forwards] flex items-center justify-center",children:s.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-cyan-400 fill-current",children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})})}),A.map(G=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full pointer-events-none animate-[particleBurst_1s_ease-out_forwards]",style:{left:`${G.x}%`,top:`${G.y}%`,backgroundColor:G.color,"--px":`${G.px}px`,"--py":`${G.py}px`}},G.id)),R!==null&&s.jsxs("div",{className:"absolute left-8 bottom-12 text-base font-black text-emerald-400 animate-[floatUp_1.2s_ease-out_forwards] z-10 pointer-events-none",children:["+",R," HP"]}),s.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),s.jsxs("div",{className:`relative w-24 h-36 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-10 scale-110":""} ${x?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2.5rem) scale(1.1)":void 0},children:[s.jsx(Xg,{equipped:e,appearance:t,evolutionLevel:r}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o>50?"bg-emerald-500":o>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o}%`}})})]}),s.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),m&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[s.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),s.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),s.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),s.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),x&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[s.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),s.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),S&&s.jsxs("div",{className:`absolute font-black animate-[floatUp_1.2s_ease-out_forwards] ${S.isCrit?"text-2xl":"text-xl"} ${S.side==="right"?`right-4 ${S.isCrit?"text-yellow-300":"text-amber-400"}`:"left-4 text-red-400"}`,style:{top:"10%"},children:[S.isCrit&&s.jsx("span",{className:"text-[10px] block text-center text-yellow-300 font-black tracking-widest animate-pulse",children:"CRIT!"}),"-",S.value]})]}),s.jsxs("div",{className:`relative w-28 h-40 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-10 scale-110":""} ${m?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2.5rem) scale(1.1)":m?void 0:"scaleX(-1)",...m?{}:{filter:void 0}},children:[s.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:s.jsx($G,{bossType:D,hue:$})}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),s.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes battleShake {
                    0%, 100% { transform: translate(0, 0); }
                    10% { transform: translate(-3px, -2px); }
                    20% { transform: translate(4px, 1px); }
                    30% { transform: translate(-2px, 3px); }
                    40% { transform: translate(3px, -1px); }
                    50% { transform: translate(-4px, 2px); }
                    60% { transform: translate(2px, -3px); }
                    70% { transform: translate(-1px, 2px); }
                    80% { transform: translate(3px, -2px); }
                    90% { transform: translate(-2px, 1px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
                @keyframes critFlash {
                    0% { opacity: 0.3; }
                    50% { opacity: 0.15; }
                    100% { opacity: 0; }
                }
                @keyframes shieldPulse {
                    0% { transform: scale(0.5); opacity: 0.9; }
                    50% { transform: scale(1.2); opacity: 0.6; }
                    100% { transform: scale(1.5); opacity: 0; }
                }
                @keyframes particleBurst {
                    0% { opacity: 1; transform: translate(0, 0) scale(1); }
                    100% { opacity: 0; transform: translate(var(--px, 20px), var(--py, -30px)) scale(0); }
                }
            `})]})},RTe=({bossId:t,maxEntries:e=5})=>{const[r,n]=T.useState([]),a=T.useRef(null);return T.useEffect(()=>{const i=Re.subscribeToBossQuizDamageLog(t,o=>{const c=[...o].sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime());n(c.slice(0,e))});return()=>i()},[t,e]),T.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[r.length]),r.length===0?null:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest flex items-center gap-1",children:[s.jsx(Yn,{className:"w-2.5 h-2.5"})," Live Battle Feed"]}),s.jsx("div",{ref:a,className:"max-h-24 overflow-y-auto custom-scrollbar space-y-0.5",children:r.map((i,o)=>s.jsxs("div",{className:`flex items-center gap-2 text-[10px] py-0.5 px-2 rounded-lg ${o===0?"bg-amber-500/5 animate-in fade-in slide-in-from-top-1 duration-300":"opacity-60"}`,children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-purple-500/20 flex items-center justify-center text-[8px] font-bold text-purple-400 shrink-0",children:i.userName.charAt(0)}),s.jsx("span",{className:"text-gray-400 truncate flex-1",children:i.userName}),s.jsxs("span",{className:`font-bold ${i.isCrit?"text-yellow-300":"text-amber-400"}`,children:["-",i.damage,i.isCrit?"!":""]})]},`${i.userId}-${i.timestamp}`))})]})};function MTe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function PTe(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function DTe(t,e){const r=[...t],n=MTe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function LTe(t,e){const[r,n]=T.useState(e);return T.useEffect(()=>{const a=Re.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const BTe=({modifier:t})=>{const e=tT[t.type];return e?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[s.jsx(Tu,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&s.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},$Te=({quiz:t,progress:e})=>{var m,y;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,o=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=o>0?Math.round(c/o*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx(wH,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),s.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&s.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),s.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((y=t.rewards)==null?void 0:y.flux)||0)*(a||1))," Flux"]}),a&&a>1&&s.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[s.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Um," attempts and ",zm," correct answer"]})]}):null,r&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Ih,{className:"w-3 h-3"})," Damage Dealt"]}),s.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(tl,{className:"w-3 h-3"})," Accuracy"]}),s.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",o]})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Yn,{className:"w-3 h-3"})," Critical Hits"]}),s.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(is,{className:"w-3 h-3"})," Damage Mitigated"]}),s.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(F2,{className:"w-3 h-3"})," Longest Streak"]}),s.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Oh,{className:"w-3 h-3"})," Healing Received"]}),s.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(x=>{const _=r.correctByDifficulty[x]||0,S=r.incorrectByDifficulty[x]||0,w=_+S,E=w>0?Math.round(_/w*100):0;return s.jsxs("div",{className:`rounded-lg p-2 border text-center ${x==="EASY"?"border-green-500/20 bg-green-500/5":x==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[s.jsx("div",{className:`text-[9px] font-bold uppercase ${x==="EASY"?"text-green-400":x==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:x}),s.jsxs("div",{className:"text-sm font-black text-white",children:[E,"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[_,"/",w]})]},x)})})]})},UTe=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o})=>{var Xe,ie,Be,Q;const c=LTe(t.id,t.maxHp),d=c/t.maxHp*100,h=se.useMemo(()=>DTe(t.questions,PTe(e+t.id)),[t.questions,e,t.id]),[p,m]=T.useState(null),[y,x]=T.useState(!1);T.useEffect(()=>{const te=Re.subscribeToBossQuizProgress(e,t.id,_e=>{m(_e),x(!0)});return()=>te()},[e,t.id]);const _=se.useMemo(()=>n?_E(n).maxHp:100,[n]),[S,w]=T.useState(-1),[E,I]=T.useState(-1),[R,L]=T.useState(_),[C,O]=T.useState(!1),[A,j]=T.useState(null),[k,z]=T.useState(null),[D,$]=T.useState(!1),[B,G]=T.useState("idle"),[K,H]=T.useState(void 0),[J,ae]=T.useState(!1),[he,fe]=T.useState(void 0),[Y,ne]=T.useState(!1);T.useEffect(()=>{if(y&&S===-1)if(p){const te=new Set(p.answeredQuestions||[]),_e=h.findIndex(nt=>!te.has(nt.id));w(_e===-1?h.length:_e);const Se=p.currentHp,Qe=p.maxHp>0?p.maxHp:_;L(Qe),Se>=0?(I(Se),Se===0&&O(!0)):I(Qe)}else w(0),I(_),L(_)},[y]),T.useEffect(()=>{L(_)},[_]);const re=R>0?(E===-1?R:E)/R*100:100,ye=S>=0?h[S%h.length]:void 0,Te=S>=h.length,Ve=c<=0,Je=async(te,_e,Se)=>{D||C||($(!0),j(Se),r(te,_e,Se,{onResult:Qe=>{Qe.playerHp!==void 0&&I(Qe.playerHp),Qe.playerMaxHp!==void 0&&L(Qe.playerMaxHp),Qe.knockedOut&&O(!0),Qe.correct?(H(Qe.damage),ae(!!Qe.isCrit),fe(Qe.healAmount),ne(!1),G("player-attack"),setTimeout(()=>G("idle"),800)):Qe.shieldBlocked?(H(0),ne(!0),ae(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)):Qe.playerDamage&&Qe.playerDamage>0&&(H(Qe.playerDamage),ne(!1),ae(!1),G("boss-attack"),setTimeout(()=>G("idle"),800)),z(Qe),Qe.knockedOut||setTimeout(()=>{w(nt=>nt+1),j(null),z(null)},2e3),$(!1)}}))};return s.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-amber-400",children:t.bossName}),s.jsx("p",{className:"text-sm text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!Ve&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((te,_e)=>s.jsx(BTe,{modifier:te},_e))}),Ve?s.jsx($Te,{quiz:t,progress:p}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:s.jsx(ITe,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o,bossAppearance:t.bossAppearance,attackState:B,damage:K,playerHpPercent:re,bossHpPercent:d,isCrit:J,healAmount:he,shieldBlocked:Y})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[s.jsx(Oh,{className:"w-3 h-3"})," Your HP: ",E===-1?R:E]}),s.jsx("span",{className:"text-gray-600",children:R})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${re>50?"bg-gradient-to-r from-emerald-600 to-green-500":re>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${re}%`}})})]}),C?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Iu,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):Te?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(nn,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):ye?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Question ",S+1," / ",h.length]}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ye.difficulty==="HARD"?"bg-red-500/20 text-red-400":ye.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[ye.difficulty,ye.damageBonus?` (+${ye.damageBonus} dmg)`:""]})]}),s.jsx("p",{className:"text-base text-white font-semibold leading-relaxed",children:ye.stem}),s.jsx("div",{className:"space-y-2.5",children:ye.options.map((te,_e)=>{const Se=A===_e,Qe=k&&Se,nt=k==null?void 0:k.correct;return s.jsx("button",{onClick:()=>Je(t.id,ye.id,_e),disabled:D||!!k||C,className:`w-full text-left p-4 rounded-xl border text-base transition-all ${Qe&&nt?"border-green-500/50 bg-green-500/10 text-green-400":Qe&&!nt?"border-red-500/50 bg-red-500/10 text-red-400":Se?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm font-mono text-gray-600 w-6",children:[String.fromCharCode(65+_e),"."]}),s.jsx("span",{children:te}),Qe&&nt&&s.jsx(nn,{className:"w-5 h-5 text-green-400 ml-auto shrink-0"}),Qe&&!nt&&s.jsx(Iu,{className:"w-5 h-5 text-red-400 ml-auto shrink-0"})]})},_e)})}),k&&k.correct&&s.jsxs("div",{className:"text-center space-y-1",children:[s.jsxs("div",{className:"text-base text-amber-400 font-bold animate-bounce",children:[s.jsx(Yn,{className:"w-5 h-5 inline mr-1"}),k.isCrit?"CRITICAL HIT! ":"","-",k.damage," HP to boss!"]}),k.healAmount&&k.healAmount>0&&s.jsxs("div",{className:"text-sm text-emerald-400 font-bold",children:[s.jsx(Oh,{className:"w-4 h-4 inline mr-1"})," +",k.healAmount," HP healed"]})]}),k&&!k.correct&&k.shieldBlocked&&s.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[s.jsx(is,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),k&&!k.correct&&!k.shieldBlocked&&k.playerDamage&&k.playerDamage>0&&s.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[s.jsx(Oh,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",k.playerDamage," damage!"]})]}):null,p&&!Ve&&!C&&!Te&&s.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((Xe=p.combatStats)==null?void 0:Xe.questionsAttempted)||0)<Um||(((ie=p.combatStats)==null?void 0:ie.questionsCorrect)||0)<zm?s.jsxs("span",{children:["Rewards: ",((Be=p.combatStats)==null?void 0:Be.questionsAttempted)||0,"/",Um," attempts"," ",""," ",((Q=p.combatStats)==null?void 0:Q.questionsCorrect)||0,"/",zm," correct needed"]}):s.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),s.jsx(RTe,{bossId:t.id,maxEntries:5}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsx("span",{children:"Defeat rewards:"}),s.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),s.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},zTe=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:o,playerEvolutionLevel:c})=>{const[d,h]=T.useState([]),p=qa();T.useEffect(()=>{let x;try{x=Re.subscribeToBossQuizzes(e,h)}catch{}return()=>x==null?void 0:x()},[e]);const m=d.filter(x=>{var _;if(x.scheduledAt&&new Date(x.scheduledAt)>new Date)return!1;if((_=x.targetSections)!=null&&_.length){const S=x.classType!=="GLOBAL"?x.classType:e,w=(n==null?void 0:n[S])||(n==null?void 0:n[e])||r||"";if(!x.targetSections.includes(w))return!1}return!0}),y=async(x,_,S,w)=>{try{const E=await Re.answerBossQuiz(x,_,S);E.alreadyAnswered?p.info("Already answered this question!"):E.correct?(Un.bossHit(),E.bossDefeated?(Un.bossDefeated(),p.success("Boss defeated! Completion rewards distributed to all contributors!")):E.isCrit?p.success(`CRITICAL HIT! Dealt ${E.damage} damage!`):p.success(`Correct! Dealt ${E.damage} damage!`)):E.shieldBlocked?p.info("Shield blocked the attack!"):E.playerDamage&&E.playerDamage>0?p.error(`Wrong! The boss hits you for ${E.playerDamage} damage!`):p.error("Incorrect. No damage dealt."),E.knockedOut&&Un.bossHit(),w.onResult(E)}catch(E){p.error(E instanceof Error?E.message:"Failed to submit answer"),w.onResult({correct:!1,damage:0})}};return m.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(Ao,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),m.map(x=>s.jsx(UTe,{quiz:x,userId:t,onAnswer:y,playerStats:a,playerAppearance:i,playerEquipped:o||{},playerEvolutionLevel:c||1},x.id))]})},qN={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},Lz=({value:t,onChange:e,label:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>s.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:s.jsx(x1,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),VTe=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=T.useState(0),[i,o]=T.useState(0),[c,d]=T.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return s.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[s.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),s.jsx(Lz,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),s.jsx(Lz,{value:i,onChange:o,label:h?"Tutor communication":"Student engagement"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),s.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),s.jsx("div",{className:"flex justify-between mt-1",children:s.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),s.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[s.jsx(tE,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},FTe=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(""),[p,m]=T.useState(!1),[y,x]=T.useState(null),[_,S]=T.useState(!1),w=qa();T.useEffect(()=>{let k;try{k=Re.subscribeToTutoringSessions(r,i)}catch{}return()=>k==null?void 0:k()},[r]);const E=async()=>{if(!(!d.trim()||p)){m(!0);try{await Re.createTutoringRequest(t,e,d,r),w.success("Tutoring request posted!"),h(""),c(!1)}catch{w.error("Failed to create request")}m(!1)}},I=async k=>{try{await Re.claimTutorRole(k,t,e),w.success("You are now the tutor for this session!")}catch{w.error("Failed to claim tutor role")}},R=async k=>{try{await Re.startTutoringSession(k),w.success("Session started!")}catch{w.error("Failed to start session")}},L=async(k,z)=>{S(!0);try{const D=a.find(B=>B.id===k);if(!D)throw new Error("Session not found");const $=D.requesterId===t?"requester":"tutor";await Re.submitTutoringFeedback(k,$,z),w.success("Feedback submitted! "+($==="requester"?D.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":D.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),x(null)}catch{w.error("Failed to submit feedback")}S(!1)},C=async(k,z)=>{try{const D=await Re.completeTutoring(k,z);w.success(`Verified! Tutor earned ${D.xpAwarded} XP and ${D.fluxAwarded} Flux`)}catch{w.error("Failed to verify session")}},O=a.filter(k=>k.status==="OPEN"),A=a.filter(k=>["MATCHED","IN_PROGRESS"].includes(k.status)),j=a.filter(k=>k.status==="VERIFIED");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Ru,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),s.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Ea,{className:"w-3 h-3"})," Request Help"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),o&&s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[s.jsx("input",{value:d,onChange:k=>h(k.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:E,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),s.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),O.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(mle,{className:"w-3 h-3"})," Open Requests"]}),O.map(k=>s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",k.requesterName," - ",new Date(k.createdAt).toLocaleDateString()]})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${qN[k.status]}`,children:k.status})]}),k.requesterId!==t&&s.jsxs("button",{onClick:()=>I(k.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[s.jsx(ss,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},k.id))]}),A.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(to,{className:"w-3 h-3"})," Active Sessions"]}),A.map(k=>{const z=k.requesterId===t||k.tutorId===t,D=k.requesterId===t,$=k.tutorId===t,B=D?k.requesterFeedback:k.tutorFeedback,G=D?k.tutorFeedback:k.requesterFeedback;return s.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName||"Finding tutor..."]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${qN[k.status]}`,children:k.status}),k.status==="MATCHED"&&z&&s.jsx("button",{onClick:()=>R(k.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),k.status==="IN_PROGRESS"&&z&&!B&&s.jsxs("button",{onClick:()=>x(k.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(nn,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),k.status==="IN_PROGRESS"&&z&&B&&!G&&s.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",D?"tutor":"student"]}),n&&k.tutorId&&k.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>C(k.id,k.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[s.jsx(nn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),y===k.id&&k.status==="IN_PROGRESS"&&($||D)&&s.jsx(VTe,{role:D?"requester":"tutor",onSubmit:K=>L(k.id,K),submitting:_})]},k.id)})]}),a.filter(k=>k.status==="COMPLETED").length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[s.jsx(to,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(k=>k.status==="COMPLETED").map(k=>s.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),k.requesterFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),k.tutorFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&k.tutorId&&s.jsxs("button",{onClick:()=>C(k.id,k.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(nn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},k.id))]}),j.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(nn,{className:"w-3 h-3 text-green-400"})," Completed (",j.length,")"]}),j.slice(0,3).map(k=>s.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 truncate",children:k.topic}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${qN[k.status]}`,children:k.status})]},k.id))]}),a.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-600",children:[s.jsx(Ru,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},qTe=({item:t,onClose:e})=>{const[r,n]=T.useState("chest"),a=ua(t.rarity);T.useEffect(()=>{Un.chestOpen();const o=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(o),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:s.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&s.jsxs("div",{className:"animate-in zoom-in duration-500",children:[s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),s.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),s.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[s.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),s.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&s.jsx("div",{className:"animate-in zoom-in duration-300",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[s.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((o,c)=>s.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[s.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&s.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[s.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[s.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),s.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),s.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,o])=>o&&o>0).map(([o,c])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:o}),s.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},o))}),t.affixes.length>0&&s.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((o,c)=>s.jsxs("div",{className:"text-[10px] text-gray-400",children:[o.name,": +",o.value," ",o.stat," (T",o.tier,")"]},c))}),t.setId&&s.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&s.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((o,c)=>s.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),s.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},HTe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],GTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],WTe=({user:t,classType:e,onClose:r})=>{var O,A,j;const[n,a]=se.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},o=i.level||1,c=s0(o),d=LX(o),{equipped:h,appearance:p}=Lu(t,e),m=NE({gamification:{...i,equipped:h}}),y=o0(h),x=((O=i.classXp)==null?void 0:O[e])||0,_=(A=t.settings)==null?void 0:A.privacyMode,S=_?i.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),E=DX(w),I=i.unlockedAchievements||[],R=T.useMemo(()=>L7.filter(k=>I.includes(k.id)),[I]),L=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),C=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),s.jsxs("div",{className:"relative flex items-center gap-6",children:[s.jsx("div",{className:"w-32 h-44 shrink-0",children:s.jsx(Xg,{equipped:h,appearance:p})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h1",{className:`text-2xl font-black ${_?"text-purple-300 italic":"text-white"}`,children:S}),s.jsx("button",{onClick:C,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?s.jsx(ql,{className:"w-4 h-4 text-green-400"}):s.jsx(Jh,{className:"w-4 h-4"})})]}),s.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",o]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:x.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-purple-400",children:I.length}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&s.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:s.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(tl,{className:"w-3 h-3"})," Combat Stats"]}),s.jsx("div",{className:"space-y-2",children:HTe.map(({key:k,label:z,color:D,bg:$})=>{const B=m[k]||0,G=B/L*100;return s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-xs text-gray-400",children:z}),s.jsx("span",{className:`text-xs font-bold ${D}`,children:B})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${$} transition-all`,style:{width:`${G}%`}})})]},k)})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(is,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"space-y-1.5",children:GTe.map(k=>{const z=h[k];if(!z)return s.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[s.jsx("span",{className:"font-mono w-12 text-[10px]",children:k}),s.jsx("span",{className:"italic",children:"Empty"})]},k);const D=ua(z.rarity);return s.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${D.border} ${D.bg}`,children:[s.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:k}),s.jsx("span",{className:`text-xs font-bold truncate ${D.text}`,children:z.name})]},k)})})]}),E.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[s.jsx(x1,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),E.map(({set:k,activeBonus:z})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[s.jsx("span",{className:"text-purple-400 font-bold",children:k.name}),s.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",z.label]})]},k.id))]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(rl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",I.length,")"]}),R.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:R.slice(0,12).map(k=>s.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[s.jsx("div",{className:"text-xl",children:k.icon}),s.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:k.title})]},k.id))}):s.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Tu,{className:"w-3.5 h-3.5 text-orange-400"}),s.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),s.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ih,{className:"w-3.5 h-3.5 text-red-400"}),s.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),s.jsx("span",{className:"text-red-400 font-bold",children:((j=i.completedQuests)==null?void 0:j.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ru,{className:"w-3.5 h-3.5 text-green-400"}),s.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),s.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Yn,{className:"w-3.5 h-3.5 text-cyan-400"}),s.jsx("span",{className:"text-gray-400",children:"Total XP:"}),s.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})},qx=({label:t,value:e,max:r,color:n,icon:a,description:i})=>{const o=Math.min(e/r*100,100);return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:n,children:a}),s.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider",children:t})]}),s.jsx("span",{className:`text-sm font-black ${n}`,children:e})]}),s.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${n.replace("text-","bg-").replace("400","500/60")}`,style:{width:`${o}%`}})}),s.jsx("div",{className:"absolute -top-10 left-0 hidden group-hover:block z-20 w-56 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:i})]})},Hx=({label:t,value:e,sub:r,color:n="text-white",icon:a})=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-gray-600",children:a}),s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:t})]}),s.jsx("div",{className:`text-lg font-black ${n} leading-tight`,children:e}),r&&s.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:r})]}),KTe=({user:t,submissions:e,assignments:r,activeClass:n})=>{var D;const a=t.gamification,i=((D=a==null?void 0:a.classXp)==null?void 0:D[n])||0,o=(a==null?void 0:a.xp)||0,c=(a==null?void 0:a.level)||1,d=(a==null?void 0:a.currency)||0,h=(a==null?void 0:a.engagementStreak)||0,p=(a==null?void 0:a.loginStreak)||0,m=s0(c),x=T.useMemo(()=>Lu(t,n),[t,n]).equipped,_=T.useMemo(()=>{const $={tech:10,focus:10,analysis:10,charisma:10};return Object.values(x).filter(Boolean).forEach(G=>{G.stats&&Object.entries(G.stats).forEach(([K,H])=>{$[K]+=H})}),$},[x]),S=T.useMemo(()=>_E(_),[_]),w=T.useMemo(()=>o0(x),[x]),E=T.useMemo(()=>Zde(x),[x]),I=T.useMemo(()=>Jde(x),[x]),R=T.useMemo(()=>Yde(x),[x]),L=BX(h),C=T.useMemo(()=>{const $=new Set(r.filter(B=>B.classType===n).map(B=>B.id));return e.filter(B=>$.has(B.assignmentId))},[e,r,n]),O=T.useMemo(()=>{var fe;const $=C.reduce((Y,ne)=>{var re;return Y+(((re=ne.metrics)==null?void 0:re.engagementTime)||0)},0),B=Math.round($/60)*10,K=(((fe=a==null?void 0:a.completedQuests)==null?void 0:fe.length)||0)*100,H=(a==null?void 0:a.bossDamageDealt)||{},J=Object.values(H).reduce((Y,ne)=>Y+ne,0)*2,ae=(a==null?void 0:a.tutoringXpEarned)||0,he=Math.max(0,i-B-K-J-ae);return{engagementXp:B,questXp:K,bossXp:J,tutoringXp:ae,otherXp:he}},[C,a,i]),A=T.useMemo(()=>{const $=Date.now(),B=10080*60*1e3,G=C.filter(re=>(re.submittedAt?new Date(re.submittedAt).getTime():0)>$-B),K=new Set(G.filter(re=>re.submittedAt).map(re=>new Date(re.submittedAt).toISOString().split("T")[0])).size,H={totalTime:G.reduce((re,ye)=>{var Te;return re+(((Te=ye.metrics)==null?void 0:Te.engagementTime)||0)},0),submissionCount:G.length,totalClicks:G.reduce((re,ye)=>{var Te;return re+(((Te=ye.metrics)==null?void 0:Te.clickCount)||0)},0),totalPastes:G.reduce((re,ye)=>{var Te;return re+(((Te=ye.metrics)==null?void 0:Te.pasteCount)||0)},0),totalKeystrokes:G.reduce((re,ye)=>{var Te;return re+(((Te=ye.metrics)==null?void 0:Te.keystrokes)||0)},0),totalXP:i,activityDays:K},J=H.totalTime/60+H.submissionCount*10,fe=Woe(H,J,150,60),Y=Koe(fe),ne=Uo[fe];return{bucket:fe,recommendation:Y,meta:ne,metrics:H,engagementScore:J}},[C,i]),j=T.useMemo(()=>{const $=[];for(let B=6;B>=0;B--){const G=new Date;G.setDate(G.getDate()-B);const K=G.toISOString().split("T")[0],H=G.toLocaleDateString("en",{weekday:"short"}),J=C.filter(ae=>{var he;return(he=ae.submittedAt)==null?void 0:he.startsWith(K)});$.push({label:H,count:J.length,minutes:Math.round(J.reduce((ae,he)=>{var fe;return ae+(((fe=he.metrics)==null?void 0:fe.engagementTime)||0)},0)/60)})}return $},[C]),k=Math.max(1,...j.map($=>$.minutes)),z=T.useMemo(()=>{const $={SUCCESS:0,NORMAL:0,SUPPORT_NEEDED:0,FLAGGED:0,STARTED:0};return C.forEach(B=>{B.status in $&&$[B.status]++}),$},[C]);return s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[s.jsx(Ao,{className:"w-5 h-5 text-purple-400"}),"Intel Dossier"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Classified operative analysis  ",n]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-black ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Level ",c]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(Hx,{label:"Class XP",value:i.toLocaleString(),sub:`${o.toLocaleString()} total across all classes`,color:"text-amber-400",icon:s.jsx(Yn,{className:"w-3.5 h-3.5"})}),s.jsx(Hx,{label:"Gear Score",value:w,sub:`${Object.values(x).filter(Boolean).length}/8 slots filled`,color:"text-purple-400",icon:s.jsx(is,{className:"w-3.5 h-3.5"})}),s.jsx(Hx,{label:"Resources Accessed",value:C.length,sub:`${z.SUCCESS} excellent`,color:"text-emerald-400",icon:s.jsx(tl,{className:"w-3.5 h-3.5"})}),s.jsx(Hx,{label:"Cyber-Flux",value:d,sub:"crafting currency",color:"text-cyan-400",icon:s.jsx(UT,{className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Ih,{className:"w-4 h-4 text-red-400"})," Combat Analysis"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your character stats translate to boss fight performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(qx,{label:"Tech",value:_.tech,max:100,color:"text-blue-400",icon:s.jsx(Yn,{className:"w-3 h-3"}),description:"Attack Power  Increases base damage dealt to bosses in quiz events."}),s.jsx(qx,{label:"Focus",value:_.focus,max:100,color:"text-green-400",icon:s.jsx(Nu,{className:"w-3 h-3"}),description:`Critical Strikes  ${(S.critChance*100).toFixed(0)}% crit chance, ${S.critMultiplier.toFixed(2)}x crit multiplier.`}),s.jsx(qx,{label:"Analysis",value:_.analysis,max:100,color:"text-yellow-400",icon:s.jsx(is,{className:"w-3 h-3"}),description:`Armor  Reduces incoming boss damage by ${S.armorPercent.toFixed(0)}%.`}),s.jsx(qx,{label:"Charisma",value:_.charisma,max:100,color:"text-purple-400",icon:s.jsx(Oh,{className:"w-3 h-3"}),description:`Health Pool  Gives you ${S.maxHp} HP in boss fights (base 100 + 5 per charisma above 10).`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-3 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Max HP"}),s.jsx("div",{className:"text-sm font-black text-emerald-400",children:S.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Armor"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:[S.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit %"}),s.jsxs("div",{className:"text-sm font-black text-green-400",children:[(S.critChance*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit Dmg"}),s.jsxs("div",{className:"text-sm font-black text-red-400",children:[S.critMultiplier.toFixed(2),"x"]})]})]}),(Object.keys(E).length>0||Object.keys(I).length>0||Object.keys(R).length>0)&&s.jsxs("div",{className:"pt-3 border-t border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest",children:"Stat Sources"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px]",children:[s.jsxs("div",{className:"flex justify-between text-gray-500",children:[s.jsx("span",{children:"Base Stats"}),s.jsx("span",{className:"text-gray-400",children:"10 each"})]}),Object.keys(E).length>0&&s.jsxs("div",{className:"flex justify-between text-cyan-400/70",children:[s.jsx("span",{children:"Gems"}),s.jsxs("span",{children:["+",Object.values(E).reduce(($,B)=>$+B,0)]})]}),Object.keys(I).length>0&&s.jsxs("div",{className:"flex justify-between text-orange-400/70",children:[s.jsx("span",{children:"Runewords"}),s.jsxs("span",{children:["+",Object.values(I).reduce(($,B)=>$+B,0)]})]}),Object.keys(R).length>0&&s.jsxs("div",{className:"flex justify-between text-amber-400/70",children:[s.jsx("span",{children:"Set Bonus"}),s.jsxs("span",{children:["+",Object.values(R).reduce(($,B)=>$+B,0)]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Yn,{className:"w-4 h-4 text-amber-400"})," XP Sources"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 -mt-2",children:["Where your ",i.toLocaleString()," XP in ",n," came from"]}),s.jsx("div",{className:"space-y-2",children:[{label:"Resource Engagement",xp:O.engagementXp,color:"bg-purple-500",textColor:"text-purple-400",desc:"~10 XP per minute of active engagement"},{label:"Mission Rewards",xp:O.questXp,color:"bg-indigo-500",textColor:"text-indigo-400",desc:"XP from completing contracts"},{label:"Boss Encounters",xp:O.bossXp,color:"bg-red-500",textColor:"text-red-400",desc:"XP from boss quiz damage"},{label:"Peer Tutoring",xp:O.tutoringXp,color:"bg-emerald-500",textColor:"text-emerald-400",desc:"XP earned helping other agents"},{label:"Other (Badges, Daily, Behavior)",xp:O.otherXp,color:"bg-amber-500",textColor:"text-amber-400",desc:"Login rewards, behavior awards, badge XP"}].filter($=>$.xp>0).map($=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${$.color}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-300",children:$.label}),s.jsxs("span",{className:`font-bold ${$.textColor}`,children:["~",$.xp.toLocaleString()," XP"]})]}),s.jsx("div",{className:"text-[10px] text-gray-600",children:$.desc})]})]},$.label))}),L>1&&s.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Tu,{className:"w-4 h-4 text-orange-400"}),s.jsx("span",{className:"text-orange-400 font-bold",children:"Streak Bonus Active"}),s.jsxs("span",{className:"ml-auto text-sm font-black text-yellow-400",children:["+",Math.round((L-1)*100),"%"]})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[h,"-week engagement streak  All XP earnings boosted"]})]}),p>1&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 pt-2 border-t border-white/5",children:[s.jsx(x1,{className:"w-3.5 h-3.5 text-purple-400"}),s.jsxs("span",{children:[p,"-day daily login streak"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-2xl p-5 space-y-4 ${A.meta.bgColor} ${A.meta.borderColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(BT,{className:"w-4 h-4"})," Engagement Status"]}),s.jsx("span",{className:`text-sm font-black ${A.meta.color}`,children:A.meta.label})]}),s.jsx("p",{className:"text-sm text-gray-300",children:A.meta.description}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Why this classification"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active time (7d)"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[Math.round(A.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Resources (7d)"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.submissionCount})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active days"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[A.metrics.activityDays,"/7"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Keystrokes"}),s.jsx("span",{className:"text-gray-300 font-mono",children:A.metrics.totalKeystrokes})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-1",children:"How to level up your status"}),s.jsx("p",{className:"text-sm text-gray-300",children:A.recommendation.studentTip})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommended for you"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.recommendation.categories.map($=>s.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-2.5 py-1 rounded-full text-gray-300 font-medium",children:$},$))})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(B2,{className:"w-4 h-4 text-cyan-400"})," 7-Day Activity"]}),s.jsx("div",{className:"flex items-end gap-2 h-32",children:j.map(($,B)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 font-mono",children:[$.minutes,"m"]}),s.jsx("div",{className:"w-full bg-white/5 rounded-t-lg relative flex-1 flex items-end",children:s.jsx("div",{className:`w-full rounded-t-lg transition-all duration-500 ${$.minutes>0?"bg-purple-500/50 border border-purple-500/30":"bg-white/5"}`,style:{height:`${Math.max($.minutes>0?8:0,$.minutes/k*100)}%`}})}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold",children:$.label}),$.count>0&&s.jsxs("div",{className:"text-[8px] text-gray-600",children:[$.count," res"]})]},B))}),s.jsxs("div",{className:"pt-3 border-t border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Submission Quality"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[z.SUCCESS>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-gray-400",children:"Excellent"}),s.jsx("span",{className:"text-emerald-400 font-bold ml-auto",children:z.SUCCESS})]}),z.NORMAL>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-400",children:"Normal"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:z.NORMAL})]}),z.SUPPORT_NEEDED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),s.jsx("span",{className:"text-gray-400",children:"Needs Support"}),s.jsx("span",{className:"text-amber-400 font-bold ml-auto",children:z.SUPPORT_NEEDED})]}),z.STARTED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),s.jsx("span",{className:"text-gray-400",children:"Started"}),s.jsx("span",{className:"text-gray-400 font-bold ml-auto",children:z.STARTED})]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Ih,{className:"w-4 h-4 text-red-400"})," Boss Fight Readiness"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your equipment and stats prepare you for boss quiz encounters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-red-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-red-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Ih,{className:"w-3 h-3"})," Offense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:["Your ",s.jsxs("span",{className:"text-blue-400 font-bold",children:[_.tech," Tech"]})," powers your base attack.",_.tech>20&&s.jsx("span",{className:"text-emerald-400",children:" Strong offensive capability."}),_.tech<=20&&_.tech>10&&s.jsx("span",{className:"text-yellow-400",children:" Moderate damage output."}),_.tech<=10&&s.jsx("span",{className:"text-red-400",children:" Low damage  equip Tech gear to improve."})]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Crit chance: ",s.jsxs("span",{className:"text-green-400 font-bold",children:[(S.critChance*100).toFixed(0),"%"]})," (from ",_.focus," Focus)"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-yellow-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-yellow-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(is,{className:"w-3 h-3"})," Defense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[S.armorPercent.toFixed(0),"% Armor"]})," from ",_.analysis," Analysis reduces boss damage.",S.armorPercent>=30&&s.jsx("span",{className:"text-emerald-400",children:" Excellent damage mitigation."}),S.armorPercent<30&&S.armorPercent>=15&&s.jsx("span",{className:"text-yellow-400",children:" Decent protection."}),S.armorPercent<15&&s.jsx("span",{className:"text-red-400",children:" Vulnerable  equip Analysis gear."})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-emerald-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-emerald-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Oh,{className:"w-3 h-3"})," Survivability"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-emerald-400 font-bold",children:[S.maxHp," HP"]})," from ",_.charisma," Charisma.",S.maxHp>=150&&s.jsx("span",{className:"text-emerald-400",children:" Large health pool  can absorb many hits."}),S.maxHp<150&&S.maxHp>=120&&s.jsx("span",{className:"text-yellow-400",children:" Average survivability."}),S.maxHp<120&&s.jsx("span",{className:"text-red-400",children:" Fragile  Charisma gear increases HP."})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommendations"}),s.jsxs("div",{className:"space-y-1.5",children:[w<100&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(gx,{className:"w-3 h-3 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your Gear Score is ",s.jsx("span",{className:"text-amber-400 font-bold",children:w}),". Complete more missions and level up to earn better equipment drops."]})]}),_.tech<=15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(gx,{className:"w-3 h-3 text-blue-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Equip items with ",s.jsx("span",{className:"text-blue-400 font-bold",children:"Tech"})," stats to increase boss damage output."]})]}),S.critChance<.1&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(gx,{className:"w-3 h-3 text-green-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Socket ",s.jsx("span",{className:"text-green-400 font-bold",children:"Focus"})," gems to boost critical hit chance beyond ",(S.critChance*100).toFixed(0),"%."]})]}),S.armorPercent<10&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(gx,{className:"w-3 h-3 text-yellow-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your armor is low. ",s.jsx("span",{className:"text-yellow-400 font-bold",children:"Analysis"})," items will reduce boss damage significantly."]})]}),w>=100&&S.critChance>=.1&&S.armorPercent>=10&&_.tech>15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-emerald-400",children:[s.jsx(UT,{className:"w-3 h-3 mt-0.5 shrink-0"}),s.jsx("span",{children:"Your loadout is well-balanced. Consider specializing in one stat for even greater effectiveness."})]})]})]})]})]})};function QTe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=Wg(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const XTe={Textbook:s.jsx(as,{className:"w-5 h-5"}),Simulation:s.jsx(eE,{className:"w-5 h-5 fill-current"}),"Lab Guide":s.jsx(U2,{className:"w-5 h-5"}),"Practice Set":s.jsx(tl,{className:"w-5 h-5"}),Article:s.jsx(AH,{className:"w-5 h-5"}),"Video Lesson":s.jsx(OH,{className:"w-5 h-5"}),Supplemental:s.jsx(Z8,{className:"w-5 h-5"})};let ph=0,HN=!1,GN=!1,Bz="";const YTe=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:a,onStartAssignment:i,studentTab:o="RESOURCES"})=>{var Ga,ji,cs,xi,Nt,pe,rt,ft,Xt,hr,sn,Kr,gn,Or,Ms,us,lo,hl,ds,hs,Ra,xa,q,be,Ae,je,mt,It,At,Yt,wr;const c=qa(),{confirm:d}=ko(),[h,p]=T.useState(new Set),[m,y]=T.useState(t.classType||((Ga=t.enrolledClasses)==null?void 0:Ga[0])||"Unassigned"),[x,_]=T.useState(null),[S,w]=T.useState([]),[E,I]=T.useState({}),[R,L]=T.useState(!1),[C,O]=T.useState(null);Bz!==t.id&&(Bz=t.id,ph=((ji=t.gamification)==null?void 0:ji.lastLevelSeen)||1,HN=!1,GN=!1),ph===0&&(ph=((cs=t.gamification)==null?void 0:cs.lastLevelSeen)||1);const A=o,[j,k]=T.useState(!1),[z,D]=T.useState(null),[$,B]=T.useState(!1),[G,K]=T.useState(null),[H,J]=T.useState(null),[ae,he]=T.useState(null),[fe,Y]=T.useState(null),[ne,re]=T.useState(null),[ye,Te]=T.useState(null),[Ve,Je]=T.useState(!1),[Xe,ie]=T.useState(null),[Be,Q]=T.useState(!1);T.useEffect(()=>{var Pe,Fe,qe;const ue=((Pe=t.gamification)==null?void 0:Pe.level)||1,xe=Math.max(((Fe=t.gamification)==null?void 0:Fe.lastLevelSeen)||1,ph);if(ue>xe){ph=ue;const sr=((qe=t.gamification)==null?void 0:qe.inventory)||[],Kt=sr.length>0?sr[sr.length-1]:null;O(Kt),L(!0),Un.levelUp()}},[(xi=t.gamification)==null?void 0:xi.level,(Nt=t.gamification)==null?void 0:Nt.lastLevelSeen,(pe=t.gamification)==null?void 0:pe.inventory]),T.useEffect(()=>{const ue=[];try{ue.push(Re.subscribeToXPEvents(xe=>{const Pe=xe.find(Fe=>{var qe,sr,Kt;if(!Fe.isActive||Fe.type!=="GLOBAL"&&Fe.targetClass!==m||Fe.scheduledAt&&new Date(Fe.scheduledAt)>new Date)return!1;if((qe=Fe.targetSections)!=null&&qe.length){const Cn=Fe.type!=="GLOBAL"&&Fe.targetClass?Fe.targetClass:m,oa=((sr=t.classSections)==null?void 0:sr[Cn])||((Kt=t.classSections)==null?void 0:Kt[m])||t.section||"";if(!Fe.targetSections.includes(oa))return!1}return!0});_(Pe||null)}))}catch{}try{ue.push(Re.subscribeToQuests(xe=>{const Pe=t.enrolledClasses||(t.classType?[t.classType]:[]);w(xe.filter(Fe=>{var sr,Kt;if(!Fe.isActive)return!1;const qe=new Date;if(Fe.startsAt&&new Date(Fe.startsAt)>qe||Fe.expiresAt&&new Date(Fe.expiresAt)<qe||Fe.targetClass&&!Pe.includes(Fe.targetClass))return!1;if((sr=Fe.targetSections)!=null&&sr.length){const Cn=((Kt=t.classSections)==null?void 0:Kt[Fe.targetClass||m])||t.section||"";if(!Fe.targetSections.includes(Cn))return!1}return!0}))}))}catch{}try{ue.push(Re.subscribeToStudentPracticeProgress(t.id,I))}catch{}return()=>ue.forEach(xe=>xe())},[m]);const te=((ft=(rt=t.gamification)==null?void 0:rt.classXp)==null?void 0:ft[m])||0,_e=se.useRef(te),Se=se.useRef(m);T.useEffect(()=>{if(Se.current!==m){Se.current=m,_e.current=te;return}if(te>_e.current&&_e.current>=0){const ue=te-_e.current;if(ue>0&&ue<500){Te(ue),Un.xpGain();const xe=setTimeout(()=>Te(null),2e3);return()=>clearTimeout(xe)}}_e.current=te},[te]),T.useEffect(()=>{var Pe;if(HN)return;HN=!0;const ue=new Date().toISOString().split("T")[0];((Pe=t.gamification)==null?void 0:Pe.lastLoginRewardDate)!==ue&&!Be&&Re.claimDailyLogin().then(Fe=>{Fe.alreadyClaimed||(Q(!0),Un.dailyReward(),c.success(`Daily login: +${Fe.xpReward} XP, +${Fe.fluxReward} Flux (${Fe.streak}-day streak!)`))}).catch(()=>{})},[]),T.useEffect(()=>{GN||(GN=!0,Re.updateEngagementStreak().catch(()=>{}))},[]);const[Qe,nt]=T.useState([]);T.useEffect(()=>{let ue;try{ue=Re.subscribeToAnnouncements(nt)}catch{}return()=>ue==null?void 0:ue()},[]);const Ot=T.useMemo(()=>{var xe;const ue=((xe=t.gamification)==null?void 0:xe.dismissedAnnouncements)||[];return Qe.filter(Pe=>{var Fe,qe,sr;if(ue.includes(Pe.id)||Pe.classType!=="GLOBAL"&&Pe.classType!==m)return!1;if((Fe=Pe.targetSections)!=null&&Fe.length){const Kt=Pe.classType!=="GLOBAL"?Pe.classType:m,Cn=((qe=t.classSections)==null?void 0:qe[Kt])||((sr=t.classSections)==null?void 0:sr[m])||t.section||"";if(!Pe.targetSections.includes(Cn))return!1}return!0})},[Qe,(Xt=t.gamification)==null?void 0:Xt.dismissedAnnouncements,m,t.classSections,t.section]),Me=async ue=>{await Re.dismissAnnouncement(t.id,ue)},lt=()=>{var xe;const ue=((xe=t.gamification)==null?void 0:xe.level)||1;ph=ue,L(!1),O(null),Re.updateUserLastLevelSeen(t.id,ue).catch(()=>{})},St=async ue=>{try{await Re.updateUserAppearance(t.id,ue,m),c.success("Profile updated!"),k(!1),K(null),J(null),he(null),Y(null),re(null)}catch{c.error("Failed to save  try again")}},vt=t.enrolledClasses||(t.classType?[t.classType]:[]),et=T.useMemo(()=>Lu(t,m),[t,m]),ce=et.equipped,Ue=et.inventory,Ze=T.useMemo(()=>{const ue={tech:10,focus:10,analysis:10,charisma:10};return Object.values(ce).filter(Boolean).forEach(Pe=>{Pe.stats&&Object.entries(Pe.stats).forEach(([Fe,qe])=>{ue[Fe]+=qe})}),ue},[ce]),ht=T.useMemo(()=>o0(ce),[ce]),dt=T.useMemo(()=>{const ue=t.gamification||{},Pe={...ue.achievementProgress||{}},Fe=ue.xp||0,qe=ue.level||1,sr=ue.inventory||[],Kt=ue.completedQuests||[],Cn=ue.engagementStreak||0,oa=ue.loginStreak||0,Ps=ue.tutoringSessionsCompleted||0,va=ue.bossesDefeated||0,ba=ue.challengesCompleted||0,Zn=ue.itemsCrafted||0,Ir=(Io,Ds)=>{(!Pe[Io]||Ds>Pe[Io])&&(Pe[Io]=Ds)};return Ir("first_steps",Fe),Ir("xp_5k",Fe),Ir("xp_25k",Fe),Ir("rising_star",qe),Ir("veteran",qe),Ir("elite",qe),Ir("legend",qe),Ir("collector_10",sr.length),Ir("collector_50",sr.length),Ir("gear_score_100",ht),Ir("gear_score_500",ht),Ir("first_mission",Kt.length),Ir("mission_5",Kt.length),Ir("mission_20",Kt.length),Ir("boss_slayer",va),Ir("streak_3",Cn),Ir("streak_8",Cn),Ir("streak_16",Cn),Ir("login_7",oa),Ir("login_30",oa),Ir("challenges_10",ba),Ir("tutor_1",Ps),Ir("tutor_10",Ps),Ir("tech_50",Ze.tech),Ir("focus_50",Ze.focus),Ir("analysis_50",Ze.analysis),Ir("charisma_50",Ze.charisma),Ir("craft_10",Zn),Pe},[t,ht,Ze]),zt=[{subject:"Tech",A:Ze.tech,fullMark:100},{subject:"Focus",A:Ze.focus,fullMark:100},{subject:"Analysis",A:Ze.analysis,fullMark:100},{subject:"Charisma",A:Ze.charisma,fullMark:100}],tr=T.useMemo(()=>{const ue={};return e.filter(xe=>{var Pe,Fe;if(xe.classType!==m||xe.status==="DRAFT"||xe.status==="ARCHIVED"||xe.scheduledAt&&new Date(xe.scheduledAt)>new Date)return!1;if((Pe=xe.targetSections)!=null&&Pe.length){const qe=((Fe=t.classSections)==null?void 0:Fe[m])||t.section||"";if(!xe.targetSections.includes(qe))return!1}return!0}).forEach(xe=>{var qe;const Pe=r.find(sr=>sr.assignmentId===xe.id),Fe=xe.unit||"General Resources";ue[Fe]||(ue[Fe]=[]),ue[Fe].push({...xe,lastEngagement:Pe&&Pe.submittedAt||null,engagementTime:((qe=Pe==null?void 0:Pe.metrics)==null?void 0:qe.engagementTime)||0})}),ue},[e,r,m]),Cr=ue=>{const xe=new Set(h);xe.has(ue)?xe.delete(ue):xe.add(ue),p(xe)},ve=((hr=t.gamification)==null?void 0:hr.level)||1,st=((sn=t.gamification)==null?void 0:sn.currency)||0,jt=te,Dt=jt%1e3/1e3*100,$t=Rz(jt),tt=Rz(st),ar=s0(ve),br=async ue=>{const xe=ue.target.value;y(xe),await Re.switchUserView(t.id,xe)},Br=async ue=>{if(!$){B(!0);try{await Re.equipItem(t.id,ue,m),D(null),Un.equip(),c.success(`${ue.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{B(!1)}}},dn=async ue=>{B(!0);try{await Re.unequipItem(t.id,ue,m),D(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{B(!1)}},vr=async()=>{if(!z)return;if(Object.values(ce).some(Pe=>Pe&&Pe.id===z.id)){c.error("Unequip this item before salvaging.");return}const xe=yM(z);if(await d({message:`Salvage ${z.name} for ${xe} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){B(!0);try{await Re.disenchantItem(t.id,z,m),D(null),Un.salvage(),c.success(`Salvaged for ${xe} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{B(!1)}}},Gt=async ue=>{if(!z)return;const xe=Ki[ue];if(st<xe)return c.error("Insufficient Cyber-Flux.");B(!0);try{await Re.craftItem(t.id,z,ue,m),D(null),Un.craft(),c.success(`${ue.charAt(0)+ue.slice(1).toLowerCase()} complete.`)}catch(Pe){const Fe=(Pe==null?void 0:Pe.message)||(Pe==null?void 0:Pe.code)||"Unknown error";c.error(`Fabrication failed: ${Fe}`)}finally{B(!1)}},Ut=((Kr=t.gamification)==null?void 0:Kr.gemsInventory)||[],_t=async()=>{if(!(!z||$)){if(st<Ki.SOCKET)return c.error("Insufficient Cyber-Flux.");if((z.sockets||0)>=3)return c.error("Maximum sockets reached.");B(!0);try{const ue=await Re.addSocket(z.id,m);D(ue.item),Un.craft(),c.success("Socket added!")}catch(ue){c.error((ue==null?void 0:ue.message)||"Failed to add socket.")}finally{B(!1)}}},$r=async ue=>{if(!(!z||$)){if(st<Ki.ENCHANT)return c.error("Insufficient Cyber-Flux.");B(!0);try{const xe=await Re.socketGem(z.id,ue,m);D(xe.item),Un.craft(),xe.runewordActivated?(Un.levelUp(),c.success(`RUNEWORD ACTIVATED: ${xe.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(xe){c.error((xe==null?void 0:xe.message)||"Failed to socket gem.")}finally{B(!1)}}},an=async ue=>{var Fe;if(!z||$)return;const xe=(Fe=z.gems)==null?void 0:Fe[ue];if(!xe)return;const Pe=gM(z.rarity,xe.tier,z.unsocketCount||0);if(st<Pe)return c.error(`Insufficient Cyber-Flux. Need ${Pe}.`);B(!0);try{const qe=await Re.unsocketGem(z.id,ue,m);D(qe.item),Un.craft(),c.success(`Gem removed! -${qe.cost} Flux`)}catch(qe){c.error((qe==null?void 0:qe.message)||"Failed to unsocket gem.")}finally{B(!1)}},Wr=((gn=t.gamification)==null?void 0:gn.activeQuests)||[],Ur=((Or=t.gamification)==null?void 0:Or.completedQuests)||[],hn=S.filter(ue=>Wr.some(xe=>xe.questId===ue.id)),cr=S.filter(ue=>!Wr.some(xe=>xe.questId===ue.id)&&!Ur.includes(ue.id)),ya=async ue=>{try{await Re.acceptQuest(t.id,ue.id),Un.questAccept(),c.success(`Contract accepted: ${ue.title}`)}catch{c.error("Failed to accept contract.")}},fn=async ue=>{const xe=ue.type==="CUSTOM";if(await d({message:xe?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:xe?"Submit":"Deploy",variant:"info"}))try{await Re.deployMission(t.id,ue),Un.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},kn=["HEAD","HANDS","RING1","AMULET"],ni=["CHEST","BELT","FEET","RING2"],[Nr,pn]=T.useState(null),ai=eNe(bz(M7,{activationConstraint:{distance:8}}),bz(AX,{activationConstraint:{delay:150,tolerance:5}})),Hn=ue=>ue==="RING1"||ue==="RING2"?["RING"]:[ue],Jr=ue=>{const{active:xe}=ue,Pe=Ue.find(Fe=>Fe.id===xe.id)||Object.values(ce).find(Fe=>Fe&&Fe.id===xe.id);pn(Pe||null)},mn=ue=>{const{active:xe,over:Pe}=ue;if(pn(null),!Pe)return;const Fe=xe.id,qe=Pe.id;if(qe.startsWith("slot-")){const sr=qe.replace("slot-",""),Kt=Ue.find(oa=>oa.id===Fe);if(!Kt||!Hn(sr).includes(Kt.slot))return;Br(Kt)}if(Fe.startsWith("equipped-")&&(qe==="inventory-zone"||qe.startsWith("storage-cell-"))){const sr=Fe.replace("equipped-","");dn(sr)}},Nn=(ue,xe,Pe="w-5 h-5")=>{const Fe=`${Pe} ${xe}`,qe={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(ue){case"HEAD":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),s.jsx("path",{d:"M5 11v2h14v-2"}),s.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),s.jsx("path",{d:"M6 4h12"}),s.jsx("path",{d:"M12 4v5"}),s.jsx("path",{d:"M9 9h6"})]});case"HANDS":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),s.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),s.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),s.jsx("path",{d:"M4 19h16"}),s.jsx("path",{d:"M11 3v4"})]});case"BELT":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),s.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),s.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),s.jsx("path",{d:"M12 7v3"}),s.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return s.jsxs("svg",{className:Fe,...qe,children:[s.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),s.jsx("path",{d:"M12 9V6"}),s.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return s.jsx(zv,{className:Fe})}},ii=({slot:ue})=>{const xe=ce[ue],Pe=xe?ua(xe.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:Fe,isOver:qe}=D7({id:`slot-${ue}`}),{attributes:sr,listeners:Kt,setNodeRef:Cn,isDragging:oa}=IX({id:xe?`equipped-${ue}`:`empty-slot-${ue}`,disabled:!xe}),Ps=Nr&&Hn(ue).includes(Nr.slot),va=qe&&Ps?"ring-2 ring-purple-500 scale-110":Nr&&Ps?"ring-1 ring-purple-500/40 animate-pulse":"";return s.jsx("div",{ref:Fe,className:"relative",children:s.jsx("div",{ref:Cn,...sr,...Kt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${oa?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${Pe.border} ${Pe.bg} ${Pe.shimmer} ${Pe.glow} ${va}`,onClick:()=>!oa&&xe&&D(xe),children:xe?s.jsxs(s.Fragment,{children:[Nn(ue.replace(/\d/,""),Pe.text),s.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${Pe.text}`,children:xe.baseName||xe.name.split(" ").slice(-1)[0]}),!oa&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${Pe.text}`,children:xe.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[xe.rarity," ",ue]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(xe.stats).map(([ba,Zn])=>`+${Zn} ${ba.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):s.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:ue.slice(0,4)})})})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[Ot.length>0&&s.jsx("div",{className:"lg:col-span-12 space-y-2",children:Ot.map(ue=>{const xe={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return s.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${xe[ue.priority]}`,children:[s.jsx(Fv,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white",children:ue.title}),s.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:ue.content})]}),s.jsx("button",{onClick:()=>Me(ue.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:s.jsx(aa,{className:"w-4 h-4"})})]},ue.id)})}),x&&s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:s.jsx(Yn,{className:"w-5 h-5 fill-current"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[x.title," ACTIVE"]}),s.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",x.multiplier,"x XP on all tasks."]})]})]}),s.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[x.multiplier,"x"]})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${ar.tierColor.split(" ")[0]} border-opacity-30`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${ar.tierGlow} shadow-xl`,children:s.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${ar.tierColor.split(" ")[0]}`})}),s.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Ms=t.gamification)==null?void 0:Ms.codename)||t.name}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${ar.tierColor.split(" ")[1]}`,children:[ar.rankName," (Lvl ",ve,")"]}),s.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",ht]})]}),vt.length>1&&s.jsxs("div",{className:"mt-4 relative w-full",children:[s.jsx("select",{value:m,onChange:br,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:vt.map(ue=>s.jsx("option",{value:ue,children:ue},ue))}),s.jsx(gi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),s.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Dt}%`}})}),s.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[s.jsxs("span",{children:[$t.toLocaleString()," XP (",m,")"]}),s.jsx("span",{children:"Next Rank"}),ye&&s.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",ye," XP"]})]})]})]}),s.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:s.jsx(c3,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-white leading-none",children:tt})]})]})}),(((us=t.gamification)==null?void 0:us.engagementStreak)||0)>0&&(()=>{var Pe;const ue=((Pe=t.gamification)==null?void 0:Pe.engagementStreak)||0,xe=BX(ue);return s.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:s.jsx(Tu,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),s.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[ue,"w"]})]}),xe>1&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((xe-1)*100),"%"]})]})]})})})(),(((lo=t.gamification)==null?void 0:lo.loginStreak)||0)>1&&s.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[s.jsx(UT,{className:"w-5 h-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),s.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((hl=t.gamification)==null?void 0:hl.loginStreak)||0," day streak"]})]})]}),s.jsxs("button",{onClick:()=>Je(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[s.jsx(n0,{className:"w-4 h-4"})," View Profile"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&s.jsxs("button",{onClick:()=>a("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:s.jsx(U2,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),s.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),s.jsx(_u,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&s.jsxs("button",{onClick:()=>a("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:s.jsx(_le,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),s.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),s.jsx(_u,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),s.jsx("div",{className:"lg:col-span-9 space-y-6",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[A==="MISSIONS"&&s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[cr.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),cr.map(ue=>s.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:ue.title}),s.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:ue.type.replace("_"," ")})]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:ue.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[ue.statRequirements&&s.jsx("div",{className:"flex gap-2",children:Object.entries(ue.statRequirements).map(([xe,Pe])=>s.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[Pe," ",xe]},xe))}),ue.expiresAt&&s.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[s.jsx(Is,{className:"w-3 h-3"})," Expires: ",new Date(ue.expiresAt).toLocaleDateString()]})]}),s.jsxs("button",{onClick:()=>ya(ue),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[s.jsx(Nu,{className:"w-4 h-4"})," Accept Contract"]})]},ue.id))]}),s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[hn.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),hn.map(ue=>{var qe,sr;const xe=((qe=Wr.find(Kt=>Kt.questId===ue.id))==null?void 0:qe.status)||"ACCEPTED",Pe=(sr=Wr.find(Kt=>Kt.questId===ue.id))==null?void 0:sr.deploymentRoll,Fe=ue.type==="CUSTOM";return s.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:s.jsx(tl,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:ue.title}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[ue.type," MISSION"]})]})]}),s.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${xe==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":xe==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":xe==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:xe})]}),xe==="ACCEPTED"?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:ue.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>fn(ue),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[s.jsx(EH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),Fe?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),ue.isGroupQuest&&s.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:s.jsx(ss,{className:"w-5 h-5"})})]})]}):xe==="DEPLOYED"?s.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),s.jsx(Yn,{className:"w-6 h-6 text-purple-400"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),s.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:Fe?"AWAITING_HQ_SIG_VERIFICATION":Pe===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),s.jsx("div",{className:"h-10 w-px bg-white/5"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),s.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),s.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),s.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:Fe?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},ue.id)})]})]},"missions"),A==="RESOURCES"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(tr).length===0?s.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):s.jsx("div",{className:"space-y-4",children:Object.entries(tr).sort().map(([ue,xe])=>s.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[s.jsxs("button",{onClick:()=>Cr(ue),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h.has(ue)?s.jsx(gi,{className:"w-4 h-4 text-purple-400"}):s.jsx(_u,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:ue})]}),s.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[xe.length," Files"]})]}),h.has(ue)&&s.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:xe.map(Pe=>{const Fe=!!Pe.dueDate,qe=Pe.dueDate?new Date(Pe.dueDate):null,sr=new Date,Kt=qe?Math.ceil((qe.getTime()-sr.getTime())/864e5):1/0,Cn=Kt<=0?"text-red-400":Kt<=2?"text-yellow-400":"text-gray-500",oa=Math.floor(Pe.engagementTime/60),Ps=oa>=5,va=E[Pe.id],ba=va==null?void 0:va.completed;return s.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${ba?"border-green-500/20":"border-white/5"}`,onClick:()=>i&&i(Pe.id),children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${ba||Ps?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":Pe.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:ba?s.jsx(nn,{className:"w-6 h-6"}):Ps?s.jsx(nn,{className:"w-6 h-6"}):Pe.lastEngagement?s.jsx(nn,{className:"w-5 h-5 opacity-60"}):XTe[Pe.category||"Supplemental"]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:Pe.category}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:Pe.title}),ba&&s.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[s.jsx(nn,{className:"w-2.5 h-2.5"}),"COMPLETED",((va==null?void 0:va.totalCompletions)||0)>1?` (${va.totalCompletions}x)`:""]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:s.jsx("p",{className:"text-xs text-gray-500 truncate",children:Pe.description})}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Pe.lastEngagement&&s.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[oa,"m engaged"]}),ba&&(va==null?void 0:va.bestScore)!=null&&va.bestScore>0&&s.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",va.bestScore,"%"]}),Fe&&s.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Cn}`,children:[s.jsx(to,{className:"w-3 h-3"}),Kt<=0?"Overdue":Kt===1?"Due tomorrow":`Due in ${Kt}d`]})]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:s.jsx(eE,{className:"w-4 h-4 text-purple-400 fill-current"})})]},Pe.id)})})]},ue))})},"resources"),A==="LOADOUT"&&s.jsxs(JNe,{sensors:ai,collisionDetection:sNe,modifiers:[QTe],onDragStart:Jr,onDragEnd:mn,children:[s.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[s.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((ds=et.appearance)==null?void 0:ds.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),s.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[s.jsx("div",{className:"flex flex-col gap-4",children:kn.map(ue=>s.jsx(ii,{slot:ue},ue))}),s.jsx("div",{className:"w-40 h-full relative",children:s.jsx(Xg,{equipped:ce,appearance:et.appearance,evolutionLevel:ve})}),s.jsx("div",{className:"flex flex-col gap-4",children:ni.map(ue=>s.jsx(ii,{slot:ue},ue))})]}),s.jsxs("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),k(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[s.jsx(Ule,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),s.jsx("div",{className:"h-[200px]",children:s.jsx(zW,{width:"100%",height:"100%",children:s.jsxs($_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:zt,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),s.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),s.jsx(dQ,{stroke:"rgba(255,255,255,0.08)"}),s.jsx(R1,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),s.jsx(I1,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),s.jsx(M1,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const ue=_E(Ze);return s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),s.jsx("span",{className:"text-gray-500",children:"Tech"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:Ze.tech}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),s.jsx("br",{}),"Increases damage dealt to bosses."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),s.jsx("span",{className:"text-gray-500",children:"Focus"}),s.jsx("span",{className:"text-green-400 font-bold ml-auto",children:Ze.focus}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),s.jsx("br",{}),"Crit chance: ",(ue.critChance*100).toFixed(0),"%  Crit damage: ",ue.critMultiplier.toFixed(2),"x"]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),s.jsx("span",{className:"text-gray-500",children:"Analysis"}),s.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:Ze.analysis}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),s.jsx("br",{}),"Reduces boss damage by ",ue.armorPercent.toFixed(0),"%."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),s.jsx("span",{className:"text-gray-500",children:"Charisma"}),s.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:Ze.charisma}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),s.jsx("br",{}),"Max HP: ",ue.maxHp]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"HP"}),s.jsx("span",{className:"text-emerald-400 font-bold",children:ue.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Armor"}),s.jsxs("span",{className:"text-yellow-400 font-bold",children:[ue.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Crit"}),s.jsxs("span",{className:"text-green-400 font-bold",children:[(ue.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),s.jsx(ZTe,{inventory:Ue,equipped:ce,draggedItem:Nr,onInspect:D,getSlotIcon:Nn})]},"loadout"),s.jsx(yTe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:Nr&&(()=>{const ue=ua(Nr.rarity);return s.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:s.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${ue.bg} ${ue.border} ${ue.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[Nn(Nr.slot,ue.text,"w-7 h-7"),s.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${ue.text} drop-shadow-lg`,children:Nr.baseName||Nr.name.split(" ").slice(-1)[0]})]})})})()})]}),A==="ACHIEVEMENTS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(NTe,{unlockedAchievements:((hs=t.gamification)==null?void 0:hs.unlockedAchievements)||[],achievementProgress:dt})},"achievements"),A==="SKILLS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(ATe,{specialization:(Ra=t.gamification)==null?void 0:Ra.specialization,skillPoints:((xa=t.gamification)==null?void 0:xa.skillPoints)||0,unlockedSkills:((q=t.gamification)==null?void 0:q.unlockedSkills)||[]})},"skills"),A==="FORTUNE"&&s.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(jTe,{currency:st,lastSpin:(be=t.gamification)==null?void 0:be.lastWheelSpin,classType:m})},"fortune"),A==="TUTORING"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(FTe,{userId:t.id,userName:t.name,classType:m})},"tutoring"),A==="INTEL"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(KTe,{user:t,submissions:r,assignments:e,activeClass:m})},"intel")]})}),s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[s.jsx(OTe,{userId:t.id,userName:t.name,classType:m}),s.jsx(zTe,{userId:t.id,classType:m,userSection:((Ae=t.classSections)==null?void 0:Ae[m])||t.section,userClassSections:t.classSections,playerStats:Ze,playerAppearance:et.appearance,playerEquipped:ce,playerEvolutionLevel:ve})]})}),s.jsx(Ai,{isOpen:j,onClose:()=>{k(!1),K(null),J(null),he(null),Y(null),re(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:s.jsx(Xg,{equipped:ce,appearance:{...et.appearance,hue:G??((je=et.appearance)==null?void 0:je.hue)??0,bodyType:H??((mt=et.appearance)==null?void 0:mt.bodyType)??"A",skinTone:ae??((It=et.appearance)==null?void 0:It.skinTone)??0,hairStyle:fe??((At=et.appearance)==null?void 0:At.hairStyle)??1,hairColor:ne??((Yt=et.appearance)==null?void 0:Yt.hairColor)??0}})})}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),s.jsx("div",{className:"flex justify-center gap-2",children:RX.map((ue,xe)=>{var Fe;const Pe=(ae??((Fe=et.appearance)==null?void 0:Fe.skinTone)??0)===xe;return s.jsx("button",{onClick:()=>he(xe),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Pe?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ue}},xe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:xTe.map((ue,xe)=>{var Fe;const Pe=(fe??((Fe=et.appearance)==null?void 0:Fe.hairStyle)??1)===xe;return s.jsx("button",{onClick:()=>Y(xe),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${Pe?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:ue},xe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),s.jsx("div",{className:"flex justify-center gap-2",children:MX.map((ue,xe)=>{var Fe;const Pe=(ne??((Fe=et.appearance)==null?void 0:Fe.hairColor)??0)===xe;return s.jsx("button",{onClick:()=>re(xe),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Pe?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ue}},xe)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),s.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(ue=>{var Pe;const xe=(H??((Pe=et.appearance)==null?void 0:Pe.bodyType)??"A")===ue;return s.jsx("button",{onClick:()=>J(ue),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${xe?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:ue==="A"?"Alpha":ue==="B"?"Beta":"Femme"},ue)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(ue=>{var Pe;const xe=(G??((Pe=et.appearance)==null?void 0:Pe.hue)??0)===ue;return s.jsx("button",{onClick:()=>K(ue),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${xe?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${ue}, 60%, 45%)`}},ue)})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{k(!1),K(null),J(null),he(null),Y(null),re(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:()=>{var ue,xe,Pe,Fe,qe;return St({hue:G??((ue=et.appearance)==null?void 0:ue.hue)??0,bodyType:H??((xe=et.appearance)==null?void 0:xe.bodyType)??"A",skinTone:ae??((Pe=et.appearance)==null?void 0:Pe.skinTone)??0,hairStyle:fe??((Fe=et.appearance)==null?void 0:Fe.hairStyle)??1,hairColor:ne??((qe=et.appearance)==null?void 0:qe.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),s.jsx(Ai,{isOpen:!!z,onClose:()=>D(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:z&&s.jsxs("div",{className:"space-y-6 text-gray-100",children:[s.jsxs("div",{className:`p-5 rounded-xl border ${z.runewordActive?"border-amber-500/40 runeword-active":ua(z.rarity).border} ${ua(z.rarity).bg} ${ua(z.rarity).shimmer} relative overflow-hidden`,children:[s.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${z.runewordActive?"border-amber-500/50":ua(z.rarity).border} ${ua(z.rarity).bg}`,style:{boxShadow:z.runewordActive?"0 0 20px rgba(245,158,11,0.3)":z.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":z.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:Nn(z.slot,z.runewordActive?"text-amber-400":ua(z.rarity).text,"w-7 h-7")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`text-lg font-bold ${z.runewordActive?"text-amber-300":ua(z.rarity).text}`,children:z.name}),s.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[z.rarity," ",z.slot]}),z.runewordActive&&s.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(wr=xM(z))==null?void 0:wr.name})]})]}),s.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(z.stats).map(([ue,xe])=>s.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[s.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:ue}),s.jsxs("span",{className:"font-mono font-bold",children:["+",xe]})]},ue))}),s.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:z.affixes.map((ue,xe)=>s.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[ue.name," (T",ue.tier,")"]},xe))})]}),(z.sockets||0)>0&&(()=>{const ue=z.sockets||0,xe=z.gems||[],Pe=ue-xe.length,Fe=xM(z);return s.jsxs("div",{className:`p-4 rounded-xl border ${Fe?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[Fe&&s.jsxs("div",{className:"mb-3 text-center",children:[s.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),s.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:Fe.name}),s.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:Fe.lore}),s.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(Fe.bonusStats).map(([qe,sr])=>s.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",sr," ",qe.slice(0,3).toUpperCase()]},qe))}),Fe.bonusEffects&&Fe.bonusEffects.length>0&&s.jsx("div",{className:"mt-1",children:Fe.bonusEffects.map(qe=>s.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:qe.description},qe.id))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[s.jsx(c3,{className:"w-3 h-3"})," Gem Sockets (",xe.length,"/",ue,")"]}),s.jsxs("div",{className:"flex gap-2",children:[xe.map((qe,sr)=>{const Kt=gM(z.rarity,qe.tier,z.unsocketCount||0);return s.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:qe.color,backgroundColor:`${qe.color}20`,boxShadow:`0 0 8px ${qe.color}40`},children:s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:qe.color}})}),s.jsx("span",{className:"text-[9px] text-gray-400",children:qe.name}),s.jsxs("button",{onClick:()=>an(sr),disabled:$||st<Kt,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${Kt} Flux`,children:["Remove (",Kt," F)"]})]},sr)}),Array.from({length:Pe}).map((qe,sr)=>s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${sr}`))]}),Pe>0&&Ut.length>0&&s.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Ki.ENCHANT," Flux)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Ut.map(qe=>s.jsxs("button",{onClick:()=>$r(qe.id),disabled:$||st<Ki.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:qe.color}}),s.jsx("span",{className:"text-gray-300",children:qe.name}),s.jsxs("span",{className:"text-gray-600 font-mono",children:["+",qe.value]})]},qe.id))}),xe.length>0&&!Fe&&(()=>{const qe=xe.map(Kt=>Kt.name),sr=SE.filter(Kt=>Kt.requiredSockets===ue&&Kt.pattern.slice(0,qe.length).every((Cn,oa)=>Cn===qe[oa]));return sr.length===0?null:s.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:sr.map(Kt=>s.jsxs("div",{children:["Possible: ",s.jsx("span",{className:"font-bold text-amber-400/80",children:Kt.name}),"  needs [",Kt.pattern.join("  "),"]"]},Kt.id))})})()]})]})})(),(z.sockets||0)<3&&s.jsxs("button",{onClick:_t,disabled:$||st<Ki.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(c3,{className:"w-4 h-4"}),"Add Socket (",Ki.SOCKET," Flux)  ",z.sockets||0,"/3"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const ue=z.slot==="RING"?"RING1":z.slot,xe=ce[ue]||(z.slot==="RING"?ce.RING2:null);if(!xe||xe.id===z.id)return null;const Pe=ua(xe.rarity),Fe=new Set([...Object.keys(z.stats),...Object.keys(xe.stats)]);return s.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-xs font-bold ${Pe.text}`,children:xe.name}),s.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:xe.rarity})]}),s.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(Fe).map(qe=>{const sr=z.stats[qe]||0,Kt=xe.stats[qe]||0,Cn=sr-Kt;return Cn===0?s.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[qe.slice(0,3).toUpperCase(),": 0"]},qe):s.jsxs("span",{className:`text-[10px] font-mono font-bold ${Cn>0?"text-green-400":"text-red-400"}`,children:[qe.slice(0,3).toUpperCase(),": ",Cn>0?"":"",Math.abs(Cn)]},qe)})})]})})(),(()=>{var xe;const ue=(xe=Object.entries(ce).find(([,Pe])=>Pe&&Pe.id===z.id))==null?void 0:xe[0];return ue?s.jsx("button",{onClick:()=>dn(ue),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:$,children:"Unequip Gear"}):s.jsx("button",{onClick:()=>Br(z),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:$,children:"Equip Gear"})})(),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),s.jsxs("button",{onClick:()=>Gt("RECALIBRATE"),disabled:$||st<Ki.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.RECALIBRATE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),s.jsxs("button",{onClick:()=>Gt("REFORGE"),disabled:$||st<Ki.REFORGE||z.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.REFORGE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),s.jsxs("button",{onClick:()=>Gt("OPTIMIZE"),disabled:$||st<Ki.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.OPTIMIZE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsxs("button",{onClick:vr,disabled:$,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[s.jsx(In,{className:"w-4 h-4"}),"Salvage for ",yM(z)," Flux"]})]})]})}),Ve&&s.jsx(WTe,{user:t,classType:m,onClose:()=>Je(!1)}),Xe&&s.jsx(qTe,{item:Xe,onClose:()=>ie(null)}),s.jsx(Ai,{isOpen:R,onClose:lt,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:s.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((ue,xe)=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][xe%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},xe))}),s.jsxs("div",{className:"relative inline-block mb-6",children:[s.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),s.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),s.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:s.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:ve})})]}),s.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:s.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:ar.rankName})}),s.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),C&&s.jsxs("div",{className:`${ua(C.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${ua(C.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),s.jsx("div",{className:`text-xl font-bold ${ua(C.rarity).text}`,children:C.name}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[C.rarity," ",C.slot]}),s.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(C.stats).map(([ue,xe])=>s.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",xe," ",ue.toUpperCase()]},ue))})]})]}),s.jsx("button",{onClick:lt,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},ZTe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:o}=D7({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return s.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":o?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[s.jsxs("span",{children:["Gear Storage (",t.length,")"]}),s.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[s.jsx(SH,{className:"w-3 h-3"})," Drag to equip"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>s.jsx(eAe,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>s.jsx(JTe,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},JTe=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=D7({id:`storage-cell-${t}`});return s.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},eAe=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:o,isDragging:c}=IX({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=ua(t.rarity);return s.jsxs("div",{ref:o,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var Uw=typeof self<"u"?self:global;const Yg=typeof navigator<"u",tAe=Yg&&typeof HTMLImageElement>"u",o2=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),zw=Uw.Buffer,Gx=Uw.BigInt,Vw=!!zw,rAe=t=>t;function l2(t,e=rAe){if(o2)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let B7=Uw.fetch;const nAe=t=>B7=t;if(!Uw.fetch){const t=l2("http",(n=>n)),e=l2("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,o)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(y.port=Number(c));const x=(p==="https:"?await e:await t).request(y,(_=>{if(_.statusCode===301||_.statusCode===302){let S=new URL(_.headers.location,n).toString();return r(S,{headers:a}).then(i).catch(o)}i({status:_.statusCode,arrayBuffer:()=>new Promise((S=>{let w=[];_.on("data",(E=>w.push(E))),_.on("end",(()=>S(Buffer.concat(w))))}))})}));x.on("error",o),x.end()}));nAe(r)}function Jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const c2=t=>$X(t)?void 0:t,aAe=t=>t!==void 0;function $X(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(aAe).length===0)}function Oa(t){let e=new Error(t);throw delete e.stack,e}function Ld(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function Nj(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const Tj=t=>String.fromCharCode.apply(null,t),$z=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function UX(t){return $z?$z.decode(t):Vw?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(Tj(t)))}class Ji{static from(e,r){return e instanceof this&&e.le===r?e:new Ji(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Ji){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Oa("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Oa("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=Ji){return e instanceof DataView||e instanceof Ji?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Oa("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new Ji(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return UX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return Tj(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return Tj(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Aj(t,e){Oa(`${t} '${e}' was not loaded, try using full build of exifr.`)}class $7 extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||Aj(this.kind,e),r&&(e in r||(function(n,a){Oa(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||Aj(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var il=new $7("file parser"),ka=new $7("segment parser"),dl=new $7("file reader");function iAe(t,e){return typeof t=="string"?Uz(t,e):Yg&&!tAe&&t instanceof HTMLImageElement?Uz(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Ji(t):Yg&&t instanceof Blob?jj(t,e,"blob",p0):void Oa("Invalid input argument")}function Uz(t,e){return(r=t).startsWith("data:")||r.length>1e4?Ej(t,e,"base64"):o2&&t.includes("://")?jj(t,e,"url",f0):o2?Ej(t,e,"fs"):Yg?jj(t,e,"url",f0):void Oa("Invalid input argument");var r}async function jj(t,e,r,n){return dl.has(r)?Ej(t,e,r):n?(async function(a,i){let o=await i(a);return new Ji(o)})(t,n):void Oa(`Parser ${r} is not loaded`)}async function Ej(t,e,r){let n=new(dl.get(r))(t,e);return await n.read(),n}const f0=t=>B7(t).then((e=>e.arrayBuffer())),p0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class sAe extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function ma(t,e,r){let n=new sAe;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function m0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const ti=new Map,Oo=new Map,ju=new Map,mu=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Xf=["jfif","xmp","icc","iptc","ihdr"],g0=["tiff",...Xf],ra=["ifd0","ifd1","exif","gps","interop"],gu=[...g0,...ra],yu=["makerNote","userComment"],Yf=["translateKeys","translateValues","reviveValues","multiSegment"],xu=[...Yf,"sanitize","mergeOutput","silentErrors"];class zX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class sm extends zX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),Jt(this,"enabled",!1),Jt(this,"skip",new Set),Jt(this,"pick",new Set),Jt(this,"deps",new Set),Jt(this,"translateKeys",!1),Jt(this,"translateValues",!1),Jt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=ra.includes(e),this.canBeFiltered&&(this.dict=ti.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Oa(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of Yf)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of e)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,u2(this.pick,this.deps)):this.enabled&&this.pick.size>0&&u2(this.pick,this.deps)}}var Ri={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},zz=new Map;class A0 extends zX{static useCached(e){let r=zz.get(e);return r!==void 0||(r=new this(e),zz.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Oa(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Yg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of mu)this[e]=Ri[e];for(e of xu)this[e]=Ri[e];for(e of yu)this[e]=Ri[e];for(e of gu)this[e]=new sm(e,Ri[e],void 0,this)}setupFromTrue(){let e;for(e of mu)this[e]=Ri[e];for(e of xu)this[e]=Ri[e];for(e of yu)this[e]=!0;for(e of gu)this[e]=new sm(e,!0,void 0,this)}setupFromArray(e){let r;for(r of mu)this[r]=Ri[r];for(r of xu)this[r]=Ri[r];for(r of yu)this[r]=Ri[r];for(r of gu)this[r]=new sm(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,ra)}setupFromObject(e){let r;for(r of(ra.ifd0=ra.ifd0||ra.image,ra.ifd1=ra.ifd1||ra.thumbnail,Object.assign(this,e),mu))this[r]=WN(e[r],Ri[r]);for(r of xu)this[r]=WN(e[r],Ri[r]);for(r of yu)this[r]=WN(e[r],Ri[r]);for(r of g0)this[r]=new sm(r,Ri[r],e[r],this);for(r of ra)this[r]=new sm(r,Ri[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ra,gu),e.tiff===!0?this.batchEnableWithBool(ra,!0):e.tiff===!1?this.batchEnableWithUserValue(ra,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ra):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ra)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let o of a)this[o].enabled=!1;let i=Vz(e,n);for(let[o,c]of i)u2(this[o].pick,c),this[o].enabled=!0}else if(r&&r.length){let i=Vz(r,n);for(let[o,c]of i)u2(this[o].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=ra.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of ra)this[i].finalizeFilters()}get onlyTiff(){return!Xf.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of g0)this[e].enabled&&!ka.has(e)&&Aj("segment parser",e)}}function Vz(t,e){let r,n,a,i,o=[];for(a of e){for(i of(r=ti.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function WN(t,e){return t!==void 0?t:e!==void 0?e:void 0}function u2(t,e){for(let r of e)t.add(r)}Jt(A0,"default",Ri);class Wu{constructor(e){Jt(this,"parsers",{}),Jt(this,"output",{}),Jt(this,"errors",[]),Jt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=A0.useCached(e)}async read(e){this.file=await iAe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of il)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Oa("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),c2(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=ka.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,e,r),c=await o.extractThumbnail();return r.close&&r.close(),c}}async function Fw(t,e){let r=new Wu(e);return await r.read(t),r.parse()}var oAe=Object.freeze({__proto__:null,parse:Fw,Exifr:Wu,fileParsers:il,segmentParsers:ka,fileReaders:dl,tagKeys:ti,tagValues:Oo,tagRevivers:ju,createDictionary:ma,extendDictionary:m0,fetchUrlAsArrayBuffer:f0,readBlobAsArrayBuffer:p0,chunkedProps:mu,otherSegments:Xf,segments:g0,tiffBlocks:ra,segmentsAndBlocks:gu,tiffExtractables:yu,inheritables:Yf,allFormatters:xu,Options:A0});class qw{constructor(e,r,n){Jt(this,"errors",[]),Jt(this,"ensureSegmentChunk",(async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(c){Oa(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Oa("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(ka.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class _o{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(e,r={}){return new this(e,new A0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof Ji?e:new Ji(e)}constructor(e,r={},n){Jt(this,"errors",[]),Jt(this,"raw",new Map),Jt(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=ju.get(r),a=Oo.get(r),i=ti.get(r),o=this.options[r],c=o.reviveValues&&!!n,d=o.translateValues&&!!a,h=o.translateKeys&&!!i,p={};for(let[m,y]of e)c&&n.has(m)?y=n.get(m)(y):d&&a.has(m)&&(y=this.translateValue(y,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=y;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}Jt(_o,"headerLength",4),Jt(_o,"type",void 0),Jt(_o,"multiSegment",!1),Jt(_o,"canHandle",(()=>!1));function lAe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function cAe(t){return t>=224&&t<=239}function uAe(t,e,r){for(let[n,a]of ka)if(a.canHandle(t,e,r))return n}class Fz extends qw{constructor(...e){super(...e),Jt(this,"appSegments",[]),Jt(this,"jpegSegments",[]),Jt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(ka.keyList())):(e=e===void 0?ka.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&ka.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=ka.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;o.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,o,c,d,{file:h,findAll:p,wanted:m,remaining:y,options:x}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),cAe(n)){if(a=h.getUint16(e+2),i=uAe(h,e,a),i&&m.has(i)&&(o=ka.get(i),c=o.findPosition(h,e),d=x[i],c.type=i,this.appSegments.push(c),!p&&(o.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(i)):y.delete(i),y.size===0)))break;x.recordUnknownSegments&&(c=_o.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(lAe(n)){if(a=h.getUint16(e+2),n===218&&x.stopAfterSos!==!1)return;x.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,o,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?o=c.get(i):c.set(i,o=[]),o.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=ka.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}Jt(Fz,"type","jpeg"),il.set("jpeg",Fz);const dAe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class hAe extends _o{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(o){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),o=a.getUint32(e+4),c=dAe[i];if(c*o<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Oa(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Oa(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,o);if(i===2)return Ld(a.getString(e,o));if(i===7)return a.getUint8Array(e,o);if(o===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(o),h=c;for(let p=0;p<o;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Oa(`Invalid tiff type ${e}`)}}}class KN extends hAe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Oa("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Oa(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,Nj(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Nj(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",qz(...e.get(2),e.get(1))),e.set("longitude",qz(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of ra)if(e=this[r],!$X(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function qz(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Jt(KN,"type","tiff"),Jt(KN,"headerLength",10),ka.set("tiff",KN);var fAe=Object.freeze({__proto__:null,default:oAe,Exifr:Wu,fileParsers:il,segmentParsers:ka,fileReaders:dl,tagKeys:ti,tagValues:Oo,tagRevivers:ju,createDictionary:ma,extendDictionary:m0,fetchUrlAsArrayBuffer:f0,readBlobAsArrayBuffer:p0,chunkedProps:mu,otherSegments:Xf,segments:g0,tiffBlocks:ra,segmentsAndBlocks:gu,tiffExtractables:yu,inheritables:Yf,allFormatters:xu,Options:A0,parse:Fw});const U7={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},z7=Object.assign({},U7,{firstChunkSize:4e4,gps:[1,2,3,4]});async function VX(t){let e=new Wu(z7);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const V7=Object.assign({},U7,{tiff:!1,ifd1:!0,mergeOutput:!1});async function FX(t){let e=new Wu(V7);await e.read(t);let r=await e.extractThumbnail();return r&&Vw?zw.from(r):r}async function qX(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const F7=Object.assign({},U7,{firstChunkSize:4e4,ifd0:[274]});async function q7(t){let e=new Wu(F7);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const H7=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Bd=!0,$d=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Bd=Number(r)+.1*Number(n)<13.4,$d=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Bd=$d=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Bd=$d=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Bd=$d=Number(e)<77}}async function HX(t){let e=await q7(t);return Object.assign({canvas:Bd,css:$d},H7[e])}class pAe extends Ji{constructor(...e){super(...e),Jt(this,"ranges",new mAe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=Vw?zw.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class mAe{constructor(){Jt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((o=>Hz(e,o.offset,a)||Hz(e,o.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let o=i.shift();o.offset=e,o.length=r,o.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function Hz(t,e,r){return t<=e&&e<=r}class Hw extends pAe{constructor(e,r){super(0),Jt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}dl.set("blob",class extends Hw{async readWhole(){this.chunked=!1;let t=await p0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await p0(n);return this.set(a,t,!0)}});var gAe=Object.freeze({__proto__:null,default:fAe,Exifr:Wu,fileParsers:il,segmentParsers:ka,fileReaders:dl,tagKeys:ti,tagValues:Oo,tagRevivers:ju,createDictionary:ma,extendDictionary:m0,fetchUrlAsArrayBuffer:f0,readBlobAsArrayBuffer:p0,chunkedProps:mu,otherSegments:Xf,segments:g0,tiffBlocks:ra,segmentsAndBlocks:gu,tiffExtractables:yu,inheritables:Yf,allFormatters:xu,Options:A0,parse:Fw,gpsOnlyOptions:z7,gps:VX,thumbnailOnlyOptions:V7,thumbnail:FX,thumbnailUrl:qX,orientationOnlyOptions:F7,orientation:q7,rotations:H7,get rotateCanvas(){return Bd},get rotateCss(){return $d},rotation:HX});dl.set("url",class extends Hw{async readWhole(){this.chunked=!1;let t=await f0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await B7(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==e&&(this.size=t+o),this.set(i,t,!0)}});Ji.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Gx!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Gx(e)<<Gx(32)|Gx(r)):void Oa("Trying to read 64b value but JS can only handle 53b numbers.")};class yAe extends qw{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class GX extends yAe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,c]=i;await this.file.ensureChunk(o,c);let d=4+this.file.getUint32(o);o+=d,c-=d,await this.registerSegment("tiff",o,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,o=e.start,c=this.file.getUint16(o);for(o+=2;c--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[o,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,y=this.file.getUintBytes(n,m);for(n+=m;y--;){let x=this.file.getUintBytes(n,d);n+=d+h+2+o;let _=this.file.getUint16(n);if(n+=2,x===r)return _>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=_*p}}}class WX extends GX{}Jt(WX,"type","heic");class Gz extends GX{}Jt(Gz,"type","avif"),il.set("heic",WX),il.set("avif",Gz),ma(ti,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ma(ti,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ma(ti,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ma(Oo,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let $m=ma(Oo,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Wz={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};$m.set(37392,Wz),$m.set(41488,Wz);const QN={0:"Normal",1:"Low",2:"High"};function Kz(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function Qz(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function XN(t){if(typeof t=="string"){var[e,r,n,a,i,o]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(c.setHours(a),c.setMinutes(i),c.setSeconds(o)),Number.isNaN(+c)?t:c}}function om(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(Xz(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(Xz(t[r],t[r+1]));return Ld(String.fromCodePoint(...e))}function Xz(t,e){return t<<8|e}$m.set(41992,QN),$m.set(41993,QN),$m.set(41994,QN),ma(ju,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?UX(t):t}],[306,XN],[40091,om],[40092,om],[40093,om],[40094,om],[40095,om]]),ma(ju,"exif",[[40960,Qz],[36864,Qz],[36867,XN],[36868,XN],[40962,Kz],[40963,Kz]]),ma(ju,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class YN extends _o{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:Ji.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let o={},c={};for(let d of YX)o[d]=[],c[d]=0;return i.replace(wAe,((d,h,p)=>{if(h==="<"){let m=++c[p];return o[p].push(m),`${d}#${m}`}return`${d}#${o[p].pop()}`}))})(e);let r=$h.findAll(e,"rdf","Description");r.length===0&&r.push(new $h("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let o of i.properties)n=bAe(o.ns,a),KX(o,n);return(function(i){let o;for(let c in i)o=i[c]=c2(i[c]),o===void 0&&delete i[c];return c2(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}Jt(YN,"type","xmp"),Jt(YN,"multiSegment",!0),ka.set("xmp",YN);class d2{static findAll(e){return QX(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(d2.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=XX(a),new d2(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class $h{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return QX(e,a).map($h.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new $h(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=d2.findAll(n),this.children=$h.findAll(a),this.value=this.children.length===0?XX(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return vAe(this.children.map(xAe));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)KX(r,e);return this.value!==void 0&&(e.value=this.value),c2(e)}}function KX(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var xAe=t=>t.serialize(),vAe=t=>t.length===1?t[0]:t,bAe=(t,e)=>e[t]?e[t]:e[t]={};function QX(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function XX(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const YX=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],wAe=new RegExp(`(<|\\/)(${YX.join("|")})`,"g");var SAe=Object.freeze({__proto__:null,default:gAe,Exifr:Wu,fileParsers:il,segmentParsers:ka,fileReaders:dl,tagKeys:ti,tagValues:Oo,tagRevivers:ju,createDictionary:ma,extendDictionary:m0,fetchUrlAsArrayBuffer:f0,readBlobAsArrayBuffer:p0,chunkedProps:mu,otherSegments:Xf,segments:g0,tiffBlocks:ra,segmentsAndBlocks:gu,tiffExtractables:yu,inheritables:Yf,allFormatters:xu,Options:A0,parse:Fw,gpsOnlyOptions:z7,gps:VX,thumbnailOnlyOptions:V7,thumbnail:FX,thumbnailUrl:qX,orientationOnlyOptions:F7,orientation:q7,rotations:H7,get rotateCanvas(){return Bd},get rotateCss(){return $d},rotation:HX});let Yz=l2("fs",(t=>t.promises));dl.set("fs",class extends Hw{async readWhole(){this.chunked=!1,this.fs=await Yz;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await Yz,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});dl.set("base64",class extends Hw{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let c=Math.min(e,this.size-t);if(Vw){let d=zw.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class Zz extends qw{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(Nj(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}Jt(Zz,"type","tiff"),il.set("tiff",Zz);let _Ae=l2("zlib");const NAe=["ihdr","iccp","text","itxt","exif"];class Jz extends qw{constructor(...e){super(...e),Jt(this,"catchError",(r=>this.errors.push(r))),Jt(this,"metaChunks",[]),Jt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),o=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:o,offset:e,length:c,start:e+4+4,size:a,marker:i};NAe.includes(o)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),o2){let c=await _Ae,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}Jt(Jz,"type","png"),il.set("png",Jz),ma(ti,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),m0(ti,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let eV=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];m0(ti,"ifd0",eV),m0(ti,"exif",eV),ma(Oo,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class ZN extends _o{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Jt(ZN,"type","jfif"),Jt(ZN,"headerLength",9),ka.set("jfif",ZN),ma(ti,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class tV extends _o{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Jt(tV,"type","ihdr"),ka.set("ihdr",tV),ma(ti,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ma(Oo,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class gv extends _o{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,o=0;for(let h of a)o+=h.length;let c=new i(o),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new Ji(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Oa("ICC header is too short");for(let[r,n]of Object.entries(TAe)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:o}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Ld(this.chunk.getString(e+12,r))}parseText(e,r){return Ld(this.chunk.getString(e+8,r-8))}parseSig(e){return Ld(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,o=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,y=Ld(r.getUnicodeString(m,p));o.push({lang:d,country:h,text:y}),i+=a}return n===1?o[0].text:o}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}Jt(gv,"type","icc"),Jt(gv,"multiSegment",!0),Jt(gv,"headerLength",18);const TAe={4:Ml,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:Ml,16:Ml,20:Ml,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),o=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,o,c))},36:Ml,40:Ml,48:Ml,52:Ml,64:(t,e)=>t.getUint32(e),80:Ml};function Ml(t,e){return Ld(t.getString(e,4))}ka.set("icc",gv),ma(ti,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Wx={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},rV={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ma(Oo,"icc",[[4,Wx],[12,rV],[40,Object.assign({},Wx,rV)],[48,Wx],[80,Wx],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Kx extends _o{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(o,this.pluralizeValue(e.get(o),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}Jt(Kx,"type","iptc"),Jt(Kx,"translateValues",!1),Jt(Kx,"reviveValues",!1),ka.set("iptc",Kx),ma(ti,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ma(Oo,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const lm=["Monday","Tuesday","Wednesday","Thursday","Friday"],AAe=({user:t})=>{const e=qa(),{confirm:r}=ko(),n=T.useMemo(()=>Re.getWeekId(),[]),[a,i]=T.useState([]),[o,c]=T.useState("Monday"),[d,h]=T.useState(!1),p=T.useRef(null),[m,y]=T.useState(!1),x=t.enrolledClasses||(t.classType?[t.classType]:[]),[_,S]=T.useState(t.classType||x[0]||"Uncategorized");T.useEffect(()=>{const A=new Date().toLocaleDateString("en-US",{weekday:"long"});lm.includes(A)&&c(A)},[]),T.useEffect(()=>{const A=Re.subscribeToEvidence(t.id,n,i);return()=>A()},[t.id,n]);const w=T.useMemo(()=>{const A=x[0]||"Uncategorized";return a.filter(j=>j.classType?j.classType===_:_===A)},[a,_,x]),E=A=>w.find(j=>j.dayOfWeek===A),I=A=>A?new Date(A).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,R=async A=>{var k;const j=(k=A.target.files)==null?void 0:k[0];if(j){h(!0);try{let z=null;if(j.type.startsWith("image/"))try{const ae=await SAe.parse(j,["DateTimeOriginal"])||{};ae.DateTimeOriginal&&(z=ae.DateTimeOriginal.toISOString())}catch(ae){console.warn("EXIF extraction failed",ae)}const D=_.replace(/[^a-zA-Z0-9]/g,"_"),$=Math.random().toString(36).substring(2,9),B=Tm(Am,`evidence/${t.id}/${n}/${D}_${o}_${$}`);await MT(B,j);const G=await Bv(B),K=E(o),J={id:`${t.id}_${n}_${o}_${D}`,studentId:t.id,weekId:n,classType:_,dayOfWeek:o,imageUrl:G,timestamp:new Date().toISOString(),exifDate:z,reflection:(K==null?void 0:K.reflection)||""};await Re.uploadEvidence(J)}catch(z){e.error("Upload failed: "+(z instanceof Error?z.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},L=async(A,j)=>{const k=E(A);k&&k.reflection!==j&&await Re.uploadEvidence({...k,reflection:j})},C=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${_} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const j=new EZ,k=j.internal.pageSize.getWidth(),z=j.internal.pageSize.getHeight(),D=20,$=k-D*2,B=z-D;j.setFillColor(15,7,32),j.rect(0,0,k,40,"F"),j.setTextColor(255,255,255),j.setFontSize(22),j.setFont("helvetica","bold"),j.text("WEEKLY PROGRESS REPORT",D,18),j.setFontSize(10),j.setFont("helvetica","normal"),j.text(`Operative: ${t.name.toUpperCase()}`,D,28),j.text(`Class: ${_}`,D,33),j.text(`Cycle ID: ${n}`,D,38),j.text(`Generated: ${new Date().toLocaleDateString()}`,k-D,33,{align:"right"});let G=55;const K=[...w].sort((H,J)=>lm.indexOf(H.dayOfWeek)-lm.indexOf(J.dayOfWeek));for(const H of K){let J=null,ae="JPEG",he=0,fe=0,Y=!1;try{const ie=await fetch(H.imageUrl);if(!ie.ok)throw new Error(`Image fetch failed: ${ie.statusText}`);const Be=await ie.blob();J=await new Promise((Se,Qe)=>{const nt=new FileReader;nt.onloadend=()=>Se(nt.result),nt.onerror=Qe,nt.readAsDataURL(Be)}),Be.type==="image/png"&&(ae="PNG"),Be.type==="image/webp"&&(ae="WEBP");const Q=j.getImageProperties(J),te=Q.width/Q.height,_e=100;he=$,fe=he/te,fe>_e&&(fe=_e,he=fe*te)}catch(ie){console.warn("Image processing error for PDF",ie),Y=!0,fe=15}const ye=20+fe+12;G+ye>B&&(j.addPage(),G=D),j.setDrawColor(200,200,200),j.setLineWidth(.5),j.line(D,G,k-D,G),G+=6,j.setTextColor(15,7,32),j.setFontSize(16),j.setFont("helvetica","bold"),j.text(H.dayOfWeek.toUpperCase(),D,G);const Te=I(H.exifDate)||I(H.timestamp);if(j.setFontSize(9),j.setFont("helvetica","italic"),j.setTextColor(100,100,100),j.text(`Captured: ${Te}`,k-D,G,{align:"right"}),G+=10,!Y&&J){const ie=(k-he)/2;j.addImage(J,ae,ie,G,he,fe),G+=fe+12}else j.setTextColor(255,0,0),j.setFontSize(8),j.text("[Image Error]",D,G),G+=15;j.setFont("helvetica","normal"),j.setFontSize(10);const Ve=H.reflection||"No reflection logged for this cycle.",Je=j.splitTextToSize(Ve,$),Xe=Je.length*5+15;G+Xe>B&&(j.addPage(),G=D),j.setTextColor(15,7,32),j.setFontSize(11),j.setFont("helvetica","bold"),j.text("DAILY REFLECTION:",D,G),G+=6,j.setFont("helvetica","normal"),j.setFontSize(10),j.setTextColor(60,60,60),j.text(Je,D,G),G+=Je.length*5+25}j.save(`Report_${_.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Re.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(j){console.error("PDF generation failed:",j),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},O=E(o);return s.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[s.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[s.jsx(yR,{className:"w-7 h-7"})," Weekly Evidence Log"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.length>1?s.jsxs("div",{className:"relative group",children:[s.jsx("select",{value:_,onChange:A=>S(A.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:x.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsx(gi,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):s.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:_}),s.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),s.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),s.jsxs("button",{onClick:C,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?s.jsx(Ti,{className:"w-5 h-5 animate-spin"}):s.jsx(lle,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),s.jsx("input",{type:"file",ref:p,onChange:R,className:"hidden",accept:"image/*"}),s.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:lm.map(A=>{const j=E(A),k=o===A;return s.jsxs("button",{onClick:()=>c(A),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${k?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${k?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",lm.indexOf(A)+1]}),s.jsx("span",{className:"font-bold text-sm",children:A}),j&&s.jsx("div",{className:`absolute top-2 right-2 ${k?"text-emerald-200":"text-emerald-500"}`,children:s.jsx(r0,{className:"w-3 h-3"})})]},A)})}),s.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(yle,{className:"w-4 h-4"})," Evidence Capture (",_,")"]}),O&&s.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[s.jsx(to,{className:"w-3 h-3"}),I(O.exifDate)||I(O.timestamp)]})]}),s.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:O?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:O.imageUrl,alt:o,className:"w-full h-full object-contain bg-black/20"}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},children:[s.jsx(i0,{className:"w-8 h-8 text-emerald-400"}),s.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):s.jsxs("button",{onClick:()=>{var A;return(A=p.current)==null?void 0:A.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?s.jsx(Ti,{className:"w-10 h-10 animate-spin text-emerald-500"}):s.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:s.jsx(yR,{className:"w-8 h-8"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),s.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),s.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[s.jsx("div",{className:"mb-2",children:s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(a0,{className:"w-4 h-4"})," Daily Reflection"]})}),O?s.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${o} in ${_}...`,defaultValue:O.reflection,onBlur:A=>L(o,A.target.value)},o):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[s.jsx("div",{className:"mb-2 opacity-30",children:s.jsx(_u,{className:"w-6 h-6"})}),s.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),s.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},jAe=({user:t})=>{const e=qa(),[r,n]=T.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=T.useState(""),[o,c]=T.useState(""),[d,h]=T.useState("");T.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(x,_)=>{try{return Jv.renderToString(_,{throwOnError:!1})}catch{return _}}).replace(/\n/g,"<br/>");i(y)},[r.content]);const p=async()=>{await Re.saveLabReport(r),await Re.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const y=parseFloat(o),x=parseFloat(d);!isNaN(y)&&!isNaN(x)&&(n(_=>({..._,dataPoints:[..._.dataPoints,{x:y,y:x}].sort((S,w)=>S.x-w.x)})),c(""),h(""))};return s.jsxs("div",{className:"h-full flex flex-col gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[s.jsx(U2,{className:"w-6 h-6"})," Physics Laboratory"]}),s.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[s.jsx(CH,{className:"w-4 h-4"})," Save Report"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:s.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),s.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[s.jsxs("div",{className:"w-1/3",children:[s.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"number",placeholder:"X",value:o,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),s.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>h(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),s.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(zW,{width:"100%",height:"100%",children:s.jsxs(U_e,{children:[s.jsx(GQ,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx(Iw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),s.jsx(Rw,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),s.jsx(zo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),s.jsx(D1,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),s.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:s.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[s.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(x=>({...x,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),s.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:PG.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},EAe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],kAe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],CAe=({userId:t,classType:e,onClose:r})=>{var L,C,O,A,j;const[n,a]=T.useState(null),[i,o]=T.useState(!0);if(T.useEffect(()=>{(async()=>{const z=await Re.getPublicProfile(t);a(z),o(!1)})()},[t]),i)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=s0(p),y=LX(p),{equipped:x,appearance:_}=Lu(n,e),S=NE({gamification:{...c,equipped:x}}),w=o0(x),E=((C=c.classXp)==null?void 0:C[e])||0,I=Object.values(x).filter(Boolean),R=DX(I);return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:s.jsx(aa,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-32 shrink-0",children:s.jsx(Xg,{equipped:x,appearance:_})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),s.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",p]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Yn,{className:"w-3 h-3 text-cyan-400"}),s.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[E.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(is,{className:"w-3 h-3 text-yellow-400"}),s.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(tl,{className:"w-3 h-3"})," Stats"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:EAe.map(({key:k,label:z,color:D,icon:$})=>{const B=S[k]||0;return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:$}),s.jsx("span",{className:"text-xs text-gray-400",children:z}),s.jsx("span",{className:`text-sm font-bold ${D} ml-auto`,children:B})]},k)})})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(is,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:kAe.map(k=>{const z=x[k];if(!z)return s.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[s.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:k}),s.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},k);const D=ua(z.rarity);return s.jsxs("div",{className:`p-2 rounded-lg border ${D.border} ${D.bg}`,children:[s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:k}),s.jsx("div",{className:`text-xs font-bold truncate ${D.text}`,children:z.name}),s.jsx("div",{className:"text-[9px] text-gray-500",children:z.rarity})]},k)})})]}),R.length>0&&s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(x1,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),R.map(({set:k,activeBonus:z})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[s.jsx("div",{className:"text-xs font-bold text-purple-400",children:k.name}),s.jsxs("div",{className:"text-[10px] text-gray-400",children:[z.label,": ",z.effects.map(D=>`+${D.value} ${D.stat}`).join(", ")]})]},k.id))]}),(((O=c.unlockedAchievements)==null?void 0:O.length)||0)>0&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(rl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(A=c.unlockedAchievements)==null?void 0:A.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(j=c.unlockedAchievements)==null?void 0:j.slice(0,12).map(k=>s.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:k.replace(/_/g," ")},k))})]})]})})},OAe=()=>s.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>s.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[s.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),s.jsxs("div",{className:"space-y-2 text-right",children:[s.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),IAe=({user:t})=>{var m;const[e,r]=T.useState([]),[n,a]=T.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||jr.AP_PHYSICS),[i,o]=T.useState(!0),[c,d]=T.useState(null);T.useEffect(()=>{const y=Re.subscribeToLeaderboard(x=>{r(x),o(!1)});return()=>y()},[]);const h=T.useMemo(()=>{const y=t.enrolledClasses||[];if(y.length>0)return y.sort();const x=new Set;return e.forEach(_=>{var S;return(S=_.enrolledClasses)==null?void 0:S.forEach(w=>x.add(w))}),Array.from(x).sort()},[t.enrolledClasses,e]),p=T.useMemo(()=>e.filter(y=>{var x;return(x=y.enrolledClasses)==null?void 0:x.includes(n)}).sort((y,x)=>{var w,E,I,R;const _=((E=(w=y.gamification)==null?void 0:w.classXp)==null?void 0:E[n])||0;return(((R=(I=x.gamification)==null?void 0:I.classXp)==null?void 0:R[n])||0)-_}).slice(0,10),[e,n]);return s.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),s.jsxs("div",{className:"inline-block relative",children:[s.jsxs("select",{value:n,onChange:y=>a(y.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(y=>s.jsx("option",{value:y,children:y},y)),h.length===0&&s.jsx("option",{children:n})]}),s.jsx(gi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?s.jsx(OAe,{}):s.jsxs(s.Fragment,{children:[p.length>=3&&s.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(y=>{var A,j,k,z;const x=p[y];if(!x)return null;const _=(A=x.settings)==null?void 0:A.privacyMode,S=_?((j=x.gamification)==null?void 0:j.codename)||"Unknown Agent":x.name,w=((z=(k=x.gamification)==null?void 0:k.classXp)==null?void 0:z[n])||0,E=Math.floor(w/1e3)+1,I=s0(E),R=y===0,L=["h-28","h-20","h-16"],C=["w-20 h-20","w-14 h-14","w-14 h-14"],O=[{icon:s.jsx(rl,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:s.jsx(yx,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:s.jsx(yx,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return s.jsxs("div",{className:`flex flex-col items-center ${R?"order-2":y===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+y*.15}s both`},children:[s.jsxs("div",{className:`relative mb-2 ${R?"mb-3":""}`,children:[s.jsx("div",{className:`${C[y]} rounded-full p-0.5 bg-white/10 ring-2 ${O[y].ring} relative ${R?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:s.jsx("img",{src:x.avatarUrl,alt:S,className:`w-full h-full rounded-full border-2 ${I.tierColor.split(" ")[0]} object-cover`})}),s.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${O[y].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:O[y].icon})]}),s.jsxs("div",{className:`text-center ${R?"mt-2":"mt-1"}`,children:[s.jsx("div",{className:`font-bold truncate max-w-[100px] ${R?"text-sm text-white":"text-xs text-gray-300"} ${_?"italic":""}`,children:S}),s.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${R?"text-xl":"text-base"}`,children:w.toLocaleString()}),s.jsx("div",{className:`text-[9px] font-mono uppercase ${I.tierColor.split(" ")[1]}`,children:I.rankName}),s.jsxs("button",{onClick:()=>d(x.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[s.jsx(n0,{className:"w-3 h-3"})," Inspect"]})]}),s.jsx("div",{className:`${L[y]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${y===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":y===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},x.id)})}),s.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((y,x)=>{var L,C,O,A;const _=p.length>=3?x+3:x,S=(L=y.settings)==null?void 0:L.privacyMode,w=S?((C=y.gamification)==null?void 0:C.codename)||"Unknown Agent":y.name,E=((A=(O=y.gamification)==null?void 0:O.classXp)==null?void 0:A[n])||0,I=Math.floor(E/1e3)+1,R=s0(I);return s.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*_}s both`},children:[s.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[_<3&&_===0&&s.jsx(rl,{className:"w-6 h-6 text-yellow-400 mx-auto"}),_<3&&_===1&&s.jsx(yx,{className:"w-6 h-6 text-gray-300 mx-auto"}),_<3&&_===2&&s.jsx(yx,{className:"w-6 h-6 text-amber-600 mx-auto"}),_>=3&&`#${_+1}`]}),s.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[s.jsx("img",{src:y.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${R.tierColor.split(" ")[0]}`}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:I})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:`text-base font-bold truncate ${S?"text-purple-300 italic":"text-white"}`,children:[w,S&&s.jsx(ef,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${R.tierColor.split(" ")[1]}`,children:R.rankName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:E.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),s.jsx("button",{onClick:()=>d(y.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:s.jsx(n0,{className:"w-4 h-4"})})]},y.id)}),p.length===0&&s.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[s.jsx(ss,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&s.jsx(CAe,{userId:c,classType:n,onClose:()=>d(null)})]})};class RAe extends se.Component{constructor(r){super(r);uO(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),s.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&s.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),s.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[s.jsx(Gv,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const nV={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:s.jsx(Ao,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:s.jsx(_H,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:s.jsx(x1,{className:"w-4 h-4"})}},MAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},JN=3;function eT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const PAe=({assignment:t})=>{const e=qa(),[r,n]=T.useState([]),[a,i]=T.useState([]),[o,c]=T.useState(!0),[d,h]=T.useState(!1),[p,m]=T.useState({}),[y,x]=T.useState(1),[_,S]=T.useState(null),[w,E]=T.useState(new Set),I=T.useRef({engagementTime:0}),R=T.useRef(Date.now());T.useEffect(()=>{const G=setInterval(()=>{Date.now()-R.current<6e4&&(I.current.engagementTime+=1)},1e3);return()=>clearInterval(G)},[]),T.useEffect(()=>{const G=()=>{R.current=Date.now()},K=["mousemove","keydown","scroll","click"];return K.forEach(H=>window.addEventListener(H,G)),()=>K.forEach(H=>window.removeEventListener(H,G))},[]),T.useEffect(()=>()=>{var K;const G=I.current.engagementTime;if(G>=5){const H=(K=uT().currentUser)==null?void 0:K.uid;H&&Re.submitReviewEngagement(H,t.id,t.title,t.classType,G).catch(()=>{})}},[t.id,t.title,t.classType]);const L=T.useCallback(G=>{const K=eT(G.filter(ae=>ae.tier===1),JN),H=eT(G.filter(ae=>ae.tier===2),JN),J=eT(G.filter(ae=>ae.tier===3),JN);i([...K,...H,...J]),m({}),S(null)},[]);T.useEffect(()=>{(async()=>{var K;c(!0),h(!1);try{const H=await da(ot(Ie,"question_banks",t.id));if(!H.exists()){h(!0);return}const J=H.data().questions||[];n(J),L(J)}catch(H){console.error("Failed to load question bank:",H),h(!0);return}finally{c(!1)}try{const H=(K=uT().currentUser)==null?void 0:K.uid;if(H){const J=await da(ot(Ie,"review_progress",`${H}_${t.id}`));J.exists()&&E(new Set(J.data().answeredQuestions||[]))}}catch(H){console.warn("Could not load review progress:",H)}})()},[t.id,L]);const C=()=>{r.length>0&&L(r)},O=(G,K,H)=>{const J=p[G];if(!(J!=null&&J.submitted))if(H==="multiple_select"||H==="ranking"){const ae=(J==null?void 0:J.selected)||[],he=ae.includes(K)?ae.filter(fe=>fe!==K):[...ae,K];m(fe=>({...fe,[G]:{...fe[G],selected:he,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(ae=>({...ae,[G]:{selected:K,submitted:!1,correct:!1,xpAwarded:!1}}))},A=(G,K)=>{var H;(H=p[G])!=null&&H.submitted||m(J=>({...J,[G]:{...J[G],linkedSelected:K}}))},j=async G=>{const K=p[G.id];if(!(K!=null&&K.selected))return;let H=!1;if(G.type==="multiple_select"||G.type==="ranking"){const J=K.selected,ae=G.correctAnswer;H=J.length===ae.length&&J.every((he,fe)=>he===ae[fe])}else G.type==="linked_mc"?H=K.selected===G.correctAnswer&&(!G.linkedFollowUp||K.linkedSelected===G.linkedFollowUp.correctAnswer):H=K.selected===G.correctAnswer;if(H)if(w.has(G.id))m(J=>({...J,[G.id]:{...J[G.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(J=>({...J,[G.id]:{...J[G.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await yH({assignmentId:t.id,questionId:G.id,xpAmount:G.xp,classType:t.classType})).data.awarded?(e.success(`+${G.xp} XP earned!`),m(he=>({...he,[G.id]:{...he[G.id],submitted:!0,correct:!0,xpAwarded:!0}})),E(he=>new Set([...he,G.id]))):e.success("Correct! (XP already claimed)")}catch(J){console.error("XP award error:",J)}}else{const J=Math.ceil(G.xp/2);m(ae=>({...ae,[G.id]:{...ae[G.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:J}})),e.error(`-${J} XP penalty`);try{await Coe({assignmentId:t.id,questionId:G.id,classType:t.classType})}catch(ae){console.error("Penalty error:",ae)}}},k=T.useMemo(()=>a.filter(G=>G.tier===y),[a,y]),z=T.useMemo(()=>Object.entries(p).filter(([,G])=>G.correct&&G.xpAwarded).reduce((G,[K])=>{var H;return G+(((H=a.find(J=>J.id===K))==null?void 0:H.xp)||0)},0),[p,a]),D=T.useMemo(()=>Object.values(p).reduce((G,K)=>G+(K.penalty||0),0),[p]),$=T.useMemo(()=>a.reduce((G,K)=>G+K.xp,0),[a]),B=T.useMemo(()=>a.length>0&&a.every(G=>{var K;return(K=p[G.id])==null?void 0:K.submitted}),[a,p]);return o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Ti,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Ao,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ao,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),s.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yn,{className:"w-4 h-4 text-yellow-400"}),s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:z}),D>0&&s.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",D]}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",$," XP"]})]}),s.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[s.jsx(Gv,{className:"w-3 h-3"})," New Set"]})]})]}),s.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(G=>{const K=nV[G],H=a.filter(he=>he.tier===G),J=H.filter(he=>{var fe;return(fe=p[he.id])==null?void 0:fe.submitted}).length,ae=H.filter(he=>{var fe;return(fe=p[he.id])==null?void 0:fe.correct}).length;return s.jsxs("button",{onClick:()=>x(G),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===G?`${K.bg} ${K.color} ${K.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[K.icon,s.jsx("span",{className:"hidden sm:inline",children:K.name}),s.jsxs("span",{className:"sm:hidden",children:["Tier ",G]}),J>0&&s.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ae===H.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ae,"/",H.length]})]},G)})}),B&&s.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),s.jsxs("button",{onClick:C,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[s.jsx(Gv,{className:"w-3 h-3"})," New Questions"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[k.map((G,K)=>{const H=p[G.id],J=_===G.id,ae=H==null?void 0:H.submitted,he=H==null?void 0:H.correct,fe=nV[G.tier];return s.jsxs("div",{className:`rounded-2xl border transition-all ${ae?he?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":J?`${fe.border} ${fe.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[s.jsxs("button",{onClick:()=>S(J?null:G.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ae?he?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${fe.bg} ${fe.color}`}`,children:ae?he?s.jsx(nn,{className:"w-4 h-4"}):s.jsx(Iu,{className:"w-4 h-4"}):K+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${fe.color}`,children:G.bloomsLevel}),s.jsx("span",{className:"text-[9px] text-gray-600",children:""}),s.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:MAe[G.type]||G.type}),s.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(Yn,{className:"w-3 h-3"}),G.xp," XP"]}),s.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(G.xp/2)," if wrong"]})]}),s.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:G.stem})]}),s.jsx(_u,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${J?"rotate-90":""}`})]}),J&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[G.context&&s.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:G.context}),G.type==="ranking"?s.jsx(BAe,{question:G,answer:H,onSelect:O}):G.type==="multiple_select"?s.jsx(LAe,{question:G,answer:H,onSelect:O}):s.jsx(DAe,{question:G,answer:H,onSelect:O}),G.type==="linked_mc"&&G.linkedFollowUp&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[s.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),s.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:G.linkedFollowUp.stem}),s.jsx("div",{className:"space-y-2",children:G.linkedFollowUp.options.map(Y=>{const ne=(H==null?void 0:H.linkedSelected)===Y.id,re=ae,ye=Y.id===G.linkedFollowUp.correctAnswer;return s.jsxs("button",{onClick:()=>A(G.id,Y.id),disabled:ae,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${re?ye?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ne?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ne?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Y.id.toUpperCase(),"."]})," ",Y.text]},Y.id)})})]}),ae?s.jsxs("div",{className:`p-4 rounded-xl border ${he?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[he?s.jsx(nn,{className:"w-5 h-5 text-emerald-400"}):s.jsx(Iu,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:`font-bold text-sm ${he?"text-emerald-400":"text-red-400"}`,children:he?`Correct! +${G.xp} XP`:`Incorrect  ${(H==null?void 0:H.penalty)||Math.ceil(G.xp/2)} XP penalty`})]}),s.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:G.explanation})]}):s.jsx("button",{onClick:()=>j(G),disabled:!(H!=null&&H.selected)||Array.isArray(H==null?void 0:H.selected)&&H.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},G.id)}),k.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[s.jsx(ef,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},DAe=({question:t,answer:e,onSelect:r})=>s.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,o=n.id===t.correctAnswer;return s.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?o?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),LAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const o=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return s.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":o?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":o?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${o?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:o&&s.jsx(nn,{className:"w-3 h-3 text-white"})}),s.jsxs("span",{children:[s.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},BAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[s.jsx(ele,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&s.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((o,c)=>{const d=t.options.find(p=>p.id===o),h=a&&i[c]===o;return s.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},o)})}),t.options.map(o=>{const c=n.includes(o.id),d=n.indexOf(o.id);return s.jsxs("button",{onClick:()=>r(t.id,o.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?s.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):s.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),o.text]},o.id)})]})};function $Ae(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${Jv.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return Jv.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const UAe=({assignment:t,onComplete:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!0),[o,c]=T.useState(!1),d=T.useRef(Uv()),h=T.useRef(Date.now()),p=T.useRef(e),[m,y]=T.useState(!0),[x,_]=T.useState(0);T.useEffect(()=>{p.current=e},[e]);const S=T.useCallback(()=>{h.current=Date.now(),m||y(!0)},[m]);T.useEffect(()=>{const E=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,_(d.current.engagementTime),m||y(!0)):m&&y(!1)},1e3);return()=>clearInterval(E)},[m]),T.useEffect(()=>{const E=["mousemove","keydown","scroll","click"];return E.forEach(I=>window.addEventListener(I,S)),()=>{E.forEach(I=>window.removeEventListener(I,S))}},[S]),T.useEffect(()=>()=>{p.current(d.current)},[]),T.useEffect(()=>{(async()=>{i(!0);try{const I=await da(ot(Ie,"reading_materials",t.id));I.exists()?n(I.data()):c(!0)}catch(I){console.error("Failed to load reading material:",I),c(!0)}finally{i(!1)}})()},[t.id]);const w=T.useMemo(()=>r?r.sections.map(E=>({title:E.title,html:$Ae(E.content)})):[],[r]);return a?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(Ti,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):o||!r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(as,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?s.jsx(Y8,{className:"w-4 h-4"}):s.jsx(to,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(x/60),"m ",x%60,"s"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Is,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:S,children:s.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),s.jsx("div",{className:"space-y-10",children:w.map((E,I)=>s.jsxs("div",{className:"group",children:[s.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[s.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:I+1}),E.title]}),s.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:E.html}})]},I))}),s.jsx("div",{className:"mt-12 mb-4 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[s.jsx(as,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},zAe=({user:t})=>{const[e,r]=T.useState(!1),[n,a]=T.useState(""),[i,o]=T.useState("bug"),[c,d]=T.useState(!1),[h,p]=T.useState(!1),m=async()=>{if(n.trim()){d(!0);try{await Re.submitBugReport({userId:t.id,userName:t.name,userEmail:t.email,category:i,description:n.trim(),page:window.location.pathname,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}),p(!0),setTimeout(()=>{p(!1),r(!1),a("")},2e3)}catch{}finally{d(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 left-4 z-40 p-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-full text-gray-400 hover:text-white transition-all shadow-lg backdrop-blur-md group",title:"Report a bug",children:s.jsx(mR,{className:"w-4 h-4 group-hover:text-amber-400 transition"})}),e&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:()=>r(!1),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsx("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-md shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-300",onClick:y=>y.stopPropagation(),children:h?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(r0,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Report Submitted"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Thanks for helping improve Porter Portal!"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(mR,{className:"w-5 h-5 text-amber-400"})," Report an Issue"]}),s.jsx("button",{onClick:()=>r(!1),className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(aa,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:["bug","feature","other"].map(y=>s.jsx("button",{onClick:()=>o(y),className:`flex-1 px-3 py-2 rounded-xl text-xs font-bold transition border ${i===y?"bg-purple-600/60 text-white border-purple-500/50":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10"}`,children:y==="bug"?"Bug":y==="feature"?"Feature Request":"Other"},y))}),s.jsx("textarea",{value:n,onChange:y=>a(y.target.value),placeholder:"Describe what happened or what you'd like to see...",rows:4,maxLength:1e3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("p",{className:"text-[10px] text-gray-600 text-right",children:[n.length,"/1000"]}),s.jsxs("button",{onClick:m,disabled:!n.trim()||c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl font-bold transition",children:[s.jsx(tE,{className:"w-4 h-4"}),c?"Submitting...":"Submit Report"]})]})]})})]})]})},VAe={3:"text-blue-400",7:"text-green-400",14:"text-purple-400",21:"text-amber-400",30:"text-red-400",50:"text-pink-400",100:"text-cyan-400"},FAe=({userId:t,streakData:e,compact:r})=>{var h,p;const[n,a]=T.useState(e||null),[i,o]=T.useState(null);if(T.useEffect(()=>{(async()=>{try{const y=await Re.updateDailyStreak(t);y.freezeUsed?(o({message:"Streak Freeze used! Streak saved.",type:"freeze"}),setTimeout(()=>o(null),3e3)):y.newMilestone&&(o({message:`${y.newMilestone}-day streak milestone!`,type:"milestone"}),setTimeout(()=>o(null),3e3))}catch{}})()},[t]),T.useEffect(()=>{e&&a(e)},[e]),!n)return null;const c=n.currentStreak>=30?"text-red-400 animate-pulse":n.currentStreak>=14?"text-orange-400":n.currentStreak>=7?"text-amber-400":n.currentStreak>=3?"text-yellow-400":"text-gray-500";if(r)return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Tu,{className:`w-4 h-4 ${c}`}),s.jsx("span",{className:`text-sm font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-500"}`,children:n.currentStreak}),n.freezeTokens>0&&s.jsx("div",{className:"flex items-center gap-0.5 ml-1",title:`${n.freezeTokens} streak freeze${n.freezeTokens!==1?"s":""}`,children:Array.from({length:n.freezeTokens}).map((m,y)=>s.jsx(d3,{className:"w-3 h-3 text-cyan-400"},y))})]});const d=Array.from({length:7}).map((m,y)=>{var E;const x=new Date(Date.now()-(6-y)*864e5).toISOString().split("T")[0],_=(E=n.streakHistory)==null?void 0:E.includes(x),S=x===new Date().toISOString().split("T")[0],w=new Date(x).toLocaleDateString("en-US",{weekday:"narrow"});return{date:x,isActive:_,isToday:S,dayLabel:w}});return s.jsxs("div",{className:"relative",children:[i&&s.jsxs("div",{className:`absolute -top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-xl text-xs font-bold animate-in slide-in-from-bottom-2 fade-in duration-300 whitespace-nowrap ${i.type==="freeze"?"bg-cyan-600/90 text-white":i.type==="milestone"?"bg-amber-600/90 text-white":"bg-orange-600/90 text-white"}`,children:[i.type==="freeze"&&s.jsx(d3,{className:"w-3 h-3 inline mr-1"}),i.type==="milestone"&&s.jsx(rl,{className:"w-3 h-3 inline mr-1"}),i.message]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Tu,{className:`w-7 h-7 ${c}`}),s.jsxs("div",{children:[s.jsxs("div",{className:`text-2xl font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-400"}`,children:[n.currentStreak," Day",n.currentStreak!==1?"s":""]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold",children:["Current Streak | Best: ",n.longestStreak]})]})]}),s.jsx("div",{className:"flex items-center gap-1",title:`${n.freezeTokens} / ${n.maxFreezeTokens} freeze tokens`,children:Array.from({length:n.maxFreezeTokens}).map((m,y)=>s.jsx(d3,{className:`w-5 h-5 ${y<n.freezeTokens?"text-cyan-400":"text-gray-700"}`},y))})]}),s.jsx("div",{className:"flex gap-1.5",children:d.map(m=>s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-500 mb-1",children:m.dayLabel}),s.jsx("div",{className:`w-full aspect-square rounded-lg flex items-center justify-center text-xs font-bold transition ${m.isActive?"bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-500/20":m.isToday?"border-2 border-dashed border-amber-500/40 text-amber-500/40":"bg-white/5 text-gray-700"}`,children:m.isActive?s.jsx(Tu,{className:"w-3.5 h-3.5"}):""})]},m.date))}),(((h=n.milestones)==null?void 0:h.length)||0)>0&&s.jsx("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/5",children:(p=n.milestones)==null?void 0:p.map(m=>s.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full bg-white/5 border border-white/10 ${VAe[m]||"text-white"}`,children:[m,"d"]},m))})]})]})},qAe=({classConfigs:t,availableSections:e})=>{const r=qa(),{confirm:n}=ko(),[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(jr.AP_PHYSICS),[p,m]=T.useState(""),[y,x]=T.useState(""),[_,S]=T.useState(null);T.useEffect(()=>{const O=Re.subscribeToEnrollmentCodes(i);return()=>O()},[]);const w=async()=>{const O=await Re.createEnrollmentCode(d,p||void 0,y?parseInt(y):void 0);r.success(`Code created: ${O}`),c(!1),m(""),x("")},E=(O,A)=>{navigator.clipboard.writeText(O),S(A),setTimeout(()=>S(null),2e3)},I=async O=>{await n({message:"Deactivate this enrollment code?",confirmLabel:"Deactivate"})&&await Re.deactivateEnrollmentCode(O)},R=t&&t.length>0?t.map(O=>O.className):Object.values(jr).filter(O=>O!=="Uncategorized"),L=a.filter(O=>O.isActive),C=a.filter(O=>!O.isActive);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(ag,{className:"w-5 h-5 text-emerald-400"}),"Enrollment Codes"]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Ea,{className:"w-3.5 h-3.5"})," Generate Code"]})]}),o&&s.jsxs("div",{className:"mb-5 p-4 bg-black/20 border border-white/10 rounded-xl space-y-3 animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("select",{value:d,onChange:O=>h(O.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:R.map(O=>s.jsx("option",{value:O,children:O},O))}),s.jsxs("select",{value:p,onChange:O=>m(O.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"",children:"No Section"}),e.map(O=>s.jsx("option",{value:O,children:O},O))]})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("input",{type:"number",min:"1",placeholder:"Max uses (unlimited if empty)",value:y,onChange:O=>x(O.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50"}),s.jsx("button",{onClick:w,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx(aa,{className:"w-4 h-4"})})]})]}),L.length===0&&!o?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(ag,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active enrollment codes. Generate one to let students self-enroll."]}):s.jsx("div",{className:"space-y-2",children:L.map(O=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 border border-white/10 rounded-xl group hover:border-emerald-500/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("code",{className:"text-lg font-mono font-bold text-emerald-400 tracking-widest",children:O.code}),s.jsx("span",{className:"text-xs text-gray-500",children:O.classType}),O.section&&s.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded",children:O.section})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-[10px] text-gray-500",children:[O.usedCount," used",O.maxUses?` / ${O.maxUses}`:""]}),s.jsx("button",{onClick:()=>E(O.code,O.id),className:"p-1.5 text-gray-500 hover:text-white transition",title:"Copy code",children:_===O.id?s.jsx(ql,{className:"w-3.5 h-3.5 text-green-400"}):s.jsx(Jh,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>I(O.id),className:"p-1.5 text-gray-500 hover:text-red-400 transition",title:"Deactivate",children:s.jsx(rle,{className:"w-3.5 h-3.5"})})]})]},O.id))}),C.length>0&&s.jsxs("details",{className:"mt-4",children:[s.jsxs("summary",{className:"text-[10px] text-gray-500 cursor-pointer hover:text-gray-300 uppercase tracking-widest font-bold",children:[C.length," expired code",C.length!==1?"s":""]}),s.jsx("div",{className:"mt-2 space-y-1",children:C.map(O=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/10 border border-white/5 rounded-lg opacity-50",children:[s.jsx("code",{className:"text-sm font-mono text-gray-500",children:O.code}),s.jsxs("span",{className:"text-[10px] text-gray-600",children:[O.classType," | ",O.usedCount," used"]})]},O.id))})]})]})},HAe=({userName:t,userId:e,onLogout:r})=>{const[n,a]=T.useState(""),[i,o]=T.useState(!1),[c,d]=T.useState(null),[h,p]=T.useState(null),m=x=>{const _=x.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);a(_.length>4?_.slice(0,4)+"-"+_.slice(4):_),d(null)},y=async()=>{if(n.replace("-","").length<4){d("Please enter a valid enrollment code.");return}o(!0),d(null);try{const x=await Re.redeemEnrollmentCode(n,e);x.success?p(`Enrolled in ${x.classType}! Refreshing...`):d(x.error||"Failed to redeem code.")}catch{d("Something went wrong. Please try again.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[s.jsx(V2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:["Hi ",t,"! Your account is not yet enrolled in a class."]}),s.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-2xl p-6 mb-6 text-left",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-white mb-3",children:[s.jsx(ag,{className:"w-4 h-4 text-emerald-400"}),"Have an enrollment code?"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:n,onChange:x=>m(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!i&&y()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-center text-lg font-mono font-bold text-emerald-400 tracking-[0.2em] placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:i||!!h}),s.jsx("button",{onClick:y,disabled:i||!!h||n.replace("-","").length<4,className:"px-5 py-3 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl font-bold transition flex items-center gap-2",children:i?s.jsx(Ti,{className:"w-4 h-4 animate-spin"}):"Join"})]}),c&&s.jsx("p",{className:"mt-3 text-sm text-red-400 animate-in fade-in slide-in-from-top-1 duration-200",children:c}),h&&s.jsxs("p",{className:"mt-3 text-sm text-emerald-400 flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[s.jsx(r0,{className:"w-4 h-4"})," ",h]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["No code? Ask ",RH," for one, or wait for manual authorization."]}),s.jsx("button",{onClick:r,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})})},aV={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING","Intel Dossier":"INTEL"},GAe=()=>{var ie,Be;const[t,e]=T.useState(null),[r,n]=T.useState("Dashboard"),[a,i]=T.useState([]),[o,c]=T.useState([]),[d,h]=T.useState([]),[p,m]=T.useState([]),[y,x]=T.useState([]),[_,S]=T.useState(null),[w,E]=T.useState("STUDENT"),[I,R]=T.useState("WORK"),[L,C]=T.useState(!1),[O,A]=T.useState(!1),[j,k]=T.useState(!0),[z,D]=T.useState(!1),[$,B]=T.useState(new Set),G=T.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),K=T.useRef(new Set);T.useEffect(()=>{if(!(t!=null&&t.id)||t.role===Ba.ADMIN)return;const Q=Re.subscribeToMyGroups(t.id,te=>{K.current=new Set(te.map(_e=>_e.id))});return()=>Q()},[t==null?void 0:t.id,t==null?void 0:t.role]);const H=T.useCallback(Q=>{const te=Date.now();G.current[Q]=te,localStorage.setItem("chatChannelLastSeen",JSON.stringify(G.current)),B(_e=>{if(!_e.has(Q))return _e;const Se=new Set(_e);return Se.delete(Q),Se})},[]);T.useEffect(()=>{const Q=Re.subscribeToRecentMessages(te=>{const _e=new Set,Se=G.current,Qe=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(nt=>`class_${nt.replace(/\s+/g,"_").toLowerCase()}`));for(const nt of te){if(!nt.channelId||nt.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==Ba.ADMIN){if(nt.channelId.startsWith("group_")){const lt=nt.channelId.slice(6);if(!K.current.has(lt))continue}else if(nt.channelId.startsWith("class_")&&!Qe.has(nt.channelId))continue}const Ot=new Date(nt.timestamp).getTime(),Me=Se[nt.channelId]||0;Ot>Me&&_e.add(nt.channelId)}B(_e)});return()=>Q()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const J=T.useMemo(()=>{const Q=new Map;return o.forEach(te=>{const _e=Q.get(te.userId)||[];_e.push(te),Q.set(te.userId,_e)}),d.map(te=>{const _e=Q.get(te.id)||[],Se=_e.length,Qe=Math.round(_e.reduce((nt,Ot)=>{var Me;return nt+(((Me=Ot.metrics)==null?void 0:Me.engagementTime)||0)},0)/60);return{...te,stats:{problemsCompleted:Se,avgScore:0,rawAccuracy:0,totalTime:Qe}}})},[d,o]),ae=T.useMemo(()=>{const Q=new Set;return d.forEach(te=>{te.section&&Q.add(te.section)}),Array.from(Q).sort()},[d]),he=T.useMemo(()=>a.find(Q=>Q.id===_)||null,[a,_]);T.useEffect(()=>{if(C(!1),A(!1),!_)return;const Q=da(ot(Ie,"question_banks",_)).then(_e=>{_e.exists()&&(_e.data().questions||[]).length>0&&C(!0)}).catch(()=>{}),te=da(ot(Ie,"reading_materials",_)).then(_e=>{_e.exists()&&A(!0)}).catch(()=>{});Promise.all([Q,te]).then(()=>{})},[_]),T.useEffect(()=>{let Q=null;const te=ite(LT,async _e=>{_e?(await fe(_e),Q=Dr(ot(Ie,"users",_e.uid),Se=>{Se.exists()&&e(Qe=>({...Qe||{},...Se.data(),id:_e.uid}))})):(e(null),Q&&Q(),k(!1))});return()=>{te(),Q&&Q()}},[]),T.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Ba.ADMIN)){const Q=Re.subscribeToAssignments(i),te=Re.subscribeToClassConfigs(x),_e=[Q,te];return t.role===Ba.ADMIN?(_e.push(Re.subscribeToSubmissions(c)),_e.push(Re.subscribeToUsers(h)),_e.push(Re.subscribeToWhitelist(m))):_e.push(Re.subscribeToUserSubmissions(t.id,c)),()=>_e.forEach(Se=>Se())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),T.useEffect(()=>{(t==null?void 0:t.role)===Ba.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),T.useEffect(()=>{var Q;ece(((Q=t==null?void 0:t.settings)==null?void 0:Q.soundEffects)!==!1)},[(ie=t==null?void 0:t.settings)==null?void 0:ie.soundEffects]),Yle((t==null?void 0:t.id)||null,((Be=t==null?void 0:t.settings)==null?void 0:Be.pushNotifications)===!0);const fe=async Q=>{try{const te=ot(Ie,"users",Q.uid),_e=await da(te),Se=await da(ot(Ie,"allowed_emails",Q.email||"")),nt=(await Q.getIdTokenResult()).claims.admin===!0||Q.email===qle,Ot=Se.exists()||nt,Me=Se.exists()?Se.data():null,lt=(Me==null?void 0:Me.classType)||jr.UNCATEGORIZED,St=(Me==null?void 0:Me.classTypes)||(lt!==jr.UNCATEGORIZED?[lt]:[]);if(_e.exists()){const vt=_e.data(),et={lastLoginAt:new Date().toISOString(),isWhitelisted:Ot};if(nt&&(et.role="ADMIN"),!Ot&&!nt&&(et.enrolledClasses=[]),Ot&&St.length>0){const ce=vt.enrolledClasses||[],Ue=Array.from(new Set([...ce,...St]));Ue.length!==ce.length&&(et.enrolledClasses=Ue,(!vt.classType||vt.classType===jr.UNCATEGORIZED)&&(et.classType=St[0]))}await ir(te,et)}else{const vt={email:Q.email,name:Q.displayName||"Student",avatarUrl:Q.photoURL||"",role:nt?"ADMIN":"STUDENT",classType:lt,enrolledClasses:Ot?St:[],isWhitelisted:Ot,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Wn(te,vt)}}catch(te){console.error(te)}finally{k(!1)}},Y=async()=>{await ste(LT),e(null),S(null)},ne=Q=>{R("WORK"),S(Q)},re=T.useRef(he),ye=T.useRef(t);T.useEffect(()=>{re.current=he},[he]),T.useEffect(()=>{ye.current=t},[t]);const Te=async Q=>{const te=ye.current,_e=re.current;if(!(!te||!_e||te.role===Ba.ADMIN)&&!(Q.engagementTime<10))try{await Re.submitEngagement(te.id,te.name,_e.id,_e.title,Q,_e.classType)}catch(Se){console.error("Engagement submission failed:",Se)}},Ve=T.useMemo(()=>{const Q={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const te=y.find(_e=>_e.className===t.classType);if(te)return te.features}return Q},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(j)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return s.jsx(Hde,{});if(!t.isWhitelisted&&t.role!==Ba.ADMIN)return s.jsx(HAe,{userName:t.name,userId:t.id,onLogout:Y});const Je=t.role===Ba.ADMIN||Ve.physicsTools,Xe=t.role===Ba.ADMIN||Ve.communications;return s.jsx(RAe,{children:s.jsx(Gde,{children:s.jsx(Wle,{children:s.jsxs(s.Fragment,{children:[s.jsx(Kle,{}),Je&&s.jsx(O0e,{onToggleChat:Xe?()=>D(!z):void 0,hasUnreadChat:$.size>0}),Xe&&s.jsx(M0e,{user:t,isOpen:z,onClose:()=>D(!1),assignments:a,classConfigs:y,unreadChannels:$,onMarkChannelRead:H,onOpenResource:Q=>{ne(Q)}}),s.jsx(nce,{user:t,onLogout:Y,activeTab:r,setActiveTab:n,children:he?s.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[he.title,t.role===Ba.ADMIN&&s.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),s.jsxs("div",{className:"flex gap-4 mt-2",children:[s.jsx("button",{onClick:()=>R("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${I==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),L&&s.jsxs("button",{onClick:()=>R("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Ao,{className:"w-3.5 h-3.5"})," Review"]}),O&&s.jsxs("button",{onClick:()=>R("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(as,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&s.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[s.jsx("button",{onClick:()=>E("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),s.jsx("button",{onClick:()=>E("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),s.jsxs("button",{onClick:()=>{S(null),R("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[s.jsx(Joe,{className:"w-4 h-4"})," Exit"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[I==="WORK"&&s.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(qde,{onComplete:Te,contentUrl:he.contentUrl,htmlContent:he.htmlContent,userId:t.id,assignmentId:he.id,classType:he.classType,lessonBlocks:he.lessonBlocks})}),w==="ADMIN"&&t.role===Ba.ADMIN&&s.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(ig,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:s.jsx(ss,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o.filter(Q=>Q.assignmentId===he.id&&!Q.isArchived).length}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),s.jsx("button",{onClick:()=>D(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),I==="REVIEW"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(PAe,{assignment:he})}),I==="STUDY"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(UAe,{assignment:he,onComplete:Te})})]})]}):s.jsx("div",{className:"h-full",children:s.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Ba.ADMIN&&s.jsxs(s.Fragment,{children:[r==="Dashboard"&&s.jsx(r0e,{users:J,assignments:a,submissions:o}),r==="User Management"&&s.jsx(n0e,{users:J,whitelistedEmails:p,classConfigs:y,onWhitelist:async(Q,te)=>Re.addToWhitelist(Q,te)}),r==="Admin Panel"&&s.jsx(y0e,{assignments:a,submissions:o,users:d,onCreateAssignment:async Q=>{Q.title&&await Re.addAssignment(Q)},classConfigs:y,availableSections:ae,onPreviewAssignment:Q=>{E("STUDENT"),ne(Q)}}),r==="Student Groups"&&s.jsx(k0e,{students:J.filter(Q=>Q.role==="STUDENT"),availableSections:ae,fullPage:!0}),r==="Enrollment Codes"&&s.jsx(qAe,{classConfigs:y,availableSections:ae}),r.startsWith("XP Command:")&&s.jsx(E0e,{users:d,initialTab:r.split(":")[1]})]}),t.role===Ba.STUDENT&&s.jsxs(s.Fragment,{children:[r in aV&&s.jsx(YTe,{user:t,assignments:a,submissions:o,enabledFeatures:Ve,onNavigate:n,onStartAssignment:ne,studentTab:aV[r]}),r==="Forensics"&&Ve.evidenceLocker&&s.jsx(AAe,{user:t}),r==="Physics Lab"&&Ve.physicsLab&&s.jsx(jAe,{user:t}),r==="Leaderboard"&&Ve.leaderboard&&s.jsx(IAe,{user:t})]})]},r)})}),s.jsx(zAe,{user:t}),t.role===Ba.STUDENT&&s.jsx("div",{className:"fixed top-3 right-48 z-30",children:s.jsx(FAe,{userId:t.id,compact:!0})})]})})})})},ZX=document.getElementById("root");if(!ZX)throw new Error("Could not find root element to mount to");const WAe=BZ.createRoot(ZX);WAe.render(s.jsx(se.StrictMode,{children:s.jsx(GAe,{})}));
